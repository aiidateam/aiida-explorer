function _mergeNamespaces(r,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in r)){const c=Object.getOwnPropertyDescriptor(a,o);c&&Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jsxRuntime$1={exports:{}},reactJsxRuntime_production$1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production$1;function requireReactJsxRuntime_production$1(){if(hasRequiredReactJsxRuntime_production$1)return reactJsxRuntime_production$1;hasRequiredReactJsxRuntime_production$1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:r,type:a,key:d,ref:o!==void 0?o:null,props:c}}return reactJsxRuntime_production$1.Fragment=e,reactJsxRuntime_production$1.jsx=t,reactJsxRuntime_production$1.jsxs=t,reactJsxRuntime_production$1}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime$1.exports=requireReactJsxRuntime_production$1()),jsxRuntime$1.exports}var jsxRuntimeExports$1=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),j=Symbol.iterator;function V(Gl){return Gl===null||typeof Gl!="object"?null:(Gl=j&&Gl[j]||Gl["@@iterator"],typeof Gl=="function"?Gl:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},re=Object.assign,ie={};function K(Gl,Ip,qp){this.props=Gl,this.context=Ip,this.refs=ie,this.updater=qp||J}K.prototype.isReactComponent={},K.prototype.setState=function(Gl,Ip){if(typeof Gl!="object"&&typeof Gl!="function"&&Gl!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Gl,Ip,"setState")},K.prototype.forceUpdate=function(Gl){this.updater.enqueueForceUpdate(this,Gl,"forceUpdate")};function Ne(){}Ne.prototype=K.prototype;function G(Gl,Ip,qp){this.props=Gl,this.context=Ip,this.refs=ie,this.updater=qp||J}var se=G.prototype=new Ne;se.constructor=G,re(se,K.prototype),se.isPureReactComponent=!0;var He=Array.isArray;function Fe(){}var Xe={H:null,A:null,T:null,S:null},be=Object.prototype.hasOwnProperty;function ta(Gl,Ip,qp){var ci=qp.ref;return{$$typeof:r,type:Gl,key:Ip,ref:ci!==void 0?ci:null,props:qp}}function pn(Gl,Ip){return ta(Gl.type,Ip,Gl.props)}function mr(Gl){return typeof Gl=="object"&&Gl!==null&&Gl.$$typeof===r}function bp(Gl){var Ip={"=":"=0",":":"=2"};return"$"+Gl.replace(/[=:]/g,function(qp){return Ip[qp]})}var Sp=/\/+/g;function _r(Gl,Ip){return typeof Gl=="object"&&Gl!==null&&Gl.key!=null?bp(""+Gl.key):Ip.toString(36)}function xs(Gl){switch(Gl.status){case"fulfilled":return Gl.value;case"rejected":throw Gl.reason;default:switch(typeof Gl.status=="string"?Gl.then(Fe,Fe):(Gl.status="pending",Gl.then(function(Ip){Gl.status==="pending"&&(Gl.status="fulfilled",Gl.value=Ip)},function(Ip){Gl.status==="pending"&&(Gl.status="rejected",Gl.reason=Ip)})),Gl.status){case"fulfilled":return Gl.value;case"rejected":throw Gl.reason}}throw Gl}function ne(Gl,Ip,qp,ci,Ep){var o0=typeof Gl;(o0==="undefined"||o0==="boolean")&&(Gl=null);var w0=!1;if(Gl===null)w0=!0;else switch(o0){case"bigint":case"string":case"number":w0=!0;break;case"object":switch(Gl.$$typeof){case r:case e:w0=!0;break;case A:return w0=Gl._init,ne(w0(Gl._payload),Ip,qp,ci,Ep)}}if(w0)return Ep=Ep(Gl),w0=ci===""?"."+_r(Gl,0):ci,He(Ep)?(qp="",w0!=null&&(qp=w0.replace(Sp,"$&/")+"/"),ne(Ep,Ip,qp,"",function(am){return am})):Ep!=null&&(mr(Ep)&&(Ep=pn(Ep,qp+(Ep.key==null||Gl&&Gl.key===Ep.key?"":(""+Ep.key).replace(Sp,"$&/")+"/")+w0)),Ip.push(Ep)),1;w0=0;var a0=ci===""?".":ci+":";if(He(Gl))for(var P0=0;P0<Gl.length;P0++)ci=Gl[P0],o0=a0+_r(ci,P0),w0+=ne(ci,Ip,qp,o0,Ep);else if(P0=V(Gl),typeof P0=="function")for(Gl=P0.call(Gl),P0=0;!(ci=Gl.next()).done;)ci=ci.value,o0=a0+_r(ci,P0++),w0+=ne(ci,Ip,qp,o0,Ep);else if(o0==="object"){if(typeof Gl.then=="function")return ne(xs(Gl),Ip,qp,ci,Ep);throw Ip=String(Gl),Error("Objects are not valid as a React child (found: "+(Ip==="[object Object]"?"object with keys {"+Object.keys(Gl).join(", ")+"}":Ip)+"). If you meant to render a collection of children, use an array instead.")}return w0}function zl(Gl,Ip,qp){if(Gl==null)return Gl;var ci=[],Ep=0;return ne(Gl,ci,"","",function(o0){return Ip.call(qp,o0,Ep++)}),ci}function Hl(Gl){if(Gl._status===-1){var Ip=Gl._result;Ip=Ip(),Ip.then(function(qp){(Gl._status===0||Gl._status===-1)&&(Gl._status=1,Gl._result=qp)},function(qp){(Gl._status===0||Gl._status===-1)&&(Gl._status=2,Gl._result=qp)}),Gl._status===-1&&(Gl._status=0,Gl._result=Ip)}if(Gl._status===1)return Gl._result.default;throw Gl._result}var pr=typeof reportError=="function"?reportError:function(Gl){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ip=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Gl=="object"&&Gl!==null&&typeof Gl.message=="string"?String(Gl.message):String(Gl),error:Gl});if(!window.dispatchEvent(Ip))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Gl);return}console.error(Gl)},Hp={map:zl,forEach:function(Gl,Ip,qp){zl(Gl,function(){Ip.apply(this,arguments)},qp)},count:function(Gl){var Ip=0;return zl(Gl,function(){Ip++}),Ip},toArray:function(Gl){return zl(Gl,function(Ip){return Ip})||[]},only:function(Gl){if(!mr(Gl))throw Error("React.Children.only expected to receive a single React element child.");return Gl}};return react_production.Activity=C,react_production.Children=Hp,react_production.Component=K,react_production.Fragment=t,react_production.Profiler=o,react_production.PureComponent=G,react_production.StrictMode=a,react_production.Suspense=_,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xe,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Gl){return Xe.H.useMemoCache(Gl)}},react_production.cache=function(Gl){return function(){return Gl.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(Gl,Ip,qp){if(Gl==null)throw Error("The argument must be a React element, but you passed "+Gl+".");var ci=re({},Gl.props),Ep=Gl.key;if(Ip!=null)for(o0 in Ip.key!==void 0&&(Ep=""+Ip.key),Ip)!be.call(Ip,o0)||o0==="key"||o0==="__self"||o0==="__source"||o0==="ref"&&Ip.ref===void 0||(ci[o0]=Ip[o0]);var o0=arguments.length-2;if(o0===1)ci.children=qp;else if(1<o0){for(var w0=Array(o0),a0=0;a0<o0;a0++)w0[a0]=arguments[a0+2];ci.children=w0}return ta(Gl.type,Ep,ci)},react_production.createContext=function(Gl){return Gl={$$typeof:d,_currentValue:Gl,_currentValue2:Gl,_threadCount:0,Provider:null,Consumer:null},Gl.Provider=Gl,Gl.Consumer={$$typeof:c,_context:Gl},Gl},react_production.createElement=function(Gl,Ip,qp){var ci,Ep={},o0=null;if(Ip!=null)for(ci in Ip.key!==void 0&&(o0=""+Ip.key),Ip)be.call(Ip,ci)&&ci!=="key"&&ci!=="__self"&&ci!=="__source"&&(Ep[ci]=Ip[ci]);var w0=arguments.length-2;if(w0===1)Ep.children=qp;else if(1<w0){for(var a0=Array(w0),P0=0;P0<w0;P0++)a0[P0]=arguments[P0+2];Ep.children=a0}if(Gl&&Gl.defaultProps)for(ci in w0=Gl.defaultProps,w0)Ep[ci]===void 0&&(Ep[ci]=w0[ci]);return ta(Gl,o0,Ep)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Gl){return{$$typeof:p,render:Gl}},react_production.isValidElement=mr,react_production.lazy=function(Gl){return{$$typeof:A,_payload:{_status:-1,_result:Gl},_init:Hl}},react_production.memo=function(Gl,Ip){return{$$typeof:S,type:Gl,compare:Ip===void 0?null:Ip}},react_production.startTransition=function(Gl){var Ip=Xe.T,qp={};Xe.T=qp;try{var ci=Gl(),Ep=Xe.S;Ep!==null&&Ep(qp,ci),typeof ci=="object"&&ci!==null&&typeof ci.then=="function"&&ci.then(Fe,pr)}catch(o0){pr(o0)}finally{Ip!==null&&qp.types!==null&&(Ip.types=qp.types),Xe.T=Ip}},react_production.unstable_useCacheRefresh=function(){return Xe.H.useCacheRefresh()},react_production.use=function(Gl){return Xe.H.use(Gl)},react_production.useActionState=function(Gl,Ip,qp){return Xe.H.useActionState(Gl,Ip,qp)},react_production.useCallback=function(Gl,Ip){return Xe.H.useCallback(Gl,Ip)},react_production.useContext=function(Gl){return Xe.H.useContext(Gl)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Gl,Ip){return Xe.H.useDeferredValue(Gl,Ip)},react_production.useEffect=function(Gl,Ip){return Xe.H.useEffect(Gl,Ip)},react_production.useEffectEvent=function(Gl){return Xe.H.useEffectEvent(Gl)},react_production.useId=function(){return Xe.H.useId()},react_production.useImperativeHandle=function(Gl,Ip,qp){return Xe.H.useImperativeHandle(Gl,Ip,qp)},react_production.useInsertionEffect=function(Gl,Ip){return Xe.H.useInsertionEffect(Gl,Ip)},react_production.useLayoutEffect=function(Gl,Ip){return Xe.H.useLayoutEffect(Gl,Ip)},react_production.useMemo=function(Gl,Ip){return Xe.H.useMemo(Gl,Ip)},react_production.useOptimistic=function(Gl,Ip){return Xe.H.useOptimistic(Gl,Ip)},react_production.useReducer=function(Gl,Ip,qp){return Xe.H.useReducer(Gl,Ip,qp)},react_production.useRef=function(Gl){return Xe.H.useRef(Gl)},react_production.useState=function(Gl){return Xe.H.useState(Gl)},react_production.useSyncExternalStore=function(Gl,Ip,qp){return Xe.H.useSyncExternalStore(Gl,Ip,qp)},react_production.useTransition=function(){return Xe.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(r){function e(ne,zl){var Hl=ne.length;ne.push(zl);e:for(;0<Hl;){var pr=Hl-1>>>1,Hp=ne[pr];if(0<o(Hp,zl))ne[pr]=zl,ne[Hl]=Hp,Hl=pr;else break e}}function t(ne){return ne.length===0?null:ne[0]}function a(ne){if(ne.length===0)return null;var zl=ne[0],Hl=ne.pop();if(Hl!==zl){ne[0]=Hl;e:for(var pr=0,Hp=ne.length,Gl=Hp>>>1;pr<Gl;){var Ip=2*(pr+1)-1,qp=ne[Ip],ci=Ip+1,Ep=ne[ci];if(0>o(qp,Hl))ci<Hp&&0>o(Ep,qp)?(ne[pr]=Ep,ne[ci]=Hl,pr=ci):(ne[pr]=qp,ne[Ip]=Hl,pr=Ip);else if(ci<Hp&&0>o(Ep,Hl))ne[pr]=Ep,ne[ci]=Hl,pr=ci;else break e}}return zl}function o(ne,zl){var Hl=ne.sortIndex-zl.sortIndex;return Hl!==0?Hl:ne.id-zl.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var _=[],S=[],A=1,C=null,j=3,V=!1,J=!1,re=!1,ie=!1,K=typeof setTimeout=="function"?setTimeout:null,Ne=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function se(ne){for(var zl=t(S);zl!==null;){if(zl.callback===null)a(S);else if(zl.startTime<=ne)a(S),zl.sortIndex=zl.expirationTime,e(_,zl);else break;zl=t(S)}}function He(ne){if(re=!1,se(ne),!J)if(t(_)!==null)J=!0,Fe||(Fe=!0,bp());else{var zl=t(S);zl!==null&&xs(He,zl.startTime-ne)}}var Fe=!1,Xe=-1,be=5,ta=-1;function pn(){return ie?!0:!(r.unstable_now()-ta<be)}function mr(){if(ie=!1,Fe){var ne=r.unstable_now();ta=ne;var zl=!0;try{e:{J=!1,re&&(re=!1,Ne(Xe),Xe=-1),V=!0;var Hl=j;try{t:{for(se(ne),C=t(_);C!==null&&!(C.expirationTime>ne&&pn());){var pr=C.callback;if(typeof pr=="function"){C.callback=null,j=C.priorityLevel;var Hp=pr(C.expirationTime<=ne);if(ne=r.unstable_now(),typeof Hp=="function"){C.callback=Hp,se(ne),zl=!0;break t}C===t(_)&&a(_),se(ne)}else a(_);C=t(_)}if(C!==null)zl=!0;else{var Gl=t(S);Gl!==null&&xs(He,Gl.startTime-ne),zl=!1}}break e}finally{C=null,j=Hl,V=!1}zl=void 0}}finally{zl?bp():Fe=!1}}}var bp;if(typeof G=="function")bp=function(){G(mr)};else if(typeof MessageChannel<"u"){var Sp=new MessageChannel,_r=Sp.port2;Sp.port1.onmessage=mr,bp=function(){_r.postMessage(null)}}else bp=function(){K(mr,0)};function xs(ne,zl){Xe=K(function(){ne(r.unstable_now())},zl)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return j},r.unstable_next=function(ne){switch(j){case 1:case 2:case 3:var zl=3;break;default:zl=j}var Hl=j;j=zl;try{return ne()}finally{j=Hl}},r.unstable_requestPaint=function(){ie=!0},r.unstable_runWithPriority=function(ne,zl){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Hl=j;j=ne;try{return zl()}finally{j=Hl}},r.unstable_scheduleCallback=function(ne,zl,Hl){var pr=r.unstable_now();switch(typeof Hl=="object"&&Hl!==null?(Hl=Hl.delay,Hl=typeof Hl=="number"&&0<Hl?pr+Hl:pr):Hl=pr,ne){case 1:var Hp=-1;break;case 2:Hp=250;break;case 5:Hp=1073741823;break;case 4:Hp=1e4;break;default:Hp=5e3}return Hp=Hl+Hp,ne={id:A++,callback:zl,priorityLevel:ne,startTime:Hl,expirationTime:Hp,sortIndex:-1},Hl>pr?(ne.sortIndex=Hl,e(S,ne),t(_)===null&&ne===t(S)&&(re?(Ne(Xe),Xe=-1):re=!0,xs(He,Hl-pr))):(ne.sortIndex=Hp,e(_,ne),J||V||(J=!0,Fe||(Fe=!0,bp()))),ne},r.unstable_shouldYield=pn,r.unstable_wrapCallback=function(ne){var zl=j;return function(){var Hl=j;j=zl;try{return ne.apply(this,arguments)}finally{j=Hl}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var r=requireReact();function e(_){var S="https://react.dev/errors/"+_;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)S+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+_+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(_,S,A){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:C==null?null:""+C,children:_,containerInfo:S,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(_,S){if(_==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,reactDom_production.createPortal=function(_,S){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(e(299));return c(_,S,null,A)},reactDom_production.flushSync=function(_){var S=d.T,A=a.p;try{if(d.T=null,a.p=2,_)return _()}finally{d.T=S,a.p=A,a.d.f()}},reactDom_production.preconnect=function(_,S){typeof _=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,a.d.C(_,S))},reactDom_production.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},reactDom_production.preinit=function(_,S){if(typeof _=="string"&&S&&typeof S.as=="string"){var A=S.as,C=p(A,S.crossOrigin),j=typeof S.integrity=="string"?S.integrity:void 0,V=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;A==="style"?a.d.S(_,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:C,integrity:j,fetchPriority:V}):A==="script"&&a.d.X(_,{crossOrigin:C,integrity:j,fetchPriority:V,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},reactDom_production.preinitModule=function(_,S){if(typeof _=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var A=p(S.as,S.crossOrigin);a.d.M(_,{crossOrigin:A,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&a.d.M(_)},reactDom_production.preload=function(_,S){if(typeof _=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var A=S.as,C=p(A,S.crossOrigin);a.d.L(_,A,{crossOrigin:C,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},reactDom_production.preloadModule=function(_,S){if(typeof _=="string")if(S){var A=p(S.as,S.crossOrigin);a.d.m(_,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:A,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else a.d.m(_)},reactDom_production.requestFormReset=function(_){a.d.r(_)},reactDom_production.unstable_batchedUpdates=function(_,S){return _(S)},reactDom_production.useFormState=function(_,S,A){return d.H.useFormState(_,S,A)},reactDom_production.useFormStatus=function(){return d.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var r=requireScheduler(),e=requireReact(),t=requireReactDom();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function _(n){if(c(n)!==n)throw Error(a(188))}function S(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(a(188));return i!==n?null:n}for(var l=n,E=i;;){var te=l.return;if(te===null)break;var Me=te.alternate;if(Me===null){if(E=te.return,E!==null){l=E;continue}break}if(te.child===Me.child){for(Me=te.child;Me;){if(Me===l)return _(te),n;if(Me===E)return _(te),i;Me=Me.sibling}throw Error(a(188))}if(l.return!==E.return)l=te,E=Me;else{for(var Io=!1,Rp=te.child;Rp;){if(Rp===l){Io=!0,l=te,E=Me;break}if(Rp===E){Io=!0,E=te,l=Me;break}Rp=Rp.sibling}if(!Io){for(Rp=Me.child;Rp;){if(Rp===l){Io=!0,l=Me,E=te;break}if(Rp===E){Io=!0,E=Me,l=te;break}Rp=Rp.sibling}if(!Io)throw Error(a(189))}}if(l.alternate!==E)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:i}function A(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=A(n),i!==null)return i;n=n.sibling}return null}var C=Object.assign,j=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Ne=Symbol.for("react.consumer"),G=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),He=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),ta=Symbol.for("react.activity"),pn=Symbol.for("react.memo_cache_sentinel"),mr=Symbol.iterator;function bp(n){return n===null||typeof n!="object"?null:(n=mr&&n[mr]||n["@@iterator"],typeof n=="function"?n:null)}var Sp=Symbol.for("react.client.reference");function _r(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Sp?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case re:return"Fragment";case K:return"Profiler";case ie:return"StrictMode";case He:return"Suspense";case Fe:return"SuspenseList";case ta:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case J:return"Portal";case G:return n.displayName||"Context";case Ne:return(n._context.displayName||"Context")+".Consumer";case se:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Xe:return i=n.displayName||null,i!==null?i:_r(n.type)||"Memo";case be:i=n._payload,n=n._init;try{return _r(n(i))}catch{}}return null}var xs=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zl=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Hl={pending:!1,data:null,method:null,action:null},pr=[],Hp=-1;function Gl(n){return{current:n}}function Ip(n){0>Hp||(n.current=pr[Hp],pr[Hp]=null,Hp--)}function qp(n,i){Hp++,pr[Hp]=n.current,n.current=i}var ci=Gl(null),Ep=Gl(null),o0=Gl(null),w0=Gl(null);function a0(n,i){switch(qp(o0,i),qp(Ep,n),qp(ci,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?t3(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=t3(i),n=r3(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Ip(ci),qp(ci,n)}function P0(){Ip(ci),Ip(Ep),Ip(o0)}function am(n){n.memoizedState!==null&&qp(w0,n);var i=ci.current,l=r3(i,n.type);i!==l&&(qp(Ep,n),qp(ci,l))}function sm(n){Ep.current===n&&(Ip(ci),Ip(Ep)),w0.current===n&&(Ip(w0),T2._currentValue=Hl)}var C0,Fm;function Zm(n){if(C0===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);C0=i&&i[1]||"",Fm=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+C0+n+Fm}var p1=!1;function A1(n,i){if(!n||p1)return"";p1=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(i){var X0=function(){throw Error()};if(Object.defineProperty(X0.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X0,[])}catch(cm){var em=cm}Reflect.construct(n,[],X0)}else{try{X0.call()}catch(cm){em=cm}n.call(X0.prototype)}}else{try{throw Error()}catch(cm){em=cm}(X0=n())&&typeof X0.catch=="function"&&X0.catch(function(){})}}catch(cm){if(cm&&em&&typeof cm.stack=="string")return[cm.stack,em.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var te=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");te&&te.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Me=E.DetermineComponentFrameRoot(),Io=Me[0],Rp=Me[1];if(Io&&Rp){var L0=Io.split(`
`),hm=Rp.split(`
`);for(te=E=0;E<L0.length&&!L0[E].includes("DetermineComponentFrameRoot");)E++;for(;te<hm.length&&!hm[te].includes("DetermineComponentFrameRoot");)te++;if(E===L0.length||te===hm.length)for(E=L0.length-1,te=hm.length-1;1<=E&&0<=te&&L0[E]!==hm[te];)te--;for(;1<=E&&0<=te;E--,te--)if(L0[E]!==hm[te]){if(E!==1||te!==1)do if(E--,te--,0>te||L0[E]!==hm[te]){var Am=`
`+L0[E].replace(" at new "," at ");return n.displayName&&Am.includes("<anonymous>")&&(Am=Am.replace("<anonymous>",n.displayName)),Am}while(1<=E&&0<=te);break}}}finally{p1=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Zm(l):""}function T1(n,i){switch(n.tag){case 26:case 27:case 5:return Zm(n.type);case 16:return Zm("Lazy");case 13:return n.child!==i&&i!==null?Zm("Suspense Fallback"):Zm("Suspense");case 19:return Zm("SuspenseList");case 0:case 15:return A1(n.type,!1);case 11:return A1(n.type.render,!1);case 1:return A1(n.type,!0);case 31:return Zm("Activity");default:return""}}function Tm(n){try{var i="",l=null;do i+=T1(n,l),l=n,n=n.return;while(n);return i}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var x1=Object.prototype.hasOwnProperty,S1=r.unstable_scheduleCallback,p0=r.unstable_cancelCallback,zp=r.unstable_shouldYield,om=r.unstable_requestPaint,bm=r.unstable_now,i1=r.unstable_getCurrentPriorityLevel,r1=r.unstable_ImmediatePriority,Gp=r.unstable_UserBlockingPriority,i0=r.unstable_NormalPriority,l0=r.unstable_LowPriority,im=r.unstable_IdlePriority,dm=r.log,pm=r.unstable_setDisableYieldValue,Dm=null,Gm=null;function qm(n){if(typeof dm=="function"&&pm(n),Gm&&typeof Gm.setStrictMode=="function")try{Gm.setStrictMode(Dm,n)}catch{}}var vm=Math.clz32?Math.clz32:_1,r0=Math.log,e1=Math.LN2;function _1(n){return n>>>=0,n===0?32:31-(r0(n)/e1|0)|0}var j1=256,q0=262144,d1=4194304;function tm(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function o1(n,i,l){var E=n.pendingLanes;if(E===0)return 0;var te=0,Me=n.suspendedLanes,Io=n.pingedLanes;n=n.warmLanes;var Rp=E&134217727;return Rp!==0?(E=Rp&~Me,E!==0?te=tm(E):(Io&=Rp,Io!==0?te=tm(Io):l||(l=Rp&~n,l!==0&&(te=tm(l))))):(Rp=E&~Me,Rp!==0?te=tm(Rp):Io!==0?te=tm(Io):l||(l=E&~n,l!==0&&(te=tm(l)))),te===0?0:i!==0&&i!==te&&(i&Me)===0&&(Me=te&-te,l=i&-i,Me>=l||Me===32&&(l&4194048)!==0)?i:te}function jm(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function l1(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gg(){var n=d1;return d1<<=1,(d1&62914560)===0&&(d1=4194304),n}function Jg(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Dg(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Eg(n,i,l,E,te,Me){var Io=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var Rp=n.entanglements,L0=n.expirationTimes,hm=n.hiddenUpdates;for(l=Io&~l;0<l;){var Am=31-vm(l),X0=1<<Am;Rp[Am]=0,L0[Am]=-1;var em=hm[Am];if(em!==null)for(hm[Am]=null,Am=0;Am<em.length;Am++){var cm=em[Am];cm!==null&&(cm.lane&=-536870913)}l&=~X0}E!==0&&ev(n,E,0),Me!==0&&te===0&&n.tag!==0&&(n.suspendedLanes|=Me&~(Io&~i))}function ev(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var E=31-vm(i);n.entangledLanes|=i,n.entanglements[E]=n.entanglements[E]|1073741824|l&261930}function pv(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var E=31-vm(l),te=1<<E;te&i|n[E]&i&&(n[E]|=i),l&=~te}}function sv(n,i){var l=i&-i;return l=(l&42)!==0?1:kv(l),(l&(n.suspendedLanes|i))!==0?0:l}function kv(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Zv(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ry(){var n=zl.p;return n!==0?n:(n=window.event,n===void 0?32:N5(n.type))}function oy(n,i){var l=zl.p;try{return zl.p=n,i()}finally{zl.p=l}}var Hv=Math.random().toString(36).slice(2),vv="__reactFiber$"+Hv,ag="__reactProps$"+Hv,_v="__reactContainer$"+Hv,Mv="__reactEvents$"+Hv,c0="__reactListeners$"+Hv,F0="__reactHandles$"+Hv,Z="__reactResources$"+Hv,Fl="__reactMarker$"+Hv;function Wl(n){delete n[vv],delete n[ag],delete n[Mv],delete n[c0],delete n[F0]}function x0(n){var i=n[vv];if(i)return i;for(var l=n.parentNode;l;){if(i=l[_v]||l[vv]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=T5(n);n!==null;){if(l=n[vv])return l;n=T5(n)}return i}n=l,l=n.parentNode}return null}function S0(n){if(n=n[vv]||n[_v]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Mm(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function km(n){var i=n[Z];return i||(i=n[Z]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wm(n){n[Fl]=!0}var Xm=new Set,Nm={};function m1(n,i){N1(n,i),N1(n+"Capture",i)}function N1(n,i){for(Nm[n]=i,n=0;n<i.length;n++)Xm.add(i[n])}var H1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sg={},bg={};function q1(n){return x1.call(bg,n)?!0:x1.call(Sg,n)?!1:H1.test(n)?bg[n]=!0:(Sg[n]=!0,!1)}function vg(n,i,l){if(q1(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var E=i.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function Hg(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function Q1(n,i,l,E){if(E===null)n.removeAttribute(l);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+E)}}function kg(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function eg(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Iv(n,i,l){var E=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var te=E.get,Me=E.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return te.call(this)},set:function(Io){l=""+Io,Me.call(this,Io)}}),Object.defineProperty(n,i,{enumerable:E.enumerable}),{getValue:function(){return l},setValue:function(Io){l=""+Io},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function jp(n){if(!n._valueTracker){var i=eg(n)?"checked":"value";n._valueTracker=Iv(n,i,""+n[i])}}function f(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),E="";return n&&(E=eg(n)?n.checked?"true":"false":n.value),n=E,n!==l?(i.setValue(n),!0):!1}function R(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var $=/[\n"\\]/g;function Q(n){return n.replace($,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ze(n,i,l,E,te,Me,Io,Rp){n.name="",Io!=null&&typeof Io!="function"&&typeof Io!="symbol"&&typeof Io!="boolean"?n.type=Io:n.removeAttribute("type"),i!=null?Io==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+kg(i)):n.value!==""+kg(i)&&(n.value=""+kg(i)):Io!=="submit"&&Io!=="reset"||n.removeAttribute("value"),i!=null?it(n,Io,kg(i)):l!=null?it(n,Io,kg(l)):E!=null&&n.removeAttribute("value"),te==null&&Me!=null&&(n.defaultChecked=!!Me),te!=null&&(n.checked=te&&typeof te!="function"&&typeof te!="symbol"),Rp!=null&&typeof Rp!="function"&&typeof Rp!="symbol"&&typeof Rp!="boolean"?n.name=""+kg(Rp):n.removeAttribute("name")}function _e(n,i,l,E,te,Me,Io,Rp){if(Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"&&(n.type=Me),i!=null||l!=null){if(!(Me!=="submit"&&Me!=="reset"||i!=null)){jp(n);return}l=l!=null?""+kg(l):"",i=i!=null?""+kg(i):l,Rp||i===n.value||(n.value=i),n.defaultValue=i}E=E??te,E=typeof E!="function"&&typeof E!="symbol"&&!!E,n.checked=Rp?n.checked:!!E,n.defaultChecked=!!E,Io!=null&&typeof Io!="function"&&typeof Io!="symbol"&&typeof Io!="boolean"&&(n.name=Io),jp(n)}function it(n,i,l){i==="number"&&R(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function lt(n,i,l,E){if(n=n.options,i){i={};for(var te=0;te<l.length;te++)i["$"+l[te]]=!0;for(l=0;l<n.length;l++)te=i.hasOwnProperty("$"+n[l].value),n[l].selected!==te&&(n[l].selected=te),te&&E&&(n[l].defaultSelected=!0)}else{for(l=""+kg(l),i=null,te=0;te<n.length;te++){if(n[te].value===l){n[te].selected=!0,E&&(n[te].defaultSelected=!0);return}i!==null||n[te].disabled||(i=n[te])}i!==null&&(i.selected=!0)}}function Ye(n,i,l){if(i!=null&&(i=""+kg(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+kg(l):""}function Vt(n,i,l,E){if(i==null){if(E!=null){if(l!=null)throw Error(a(92));if(xs(E)){if(1<E.length)throw Error(a(93));E=E[0]}l=E}l==null&&(l=""),i=l}l=kg(i),n.defaultValue=l,E=n.textContent,E===l&&E!==""&&E!==null&&(n.value=E),jp(n)}function Ct(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Nl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ms(n,i,l){var E=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?E?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":E?n.setProperty(i,l):typeof l!="number"||l===0||Nl.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function Si(n,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,l!=null){for(var E in l)!l.hasOwnProperty(E)||i!=null&&i.hasOwnProperty(E)||(E.indexOf("--")===0?n.setProperty(E,""):E==="float"?n.cssFloat="":n[E]="");for(var te in i)E=i[te],i.hasOwnProperty(te)&&l[te]!==E&&ms(n,te,E)}else for(var Me in i)i.hasOwnProperty(Me)&&ms(n,Me,i[Me])}function _s(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dp(n){return Yl.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Op(){}var e0=null;function Xp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _0=null,D0=null;function O0(n){var i=S0(n);if(i&&(n=i.stateNode)){var l=n[ag]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ze(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Q(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var E=l[i];if(E!==n&&E.form===n.form){var te=E[ag]||null;if(!te)throw Error(a(90));Ze(E,te.value,te.defaultValue,te.defaultValue,te.checked,te.defaultChecked,te.type,te.name)}}for(i=0;i<l.length;i++)E=l[i],E.form===n.form&&f(E)}break e;case"textarea":Ye(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&lt(n,!!l.multiple,i,!1)}}}var U0=!1;function E0(n,i,l){if(U0)return n(i,l);U0=!0;try{var E=n(i);return E}finally{if(U0=!1,(_0!==null||D0!==null)&&(D_(),_0&&(i=_0,n=D0,D0=_0=null,O0(i),n)))for(i=0;i<n.length;i++)O0(n[i])}}function ym(n,i){var l=n.stateNode;if(l===null)return null;var E=l[ag]||null;if(E===null)return null;l=E[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(n=n.type,E=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!E;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var mm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vm=!1;if(mm)try{var Pm={};Object.defineProperty(Pm,"passive",{get:function(){Vm=!0}}),window.addEventListener("test",Pm,Pm),window.removeEventListener("test",Pm,Pm)}catch{Vm=!1}var a1=null,h1=null,Hm=null;function w1(){if(Hm)return Hm;var n,i=h1,l=i.length,E,te="value"in a1?a1.value:a1.textContent,Me=te.length;for(n=0;n<l&&i[n]===te[n];n++);var Io=l-n;for(E=1;E<=Io&&i[l-E]===te[Me-E];E++);return Hm=te.slice(n,1<E?1-E:void 0)}function _m(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Om(){return!0}function D1(){return!1}function $m(n){function i(l,E,te,Me,Io){this._reactName=l,this._targetInst=te,this.type=E,this.nativeEvent=Me,this.target=Io,this.currentTarget=null;for(var Rp in n)n.hasOwnProperty(Rp)&&(l=n[Rp],this[Rp]=l?l(Me):Me[Rp]);return this.isDefaultPrevented=(Me.defaultPrevented!=null?Me.defaultPrevented:Me.returnValue===!1)?Om:D1,this.isPropagationStopped=D1,this}return C(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Om)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Om)},persist:function(){},isPersistent:Om}),i}var R1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},k1=$m(R1),Jm=C({},R1,{view:0,detail:0}),I1=$m(Jm),ug,O1,s1,yg=C({},Jm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ey,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==s1&&(s1&&n.type==="mousemove"?(ug=n.screenX-s1.screenX,O1=n.screenY-s1.screenY):O1=ug=0,s1=n),ug)},movementY:function(n){return"movementY"in n?n.movementY:O1}}),Z1=$m(yg),pg=C({},yg,{dataTransfer:0}),J1=$m(pg),wg=C({},Jm,{relatedTarget:0}),tv=$m(wg),Sv=C({},R1,{animationName:0,elapsedTime:0,pseudoElement:0}),bv=$m(Sv),Jv=C({},R1,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Uv=$m(Jv),lv=C({},R1,{data:0}),Kv=$m(lv),Nv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hy(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Qv[n])?!!i[n]:!1}function ey(){return hy}var yy=C({},Jm,{key:function(n){if(n.key){var i=Nv[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=_m(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Fv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ey,charCode:function(n){return n.type==="keypress"?_m(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_m(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),dv=$m(yy),Ev=C({},yg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rv=$m(Ev),zv=C({},Jm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ey}),de=$m(zv),ql=C({},R1,{propertyName:0,elapsedTime:0,pseudoElement:0}),De=$m(ql),A0=C({},yg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),b0=$m(A0),v0=C({},R1,{newState:0,oldState:0}),Cm=$m(v0),$0=[9,13,27,32],M1=mm&&"CompositionEvent"in window,Z0=null;mm&&"documentMode"in document&&(Z0=document.documentMode);var Rm=mm&&"TextEvent"in window&&!Z0,Ag=mm&&(!M1||Z0&&8<Z0&&11>=Z0),rg=" ",C1=!1;function Gv(n,i){switch(n){case"keyup":return $0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function av(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var hg=!1;function mv(n,i){switch(n){case"compositionend":return av(i);case"keypress":return i.which!==32?null:(C1=!0,rg);case"textInput":return n=i.data,n===rg&&C1?null:n;default:return null}}function Ng(n,i){if(hg)return n==="compositionend"||!M1&&Gv(n,i)?(n=w1(),Hm=h1=a1=null,hg=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ag&&i.locale!=="ko"?null:i.data;default:return null}}var U1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!U1[n.type]:i==="textarea"}function hv(n,i,l,E){_0?D0?D0.push(E):D0=[E]:_0=E,i=H_(i,"onChange"),0<i.length&&(l=new k1("onChange","change",null,l,E),n.push({event:l,listeners:i}))}var B1=null,Kg=null;function zg(n){f5(n,0)}function xg(n){var i=Mm(n);if(f(i))return n}function Qg(n,i){if(n==="change")return i}var fy=!1;if(mm){var Uy;if(mm){var Fy="oninput"in document;if(!Fy){var ox=document.createElement("div");ox.setAttribute("oninput","return;"),Fy=typeof ox.oninput=="function"}Uy=Fy}else Uy=!1;fy=Uy&&(!document.documentMode||9<document.documentMode)}function Ox(){B1&&(B1.detachEvent("onpropertychange",Px),Kg=B1=null)}function Px(n){if(n.propertyName==="value"&&xg(Kg)){var i=[];hv(i,Kg,n,Xp(n)),E0(zg,i)}}function x3(n,i,l){n==="focusin"?(Ox(),B1=i,Kg=l,B1.attachEvent("onpropertychange",Px)):n==="focusout"&&Ox()}function O5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xg(Kg)}function P5(n,i){if(n==="click")return xg(i)}function h_(n,i){if(n==="input"||n==="change")return xg(i)}function C2(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Dy=typeof Object.is=="function"?Object.is:C2;function Qx(n,i){if(Dy(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),E=Object.keys(i);if(l.length!==E.length)return!1;for(E=0;E<l.length;E++){var te=l[E];if(!x1.call(i,te)||!Dy(n[te],i[te]))return!1}return!0}function _3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function b3(n,i){var l=_3(n);n=0;for(var E;l;){if(l.nodeType===3){if(E=n+l.textContent.length,n<=i&&E>=i)return{node:l,offset:i-n};n=E}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=_3(l)}}function w3(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?w3(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ob(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=R(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=R(n.document)}return i}function vx(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var sb=mm&&"documentMode"in document&&11>=document.documentMode,yx=null,f_=null,R2=null,lb=!1;function cb(n,i,l){var E=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;lb||yx==null||yx!==R(E)||(E=yx,"selectionStart"in E&&vx(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),R2&&Qx(R2,E)||(R2=E,E=H_(f_,"onSelect"),0<E.length&&(i=new k1("onSelect","select",null,i,l),n.push({event:i,listeners:E}),i.target=yx)))}function Ix(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var e2={animationend:Ix("Animation","AnimationEnd"),animationiteration:Ix("Animation","AnimationIteration"),animationstart:Ix("Animation","AnimationStart"),transitionrun:Ix("Transition","TransitionRun"),transitionstart:Ix("Transition","TransitionStart"),transitioncancel:Ix("Transition","TransitionCancel"),transitionend:Ix("Transition","TransitionEnd")},p_={},ub={};mm&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete e2.animationend.animation,delete e2.animationiteration.animation,delete e2.animationstart.animation),"TransitionEvent"in window||delete e2.transitionend.transition);function Ux(n){if(p_[n])return p_[n];if(!e2[n])return n;var i=e2[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in ub)return p_[n]=i[l];return n}var M3=Ux("animationend"),S3=Ux("animationiteration"),T3=Ux("animationstart"),I5=Ux("transitionrun"),U5=Ux("transitionstart"),F5=Ux("transitioncancel"),db=Ux("transitionend"),E3=new Map,hb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hb.push("scrollEnd");function By(n,i){E3.set(n,i),m1(i,[n])}var m_=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ky=[],Fx=0,g_=0;function v_(){for(var n=Fx,i=g_=Fx=0;i<n;){var l=ky[i];ky[i++]=null;var E=ky[i];ky[i++]=null;var te=ky[i];ky[i++]=null;var Me=ky[i];if(ky[i++]=null,E!==null&&te!==null){var Io=E.pending;Io===null?te.next=te:(te.next=Io.next,Io.next=te),E.pending=te}Me!==0&&A3(l,te,Me)}}function L2(n,i,l,E){ky[Fx++]=n,ky[Fx++]=i,ky[Fx++]=l,ky[Fx++]=E,g_|=E,n.lanes|=E,n=n.alternate,n!==null&&(n.lanes|=E)}function fb(n,i,l,E){return L2(n,i,l,E),y_(n)}function Bx(n,i){return L2(n,null,null,i),y_(n)}function A3(n,i,l){n.lanes|=l;var E=n.alternate;E!==null&&(E.lanes|=l);for(var te=!1,Me=n.return;Me!==null;)Me.childLanes|=l,E=Me.alternate,E!==null&&(E.childLanes|=l),Me.tag===22&&(n=Me.stateNode,n===null||n._visibility&1||(te=!0)),n=Me,Me=Me.return;return n.tag===3?(Me=n.stateNode,te&&i!==null&&(te=31-vm(l),n=Me.hiddenUpdates,E=n[te],E===null?n[te]=[i]:E.push(i),i.lane=l|536870912),Me):null}function y_(n){if(50<m2)throw m2=0,Bb=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var jx={};function B5(n,i,l,E){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ey(n,i,l,E){return new B5(n,i,l,E)}function pb(n){return n=n.prototype,!(!n||!n.isReactComponent)}function sx(n,i){var l=n.alternate;return l===null?(l=Ey(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function C3(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function x_(n,i,l,E,te,Me){var Io=0;if(E=n,typeof n=="function")pb(n)&&(Io=1);else if(typeof n=="string")Io=L5(n,l,ci.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ta:return n=Ey(31,l,i,te),n.elementType=ta,n.lanes=Me,n;case re:return Hx(l.children,te,Me,i);case ie:Io=8,te|=24;break;case K:return n=Ey(12,l,i,te|2),n.elementType=K,n.lanes=Me,n;case He:return n=Ey(13,l,i,te),n.elementType=He,n.lanes=Me,n;case Fe:return n=Ey(19,l,i,te),n.elementType=Fe,n.lanes=Me,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:Io=10;break e;case Ne:Io=9;break e;case se:Io=11;break e;case Xe:Io=14;break e;case be:Io=16,E=null;break e}Io=29,l=Error(a(130,n===null?"null":typeof n,"")),E=null}return i=Ey(Io,l,i,te),i.elementType=n,i.type=E,i.lanes=Me,i}function Hx(n,i,l,E){return n=Ey(7,n,E,i),n.lanes=l,n}function mb(n,i,l){return n=Ey(6,n,null,i),n.lanes=l,n}function R3(n){var i=Ey(18,null,null,0);return i.stateNode=n,i}function __(n,i,l){return i=Ey(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var gb=new WeakMap;function jy(n,i){if(typeof n=="object"&&n!==null){var l=gb.get(n);return l!==void 0?l:(i={value:n,source:i,stack:Tm(i)},gb.set(n,i),i)}return{value:n,source:i,stack:Tm(i)}}var t2=[],xx=0,b_=null,D2=0,Ay=[],Hy=0,lx=null,Jy=1,Ky="";function cx(n,i){t2[xx++]=D2,t2[xx++]=b_,b_=n,D2=i}function L3(n,i,l){Ay[Hy++]=Jy,Ay[Hy++]=Ky,Ay[Hy++]=lx,lx=n;var E=Jy;n=Ky;var te=32-vm(E)-1;E&=~(1<<te),l+=1;var Me=32-vm(i)+te;if(30<Me){var Io=te-te%5;Me=(E&(1<<Io)-1).toString(32),E>>=Io,te-=Io,Jy=1<<32-vm(i)+te|l<<te|E,Ky=Me+n}else Jy=1<<Me|l<<te|E,Ky=n}function k2(n){n.return!==null&&(cx(n,1),L3(n,1,0))}function vb(n){for(;n===b_;)b_=t2[--xx],t2[xx]=null,D2=t2[--xx],t2[xx]=null;for(;n===lx;)lx=Ay[--Hy],Ay[Hy]=null,Ky=Ay[--Hy],Ay[Hy]=null,Jy=Ay[--Hy],Ay[Hy]=null}function D3(n,i){Ay[Hy++]=Jy,Ay[Hy++]=Ky,Ay[Hy++]=lx,Jy=i.id,Ky=i.overflow,lx=n}var xy=null,Vv=null,fv=!1,ux=null,Gy=!1,yb=Error(a(519));function _x(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw N2(jy(i,n)),yb}function k3(n){var i=n.stateNode,l=n.type,E=n.memoizedProps;switch(i[vv]=n,i[ag]=E,l){case"dialog":ov("cancel",i),ov("close",i);break;case"iframe":case"object":case"embed":ov("load",i);break;case"video":case"audio":for(l=0;l<_2.length;l++)ov(_2[l],i);break;case"source":ov("error",i);break;case"img":case"image":case"link":ov("error",i),ov("load",i);break;case"details":ov("toggle",i);break;case"input":ov("invalid",i),_e(i,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":ov("invalid",i);break;case"textarea":ov("invalid",i),Vt(i,E.value,E.defaultValue,E.children)}l=E.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||E.suppressHydrationWarning===!0||G_(i.textContent,l)?(E.popover!=null&&(ov("beforetoggle",i),ov("toggle",i)),E.onScroll!=null&&ov("scroll",i),E.onScrollEnd!=null&&ov("scrollend",i),E.onClick!=null&&(i.onclick=Op),i=!0):i=!1,i||_x(n,!0)}function xb(n){for(xy=n.return;xy;)switch(xy.tag){case 5:case 31:case 13:Gy=!1;return;case 27:case 3:Gy=!0;return;default:xy=xy.return}}function r2(n){if(n!==xy)return!1;if(!fv)return xb(n),fv=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||r_(n.type,n.memoizedProps)),l=!l),l&&Vv&&_x(n),xb(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Vv=i3(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Vv=i3(n)}else i===27?(i=Vv,Rx(n.type)?(n=$_,$_=null,Vv=n):Vv=i):Vv=xy?$y(n.stateNode.nextSibling):null;return!0}function Gx(){Vv=xy=null,fv=!1}function _b(){var n=ux;return n!==null&&(Ry===null?Ry=n:Ry.push.apply(Ry,n),ux=null),n}function N2(n){ux===null?ux=[n]:ux.push(n)}var z2=Gl(null),bx=null,dx=null;function wx(n,i,l){qp(z2,i._currentValue),i._currentValue=l}function hx(n){n._currentValue=z2.current,Ip(z2)}function bb(n,i,l){for(;n!==null;){var E=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,E!==null&&(E.childLanes|=i)):E!==null&&(E.childLanes&i)!==i&&(E.childLanes|=i),n===l)break;n=n.return}}function n2(n,i,l,E){var te=n.child;for(te!==null&&(te.return=n);te!==null;){var Me=te.dependencies;if(Me!==null){var Io=te.child;Me=Me.firstContext;e:for(;Me!==null;){var Rp=Me;Me=te;for(var L0=0;L0<i.length;L0++)if(Rp.context===i[L0]){Me.lanes|=l,Rp=Me.alternate,Rp!==null&&(Rp.lanes|=l),bb(Me.return,l,n),E||(Io=null);break e}Me=Rp.next}}else if(te.tag===18){if(Io=te.return,Io===null)throw Error(a(341));Io.lanes|=l,Me=Io.alternate,Me!==null&&(Me.lanes|=l),bb(Io,l,n),Io=null}else Io=te.child;if(Io!==null)Io.return=te;else for(Io=te;Io!==null;){if(Io===n){Io=null;break}if(te=Io.sibling,te!==null){te.return=Io.return,Io=te;break}Io=Io.return}te=Io}}function Vx(n,i,l,E){n=null;for(var te=i,Me=!1;te!==null;){if(!Me){if((te.flags&524288)!==0)Me=!0;else if((te.flags&262144)!==0)break}if(te.tag===10){var Io=te.alternate;if(Io===null)throw Error(a(387));if(Io=Io.memoizedProps,Io!==null){var Rp=te.type;Dy(te.pendingProps.value,Io.value)||(n!==null?n.push(Rp):n=[Rp])}}else if(te===w0.current){if(Io=te.alternate,Io===null)throw Error(a(387));Io.memoizedState.memoizedState!==te.memoizedState.memoizedState&&(n!==null?n.push(T2):n=[T2])}te=te.return}n!==null&&n2(i,n,l,E),i.flags|=262144}function w_(n){for(n=n.firstContext;n!==null;){if(!Dy(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function qx(n){bx=n,dx=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function _y(n){return wb(bx,n)}function a2(n,i){return bx===null&&qx(n),wb(n,i)}function wb(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},dx===null){if(n===null)throw Error(a(308));dx=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else dx=dx.next=i;return l}var Mb=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,E){n.push(E)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},j5=r.unstable_scheduleCallback,H5=r.unstable_NormalPriority,ly={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sb(){return{controller:new Mb,data:new Map,refCount:0}}function O2(n){n.refCount--,n.refCount===0&&j5(H5,function(){n.controller.abort()})}var $x=null,M_=0,i2=0,o2=null;function G5(n,i){if($x===null){var l=$x=[];M_=0,i2=Wb(),o2={status:"pending",value:void 0,then:function(E){l.push(E)}}}return M_++,i.then(N3,N3),i}function N3(){if(--M_===0&&$x!==null){o2!==null&&(o2.status="fulfilled");var n=$x;$x=null,i2=0,o2=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Tb(n,i){var l=[],E={status:"pending",value:null,reason:null,then:function(te){l.push(te)}};return n.then(function(){E.status="fulfilled",E.value=i;for(var te=0;te<l.length;te++)(0,l[te])(i)},function(te){for(E.status="rejected",E.reason=te,te=0;te<l.length;te++)(0,l[te])(void 0)}),E}var z3=ne.S;ne.S=function(n,i){rx=bm(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&G5(n,i),z3!==null&&z3(n,i)};var Mx=Gl(null);function Eb(){var n=Mx.current;return n!==null?n:og.pooledCache}function P2(n,i){i===null?qp(Mx,Mx.current):qp(Mx,i.pool)}function O3(){var n=Eb();return n===null?null:{parent:ly._currentValue,pool:n}}var s2=Error(a(460)),Ab=Error(a(474)),S_=Error(a(542)),T_={then:function(){}};function P3(n){return n=n.status,n==="fulfilled"||n==="rejected"}function I3(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(Op,Op),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Cb(n),n;default:if(typeof i.status=="string")i.then(Op,Op);else{if(n=og,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(E){if(i.status==="pending"){var te=i;te.status="fulfilled",te.value=E}},function(E){if(i.status==="pending"){var te=i;te.status="rejected",te.reason=E}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Cb(n),n}throw Wx=i,s2}}function Yx(n){try{var i=n._init;return i(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Wx=l,s2):l}}var Wx=null;function U3(){if(Wx===null)throw Error(a(459));var n=Wx;return Wx=null,n}function Cb(n){if(n===s2||n===S_)throw Error(a(483))}var l2=null,I2=0;function E_(n){var i=I2;return I2+=1,l2===null&&(l2=[]),I3(l2,n,i)}function U2(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function c2(n,i){throw i.$$typeof===j?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function F2(n){function i(nm,Y0){if(n){var gm=nm.deletions;gm===null?(nm.deletions=[Y0],nm.flags|=16):gm.push(Y0)}}function l(nm,Y0){if(!n)return null;for(;Y0!==null;)i(nm,Y0),Y0=Y0.sibling;return null}function E(nm){for(var Y0=new Map;nm!==null;)nm.key!==null?Y0.set(nm.key,nm):Y0.set(nm.index,nm),nm=nm.sibling;return Y0}function te(nm,Y0){return nm=sx(nm,Y0),nm.index=0,nm.sibling=null,nm}function Me(nm,Y0,gm){return nm.index=gm,n?(gm=nm.alternate,gm!==null?(gm=gm.index,gm<Y0?(nm.flags|=67108866,Y0):gm):(nm.flags|=67108866,Y0)):(nm.flags|=1048576,Y0)}function Io(nm){return n&&nm.alternate===null&&(nm.flags|=67108866),nm}function Rp(nm,Y0,gm,Wm){return Y0===null||Y0.tag!==6?(Y0=mb(gm,nm.mode,Wm),Y0.return=nm,Y0):(Y0=te(Y0,gm),Y0.return=nm,Y0)}function L0(nm,Y0,gm,Wm){var ng=gm.type;return ng===re?Am(nm,Y0,gm.props.children,Wm,gm.key):Y0!==null&&(Y0.elementType===ng||typeof ng=="object"&&ng!==null&&ng.$$typeof===be&&Yx(ng)===Y0.type)?(Y0=te(Y0,gm.props),U2(Y0,gm),Y0.return=nm,Y0):(Y0=x_(gm.type,gm.key,gm.props,null,nm.mode,Wm),U2(Y0,gm),Y0.return=nm,Y0)}function hm(nm,Y0,gm,Wm){return Y0===null||Y0.tag!==4||Y0.stateNode.containerInfo!==gm.containerInfo||Y0.stateNode.implementation!==gm.implementation?(Y0=__(gm,nm.mode,Wm),Y0.return=nm,Y0):(Y0=te(Y0,gm.children||[]),Y0.return=nm,Y0)}function Am(nm,Y0,gm,Wm,ng){return Y0===null||Y0.tag!==7?(Y0=Hx(gm,nm.mode,Wm,ng),Y0.return=nm,Y0):(Y0=te(Y0,gm),Y0.return=nm,Y0)}function X0(nm,Y0,gm){if(typeof Y0=="string"&&Y0!==""||typeof Y0=="number"||typeof Y0=="bigint")return Y0=mb(""+Y0,nm.mode,gm),Y0.return=nm,Y0;if(typeof Y0=="object"&&Y0!==null){switch(Y0.$$typeof){case V:return gm=x_(Y0.type,Y0.key,Y0.props,null,nm.mode,gm),U2(gm,Y0),gm.return=nm,gm;case J:return Y0=__(Y0,nm.mode,gm),Y0.return=nm,Y0;case be:return Y0=Yx(Y0),X0(nm,Y0,gm)}if(xs(Y0)||bp(Y0))return Y0=Hx(Y0,nm.mode,gm,null),Y0.return=nm,Y0;if(typeof Y0.then=="function")return X0(nm,E_(Y0),gm);if(Y0.$$typeof===G)return X0(nm,a2(nm,Y0),gm);c2(nm,Y0)}return null}function em(nm,Y0,gm,Wm){var ng=Y0!==null?Y0.key:null;if(typeof gm=="string"&&gm!==""||typeof gm=="number"||typeof gm=="bigint")return ng!==null?null:Rp(nm,Y0,""+gm,Wm);if(typeof gm=="object"&&gm!==null){switch(gm.$$typeof){case V:return gm.key===ng?L0(nm,Y0,gm,Wm):null;case J:return gm.key===ng?hm(nm,Y0,gm,Wm):null;case be:return gm=Yx(gm),em(nm,Y0,gm,Wm)}if(xs(gm)||bp(gm))return ng!==null?null:Am(nm,Y0,gm,Wm,null);if(typeof gm.then=="function")return em(nm,Y0,E_(gm),Wm);if(gm.$$typeof===G)return em(nm,Y0,a2(nm,gm),Wm);c2(nm,gm)}return null}function cm(nm,Y0,gm,Wm,ng){if(typeof Wm=="string"&&Wm!==""||typeof Wm=="number"||typeof Wm=="bigint")return nm=nm.get(gm)||null,Rp(Y0,nm,""+Wm,ng);if(typeof Wm=="object"&&Wm!==null){switch(Wm.$$typeof){case V:return nm=nm.get(Wm.key===null?gm:Wm.key)||null,L0(Y0,nm,Wm,ng);case J:return nm=nm.get(Wm.key===null?gm:Wm.key)||null,hm(Y0,nm,Wm,ng);case be:return Wm=Yx(Wm),cm(nm,Y0,gm,Wm,ng)}if(xs(Wm)||bp(Wm))return nm=nm.get(gm)||null,Am(Y0,nm,Wm,ng,null);if(typeof Wm.then=="function")return cm(nm,Y0,gm,E_(Wm),ng);if(Wm.$$typeof===G)return cm(nm,Y0,gm,a2(Y0,Wm),ng);c2(Y0,Wm)}return null}function L1(nm,Y0,gm,Wm){for(var ng=null,Lg=null,X1=Y0,jg=Y0=0,uv=null;X1!==null&&jg<gm.length;jg++){X1.index>jg?(uv=X1,X1=null):uv=X1.sibling;var Zg=em(nm,X1,gm[jg],Wm);if(Zg===null){X1===null&&(X1=uv);break}n&&X1&&Zg.alternate===null&&i(nm,X1),Y0=Me(Zg,Y0,jg),Lg===null?ng=Zg:Lg.sibling=Zg,Lg=Zg,X1=uv}if(jg===gm.length)return l(nm,X1),fv&&cx(nm,jg),ng;if(X1===null){for(;jg<gm.length;jg++)X1=X0(nm,gm[jg],Wm),X1!==null&&(Y0=Me(X1,Y0,jg),Lg===null?ng=X1:Lg.sibling=X1,Lg=X1);return fv&&cx(nm,jg),ng}for(X1=E(X1);jg<gm.length;jg++)uv=cm(X1,nm,jg,gm[jg],Wm),uv!==null&&(n&&uv.alternate!==null&&X1.delete(uv.key===null?jg:uv.key),Y0=Me(uv,Y0,jg),Lg===null?ng=uv:Lg.sibling=uv,Lg=uv);return n&&X1.forEach(function(Xv){return i(nm,Xv)}),fv&&cx(nm,jg),ng}function Y1(nm,Y0,gm,Wm){if(gm==null)throw Error(a(151));for(var ng=null,Lg=null,X1=Y0,jg=Y0=0,uv=null,Zg=gm.next();X1!==null&&!Zg.done;jg++,Zg=gm.next()){X1.index>jg?(uv=X1,X1=null):uv=X1.sibling;var Xv=em(nm,X1,Zg.value,Wm);if(Xv===null){X1===null&&(X1=uv);break}n&&X1&&Xv.alternate===null&&i(nm,X1),Y0=Me(Xv,Y0,jg),Lg===null?ng=Xv:Lg.sibling=Xv,Lg=Xv,X1=uv}if(Zg.done)return l(nm,X1),fv&&cx(nm,jg),ng;if(X1===null){for(;!Zg.done;jg++,Zg=gm.next())Zg=X0(nm,Zg.value,Wm),Zg!==null&&(Y0=Me(Zg,Y0,jg),Lg===null?ng=Zg:Lg.sibling=Zg,Lg=Zg);return fv&&cx(nm,jg),ng}for(X1=E(X1);!Zg.done;jg++,Zg=gm.next())Zg=cm(X1,nm,jg,Zg.value,Wm),Zg!==null&&(n&&Zg.alternate!==null&&X1.delete(Zg.key===null?jg:Zg.key),Y0=Me(Zg,Y0,jg),Lg===null?ng=Zg:Lg.sibling=Zg,Lg=Zg);return n&&X1.forEach(function(Yy){return i(nm,Yy)}),fv&&cx(nm,jg),ng}function Rg(nm,Y0,gm,Wm){if(typeof gm=="object"&&gm!==null&&gm.type===re&&gm.key===null&&(gm=gm.props.children),typeof gm=="object"&&gm!==null){switch(gm.$$typeof){case V:e:{for(var ng=gm.key;Y0!==null;){if(Y0.key===ng){if(ng=gm.type,ng===re){if(Y0.tag===7){l(nm,Y0.sibling),Wm=te(Y0,gm.props.children),Wm.return=nm,nm=Wm;break e}}else if(Y0.elementType===ng||typeof ng=="object"&&ng!==null&&ng.$$typeof===be&&Yx(ng)===Y0.type){l(nm,Y0.sibling),Wm=te(Y0,gm.props),U2(Wm,gm),Wm.return=nm,nm=Wm;break e}l(nm,Y0);break}else i(nm,Y0);Y0=Y0.sibling}gm.type===re?(Wm=Hx(gm.props.children,nm.mode,Wm,gm.key),Wm.return=nm,nm=Wm):(Wm=x_(gm.type,gm.key,gm.props,null,nm.mode,Wm),U2(Wm,gm),Wm.return=nm,nm=Wm)}return Io(nm);case J:e:{for(ng=gm.key;Y0!==null;){if(Y0.key===ng)if(Y0.tag===4&&Y0.stateNode.containerInfo===gm.containerInfo&&Y0.stateNode.implementation===gm.implementation){l(nm,Y0.sibling),Wm=te(Y0,gm.children||[]),Wm.return=nm,nm=Wm;break e}else{l(nm,Y0);break}else i(nm,Y0);Y0=Y0.sibling}Wm=__(gm,nm.mode,Wm),Wm.return=nm,nm=Wm}return Io(nm);case be:return gm=Yx(gm),Rg(nm,Y0,gm,Wm)}if(xs(gm))return L1(nm,Y0,gm,Wm);if(bp(gm)){if(ng=bp(gm),typeof ng!="function")throw Error(a(150));return gm=ng.call(gm),Y1(nm,Y0,gm,Wm)}if(typeof gm.then=="function")return Rg(nm,Y0,E_(gm),Wm);if(gm.$$typeof===G)return Rg(nm,Y0,a2(nm,gm),Wm);c2(nm,gm)}return typeof gm=="string"&&gm!==""||typeof gm=="number"||typeof gm=="bigint"?(gm=""+gm,Y0!==null&&Y0.tag===6?(l(nm,Y0.sibling),Wm=te(Y0,gm),Wm.return=nm,nm=Wm):(l(nm,Y0),Wm=mb(gm,nm.mode,Wm),Wm.return=nm,nm=Wm),Io(nm)):l(nm,Y0)}return function(nm,Y0,gm,Wm){try{I2=0;var ng=Rg(nm,Y0,gm,Wm);return l2=null,ng}catch(X1){if(X1===s2||X1===S_)throw X1;var Lg=Ey(29,X1,null,nm.mode);return Lg.lanes=Wm,Lg.return=nm,Lg}finally{}}}var Sx=F2(!0),F3=F2(!1),Wy=!1;function Rb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function A_(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Tx(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Xy(n,i,l){var E=n.updateQueue;if(E===null)return null;if(E=E.shared,(Yg&2)!==0){var te=E.pending;return te===null?i.next=i:(i.next=te.next,te.next=i),E.pending=i,i=y_(n),A3(n,null,l),i}return L2(n,E,i,l),y_(n)}function Xx(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var E=i.lanes;E&=n.pendingLanes,l|=E,i.lanes=l,pv(n,l)}}function B2(n,i){var l=n.updateQueue,E=n.alternate;if(E!==null&&(E=E.updateQueue,l===E)){var te=null,Me=null;if(l=l.firstBaseUpdate,l!==null){do{var Io={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};Me===null?te=Me=Io:Me=Me.next=Io,l=l.next}while(l!==null);Me===null?te=Me=i:Me=Me.next=i}else te=Me=i;l={baseState:E.baseState,firstBaseUpdate:te,lastBaseUpdate:Me,shared:E.shared,callbacks:E.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var Lb=!1;function j2(){if(Lb){var n=o2;if(n!==null)throw n}}function H2(n,i,l,E){Lb=!1;var te=n.updateQueue;Wy=!1;var Me=te.firstBaseUpdate,Io=te.lastBaseUpdate,Rp=te.shared.pending;if(Rp!==null){te.shared.pending=null;var L0=Rp,hm=L0.next;L0.next=null,Io===null?Me=hm:Io.next=hm,Io=L0;var Am=n.alternate;Am!==null&&(Am=Am.updateQueue,Rp=Am.lastBaseUpdate,Rp!==Io&&(Rp===null?Am.firstBaseUpdate=hm:Rp.next=hm,Am.lastBaseUpdate=L0))}if(Me!==null){var X0=te.baseState;Io=0,Am=hm=L0=null,Rp=Me;do{var em=Rp.lane&-536870913,cm=em!==Rp.lane;if(cm?(fg&em)===em:(E&em)===em){em!==0&&em===i2&&(Lb=!0),Am!==null&&(Am=Am.next={lane:0,tag:Rp.tag,payload:Rp.payload,callback:null,next:null});e:{var L1=n,Y1=Rp;em=i;var Rg=l;switch(Y1.tag){case 1:if(L1=Y1.payload,typeof L1=="function"){X0=L1.call(Rg,X0,em);break e}X0=L1;break e;case 3:L1.flags=L1.flags&-65537|128;case 0:if(L1=Y1.payload,em=typeof L1=="function"?L1.call(Rg,X0,em):L1,em==null)break e;X0=C({},X0,em);break e;case 2:Wy=!0}}em=Rp.callback,em!==null&&(n.flags|=64,cm&&(n.flags|=8192),cm=te.callbacks,cm===null?te.callbacks=[em]:cm.push(em))}else cm={lane:em,tag:Rp.tag,payload:Rp.payload,callback:Rp.callback,next:null},Am===null?(hm=Am=cm,L0=X0):Am=Am.next=cm,Io|=em;if(Rp=Rp.next,Rp===null){if(Rp=te.shared.pending,Rp===null)break;cm=Rp,Rp=cm.next,cm.next=null,te.lastBaseUpdate=cm,te.shared.pending=null}}while(!0);Am===null&&(L0=X0),te.baseState=L0,te.firstBaseUpdate=hm,te.lastBaseUpdate=Am,Me===null&&(te.shared.lanes=0),wy|=Io,n.lanes=Io,n.memoizedState=X0}}function B3(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function j3(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)B3(l[n],i)}var u2=Gl(null),G2=Gl(0);function H3(n,i){n=vy,qp(G2,n),qp(u2,i),vy=n|i.baseLanes}function C_(){qp(G2,vy),qp(u2,u2.current)}function Db(){vy=G2.current,Ip(u2),Ip(G2)}var Cy=Gl(null),Vy=null;function Ex(n){var i=n.alternate;qp(cv,cv.current&1),qp(Cy,n),Vy===null&&(i===null||u2.current!==null||i.memoizedState!==null)&&(Vy=n)}function kb(n){qp(cv,cv.current),qp(Cy,n),Vy===null&&(Vy=n)}function G3(n){n.tag===22?(qp(cv,cv.current),qp(Cy,n),Vy===null&&(Vy=n)):Ax()}function Ax(){qp(cv,cv.current),qp(Cy,Cy.current)}function Ny(n){Ip(Cy),Vy===n&&(Vy=null),Ip(cv)}var cv=Gl(0);function py(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||a3(l)||w2(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var fx=0,Wg=null,Lv=null,cy=null,R_=!1,d2=!1,Zx=!1,L_=0,V2=0,h2=null,V5=0;function ay(){throw Error(a(321))}function Nb(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!Dy(n[l],i[l]))return!1;return!0}function zb(n,i,l,E,te,Me){return fx=Me,Wg=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ne.H=n===null||n.memoizedState===null?dt:yp,Zx=!1,Me=l(E,te),Zx=!1,d2&&(Me=q3(i,l,E,te)),V3(n),Me}function V3(n){ne.H=kl;var i=Lv!==null&&Lv.next!==null;if(fx=0,cy=Lv=Wg=null,R_=!1,V2=0,h2=null,i)throw Error(a(300));n===null||ft||(n=n.dependencies,n!==null&&w_(n)&&(ft=!0))}function q3(n,i,l,E){Wg=n;var te=0;do{if(d2&&(h2=null),V2=0,d2=!1,25<=te)throw Error(a(301));if(te+=1,cy=Lv=null,n.updateQueue!=null){var Me=n.updateQueue;Me.lastEffect=null,Me.events=null,Me.stores=null,Me.memoCache!=null&&(Me.memoCache.index=0)}ne.H=Bp,Me=i(l,E)}while(d2);return Me}function q5(){var n=ne.H,i=n.useState()[0];return i=typeof i.then=="function"?h(i):i,n=n.useState()[0],(Lv!==null?Lv.memoizedState:null)!==n&&(Wg.flags|=1024),i}function Ob(){var n=L_!==0;return L_=0,n}function Pb(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function me(n){if(R_){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}R_=!1}fx=0,cy=Lv=Wg=null,d2=!1,V2=L_=0,h2=null}function ue(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cy===null?Wg.memoizedState=cy=n:cy=cy.next=n,cy}function g(){if(Lv===null){var n=Wg.alternate;n=n!==null?n.memoizedState:null}else n=Lv.next;var i=cy===null?Wg.memoizedState:cy.next;if(i!==null)cy=i,Lv=n;else{if(n===null)throw Wg.alternate===null?Error(a(467)):Error(a(310));Lv=n,n={memoizedState:Lv.memoizedState,baseState:Lv.baseState,baseQueue:Lv.baseQueue,queue:Lv.queue,next:null},cy===null?Wg.memoizedState=cy=n:cy=cy.next=n}return cy}function s(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function h(n){var i=V2;return V2+=1,h2===null&&(h2=[]),n=I3(h2,n,i),i=Wg,(cy===null?i.memoizedState:cy.next)===null&&(i=i.alternate,ne.H=i===null||i.memoizedState===null?dt:yp),n}function x(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return h(n);if(n.$$typeof===G)return _y(n)}throw Error(a(438,String(n)))}function v(n){var i=null,l=Wg.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var E=Wg.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(i={data:E.data.map(function(te){return te.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=s(),Wg.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),E=0;E<n;E++)l[E]=pn;return i.index++,l}function y(n,i){return typeof i=="function"?i(n):i}function b(n){var i=g();return T(i,Lv,n)}function T(n,i,l){var E=n.queue;if(E===null)throw Error(a(311));E.lastRenderedReducer=l;var te=n.baseQueue,Me=E.pending;if(Me!==null){if(te!==null){var Io=te.next;te.next=Me.next,Me.next=Io}i.baseQueue=te=Me,E.pending=null}if(Me=n.baseState,te===null)n.memoizedState=Me;else{i=te.next;var Rp=Io=null,L0=null,hm=i,Am=!1;do{var X0=hm.lane&-536870913;if(X0!==hm.lane?(fg&X0)===X0:(fx&X0)===X0){var em=hm.revertLane;if(em===0)L0!==null&&(L0=L0.next={lane:0,revertLane:0,gesture:null,action:hm.action,hasEagerState:hm.hasEagerState,eagerState:hm.eagerState,next:null}),X0===i2&&(Am=!0);else if((fx&em)===em){hm=hm.next,em===i2&&(Am=!0);continue}else X0={lane:0,revertLane:hm.revertLane,gesture:null,action:hm.action,hasEagerState:hm.hasEagerState,eagerState:hm.eagerState,next:null},L0===null?(Rp=L0=X0,Io=Me):L0=L0.next=X0,Wg.lanes|=em,wy|=em;X0=hm.action,Zx&&l(Me,X0),Me=hm.hasEagerState?hm.eagerState:l(Me,X0)}else em={lane:X0,revertLane:hm.revertLane,gesture:hm.gesture,action:hm.action,hasEagerState:hm.hasEagerState,eagerState:hm.eagerState,next:null},L0===null?(Rp=L0=em,Io=Me):L0=L0.next=em,Wg.lanes|=X0,wy|=X0;hm=hm.next}while(hm!==null&&hm!==i);if(L0===null?Io=Me:L0.next=Rp,!Dy(Me,n.memoizedState)&&(ft=!0,Am&&(l=o2,l!==null)))throw l;n.memoizedState=Me,n.baseState=Io,n.baseQueue=L0,E.lastRenderedState=Me}return te===null&&(E.lanes=0),[n.memoizedState,E.dispatch]}function u(n){var i=g(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var E=l.dispatch,te=l.pending,Me=i.memoizedState;if(te!==null){l.pending=null;var Io=te=te.next;do Me=n(Me,Io.action),Io=Io.next;while(Io!==te);Dy(Me,i.memoizedState)||(ft=!0),i.memoizedState=Me,i.baseQueue===null&&(i.baseState=Me),l.lastRenderedState=Me}return[Me,E]}function k(n,i,l){var E=Wg,te=g(),Me=fv;if(Me){if(l===void 0)throw Error(a(407));l=l()}else l=i();var Io=!Dy((Lv||te).memoizedState,l);if(Io&&(te.memoizedState=l,ft=!0),te=te.queue,ke(B.bind(null,E,te,n),[n]),te.getSnapshot!==i||Io||cy!==null&&cy.memoizedState.tag&1){if(E.flags|=2048,ge(9,{destroy:void 0},D.bind(null,E,te,l,i),null),og===null)throw Error(a(349));Me||(fx&127)!==0||M(E,i,l)}return l}function M(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Wg.updateQueue,i===null?(i=s(),Wg.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function D(n,i,l,E){i.value=l,i.getSnapshot=E,P(i)&&N(n)}function B(n,i,l){return l(function(){P(i)&&N(n)})}function P(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!Dy(n,l)}catch{return!0}}function N(n){var i=Bx(n,2);i!==null&&Ly(i,n,2)}function z(n){var i=ue();if(typeof n=="function"){var l=n;if(n=l(),Zx){qm(!0);try{l()}finally{qm(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:n},i}function F(n,i,l,E){return n.baseState=l,T(n,Lv,typeof E=="function"?E:y)}function w(n,i,l,E,te){if(Wp(n))throw Error(a(485));if(n=i.action,n!==null){var Me={payload:te,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Io){Me.listeners.push(Io)}};ne.T!==null?l(!0):Me.isTransition=!1,E(Me),l=i.pending,l===null?(Me.next=i.pending=Me,L(i,Me)):(Me.next=l.next,i.pending=l.next=Me)}}function L(n,i){var l=i.action,E=i.payload,te=n.state;if(i.isTransition){var Me=ne.T,Io={};ne.T=Io;try{var Rp=l(te,E),L0=ne.S;L0!==null&&L0(Io,Rp),O(n,i,Rp)}catch(hm){W(n,i,hm)}finally{Me!==null&&Io.types!==null&&(Me.types=Io.types),ne.T=Me}}else try{Me=l(te,E),O(n,i,Me)}catch(hm){W(n,i,hm)}}function O(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(E){H(n,i,E)},function(E){return W(n,i,E)}):H(n,i,l)}function H(n,i,l){i.status="fulfilled",i.value=l,Ce(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,L(n,l)))}function W(n,i,l){var E=n.pending;if(n.pending=null,E!==null){E=E.next;do i.status="rejected",i.reason=l,Ce(i),i=i.next;while(i!==E)}n.action=null}function Ce(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function he(n,i){return i}function le(n,i){if(fv){var l=og.formState;if(l!==null){e:{var E=Wg;if(fv){if(Vv){t:{for(var te=Vv,Me=Gy;te.nodeType!==8;){if(!Me){te=null;break t}if(te=$y(te.nextSibling),te===null){te=null;break t}}Me=te.data,te=Me==="F!"||Me==="F"?te:null}if(te){Vv=$y(te.nextSibling),E=te.data==="F!";break e}}_x(E)}E=!1}E&&(i=l[0])}}return l=ue(),l.memoizedState=l.baseState=i,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:he,lastRenderedState:i},l.queue=E,l=Xl.bind(null,Wg,E),E.dispatch=l,E=z(!1),Me=t0.bind(null,Wg,!1,E.queue),E=ue(),te={state:i,dispatch:null,action:n,pending:null},E.queue=te,l=w.bind(null,Wg,te,Me,l),te.dispatch=l,E.memoizedState=n,[i,l,!1]}function Y(n){var i=g();return Re(i,Lv,n)}function Re(n,i,l){if(i=T(n,i,he)[0],n=b(y)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var E=h(i)}catch(Io){throw Io===s2?S_:Io}else E=i;i=g();var te=i.queue,Me=te.dispatch;return l!==i.memoizedState&&(Wg.flags|=2048,ge(9,{destroy:void 0},fe.bind(null,te,l),null)),[E,Me,n]}function fe(n,i){n.action=i}function xe(n){var i=g(),l=Lv;if(l!==null)return Re(i,l,n);g(),i=i.memoizedState,l=g();var E=l.queue.dispatch;return l.memoizedState=n,[i,E,!1]}function ge(n,i,l,E){return n={tag:n,create:l,deps:E,inst:i,next:null},i=Wg.updateQueue,i===null&&(i=s(),Wg.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(E=l.next,l.next=n,n.next=E,i.lastEffect=n),n}function ye(){return g().memoizedState}function Ae(n,i,l,E){var te=ue();Wg.flags|=n,te.memoizedState=ge(1|i,{destroy:void 0},l,E===void 0?null:E)}function Le(n,i,l,E){var te=g();E=E===void 0?null:E;var Me=te.memoizedState.inst;Lv!==null&&E!==null&&Nb(E,Lv.memoizedState.deps)?te.memoizedState=ge(i,Me,l,E):(Wg.flags|=n,te.memoizedState=ge(1|i,Me,l,E))}function ce(n,i){Ae(8390656,8,n,i)}function ke(n,i){Le(2048,8,n,i)}function Pe(n){Wg.flags|=4;var i=Wg.updateQueue;if(i===null)i=s(),Wg.updateQueue=i,i.events=[n];else{var l=i.events;l===null?i.events=[n]:l.push(n)}}function tt(n){var i=g().memoizedState;return Pe({ref:i,nextImpl:n}),function(){if((Yg&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Ke(n,i){return Le(4,2,n,i)}function nt(n,i){return Le(4,4,n,i)}function yi(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Ei(n,i,l){l=l!=null?l.concat([n]):null,Le(4,4,yi.bind(null,i,n),l)}function vs(){}function Se(n,i){var l=g();i=i===void 0?null:i;var E=l.memoizedState;return i!==null&&Nb(i,E[1])?E[0]:(l.memoizedState=[n,i],n)}function Ee(n,i){var l=g();i=i===void 0?null:i;var E=l.memoizedState;if(i!==null&&Nb(i,E[1]))return E[0];if(E=n(),Zx){qm(!0);try{n()}finally{qm(!1)}}return l.memoizedState=[E,i],E}function X(n,i,l){return l===void 0||(fx&1073741824)!==0&&(fg&261930)===0?n.memoizedState=i:(n.memoizedState=l,n=$3(),Wg.lanes|=n,wy|=n,l)}function Oe(n,i,l,E){return Dy(l,i)?l:u2.current!==null?(n=X(n,l,E),Dy(n,i)||(ft=!0),n):(fx&42)===0||(fx&1073741824)!==0&&(fg&261930)===0?(ft=!0,n.memoizedState=l):(n=$3(),Wg.lanes|=n,wy|=n,i)}function Qe(n,i,l,E,te){var Me=zl.p;zl.p=Me!==0&&8>Me?Me:8;var Io=ne.T,Rp={};ne.T=Rp,t0(n,!1,i,l);try{var L0=te(),hm=ne.S;if(hm!==null&&hm(Rp,L0),L0!==null&&typeof L0=="object"&&typeof L0.then=="function"){var Am=Tb(L0,E);Pp(n,i,Am,zy(n))}else Pp(n,i,E,zy(n))}catch(X0){Pp(n,i,{then:function(){},status:"rejected",reason:X0},zy())}finally{zl.p=Me,Io!==null&&Rp.types!==null&&(Io.types=Rp.types),ne.T=Io}}function pe(){}function q(n,i,l,E){if(n.tag!==5)throw Error(a(476));var te=ae(n).queue;Qe(n,te,i,Hl,l===null?pe:function(){return ve(n),l(E)})}function ae(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Hl,baseState:Hl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:Hl},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function ve(n){var i=ae(n);i.next===null&&(i=n.alternate.memoizedState),Pp(n,i.next.queue,{},zy())}function Te(){return _y(T2)}function et(){return g().memoizedState}function bt(){return g().memoizedState}function dr(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=zy();n=Tx(l);var E=Xy(i,n,l);E!==null&&(Ly(E,i,l),Xx(E,i,l)),i={cache:Sb()},n.payload=i;return}i=i.return}}function Ol(n,i,l){var E=zy();l={lane:E,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Wp(n)?$p(i,l):(l=fb(n,i,l,E),l!==null&&(Ly(l,n,E),Lo(l,i,E)))}function Xl(n,i,l){var E=zy();Pp(n,i,l,E)}function Pp(n,i,l,E){var te={lane:E,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Wp(n))$p(i,te);else{var Me=n.alternate;if(n.lanes===0&&(Me===null||Me.lanes===0)&&(Me=i.lastRenderedReducer,Me!==null))try{var Io=i.lastRenderedState,Rp=Me(Io,l);if(te.hasEagerState=!0,te.eagerState=Rp,Dy(Rp,Io))return L2(n,i,te,0),og===null&&v_(),!1}catch{}finally{}if(l=fb(n,i,te,E),l!==null)return Ly(l,n,E),Lo(l,i,E),!0}return!1}function t0(n,i,l,E){if(E={lane:2,revertLane:Wb(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},Wp(n)){if(i)throw Error(a(479))}else i=fb(n,l,E,2),i!==null&&Ly(i,n,2)}function Wp(n){var i=n.alternate;return n===Wg||i!==null&&i===Wg}function $p(n,i){d2=R_=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Lo(n,i,l){if((l&4194048)!==0){var E=i.lanes;E&=n.pendingLanes,l|=E,i.lanes=l,pv(n,l)}}var kl={readContext:_y,use:x,useCallback:ay,useContext:ay,useEffect:ay,useImperativeHandle:ay,useLayoutEffect:ay,useInsertionEffect:ay,useMemo:ay,useReducer:ay,useRef:ay,useState:ay,useDebugValue:ay,useDeferredValue:ay,useTransition:ay,useSyncExternalStore:ay,useId:ay,useHostTransitionStatus:ay,useFormState:ay,useActionState:ay,useOptimistic:ay,useMemoCache:ay,useCacheRefresh:ay};kl.useEffectEvent=ay;var dt={readContext:_y,use:x,useCallback:function(n,i){return ue().memoizedState=[n,i===void 0?null:i],n},useContext:_y,useEffect:ce,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,Ae(4194308,4,yi.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Ae(4194308,4,n,i)},useInsertionEffect:function(n,i){Ae(4,2,n,i)},useMemo:function(n,i){var l=ue();i=i===void 0?null:i;var E=n();if(Zx){qm(!0);try{n()}finally{qm(!1)}}return l.memoizedState=[E,i],E},useReducer:function(n,i,l){var E=ue();if(l!==void 0){var te=l(i);if(Zx){qm(!0);try{l(i)}finally{qm(!1)}}}else te=i;return E.memoizedState=E.baseState=te,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:te},E.queue=n,n=n.dispatch=Ol.bind(null,Wg,n),[E.memoizedState,n]},useRef:function(n){var i=ue();return n={current:n},i.memoizedState=n},useState:function(n){n=z(n);var i=n.queue,l=Xl.bind(null,Wg,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:vs,useDeferredValue:function(n,i){var l=ue();return X(l,n,i)},useTransition:function(){var n=z(!1);return n=Qe.bind(null,Wg,n.queue,!0,!1),ue().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var E=Wg,te=ue();if(fv){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),og===null)throw Error(a(349));(fg&127)!==0||M(E,i,l)}te.memoizedState=l;var Me={value:l,getSnapshot:i};return te.queue=Me,ce(B.bind(null,E,Me,n),[n]),E.flags|=2048,ge(9,{destroy:void 0},D.bind(null,E,Me,l,i),null),l},useId:function(){var n=ue(),i=og.identifierPrefix;if(fv){var l=Ky,E=Jy;l=(E&~(1<<32-vm(E)-1)).toString(32)+l,i="_"+i+"R_"+l,l=L_++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=V5++,i="_"+i+"r_"+l.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Te,useFormState:le,useActionState:le,useOptimistic:function(n){var i=ue();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=t0.bind(null,Wg,!0,l),l.dispatch=i,[n,i]},useMemoCache:v,useCacheRefresh:function(){return ue().memoizedState=dr.bind(null,Wg)},useEffectEvent:function(n){var i=ue(),l={impl:n};return i.memoizedState=l,function(){if((Yg&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},yp={readContext:_y,use:x,useCallback:Se,useContext:_y,useEffect:ke,useImperativeHandle:Ei,useInsertionEffect:Ke,useLayoutEffect:nt,useMemo:Ee,useReducer:b,useRef:ye,useState:function(){return b(y)},useDebugValue:vs,useDeferredValue:function(n,i){var l=g();return Oe(l,Lv.memoizedState,n,i)},useTransition:function(){var n=b(y)[0],i=g().memoizedState;return[typeof n=="boolean"?n:h(n),i]},useSyncExternalStore:k,useId:et,useHostTransitionStatus:Te,useFormState:Y,useActionState:Y,useOptimistic:function(n,i){var l=g();return F(l,Lv,n,i)},useMemoCache:v,useCacheRefresh:bt};yp.useEffectEvent=tt;var Bp={readContext:_y,use:x,useCallback:Se,useContext:_y,useEffect:ke,useImperativeHandle:Ei,useInsertionEffect:Ke,useLayoutEffect:nt,useMemo:Ee,useReducer:u,useRef:ye,useState:function(){return u(y)},useDebugValue:vs,useDeferredValue:function(n,i){var l=g();return Lv===null?X(l,n,i):Oe(l,Lv.memoizedState,n,i)},useTransition:function(){var n=u(y)[0],i=g().memoizedState;return[typeof n=="boolean"?n:h(n),i]},useSyncExternalStore:k,useId:et,useHostTransitionStatus:Te,useFormState:xe,useActionState:xe,useOptimistic:function(n,i){var l=g();return Lv!==null?F(l,Lv,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:v,useCacheRefresh:bt};Bp.useEffectEvent=tt;function Jp(n,i,l,E){i=n.memoizedState,l=l(E,i),l=l==null?i:C({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var m0={enqueueSetState:function(n,i,l){n=n._reactInternals;var E=zy(),te=Tx(E);te.payload=i,l!=null&&(te.callback=l),i=Xy(n,te,E),i!==null&&(Ly(i,n,E),Xx(i,n,E))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var E=zy(),te=Tx(E);te.tag=1,te.payload=i,l!=null&&(te.callback=l),i=Xy(n,te,E),i!==null&&(Ly(i,n,E),Xx(i,n,E))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=zy(),E=Tx(l);E.tag=2,i!=null&&(E.callback=i),i=Xy(n,E,l),i!==null&&(Ly(i,n,l),Xx(i,n,l))}};function s0(n,i,l,E,te,Me,Io){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(E,Me,Io):i.prototype&&i.prototype.isPureReactComponent?!Qx(l,E)||!Qx(te,Me):!0}function y0(n,i,l,E){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,E),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,E),i.state!==n&&m0.enqueueReplaceState(i,i.state,null)}function M0(n,i){var l=i;if("ref"in i){l={};for(var E in i)E!=="ref"&&(l[E]=i[E])}if(n=n.defaultProps){l===i&&(l=C({},l));for(var te in n)l[te]===void 0&&(l[te]=n[te])}return l}function T0(n){m_(n)}function G0(n){console.error(n)}function h0(n){m_(n)}function W0(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(E){setTimeout(function(){throw E})}}function rm(n,i,l){try{var E=n.onCaughtError;E(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(te){setTimeout(function(){throw te})}}function V0(n,i,l){return l=Tx(l),l.tag=3,l.payload={element:null},l.callback=function(){W0(n,i)},l}function um(n){return n=Tx(n),n.tag=3,n}function Uo(n,i,l,E){var te=l.type.getDerivedStateFromError;if(typeof te=="function"){var Me=E.value;n.payload=function(){return te(Me)},n.callback=function(){rm(i,l,E)}}var Io=l.stateNode;Io!==null&&typeof Io.componentDidCatch=="function"&&(n.callback=function(){rm(i,l,E),typeof te!="function"&&(nx===null?nx=new Set([this]):nx.add(this));var Rp=E.stack;this.componentDidCatch(E.value,{componentStack:Rp!==null?Rp:""})})}function Tp(n,i,l,E,te){if(l.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(i=l.alternate,i!==null&&Vx(i,l,te,!0),l=Cy.current,l!==null){switch(l.tag){case 31:case 13:return Vy===null?W2():l.alternate===null&&jv===0&&(jv=3),l.flags&=-257,l.flags|=65536,l.lanes=te,E===T_?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([E]):i.add(E),O_(n,E,te)),!1;case 22:return l.flags|=65536,E===T_?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([E])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([E]):l.add(E)),O_(n,E,te)),!1}throw Error(a(435,l.tag))}return O_(n,E,te),W2(),!1}if(fv)return i=Cy.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=te,E!==yb&&(n=Error(a(422),{cause:E}),N2(jy(n,l)))):(E!==yb&&(i=Error(a(423),{cause:E}),N2(jy(i,l))),n=n.current.alternate,n.flags|=65536,te&=-te,n.lanes|=te,E=jy(E,l),te=V0(n.stateNode,E,te),B2(n,te),jv!==4&&(jv=2)),!1;var Me=Error(a(520),{cause:E});if(Me=jy(Me,l),qy===null?qy=[Me]:qy.push(Me),jv!==4&&(jv=2),i===null)return!0;E=jy(E,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=te&-te,l.lanes|=n,n=V0(l.stateNode,E,n),B2(l,n),!1;case 1:if(i=l.type,Me=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(nx===null||!nx.has(Me))))return l.flags|=65536,te&=-te,l.lanes|=te,te=um(te),Uo(te,n,l,E),B2(l,te),!1}l=l.return}while(l!==null);return!1}var Be=Error(a(461)),ft=!1;function mn(n,i,l,E){i.child=n===null?F3(i,null,l,E):Sx(i,n.child,l,E)}function Bl(n,i,l,E,te){l=l.render;var Me=i.ref;if("ref"in E){var Io={};for(var Rp in E)Rp!=="ref"&&(Io[Rp]=E[Rp])}else Io=E;return qx(i),E=zb(n,i,l,Io,Me,te),Rp=Ob(),n!==null&&!ft?(Pb(n,i,te),F1(n,i,te)):(fv&&Rp&&k2(i),i.flags|=1,mn(n,i,E,te),i.child)}function Vl(n,i,l,E,te){if(n===null){var Me=l.type;return typeof Me=="function"&&!pb(Me)&&Me.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=Me,Np(n,i,Me,E,te)):(n=x_(l.type,null,E,i,i.mode,te),n.ref=i.ref,n.return=i,i.child=n)}if(Me=n.child,!g1(n,te)){var Io=Me.memoizedProps;if(l=l.compare,l=l!==null?l:Qx,l(Io,E)&&n.ref===i.ref)return F1(n,i,te)}return i.flags|=1,n=sx(Me,E),n.ref=i.ref,n.return=i,i.child=n}function Np(n,i,l,E,te){if(n!==null){var Me=n.memoizedProps;if(Qx(Me,E)&&n.ref===i.ref)if(ft=!1,i.pendingProps=E=Me,g1(n,te))(n.flags&131072)!==0&&(ft=!0);else return i.lanes=n.lanes,F1(n,i,te)}return lm(n,i,l,E,te)}function Up(n,i,l,E){var te=E.children,Me=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((i.flags&128)!==0){if(Me=Me!==null?Me.baseLanes|l:l,n!==null){for(E=i.child=n.child,te=0;E!==null;)te=te|E.lanes|E.childLanes,E=E.sibling;E=te&~Me}else E=0,i.child=null;return Zp(n,i,Me,l,E)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&P2(i,Me!==null?Me.cachePool:null),Me!==null?H3(i,Me):C_(),G3(i);else return E=i.lanes=536870912,Zp(n,i,Me!==null?Me.baseLanes|l:l,l,E)}else Me!==null?(P2(i,Me.cachePool),H3(i,Me),Ax(),i.memoizedState=null):(n!==null&&P2(i,null),C_(),Ax());return mn(n,i,te,l),i.child}function Qp(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Zp(n,i,l,E,te){var Me=Eb();return Me=Me===null?null:{parent:ly._currentValue,pool:Me},i.memoizedState={baseLanes:l,cachePool:Me},n!==null&&P2(i,null),C_(),G3(i),n!==null&&Vx(n,i,E,!0),i.childLanes=te,null}function Kp(n,i){return i=n1({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function R0(n,i,l){return Sx(i,n.child,null,l),n=Kp(i,i.pendingProps),n.flags|=2,Ny(i),i.memoizedState=null,n}function k0(n,i,l){var E=i.pendingProps,te=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(fv){if(E.mode==="hidden")return n=Kp(i,E),i.lanes=536870912,Qp(null,n);if(kb(i),(n=Vv)?(n=n3(n,Gy),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:lx!==null?{id:Jy,overflow:Ky}:null,retryLane:536870912,hydrationErrors:null},l=R3(n),l.return=i,i.child=l,xy=i,Vv=null)):n=null,n===null)throw _x(i);return i.lanes=536870912,null}return Kp(i,E)}var Me=n.memoizedState;if(Me!==null){var Io=Me.dehydrated;if(kb(i),te)if(i.flags&256)i.flags&=-257,i=R0(n,i,l);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(ft||Vx(n,i,l,!1),te=(l&n.childLanes)!==0,ft||te){if(E=og,E!==null&&(Io=sv(E,l),Io!==0&&Io!==Me.retryLane))throw Me.retryLane=Io,Bx(n,Io),Ly(E,n,Io),Be;W2(),i=R0(n,i,l)}else n=Me.treeContext,Vv=$y(Io.nextSibling),xy=i,fv=!0,ux=null,Gy=!1,n!==null&&D3(i,n),i=Kp(i,E),i.flags|=4096;return i}return n=sx(n.child,{mode:E.mode,children:E.children}),n.ref=i.ref,i.child=n,n.return=i,n}function N0(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function lm(n,i,l,E,te){return qx(i),l=zb(n,i,l,E,void 0,te),E=Ob(),n!==null&&!ft?(Pb(n,i,te),F1(n,i,te)):(fv&&E&&k2(i),i.flags|=1,mn(n,i,l,te),i.child)}function Im(n,i,l,E,te,Me){return qx(i),i.updateQueue=null,l=q3(i,E,l,te),V3(n),E=Ob(),n!==null&&!ft?(Pb(n,i,Me),F1(n,i,Me)):(fv&&E&&k2(i),i.flags|=1,mn(n,i,l,Me),i.child)}function u1(n,i,l,E,te){if(qx(i),i.stateNode===null){var Me=jx,Io=l.contextType;typeof Io=="object"&&Io!==null&&(Me=_y(Io)),Me=new l(E,Me),i.memoizedState=Me.state!==null&&Me.state!==void 0?Me.state:null,Me.updater=m0,i.stateNode=Me,Me._reactInternals=i,Me=i.stateNode,Me.props=E,Me.state=i.memoizedState,Me.refs={},Rb(i),Io=l.contextType,Me.context=typeof Io=="object"&&Io!==null?_y(Io):jx,Me.state=i.memoizedState,Io=l.getDerivedStateFromProps,typeof Io=="function"&&(Jp(i,l,Io,E),Me.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof Me.getSnapshotBeforeUpdate=="function"||typeof Me.UNSAFE_componentWillMount!="function"&&typeof Me.componentWillMount!="function"||(Io=Me.state,typeof Me.componentWillMount=="function"&&Me.componentWillMount(),typeof Me.UNSAFE_componentWillMount=="function"&&Me.UNSAFE_componentWillMount(),Io!==Me.state&&m0.enqueueReplaceState(Me,Me.state,null),H2(i,E,Me,te),j2(),Me.state=i.memoizedState),typeof Me.componentDidMount=="function"&&(i.flags|=4194308),E=!0}else if(n===null){Me=i.stateNode;var Rp=i.memoizedProps,L0=M0(l,Rp);Me.props=L0;var hm=Me.context,Am=l.contextType;Io=jx,typeof Am=="object"&&Am!==null&&(Io=_y(Am));var X0=l.getDerivedStateFromProps;Am=typeof X0=="function"||typeof Me.getSnapshotBeforeUpdate=="function",Rp=i.pendingProps!==Rp,Am||typeof Me.UNSAFE_componentWillReceiveProps!="function"&&typeof Me.componentWillReceiveProps!="function"||(Rp||hm!==Io)&&y0(i,Me,E,Io),Wy=!1;var em=i.memoizedState;Me.state=em,H2(i,E,Me,te),j2(),hm=i.memoizedState,Rp||em!==hm||Wy?(typeof X0=="function"&&(Jp(i,l,X0,E),hm=i.memoizedState),(L0=Wy||s0(i,l,L0,E,em,hm,Io))?(Am||typeof Me.UNSAFE_componentWillMount!="function"&&typeof Me.componentWillMount!="function"||(typeof Me.componentWillMount=="function"&&Me.componentWillMount(),typeof Me.UNSAFE_componentWillMount=="function"&&Me.UNSAFE_componentWillMount()),typeof Me.componentDidMount=="function"&&(i.flags|=4194308)):(typeof Me.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=E,i.memoizedState=hm),Me.props=E,Me.state=hm,Me.context=Io,E=L0):(typeof Me.componentDidMount=="function"&&(i.flags|=4194308),E=!1)}else{Me=i.stateNode,A_(n,i),Io=i.memoizedProps,Am=M0(l,Io),Me.props=Am,X0=i.pendingProps,em=Me.context,hm=l.contextType,L0=jx,typeof hm=="object"&&hm!==null&&(L0=_y(hm)),Rp=l.getDerivedStateFromProps,(hm=typeof Rp=="function"||typeof Me.getSnapshotBeforeUpdate=="function")||typeof Me.UNSAFE_componentWillReceiveProps!="function"&&typeof Me.componentWillReceiveProps!="function"||(Io!==X0||em!==L0)&&y0(i,Me,E,L0),Wy=!1,em=i.memoizedState,Me.state=em,H2(i,E,Me,te),j2();var cm=i.memoizedState;Io!==X0||em!==cm||Wy||n!==null&&n.dependencies!==null&&w_(n.dependencies)?(typeof Rp=="function"&&(Jp(i,l,Rp,E),cm=i.memoizedState),(Am=Wy||s0(i,l,Am,E,em,cm,L0)||n!==null&&n.dependencies!==null&&w_(n.dependencies))?(hm||typeof Me.UNSAFE_componentWillUpdate!="function"&&typeof Me.componentWillUpdate!="function"||(typeof Me.componentWillUpdate=="function"&&Me.componentWillUpdate(E,cm,L0),typeof Me.UNSAFE_componentWillUpdate=="function"&&Me.UNSAFE_componentWillUpdate(E,cm,L0)),typeof Me.componentDidUpdate=="function"&&(i.flags|=4),typeof Me.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof Me.componentDidUpdate!="function"||Io===n.memoizedProps&&em===n.memoizedState||(i.flags|=4),typeof Me.getSnapshotBeforeUpdate!="function"||Io===n.memoizedProps&&em===n.memoizedState||(i.flags|=1024),i.memoizedProps=E,i.memoizedState=cm),Me.props=E,Me.state=cm,Me.context=L0,E=Am):(typeof Me.componentDidUpdate!="function"||Io===n.memoizedProps&&em===n.memoizedState||(i.flags|=4),typeof Me.getSnapshotBeforeUpdate!="function"||Io===n.memoizedProps&&em===n.memoizedState||(i.flags|=1024),E=!1)}return Me=E,N0(n,i),E=(i.flags&128)!==0,Me||E?(Me=i.stateNode,l=E&&typeof l.getDerivedStateFromError!="function"?null:Me.render(),i.flags|=1,n!==null&&E?(i.child=Sx(i,n.child,null,te),i.child=Sx(i,null,l,te)):mn(n,i,l,te),i.memoizedState=Me.state,n=i.child):n=F1(n,i,te),n}function v1(n,i,l,E){return Gx(),i.flags|=256,mn(n,i,l,E),i.child}var b1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(n){return{baseLanes:n,cachePool:O3()}}function fm(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=My),n}function c1(n,i,l){var E=i.pendingProps,te=!1,Me=(i.flags&128)!==0,Io;if((Io=Me)||(Io=n!==null&&n.memoizedState===null?!1:(cv.current&2)!==0),Io&&(te=!0,i.flags&=-129),Io=(i.flags&32)!==0,i.flags&=-33,n===null){if(fv){if(te?Ex(i):Ax(),(n=Vv)?(n=n3(n,Gy),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:lx!==null?{id:Jy,overflow:Ky}:null,retryLane:536870912,hydrationErrors:null},l=R3(n),l.return=i,i.child=l,xy=i,Vv=null)):n=null,n===null)throw _x(i);return w2(n)?i.lanes=32:i.lanes=536870912,null}var Rp=E.children;return E=E.fallback,te?(Ax(),te=i.mode,Rp=n1({mode:"hidden",children:Rp},te),E=Hx(E,te,l,null),Rp.return=i,E.return=i,Rp.sibling=E,i.child=Rp,E=i.child,E.memoizedState=Bm(l),E.childLanes=fm(n,Io,l),i.memoizedState=b1,Qp(null,E)):(Ex(i),y1(i,Rp))}var L0=n.memoizedState;if(L0!==null&&(Rp=L0.dehydrated,Rp!==null)){if(Me)i.flags&256?(Ex(i),i.flags&=-257,i=Ym(n,i,l)):i.memoizedState!==null?(Ax(),i.child=n.child,i.flags|=128,i=null):(Ax(),Rp=E.fallback,te=i.mode,E=n1({mode:"visible",children:E.children},te),Rp=Hx(Rp,te,l,null),Rp.flags|=2,E.return=i,Rp.return=i,E.sibling=Rp,i.child=E,Sx(i,n.child,null,l),E=i.child,E.memoizedState=Bm(l),E.childLanes=fm(n,Io,l),i.memoizedState=b1,i=Qp(null,E));else if(Ex(i),w2(Rp)){if(Io=Rp.nextSibling&&Rp.nextSibling.dataset,Io)var hm=Io.dgst;Io=hm,E=Error(a(419)),E.stack="",E.digest=Io,N2({value:E,source:null,stack:null}),i=Ym(n,i,l)}else if(ft||Vx(n,i,l,!1),Io=(l&n.childLanes)!==0,ft||Io){if(Io=og,Io!==null&&(E=sv(Io,l),E!==0&&E!==L0.retryLane))throw L0.retryLane=E,Bx(n,E),Ly(Io,n,E),Be;a3(Rp)||W2(),i=Ym(n,i,l)}else a3(Rp)?(i.flags|=192,i.child=n.child,i=null):(n=L0.treeContext,Vv=$y(Rp.nextSibling),xy=i,fv=!0,ux=null,Gy=!1,n!==null&&D3(i,n),i=y1(i,E.children),i.flags|=4096);return i}return te?(Ax(),Rp=E.fallback,te=i.mode,L0=n.child,hm=L0.sibling,E=sx(L0,{mode:"hidden",children:E.children}),E.subtreeFlags=L0.subtreeFlags&65011712,hm!==null?Rp=sx(hm,Rp):(Rp=Hx(Rp,te,l,null),Rp.flags|=2),Rp.return=i,E.return=i,E.sibling=Rp,i.child=E,Qp(null,E),E=i.child,Rp=n.child.memoizedState,Rp===null?Rp=Bm(l):(te=Rp.cachePool,te!==null?(L0=ly._currentValue,te=te.parent!==L0?{parent:L0,pool:L0}:te):te=O3(),Rp={baseLanes:Rp.baseLanes|l,cachePool:te}),E.memoizedState=Rp,E.childLanes=fm(n,Io,l),i.memoizedState=b1,Qp(n.child,E)):(Ex(i),l=n.child,n=l.sibling,l=sx(l,{mode:"visible",children:E.children}),l.return=i,l.sibling=null,n!==null&&(Io=i.deletions,Io===null?(i.deletions=[n],i.flags|=16):Io.push(n)),i.child=l,i.memoizedState=null,l)}function y1(n,i){return i=n1({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function n1(n,i){return n=Ey(22,n,null,i),n.lanes=0,n}function Ym(n,i,l){return Sx(i,n.child,null,l),n=y1(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function t1(n,i,l){n.lanes|=i;var E=n.alternate;E!==null&&(E.lanes|=i),bb(n.return,i,l)}function Um(n,i,l,E,te,Me){var Io=n.memoizedState;Io===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:E,tail:l,tailMode:te,treeForkCount:Me}:(Io.isBackwards=i,Io.rendering=null,Io.renderingStartTime=0,Io.last=E,Io.tail=l,Io.tailMode=te,Io.treeForkCount=Me)}function z1(n,i,l){var E=i.pendingProps,te=E.revealOrder,Me=E.tail;E=E.children;var Io=cv.current,Rp=(Io&2)!==0;if(Rp?(Io=Io&1|2,i.flags|=128):Io&=1,qp(cv,Io),mn(n,i,E,l),E=fv?D2:0,!Rp&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&t1(n,l,i);else if(n.tag===19)t1(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(te){case"forwards":for(l=i.child,te=null;l!==null;)n=l.alternate,n!==null&&py(n)===null&&(te=l),l=l.sibling;l=te,l===null?(te=i.child,i.child=null):(te=l.sibling,l.sibling=null),Um(i,!1,te,l,Me,E);break;case"backwards":case"unstable_legacy-backwards":for(l=null,te=i.child,i.child=null;te!==null;){if(n=te.alternate,n!==null&&py(n)===null){i.child=te;break}n=te.sibling,te.sibling=l,l=te,te=n}Um(i,!0,l,null,Me,E);break;case"together":Um(i,!1,null,null,void 0,E);break;default:i.memoizedState=null}return i.child}function F1(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),wy|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(Vx(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,l=sx(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=sx(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function g1(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&w_(n)))}function V1(n,i,l){switch(i.tag){case 3:a0(i,i.stateNode.containerInfo),wx(i,ly,n.memoizedState.cache),Gx();break;case 27:case 5:am(i);break;case 4:a0(i,i.stateNode.containerInfo);break;case 10:wx(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,kb(i),null;break;case 13:var E=i.memoizedState;if(E!==null)return E.dehydrated!==null?(Ex(i),i.flags|=128,null):(l&i.child.childLanes)!==0?c1(n,i,l):(Ex(i),n=F1(n,i,l),n!==null?n.sibling:null);Ex(i);break;case 19:var te=(n.flags&128)!==0;if(E=(l&i.childLanes)!==0,E||(Vx(n,i,l,!1),E=(l&i.childLanes)!==0),te){if(E)return z1(n,i,l);i.flags|=128}if(te=i.memoizedState,te!==null&&(te.rendering=null,te.tail=null,te.lastEffect=null),qp(cv,cv.current),E)break;return null;case 22:return i.lanes=0,Up(n,i,l,i.pendingProps);case 24:wx(i,ly,n.memoizedState.cache)}return F1(n,i,l)}function K1(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)ft=!0;else{if(!g1(n,l)&&(i.flags&128)===0)return ft=!1,V1(n,i,l);ft=(n.flags&131072)!==0}else ft=!1,fv&&(i.flags&1048576)!==0&&L3(i,D2,i.index);switch(i.lanes=0,i.tag){case 16:e:{var E=i.pendingProps;if(n=Yx(i.elementType),i.type=n,typeof n=="function")pb(n)?(E=M0(n,E),i.tag=1,i=u1(null,i,n,E,l)):(i.tag=0,i=lm(null,i,n,E,l));else{if(n!=null){var te=n.$$typeof;if(te===se){i.tag=11,i=Bl(null,i,n,E,l);break e}else if(te===Xe){i.tag=14,i=Vl(null,i,n,E,l);break e}}throw i=_r(n)||n,Error(a(306,i,""))}}return i;case 0:return lm(n,i,i.type,i.pendingProps,l);case 1:return E=i.type,te=M0(E,i.pendingProps),u1(n,i,E,te,l);case 3:e:{if(a0(i,i.stateNode.containerInfo),n===null)throw Error(a(387));E=i.pendingProps;var Me=i.memoizedState;te=Me.element,A_(n,i),H2(i,E,null,l);var Io=i.memoizedState;if(E=Io.cache,wx(i,ly,E),E!==Me.cache&&n2(i,[ly],l,!0),j2(),E=Io.element,Me.isDehydrated)if(Me={element:E,isDehydrated:!1,cache:Io.cache},i.updateQueue.baseState=Me,i.memoizedState=Me,i.flags&256){i=v1(n,i,E,l);break e}else if(E!==te){te=jy(Error(a(424)),i),N2(te),i=v1(n,i,E,l);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Vv=$y(n.firstChild),xy=i,fv=!0,ux=null,Gy=!0,l=F3(i,null,E,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Gx(),E===te){i=F1(n,i,l);break e}mn(n,i,E,l)}i=i.child}return i;case 26:return N0(n,i),n===null?(l=C5(i.type,null,i.pendingProps,null))?i.memoizedState=l:fv||(l=i.type,n=i.pendingProps,E=t_(o0.current).createElement(l),E[vv]=i,E[ag]=n,dy(E,l,n),wm(E),i.stateNode=E):i.memoizedState=C5(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return am(i),n===null&&fv&&(E=i.stateNode=i_(i.type,i.pendingProps,o0.current),xy=i,Gy=!0,te=Vv,Rx(i.type)?($_=te,Vv=$y(E.firstChild)):Vv=te),mn(n,i,i.pendingProps.children,l),N0(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&fv&&((te=E=Vv)&&(E=M5(E,i.type,i.pendingProps,Gy),E!==null?(i.stateNode=E,xy=i,Vv=$y(E.firstChild),Gy=!1,te=!0):te=!1),te||_x(i)),am(i),te=i.type,Me=i.pendingProps,Io=n!==null?n.memoizedProps:null,E=Me.children,r_(te,Me)?E=null:Io!==null&&r_(te,Io)&&(i.flags|=32),i.memoizedState!==null&&(te=zb(n,i,q5,null,null,l),T2._currentValue=te),N0(n,i),mn(n,i,E,l),i.child;case 6:return n===null&&fv&&((n=l=Vv)&&(l=S5(l,i.pendingProps,Gy),l!==null?(i.stateNode=l,xy=i,Vv=null,n=!0):n=!1),n||_x(i)),null;case 13:return c1(n,i,l);case 4:return a0(i,i.stateNode.containerInfo),E=i.pendingProps,n===null?i.child=Sx(i,null,E,l):mn(n,i,E,l),i.child;case 11:return Bl(n,i,i.type,i.pendingProps,l);case 7:return mn(n,i,i.pendingProps,l),i.child;case 8:return mn(n,i,i.pendingProps.children,l),i.child;case 12:return mn(n,i,i.pendingProps.children,l),i.child;case 10:return E=i.pendingProps,wx(i,i.type,E.value),mn(n,i,E.children,l),i.child;case 9:return te=i.type._context,E=i.pendingProps.children,qx(i),te=_y(te),E=E(te),i.flags|=1,mn(n,i,E,l),i.child;case 14:return Vl(n,i,i.type,i.pendingProps,l);case 15:return Np(n,i,i.type,i.pendingProps,l);case 19:return z1(n,i,l);case 31:return k0(n,i,l);case 22:return Up(n,i,l,i.pendingProps);case 24:return qx(i),E=_y(ly),n===null?(te=Eb(),te===null&&(te=og,Me=Sb(),te.pooledCache=Me,Me.refCount++,Me!==null&&(te.pooledCacheLanes|=l),te=Me),i.memoizedState={parent:E,cache:te},Rb(i),wx(i,ly,te)):((n.lanes&l)!==0&&(A_(n,i),H2(i,null,null,l),j2()),te=n.memoizedState,Me=i.memoizedState,te.parent!==E?(te={parent:E,cache:E},i.memoizedState=te,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=te),wx(i,ly,E)):(E=Me.cache,wx(i,ly,E),E!==te.cache&&n2(i,[ly],l,!0))),mn(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ig(n){n.flags|=4}function mg(n,i,l,E,te){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(te&335544128)===te)if(n.stateNode.complete)n.flags|=8192;else if(Z3())n.flags|=8192;else throw Wx=T_,Ab}else n.flags&=-16777217}function P1(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!D5(i))if(Z3())n.flags|=8192;else throw Wx=T_,Ab}function lg(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?gg():536870912,n.lanes|=i,tx|=i)}function G1(n,i){if(!fv)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var E=null;l!==null;)l.alternate!==null&&(E=l),l=l.sibling;E===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:E.sibling=null}}function Sm(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,E=0;if(i)for(var te=n.child;te!==null;)l|=te.lanes|te.childLanes,E|=te.subtreeFlags&65011712,E|=te.flags&65011712,te.return=n,te=te.sibling;else for(te=n.child;te!==null;)l|=te.lanes|te.childLanes,E|=te.subtreeFlags,E|=te.flags,te.return=n,te=te.sibling;return n.subtreeFlags|=E,n.childLanes=l,i}function Cg(n,i,l){var E=i.pendingProps;switch(vb(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sm(i),null;case 1:return Sm(i),null;case 3:return l=i.stateNode,E=null,n!==null&&(E=n.memoizedState.cache),i.memoizedState.cache!==E&&(i.flags|=2048),hx(ly),P0(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(r2(i)?ig(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,_b())),Sm(i),null;case 26:var te=i.type,Me=i.memoizedState;return n===null?(ig(i),Me!==null?(Sm(i),P1(i,Me)):(Sm(i),mg(i,te,null,E,l))):Me?Me!==n.memoizedState?(ig(i),Sm(i),P1(i,Me)):(Sm(i),i.flags&=-16777217):(n=n.memoizedProps,n!==E&&ig(i),Sm(i),mg(i,te,n,E,l)),null;case 27:if(sm(i),l=o0.current,te=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==E&&ig(i);else{if(!E){if(i.stateNode===null)throw Error(a(166));return Sm(i),null}n=ci.current,r2(i)?k3(i):(n=i_(te,E,l),i.stateNode=n,ig(i))}return Sm(i),null;case 5:if(sm(i),te=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==E&&ig(i);else{if(!E){if(i.stateNode===null)throw Error(a(166));return Sm(i),null}if(Me=ci.current,r2(i))k3(i);else{var Io=t_(o0.current);switch(Me){case 1:Me=Io.createElementNS("http://www.w3.org/2000/svg",te);break;case 2:Me=Io.createElementNS("http://www.w3.org/1998/Math/MathML",te);break;default:switch(te){case"svg":Me=Io.createElementNS("http://www.w3.org/2000/svg",te);break;case"math":Me=Io.createElementNS("http://www.w3.org/1998/Math/MathML",te);break;case"script":Me=Io.createElement("div"),Me.innerHTML="<script><\/script>",Me=Me.removeChild(Me.firstChild);break;case"select":Me=typeof E.is=="string"?Io.createElement("select",{is:E.is}):Io.createElement("select"),E.multiple?Me.multiple=!0:E.size&&(Me.size=E.size);break;default:Me=typeof E.is=="string"?Io.createElement(te,{is:E.is}):Io.createElement(te)}}Me[vv]=i,Me[ag]=E;e:for(Io=i.child;Io!==null;){if(Io.tag===5||Io.tag===6)Me.appendChild(Io.stateNode);else if(Io.tag!==4&&Io.tag!==27&&Io.child!==null){Io.child.return=Io,Io=Io.child;continue}if(Io===i)break e;for(;Io.sibling===null;){if(Io.return===null||Io.return===i)break e;Io=Io.return}Io.sibling.return=Io.return,Io=Io.sibling}i.stateNode=Me;e:switch(dy(Me,te,E),te){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&ig(i)}}return Sm(i),mg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,l),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==E&&ig(i);else{if(typeof E!="string"&&i.stateNode===null)throw Error(a(166));if(n=o0.current,r2(i)){if(n=i.stateNode,l=i.memoizedProps,E=null,te=xy,te!==null)switch(te.tag){case 27:case 5:E=te.memoizedProps}n[vv]=i,n=!!(n.nodeValue===l||E!==null&&E.suppressHydrationWarning===!0||G_(n.nodeValue,l)),n||_x(i,!0)}else n=t_(n).createTextNode(E),n[vv]=i,i.stateNode=n}return Sm(i),null;case 31:if(l=i.memoizedState,n===null||n.memoizedState!==null){if(E=r2(i),l!==null){if(n===null){if(!E)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[vv]=i}else Gx(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Sm(i),n=!1}else l=_b(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return i.flags&256?(Ny(i),i):(Ny(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Sm(i),null;case 13:if(E=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(te=r2(i),E!==null&&E.dehydrated!==null){if(n===null){if(!te)throw Error(a(318));if(te=i.memoizedState,te=te!==null?te.dehydrated:null,!te)throw Error(a(317));te[vv]=i}else Gx(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Sm(i),te=!1}else te=_b(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=te),te=!0;if(!te)return i.flags&256?(Ny(i),i):(Ny(i),null)}return Ny(i),(i.flags&128)!==0?(i.lanes=l,i):(l=E!==null,n=n!==null&&n.memoizedState!==null,l&&(E=i.child,te=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(te=E.alternate.memoizedState.cachePool.pool),Me=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(Me=E.memoizedState.cachePool.pool),Me!==te&&(E.flags|=2048)),l!==n&&l&&(i.child.flags|=8192),lg(i,i.updateQueue),Sm(i),null);case 4:return P0(),n===null&&B_(i.stateNode.containerInfo),Sm(i),null;case 10:return hx(i.type),Sm(i),null;case 19:if(Ip(cv),E=i.memoizedState,E===null)return Sm(i),null;if(te=(i.flags&128)!==0,Me=E.rendering,Me===null)if(te)G1(E,!1);else{if(jv!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(Me=py(n),Me!==null){for(i.flags|=128,G1(E,!1),n=Me.updateQueue,i.updateQueue=n,lg(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)C3(l,n),l=l.sibling;return qp(cv,cv.current&1|2),fv&&cx(i,E.treeForkCount),i.child}n=n.sibling}E.tail!==null&&bm()>Y2&&(i.flags|=128,te=!0,G1(E,!1),i.lanes=4194304)}else{if(!te)if(n=py(Me),n!==null){if(i.flags|=128,te=!0,n=n.updateQueue,i.updateQueue=n,lg(i,n),G1(E,!0),E.tail===null&&E.tailMode==="hidden"&&!Me.alternate&&!fv)return Sm(i),null}else 2*bm()-E.renderingStartTime>Y2&&l!==536870912&&(i.flags|=128,te=!0,G1(E,!1),i.lanes=4194304);E.isBackwards?(Me.sibling=i.child,i.child=Me):(n=E.last,n!==null?n.sibling=Me:i.child=Me,E.last=Me)}return E.tail!==null?(n=E.tail,E.rendering=n,E.tail=n.sibling,E.renderingStartTime=bm(),n.sibling=null,l=cv.current,qp(cv,te?l&1|2:l&1),fv&&cx(i,E.treeForkCount),n):(Sm(i),null);case 22:case 23:return Ny(i),Db(),E=i.memoizedState!==null,n!==null?n.memoizedState!==null!==E&&(i.flags|=8192):E&&(i.flags|=8192),E?(l&536870912)!==0&&(i.flags&128)===0&&(Sm(i),i.subtreeFlags&6&&(i.flags|=8192)):Sm(i),l=i.updateQueue,l!==null&&lg(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),E=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(E=i.memoizedState.cachePool.pool),E!==l&&(i.flags|=2048),n!==null&&Ip(Mx),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),hx(ly),Sm(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Je(n,i){switch(vb(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return hx(ly),P0(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return sm(i),null;case 31:if(i.memoizedState!==null){if(Ny(i),i.alternate===null)throw Error(a(340));Gx()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Ny(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Gx()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ip(cv),null;case 4:return P0(),null;case 10:return hx(i.type),null;case 22:case 23:return Ny(i),Db(),n!==null&&Ip(Mx),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return hx(ly),null;case 25:return null;default:return null}}function Ve(n,i){switch(vb(i),i.tag){case 3:hx(ly),P0();break;case 26:case 27:case 5:sm(i);break;case 4:P0();break;case 31:i.memoizedState!==null&&Ny(i);break;case 13:Ny(i);break;case 19:Ip(cv);break;case 10:hx(i.type);break;case 22:case 23:Ny(i),Db(),n!==null&&Ip(Mx);break;case 24:hx(ly)}}function Mp(n,i){try{var l=i.updateQueue,E=l!==null?l.lastEffect:null;if(E!==null){var te=E.next;l=te;do{if((l.tag&n)===n){E=void 0;var Me=l.create,Io=l.inst;E=Me(),Io.destroy=E}l=l.next}while(l!==te)}}catch(Rp){Av(i,i.return,Rp)}}function kp(n,i,l){try{var E=i.updateQueue,te=E!==null?E.lastEffect:null;if(te!==null){var Me=te.next;E=Me;do{if((E.tag&n)===n){var Io=E.inst,Rp=Io.destroy;if(Rp!==void 0){Io.destroy=void 0,te=i;var L0=l,hm=Rp;try{hm()}catch(Am){Av(te,L0,Am)}}}E=E.next}while(E!==Me)}}catch(Am){Av(i,i.return,Am)}}function Vp(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{j3(i,l)}catch(E){Av(n,n.return,E)}}}function wp(n,i,l){l.props=M0(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(E){Av(n,i,E)}}function Ap(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var E=n.stateNode;break;case 30:E=n.stateNode;break;default:E=n.stateNode}typeof l=="function"?n.refCleanup=l(E):l.current=E}}catch(te){Av(n,i,te)}}function Yp(n,i){var l=n.ref,E=n.refCleanup;if(l!==null)if(typeof E=="function")try{E()}catch(te){Av(n,i,te)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(te){Av(n,i,te)}else l.current=null}function Fp(n){var i=n.type,l=n.memoizedProps,E=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&E.focus();break e;case"img":l.src?E.src=l.src:l.srcSet&&(E.srcset=l.srcSet)}}catch(te){Av(n,n.return,te)}}function u0(n,i,l){try{var E=n.stateNode;tw(E,n.type,l,i),E[ag]=i}catch(te){Av(n,n.return,te)}}function g0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Rx(n.type)||n.tag===4}function H0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||g0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Rx(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lm(n,i,l){var E=n.tag;if(E===5||E===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Op));else if(E!==4&&(E===27&&Rx(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(Lm(n,i,l),n=n.sibling;n!==null;)Lm(n,i,l),n=n.sibling}function Em(n,i,l){var E=n.tag;if(E===5||E===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(E!==4&&(E===27&&Rx(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Em(n,i,l),n=n.sibling;n!==null;)Em(n,i,l),n=n.sibling}function Qm(n){var i=n.stateNode,l=n.memoizedProps;try{for(var E=n.type,te=i.attributes;te.length;)i.removeAttributeNode(te[0]);dy(i,E,l),i[vv]=n,i[ag]=l}catch(Me){Av(n,n.return,Me)}}var xm=!1,zm=!1,f1=!1,dg=typeof WeakSet=="function"?WeakSet:Set,E1=null;function Gg(n,i){if(n=n.containerInfo,Qb=tb,n=ob(n),vx(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var E=l.getSelection&&l.getSelection();if(E&&E.rangeCount!==0){l=E.anchorNode;var te=E.anchorOffset,Me=E.focusNode;E=E.focusOffset;try{l.nodeType,Me.nodeType}catch{l=null;break e}var Io=0,Rp=-1,L0=-1,hm=0,Am=0,X0=n,em=null;t:for(;;){for(var cm;X0!==l||te!==0&&X0.nodeType!==3||(Rp=Io+te),X0!==Me||E!==0&&X0.nodeType!==3||(L0=Io+E),X0.nodeType===3&&(Io+=X0.nodeValue.length),(cm=X0.firstChild)!==null;)em=X0,X0=cm;for(;;){if(X0===n)break t;if(em===l&&++hm===te&&(Rp=Io),em===Me&&++Am===E&&(L0=Io),(cm=X0.nextSibling)!==null)break;X0=em,em=X0.parentNode}X0=cm}l=Rp===-1||L0===-1?null:{start:Rp,end:L0}}else l=null}l=l||{start:0,end:0}}else l=null;for(e3={focusedElem:n,selectionRange:l},tb=!1,E1=i;E1!==null;)if(i=E1,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,E1=n;else for(;E1!==null;){switch(i=E1,Me=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)te=n[l],te.ref.impl=te.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&Me!==null){n=void 0,l=i,te=Me.memoizedProps,Me=Me.memoizedState,E=l.stateNode;try{var L1=M0(l.type,te);n=E.getSnapshotBeforeUpdate(L1,Me),E.__reactInternalSnapshotBeforeUpdate=n}catch(Y1){Av(l,l.return,Y1)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)q_(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":q_(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,E1=n;break}E1=i.return}}function $1(n,i,l){var E=l.flags;switch(l.tag){case 0:case 11:case 15:Ig(n,l),E&4&&Mp(5,l);break;case 1:if(Ig(n,l),E&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(Io){Av(l,l.return,Io)}else{var te=M0(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(te,i,n.__reactInternalSnapshotBeforeUpdate)}catch(Io){Av(l,l.return,Io)}}E&64&&Vp(l),E&512&&Ap(l,l.return);break;case 3:if(Ig(n,l),E&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{j3(n,i)}catch(Io){Av(l,l.return,Io)}}break;case 27:i===null&&E&4&&Qm(l);case 26:case 5:Ig(n,l),i===null&&E&4&&Fp(l),E&512&&Ap(l,l.return);break;case 12:Ig(n,l);break;case 31:Ig(n,l),E&4&&yv(n,l);break;case 13:Ig(n,l),E&4&&iv(n,l),E&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=Z5.bind(null,l),nw(n,l))));break;case 22:if(E=l.memoizedState!==null||xm,!E){i=i!==null&&i.memoizedState!==null||zm,te=xm;var Me=zm;xm=E,(zm=i)&&!Me?Ug(n,l,(l.subtreeFlags&8772)!==0):Ig(n,l),xm=te,zm=Me}break;case 30:break;default:Ig(n,l)}}function $g(n){var i=n.alternate;i!==null&&(n.alternate=null,$g(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Wl(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var tg=null,Og=!1;function qg(n,i,l){for(l=l.child;l!==null;)W1(n,i,l),l=l.sibling}function W1(n,i,l){if(Gm&&typeof Gm.onCommitFiberUnmount=="function")try{Gm.onCommitFiberUnmount(Dm,l)}catch{}switch(l.tag){case 26:zm||Yp(l,i),qg(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zm||Yp(l,i);var E=tg,te=Og;Rx(l.type)&&(tg=l.stateNode,Og=!1),qg(n,i,l),Lx(l.stateNode),tg=E,Og=te;break;case 5:zm||Yp(l,i);case 6:if(E=tg,te=Og,tg=null,qg(n,i,l),tg=E,Og=te,tg!==null)if(Og)try{(tg.nodeType===9?tg.body:tg.nodeName==="HTML"?tg.ownerDocument.body:tg).removeChild(l.stateNode)}catch(Me){Av(l,i,Me)}else try{tg.removeChild(l.stateNode)}catch(Me){Av(l,i,Me)}break;case 18:tg!==null&&(Og?(n=tg,b5(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),f0(n)):b5(tg,l.stateNode));break;case 4:E=tg,te=Og,tg=l.stateNode.containerInfo,Og=!0,qg(n,i,l),tg=E,Og=te;break;case 0:case 11:case 14:case 15:kp(2,l,i),zm||kp(4,l,i),qg(n,i,l);break;case 1:zm||(Yp(l,i),E=l.stateNode,typeof E.componentWillUnmount=="function"&&wp(l,i,E)),qg(n,i,l);break;case 21:qg(n,i,l);break;case 22:zm=(E=zm)||l.memoizedState!==null,qg(n,i,l),zm=E;break;default:qg(n,i,l)}}function yv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{f0(n)}catch(l){Av(i,i.return,l)}}}function iv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{f0(n)}catch(l){Av(i,i.return,l)}}function cg(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new dg),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new dg),i;default:throw Error(a(435,n.tag))}}function rv(n,i){var l=cg(n);i.forEach(function(E){if(!l.has(E)){l.add(E);var te=X2.bind(null,n,E);E.then(te,te)}})}function Pg(n,i){var l=i.deletions;if(l!==null)for(var E=0;E<l.length;E++){var te=l[E],Me=n,Io=i,Rp=Io;e:for(;Rp!==null;){switch(Rp.tag){case 27:if(Rx(Rp.type)){tg=Rp.stateNode,Og=!1;break e}break;case 5:tg=Rp.stateNode,Og=!1;break e;case 3:case 4:tg=Rp.stateNode.containerInfo,Og=!0;break e}Rp=Rp.return}if(tg===null)throw Error(a(160));W1(Me,Io,te),tg=null,Og=!1,Me=te.alternate,Me!==null&&(Me.return=null),te.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ov(i,n),i=i.sibling}var Vg=null;function Ov(n,i){var l=n.alternate,E=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pg(i,n),xv(n),E&4&&(kp(3,n,n.return),Mp(3,n),kp(5,n,n.return));break;case 1:Pg(i,n),xv(n),E&512&&(zm||l===null||Yp(l,l.return)),E&64&&xm&&(n=n.updateQueue,n!==null&&(E=n.callbacks,E!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?E:l.concat(E))));break;case 26:var te=Vg;if(Pg(i,n),xv(n),E&512&&(zm||l===null||Yp(l,l.return)),E&4){var Me=l!==null?l.memoizedState:null;if(E=n.memoizedState,l===null)if(E===null)if(n.stateNode===null){e:{E=n.type,l=n.memoizedProps,te=te.ownerDocument||te;t:switch(E){case"title":Me=te.getElementsByTagName("title")[0],(!Me||Me[Fl]||Me[vv]||Me.namespaceURI==="http://www.w3.org/2000/svg"||Me.hasAttribute("itemprop"))&&(Me=te.createElement(E),te.head.insertBefore(Me,te.querySelector("head > title"))),dy(Me,E,l),Me[vv]=n,wm(Me),E=Me;break e;case"link":var Io=d3("link","href",te).get(E+(l.href||""));if(Io){for(var Rp=0;Rp<Io.length;Rp++)if(Me=Io[Rp],Me.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&Me.getAttribute("rel")===(l.rel==null?null:l.rel)&&Me.getAttribute("title")===(l.title==null?null:l.title)&&Me.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){Io.splice(Rp,1);break t}}Me=te.createElement(E),dy(Me,E,l),te.head.appendChild(Me);break;case"meta":if(Io=d3("meta","content",te).get(E+(l.content||""))){for(Rp=0;Rp<Io.length;Rp++)if(Me=Io[Rp],Me.getAttribute("content")===(l.content==null?null:""+l.content)&&Me.getAttribute("name")===(l.name==null?null:l.name)&&Me.getAttribute("property")===(l.property==null?null:l.property)&&Me.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&Me.getAttribute("charset")===(l.charSet==null?null:l.charSet)){Io.splice(Rp,1);break t}}Me=te.createElement(E),dy(Me,E,l),te.head.appendChild(Me);break;default:throw Error(a(468,E))}Me[vv]=n,wm(Me),E=Me}n.stateNode=E}else h3(te,n.type,n.stateNode);else n.stateNode=X_(te,E,n.memoizedProps);else Me!==E?(Me===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):Me.count--,E===null?h3(te,n.type,n.stateNode):X_(te,E,n.memoizedProps)):E===null&&n.stateNode!==null&&u0(n,n.memoizedProps,l.memoizedProps)}break;case 27:Pg(i,n),xv(n),E&512&&(zm||l===null||Yp(l,l.return)),l!==null&&E&4&&u0(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Pg(i,n),xv(n),E&512&&(zm||l===null||Yp(l,l.return)),n.flags&32){te=n.stateNode;try{Ct(te,"")}catch(L1){Av(n,n.return,L1)}}E&4&&n.stateNode!=null&&(te=n.memoizedProps,u0(n,te,l!==null?l.memoizedProps:te)),E&1024&&(f1=!0);break;case 6:if(Pg(i,n),xv(n),E&4){if(n.stateNode===null)throw Error(a(162));E=n.memoizedProps,l=n.stateNode;try{l.nodeValue=E}catch(L1){Av(n,n.return,L1)}}break;case 3:if(o_=null,te=Vg,Vg=M2(i.containerInfo),Pg(i,n),Vg=te,xv(n),E&4&&l!==null&&l.memoizedState.isDehydrated)try{f0(i.containerInfo)}catch(L1){Av(n,n.return,L1)}f1&&(f1=!1,_g(n));break;case 4:E=Vg,Vg=M2(n.stateNode.containerInfo),Pg(i,n),xv(n),Vg=E;break;case 12:Pg(i,n),xv(n);break;case 31:Pg(i,n),xv(n),E&4&&(E=n.updateQueue,E!==null&&(n.updateQueue=null,rv(n,E)));break;case 13:Pg(i,n),xv(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&($2=bm()),E&4&&(E=n.updateQueue,E!==null&&(n.updateQueue=null,rv(n,E)));break;case 22:te=n.memoizedState!==null;var L0=l!==null&&l.memoizedState!==null,hm=xm,Am=zm;if(xm=hm||te,zm=Am||L0,Pg(i,n),zm=Am,xm=hm,xv(n),E&8192)e:for(i=n.stateNode,i._visibility=te?i._visibility&-2:i._visibility|1,te&&(l===null||L0||xm||zm||Tg(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){L0=l=i;try{if(Me=L0.stateNode,te)Io=Me.style,typeof Io.setProperty=="function"?Io.setProperty("display","none","important"):Io.display="none";else{Rp=L0.stateNode;var X0=L0.memoizedProps.style,em=X0!=null&&X0.hasOwnProperty("display")?X0.display:null;Rp.style.display=em==null||typeof em=="boolean"?"":(""+em).trim()}}catch(L1){Av(L0,L0.return,L1)}}}else if(i.tag===6){if(l===null){L0=i;try{L0.stateNode.nodeValue=te?"":L0.memoizedProps}catch(L1){Av(L0,L0.return,L1)}}}else if(i.tag===18){if(l===null){L0=i;try{var cm=L0.stateNode;te?w5(cm,!0):w5(L0.stateNode,!1)}catch(L1){Av(L0,L0.return,L1)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}E&4&&(E=n.updateQueue,E!==null&&(l=E.retryQueue,l!==null&&(E.retryQueue=null,rv(n,l))));break;case 19:Pg(i,n),xv(n),E&4&&(E=n.updateQueue,E!==null&&(n.updateQueue=null,rv(n,E)));break;case 30:break;case 21:break;default:Pg(i,n),xv(n)}}function xv(n){var i=n.flags;if(i&2){try{for(var l,E=n.return;E!==null;){if(g0(E)){l=E;break}E=E.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var te=l.stateNode,Me=H0(n);Em(n,Me,te);break;case 5:var Io=l.stateNode;l.flags&32&&(Ct(Io,""),l.flags&=-33);var Rp=H0(n);Em(n,Rp,Io);break;case 3:case 4:var L0=l.stateNode.containerInfo,hm=H0(n);Lm(n,hm,L0);break;default:throw Error(a(161))}}catch(Am){Av(n,n.return,Am)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function _g(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;_g(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ig(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$1(n,i.alternate,i),i=i.sibling}function Tg(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:kp(4,i,i.return),Tg(i);break;case 1:Yp(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&wp(i,i.return,l),Tg(i);break;case 27:Lx(i.stateNode);case 26:case 5:Yp(i,i.return),Tg(i);break;case 22:i.memoizedState===null&&Tg(i);break;case 30:Tg(i);break;default:Tg(i)}n=n.sibling}}function Ug(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var E=i.alternate,te=n,Me=i,Io=Me.flags;switch(Me.tag){case 0:case 11:case 15:Ug(te,Me,l),Mp(4,Me);break;case 1:if(Ug(te,Me,l),E=Me,te=E.stateNode,typeof te.componentDidMount=="function")try{te.componentDidMount()}catch(hm){Av(E,E.return,hm)}if(E=Me,te=E.updateQueue,te!==null){var Rp=E.stateNode;try{var L0=te.shared.hiddenCallbacks;if(L0!==null)for(te.shared.hiddenCallbacks=null,te=0;te<L0.length;te++)B3(L0[te],Rp)}catch(hm){Av(E,E.return,hm)}}l&&Io&64&&Vp(Me),Ap(Me,Me.return);break;case 27:Qm(Me);case 26:case 5:Ug(te,Me,l),l&&E===null&&Io&4&&Fp(Me),Ap(Me,Me.return);break;case 12:Ug(te,Me,l);break;case 31:Ug(te,Me,l),l&&Io&4&&yv(te,Me);break;case 13:Ug(te,Me,l),l&&Io&4&&iv(te,Me);break;case 22:Me.memoizedState===null&&Ug(te,Me,l),Ap(Me,Me.return);break;case 30:break;default:Ug(te,Me,l)}i=i.sibling}}function wv(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&O2(l))}function Dv(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&O2(n))}function gv(n,i,l,E){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Pv(n,i,l,E),i=i.sibling}function Pv(n,i,l,E){var te=i.flags;switch(i.tag){case 0:case 11:case 15:gv(n,i,l,E),te&2048&&Mp(9,i);break;case 1:gv(n,i,l,E);break;case 3:gv(n,i,l,E),te&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&O2(n)));break;case 12:if(te&2048){gv(n,i,l,E),n=i.stateNode;try{var Me=i.memoizedProps,Io=Me.id,Rp=Me.onPostCommit;typeof Rp=="function"&&Rp(Io,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L0){Av(i,i.return,L0)}}else gv(n,i,l,E);break;case 31:gv(n,i,l,E);break;case 13:gv(n,i,l,E);break;case 23:break;case 22:Me=i.stateNode,Io=i.alternate,i.memoizedState!==null?Me._visibility&2?gv(n,i,l,E):Tv(n,i):Me._visibility&2?gv(n,i,l,E):(Me._visibility|=2,Bv(n,i,l,E,(i.subtreeFlags&10256)!==0||!1)),te&2048&&wv(Io,i);break;case 24:gv(n,i,l,E),te&2048&&Dv(i.alternate,i);break;default:gv(n,i,l,E)}}function Bv(n,i,l,E,te){for(te=te&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var Me=n,Io=i,Rp=l,L0=E,hm=Io.flags;switch(Io.tag){case 0:case 11:case 15:Bv(Me,Io,Rp,L0,te),Mp(8,Io);break;case 23:break;case 22:var Am=Io.stateNode;Io.memoizedState!==null?Am._visibility&2?Bv(Me,Io,Rp,L0,te):Tv(Me,Io):(Am._visibility|=2,Bv(Me,Io,Rp,L0,te)),te&&hm&2048&&wv(Io.alternate,Io);break;case 24:Bv(Me,Io,Rp,L0,te),te&&hm&2048&&Dv(Io.alternate,Io);break;default:Bv(Me,Io,Rp,L0,te)}i=i.sibling}}function Tv(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,E=i,te=E.flags;switch(E.tag){case 22:Tv(l,E),te&2048&&wv(E.alternate,E);break;case 24:Tv(l,E),te&2048&&Dv(E.alternate,E);break;default:Tv(l,E)}i=i.sibling}}var Fg=8192;function sy(n,i,l){if(n.subtreeFlags&Fg)for(n=n.child;n!==null;)qv(n,i,l),n=n.sibling}function qv(n,i,l){switch(n.tag){case 26:sy(n,i,l),n.flags&Fg&&n.memoizedState!==null&&k5(l,Vg,n.memoizedState,n.memoizedProps);break;case 5:sy(n,i,l);break;case 3:case 4:var E=Vg;Vg=M2(n.stateNode.containerInfo),sy(n,i,l),Vg=E;break;case 22:n.memoizedState===null&&(E=n.alternate,E!==null&&E.memoizedState!==null?(E=Fg,Fg=16777216,sy(n,i,l),Fg=E):sy(n,i,l));break;default:sy(n,i,l)}}function uy(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function $v(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var E=i[l];E1=E,gy(E,n)}uy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Yv(n),n=n.sibling}function Yv(n){switch(n.tag){case 0:case 11:case 15:$v(n),n.flags&2048&&kp(9,n,n.return);break;case 3:$v(n);break;case 12:$v(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,by(n)):$v(n);break;default:$v(n)}}function by(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var E=i[l];E1=E,gy(E,n)}uy(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:kp(8,i,i.return),by(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,by(i));break;default:by(i)}n=n.sibling}}function gy(n,i){for(;E1!==null;){var l=E1;switch(l.tag){case 0:case 11:case 15:kp(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var E=l.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:O2(l.memoizedState.cache)}if(E=l.child,E!==null)E.return=l,E1=E;else e:for(l=n;E1!==null;){E=E1;var te=E.sibling,Me=E.return;if($g(E),E===l){E1=null;break e}if(te!==null){te.return=Me,E1=te;break e}E1=Me}}}var ny={getCacheForType:function(n){var i=_y(ly),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l},cacheSignal:function(){return _y(ly).controller.signal}},Ty=typeof WeakMap=="function"?WeakMap:Map,Yg=0,og=null,sg=null,fg=0,Bg=0,nv=null,Xg=!1,ty=!1,Qy=!1,vy=0,jv=0,wy=0,ex=0,f2=0,My=0,tx=0,qy=null,Ry=null,q2=!1,$2=0,rx=0,Y2=1/0,p2=null,nx=null,Wv=0,Zy=null,Jx=null,px=0,Ib=0,Ub=null,Fb=null,m2=0,Bb=null;function zy(){return(Yg&2)!==0&&fg!==0?fg&-fg:ne.T!==null?Wb():ry()}function $3(){if(My===0)if((fg&536870912)===0||fv){var n=q0;q0<<=1,(q0&3932160)===0&&(q0=262144),My=n}else My=536870912;return n=Cy.current,n!==null&&(n.flags|=32),My}function Ly(n,i,l){(n===og&&(Bg===2||Bg===9)||n.cancelPendingCommit!==null)&&(g2(n,0),Cx(n,fg,My,!1)),Dg(n,l),((Yg&2)===0||n!==og)&&(n===og&&((Yg&2)===0&&(ex|=l),jv===4&&Cx(n,fg,My,!1)),ax(n))}function Y3(n,i,l){if((Yg&6)!==0)throw Error(a(327));var E=!l&&(i&127)===0&&(i&n.expiredLanes)===0||jm(n,i),te=E?W5(n,i):k_(n,i,!0),Me=E;do{if(te===0){ty&&!E&&Cx(n,i,0,!1);break}else{if(l=n.current.alternate,Me&&!$5(l)){te=k_(n,i,!1),Me=!1;continue}if(te===2){if(Me=i,n.errorRecoveryDisabledLanes&Me)var Io=0;else Io=n.pendingLanes&-536870913,Io=Io!==0?Io:Io&536870912?536870912:0;if(Io!==0){i=Io;e:{var Rp=n;te=qy;var L0=Rp.current.memoizedState.isDehydrated;if(L0&&(g2(Rp,Io).flags|=256),Io=k_(Rp,Io,!1),Io!==2){if(Qy&&!L0){Rp.errorRecoveryDisabledLanes|=Me,ex|=Me,te=4;break e}Me=Ry,Ry=te,Me!==null&&(Ry===null?Ry=Me:Ry.push.apply(Ry,Me))}te=Io}if(Me=!1,te!==2)continue}}if(te===1){g2(n,0),Cx(n,i,0,!0);break}e:{switch(E=n,Me=te,Me){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Cx(E,i,My,!Xg);break e;case 2:Ry=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(te=$2+300-bm(),10<te)){if(Cx(E,i,My,!Xg),o1(E,0,!0)!==0)break e;px=i,E.timeoutHandle=y5(W3.bind(null,E,l,Ry,p2,q2,i,My,ex,tx,Xg,Me,"Throttled",-0,0),te);break e}W3(E,l,Ry,p2,q2,i,My,ex,tx,Xg,Me,null,-0,0)}}break}while(!0);ax(n)}function W3(n,i,l,E,te,Me,Io,Rp,L0,hm,Am,X0,em,cm){if(n.timeoutHandle=-1,X0=i.subtreeFlags,X0&8192||(X0&16785408)===16785408){X0={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Op},qv(i,Me,X0);var L1=(Me&62914560)===Me?$2-bm():(Me&4194048)===Me?rx-bm():0;if(L1=cw(X0,L1),L1!==null){px=Me,n.cancelPendingCommit=L1(Q3.bind(null,n,i,Me,l,E,te,Io,Rp,L0,Am,X0,null,em,cm)),Cx(n,Me,Io,!hm);return}}Q3(n,i,Me,l,E,te,Io,Rp,L0)}function $5(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var E=0;E<l.length;E++){var te=l[E],Me=te.getSnapshot;te=te.value;try{if(!Dy(Me(),te))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Cx(n,i,l,E){i&=~f2,i&=~ex,n.suspendedLanes|=i,n.pingedLanes&=~i,E&&(n.warmLanes|=i),E=n.expirationTimes;for(var te=i;0<te;){var Me=31-vm(te),Io=1<<Me;E[Me]=-1,te&=~Io}l!==0&&ev(n,l,i)}function D_(){return(Yg&6)===0?(J2(0),!1):!0}function jb(){if(sg!==null){if(Bg===0)var n=sg.return;else n=sg,dx=bx=null,me(n),l2=null,I2=0,n=sg;for(;n!==null;)Ve(n.alternate,n),n=n.return;sg=null}}function g2(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,x5(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),px=0,jb(),og=n,sg=l=sx(n.current,null),fg=i,Bg=0,nv=null,Xg=!1,ty=jm(n,i),Qy=!1,tx=My=f2=ex=wy=jv=0,Ry=qy=null,q2=!1,(i&8)!==0&&(i|=i&32);var E=n.entangledLanes;if(E!==0)for(n=n.entanglements,E&=i;0<E;){var te=31-vm(E),Me=1<<te;i|=n[te],E&=~Me}return vy=i,v_(),l}function X3(n,i){Wg=null,ne.H=kl,i===s2||i===S_?(i=U3(),Bg=3):i===Ab?(i=U3(),Bg=4):Bg=i===Be?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,nv=i,sg===null&&(jv=1,W0(n,jy(i,n.current)))}function Z3(){var n=Cy.current;return n===null?!0:(fg&4194048)===fg?Vy===null:(fg&62914560)===fg||(fg&536870912)!==0?n===Vy:!1}function Hb(){var n=ne.H;return ne.H=kl,n===null?kl:n}function Gb(){var n=ne.A;return ne.A=ny,n}function W2(){jv=4,Xg||(fg&4194048)!==fg&&Cy.current!==null||(ty=!0),(wy&134217727)===0&&(ex&134217727)===0||og===null||Cx(og,fg,My,!1)}function k_(n,i,l){var E=Yg;Yg|=2;var te=Hb(),Me=Gb();(og!==n||fg!==i)&&(p2=null,g2(n,i)),i=!1;var Io=jv;e:do try{if(Bg!==0&&sg!==null){var Rp=sg,L0=nv;switch(Bg){case 8:jb(),Io=6;break e;case 3:case 2:case 9:case 6:Cy.current===null&&(i=!0);var hm=Bg;if(Bg=0,nv=null,y2(n,Rp,L0,hm),l&&ty){Io=0;break e}break;default:hm=Bg,Bg=0,nv=null,y2(n,Rp,L0,hm)}}Y5(),Io=jv;break}catch(Am){X3(n,Am)}while(!0);return i&&n.shellSuspendCounter++,dx=bx=null,Yg=E,ne.H=te,ne.A=Me,sg===null&&(og=null,fg=0,v_()),Io}function Y5(){for(;sg!==null;)J3(sg)}function W5(n,i){var l=Yg;Yg|=2;var E=Hb(),te=Gb();og!==n||fg!==i?(p2=null,Y2=bm()+500,g2(n,i)):ty=jm(n,i);e:do try{if(Bg!==0&&sg!==null){i=sg;var Me=nv;t:switch(Bg){case 1:Bg=0,nv=null,y2(n,i,Me,1);break;case 2:case 9:if(P3(Me)){Bg=0,nv=null,K3(i);break}i=function(){Bg!==2&&Bg!==9||og!==n||(Bg=7),ax(n)},Me.then(i,i);break e;case 3:Bg=7;break e;case 4:Bg=5;break e;case 7:P3(Me)?(Bg=0,nv=null,K3(i)):(Bg=0,nv=null,y2(n,i,Me,7));break;case 5:var Io=null;switch(sg.tag){case 26:Io=sg.memoizedState;case 5:case 27:var Rp=sg;if(Io?D5(Io):Rp.stateNode.complete){Bg=0,nv=null;var L0=Rp.sibling;if(L0!==null)sg=L0;else{var hm=Rp.return;hm!==null?(sg=hm,N_(hm)):sg=null}break t}}Bg=0,nv=null,y2(n,i,Me,5);break;case 6:Bg=0,nv=null,y2(n,i,Me,6);break;case 8:jb(),jv=6;break e;default:throw Error(a(462))}}v2();break}catch(Am){X3(n,Am)}while(!0);return dx=bx=null,ne.H=E,ne.A=te,Yg=l,sg!==null?0:(og=null,fg=0,v_(),jv)}function v2(){for(;sg!==null&&!zp();)J3(sg)}function J3(n){var i=K1(n.alternate,n,vy);n.memoizedProps=n.pendingProps,i===null?N_(n):sg=i}function K3(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=Im(l,i,i.pendingProps,i.type,void 0,fg);break;case 11:i=Im(l,i,i.pendingProps,i.type.render,i.ref,fg);break;case 5:me(i);default:Ve(l,i),i=sg=C3(i,vy),i=K1(l,i,vy)}n.memoizedProps=n.pendingProps,i===null?N_(n):sg=i}function y2(n,i,l,E){dx=bx=null,me(i),l2=null,I2=0;var te=i.return;try{if(Tp(n,te,i,l,fg)){jv=1,W0(n,jy(l,n.current)),sg=null;return}}catch(Me){if(te!==null)throw sg=te,Me;jv=1,W0(n,jy(l,n.current)),sg=null;return}i.flags&32768?(fv||E===1?n=!0:ty||(fg&536870912)!==0?n=!1:(Xg=n=!0,(E===2||E===9||E===3||E===6)&&(E=Cy.current,E!==null&&E.tag===13&&(E.flags|=16384))),Vb(i,n)):N_(i)}function N_(n){var i=n;do{if((i.flags&32768)!==0){Vb(i,Xg);return}n=i.return;var l=Cg(i.alternate,i,vy);if(l!==null){sg=l;return}if(i=i.sibling,i!==null){sg=i;return}sg=i=n}while(i!==null);jv===0&&(jv=5)}function Vb(n,i){do{var l=Je(n.alternate,n);if(l!==null){l.flags&=32767,sg=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){sg=n;return}sg=n=l}while(n!==null);jv=6,sg=null}function Q3(n,i,l,E,te,Me,Io,Rp,L0){n.cancelPendingCommit=null;do z_();while(Wv!==0);if((Yg&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(Me=i.lanes|i.childLanes,Me|=g_,Eg(n,l,Me,Io,Rp,L0),n===og&&(sg=og=null,fg=0),Jx=i,Zy=n,px=l,Ib=Me,Ub=te,Fb=E,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Z2(i0,function(){return n5(),null})):(n.callbackNode=null,n.callbackPriority=0),E=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||E){E=ne.T,ne.T=null,te=zl.p,zl.p=2,Io=Yg,Yg|=4;try{Gg(n,i,l)}finally{Yg=Io,zl.p=te,ne.T=E}}Wv=1,e5(),t5(),qb()}}function e5(){if(Wv===1){Wv=0;var n=Zy,i=Jx,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var E=zl.p;zl.p=2;var te=Yg;Yg|=4;try{Ov(i,n);var Me=e3,Io=ob(n.containerInfo),Rp=Me.focusedElem,L0=Me.selectionRange;if(Io!==Rp&&Rp&&Rp.ownerDocument&&w3(Rp.ownerDocument.documentElement,Rp)){if(L0!==null&&vx(Rp)){var hm=L0.start,Am=L0.end;if(Am===void 0&&(Am=hm),"selectionStart"in Rp)Rp.selectionStart=hm,Rp.selectionEnd=Math.min(Am,Rp.value.length);else{var X0=Rp.ownerDocument||document,em=X0&&X0.defaultView||window;if(em.getSelection){var cm=em.getSelection(),L1=Rp.textContent.length,Y1=Math.min(L0.start,L1),Rg=L0.end===void 0?Y1:Math.min(L0.end,L1);!cm.extend&&Y1>Rg&&(Io=Rg,Rg=Y1,Y1=Io);var nm=b3(Rp,Y1),Y0=b3(Rp,Rg);if(nm&&Y0&&(cm.rangeCount!==1||cm.anchorNode!==nm.node||cm.anchorOffset!==nm.offset||cm.focusNode!==Y0.node||cm.focusOffset!==Y0.offset)){var gm=X0.createRange();gm.setStart(nm.node,nm.offset),cm.removeAllRanges(),Y1>Rg?(cm.addRange(gm),cm.extend(Y0.node,Y0.offset)):(gm.setEnd(Y0.node,Y0.offset),cm.addRange(gm))}}}}for(X0=[],cm=Rp;cm=cm.parentNode;)cm.nodeType===1&&X0.push({element:cm,left:cm.scrollLeft,top:cm.scrollTop});for(typeof Rp.focus=="function"&&Rp.focus(),Rp=0;Rp<X0.length;Rp++){var Wm=X0[Rp];Wm.element.scrollLeft=Wm.left,Wm.element.scrollTop=Wm.top}}tb=!!Qb,e3=Qb=null}finally{Yg=te,zl.p=E,ne.T=l}}n.current=i,Wv=2}}function t5(){if(Wv===2){Wv=0;var n=Zy,i=Jx,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var E=zl.p;zl.p=2;var te=Yg;Yg|=4;try{$1(n,i.alternate,i)}finally{Yg=te,zl.p=E,ne.T=l}}Wv=3}}function qb(){if(Wv===4||Wv===3){Wv=0,om();var n=Zy,i=Jx,l=px,E=Fb;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Wv=5:(Wv=0,Jx=Zy=null,r5(n,n.pendingLanes));var te=n.pendingLanes;if(te===0&&(nx=null),Zv(l),i=i.stateNode,Gm&&typeof Gm.onCommitFiberRoot=="function")try{Gm.onCommitFiberRoot(Dm,i,void 0,(i.current.flags&128)===128)}catch{}if(E!==null){i=ne.T,te=zl.p,zl.p=2,ne.T=null;try{for(var Me=n.onRecoverableError,Io=0;Io<E.length;Io++){var Rp=E[Io];Me(Rp.value,{componentStack:Rp.stack})}}finally{ne.T=i,zl.p=te}}(px&3)!==0&&z_(),ax(n),te=n.pendingLanes,(l&261930)!==0&&(te&42)!==0?n===Bb?m2++:(m2=0,Bb=n):m2=0,J2(0)}}function r5(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,O2(i)))}function z_(){return e5(),t5(),qb(),n5()}function n5(){if(Wv!==5)return!1;var n=Zy,i=Ib;Ib=0;var l=Zv(px),E=ne.T,te=zl.p;try{zl.p=32>l?32:l,ne.T=null,l=Ub,Ub=null;var Me=Zy,Io=px;if(Wv=0,Jx=Zy=null,px=0,(Yg&6)!==0)throw Error(a(331));var Rp=Yg;if(Yg|=4,Yv(Me.current),Pv(Me,Me.current,Io,l),Yg=Rp,J2(0,!1),Gm&&typeof Gm.onPostCommitFiberRoot=="function")try{Gm.onPostCommitFiberRoot(Dm,Me)}catch{}return!0}finally{zl.p=te,ne.T=E,r5(n,i)}}function a5(n,i,l){i=jy(l,i),i=V0(n.stateNode,i,2),n=Xy(n,i,2),n!==null&&(Dg(n,2),ax(n))}function Av(n,i,l){if(n.tag===3)a5(n,n,l);else for(;i!==null;){if(i.tag===3){a5(i,n,l);break}else if(i.tag===1){var E=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(nx===null||!nx.has(E))){n=jy(l,n),l=um(2),E=Xy(i,l,2),E!==null&&(Uo(l,E,i,n),Dg(E,2),ax(E));break}}i=i.return}}function O_(n,i,l){var E=n.pingCache;if(E===null){E=n.pingCache=new Ty;var te=new Set;E.set(i,te)}else te=E.get(i),te===void 0&&(te=new Set,E.set(i,te));te.has(l)||(Qy=!0,te.add(l),n=X5.bind(null,n,i,l),i.then(n,n))}function X5(n,i,l){var E=n.pingCache;E!==null&&E.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,og===n&&(fg&l)===l&&(jv===4||jv===3&&(fg&62914560)===fg&&300>bm()-$2?(Yg&2)===0&&g2(n,0):f2|=l,tx===fg&&(tx=0)),ax(n)}function i5(n,i){i===0&&(i=gg()),n=Bx(n,i),n!==null&&(Dg(n,i),ax(n))}function Z5(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),i5(n,l)}function X2(n,i){var l=0;switch(n.tag){case 31:case 13:var E=n.stateNode,te=n.memoizedState;te!==null&&(l=te.retryLane);break;case 19:E=n.stateNode;break;case 22:E=n.stateNode._retryCache;break;default:throw Error(a(314))}E!==null&&E.delete(i),i5(n,l)}function Z2(n,i){return S1(n,i)}var Oy=null,x2=null,$b=!1,P_=!1,Yb=!1,mx=0;function ax(n){n!==x2&&n.next===null&&(x2===null?Oy=x2=n:x2=x2.next=n),P_=!0,$b||($b=!0,K5())}function J2(n,i){if(!Yb&&P_){Yb=!0;do for(var l=!1,E=Oy;E!==null;){if(n!==0){var te=E.pendingLanes;if(te===0)var Me=0;else{var Io=E.suspendedLanes,Rp=E.pingedLanes;Me=(1<<31-vm(42|n)+1)-1,Me&=te&~(Io&~Rp),Me=Me&201326741?Me&201326741|1:Me?Me|2:0}Me!==0&&(l=!0,U_(E,Me))}else Me=fg,Me=o1(E,E===og?Me:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(Me&3)===0||jm(E,Me)||(l=!0,U_(E,Me));E=E.next}while(l);Yb=!1}}function J5(){o5()}function o5(){P_=$b=!1;var n=0;mx!==0&&v5()&&(n=mx);for(var i=bm(),l=null,E=Oy;E!==null;){var te=E.next,Me=s5(E,i);Me===0?(E.next=null,l===null?Oy=te:l.next=te,te===null&&(x2=l)):(l=E,(n!==0||(Me&3)!==0)&&(P_=!0)),E=te}Wv!==0&&Wv!==5||J2(n),mx!==0&&(mx=0)}function s5(n,i){for(var l=n.suspendedLanes,E=n.pingedLanes,te=n.expirationTimes,Me=n.pendingLanes&-62914561;0<Me;){var Io=31-vm(Me),Rp=1<<Io,L0=te[Io];L0===-1?((Rp&l)===0||(Rp&E)!==0)&&(te[Io]=l1(Rp,i)):L0<=i&&(n.expiredLanes|=Rp),Me&=~Rp}if(i=og,l=fg,l=o1(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),E=n.callbackNode,l===0||n===i&&(Bg===2||Bg===9)||n.cancelPendingCommit!==null)return E!==null&&E!==null&&p0(E),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||jm(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(E!==null&&p0(E),Zv(l)){case 2:case 8:l=Gp;break;case 32:l=i0;break;case 268435456:l=im;break;default:l=i0}return E=I_.bind(null,n),l=S1(l,E),n.callbackPriority=i,n.callbackNode=l,i}return E!==null&&E!==null&&p0(E),n.callbackPriority=2,n.callbackNode=null,2}function I_(n,i){if(Wv!==0&&Wv!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(z_()&&n.callbackNode!==l)return null;var E=fg;return E=o1(n,n===og?E:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),E===0?null:(Y3(n,E,i),s5(n,bm()),n.callbackNode!=null&&n.callbackNode===l?I_.bind(null,n):null)}function U_(n,i){if(z_())return null;Y3(n,i,!0)}function K5(){_5(function(){(Yg&6)!==0?S1(r1,J5):o5()})}function Wb(){if(mx===0){var n=i2;n===0&&(n=j1,j1<<=1,(j1&261888)===0&&(j1=256)),mx=n}return mx}function l5(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Dp(""+n)}function c5(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function u5(n,i,l,E,te){if(i==="submit"&&l&&l.stateNode===te){var Me=l5((te[ag]||null).action),Io=E.submitter;Io&&(i=(i=Io[ag]||null)?l5(i.formAction):Io.getAttribute("formAction"),i!==null&&(Me=i,Io=null));var Rp=new k1("action","action",null,E,te);n.push({event:Rp,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(mx!==0){var L0=Io?c5(te,Io):new FormData(te);q(l,{pending:!0,data:L0,method:te.method,action:Me},null,L0)}}else typeof Me=="function"&&(Rp.preventDefault(),L0=Io?c5(te,Io):new FormData(te),q(l,{pending:!0,data:L0,method:te.method,action:Me},Me,L0))},currentTarget:te}]})}}for(var Xb=0;Xb<hb.length;Xb++){var Zb=hb[Xb],Jb=Zb.toLowerCase(),d5=Zb[0].toUpperCase()+Zb.slice(1);By(Jb,"on"+d5)}By(M3,"onAnimationEnd"),By(S3,"onAnimationIteration"),By(T3,"onAnimationStart"),By("dblclick","onDoubleClick"),By("focusin","onFocus"),By("focusout","onBlur"),By(I5,"onTransitionRun"),By(U5,"onTransitionStart"),By(F5,"onTransitionCancel"),By(db,"onTransitionEnd"),N1("onMouseEnter",["mouseout","mouseover"]),N1("onMouseLeave",["mouseout","mouseover"]),N1("onPointerEnter",["pointerout","pointerover"]),N1("onPointerLeave",["pointerout","pointerover"]),m1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m1("onBeforeInput",["compositionend","keypress","textInput","paste"]),m1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_2));function f5(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var E=n[l],te=E.event;E=E.listeners;e:{var Me=void 0;if(i)for(var Io=E.length-1;0<=Io;Io--){var Rp=E[Io],L0=Rp.instance,hm=Rp.currentTarget;if(Rp=Rp.listener,L0!==Me&&te.isPropagationStopped())break e;Me=Rp,te.currentTarget=hm;try{Me(te)}catch(Am){m_(Am)}te.currentTarget=null,Me=L0}else for(Io=0;Io<E.length;Io++){if(Rp=E[Io],L0=Rp.instance,hm=Rp.currentTarget,Rp=Rp.listener,L0!==Me&&te.isPropagationStopped())break e;Me=Rp,te.currentTarget=hm;try{Me(te)}catch(Am){m_(Am)}te.currentTarget=null,Me=L0}}}}function ov(n,i){var l=i[Mv];l===void 0&&(l=i[Mv]=new Set);var E=n+"__bubble";l.has(E)||(j_(i,n,2,!1),l.add(E))}function F_(n,i,l){var E=0;i&&(E|=4),j_(l,n,E,i)}var K2="_reactListening"+Math.random().toString(36).slice(2);function B_(n){if(!n[K2]){n[K2]=!0,Xm.forEach(function(l){l!=="selectionchange"&&(h5.has(l)||F_(l,!1,n),F_(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[K2]||(i[K2]=!0,F_("selectionchange",!1,i))}}function j_(n,i,l,E){switch(N5(i)){case 2:var te=g3;break;case 8:te=rb;break;default:te=nb}l=te.bind(null,i,l,n),te=void 0,!Vm||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(te=!0),E?te!==void 0?n.addEventListener(i,l,{capture:!0,passive:te}):n.addEventListener(i,l,!0):te!==void 0?n.addEventListener(i,l,{passive:te}):n.addEventListener(i,l,!1)}function Q2(n,i,l,E,te){var Me=E;if((i&1)===0&&(i&2)===0&&E!==null)e:for(;;){if(E===null)return;var Io=E.tag;if(Io===3||Io===4){var Rp=E.stateNode.containerInfo;if(Rp===te)break;if(Io===4)for(Io=E.return;Io!==null;){var L0=Io.tag;if((L0===3||L0===4)&&Io.stateNode.containerInfo===te)return;Io=Io.return}for(;Rp!==null;){if(Io=x0(Rp),Io===null)return;if(L0=Io.tag,L0===5||L0===6||L0===26||L0===27){E=Me=Io;continue e}Rp=Rp.parentNode}}E=E.return}E0(function(){var hm=Me,Am=Xp(l),X0=[];e:{var em=E3.get(n);if(em!==void 0){var cm=k1,L1=n;switch(n){case"keypress":if(_m(l)===0)break e;case"keydown":case"keyup":cm=dv;break;case"focusin":L1="focus",cm=tv;break;case"focusout":L1="blur",cm=tv;break;case"beforeblur":case"afterblur":cm=tv;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":cm=Z1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":cm=J1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":cm=de;break;case M3:case S3:case T3:cm=bv;break;case db:cm=De;break;case"scroll":case"scrollend":cm=I1;break;case"wheel":cm=b0;break;case"copy":case"cut":case"paste":cm=Uv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":cm=Rv;break;case"toggle":case"beforetoggle":cm=Cm}var Y1=(i&4)!==0,Rg=!Y1&&(n==="scroll"||n==="scrollend"),nm=Y1?em!==null?em+"Capture":null:em;Y1=[];for(var Y0=hm,gm;Y0!==null;){var Wm=Y0;if(gm=Wm.stateNode,Wm=Wm.tag,Wm!==5&&Wm!==26&&Wm!==27||gm===null||nm===null||(Wm=ym(Y0,nm),Wm!=null&&Y1.push(e_(Y0,Wm,gm))),Rg)break;Y0=Y0.return}0<Y1.length&&(em=new cm(em,L1,null,l,Am),X0.push({event:em,listeners:Y1}))}}if((i&7)===0){e:{if(em=n==="mouseover"||n==="pointerover",cm=n==="mouseout"||n==="pointerout",em&&l!==e0&&(L1=l.relatedTarget||l.fromElement)&&(x0(L1)||L1[_v]))break e;if((cm||em)&&(em=Am.window===Am?Am:(em=Am.ownerDocument)?em.defaultView||em.parentWindow:window,cm?(L1=l.relatedTarget||l.toElement,cm=hm,L1=L1?x0(L1):null,L1!==null&&(Rg=c(L1),Y1=L1.tag,L1!==Rg||Y1!==5&&Y1!==27&&Y1!==6)&&(L1=null)):(cm=null,L1=hm),cm!==L1)){if(Y1=Z1,Wm="onMouseLeave",nm="onMouseEnter",Y0="mouse",(n==="pointerout"||n==="pointerover")&&(Y1=Rv,Wm="onPointerLeave",nm="onPointerEnter",Y0="pointer"),Rg=cm==null?em:Mm(cm),gm=L1==null?em:Mm(L1),em=new Y1(Wm,Y0+"leave",cm,l,Am),em.target=Rg,em.relatedTarget=gm,Wm=null,x0(Am)===hm&&(Y1=new Y1(nm,Y0+"enter",L1,l,Am),Y1.target=gm,Y1.relatedTarget=Rg,Wm=Y1),Rg=Wm,cm&&L1)t:{for(Y1=Q5,nm=cm,Y0=L1,gm=0,Wm=nm;Wm;Wm=Y1(Wm))gm++;Wm=0;for(var ng=Y0;ng;ng=Y1(ng))Wm++;for(;0<gm-Wm;)nm=Y1(nm),gm--;for(;0<Wm-gm;)Y0=Y1(Y0),Wm--;for(;gm--;){if(nm===Y0||Y0!==null&&nm===Y0.alternate){Y1=nm;break t}nm=Y1(nm),Y0=Y1(Y0)}Y1=null}else Y1=null;cm!==null&&p5(X0,em,cm,Y1,!1),L1!==null&&Rg!==null&&p5(X0,Rg,L1,Y1,!0)}}e:{if(em=hm?Mm(hm):window,cm=em.nodeName&&em.nodeName.toLowerCase(),cm==="select"||cm==="input"&&em.type==="file")var Lg=Qg;else if(Mg(em))if(fy)Lg=h_;else{Lg=O5;var X1=x3}else cm=em.nodeName,!cm||cm.toLowerCase()!=="input"||em.type!=="checkbox"&&em.type!=="radio"?hm&&_s(hm.elementType)&&(Lg=Qg):Lg=P5;if(Lg&&(Lg=Lg(n,hm))){hv(X0,Lg,l,Am);break e}X1&&X1(n,em,hm),n==="focusout"&&hm&&em.type==="number"&&hm.memoizedProps.value!=null&&it(em,"number",em.value)}switch(X1=hm?Mm(hm):window,n){case"focusin":(Mg(X1)||X1.contentEditable==="true")&&(yx=X1,f_=hm,R2=null);break;case"focusout":R2=f_=yx=null;break;case"mousedown":lb=!0;break;case"contextmenu":case"mouseup":case"dragend":lb=!1,cb(X0,l,Am);break;case"selectionchange":if(sb)break;case"keydown":case"keyup":cb(X0,l,Am)}var jg;if(M1)e:{switch(n){case"compositionstart":var uv="onCompositionStart";break e;case"compositionend":uv="onCompositionEnd";break e;case"compositionupdate":uv="onCompositionUpdate";break e}uv=void 0}else hg?Gv(n,l)&&(uv="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(uv="onCompositionStart");uv&&(Ag&&l.locale!=="ko"&&(hg||uv!=="onCompositionStart"?uv==="onCompositionEnd"&&hg&&(jg=w1()):(a1=Am,h1="value"in a1?a1.value:a1.textContent,hg=!0)),X1=H_(hm,uv),0<X1.length&&(uv=new Kv(uv,n,null,l,Am),X0.push({event:uv,listeners:X1}),jg?uv.data=jg:(jg=av(l),jg!==null&&(uv.data=jg)))),(jg=Rm?mv(n,l):Ng(n,l))&&(uv=H_(hm,"onBeforeInput"),0<uv.length&&(X1=new Kv("onBeforeInput","beforeinput",null,l,Am),X0.push({event:X1,listeners:uv}),X1.data=jg)),u5(X0,n,hm,l,Am)}f5(X0,i)})}function e_(n,i,l){return{instance:n,listener:i,currentTarget:l}}function H_(n,i){for(var l=i+"Capture",E=[];n!==null;){var te=n,Me=te.stateNode;if(te=te.tag,te!==5&&te!==26&&te!==27||Me===null||(te=ym(n,l),te!=null&&E.unshift(e_(n,te,Me)),te=ym(n,i),te!=null&&E.push(e_(n,te,Me))),n.tag===3)return E;n=n.return}return[]}function Q5(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function p5(n,i,l,E,te){for(var Me=i._reactName,Io=[];l!==null&&l!==E;){var Rp=l,L0=Rp.alternate,hm=Rp.stateNode;if(Rp=Rp.tag,L0!==null&&L0===E)break;Rp!==5&&Rp!==26&&Rp!==27||hm===null||(L0=hm,te?(hm=ym(l,Me),hm!=null&&Io.unshift(e_(l,hm,L0))):te||(hm=ym(l,Me),hm!=null&&Io.push(e_(l,hm,L0)))),l=l.return}Io.length!==0&&n.push({event:i,listeners:Io})}var ew=/\r\n?/g,m5=/\u0000|\uFFFD/g;function Kb(n){return(typeof n=="string"?n:""+n).replace(ew,`
`).replace(m5,"")}function G_(n,i){return i=Kb(i),Kb(n)===i}function Cv(n,i,l,E,te,Me){switch(l){case"children":typeof E=="string"?i==="body"||i==="textarea"&&E===""||Ct(n,E):(typeof E=="number"||typeof E=="bigint")&&i!=="body"&&Ct(n,""+E);break;case"className":Hg(n,"class",E);break;case"tabIndex":Hg(n,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Hg(n,l,E);break;case"style":Si(n,E,Me);break;case"data":if(i!=="object"){Hg(n,"data",E);break}case"src":case"href":if(E===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){n.removeAttribute(l);break}E=Dp(""+E),n.setAttribute(l,E);break;case"action":case"formAction":if(typeof E=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Me=="function"&&(l==="formAction"?(i!=="input"&&Cv(n,i,"name",te.name,te,null),Cv(n,i,"formEncType",te.formEncType,te,null),Cv(n,i,"formMethod",te.formMethod,te,null),Cv(n,i,"formTarget",te.formTarget,te,null)):(Cv(n,i,"encType",te.encType,te,null),Cv(n,i,"method",te.method,te,null),Cv(n,i,"target",te.target,te,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){n.removeAttribute(l);break}E=Dp(""+E),n.setAttribute(l,E);break;case"onClick":E!=null&&(n.onclick=Op);break;case"onScroll":E!=null&&ov("scroll",n);break;case"onScrollEnd":E!=null&&ov("scrollend",n);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(a(61));if(l=E.__html,l!=null){if(te.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":n.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){n.removeAttribute("xlink:href");break}l=Dp(""+E),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?n.setAttribute(l,""+E):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":E===!0?n.setAttribute(l,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?n.setAttribute(l,E):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?n.setAttribute(l,E):n.removeAttribute(l);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?n.removeAttribute(l):n.setAttribute(l,E);break;case"popover":ov("beforetoggle",n),ov("toggle",n),vg(n,"popover",E);break;case"xlinkActuate":Q1(n,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":Q1(n,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":Q1(n,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":Q1(n,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":Q1(n,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":Q1(n,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":Q1(n,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":Q1(n,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":Q1(n,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":vg(n,"is",E);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=gs.get(l)||l,vg(n,l,E))}}function b2(n,i,l,E,te,Me){switch(l){case"style":Si(n,E,Me);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(a(61));if(l=E.__html,l!=null){if(te.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof E=="string"?Ct(n,E):(typeof E=="number"||typeof E=="bigint")&&Ct(n,""+E);break;case"onScroll":E!=null&&ov("scroll",n);break;case"onScrollEnd":E!=null&&ov("scrollend",n);break;case"onClick":E!=null&&(n.onclick=Op);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nm.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(te=l.endsWith("Capture"),i=l.slice(2,te?l.length-7:void 0),Me=n[ag]||null,Me=Me!=null?Me[l]:null,typeof Me=="function"&&n.removeEventListener(i,Me,te),typeof E=="function")){typeof Me!="function"&&Me!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,E,te);break e}l in n?n[l]=E:E===!0?n.setAttribute(l,""):vg(n,l,E)}}}function dy(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ov("error",n),ov("load",n);var E=!1,te=!1,Me;for(Me in l)if(l.hasOwnProperty(Me)){var Io=l[Me];if(Io!=null)switch(Me){case"src":E=!0;break;case"srcSet":te=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Cv(n,i,Me,Io,l,null)}}te&&Cv(n,i,"srcSet",l.srcSet,l,null),E&&Cv(n,i,"src",l.src,l,null);return;case"input":ov("invalid",n);var Rp=Me=Io=te=null,L0=null,hm=null;for(E in l)if(l.hasOwnProperty(E)){var Am=l[E];if(Am!=null)switch(E){case"name":te=Am;break;case"type":Io=Am;break;case"checked":L0=Am;break;case"defaultChecked":hm=Am;break;case"value":Me=Am;break;case"defaultValue":Rp=Am;break;case"children":case"dangerouslySetInnerHTML":if(Am!=null)throw Error(a(137,i));break;default:Cv(n,i,E,Am,l,null)}}_e(n,Me,Rp,L0,hm,Io,te,!1);return;case"select":ov("invalid",n),E=Io=Me=null;for(te in l)if(l.hasOwnProperty(te)&&(Rp=l[te],Rp!=null))switch(te){case"value":Me=Rp;break;case"defaultValue":Io=Rp;break;case"multiple":E=Rp;default:Cv(n,i,te,Rp,l,null)}i=Me,l=Io,n.multiple=!!E,i!=null?lt(n,!!E,i,!1):l!=null&&lt(n,!!E,l,!0);return;case"textarea":ov("invalid",n),Me=te=E=null;for(Io in l)if(l.hasOwnProperty(Io)&&(Rp=l[Io],Rp!=null))switch(Io){case"value":E=Rp;break;case"defaultValue":te=Rp;break;case"children":Me=Rp;break;case"dangerouslySetInnerHTML":if(Rp!=null)throw Error(a(91));break;default:Cv(n,i,Io,Rp,l,null)}Vt(n,E,te,Me);return;case"option":for(L0 in l)if(l.hasOwnProperty(L0)&&(E=l[L0],E!=null))switch(L0){case"selected":n.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Cv(n,i,L0,E,l,null)}return;case"dialog":ov("beforetoggle",n),ov("toggle",n),ov("cancel",n),ov("close",n);break;case"iframe":case"object":ov("load",n);break;case"video":case"audio":for(E=0;E<_2.length;E++)ov(_2[E],n);break;case"image":ov("error",n),ov("load",n);break;case"details":ov("toggle",n);break;case"embed":case"source":case"link":ov("error",n),ov("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(hm in l)if(l.hasOwnProperty(hm)&&(E=l[hm],E!=null))switch(hm){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Cv(n,i,hm,E,l,null)}return;default:if(_s(i)){for(Am in l)l.hasOwnProperty(Am)&&(E=l[Am],E!==void 0&&b2(n,i,Am,E,l,void 0));return}}for(Rp in l)l.hasOwnProperty(Rp)&&(E=l[Rp],E!=null&&Cv(n,i,Rp,E,l,null))}function tw(n,i,l,E){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var te=null,Me=null,Io=null,Rp=null,L0=null,hm=null,Am=null;for(cm in l){var X0=l[cm];if(l.hasOwnProperty(cm)&&X0!=null)switch(cm){case"checked":break;case"value":break;case"defaultValue":L0=X0;default:E.hasOwnProperty(cm)||Cv(n,i,cm,null,E,X0)}}for(var em in E){var cm=E[em];if(X0=l[em],E.hasOwnProperty(em)&&(cm!=null||X0!=null))switch(em){case"type":Me=cm;break;case"name":te=cm;break;case"checked":hm=cm;break;case"defaultChecked":Am=cm;break;case"value":Io=cm;break;case"defaultValue":Rp=cm;break;case"children":case"dangerouslySetInnerHTML":if(cm!=null)throw Error(a(137,i));break;default:cm!==X0&&Cv(n,i,em,cm,E,X0)}}Ze(n,Io,Rp,L0,hm,Am,Me,te);return;case"select":cm=Io=Rp=em=null;for(Me in l)if(L0=l[Me],l.hasOwnProperty(Me)&&L0!=null)switch(Me){case"value":break;case"multiple":cm=L0;default:E.hasOwnProperty(Me)||Cv(n,i,Me,null,E,L0)}for(te in E)if(Me=E[te],L0=l[te],E.hasOwnProperty(te)&&(Me!=null||L0!=null))switch(te){case"value":em=Me;break;case"defaultValue":Rp=Me;break;case"multiple":Io=Me;default:Me!==L0&&Cv(n,i,te,Me,E,L0)}i=Rp,l=Io,E=cm,em!=null?lt(n,!!l,em,!1):!!E!=!!l&&(i!=null?lt(n,!!l,i,!0):lt(n,!!l,l?[]:"",!1));return;case"textarea":cm=em=null;for(Rp in l)if(te=l[Rp],l.hasOwnProperty(Rp)&&te!=null&&!E.hasOwnProperty(Rp))switch(Rp){case"value":break;case"children":break;default:Cv(n,i,Rp,null,E,te)}for(Io in E)if(te=E[Io],Me=l[Io],E.hasOwnProperty(Io)&&(te!=null||Me!=null))switch(Io){case"value":em=te;break;case"defaultValue":cm=te;break;case"children":break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(91));break;default:te!==Me&&Cv(n,i,Io,te,E,Me)}Ye(n,em,cm);return;case"option":for(var L1 in l)if(em=l[L1],l.hasOwnProperty(L1)&&em!=null&&!E.hasOwnProperty(L1))switch(L1){case"selected":n.selected=!1;break;default:Cv(n,i,L1,null,E,em)}for(L0 in E)if(em=E[L0],cm=l[L0],E.hasOwnProperty(L0)&&em!==cm&&(em!=null||cm!=null))switch(L0){case"selected":n.selected=em&&typeof em!="function"&&typeof em!="symbol";break;default:Cv(n,i,L0,em,E,cm)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Y1 in l)em=l[Y1],l.hasOwnProperty(Y1)&&em!=null&&!E.hasOwnProperty(Y1)&&Cv(n,i,Y1,null,E,em);for(hm in E)if(em=E[hm],cm=l[hm],E.hasOwnProperty(hm)&&em!==cm&&(em!=null||cm!=null))switch(hm){case"children":case"dangerouslySetInnerHTML":if(em!=null)throw Error(a(137,i));break;default:Cv(n,i,hm,em,E,cm)}return;default:if(_s(i)){for(var Rg in l)em=l[Rg],l.hasOwnProperty(Rg)&&em!==void 0&&!E.hasOwnProperty(Rg)&&b2(n,i,Rg,void 0,E,em);for(Am in E)em=E[Am],cm=l[Am],!E.hasOwnProperty(Am)||em===cm||em===void 0&&cm===void 0||b2(n,i,Am,em,E,cm);return}}for(var nm in l)em=l[nm],l.hasOwnProperty(nm)&&em!=null&&!E.hasOwnProperty(nm)&&Cv(n,i,nm,null,E,em);for(X0 in E)em=E[X0],cm=l[X0],!E.hasOwnProperty(X0)||em===cm||em==null&&cm==null||Cv(n,i,X0,em,E,cm)}function V_(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function g5(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,l=performance.getEntriesByType("resource"),E=0;E<l.length;E++){var te=l[E],Me=te.transferSize,Io=te.initiatorType,Rp=te.duration;if(Me&&Rp&&V_(Io)){for(Io=0,Rp=te.responseEnd,E+=1;E<l.length;E++){var L0=l[E],hm=L0.startTime;if(hm>Rp)break;var Am=L0.transferSize,X0=L0.initiatorType;Am&&V_(X0)&&(L0=L0.responseEnd,Io+=Am*(L0<Rp?1:(Rp-hm)/(L0-hm)))}if(--E,i+=8*(Me+Io)/(te.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qb=null,e3=null;function t_(n){return n.nodeType===9?n:n.ownerDocument}function t3(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r3(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function r_(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var n_=null;function v5(){var n=window.event;return n&&n.type==="popstate"?n===n_?!1:(n_=n,!0):(n_=null,!1)}var y5=typeof setTimeout=="function"?setTimeout:void 0,x5=typeof clearTimeout=="function"?clearTimeout:void 0,a_=typeof Promise=="function"?Promise:void 0,_5=typeof queueMicrotask=="function"?queueMicrotask:typeof a_<"u"?function(n){return a_.resolve(null).then(n).catch(rw)}:y5;function rw(n){setTimeout(function(){throw n})}function Rx(n){return n==="head"}function b5(n,i){var l=i,E=0;do{var te=l.nextSibling;if(n.removeChild(l),te&&te.nodeType===8)if(l=te.data,l==="/$"||l==="/&"){if(E===0){n.removeChild(te),f0(i);return}E--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")E++;else if(l==="html")Lx(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Lx(l);for(var Me=l.firstChild;Me;){var Io=Me.nextSibling,Rp=Me.nodeName;Me[Fl]||Rp==="SCRIPT"||Rp==="STYLE"||Rp==="LINK"&&Me.rel.toLowerCase()==="stylesheet"||l.removeChild(Me),Me=Io}}else l==="body"&&Lx(n.ownerDocument.body);l=te}while(l);f0(i)}function w5(n,i){var l=n;n=0;do{var E=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),E&&E.nodeType===8)if(l=E.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=E}while(l)}function q_(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":q_(l),Wl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function M5(n,i,l,E){for(;n.nodeType===1;){var te=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!E&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(E){if(!n[Fl])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(Me=n.getAttribute("rel"),Me==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(Me!==te.rel||n.getAttribute("href")!==(te.href==null||te.href===""?null:te.href)||n.getAttribute("crossorigin")!==(te.crossOrigin==null?null:te.crossOrigin)||n.getAttribute("title")!==(te.title==null?null:te.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(Me=n.getAttribute("src"),(Me!==(te.src==null?null:te.src)||n.getAttribute("type")!==(te.type==null?null:te.type)||n.getAttribute("crossorigin")!==(te.crossOrigin==null?null:te.crossOrigin))&&Me&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var Me=te.name==null?null:""+te.name;if(te.type==="hidden"&&n.getAttribute("name")===Me)return n}else return n;if(n=$y(n.nextSibling),n===null)break}return null}function S5(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=$y(n.nextSibling),n===null))return null;return n}function n3(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=$y(n.nextSibling),n===null))return null;return n}function a3(n){return n.data==="$?"||n.data==="$~"}function w2(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function nw(n,i){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||l.readyState!=="loading")i();else{var E=function(){i(),l.removeEventListener("DOMContentLoaded",E)};l.addEventListener("DOMContentLoaded",E),n._reactRetry=E}}function $y(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var $_=null;function i3(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(i===0)return $y(n.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}n=n.nextSibling}return null}function T5(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return n;i--}else l!=="/$"&&l!=="/&"||i++}n=n.previousSibling}return null}function i_(n,i,l){switch(i=t_(l),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Lx(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Wl(n)}var Py=new Map,o3=new Set;function M2(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var my=zl.d;zl.d={f:E5,r:aw,D:iw,C:ow,L:sw,m:W_,X:A5,S:s3,M:lw};function E5(){var n=my.f(),i=D_();return n||i}function aw(n){var i=S0(n);i!==null&&i.tag===5&&i.type==="form"?ve(i):my.r(n)}var Dx=typeof document>"u"?null:document;function Y_(n,i,l){var E=Dx;if(E&&typeof i=="string"&&i){var te=Q(i);te='link[rel="'+n+'"][href="'+te+'"]',typeof l=="string"&&(te+='[crossorigin="'+l+'"]'),o3.has(te)||(o3.add(te),n={rel:n,crossOrigin:l,href:i},E.querySelector(te)===null&&(i=E.createElement("link"),dy(i,"link",n),wm(i),E.head.appendChild(i)))}}function iw(n){my.D(n),Y_("dns-prefetch",n,null)}function ow(n,i){my.C(n,i),Y_("preconnect",n,i)}function sw(n,i,l){my.L(n,i,l);var E=Dx;if(E&&n&&i){var te='link[rel="preload"][as="'+Q(i)+'"]';i==="image"&&l&&l.imageSrcSet?(te+='[imagesrcset="'+Q(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(te+='[imagesizes="'+Q(l.imageSizes)+'"]')):te+='[href="'+Q(n)+'"]';var Me=te;switch(i){case"style":Me=S2(n);break;case"script":Me=Iy(n)}Py.has(Me)||(n=C({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),Py.set(Me,n),E.querySelector(te)!==null||i==="style"&&E.querySelector(Sy(Me))||i==="script"&&E.querySelector(Kx(Me))||(i=E.createElement("link"),dy(i,"link",n),wm(i),E.head.appendChild(i)))}}function W_(n,i){my.m(n,i);var l=Dx;if(l&&n){var E=i&&typeof i.as=="string"?i.as:"script",te='link[rel="modulepreload"][as="'+Q(E)+'"][href="'+Q(n)+'"]',Me=te;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Me=Iy(n)}if(!Py.has(Me)&&(n=C({rel:"modulepreload",href:n},i),Py.set(Me,n),l.querySelector(te)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Kx(Me)))return}E=l.createElement("link"),dy(E,"link",n),wm(E),l.head.appendChild(E)}}}function s3(n,i,l){my.S(n,i,l);var E=Dx;if(E&&n){var te=km(E).hoistableStyles,Me=S2(n);i=i||"default";var Io=te.get(Me);if(!Io){var Rp={loading:0,preload:null};if(Io=E.querySelector(Sy(Me)))Rp.loading=5;else{n=C({rel:"stylesheet",href:n,"data-precedence":i},l),(l=Py.get(Me))&&c3(n,l);var L0=Io=E.createElement("link");wm(L0),dy(L0,"link",n),L0._p=new Promise(function(hm,Am){L0.onload=hm,L0.onerror=Am}),L0.addEventListener("load",function(){Rp.loading|=1}),L0.addEventListener("error",function(){Rp.loading|=2}),Rp.loading|=4,Z_(Io,i,E)}Io={type:"stylesheet",instance:Io,count:1,state:Rp},te.set(Me,Io)}}}function A5(n,i){my.X(n,i);var l=Dx;if(l&&n){var E=km(l).hoistableScripts,te=Iy(n),Me=E.get(te);Me||(Me=l.querySelector(Kx(te)),Me||(n=C({src:n,async:!0},i),(i=Py.get(te))&&u3(n,i),Me=l.createElement("script"),wm(Me),dy(Me,"link",n),l.head.appendChild(Me)),Me={type:"script",instance:Me,count:1,state:null},E.set(te,Me))}}function lw(n,i){my.M(n,i);var l=Dx;if(l&&n){var E=km(l).hoistableScripts,te=Iy(n),Me=E.get(te);Me||(Me=l.querySelector(Kx(te)),Me||(n=C({src:n,async:!0,type:"module"},i),(i=Py.get(te))&&u3(n,i),Me=l.createElement("script"),wm(Me),dy(Me,"link",n),l.head.appendChild(Me)),Me={type:"script",instance:Me,count:1,state:null},E.set(te,Me))}}function C5(n,i,l,E){var te=(te=o0.current)?M2(te):null;if(!te)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=S2(l.href),l=km(te).hoistableStyles,E=l.get(i),E||(E={type:"style",instance:null,count:0,state:null},l.set(i,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=S2(l.href);var Me=km(te).hoistableStyles,Io=Me.get(n);if(Io||(te=te.ownerDocument||te,Io={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Me.set(n,Io),(Me=te.querySelector(Sy(n)))&&!Me._p&&(Io.instance=Me,Io.state.loading=5),Py.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Py.set(n,l),Me||R5(te,n,l,Io.state))),i&&E===null)throw Error(a(528,""));return Io}if(i&&E!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Iy(l),l=km(te).hoistableScripts,E=l.get(i),E||(E={type:"script",instance:null,count:0,state:null},l.set(i,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function S2(n){return'href="'+Q(n)+'"'}function Sy(n){return'link[rel="stylesheet"]['+n+"]"}function l3(n){return C({},n,{"data-precedence":n.precedence,precedence:null})}function R5(n,i,l,E){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?E.loading=1:(i=n.createElement("link"),E.preload=i,i.addEventListener("load",function(){return E.loading|=1}),i.addEventListener("error",function(){return E.loading|=2}),dy(i,"link",l),wm(i),n.head.appendChild(i))}function Iy(n){return'[src="'+Q(n)+'"]'}function Kx(n){return"script[async]"+n}function X_(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var E=n.querySelector('style[data-href~="'+Q(l.href)+'"]');if(E)return i.instance=E,wm(E),E;var te=C({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return E=(n.ownerDocument||n).createElement("style"),wm(E),dy(E,"style",te),Z_(E,l.precedence,n),i.instance=E;case"stylesheet":te=S2(l.href);var Me=n.querySelector(Sy(te));if(Me)return i.state.loading|=4,i.instance=Me,wm(Me),Me;E=l3(l),(te=Py.get(te))&&c3(E,te),Me=(n.ownerDocument||n).createElement("link"),wm(Me);var Io=Me;return Io._p=new Promise(function(Rp,L0){Io.onload=Rp,Io.onerror=L0}),dy(Me,"link",E),i.state.loading|=4,Z_(Me,l.precedence,n),i.instance=Me;case"script":return Me=Iy(l.src),(te=n.querySelector(Kx(Me)))?(i.instance=te,wm(te),te):(E=l,(te=Py.get(Me))&&(E=C({},l),u3(E,te)),n=n.ownerDocument||n,te=n.createElement("script"),wm(te),dy(te,"link",E),n.head.appendChild(te),i.instance=te);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(E=i.instance,i.state.loading|=4,Z_(E,l.precedence,n));return i.instance}function Z_(n,i,l){for(var E=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),te=E.length?E[E.length-1]:null,Me=te,Io=0;Io<E.length;Io++){var Rp=E[Io];if(Rp.dataset.precedence===i)Me=Rp;else if(Me!==te)break}Me?Me.parentNode.insertBefore(n,Me.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function c3(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function u3(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var o_=null;function d3(n,i,l){if(o_===null){var E=new Map,te=o_=new Map;te.set(l,E)}else te=o_,E=te.get(l),E||(E=new Map,te.set(l,E));if(E.has(n))return E;for(E.set(n,null),l=l.getElementsByTagName(n),te=0;te<l.length;te++){var Me=l[te];if(!(Me[Fl]||Me[vv]||n==="link"&&Me.getAttribute("rel")==="stylesheet")&&Me.namespaceURI!=="http://www.w3.org/2000/svg"){var Io=Me.getAttribute(i)||"";Io=n+Io;var Rp=E.get(Io);Rp?Rp.push(Me):E.set(Io,[Me])}}return E}function h3(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function L5(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function D5(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function k5(n,i,l,E){if(l.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var te=S2(E.href),Me=i.querySelector(Sy(te));if(Me){i=Me._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=J_.bind(n),i.then(n,n)),l.state.loading|=4,l.instance=Me,wm(Me);return}Me=i.ownerDocument||i,E=l3(E),(te=Py.get(te))&&c3(E,te),Me=Me.createElement("link"),wm(Me);var Io=Me;Io._p=new Promise(function(Rp,L0){Io.onload=Rp,Io.onerror=L0}),dy(Me,"link",E),l.instance=Me}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=J_.bind(n),i.addEventListener("load",l),i.addEventListener("error",l))}}var f3=0;function cw(n,i){return n.stylesheets&&n.count===0&&l_(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var E=setTimeout(function(){if(n.stylesheets&&l_(n,n.stylesheets),n.unsuspend){var Me=n.unsuspend;n.unsuspend=null,Me()}},6e4+i);0<n.imgBytes&&f3===0&&(f3=62500*g5());var te=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&l_(n,n.stylesheets),n.unsuspend)){var Me=n.unsuspend;n.unsuspend=null,Me()}},(n.imgBytes>f3?50:800)+i);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(E),clearTimeout(te)}}:null}function J_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)l_(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var s_=null;function l_(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,s_=new Map,i.forEach(K_,n),s_=null,J_.call(n))}function K_(n,i){if(!(i.state.loading&4)){var l=s_.get(n);if(l)var E=l.get(null);else{l=new Map,s_.set(n,l);for(var te=n.querySelectorAll("link[data-precedence],style[data-precedence]"),Me=0;Me<te.length;Me++){var Io=te[Me];(Io.nodeName==="LINK"||Io.getAttribute("media")!=="not all")&&(l.set(Io.dataset.precedence,Io),E=Io)}E&&l.set(null,E)}te=i.instance,Io=te.getAttribute("data-precedence"),Me=l.get(Io)||E,Me===E&&l.set(null,te),l.set(Io,te),this.count++,E=J_.bind(this),te.addEventListener("load",E),te.addEventListener("error",E),Me?Me.parentNode.insertBefore(te,Me.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(te,n.firstChild)),i.state.loading|=4}}var T2={$$typeof:G,Provider:null,Consumer:null,_currentValue:Hl,_currentValue2:Hl,_threadCount:0};function Q_(n,i,l,E,te,Me,Io,Rp,L0){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jg(0),this.hiddenUpdates=Jg(null),this.identifierPrefix=E,this.onUncaughtError=te,this.onCaughtError=Me,this.onRecoverableError=Io,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L0,this.incompleteTransitions=new Map}function p3(n,i,l,E,te,Me,Io,Rp,L0,hm,Am,X0){return n=new Q_(n,i,l,Io,L0,hm,Am,X0,Rp),i=1,Me===!0&&(i|=24),Me=Ey(3,null,null,i),n.current=Me,Me.stateNode=n,i=Sb(),i.refCount++,n.pooledCache=i,i.refCount++,Me.memoizedState={element:E,isDehydrated:l,cache:i},Rb(Me),n}function E2(n){return n?(n=jx,n):jx}function iy(n,i,l,E,te,Me){te=E2(te),E.context===null?E.context=te:E.pendingContext=te,E=Tx(i),E.payload={element:l},Me=Me===void 0?null:Me,Me!==null&&(E.callback=Me),l=Xy(n,E,i),l!==null&&(Ly(l,n,i),Xx(l,n,i))}function m3(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function gx(n,i){m3(n,i),(n=n.alternate)&&m3(n,i)}function c_(n){if(n.tag===13||n.tag===31){var i=Bx(n,67108864);i!==null&&Ly(i,n,67108864),gx(n,67108864)}}function eb(n){if(n.tag===13||n.tag===31){var i=zy();i=kv(i);var l=Bx(n,i);l!==null&&Ly(l,n,i),gx(n,i)}}var tb=!0;function g3(n,i,l,E){var te=ne.T;ne.T=null;var Me=zl.p;try{zl.p=2,nb(n,i,l,E)}finally{zl.p=Me,ne.T=te}}function rb(n,i,l,E){var te=ne.T;ne.T=null;var Me=zl.p;try{zl.p=8,nb(n,i,l,E)}finally{zl.p=Me,ne.T=te}}function nb(n,i,l,E){if(tb){var te=v3(E);if(te===null)Q2(n,i,E,ab,l),We(n,E);else if(_n(te,n,i,l,E))E.stopPropagation();else if(We(n,E),i&4&&-1<Ue.indexOf(n)){for(;te!==null;){var Me=S0(te);if(Me!==null)switch(Me.tag){case 3:if(Me=Me.stateNode,Me.current.memoizedState.isDehydrated){var Io=tm(Me.pendingLanes);if(Io!==0){var Rp=Me;for(Rp.pendingLanes|=2,Rp.entangledLanes|=2;Io;){var L0=1<<31-vm(Io);Rp.entanglements[1]|=L0,Io&=~L0}ax(Me),(Yg&6)===0&&(Y2=bm()+500,J2(0))}}break;case 31:case 13:Rp=Bx(Me,2),Rp!==null&&Ly(Rp,Me,2),D_(),gx(Me,2)}if(Me=v3(E),Me===null&&Q2(n,i,E,ab,l),Me===te)break;te=Me}te!==null&&E.stopPropagation()}else Q2(n,i,E,null,l)}}function v3(n){return n=Xp(n),y3(n)}var ab=null;function y3(n){if(ab=null,n=x0(n),n!==null){var i=c(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=d(i),n!==null)return n;n=null}else if(l===31){if(n=p(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ab=n,null}function N5(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(i1()){case r1:return 2;case Gp:return 8;case i0:case l0:return 32;case im:return 268435456;default:return 32}default:return 32}}var u_=!1,kx=null,Nx=null,m=null,I=new Map,ee=new Map,we=[],Ue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function We(n,i){switch(n){case"focusin":case"focusout":kx=null;break;case"dragenter":case"dragleave":Nx=null;break;case"mouseover":case"mouseout":m=null;break;case"pointerover":case"pointerout":I.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ee.delete(i.pointerId)}}function Do(n,i,l,E,te,Me){return n===null||n.nativeEvent!==Me?(n={blockedOn:i,domEventName:l,eventSystemFlags:E,nativeEvent:Me,targetContainers:[te]},i!==null&&(i=S0(i),i!==null&&c_(i)),n):(n.eventSystemFlags|=E,i=n.targetContainers,te!==null&&i.indexOf(te)===-1&&i.push(te),n)}function _n(n,i,l,E,te){switch(i){case"focusin":return kx=Do(kx,n,i,l,E,te),!0;case"dragenter":return Nx=Do(Nx,n,i,l,E,te),!0;case"mouseover":return m=Do(m,n,i,l,E,te),!0;case"pointerover":var Me=te.pointerId;return I.set(Me,Do(I.get(Me)||null,n,i,l,E,te)),!0;case"gotpointercapture":return Me=te.pointerId,ee.set(Me,Do(ee.get(Me)||null,n,i,l,E,te)),!0}return!1}function jl(n){var i=x0(n.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=d(l),i!==null){n.blockedOn=i,oy(n.priority,function(){eb(l)});return}}else if(i===31){if(i=p(l),i!==null){n.blockedOn=i,oy(n.priority,function(){eb(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cp(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=v3(n.nativeEvent);if(l===null){l=n.nativeEvent;var E=new l.constructor(l.type,l);e0=E,l.target.dispatchEvent(E),e0=null}else return i=S0(l),i!==null&&c_(i),n.blockedOn=l,!1;i.shift()}return!0}function Lp(n,i,l){Cp(n)&&l.delete(i)}function n0(){u_=!1,kx!==null&&Cp(kx)&&(kx=null),Nx!==null&&Cp(Nx)&&(Nx=null),m!==null&&Cp(m)&&(m=null),I.forEach(Lp),ee.forEach(Lp)}function d0(n,i){n.blockedOn===i&&(n.blockedOn=null,u_||(u_=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,n0)))}var B0=null;function Q0(n){B0!==n&&(B0=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){B0===n&&(B0=null);for(var i=0;i<n.length;i+=3){var l=n[i],E=n[i+1],te=n[i+2];if(typeof E!="function"){if(y3(E||l)===null)continue;break}var Me=S0(l);Me!==null&&(n.splice(i,3),i-=3,q(Me,{pending:!0,data:te,method:l.method,action:E},E,te))}}))}function f0(n){function i(L0){return d0(L0,n)}kx!==null&&d0(kx,n),Nx!==null&&d0(Nx,n),m!==null&&d0(m,n),I.forEach(i),ee.forEach(i);for(var l=0;l<we.length;l++){var E=we[l];E.blockedOn===n&&(E.blockedOn=null)}for(;0<we.length&&(l=we[0],l.blockedOn===null);)jl(l),l.blockedOn===null&&we.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(E=0;E<l.length;E+=3){var te=l[E],Me=l[E+1],Io=te[ag]||null;if(typeof Me=="function")Io||Q0(l);else if(Io){var Rp=null;if(Me&&Me.hasAttribute("formAction")){if(te=Me,Io=Me[ag]||null)Rp=Io.formAction;else if(y3(te)!==null)continue}else Rp=Io.action;typeof Rp=="function"?l[E+1]=Rp:(l.splice(E,3),E-=3),Q0(l)}}}function z0(){function n(Me){Me.canIntercept&&Me.info==="react-transition"&&Me.intercept({handler:function(){return new Promise(function(Io){return te=Io})},focusReset:"manual",scroll:"manual"})}function i(){te!==null&&(te(),te=null),E||setTimeout(l,20)}function l(){if(!E&&!navigation.transition){var Me=navigation.currentEntry;Me&&Me.url!=null&&navigation.navigate(Me.url,{state:Me.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,te=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){E=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),te!==null&&(te(),te=null)}}}function I0(n){this._internalRoot=n}J0.prototype.render=I0.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,E=zy();iy(l,E,n,i,null,null)},J0.prototype.unmount=I0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;iy(n.current,2,null,n,null,null),D_(),i[_v]=null}};function J0(n){this._internalRoot=n}J0.prototype.unstable_scheduleHydration=function(n){if(n){var i=ry();n={blockedOn:null,target:n,priority:i};for(var l=0;l<we.length&&i!==0&&i<we[l].priority;l++);we.splice(l,0,n),l===0&&jl(n)}};var K0=e.version;if(K0!=="19.2.0")throw Error(a(527,K0,"19.2.0"));zl.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=S(i),n=n!==null?A(n):null,n=n===null?null:n.stateNode,n};var j0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Km=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Km.isDisabled&&Km.supportsFiber)try{Dm=Km.inject(j0),Gm=Km}catch{}}return reactDomClient_production.createRoot=function(n,i){if(!o(n))throw Error(a(299));var l=!1,E="",te=T0,Me=G0,Io=h0;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(E=i.identifierPrefix),i.onUncaughtError!==void 0&&(te=i.onUncaughtError),i.onCaughtError!==void 0&&(Me=i.onCaughtError),i.onRecoverableError!==void 0&&(Io=i.onRecoverableError)),i=p3(n,1,!1,null,null,l,E,null,te,Me,Io,z0),n[_v]=i.current,B_(n),new I0(i)},reactDomClient_production.hydrateRoot=function(n,i,l){if(!o(n))throw Error(a(299));var E=!1,te="",Me=T0,Io=G0,Rp=h0,L0=null;return l!=null&&(l.unstable_strictMode===!0&&(E=!0),l.identifierPrefix!==void 0&&(te=l.identifierPrefix),l.onUncaughtError!==void 0&&(Me=l.onUncaughtError),l.onCaughtError!==void 0&&(Io=l.onCaughtError),l.onRecoverableError!==void 0&&(Rp=l.onRecoverableError),l.formState!==void 0&&(L0=l.formState)),i=p3(n,1,!0,i,l??null,E,te,L0,Me,Io,Rp,z0),i.context=E2(null),l=i.current,E=zy(),E=kv(E),te=Tx(E),te.callback=null,Xy(l,te,E),l=E,i.current.lanes=l,Dg(i,l),ax(i),n[_v]=i.current,B_(n),new J0(i)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createHashHistory(r={}){function e(o,c){let{pathname:d="/",search:p="",hash:_=""}=parsePath(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),createLocation("",{pathname:d,search:p,hash:_},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function t(o,c){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let _=o.location.href,S=_.indexOf("#");p=S===-1?_:_.slice(0,S)}return p+"#"+(typeof c=="string"?c:createPath(c))}function a(o,c){warning(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return getUrlBasedHistory(e,t,a,r)}function invariant(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function warning(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(r,e){return{usr:r.state,key:r.key,idx:e}}function createLocation(r,e,t=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:t,key:e&&e.key||a||createKey()}}function createPath({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function parsePath(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function getUrlBasedHistory(r,e,t,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,p="POP",_=null,S=A();S==null&&(S=0,d.replaceState({...d.state,idx:S},""));function A(){return(d.state||{idx:null}).idx}function C(){p="POP";let ie=A(),K=ie==null?null:ie-S;S=ie,_&&_({action:p,location:re.location,delta:K})}function j(ie,K){p="PUSH";let Ne=createLocation(re.location,ie,K);t&&t(Ne,ie),S=A()+1;let G=getHistoryState(Ne,S),se=re.createHref(Ne);try{d.pushState(G,"",se)}catch(He){if(He instanceof DOMException&&He.name==="DataCloneError")throw He;o.location.assign(se)}c&&_&&_({action:p,location:re.location,delta:1})}function V(ie,K){p="REPLACE";let Ne=createLocation(re.location,ie,K);t&&t(Ne,ie),S=A();let G=getHistoryState(Ne,S),se=re.createHref(Ne);d.replaceState(G,"",se),c&&_&&_({action:p,location:re.location,delta:0})}function J(ie){return createBrowserURLImpl(ie)}let re={get action(){return p},get location(){return r(o,d)},listen(ie){if(_)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,C),_=ie,()=>{o.removeEventListener(PopStateEventType,C),_=null}},createHref(ie){return e(o,ie)},createURL:J,encodeLocation(ie){let K=J(ie);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:j,replace:V,go(ie){return d.go(ie)}};return re}function createBrowserURLImpl(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(t,"No window.location.(origin|href) available to create URL");let a=typeof r=="string"?r:createPath(r);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function matchRoutes(r,e,t="/"){return matchRoutesImpl(r,e,t,!1)}function matchRoutesImpl(r,e,t,a){let o=typeof e=="string"?parsePath(e):e,c=stripBasename(o.pathname||"/",t);if(c==null)return null;let d=flattenRoutes(r);rankRouteBranches(d);let p=null;for(let _=0;p==null&&_<d.length;++_){let S=decodePath(c);p=matchRouteBranch(d[_],S,a)}return p}function flattenRoutes(r,e=[],t=[],a="",o=!1){let c=(d,p,_=o,S)=>{let A={relativePath:S===void 0?d.path||"":S,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(a)&&_)return;invariant(A.relativePath.startsWith(a),`Absolute route path "${A.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(a.length)}let C=joinPaths([a,A.relativePath]),j=t.concat(A);d.children&&d.children.length>0&&(invariant(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),flattenRoutes(d.children,e,j,C,_)),!(d.path==null&&!d.index)&&e.push({path:C,score:computeScore(C,d.index),routesMeta:j})};return r.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))c(d,p);else for(let _ of explodeOptionalSegments(d.path))c(d,p,!0,_)}),e}function explodeOptionalSegments(r){let e=r.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=explodeOptionalSegments(a.join("/")),p=[];return p.push(...d.map(_=>_===""?c:[c,_].join("/"))),o&&p.push(...d),p.map(_=>r.startsWith("/")&&_===""?"/":_)}function rankRouteBranches(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=r=>r==="*";function computeScore(r,e){let t=r.split("/"),a=t.length;return t.some(isSplat)&&(a+=splatPenalty),e&&(a+=indexRouteValue),t.filter(o=>!isSplat(o)).reduce((o,c)=>o+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(r,e){return r.length===e.length&&r.slice(0,-1).every((a,o)=>a===e[o])?r[r.length-1]-e[e.length-1]:0}function matchRouteBranch(r,e,t=!1){let{routesMeta:a}=r,o={},c="/",d=[];for(let p=0;p<a.length;++p){let _=a[p],S=p===a.length-1,A=c==="/"?e:e.slice(c.length)||"/",C=matchPath({path:_.relativePath,caseSensitive:_.caseSensitive,end:S},A),j=_.route;if(!C&&S&&t&&!a[a.length-1].route.index&&(C=matchPath({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},A)),!C)return null;Object.assign(o,C.params),d.push({params:o,pathname:joinPaths([c,C.pathname]),pathnameBase:normalizePathname(joinPaths([c,C.pathnameBase])),route:j}),C.pathnameBase!=="/"&&(c=joinPaths([c,C.pathnameBase]))}return d}function matchPath(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,a]=compilePath(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:a.reduce((S,{paramName:A,isOptional:C},j)=>{if(A==="*"){let J=p[j]||"";d=c.slice(0,c.length-J.length).replace(/(.)\/+$/,"$1")}const V=p[j];return C&&!V?S[A]=void 0:S[A]=(V||"").replace(/%2F/g,"/"),S},{}),pathname:c,pathnameBase:d,pattern:r}}function compilePath(r,e=!1,t=!0){warning(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,_)=>(a.push({paramName:p,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(a.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function decodePath(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function stripBasename(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=r.charAt(t);return a&&a!=="/"?null:r.slice(t)||"/"}function resolvePath(r,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof r=="string"?parsePath(r):r;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(a),hash:normalizeHash(o)}}function resolvePathname(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(r,e,t,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(r){let e=getPathContributingMatches(r);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function resolveTo(r,e,t,a=!1){let o;typeof r=="string"?o=parsePath(r):(o={...r},invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let c=r===""||o.pathname==="",d=c?"/":o.pathname,p;if(d==null)p=t;else{let C=e.length-1;if(!a&&d.startsWith("..")){let j=d.split("/");for(;j[0]==="..";)j.shift(),C-=1;o.pathname=j.join("/")}p=C>=0?e[C]:"/"}let _=resolvePath(o,p),S=d&&d!=="/"&&d.endsWith("/"),A=(c||d===".")&&t.endsWith("/");return!_.pathname.endsWith("/")&&(S||A)&&(_.pathname+="/"),_}var joinPaths=r=>r.join("/").replace(/\/\/+/g,"/"),normalizePathname=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,normalizeHash=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function isRouteErrorResponse(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(r,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=reactExports.useContext(NavigationContext),{hash:o,pathname:c,search:d}=useResolvedPath(r,{relative:e}),p=c;return t!=="/"&&(p=c==="/"?t:joinPaths([t,c])),a.createHref({pathname:p,search:d,hash:o})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(r){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(r)}function useNavigate(){let{isDataRoute:r}=reactExports.useContext(RouteContext);return r?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let r=reactExports.useContext(DataRouterContext),{basename:e,navigator:t}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),c=JSON.stringify(getResolveToMatches(a)),d=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{d.current=!0}),reactExports.useCallback((_,S={})=>{if(warning(d.current,navigateEffectWarning),!d.current)return;if(typeof _=="number"){t.go(_);return}let A=resolveTo(_,JSON.parse(c),o,S.relative==="path");r==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:joinPaths([e,A.pathname])),(S.replace?t.replace:t.push)(A,S.state,S)},[e,t,c,o,r])}reactExports.createContext(null);function useResolvedPath(r,{relative:e}={}){let{matches:t}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(t));return reactExports.useMemo(()=>resolveTo(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function useRoutesImpl(r,e,t,a,o){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=reactExports.useContext(NavigationContext),{matches:d}=reactExports.useContext(RouteContext),p=d[d.length-1],_=p?p.params:{},S=p?p.pathname:"/",A=p?p.pathnameBase:"/",C=p&&p.route;{let Ne=C&&C.path||"";warningOnce(S,!C||Ne.endsWith("*")||Ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${S}" (under <Route path="${Ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Ne}"> to <Route path="${Ne==="/"?"*":`${Ne}/*`}">.`)}let j=useLocation(),V;V=j;let J=V.pathname||"/",re=J;if(A!=="/"){let Ne=A.replace(/^\//,"").split("/");re="/"+J.replace(/^\//,"").split("/").slice(Ne.length).join("/")}let ie=matchRoutes(r,{pathname:re});return warning(C||ie!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),warning(ie==null||ie[ie.length-1].route.element!==void 0||ie[ie.length-1].route.Component!==void 0||ie[ie.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(ie&&ie.map(Ne=>Object.assign({},Ne,{params:Object.assign({},_,Ne.params),pathname:joinPaths([A,c.encodeLocation?c.encodeLocation(Ne.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Ne.pathname]),pathnameBase:Ne.pathnameBase==="/"?A:joinPaths([A,c.encodeLocation?c.encodeLocation(Ne.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Ne.pathnameBase])})),d,t,a,o)}function DefaultErrorComponent(){let r=useRouteError(),e=isRouteErrorResponse(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:c},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:c},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:o},t):null,d)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:r,match:e,children:t}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:r},t)}function _renderMatches(r,e=[],t=null,a=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let c=r,d=t?.errors;if(d!=null){let S=c.findIndex(A=>A.route.id&&d?.[A.route.id]!==void 0);invariant(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,S+1))}let p=!1,_=-1;if(t)for(let S=0;S<c.length;S++){let A=c[S];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(_=S),A.route.id){let{loaderData:C,errors:j}=t,V=A.route.loader&&!C.hasOwnProperty(A.route.id)&&(!j||j[A.route.id]===void 0);if(A.route.lazy||V){p=!0,_>=0?c=c.slice(0,_+1):c=[c[0]];break}}}return c.reduceRight((S,A,C)=>{let j,V=!1,J=null,re=null;t&&(j=d&&A.route.id?d[A.route.id]:void 0,J=A.route.errorElement||defaultErrorElement,p&&(_<0&&C===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,re=null):_===C&&(V=!0,re=A.route.hydrateFallbackElement||null)));let ie=e.concat(c.slice(0,C+1)),K=()=>{let Ne;return j?Ne=J:V?Ne=re:A.route.Component?Ne=reactExports.createElement(A.route.Component,null):A.route.element?Ne=A.route.element:Ne=S,reactExports.createElement(RenderedRoute,{match:A,routeContext:{outlet:S,matches:ie,isDataRoute:t!=null},children:Ne})};return t&&(A.route.ErrorBoundary||A.route.errorElement||C===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:J,error:j,children:K(),routeContext:{outlet:null,matches:ie,isDataRoute:!0},unstable_onError:a}):K()},null)}function getDataRouterConsoleError(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(r)),e}function useDataRouterState(r){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(r)),e}function useRouteContext(r){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(r)),e}function useCurrentRouteId(r){let e=useRouteContext(r),t=e.matches[e.matches.length-1];return invariant(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let r=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),t=useCurrentRouteId("useRouteError");return r!==void 0?r:e.errors?.[t]}function useNavigateStable(){let{router:r}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{t.current=!0}),reactExports.useCallback(async(o,c={})=>{warning(t.current,navigateEffectWarning),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var alreadyWarned={};function warningOnce(r,e,t){!e&&!alreadyWarned[r]&&(alreadyWarned[r]=!0,warning(!1,t))}reactExports.memo(DataRoutes);function DataRoutes({routes:r,future:e,state:t,unstable_onError:a}){return useRoutesImpl(r,void 0,t,a,e)}function Router({basename:r="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:c=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),p=reactExports.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof t=="string"&&(t=parsePath(t));let{pathname:_="/",search:S="",hash:A="",state:C=null,key:j="default"}=t,V=reactExports.useMemo(()=>{let J=stripBasename(_,d);return J==null?null:{location:{pathname:J,search:S,hash:A,state:C,key:j},navigationType:a}},[d,_,S,A,C,j,a]);return warning(V!=null,`<Router basename="${d}"> is not able to match the URL "${_}${S}${A}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:reactExports.createElement(NavigationContext.Provider,{value:p},reactExports.createElement(LocationContext.Provider,{children:e,value:V}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(r){return r!=null&&typeof r.tagName=="string"}function isButtonElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="button"}function isFormElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="form"}function isInputElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="input"}function isModifiedEvent(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function shouldProcessLinkClick(r,e){return r.button===0&&(!e||e==="_self")&&!isModifiedEvent(r)}function createSearchParams(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let a=r[t];return e.concat(Array.isArray(a)?a.map(o=>[t,o]):[[t,a]])},[]))}function getSearchParamsForLocation(r,e){let t=createSearchParams(r);return e&&e.forEach((a,o)=>{t.has(o)||e.getAll(o).forEach(c=>{t.append(o,c)})}),t}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(r){return r!=null&&!supportedFormEncTypes.has(r)?(warning(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):r}function getFormSubmissionInfo(r,e){let t,a,o,c,d;if(isFormElement(r)){let p=r.getAttribute("action");a=p?stripBasename(p,e):null,t=r.getAttribute("method")||defaultMethod,o=getFormEncType(r.getAttribute("enctype"))||defaultEncType,c=new FormData(r)}else if(isButtonElement(r)||isInputElement(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=r.getAttribute("formaction")||p.getAttribute("action");if(a=_?stripBasename(_,e):null,t=r.getAttribute("formmethod")||p.getAttribute("method")||defaultMethod,o=getFormEncType(r.getAttribute("formenctype"))||getFormEncType(p.getAttribute("enctype"))||defaultEncType,c=new FormData(p,r),!isFormDataSubmitterSupported()){let{name:S,type:A,value:C}=r;if(A==="image"){let j=S?`${S}.`:"";c.append(`${j}x`,"0"),c.append(`${j}y`,"0")}else S&&c.append(S,C)}}else{if(isHtmlElement(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=defaultMethod,a=null,o=defaultEncType,d=r}return c&&o==="text/plain"&&(d=c,c=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function singleFetchUrl(r,e,t){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&stripBasename(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function loadRouteModule(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function getKeyedPrefetchLinks(r,e,t){let a=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await loadRouteModule(c,t);return d.links?d.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function getNewMatchesForLinks(r,e,t,a,o,c){let d=(_,S)=>t[S]?_.route.id!==t[S].route.id:!0,p=(_,S)=>t[S].pathname!==_.pathname||t[S].route.path?.endsWith("*")&&t[S].params["*"]!==_.params["*"];return c==="assets"?e.filter((_,S)=>d(_,S)||p(_,S)):c==="data"?e.filter((_,S)=>{let A=a.routes[_.route.id];if(!A||!A.hasLoader)return!1;if(d(_,S)||p(_,S))return!0;if(_.route.shouldRevalidate){let C=_.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function getModuleLinkHrefs(r,e,{includeHydrateFallback:t}={}){return dedupeHrefs(r.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function dedupeHrefs(r){return[...new Set(r)]}function sortKeys(r){let e={},t=Object.keys(r).sort();for(let a of t)e[a]=r[a];return e}function dedupeLinkDescriptors(r,e){let t=new Set;return new Set(e),r.reduce((a,o)=>{let c=JSON.stringify(sortKeys(o));return t.has(c)||(t.add(c),a.push({key:c,link:o})),a},[])}function useDataRouterContext2(){let r=reactExports.useContext(DataRouterContext);return invariant2(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function useDataRouterStateContext(){let r=reactExports.useContext(DataRouterStateContext);return invariant2(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let r=reactExports.useContext(FrameworkContext);return invariant2(r,"You must render this element inside a <HydratedRouter> element"),r}function usePrefetchBehavior(r,e){let t=reactExports.useContext(FrameworkContext),[a,o]=reactExports.useState(!1),[c,d]=reactExports.useState(!1),{onFocus:p,onBlur:_,onMouseEnter:S,onMouseLeave:A,onTouchStart:C}=e,j=reactExports.useRef(null);reactExports.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let re=K=>{K.forEach(Ne=>{d(Ne.isIntersecting)})},ie=new IntersectionObserver(re,{threshold:.5});return j.current&&ie.observe(j.current),()=>{ie.disconnect()}}},[r]),reactExports.useEffect(()=>{if(a){let re=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(re)}}},[a]);let V=()=>{o(!0)},J=()=>{o(!1),d(!1)};return t?r!=="intent"?[c,j,{}]:[c,j,{onFocus:composeEventHandlers(p,V),onBlur:composeEventHandlers(_,J),onMouseEnter:composeEventHandlers(S,V),onMouseLeave:composeEventHandlers(A,J),onTouchStart:composeEventHandlers(C,V)}]:[!1,j,{}]}function composeEventHandlers(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function PrefetchPageLinks({page:r,...e}){let{router:t}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(t.routes,r,t.basename),[t.routes,r,t.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:r,matches:a,...e}):null}function useKeyedPrefetchLinks(r){let{manifest:e,routeModules:t}=useFrameworkContext(),[a,o]=reactExports.useState([]);return reactExports.useEffect(()=>{let c=!1;return getKeyedPrefetchLinks(r,e,t).then(d=>{c||o(d)}),()=>{c=!0}},[r,e,t]),a}function PrefetchPageLinksImpl({page:r,matches:e,...t}){let a=useLocation(),{manifest:o,routeModules:c}=useFrameworkContext(),{basename:d}=useDataRouterContext2(),{loaderData:p,matches:_}=useDataRouterStateContext(),S=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,_,o,a,"data"),[r,e,_,o,a]),A=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,_,o,a,"assets"),[r,e,_,o,a]),C=reactExports.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let J=new Set,re=!1;if(e.forEach(K=>{let Ne=o.routes[K.route.id];!Ne||!Ne.hasLoader||(!S.some(G=>G.route.id===K.route.id)&&K.route.id in p&&c[K.route.id]?.shouldRevalidate||Ne.hasClientLoader?re=!0:J.add(K.route.id))}),J.size===0)return[];let ie=singleFetchUrl(r,d,"data");return re&&J.size>0&&ie.searchParams.set("_routes",e.filter(K=>J.has(K.route.id)).map(K=>K.route.id).join(",")),[ie.pathname+ie.search]},[d,p,a,o,S,e,r,c]),j=reactExports.useMemo(()=>getModuleLinkHrefs(A,o),[A,o]),V=useKeyedPrefetchLinks(A);return reactExports.createElement(reactExports.Fragment,null,C.map(J=>reactExports.createElement("link",{key:J,rel:"prefetch",as:"fetch",href:J,...t})),j.map(J=>reactExports.createElement("link",{key:J,rel:"modulepreload",href:J,...t})),V.map(({key:J,link:re})=>reactExports.createElement("link",{key:J,nonce:t.nonce,...re})))}function mergeRefs(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.4")}catch{}function HashRouter({basename:r,children:e,window:t}){let a=reactExports.useRef();a.current==null&&(a.current=createHashHistory({window:t,v5Compat:!0}));let o=a.current,[c,d]=reactExports.useState({action:o.action,location:o.location}),p=reactExports.useCallback(_=>{reactExports.startTransition(()=>d(_))},[d]);return reactExports.useLayoutEffect(()=>o.listen(p),[o,p]),reactExports.createElement(Router,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:c,replace:d,state:p,target:_,to:S,preventScrollReset:A,viewTransition:C,...j},V){let{basename:J}=reactExports.useContext(NavigationContext),re=typeof S=="string"&&ABSOLUTE_URL_REGEX2.test(S),ie,K=!1;if(typeof S=="string"&&re&&(ie=S,isBrowser))try{let ta=new URL(window.location.href),pn=S.startsWith("//")?new URL(ta.protocol+S):new URL(S),mr=stripBasename(pn.pathname,J);pn.origin===ta.origin&&mr!=null?S=mr+pn.search+pn.hash:K=!0}catch{warning(!1,`<Link to="${S}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Ne=useHref(S,{relative:o}),[G,se,He]=usePrefetchBehavior(a,j),Fe=useLinkClickHandler(S,{replace:d,state:p,target:_,preventScrollReset:A,relative:o,viewTransition:C});function Xe(ta){e&&e(ta),ta.defaultPrevented||Fe(ta)}let be=reactExports.createElement("a",{...j,...He,href:ie||Ne,onClick:K||c?e:Xe,ref:mergeRefs(V,se),target:_,"data-discover":!re&&t==="render"?"true":void 0});return G&&!re?reactExports.createElement(reactExports.Fragment,null,be,reactExports.createElement(PrefetchPageLinks,{page:Ne})):be});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:c,to:d,viewTransition:p,children:_,...S},A){let C=useResolvedPath(d,{relative:S.relative}),j=useLocation(),V=reactExports.useContext(DataRouterStateContext),{navigator:J,basename:re}=reactExports.useContext(NavigationContext),ie=V!=null&&useViewTransitionState(C)&&p===!0,K=J.encodeLocation?J.encodeLocation(C).pathname:C.pathname,Ne=j.pathname,G=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||(Ne=Ne.toLowerCase(),G=G?G.toLowerCase():null,K=K.toLowerCase()),G&&re&&(G=stripBasename(G,re)||G);const se=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let He=Ne===K||!o&&Ne.startsWith(K)&&Ne.charAt(se)==="/",Fe=G!=null&&(G===K||!o&&G.startsWith(K)&&G.charAt(K.length)==="/"),Xe={isActive:He,isPending:Fe,isTransitioning:ie},be=He?e:void 0,ta;typeof a=="function"?ta=a(Xe):ta=[a,He?"active":null,Fe?"pending":null,ie?"transitioning":null].filter(Boolean).join(" ");let pn=typeof c=="function"?c(Xe):c;return reactExports.createElement(Link,{...S,"aria-current":be,className:ta,ref:A,style:pn,to:d,viewTransition:p},typeof _=="function"?_(Xe):_)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:c,method:d=defaultMethod,action:p,onSubmit:_,relative:S,preventScrollReset:A,viewTransition:C,...j},V)=>{let J=useSubmit(),re=useFormAction(p,{relative:S}),ie=d.toLowerCase()==="get"?"get":"post",K=typeof p=="string"&&ABSOLUTE_URL_REGEX2.test(p),Ne=G=>{if(_&&_(G),G.defaultPrevented)return;G.preventDefault();let se=G.nativeEvent.submitter,He=se?.getAttribute("formmethod")||d;J(se||G.currentTarget,{fetcherKey:e,method:He,navigate:t,replace:o,state:c,relative:S,preventScrollReset:A,viewTransition:C})};return reactExports.createElement("form",{ref:V,method:ie,action:re,onSubmit:a?_:Ne,...j,"data-discover":!K&&r==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(r)),e}function useLinkClickHandler(r,{target:e,replace:t,state:a,preventScrollReset:o,relative:c,viewTransition:d}={}){let p=useNavigate(),_=useLocation(),S=useResolvedPath(r,{relative:c});return reactExports.useCallback(A=>{if(shouldProcessLinkClick(A,e)){A.preventDefault();let C=t!==void 0?t:createPath(_)===createPath(S);p(r,{replace:C,state:a,preventScrollReset:o,relative:c,viewTransition:d})}},[_,p,S,t,a,e,r,o,c,d])}function useSearchParams(r){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=reactExports.useRef(createSearchParams(r)),t=reactExports.useRef(!1),a=useLocation(),o=reactExports.useMemo(()=>getSearchParamsForLocation(a.search,t.current?null:e.current),[a.search]),c=useNavigate(),d=reactExports.useCallback((p,_)=>{const S=createSearchParams(typeof p=="function"?p(new URLSearchParams(o)):p);t.current=!0,c("?"+S,_)},[c,o]);return[o,d]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:r}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),t=useRouteId();return reactExports.useCallback(async(a,o={})=>{let{action:c,method:d,encType:p,formData:_,body:S}=getFormSubmissionInfo(a,e);if(o.navigate===!1){let A=o.fetcherKey||getUniqueFetcherId();await r.fetch(A,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:_,body:S,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:_,body:S,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function useFormAction(r,{relative:e}={}){let{basename:t}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...useResolvedPath(r||".",{relative:e})},d=useLocation();if(r==null){c.search=d.search;let p=new URLSearchParams(c.search),_=p.getAll("index");if(_.some(A=>A==="")){p.delete("index"),_.filter(C=>C).forEach(C=>p.append("index",C));let A=p.toString();c.search=A?`?${A}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:joinPaths([t,c.pathname])),createPath(c)}function useViewTransitionState(r,{relative:e}={}){let t=reactExports.useContext(ViewTransitionContext);invariant(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),o=useResolvedPath(r,{relative:e});if(!t.isTransitioning)return!1;let c=stripBasename(t.currentLocation.pathname,a)||t.currentLocation.pathname,d=stripBasename(t.nextLocation.pathname,a)||t.nextLocation.pathname;return matchPath(o.pathname,d)!=null||matchPath(o.pathname,c)!=null}var reactDomExports=requireReactDom();const PanelGroupContext=reactExports.createContext(null);PanelGroupContext.displayName="PanelGroupContext";const DATA_ATTRIBUTES={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},PRECISION=10,useIsomorphicLayoutEffect=reactExports.useLayoutEffect,useId=React$1.useId,wrappedUseId=typeof useId=="function"?useId:()=>null;let counter=0;function useUniqueId(r=null){const e=wrappedUseId(),t=reactExports.useRef(r||e||null);return t.current===null&&(t.current=""+counter++),r??t.current}function PanelWithForwardedRef({children:r,className:e="",collapsedSize:t,collapsible:a,defaultSize:o,forwardedRef:c,id:d,maxSize:p,minSize:_,onCollapse:S,onExpand:A,onResize:C,order:j,style:V,tagName:J="div",...re}){const ie=reactExports.useContext(PanelGroupContext);if(ie===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:K,expandPanel:Ne,getPanelSize:G,getPanelStyle:se,groupId:He,isPanelCollapsed:Fe,reevaluatePanelConstraints:Xe,registerPanel:be,resizePanel:ta,unregisterPanel:pn}=ie,mr=useUniqueId(d),bp=reactExports.useRef({callbacks:{onCollapse:S,onExpand:A,onResize:C},constraints:{collapsedSize:t,collapsible:a,defaultSize:o,maxSize:p,minSize:_},id:mr,idIsFromProps:d!==void 0,order:j});reactExports.useRef({didLogMissingDefaultSizeWarning:!1}),useIsomorphicLayoutEffect(()=>{const{callbacks:_r,constraints:xs}=bp.current,ne={...xs};bp.current.id=mr,bp.current.idIsFromProps=d!==void 0,bp.current.order=j,_r.onCollapse=S,_r.onExpand=A,_r.onResize=C,xs.collapsedSize=t,xs.collapsible=a,xs.defaultSize=o,xs.maxSize=p,xs.minSize=_,(ne.collapsedSize!==xs.collapsedSize||ne.collapsible!==xs.collapsible||ne.maxSize!==xs.maxSize||ne.minSize!==xs.minSize)&&Xe(bp.current,ne)}),useIsomorphicLayoutEffect(()=>{const _r=bp.current;return be(_r),()=>{pn(_r)}},[j,mr,be,pn]),reactExports.useImperativeHandle(c,()=>({collapse:()=>{K(bp.current)},expand:_r=>{Ne(bp.current,_r)},getId(){return mr},getSize(){return G(bp.current)},isCollapsed(){return Fe(bp.current)},isExpanded(){return!Fe(bp.current)},resize:_r=>{ta(bp.current,_r)}}),[K,Ne,G,Fe,mr,ta]);const Sp=se(bp.current,o);return reactExports.createElement(J,{...re,children:r,className:e,id:mr,style:{...Sp,...V},[DATA_ATTRIBUTES.groupId]:He,[DATA_ATTRIBUTES.panel]:"",[DATA_ATTRIBUTES.panelCollapsible]:a||void 0,[DATA_ATTRIBUTES.panelId]:mr,[DATA_ATTRIBUTES.panelSize]:parseFloat(""+Sp.flexGrow).toFixed(1)})}const Panel$1=reactExports.forwardRef((r,e)=>reactExports.createElement(PanelWithForwardedRef,{...r,forwardedRef:e}));PanelWithForwardedRef.displayName="Panel";Panel$1.displayName="forwardRef(Panel)";let currentCursorStyle=null,prevRuleIndex=-1,styleElement=null;function getCursorStyle(r,e,t){const a=(e&EXCEEDED_HORIZONTAL_MIN)!==0,o=(e&EXCEEDED_HORIZONTAL_MAX)!==0,c=(e&EXCEEDED_VERTICAL_MIN)!==0,d=(e&EXCEEDED_VERTICAL_MAX)!==0;if(e){if(a)return c?"se-resize":d?"ne-resize":"e-resize";if(o)return c?"sw-resize":d?"nw-resize":"w-resize";if(c)return"s-resize";if(d)return"n-resize"}switch(r){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function resetGlobalCursorStyle(){styleElement!==null&&(document.head.removeChild(styleElement),currentCursorStyle=null,styleElement=null,prevRuleIndex=-1)}function setGlobalCursorStyle(r,e,t){var a,o;const c=getCursorStyle(r,e);if(currentCursorStyle!==c){if(currentCursorStyle=c,styleElement===null&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),prevRuleIndex>=0){var d;(d=styleElement.sheet)===null||d===void 0||d.removeRule(prevRuleIndex)}prevRuleIndex=(a=(o=styleElement.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${c} !important;}`))!==null&&a!==void 0?a:-1}}function isKeyDown(r){return r.type==="keydown"}function isPointerEvent(r){return r.type.startsWith("pointer")}function isMouseEvent$1(r){return r.type.startsWith("mouse")}function getResizeEventCoordinates(r){if(isPointerEvent(r)){if(r.isPrimary)return{x:r.clientX,y:r.clientY}}else if(isMouseEvent$1(r))return{x:r.clientX,y:r.clientY};return{x:1/0,y:1/0}}function getInputType(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function intersects(r,e,t){return r.x<e.x+e.width&&r.x+r.width>e.x&&r.y<e.y+e.height&&r.y+r.height>e.y}function compare(r,e){if(r===e)throw new Error("Cannot compare node with itself");const t={a:get_ancestors(r),b:get_ancestors(e)};let a;for(;t.a.at(-1)===t.b.at(-1);)r=t.a.pop(),e=t.b.pop(),a=r;assert(a,"Stacking order can only be calculated for elements with a common ancestor");const o={a:get_z_index(find_stacking_context(t.a)),b:get_z_index(find_stacking_context(t.b))};if(o.a===o.b){const c=a.childNodes,d={a:t.a.at(-1),b:t.b.at(-1)};let p=c.length;for(;p--;){const _=c[p];if(_===d.a)return 1;if(_===d.b)return-1}}return Math.sign(o.a-o.b)}const props=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function is_flex_item(r){var e;const t=getComputedStyle((e=get_parent(r))!==null&&e!==void 0?e:r).display;return t==="flex"||t==="inline-flex"}function creates_stacking_context(r){const e=getComputedStyle(r);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||is_flex_item(r))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||props.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function find_stacking_context(r){let e=r.length;for(;e--;){const t=r[e];if(assert(t,"Missing node"),creates_stacking_context(t))return t}return null}function get_z_index(r){return r&&Number(getComputedStyle(r).zIndex)||0}function get_ancestors(r){const e=[];for(;r;)e.push(r),r=get_parent(r);return e}function get_parent(r){const{parentNode:e}=r;return e&&e instanceof ShadowRoot?e.host:e}const EXCEEDED_HORIZONTAL_MIN=1,EXCEEDED_HORIZONTAL_MAX=2,EXCEEDED_VERTICAL_MIN=4,EXCEEDED_VERTICAL_MAX=8,isCoarsePointer=getInputType()==="coarse";let intersectingHandles=[],isPointerDown=!1,ownerDocumentCounts=new Map,panelConstraintFlags=new Map;const registeredResizeHandlers=new Set;function registerResizeHandle(r,e,t,a,o){var c;const{ownerDocument:d}=e,p={direction:t,element:e,hitAreaMargins:a,setResizeHandlerState:o},_=(c=ownerDocumentCounts.get(d))!==null&&c!==void 0?c:0;return ownerDocumentCounts.set(d,_+1),registeredResizeHandlers.add(p),updateListeners(),function(){var A;panelConstraintFlags.delete(r),registeredResizeHandlers.delete(p);const C=(A=ownerDocumentCounts.get(d))!==null&&A!==void 0?A:1;if(ownerDocumentCounts.set(d,C-1),updateListeners(),C===1&&ownerDocumentCounts.delete(d),intersectingHandles.includes(p)){const j=intersectingHandles.indexOf(p);j>=0&&intersectingHandles.splice(j,1),updateCursor(),o("up",!0,null)}}}function handlePointerDown$1(r){const{target:e}=r,{x:t,y:a}=getResizeEventCoordinates(r);isPointerDown=!0,recalculateIntersectingHandles({target:e,x:t,y:a}),updateListeners(),intersectingHandles.length>0&&(updateResizeHandlerStates("down",r),updateCursor(),r.preventDefault(),isWithinResizeHandle(e)||r.stopImmediatePropagation())}function handlePointerMove(r){const{x:e,y:t}=getResizeEventCoordinates(r);if(isPointerDown&&r.type!=="pointerleave"&&r.buttons===0&&(isPointerDown=!1,updateResizeHandlerStates("up",r)),!isPointerDown){const{target:a}=r;recalculateIntersectingHandles({target:a,x:e,y:t})}updateResizeHandlerStates("move",r),updateCursor(),intersectingHandles.length>0&&r.preventDefault()}function handlePointerUp(r){const{target:e}=r,{x:t,y:a}=getResizeEventCoordinates(r);panelConstraintFlags.clear(),isPointerDown=!1,intersectingHandles.length>0&&(r.preventDefault(),isWithinResizeHandle(e)||r.stopImmediatePropagation()),updateResizeHandlerStates("up",r),recalculateIntersectingHandles({target:e,x:t,y:a}),updateCursor(),updateListeners()}function isWithinResizeHandle(r){let e=r;for(;e;){if(e.hasAttribute(DATA_ATTRIBUTES.resizeHandle))return!0;e=e.parentElement}return!1}function recalculateIntersectingHandles({target:r,x:e,y:t}){intersectingHandles.splice(0);let a=null;(r instanceof HTMLElement||r instanceof SVGElement)&&(a=r),registeredResizeHandlers.forEach(o=>{const{element:c,hitAreaMargins:d}=o,p=c.getBoundingClientRect(),{bottom:_,left:S,right:A,top:C}=p,j=isCoarsePointer?d.coarse:d.fine;if(e>=S-j&&e<=A+j&&t>=C-j&&t<=_+j){if(a!==null&&document.contains(a)&&c!==a&&!c.contains(a)&&!a.contains(c)&&compare(a,c)>0){let J=a,re=!1;for(;J&&!J.contains(c);){if(intersects(J.getBoundingClientRect(),p)){re=!0;break}J=J.parentElement}if(re)return}intersectingHandles.push(o)}})}function reportConstraintsViolation(r,e){panelConstraintFlags.set(r,e)}function updateCursor(){let r=!1,e=!1;intersectingHandles.forEach(a=>{const{direction:o}=a;o==="horizontal"?r=!0:e=!0});let t=0;panelConstraintFlags.forEach(a=>{t|=a}),r&&e?setGlobalCursorStyle("intersection",t):r?setGlobalCursorStyle("horizontal",t):e?setGlobalCursorStyle("vertical",t):resetGlobalCursorStyle()}let listenersAbortController;function updateListeners(){var r;(r=listenersAbortController)===null||r===void 0||r.abort(),listenersAbortController=new AbortController;const e={capture:!0,signal:listenersAbortController.signal};registeredResizeHandlers.size&&(isPointerDown?(intersectingHandles.length>0&&ownerDocumentCounts.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("contextmenu",handlePointerUp,e),o.addEventListener("pointerleave",handlePointerMove,e),o.addEventListener("pointermove",handlePointerMove,e))}),ownerDocumentCounts.forEach((t,a)=>{const{body:o}=a;o.addEventListener("pointerup",handlePointerUp,e),o.addEventListener("pointercancel",handlePointerUp,e)})):ownerDocumentCounts.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("pointerdown",handlePointerDown$1,e),o.addEventListener("pointermove",handlePointerMove,e))}))}function updateResizeHandlerStates(r,e){registeredResizeHandlers.forEach(t=>{const{setResizeHandlerState:a}=t,o=intersectingHandles.includes(t);a(r,o,e)})}function useForceUpdate(){const[r,e]=reactExports.useState(0);return reactExports.useCallback(()=>e(t=>t+1),[])}function assert(r,e){if(!r)throw console.error(e),Error(e)}function fuzzyCompareNumbers(r,e,t=PRECISION){return r.toFixed(t)===e.toFixed(t)?0:r>e?1:-1}function fuzzyNumbersEqual$1(r,e,t=PRECISION){return fuzzyCompareNumbers(r,e,t)===0}function fuzzyNumbersEqual(r,e,t){return fuzzyCompareNumbers(r,e,t)===0}function fuzzyLayoutsEqual(r,e,t){if(r.length!==e.length)return!1;for(let a=0;a<r.length;a++){const o=r[a],c=e[a];if(!fuzzyNumbersEqual(o,c,t))return!1}return!0}function resizePanel({panelConstraints:r,panelIndex:e,size:t}){const a=r[e];assert(a!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:o=0,collapsible:c,maxSize:d=100,minSize:p=0}=a;if(fuzzyCompareNumbers(t,p)<0)if(c){const _=(o+p)/2;fuzzyCompareNumbers(t,_)<0?t=o:t=p}else t=p;return t=Math.min(d,t),t=parseFloat(t.toFixed(PRECISION)),t}function adjustLayoutByDelta({delta:r,initialLayout:e,panelConstraints:t,pivotIndices:a,prevLayout:o,trigger:c}){if(fuzzyNumbersEqual(r,0))return e;const d=[...e],[p,_]=a;assert(p!=null,"Invalid first pivot index"),assert(_!=null,"Invalid second pivot index");let S=0;if(c==="keyboard"){{const C=r<0?_:p,j=t[C];assert(j,`Panel constraints not found for index ${C}`);const{collapsedSize:V=0,collapsible:J,minSize:re=0}=j;if(J){const ie=e[C];if(assert(ie!=null,`Previous layout not found for panel index ${C}`),fuzzyNumbersEqual(ie,V)){const K=re-ie;fuzzyCompareNumbers(K,Math.abs(r))>0&&(r=r<0?0-K:K)}}}{const C=r<0?p:_,j=t[C];assert(j,`No panel constraints found for index ${C}`);const{collapsedSize:V=0,collapsible:J,minSize:re=0}=j;if(J){const ie=e[C];if(assert(ie!=null,`Previous layout not found for panel index ${C}`),fuzzyNumbersEqual(ie,re)){const K=ie-V;fuzzyCompareNumbers(K,Math.abs(r))>0&&(r=r<0?0-K:K)}}}}{const C=r<0?1:-1;let j=r<0?_:p,V=0;for(;;){const re=e[j];assert(re!=null,`Previous layout not found for panel index ${j}`);const K=resizePanel({panelConstraints:t,panelIndex:j,size:100})-re;if(V+=K,j+=C,j<0||j>=t.length)break}const J=Math.min(Math.abs(r),Math.abs(V));r=r<0?0-J:J}{let j=r<0?p:_;for(;j>=0&&j<t.length;){const V=Math.abs(r)-Math.abs(S),J=e[j];assert(J!=null,`Previous layout not found for panel index ${j}`);const re=J-V,ie=resizePanel({panelConstraints:t,panelIndex:j,size:re});if(!fuzzyNumbersEqual(J,ie)&&(S+=J-ie,d[j]=ie,S.toFixed(3).localeCompare(Math.abs(r).toFixed(3),void 0,{numeric:!0})>=0))break;r<0?j--:j++}}if(fuzzyLayoutsEqual(o,d))return o;{const C=r<0?_:p,j=e[C];assert(j!=null,`Previous layout not found for panel index ${C}`);const V=j+S,J=resizePanel({panelConstraints:t,panelIndex:C,size:V});if(d[C]=J,!fuzzyNumbersEqual(J,V)){let re=V-J,K=r<0?_:p;for(;K>=0&&K<t.length;){const Ne=d[K];assert(Ne!=null,`Previous layout not found for panel index ${K}`);const G=Ne+re,se=resizePanel({panelConstraints:t,panelIndex:K,size:G});if(fuzzyNumbersEqual(Ne,se)||(re-=se-Ne,d[K]=se),fuzzyNumbersEqual(re,0))break;r>0?K--:K++}}}const A=d.reduce((C,j)=>j+C,0);return fuzzyNumbersEqual(A,100)?d:o}function calculateAriaValues({layout:r,panelsArray:e,pivotIndices:t}){let a=0,o=100,c=0,d=0;const p=t[0];assert(p!=null,"No pivot index found"),e.forEach((C,j)=>{const{constraints:V}=C,{maxSize:J=100,minSize:re=0}=V;j===p?(a=re,o=J):(c+=re,d+=J)});const _=Math.min(o,100-c),S=Math.max(a,100-d),A=r[p];return{valueMax:_,valueMin:S,valueNow:A}}function getResizeHandleElementsForGroup(r,e=document){return Array.from(e.querySelectorAll(`[${DATA_ATTRIBUTES.resizeHandleId}][data-panel-group-id="${r}"]`))}function getResizeHandleElementIndex(r,e,t=document){const o=getResizeHandleElementsForGroup(r,t).findIndex(c=>c.getAttribute(DATA_ATTRIBUTES.resizeHandleId)===e);return o??null}function determinePivotIndices(r,e,t){const a=getResizeHandleElementIndex(r,e,t);return a!=null?[a,a+1]:[-1,-1]}function isHTMLElement(r){return r instanceof HTMLElement?!0:typeof r=="object"&&r!==null&&"tagName"in r&&"getAttribute"in r}function getPanelGroupElement(r,e=document){if(isHTMLElement(e)&&e.dataset.panelGroupId==r)return e;const t=e.querySelector(`[data-panel-group][data-panel-group-id="${r}"]`);return t||null}function getResizeHandleElement(r,e=document){const t=e.querySelector(`[${DATA_ATTRIBUTES.resizeHandleId}="${r}"]`);return t||null}function getResizeHandlePanelIds(r,e,t,a=document){var o,c,d,p;const _=getResizeHandleElement(e,a),S=getResizeHandleElementsForGroup(r,a),A=_?S.indexOf(_):-1,C=(o=(c=t[A])===null||c===void 0?void 0:c.id)!==null&&o!==void 0?o:null,j=(d=(p=t[A+1])===null||p===void 0?void 0:p.id)!==null&&d!==void 0?d:null;return[C,j]}function useWindowSplitterPanelGroupBehavior({committedValuesRef:r,eagerValuesRef:e,groupId:t,layout:a,panelDataArray:o,panelGroupElement:c,setLayout:d}){reactExports.useRef({didWarnAboutMissingResizeHandle:!1}),useIsomorphicLayoutEffect(()=>{if(!c)return;const p=getResizeHandleElementsForGroup(t,c);for(let _=0;_<o.length-1;_++){const{valueMax:S,valueMin:A,valueNow:C}=calculateAriaValues({layout:a,panelsArray:o,pivotIndices:[_,_+1]}),j=p[_];if(j!=null){const V=o[_];assert(V,`No panel data found for index "${_}"`),j.setAttribute("aria-controls",V.id),j.setAttribute("aria-valuemax",""+Math.round(S)),j.setAttribute("aria-valuemin",""+Math.round(A)),j.setAttribute("aria-valuenow",C!=null?""+Math.round(C):"")}}return()=>{p.forEach((_,S)=>{_.removeAttribute("aria-controls"),_.removeAttribute("aria-valuemax"),_.removeAttribute("aria-valuemin"),_.removeAttribute("aria-valuenow")})}},[t,a,o,c]),reactExports.useEffect(()=>{if(!c)return;const p=e.current;assert(p,"Eager values not found");const{panelDataArray:_}=p,S=getPanelGroupElement(t,c);assert(S!=null,`No group found for id "${t}"`);const A=getResizeHandleElementsForGroup(t,c);assert(A,`No resize handles found for group id "${t}"`);const C=A.map(j=>{const V=j.getAttribute(DATA_ATTRIBUTES.resizeHandleId);assert(V,"Resize handle element has no handle id attribute");const[J,re]=getResizeHandlePanelIds(t,V,_,c);if(J==null||re==null)return()=>{};const ie=K=>{if(!K.defaultPrevented)switch(K.key){case"Enter":{K.preventDefault();const Ne=_.findIndex(G=>G.id===J);if(Ne>=0){const G=_[Ne];assert(G,`No panel data found for index ${Ne}`);const se=a[Ne],{collapsedSize:He=0,collapsible:Fe,minSize:Xe=0}=G.constraints;if(se!=null&&Fe){const be=adjustLayoutByDelta({delta:fuzzyNumbersEqual(se,He)?Xe-He:He-se,initialLayout:a,panelConstraints:_.map(ta=>ta.constraints),pivotIndices:determinePivotIndices(t,V,c),prevLayout:a,trigger:"keyboard"});a!==be&&d(be)}}break}}};return j.addEventListener("keydown",ie),()=>{j.removeEventListener("keydown",ie)}});return()=>{C.forEach(j=>j())}},[c,r,e,t,a,o,d])}function areEqual$1(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function getResizeEventCursorPosition(r,e){const t=r==="horizontal",{x:a,y:o}=getResizeEventCoordinates(e);return t?a:o}function calculateDragOffsetPercentage(r,e,t,a,o){const c=t==="horizontal",d=getResizeHandleElement(e,o);assert(d,`No resize handle element found for id "${e}"`);const p=d.getAttribute(DATA_ATTRIBUTES.groupId);assert(p,"Resize handle element has no group id attribute");let{initialCursorPosition:_}=a;const S=getResizeEventCursorPosition(t,r),A=getPanelGroupElement(p,o);assert(A,`No group element found for id "${p}"`);const C=A.getBoundingClientRect(),j=c?C.width:C.height;return(S-_)/j*100}function calculateDeltaPercentage(r,e,t,a,o,c){if(isKeyDown(r)){const d=t==="horizontal";let p=0;r.shiftKey?p=100:o!=null?p=o:p=10;let _=0;switch(r.key){case"ArrowDown":_=d?0:p;break;case"ArrowLeft":_=d?-p:0;break;case"ArrowRight":_=d?p:0;break;case"ArrowUp":_=d?0:-p;break;case"End":_=100;break;case"Home":_=-100;break}return _}else return a==null?0:calculateDragOffsetPercentage(r,e,t,a,c)}function calculateUnsafeDefaultLayout({panelDataArray:r}){const e=Array(r.length),t=r.map(c=>c.constraints);let a=0,o=100;for(let c=0;c<r.length;c++){const d=t[c];assert(d,`Panel constraints not found for index ${c}`);const{defaultSize:p}=d;p!=null&&(a++,e[c]=p,o-=p)}for(let c=0;c<r.length;c++){const d=t[c];assert(d,`Panel constraints not found for index ${c}`);const{defaultSize:p}=d;if(p!=null)continue;const _=r.length-a,S=o/_;a++,e[c]=S,o-=S}return e}function callPanelCallbacks(r,e,t){e.forEach((a,o)=>{const c=r[o];assert(c,`Panel data not found for index ${o}`);const{callbacks:d,constraints:p,id:_}=c,{collapsedSize:S=0,collapsible:A}=p,C=t[_];if(C==null||a!==C){t[_]=a;const{onCollapse:j,onExpand:V,onResize:J}=d;J&&J(a,C),A&&(j||V)&&(V&&(C==null||fuzzyNumbersEqual$1(C,S))&&!fuzzyNumbersEqual$1(a,S)&&V(),j&&(C==null||!fuzzyNumbersEqual$1(C,S))&&fuzzyNumbersEqual$1(a,S)&&j())}})}function compareLayouts(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t])return!1;return!0}function computePanelFlexBoxStyle({defaultSize:r,dragState:e,layout:t,panelData:a,panelIndex:o,precision:c=3}){const d=t[o];let p;return d==null?p=r!=null?r.toFixed(c):"1":a.length===1?p="1":p=d.toFixed(c),{flexBasis:0,flexGrow:p,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function debounce(r,e=10){let t=null;return(...o)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{r(...o)},e)}}function initializeDefaultStorage(r){try{if(typeof localStorage<"u")r.getItem=e=>localStorage.getItem(e),r.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),r.getItem=()=>null,r.setItem=()=>{}}}function getPanelGroupKey(r){return`react-resizable-panels:${r}`}function getPanelKey(r){return r.map(e=>{const{constraints:t,id:a,idIsFromProps:o,order:c}=e;return o?a:c?`${c}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function loadSerializedPanelGroupState(r,e){try{const t=getPanelGroupKey(r),a=e.getItem(t);if(a){const o=JSON.parse(a);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function loadPanelGroupState(r,e,t){var a,o;const c=(a=loadSerializedPanelGroupState(r,t))!==null&&a!==void 0?a:{},d=getPanelKey(e);return(o=c[d])!==null&&o!==void 0?o:null}function savePanelGroupState(r,e,t,a,o){var c;const d=getPanelGroupKey(r),p=getPanelKey(e),_=(c=loadSerializedPanelGroupState(r,o))!==null&&c!==void 0?c:{};_[p]={expandToSizes:Object.fromEntries(t.entries()),layout:a};try{o.setItem(d,JSON.stringify(_))}catch(S){console.error(S)}}function validatePanelGroupLayout({layout:r,panelConstraints:e}){const t=[...r],a=t.reduce((c,d)=>c+d,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(c=>`${c}%`).join(", ")}`);if(!fuzzyNumbersEqual(a,100)&&t.length>0)for(let c=0;c<e.length;c++){const d=t[c];assert(d!=null,`No layout data found for index ${c}`);const p=100/a*d;t[c]=p}let o=0;for(let c=0;c<e.length;c++){const d=t[c];assert(d!=null,`No layout data found for index ${c}`);const p=resizePanel({panelConstraints:e,panelIndex:c,size:d});d!=p&&(o+=d-p,t[c]=p)}if(!fuzzyNumbersEqual(o,0))for(let c=0;c<e.length;c++){const d=t[c];assert(d!=null,`No layout data found for index ${c}`);const p=d+o,_=resizePanel({panelConstraints:e,panelIndex:c,size:p});if(d!==_&&(o-=_-d,t[c]=_,fuzzyNumbersEqual(o,0)))break}return t}const LOCAL_STORAGE_DEBOUNCE_INTERVAL=100,defaultStorage={getItem:r=>(initializeDefaultStorage(defaultStorage),defaultStorage.getItem(r)),setItem:(r,e)=>{initializeDefaultStorage(defaultStorage),defaultStorage.setItem(r,e)}},debounceMap={};function PanelGroupWithForwardedRef({autoSaveId:r=null,children:e,className:t="",direction:a,forwardedRef:o,id:c=null,onLayout:d=null,keyboardResizeBy:p=null,storage:_=defaultStorage,style:S,tagName:A="div",...C}){const j=useUniqueId(c),V=reactExports.useRef(null),[J,re]=reactExports.useState(null),[ie,K]=reactExports.useState([]),Ne=useForceUpdate(),G=reactExports.useRef({}),se=reactExports.useRef(new Map),He=reactExports.useRef(0),Fe=reactExports.useRef({autoSaveId:r,direction:a,dragState:J,id:j,keyboardResizeBy:p,onLayout:d,storage:_}),Xe=reactExports.useRef({layout:ie,panelDataArray:[],panelDataArrayChanged:!1});reactExports.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),reactExports.useImperativeHandle(o,()=>({getId:()=>Fe.current.id,getLayout:()=>{const{layout:qp}=Xe.current;return qp},setLayout:qp=>{const{onLayout:ci}=Fe.current,{layout:Ep,panelDataArray:o0}=Xe.current,w0=validatePanelGroupLayout({layout:qp,panelConstraints:o0.map(a0=>a0.constraints)});areEqual$1(Ep,w0)||(K(w0),Xe.current.layout=w0,ci&&ci(w0),callPanelCallbacks(o0,w0,G.current))}}),[]),useIsomorphicLayoutEffect(()=>{Fe.current.autoSaveId=r,Fe.current.direction=a,Fe.current.dragState=J,Fe.current.id=j,Fe.current.onLayout=d,Fe.current.storage=_}),useWindowSplitterPanelGroupBehavior({committedValuesRef:Fe,eagerValuesRef:Xe,groupId:j,layout:ie,panelDataArray:Xe.current.panelDataArray,setLayout:K,panelGroupElement:V.current}),reactExports.useEffect(()=>{const{panelDataArray:qp}=Xe.current;if(r){if(ie.length===0||ie.length!==qp.length)return;let ci=debounceMap[r];ci==null&&(ci=debounce(savePanelGroupState,LOCAL_STORAGE_DEBOUNCE_INTERVAL),debounceMap[r]=ci);const Ep=[...qp],o0=new Map(se.current);ci(r,Ep,o0,ie,_)}},[r,ie,_]),reactExports.useEffect(()=>{});const be=reactExports.useCallback(qp=>{const{onLayout:ci}=Fe.current,{layout:Ep,panelDataArray:o0}=Xe.current;if(qp.constraints.collapsible){const w0=o0.map(sm=>sm.constraints),{collapsedSize:a0=0,panelSize:P0,pivotIndices:am}=panelDataHelper(o0,qp,Ep);if(assert(P0!=null,`Panel size not found for panel "${qp.id}"`),!fuzzyNumbersEqual$1(P0,a0)){se.current.set(qp.id,P0);const C0=findPanelDataIndex(o0,qp)===o0.length-1?P0-a0:a0-P0,Fm=adjustLayoutByDelta({delta:C0,initialLayout:Ep,panelConstraints:w0,pivotIndices:am,prevLayout:Ep,trigger:"imperative-api"});compareLayouts(Ep,Fm)||(K(Fm),Xe.current.layout=Fm,ci&&ci(Fm),callPanelCallbacks(o0,Fm,G.current))}}},[]),ta=reactExports.useCallback((qp,ci)=>{const{onLayout:Ep}=Fe.current,{layout:o0,panelDataArray:w0}=Xe.current;if(qp.constraints.collapsible){const a0=w0.map(Zm=>Zm.constraints),{collapsedSize:P0=0,panelSize:am=0,minSize:sm=0,pivotIndices:C0}=panelDataHelper(w0,qp,o0),Fm=ci??sm;if(fuzzyNumbersEqual$1(am,P0)){const Zm=se.current.get(qp.id),p1=Zm!=null&&Zm>=Fm?Zm:Fm,T1=findPanelDataIndex(w0,qp)===w0.length-1?am-p1:p1-am,Tm=adjustLayoutByDelta({delta:T1,initialLayout:o0,panelConstraints:a0,pivotIndices:C0,prevLayout:o0,trigger:"imperative-api"});compareLayouts(o0,Tm)||(K(Tm),Xe.current.layout=Tm,Ep&&Ep(Tm),callPanelCallbacks(w0,Tm,G.current))}}},[]),pn=reactExports.useCallback(qp=>{const{layout:ci,panelDataArray:Ep}=Xe.current,{panelSize:o0}=panelDataHelper(Ep,qp,ci);return assert(o0!=null,`Panel size not found for panel "${qp.id}"`),o0},[]),mr=reactExports.useCallback((qp,ci)=>{const{panelDataArray:Ep}=Xe.current,o0=findPanelDataIndex(Ep,qp);return computePanelFlexBoxStyle({defaultSize:ci,dragState:J,layout:ie,panelData:Ep,panelIndex:o0})},[J,ie]),bp=reactExports.useCallback(qp=>{const{layout:ci,panelDataArray:Ep}=Xe.current,{collapsedSize:o0=0,collapsible:w0,panelSize:a0}=panelDataHelper(Ep,qp,ci);return assert(a0!=null,`Panel size not found for panel "${qp.id}"`),w0===!0&&fuzzyNumbersEqual$1(a0,o0)},[]),Sp=reactExports.useCallback(qp=>{const{layout:ci,panelDataArray:Ep}=Xe.current,{collapsedSize:o0=0,collapsible:w0,panelSize:a0}=panelDataHelper(Ep,qp,ci);return assert(a0!=null,`Panel size not found for panel "${qp.id}"`),!w0||fuzzyCompareNumbers(a0,o0)>0},[]),_r=reactExports.useCallback(qp=>{const{panelDataArray:ci}=Xe.current;ci.push(qp),ci.sort((Ep,o0)=>{const w0=Ep.order,a0=o0.order;return w0==null&&a0==null?0:w0==null?-1:a0==null?1:w0-a0}),Xe.current.panelDataArrayChanged=!0,Ne()},[Ne]);useIsomorphicLayoutEffect(()=>{if(Xe.current.panelDataArrayChanged){Xe.current.panelDataArrayChanged=!1;const{autoSaveId:qp,onLayout:ci,storage:Ep}=Fe.current,{layout:o0,panelDataArray:w0}=Xe.current;let a0=null;if(qp){const am=loadPanelGroupState(qp,w0,Ep);am&&(se.current=new Map(Object.entries(am.expandToSizes)),a0=am.layout)}a0==null&&(a0=calculateUnsafeDefaultLayout({panelDataArray:w0}));const P0=validatePanelGroupLayout({layout:a0,panelConstraints:w0.map(am=>am.constraints)});areEqual$1(o0,P0)||(K(P0),Xe.current.layout=P0,ci&&ci(P0),callPanelCallbacks(w0,P0,G.current))}}),useIsomorphicLayoutEffect(()=>{const qp=Xe.current;return()=>{qp.layout=[]}},[]);const xs=reactExports.useCallback(qp=>{let ci=!1;const Ep=V.current;return Ep&&window.getComputedStyle(Ep,null).getPropertyValue("direction")==="rtl"&&(ci=!0),function(w0){w0.preventDefault();const a0=V.current;if(!a0)return()=>null;const{direction:P0,dragState:am,id:sm,keyboardResizeBy:C0,onLayout:Fm}=Fe.current,{layout:Zm,panelDataArray:p1}=Xe.current,{initialLayout:A1}=am??{},T1=determinePivotIndices(sm,qp,a0);let Tm=calculateDeltaPercentage(w0,qp,P0,am,C0,a0);const x1=P0==="horizontal";x1&&ci&&(Tm=-Tm);const S1=p1.map(om=>om.constraints),p0=adjustLayoutByDelta({delta:Tm,initialLayout:A1??Zm,panelConstraints:S1,pivotIndices:T1,prevLayout:Zm,trigger:isKeyDown(w0)?"keyboard":"mouse-or-touch"}),zp=!compareLayouts(Zm,p0);(isPointerEvent(w0)||isMouseEvent$1(w0))&&He.current!=Tm&&(He.current=Tm,!zp&&Tm!==0?x1?reportConstraintsViolation(qp,Tm<0?EXCEEDED_HORIZONTAL_MIN:EXCEEDED_HORIZONTAL_MAX):reportConstraintsViolation(qp,Tm<0?EXCEEDED_VERTICAL_MIN:EXCEEDED_VERTICAL_MAX):reportConstraintsViolation(qp,0)),zp&&(K(p0),Xe.current.layout=p0,Fm&&Fm(p0),callPanelCallbacks(p1,p0,G.current))}},[]),ne=reactExports.useCallback((qp,ci)=>{const{onLayout:Ep}=Fe.current,{layout:o0,panelDataArray:w0}=Xe.current,a0=w0.map(Zm=>Zm.constraints),{panelSize:P0,pivotIndices:am}=panelDataHelper(w0,qp,o0);assert(P0!=null,`Panel size not found for panel "${qp.id}"`);const C0=findPanelDataIndex(w0,qp)===w0.length-1?P0-ci:ci-P0,Fm=adjustLayoutByDelta({delta:C0,initialLayout:o0,panelConstraints:a0,pivotIndices:am,prevLayout:o0,trigger:"imperative-api"});compareLayouts(o0,Fm)||(K(Fm),Xe.current.layout=Fm,Ep&&Ep(Fm),callPanelCallbacks(w0,Fm,G.current))},[]),zl=reactExports.useCallback((qp,ci)=>{const{layout:Ep,panelDataArray:o0}=Xe.current,{collapsedSize:w0=0,collapsible:a0}=ci,{collapsedSize:P0=0,collapsible:am,maxSize:sm=100,minSize:C0=0}=qp.constraints,{panelSize:Fm}=panelDataHelper(o0,qp,Ep);Fm!=null&&(a0&&am&&fuzzyNumbersEqual$1(Fm,w0)?fuzzyNumbersEqual$1(w0,P0)||ne(qp,P0):Fm<C0?ne(qp,C0):Fm>sm&&ne(qp,sm))},[ne]),Hl=reactExports.useCallback((qp,ci)=>{const{direction:Ep}=Fe.current,{layout:o0}=Xe.current;if(!V.current)return;const w0=getResizeHandleElement(qp,V.current);assert(w0,`Drag handle element not found for id "${qp}"`);const a0=getResizeEventCursorPosition(Ep,ci);re({dragHandleId:qp,dragHandleRect:w0.getBoundingClientRect(),initialCursorPosition:a0,initialLayout:o0})},[]),pr=reactExports.useCallback(()=>{re(null)},[]),Hp=reactExports.useCallback(qp=>{const{panelDataArray:ci}=Xe.current,Ep=findPanelDataIndex(ci,qp);Ep>=0&&(ci.splice(Ep,1),delete G.current[qp.id],Xe.current.panelDataArrayChanged=!0,Ne())},[Ne]),Gl=reactExports.useMemo(()=>({collapsePanel:be,direction:a,dragState:J,expandPanel:ta,getPanelSize:pn,getPanelStyle:mr,groupId:j,isPanelCollapsed:bp,isPanelExpanded:Sp,reevaluatePanelConstraints:zl,registerPanel:_r,registerResizeHandle:xs,resizePanel:ne,startDragging:Hl,stopDragging:pr,unregisterPanel:Hp,panelGroupElement:V.current}),[be,J,a,ta,pn,mr,j,bp,Sp,zl,_r,xs,ne,Hl,pr,Hp]),Ip={display:"flex",flexDirection:a==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement(PanelGroupContext.Provider,{value:Gl},reactExports.createElement(A,{...C,children:e,className:t,id:c,ref:V,style:{...Ip,...S},[DATA_ATTRIBUTES.group]:"",[DATA_ATTRIBUTES.groupDirection]:a,[DATA_ATTRIBUTES.groupId]:j}))}const PanelGroup=reactExports.forwardRef((r,e)=>reactExports.createElement(PanelGroupWithForwardedRef,{...r,forwardedRef:e}));PanelGroupWithForwardedRef.displayName="PanelGroup";PanelGroup.displayName="forwardRef(PanelGroup)";function findPanelDataIndex(r,e){return r.findIndex(t=>t===e||t.id===e.id)}function panelDataHelper(r,e,t){const a=findPanelDataIndex(r,e),c=a===r.length-1?[a-1,a]:[a,a+1],d=t[a];return{...e.constraints,panelSize:d,pivotIndices:c}}function useWindowSplitterResizeHandlerBehavior({disabled:r,handleId:e,resizeHandler:t,panelGroupElement:a}){reactExports.useEffect(()=>{if(r||t==null||a==null)return;const o=getResizeHandleElement(e,a);if(o==null)return;const c=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),t(d);break}case"F6":{d.preventDefault();const p=o.getAttribute(DATA_ATTRIBUTES.groupId);assert(p,`No group element found for id "${p}"`);const _=getResizeHandleElementsForGroup(p,a),S=getResizeHandleElementIndex(p,e,a);assert(S!==null,`No resize element found for id "${e}"`);const A=d.shiftKey?S>0?S-1:_.length-1:S+1<_.length?S+1:0;_[A].focus();break}}};return o.addEventListener("keydown",c),()=>{o.removeEventListener("keydown",c)}},[a,r,e,t])}function PanelResizeHandle({children:r=null,className:e="",disabled:t=!1,hitAreaMargins:a,id:o,onBlur:c,onClick:d,onDragging:p,onFocus:_,onPointerDown:S,onPointerUp:A,style:C={},tabIndex:j=0,tagName:V="div",...J}){var re,ie;const K=reactExports.useRef(null),Ne=reactExports.useRef({onClick:d,onDragging:p,onPointerDown:S,onPointerUp:A});reactExports.useEffect(()=>{Ne.current.onClick=d,Ne.current.onDragging=p,Ne.current.onPointerDown=S,Ne.current.onPointerUp=A});const G=reactExports.useContext(PanelGroupContext);if(G===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:se,groupId:He,registerResizeHandle:Fe,startDragging:Xe,stopDragging:be,panelGroupElement:ta}=G,pn=useUniqueId(o),[mr,bp]=reactExports.useState("inactive"),[Sp,_r]=reactExports.useState(!1),[xs,ne]=reactExports.useState(null),zl=reactExports.useRef({state:mr});useIsomorphicLayoutEffect(()=>{zl.current.state=mr}),reactExports.useEffect(()=>{if(t)ne(null);else{const Gl=Fe(pn);ne(()=>Gl)}},[t,pn,Fe]);const Hl=(re=a?.coarse)!==null&&re!==void 0?re:15,pr=(ie=a?.fine)!==null&&ie!==void 0?ie:5;reactExports.useEffect(()=>{if(t||xs==null)return;const Gl=K.current;assert(Gl,"Element ref not attached");let Ip=!1;return registerResizeHandle(pn,Gl,se,{coarse:Hl,fine:pr},(ci,Ep,o0)=>{if(!Ep){bp("inactive");return}switch(ci){case"down":{bp("drag"),Ip=!1,assert(o0,'Expected event to be defined for "down" action'),Xe(pn,o0);const{onDragging:w0,onPointerDown:a0}=Ne.current;w0?.(!0),a0?.();break}case"move":{const{state:w0}=zl.current;Ip=!0,w0!=="drag"&&bp("hover"),assert(o0,'Expected event to be defined for "move" action'),xs(o0);break}case"up":{bp("hover"),be();const{onClick:w0,onDragging:a0,onPointerUp:P0}=Ne.current;a0?.(!1),P0?.(),Ip||w0?.();break}}})},[Hl,se,t,pr,Fe,pn,xs,Xe,be]),useWindowSplitterResizeHandlerBehavior({disabled:t,handleId:pn,resizeHandler:xs,panelGroupElement:ta});const Hp={touchAction:"none",userSelect:"none"};return reactExports.createElement(V,{...J,children:r,className:e,id:o,onBlur:()=>{_r(!1),c?.()},onFocus:()=>{_r(!0),_?.()},ref:K,role:"separator",style:{...Hp,...C},tabIndex:j,[DATA_ATTRIBUTES.groupDirection]:se,[DATA_ATTRIBUTES.groupId]:He,[DATA_ATTRIBUTES.resizeHandle]:"",[DATA_ATTRIBUTES.resizeHandleActive]:mr==="drag"?"pointer":Sp?"keyboard":void 0,[DATA_ATTRIBUTES.resizeHandleEnabled]:!t,[DATA_ATTRIBUTES.resizeHandleId]:pn,[DATA_ATTRIBUTES.resizeHandleState]:mr})}PanelResizeHandle.displayName="PanelResizeHandle";function cc$1(r){if(typeof r=="string"||typeof r=="number")return""+r;let e="";if(Array.isArray(r))for(let t=0,a;t<r.length;t++)(a=cc$1(r[t]))!==""&&(e+=(e&&" ")+a);else for(let t in r)r[t]&&(e+=(e&&" ")+t);return e}var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var r=requireReact();function e(C,j){return C===j&&(C!==0||1/C===1/j)||C!==C&&j!==j}var t=typeof Object.is=="function"?Object.is:e,a=r.useState,o=r.useEffect,c=r.useLayoutEffect,d=r.useDebugValue;function p(C,j){var V=j(),J=a({inst:{value:V,getSnapshot:j}}),re=J[0].inst,ie=J[1];return c(function(){re.value=V,re.getSnapshot=j,_(re)&&ie({inst:re})},[C,V,j]),o(function(){return _(re)&&ie({inst:re}),C(function(){_(re)&&ie({inst:re})})},[C]),d(V),V}function _(C){var j=C.getSnapshot;C=C.value;try{var V=j();return!t(C,V)}catch{return!0}}function S(C,j){return j()}var A=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:p;return useSyncExternalStoreShim_production.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:A,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var r=requireReact(),e=requireShim();function t(S,A){return S===A&&(S!==0||1/S===1/A)||S!==S&&A!==A}var a=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,c=r.useRef,d=r.useEffect,p=r.useMemo,_=r.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(S,A,C,j,V){var J=c(null);if(J.current===null){var re={hasValue:!1,value:null};J.current=re}else re=J.current;J=p(function(){function K(Fe){if(!Ne){if(Ne=!0,G=Fe,Fe=j(Fe),V!==void 0&&re.hasValue){var Xe=re.value;if(V(Xe,Fe))return se=Xe}return se=Fe}if(Xe=se,a(G,Fe))return Xe;var be=j(Fe);return V!==void 0&&V(Xe,be)?(G=Fe,Xe):(G=Fe,se=be)}var Ne=!1,G,se,He=C===void 0?null:C;return[function(){return K(A())},He===null?void 0:function(){return K(He())}]},[A,C,j,V]);var ie=o(S,J[0],J[1]);return d(function(){re.hasValue=!0,re.value=ie},[ie]),_(ie),ie},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),__vite_import_meta_env__={},createStoreImpl=r=>{let e;const t=new Set,a=(A,C)=>{const j=typeof A=="function"?A(e):A;if(!Object.is(j,e)){const V=e;e=C??(typeof j!="object"||j===null)?j:Object.assign({},e,j),t.forEach(J=>J(e,V))}},o=()=>e,_={setState:a,getState:o,getInitialState:()=>S,subscribe:A=>(t.add(A),()=>t.delete(A)),destroy:()=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},S=e=r(a,o,_);return _},createStore=r=>r?createStoreImpl(r):createStoreImpl,{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$2=r=>r;function useStoreWithEqualityFn(r,e=identity$2,t){const a=useSyncExternalStoreWithSelector(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return useDebugValue(a),a}const createWithEqualityFnImpl=(r,e)=>{const t=createStore(r),a=(o,c=e)=>useStoreWithEqualityFn(t,o,c);return Object.assign(a,t),a},createWithEqualityFn=(r,e)=>r?createWithEqualityFnImpl(r,e):createWithEqualityFnImpl;function shallow$1(r,e){if(Object.is(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;if(r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(const[a,o]of r)if(!Object.is(o,e.get(a)))return!1;return!0}if(r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(const a of r)if(!e.has(a))return!1;return!0}const t=Object.keys(r);if(t.length!==Object.keys(e).length)return!1;for(const a of t)if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(r[a],e[a]))return!1;return!0}var noop$1={value:()=>{}};function dispatch(){for(var r=0,e=arguments.length,t={},a;r<e;++r){if(!(a=arguments[r]+"")||a in t||/[\s.]/.test(a))throw new Error("illegal type: "+a);t[a]=[]}return new Dispatch(t)}function Dispatch(r){this._=r}function parseTypenames$1(r,e){return r.trim().split(/^|\s+/).map(function(t){var a="",o=t.indexOf(".");if(o>=0&&(a=t.slice(o+1),t=t.slice(0,o)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:a}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(r,e){var t=this._,a=parseTypenames$1(r+"",t),o,c=-1,d=a.length;if(arguments.length<2){for(;++c<d;)if((o=(r=a[c]).type)&&(o=get$1(t[o],r.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++c<d;)if(o=(r=a[c]).type)t[o]=set$1(t[o],r.name,e);else if(e==null)for(o in t)t[o]=set$1(t[o],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new Dispatch(r)},call:function(r,e){if((o=arguments.length-2)>0)for(var t=new Array(o),a=0,o,c;a<o;++a)t[a]=arguments[a+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(c=this._[r],a=0,o=c.length;a<o;++a)c[a].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var a=this._[r],o=0,c=a.length;o<c;++o)a[o].value.apply(e,t)}};function get$1(r,e){for(var t=0,a=r.length,o;t<a;++t)if((o=r[t]).name===e)return o.value}function set$1(r,e,t){for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r[a]=noop$1,r=r.slice(0,a).concat(r.slice(a+1));break}return t!=null&&r.push({name:e,value:t}),r}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(r){var e=r+="",t=e.indexOf(":");return t>=0&&(e=r.slice(0,t))!=="xmlns"&&(r=r.slice(t+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:r}:r}function creatorInherit(r){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(r):e.createElementNS(t,r)}}function creatorFixed(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function creator(r){var e=namespace(r);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector$h(r){return r==null?none:function(){return this.querySelector(r)}}function selection_select(r){typeof r!="function"&&(r=selector$h(r));for(var e=this._groups,t=e.length,a=new Array(t),o=0;o<t;++o)for(var c=e[o],d=c.length,p=a[o]=new Array(d),_,S,A=0;A<d;++A)(_=c[A])&&(S=r.call(_,_.__data__,A,c))&&("__data__"in _&&(S.__data__=_.__data__),p[A]=S);return new Selection$1(a,this._parents)}function array(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function empty(){return[]}function selectorAll(r){return r==null?empty:function(){return this.querySelectorAll(r)}}function arrayAll(r){return function(){return array(r.apply(this,arguments))}}function selection_selectAll(r){typeof r=="function"?r=arrayAll(r):r=selectorAll(r);for(var e=this._groups,t=e.length,a=[],o=[],c=0;c<t;++c)for(var d=e[c],p=d.length,_,S=0;S<p;++S)(_=d[S])&&(a.push(r.call(_,_.__data__,S,d)),o.push(_));return new Selection$1(a,o)}function matcher(r){return function(){return this.matches(r)}}function childMatcher(r){return function(e){return e.matches(r)}}var find=Array.prototype.find;function childFind(r){return function(){return find.call(this.children,r)}}function childFirst(){return this.firstElementChild}function selection_selectChild(r){return this.select(r==null?childFirst:childFind(typeof r=="function"?r:childMatcher(r)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(r){return function(){return filter.call(this.children,r)}}function selection_selectChildren(r){return this.selectAll(r==null?children:childrenFilter(typeof r=="function"?r:childMatcher(r)))}function selection_filter(r){typeof r!="function"&&(r=matcher(r));for(var e=this._groups,t=e.length,a=new Array(t),o=0;o<t;++o)for(var c=e[o],d=c.length,p=a[o]=[],_,S=0;S<d;++S)(_=c[S])&&r.call(_,_.__data__,S,c)&&p.push(_);return new Selection$1(a,this._parents)}function sparse(r){return new Array(r.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(r,e){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,e){return this._parent.insertBefore(r,e)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}};function constant$3(r){return function(){return r}}function bindIndex(r,e,t,a,o,c){for(var d=0,p,_=e.length,S=c.length;d<S;++d)(p=e[d])?(p.__data__=c[d],a[d]=p):t[d]=new EnterNode(r,c[d]);for(;d<_;++d)(p=e[d])&&(o[d]=p)}function bindKey(r,e,t,a,o,c,d){var p,_,S=new Map,A=e.length,C=c.length,j=new Array(A),V;for(p=0;p<A;++p)(_=e[p])&&(j[p]=V=d.call(_,_.__data__,p,e)+"",S.has(V)?o[p]=_:S.set(V,_));for(p=0;p<C;++p)V=d.call(r,c[p],p,c)+"",(_=S.get(V))?(a[p]=_,_.__data__=c[p],S.delete(V)):t[p]=new EnterNode(r,c[p]);for(p=0;p<A;++p)(_=e[p])&&S.get(j[p])===_&&(o[p]=_)}function datum(r){return r.__data__}function selection_data(r,e){if(!arguments.length)return Array.from(this,datum);var t=e?bindKey:bindIndex,a=this._parents,o=this._groups;typeof r!="function"&&(r=constant$3(r));for(var c=o.length,d=new Array(c),p=new Array(c),_=new Array(c),S=0;S<c;++S){var A=a[S],C=o[S],j=C.length,V=arraylike(r.call(A,A&&A.__data__,S,a)),J=V.length,re=p[S]=new Array(J),ie=d[S]=new Array(J),K=_[S]=new Array(j);t(A,C,re,ie,K,V,e);for(var Ne=0,G=0,se,He;Ne<J;++Ne)if(se=re[Ne]){for(Ne>=G&&(G=Ne+1);!(He=ie[G])&&++G<J;);se._next=He||null}}return d=new Selection$1(d,a),d._enter=p,d._exit=_,d}function arraylike(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(r,e,t){var a=this.enter(),o=this,c=this.exit();return typeof r=="function"?(a=r(a),a&&(a=a.selection())):a=a.append(r+""),e!=null&&(o=e(o),o&&(o=o.selection())),t==null?c.remove():t(c),a&&o?a.merge(o).order():o}function selection_merge(r){for(var e=r.selection?r.selection():r,t=this._groups,a=e._groups,o=t.length,c=a.length,d=Math.min(o,c),p=new Array(o),_=0;_<d;++_)for(var S=t[_],A=a[_],C=S.length,j=p[_]=new Array(C),V,J=0;J<C;++J)(V=S[J]||A[J])&&(j[J]=V);for(;_<o;++_)p[_]=t[_];return new Selection$1(p,this._parents)}function selection_order(){for(var r=this._groups,e=-1,t=r.length;++e<t;)for(var a=r[e],o=a.length-1,c=a[o],d;--o>=0;)(d=a[o])&&(c&&d.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(d,c),c=d);return this}function selection_sort(r){r||(r=ascending);function e(C,j){return C&&j?r(C.__data__,j.__data__):!C-!j}for(var t=this._groups,a=t.length,o=new Array(a),c=0;c<a;++c){for(var d=t[c],p=d.length,_=o[c]=new Array(p),S,A=0;A<p;++A)(S=d[A])&&(_[A]=S);_.sort(e)}return new Selection$1(o,this._parents).order()}function ascending(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function selection_call(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var a=r[e],o=0,c=a.length;o<c;++o){var d=a[o];if(d)return d}return null}function selection_size(){let r=0;for(const e of this)++r;return r}function selection_empty(){return!this.node()}function selection_each(r){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var o=e[t],c=0,d=o.length,p;c<d;++c)(p=o[c])&&r.call(p,p.__data__,c,o);return this}function attrRemove$1(r){return function(){this.removeAttribute(r)}}function attrRemoveNS$1(r){return function(){this.removeAttributeNS(r.space,r.local)}}function attrConstant$1(r,e){return function(){this.setAttribute(r,e)}}function attrConstantNS$1(r,e){return function(){this.setAttributeNS(r.space,r.local,e)}}function attrFunction$1(r,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(r):this.setAttribute(r,t)}}function attrFunctionNS$1(r,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,t)}}function selection_attr(r,e){var t=namespace(r);if(arguments.length<2){var a=this.node();return t.local?a.getAttributeNS(t.space,t.local):a.getAttribute(t)}return this.each((e==null?t.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?t.local?attrFunctionNS$1:attrFunction$1:t.local?attrConstantNS$1:attrConstant$1)(t,e))}function defaultView(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function styleRemove$1(r){return function(){this.style.removeProperty(r)}}function styleConstant$1(r,e,t){return function(){this.style.setProperty(r,e,t)}}function styleFunction$1(r,e,t){return function(){var a=e.apply(this,arguments);a==null?this.style.removeProperty(r):this.style.setProperty(r,a,t)}}function selection_style(r,e,t){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(r,e,t??"")):styleValue(this.node(),r)}function styleValue(r,e){return r.style.getPropertyValue(e)||defaultView(r).getComputedStyle(r,null).getPropertyValue(e)}function propertyRemove(r){return function(){delete this[r]}}function propertyConstant(r,e){return function(){this[r]=e}}function propertyFunction(r,e){return function(){var t=e.apply(this,arguments);t==null?delete this[r]:this[r]=t}}function selection_property(r,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(r,e)):this.node()[r]}function classArray(r){return r.trim().split(/^|\s+/)}function classList(r){return r.classList||new ClassList(r)}function ClassList(r){this._node=r,this._names=classArray(r.getAttribute("class")||"")}ClassList.prototype={add:function(r){var e=this._names.indexOf(r);e<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var e=this._names.indexOf(r);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function classedAdd(r,e){for(var t=classList(r),a=-1,o=e.length;++a<o;)t.add(e[a])}function classedRemove(r,e){for(var t=classList(r),a=-1,o=e.length;++a<o;)t.remove(e[a])}function classedTrue(r){return function(){classedAdd(this,r)}}function classedFalse(r){return function(){classedRemove(this,r)}}function classedFunction(r,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,r)}}function selection_classed(r,e){var t=classArray(r+"");if(arguments.length<2){for(var a=classList(this.node()),o=-1,c=t.length;++o<c;)if(!a.contains(t[o]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(t,e))}function textRemove(){this.textContent=""}function textConstant$1(r){return function(){this.textContent=r}}function textFunction$1(r){return function(){var e=r.apply(this,arguments);this.textContent=e??""}}function selection_text(r){return arguments.length?this.each(r==null?textRemove:(typeof r=="function"?textFunction$1:textConstant$1)(r)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(r){return function(){this.innerHTML=r}}function htmlFunction(r){return function(){var e=r.apply(this,arguments);this.innerHTML=e??""}}function selection_html(r){return arguments.length?this.each(r==null?htmlRemove:(typeof r=="function"?htmlFunction:htmlConstant)(r)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(r){var e=typeof r=="function"?r:creator(r);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(r,e){var t=typeof r=="function"?r:creator(r),a=e==null?constantNull:typeof e=="function"?e:selector$h(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),a.apply(this,arguments)||null)})}function remove(){var r=this.parentNode;r&&r.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var r=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function selection_cloneDeep(){var r=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function selection_clone(r){return this.select(r?selection_cloneDeep:selection_cloneShallow)}function selection_datum(r){return arguments.length?this.property("__data__",r):this.node().__data__}function contextListener(r){return function(e){r.call(this,e,this.__data__)}}function parseTypenames(r){return r.trim().split(/^|\s+/).map(function(e){var t="",a=e.indexOf(".");return a>=0&&(t=e.slice(a+1),e=e.slice(0,a)),{type:e,name:t}})}function onRemove(r){return function(){var e=this.__on;if(e){for(var t=0,a=-1,o=e.length,c;t<o;++t)c=e[t],(!r.type||c.type===r.type)&&c.name===r.name?this.removeEventListener(c.type,c.listener,c.options):e[++a]=c;++a?e.length=a:delete this.__on}}}function onAdd(r,e,t){return function(){var a=this.__on,o,c=contextListener(e);if(a){for(var d=0,p=a.length;d<p;++d)if((o=a[d]).type===r.type&&o.name===r.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=c,o.options=t),o.value=e;return}}this.addEventListener(r.type,c,t),o={type:r.type,name:r.name,value:e,listener:c,options:t},a?a.push(o):this.__on=[o]}}function selection_on(r,e,t){var a=parseTypenames(r+""),o,c=a.length,d;if(arguments.length<2){var p=this.node().__on;if(p){for(var _=0,S=p.length,A;_<S;++_)for(o=0,A=p[_];o<c;++o)if((d=a[o]).type===A.type&&d.name===A.name)return A.value}return}for(p=e?onAdd:onRemove,o=0;o<c;++o)this.each(p(a[o],e,t));return this}function dispatchEvent(r,e,t){var a=defaultView(r),o=a.CustomEvent;typeof o=="function"?o=new o(e,t):(o=a.document.createEvent("Event"),t?(o.initEvent(e,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(e,!1,!1)),r.dispatchEvent(o)}function dispatchConstant(r,e){return function(){return dispatchEvent(this,r,e)}}function dispatchFunction(r,e){return function(){return dispatchEvent(this,r,e.apply(this,arguments))}}function selection_dispatch(r,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(r,e))}function*selection_iterator(){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var a=r[e],o=0,c=a.length,d;o<c;++o)(d=a[o])&&(yield d)}var root=[null];function Selection$1(r,e){this._groups=r,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(r){return typeof r=="string"?new Selection$1([[document.querySelector(r)]],[document.documentElement]):new Selection$1([[r]],root)}function sourceEvent(r){let e;for(;e=r.sourceEvent;)r=e;return r}function pointer(r,e){if(r=sourceEvent(r),e===void 0&&(e=r.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var a=t.createSVGPoint();return a.x=r.clientX,a.y=r.clientY,a=a.matrixTransform(e.getScreenCTM().inverse()),[a.x,a.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[r.clientX-o.left-e.clientLeft,r.clientY-o.top-e.clientTop]}}return[r.pageX,r.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(r){r.stopImmediatePropagation()}function noevent$1(r){r.preventDefault(),r.stopImmediatePropagation()}function dragDisable(r){var e=r.document.documentElement,t=select(r).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in e?t.on("selectstart.drag",noevent$1,nonpassivecapture):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(r,e){var t=r.document.documentElement,a=select(r).on("dragstart.drag",null);e&&(a.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in t?a.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const constant$2=r=>()=>r;function DragEvent(r,{sourceEvent:e,subject:t,target:a,identifier:o,active:c,x:d,y:p,dx:_,dy:S,dispatch:A}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:S,enumerable:!0,configurable:!0},_:{value:A}})}DragEvent.prototype.on=function(){var r=this._.on.apply(this._,arguments);return r===this._?this:r};function defaultFilter$1(r){return!r.ctrlKey&&!r.button}function defaultContainer(){return this.parentNode}function defaultSubject(r,e){return e??{x:r.x,y:r.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var r=defaultFilter$1,e=defaultContainer,t=defaultSubject,a=defaultTouchable$1,o={},c=dispatch("start","drag","end"),d=0,p,_,S,A,C=0;function j(se){se.on("mousedown.drag",V).filter(a).on("touchstart.drag",ie).on("touchmove.drag",K,nonpassive).on("touchend.drag touchcancel.drag",Ne).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function V(se,He){if(!(A||!r.call(this,se,He))){var Fe=G(this,e.call(this,se,He),se,He,"mouse");Fe&&(select(se.view).on("mousemove.drag",J,nonpassivecapture).on("mouseup.drag",re,nonpassivecapture),dragDisable(se.view),nopropagation$1(se),S=!1,p=se.clientX,_=se.clientY,Fe("start",se))}}function J(se){if(noevent$1(se),!S){var He=se.clientX-p,Fe=se.clientY-_;S=He*He+Fe*Fe>C}o.mouse("drag",se)}function re(se){select(se.view).on("mousemove.drag mouseup.drag",null),yesdrag(se.view,S),noevent$1(se),o.mouse("end",se)}function ie(se,He){if(r.call(this,se,He)){var Fe=se.changedTouches,Xe=e.call(this,se,He),be=Fe.length,ta,pn;for(ta=0;ta<be;++ta)(pn=G(this,Xe,se,He,Fe[ta].identifier,Fe[ta]))&&(nopropagation$1(se),pn("start",se,Fe[ta]))}}function K(se){var He=se.changedTouches,Fe=He.length,Xe,be;for(Xe=0;Xe<Fe;++Xe)(be=o[He[Xe].identifier])&&(noevent$1(se),be("drag",se,He[Xe]))}function Ne(se){var He=se.changedTouches,Fe=He.length,Xe,be;for(A&&clearTimeout(A),A=setTimeout(function(){A=null},500),Xe=0;Xe<Fe;++Xe)(be=o[He[Xe].identifier])&&(nopropagation$1(se),be("end",se,He[Xe]))}function G(se,He,Fe,Xe,be,ta){var pn=c.copy(),mr=pointer(ta||Fe,He),bp,Sp,_r;if((_r=t.call(se,new DragEvent("beforestart",{sourceEvent:Fe,target:j,identifier:be,active:d,x:mr[0],y:mr[1],dx:0,dy:0,dispatch:pn}),Xe))!=null)return bp=_r.x-mr[0]||0,Sp=_r.y-mr[1]||0,function xs(ne,zl,Hl){var pr=mr,Hp;switch(ne){case"start":o[be]=xs,Hp=d++;break;case"end":delete o[be],--d;case"drag":mr=pointer(Hl||zl,He),Hp=d;break}pn.call(ne,se,new DragEvent(ne,{sourceEvent:zl,subject:_r,target:j,identifier:be,active:Hp,x:mr[0]+bp,y:mr[1]+Sp,dx:mr[0]-pr[0],dy:mr[1]-pr[1],dispatch:pn}),Xe)}}return j.filter=function(se){return arguments.length?(r=typeof se=="function"?se:constant$2(!!se),j):r},j.container=function(se){return arguments.length?(e=typeof se=="function"?se:constant$2(se),j):e},j.subject=function(se){return arguments.length?(t=typeof se=="function"?se:constant$2(se),j):t},j.touchable=function(se){return arguments.length?(a=typeof se=="function"?se:constant$2(!!se),j):a},j.on=function(){var se=c.on.apply(c,arguments);return se===c?j:se},j.clickDistance=function(se){return arguments.length?(C=(se=+se)*se,j):Math.sqrt(C)},j}function define(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function extend(r,e){var t=Object.create(r.prototype);for(var a in e)t[a]=e[a];return t}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=reHex.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?rgbn(e):t===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(r))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(r))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(r))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(r))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(r))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(r))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(r)?rgbn(named[r]):r==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(r){return new Rgb(r>>16&255,r>>8&255,r&255,1)}function rgba(r,e,t,a){return a<=0&&(r=e=t=NaN),new Rgb(r,e,t,a)}function rgbConvert(r){return r instanceof Color||(r=color(r)),r?(r=r.rgb(),new Rgb(r.r,r.g,r.b,r.opacity)):new Rgb}function rgb(r,e,t,a){return arguments.length===1?rgbConvert(r):new Rgb(r,e,t,a??1)}function Rgb(r,e,t,a){this.r=+r,this.g=+e,this.b=+t,this.opacity=+a}define(Rgb,rgb,extend(Color,{brighter(r){return r=r==null?brighter:Math.pow(brighter,r),new Rgb(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?darker:Math.pow(darker,r),new Rgb(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const r=clampa(this.opacity);return`${r===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${r===1?")":`, ${r})`}`}function clampa(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function clampi(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function hex(r){return r=clampi(r),(r<16?"0":"")+r.toString(16)}function hsla(r,e,t,a){return a<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Hsl(r,e,t,a)}function hslConvert(r){if(r instanceof Hsl)return new Hsl(r.h,r.s,r.l,r.opacity);if(r instanceof Color||(r=color(r)),!r)return new Hsl;if(r instanceof Hsl)return r;r=r.rgb();var e=r.r/255,t=r.g/255,a=r.b/255,o=Math.min(e,t,a),c=Math.max(e,t,a),d=NaN,p=c-o,_=(c+o)/2;return p?(e===c?d=(t-a)/p+(t<a)*6:t===c?d=(a-e)/p+2:d=(e-t)/p+4,p/=_<.5?c+o:2-c-o,d*=60):p=_>0&&_<1?0:d,new Hsl(d,p,_,r.opacity)}function hsl(r,e,t,a){return arguments.length===1?hslConvert(r):new Hsl(r,e,t,a??1)}function Hsl(r,e,t,a){this.h=+r,this.s=+e,this.l=+t,this.opacity=+a}define(Hsl,hsl,extend(Color,{brighter(r){return r=r==null?brighter:Math.pow(brighter,r),new Hsl(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?darker:Math.pow(darker,r),new Hsl(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,a=t+(t<.5?t:1-t)*e,o=2*t-a;return new Rgb(hsl2rgb(r>=240?r-240:r+120,o,a),hsl2rgb(r,o,a),hsl2rgb(r<120?r+240:r-120,o,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=clampa(this.opacity);return`${r===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${r===1?")":`, ${r})`}`}}));function clamph(r){return r=(r||0)%360,r<0?r+360:r}function clampt(r){return Math.max(0,Math.min(1,r||0))}function hsl2rgb(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const constant$1=r=>()=>r;function linear(r,e){return function(t){return r+t*e}}function exponential(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(a){return Math.pow(r+a*e,t)}}function gamma(r){return(r=+r)==1?nogamma:function(e,t){return t-e?exponential(e,t,r):constant$1(isNaN(e)?t:e)}}function nogamma(r,e){var t=e-r;return t?linear(r,t):constant$1(isNaN(r)?e:r)}const interpolateRgb=(function r(e){var t=gamma(e);function a(o,c){var d=t((o=rgb(o)).r,(c=rgb(c)).r),p=t(o.g,c.g),_=t(o.b,c.b),S=nogamma(o.opacity,c.opacity);return function(A){return o.r=d(A),o.g=p(A),o.b=_(A),o.opacity=S(A),o+""}}return a.gamma=r,a})(1);function interpolateNumber(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(r){return function(){return r}}function one(r){return function(e){return r(e)+""}}function interpolateString(r,e){var t=reA.lastIndex=reB.lastIndex=0,a,o,c,d=-1,p=[],_=[];for(r=r+"",e=e+"";(a=reA.exec(r))&&(o=reB.exec(e));)(c=o.index)>t&&(c=e.slice(t,c),p[d]?p[d]+=c:p[++d]=c),(a=a[0])===(o=o[0])?p[d]?p[d]+=o:p[++d]=o:(p[++d]=null,_.push({i:d,x:interpolateNumber(a,o)})),t=reB.lastIndex;return t<e.length&&(c=e.slice(t),p[d]?p[d]+=c:p[++d]=c),p.length<2?_[0]?one(_[0].x):zero(e):(e=_.length,function(S){for(var A=0,C;A<e;++A)p[(C=_[A]).i]=C.x(S);return p.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(r,e,t,a,o,c){var d,p,_;return(d=Math.sqrt(r*r+e*e))&&(r/=d,e/=d),(_=r*t+e*a)&&(t-=r*_,a-=e*_),(p=Math.sqrt(t*t+a*a))&&(t/=p,a/=p,_/=p),r*a<e*t&&(r=-r,e=-e,_=-_,d=-d),{translateX:o,translateY:c,rotate:Math.atan2(e,r)*degrees,skewX:Math.atan(_)*degrees,scaleX:d,scaleY:p}}var svgNode;function parseCss(r){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return e.isIdentity?identity$1:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(r){return r==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",r),!(r=svgNode.transform.baseVal.consolidate()))?identity$1:(r=r.matrix,decompose(r.a,r.b,r.c,r.d,r.e,r.f))}function interpolateTransform(r,e,t,a){function o(S){return S.length?S.pop()+" ":""}function c(S,A,C,j,V,J){if(S!==C||A!==j){var re=V.push("translate(",null,e,null,t);J.push({i:re-4,x:interpolateNumber(S,C)},{i:re-2,x:interpolateNumber(A,j)})}else(C||j)&&V.push("translate("+C+e+j+t)}function d(S,A,C,j){S!==A?(S-A>180?A+=360:A-S>180&&(S+=360),j.push({i:C.push(o(C)+"rotate(",null,a)-2,x:interpolateNumber(S,A)})):A&&C.push(o(C)+"rotate("+A+a)}function p(S,A,C,j){S!==A?j.push({i:C.push(o(C)+"skewX(",null,a)-2,x:interpolateNumber(S,A)}):A&&C.push(o(C)+"skewX("+A+a)}function _(S,A,C,j,V,J){if(S!==C||A!==j){var re=V.push(o(V)+"scale(",null,",",null,")");J.push({i:re-4,x:interpolateNumber(S,C)},{i:re-2,x:interpolateNumber(A,j)})}else(C!==1||j!==1)&&V.push(o(V)+"scale("+C+","+j+")")}return function(S,A){var C=[],j=[];return S=r(S),A=r(A),c(S.translateX,S.translateY,A.translateX,A.translateY,C,j),d(S.rotate,A.rotate,C,j),p(S.skewX,A.skewX,C,j),_(S.scaleX,S.scaleY,A.scaleX,A.scaleY,C,j),S=A=null,function(V){for(var J=-1,re=j.length,ie;++J<re;)C[(ie=j[J]).i]=ie.x(V);return C.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(r){return((r=Math.exp(r))+1/r)/2}function sinh(r){return((r=Math.exp(r))-1/r)/2}function tanh(r){return((r=Math.exp(2*r))-1)/(r+1)}const interpolateZoom=(function r(e,t,a){function o(c,d){var p=c[0],_=c[1],S=c[2],A=d[0],C=d[1],j=d[2],V=A-p,J=C-_,re=V*V+J*J,ie,K;if(re<epsilon2)K=Math.log(j/S)/e,ie=function(Xe){return[p+Xe*V,_+Xe*J,S*Math.exp(e*Xe*K)]};else{var Ne=Math.sqrt(re),G=(j*j-S*S+a*re)/(2*S*t*Ne),se=(j*j-S*S-a*re)/(2*j*t*Ne),He=Math.log(Math.sqrt(G*G+1)-G),Fe=Math.log(Math.sqrt(se*se+1)-se);K=(Fe-He)/e,ie=function(Xe){var be=Xe*K,ta=cosh(He),pn=S/(t*Ne)*(ta*tanh(e*be+He)-sinh(He));return[p+pn*V,_+pn*J,S*ta/cosh(e*be+He)]}}return ie.duration=K*1e3*e/Math.SQRT2,ie}return o.rho=function(c){var d=Math.max(.001,+c),p=d*d,_=p*p;return r(d,p,_)},o})(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?now():+t)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=r,this._time=t,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(r,e,t){var a=new Timer;return a.restart(r,e,t),a}function timerFlush(){now(),++frame;for(var r=taskHead,e;r;)(e=clockNow-r._time)>=0&&r._call.call(void 0,e),r=r._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var r=clock.now(),e=r-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=r)}function nap(){for(var r,e=taskHead,t,a=1/0;e;)e._call?(a>e._time&&(a=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:taskHead=t);taskTail=r,sleep(a)}function sleep(r){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=r-clockNow;e>24?(r<1/0&&(timeout$1=setTimeout(wake,r-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(r,e,t){var a=new Timer;return e=e==null?0:+e,a.restart(o=>{a.stop(),r(o+e)},e,t),a}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(r,e,t,a,o,c){var d=r.__transition;if(!d)r.__transition={};else if(t in d)return;create(r,t,{name:e,index:a,group:o,on:emptyOn,tween:emptyTween,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:CREATED})}function init(r,e){var t=get(r,e);if(t.state>CREATED)throw new Error("too late; already scheduled");return t}function set(r,e){var t=get(r,e);if(t.state>STARTED)throw new Error("too late; already running");return t}function get(r,e){var t=r.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function create(r,e,t){var a=r.__transition,o;a[e]=t,t.timer=timer(c,0,t.time);function c(S){t.state=SCHEDULED,t.timer.restart(d,t.delay,t.time),t.delay<=S&&d(S-t.delay)}function d(S){var A,C,j,V;if(t.state!==SCHEDULED)return _();for(A in a)if(V=a[A],V.name===t.name){if(V.state===STARTED)return timeout(d);V.state===RUNNING?(V.state=ENDED,V.timer.stop(),V.on.call("interrupt",r,r.__data__,V.index,V.group),delete a[A]):+A<e&&(V.state=ENDED,V.timer.stop(),V.on.call("cancel",r,r.__data__,V.index,V.group),delete a[A])}if(timeout(function(){t.state===STARTED&&(t.state=RUNNING,t.timer.restart(p,t.delay,t.time),p(S))}),t.state=STARTING,t.on.call("start",r,r.__data__,t.index,t.group),t.state===STARTING){for(t.state=STARTED,o=new Array(j=t.tween.length),A=0,C=-1;A<j;++A)(V=t.tween[A].value.call(r,r.__data__,t.index,t.group))&&(o[++C]=V);o.length=C+1}}function p(S){for(var A=S<t.duration?t.ease.call(null,S/t.duration):(t.timer.restart(_),t.state=ENDING,1),C=-1,j=o.length;++C<j;)o[C].call(r,A);t.state===ENDING&&(t.on.call("end",r,r.__data__,t.index,t.group),_())}function _(){t.state=ENDED,t.timer.stop(),delete a[e];for(var S in a)return;delete r.__transition}}function interrupt(r,e){var t=r.__transition,a,o,c=!0,d;if(t){e=e==null?null:e+"";for(d in t){if((a=t[d]).name!==e){c=!1;continue}o=a.state>STARTING&&a.state<ENDING,a.state=ENDED,a.timer.stop(),a.on.call(o?"interrupt":"cancel",r,r.__data__,a.index,a.group),delete t[d]}c&&delete r.__transition}}function selection_interrupt(r){return this.each(function(){interrupt(this,r)})}function tweenRemove(r,e){var t,a;return function(){var o=set(this,r),c=o.tween;if(c!==t){a=t=c;for(var d=0,p=a.length;d<p;++d)if(a[d].name===e){a=a.slice(),a.splice(d,1);break}}o.tween=a}}function tweenFunction(r,e,t){var a,o;if(typeof t!="function")throw new Error;return function(){var c=set(this,r),d=c.tween;if(d!==a){o=(a=d).slice();for(var p={name:e,value:t},_=0,S=o.length;_<S;++_)if(o[_].name===e){o[_]=p;break}_===S&&o.push(p)}c.tween=o}}function transition_tween(r,e){var t=this._id;if(r+="",arguments.length<2){for(var a=get(this.node(),t).tween,o=0,c=a.length,d;o<c;++o)if((d=a[o]).name===r)return d.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(t,r,e))}function tweenValue(r,e,t){var a=r._id;return r.each(function(){var o=set(this,a);(o.value||(o.value={}))[e]=t.apply(this,arguments)}),function(o){return get(o,a).value[e]}}function interpolate(r,e){var t;return(typeof e=="number"?interpolateNumber:e instanceof color?interpolateRgb:(t=color(e))?(e=t,interpolateRgb):interpolateString)(r,e)}function attrRemove(r){return function(){this.removeAttribute(r)}}function attrRemoveNS(r){return function(){this.removeAttributeNS(r.space,r.local)}}function attrConstant(r,e,t){var a,o=t+"",c;return function(){var d=this.getAttribute(r);return d===o?null:d===a?c:c=e(a=d,t)}}function attrConstantNS(r,e,t){var a,o=t+"",c;return function(){var d=this.getAttributeNS(r.space,r.local);return d===o?null:d===a?c:c=e(a=d,t)}}function attrFunction(r,e,t){var a,o,c;return function(){var d,p=t(this),_;return p==null?void this.removeAttribute(r):(d=this.getAttribute(r),_=p+"",d===_?null:d===a&&_===o?c:(o=_,c=e(a=d,p)))}}function attrFunctionNS(r,e,t){var a,o,c;return function(){var d,p=t(this),_;return p==null?void this.removeAttributeNS(r.space,r.local):(d=this.getAttributeNS(r.space,r.local),_=p+"",d===_?null:d===a&&_===o?c:(o=_,c=e(a=d,p)))}}function transition_attr(r,e){var t=namespace(r),a=t==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(r,typeof e=="function"?(t.local?attrFunctionNS:attrFunction)(t,a,tweenValue(this,"attr."+r,e)):e==null?(t.local?attrRemoveNS:attrRemove)(t):(t.local?attrConstantNS:attrConstant)(t,a,e))}function attrInterpolate(r,e){return function(t){this.setAttribute(r,e.call(this,t))}}function attrInterpolateNS(r,e){return function(t){this.setAttributeNS(r.space,r.local,e.call(this,t))}}function attrTweenNS(r,e){var t,a;function o(){var c=e.apply(this,arguments);return c!==a&&(t=(a=c)&&attrInterpolateNS(r,c)),t}return o._value=e,o}function attrTween(r,e){var t,a;function o(){var c=e.apply(this,arguments);return c!==a&&(t=(a=c)&&attrInterpolate(r,c)),t}return o._value=e,o}function transition_attrTween(r,e){var t="attr."+r;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var a=namespace(r);return this.tween(t,(a.local?attrTweenNS:attrTween)(a,e))}function delayFunction(r,e){return function(){init(this,r).delay=+e.apply(this,arguments)}}function delayConstant(r,e){return e=+e,function(){init(this,r).delay=e}}function transition_delay(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?delayFunction:delayConstant)(e,r)):get(this.node(),e).delay}function durationFunction(r,e){return function(){set(this,r).duration=+e.apply(this,arguments)}}function durationConstant(r,e){return e=+e,function(){set(this,r).duration=e}}function transition_duration(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?durationFunction:durationConstant)(e,r)):get(this.node(),e).duration}function easeConstant(r,e){if(typeof e!="function")throw new Error;return function(){set(this,r).ease=e}}function transition_ease(r){var e=this._id;return arguments.length?this.each(easeConstant(e,r)):get(this.node(),e).ease}function easeVarying(r,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;set(this,r).ease=t}}function transition_easeVarying(r){if(typeof r!="function")throw new Error;return this.each(easeVarying(this._id,r))}function transition_filter(r){typeof r!="function"&&(r=matcher(r));for(var e=this._groups,t=e.length,a=new Array(t),o=0;o<t;++o)for(var c=e[o],d=c.length,p=a[o]=[],_,S=0;S<d;++S)(_=c[S])&&r.call(_,_.__data__,S,c)&&p.push(_);return new Transition(a,this._parents,this._name,this._id)}function transition_merge(r){if(r._id!==this._id)throw new Error;for(var e=this._groups,t=r._groups,a=e.length,o=t.length,c=Math.min(a,o),d=new Array(a),p=0;p<c;++p)for(var _=e[p],S=t[p],A=_.length,C=d[p]=new Array(A),j,V=0;V<A;++V)(j=_[V]||S[V])&&(C[V]=j);for(;p<a;++p)d[p]=e[p];return new Transition(d,this._parents,this._name,this._id)}function start(r){return(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function onFunction(r,e,t){var a,o,c=start(e)?init:set;return function(){var d=c(this,r),p=d.on;p!==a&&(o=(a=p).copy()).on(e,t),d.on=o}}function transition_on(r,e){var t=this._id;return arguments.length<2?get(this.node(),t).on.on(r):this.each(onFunction(t,r,e))}function removeFunction(r){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==r)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(r){var e=this._name,t=this._id;typeof r!="function"&&(r=selector$h(r));for(var a=this._groups,o=a.length,c=new Array(o),d=0;d<o;++d)for(var p=a[d],_=p.length,S=c[d]=new Array(_),A,C,j=0;j<_;++j)(A=p[j])&&(C=r.call(A,A.__data__,j,p))&&("__data__"in A&&(C.__data__=A.__data__),S[j]=C,schedule(S[j],e,t,j,S,get(A,t)));return new Transition(c,this._parents,e,t)}function transition_selectAll(r){var e=this._name,t=this._id;typeof r!="function"&&(r=selectorAll(r));for(var a=this._groups,o=a.length,c=[],d=[],p=0;p<o;++p)for(var _=a[p],S=_.length,A,C=0;C<S;++C)if(A=_[C]){for(var j=r.call(A,A.__data__,C,_),V,J=get(A,t),re=0,ie=j.length;re<ie;++re)(V=j[re])&&schedule(V,e,t,re,j,J);c.push(j),d.push(A)}return new Transition(c,d,e,t)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(r,e){var t,a,o;return function(){var c=styleValue(this,r),d=(this.style.removeProperty(r),styleValue(this,r));return c===d?null:c===t&&d===a?o:o=e(t=c,a=d)}}function styleRemove(r){return function(){this.style.removeProperty(r)}}function styleConstant(r,e,t){var a,o=t+"",c;return function(){var d=styleValue(this,r);return d===o?null:d===a?c:c=e(a=d,t)}}function styleFunction(r,e,t){var a,o,c;return function(){var d=styleValue(this,r),p=t(this),_=p+"";return p==null&&(_=p=(this.style.removeProperty(r),styleValue(this,r))),d===_?null:d===a&&_===o?c:(o=_,c=e(a=d,p))}}function styleMaybeRemove(r,e){var t,a,o,c="style."+e,d="end."+c,p;return function(){var _=set(this,r),S=_.on,A=_.value[c]==null?p||(p=styleRemove(e)):void 0;(S!==t||o!==A)&&(a=(t=S).copy()).on(d,o=A),_.on=a}}function transition_style(r,e,t){var a=(r+="")=="transform"?interpolateTransformCss:interpolate;return e==null?this.styleTween(r,styleNull(r,a)).on("end.style."+r,styleRemove(r)):typeof e=="function"?this.styleTween(r,styleFunction(r,a,tweenValue(this,"style."+r,e))).each(styleMaybeRemove(this._id,r)):this.styleTween(r,styleConstant(r,a,e),t).on("end.style."+r,null)}function styleInterpolate(r,e,t){return function(a){this.style.setProperty(r,e.call(this,a),t)}}function styleTween(r,e,t){var a,o;function c(){var d=e.apply(this,arguments);return d!==o&&(a=(o=d)&&styleInterpolate(r,d,t)),a}return c._value=e,c}function transition_styleTween(r,e,t){var a="style."+(r+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(e==null)return this.tween(a,null);if(typeof e!="function")throw new Error;return this.tween(a,styleTween(r,e,t??""))}function textConstant(r){return function(){this.textContent=r}}function textFunction(r){return function(){var e=r(this);this.textContent=e??""}}function transition_text(r){return this.tween("text",typeof r=="function"?textFunction(tweenValue(this,"text",r)):textConstant(r==null?"":r+""))}function textInterpolate(r){return function(e){this.textContent=r.call(this,e)}}function textTween(r){var e,t;function a(){var o=r.apply(this,arguments);return o!==t&&(e=(t=o)&&textInterpolate(o)),e}return a._value=r,a}function transition_textTween(r){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(r==null)return this.tween(e,null);if(typeof r!="function")throw new Error;return this.tween(e,textTween(r))}function transition_transition(){for(var r=this._name,e=this._id,t=newId(),a=this._groups,o=a.length,c=0;c<o;++c)for(var d=a[c],p=d.length,_,S=0;S<p;++S)if(_=d[S]){var A=get(_,e);schedule(_,r,t,S,d,{time:A.time+A.delay+A.duration,delay:0,duration:A.duration,ease:A.ease})}return new Transition(a,this._parents,r,t)}function transition_end(){var r,e,t=this,a=t._id,o=t.size();return new Promise(function(c,d){var p={value:d},_={value:function(){--o===0&&c()}};t.each(function(){var S=set(this,a),A=S.on;A!==r&&(e=(r=A).copy(),e._.cancel.push(p),e._.interrupt.push(p),e._.end.push(_)),S.on=e}),o===0&&c()})}var id$1=0;function Transition(r,e,t,a){this._groups=r,this._parents=e,this._name=t,this._id=a}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(r,e){for(var t;!(t=r.__transition)||!(t=t[e]);)if(!(r=r.parentNode))throw new Error(`transition ${e} not found`);return t}function selection_transition(r){var e,t;r instanceof Transition?(e=r._id,r=r._name):(e=newId(),(t=defaultTiming).time=now(),r=r==null?null:r+"");for(var a=this._groups,o=a.length,c=0;c<o;++c)for(var d=a[c],p=d.length,_,S=0;S<p;++S)(_=d[S])&&schedule(_,r,e,S,d,t||inherit(_,e));return new Transition(a,this._parents,r,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant=r=>()=>r;function ZoomEvent(r,{sourceEvent:e,target:t,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function Transform(r,e,t){this.k=r,this.x=e,this.y=t}Transform.prototype={constructor:Transform,scale:function(r){return r===1?this:new Transform(this.k*r,this.x,this.y)},translate:function(r,e){return r===0&e===0?this:new Transform(this.k,this.x+this.k*r,this.y+this.k*e)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(r){r.stopImmediatePropagation()}function noevent(r){r.preventDefault(),r.stopImmediatePropagation()}function defaultFilter(r){return(!r.ctrlKey||r.type==="wheel")&&!r.button}function defaultExtent(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r,r.hasAttribute("viewBox")?(r=r.viewBox.baseVal,[[r.x,r.y],[r.x+r.width,r.y+r.height]]):[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]):[[0,0],[r.clientWidth,r.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(r){return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*(r.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(r,e,t){var a=r.invertX(e[0][0])-t[0][0],o=r.invertX(e[1][0])-t[1][0],c=r.invertY(e[0][1])-t[0][1],d=r.invertY(e[1][1])-t[1][1];return r.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d))}function zoom(){var r=defaultFilter,e=defaultExtent,t=defaultConstrain,a=defaultWheelDelta,o=defaultTouchable,c=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],p=250,_=interpolateZoom,S=dispatch("start","zoom","end"),A,C,j,V=500,J=150,re=0,ie=10;function K(_r){_r.property("__zoom",defaultTransform).on("wheel.zoom",be,{passive:!1}).on("mousedown.zoom",ta).on("dblclick.zoom",pn).filter(o).on("touchstart.zoom",mr).on("touchmove.zoom",bp).on("touchend.zoom touchcancel.zoom",Sp).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}K.transform=function(_r,xs,ne,zl){var Hl=_r.selection?_r.selection():_r;Hl.property("__zoom",defaultTransform),_r!==Hl?He(_r,xs,ne,zl):Hl.interrupt().each(function(){Fe(this,arguments).event(zl).start().zoom(null,typeof xs=="function"?xs.apply(this,arguments):xs).end()})},K.scaleBy=function(_r,xs,ne,zl){K.scaleTo(_r,function(){var Hl=this.__zoom.k,pr=typeof xs=="function"?xs.apply(this,arguments):xs;return Hl*pr},ne,zl)},K.scaleTo=function(_r,xs,ne,zl){K.transform(_r,function(){var Hl=e.apply(this,arguments),pr=this.__zoom,Hp=ne==null?se(Hl):typeof ne=="function"?ne.apply(this,arguments):ne,Gl=pr.invert(Hp),Ip=typeof xs=="function"?xs.apply(this,arguments):xs;return t(G(Ne(pr,Ip),Hp,Gl),Hl,d)},ne,zl)},K.translateBy=function(_r,xs,ne,zl){K.transform(_r,function(){return t(this.__zoom.translate(typeof xs=="function"?xs.apply(this,arguments):xs,typeof ne=="function"?ne.apply(this,arguments):ne),e.apply(this,arguments),d)},null,zl)},K.translateTo=function(_r,xs,ne,zl,Hl){K.transform(_r,function(){var pr=e.apply(this,arguments),Hp=this.__zoom,Gl=zl==null?se(pr):typeof zl=="function"?zl.apply(this,arguments):zl;return t(identity.translate(Gl[0],Gl[1]).scale(Hp.k).translate(typeof xs=="function"?-xs.apply(this,arguments):-xs,typeof ne=="function"?-ne.apply(this,arguments):-ne),pr,d)},zl,Hl)};function Ne(_r,xs){return xs=Math.max(c[0],Math.min(c[1],xs)),xs===_r.k?_r:new Transform(xs,_r.x,_r.y)}function G(_r,xs,ne){var zl=xs[0]-ne[0]*_r.k,Hl=xs[1]-ne[1]*_r.k;return zl===_r.x&&Hl===_r.y?_r:new Transform(_r.k,zl,Hl)}function se(_r){return[(+_r[0][0]+ +_r[1][0])/2,(+_r[0][1]+ +_r[1][1])/2]}function He(_r,xs,ne,zl){_r.on("start.zoom",function(){Fe(this,arguments).event(zl).start()}).on("interrupt.zoom end.zoom",function(){Fe(this,arguments).event(zl).end()}).tween("zoom",function(){var Hl=this,pr=arguments,Hp=Fe(Hl,pr).event(zl),Gl=e.apply(Hl,pr),Ip=ne==null?se(Gl):typeof ne=="function"?ne.apply(Hl,pr):ne,qp=Math.max(Gl[1][0]-Gl[0][0],Gl[1][1]-Gl[0][1]),ci=Hl.__zoom,Ep=typeof xs=="function"?xs.apply(Hl,pr):xs,o0=_(ci.invert(Ip).concat(qp/ci.k),Ep.invert(Ip).concat(qp/Ep.k));return function(w0){if(w0===1)w0=Ep;else{var a0=o0(w0),P0=qp/a0[2];w0=new Transform(P0,Ip[0]-a0[0]*P0,Ip[1]-a0[1]*P0)}Hp.zoom(null,w0)}})}function Fe(_r,xs,ne){return!ne&&_r.__zooming||new Xe(_r,xs)}function Xe(_r,xs){this.that=_r,this.args=xs,this.active=0,this.sourceEvent=null,this.extent=e.apply(_r,xs),this.taps=0}Xe.prototype={event:function(_r){return _r&&(this.sourceEvent=_r),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_r,xs){return this.mouse&&_r!=="mouse"&&(this.mouse[1]=xs.invert(this.mouse[0])),this.touch0&&_r!=="touch"&&(this.touch0[1]=xs.invert(this.touch0[0])),this.touch1&&_r!=="touch"&&(this.touch1[1]=xs.invert(this.touch1[0])),this.that.__zoom=xs,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_r){var xs=select(this.that).datum();S.call(_r,this.that,new ZoomEvent(_r,{sourceEvent:this.sourceEvent,target:K,transform:this.that.__zoom,dispatch:S}),xs)}};function be(_r,...xs){if(!r.apply(this,arguments))return;var ne=Fe(this,xs).event(_r),zl=this.__zoom,Hl=Math.max(c[0],Math.min(c[1],zl.k*Math.pow(2,a.apply(this,arguments)))),pr=pointer(_r);if(ne.wheel)(ne.mouse[0][0]!==pr[0]||ne.mouse[0][1]!==pr[1])&&(ne.mouse[1]=zl.invert(ne.mouse[0]=pr)),clearTimeout(ne.wheel);else{if(zl.k===Hl)return;ne.mouse=[pr,zl.invert(pr)],interrupt(this),ne.start()}noevent(_r),ne.wheel=setTimeout(Hp,J),ne.zoom("mouse",t(G(Ne(zl,Hl),ne.mouse[0],ne.mouse[1]),ne.extent,d));function Hp(){ne.wheel=null,ne.end()}}function ta(_r,...xs){if(j||!r.apply(this,arguments))return;var ne=_r.currentTarget,zl=Fe(this,xs,!0).event(_r),Hl=select(_r.view).on("mousemove.zoom",Ip,!0).on("mouseup.zoom",qp,!0),pr=pointer(_r,ne),Hp=_r.clientX,Gl=_r.clientY;dragDisable(_r.view),nopropagation(_r),zl.mouse=[pr,this.__zoom.invert(pr)],interrupt(this),zl.start();function Ip(ci){if(noevent(ci),!zl.moved){var Ep=ci.clientX-Hp,o0=ci.clientY-Gl;zl.moved=Ep*Ep+o0*o0>re}zl.event(ci).zoom("mouse",t(G(zl.that.__zoom,zl.mouse[0]=pointer(ci,ne),zl.mouse[1]),zl.extent,d))}function qp(ci){Hl.on("mousemove.zoom mouseup.zoom",null),yesdrag(ci.view,zl.moved),noevent(ci),zl.event(ci).end()}}function pn(_r,...xs){if(r.apply(this,arguments)){var ne=this.__zoom,zl=pointer(_r.changedTouches?_r.changedTouches[0]:_r,this),Hl=ne.invert(zl),pr=ne.k*(_r.shiftKey?.5:2),Hp=t(G(Ne(ne,pr),zl,Hl),e.apply(this,xs),d);noevent(_r),p>0?select(this).transition().duration(p).call(He,Hp,zl,_r):select(this).call(K.transform,Hp,zl,_r)}}function mr(_r,...xs){if(r.apply(this,arguments)){var ne=_r.touches,zl=ne.length,Hl=Fe(this,xs,_r.changedTouches.length===zl).event(_r),pr,Hp,Gl,Ip;for(nopropagation(_r),Hp=0;Hp<zl;++Hp)Gl=ne[Hp],Ip=pointer(Gl,this),Ip=[Ip,this.__zoom.invert(Ip),Gl.identifier],Hl.touch0?!Hl.touch1&&Hl.touch0[2]!==Ip[2]&&(Hl.touch1=Ip,Hl.taps=0):(Hl.touch0=Ip,pr=!0,Hl.taps=1+!!A);A&&(A=clearTimeout(A)),pr&&(Hl.taps<2&&(C=Ip[0],A=setTimeout(function(){A=null},V)),interrupt(this),Hl.start())}}function bp(_r,...xs){if(this.__zooming){var ne=Fe(this,xs).event(_r),zl=_r.changedTouches,Hl=zl.length,pr,Hp,Gl,Ip;for(noevent(_r),pr=0;pr<Hl;++pr)Hp=zl[pr],Gl=pointer(Hp,this),ne.touch0&&ne.touch0[2]===Hp.identifier?ne.touch0[0]=Gl:ne.touch1&&ne.touch1[2]===Hp.identifier&&(ne.touch1[0]=Gl);if(Hp=ne.that.__zoom,ne.touch1){var qp=ne.touch0[0],ci=ne.touch0[1],Ep=ne.touch1[0],o0=ne.touch1[1],w0=(w0=Ep[0]-qp[0])*w0+(w0=Ep[1]-qp[1])*w0,a0=(a0=o0[0]-ci[0])*a0+(a0=o0[1]-ci[1])*a0;Hp=Ne(Hp,Math.sqrt(w0/a0)),Gl=[(qp[0]+Ep[0])/2,(qp[1]+Ep[1])/2],Ip=[(ci[0]+o0[0])/2,(ci[1]+o0[1])/2]}else if(ne.touch0)Gl=ne.touch0[0],Ip=ne.touch0[1];else return;ne.zoom("touch",t(G(Hp,Gl,Ip),ne.extent,d))}}function Sp(_r,...xs){if(this.__zooming){var ne=Fe(this,xs).event(_r),zl=_r.changedTouches,Hl=zl.length,pr,Hp;for(nopropagation(_r),j&&clearTimeout(j),j=setTimeout(function(){j=null},V),pr=0;pr<Hl;++pr)Hp=zl[pr],ne.touch0&&ne.touch0[2]===Hp.identifier?delete ne.touch0:ne.touch1&&ne.touch1[2]===Hp.identifier&&delete ne.touch1;if(ne.touch1&&!ne.touch0&&(ne.touch0=ne.touch1,delete ne.touch1),ne.touch0)ne.touch0[1]=this.__zoom.invert(ne.touch0[0]);else if(ne.end(),ne.taps===2&&(Hp=pointer(Hp,this),Math.hypot(C[0]-Hp[0],C[1]-Hp[1])<ie)){var Gl=select(this).on("dblclick.zoom");Gl&&Gl.apply(this,arguments)}}}return K.wheelDelta=function(_r){return arguments.length?(a=typeof _r=="function"?_r:constant(+_r),K):a},K.filter=function(_r){return arguments.length?(r=typeof _r=="function"?_r:constant(!!_r),K):r},K.touchable=function(_r){return arguments.length?(o=typeof _r=="function"?_r:constant(!!_r),K):o},K.extent=function(_r){return arguments.length?(e=typeof _r=="function"?_r:constant([[+_r[0][0],+_r[0][1]],[+_r[1][0],+_r[1][1]]]),K):e},K.scaleExtent=function(_r){return arguments.length?(c[0]=+_r[0],c[1]=+_r[1],K):[c[0],c[1]]},K.translateExtent=function(_r){return arguments.length?(d[0][0]=+_r[0][0],d[1][0]=+_r[1][0],d[0][1]=+_r[0][1],d[1][1]=+_r[1][1],K):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},K.constrain=function(_r){return arguments.length?(t=_r,K):t},K.duration=function(_r){return arguments.length?(p=+_r,K):p},K.interpolate=function(_r){return arguments.length?(_=_r,K):_},K.on=function(){var _r=S.on.apply(S,arguments);return _r===S?K:_r},K.clickDistance=function(_r){return arguments.length?(re=(_r=+_r)*_r,K):Math.sqrt(re)},K.tapDistance=function(_r){return arguments.length?(ie=+_r,K):ie},K}const StoreContext=reactExports.createContext(null),Provider$1=StoreContext.Provider,errorMessages={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:r=>`Node type "${r}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:r=>`The old edge with id=${r} does not exist.`,error009:r=>`Marker type "${r}" doesn't exist.`,error008:(r,e)=>`Couldn't create edge for ${r?"target":"source"} handle id: "${r?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:r=>`Edge type "${r}" not found. Using fallback type "default".`,error012:r=>`Node with id "${r}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},zustandErrorMessage=errorMessages.error001();function useStore(r,e){const t=reactExports.useContext(StoreContext);if(t===null)throw new Error(zustandErrorMessage);return useStoreWithEqualityFn(t,r,e)}const useStoreApi=()=>{const r=reactExports.useContext(StoreContext);if(r===null)throw new Error(zustandErrorMessage);return reactExports.useMemo(()=>({getState:r.getState,setState:r.setState,subscribe:r.subscribe,destroy:r.destroy}),[r])},selector$g=r=>r.userSelectionActive?"none":"all";function Panel({position:r,children:e,className:t,style:a,...o}){const c=useStore(selector$g),d=`${r}`.split("-");return React.createElement("div",{className:cc$1(["react-flow__panel",t,...d]),style:{...a,pointerEvents:c},...o},e)}function Attribution({proOptions:r,position:e="bottom-right"}){return r?.hideAttribution?null:React.createElement(Panel,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},React.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EdgeText=({x:r,y:e,label:t,labelStyle:a={},labelShowBg:o=!0,labelBgStyle:c={},labelBgPadding:d=[2,4],labelBgBorderRadius:p=2,children:_,className:S,...A})=>{const C=reactExports.useRef(null),[j,V]=reactExports.useState({x:0,y:0,width:0,height:0}),J=cc$1(["react-flow__edge-textwrapper",S]);return reactExports.useEffect(()=>{if(C.current){const re=C.current.getBBox();V({x:re.x,y:re.y,width:re.width,height:re.height})}},[t]),typeof t>"u"||!t?null:React.createElement("g",{transform:`translate(${r-j.width/2} ${e-j.height/2})`,className:J,visibility:j.width?"visible":"hidden",...A},o&&React.createElement("rect",{width:j.width+2*d[0],x:-d[0],y:-d[1],height:j.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:p,ry:p}),React.createElement("text",{className:"react-flow__edge-text",y:j.height/2,dy:"0.3em",ref:C,style:a},t),_)};var EdgeText$1=reactExports.memo(EdgeText);const getDimensions=r=>({width:r.offsetWidth,height:r.offsetHeight}),clamp=(r,e=0,t=1)=>Math.min(Math.max(r,e),t),clampPosition=(r={x:0,y:0},e)=>({x:clamp(r.x,e[0][0],e[1][0]),y:clamp(r.y,e[0][1],e[1][1])}),calcAutoPanVelocity=(r,e,t)=>r<e?clamp(Math.abs(r-e),1,50)/50:r>t?-clamp(Math.abs(r-t),1,50)/50:0,calcAutoPan=(r,e)=>{const t=calcAutoPanVelocity(r.x,35,e.width-35)*20,a=calcAutoPanVelocity(r.y,35,e.height-35)*20;return[t,a]},getHostForElement=r=>r.getRootNode?.()||window?.document,getBoundsOfBoxes=(r,e)=>({x:Math.min(r.x,e.x),y:Math.min(r.y,e.y),x2:Math.max(r.x2,e.x2),y2:Math.max(r.y2,e.y2)}),rectToBox=({x:r,y:e,width:t,height:a})=>({x:r,y:e,x2:r+t,y2:e+a}),boxToRect=({x:r,y:e,x2:t,y2:a})=>({x:r,y:e,width:t-r,height:a-e}),nodeToRect=r=>({...r.positionAbsolute||{x:0,y:0},width:r.width||0,height:r.height||0}),getOverlappingArea=(r,e)=>{const t=Math.max(0,Math.min(r.x+r.width,e.x+e.width)-Math.max(r.x,e.x)),a=Math.max(0,Math.min(r.y+r.height,e.y+e.height)-Math.max(r.y,e.y));return Math.ceil(t*a)},isRectObject=r=>isNumeric(r.width)&&isNumeric(r.height)&&isNumeric(r.x)&&isNumeric(r.y),isNumeric=r=>!isNaN(r)&&isFinite(r),internalsSymbol=Symbol.for("internals"),elementSelectionKeys=["Enter"," ","Escape"],devWarn=(r,e)=>{},isReactKeyboardEvent=r=>"nativeEvent"in r;function isInputDOMNode(r){const t=(isReactKeyboardEvent(r)?r.nativeEvent:r).composedPath?.()?.[0]||r.target;return["INPUT","SELECT","TEXTAREA"].includes(t?.nodeName)||t?.hasAttribute("contenteditable")||!!t?.closest(".nokey")}const isMouseEvent=r=>"clientX"in r,getEventPosition=(r,e)=>{const t=isMouseEvent(r),a=t?r.clientX:r.touches?.[0].clientX,o=t?r.clientY:r.touches?.[0].clientY;return{x:a-(e?.left??0),y:o-(e?.top??0)}},isMacOs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,BaseEdge=({id:r,path:e,labelX:t,labelY:a,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:S,style:A,markerEnd:C,markerStart:j,interactionWidth:V=20})=>React.createElement(React.Fragment,null,React.createElement("path",{id:r,style:A,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:C,markerStart:j}),V&&React.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:V,className:"react-flow__edge-interaction"}),o&&isNumeric(t)&&isNumeric(a)?React.createElement(EdgeText$1,{x:t,y:a,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:S}):null);BaseEdge.displayName="BaseEdge";function getMouseHandler$1(r,e,t){return t===void 0?t:a=>{const o=e().edges.find(c=>c.id===r);o&&t(a,{...o})}}function getEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a}){const o=Math.abs(t-r)/2,c=t<r?t+o:t-o,d=Math.abs(a-e)/2,p=a<e?a+d:a-d;return[c,p,o,d]}function getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:d,targetControlY:p}){const _=r*.125+o*.375+d*.375+t*.125,S=e*.125+c*.375+p*.375+a*.125,A=Math.abs(_-r),C=Math.abs(S-e);return[_,S,A,C]}var ConnectionMode;(function(r){r.Strict="strict",r.Loose="loose"})(ConnectionMode||(ConnectionMode={}));var PanOnScrollMode;(function(r){r.Free="free",r.Vertical="vertical",r.Horizontal="horizontal"})(PanOnScrollMode||(PanOnScrollMode={}));var SelectionMode;(function(r){r.Partial="partial",r.Full="full"})(SelectionMode||(SelectionMode={}));var ConnectionLineType;(function(r){r.Bezier="default",r.Straight="straight",r.Step="step",r.SmoothStep="smoothstep",r.SimpleBezier="simplebezier"})(ConnectionLineType||(ConnectionLineType={}));var MarkerType;(function(r){r.Arrow="arrow",r.ArrowClosed="arrowclosed"})(MarkerType||(MarkerType={}));var Position;(function(r){r.Left="left",r.Top="top",r.Right="right",r.Bottom="bottom"})(Position||(Position={}));function getControl({pos:r,x1:e,y1:t,x2:a,y2:o}){return r===Position.Left||r===Position.Right?[.5*(e+a),t]:[e,.5*(t+o)]}function getSimpleBezierPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:o,targetPosition:c=Position.Top}){const[d,p]=getControl({pos:t,x1:r,y1:e,x2:a,y2:o}),[_,S]=getControl({pos:c,x1:a,y1:o,x2:r,y2:e}),[A,C,j,V]=getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:a,targetY:o,sourceControlX:d,sourceControlY:p,targetControlX:_,targetControlY:S});return[`M${r},${e} C${d},${p} ${_},${S} ${a},${o}`,A,C,j,V]}const SimpleBezierEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,sourcePosition:o=Position.Bottom,targetPosition:c=Position.Top,label:d,labelStyle:p,labelShowBg:_,labelBgStyle:S,labelBgPadding:A,labelBgBorderRadius:C,style:j,markerEnd:V,markerStart:J,interactionWidth:re})=>{const[ie,K,Ne]=getSimpleBezierPath({sourceX:r,sourceY:e,sourcePosition:o,targetX:t,targetY:a,targetPosition:c});return React.createElement(BaseEdge,{path:ie,labelX:K,labelY:Ne,label:d,labelStyle:p,labelShowBg:_,labelBgStyle:S,labelBgPadding:A,labelBgBorderRadius:C,style:j,markerEnd:V,markerStart:J,interactionWidth:re})});SimpleBezierEdge.displayName="SimpleBezierEdge";const handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source:r,sourcePosition:e=Position.Bottom,target:t})=>e===Position.Left||e===Position.Right?r.x<t.x?{x:1,y:0}:{x:-1,y:0}:r.y<t.y?{x:0,y:1}:{x:0,y:-1},distance=(r,e)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2));function getPoints({source:r,sourcePosition:e=Position.Bottom,target:t,targetPosition:a=Position.Top,center:o,offset:c}){const d=handleDirections[e],p=handleDirections[a],_={x:r.x+d.x*c,y:r.y+d.y*c},S={x:t.x+p.x*c,y:t.y+p.y*c},A=getDirection({source:_,sourcePosition:e,target:S}),C=A.x!==0?"x":"y",j=A[C];let V=[],J,re;const ie={x:0,y:0},K={x:0,y:0},[Ne,G,se,He]=getEdgeCenter({sourceX:r.x,sourceY:r.y,targetX:t.x,targetY:t.y});if(d[C]*p[C]===-1){J=o.x??Ne,re=o.y??G;const Xe=[{x:J,y:_.y},{x:J,y:S.y}],be=[{x:_.x,y:re},{x:S.x,y:re}];d[C]===j?V=C==="x"?Xe:be:V=C==="x"?be:Xe}else{const Xe=[{x:_.x,y:S.y}],be=[{x:S.x,y:_.y}];if(C==="x"?V=d.x===j?be:Xe:V=d.y===j?Xe:be,e===a){const Sp=Math.abs(r[C]-t[C]);if(Sp<=c){const _r=Math.min(c-1,c-Sp);d[C]===j?ie[C]=(_[C]>r[C]?-1:1)*_r:K[C]=(S[C]>t[C]?-1:1)*_r}}if(e!==a){const Sp=C==="x"?"y":"x",_r=d[C]===p[Sp],xs=_[Sp]>S[Sp],ne=_[Sp]<S[Sp];(d[C]===1&&(!_r&&xs||_r&&ne)||d[C]!==1&&(!_r&&ne||_r&&xs))&&(V=C==="x"?Xe:be)}const ta={x:_.x+ie.x,y:_.y+ie.y},pn={x:S.x+K.x,y:S.y+K.y},mr=Math.max(Math.abs(ta.x-V[0].x),Math.abs(pn.x-V[0].x)),bp=Math.max(Math.abs(ta.y-V[0].y),Math.abs(pn.y-V[0].y));mr>=bp?(J=(ta.x+pn.x)/2,re=V[0].y):(J=V[0].x,re=(ta.y+pn.y)/2)}return[[r,{x:_.x+ie.x,y:_.y+ie.y},...V,{x:S.x+K.x,y:S.y+K.y},t],J,re,se,He]}function getBend(r,e,t,a){const o=Math.min(distance(r,e)/2,distance(e,t)/2,a),{x:c,y:d}=e;if(r.x===c&&c===t.x||r.y===d&&d===t.y)return`L${c} ${d}`;if(r.y===d){const S=r.x<t.x?-1:1,A=r.y<t.y?1:-1;return`L ${c+o*S},${d}Q ${c},${d} ${c},${d+o*A}`}const p=r.x<t.x?1:-1,_=r.y<t.y?-1:1;return`L ${c},${d+o*_}Q ${c},${d} ${c+o*p},${d}`}function getSmoothStepPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:o,targetPosition:c=Position.Top,borderRadius:d=5,centerX:p,centerY:_,offset:S=20}){const[A,C,j,V,J]=getPoints({source:{x:r,y:e},sourcePosition:t,target:{x:a,y:o},targetPosition:c,center:{x:p,y:_},offset:S});return[A.reduce((ie,K,Ne)=>{let G="";return Ne>0&&Ne<A.length-1?G=getBend(A[Ne-1],K,A[Ne+1],d):G=`${Ne===0?"M":"L"}${K.x} ${K.y}`,ie+=G,ie},""),C,j,V,J]}const SmoothStepEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:S,style:A,sourcePosition:C=Position.Bottom,targetPosition:j=Position.Top,markerEnd:V,markerStart:J,pathOptions:re,interactionWidth:ie})=>{const[K,Ne,G]=getSmoothStepPath({sourceX:r,sourceY:e,sourcePosition:C,targetX:t,targetY:a,targetPosition:j,borderRadius:re?.borderRadius,offset:re?.offset});return React.createElement(BaseEdge,{path:K,labelX:Ne,labelY:G,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:S,style:A,markerEnd:V,markerStart:J,interactionWidth:ie})});SmoothStepEdge.displayName="SmoothStepEdge";const StepEdge=reactExports.memo(r=>React.createElement(SmoothStepEdge,{...r,pathOptions:reactExports.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])}));StepEdge.displayName="StepEdge";function getStraightPath({sourceX:r,sourceY:e,targetX:t,targetY:a}){const[o,c,d,p]=getEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a});return[`M ${r},${e}L ${t},${a}`,o,c,d,p]}const StraightEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:S,style:A,markerEnd:C,markerStart:j,interactionWidth:V})=>{const[J,re,ie]=getStraightPath({sourceX:r,sourceY:e,targetX:t,targetY:a});return React.createElement(BaseEdge,{path:J,labelX:re,labelY:ie,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:p,labelBgPadding:_,labelBgBorderRadius:S,style:A,markerEnd:C,markerStart:j,interactionWidth:V})});StraightEdge.displayName="StraightEdge";function calculateControlOffset(r,e){return r>=0?.5*r:e*25*Math.sqrt(-r)}function getControlWithCurvature({pos:r,x1:e,y1:t,x2:a,y2:o,c}){switch(r){case Position.Left:return[e-calculateControlOffset(e-a,c),t];case Position.Right:return[e+calculateControlOffset(a-e,c),t];case Position.Top:return[e,t-calculateControlOffset(t-o,c)];case Position.Bottom:return[e,t+calculateControlOffset(o-t,c)]}}function getBezierPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:o,targetPosition:c=Position.Top,curvature:d=.25}){const[p,_]=getControlWithCurvature({pos:t,x1:r,y1:e,x2:a,y2:o,c:d}),[S,A]=getControlWithCurvature({pos:c,x1:a,y1:o,x2:r,y2:e,c:d}),[C,j,V,J]=getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:a,targetY:o,sourceControlX:p,sourceControlY:_,targetControlX:S,targetControlY:A});return[`M${r},${e} C${p},${_} ${S},${A} ${a},${o}`,C,j,V,J]}const BezierEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,sourcePosition:o=Position.Bottom,targetPosition:c=Position.Top,label:d,labelStyle:p,labelShowBg:_,labelBgStyle:S,labelBgPadding:A,labelBgBorderRadius:C,style:j,markerEnd:V,markerStart:J,pathOptions:re,interactionWidth:ie})=>{const[K,Ne,G]=getBezierPath({sourceX:r,sourceY:e,sourcePosition:o,targetX:t,targetY:a,targetPosition:c,curvature:re?.curvature});return React.createElement(BaseEdge,{path:K,labelX:Ne,labelY:G,label:d,labelStyle:p,labelShowBg:_,labelBgStyle:S,labelBgPadding:A,labelBgBorderRadius:C,style:j,markerEnd:V,markerStart:J,interactionWidth:ie})});BezierEdge.displayName="BezierEdge";const NodeIdContext=reactExports.createContext(null),Provider=NodeIdContext.Provider;NodeIdContext.Consumer;const useNodeId=()=>reactExports.useContext(NodeIdContext),isEdge=r=>"id"in r&&"source"in r&&"target"in r,getEdgeId=({source:r,sourceHandle:e,target:t,targetHandle:a})=>`reactflow__edge-${r}${e||""}-${t}${a||""}`,getMarkerId=(r,e)=>typeof r>"u"?"":typeof r=="string"?r:`${e?`${e}__`:""}${Object.keys(r).sort().map(a=>`${a}=${r[a]}`).join("&")}`,connectionExists=(r,e)=>e.some(t=>t.source===r.source&&t.target===r.target&&(t.sourceHandle===r.sourceHandle||!t.sourceHandle&&!r.sourceHandle)&&(t.targetHandle===r.targetHandle||!t.targetHandle&&!r.targetHandle)),addEdge=(r,e)=>{if(!r.source||!r.target)return e;let t;return isEdge(r)?t={...r}:t={...r,id:getEdgeId(r)},connectionExists(t,e)?e:e.concat(t)},pointToRendererPoint=({x:r,y:e},[t,a,o],c,[d,p])=>{const _={x:(r-t)/o,y:(e-a)/o};return c?{x:d*Math.round(_.x/d),y:p*Math.round(_.y/p)}:_},rendererPointToPoint=({x:r,y:e},[t,a,o])=>({x:r*o+t,y:e*o+a}),getNodePositionWithOrigin=(r,e=[0,0])=>{if(!r)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const t=(r.width??0)*e[0],a=(r.height??0)*e[1],o={x:r.position.x-t,y:r.position.y-a};return{...o,positionAbsolute:r.positionAbsolute?{x:r.positionAbsolute.x-t,y:r.positionAbsolute.y-a}:o}},getNodesBounds=(r,e=[0,0])=>{if(r.length===0)return{x:0,y:0,width:0,height:0};const t=r.reduce((a,o)=>{const{x:c,y:d}=getNodePositionWithOrigin(o,e).positionAbsolute;return getBoundsOfBoxes(a,rectToBox({x:c,y:d,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return boxToRect(t)},getNodesInside=(r,e,[t,a,o]=[0,0,1],c=!1,d=!1,p=[0,0])=>{const _={x:(e.x-t)/o,y:(e.y-a)/o,width:e.width/o,height:e.height/o},S=[];return r.forEach(A=>{const{width:C,height:j,selectable:V=!0,hidden:J=!1}=A;if(d&&!V||J)return!1;const{positionAbsolute:re}=getNodePositionWithOrigin(A,p),ie={x:re.x,y:re.y,width:C||0,height:j||0},K=getOverlappingArea(_,ie),Ne=typeof C>"u"||typeof j>"u"||C===null||j===null,G=c&&K>0,se=(C||0)*(j||0);(Ne||G||K>=se||A.dragging)&&S.push(A)}),S},getConnectedEdges=(r,e)=>{const t=r.map(a=>a.id);return e.filter(a=>t.includes(a.source)||t.includes(a.target))},getViewportForBounds=(r,e,t,a,o,c=.1)=>{const d=e/(r.width*(1+c)),p=t/(r.height*(1+c)),_=Math.min(d,p),S=clamp(_,a,o),A=r.x+r.width/2,C=r.y+r.height/2,j=e/2-A*S,V=t/2-C*S;return{x:j,y:V,zoom:S}},getD3Transition=(r,e=0)=>r.transition().duration(e);function getHandles(r,e,t,a){return(e[t]||[]).reduce((o,c)=>(`${r.id}-${c.id}-${t}`!==a&&o.push({id:c.id||null,type:t,nodeId:r.id,x:(r.positionAbsolute?.x??0)+c.x+c.width/2,y:(r.positionAbsolute?.y??0)+c.y+c.height/2}),o),[])}function getClosestHandle(r,e,t,a,o,c){const{x:d,y:p}=getEventPosition(r),S=e.elementsFromPoint(d,p).find(J=>J.classList.contains("react-flow__handle"));if(S){const J=S.getAttribute("data-nodeid");if(J){const re=getHandleType(void 0,S),ie=S.getAttribute("data-handleid"),K=c({nodeId:J,id:ie,type:re});if(K){const Ne=o.find(G=>G.nodeId===J&&G.type===re&&G.id===ie);return{handle:{id:ie,type:re,nodeId:J,x:Ne?.x||t.x,y:Ne?.y||t.y},validHandleResult:K}}}}let A=[],C=1/0;if(o.forEach(J=>{const re=Math.sqrt((J.x-t.x)**2+(J.y-t.y)**2);if(re<=a){const ie=c(J);re<=C&&(re<C?A=[{handle:J,validHandleResult:ie}]:re===C&&A.push({handle:J,validHandleResult:ie}),C=re)}}),!A.length)return{handle:null,validHandleResult:defaultResult()};if(A.length===1)return A[0];const j=A.some(({validHandleResult:J})=>J.isValid),V=A.some(({handle:J})=>J.type==="target");return A.find(({handle:J,validHandleResult:re})=>V?J.type==="target":j?re.isValid:!0)||A[0]}const nullConnection={source:null,target:null,sourceHandle:null,targetHandle:null},defaultResult=()=>({handleDomNode:null,isValid:!1,connection:nullConnection,endHandle:null});function isValidHandle(r,e,t,a,o,c,d){const p=o==="target",_=d.querySelector(`.react-flow__handle[data-id="${r?.nodeId}-${r?.id}-${r?.type}"]`),S={...defaultResult(),handleDomNode:_};if(_){const A=getHandleType(void 0,_),C=_.getAttribute("data-nodeid"),j=_.getAttribute("data-handleid"),V=_.classList.contains("connectable"),J=_.classList.contains("connectableend"),re={source:p?C:t,sourceHandle:p?j:a,target:p?t:C,targetHandle:p?a:j};S.connection=re,V&&J&&(e===ConnectionMode.Strict?p&&A==="source"||!p&&A==="target":C!==t||j!==a)&&(S.endHandle={nodeId:C,handleId:j,type:A},S.isValid=c(re))}return S}function getHandleLookup({nodes:r,nodeId:e,handleId:t,handleType:a}){return r.reduce((o,c)=>{if(c[internalsSymbol]){const{handleBounds:d}=c[internalsSymbol];let p=[],_=[];d&&(p=getHandles(c,d,"source",`${e}-${t}-${a}`),_=getHandles(c,d,"target",`${e}-${t}-${a}`)),o.push(...p,..._)}return o},[])}function getHandleType(r,e){return r||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function resetRecentHandle(r){r?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function getConnectionStatus(r,e){let t=null;return e?t="valid":r&&!e&&(t="invalid"),t}function handlePointerDown({event:r,handleId:e,nodeId:t,onConnect:a,isTarget:o,getState:c,setState:d,isValidConnection:p,edgeUpdaterType:_,onReconnectEnd:S}){const A=getHostForElement(r.target),{connectionMode:C,domNode:j,autoPanOnConnect:V,connectionRadius:J,onConnectStart:re,panBy:ie,getNodes:K,cancelConnection:Ne}=c();let G=0,se;const{x:He,y:Fe}=getEventPosition(r),Xe=A?.elementFromPoint(He,Fe),be=getHandleType(_,Xe),ta=j?.getBoundingClientRect();if(!ta||!be)return;let pn,mr=getEventPosition(r,ta),bp=!1,Sp=null,_r=!1,xs=null;const ne=getHandleLookup({nodes:K(),nodeId:t,handleId:e,handleType:be}),zl=()=>{if(!V)return;const[Hp,Gl]=calcAutoPan(mr,ta);ie({x:Hp,y:Gl}),G=requestAnimationFrame(zl)};d({connectionPosition:mr,connectionStatus:null,connectionNodeId:t,connectionHandleId:e,connectionHandleType:be,connectionStartHandle:{nodeId:t,handleId:e,type:be},connectionEndHandle:null}),re?.(r,{nodeId:t,handleId:e,handleType:be});function Hl(Hp){const{transform:Gl}=c();mr=getEventPosition(Hp,ta);const{handle:Ip,validHandleResult:qp}=getClosestHandle(Hp,A,pointToRendererPoint(mr,Gl,!1,[1,1]),J,ne,ci=>isValidHandle(ci,C,t,e,o?"target":"source",p,A));if(se=Ip,bp||(zl(),bp=!0),xs=qp.handleDomNode,Sp=qp.connection,_r=qp.isValid,d({connectionPosition:se&&_r?rendererPointToPoint({x:se.x,y:se.y},Gl):mr,connectionStatus:getConnectionStatus(!!se,_r),connectionEndHandle:qp.endHandle}),!se&&!_r&&!xs)return resetRecentHandle(pn);Sp.source!==Sp.target&&xs&&(resetRecentHandle(pn),pn=xs,xs.classList.add("connecting","react-flow__handle-connecting"),xs.classList.toggle("valid",_r),xs.classList.toggle("react-flow__handle-valid",_r))}function pr(Hp){(se||xs)&&Sp&&_r&&a?.(Sp),c().onConnectEnd?.(Hp),_&&S?.(Hp),resetRecentHandle(pn),Ne(),cancelAnimationFrame(G),bp=!1,_r=!1,Sp=null,xs=null,A.removeEventListener("mousemove",Hl),A.removeEventListener("mouseup",pr),A.removeEventListener("touchmove",Hl),A.removeEventListener("touchend",pr)}A.addEventListener("mousemove",Hl),A.addEventListener("mouseup",pr),A.addEventListener("touchmove",Hl),A.addEventListener("touchend",pr)}const alwaysValid=()=>!0,selector$f=r=>({connectionStartHandle:r.connectionStartHandle,connectOnClick:r.connectOnClick,noPanClassName:r.noPanClassName}),connectingSelector=(r,e,t)=>a=>{const{connectionStartHandle:o,connectionEndHandle:c,connectionClickStartHandle:d}=a;return{connecting:o?.nodeId===r&&o?.handleId===e&&o?.type===t||c?.nodeId===r&&c?.handleId===e&&c?.type===t,clickConnecting:d?.nodeId===r&&d?.handleId===e&&d?.type===t}},Handle=reactExports.forwardRef(({type:r="source",position:e=Position.Top,isValidConnection:t,isConnectable:a=!0,isConnectableStart:o=!0,isConnectableEnd:c=!0,id:d,onConnect:p,children:_,className:S,onMouseDown:A,onTouchStart:C,...j},V)=>{const J=d||null,re=r==="target",ie=useStoreApi(),K=useNodeId(),{connectOnClick:Ne,noPanClassName:G}=useStore(selector$f,shallow$1),{connecting:se,clickConnecting:He}=useStore(connectingSelector(K,J,r),shallow$1);K||ie.getState().onError?.("010",errorMessages.error010());const Fe=ta=>{const{defaultEdgeOptions:pn,onConnect:mr,hasDefaultEdges:bp}=ie.getState(),Sp={...pn,...ta};if(bp){const{edges:_r,setEdges:xs}=ie.getState();xs(addEdge(Sp,_r))}mr?.(Sp),p?.(Sp)},Xe=ta=>{if(!K)return;const pn=isMouseEvent(ta);o&&(pn&&ta.button===0||!pn)&&handlePointerDown({event:ta,handleId:J,nodeId:K,onConnect:Fe,isTarget:re,getState:ie.getState,setState:ie.setState,isValidConnection:t||ie.getState().isValidConnection||alwaysValid}),pn?A?.(ta):C?.(ta)},be=ta=>{const{onClickConnectStart:pn,onClickConnectEnd:mr,connectionClickStartHandle:bp,connectionMode:Sp,isValidConnection:_r}=ie.getState();if(!K||!bp&&!o)return;if(!bp){pn?.(ta,{nodeId:K,handleId:J,handleType:r}),ie.setState({connectionClickStartHandle:{nodeId:K,type:r,handleId:J}});return}const xs=getHostForElement(ta.target),ne=t||_r||alwaysValid,{connection:zl,isValid:Hl}=isValidHandle({nodeId:K,id:J,type:r},Sp,bp.nodeId,bp.handleId||null,bp.type,ne,xs);Hl&&Fe(zl),mr?.(ta),ie.setState({connectionClickStartHandle:null})};return React.createElement("div",{"data-handleid":J,"data-nodeid":K,"data-handlepos":e,"data-id":`${K}-${J}-${r}`,className:cc$1(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",G,S,{source:!re,target:re,connectable:a,connectablestart:o,connectableend:c,connecting:He,connectionindicator:a&&(o&&!se||c&&se)}]),onMouseDown:Xe,onTouchStart:Xe,onClick:Ne?be:void 0,ref:V,...j},_)});Handle.displayName="Handle";var Handle$1=reactExports.memo(Handle);const DefaultNode=({data:r,isConnectable:e,targetPosition:t=Position.Top,sourcePosition:a=Position.Bottom})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:t,isConnectable:e}),r?.label,React.createElement(Handle$1,{type:"source",position:a,isConnectable:e}));DefaultNode.displayName="DefaultNode";var DefaultNode$1=reactExports.memo(DefaultNode);const InputNode=({data:r,isConnectable:e,sourcePosition:t=Position.Bottom})=>React.createElement(React.Fragment,null,r?.label,React.createElement(Handle$1,{type:"source",position:t,isConnectable:e}));InputNode.displayName="InputNode";var InputNode$1=reactExports.memo(InputNode);const OutputNode=({data:r,isConnectable:e,targetPosition:t=Position.Top})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:t,isConnectable:e}),r?.label);OutputNode.displayName="OutputNode";var OutputNode$1=reactExports.memo(OutputNode);const GroupNode=()=>null;GroupNode.displayName="GroupNode";const selector$e=r=>({selectedNodes:r.getNodes().filter(e=>e.selected),selectedEdges:r.edges.filter(e=>e.selected).map(e=>({...e}))}),selectId=r=>r.id;function areEqual(r,e){return shallow$1(r.selectedNodes.map(selectId),e.selectedNodes.map(selectId))&&shallow$1(r.selectedEdges.map(selectId),e.selectedEdges.map(selectId))}const SelectionListener=reactExports.memo(({onSelectionChange:r})=>{const e=useStoreApi(),{selectedNodes:t,selectedEdges:a}=useStore(selector$e,areEqual);return reactExports.useEffect(()=>{const o={nodes:t,edges:a};r?.(o),e.getState().onSelectionChange.forEach(c=>c(o))},[t,a,r]),null});SelectionListener.displayName="SelectionListener";const changeSelector=r=>!!r.onSelectionChange;function Wrapper$1({onSelectionChange:r}){const e=useStore(changeSelector);return r||e?React.createElement(SelectionListener,{onSelectionChange:r}):null}const selector$d=r=>({setNodes:r.setNodes,setEdges:r.setEdges,setDefaultNodesAndEdges:r.setDefaultNodesAndEdges,setMinZoom:r.setMinZoom,setMaxZoom:r.setMaxZoom,setTranslateExtent:r.setTranslateExtent,setNodeExtent:r.setNodeExtent,reset:r.reset});function useStoreUpdater(r,e){reactExports.useEffect(()=>{typeof r<"u"&&e(r)},[r])}function useDirectStoreUpdater(r,e,t){reactExports.useEffect(()=>{typeof e<"u"&&t({[r]:e})},[e])}const StoreUpdater=({nodes:r,edges:e,defaultNodes:t,defaultEdges:a,onConnect:o,onConnectStart:c,onConnectEnd:d,onClickConnectStart:p,onClickConnectEnd:_,nodesDraggable:S,nodesConnectable:A,nodesFocusable:C,edgesFocusable:j,edgesUpdatable:V,elevateNodesOnSelect:J,minZoom:re,maxZoom:ie,nodeExtent:K,onNodesChange:Ne,onEdgesChange:G,elementsSelectable:se,connectionMode:He,snapGrid:Fe,snapToGrid:Xe,translateExtent:be,connectOnClick:ta,defaultEdgeOptions:pn,fitView:mr,fitViewOptions:bp,onNodesDelete:Sp,onEdgesDelete:_r,onNodeDrag:xs,onNodeDragStart:ne,onNodeDragStop:zl,onSelectionDrag:Hl,onSelectionDragStart:pr,onSelectionDragStop:Hp,noPanClassName:Gl,nodeOrigin:Ip,rfId:qp,autoPanOnConnect:ci,autoPanOnNodeDrag:Ep,onError:o0,connectionRadius:w0,isValidConnection:a0,nodeDragThreshold:P0})=>{const{setNodes:am,setEdges:sm,setDefaultNodesAndEdges:C0,setMinZoom:Fm,setMaxZoom:Zm,setTranslateExtent:p1,setNodeExtent:A1,reset:T1}=useStore(selector$d,shallow$1),Tm=useStoreApi();return reactExports.useEffect(()=>{const x1=a?.map(S1=>({...S1,...pn}));return C0(t,x1),()=>{T1()}},[]),useDirectStoreUpdater("defaultEdgeOptions",pn,Tm.setState),useDirectStoreUpdater("connectionMode",He,Tm.setState),useDirectStoreUpdater("onConnect",o,Tm.setState),useDirectStoreUpdater("onConnectStart",c,Tm.setState),useDirectStoreUpdater("onConnectEnd",d,Tm.setState),useDirectStoreUpdater("onClickConnectStart",p,Tm.setState),useDirectStoreUpdater("onClickConnectEnd",_,Tm.setState),useDirectStoreUpdater("nodesDraggable",S,Tm.setState),useDirectStoreUpdater("nodesConnectable",A,Tm.setState),useDirectStoreUpdater("nodesFocusable",C,Tm.setState),useDirectStoreUpdater("edgesFocusable",j,Tm.setState),useDirectStoreUpdater("edgesUpdatable",V,Tm.setState),useDirectStoreUpdater("elementsSelectable",se,Tm.setState),useDirectStoreUpdater("elevateNodesOnSelect",J,Tm.setState),useDirectStoreUpdater("snapToGrid",Xe,Tm.setState),useDirectStoreUpdater("snapGrid",Fe,Tm.setState),useDirectStoreUpdater("onNodesChange",Ne,Tm.setState),useDirectStoreUpdater("onEdgesChange",G,Tm.setState),useDirectStoreUpdater("connectOnClick",ta,Tm.setState),useDirectStoreUpdater("fitViewOnInit",mr,Tm.setState),useDirectStoreUpdater("fitViewOnInitOptions",bp,Tm.setState),useDirectStoreUpdater("onNodesDelete",Sp,Tm.setState),useDirectStoreUpdater("onEdgesDelete",_r,Tm.setState),useDirectStoreUpdater("onNodeDrag",xs,Tm.setState),useDirectStoreUpdater("onNodeDragStart",ne,Tm.setState),useDirectStoreUpdater("onNodeDragStop",zl,Tm.setState),useDirectStoreUpdater("onSelectionDrag",Hl,Tm.setState),useDirectStoreUpdater("onSelectionDragStart",pr,Tm.setState),useDirectStoreUpdater("onSelectionDragStop",Hp,Tm.setState),useDirectStoreUpdater("noPanClassName",Gl,Tm.setState),useDirectStoreUpdater("nodeOrigin",Ip,Tm.setState),useDirectStoreUpdater("rfId",qp,Tm.setState),useDirectStoreUpdater("autoPanOnConnect",ci,Tm.setState),useDirectStoreUpdater("autoPanOnNodeDrag",Ep,Tm.setState),useDirectStoreUpdater("onError",o0,Tm.setState),useDirectStoreUpdater("connectionRadius",w0,Tm.setState),useDirectStoreUpdater("isValidConnection",a0,Tm.setState),useDirectStoreUpdater("nodeDragThreshold",P0,Tm.setState),useStoreUpdater(r,am),useStoreUpdater(e,sm),useStoreUpdater(re,Fm),useStoreUpdater(ie,Zm),useStoreUpdater(be,p1),useStoreUpdater(K,A1),null},style={display:"none"},ariaLiveStyle={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ARIA_NODE_DESC_KEY="react-flow__node-desc",ARIA_EDGE_DESC_KEY="react-flow__edge-desc",ARIA_LIVE_MESSAGE="react-flow__aria-live",selector$c=r=>r.ariaLiveMessage;function AriaLiveMessage({rfId:r}){const e=useStore(selector$c);return React.createElement("div",{id:`${ARIA_LIVE_MESSAGE}-${r}`,"aria-live":"assertive","aria-atomic":"true",style:ariaLiveStyle},e)}function A11yDescriptions({rfId:r,disableKeyboardA11y:e}){return React.createElement(React.Fragment,null,React.createElement("div",{id:`${ARIA_NODE_DESC_KEY}-${r}`,style},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),React.createElement("div",{id:`${ARIA_EDGE_DESC_KEY}-${r}`,style},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&React.createElement(AriaLiveMessage,{rfId:r}))}var useKeyPress=(r=null,e={actInsideInputWithModifier:!0})=>{const[t,a]=reactExports.useState(!1),o=reactExports.useRef(!1),c=reactExports.useRef(new Set([])),[d,p]=reactExports.useMemo(()=>{if(r!==null){const S=(Array.isArray(r)?r:[r]).filter(C=>typeof C=="string").map(C=>C.split("+")),A=S.reduce((C,j)=>C.concat(...j),[]);return[S,A]}return[[],[]]},[r]);return reactExports.useEffect(()=>{const _=typeof document<"u"?document:null,S=e?.target||_;if(r!==null){const A=V=>{if(o.current=V.ctrlKey||V.metaKey||V.shiftKey,(!o.current||o.current&&!e.actInsideInputWithModifier)&&isInputDOMNode(V))return!1;const re=useKeyOrCode(V.code,p);c.current.add(V[re]),isMatchingKey(d,c.current,!1)&&(V.preventDefault(),a(!0))},C=V=>{if((!o.current||o.current&&!e.actInsideInputWithModifier)&&isInputDOMNode(V))return!1;const re=useKeyOrCode(V.code,p);isMatchingKey(d,c.current,!0)?(a(!1),c.current.clear()):c.current.delete(V[re]),V.key==="Meta"&&c.current.clear(),o.current=!1},j=()=>{c.current.clear(),a(!1)};return S?.addEventListener("keydown",A),S?.addEventListener("keyup",C),window.addEventListener("blur",j),()=>{S?.removeEventListener("keydown",A),S?.removeEventListener("keyup",C),window.removeEventListener("blur",j)}}},[r,a]),t};function isMatchingKey(r,e,t){return r.filter(a=>t||a.length===e.size).some(a=>a.every(o=>e.has(o)))}function useKeyOrCode(r,e){return e.includes(r)?"code":"key"}function calculateXYZPosition(r,e,t,a){const o=r.parentNode||r.parentId;if(!o)return t;const c=e.get(o),d=getNodePositionWithOrigin(c,a);return calculateXYZPosition(c,e,{x:(t.x??0)+d.x,y:(t.y??0)+d.y,z:(c[internalsSymbol]?.z??0)>(t.z??0)?c[internalsSymbol]?.z??0:t.z??0},a)}function updateAbsoluteNodePositions(r,e,t){r.forEach(a=>{const o=a.parentNode||a.parentId;if(o&&!r.has(o))throw new Error(`Parent node ${o} not found`);if(o||t?.[a.id]){const{x:c,y:d,z:p}=calculateXYZPosition(a,r,{...a.position,z:a[internalsSymbol]?.z??0},e);a.positionAbsolute={x:c,y:d},a[internalsSymbol].z=p,t?.[a.id]&&(a[internalsSymbol].isParent=!0)}})}function createNodeInternals(r,e,t,a){const o=new Map,c={},d=a?1e3:0;return r.forEach(p=>{const _=(isNumeric(p.zIndex)?p.zIndex:0)+(p.selected?d:0),S=e.get(p.id),A={...p,positionAbsolute:{x:p.position.x,y:p.position.y}},C=p.parentNode||p.parentId;C&&(c[C]=!0);const j=S?.type&&S?.type!==p.type;Object.defineProperty(A,internalsSymbol,{enumerable:!1,value:{handleBounds:j?void 0:S?.[internalsSymbol]?.handleBounds,z:_}}),o.set(p.id,A)}),updateAbsoluteNodePositions(o,t,c),o}function fitView(r,e={}){const{getNodes:t,width:a,height:o,minZoom:c,maxZoom:d,d3Zoom:p,d3Selection:_,fitViewOnInitDone:S,fitViewOnInit:A,nodeOrigin:C}=r(),j=e.initial&&!S&&A;if(p&&_&&(j||!e.initial)){const J=t().filter(ie=>{const K=e.includeHiddenNodes?ie.width&&ie.height:!ie.hidden;return e.nodes?.length?K&&e.nodes.some(Ne=>Ne.id===ie.id):K}),re=J.every(ie=>ie.width&&ie.height);if(J.length>0&&re){const ie=getNodesBounds(J,C),{x:K,y:Ne,zoom:G}=getViewportForBounds(ie,a,o,e.minZoom??c,e.maxZoom??d,e.padding??.1),se=identity.translate(K,Ne).scale(G);return typeof e.duration=="number"&&e.duration>0?p.transform(getD3Transition(_,e.duration),se):p.transform(_,se),!0}}return!1}function handleControlledNodeSelectionChange(r,e){return r.forEach(t=>{const a=e.get(t.id);a&&e.set(a.id,{...a,[internalsSymbol]:a[internalsSymbol],selected:t.selected})}),new Map(e)}function handleControlledEdgeSelectionChange(r,e){return e.map(t=>{const a=r.find(o=>o.id===t.id);return a&&(t.selected=a.selected),t})}function updateNodesAndEdgesSelections({changedNodes:r,changedEdges:e,get:t,set:a}){const{nodeInternals:o,edges:c,onNodesChange:d,onEdgesChange:p,hasDefaultNodes:_,hasDefaultEdges:S}=t();r?.length&&(_&&a({nodeInternals:handleControlledNodeSelectionChange(r,o)}),d?.(r)),e?.length&&(S&&a({edges:handleControlledEdgeSelectionChange(e,c)}),p?.(e))}const noop=()=>{},initialViewportHelper={zoomIn:noop,zoomOut:noop,zoomTo:noop,getZoom:()=>1,setViewport:noop,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:noop,fitBounds:noop,project:r=>r,screenToFlowPosition:r=>r,flowToScreenPosition:r=>r,viewportInitialized:!1},selector$b=r=>({d3Zoom:r.d3Zoom,d3Selection:r.d3Selection}),useViewportHelper=()=>{const r=useStoreApi(),{d3Zoom:e,d3Selection:t}=useStore(selector$b,shallow$1);return reactExports.useMemo(()=>t&&e?{zoomIn:o=>e.scaleBy(getD3Transition(t,o?.duration),1.2),zoomOut:o=>e.scaleBy(getD3Transition(t,o?.duration),1/1.2),zoomTo:(o,c)=>e.scaleTo(getD3Transition(t,c?.duration),o),getZoom:()=>r.getState().transform[2],setViewport:(o,c)=>{const[d,p,_]=r.getState().transform,S=identity.translate(o.x??d,o.y??p).scale(o.zoom??_);e.transform(getD3Transition(t,c?.duration),S)},getViewport:()=>{const[o,c,d]=r.getState().transform;return{x:o,y:c,zoom:d}},fitView:o=>fitView(r.getState,o),setCenter:(o,c,d)=>{const{width:p,height:_,maxZoom:S}=r.getState(),A=typeof d?.zoom<"u"?d.zoom:S,C=p/2-o*A,j=_/2-c*A,V=identity.translate(C,j).scale(A);e.transform(getD3Transition(t,d?.duration),V)},fitBounds:(o,c)=>{const{width:d,height:p,minZoom:_,maxZoom:S}=r.getState(),{x:A,y:C,zoom:j}=getViewportForBounds(o,d,p,_,S,c?.padding??.1),V=identity.translate(A,C).scale(j);e.transform(getD3Transition(t,c?.duration),V)},project:o=>{const{transform:c,snapToGrid:d,snapGrid:p}=r.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pointToRendererPoint(o,c,d,p)},screenToFlowPosition:o=>{const{transform:c,snapToGrid:d,snapGrid:p,domNode:_}=r.getState();if(!_)return o;const{x:S,y:A}=_.getBoundingClientRect(),C={x:o.x-S,y:o.y-A};return pointToRendererPoint(C,c,d,p)},flowToScreenPosition:o=>{const{transform:c,domNode:d}=r.getState();if(!d)return o;const{x:p,y:_}=d.getBoundingClientRect(),S=rendererPointToPoint(o,c);return{x:S.x+p,y:S.y+_}},viewportInitialized:!0}:initialViewportHelper,[e,t])};function useReactFlow(){const r=useViewportHelper(),e=useStoreApi(),t=reactExports.useCallback(()=>e.getState().getNodes().map(re=>({...re})),[]),a=reactExports.useCallback(re=>e.getState().nodeInternals.get(re),[]),o=reactExports.useCallback(()=>{const{edges:re=[]}=e.getState();return re.map(ie=>({...ie}))},[]),c=reactExports.useCallback(re=>{const{edges:ie=[]}=e.getState();return ie.find(K=>K.id===re)},[]),d=reactExports.useCallback(re=>{const{getNodes:ie,setNodes:K,hasDefaultNodes:Ne,onNodesChange:G}=e.getState(),se=ie(),He=typeof re=="function"?re(se):re;if(Ne)K(He);else if(G){const Fe=He.length===0?se.map(Xe=>({type:"remove",id:Xe.id})):He.map(Xe=>({item:Xe,type:"reset"}));G(Fe)}},[]),p=reactExports.useCallback(re=>{const{edges:ie=[],setEdges:K,hasDefaultEdges:Ne,onEdgesChange:G}=e.getState(),se=typeof re=="function"?re(ie):re;if(Ne)K(se);else if(G){const He=se.length===0?ie.map(Fe=>({type:"remove",id:Fe.id})):se.map(Fe=>({item:Fe,type:"reset"}));G(He)}},[]),_=reactExports.useCallback(re=>{const ie=Array.isArray(re)?re:[re],{getNodes:K,setNodes:Ne,hasDefaultNodes:G,onNodesChange:se}=e.getState();if(G){const Fe=[...K(),...ie];Ne(Fe)}else if(se){const He=ie.map(Fe=>({item:Fe,type:"add"}));se(He)}},[]),S=reactExports.useCallback(re=>{const ie=Array.isArray(re)?re:[re],{edges:K=[],setEdges:Ne,hasDefaultEdges:G,onEdgesChange:se}=e.getState();if(G)Ne([...K,...ie]);else if(se){const He=ie.map(Fe=>({item:Fe,type:"add"}));se(He)}},[]),A=reactExports.useCallback(()=>{const{getNodes:re,edges:ie=[],transform:K}=e.getState(),[Ne,G,se]=K;return{nodes:re().map(He=>({...He})),edges:ie.map(He=>({...He})),viewport:{x:Ne,y:G,zoom:se}}},[]),C=reactExports.useCallback(({nodes:re,edges:ie})=>{const{nodeInternals:K,getNodes:Ne,edges:G,hasDefaultNodes:se,hasDefaultEdges:He,onNodesDelete:Fe,onEdgesDelete:Xe,onNodesChange:be,onEdgesChange:ta}=e.getState(),pn=(re||[]).map(xs=>xs.id),mr=(ie||[]).map(xs=>xs.id),bp=Ne().reduce((xs,ne)=>{const zl=ne.parentNode||ne.parentId,Hl=!pn.includes(ne.id)&&zl&&xs.find(Hp=>Hp.id===zl);return(typeof ne.deletable=="boolean"?ne.deletable:!0)&&(pn.includes(ne.id)||Hl)&&xs.push(ne),xs},[]),Sp=G.filter(xs=>typeof xs.deletable=="boolean"?xs.deletable:!0),_r=Sp.filter(xs=>mr.includes(xs.id));if(bp||_r){const xs=getConnectedEdges(bp,Sp),ne=[..._r,...xs],zl=ne.reduce((Hl,pr)=>(Hl.includes(pr.id)||Hl.push(pr.id),Hl),[]);if((He||se)&&(He&&e.setState({edges:G.filter(Hl=>!zl.includes(Hl.id))}),se&&(bp.forEach(Hl=>{K.delete(Hl.id)}),e.setState({nodeInternals:new Map(K)}))),zl.length>0&&(Xe?.(ne),ta&&ta(zl.map(Hl=>({id:Hl,type:"remove"})))),bp.length>0&&(Fe?.(bp),be)){const Hl=bp.map(pr=>({id:pr.id,type:"remove"}));be(Hl)}}},[]),j=reactExports.useCallback(re=>{const ie=isRectObject(re),K=ie?null:e.getState().nodeInternals.get(re.id);return!ie&&!K?[null,null,ie]:[ie?re:nodeToRect(K),K,ie]},[]),V=reactExports.useCallback((re,ie=!0,K)=>{const[Ne,G,se]=j(re);return Ne?(K||e.getState().getNodes()).filter(He=>{if(!se&&(He.id===G.id||!He.positionAbsolute))return!1;const Fe=nodeToRect(He),Xe=getOverlappingArea(Fe,Ne);return ie&&Xe>0||Xe>=Ne.width*Ne.height}):[]},[]),J=reactExports.useCallback((re,ie,K=!0)=>{const[Ne]=j(re);if(!Ne)return!1;const G=getOverlappingArea(Ne,ie);return K&&G>0||G>=Ne.width*Ne.height},[]);return reactExports.useMemo(()=>({...r,getNodes:t,getNode:a,getEdges:o,getEdge:c,setNodes:d,setEdges:p,addNodes:_,addEdges:S,toObject:A,deleteElements:C,getIntersectingNodes:V,isNodeIntersecting:J}),[r,t,a,o,c,d,p,_,S,A,C,V,J])}const deleteKeyOptions={actInsideInputWithModifier:!1};var useGlobalKeyHandler=({deleteKeyCode:r,multiSelectionKeyCode:e})=>{const t=useStoreApi(),{deleteElements:a}=useReactFlow(),o=useKeyPress(r,deleteKeyOptions),c=useKeyPress(e);reactExports.useEffect(()=>{if(o){const{edges:d,getNodes:p}=t.getState(),_=p().filter(A=>A.selected),S=d.filter(A=>A.selected);a({nodes:_,edges:S}),t.setState({nodesSelectionActive:!1})}},[o]),reactExports.useEffect(()=>{t.setState({multiSelectionActive:c})},[c])};function useResizeHandler(r){const e=useStoreApi();reactExports.useEffect(()=>{let t;const a=()=>{if(!r.current)return;const o=getDimensions(r.current);(o.height===0||o.width===0)&&e.getState().onError?.("004",errorMessages.error004()),e.setState({width:o.width||500,height:o.height||500})};return a(),window.addEventListener("resize",a),r.current&&(t=new ResizeObserver(()=>a()),t.observe(r.current)),()=>{window.removeEventListener("resize",a),t&&r.current&&t.unobserve(r.current)}},[])}const containerStyle={position:"absolute",width:"100%",height:"100%",top:0,left:0},viewChanged=(r,e)=>r.x!==e.x||r.y!==e.y||r.zoom!==e.k,eventToFlowTransform=r=>({x:r.x,y:r.y,zoom:r.k}),isWrappedWithClass=(r,e)=>r.target.closest(`.${e}`),isRightClickPan=(r,e)=>e===2&&Array.isArray(r)&&r.includes(2),wheelDelta=r=>{const e=r.ctrlKey&&isMacOs()?10:1;return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*e},selector$a=r=>({d3Zoom:r.d3Zoom,d3Selection:r.d3Selection,d3ZoomHandler:r.d3ZoomHandler,userSelectionActive:r.userSelectionActive}),ZoomPane=({onMove:r,onMoveStart:e,onMoveEnd:t,onPaneContextMenu:a,zoomOnScroll:o=!0,zoomOnPinch:c=!0,panOnScroll:d=!1,panOnScrollSpeed:p=.5,panOnScrollMode:_=PanOnScrollMode.Free,zoomOnDoubleClick:S=!0,elementsSelectable:A,panOnDrag:C=!0,defaultViewport:j,translateExtent:V,minZoom:J,maxZoom:re,zoomActivationKeyCode:ie,preventScrolling:K=!0,children:Ne,noWheelClassName:G,noPanClassName:se})=>{const He=reactExports.useRef(),Fe=useStoreApi(),Xe=reactExports.useRef(!1),be=reactExports.useRef(!1),ta=reactExports.useRef(null),pn=reactExports.useRef({x:0,y:0,zoom:0}),{d3Zoom:mr,d3Selection:bp,d3ZoomHandler:Sp,userSelectionActive:_r}=useStore(selector$a,shallow$1),xs=useKeyPress(ie),ne=reactExports.useRef(0),zl=reactExports.useRef(!1),Hl=reactExports.useRef();return useResizeHandler(ta),reactExports.useEffect(()=>{if(ta.current){const pr=ta.current.getBoundingClientRect(),Hp=zoom().scaleExtent([J,re]).translateExtent(V),Gl=select(ta.current).call(Hp),Ip=identity.translate(j.x,j.y).scale(clamp(j.zoom,J,re)),qp=[[0,0],[pr.width,pr.height]],ci=Hp.constrain()(Ip,qp,V);Hp.transform(Gl,ci),Hp.wheelDelta(wheelDelta),Fe.setState({d3Zoom:Hp,d3Selection:Gl,d3ZoomHandler:Gl.on("wheel.zoom"),transform:[ci.x,ci.y,ci.k],domNode:ta.current.closest(".react-flow")})}},[]),reactExports.useEffect(()=>{bp&&mr&&(d&&!xs&&!_r?bp.on("wheel.zoom",pr=>{if(isWrappedWithClass(pr,G))return!1;pr.preventDefault(),pr.stopImmediatePropagation();const Hp=bp.property("__zoom").k||1;if(pr.ctrlKey&&c){const a0=pointer(pr),P0=wheelDelta(pr),am=Hp*Math.pow(2,P0);mr.scaleTo(bp,am,a0,pr);return}const Gl=pr.deltaMode===1?20:1;let Ip=_===PanOnScrollMode.Vertical?0:pr.deltaX*Gl,qp=_===PanOnScrollMode.Horizontal?0:pr.deltaY*Gl;!isMacOs()&&pr.shiftKey&&_!==PanOnScrollMode.Vertical&&(Ip=pr.deltaY*Gl,qp=0),mr.translateBy(bp,-(Ip/Hp)*p,-(qp/Hp)*p,{internal:!0});const ci=eventToFlowTransform(bp.property("__zoom")),{onViewportChangeStart:Ep,onViewportChange:o0,onViewportChangeEnd:w0}=Fe.getState();clearTimeout(Hl.current),zl.current||(zl.current=!0,e?.(pr,ci),Ep?.(ci)),zl.current&&(r?.(pr,ci),o0?.(ci),Hl.current=setTimeout(()=>{t?.(pr,ci),w0?.(ci),zl.current=!1},150))},{passive:!1}):typeof Sp<"u"&&bp.on("wheel.zoom",function(pr,Hp){if(!K&&pr.type==="wheel"&&!pr.ctrlKey||isWrappedWithClass(pr,G))return null;pr.preventDefault(),Sp.call(this,pr,Hp)},{passive:!1}))},[_r,d,_,bp,mr,Sp,xs,c,K,G,e,r,t]),reactExports.useEffect(()=>{mr&&mr.on("start",pr=>{if(!pr.sourceEvent||pr.sourceEvent.internal)return null;ne.current=pr.sourceEvent?.button;const{onViewportChangeStart:Hp}=Fe.getState(),Gl=eventToFlowTransform(pr.transform);Xe.current=!0,pn.current=Gl,pr.sourceEvent?.type==="mousedown"&&Fe.setState({paneDragging:!0}),Hp?.(Gl),e?.(pr.sourceEvent,Gl)})},[mr,e]),reactExports.useEffect(()=>{mr&&(_r&&!Xe.current?mr.on("zoom",null):_r||mr.on("zoom",pr=>{const{onViewportChange:Hp}=Fe.getState();if(Fe.setState({transform:[pr.transform.x,pr.transform.y,pr.transform.k]}),be.current=!!(a&&isRightClickPan(C,ne.current??0)),(r||Hp)&&!pr.sourceEvent?.internal){const Gl=eventToFlowTransform(pr.transform);Hp?.(Gl),r?.(pr.sourceEvent,Gl)}}))},[_r,mr,r,C,a]),reactExports.useEffect(()=>{mr&&mr.on("end",pr=>{if(!pr.sourceEvent||pr.sourceEvent.internal)return null;const{onViewportChangeEnd:Hp}=Fe.getState();if(Xe.current=!1,Fe.setState({paneDragging:!1}),a&&isRightClickPan(C,ne.current??0)&&!be.current&&a(pr.sourceEvent),be.current=!1,(t||Hp)&&viewChanged(pn.current,pr.transform)){const Gl=eventToFlowTransform(pr.transform);pn.current=Gl,clearTimeout(He.current),He.current=setTimeout(()=>{Hp?.(Gl),t?.(pr.sourceEvent,Gl)},d?150:0)}})},[mr,d,C,t,a]),reactExports.useEffect(()=>{mr&&mr.filter(pr=>{const Hp=xs||o,Gl=c&&pr.ctrlKey;if((C===!0||Array.isArray(C)&&C.includes(1))&&pr.button===1&&pr.type==="mousedown"&&(isWrappedWithClass(pr,"react-flow__node")||isWrappedWithClass(pr,"react-flow__edge")))return!0;if(!C&&!Hp&&!d&&!S&&!c||_r||!S&&pr.type==="dblclick"||isWrappedWithClass(pr,G)&&pr.type==="wheel"||isWrappedWithClass(pr,se)&&(pr.type!=="wheel"||d&&pr.type==="wheel"&&!xs)||!c&&pr.ctrlKey&&pr.type==="wheel"||!Hp&&!d&&!Gl&&pr.type==="wheel"||!C&&(pr.type==="mousedown"||pr.type==="touchstart")||Array.isArray(C)&&!C.includes(pr.button)&&pr.type==="mousedown")return!1;const Ip=Array.isArray(C)&&C.includes(pr.button)||!pr.button||pr.button<=1;return(!pr.ctrlKey||pr.type==="wheel")&&Ip})},[_r,mr,o,c,d,S,C,A,xs]),React.createElement("div",{className:"react-flow__renderer",ref:ta,style:containerStyle},Ne)},selector$9=r=>({userSelectionActive:r.userSelectionActive,userSelectionRect:r.userSelectionRect});function UserSelection(){const{userSelectionActive:r,userSelectionRect:e}=useStore(selector$9,shallow$1);return r&&e?React.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function handleParentExpand(r,e){const t=e.parentNode||e.parentId,a=r.find(o=>o.id===t);if(a){const o=e.position.x+e.width-a.width,c=e.position.y+e.height-a.height;if(o>0||c>0||e.position.x<0||e.position.y<0){if(a.style={...a.style},a.style.width=a.style.width??a.width,a.style.height=a.style.height??a.height,o>0&&(a.style.width+=o),c>0&&(a.style.height+=c),e.position.x<0){const d=Math.abs(e.position.x);a.position.x=a.position.x-d,a.style.width+=d,e.position.x=0}if(e.position.y<0){const d=Math.abs(e.position.y);a.position.y=a.position.y-d,a.style.height+=d,e.position.y=0}a.width=a.style.width,a.height=a.style.height}}}function applyChanges(r,e){if(r.some(a=>a.type==="reset"))return r.filter(a=>a.type==="reset").map(a=>a.item);const t=r.filter(a=>a.type==="add").map(a=>a.item);return e.reduce((a,o)=>{const c=r.filter(p=>p.id===o.id);if(c.length===0)return a.push(o),a;const d={...o};for(const p of c)if(p)switch(p.type){case"select":{d.selected=p.selected;break}case"position":{typeof p.position<"u"&&(d.position=p.position),typeof p.positionAbsolute<"u"&&(d.positionAbsolute=p.positionAbsolute),typeof p.dragging<"u"&&(d.dragging=p.dragging),d.expandParent&&handleParentExpand(a,d);break}case"dimensions":{typeof p.dimensions<"u"&&(d.width=p.dimensions.width,d.height=p.dimensions.height),typeof p.updateStyle<"u"&&(d.style={...d.style||{},...p.dimensions}),typeof p.resizing=="boolean"&&(d.resizing=p.resizing),d.expandParent&&handleParentExpand(a,d);break}case"remove":return a}return a.push(d),a},t)}function applyNodeChanges(r,e){return applyChanges(r,e)}function applyEdgeChanges(r,e){return applyChanges(r,e)}const createSelectionChange=(r,e)=>({id:r,type:"select",selected:e});function getSelectionChanges(r,e){return r.reduce((t,a)=>{const o=e.includes(a.id);return!a.selected&&o?(a.selected=!0,t.push(createSelectionChange(a.id,!0))):a.selected&&!o&&(a.selected=!1,t.push(createSelectionChange(a.id,!1))),t},[])}const wrapHandler=(r,e)=>t=>{t.target===e.current&&r?.(t)},selector$8=r=>({userSelectionActive:r.userSelectionActive,elementsSelectable:r.elementsSelectable,dragging:r.paneDragging}),Pane=reactExports.memo(({isSelecting:r,selectionMode:e=SelectionMode.Full,panOnDrag:t,onSelectionStart:a,onSelectionEnd:o,onPaneClick:c,onPaneContextMenu:d,onPaneScroll:p,onPaneMouseEnter:_,onPaneMouseMove:S,onPaneMouseLeave:A,children:C})=>{const j=reactExports.useRef(null),V=useStoreApi(),J=reactExports.useRef(0),re=reactExports.useRef(0),ie=reactExports.useRef(),{userSelectionActive:K,elementsSelectable:Ne,dragging:G}=useStore(selector$8,shallow$1),se=()=>{V.setState({userSelectionActive:!1,userSelectionRect:null}),J.current=0,re.current=0},He=Sp=>{c?.(Sp),V.getState().resetSelectedElements(),V.setState({nodesSelectionActive:!1})},Fe=Sp=>{if(Array.isArray(t)&&t?.includes(2)){Sp.preventDefault();return}d?.(Sp)},Xe=p?Sp=>p(Sp):void 0,be=Sp=>{const{resetSelectedElements:_r,domNode:xs}=V.getState();if(ie.current=xs?.getBoundingClientRect(),!Ne||!r||Sp.button!==0||Sp.target!==j.current||!ie.current)return;const{x:ne,y:zl}=getEventPosition(Sp,ie.current);_r(),V.setState({userSelectionRect:{width:0,height:0,startX:ne,startY:zl,x:ne,y:zl}}),a?.(Sp)},ta=Sp=>{const{userSelectionRect:_r,nodeInternals:xs,edges:ne,transform:zl,onNodesChange:Hl,onEdgesChange:pr,nodeOrigin:Hp,getNodes:Gl}=V.getState();if(!r||!ie.current||!_r)return;V.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Ip=getEventPosition(Sp,ie.current),qp=_r.startX??0,ci=_r.startY??0,Ep={..._r,x:Ip.x<qp?Ip.x:qp,y:Ip.y<ci?Ip.y:ci,width:Math.abs(Ip.x-qp),height:Math.abs(Ip.y-ci)},o0=Gl(),w0=getNodesInside(xs,Ep,zl,e===SelectionMode.Partial,!0,Hp),a0=getConnectedEdges(w0,ne).map(am=>am.id),P0=w0.map(am=>am.id);if(J.current!==P0.length){J.current=P0.length;const am=getSelectionChanges(o0,P0);am.length&&Hl?.(am)}if(re.current!==a0.length){re.current=a0.length;const am=getSelectionChanges(ne,a0);am.length&&pr?.(am)}V.setState({userSelectionRect:Ep})},pn=Sp=>{if(Sp.button!==0)return;const{userSelectionRect:_r}=V.getState();!K&&_r&&Sp.target===j.current&&He?.(Sp),V.setState({nodesSelectionActive:J.current>0}),se(),o?.(Sp)},mr=Sp=>{K&&(V.setState({nodesSelectionActive:J.current>0}),o?.(Sp)),se()},bp=Ne&&(r||K);return React.createElement("div",{className:cc$1(["react-flow__pane",{dragging:G,selection:r}]),onClick:bp?void 0:wrapHandler(He,j),onContextMenu:wrapHandler(Fe,j),onWheel:wrapHandler(Xe,j),onMouseEnter:bp?void 0:_,onMouseDown:bp?be:void 0,onMouseMove:bp?ta:S,onMouseUp:bp?pn:void 0,onMouseLeave:bp?mr:A,ref:j,style:containerStyle},C,React.createElement(UserSelection,null))});Pane.displayName="Pane";function isParentSelected(r,e){const t=r.parentNode||r.parentId;if(!t)return!1;const a=e.get(t);return a?a.selected?!0:isParentSelected(a,e):!1}function hasSelector(r,e,t){let a=r;do{if(a?.matches(e))return!0;if(a===t.current)return!1;a=a.parentElement}while(a);return!1}function getDragItems(r,e,t,a){return Array.from(r.values()).filter(o=>(o.selected||o.id===a)&&(!o.parentNode||o.parentId||!isParentSelected(o,r))&&(o.draggable||e&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:t.x-(o.positionAbsolute?.x??0),y:t.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function clampNodeExtent(r,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(r.width||0),e[1][1]-(r.height||0)]]}function calcNextPosition(r,e,t,a,o=[0,0],c){const d=clampNodeExtent(r,r.extent||a);let p=d;const _=r.parentNode||r.parentId;if(r.extent==="parent"&&!r.expandParent)if(_&&r.width&&r.height){const C=t.get(_),{x:j,y:V}=getNodePositionWithOrigin(C,o).positionAbsolute;p=C&&isNumeric(j)&&isNumeric(V)&&isNumeric(C.width)&&isNumeric(C.height)?[[j+r.width*o[0],V+r.height*o[1]],[j+C.width-r.width+r.width*o[0],V+C.height-r.height+r.height*o[1]]]:p}else c?.("005",errorMessages.error005()),p=d;else if(r.extent&&_&&r.extent!=="parent"){const C=t.get(_),{x:j,y:V}=getNodePositionWithOrigin(C,o).positionAbsolute;p=[[r.extent[0][0]+j,r.extent[0][1]+V],[r.extent[1][0]+j,r.extent[1][1]+V]]}let S={x:0,y:0};if(_){const C=t.get(_);S=getNodePositionWithOrigin(C,o).positionAbsolute}const A=p&&p!=="parent"?clampPosition(e,p):e;return{position:{x:A.x-S.x,y:A.y-S.y},positionAbsolute:A}}function getEventHandlerParams({nodeId:r,dragItems:e,nodeInternals:t}){const a=e.map(o=>({...t.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[r?a.find(o=>o.id===r):a[0],a]}const getHandleBounds=(r,e,t,a)=>{const o=e.querySelectorAll(r);if(!o||!o.length)return null;const c=Array.from(o),d=e.getBoundingClientRect(),p={x:d.width*a[0],y:d.height*a[1]};return c.map(_=>{const S=_.getBoundingClientRect();return{id:_.getAttribute("data-handleid"),position:_.getAttribute("data-handlepos"),x:(S.left-d.left-p.x)/t,y:(S.top-d.top-p.y)/t,...getDimensions(_)}})};function getMouseHandler(r,e,t){return t===void 0?t:a=>{const o=e().nodeInternals.get(r);o&&t(a,{...o})}}function handleNodeClick({id:r,store:e,unselect:t=!1,nodeRef:a}){const{addSelectedNodes:o,unselectNodesAndEdges:c,multiSelectionActive:d,nodeInternals:p,onError:_}=e.getState(),S=p.get(r);if(!S){_?.("012",errorMessages.error012(r));return}e.setState({nodesSelectionActive:!1}),S.selected?(t||S.selected&&d)&&(c({nodes:[S],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):o([r])}function useGetPointerPosition(){const r=useStoreApi();return reactExports.useCallback(({sourceEvent:t})=>{const{transform:a,snapGrid:o,snapToGrid:c}=r.getState(),d=t.touches?t.touches[0].clientX:t.clientX,p=t.touches?t.touches[0].clientY:t.clientY,_={x:(d-a[0])/a[2],y:(p-a[1])/a[2]};return{xSnapped:c?o[0]*Math.round(_.x/o[0]):_.x,ySnapped:c?o[1]*Math.round(_.y/o[1]):_.y,..._}},[])}function wrapSelectionDragFunc(r){return(e,t,a)=>r?.(e,a)}function useDrag({nodeRef:r,disabled:e=!1,noDragClassName:t,handleSelector:a,nodeId:o,isSelectable:c,selectNodesOnDrag:d}){const p=useStoreApi(),[_,S]=reactExports.useState(!1),A=reactExports.useRef([]),C=reactExports.useRef({x:null,y:null}),j=reactExports.useRef(0),V=reactExports.useRef(null),J=reactExports.useRef({x:0,y:0}),re=reactExports.useRef(null),ie=reactExports.useRef(!1),K=reactExports.useRef(!1),Ne=reactExports.useRef(!1),G=useGetPointerPosition();return reactExports.useEffect(()=>{if(r?.current){const se=select(r.current),He=({x:be,y:ta})=>{const{nodeInternals:pn,onNodeDrag:mr,onSelectionDrag:bp,updateNodePositions:Sp,nodeExtent:_r,snapGrid:xs,snapToGrid:ne,nodeOrigin:zl,onError:Hl}=p.getState();C.current={x:be,y:ta};let pr=!1,Hp={x:0,y:0,x2:0,y2:0};if(A.current.length>1&&_r){const Ip=getNodesBounds(A.current,zl);Hp=rectToBox(Ip)}if(A.current=A.current.map(Ip=>{const qp={x:be-Ip.distance.x,y:ta-Ip.distance.y};ne&&(qp.x=xs[0]*Math.round(qp.x/xs[0]),qp.y=xs[1]*Math.round(qp.y/xs[1]));const ci=[[_r[0][0],_r[0][1]],[_r[1][0],_r[1][1]]];A.current.length>1&&_r&&!Ip.extent&&(ci[0][0]=Ip.positionAbsolute.x-Hp.x+_r[0][0],ci[1][0]=Ip.positionAbsolute.x+(Ip.width??0)-Hp.x2+_r[1][0],ci[0][1]=Ip.positionAbsolute.y-Hp.y+_r[0][1],ci[1][1]=Ip.positionAbsolute.y+(Ip.height??0)-Hp.y2+_r[1][1]);const Ep=calcNextPosition(Ip,qp,pn,ci,zl,Hl);return pr=pr||Ip.position.x!==Ep.position.x||Ip.position.y!==Ep.position.y,Ip.position=Ep.position,Ip.positionAbsolute=Ep.positionAbsolute,Ip}),!pr)return;Sp(A.current,!0,!0),S(!0);const Gl=o?mr:wrapSelectionDragFunc(bp);if(Gl&&re.current){const[Ip,qp]=getEventHandlerParams({nodeId:o,dragItems:A.current,nodeInternals:pn});Gl(re.current,Ip,qp)}},Fe=()=>{if(!V.current)return;const[be,ta]=calcAutoPan(J.current,V.current);if(be!==0||ta!==0){const{transform:pn,panBy:mr}=p.getState();C.current.x=(C.current.x??0)-be/pn[2],C.current.y=(C.current.y??0)-ta/pn[2],mr({x:be,y:ta})&&He(C.current)}j.current=requestAnimationFrame(Fe)},Xe=be=>{const{nodeInternals:ta,multiSelectionActive:pn,nodesDraggable:mr,unselectNodesAndEdges:bp,onNodeDragStart:Sp,onSelectionDragStart:_r}=p.getState();K.current=!0;const xs=o?Sp:wrapSelectionDragFunc(_r);(!d||!c)&&!pn&&o&&(ta.get(o)?.selected||bp()),o&&c&&d&&handleNodeClick({id:o,store:p,nodeRef:r});const ne=G(be);if(C.current=ne,A.current=getDragItems(ta,mr,ne,o),xs&&A.current){const[zl,Hl]=getEventHandlerParams({nodeId:o,dragItems:A.current,nodeInternals:ta});xs(be.sourceEvent,zl,Hl)}};if(e)se.on(".drag",null);else{const be=drag().on("start",ta=>{const{domNode:pn,nodeDragThreshold:mr}=p.getState();mr===0&&Xe(ta),Ne.current=!1;const bp=G(ta);C.current=bp,V.current=pn?.getBoundingClientRect()||null,J.current=getEventPosition(ta.sourceEvent,V.current)}).on("drag",ta=>{const pn=G(ta),{autoPanOnNodeDrag:mr,nodeDragThreshold:bp}=p.getState();if(ta.sourceEvent.type==="touchmove"&&ta.sourceEvent.touches.length>1&&(Ne.current=!0),!Ne.current){if(!ie.current&&K.current&&mr&&(ie.current=!0,Fe()),!K.current){const Sp=pn.xSnapped-(C?.current?.x??0),_r=pn.ySnapped-(C?.current?.y??0);Math.sqrt(Sp*Sp+_r*_r)>bp&&Xe(ta)}(C.current.x!==pn.xSnapped||C.current.y!==pn.ySnapped)&&A.current&&K.current&&(re.current=ta.sourceEvent,J.current=getEventPosition(ta.sourceEvent,V.current),He(pn))}}).on("end",ta=>{if(!(!K.current||Ne.current)&&(S(!1),ie.current=!1,K.current=!1,cancelAnimationFrame(j.current),A.current)){const{updateNodePositions:pn,nodeInternals:mr,onNodeDragStop:bp,onSelectionDragStop:Sp}=p.getState(),_r=o?bp:wrapSelectionDragFunc(Sp);if(pn(A.current,!1,!1),_r){const[xs,ne]=getEventHandlerParams({nodeId:o,dragItems:A.current,nodeInternals:mr});_r(ta.sourceEvent,xs,ne)}}}).filter(ta=>{const pn=ta.target;return!ta.button&&(!t||!hasSelector(pn,`.${t}`,r))&&(!a||hasSelector(pn,a,r))});return se.call(be),()=>{se.on(".drag",null)}}}},[r,e,t,a,c,p,o,d,G]),_}function useUpdateNodePositions(){const r=useStoreApi();return reactExports.useCallback(t=>{const{nodeInternals:a,nodeExtent:o,updateNodePositions:c,getNodes:d,snapToGrid:p,snapGrid:_,onError:S,nodesDraggable:A}=r.getState(),C=d().filter(Ne=>Ne.selected&&(Ne.draggable||A&&typeof Ne.draggable>"u")),j=p?_[0]:5,V=p?_[1]:5,J=t.isShiftPressed?4:1,re=t.x*j*J,ie=t.y*V*J,K=C.map(Ne=>{if(Ne.positionAbsolute){const G={x:Ne.positionAbsolute.x+re,y:Ne.positionAbsolute.y+ie};p&&(G.x=_[0]*Math.round(G.x/_[0]),G.y=_[1]*Math.round(G.y/_[1]));const{positionAbsolute:se,position:He}=calcNextPosition(Ne,G,a,o,void 0,S);Ne.position=He,Ne.positionAbsolute=se}return Ne});c(K,!0,!1)},[])}const arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wrapNode=r=>{const e=({id:t,type:a,data:o,xPos:c,yPos:d,xPosOrigin:p,yPosOrigin:_,selected:S,onClick:A,onMouseEnter:C,onMouseMove:j,onMouseLeave:V,onContextMenu:J,onDoubleClick:re,style:ie,className:K,isDraggable:Ne,isSelectable:G,isConnectable:se,isFocusable:He,selectNodesOnDrag:Fe,sourcePosition:Xe,targetPosition:be,hidden:ta,resizeObserver:pn,dragHandle:mr,zIndex:bp,isParent:Sp,noDragClassName:_r,noPanClassName:xs,initialized:ne,disableKeyboardA11y:zl,ariaLabel:Hl,rfId:pr,hasHandleBounds:Hp})=>{const Gl=useStoreApi(),Ip=reactExports.useRef(null),qp=reactExports.useRef(null),ci=reactExports.useRef(Xe),Ep=reactExports.useRef(be),o0=reactExports.useRef(a),w0=G||Ne||A||C||j||V,a0=useUpdateNodePositions(),P0=getMouseHandler(t,Gl.getState,C),am=getMouseHandler(t,Gl.getState,j),sm=getMouseHandler(t,Gl.getState,V),C0=getMouseHandler(t,Gl.getState,J),Fm=getMouseHandler(t,Gl.getState,re),Zm=T1=>{const{nodeDragThreshold:Tm}=Gl.getState();if(G&&(!Fe||!Ne||Tm>0)&&handleNodeClick({id:t,store:Gl,nodeRef:Ip}),A){const x1=Gl.getState().nodeInternals.get(t);x1&&A(T1,{...x1})}},p1=T1=>{if(!isInputDOMNode(T1)&&!zl)if(elementSelectionKeys.includes(T1.key)&&G){const Tm=T1.key==="Escape";handleNodeClick({id:t,store:Gl,unselect:Tm,nodeRef:Ip})}else Ne&&S&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,T1.key)&&(Gl.setState({ariaLiveMessage:`Moved selected node ${T1.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~c}, y: ${~~d}`}),a0({x:arrowKeyDiffs[T1.key].x,y:arrowKeyDiffs[T1.key].y,isShiftPressed:T1.shiftKey}))};reactExports.useEffect(()=>()=>{qp.current&&(pn?.unobserve(qp.current),qp.current=null)},[]),reactExports.useEffect(()=>{if(Ip.current&&!ta){const T1=Ip.current;(!ne||!Hp||qp.current!==T1)&&(qp.current&&pn?.unobserve(qp.current),pn?.observe(T1),qp.current=T1)}},[ta,ne,Hp]),reactExports.useEffect(()=>{const T1=o0.current!==a,Tm=ci.current!==Xe,x1=Ep.current!==be;Ip.current&&(T1||Tm||x1)&&(T1&&(o0.current=a),Tm&&(ci.current=Xe),x1&&(Ep.current=be),Gl.getState().updateNodeDimensions([{id:t,nodeElement:Ip.current,forceUpdate:!0}]))},[t,a,Xe,be]);const A1=useDrag({nodeRef:Ip,disabled:ta||!Ne,noDragClassName:_r,handleSelector:mr,nodeId:t,isSelectable:G,selectNodesOnDrag:Fe});return ta?null:React.createElement("div",{className:cc$1(["react-flow__node",`react-flow__node-${a}`,{[xs]:Ne},K,{selected:S,selectable:G,parent:Sp,dragging:A1}]),ref:Ip,style:{zIndex:bp,transform:`translate(${p}px,${_}px)`,pointerEvents:w0?"all":"none",visibility:ne?"visible":"hidden",...ie},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:P0,onMouseMove:am,onMouseLeave:sm,onContextMenu:C0,onClick:Zm,onDoubleClick:Fm,onKeyDown:He?p1:void 0,tabIndex:He?0:void 0,role:He?"button":void 0,"aria-describedby":zl?void 0:`${ARIA_NODE_DESC_KEY}-${pr}`,"aria-label":Hl},React.createElement(Provider,{value:t},React.createElement(r,{id:t,data:o,type:a,xPos:c,yPos:d,selected:S,isConnectable:se,sourcePosition:Xe,targetPosition:be,dragging:A1,dragHandle:mr,zIndex:bp})))};return e.displayName="NodeWrapper",reactExports.memo(e)};const selector$7=r=>{const e=r.getNodes().filter(t=>t.selected);return{...getNodesBounds(e,r.nodeOrigin),transformString:`translate(${r.transform[0]}px,${r.transform[1]}px) scale(${r.transform[2]})`,userSelectionActive:r.userSelectionActive}};function NodesSelection({onSelectionContextMenu:r,noPanClassName:e,disableKeyboardA11y:t}){const a=useStoreApi(),{width:o,height:c,x:d,y:p,transformString:_,userSelectionActive:S}=useStore(selector$7,shallow$1),A=useUpdateNodePositions(),C=reactExports.useRef(null);if(reactExports.useEffect(()=>{t||C.current?.focus({preventScroll:!0})},[t]),useDrag({nodeRef:C}),S||!o||!c)return null;const j=r?J=>{const re=a.getState().getNodes().filter(ie=>ie.selected);r(J,re)}:void 0,V=J=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,J.key)&&A({x:arrowKeyDiffs[J.key].x,y:arrowKeyDiffs[J.key].y,isShiftPressed:J.shiftKey})};return React.createElement("div",{className:cc$1(["react-flow__nodesselection","react-flow__container",e]),style:{transform:_}},React.createElement("div",{ref:C,className:"react-flow__nodesselection-rect",onContextMenu:j,tabIndex:t?void 0:-1,onKeyDown:t?void 0:V,style:{width:o,height:c,top:p,left:d}}))}var NodesSelection$1=reactExports.memo(NodesSelection);const selector$6=r=>r.nodesSelectionActive,FlowRenderer=({children:r,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:d,deleteKeyCode:p,onMove:_,onMoveStart:S,onMoveEnd:A,selectionKeyCode:C,selectionOnDrag:j,selectionMode:V,onSelectionStart:J,onSelectionEnd:re,multiSelectionKeyCode:ie,panActivationKeyCode:K,zoomActivationKeyCode:Ne,elementsSelectable:G,zoomOnScroll:se,zoomOnPinch:He,panOnScroll:Fe,panOnScrollSpeed:Xe,panOnScrollMode:be,zoomOnDoubleClick:ta,panOnDrag:pn,defaultViewport:mr,translateExtent:bp,minZoom:Sp,maxZoom:_r,preventScrolling:xs,onSelectionContextMenu:ne,noWheelClassName:zl,noPanClassName:Hl,disableKeyboardA11y:pr})=>{const Hp=useStore(selector$6),Gl=useKeyPress(C),Ip=useKeyPress(K),qp=Ip||pn,ci=Ip||Fe,Ep=Gl||j&&qp!==!0;return useGlobalKeyHandler({deleteKeyCode:p,multiSelectionKeyCode:ie}),React.createElement(ZoomPane,{onMove:_,onMoveStart:S,onMoveEnd:A,onPaneContextMenu:c,elementsSelectable:G,zoomOnScroll:se,zoomOnPinch:He,panOnScroll:ci,panOnScrollSpeed:Xe,panOnScrollMode:be,zoomOnDoubleClick:ta,panOnDrag:!Gl&&qp,defaultViewport:mr,translateExtent:bp,minZoom:Sp,maxZoom:_r,zoomActivationKeyCode:Ne,preventScrolling:xs,noWheelClassName:zl,noPanClassName:Hl},React.createElement(Pane,{onSelectionStart:J,onSelectionEnd:re,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:d,panOnDrag:qp,isSelecting:!!Ep,selectionMode:V},r,Hp&&React.createElement(NodesSelection$1,{onSelectionContextMenu:ne,noPanClassName:Hl,disableKeyboardA11y:pr})))};FlowRenderer.displayName="FlowRenderer";var FlowRenderer$1=reactExports.memo(FlowRenderer);function useVisibleNodes(r){return useStore(reactExports.useCallback(t=>r?getNodesInside(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):t.getNodes(),[r]))}function createNodeTypes(r){const e={input:wrapNode(r.input||InputNode$1),default:wrapNode(r.default||DefaultNode$1),output:wrapNode(r.output||OutputNode$1),group:wrapNode(r.group||GroupNode)},t={},a=Object.keys(r).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,c)=>(o[c]=wrapNode(r[c]||DefaultNode$1),o),t);return{...e,...a}}const getPositionWithOrigin=({x:r,y:e,width:t,height:a,origin:o})=>!t||!a?{x:r,y:e}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:r,y:e}:{x:r-t*o[0],y:e-a*o[1]},selector$5=r=>({nodesDraggable:r.nodesDraggable,nodesConnectable:r.nodesConnectable,nodesFocusable:r.nodesFocusable,elementsSelectable:r.elementsSelectable,updateNodeDimensions:r.updateNodeDimensions,onError:r.onError}),NodeRenderer=r=>{const{nodesDraggable:e,nodesConnectable:t,nodesFocusable:a,elementsSelectable:o,updateNodeDimensions:c,onError:d}=useStore(selector$5,shallow$1),p=useVisibleNodes(r.onlyRenderVisibleElements),_=reactExports.useRef(),S=reactExports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const A=new ResizeObserver(C=>{const j=C.map(V=>({id:V.target.getAttribute("data-id"),nodeElement:V.target,forceUpdate:!0}));c(j)});return _.current=A,A},[]);return reactExports.useEffect(()=>()=>{_?.current?.disconnect()},[]),React.createElement("div",{className:"react-flow__nodes",style:containerStyle},p.map(A=>{let C=A.type||"default";r.nodeTypes[C]||(d?.("003",errorMessages.error003(C)),C="default");const j=r.nodeTypes[C]||r.nodeTypes.default,V=!!(A.draggable||e&&typeof A.draggable>"u"),J=!!(A.selectable||o&&typeof A.selectable>"u"),re=!!(A.connectable||t&&typeof A.connectable>"u"),ie=!!(A.focusable||a&&typeof A.focusable>"u"),K=r.nodeExtent?clampPosition(A.positionAbsolute,r.nodeExtent):A.positionAbsolute,Ne=K?.x??0,G=K?.y??0,se=getPositionWithOrigin({x:Ne,y:G,width:A.width??0,height:A.height??0,origin:r.nodeOrigin});return React.createElement(j,{key:A.id,id:A.id,className:A.className,style:A.style,type:C,data:A.data,sourcePosition:A.sourcePosition||Position.Bottom,targetPosition:A.targetPosition||Position.Top,hidden:A.hidden,xPos:Ne,yPos:G,xPosOrigin:se.x,yPosOrigin:se.y,selectNodesOnDrag:r.selectNodesOnDrag,onClick:r.onNodeClick,onMouseEnter:r.onNodeMouseEnter,onMouseMove:r.onNodeMouseMove,onMouseLeave:r.onNodeMouseLeave,onContextMenu:r.onNodeContextMenu,onDoubleClick:r.onNodeDoubleClick,selected:!!A.selected,isDraggable:V,isSelectable:J,isConnectable:re,isFocusable:ie,resizeObserver:S,dragHandle:A.dragHandle,zIndex:A[internalsSymbol]?.z??0,isParent:!!A[internalsSymbol]?.isParent,noDragClassName:r.noDragClassName,noPanClassName:r.noPanClassName,initialized:!!A.width&&!!A.height,rfId:r.rfId,disableKeyboardA11y:r.disableKeyboardA11y,ariaLabel:A.ariaLabel,hasHandleBounds:!!A[internalsSymbol]?.handleBounds})}))};NodeRenderer.displayName="NodeRenderer";var NodeRenderer$1=reactExports.memo(NodeRenderer);const shiftX=(r,e,t)=>t===Position.Left?r-e:t===Position.Right?r+e:r,shiftY=(r,e,t)=>t===Position.Top?r-e:t===Position.Bottom?r+e:r,EdgeUpdaterClassName="react-flow__edgeupdater",EdgeAnchor=({position:r,centerX:e,centerY:t,radius:a=10,onMouseDown:o,onMouseEnter:c,onMouseOut:d,type:p})=>React.createElement("circle",{onMouseDown:o,onMouseEnter:c,onMouseOut:d,className:cc$1([EdgeUpdaterClassName,`${EdgeUpdaterClassName}-${p}`]),cx:shiftX(e,a,r),cy:shiftY(t,a,r),r:a,stroke:"transparent",fill:"transparent"}),alwaysValidConnection=()=>!0;var wrapEdge=r=>{const e=({id:t,className:a,type:o,data:c,onClick:d,onEdgeDoubleClick:p,selected:_,animated:S,label:A,labelStyle:C,labelShowBg:j,labelBgStyle:V,labelBgPadding:J,labelBgBorderRadius:re,style:ie,source:K,target:Ne,sourceX:G,sourceY:se,targetX:He,targetY:Fe,sourcePosition:Xe,targetPosition:be,elementsSelectable:ta,hidden:pn,sourceHandleId:mr,targetHandleId:bp,onContextMenu:Sp,onMouseEnter:_r,onMouseMove:xs,onMouseLeave:ne,reconnectRadius:zl,onReconnect:Hl,onReconnectStart:pr,onReconnectEnd:Hp,markerEnd:Gl,markerStart:Ip,rfId:qp,ariaLabel:ci,isFocusable:Ep,isReconnectable:o0,pathOptions:w0,interactionWidth:a0,disableKeyboardA11y:P0})=>{const am=reactExports.useRef(null),[sm,C0]=reactExports.useState(!1),[Fm,Zm]=reactExports.useState(!1),p1=useStoreApi(),A1=reactExports.useMemo(()=>`url('#${getMarkerId(Ip,qp)}')`,[Ip,qp]),T1=reactExports.useMemo(()=>`url('#${getMarkerId(Gl,qp)}')`,[Gl,qp]);if(pn)return null;const Tm=dm=>{const{edges:pm,addSelectedEdges:Dm,unselectNodesAndEdges:Gm,multiSelectionActive:qm}=p1.getState(),vm=pm.find(r0=>r0.id===t);vm&&(ta&&(p1.setState({nodesSelectionActive:!1}),vm.selected&&qm?(Gm({nodes:[],edges:[vm]}),am.current?.blur()):Dm([t])),d&&d(dm,vm))},x1=getMouseHandler$1(t,p1.getState,p),S1=getMouseHandler$1(t,p1.getState,Sp),p0=getMouseHandler$1(t,p1.getState,_r),zp=getMouseHandler$1(t,p1.getState,xs),om=getMouseHandler$1(t,p1.getState,ne),bm=(dm,pm)=>{if(dm.button!==0)return;const{edges:Dm,isValidConnection:Gm}=p1.getState(),qm=pm?Ne:K,vm=(pm?bp:mr)||null,r0=pm?"target":"source",e1=Gm||alwaysValidConnection,_1=pm,j1=Dm.find(tm=>tm.id===t);Zm(!0),pr?.(dm,j1,r0);const q0=tm=>{Zm(!1),Hp?.(tm,j1,r0)};handlePointerDown({event:dm,handleId:vm,nodeId:qm,onConnect:tm=>Hl?.(j1,tm),isTarget:_1,getState:p1.getState,setState:p1.setState,isValidConnection:e1,edgeUpdaterType:r0,onReconnectEnd:q0})},i1=dm=>bm(dm,!0),r1=dm=>bm(dm,!1),Gp=()=>C0(!0),i0=()=>C0(!1),l0=!ta&&!d,im=dm=>{if(!P0&&elementSelectionKeys.includes(dm.key)&&ta){const{unselectNodesAndEdges:pm,addSelectedEdges:Dm,edges:Gm}=p1.getState();dm.key==="Escape"?(am.current?.blur(),pm({edges:[Gm.find(vm=>vm.id===t)]})):Dm([t])}};return React.createElement("g",{className:cc$1(["react-flow__edge",`react-flow__edge-${o}`,a,{selected:_,animated:S,inactive:l0,updating:sm}]),onClick:Tm,onDoubleClick:x1,onContextMenu:S1,onMouseEnter:p0,onMouseMove:zp,onMouseLeave:om,onKeyDown:Ep?im:void 0,tabIndex:Ep?0:void 0,role:Ep?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":ci===null?void 0:ci||`Edge from ${K} to ${Ne}`,"aria-describedby":Ep?`${ARIA_EDGE_DESC_KEY}-${qp}`:void 0,ref:am},!Fm&&React.createElement(r,{id:t,source:K,target:Ne,selected:_,animated:S,label:A,labelStyle:C,labelShowBg:j,labelBgStyle:V,labelBgPadding:J,labelBgBorderRadius:re,data:c,style:ie,sourceX:G,sourceY:se,targetX:He,targetY:Fe,sourcePosition:Xe,targetPosition:be,sourceHandleId:mr,targetHandleId:bp,markerStart:A1,markerEnd:T1,pathOptions:w0,interactionWidth:a0}),o0&&React.createElement(React.Fragment,null,(o0==="source"||o0===!0)&&React.createElement(EdgeAnchor,{position:Xe,centerX:G,centerY:se,radius:zl,onMouseDown:i1,onMouseEnter:Gp,onMouseOut:i0,type:"source"}),(o0==="target"||o0===!0)&&React.createElement(EdgeAnchor,{position:be,centerX:He,centerY:Fe,radius:zl,onMouseDown:r1,onMouseEnter:Gp,onMouseOut:i0,type:"target"})))};return e.displayName="EdgeWrapper",reactExports.memo(e)};function createEdgeTypes(r){const e={default:wrapEdge(r.default||BezierEdge),straight:wrapEdge(r.bezier||StraightEdge),step:wrapEdge(r.step||StepEdge),smoothstep:wrapEdge(r.step||SmoothStepEdge),simplebezier:wrapEdge(r.simplebezier||SimpleBezierEdge)},t={},a=Object.keys(r).filter(o=>!["default","bezier"].includes(o)).reduce((o,c)=>(o[c]=wrapEdge(r[c]||BezierEdge),o),t);return{...e,...a}}function getHandlePosition(r,e,t=null){const a=(t?.x||0)+e.x,o=(t?.y||0)+e.y,c=t?.width||e.width,d=t?.height||e.height;switch(r){case Position.Top:return{x:a+c/2,y:o};case Position.Right:return{x:a+c,y:o+d/2};case Position.Bottom:return{x:a+c/2,y:o+d};case Position.Left:return{x:a,y:o+d/2}}}function getHandle(r,e){return r?r.length===1||!e?r[0]:e&&r.find(t=>t.id===e)||null:null}const getEdgePositions=(r,e,t,a,o,c)=>{const d=getHandlePosition(t,r,e),p=getHandlePosition(c,a,o);return{sourceX:d.x,sourceY:d.y,targetX:p.x,targetY:p.y}};function isEdgeVisible({sourcePos:r,targetPos:e,sourceWidth:t,sourceHeight:a,targetWidth:o,targetHeight:c,width:d,height:p,transform:_}){const S={x:Math.min(r.x,e.x),y:Math.min(r.y,e.y),x2:Math.max(r.x+t,e.x+o),y2:Math.max(r.y+a,e.y+c)};S.x===S.x2&&(S.x2+=1),S.y===S.y2&&(S.y2+=1);const A=rectToBox({x:(0-_[0])/_[2],y:(0-_[1])/_[2],width:d/_[2],height:p/_[2]}),C=Math.max(0,Math.min(A.x2,S.x2)-Math.max(A.x,S.x)),j=Math.max(0,Math.min(A.y2,S.y2)-Math.max(A.y,S.y));return Math.ceil(C*j)>0}function getNodeData(r){const e=r?.[internalsSymbol]?.handleBounds||null,t=e&&r?.width&&r?.height&&typeof r?.positionAbsolute?.x<"u"&&typeof r?.positionAbsolute?.y<"u";return[{x:r?.positionAbsolute?.x||0,y:r?.positionAbsolute?.y||0,width:r?.width||0,height:r?.height||0},e,!!t]}const defaultEdgeTree=[{level:0,isMaxLevel:!0,edges:[]}];function groupEdgesByZLevel(r,e,t=!1){let a=-1;const o=r.reduce((d,p)=>{const _=isNumeric(p.zIndex);let S=_?p.zIndex:0;if(t){const A=e.get(p.target),C=e.get(p.source),j=p.selected||A?.selected||C?.selected,V=Math.max(C?.[internalsSymbol]?.z||0,A?.[internalsSymbol]?.z||0,1e3);S=(_?p.zIndex:0)+(j?V:0)}return d[S]?d[S].push(p):d[S]=[p],a=S>a?S:a,d},{}),c=Object.entries(o).map(([d,p])=>{const _=+d;return{edges:p,level:_,isMaxLevel:_===a}});return c.length===0?defaultEdgeTree:c}function useVisibleEdges(r,e,t){const a=useStore(reactExports.useCallback(o=>r?o.edges.filter(c=>{const d=e.get(c.source),p=e.get(c.target);return d?.width&&d?.height&&p?.width&&p?.height&&isEdgeVisible({sourcePos:d.positionAbsolute||{x:0,y:0},targetPos:p.positionAbsolute||{x:0,y:0},sourceWidth:d.width,sourceHeight:d.height,targetWidth:p.width,targetHeight:p.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[r,e]));return groupEdgesByZLevel(a,e,t)}const ArrowSymbol=({color:r="none",strokeWidth:e=1})=>React.createElement("polyline",{style:{stroke:r,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ArrowClosedSymbol=({color:r="none",strokeWidth:e=1})=>React.createElement("polyline",{style:{stroke:r,fill:r,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),MarkerSymbols={[MarkerType.Arrow]:ArrowSymbol,[MarkerType.ArrowClosed]:ArrowClosedSymbol};function useMarkerSymbol(r){const e=useStoreApi();return reactExports.useMemo(()=>Object.prototype.hasOwnProperty.call(MarkerSymbols,r)?MarkerSymbols[r]:(e.getState().onError?.("009",errorMessages.error009(r)),null),[r])}const Marker=({id:r,type:e,color:t,width:a=12.5,height:o=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:p="auto-start-reverse"})=>{const _=useMarkerSymbol(e);return _?React.createElement("marker",{className:"react-flow__arrowhead",id:r,markerWidth:`${a}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:p,refX:"0",refY:"0"},React.createElement(_,{color:t,strokeWidth:d})):null},markerSelector=({defaultColor:r,rfId:e})=>t=>{const a=[];return t.edges.reduce((o,c)=>([c.markerStart,c.markerEnd].forEach(d=>{if(d&&typeof d=="object"){const p=getMarkerId(d,e);a.includes(p)||(o.push({id:p,color:d.color||r,...d}),a.push(p))}}),o),[]).sort((o,c)=>o.id.localeCompare(c.id))},MarkerDefinitions=({defaultColor:r,rfId:e})=>{const t=useStore(reactExports.useCallback(markerSelector({defaultColor:r,rfId:e}),[r,e]),(a,o)=>!(a.length!==o.length||a.some((c,d)=>c.id!==o[d].id)));return React.createElement("defs",null,t.map(a=>React.createElement(Marker,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};MarkerDefinitions.displayName="MarkerDefinitions";var MarkerDefinitions$1=reactExports.memo(MarkerDefinitions);const selector$4=r=>({nodesConnectable:r.nodesConnectable,edgesFocusable:r.edgesFocusable,edgesUpdatable:r.edgesUpdatable,elementsSelectable:r.elementsSelectable,width:r.width,height:r.height,connectionMode:r.connectionMode,nodeInternals:r.nodeInternals,onError:r.onError}),EdgeRenderer=({defaultMarkerColor:r,onlyRenderVisibleElements:e,elevateEdgesOnSelect:t,rfId:a,edgeTypes:o,noPanClassName:c,onEdgeContextMenu:d,onEdgeMouseEnter:p,onEdgeMouseMove:_,onEdgeMouseLeave:S,onEdgeClick:A,onEdgeDoubleClick:C,onReconnect:j,onReconnectStart:V,onReconnectEnd:J,reconnectRadius:re,children:ie,disableKeyboardA11y:K})=>{const{edgesFocusable:Ne,edgesUpdatable:G,elementsSelectable:se,width:He,height:Fe,connectionMode:Xe,nodeInternals:be,onError:ta}=useStore(selector$4,shallow$1),pn=useVisibleEdges(e,be,t);return He?React.createElement(React.Fragment,null,pn.map(({level:mr,edges:bp,isMaxLevel:Sp})=>React.createElement("svg",{key:mr,style:{zIndex:mr},width:He,height:Fe,className:"react-flow__edges react-flow__container"},Sp&&React.createElement(MarkerDefinitions$1,{defaultColor:r,rfId:a}),React.createElement("g",null,bp.map(_r=>{const[xs,ne,zl]=getNodeData(be.get(_r.source)),[Hl,pr,Hp]=getNodeData(be.get(_r.target));if(!zl||!Hp)return null;let Gl=_r.type||"default";o[Gl]||(ta?.("011",errorMessages.error011(Gl)),Gl="default");const Ip=o[Gl]||o.default,qp=Xe===ConnectionMode.Strict?pr.target:(pr.target??[]).concat(pr.source??[]),ci=getHandle(ne.source,_r.sourceHandle),Ep=getHandle(qp,_r.targetHandle),o0=ci?.position||Position.Bottom,w0=Ep?.position||Position.Top,a0=!!(_r.focusable||Ne&&typeof _r.focusable>"u"),P0=_r.reconnectable||_r.updatable,am=typeof j<"u"&&(P0||G&&typeof P0>"u");if(!ci||!Ep)return ta?.("008",errorMessages.error008(ci,_r)),null;const{sourceX:sm,sourceY:C0,targetX:Fm,targetY:Zm}=getEdgePositions(xs,ci,o0,Hl,Ep,w0);return React.createElement(Ip,{key:_r.id,id:_r.id,className:cc$1([_r.className,c]),type:Gl,data:_r.data,selected:!!_r.selected,animated:!!_r.animated,hidden:!!_r.hidden,label:_r.label,labelStyle:_r.labelStyle,labelShowBg:_r.labelShowBg,labelBgStyle:_r.labelBgStyle,labelBgPadding:_r.labelBgPadding,labelBgBorderRadius:_r.labelBgBorderRadius,style:_r.style,source:_r.source,target:_r.target,sourceHandleId:_r.sourceHandle,targetHandleId:_r.targetHandle,markerEnd:_r.markerEnd,markerStart:_r.markerStart,sourceX:sm,sourceY:C0,targetX:Fm,targetY:Zm,sourcePosition:o0,targetPosition:w0,elementsSelectable:se,onContextMenu:d,onMouseEnter:p,onMouseMove:_,onMouseLeave:S,onClick:A,onEdgeDoubleClick:C,onReconnect:j,onReconnectStart:V,onReconnectEnd:J,reconnectRadius:re,rfId:a,ariaLabel:_r.ariaLabel,isFocusable:a0,isReconnectable:am,pathOptions:"pathOptions"in _r?_r.pathOptions:void 0,interactionWidth:_r.interactionWidth,disableKeyboardA11y:K})})))),ie):null};EdgeRenderer.displayName="EdgeRenderer";var EdgeRenderer$1=reactExports.memo(EdgeRenderer);const selector$3=r=>`translate(${r.transform[0]}px,${r.transform[1]}px) scale(${r.transform[2]})`;function Viewport({children:r}){const e=useStore(selector$3);return React.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},r)}function useOnInitHandler(r){const e=useReactFlow(),t=reactExports.useRef(!1);reactExports.useEffect(()=>{!t.current&&e.viewportInitialized&&r&&(setTimeout(()=>r(e),1),t.current=!0)},[r,e.viewportInitialized])}const oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top},ConnectionLine=({nodeId:r,handleType:e,style:t,type:a=ConnectionLineType.Bezier,CustomComponent:o,connectionStatus:c})=>{const{fromNode:d,handleId:p,toX:_,toY:S,connectionMode:A}=useStore(reactExports.useCallback(Fe=>({fromNode:Fe.nodeInternals.get(r),handleId:Fe.connectionHandleId,toX:(Fe.connectionPosition.x-Fe.transform[0])/Fe.transform[2],toY:(Fe.connectionPosition.y-Fe.transform[1])/Fe.transform[2],connectionMode:Fe.connectionMode}),[r]),shallow$1),C=d?.[internalsSymbol]?.handleBounds;let j=C?.[e];if(A===ConnectionMode.Loose&&(j=j||C?.[e==="source"?"target":"source"]),!d||!j)return null;const V=p?j.find(Fe=>Fe.id===p):j[0],J=V?V.x+V.width/2:(d.width??0)/2,re=V?V.y+V.height/2:d.height??0,ie=(d.positionAbsolute?.x??0)+J,K=(d.positionAbsolute?.y??0)+re,Ne=V?.position,G=Ne?oppositePosition[Ne]:null;if(!Ne||!G)return null;if(o)return React.createElement(o,{connectionLineType:a,connectionLineStyle:t,fromNode:d,fromHandle:V,fromX:ie,fromY:K,toX:_,toY:S,fromPosition:Ne,toPosition:G,connectionStatus:c});let se="";const He={sourceX:ie,sourceY:K,sourcePosition:Ne,targetX:_,targetY:S,targetPosition:G};return a===ConnectionLineType.Bezier?[se]=getBezierPath(He):a===ConnectionLineType.Step?[se]=getSmoothStepPath({...He,borderRadius:0}):a===ConnectionLineType.SmoothStep?[se]=getSmoothStepPath(He):a===ConnectionLineType.SimpleBezier?[se]=getSimpleBezierPath(He):se=`M${ie},${K} ${_},${S}`,React.createElement("path",{d:se,fill:"none",className:"react-flow__connection-path",style:t})};ConnectionLine.displayName="ConnectionLine";const selector$2=r=>({nodeId:r.connectionNodeId,handleType:r.connectionHandleType,nodesConnectable:r.nodesConnectable,connectionStatus:r.connectionStatus,width:r.width,height:r.height});function ConnectionLineWrapper({containerStyle:r,style:e,type:t,component:a}){const{nodeId:o,handleType:c,nodesConnectable:d,width:p,height:_,connectionStatus:S}=useStore(selector$2,shallow$1);return!(o&&c&&p&&d)?null:React.createElement("svg",{style:r,width:p,height:_,className:"react-flow__edges react-flow__connectionline react-flow__container"},React.createElement("g",{className:cc$1(["react-flow__connection",S])},React.createElement(ConnectionLine,{nodeId:o,handleType:c,style:e,type:t,CustomComponent:a,connectionStatus:S})))}function useNodeOrEdgeTypes(r,e){return reactExports.useRef(null),useStoreApi(),reactExports.useMemo(()=>e(r),[r])}const GraphView=({nodeTypes:r,edgeTypes:e,onMove:t,onMoveStart:a,onMoveEnd:o,onInit:c,onNodeClick:d,onEdgeClick:p,onNodeDoubleClick:_,onEdgeDoubleClick:S,onNodeMouseEnter:A,onNodeMouseMove:C,onNodeMouseLeave:j,onNodeContextMenu:V,onSelectionContextMenu:J,onSelectionStart:re,onSelectionEnd:ie,connectionLineType:K,connectionLineStyle:Ne,connectionLineComponent:G,connectionLineContainerStyle:se,selectionKeyCode:He,selectionOnDrag:Fe,selectionMode:Xe,multiSelectionKeyCode:be,panActivationKeyCode:ta,zoomActivationKeyCode:pn,deleteKeyCode:mr,onlyRenderVisibleElements:bp,elementsSelectable:Sp,selectNodesOnDrag:_r,defaultViewport:xs,translateExtent:ne,minZoom:zl,maxZoom:Hl,preventScrolling:pr,defaultMarkerColor:Hp,zoomOnScroll:Gl,zoomOnPinch:Ip,panOnScroll:qp,panOnScrollSpeed:ci,panOnScrollMode:Ep,zoomOnDoubleClick:o0,panOnDrag:w0,onPaneClick:a0,onPaneMouseEnter:P0,onPaneMouseMove:am,onPaneMouseLeave:sm,onPaneScroll:C0,onPaneContextMenu:Fm,onEdgeContextMenu:Zm,onEdgeMouseEnter:p1,onEdgeMouseMove:A1,onEdgeMouseLeave:T1,onReconnect:Tm,onReconnectStart:x1,onReconnectEnd:S1,reconnectRadius:p0,noDragClassName:zp,noWheelClassName:om,noPanClassName:bm,elevateEdgesOnSelect:i1,disableKeyboardA11y:r1,nodeOrigin:Gp,nodeExtent:i0,rfId:l0})=>{const im=useNodeOrEdgeTypes(r,createNodeTypes),dm=useNodeOrEdgeTypes(e,createEdgeTypes);return useOnInitHandler(c),React.createElement(FlowRenderer$1,{onPaneClick:a0,onPaneMouseEnter:P0,onPaneMouseMove:am,onPaneMouseLeave:sm,onPaneContextMenu:Fm,onPaneScroll:C0,deleteKeyCode:mr,selectionKeyCode:He,selectionOnDrag:Fe,selectionMode:Xe,onSelectionStart:re,onSelectionEnd:ie,multiSelectionKeyCode:be,panActivationKeyCode:ta,zoomActivationKeyCode:pn,elementsSelectable:Sp,onMove:t,onMoveStart:a,onMoveEnd:o,zoomOnScroll:Gl,zoomOnPinch:Ip,zoomOnDoubleClick:o0,panOnScroll:qp,panOnScrollSpeed:ci,panOnScrollMode:Ep,panOnDrag:w0,defaultViewport:xs,translateExtent:ne,minZoom:zl,maxZoom:Hl,onSelectionContextMenu:J,preventScrolling:pr,noDragClassName:zp,noWheelClassName:om,noPanClassName:bm,disableKeyboardA11y:r1},React.createElement(Viewport,null,React.createElement(EdgeRenderer$1,{edgeTypes:dm,onEdgeClick:p,onEdgeDoubleClick:S,onlyRenderVisibleElements:bp,onEdgeContextMenu:Zm,onEdgeMouseEnter:p1,onEdgeMouseMove:A1,onEdgeMouseLeave:T1,onReconnect:Tm,onReconnectStart:x1,onReconnectEnd:S1,reconnectRadius:p0,defaultMarkerColor:Hp,noPanClassName:bm,elevateEdgesOnSelect:!!i1,disableKeyboardA11y:r1,rfId:l0},React.createElement(ConnectionLineWrapper,{style:Ne,type:K,component:G,containerStyle:se})),React.createElement("div",{className:"react-flow__edgelabel-renderer"}),React.createElement(NodeRenderer$1,{nodeTypes:im,onNodeClick:d,onNodeDoubleClick:_,onNodeMouseEnter:A,onNodeMouseMove:C,onNodeMouseLeave:j,onNodeContextMenu:V,selectNodesOnDrag:_r,onlyRenderVisibleElements:bp,noPanClassName:bm,noDragClassName:zp,disableKeyboardA11y:r1,nodeOrigin:Gp,nodeExtent:i0,rfId:l0})))};GraphView.displayName="GraphView";var GraphView$1=reactExports.memo(GraphView);const infiniteExtent=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],initialState={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:infiniteExtent,nodeExtent:infiniteExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ConnectionMode.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:devWarn,isValidConnection:void 0},createRFStore=()=>createWithEqualityFn((r,e)=>({...initialState,setNodes:t=>{const{nodeInternals:a,nodeOrigin:o,elevateNodesOnSelect:c}=e();r({nodeInternals:createNodeInternals(t,a,o,c)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:t=>{const{defaultEdgeOptions:a={}}=e();r({edges:t.map(o=>({...a,...o}))})},setDefaultNodesAndEdges:(t,a)=>{const o=typeof t<"u",c=typeof a<"u",d=o?createNodeInternals(t,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;r({nodeInternals:d,edges:c?a:[],hasDefaultNodes:o,hasDefaultEdges:c})},updateNodeDimensions:t=>{const{onNodesChange:a,nodeInternals:o,fitViewOnInit:c,fitViewOnInitDone:d,fitViewOnInitOptions:p,domNode:_,nodeOrigin:S}=e(),A=_?.querySelector(".react-flow__viewport");if(!A)return;const C=window.getComputedStyle(A),{m22:j}=new window.DOMMatrixReadOnly(C.transform),V=t.reduce((re,ie)=>{const K=o.get(ie.id);if(K?.hidden)o.set(K.id,{...K,[internalsSymbol]:{...K[internalsSymbol],handleBounds:void 0}});else if(K){const Ne=getDimensions(ie.nodeElement);!!(Ne.width&&Ne.height&&(K.width!==Ne.width||K.height!==Ne.height||ie.forceUpdate))&&(o.set(K.id,{...K,[internalsSymbol]:{...K[internalsSymbol],handleBounds:{source:getHandleBounds(".source",ie.nodeElement,j,S),target:getHandleBounds(".target",ie.nodeElement,j,S)}},...Ne}),re.push({id:K.id,type:"dimensions",dimensions:Ne}))}return re},[]);updateAbsoluteNodePositions(o,S);const J=d||c&&!d&&fitView(e,{initial:!0,...p});r({nodeInternals:new Map(o),fitViewOnInitDone:J}),V?.length>0&&a?.(V)},updateNodePositions:(t,a=!0,o=!1)=>{const{triggerNodeChanges:c}=e(),d=t.map(p=>{const _={id:p.id,type:"position",dragging:o};return a&&(_.positionAbsolute=p.positionAbsolute,_.position=p.position),_});c(d)},triggerNodeChanges:t=>{const{onNodesChange:a,nodeInternals:o,hasDefaultNodes:c,nodeOrigin:d,getNodes:p,elevateNodesOnSelect:_}=e();if(t?.length){if(c){const S=applyNodeChanges(t,p()),A=createNodeInternals(S,o,d,_);r({nodeInternals:A})}a?.(t)}},addSelectedNodes:t=>{const{multiSelectionActive:a,edges:o,getNodes:c}=e();let d,p=null;a?d=t.map(_=>createSelectionChange(_,!0)):(d=getSelectionChanges(c(),t),p=getSelectionChanges(o,[])),updateNodesAndEdgesSelections({changedNodes:d,changedEdges:p,get:e,set:r})},addSelectedEdges:t=>{const{multiSelectionActive:a,edges:o,getNodes:c}=e();let d,p=null;a?d=t.map(_=>createSelectionChange(_,!0)):(d=getSelectionChanges(o,t),p=getSelectionChanges(c(),[])),updateNodesAndEdgesSelections({changedNodes:p,changedEdges:d,get:e,set:r})},unselectNodesAndEdges:({nodes:t,edges:a}={})=>{const{edges:o,getNodes:c}=e(),d=t||c(),p=a||o,_=d.map(A=>(A.selected=!1,createSelectionChange(A.id,!1))),S=p.map(A=>createSelectionChange(A.id,!1));updateNodesAndEdgesSelections({changedNodes:_,changedEdges:S,get:e,set:r})},setMinZoom:t=>{const{d3Zoom:a,maxZoom:o}=e();a?.scaleExtent([t,o]),r({minZoom:t})},setMaxZoom:t=>{const{d3Zoom:a,minZoom:o}=e();a?.scaleExtent([o,t]),r({maxZoom:t})},setTranslateExtent:t=>{e().d3Zoom?.translateExtent(t),r({translateExtent:t})},resetSelectedElements:()=>{const{edges:t,getNodes:a}=e(),c=a().filter(p=>p.selected).map(p=>createSelectionChange(p.id,!1)),d=t.filter(p=>p.selected).map(p=>createSelectionChange(p.id,!1));updateNodesAndEdgesSelections({changedNodes:c,changedEdges:d,get:e,set:r})},setNodeExtent:t=>{const{nodeInternals:a}=e();a.forEach(o=>{o.positionAbsolute=clampPosition(o.position,t)}),r({nodeExtent:t,nodeInternals:new Map(a)})},panBy:t=>{const{transform:a,width:o,height:c,d3Zoom:d,d3Selection:p,translateExtent:_}=e();if(!d||!p||!t.x&&!t.y)return!1;const S=identity.translate(a[0]+t.x,a[1]+t.y).scale(a[2]),A=[[0,0],[o,c]],C=d?.constrain()(S,A,_);return d.transform(p,C),a[0]!==C.x||a[1]!==C.y||a[2]!==C.k},cancelConnection:()=>r({connectionNodeId:initialState.connectionNodeId,connectionHandleId:initialState.connectionHandleId,connectionHandleType:initialState.connectionHandleType,connectionStatus:initialState.connectionStatus,connectionStartHandle:initialState.connectionStartHandle,connectionEndHandle:initialState.connectionEndHandle}),reset:()=>r({...initialState})}),Object.is),ReactFlowProvider=({children:r})=>{const e=reactExports.useRef(null);return e.current||(e.current=createRFStore()),React.createElement(Provider$1,{value:e.current},r)};ReactFlowProvider.displayName="ReactFlowProvider";const Wrapper=({children:r})=>reactExports.useContext(StoreContext)?React.createElement(React.Fragment,null,r):React.createElement(ReactFlowProvider,null,r);Wrapper.displayName="ReactFlowWrapper";const defaultNodeTypes={input:InputNode$1,default:DefaultNode$1,output:OutputNode$1,group:GroupNode},defaultEdgeTypes={default:BezierEdge,straight:StraightEdge,step:StepEdge,smoothstep:SmoothStepEdge,simplebezier:SimpleBezierEdge},initNodeOrigin=[0,0],initSnapGrid=[15,15],initDefaultViewport={x:0,y:0,zoom:1},wrapperStyle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ReactFlow=reactExports.forwardRef(({nodes:r,edges:e,defaultNodes:t,defaultEdges:a,className:o,nodeTypes:c=defaultNodeTypes,edgeTypes:d=defaultEdgeTypes,onNodeClick:p,onEdgeClick:_,onInit:S,onMove:A,onMoveStart:C,onMoveEnd:j,onConnect:V,onConnectStart:J,onConnectEnd:re,onClickConnectStart:ie,onClickConnectEnd:K,onNodeMouseEnter:Ne,onNodeMouseMove:G,onNodeMouseLeave:se,onNodeContextMenu:He,onNodeDoubleClick:Fe,onNodeDragStart:Xe,onNodeDrag:be,onNodeDragStop:ta,onNodesDelete:pn,onEdgesDelete:mr,onSelectionChange:bp,onSelectionDragStart:Sp,onSelectionDrag:_r,onSelectionDragStop:xs,onSelectionContextMenu:ne,onSelectionStart:zl,onSelectionEnd:Hl,connectionMode:pr=ConnectionMode.Strict,connectionLineType:Hp=ConnectionLineType.Bezier,connectionLineStyle:Gl,connectionLineComponent:Ip,connectionLineContainerStyle:qp,deleteKeyCode:ci="Backspace",selectionKeyCode:Ep="Shift",selectionOnDrag:o0=!1,selectionMode:w0=SelectionMode.Full,panActivationKeyCode:a0="Space",multiSelectionKeyCode:P0=isMacOs()?"Meta":"Control",zoomActivationKeyCode:am=isMacOs()?"Meta":"Control",snapToGrid:sm=!1,snapGrid:C0=initSnapGrid,onlyRenderVisibleElements:Fm=!1,selectNodesOnDrag:Zm=!0,nodesDraggable:p1,nodesConnectable:A1,nodesFocusable:T1,nodeOrigin:Tm=initNodeOrigin,edgesFocusable:x1,edgesUpdatable:S1,elementsSelectable:p0,defaultViewport:zp=initDefaultViewport,minZoom:om=.5,maxZoom:bm=2,translateExtent:i1=infiniteExtent,preventScrolling:r1=!0,nodeExtent:Gp,defaultMarkerColor:i0="#b1b1b7",zoomOnScroll:l0=!0,zoomOnPinch:im=!0,panOnScroll:dm=!1,panOnScrollSpeed:pm=.5,panOnScrollMode:Dm=PanOnScrollMode.Free,zoomOnDoubleClick:Gm=!0,panOnDrag:qm=!0,onPaneClick:vm,onPaneMouseEnter:r0,onPaneMouseMove:e1,onPaneMouseLeave:_1,onPaneScroll:j1,onPaneContextMenu:q0,children:d1,onEdgeContextMenu:tm,onEdgeDoubleClick:o1,onEdgeMouseEnter:jm,onEdgeMouseMove:l1,onEdgeMouseLeave:gg,onEdgeUpdate:Jg,onEdgeUpdateStart:Dg,onEdgeUpdateEnd:Eg,onReconnect:ev,onReconnectStart:pv,onReconnectEnd:sv,reconnectRadius:kv=10,edgeUpdaterRadius:Zv=10,onNodesChange:ry,onEdgesChange:oy,noDragClassName:Hv="nodrag",noWheelClassName:vv="nowheel",noPanClassName:ag="nopan",fitView:_v=!1,fitViewOptions:Mv,connectOnClick:c0=!0,attributionPosition:F0,proOptions:Z,defaultEdgeOptions:Fl,elevateNodesOnSelect:Wl=!0,elevateEdgesOnSelect:x0=!1,disableKeyboardA11y:S0=!1,autoPanOnConnect:Mm=!0,autoPanOnNodeDrag:km=!0,connectionRadius:wm=20,isValidConnection:Xm,onError:Nm,style:m1,id:N1,nodeDragThreshold:H1,...Sg},bg)=>{const q1=N1||"1";return React.createElement("div",{...Sg,style:{...m1,...wrapperStyle},ref:bg,className:cc$1(["react-flow",o]),"data-testid":"rf__wrapper",id:N1},React.createElement(Wrapper,null,React.createElement(GraphView$1,{onInit:S,onMove:A,onMoveStart:C,onMoveEnd:j,onNodeClick:p,onEdgeClick:_,onNodeMouseEnter:Ne,onNodeMouseMove:G,onNodeMouseLeave:se,onNodeContextMenu:He,onNodeDoubleClick:Fe,nodeTypes:c,edgeTypes:d,connectionLineType:Hp,connectionLineStyle:Gl,connectionLineComponent:Ip,connectionLineContainerStyle:qp,selectionKeyCode:Ep,selectionOnDrag:o0,selectionMode:w0,deleteKeyCode:ci,multiSelectionKeyCode:P0,panActivationKeyCode:a0,zoomActivationKeyCode:am,onlyRenderVisibleElements:Fm,selectNodesOnDrag:Zm,defaultViewport:zp,translateExtent:i1,minZoom:om,maxZoom:bm,preventScrolling:r1,zoomOnScroll:l0,zoomOnPinch:im,zoomOnDoubleClick:Gm,panOnScroll:dm,panOnScrollSpeed:pm,panOnScrollMode:Dm,panOnDrag:qm,onPaneClick:vm,onPaneMouseEnter:r0,onPaneMouseMove:e1,onPaneMouseLeave:_1,onPaneScroll:j1,onPaneContextMenu:q0,onSelectionContextMenu:ne,onSelectionStart:zl,onSelectionEnd:Hl,onEdgeContextMenu:tm,onEdgeDoubleClick:o1,onEdgeMouseEnter:jm,onEdgeMouseMove:l1,onEdgeMouseLeave:gg,onReconnect:ev??Jg,onReconnectStart:pv??Dg,onReconnectEnd:sv??Eg,reconnectRadius:kv??Zv,defaultMarkerColor:i0,noDragClassName:Hv,noWheelClassName:vv,noPanClassName:ag,elevateEdgesOnSelect:x0,rfId:q1,disableKeyboardA11y:S0,nodeOrigin:Tm,nodeExtent:Gp}),React.createElement(StoreUpdater,{nodes:r,edges:e,defaultNodes:t,defaultEdges:a,onConnect:V,onConnectStart:J,onConnectEnd:re,onClickConnectStart:ie,onClickConnectEnd:K,nodesDraggable:p1,nodesConnectable:A1,nodesFocusable:T1,edgesFocusable:x1,edgesUpdatable:S1,elementsSelectable:p0,elevateNodesOnSelect:Wl,minZoom:om,maxZoom:bm,nodeExtent:Gp,onNodesChange:ry,onEdgesChange:oy,snapToGrid:sm,snapGrid:C0,connectionMode:pr,translateExtent:i1,connectOnClick:c0,defaultEdgeOptions:Fl,fitView:_v,fitViewOptions:Mv,onNodesDelete:pn,onEdgesDelete:mr,onNodeDragStart:Xe,onNodeDrag:be,onNodeDragStop:ta,onSelectionDrag:_r,onSelectionDragStart:Sp,onSelectionDragStop:xs,noPanClassName:ag,nodeOrigin:Tm,rfId:q1,autoPanOnConnect:Mm,autoPanOnNodeDrag:km,onError:Nm,connectionRadius:wm,isValidConnection:Xm,nodeDragThreshold:H1}),React.createElement(Wrapper$1,{onSelectionChange:bp}),d1,React.createElement(Attribution,{proOptions:Z,position:F0}),React.createElement(A11yDescriptions,{rfId:q1,disableKeyboardA11y:S0})))});ReactFlow.displayName="ReactFlow";const selector$1$1=r=>r.domNode?.querySelector(".react-flow__edgelabel-renderer");function EdgeLabelRenderer({children:r}){const e=useStore(selector$1$1);return e?reactDomExports.createPortal(r,e):null}const viewportSelector=r=>({x:r.transform[0],y:r.transform[1],zoom:r.transform[2]});function useViewport(){return useStore(viewportSelector,shallow$1)}function PlusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},React.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function MinusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},React.createElement("path",{d:"M0 0h32v4.2H0z"}))}function FitViewIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},React.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function LockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function UnlockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ControlButton=({children:r,className:e,...t})=>React.createElement("button",{type:"button",className:cc$1(["react-flow__controls-button",e]),...t},r);ControlButton.displayName="ControlButton";const selector$1=r=>({isInteractive:r.nodesDraggable||r.nodesConnectable||r.elementsSelectable,minZoomReached:r.transform[2]<=r.minZoom,maxZoomReached:r.transform[2]>=r.maxZoom}),Controls=({style:r,showZoom:e=!0,showFitView:t=!0,showInteractive:a=!0,fitViewOptions:o,onZoomIn:c,onZoomOut:d,onFitView:p,onInteractiveChange:_,className:S,children:A,position:C="bottom-left"})=>{const j=useStoreApi(),[V,J]=reactExports.useState(!1),{isInteractive:re,minZoomReached:ie,maxZoomReached:K}=useStore(selector$1,shallow$1),{zoomIn:Ne,zoomOut:G,fitView:se}=useReactFlow();if(reactExports.useEffect(()=>{J(!0)},[]),!V)return null;const He=()=>{Ne(),c?.()},Fe=()=>{G(),d?.()},Xe=()=>{se(o),p?.()},be=()=>{j.setState({nodesDraggable:!re,nodesConnectable:!re,elementsSelectable:!re}),_?.(!re)};return React.createElement(Panel,{className:cc$1(["react-flow__controls",S]),position:C,style:r,"data-testid":"rf__controls"},e&&React.createElement(React.Fragment,null,React.createElement(ControlButton,{onClick:He,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:K},React.createElement(PlusIcon,null)),React.createElement(ControlButton,{onClick:Fe,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:ie},React.createElement(MinusIcon,null))),t&&React.createElement(ControlButton,{className:"react-flow__controls-fitview",onClick:Xe,title:"fit view","aria-label":"fit view"},React.createElement(FitViewIcon,null)),a&&React.createElement(ControlButton,{className:"react-flow__controls-interactive",onClick:be,title:"toggle interactivity","aria-label":"toggle interactivity"},re?React.createElement(UnlockIcon,null):React.createElement(LockIcon,null)),A)};Controls.displayName="Controls";var Controls$1=reactExports.memo(Controls),BackgroundVariant;(function(r){r.Lines="lines",r.Dots="dots",r.Cross="cross"})(BackgroundVariant||(BackgroundVariant={}));function LinePattern({color:r,dimensions:e,lineWidth:t}){return React.createElement("path",{stroke:r,strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function DotPattern({color:r,radius:e}){return React.createElement("circle",{cx:e,cy:e,r:e,fill:r})}const defaultColor={[BackgroundVariant.Dots]:"#91919a",[BackgroundVariant.Lines]:"#eee",[BackgroundVariant.Cross]:"#e2e2e2"},defaultSize={[BackgroundVariant.Dots]:1,[BackgroundVariant.Lines]:1,[BackgroundVariant.Cross]:6},selector=r=>({transform:r.transform,patternId:`pattern-${r.rfId}`});function Background({id:r,variant:e=BackgroundVariant.Dots,gap:t=20,size:a,lineWidth:o=1,offset:c=2,color:d,style:p,className:_}){const S=reactExports.useRef(null),{transform:A,patternId:C}=useStore(selector,shallow$1),j=d||defaultColor[e],V=a||defaultSize[e],J=e===BackgroundVariant.Dots,re=e===BackgroundVariant.Cross,ie=Array.isArray(t)?t:[t,t],K=[ie[0]*A[2]||1,ie[1]*A[2]||1],Ne=V*A[2],G=re?[Ne,Ne]:K,se=J?[Ne/c,Ne/c]:[G[0]/c,G[1]/c];return React.createElement("svg",{className:cc$1(["react-flow__background",_]),style:{...p,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:S,"data-testid":"rf__background"},React.createElement("pattern",{id:C+r,x:A[0]%K[0],y:A[1]%K[1],width:K[0],height:K[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${se[0]},-${se[1]})`},J?React.createElement(DotPattern,{color:j,radius:Ne/c}):React.createElement(LinePattern,{dimensions:G,color:j,lineWidth:o})),React.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C+r})`}))}Background.displayName="Background";var Background$1=reactExports.memo(Background);function sortByCtimeDescending(r,e){const t=new Date(r?.data?.aiida?.ctime||0);return new Date(e?.data?.aiida?.ctime||0)-t}function sortByLabel(r,e){return(r?.data?.label||"").localeCompare(e?.data?.label||"")}function categorizeNodes(r){const e=r.filter(o=>o.data?.node_type.includes("calculation")).sort(sortByCtimeDescending),t=r.filter(o=>o.data?.node_type.includes("workflow")).sort(sortByCtimeDescending),a=r.filter(o=>o.data?.node_type.includes("data")).sort(sortByLabel);return{calculation:e,workflow:t,data:a}}function layoutGraphDefault(r,e,t,a={}){const{spacingX:o=280,spacingY:c=70,groupGapY:d=90,centerX:p=window.innerWidth/2,centerY:_=window.innerHeight/2,smallThreshold:S=20}=a,A=[],C=[],j=categorizeNodes(e),V=categorizeNodes(t),J={data:["calculation","workflow","data"],calculation:["data","calculation","workflow"],workflow:["data","calculation","workflow"]},re=r.data?.node_type.split(".")[1],ie=J[re]||J.data;A.push({...r,position:{x:p,y:_}});const Ne=ie.flatMap(se=>[...j[se]||[],...V[se]||[]]).length<=S,G=(se,He,Fe,Xe=!0)=>{(se||[]).forEach((be,ta)=>{const pn=Xe?He+ta*c:He-ta*c,mr=p+o*Fe;be.position={x:mr,y:pn},A.push(be);let bp="";if(be?.data?.aiida?.link_label){const xs=be.data.aiida.link_label;bp=xs.length>21?`${xs.slice(0,18)}...`:xs}const Sp={},_r=be.data?.node_type||"";(_r.includes("workflow")||_r.includes("process"))&&(Sp.strokeDasharray="5,5"),C.push({id:`e-${Fe<0?be.id+"->":r.id+"->"}${Fe<0?r.id:be.id}`,source:Fe<0?be.id:r.id,target:Fe<0?r.id:be.id,sourcePosition:Fe<0?"right":"left",targetPosition:Fe<0?"left":"right",type:"custom",style:Sp,data:{label:bp,labelPosition:Fe<0?"start":"end"}})})};if(Ne){const se=ie.flatMap(be=>j[be]||[]).reverse(),He=ie.flatMap(be=>V[be]||[]).reverse(),Fe=_-(se.length-1)/2*c,Xe=_-(He.length-1)/2*c;se.forEach((be,ta)=>G([be],Fe+ta*c,-1,!0)),He.forEach((be,ta)=>G([be],Xe+ta*c,1,!0))}else{const se=j[ie[0]]||[],He=V[ie[0]]||[],Fe=ie.slice(1,3),Xe=Fe.flatMap(mr=>j[mr]||[]),be=Fe.flatMap(mr=>V[mr]||[]),ta=_-175;G(se,ta,-1,!0),G(He,ta,1,!0);const pn=ta-d;G(Xe,pn,-1,!1),G(be,pn,1,!1)}return{nodes:A,edges:C}}async function fetchGeneric(r,e={},t=null){try{const a=await fetch(r,e);return a.ok?await a.json():(console.warn(`Fetch failed for ${r} with status ${a.status}`),t)}catch(a){return console.error(`Error fetching ${r}:`,a),t}}async function fetchUsers(r){const e=`${r}/users/`;return(await fetchGeneric(e,{},{data:[]})).data}async function fetchDownloadFormats(r){const e=`${r}/nodes/download_formats/`;return(await fetchGeneric(e,{},{data:[]})).data}async function fetchGroups(r){const e=`${r}/groups`;return(await fetchGeneric(e,{},{data:{groups:[]}}))?.data?.groups||[]}async function fetchFromQueryBuilder(r,e){try{const t=await fetch(`${r}/querybuilder/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?(await t.json())?.data||[]:(console.error("QueryBuilder request failed:",t.status,t.statusText),[])}catch(t){return console.error("Error fetching from QueryBuilder:",t),[]}}async function fetchNodeById(r,e){if(!e)return null;const t=`${r}/nodes/${encodeURIComponent(e)}`;return fetchGeneric(t)}async function fetchNodeContents(r,e){if(!e)return null;const t=["attributes","comments","extras","derived_properties"],a={};for(const o of t){const c=`${r}/nodes/${encodeURIComponent(e)}/contents/${o}`,d=await fetchGeneric(c,{},{});d?a[o]=d?.data?.[o]??d:a[o]={}}return a}async function fetchNodeRepoList(r,e){if(!e)return[];const t=`${r}/nodes/${encodeURIComponent(e)}/repo/list`,a=await fetchGeneric(t,{},{data:{repo_list:[]}});return a?.data?.repo_list?a.data.repo_list.filter(o=>o.type==="FILE").map(o=>({name:o.name,downloadUrl:`${r}/nodes/${encodeURIComponent(e)}/repo/contents?filename="${encodeURIComponent(o.name)}"`})):[]}async function fetchRetrievedUUID(r,e){if(!e)return null;const t=`${r}/nodes/${encodeURIComponent(e)}/links/outgoing/`;return((await fetchGeneric(t,{},{data:{outgoing:[]}}))?.data?.outgoing||[]).find(d=>d.link_label==="retrieved")?.uuid||null}async function fetchFiles(r,e,t){if(!e)return null;const a=["input_files","output_files"],o={};for(const c of a){const d=`${r}/calcjobs/${encodeURIComponent(e)}/${c}`,p=await fetchGeneric(d,{},{data:[]}),_=Array.isArray(p.data?.[c])?p.data[c]:Array.isArray(p.data)?p.data:[],S=c==="input_files"?e:t,A=_.filter(C=>C.type==="FILE").map(C=>({...C,downloadUrl:`${r}/nodes/${encodeURIComponent(S)}/repo/contents?filename="${encodeURIComponent(C.name)}"`}));o[c]=A}return o}async function fetchLinks(r,e){if(!e)return{incoming:[],outgoing:[]};try{const[t,a]=await Promise.all([fetch(`${r}/nodes/${encodeURIComponent(e)}/links/incoming`),fetch(`${r}/nodes/${encodeURIComponent(e)}/links/outgoing`)]),o=t.ok?await t.json():[],c=a.ok?await a.json():[];return{incoming:o,outgoing:c}}catch(t){return console.error("Error fetching links:",t),{incoming:[],outgoing:[]}}}async function fetchLinkCounts(r,e=[]){if(!e.length)return e;try{return await Promise.all(e.map(async a=>{if(typeof a?.data?.parentCount=="number"&&typeof a?.data?.childCount=="number")return a;const{incoming:o,outgoing:c}=await fetchLinks(r,a.id),d=(o?.data?.incoming||[]).length,p=(c?.data?.outgoing||[]).length;return{...a,data:{...a.data,parentCount:d,childCount:p}}}))}catch(t){return console.error("Error fetching next level nodes:",t),e}}async function smartFetchData(r,e,t={},a=null){const o=t[e.id];if(o)return console.debug(`${e.id} data is already cached`),{...e,data:{...e.data,...o}};let c={...e.data};const d={},p=async()=>fetchNodeRepoList(r,e.id),_=await fetchNodeContents(r,e.id);c={...c,..._};const S=d[e.data.label]?d[e.data.label](r,e.id):null,A=p();let C=null;e.data.label==="CalcJobNode"&&(C=(async()=>{let re=c.retrievedUUID;re||(re=await fetchRetrievedUUID(r,e.id));const ie=await fetchFiles(r,e.id,re);return{retrievedUUID:re,files:ie}})());const[j,V,J]=await Promise.all([S,A,C]);if(j&&(c.download=j),V&&(c.repo_list=V),J&&(c={...c,...J}),a&&e.data.node_type){const re=e.data.node_type.endsWith("|")?e.data.node_type:`${e.data.node_type}|`,ie=a[re]||[];c.downloadByFormat=ie.reduce((K,Ne)=>(K[Ne]=`${r}/nodes/${encodeURIComponent(e.id)}/download?download_format=${encodeURIComponent(Ne)}`,K),{})}return{...e,data:c}}async function fetchGraphByNodeId(r,e){const a=(await fetchNodeById(r,e)).data.nodes[0];if(!a)return{nodes:[],edges:[]};const{incoming:o,outgoing:c}=await fetchLinks(r,e),d=o?.data?.incoming||[],p=c?.data?.outgoing||[],_=[{id:a.uuid,data:{label:a.node_type.split(".").filter(Boolean).pop(),node_type:a.node_type,pos:0,aiida:a,parentCount:d.length,childCount:p.length}},...d.map(V=>({id:V.uuid,data:{label:V.node_type.split(".").filter(Boolean).pop(),node_type:V.node_type,pos:1,link_label:V.link_label,aiida:V}})),...p.map(V=>({id:V.uuid,data:{label:V.node_type.split(".").filter(Boolean).pop(),node_type:V.node_type,pos:-1,link_label:V.link_label,aiida:V}}))],S=new Map;for(const V of _)S.has(V.id)||S.set(V.id,V);const A=Array.from(S.values()),{nodes:C,edges:j}=layoutGraphDefault(A.find(V=>V.data.pos===0),A.filter(V=>V.data.pos===1),A.filter(V=>V.data.pos===-1));return{nodes:C,edges:j}}function Breadcrumbs({trail:r,onClick:e,maxItems:t=10}){const a=r.slice(-t);return jsxRuntimeExports$1.jsxs("div",{className:"ae:w-full ae:flex ae:gap-2 ae:flex-wrap ae:overflow-x-auto ae:items-center ae:bg-slate-100 ae:border-slate-800 ae:border-t ae:p-2",children:[jsxRuntimeExports$1.jsx("span",{className:"",children:"History:"}),a.map((o,c)=>jsxRuntimeExports$1.jsxs(React.Fragment,{children:[jsxRuntimeExports$1.jsxs("button",{className:"explorerButton ae:text-sm ",onClick:()=>e(o,c),children:[o.data.label," (",o.data.aiida.uuid.split("-")[0],")"]}),c<a.length-1&&jsxRuntimeExports$1.jsx("span",{className:"ae:mx-1",children:"→"})]},`${o.id}-${c}`))]})}function ErrorDisplay({message:r,onRetry:e}){return jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:flex-col ae:items-center ae:text-red-500 ae:p-4",children:[jsxRuntimeExports$1.jsx("div",{className:"ae:text-5xl ae:mb-2",children:"⚠️"}),jsxRuntimeExports$1.jsx("span",{className:"ae:text-sm ae:font-medium",children:"Failed to load data"}),r&&jsxRuntimeExports$1.jsx("span",{className:"ae:text-xs ae:text-gray-400 ae:mt-1",children:r}),e&&jsxRuntimeExports$1.jsx("button",{onClick:e,className:"ae:mt-3 ae:px-3 ae:py-1 ae:bg-red-500 ae:text-white ae:hover:bg-red-600",children:"Retry"})]})}function GroupIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"})]})}function DownloadIcon({data:r=null,downloadUrl:e=null,filename:t="data.json",size:a=14,className:o=""}){const c=()=>{if(e){const d=document.createElement("a");d.href=e,d.download=t,d.target="_blank",d.rel="noopener noreferrer",d.click();return}if(r){const d=JSON.stringify(r,null,2),p=new Blob([d],{type:"application/json"}),_=URL.createObjectURL(p),S=document.createElement("a");S.href=_,S.download=t,S.click(),URL.revokeObjectURL(_)}};return jsxRuntimeExports$1.jsx("button",{type:"button",onClick:c,title:"Download",className:"ae:p-1",children:jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[jsxRuntimeExports$1.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports$1.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports$1.jsx("path",{d:"m7 10 5 5 5-5"})]})})}function ClipBoardIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports$1.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function ClipboardCopyIcon({size:r=18,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"m12 15 2 2 4-4"}),jsxRuntimeExports$1.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports$1.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function RightDropDownIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports$1.jsx("path",{d:"m9 18 6-6-6-6"})})}function DownDropDownIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports$1.jsx("path",{d:"m6 9 6 6 6-6"})})}function ViewIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}),jsxRuntimeExports$1.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function LinksIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),jsxRuntimeExports$1.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}function QuestionIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports$1.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),jsxRuntimeExports$1.jsx("path",{d:"M12 17h.01"})]})}function ClickIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"}),jsxRuntimeExports$1.jsx("path",{d:"M5 3a2 2 0 0 0-2 2"}),jsxRuntimeExports$1.jsx("path",{d:"M19 3a2 2 0 0 1 2 2"}),jsxRuntimeExports$1.jsx("path",{d:"M5 21a2 2 0 0 1-2-2"}),jsxRuntimeExports$1.jsx("path",{d:"M9 3h1"}),jsxRuntimeExports$1.jsx("path",{d:"M9 21h2"}),jsxRuntimeExports$1.jsx("path",{d:"M14 3h1"}),jsxRuntimeExports$1.jsx("path",{d:"M3 9v1"}),jsxRuntimeExports$1.jsx("path",{d:"M21 9v2"}),jsxRuntimeExports$1.jsx("path",{d:"M3 14v1"})]})}function ClickIcon2({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports$1.jsx("path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z"})})}function DoubleClickIcon({size:r=24,className:e}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M14 4.1 12 6"}),jsxRuntimeExports$1.jsx("path",{d:"m5.1 8-2.9-.8"}),jsxRuntimeExports$1.jsx("path",{d:"m6 12-1.9 2"}),jsxRuntimeExports$1.jsx("path",{d:"M7.2 2.2 8 5.1"}),jsxRuntimeExports$1.jsx("path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"})]})}function BreadcrumbsIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M16 14v2.2l1.6 1"}),jsxRuntimeExports$1.jsx("path",{d:"M7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2"}),jsxRuntimeExports$1.jsx("circle",{cx:"16",cy:"16",r:"6"})]})}function GraphIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),jsxRuntimeExports$1.jsx("path",{d:"M12 12V8"})]})}function GithubIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),jsxRuntimeExports$1.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]})}const OverlayContext=reactExports.createContext(null);function useOverlayContainer(){const r=reactExports.useContext(OverlayContext);if(!r)throw new Error("useOverlayContainer must be used inside <OverlayProvider>");return r}function OverlayProvider({children:r,className:e=""}){const t=reactExports.useRef(null);return jsxRuntimeExports$1.jsx(OverlayContext.Provider,{value:t,children:jsxRuntimeExports$1.jsx("div",{ref:t,className:e,children:r})})}function Overlay({children:r,active:e,onClose:t,title:a,maxWidth:o=""}){const c=useOverlayContainer();return reactExports.useEffect(()=>{if(!e)return;const d=p=>{p.key==="Escape"&&(p.stopPropagation(),t?.())};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,t]),!e||!c.current?null:reactDomExports.createPortal(jsxRuntimeExports$1.jsx("div",{className:"ae:absolute ae:inset-0 ae:z-50 ae:flex ae:items-center ae:justify-center ae:bg-black/30",onClick:t,children:jsxRuntimeExports$1.jsxs("div",{className:"ae:bg-white ae:w-full ae:mx-4 ae:h-5/6 ae:rounded-md ae:overflow-auto ae:transform ae:transition-all ae:duration-800 ae:ease-in-out",style:{maxWidth:o,width:"100%"},onClick:d=>d.stopPropagation(),children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:justify-between ae:items-center ae:border-b ae:px-3 ae:py-1",children:[a&&jsxRuntimeExports$1.jsx("div",{className:"ae:text-lg ae:font-medium",children:a}),jsxRuntimeExports$1.jsx("button",{onClick:t,className:"ae:text-gray-600 ae:hover:text-black ae:p-1",children:"✕"})]}),jsxRuntimeExports$1.jsx("div",{className:"ae:px-4 ae:py-4",children:r})]})}),c.current)}function Spinner({size:r=100,message:e="Loading..."}){return jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:flex-col ae:items-center ae:justify-center",children:[jsxRuntimeExports$1.jsx("svg",{className:"ae:animate-spin ae:origin-center",xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 390 390",children:jsxRuntimeExports$1.jsxs("g",{className:"ae:origin-center",children:[jsxRuntimeExports$1.jsx("path",{fill:"#0096DE",d:"M232 222c-8 11-11 18-14 32h56v-23l63 39-63 36v-23h-56c3 14 5 20 14 31s14 15 24 22c10 6 16 8 27 10 16 1 25 0 40-5 13-6 20-10 29-21 10-9 11-14 17-27 3-9 4-14 3-23 1-10-1-15-3-25-5-12-9-19-17-29-9-9-16-14-29-20-15-5-23-6-40-4-14 3-20 5-27 9-10 6-15 11-24 21Z"}),jsxRuntimeExports$1.jsx("path",{fill:"#30B808",d:"M178 238c-6-12-11-19-21-28l-28 48 20 11-65 36v-73l20 11 27-48c-13-4-20-5-34-3-13 2-19 4-30 10-10 6-15 9-22 18-9 14-13 22-16 37-1 15-1 22 3 36 4 13 7 17 16 28 6 7 10 10 18 15s14 6 23 9c13 2 21 2 34 0 13-3 20-7 32-15 11-11 16-18 23-33 5-14 6-20 6-28 0-12-2-18-6-31Z"}),jsxRuntimeExports$1.jsx("path",{fill:"#FF7D17",d:"M191 183c14 2 21 1 35-3l-28-48-20 11 2-74 63 37-20 11 28 48c10-9 15-15 20-28 5-12 6-19 7-31 0-12-1-18-5-28-7-15-12-23-24-33-12-8-19-12-33-15-12-3-18-2-31 0-10 1-15 3-23 8s-12 9-19 15v1c-9 10-12 16-17 28-3 13-4 21-3 36 4 15 7 23 17 37 10 10 14 14 21 18 10 6 17 8 30 10Z"})]})}),jsxRuntimeExports$1.jsx("span",{className:"ae:text-base ae:md:text-lg ae:text-gray-500 ae:animate-pulse",children:e})]})}function DebugPane({selectedNode:r}){return jsxRuntimeExports$1.jsxs("div",{className:"ae:w-full ae:h-full ae:p-4",children:[jsxRuntimeExports$1.jsx("h3",{className:"ae:text-lg ae:font-medium ae:mb-2",children:"Node Info"}),r?jsxRuntimeExports$1.jsxs("pre",{className:"ae:bg-slate-100 ae:p-2 ae:rounded ae:overflow-x-auto",children:[" ",JSON.stringify(r.data,null,2)]}):jsxRuntimeExports$1.jsx("p",{children:"Click a node to see top level details. Double click fetch the node and get all the details."})]})}function CustomEdge({id:r,sourceX:e,sourceY:t,targetX:a,targetY:o,sourcePosition:c,targetPosition:d,data:p={},style:_={}}){const[S]=getSmoothStepPath({sourceX:e,sourceY:t,sourcePosition:c,targetX:a,targetY:o,targetPosition:d}),{zoom:A}=useViewport(),j={...{stroke:"grey",strokeWidth:1},..._||{}};if(!p.label)return jsxRuntimeExports$1.jsx(BaseEdge,{id:r,path:S});let V=.5,J="translate(-50%, -50%)";p.labelPosition==="start"?(V=.02,J="translate(0%, -50%)"):p.labelPosition==="end"&&(V=.98,J="translate(-100%, -50%)");const re=e+(a-e)*V,ie=t+(o-t)*V,K=A>1.1?"ae:text-xs":"ae:text-sm";return jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsx(BaseEdge,{id:r,path:S,interactionWidth:0,style:j}),jsxRuntimeExports$1.jsx(EdgeLabelRenderer,{children:jsxRuntimeExports$1.jsx("div",{className:`ae:absolute ae:bg-slate-200 ae:border 
          ae:border-slate-300 ae:rounded-sm ae:px-1 ae:py-0.5 
          ae:text-slate-700 ae:font-light ${K} ae:pointer-events-drag ae:z-50`,style:{left:`${re}px`,top:`${ie}px`,transform:J},children:p.label.length>21?`${p.label.slice(0,18)}...`:p.label})})]})}function getNodeDisplay(r){switch(r.label){case"AbstractCode":return"";case"ArrayData":return"";case"BandsData":{const a=r.attributes?.["array|bands"];return a?.[1]!==void 0?`Num. bands: ${a[1]}`:""}case"Bool":return r.attributes?.value!==void 0?`Value: ${r.attributes.value}`:"";case"CalcFunctionNode":{const a=r?.aiida?.process_type?.split(".").at(-1);return a||""}case"CalcJobNode":{const a=r?.aiida?.process_type?.split(":")[1];return a||""}case"Code":{const a=r?.attributes?.input_plugin;return a||""}case"Dict":return r?.attributes?`Num. keys: ${Object.keys(r.attributes).length}`:"";case"EnumData":return"";case"Float":case"Int":return r.attributes?.value!==void 0?`Value: ${r.attributes.value}`:"";case"JsonableData":return"";case"List":return r.attributes?.value!==void 0?`Length: ${r.attributes.list.length}`:"";case"Str":return"";case"KpointsData":if(r.attributes?.mesh){const[a,o,c]=r.attributes.mesh;return`Grid: ${a} × ${o} × ${c}`}if(r.attributes?.labels&&r.attributes?.label_numbers){let a=r.attributes.labels.join(" → ");return a.length>20&&(a=a.slice(0,17)+"..."),`Path: ${a}`}return"";case"StructureData":{let a=function(o,c=22){const d={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"},p=o.replace(/\d/g,_=>d[_]||_);return p.length>c?p.slice(0,c-3)+"...":p};var t=a;return r.extras?.formula_hill?`${a(r.extras.formula_hill)}`:r.derived_properties?.formula?`${a(r.derived_properties?.formula)}`:""}case"UpfData":{const a=r.attributes?.filename;return a?`${a}`:""}case"XyData":return"";case"SinglefileData":return"";case"FolderData":{const a=r?.repo_list?.length||0;return a?`Num. Files: ${a}`:""}case"RemoteData":return"";case"InstalledCode":return"";case"PortableCode":return"";case"ContainerizedCode":return"";case"WorkChainNode":{const a=r?.aiida?.process_type?.split(":")[1];return a||""}default:return""}}function getNodeColorClasses(r,e=!1){let t="ae:bg-gray-200",a="ae:text-black",o="ae:transition-all";return r?.startsWith("process.workflow")?(t="ae:bg-orange-300",o="ae:border-orange-400 ae:shadow-md"):r?.startsWith("process")?(t="ae:bg-red-300",o="ae:border-red-400 ae:shadow-md"):r?.startsWith("data")&&(t="ae:bg-green-300",o="ae:border-green-400 ae:shadow-md"),e&&(o="ae:border-blue-600 ae:shadow-md ae:rounded ae:transition ae:duration-700",t="ae:bg-blue-100 ae:glow-4",a="ae:text-black ae:font-medium"),{bgClass:t,textClass:a,borderStyle:o}}function HorizontalNode({data:r,selected:e}){const{zoom:t}=useViewport(),a="ae:min-w-[150px] ae:text-center ae:py-1.5 ae:rounded ae:border-3",o=t>1.2,d=`
  ae:absolute
  ae:top-1/3
  ae:bottom-1/3
  ae:flex
  ae:items-center
  ${o?"ae:text-[8px]":"ae:text-[10px]"}
  ae:text-slate-600
  ae:font-light
  ${o?"":"ae:hidden"}
`,p=`${d} ae:left-0 ae:ml-0.5 ae:pr-1 ae:pl-0.5 ae:bg-gray-400/50 ae:rounded-r-sm`,_=`${d} ae:right-0 ae:mr-0.5 ae:pl-1 ae:pr-0.5 ae:bg-gray-400/50 ae:rounded-l-sm`,{bgClass:S,textClass:A,borderStyle:C}=getNodeColorClasses(r.node_type,e,r.pos),j=r.aiida.uuid.split("-")[0],V=getNodeDisplay(r),J=t>1.2?"ae:text-[12px]":"ae:text-[14px]",re=jsxRuntimeExports$1.jsxs("div",{className:`${J}`,children:[r.label,t>1.2&&jsxRuntimeExports$1.jsx("br",{}),t>1.2&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("div",{className:"ae:text-[8px] ae:opacity-80",children:`uuid: ${j}`}),jsxRuntimeExports$1.jsx("div",{className:"ae:text-[8px] ae:opacity-80 ",children:`${V}`})]})]});return jsxRuntimeExports$1.jsxs("div",{className:`${a} ${S} ${A} ${C}`,children:[jsxRuntimeExports$1.jsx("div",{className:p,children:r.parentCount>99?"99+":r.parentCount??""}),jsxRuntimeExports$1.jsx("div",{className:_,children:r.childCount>99?"99+":r.childCount??""}),re,jsxRuntimeExports$1.jsx(Handle$1,{type:"target",position:Position.Left,style:{pointerEvents:"none",opacity:0,marginLeft:"4px"}}),jsxRuntimeExports$1.jsx(Handle$1,{type:"source",position:Position.Right,style:{pointerEvents:"none",opacity:0,marginRight:"4px"}})]})}const HorizontalNode$1=reactExports.memo(HorizontalNode),nodeTypes={custom:HorizontalNode$1},edgeTypes={custom:CustomEdge};function FlowChart({nodes:r,edges:e,setNodes:t,setEdges:a,selectedNode:o,onNodeSelect:c,onNodeDoubleSelect:d,onInit:p}){const _=reactExports.useCallback((C,j)=>{c&&c(j)},[c]),S=reactExports.useCallback((C,j)=>{d&&d(j)},[d]),A=r.map(C=>({...C,type:"custom",selected:o?.id===C.id}));return jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:h-full",children:jsxRuntimeExports$1.jsxs(ReactFlow,{className:"ae:bg-slate-50",nodes:A,edges:e,nodeTypes,onNodesChange:C=>t(j=>applyNodeChanges(C,j)),onEdgesChange:C=>a(j=>applyEdgeChanges(C,j)),edgeTypes,edgesFocusable:!1,onNodeClick:_,onNodeDoubleClick:S,fitView:!0,nodesDraggable:!0,nodesConnectable:!1,onInit:p,children:[jsxRuntimeExports$1.jsx(Controls$1,{}),jsxRuntimeExports$1.jsx(Background$1,{variant:"dots",gap:12,size:1})]})})}function TypeCheckboxTree({types:r,selectedTypes:e,setSelectedTypes:t,level:a=0}){const[o,c]=reactExports.useState({}),d=S=>S.every(A=>e.includes(A.label)),p=S=>S.some(A=>e.includes(A.label))&&!d(S),_=(S,A)=>{if(!A||A.length===0){t(j=>j.includes(S)?j.filter(V=>V!==S):[...j,S]);return}t(j=>{const V=new Set(j),J=(ie,K)=>{ie.forEach(Ne=>{K?V.add(Ne.label):V.delete(Ne.label),Ne.children&&J(Ne.children,K)})};return V.has(S)&&d(A)?(V.delete(S),J(A,!1)):(V.add(S),J(A,!0)),[...V]});const C=j=>{const V={};return j.forEach(J=>{J.children&&(V[J.label]=!0,Object.assign(V,C(J.children)))}),V};c(j=>({...j,[S]:!0,...C(A)}))};return jsxRuntimeExports$1.jsx("div",{className:"ae:flex ae:flex-col",children:r.map(({label:S,children:A})=>{const C=e.includes(S),j=A&&p(A);return jsxRuntimeExports$1.jsxs("div",{style:{marginLeft:`${a*8}px`},children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:items-center ae:gap-1 ae:cursor-pointer",onClick:()=>_(S,A),children:[jsxRuntimeExports$1.jsx("input",{type:"checkbox",checked:C,ref:V=>{V&&(V.indeterminate=j)},onChange:V=>V.stopPropagation(),className:"ae:cursor-pointer"}),A&&A.length>0&&jsxRuntimeExports$1.jsx("button",{type:"button",onClick:V=>{V.stopPropagation(),c(J=>({...J,[S]:!J[S]}))},className:"ae:p-0.5 ae:focus:outline-none",children:o[S]?jsxRuntimeExports$1.jsx(DownDropDownIcon,{size:14}):jsxRuntimeExports$1.jsx(RightDropDownIcon,{size:14})}),jsxRuntimeExports$1.jsx("span",{children:S})]}),A&&A.length>0&&o[S]&&jsxRuntimeExports$1.jsx(TypeCheckboxTree,{types:A,selectedTypes:e,setSelectedTypes:t,level:a+1})]},S)})})}const aiidaTypes=[{label:"Data",type:"data",children:[{label:"Int",type:"data.core.int.%"},{label:"Float",type:"data.core.float.%"},{label:"ArrayData",type:"data.core.array.%",children:[{label:"BandsData",type:"data.core.array.bands.%"},{label:"XyData",type:"data.core.array.xy.%"},{label:"TrajectoryData",type:"data.core.array.trajectory.%"},{label:"KpointsData",type:"data.core.array.kpoints.%"}]},{label:"Str",type:"data.core.str.%"},{label:"Bool",type:"data.core.bool.%"},{label:"List",type:"data.core.list.%"},{label:"Dict",type:"data.core.dict.%"},{label:"StructureData",type:"data.core.structure.%"},{label:"RemoteData",type:"data.core.remote.%"},{label:"FolderData",type:"data.core.folder.%"},{label:"SinglefileData",type:"data.core.singlefile.%"},{label:"UpfData",type:"data.core.upf.%"},{label:"Code",type:"data.core.code.%"}]},{label:"Process",type:"process.%",children:[{label:"CalcJob",type:"process.calculation.calcjob.%"},{label:"CalcFunction",type:"process.calculation.calcfunction.%"},{label:"WorkFunction",type:"process.workflow.workfunction.%"},{label:"Workgraph",type:"process.workflow.workgraph.%"},{label:"Workchain",type:"process.workflow.workchain.%"}]}];function getFlattenedNodeTypes(r,e){const t=[],a=o=>{o.forEach(c=>{r.includes(c.label)&&t.push(c.type),c.children&&a(c.children)})};return a(e),t}function buildQuery({groups:r=[],nodeTypes:e=[],limit:t=50,offset:a=0}={}){const o=[{entity_type:"",orm_base:"node",tag:"node",joining_keyword:null,joining_value:null,edge_tag:null,outerjoin:!1}],c={node:{}},d={node:["id","uuid","node_type","label","ctime","mtime"]};if(e.length===1?c.node.node_type={like:e[0]}:e.length>1&&(c.node={or:e.map(p=>({node_type:{like:p}}))}),r.length>0){const p="core_1",_="node--core_1";o.push({entity_type:"group.core",orm_base:"group",tag:p,joining_keyword:"with_node",joining_value:"node",edge_tag:_,outerjoin:!1}),c[p]={type_string:{like:"%"},or:r.map(S=>({label:S}))},c[_]={},d[p]=[],d[_]=[]}return{path:o,filters:c,project:d,project_map:{},order_by:[],limit:t,offset:a,distinct:!0}}function SortIcon({direction:r="asc",size:e=14,className:t=""}){return jsxRuntimeExports$1.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:`${t} ae:transform ${r==="asc"?"rotate-180":""}`,children:jsxRuntimeExports$1.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function DataTable({title:r,columns:e,data:t=[],maxWidth:a="2000px",sortableCols:o=!0,breakableCols:c=!1,renderIfMissing:d=!1}){const[p,_]=reactExports.useState({key:null,direction:"asc"}),S=reactExports.useMemo(()=>{if(!t)return[];if(!p.key)return t;const A=[...t].sort((C,j)=>{const V=C[p.key],J=j[p.key];return!isNaN(V)&&!isNaN(J)?V-J:String(V).localeCompare(String(J))});return p.direction==="asc"?A:A.reverse()},[t,p]);return!d&&(!t||t.length===0)?null:jsxRuntimeExports$1.jsxs("div",{className:"ae:p-2",style:{maxWidth:a},children:[jsxRuntimeExports$1.jsx("div",{className:"explorerHeading ae:pb-2",children:r}),jsxRuntimeExports$1.jsx("div",{className:"ae:overflow-x-auto ae:shadow-md ae:md:shadow ae:bg-white",children:jsxRuntimeExports$1.jsxs("table",{className:"ae:min-w-full ae:text-xs ae:md:text-sm ae:text-left",children:[jsxRuntimeExports$1.jsx("thead",{className:"ae:bg-slate-100 ae:text-slate-700",children:jsxRuntimeExports$1.jsx("tr",{children:e.map(A=>{const C=Array.isArray(o)?o.includes(A):o;return jsxRuntimeExports$1.jsx("th",{className:`ae:px-3 ae:md:px-4 ae:py-0.5 ae:md:py-1 ae:font-medium ${C?"ae:cursor-pointer ae:select-none":""}`,onClick:()=>C&&_(j=>({key:A,direction:j.key===A&&j.direction==="asc"?"desc":"asc"})),children:jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:items-center ae:gap-1",children:[A,C&&p.key===A&&jsxRuntimeExports$1.jsx(SortIcon,{direction:p.direction,size:14,className:"ae:ml-1 ae:text-slate-500"})]})},A)})})}),jsxRuntimeExports$1.jsx("tbody",{children:S.map((A,C)=>jsxRuntimeExports$1.jsx("tr",{className:C%2===0?"ae:bg-slate-50":"ae:bg-slate-100",children:e.map(j=>{const J=["ae:px-3 ae:md:px-4 ae:py-0.5 ae:md:py-2 ae:text-slate-900",(Array.isArray(c)?c.includes(j):c)?"ae:whitespace-normal ae:break-all":"ae:whitespace-nowrap"].join(" ");return jsxRuntimeExports$1.jsx("td",{className:J,children:A[j]},j)})},A.id||C))})]})})]})}function useMediaQuery(r){const[e,t]=reactExports.useState(()=>typeof window<"u"?window.matchMedia(r).matches:!1);return reactExports.useEffect(()=>{if(typeof window>"u")return;const a=window.matchMedia(r),o=c=>{t(c.matches),console.log("media query fired")};return a.addEventListener("change",o),t(a.matches),()=>a.removeEventListener("change",o)},[r]),e}const columnLabels={uuid:"Unique ID",label:"Label",full_type:"Type",ctime:"Created",mtime:"Modified",id:"ID"},columnOrder=["Unique ID","Label","Type","Created","Modified",""];function formatValue(r,e,t=!1){if(e==null)return"";switch(r){case"Type":return typeof e!="string"?e:t&&e.replace(/\|$/,"").split(".").at(-2)||e;case"Created":case"Modified":const a=new Date(e);return t?a.toISOString().split("T")[0]:a.toLocaleString();case"Unique ID":return t&&typeof e=="string"?e.split("-")[0]:e;default:return e}}function formatTableData(r,e,t=!1){return r.map(a=>{const o={};return columnOrder.forEach(c=>{const d=Object.keys(columnLabels).find(p=>columnLabels[p]===c);d&&a[d]!==void 0&&(o[c]=formatValue(c,a[d],t))}),o[""]=jsxRuntimeExports$1.jsx("button",{onClick:()=>e(a.uuid),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"View"}),o})}function sortGroups(r){return[...r].sort((e,t)=>{const a=/^\d/.test(e.label),o=/^\d/.test(t.label);return a&&!o?1:!a&&o?-1:e.label.localeCompare(t.label,void 0,{numeric:!0})})}function GroupsViewer({restApiUrl:r,setRootNodeId:e}){const[t,a]=reactExports.useState([]),[o,c]=reactExports.useState([]),[d,p]=reactExports.useState([]),[_,S]=reactExports.useState([]),[A,C]=reactExports.useState(0),[j,V]=reactExports.useState(!1),[J,re]=reactExports.useState(null),[ie,K]=reactExports.useState(""),Ne=200,G=useMediaQuery("(max-width: 790px)"),se=G?columnOrder.filter(be=>be!=="Created"):columnOrder;reactExports.useEffect(()=>{fetchGroups(r).then(a).catch(console.error)},[r]);const He=reactExports.useCallback(async(be=0,ta=Ne)=>{V(!0),re(null);try{const pn=getFlattenedNodeTypes(d,aiidaTypes),mr=buildQuery({groups:o,nodeTypes:pn,limit:ta,offset:be}),Sp=(await fetchFromQueryBuilder(r,mr)).node||[];S(_r=>be===0?Sp:[..._r,...Sp]),C(be+Sp.length)}catch(pn){console.error(pn),re(pn.message||"Failed to fetch nodes")}finally{V(!1)}},[r,o,d]);reactExports.useEffect(()=>{t.length>0&&_.length===0&&He(0,1e3)},[t,_.length,He]);const Fe=reactExports.useMemo(()=>formatTableData(_,e,G),[_,G,e]),Xe=()=>{ie.trim()!==""&&(e(ie.trim()),K(""))};return jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:flex-col ae:lg:flex-row ae:gap-4 ae:overflow-auto ae:w-full ae:items-start",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:min-w-[250px] ae:max-w-[400px] ae:flex-shrink-0 ae:bg-slate-50 ae:p-2 ae:px-3 ae:rounded",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:gap-4 ae:items-center ae:mb-2",children:[jsxRuntimeExports$1.jsx("div",{className:"ae:font-medium",children:"Filter by Node Types"}),jsxRuntimeExports$1.jsx("button",{onClick:()=>He(0),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Apply"})]}),jsxRuntimeExports$1.jsx(TypeCheckboxTree,{types:aiidaTypes,selectedTypes:d,setSelectedTypes:p}),jsxRuntimeExports$1.jsx("div",{className:"ae:font-medium ae:my-2 ae:mt-4",children:"Filter by Defined Groups"}),sortGroups(t).map(be=>jsxRuntimeExports$1.jsxs("label",{className:"ae:flex ae:items-start ae:gap-2 ae:mb-1",children:[jsxRuntimeExports$1.jsx("input",{type:"checkbox",className:"ae:mt-1",checked:o.includes(be.label),onChange:ta=>c(pn=>ta.target.checked?[...pn,be.label]:pn.filter(mr=>mr!==be.label))}),jsxRuntimeExports$1.jsx("span",{className:"ae:truncate ae:block",title:be.label,children:be.label})]},be.label))]}),jsxRuntimeExports$1.jsxs("div",{className:"ae:flex-1 ae:bg-white ae:rounded ae:gap-2",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:flex-col ae:lg:flex-row ae:lg:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:flex-1 ae:flex ae:items-center ae:gap-2 ae:py-2",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:text-xl ae:font-medium",children:[Fe.length," nodes loaded"]}),Fe.length>0&&jsxRuntimeExports$1.jsx("button",{onClick:()=>He(A),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Load next 200"})]}),jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:flex-col ae:sm:flex-row ae:items-start ae:sm:items-center ae:gap-2 ae:py-1 ae:w-full ae:lg:w-auto",children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Navigate via UUID:"}),jsxRuntimeExports$1.jsx("input",{type:"text",value:ie,onChange:be=>K(be.target.value),placeholder:"Enter a UUID",className:"ae:flex-1 ae:min-w-80 ae:border-2 ae:border-gray-300 ae:focus:outline-none ae:focus:border-slate-500 ae:px-2 ae:py-1 ae:rounded"}),jsxRuntimeExports$1.jsx("button",{onClick:Xe,className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Go"})]})]}),j&&jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:h-[400px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports$1.jsx(Spinner,{})}),J&&!j&&jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:h-[400px] ae:flex ae:flex-col ae:items-center ae:justify-center",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:J,onRetry:()=>He(A)})}),!j&&!J&&jsxRuntimeExports$1.jsx(DataTable,{columns:se,data:Fe,maxWidth:"3000px",sortableCols:["Unique ID","Label","Type","Created","Modified"],renderIfMissing:!0,breakableCols:["Unique ID","Label","Type","Created","Modified"]})]})]})}function HelpViewer(){return jsxRuntimeExports$1.jsxs("div",{className:"ae:p-2 ae:w-full ae:h-full ae:overflow-y-auto ae:bg-white",children:[jsxRuntimeExports$1.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports$1.jsx("div",{className:"ae:text-lg  ae:mb-3 ae:flex ae:items-center ae:gap-2",children:"Overview"}),jsxRuntimeExports$1.jsxs("p",{className:"ae:text-gray-700 ae:leading-relaxed",children:["Aiida Explorer is an interactive tool for visualizing AiiDA workflows and calculations. You can navigate nodes, inspect their details, and explore relationships between workflows, calculations, and data nodes. This tool leverages the"," ",jsxRuntimeExports$1.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/stable/internals/rest_api.html",className:"ae:text-blue-400 ae:hover:underline ae:hover:text-blue-700",target:"_blank",children:"AiiDA REST API"})," ","and presents data retrieved from it in a curated manner."]})]}),jsxRuntimeExports$1.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:text-lg  ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsx(GraphIcon,{size:24})," Provenance"]}),jsxRuntimeExports$1.jsxs("p",{className:"ae:text-gray-700 ae:leading-relaxed",children:["Using AiiDA for high-throughput workflows comes with the benefit of AiiDA provenence. This provenence stores how calculations were performed and the results from them. Every node is part of a directed acyclic graph (DAG) that records the inputs, outputs, and intermediate steps. Understanding provenance helps reproducability and facilitates sharing. Learn more in the"," ",jsxRuntimeExports$1.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/latest/",className:"ae:text-blue-400 ae:hover:underline ae:hover:text-blue-700",target:"_blank",children:"official docs."})," ","This tool uses the the 'API endpoint /links' to build up a local view of each node."]})]}),jsxRuntimeExports$1.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:text-lg ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsx(ClickIcon,{size:24})," Inspecting Nodes"]}),jsxRuntimeExports$1.jsxs("ul",{className:"ae:pl-4 ae:list-inside ae:text-gray-700 ae:space-y-1",children:[jsxRuntimeExports$1.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports$1.jsx(ClickIcon2,{size:22})," Click a node:"]}),jsxRuntimeExports$1.jsx("span",{className:"ae:text-gray-700",children:"Highlights the node and displays detailed information in the side panel."})]}),jsxRuntimeExports$1.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports$1.jsx(DoubleClickIcon,{size:22})," Double-click a node:"]}),jsxRuntimeExports$1.jsx("span",{className:"ae:text-gray-700",children:"Sets the node as the central focus, building the links and centering the graph."})]}),jsxRuntimeExports$1.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports$1.jsx(BreadcrumbsIcon,{size:22})," Breadcrumbs:"]}),jsxRuntimeExports$1.jsx("span",{className:"ae:text-gray-700",children:"Quickly navigate back to previously explored nodes. A history of the last 10 visited nodes is retained."})]})]})]}),jsxRuntimeExports$1.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:text-lg ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsx(GraphIcon,{size:26})," Buttons & Controls"]}),jsxRuntimeExports$1.jsxs("ul",{className:"ae:pl-4 ae:list-inside ae:text-gray-700 ae:space-y-1",children:[jsxRuntimeExports$1.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports$1.jsx(GroupIcon,{size:22})," Find node:"]}),jsxRuntimeExports$1.jsx("span",{className:"ae:text-gray-700",children:"Provides a graphical interface for simple AiiDA queries using the querybuilder endpoint."})]}),jsxRuntimeExports$1.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports$1.jsx(LinksIcon,{size:20})," Get Counts:"]}),jsxRuntimeExports$1.jsx("span",{className:"ae:text-gray-700",children:"Fetches the parent/child counts for all nodes currently visible in the graph."})]}),jsxRuntimeExports$1.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports$1.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports$1.jsx(QuestionIcon,{size:20})," Help:"]}),jsxRuntimeExports$1.jsx("span",{className:"ae:text-gray-700",children:"Opens this help overlay."})]})]})]}),jsxRuntimeExports$1.jsxs("p",{className:"ae:text-gray-500 ae:text-sm ae:mt-6",children:["This tool is currently in beta testing stage. Report unexpected behaviour, bugs or general suggestions on"," ",jsxRuntimeExports$1.jsxs("a",{href:"https://github.com/aiidateam/aiida-explorer/issues/new",className:"ae:group ae:inline-flex ae:items-center ae:gap-0.5 ae:text-blue-400",target:"_blank",children:[jsxRuntimeExports$1.jsx("span",{className:"ae:transition-colors ae:group-hover:ae:text-blue-700",children:"GitHub."}),jsxRuntimeExports$1.jsx("span",{className:"ae:inline-flex ae:items-center ae:justify-center ae:w-5 ae:h-5 ae:rounded-full ae:bg-blue-400 ae:group-hover:bg-blue-700 ae:transition-colors",children:jsxRuntimeExports$1.jsx(GithubIcon,{className:"ae:w-[18px] ae:h-[18px] ae:text-white"})})]})]})]})}function useRootNode(r,e,t){const a=r!==void 0,[o,c]=reactExports.useState(e),d=a?r:o,p=reactExports.useCallback(_=>{a||c(_),t(_)},[a,t]);return[d,p]}function TopControls({onFindNode:r,onGetLinkCounts:e,onHelp:t,isLoading:a,disableGetCounts:o=!1}){return jsxRuntimeExports$1.jsxs("div",{className:"ae:w-full ae:shadow-md ae:bg-slate-100 ae:border-b ae:px-4 ae:py-2 ae:flex ae:justify-between ae:items-center ae:z-50",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:gap-2",children:[jsxRuntimeExports$1.jsxs("button",{className:"explorerButton",onClick:r,children:[jsxRuntimeExports$1.jsx(GroupIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Find Node"})]}),jsxRuntimeExports$1.jsxs("button",{className:"explorerButton",onClick:e,disabled:o||a,children:[jsxRuntimeExports$1.jsx(LinksIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Get Link Counts"})]})]}),jsxRuntimeExports$1.jsxs("button",{className:"explorerButton",onClick:t,children:[jsxRuntimeExports$1.jsx(QuestionIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Help"})]})]})}function FormattedMetaData({nodeData:r,userData:e}){const t=e?.users||[],a=r?.aiida,[o,c]=reactExports.useState(!1);if(!a)return jsxRuntimeExports$1.jsx("div",{className:"ae:p-4 ae:text-slate-500 ae:italic",children:"No metadata available"});const d=Array.isArray(t)?t.find(p=>p.id===a.user_id):null;return jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:gap-2 ae:items-center ae:cursor-pointer ae:md:cursor-default",onClick:()=>c(!o),children:[jsxRuntimeExports$1.jsx("div",{className:"explorerHeadingBig",children:r.label||""}),jsxRuntimeExports$1.jsx("span",{className:"ae:lg:hidden ae:transition-transform ae:duration-200",children:o?"▲":"▼"})]}),jsxRuntimeExports$1.jsx("div",{className:`${o?"ae:block":"ae:hidden"} ae:mt-1 ae:lg:block ae:lg:mt-2`,children:jsxRuntimeExports$1.jsxs("div",{className:"ae:space-y-1 ae:px-1 ae:text-xs ae:lg:text-sm",children:[a.uuid&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"UUID:"})," ",a.uuid]}),a.ctime&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Created:"})," ",a.ctime]}),a.mtime&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Modified:"})," ",a.mtime]}),a.node_type&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Node Type:"})," ",a.node_type]}),d&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Owner:"})," ",d.first_name," ",d.last_name||"",d.institution&&jsxRuntimeExports$1.jsxs("span",{className:"ae:text-gray-500",children:[" (",d.institution,")"]})]})]})})]})}const isBoolean=r=>typeof r=="boolean"||r instanceof Boolean,isNumber=r=>typeof r=="number"||r instanceof Number,isBigInt=r=>typeof r=="bigint"||r instanceof BigInt,isDate=r=>!!r&&r instanceof Date,isString=r=>typeof r=="string"||r instanceof String,isArray=r=>Array.isArray(r),isObject=r=>typeof r=="object"&&r!==null,isFunction=r=>!!r&&r instanceof Object&&typeof r=="function";function quoteString(r,e){return e===void 0&&(e=!1),!r||e?`"${r}"`:r}function quoteStringValue(r,e,t){return t?JSON.stringify(r):e?`"${r}"`:r}function ExpandableObject(r){let{field:e,value:t,data:a,lastElement:o,openBracket:c,closeBracket:d,level:p,style:_,shouldExpandNode:S,clickToExpandNode:A,outerRef:C,beforeExpandChange:j}=r;const V=reactExports.useRef(!1),[J,re]=reactExports.useState(()=>S(p,t,e)),ie=reactExports.useRef(null);reactExports.useEffect(()=>{V.current?re(S(p,t,e)):V.current=!0},[S]);const K=reactExports.useId();if(a.length===0)return EmptyObject({field:e,openBracket:c,closeBracket:d,lastElement:o,style:_});const Ne=J?_.collapseIcon:_.expandIcon,G=J?_.ariaLables.collapseJson:_.ariaLables.expandJson,se=p+1,He=a.length-1,Fe=ta=>{J!==ta&&(!j||j({level:p,value:t,field:e,newExpandValue:ta}))&&re(ta)},Xe=ta=>{if(ta.key==="ArrowRight"||ta.key==="ArrowLeft")ta.preventDefault(),Fe(ta.key==="ArrowRight");else if(ta.key==="ArrowUp"||ta.key==="ArrowDown"){ta.preventDefault();const pn=ta.key==="ArrowUp"?-1:1;if(!C.current)return;const mr=C.current.querySelectorAll("[role=button]");let bp=-1;for(let _r=0;_r<mr.length;_r++)if(mr[_r].tabIndex===0){bp=_r;break}if(bp<0)return;const Sp=(bp+pn+mr.length)%mr.length;mr[bp].tabIndex=-1,mr[Sp].tabIndex=0,mr[Sp].focus()}},be=()=>{var ta;Fe(!J);const pn=ie.current;if(!pn)return;const mr=(ta=C.current)===null||ta===void 0?void 0:ta.querySelector('[role=button][tabindex="0"]');mr&&(mr.tabIndex=-1),pn.tabIndex=0,pn.focus()};return reactExports.createElement("div",{className:_.basicChildStyle,role:"treeitem","aria-expanded":J,"aria-selected":void 0},reactExports.createElement("span",{className:Ne,onClick:be,onKeyDown:Xe,role:"button","aria-label":G,"aria-expanded":J,"aria-controls":J?K:void 0,ref:ie,tabIndex:p===0?0:-1}),(e||e==="")&&(A?reactExports.createElement("span",{className:_.clickableLabel,onClick:be,onKeyDown:Xe},quoteString(e,_.quotesForFieldNames),":"):reactExports.createElement("span",{className:_.label},quoteString(e,_.quotesForFieldNames),":")),reactExports.createElement("span",{className:_.punctuation},c),J?reactExports.createElement("ul",{id:K,role:"group",className:_.childFieldsContainer},a.map((ta,pn)=>reactExports.createElement(DataRender,{key:ta[0]||pn,field:ta[0],value:ta[1],style:_,lastElement:pn===He,level:se,shouldExpandNode:S,clickToExpandNode:A,beforeExpandChange:j,outerRef:C}))):reactExports.createElement("span",{className:_.collapsedContent,onClick:be,onKeyDown:Xe}),reactExports.createElement("span",{className:_.punctuation},d),!o&&reactExports.createElement("span",{className:_.punctuation},","))}function EmptyObject(r){let{field:e,openBracket:t,closeBracket:a,lastElement:o,style:c}=r;return reactExports.createElement("div",{className:c.basicChildStyle,role:"treeitem","aria-selected":void 0},(e||e==="")&&reactExports.createElement("span",{className:c.label},quoteString(e,c.quotesForFieldNames),":"),reactExports.createElement("span",{className:c.punctuation},t),reactExports.createElement("span",{className:c.punctuation},a),!o&&reactExports.createElement("span",{className:c.punctuation},","))}function JsonObject(r){let{field:e,value:t,style:a,lastElement:o,shouldExpandNode:c,clickToExpandNode:d,level:p,outerRef:_,beforeExpandChange:S}=r;return ExpandableObject({field:e,value:t,lastElement:o||!1,level:p,openBracket:"{",closeBracket:"}",style:a,shouldExpandNode:c,clickToExpandNode:d,data:Object.keys(t).map(A=>[A,t[A]]),outerRef:_,beforeExpandChange:S})}function JsonArray(r){let{field:e,value:t,style:a,lastElement:o,level:c,shouldExpandNode:d,clickToExpandNode:p,outerRef:_,beforeExpandChange:S}=r;return ExpandableObject({field:e,value:t,lastElement:o||!1,level:c,openBracket:"[",closeBracket:"]",style:a,shouldExpandNode:d,clickToExpandNode:p,data:t.map(A=>[void 0,A]),outerRef:_,beforeExpandChange:S})}function JsonPrimitiveValue(r){let{field:e,value:t,style:a,lastElement:o}=r,c,d=a.otherValue;return t===null?(c="null",d=a.nullValue):t===void 0?(c="undefined",d=a.undefinedValue):isString(t)?(c=quoteStringValue(t,!a.noQuotesForStringValues,a.stringifyStringValues),d=a.stringValue):isBoolean(t)?(c=t?"true":"false",d=a.booleanValue):isNumber(t)?(c=t.toString(),d=a.numberValue):isBigInt(t)?(c=`${t.toString()}n`,d=a.numberValue):isDate(t)?c=t.toISOString():isFunction(t)?c="function() { }":c=t.toString(),reactExports.createElement("div",{className:a.basicChildStyle,role:"treeitem","aria-selected":void 0},(e||e==="")&&reactExports.createElement("span",{className:a.label},quoteString(e,a.quotesForFieldNames),":"),reactExports.createElement("span",{className:d},c),!o&&reactExports.createElement("span",{className:a.punctuation},","))}function DataRender(r){const e=r.value;return isArray(e)?reactExports.createElement(JsonArray,Object.assign({},r)):isObject(e)&&!isDate(e)&&!isFunction(e)?reactExports.createElement(JsonObject,Object.assign({},r)):reactExports.createElement(JsonPrimitiveValue,Object.assign({},r))}var styles={"container-light":"_2IvMF _GzYRV","basic-element-style":"_2bkNM","child-fields-container":"_1BXBN","label-light":"_1MGIk","clickable-label-light":"_2YKJg _1MGIk _1MFti","punctuation-light":"_3uHL6 _3eOF8","value-null-light":"_2T6PJ","value-undefined-light":"_1Gho6","value-string-light":"_vGjyY","value-number-light":"_1bQdo","value-boolean-light":"_3zQKs","value-other-light":"_1xvuR","collapse-icon-light":"_oLqym _f10Tu _1MFti _1LId0","expand-icon-light":"_2AXVT _f10Tu _1MFti _1UmXx","collapsed-content-light":"_2KJWg _1pNG9 _1MFti"};const defaultAriaLables={collapseJson:"collapse JSON",expandJson:"expand JSON"},defaultStyles={container:styles["container-light"],basicChildStyle:styles["basic-element-style"],childFieldsContainer:styles["child-fields-container"],label:styles["label-light"],clickableLabel:styles["clickable-label-light"],nullValue:styles["value-null-light"],undefinedValue:styles["value-undefined-light"],stringValue:styles["value-string-light"],booleanValue:styles["value-boolean-light"],numberValue:styles["value-number-light"],otherValue:styles["value-other-light"],punctuation:styles["punctuation-light"],collapseIcon:styles["collapse-icon-light"],expandIcon:styles["expand-icon-light"],collapsedContent:styles["collapsed-content-light"],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:defaultAriaLables,stringifyStringValues:!1},allExpanded=()=>!0,JsonView=r=>{let{data:e,style:t=defaultStyles,shouldExpandNode:a=allExpanded,clickToExpandNode:o=!1,beforeExpandChange:c,compactTopLevel:d,...p}=r;const _=reactExports.useRef(null);return reactExports.createElement("div",Object.assign({"aria-label":"JSON view"},p,{className:t.container,ref:_,role:"tree"}),d&&isObject(e)?Object.entries(e).map(S=>{let[A,C]=S;return reactExports.createElement(DataRender,{key:A,field:A,value:C,style:{...defaultStyles,...t},lastElement:!0,level:1,shouldExpandNode:a,clickToExpandNode:o,beforeExpandChange:c,outerRef:_})}):reactExports.createElement(DataRender,{value:e,style:{...defaultStyles,...t},lastElement:!0,level:0,shouldExpandNode:a,clickToExpandNode:o,outerRef:_,beforeExpandChange:c}))};function FileTable$1({title:r,dataArray:e=[],onView:t}){const a="ae:transition-colors ae:duration-75",o="ae:hover:scale-105 ae:transition-all ae:duration-75 ae:hover:cursor-pointer";if(!Array.isArray(e)||e.length===0)return null;const c=["File","Download","View"],d=e.map(p=>({File:p.name,Download:jsxRuntimeExports$1.jsx("a",{href:p.downloadUrl||"#",download:p.name||void 0,rel:"noopener noreferrer",className:`ae:text-blue-600 ae:hover:text-blue-800 ${a}`,children:jsxRuntimeExports$1.jsx(DownloadIcon,{size:18,className:o})}),View:jsxRuntimeExports$1.jsx("button",{type:"button",onClick:()=>t?.(p.name,p.downloadUrl),className:`ae:text-green-600 ae:hover:text-green-800 ${a}`,children:jsxRuntimeExports$1.jsx(ViewIcon,{size:18,className:o})})}));return jsxRuntimeExports$1.jsx("div",{children:jsxRuntimeExports$1.jsx(DataTable,{title:r,columns:c,data:d,sortableCols:["File"]})})}function RawDataVisualiser({nodeData:r={}}){const[e,t]=reactExports.useState(null),[a,o]=reactExports.useState(null),[c,d]=reactExports.useState(null),[p,_]=reactExports.useState(!1),S=(J,re)=>{navigator.clipboard.writeText(JSON.stringify(J,null,2)),t(re),setTimeout(()=>t(null),700)},A=async(J,re)=>{try{const K=await(await fetch(re)).text();o(K),d(J),_(!0)}catch(ie){console.error("Error loading preview:",ie),o("Failed to load preview."),d(J),_(!0)}},C=[{title:"Attributes",data:r.attributes},{title:"Derived properties",data:r.derived_properties},{title:"Extras",data:r.extras},{title:"Full AiiDA metadata",data:r.aiida,collapseLevel:0}],j=jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsx(FileTable$1,{title:"Download node by format",dataArray:r.downloadByFormat?Object.entries(r.downloadByFormat).map(([J,re])=>({name:J,downloadUrl:re})):[],onView:A}),jsxRuntimeExports$1.jsx(FileTable$1,{title:"Files in this node",dataArray:r.repo_list||[],onView:A})]}),V={...defaultStyles,basicChildStyle:`${defaultStyles.basicChildStyle} custom-basic-childstyle`,label:`${defaultStyles.label} custom-json-label`,container:`${defaultStyles.container} custom-json-container`};return jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:flex-col ae:px-3 ae:py-2 ae:gap-2 ae:lg:gap-4",children:[j,C.map((J,re)=>{const ie=J.data||{};return Object.keys(ie).length===0?null:jsxRuntimeExports$1.jsxs("div",{className:"ae:py-1 ae:px-2",children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:items-center ae:gap-2 ae:pb-2",children:[jsxRuntimeExports$1.jsx("div",{className:"explorerHeading",children:J.title}),jsxRuntimeExports$1.jsxs("button",{className:"ae:relative ae:flex ae:items-center ae:gap-1 ae:hover:text-blue-800",onClick:()=>S(ie,re),children:[jsxRuntimeExports$1.jsx(ClipBoardIcon,{size:18}),jsxRuntimeExports$1.jsxs("div",{className:`ae:absolute ae:left-full ae:ml-2 ae:top-1/2 ae:-translate-y-1/2 ae:flex ae:items-center ae:gap-1 ae:text-green-400 ae:text-sm ae:transition-all ae:duration-400 ae:transform ${e===re?"ae:opacity-100 ae:translate-x-0":"ae:opacity-0 ae:-translate-x-2"}`,children:[jsxRuntimeExports$1.jsx(ClipboardCopyIcon,{size:16}),jsxRuntimeExports$1.jsx("span",{children:"Copied"})]})]})]}),jsxRuntimeExports$1.jsx("div",{className:"ae:max-h-32 ae:md:max-h-96 ae:overflow-auto ae:border ae:border-slate-200 ae:rounded ae:p-1 ae:bg-slate-100",children:jsxRuntimeExports$1.jsx(JsonView,{data:ie,shouldExpandNode:K=>K<(J.collapseLevel??1),style:V})})]},re)}),jsxRuntimeExports$1.jsx(Overlay,{active:p,onClose:()=>_(!1),title:`Preview: ${c}`,children:jsxRuntimeExports$1.jsx("pre",{className:"ae:overflow-y-auto ae:whitespace-pre-wrap ae:text-sm ae:flex-1",children:a})})]})}function transpose(r){const e=r.length,t=r[0].length,a=new Array(t);for(let o=0;o<t;o++){a[o]=new Array(e);for(let c=0;c<e;c++)a[o][c]=r[c][o]}return a}const baseColors=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function getColor(r){return r<baseColors.length?baseColors[r]:`hsl(${r*47%360}, 70%, 50%)`}function mergeLegendTracesByName(r){const e=new Set;return r.map(a=>{const o=a.name||"",c=!e.has(o);return c&&e.add(o),{...a,legendgroup:o,showlegend:c}})}function getXYData(r){const e=[],t=[];let a=null;return r.paths.forEach((o,c)=>{const d=o.x,p=o.values;c>0&&(e.push(null),t.forEach(_=>_.push(null))),d.forEach((_,S)=>{_===a&&(e.push(null),t.forEach(A=>A.push(null))),e.push(_),a=_,p.forEach((A,C)=>{t[C]||(t[C]=[]),t[C].push(A[S])})})}),{xs:e,ys:t}}function prettifyLabels(r){const e={GAMMA:"Γ",DELTA:"Δ",SIGMA:"Σ",LAMBDA:"Λ"};Object.keys(e).forEach(a=>{const o=new RegExp(a,"gi");r=r.replace(o,e[a])}),r=r.replace(/\bG\b/g,"Γ"),r=r.replace(/-/g,"—");const t={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return r=r.replace(/_(.)/g,(a,o)=>t[o]||a),r}function getXLabelPos(r=td.paths){const e=[0];for(const t of r)t.x.length<3||e.push(t.x[t.x.length-1]);return e}function getXLabelsfromkpath(r){const e=r.flat(),t=[];t.push(e[0]);for(let a=1;a<e.length-1;a++)e[a]===e[a+1]?(t.push(e[a]),a++):(t.push(e[a]+"|"+e[a+1]),a++);return t.push(e[e.length-1]),t}function getXYRangeForAxis(r,e="x",t="y"){let a=1/0,o=-1/0,c=1/0,d=-1/0;for(const p of r){const _=p.xaxis===e||!p.xaxis&&e==="x",S=p.yaxis===t||!p.yaxis&&t==="y";if(!(!_||!S)){for(const A of p.x??[])typeof A=="number"&&(a=Math.min(a,A),o=Math.max(o,A));for(const A of p.y??[])typeof A=="number"&&(c=Math.min(c,A),d=Math.max(d,A))}}return{x:a===1/0?null:[a,o],y:c===1/0?null:[c,d]}}function createFermiLine(r,e,t,a={}){return{x:r,y:e,mode:"lines",type:"scatter",name:`Fermi [${t}eV]`,legendgroup:`fermi-${t}`,showlegend:a.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...a}}function addfermiLines(r,e,t,a){const o=[...e];if(t&&!a){const{y:c}=getXYRangeForAxis(e);for(const d of r)o.push(createFermiLine([d,d],[c[0],c[1]],d))}else if(a&&!t){const{x:c}=getXYRangeForAxis(e);for(const d of r)o.push(createFermiLine([c[0],c[1]],[d,d],d))}else if(a&&t){const{x:c}=getXYRangeForAxis(e,"x2","y"),{x:d}=getXYRangeForAxis(e,"x","y");for(const p of r)o.push(createFermiLine([d[0],d[1]],[p,p],p)),o.push(createFermiLine([c[0],c[1]],[p,p],p,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return o}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var r=function(Ne){return e(Ne)&&!t(Ne)};function e(K){return!!K&&typeof K=="object"}function t(K){var Ne=Object.prototype.toString.call(K);return Ne==="[object RegExp]"||Ne==="[object Date]"||c(K)}var a=typeof Symbol=="function"&&Symbol.for,o=a?Symbol.for("react.element"):60103;function c(K){return K.$$typeof===o}function d(K){return Array.isArray(K)?[]:{}}function p(K,Ne){return Ne.clone!==!1&&Ne.isMergeableObject(K)?re(d(K),K,Ne):K}function _(K,Ne,G){return K.concat(Ne).map(function(se){return p(se,G)})}function S(K,Ne){if(!Ne.customMerge)return re;var G=Ne.customMerge(K);return typeof G=="function"?G:re}function A(K){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(K).filter(function(Ne){return Object.propertyIsEnumerable.call(K,Ne)}):[]}function C(K){return Object.keys(K).concat(A(K))}function j(K,Ne){try{return Ne in K}catch{return!1}}function V(K,Ne){return j(K,Ne)&&!(Object.hasOwnProperty.call(K,Ne)&&Object.propertyIsEnumerable.call(K,Ne))}function J(K,Ne,G){var se={};return G.isMergeableObject(K)&&C(K).forEach(function(He){se[He]=p(K[He],G)}),C(Ne).forEach(function(He){V(K,He)||(j(K,He)&&G.isMergeableObject(Ne[He])?se[He]=S(He,G)(K[He],Ne[He],G):se[He]=p(Ne[He],G))}),se}function re(K,Ne,G){G=G||{},G.arrayMerge=G.arrayMerge||_,G.isMergeableObject=G.isMergeableObject||r,G.cloneUnlessOtherwiseSpecified=p;var se=Array.isArray(Ne),He=Array.isArray(K),Fe=se===He;return Fe?se?G.arrayMerge(K,Ne,G):J(K,Ne,G):p(Ne,G)}re.all=function(Ne,G){if(!Array.isArray(Ne))throw new Error("first argument should be an array");return Ne.reduce(function(se,He){return re(se,He,G)},{})};var ie=re;return cjs=ie,cjs}var cjsExports=requireCjs();const deepmerge=getDefaultExportFromCjs(cjsExports),plotLayoutDefault={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},plotBandLayout=deepmerge(plotLayoutDefault,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),plotDOSLayout=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotDOSLayoutF=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotCombinedLayout={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},traceDefaultBands={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},traceDefaultDos={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};var plotlyBasic_min$1={exports:{}},plotlyBasic_min=plotlyBasic_min$1.exports,hasRequiredPlotlyBasic_min;function requirePlotlyBasic_min(){return hasRequiredPlotlyBasic_min||(hasRequiredPlotlyBasic_min=1,(function(r){(function(e,t){r.exports?r.exports=t():e.moduleName=t()})(typeof self<"u"?self:plotlyBasic_min,()=>{var e=(()=>{var t=(me,ue)=>()=>(ue||me((ue={exports:{}}).exports,ue),ue.exports),a=t(me=>{me.version="3.1.2"}),o=t((me,ue)=>{(function(g,s,h){s[g]=s[g]||h(),typeof ue<"u"&&ue.exports&&(ue.exports=s[g])})("Promise",typeof window<"u"?window:me,function(){var g,s,h,x=Object.prototype.toString,v=typeof setImmediate<"u"?function(F){return setImmediate(F)}:setTimeout;try{Object.defineProperty({},"x",{}),g=function(F,w,L,O){return Object.defineProperty(F,w,{value:L,writable:!0,configurable:O!==!1})}}catch{g=function(w,L,O){return w[L]=O,w}}h=(function(){var F,w,L;function O(H,W){this.fn=H,this.self=W,this.next=void 0}return{add:function(H,W){L=new O(H,W),w?w.next=L:F=L,w=L,L=void 0},drain:function(){var H=F;for(F=w=s=void 0;H;)H.fn.call(H.self),H=H.next}}})();function y(F,w){h.add(F,w),s||(s=v(h.drain))}function b(F){var w,L=typeof F;return F!=null&&(L=="object"||L=="function")&&(w=F.then),typeof w=="function"?w:!1}function T(){for(var F=0;F<this.chain.length;F++)u(this,this.state===1?this.chain[F].success:this.chain[F].failure,this.chain[F]);this.chain.length=0}function u(F,w,L){var O,H;try{w===!1?L.reject(F.msg):(w===!0?O=F.msg:O=w.call(void 0,F.msg),O===L.promise?L.reject(TypeError("Promise-chain cycle")):(H=b(O))?H.call(O,L.resolve,L.reject):L.resolve(O))}catch(W){L.reject(W)}}function k(F){var w,L=this;if(!L.triggered){L.triggered=!0,L.def&&(L=L.def);try{(w=b(F))?y(function(){var O=new B(L);try{w.call(F,function(){k.apply(O,arguments)},function(){M.apply(O,arguments)})}catch(H){M.call(O,H)}}):(L.msg=F,L.state=1,L.chain.length>0&&y(T,L))}catch(O){M.call(new B(L),O)}}}function M(F){var w=this;w.triggered||(w.triggered=!0,w.def&&(w=w.def),w.msg=F,w.state=2,w.chain.length>0&&y(T,w))}function D(F,w,L,O){for(var H=0;H<w.length;H++)(function(W){F.resolve(w[W]).then(function(Ce){L(W,Ce)},O)})(H)}function B(F){this.def=F,this.triggered=!1}function P(F){this.promise=F,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function N(F){if(typeof F!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var w=new P(this);this.then=function(L,O){var H={success:typeof L=="function"?L:!0,failure:typeof O=="function"?O:!1};return H.promise=new this.constructor(function(W,Ce){if(typeof W!="function"||typeof Ce!="function")throw TypeError("Not a function");H.resolve=W,H.reject=Ce}),w.chain.push(H),w.state!==0&&y(T,w),H.promise},this.catch=function(L){return this.then(void 0,L)};try{F.call(void 0,function(L){k.call(w,L)},function(L){M.call(w,L)})}catch(L){M.call(w,L)}}var z=g({},"constructor",N,!1);return N.prototype=z,g(z,"__NPO__",0,!1),g(N,"resolve",function(F){var w=this;return F&&typeof F=="object"&&F.__NPO__===1?F:new w(function(L,O){if(typeof L!="function"||typeof O!="function")throw TypeError("Not a function");L(F)})}),g(N,"reject",function(F){return new this(function(w,L){if(typeof w!="function"||typeof L!="function")throw TypeError("Not a function");L(F)})}),g(N,"all",function(F){var w=this;return x.call(F)!="[object Array]"?w.reject(TypeError("Not an array")):F.length===0?w.resolve([]):new w(function(L,O){if(typeof L!="function"||typeof O!="function")throw TypeError("Not a function");var H=F.length,W=Array(H),Ce=0;D(w,F,function(he,le){W[he]=le,++Ce===H&&L(W)},O)})}),g(N,"race",function(F){var w=this;return x.call(F)!="[object Array]"?w.reject(TypeError("Not an array")):new w(function(L,O){if(typeof L!="function"||typeof O!="function")throw TypeError("Not a function");D(w,F,function(H,W){L(W)},O)})}),N})}),c=t((me,ue)=>{(function(){var g={version:"3.8.2"},s=[].slice,h=function(m){return s.call(m)},x=self.document;function v(m){return m&&(m.ownerDocument||m.document||m).documentElement}function y(m){return m&&(m.ownerDocument&&m.ownerDocument.defaultView||m.document&&m||m.defaultView)}if(x)try{h(x.documentElement.childNodes)[0].nodeType}catch{h=function(I){for(var ee=I.length,we=new Array(ee);ee--;)we[ee]=I[ee];return we}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch{var b=this.Element.prototype,T=b.setAttribute,u=b.setAttributeNS,k=this.CSSStyleDeclaration.prototype,M=k.setProperty;b.setAttribute=function(I,ee){T.call(this,I,ee+"")},b.setAttributeNS=function(I,ee,we){u.call(this,I,ee,we+"")},k.setProperty=function(I,ee,we){M.call(this,I,ee+"",we)}}g.ascending=D;function D(m,I){return m<I?-1:m>I?1:m>=I?0:NaN}g.descending=function(m,I){return I<m?-1:I>m?1:I>=m?0:NaN},g.min=function(m,I){var ee=-1,we=m.length,Ue,We;if(arguments.length===1){for(;++ee<we;)if((We=m[ee])!=null&&We>=We){Ue=We;break}for(;++ee<we;)(We=m[ee])!=null&&Ue>We&&(Ue=We)}else{for(;++ee<we;)if((We=I.call(m,m[ee],ee))!=null&&We>=We){Ue=We;break}for(;++ee<we;)(We=I.call(m,m[ee],ee))!=null&&Ue>We&&(Ue=We)}return Ue},g.max=function(m,I){var ee=-1,we=m.length,Ue,We;if(arguments.length===1){for(;++ee<we;)if((We=m[ee])!=null&&We>=We){Ue=We;break}for(;++ee<we;)(We=m[ee])!=null&&We>Ue&&(Ue=We)}else{for(;++ee<we;)if((We=I.call(m,m[ee],ee))!=null&&We>=We){Ue=We;break}for(;++ee<we;)(We=I.call(m,m[ee],ee))!=null&&We>Ue&&(Ue=We)}return Ue},g.extent=function(m,I){var ee=-1,we=m.length,Ue,We,Do;if(arguments.length===1){for(;++ee<we;)if((We=m[ee])!=null&&We>=We){Ue=Do=We;break}for(;++ee<we;)(We=m[ee])!=null&&(Ue>We&&(Ue=We),Do<We&&(Do=We))}else{for(;++ee<we;)if((We=I.call(m,m[ee],ee))!=null&&We>=We){Ue=Do=We;break}for(;++ee<we;)(We=I.call(m,m[ee],ee))!=null&&(Ue>We&&(Ue=We),Do<We&&(Do=We))}return[Ue,Do]};function B(m){return m===null?NaN:+m}function P(m){return!isNaN(m)}g.sum=function(m,I){var ee=0,we=m.length,Ue,We=-1;if(arguments.length===1)for(;++We<we;)P(Ue=+m[We])&&(ee+=Ue);else for(;++We<we;)P(Ue=+I.call(m,m[We],We))&&(ee+=Ue);return ee},g.mean=function(m,I){var ee=0,we=m.length,Ue,We=-1,Do=we;if(arguments.length===1)for(;++We<we;)P(Ue=B(m[We]))?ee+=Ue:--Do;else for(;++We<we;)P(Ue=B(I.call(m,m[We],We)))?ee+=Ue:--Do;if(Do)return ee/Do},g.quantile=function(m,I){var ee=(m.length-1)*I+1,we=Math.floor(ee),Ue=+m[we-1],We=ee-we;return We?Ue+We*(m[we]-Ue):Ue},g.median=function(m,I){var ee=[],we=m.length,Ue,We=-1;if(arguments.length===1)for(;++We<we;)P(Ue=B(m[We]))&&ee.push(Ue);else for(;++We<we;)P(Ue=B(I.call(m,m[We],We)))&&ee.push(Ue);if(ee.length)return g.quantile(ee.sort(D),.5)},g.variance=function(m,I){var ee=m.length,we=0,Ue,We,Do=0,_n=-1,jl=0;if(arguments.length===1)for(;++_n<ee;)P(Ue=B(m[_n]))&&(We=Ue-we,we+=We/++jl,Do+=We*(Ue-we));else for(;++_n<ee;)P(Ue=B(I.call(m,m[_n],_n)))&&(We=Ue-we,we+=We/++jl,Do+=We*(Ue-we));if(jl>1)return Do/(jl-1)},g.deviation=function(){var m=g.variance.apply(this,arguments);return m&&Math.sqrt(m)};function N(m){return{left:function(I,ee,we,Ue){for(arguments.length<3&&(we=0),arguments.length<4&&(Ue=I.length);we<Ue;){var We=we+Ue>>>1;m(I[We],ee)<0?we=We+1:Ue=We}return we},right:function(I,ee,we,Ue){for(arguments.length<3&&(we=0),arguments.length<4&&(Ue=I.length);we<Ue;){var We=we+Ue>>>1;m(I[We],ee)>0?Ue=We:we=We+1}return we}}}var z=N(D);g.bisectLeft=z.left,g.bisect=g.bisectRight=z.right,g.bisector=function(m){return N(m.length===1?function(I,ee){return D(m(I),ee)}:m)},g.shuffle=function(m,I,ee){(we=arguments.length)<3&&(ee=m.length,we<2&&(I=0));for(var we=ee-I,Ue,We;we;)We=Math.random()*we--|0,Ue=m[we+I],m[we+I]=m[We+I],m[We+I]=Ue;return m},g.permute=function(m,I){for(var ee=I.length,we=new Array(ee);ee--;)we[ee]=m[I[ee]];return we},g.pairs=function(m){for(var I=0,ee=m.length-1,we,Ue=m[0],We=new Array(ee<0?0:ee);I<ee;)We[I]=[we=Ue,Ue=m[++I]];return We},g.transpose=function(m){if(!(We=m.length))return[];for(var I=-1,ee=g.min(m,F),we=new Array(ee);++I<ee;)for(var Ue=-1,We,Do=we[I]=new Array(We);++Ue<We;)Do[Ue]=m[Ue][I];return we};function F(m){return m.length}g.zip=function(){return g.transpose(arguments)},g.keys=function(m){var I=[];for(var ee in m)I.push(ee);return I},g.values=function(m){var I=[];for(var ee in m)I.push(m[ee]);return I},g.entries=function(m){var I=[];for(var ee in m)I.push({key:ee,value:m[ee]});return I},g.merge=function(m){for(var I=m.length,ee,we=-1,Ue=0,We,Do;++we<I;)Ue+=m[we].length;for(We=new Array(Ue);--I>=0;)for(Do=m[I],ee=Do.length;--ee>=0;)We[--Ue]=Do[ee];return We};var w=Math.abs;g.range=function(m,I,ee){if(arguments.length<3&&(ee=1,arguments.length<2&&(I=m,m=0)),(I-m)/ee===1/0)throw new Error("infinite range");var we=[],Ue=L(w(ee)),We=-1,Do;if(m*=Ue,I*=Ue,ee*=Ue,ee<0)for(;(Do=m+ee*++We)>I;)we.push(Do/Ue);else for(;(Do=m+ee*++We)<I;)we.push(Do/Ue);return we};function L(m){for(var I=1;m*I%1;)I*=10;return I}function O(m,I){for(var ee in I)Object.defineProperty(m.prototype,ee,{value:I[ee],enumerable:!1})}g.map=function(m,I){var ee=new H;if(m instanceof H)m.forEach(function(_n,jl){ee.set(_n,jl)});else if(Array.isArray(m)){var we=-1,Ue=m.length,We;if(arguments.length===1)for(;++we<Ue;)ee.set(we,m[we]);else for(;++we<Ue;)ee.set(I.call(m,We=m[we],we),We)}else for(var Do in m)ee.set(Do,m[Do]);return ee};function H(){this._=Object.create(null)}var W="__proto__",Ce="\0";O(H,{has:Y,get:function(m){return this._[he(m)]},set:function(m,I){return this._[he(m)]=I},remove:Re,keys:fe,values:function(){var m=[];for(var I in this._)m.push(this._[I]);return m},entries:function(){var m=[];for(var I in this._)m.push({key:le(I),value:this._[I]});return m},size:xe,empty:ge,forEach:function(m){for(var I in this._)m.call(this,le(I),this._[I])}});function he(m){return(m+="")===W||m[0]===Ce?Ce+m:m}function le(m){return(m+="")[0]===Ce?m.slice(1):m}function Y(m){return he(m)in this._}function Re(m){return(m=he(m))in this._&&delete this._[m]}function fe(){var m=[];for(var I in this._)m.push(le(I));return m}function xe(){var m=0;for(var I in this._)++m;return m}function ge(){for(var m in this._)return!1;return!0}g.nest=function(){var m={},I=[],ee=[],we,Ue;function We(_n,jl,Cp){if(Cp>=I.length)return Ue?Ue.call(m,jl):we?jl.sort(we):jl;for(var Lp=-1,n0=jl.length,d0=I[Cp++],B0,Q0,f0,z0=new H,I0;++Lp<n0;)(I0=z0.get(B0=d0(Q0=jl[Lp])))?I0.push(Q0):z0.set(B0,[Q0]);return _n?(Q0=_n(),f0=function(J0,K0){Q0.set(J0,We(_n,K0,Cp))}):(Q0={},f0=function(J0,K0){Q0[J0]=We(_n,K0,Cp)}),z0.forEach(f0),Q0}function Do(_n,jl){if(jl>=I.length)return _n;var Cp=[],Lp=ee[jl++];return _n.forEach(function(n0,d0){Cp.push({key:n0,values:Do(d0,jl)})}),Lp?Cp.sort(function(n0,d0){return Lp(n0.key,d0.key)}):Cp}return m.map=function(_n,jl){return We(jl,_n,0)},m.entries=function(_n){return Do(We(g.map,_n,0),0)},m.key=function(_n){return I.push(_n),m},m.sortKeys=function(_n){return ee[I.length-1]=_n,m},m.sortValues=function(_n){return we=_n,m},m.rollup=function(_n){return Ue=_n,m},m},g.set=function(m){var I=new ye;if(m)for(var ee=0,we=m.length;ee<we;++ee)I.add(m[ee]);return I};function ye(){this._=Object.create(null)}O(ye,{has:Y,add:function(m){return this._[he(m+="")]=!0,m},remove:Re,values:fe,size:xe,empty:ge,forEach:function(m){for(var I in this._)m.call(this,le(I))}}),g.behavior={};function Ae(m){return m}g.rebind=function(m,I){for(var ee=1,we=arguments.length,Ue;++ee<we;)m[Ue=arguments[ee]]=Le(m,I,I[Ue]);return m};function Le(m,I,ee){return function(){var we=ee.apply(I,arguments);return we===I?m:we}}function ce(m,I){if(I in m)return I;I=I.charAt(0).toUpperCase()+I.slice(1);for(var ee=0,we=ke.length;ee<we;++ee){var Ue=ke[ee]+I;if(Ue in m)return Ue}}var ke=["webkit","ms","moz","Moz","o","O"];function Pe(){}g.dispatch=function(){for(var m=new tt,I=-1,ee=arguments.length;++I<ee;)m[arguments[I]]=Ke(m);return m};function tt(){}tt.prototype.on=function(m,I){var ee=m.indexOf("."),we="";if(ee>=0&&(we=m.slice(ee+1),m=m.slice(0,ee)),m)return arguments.length<2?this[m].on(we):this[m].on(we,I);if(arguments.length===2){if(I==null)for(m in this)this.hasOwnProperty(m)&&this[m].on(we,null);return this}};function Ke(m){var I=[],ee=new H;function we(){for(var Ue=I,We=-1,Do=Ue.length,_n;++We<Do;)(_n=Ue[We].on)&&_n.apply(this,arguments);return m}return we.on=function(Ue,We){var Do=ee.get(Ue),_n;return arguments.length<2?Do&&Do.on:(Do&&(Do.on=null,I=I.slice(0,_n=I.indexOf(Do)).concat(I.slice(_n+1)),ee.remove(Ue)),We&&I.push(ee.set(Ue,{on:We})),m)},we}g.event=null;function nt(){g.event.preventDefault()}function yi(){for(var m=g.event,I;I=m.sourceEvent;)m=I;return m}function Ei(m){for(var I=new tt,ee=0,we=arguments.length;++ee<we;)I[arguments[ee]]=Ke(I);return I.of=function(Ue,We){return function(Do){try{var _n=Do.sourceEvent=g.event;Do.target=m,g.event=Do,I[Do.type].apply(Ue,We)}finally{g.event=_n}}},I}g.requote=function(m){return m.replace(vs,"\\$&")};var vs=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Se={}.__proto__?function(m,I){m.__proto__=I}:function(m,I){for(var ee in I)m[ee]=I[ee]};function Ee(m){return Se(m,pe),m}var X=function(m,I){return I.querySelector(m)},Oe=function(m,I){return I.querySelectorAll(m)},Qe=function(m,I){var ee=m.matches||m[ce(m,"matchesSelector")];return Qe=function(we,Ue){return ee.call(we,Ue)},Qe(m,I)};typeof Sizzle=="function"&&(X=function(m,I){return Sizzle(m,I)[0]||null},Oe=Sizzle,Qe=Sizzle.matchesSelector),g.selection=function(){return g.select(x.documentElement)};var pe=g.selection.prototype=[];pe.select=function(m){var I=[],ee,we,Ue,We;m=q(m);for(var Do=-1,_n=this.length;++Do<_n;){I.push(ee=[]),ee.parentNode=(Ue=this[Do]).parentNode;for(var jl=-1,Cp=Ue.length;++jl<Cp;)(We=Ue[jl])?(ee.push(we=m.call(We,We.__data__,jl,Do)),we&&"__data__"in We&&(we.__data__=We.__data__)):ee.push(null)}return Ee(I)};function q(m){return typeof m=="function"?m:function(){return X(m,this)}}pe.selectAll=function(m){var I=[],ee,we;m=ae(m);for(var Ue=-1,We=this.length;++Ue<We;)for(var Do=this[Ue],_n=-1,jl=Do.length;++_n<jl;)(we=Do[_n])&&(I.push(ee=h(m.call(we,we.__data__,_n,Ue))),ee.parentNode=we);return Ee(I)};function ae(m){return typeof m=="function"?m:function(){return Oe(m,this)}}var ve="http://www.w3.org/1999/xhtml",Te={svg:"http://www.w3.org/2000/svg",xhtml:ve,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};g.ns={prefix:Te,qualify:function(m){var I=m.indexOf(":"),ee=m;return I>=0&&(ee=m.slice(0,I))!=="xmlns"&&(m=m.slice(I+1)),Te.hasOwnProperty(ee)?{space:Te[ee],local:m}:m}},pe.attr=function(m,I){if(arguments.length<2){if(typeof m=="string"){var ee=this.node();return m=g.ns.qualify(m),m.local?ee.getAttributeNS(m.space,m.local):ee.getAttribute(m)}for(I in m)this.each(et(I,m[I]));return this}return this.each(et(m,I))};function et(m,I){m=g.ns.qualify(m);function ee(){this.removeAttribute(m)}function we(){this.removeAttributeNS(m.space,m.local)}function Ue(){this.setAttribute(m,I)}function We(){this.setAttributeNS(m.space,m.local,I)}function Do(){var jl=I.apply(this,arguments);jl==null?this.removeAttribute(m):this.setAttribute(m,jl)}function _n(){var jl=I.apply(this,arguments);jl==null?this.removeAttributeNS(m.space,m.local):this.setAttributeNS(m.space,m.local,jl)}return I==null?m.local?we:ee:typeof I=="function"?m.local?_n:Do:m.local?We:Ue}function bt(m){return m.trim().replace(/\s+/g," ")}pe.classed=function(m,I){if(arguments.length<2){if(typeof m=="string"){var ee=this.node(),we=(m=Ol(m)).length,Ue=-1;if(I=ee.classList){for(;++Ue<we;)if(!I.contains(m[Ue]))return!1}else for(I=ee.getAttribute("class");++Ue<we;)if(!dr(m[Ue]).test(I))return!1;return!0}for(I in m)this.each(Xl(I,m[I]));return this}return this.each(Xl(m,I))};function dr(m){return new RegExp("(?:^|\\s+)"+g.requote(m)+"(?:\\s+|$)","g")}function Ol(m){return(m+"").trim().split(/^|\s+/)}function Xl(m,I){m=Ol(m).map(Pp);var ee=m.length;function we(){for(var We=-1;++We<ee;)m[We](this,I)}function Ue(){for(var We=-1,Do=I.apply(this,arguments);++We<ee;)m[We](this,Do)}return typeof I=="function"?Ue:we}function Pp(m){var I=dr(m);return function(ee,we){if(Ue=ee.classList)return we?Ue.add(m):Ue.remove(m);var Ue=ee.getAttribute("class")||"";we?(I.lastIndex=0,I.test(Ue)||ee.setAttribute("class",bt(Ue+" "+m))):ee.setAttribute("class",bt(Ue.replace(I," ")))}}pe.style=function(m,I,ee){var we=arguments.length;if(we<3){if(typeof m!="string"){we<2&&(I="");for(ee in m)this.each(t0(ee,m[ee],I));return this}if(we<2){var Ue=this.node();return y(Ue).getComputedStyle(Ue,null).getPropertyValue(m)}ee=""}return this.each(t0(m,I,ee))};function t0(m,I,ee){function we(){this.style.removeProperty(m)}function Ue(){this.style.setProperty(m,I,ee)}function We(){var Do=I.apply(this,arguments);Do==null?this.style.removeProperty(m):this.style.setProperty(m,Do,ee)}return I==null?we:typeof I=="function"?We:Ue}pe.property=function(m,I){if(arguments.length<2){if(typeof m=="string")return this.node()[m];for(I in m)this.each(Wp(I,m[I]));return this}return this.each(Wp(m,I))};function Wp(m,I){function ee(){delete this[m]}function we(){this[m]=I}function Ue(){var We=I.apply(this,arguments);We==null?delete this[m]:this[m]=We}return I==null?ee:typeof I=="function"?Ue:we}pe.text=function(m){return arguments.length?this.each(typeof m=="function"?function(){var I=m.apply(this,arguments);this.textContent=I??""}:m==null?function(){this.textContent=""}:function(){this.textContent=m}):this.node().textContent},pe.html=function(m){return arguments.length?this.each(typeof m=="function"?function(){var I=m.apply(this,arguments);this.innerHTML=I??""}:m==null?function(){this.innerHTML=""}:function(){this.innerHTML=m}):this.node().innerHTML},pe.append=function(m){return m=$p(m),this.select(function(){return this.appendChild(m.apply(this,arguments))})};function $p(m){function I(){var we=this.ownerDocument,Ue=this.namespaceURI;return Ue===ve&&we.documentElement.namespaceURI===ve?we.createElement(m):we.createElementNS(Ue,m)}function ee(){return this.ownerDocument.createElementNS(m.space,m.local)}return typeof m=="function"?m:(m=g.ns.qualify(m)).local?ee:I}pe.insert=function(m,I){return m=$p(m),I=q(I),this.select(function(){return this.insertBefore(m.apply(this,arguments),I.apply(this,arguments)||null)})},pe.remove=function(){return this.each(Lo)};function Lo(){var m=this.parentNode;m&&m.removeChild(this)}pe.data=function(m,I){var ee=-1,we=this.length,Ue,We;if(!arguments.length){for(m=new Array(we=(Ue=this[0]).length);++ee<we;)(We=Ue[ee])&&(m[ee]=We.__data__);return m}function Do(Lp,n0){var d0,B0=Lp.length,Q0=n0.length,f0=Math.min(B0,Q0),z0=new Array(Q0),I0=new Array(Q0),J0=new Array(B0),K0,j0;if(I){var Km=new H,n=new Array(B0),i;for(d0=-1;++d0<B0;)(K0=Lp[d0])&&(Km.has(i=I.call(K0,K0.__data__,d0))?J0[d0]=K0:Km.set(i,K0),n[d0]=i);for(d0=-1;++d0<Q0;)(K0=Km.get(i=I.call(n0,j0=n0[d0],d0)))?K0!==!0&&(z0[d0]=K0,K0.__data__=j0):I0[d0]=kl(j0),Km.set(i,!0);for(d0=-1;++d0<B0;)d0 in n&&Km.get(n[d0])!==!0&&(J0[d0]=Lp[d0])}else{for(d0=-1;++d0<f0;)K0=Lp[d0],j0=n0[d0],K0?(K0.__data__=j0,z0[d0]=K0):I0[d0]=kl(j0);for(;d0<Q0;++d0)I0[d0]=kl(n0[d0]);for(;d0<B0;++d0)J0[d0]=Lp[d0]}I0.update=z0,I0.parentNode=z0.parentNode=J0.parentNode=Lp.parentNode,_n.push(I0),jl.push(z0),Cp.push(J0)}var _n=Jp([]),jl=Ee([]),Cp=Ee([]);if(typeof m=="function")for(;++ee<we;)Do(Ue=this[ee],m.call(Ue,Ue.parentNode.__data__,ee));else for(;++ee<we;)Do(Ue=this[ee],m);return jl.enter=function(){return _n},jl.exit=function(){return Cp},jl};function kl(m){return{__data__:m}}pe.datum=function(m){return arguments.length?this.property("__data__",m):this.property("__data__")},pe.filter=function(m){var I=[],ee,we,Ue;typeof m!="function"&&(m=dt(m));for(var We=0,Do=this.length;We<Do;We++){I.push(ee=[]),ee.parentNode=(we=this[We]).parentNode;for(var _n=0,jl=we.length;_n<jl;_n++)(Ue=we[_n])&&m.call(Ue,Ue.__data__,_n,We)&&ee.push(Ue)}return Ee(I)};function dt(m){return function(){return Qe(this,m)}}pe.order=function(){for(var m=-1,I=this.length;++m<I;)for(var ee=this[m],we=ee.length-1,Ue=ee[we],We;--we>=0;)(We=ee[we])&&(Ue&&Ue!==We.nextSibling&&Ue.parentNode.insertBefore(We,Ue),Ue=We);return this},pe.sort=function(m){m=yp.apply(this,arguments);for(var I=-1,ee=this.length;++I<ee;)this[I].sort(m);return this.order()};function yp(m){return arguments.length||(m=D),function(I,ee){return I&&ee?m(I.__data__,ee.__data__):!I-!ee}}pe.each=function(m){return Bp(this,function(I,ee,we){m.call(I,I.__data__,ee,we)})};function Bp(m,I){for(var ee=0,we=m.length;ee<we;ee++)for(var Ue=m[ee],We=0,Do=Ue.length,_n;We<Do;We++)(_n=Ue[We])&&I(_n,We,ee);return m}pe.call=function(m){var I=h(arguments);return m.apply(I[0]=this,I),this},pe.empty=function(){return!this.node()},pe.node=function(){for(var m=0,I=this.length;m<I;m++)for(var ee=this[m],we=0,Ue=ee.length;we<Ue;we++){var We=ee[we];if(We)return We}return null},pe.size=function(){var m=0;return Bp(this,function(){++m}),m};function Jp(m){return Se(m,m0),m}var m0=[];g.selection.enter=Jp,g.selection.enter.prototype=m0,m0.append=pe.append,m0.empty=pe.empty,m0.node=pe.node,m0.call=pe.call,m0.size=pe.size,m0.select=function(m){for(var I=[],ee,we,Ue,We,Do,_n=-1,jl=this.length;++_n<jl;){Ue=(We=this[_n]).update,I.push(ee=[]),ee.parentNode=We.parentNode;for(var Cp=-1,Lp=We.length;++Cp<Lp;)(Do=We[Cp])?(ee.push(Ue[Cp]=we=m.call(We.parentNode,Do.__data__,Cp,_n)),we.__data__=Do.__data__):ee.push(null)}return Ee(I)},m0.insert=function(m,I){return arguments.length<2&&(I=s0(this)),pe.insert.call(this,m,I)};function s0(m){var I,ee;return function(we,Ue,We){var Do=m[We].update,_n=Do.length,jl;for(We!=ee&&(ee=We,I=0),Ue>=I&&(I=Ue+1);!(jl=Do[I])&&++I<_n;);return jl}}g.select=function(m){var I;return typeof m=="string"?(I=[X(m,x)],I.parentNode=x.documentElement):(I=[m],I.parentNode=v(m)),Ee([I])},g.selectAll=function(m){var I;return typeof m=="string"?(I=h(Oe(m,x)),I.parentNode=x.documentElement):(I=h(m),I.parentNode=null),Ee([I])},pe.on=function(m,I,ee){var we=arguments.length;if(we<3){if(typeof m!="string"){we<2&&(I=!1);for(ee in m)this.each(y0(ee,m[ee],I));return this}if(we<2)return(we=this.node()["__on"+m])&&we._;ee=!1}return this.each(y0(m,I,ee))};function y0(m,I,ee){var we="__on"+m,Ue=m.indexOf("."),We=T0;Ue>0&&(m=m.slice(0,Ue));var Do=M0.get(m);Do&&(m=Do,We=G0);function _n(){var Lp=this[we];Lp&&(this.removeEventListener(m,Lp,Lp.$),delete this[we])}function jl(){var Lp=We(I,h(arguments));_n.call(this),this.addEventListener(m,this[we]=Lp,Lp.$=ee),Lp._=I}function Cp(){var Lp=new RegExp("^__on([^.]+)"+g.requote(m)+"$"),n0;for(var d0 in this)if(n0=d0.match(Lp)){var B0=this[d0];this.removeEventListener(n0[1],B0,B0.$),delete this[d0]}}return Ue?I?jl:_n:I?Pe:Cp}var M0=g.map({mouseenter:"mouseover",mouseleave:"mouseout"});x&&M0.forEach(function(m){"on"+m in x&&M0.remove(m)});function T0(m,I){return function(ee){var we=g.event;g.event=ee,I[0]=this.__data__;try{m.apply(this,I)}finally{g.event=we}}}function G0(m,I){var ee=T0(m,I);return function(we){var Ue=this,We=we.relatedTarget;(!We||We!==Ue&&!(We.compareDocumentPosition(Ue)&8))&&ee.call(Ue,we)}}var h0,W0=0;function rm(m){var I=".dragsuppress-"+ ++W0,ee="click"+I,we=g.select(y(m)).on("touchmove"+I,nt).on("dragstart"+I,nt).on("selectstart"+I,nt);if(h0==null&&(h0="onselectstart"in m?!1:ce(m.style,"userSelect")),h0){var Ue=v(m).style,We=Ue[h0];Ue[h0]="none"}return function(Do){if(we.on(I,null),h0&&(Ue[h0]=We),Do){var _n=function(){we.on(ee,null)};we.on(ee,function(){nt(),_n()},!0),setTimeout(_n,0)}}}g.mouse=function(m){return um(m,yi())};var V0=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function um(m,I){I.changedTouches&&(I=I.changedTouches[0]);var ee=m.ownerSVGElement||m;if(ee.createSVGPoint){var we=ee.createSVGPoint();if(V0<0){var Ue=y(m);if(Ue.scrollX||Ue.scrollY){ee=g.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var We=ee[0][0].getScreenCTM();V0=!(We.f||We.e),ee.remove()}}return V0?(we.x=I.pageX,we.y=I.pageY):(we.x=I.clientX,we.y=I.clientY),we=we.matrixTransform(m.getScreenCTM().inverse()),[we.x,we.y]}var Do=m.getBoundingClientRect();return[I.clientX-Do.left-m.clientLeft,I.clientY-Do.top-m.clientTop]}g.touch=function(m,I,ee){if(arguments.length<3&&(ee=I,I=yi().changedTouches),I){for(var we=0,Ue=I.length,We;we<Ue;++we)if((We=I[we]).identifier===ee)return um(m,We)}},g.behavior.drag=function(){var m=Ei(Ue,"drag","dragstart","dragend"),I=null,ee=We(Pe,g.mouse,y,"mousemove","mouseup"),we=We(Uo,g.touch,Ae,"touchmove","touchend");function Ue(){this.on("mousedown.drag",ee).on("touchstart.drag",we)}function We(Do,_n,jl,Cp,Lp){return function(){var n0=this,d0=g.event.target.correspondingElement||g.event.target,B0=n0.parentNode,Q0=m.of(n0,arguments),f0=0,z0=Do(),I0=".drag"+(z0==null?"":"-"+z0),J0,K0=g.select(jl(d0)).on(Cp+I0,n).on(Lp+I0,i),j0=rm(d0),Km=_n(B0,z0);I?(J0=I.apply(n0,arguments),J0=[J0.x-Km[0],J0.y-Km[1]]):J0=[0,0],Q0({type:"dragstart"});function n(){var l=_n(B0,z0),E,te;l&&(E=l[0]-Km[0],te=l[1]-Km[1],f0|=E|te,Km=l,Q0({type:"drag",x:l[0]+J0[0],y:l[1]+J0[1],dx:E,dy:te}))}function i(){_n(B0,z0)&&(K0.on(Cp+I0,null).on(Lp+I0,null),j0(f0),Q0({type:"dragend"}))}}}return Ue.origin=function(Do){return arguments.length?(I=Do,Ue):I},g.rebind(Ue,m,"on")};function Uo(){return g.event.changedTouches[0].identifier}g.touches=function(m,I){return arguments.length<2&&(I=yi().touches),I?h(I).map(function(ee){var we=um(m,ee);return we.identifier=ee.identifier,we}):[]};var Tp=1e-6,Be=Tp*Tp,ft=Math.PI,mn=2*ft,Bl=mn-Tp,Vl=ft/2,Np=ft/180,Up=180/ft;function Qp(m,I,ee){return(I[0]-m[0])*(ee[1]-m[1])-(I[1]-m[1])*(ee[0]-m[0])}function Zp(m){return m>1?Vl:m<-1?-Vl:Math.asin(m)}function Kp(m){return((m=Math.exp(m))-1/m)/2}function R0(m){return((m=Math.exp(m))+1/m)/2}function k0(m){return((m=Math.exp(2*m))-1)/(m+1)}var N0=Math.SQRT2,lm=2,Im=4;g.interpolateZoom=function(m,I){var ee=m[0],we=m[1],Ue=m[2],We=I[0],Do=I[1],_n=I[2],jl=We-ee,Cp=Do-we,Lp=jl*jl+Cp*Cp,n0,d0;if(Lp<Be)d0=Math.log(_n/Ue)/N0,n0=function(J0){return[ee+J0*jl,we+J0*Cp,Ue*Math.exp(N0*J0*d0)]};else{var B0=Math.sqrt(Lp),Q0=(_n*_n-Ue*Ue+Im*Lp)/(2*Ue*lm*B0),f0=(_n*_n-Ue*Ue-Im*Lp)/(2*_n*lm*B0),z0=Math.log(Math.sqrt(Q0*Q0+1)-Q0),I0=Math.log(Math.sqrt(f0*f0+1)-f0);d0=(I0-z0)/N0,n0=function(J0){var K0=J0*d0,j0=R0(z0),Km=Ue/(lm*B0)*(j0*k0(N0*K0+z0)-Kp(z0));return[ee+Km*jl,we+Km*Cp,Ue*j0/R0(N0*K0+z0)]}}return n0.duration=d0*1e3,n0},g.behavior.zoom=function(){var m={x:0,y:0,k:1},I,ee,we,Ue=[960,500],We=u1,Do=250,_n=0,jl="mousedown.zoom",Cp="mousemove.zoom",Lp="mouseup.zoom",n0,d0="touchstart.zoom",B0,Q0=Ei(K0,"zoomstart","zoom","zoomend"),f0,z0,I0,J0;b1||(b1="onwheel"in x?(v1=function(){return-g.event.deltaY*(g.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(v1=function(){return g.event.wheelDelta},"mousewheel"):(v1=function(){return-g.event.detail},"MozMousePixelScroll"));function K0(X0){X0.on(jl,Rp).on(b1+".zoom",hm).on("dblclick.zoom",Am).on(d0,L0)}K0.event=function(X0){X0.each(function(){var em=Q0.of(this,arguments),cm=m;gx?g.select(this).transition().each("start.zoom",function(){m=this.__chart__||{x:0,y:0,k:1},te(em)}).tween("zoom:zoom",function(){var L1=Ue[0],Y1=Ue[1],Rg=ee?ee[0]:L1/2,nm=ee?ee[1]:Y1/2,Y0=g.interpolateZoom([(Rg-m.x)/m.k,(nm-m.y)/m.k,L1/m.k],[(Rg-cm.x)/cm.k,(nm-cm.y)/cm.k,L1/cm.k]);return function(gm){var Wm=Y0(gm),ng=L1/Wm[2];this.__chart__=m={x:Rg-Wm[0]*ng,y:nm-Wm[1]*ng,k:ng},Me(em)}}).each("interrupt.zoom",function(){Io(em)}).each("end.zoom",function(){Io(em)}):(this.__chart__=m,te(em),Me(em),Io(em))})},K0.translate=function(X0){return arguments.length?(m={x:+X0[0],y:+X0[1],k:m.k},E(),K0):[m.x,m.y]},K0.scale=function(X0){return arguments.length?(m={x:m.x,y:m.y,k:null},n(+X0),E(),K0):m.k},K0.scaleExtent=function(X0){return arguments.length?(We=X0==null?u1:[+X0[0],+X0[1]],K0):We},K0.center=function(X0){return arguments.length?(we=X0&&[+X0[0],+X0[1]],K0):we},K0.size=function(X0){return arguments.length?(Ue=X0&&[+X0[0],+X0[1]],K0):Ue},K0.duration=function(X0){return arguments.length?(Do=+X0,K0):Do},K0.x=function(X0){return arguments.length?(z0=X0,f0=X0.copy(),m={x:0,y:0,k:1},K0):z0},K0.y=function(X0){return arguments.length?(J0=X0,I0=X0.copy(),m={x:0,y:0,k:1},K0):J0};function j0(X0){return[(X0[0]-m.x)/m.k,(X0[1]-m.y)/m.k]}function Km(X0){return[X0[0]*m.k+m.x,X0[1]*m.k+m.y]}function n(X0){m.k=Math.max(We[0],Math.min(We[1],X0))}function i(X0,em){em=Km(em),m.x+=X0[0]-em[0],m.y+=X0[1]-em[1]}function l(X0,em,cm,L1){X0.__chart__={x:m.x,y:m.y,k:m.k},n(Math.pow(2,L1)),i(ee=em,cm),X0=g.select(X0),Do>0&&(X0=X0.transition().duration(Do)),X0.call(K0.event)}function E(){z0&&z0.domain(f0.range().map(function(X0){return(X0-m.x)/m.k}).map(f0.invert)),J0&&J0.domain(I0.range().map(function(X0){return(X0-m.y)/m.k}).map(I0.invert))}function te(X0){_n++||X0({type:"zoomstart"})}function Me(X0){E(),X0({type:"zoom",scale:m.k,translate:[m.x,m.y]})}function Io(X0){--_n||(X0({type:"zoomend"}),ee=null)}function Rp(){var X0=this,em=Q0.of(X0,arguments),cm=0,L1=g.select(y(X0)).on(Cp,nm).on(Lp,Y0),Y1=j0(g.mouse(X0)),Rg=rm(X0);Q_.call(X0),te(em);function nm(){cm=1,i(g.mouse(X0),Y1),Me(em)}function Y0(){L1.on(Cp,null).on(Lp,null),Rg(cm),Io(em)}}function L0(){var X0=this,em=Q0.of(X0,arguments),cm={},L1=0,Y1,Rg=".zoom-"+g.event.changedTouches[0].identifier,nm="touchmove"+Rg,Y0="touchend"+Rg,gm=[],Wm=g.select(X0),ng=rm(X0);X1(),te(em),Wm.on(jl,null).on(d0,X1);function Lg(){var Zg=g.touches(X0);return Y1=m.k,Zg.forEach(function(Xv){Xv.identifier in cm&&(cm[Xv.identifier]=j0(Xv))}),Zg}function X1(){var Zg=g.event.target;g.select(Zg).on(nm,jg).on(Y0,uv),gm.push(Zg);for(var Xv=g.event.changedTouches,Yy=0,zx=Xv.length;Yy<zx;++Yy)cm[Xv[Yy].identifier]=null;var ix=Lg(),ib=Date.now();if(ix.length===1){if(ib-B0<500){var d_=ix[0];l(X0,d_,cm[d_.identifier],Math.floor(Math.log(m.k)/Math.LN2)+1),nt()}B0=ib}else if(ix.length>1){var d_=ix[0],A2=ix[1],z5=d_[0]-A2[0],uw=d_[1]-A2[1];L1=z5*z5+uw*uw}}function jg(){var Zg=g.touches(X0),Xv,Yy,zx,ix;Q_.call(X0);for(var ib=0,d_=Zg.length;ib<d_;++ib,ix=null)if(zx=Zg[ib],ix=cm[zx.identifier]){if(Yy)break;Xv=zx,Yy=ix}if(ix){var A2=(A2=zx[0]-Xv[0])*A2+(A2=zx[1]-Xv[1])*A2,z5=L1&&Math.sqrt(A2/L1);Xv=[(Xv[0]+zx[0])/2,(Xv[1]+zx[1])/2],Yy=[(Yy[0]+ix[0])/2,(Yy[1]+ix[1])/2],n(z5*Y1)}B0=null,i(Xv,Yy),Me(em)}function uv(){if(g.event.touches.length){for(var Zg=g.event.changedTouches,Xv=0,Yy=Zg.length;Xv<Yy;++Xv)delete cm[Zg[Xv].identifier];for(var zx in cm)return void Lg()}g.selectAll(gm).on(Rg,null),Wm.on(jl,Rp).on(d0,L0),ng(),Io(em)}}function hm(){var X0=Q0.of(this,arguments);n0?clearTimeout(n0):(Q_.call(this),I=j0(ee=we||g.mouse(this)),te(X0)),n0=setTimeout(function(){n0=null,Io(X0)},50),nt(),n(Math.pow(2,v1()*.002)*m.k),i(ee,I),Me(X0)}function Am(){var X0=g.mouse(this),em=Math.log(m.k)/Math.LN2;l(this,X0,j0(X0),g.event.shiftKey?Math.ceil(em)-1:Math.floor(em)+1)}return g.rebind(K0,Q0,"on")};var u1=[0,1/0],v1,b1;g.color=Bm;function Bm(){}Bm.prototype.toString=function(){return this.rgb()+""},g.hsl=fm;function fm(m,I,ee){return this instanceof fm?(this.h=+m,this.s=+I,void(this.l=+ee)):arguments.length<2?m instanceof fm?new fm(m.h,m.s,m.l):kp(""+m,Vp,fm):new fm(m,I,ee)}var c1=fm.prototype=new Bm;c1.brighter=function(m){return m=Math.pow(.7,arguments.length?m:1),new fm(this.h,this.s,this.l/m)},c1.darker=function(m){return m=Math.pow(.7,arguments.length?m:1),new fm(this.h,this.s,m*this.l)},c1.rgb=function(){return y1(this.h,this.s,this.l)};function y1(m,I,ee){var we,Ue;m=isNaN(m)?0:(m%=360)<0?m+360:m,I=isNaN(I)||I<0?0:I>1?1:I,ee=ee<0?0:ee>1?1:ee,Ue=ee<=.5?ee*(1+I):ee+I-ee*I,we=2*ee-Ue;function We(_n){return _n>360?_n-=360:_n<0&&(_n+=360),_n<60?we+(Ue-we)*_n/60:_n<180?Ue:_n<240?we+(Ue-we)*(240-_n)/60:we}function Do(_n){return Math.round(We(_n)*255)}return new Sm(Do(m+120),Do(m),Do(m-120))}g.hcl=n1;function n1(m,I,ee){return this instanceof n1?(this.h=+m,this.c=+I,void(this.l=+ee)):arguments.length<2?m instanceof n1?new n1(m.h,m.c,m.l):m instanceof Um?mg(m.l,m.a,m.b):mg((m=wp((m=g.rgb(m)).r,m.g,m.b)).l,m.a,m.b):new n1(m,I,ee)}var Ym=n1.prototype=new Bm;Ym.brighter=function(m){return new n1(this.h,this.c,Math.min(100,this.l+z1*(arguments.length?m:1)))},Ym.darker=function(m){return new n1(this.h,this.c,Math.max(0,this.l-z1*(arguments.length?m:1)))},Ym.rgb=function(){return t1(this.h,this.c,this.l).rgb()};function t1(m,I,ee){return isNaN(m)&&(m=0),isNaN(I)&&(I=0),new Um(ee,Math.cos(m*=Np)*I,Math.sin(m)*I)}g.lab=Um;function Um(m,I,ee){return this instanceof Um?(this.l=+m,this.a=+I,void(this.b=+ee)):arguments.length<2?m instanceof Um?new Um(m.l,m.a,m.b):m instanceof n1?t1(m.h,m.c,m.l):wp((m=Sm(m)).r,m.g,m.b):new Um(m,I,ee)}var z1=18,F1=.95047,g1=1,V1=1.08883,K1=Um.prototype=new Bm;K1.brighter=function(m){return new Um(Math.min(100,this.l+z1*(arguments.length?m:1)),this.a,this.b)},K1.darker=function(m){return new Um(Math.max(0,this.l-z1*(arguments.length?m:1)),this.a,this.b)},K1.rgb=function(){return ig(this.l,this.a,this.b)};function ig(m,I,ee){var we=(m+16)/116,Ue=we+I/500,We=we-ee/200;return Ue=P1(Ue)*F1,we=P1(we)*g1,We=P1(We)*V1,new Sm(G1(3.2404542*Ue-1.5371385*we-.4985314*We),G1(-.969266*Ue+1.8760108*we+.041556*We),G1(.0556434*Ue-.2040259*we+1.0572252*We))}function mg(m,I,ee){return m>0?new n1(Math.atan2(ee,I)*Up,Math.sqrt(I*I+ee*ee),m):new n1(NaN,NaN,m)}function P1(m){return m>.206893034?m*m*m:(m-4/29)/7.787037}function lg(m){return m>.008856?Math.pow(m,1/3):7.787037*m+4/29}function G1(m){return Math.round(255*(m<=.00304?12.92*m:1.055*Math.pow(m,1/2.4)-.055))}g.rgb=Sm;function Sm(m,I,ee){return this instanceof Sm?(this.r=~~m,this.g=~~I,void(this.b=~~ee)):arguments.length<2?m instanceof Sm?new Sm(m.r,m.g,m.b):kp(""+m,Sm,y1):new Sm(m,I,ee)}function Cg(m){return new Sm(m>>16,m>>8&255,m&255)}function Je(m){return Cg(m)+""}var Ve=Sm.prototype=new Bm;Ve.brighter=function(m){m=Math.pow(.7,arguments.length?m:1);var I=this.r,ee=this.g,we=this.b,Ue=30;return!I&&!ee&&!we?new Sm(Ue,Ue,Ue):(I&&I<Ue&&(I=Ue),ee&&ee<Ue&&(ee=Ue),we&&we<Ue&&(we=Ue),new Sm(Math.min(255,I/m),Math.min(255,ee/m),Math.min(255,we/m)))},Ve.darker=function(m){return m=Math.pow(.7,arguments.length?m:1),new Sm(m*this.r,m*this.g,m*this.b)},Ve.hsl=function(){return Vp(this.r,this.g,this.b)},Ve.toString=function(){return"#"+Mp(this.r)+Mp(this.g)+Mp(this.b)};function Mp(m){return m<16?"0"+Math.max(0,m).toString(16):Math.min(255,m).toString(16)}function kp(m,I,ee){var we=0,Ue=0,We=0,Do,_n,jl;if(Do=/([a-z]+)\((.*)\)/.exec(m=m.toLowerCase()),Do)switch(_n=Do[2].split(","),Do[1]){case"hsl":return ee(parseFloat(_n[0]),parseFloat(_n[1])/100,parseFloat(_n[2])/100);case"rgb":return I(Yp(_n[0]),Yp(_n[1]),Yp(_n[2]))}return(jl=Fp.get(m))?I(jl.r,jl.g,jl.b):(m!=null&&m.charAt(0)==="#"&&!isNaN(jl=parseInt(m.slice(1),16))&&(m.length===4?(we=(jl&3840)>>4,we=we>>4|we,Ue=jl&240,Ue=Ue>>4|Ue,We=jl&15,We=We<<4|We):m.length===7&&(we=(jl&16711680)>>16,Ue=(jl&65280)>>8,We=jl&255)),I(we,Ue,We))}function Vp(m,I,ee){var we=Math.min(m/=255,I/=255,ee/=255),Ue=Math.max(m,I,ee),We=Ue-we,Do,_n,jl=(Ue+we)/2;return We?(_n=jl<.5?We/(Ue+we):We/(2-Ue-we),m==Ue?Do=(I-ee)/We+(I<ee?6:0):I==Ue?Do=(ee-m)/We+2:Do=(m-I)/We+4,Do*=60):(Do=NaN,_n=jl>0&&jl<1?0:Do),new fm(Do,_n,jl)}function wp(m,I,ee){m=Ap(m),I=Ap(I),ee=Ap(ee);var we=lg((.4124564*m+.3575761*I+.1804375*ee)/F1),Ue=lg((.2126729*m+.7151522*I+.072175*ee)/g1),We=lg((.0193339*m+.119192*I+.9503041*ee)/V1);return Um(116*Ue-16,500*(we-Ue),200*(Ue-We))}function Ap(m){return(m/=255)<=.04045?m/12.92:Math.pow((m+.055)/1.055,2.4)}function Yp(m){var I=parseFloat(m);return m.charAt(m.length-1)==="%"?Math.round(I*2.55):I}var Fp=g.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Fp.forEach(function(m,I){Fp.set(m,Cg(I))});function u0(m){return typeof m=="function"?m:function(){return m}}g.functor=u0,g.xhr=g0(Ae);function g0(m){return function(I,ee,we){return arguments.length===2&&typeof ee=="function"&&(we=ee,ee=null),H0(I,ee,m,we)}}function H0(m,I,ee,we){var Ue={},We=g.dispatch("beforesend","progress","load","error"),Do={},_n=new XMLHttpRequest,jl=null;self.XDomainRequest&&!("withCredentials"in _n)&&/^(http(s)?:)?\/\//.test(m)&&(_n=new XDomainRequest),"onload"in _n?_n.onload=_n.onerror=Cp:_n.onreadystatechange=function(){_n.readyState>3&&Cp()};function Cp(){var Lp=_n.status,n0;if(!Lp&&Em(_n)||Lp>=200&&Lp<300||Lp===304){try{n0=ee.call(Ue,_n)}catch(d0){We.error.call(Ue,d0);return}We.load.call(Ue,n0)}else We.error.call(Ue,_n)}return _n.onprogress=function(Lp){var n0=g.event;g.event=Lp;try{We.progress.call(Ue,_n)}finally{g.event=n0}},Ue.header=function(Lp,n0){return Lp=(Lp+"").toLowerCase(),arguments.length<2?Do[Lp]:(n0==null?delete Do[Lp]:Do[Lp]=n0+"",Ue)},Ue.mimeType=function(Lp){return arguments.length?(I=Lp==null?null:Lp+"",Ue):I},Ue.responseType=function(Lp){return arguments.length?(jl=Lp,Ue):jl},Ue.response=function(Lp){return ee=Lp,Ue},["get","post"].forEach(function(Lp){Ue[Lp]=function(){return Ue.send.apply(Ue,[Lp].concat(h(arguments)))}}),Ue.send=function(Lp,n0,d0){if(arguments.length===2&&typeof n0=="function"&&(d0=n0,n0=null),_n.open(Lp,m,!0),I!=null&&!("accept"in Do)&&(Do.accept=I+",*/*"),_n.setRequestHeader)for(var B0 in Do)_n.setRequestHeader(B0,Do[B0]);return I!=null&&_n.overrideMimeType&&_n.overrideMimeType(I),jl!=null&&(_n.responseType=jl),d0!=null&&Ue.on("error",d0).on("load",function(Q0){d0(null,Q0)}),We.beforesend.call(Ue,_n),_n.send(n0??null),Ue},Ue.abort=function(){return _n.abort(),Ue},g.rebind(Ue,We,"on"),we==null?Ue:Ue.get(Lm(we))}function Lm(m){return m.length===1?function(I,ee){m(I==null?ee:null)}:m}function Em(m){var I=m.responseType;return I&&I!=="text"?m.response:m.responseText}g.dsv=function(m,I){var ee=new RegExp('["'+m+`
]`),we=m.charCodeAt(0);function Ue(Cp,Lp,n0){arguments.length<3&&(n0=Lp,Lp=null);var d0=H0(Cp,I,Lp==null?We:Do(Lp),n0);return d0.row=function(B0){return arguments.length?d0.response((Lp=B0)==null?We:Do(B0)):Lp},d0}function We(Cp){return Ue.parse(Cp.responseText)}function Do(Cp){return function(Lp){return Ue.parse(Lp.responseText,Cp)}}Ue.parse=function(Cp,Lp){var n0;return Ue.parseRows(Cp,function(d0,B0){if(n0)return n0(d0,B0-1);var Q0=function(f0){for(var z0={},I0=d0.length,J0=0;J0<I0;++J0)z0[d0[J0]]=f0[J0];return z0};n0=Lp?function(f0,z0){return Lp(Q0(f0),z0)}:Q0})},Ue.parseRows=function(Cp,Lp){var n0={},d0={},B0=[],Q0=Cp.length,f0=0,z0=0,I0,J0;function K0(){if(f0>=Q0)return d0;if(J0)return J0=!1,n0;var Km=f0;if(Cp.charCodeAt(Km)===34){for(var n=Km;n++<Q0;)if(Cp.charCodeAt(n)===34){if(Cp.charCodeAt(n+1)!==34)break;++n}f0=n+2;var i=Cp.charCodeAt(n+1);return i===13?(J0=!0,Cp.charCodeAt(n+2)===10&&++f0):i===10&&(J0=!0),Cp.slice(Km+1,n).replace(/""/g,'"')}for(;f0<Q0;){var i=Cp.charCodeAt(f0++),l=1;if(i===10)J0=!0;else if(i===13)J0=!0,Cp.charCodeAt(f0)===10&&(++f0,++l);else if(i!==we)continue;return Cp.slice(Km,f0-l)}return Cp.slice(Km)}for(;(I0=K0())!==d0;){for(var j0=[];I0!==n0&&I0!==d0;)j0.push(I0),I0=K0();Lp&&(j0=Lp(j0,z0++))==null||B0.push(j0)}return B0},Ue.format=function(Cp){if(Array.isArray(Cp[0]))return Ue.formatRows(Cp);var Lp=new ye,n0=[];return Cp.forEach(function(d0){for(var B0 in d0)Lp.has(B0)||n0.push(Lp.add(B0))}),[n0.map(jl).join(m)].concat(Cp.map(function(d0){return n0.map(function(B0){return jl(d0[B0])}).join(m)})).join(`
`)},Ue.formatRows=function(Cp){return Cp.map(_n).join(`
`)};function _n(Cp){return Cp.map(jl).join(m)}function jl(Cp){return ee.test(Cp)?'"'+Cp.replace(/\"/g,'""')+'"':Cp}return Ue},g.csv=g.dsv(",","text/csv"),g.tsv=g.dsv("	","text/tab-separated-values");var Qm,xm,zm,f1,dg=this[ce(this,"requestAnimationFrame")]||function(m){setTimeout(m,17)};g.timer=function(){E1.apply(this,arguments)};function E1(m,I,ee){var we=arguments.length;we<2&&(I=0),we<3&&(ee=Date.now());var Ue=ee+I,We={c:m,t:Ue,n:null};return xm?xm.n=We:Qm=We,xm=We,zm||(f1=clearTimeout(f1),zm=1,dg(Gg)),We}function Gg(){var m=$1(),I=$g()-m;I>24?(isFinite(I)&&(clearTimeout(f1),f1=setTimeout(Gg,I)),zm=0):(zm=1,dg(Gg))}g.timer.flush=function(){$1(),$g()};function $1(){for(var m=Date.now(),I=Qm;I;)m>=I.t&&I.c(m-I.t)&&(I.c=null),I=I.n;return m}function $g(){for(var m,I=Qm,ee=1/0;I;)I.c?(I.t<ee&&(ee=I.t),I=(m=I).n):I=m?m.n=I.n:Qm=I.n;return xm=m,ee}g.round=function(m,I){return I?Math.round(m*(I=Math.pow(10,I)))/I:Math.round(m)},g.geom={};function tg(m){return m[0]}function Og(m){return m[1]}g.geom.hull=function(m){var I=tg,ee=Og;if(arguments.length)return we(m);function we(Ue){if(Ue.length<3)return[];var We=u0(I),Do=u0(ee),_n,jl=Ue.length,Cp=[],Lp=[];for(_n=0;_n<jl;_n++)Cp.push([+We.call(this,Ue[_n],_n),+Do.call(this,Ue[_n],_n),_n]);for(Cp.sort(W1),_n=0;_n<jl;_n++)Lp.push([Cp[_n][0],-Cp[_n][1]]);var n0=qg(Cp),d0=qg(Lp),B0=d0[0]===n0[0],Q0=d0[d0.length-1]===n0[n0.length-1],f0=[];for(_n=n0.length-1;_n>=0;--_n)f0.push(Ue[Cp[n0[_n]][2]]);for(_n=+B0;_n<d0.length-Q0;++_n)f0.push(Ue[Cp[d0[_n]][2]]);return f0}return we.x=function(Ue){return arguments.length?(I=Ue,we):I},we.y=function(Ue){return arguments.length?(ee=Ue,we):ee},we};function qg(m){for(var I=m.length,ee=[0,1],we=2,Ue=2;Ue<I;Ue++){for(;we>1&&Qp(m[ee[we-2]],m[ee[we-1]],m[Ue])<=0;)--we;ee[we++]=Ue}return ee.slice(0,we)}function W1(m,I){return m[0]-I[0]||m[1]-I[1]}g.geom.polygon=function(m){return Se(m,yv),m};var yv=g.geom.polygon.prototype=[];yv.area=function(){for(var m=-1,I=this.length,ee,we=this[I-1],Ue=0;++m<I;)ee=we,we=this[m],Ue+=ee[1]*we[0]-ee[0]*we[1];return Ue*.5},yv.centroid=function(m){var I=-1,ee=this.length,we=0,Ue=0,We,Do=this[ee-1],_n;for(arguments.length||(m=-1/(6*this.area()));++I<ee;)We=Do,Do=this[I],_n=We[0]*Do[1]-Do[0]*We[1],we+=(We[0]+Do[0])*_n,Ue+=(We[1]+Do[1])*_n;return[we*m,Ue*m]},yv.clip=function(m){for(var I,ee=rv(m),we=-1,Ue=this.length-rv(this),We,Do,_n=this[Ue-1],jl,Cp,Lp;++we<Ue;){for(I=m.slice(),m.length=0,jl=this[we],Cp=I[(Do=I.length-ee)-1],We=-1;++We<Do;)Lp=I[We],iv(Lp,_n,jl)?(iv(Cp,_n,jl)||m.push(cg(Cp,Lp,_n,jl)),m.push(Lp)):iv(Cp,_n,jl)&&m.push(cg(Cp,Lp,_n,jl)),Cp=Lp;ee&&m.push(m[0]),_n=jl}return m};function iv(m,I,ee){return(ee[0]-I[0])*(m[1]-I[1])<(ee[1]-I[1])*(m[0]-I[0])}function cg(m,I,ee,we){var Ue=m[0],We=ee[0],Do=I[0]-Ue,_n=we[0]-We,jl=m[1],Cp=ee[1],Lp=I[1]-jl,n0=we[1]-Cp,d0=(_n*(jl-Cp)-n0*(Ue-We))/(n0*Do-_n*Lp);return[Ue+d0*Do,jl+d0*Lp]}function rv(m){var I=m[0],ee=m[m.length-1];return!(I[0]-ee[0]||I[1]-ee[1])}var Pg,Vg,Ov,xv=[],_g,Ig,Tg=[];function Ug(){nv(this),this.edge=this.site=this.circle=null}function wv(m){var I=xv.pop()||new Ug;return I.site=m,I}function Dv(m){Yv(m),Ov.remove(m),xv.push(m),nv(m)}function gv(m){var I=m.circle,ee=I.x,we=I.cy,Ue={x:ee,y:we},We=m.P,Do=m.N,_n=[m];Dv(m);for(var jl=We;jl.circle&&w(ee-jl.circle.x)<Tp&&w(we-jl.circle.cy)<Tp;)We=jl.P,_n.unshift(jl),Dv(jl),jl=We;_n.unshift(jl),Yv(jl);for(var Cp=Do;Cp.circle&&w(ee-Cp.circle.x)<Tp&&w(we-Cp.circle.cy)<Tp;)Do=Cp.N,_n.push(Cp),Dv(Cp),Cp=Do;_n.push(Cp),Yv(Cp);var Lp=_n.length,n0;for(n0=1;n0<Lp;++n0)Cp=_n[n0],jl=_n[n0-1],sg(Cp.edge,jl.site,Cp.site,Ue);jl=_n[0],Cp=_n[Lp-1],Cp.edge=Yg(jl.site,Cp.site,null,Ue),$v(jl),$v(Cp)}function Pv(m){for(var I=m.x,ee=m.y,we,Ue,We,Do,_n=Ov._;_n;)if(We=Bv(_n,ee)-I,We>Tp)_n=_n.L;else if(Do=I-Tv(_n,ee),Do>Tp){if(!_n.R){we=_n;break}_n=_n.R}else{We>-Tp?(we=_n.P,Ue=_n):Do>-Tp?(we=_n,Ue=_n.N):we=Ue=_n;break}var jl=wv(m);if(Ov.insert(we,jl),!(!we&&!Ue)){if(we===Ue){Yv(we),Ue=wv(we.site),Ov.insert(jl,Ue),jl.edge=Ue.edge=Yg(we.site,jl.site),$v(we),$v(Ue);return}if(!Ue){jl.edge=Yg(we.site,jl.site);return}Yv(we),Yv(Ue);var Cp=we.site,Lp=Cp.x,n0=Cp.y,d0=m.x-Lp,B0=m.y-n0,Q0=Ue.site,f0=Q0.x-Lp,z0=Q0.y-n0,I0=2*(d0*z0-B0*f0),J0=d0*d0+B0*B0,K0=f0*f0+z0*z0,j0={x:(z0*J0-B0*K0)/I0+Lp,y:(d0*K0-f0*J0)/I0+n0};sg(Ue.edge,Cp,Q0,j0),jl.edge=Yg(Cp,m,null,j0),Ue.edge=Yg(m,Q0,null,j0),$v(we),$v(Ue)}}function Bv(m,I){var ee=m.site,we=ee.x,Ue=ee.y,We=Ue-I;if(!We)return we;var Do=m.P;if(!Do)return-1/0;ee=Do.site;var _n=ee.x,jl=ee.y,Cp=jl-I;if(!Cp)return _n;var Lp=_n-we,n0=1/We-1/Cp,d0=Lp/Cp;return n0?(-d0+Math.sqrt(d0*d0-2*n0*(Lp*Lp/(-2*Cp)-jl+Cp/2+Ue-We/2)))/n0+we:(we+_n)/2}function Tv(m,I){var ee=m.N;if(ee)return Bv(ee,I);var we=m.site;return we.y===I?we.x:1/0}function Fg(m){this.site=m,this.edges=[]}Fg.prototype.prepare=function(){for(var m=this.edges,I=m.length,ee;I--;)ee=m[I].edge,(!ee.b||!ee.a)&&m.splice(I,1);return m.sort(qv),m.length};function sy(m){for(var I=m[0][0],ee=m[1][0],we=m[0][1],Ue=m[1][1],We,Do,_n,jl,Cp=Vg,Lp=Cp.length,n0,d0,B0,Q0,f0,z0;Lp--;)if(n0=Cp[Lp],!(!n0||!n0.prepare()))for(B0=n0.edges,Q0=B0.length,d0=0;d0<Q0;)z0=B0[d0].end(),_n=z0.x,jl=z0.y,f0=B0[++d0%Q0].start(),We=f0.x,Do=f0.y,(w(_n-We)>Tp||w(jl-Do)>Tp)&&(B0.splice(d0,0,new fg(og(n0.site,z0,w(_n-I)<Tp&&Ue-jl>Tp?{x:I,y:w(We-I)<Tp?Do:Ue}:w(jl-Ue)<Tp&&ee-_n>Tp?{x:w(Do-Ue)<Tp?We:ee,y:Ue}:w(_n-ee)<Tp&&jl-we>Tp?{x:ee,y:w(We-ee)<Tp?Do:we}:w(jl-we)<Tp&&_n-I>Tp?{x:w(Do-we)<Tp?We:I,y:we}:null),n0.site,null)),++Q0)}function qv(m,I){return I.angle-m.angle}function uy(){nv(this),this.x=this.y=this.arc=this.site=this.cy=null}function $v(m){var I=m.P,ee=m.N;if(!(!I||!ee)){var we=I.site,Ue=m.site,We=ee.site;if(we!==We){var Do=Ue.x,_n=Ue.y,jl=we.x-Do,Cp=we.y-_n,Lp=We.x-Do,n0=We.y-_n,d0=2*(jl*n0-Cp*Lp);if(!(d0>=-Be)){var B0=jl*jl+Cp*Cp,Q0=Lp*Lp+n0*n0,f0=(n0*B0-Cp*Q0)/d0,z0=(jl*Q0-Lp*B0)/d0,n0=z0+_n,I0=Tg.pop()||new uy;I0.arc=m,I0.site=Ue,I0.x=f0+Do,I0.y=n0+Math.sqrt(f0*f0+z0*z0),I0.cy=n0,m.circle=I0;for(var J0=null,K0=Ig._;K0;)if(I0.y<K0.y||I0.y===K0.y&&I0.x<=K0.x)if(K0.L)K0=K0.L;else{J0=K0.P;break}else if(K0.R)K0=K0.R;else{J0=K0;break}Ig.insert(J0,I0),J0||(_g=I0)}}}}function Yv(m){var I=m.circle;I&&(I.P||(_g=I.N),Ig.remove(I),Tg.push(I),nv(I),m.circle=null)}function by(m,I,ee,we){return function(Ue){var We=Ue.a,Do=Ue.b,_n=We.x,jl=We.y,Cp=Do.x,Lp=Do.y,n0=0,d0=1,B0=Cp-_n,Q0=Lp-jl,f0;if(f0=m-_n,!(!B0&&f0>0)){if(f0/=B0,B0<0){if(f0<n0)return;f0<d0&&(d0=f0)}else if(B0>0){if(f0>d0)return;f0>n0&&(n0=f0)}if(f0=ee-_n,!(!B0&&f0<0)){if(f0/=B0,B0<0){if(f0>d0)return;f0>n0&&(n0=f0)}else if(B0>0){if(f0<n0)return;f0<d0&&(d0=f0)}if(f0=I-jl,!(!Q0&&f0>0)){if(f0/=Q0,Q0<0){if(f0<n0)return;f0<d0&&(d0=f0)}else if(Q0>0){if(f0>d0)return;f0>n0&&(n0=f0)}if(f0=we-jl,!(!Q0&&f0<0)){if(f0/=Q0,Q0<0){if(f0>d0)return;f0>n0&&(n0=f0)}else if(Q0>0){if(f0<n0)return;f0<d0&&(d0=f0)}return n0>0&&(Ue.a={x:_n+n0*B0,y:jl+n0*Q0}),d0<1&&(Ue.b={x:_n+d0*B0,y:jl+d0*Q0}),Ue}}}}}}function gy(m){for(var I=Pg,ee=by(m[0][0],m[0][1],m[1][0],m[1][1]),we=I.length,Ue;we--;)Ue=I[we],(!ny(Ue,m)||!ee(Ue)||w(Ue.a.x-Ue.b.x)<Tp&&w(Ue.a.y-Ue.b.y)<Tp)&&(Ue.a=Ue.b=null,I.splice(we,1))}function ny(m,I){var ee=m.b;if(ee)return!0;var we=m.a,Ue=I[0][0],We=I[1][0],Do=I[0][1],_n=I[1][1],jl=m.l,Cp=m.r,Lp=jl.x,n0=jl.y,d0=Cp.x,B0=Cp.y,Q0=(Lp+d0)/2,f0=(n0+B0)/2,z0,I0;if(B0===n0){if(Q0<Ue||Q0>=We)return;if(Lp>d0){if(!we)we={x:Q0,y:Do};else if(we.y>=_n)return;ee={x:Q0,y:_n}}else{if(!we)we={x:Q0,y:_n};else if(we.y<Do)return;ee={x:Q0,y:Do}}}else if(z0=(Lp-d0)/(B0-n0),I0=f0-z0*Q0,z0<-1||z0>1)if(Lp>d0){if(!we)we={x:(Do-I0)/z0,y:Do};else if(we.y>=_n)return;ee={x:(_n-I0)/z0,y:_n}}else{if(!we)we={x:(_n-I0)/z0,y:_n};else if(we.y<Do)return;ee={x:(Do-I0)/z0,y:Do}}else if(n0<B0){if(!we)we={x:Ue,y:z0*Ue+I0};else if(we.x>=We)return;ee={x:We,y:z0*We+I0}}else{if(!we)we={x:We,y:z0*We+I0};else if(we.x<Ue)return;ee={x:Ue,y:z0*Ue+I0}}return m.a=we,m.b=ee,!0}function Ty(m,I){this.l=m,this.r=I,this.a=this.b=null}function Yg(m,I,ee,we){var Ue=new Ty(m,I);return Pg.push(Ue),ee&&sg(Ue,m,I,ee),we&&sg(Ue,I,m,we),Vg[m.i].edges.push(new fg(Ue,m,I)),Vg[I.i].edges.push(new fg(Ue,I,m)),Ue}function og(m,I,ee){var we=new Ty(m,null);return we.a=I,we.b=ee,Pg.push(we),we}function sg(m,I,ee,we){!m.a&&!m.b?(m.a=we,m.l=I,m.r=ee):m.l===ee?m.b=we:m.a=we}function fg(m,I,ee){var we=m.a,Ue=m.b;this.edge=m,this.site=I,this.angle=ee?Math.atan2(ee.y-I.y,ee.x-I.x):m.l===I?Math.atan2(Ue.x-we.x,we.y-Ue.y):Math.atan2(we.x-Ue.x,Ue.y-we.y)}fg.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Bg(){this._=null}function nv(m){m.U=m.C=m.L=m.R=m.P=m.N=null}Bg.prototype={insert:function(m,I){var ee,we,Ue;if(m){if(I.P=m,I.N=m.N,m.N&&(m.N.P=I),m.N=I,m.R){for(m=m.R;m.L;)m=m.L;m.L=I}else m.R=I;ee=m}else this._?(m=Qy(this._),I.P=null,I.N=m,m.P=m.L=I,ee=m):(I.P=I.N=null,this._=I,ee=null);for(I.L=I.R=null,I.U=ee,I.C=!0,m=I;ee&&ee.C;)we=ee.U,ee===we.L?(Ue=we.R,Ue&&Ue.C?(ee.C=Ue.C=!1,we.C=!0,m=we):(m===ee.R&&(Xg(this,ee),m=ee,ee=m.U),ee.C=!1,we.C=!0,ty(this,we))):(Ue=we.L,Ue&&Ue.C?(ee.C=Ue.C=!1,we.C=!0,m=we):(m===ee.L&&(ty(this,ee),m=ee,ee=m.U),ee.C=!1,we.C=!0,Xg(this,we))),ee=m.U;this._.C=!1},remove:function(m){m.N&&(m.N.P=m.P),m.P&&(m.P.N=m.N),m.N=m.P=null;var I=m.U,ee,we=m.L,Ue=m.R,We,Do;if(we?Ue?We=Qy(Ue):We=we:We=Ue,I?I.L===m?I.L=We:I.R=We:this._=We,we&&Ue?(Do=We.C,We.C=m.C,We.L=we,we.U=We,We!==Ue?(I=We.U,We.U=m.U,m=We.R,I.L=m,We.R=Ue,Ue.U=We):(We.U=I,I=We,m=We.R)):(Do=m.C,m=We),m&&(m.U=I),!Do){if(m&&m.C){m.C=!1;return}do{if(m===this._)break;if(m===I.L){if(ee=I.R,ee.C&&(ee.C=!1,I.C=!0,Xg(this,I),ee=I.R),ee.L&&ee.L.C||ee.R&&ee.R.C){(!ee.R||!ee.R.C)&&(ee.L.C=!1,ee.C=!0,ty(this,ee),ee=I.R),ee.C=I.C,I.C=ee.R.C=!1,Xg(this,I),m=this._;break}}else if(ee=I.L,ee.C&&(ee.C=!1,I.C=!0,ty(this,I),ee=I.L),ee.L&&ee.L.C||ee.R&&ee.R.C){(!ee.L||!ee.L.C)&&(ee.R.C=!1,ee.C=!0,Xg(this,ee),ee=I.L),ee.C=I.C,I.C=ee.L.C=!1,ty(this,I),m=this._;break}ee.C=!0,m=I,I=I.U}while(!m.C);m&&(m.C=!1)}}};function Xg(m,I){var ee=I,we=I.R,Ue=ee.U;Ue?Ue.L===ee?Ue.L=we:Ue.R=we:m._=we,we.U=Ue,ee.U=we,ee.R=we.L,ee.R&&(ee.R.U=ee),we.L=ee}function ty(m,I){var ee=I,we=I.L,Ue=ee.U;Ue?Ue.L===ee?Ue.L=we:Ue.R=we:m._=we,we.U=Ue,ee.U=we,ee.L=we.R,ee.L&&(ee.L.U=ee),we.R=ee}function Qy(m){for(;m.L;)m=m.L;return m}function vy(m,I){var ee=m.sort(jv).pop(),we,Ue,We;for(Pg=[],Vg=new Array(m.length),Ov=new Bg,Ig=new Bg;;)if(We=_g,ee&&(!We||ee.y<We.y||ee.y===We.y&&ee.x<We.x))(ee.x!==we||ee.y!==Ue)&&(Vg[ee.i]=new Fg(ee),Pv(ee),we=ee.x,Ue=ee.y),ee=m.pop();else if(We)gv(We.arc);else break;I&&(gy(I),sy(I));var Do={cells:Vg,edges:Pg};return Ov=Ig=Pg=Vg=null,Do}function jv(m,I){return I.y-m.y||I.x-m.x}g.geom.voronoi=function(m){var I=tg,ee=Og,we=I,Ue=ee,We=wy;if(m)return Do(m);function Do(jl){var Cp=new Array(jl.length),Lp=We[0][0],n0=We[0][1],d0=We[1][0],B0=We[1][1];return vy(_n(jl),We).cells.forEach(function(Q0,f0){var z0=Q0.edges,I0=Q0.site,J0=Cp[f0]=z0.length?z0.map(function(K0){var j0=K0.start();return[j0.x,j0.y]}):I0.x>=Lp&&I0.x<=d0&&I0.y>=n0&&I0.y<=B0?[[Lp,B0],[d0,B0],[d0,n0],[Lp,n0]]:[];J0.point=jl[f0]}),Cp}function _n(jl){return jl.map(function(Cp,Lp){return{x:Math.round(we(Cp,Lp)/Tp)*Tp,y:Math.round(Ue(Cp,Lp)/Tp)*Tp,i:Lp}})}return Do.links=function(jl){return vy(_n(jl)).edges.filter(function(Cp){return Cp.l&&Cp.r}).map(function(Cp){return{source:jl[Cp.l.i],target:jl[Cp.r.i]}})},Do.triangles=function(jl){var Cp=[];return vy(_n(jl)).cells.forEach(function(Lp,n0){for(var d0=Lp.site,B0=Lp.edges.sort(qv),Q0=-1,f0=B0.length,z0,I0,J0=B0[f0-1].edge,K0=J0.l===d0?J0.r:J0.l;++Q0<f0;)z0=J0,I0=K0,J0=B0[Q0].edge,K0=J0.l===d0?J0.r:J0.l,n0<I0.i&&n0<K0.i&&ex(d0,I0,K0)<0&&Cp.push([jl[n0],jl[I0.i],jl[K0.i]])}),Cp},Do.x=function(jl){return arguments.length?(we=u0(I=jl),Do):I},Do.y=function(jl){return arguments.length?(Ue=u0(ee=jl),Do):ee},Do.clipExtent=function(jl){return arguments.length?(We=jl??wy,Do):We===wy?null:We},Do.size=function(jl){return arguments.length?Do.clipExtent(jl&&[[0,0],jl]):We===wy?null:We&&We[1]},Do};var wy=[[-1e6,-1e6],[1e6,1e6]];function ex(m,I,ee){return(m.x-ee.x)*(I.y-m.y)-(m.x-I.x)*(ee.y-m.y)}g.geom.delaunay=function(m){return g.geom.voronoi().triangles(m)},g.geom.quadtree=function(m,I,ee,we,Ue){var We=tg,Do=Og,_n;if(_n=arguments.length)return We=f2,Do=My,_n===3&&(Ue=ee,we=I,ee=I=0),jl(m);function jl(Cp){var Lp,n0=u0(We),d0=u0(Do),B0,Q0,f0,z0,I0,J0,K0,j0;if(I!=null)I0=I,J0=ee,K0=we,j0=Ue;else if(K0=j0=-(I0=J0=1/0),B0=[],Q0=[],z0=Cp.length,_n)for(f0=0;f0<z0;++f0)Lp=Cp[f0],Lp.x<I0&&(I0=Lp.x),Lp.y<J0&&(J0=Lp.y),Lp.x>K0&&(K0=Lp.x),Lp.y>j0&&(j0=Lp.y),B0.push(Lp.x),Q0.push(Lp.y);else for(f0=0;f0<z0;++f0){var Km=+n0(Lp=Cp[f0],f0),n=+d0(Lp,f0);Km<I0&&(I0=Km),n<J0&&(J0=n),Km>K0&&(K0=Km),n>j0&&(j0=n),B0.push(Km),Q0.push(n)}var i=K0-I0,l=j0-J0;i>l?j0=J0+i:K0=I0+l;function E(Io,Rp,L0,hm,Am,X0,em,cm){if(!(isNaN(L0)||isNaN(hm)))if(Io.leaf){var L1=Io.x,Y1=Io.y;if(L1!=null)if(w(L1-L0)+w(Y1-hm)<.01)te(Io,Rp,L0,hm,Am,X0,em,cm);else{var Rg=Io.point;Io.x=Io.y=Io.point=null,te(Io,Rg,L1,Y1,Am,X0,em,cm),te(Io,Rp,L0,hm,Am,X0,em,cm)}else Io.x=L0,Io.y=hm,Io.point=Rp}else te(Io,Rp,L0,hm,Am,X0,em,cm)}function te(Io,Rp,L0,hm,Am,X0,em,cm){var L1=(Am+em)*.5,Y1=(X0+cm)*.5,Rg=L0>=L1,nm=hm>=Y1,Y0=nm<<1|Rg;Io.leaf=!1,Io=Io.nodes[Y0]||(Io.nodes[Y0]=tx()),Rg?Am=L1:em=L1,nm?X0=Y1:cm=Y1,E(Io,Rp,L0,hm,Am,X0,em,cm)}var Me=tx();if(Me.add=function(Io){E(Me,Io,+n0(Io,++f0),+d0(Io,f0),I0,J0,K0,j0)},Me.visit=function(Io){qy(Io,Me,I0,J0,K0,j0)},Me.find=function(Io){return Ry(Me,Io[0],Io[1],I0,J0,K0,j0)},f0=-1,I==null){for(;++f0<z0;)E(Me,Cp[f0],B0[f0],Q0[f0],I0,J0,K0,j0);--f0}else Cp.forEach(Me.add);return B0=Q0=Cp=Lp=null,Me}return jl.x=function(Cp){return arguments.length?(We=Cp,jl):We},jl.y=function(Cp){return arguments.length?(Do=Cp,jl):Do},jl.extent=function(Cp){return arguments.length?(Cp==null?I=ee=we=Ue=null:(I=+Cp[0][0],ee=+Cp[0][1],we=+Cp[1][0],Ue=+Cp[1][1]),jl):I==null?null:[[I,ee],[we,Ue]]},jl.size=function(Cp){return arguments.length?(Cp==null?I=ee=we=Ue=null:(I=ee=0,we=+Cp[0],Ue=+Cp[1]),jl):I==null?null:[we-I,Ue-ee]},jl};function f2(m){return m.x}function My(m){return m.y}function tx(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function qy(m,I,ee,we,Ue,We){if(!m(I,ee,we,Ue,We)){var Do=(ee+Ue)*.5,_n=(we+We)*.5,jl=I.nodes;jl[0]&&qy(m,jl[0],ee,we,Do,_n),jl[1]&&qy(m,jl[1],Do,we,Ue,_n),jl[2]&&qy(m,jl[2],ee,_n,Do,We),jl[3]&&qy(m,jl[3],Do,_n,Ue,We)}}function Ry(m,I,ee,we,Ue,We,Do){var _n=1/0,jl;return(function Cp(Lp,n0,d0,B0,Q0){if(!(n0>We||d0>Do||B0<we||Q0<Ue)){if(f0=Lp.point){var f0,z0=I-Lp.x,I0=ee-Lp.y,J0=z0*z0+I0*I0;if(J0<_n){var K0=Math.sqrt(_n=J0);we=I-K0,Ue=ee-K0,We=I+K0,Do=ee+K0,jl=f0}}for(var j0=Lp.nodes,Km=(n0+B0)*.5,n=(d0+Q0)*.5,i=I>=Km,l=ee>=n,E=l<<1|i,te=E+4;E<te;++E)if(Lp=j0[E&3])switch(E&3){case 0:Cp(Lp,n0,d0,Km,n);break;case 1:Cp(Lp,Km,d0,B0,n);break;case 2:Cp(Lp,n0,n,Km,Q0);break;case 3:Cp(Lp,Km,n,B0,Q0);break}}})(m,we,Ue,We,Do),jl}g.interpolateRgb=q2;function q2(m,I){m=g.rgb(m),I=g.rgb(I);var ee=m.r,we=m.g,Ue=m.b,We=I.r-ee,Do=I.g-we,_n=I.b-Ue;return function(jl){return"#"+Mp(Math.round(ee+We*jl))+Mp(Math.round(we+Do*jl))+Mp(Math.round(Ue+_n*jl))}}g.interpolateObject=$2;function $2(m,I){var ee={},we={},Ue;for(Ue in m)Ue in I?ee[Ue]=Wv(m[Ue],I[Ue]):we[Ue]=m[Ue];for(Ue in I)Ue in m||(we[Ue]=I[Ue]);return function(We){for(Ue in ee)we[Ue]=ee[Ue](We);return we}}g.interpolateNumber=rx;function rx(m,I){return m=+m,I=+I,function(ee){return m*(1-ee)+I*ee}}g.interpolateString=Y2;function Y2(m,I){var ee=p2.lastIndex=nx.lastIndex=0,we,Ue,We,Do=-1,_n=[],jl=[];for(m=m+"",I=I+"";(we=p2.exec(m))&&(Ue=nx.exec(I));)(We=Ue.index)>ee&&(We=I.slice(ee,We),_n[Do]?_n[Do]+=We:_n[++Do]=We),(we=we[0])===(Ue=Ue[0])?_n[Do]?_n[Do]+=Ue:_n[++Do]=Ue:(_n[++Do]=null,jl.push({i:Do,x:rx(we,Ue)})),ee=nx.lastIndex;return ee<I.length&&(We=I.slice(ee),_n[Do]?_n[Do]+=We:_n[++Do]=We),_n.length<2?jl[0]?(I=jl[0].x,function(Cp){return I(Cp)+""}):function(){return I}:(I=jl.length,function(Cp){for(var Lp=0,n0;Lp<I;++Lp)_n[(n0=jl[Lp]).i]=n0.x(Cp);return _n.join("")})}var p2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nx=new RegExp(p2.source,"g");g.interpolate=Wv;function Wv(m,I){for(var ee=g.interpolators.length,we;--ee>=0&&!(we=g.interpolators[ee](m,I)););return we}g.interpolators=[function(m,I){var ee=typeof I;return(ee==="string"?Fp.has(I.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(I)?q2:Y2:I instanceof Bm?q2:Array.isArray(I)?Zy:ee==="object"&&isNaN(I)?$2:rx)(m,I)}],g.interpolateArray=Zy;function Zy(m,I){var ee=[],we=[],Ue=m.length,We=I.length,Do=Math.min(m.length,I.length),_n;for(_n=0;_n<Do;++_n)ee.push(Wv(m[_n],I[_n]));for(;_n<Ue;++_n)we[_n]=m[_n];for(;_n<We;++_n)we[_n]=I[_n];return function(jl){for(_n=0;_n<Do;++_n)we[_n]=ee[_n](jl);return we}}var Jx=function(){return Ae},px=g.map({linear:Jx,poly:Ly,quad:function(){return Bb},cubic:function(){return zy},sin:function(){return Y3},exp:function(){return W3},circle:function(){return $5},elastic:Cx,back:D_,bounce:function(){return jb}}),Ib=g.map({in:Ae,out:Fb,"in-out":m2,"out-in":function(m){return m2(Fb(m))}});g.ease=function(m){var I=m.indexOf("-"),ee=I>=0?m.slice(0,I):m,we=I>=0?m.slice(I+1):"in";return ee=px.get(ee)||Jx,we=Ib.get(we)||Ae,Ub(we(ee.apply(null,s.call(arguments,1))))};function Ub(m){return function(I){return I<=0?0:I>=1?1:m(I)}}function Fb(m){return function(I){return 1-m(1-I)}}function m2(m){return function(I){return .5*(I<.5?m(2*I):2-m(2-2*I))}}function Bb(m){return m*m}function zy(m){return m*m*m}function $3(m){if(m<=0)return 0;if(m>=1)return 1;var I=m*m,ee=I*m;return 4*(m<.5?ee:3*(m-I)+ee-.75)}function Ly(m){return function(I){return Math.pow(I,m)}}function Y3(m){return 1-Math.cos(m*Vl)}function W3(m){return Math.pow(2,10*(m-1))}function $5(m){return 1-Math.sqrt(1-m*m)}function Cx(m,I){var ee;return arguments.length<2&&(I=.45),arguments.length?ee=I/mn*Math.asin(1/m):(m=1,ee=I/4),function(we){return 1+m*Math.pow(2,-10*we)*Math.sin((we-ee)*mn/I)}}function D_(m){return m||(m=1.70158),function(I){return I*I*((m+1)*I-m)}}function jb(m){return m<1/2.75?7.5625*m*m:m<2/2.75?7.5625*(m-=1.5/2.75)*m+.75:m<2.5/2.75?7.5625*(m-=2.25/2.75)*m+.9375:7.5625*(m-=2.625/2.75)*m+.984375}g.interpolateHcl=g2;function g2(m,I){m=g.hcl(m),I=g.hcl(I);var ee=m.h,we=m.c,Ue=m.l,We=I.h-ee,Do=I.c-we,_n=I.l-Ue;return isNaN(Do)&&(Do=0,we=isNaN(we)?I.c:we),isNaN(We)?(We=0,ee=isNaN(ee)?I.h:ee):We>180?We-=360:We<-180&&(We+=360),function(jl){return t1(ee+We*jl,we+Do*jl,Ue+_n*jl)+""}}g.interpolateHsl=X3;function X3(m,I){m=g.hsl(m),I=g.hsl(I);var ee=m.h,we=m.s,Ue=m.l,We=I.h-ee,Do=I.s-we,_n=I.l-Ue;return isNaN(Do)&&(Do=0,we=isNaN(we)?I.s:we),isNaN(We)?(We=0,ee=isNaN(ee)?I.h:ee):We>180?We-=360:We<-180&&(We+=360),function(jl){return y1(ee+We*jl,we+Do*jl,Ue+_n*jl)+""}}g.interpolateLab=Z3;function Z3(m,I){m=g.lab(m),I=g.lab(I);var ee=m.l,we=m.a,Ue=m.b,We=I.l-ee,Do=I.a-we,_n=I.b-Ue;return function(jl){return ig(ee+We*jl,we+Do*jl,Ue+_n*jl)+""}}g.interpolateRound=Hb;function Hb(m,I){return I-=m,function(ee){return Math.round(m+I*ee)}}g.transform=function(m){var I=x.createElementNS(g.ns.prefix.svg,"g");return(g.transform=function(ee){if(ee!=null){I.setAttribute("transform",ee);var we=I.transform.baseVal.consolidate()}return new Gb(we?we.matrix:W5)})(m)};function Gb(m){var I=[m.a,m.b],ee=[m.c,m.d],we=k_(I),Ue=W2(I,ee),We=k_(Y5(ee,I,-Ue))||0;I[0]*ee[1]<ee[0]*I[1]&&(I[0]*=-1,I[1]*=-1,we*=-1,Ue*=-1),this.rotate=(we?Math.atan2(I[1],I[0]):Math.atan2(-ee[0],ee[1]))*Up,this.translate=[m.e,m.f],this.scale=[we,We],this.skew=We?Math.atan2(Ue,We)*Up:0}Gb.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function W2(m,I){return m[0]*I[0]+m[1]*I[1]}function k_(m){var I=Math.sqrt(W2(m,m));return I&&(m[0]/=I,m[1]/=I),I}function Y5(m,I,ee){return m[0]+=ee*I[0],m[1]+=ee*I[1],m}var W5={a:1,b:0,c:0,d:1,e:0,f:0};g.interpolateTransform=Vb;function v2(m){return m.length?m.pop()+",":""}function J3(m,I,ee,we){if(m[0]!==I[0]||m[1]!==I[1]){var Ue=ee.push("translate(",null,",",null,")");we.push({i:Ue-4,x:rx(m[0],I[0])},{i:Ue-2,x:rx(m[1],I[1])})}else(I[0]||I[1])&&ee.push("translate("+I+")")}function K3(m,I,ee,we){m!==I?(m-I>180?I+=360:I-m>180&&(m+=360),we.push({i:ee.push(v2(ee)+"rotate(",null,")")-2,x:rx(m,I)})):I&&ee.push(v2(ee)+"rotate("+I+")")}function y2(m,I,ee,we){m!==I?we.push({i:ee.push(v2(ee)+"skewX(",null,")")-2,x:rx(m,I)}):I&&ee.push(v2(ee)+"skewX("+I+")")}function N_(m,I,ee,we){if(m[0]!==I[0]||m[1]!==I[1]){var Ue=ee.push(v2(ee)+"scale(",null,",",null,")");we.push({i:Ue-4,x:rx(m[0],I[0])},{i:Ue-2,x:rx(m[1],I[1])})}else(I[0]!==1||I[1]!==1)&&ee.push(v2(ee)+"scale("+I+")")}function Vb(m,I){var ee=[],we=[];return m=g.transform(m),I=g.transform(I),J3(m.translate,I.translate,ee,we),K3(m.rotate,I.rotate,ee,we),y2(m.skew,I.skew,ee,we),N_(m.scale,I.scale,ee,we),m=I=null,function(Ue){for(var We=-1,Do=we.length,_n;++We<Do;)ee[(_n=we[We]).i]=_n.x(Ue);return ee.join("")}}function Q3(m,I){return I=(I-=m=+m)||1/I,function(ee){return(ee-m)/I}}function e5(m,I){return I=(I-=m=+m)||1/I,function(ee){return Math.max(0,Math.min(1,(ee-m)/I))}}g.layout={},g.layout.bundle=function(){return function(m){for(var I=[],ee=-1,we=m.length;++ee<we;)I.push(t5(m[ee]));return I}};function t5(m){for(var I=m.source,ee=m.target,we=r5(I,ee),Ue=[I];I!==we;)I=I.parent,Ue.push(I);for(var We=Ue.length;ee!==we;)Ue.splice(We,0,ee),ee=ee.parent;return Ue}function qb(m){for(var I=[],ee=m.parent;ee!=null;)I.push(m),m=ee,ee=ee.parent;return I.push(m),I}function r5(m,I){if(m===I)return m;for(var ee=qb(m),we=qb(I),Ue=ee.pop(),We=we.pop(),Do=null;Ue===We;)Do=Ue,Ue=ee.pop(),We=we.pop();return Do}g.layout.chord=function(){var m={},I,ee,we,Ue,We=0,Do,_n,jl;function Cp(){var n0={},d0=[],B0=g.range(Ue),Q0=[],f0,z0,I0,J0,K0;for(I=[],ee=[],f0=0,J0=-1;++J0<Ue;){for(z0=0,K0=-1;++K0<Ue;)z0+=we[J0][K0];d0.push(z0),Q0.push(g.range(Ue)),f0+=z0}for(Do&&B0.sort(function(Me,Io){return Do(d0[Me],d0[Io])}),_n&&Q0.forEach(function(Me,Io){Me.sort(function(Rp,L0){return _n(we[Io][Rp],we[Io][L0])})}),f0=(mn-We*Ue)/f0,z0=0,J0=-1;++J0<Ue;){for(I0=z0,K0=-1;++K0<Ue;){var j0=B0[J0],Km=Q0[j0][K0],n=we[j0][Km],i=z0,l=z0+=n*f0;n0[j0+"-"+Km]={index:j0,subindex:Km,startAngle:i,endAngle:l,value:n}}ee[j0]={index:j0,startAngle:I0,endAngle:z0,value:d0[j0]},z0+=We}for(J0=-1;++J0<Ue;)for(K0=J0-1;++K0<Ue;){var E=n0[J0+"-"+K0],te=n0[K0+"-"+J0];(E.value||te.value)&&I.push(E.value<te.value?{source:te,target:E}:{source:E,target:te})}jl&&Lp()}function Lp(){I.sort(function(n0,d0){return jl((n0.source.value+n0.target.value)/2,(d0.source.value+d0.target.value)/2)})}return m.matrix=function(n0){return arguments.length?(Ue=(we=n0)&&we.length,I=ee=null,m):we},m.padding=function(n0){return arguments.length?(We=n0,I=ee=null,m):We},m.sortGroups=function(n0){return arguments.length?(Do=n0,I=ee=null,m):Do},m.sortSubgroups=function(n0){return arguments.length?(_n=n0,I=null,m):_n},m.sortChords=function(n0){return arguments.length?(jl=n0,I&&Lp(),m):jl},m.chords=function(){return I||Cp(),I},m.groups=function(){return ee||Cp(),ee},m},g.layout.force=function(){var m={},I=g.dispatch("start","tick","end"),ee,we=[1,1],Ue,We,Do=.9,_n=X5,jl=i5,Cp=-30,Lp=Z5,n0=.1,d0=.64,B0=[],Q0=[],f0,z0,I0;function J0(j0){return function(Km,n,i,l){if(Km.point!==j0){var E=Km.cx-j0.x,te=Km.cy-j0.y,Me=l-n,Io=E*E+te*te;if(Me*Me/d0<Io){if(Io<Lp){var Rp=Km.charge/Io;j0.px-=E*Rp,j0.py-=te*Rp}return!0}if(Km.point&&Io&&Io<Lp){var Rp=Km.pointCharge/Io;j0.px-=E*Rp,j0.py-=te*Rp}}return!Km.charge}}m.tick=function(){if((We*=.99)<.005)return ee=null,I.end({type:"end",alpha:We=0}),!0;var j0=B0.length,Km=Q0.length,n,i,l,E,te,Me,Io,Rp,L0;for(i=0;i<Km;++i)l=Q0[i],E=l.source,te=l.target,Rp=te.x-E.x,L0=te.y-E.y,(Me=Rp*Rp+L0*L0)&&(Me=We*z0[i]*((Me=Math.sqrt(Me))-f0[i])/Me,Rp*=Me,L0*=Me,te.x-=Rp*(Io=E.weight+te.weight?E.weight/(E.weight+te.weight):.5),te.y-=L0*Io,E.x+=Rp*(Io=1-Io),E.y+=L0*Io);if((Io=We*n0)&&(Rp=we[0]/2,L0=we[1]/2,i=-1,Io))for(;++i<j0;)l=B0[i],l.x+=(Rp-l.x)*Io,l.y+=(L0-l.y)*Io;if(Cp)for(O_(n=g.geom.quadtree(B0),We,I0),i=-1;++i<j0;)(l=B0[i]).fixed||n.visit(J0(l));for(i=-1;++i<j0;)l=B0[i],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*Do,l.y-=(l.py-(l.py=l.y))*Do);I.tick({type:"tick",alpha:We})},m.nodes=function(j0){return arguments.length?(B0=j0,m):B0},m.links=function(j0){return arguments.length?(Q0=j0,m):Q0},m.size=function(j0){return arguments.length?(we=j0,m):we},m.linkDistance=function(j0){return arguments.length?(_n=typeof j0=="function"?j0:+j0,m):_n},m.distance=m.linkDistance,m.linkStrength=function(j0){return arguments.length?(jl=typeof j0=="function"?j0:+j0,m):jl},m.friction=function(j0){return arguments.length?(Do=+j0,m):Do},m.charge=function(j0){return arguments.length?(Cp=typeof j0=="function"?j0:+j0,m):Cp},m.chargeDistance=function(j0){return arguments.length?(Lp=j0*j0,m):Math.sqrt(Lp)},m.gravity=function(j0){return arguments.length?(n0=+j0,m):n0},m.theta=function(j0){return arguments.length?(d0=j0*j0,m):Math.sqrt(d0)},m.alpha=function(j0){return arguments.length?(j0=+j0,We?j0>0?We=j0:(ee.c=null,ee.t=NaN,ee=null,I.end({type:"end",alpha:We=0})):j0>0&&(I.start({type:"start",alpha:We=j0}),ee=E1(m.tick)),m):We},m.start=function(){var j0,Km=B0.length,n=Q0.length,i=we[0],l=we[1],E,te;for(j0=0;j0<Km;++j0)(te=B0[j0]).index=j0,te.weight=0;for(j0=0;j0<n;++j0)te=Q0[j0],typeof te.source=="number"&&(te.source=B0[te.source]),typeof te.target=="number"&&(te.target=B0[te.target]),++te.source.weight,++te.target.weight;for(j0=0;j0<Km;++j0)te=B0[j0],isNaN(te.x)&&(te.x=Me("x",i)),isNaN(te.y)&&(te.y=Me("y",l)),isNaN(te.px)&&(te.px=te.x),isNaN(te.py)&&(te.py=te.y);if(f0=[],typeof _n=="function")for(j0=0;j0<n;++j0)f0[j0]=+_n.call(this,Q0[j0],j0);else for(j0=0;j0<n;++j0)f0[j0]=_n;if(z0=[],typeof jl=="function")for(j0=0;j0<n;++j0)z0[j0]=+jl.call(this,Q0[j0],j0);else for(j0=0;j0<n;++j0)z0[j0]=jl;if(I0=[],typeof Cp=="function")for(j0=0;j0<Km;++j0)I0[j0]=+Cp.call(this,B0[j0],j0);else for(j0=0;j0<Km;++j0)I0[j0]=Cp;function Me(Io,Rp){if(!E){for(E=new Array(Km),Am=0;Am<Km;++Am)E[Am]=[];for(Am=0;Am<n;++Am){var L0=Q0[Am];E[L0.source.index].push(L0.target),E[L0.target.index].push(L0.source)}}for(var hm=E[j0],Am=-1,X0=hm.length,em;++Am<X0;)if(!isNaN(em=hm[Am][Io]))return em;return Math.random()*Rp}return m.resume()},m.resume=function(){return m.alpha(.1)},m.stop=function(){return m.alpha(0)},m.drag=function(){if(Ue||(Ue=g.behavior.drag().origin(Ae).on("dragstart.force",z_).on("drag.force",K0).on("dragend.force",n5)),!arguments.length)return Ue;this.on("mouseover.force",a5).on("mouseout.force",Av).call(Ue)};function K0(j0){j0.px=g.event.x,j0.py=g.event.y,m.resume()}return g.rebind(m,I,"on")};function z_(m){m.fixed|=2}function n5(m){m.fixed&=-7}function a5(m){m.fixed|=4,m.px=m.x,m.py=m.y}function Av(m){m.fixed&=-5}function O_(m,I,ee){var we=0,Ue=0;if(m.charge=0,!m.leaf)for(var We=m.nodes,Do=We.length,_n=-1,jl;++_n<Do;)jl=We[_n],jl!=null&&(O_(jl,I,ee),m.charge+=jl.charge,we+=jl.charge*jl.cx,Ue+=jl.charge*jl.cy);if(m.point){m.leaf||(m.point.x+=Math.random()-.5,m.point.y+=Math.random()-.5);var Cp=I*ee[m.point.index];m.charge+=m.pointCharge=Cp,we+=Cp*m.point.x,Ue+=Cp*m.point.y}m.cx=we/m.charge,m.cy=Ue/m.charge}var X5=20,i5=1,Z5=1/0;g.layout.hierarchy=function(){var m=P_,I=x2,ee=$b;function we(Ue){var We=[Ue],Do=[],_n;for(Ue.depth=0;(_n=We.pop())!=null;)if(Do.push(_n),(Cp=I.call(we,_n,_n.depth))&&(jl=Cp.length)){for(var jl,Cp,Lp;--jl>=0;)We.push(Lp=Cp[jl]),Lp.parent=_n,Lp.depth=_n.depth+1;ee&&(_n.value=0),_n.children=Cp}else ee&&(_n.value=+ee.call(we,_n,_n.depth)||0),delete _n.children;return Oy(Ue,function(n0){var d0,B0;m&&(d0=n0.children)&&d0.sort(m),ee&&(B0=n0.parent)&&(B0.value+=n0.value)}),Do}return we.sort=function(Ue){return arguments.length?(m=Ue,we):m},we.children=function(Ue){return arguments.length?(I=Ue,we):I},we.value=function(Ue){return arguments.length?(ee=Ue,we):ee},we.revalue=function(Ue){return ee&&(Z2(Ue,function(We){We.children&&(We.value=0)}),Oy(Ue,function(We){var Do;We.children||(We.value=+ee.call(we,We,We.depth)||0),(Do=We.parent)&&(Do.value+=We.value)})),Ue},we};function X2(m,I){return g.rebind(m,I,"sort","children","value"),m.nodes=m,m.links=Yb,m}function Z2(m,I){for(var ee=[m];(m=ee.pop())!=null;)if(I(m),(Ue=m.children)&&(we=Ue.length))for(var we,Ue;--we>=0;)ee.push(Ue[we])}function Oy(m,I){for(var ee=[m],we=[];(m=ee.pop())!=null;)if(we.push(m),(Do=m.children)&&(We=Do.length))for(var Ue=-1,We,Do;++Ue<We;)ee.push(Do[Ue]);for(;(m=we.pop())!=null;)I(m)}function x2(m){return m.children}function $b(m){return m.value}function P_(m,I){return I.value-m.value}function Yb(m){return g.merge(m.map(function(I){return(I.children||[]).map(function(ee){return{source:I,target:ee}})}))}g.layout.partition=function(){var m=g.layout.hierarchy(),I=[1,1];function ee(We,Do,_n,jl){var Cp=We.children;if(We.x=Do,We.y=We.depth*jl,We.dx=_n,We.dy=jl,Cp&&(n0=Cp.length)){var Lp=-1,n0,d0,B0;for(_n=We.value?_n/We.value:0;++Lp<n0;)ee(d0=Cp[Lp],Do,B0=d0.value*_n,jl),Do+=B0}}function we(We){var Do=We.children,_n=0;if(Do&&(Cp=Do.length))for(var jl=-1,Cp;++jl<Cp;)_n=Math.max(_n,we(Do[jl]));return 1+_n}function Ue(We,Do){var _n=m.call(this,We,Do);return ee(_n[0],0,I[0],I[1]/we(_n[0])),_n}return Ue.size=function(We){return arguments.length?(I=We,Ue):I},X2(Ue,m)},g.layout.pie=function(){var m=Number,I=mx,ee=0,we=mn,Ue=0;function We(Do){var _n=Do.length,jl=Do.map(function(J0,K0){return+m.call(We,J0,K0)}),Cp=+(typeof ee=="function"?ee.apply(this,arguments):ee),Lp=(typeof we=="function"?we.apply(this,arguments):we)-Cp,n0=Math.min(Math.abs(Lp)/_n,+(typeof Ue=="function"?Ue.apply(this,arguments):Ue)),d0=n0*(Lp<0?-1:1),B0=g.sum(jl),Q0=B0?(Lp-_n*d0)/B0:0,f0=g.range(_n),z0=[],I0;return I!=null&&f0.sort(I===mx?function(J0,K0){return jl[K0]-jl[J0]}:function(J0,K0){return I(Do[J0],Do[K0])}),f0.forEach(function(J0){z0[J0]={data:Do[J0],value:I0=jl[J0],startAngle:Cp,endAngle:Cp+=I0*Q0+d0,padAngle:n0}}),z0}return We.value=function(Do){return arguments.length?(m=Do,We):m},We.sort=function(Do){return arguments.length?(I=Do,We):I},We.startAngle=function(Do){return arguments.length?(ee=Do,We):ee},We.endAngle=function(Do){return arguments.length?(we=Do,We):we},We.padAngle=function(Do){return arguments.length?(Ue=Do,We):Ue},We};var mx={};g.layout.stack=function(){var m=Ae,I=I_,ee=U_,we=J5,Ue=ax,We=J2;function Do(_n,jl){if(!(Q0=_n.length))return _n;var Cp=_n.map(function(J0,K0){return m.call(Do,J0,K0)}),Lp=Cp.map(function(J0){return J0.map(function(K0,j0){return[Ue.call(Do,K0,j0),We.call(Do,K0,j0)]})}),n0=I.call(Do,Lp,jl);Cp=g.permute(Cp,n0),Lp=g.permute(Lp,n0);var d0=ee.call(Do,Lp,jl),B0=Cp[0].length,Q0,f0,z0,I0;for(z0=0;z0<B0;++z0)for(we.call(Do,Cp[0][z0],I0=d0[z0],Lp[0][z0][1]),f0=1;f0<Q0;++f0)we.call(Do,Cp[f0][z0],I0+=Lp[f0-1][z0][1],Lp[f0][z0][1]);return _n}return Do.values=function(_n){return arguments.length?(m=_n,Do):m},Do.order=function(_n){return arguments.length?(I=typeof _n=="function"?_n:o5.get(_n)||I_,Do):I},Do.offset=function(_n){return arguments.length?(ee=typeof _n=="function"?_n:s5.get(_n)||U_,Do):ee},Do.x=function(_n){return arguments.length?(Ue=_n,Do):Ue},Do.y=function(_n){return arguments.length?(We=_n,Do):We},Do.out=function(_n){return arguments.length?(we=_n,Do):we},Do};function ax(m){return m.x}function J2(m){return m.y}function J5(m,I,ee){m.y0=I,m.y=ee}var o5=g.map({"inside-out":function(m){var I=m.length,ee,we,Ue=m.map(K5),We=m.map(Wb),Do=g.range(I).sort(function(n0,d0){return Ue[n0]-Ue[d0]}),_n=0,jl=0,Cp=[],Lp=[];for(ee=0;ee<I;++ee)we=Do[ee],_n<jl?(_n+=We[we],Cp.push(we)):(jl+=We[we],Lp.push(we));return Lp.reverse().concat(Cp)},reverse:function(m){return g.range(m.length).reverse()},default:I_}),s5=g.map({silhouette:function(m){var I=m.length,ee=m[0].length,we=[],Ue=0,We,Do,_n,jl=[];for(Do=0;Do<ee;++Do){for(We=0,_n=0;We<I;We++)_n+=m[We][Do][1];_n>Ue&&(Ue=_n),we.push(_n)}for(Do=0;Do<ee;++Do)jl[Do]=(Ue-we[Do])/2;return jl},wiggle:function(m){var I=m.length,ee=m[0],we=ee.length,Ue,We,Do,_n,jl,Cp,Lp,n0,d0,B0=[];for(B0[0]=n0=d0=0,We=1;We<we;++We){for(Ue=0,_n=0;Ue<I;++Ue)_n+=m[Ue][We][1];for(Ue=0,jl=0,Lp=ee[We][0]-ee[We-1][0];Ue<I;++Ue){for(Do=0,Cp=(m[Ue][We][1]-m[Ue][We-1][1])/(2*Lp);Do<Ue;++Do)Cp+=(m[Do][We][1]-m[Do][We-1][1])/Lp;jl+=Cp*m[Ue][We][1]}B0[We]=n0-=_n?jl/_n*Lp:0,n0<d0&&(d0=n0)}for(We=0;We<we;++We)B0[We]-=d0;return B0},expand:function(m){var I=m.length,ee=m[0].length,we=1/I,Ue,We,Do,_n=[];for(We=0;We<ee;++We){for(Ue=0,Do=0;Ue<I;Ue++)Do+=m[Ue][We][1];if(Do)for(Ue=0;Ue<I;Ue++)m[Ue][We][1]/=Do;else for(Ue=0;Ue<I;Ue++)m[Ue][We][1]=we}for(We=0;We<ee;++We)_n[We]=0;return _n},zero:U_});function I_(m){return g.range(m.length)}function U_(m){for(var I=-1,ee=m[0].length,we=[];++I<ee;)we[I]=0;return we}function K5(m){for(var I=1,ee=0,we=m[0][1],Ue,We=m.length;I<We;++I)(Ue=m[I][1])>we&&(ee=I,we=Ue);return ee}function Wb(m){return m.reduce(l5,0)}function l5(m,I){return m+I[1]}g.layout.histogram=function(){var m=!0,I=Number,ee=Xb,we=c5;function Ue(We,Do){for(var _n=[],jl=We.map(I,this),Cp=ee.call(this,jl,Do),Lp=we.call(this,Cp,jl,Do),n0,Do=-1,d0=jl.length,B0=Lp.length-1,Q0=m?1:1/d0,f0;++Do<B0;)n0=_n[Do]=[],n0.dx=Lp[Do+1]-(n0.x=Lp[Do]),n0.y=0;if(B0>0)for(Do=-1;++Do<d0;)f0=jl[Do],f0>=Cp[0]&&f0<=Cp[1]&&(n0=_n[g.bisect(Lp,f0,1,B0)-1],n0.y+=Q0,n0.push(We[Do]));return _n}return Ue.value=function(We){return arguments.length?(I=We,Ue):I},Ue.range=function(We){return arguments.length?(ee=u0(We),Ue):ee},Ue.bins=function(We){return arguments.length?(we=typeof We=="number"?function(Do){return u5(Do,We)}:u0(We),Ue):we},Ue.frequency=function(We){return arguments.length?(m=!!We,Ue):m},Ue};function c5(m,I){return u5(m,Math.ceil(Math.log(I.length)/Math.LN2+1))}function u5(m,I){for(var ee=-1,we=+m[0],Ue=(m[1]-we)/I,We=[];++ee<=I;)We[ee]=Ue*ee+we;return We}function Xb(m){return[g.min(m),g.max(m)]}g.layout.pack=function(){var m=g.layout.hierarchy().sort(Zb),I=0,ee=[1,1],we;function Ue(We,Do){var _n=m.call(this,We,Do),jl=_n[0],Cp=ee[0],Lp=ee[1],n0=we==null?Math.sqrt:typeof we=="function"?we:function(){return we};if(jl.x=jl.y=0,Oy(jl,function(B0){B0.r=+n0(B0.value)}),Oy(jl,h5),I){var d0=I*(we?1:Math.max(2*jl.r/Cp,2*jl.r/Lp))/2;Oy(jl,function(B0){B0.r+=d0}),Oy(jl,h5),Oy(jl,function(B0){B0.r-=d0})}return F_(jl,Cp/2,Lp/2,we?1:1/Math.max(2*jl.r/Cp,2*jl.r/Lp)),_n}return Ue.size=function(We){return arguments.length?(ee=We,Ue):ee},Ue.radius=function(We){return arguments.length?(we=We==null||typeof We=="function"?We:+We,Ue):we},Ue.padding=function(We){return arguments.length?(I=+We,Ue):I},X2(Ue,m)};function Zb(m,I){return m.value-I.value}function Jb(m,I){var ee=m._pack_next;m._pack_next=I,I._pack_prev=m,I._pack_next=ee,ee._pack_prev=I}function d5(m,I){m._pack_next=I,I._pack_prev=m}function _2(m,I){var ee=I.x-m.x,we=I.y-m.y,Ue=m.r+I.r;return .999*Ue*Ue>ee*ee+we*we}function h5(m){if(!(I=m.children)||!(d0=I.length))return;var I,ee=1/0,we=-1/0,Ue=1/0,We=-1/0,Do,_n,jl,Cp,Lp,n0,d0;function B0(j0){ee=Math.min(j0.x-j0.r,ee),we=Math.max(j0.x+j0.r,we),Ue=Math.min(j0.y-j0.r,Ue),We=Math.max(j0.y+j0.r,We)}if(I.forEach(f5),Do=I[0],Do.x=-Do.r,Do.y=0,B0(Do),d0>1&&(_n=I[1],_n.x=_n.r,_n.y=0,B0(_n),d0>2))for(jl=I[2],K2(Do,_n,jl),B0(jl),Jb(Do,jl),Do._pack_prev=jl,Jb(jl,_n),_n=Do._pack_next,Cp=3;Cp<d0;Cp++){K2(Do,_n,jl=I[Cp]);var Q0=0,f0=1,z0=1;for(Lp=_n._pack_next;Lp!==_n;Lp=Lp._pack_next,f0++)if(_2(Lp,jl)){Q0=1;break}if(Q0==1)for(n0=Do._pack_prev;n0!==Lp._pack_prev&&!_2(n0,jl);n0=n0._pack_prev,z0++);Q0?(f0<z0||f0==z0&&_n.r<Do.r?d5(Do,_n=Lp):d5(Do=n0,_n),Cp--):(Jb(Do,jl),_n=jl,B0(jl))}var I0=(ee+we)/2,J0=(Ue+We)/2,K0=0;for(Cp=0;Cp<d0;Cp++)jl=I[Cp],jl.x-=I0,jl.y-=J0,K0=Math.max(K0,jl.r+Math.sqrt(jl.x*jl.x+jl.y*jl.y));m.r=K0,I.forEach(ov)}function f5(m){m._pack_next=m._pack_prev=m}function ov(m){delete m._pack_next,delete m._pack_prev}function F_(m,I,ee,we){var Ue=m.children;if(m.x=I+=we*m.x,m.y=ee+=we*m.y,m.r*=we,Ue)for(var We=-1,Do=Ue.length;++We<Do;)F_(Ue[We],I,ee,we)}function K2(m,I,ee){var we=m.r+ee.r,Ue=I.x-m.x,We=I.y-m.y;if(we&&(Ue||We)){var Do=I.r+ee.r,_n=Ue*Ue+We*We;Do*=Do,we*=we;var jl=.5+(we-Do)/(2*_n),Cp=Math.sqrt(Math.max(0,2*Do*(we+_n)-(we-=_n)*we-Do*Do))/(2*_n);ee.x=m.x+jl*Ue+Cp*We,ee.y=m.y+jl*We-Cp*Ue}else ee.x=m.x+we,ee.y=m.y}g.layout.tree=function(){var m=g.layout.hierarchy().sort(null).value(null),I=B_,ee=[1,1],we=null;function Ue(Lp,n0){var d0=m.call(this,Lp,n0),B0=d0[0],Q0=We(B0);if(Oy(Q0,Do),Q0.parent.m=-Q0.z,Z2(Q0,_n),we)Z2(B0,Cp);else{var f0=B0,z0=B0,I0=B0;Z2(B0,function(Km){Km.x<f0.x&&(f0=Km),Km.x>z0.x&&(z0=Km),Km.depth>I0.depth&&(I0=Km)});var J0=I(f0,z0)/2-f0.x,K0=ee[0]/(z0.x+I(z0,f0)/2+J0),j0=ee[1]/(I0.depth||1);Z2(B0,function(Km){Km.x=(Km.x+J0)*K0,Km.y=Km.depth*j0})}return d0}function We(Lp){for(var n0={A:null,children:[Lp]},d0=[n0],B0;(B0=d0.pop())!=null;)for(var Q0=B0.children,f0,z0=0,I0=Q0.length;z0<I0;++z0)d0.push((Q0[z0]=f0={_:Q0[z0],parent:B0,children:(f0=Q0[z0].children)&&f0.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:z0}).a=f0);return n0.children[0]}function Do(Lp){var n0=Lp.children,d0=Lp.parent.children,B0=Lp.i?d0[Lp.i-1]:null;if(n0.length){H_(Lp);var Q0=(n0[0].z+n0[n0.length-1].z)/2;B0?(Lp.z=B0.z+I(Lp._,B0._),Lp.m=Lp.z-Q0):Lp.z=Q0}else B0&&(Lp.z=B0.z+I(Lp._,B0._));Lp.parent.A=jl(Lp,B0,Lp.parent.A||d0[0])}function _n(Lp){Lp._.x=Lp.z+Lp.parent.m,Lp.m+=Lp.parent.m}function jl(Lp,n0,d0){if(n0){for(var B0=Lp,Q0=Lp,f0=n0,z0=B0.parent.children[0],I0=B0.m,J0=Q0.m,K0=f0.m,j0=z0.m,Km;f0=Q2(f0),B0=j_(B0),f0&&B0;)z0=j_(z0),Q0=Q2(Q0),Q0.a=Lp,Km=f0.z+K0-B0.z-I0+I(f0._,B0._),Km>0&&(e_(Q5(f0,Lp,d0),Lp,Km),I0+=Km,J0+=Km),K0+=f0.m,I0+=B0.m,j0+=z0.m,J0+=Q0.m;f0&&!Q2(Q0)&&(Q0.t=f0,Q0.m+=K0-J0),B0&&!j_(z0)&&(z0.t=B0,z0.m+=I0-j0,d0=Lp)}return d0}function Cp(Lp){Lp.x*=ee[0],Lp.y=Lp.depth*ee[1]}return Ue.separation=function(Lp){return arguments.length?(I=Lp,Ue):I},Ue.size=function(Lp){return arguments.length?(we=(ee=Lp)==null?Cp:null,Ue):we?null:ee},Ue.nodeSize=function(Lp){return arguments.length?(we=(ee=Lp)==null?null:Cp,Ue):we?ee:null},X2(Ue,m)};function B_(m,I){return m.parent==I.parent?1:2}function j_(m){var I=m.children;return I.length?I[0]:m.t}function Q2(m){var I=m.children,ee;return(ee=I.length)?I[ee-1]:m.t}function e_(m,I,ee){var we=ee/(I.i-m.i);I.c-=we,I.s+=ee,m.c+=we,I.z+=ee,I.m+=ee}function H_(m){for(var I=0,ee=0,we=m.children,Ue=we.length,We;--Ue>=0;)We=we[Ue],We.z+=I,We.m+=I,I+=We.s+(ee+=We.c)}function Q5(m,I,ee){return m.a.parent===I.parent?m.a:ee}g.layout.cluster=function(){var m=g.layout.hierarchy().sort(null).value(null),I=B_,ee=[1,1],we=!1;function Ue(We,Do){var _n=m.call(this,We,Do),jl=_n[0],Cp,Lp=0;Oy(jl,function(f0){var z0=f0.children;z0&&z0.length?(f0.x=ew(z0),f0.y=p5(z0)):(f0.x=Cp?Lp+=I(f0,Cp):0,f0.y=0,Cp=f0)});var n0=m5(jl),d0=Kb(jl),B0=n0.x-I(n0,d0)/2,Q0=d0.x+I(d0,n0)/2;return Oy(jl,we?function(f0){f0.x=(f0.x-jl.x)*ee[0],f0.y=(jl.y-f0.y)*ee[1]}:function(f0){f0.x=(f0.x-B0)/(Q0-B0)*ee[0],f0.y=(1-(jl.y?f0.y/jl.y:1))*ee[1]}),_n}return Ue.separation=function(We){return arguments.length?(I=We,Ue):I},Ue.size=function(We){return arguments.length?(we=(ee=We)==null,Ue):we?null:ee},Ue.nodeSize=function(We){return arguments.length?(we=(ee=We)!=null,Ue):we?ee:null},X2(Ue,m)};function p5(m){return 1+g.max(m,function(I){return I.y})}function ew(m){return m.reduce(function(I,ee){return I+ee.x},0)/m.length}function m5(m){var I=m.children;return I&&I.length?m5(I[0]):m}function Kb(m){var I=m.children,ee;return I&&(ee=I.length)?Kb(I[ee-1]):m}g.layout.treemap=function(){var m=g.layout.hierarchy(),I=Math.round,ee=[1,1],we=null,Ue=G_,We=!1,Do,_n="squarify",jl=.5*(1+Math.sqrt(5));function Cp(f0,z0){for(var I0=-1,J0=f0.length,K0,j0;++I0<J0;)j0=(K0=f0[I0]).value*(z0<0?0:z0),K0.area=isNaN(j0)||j0<=0?0:j0}function Lp(f0){var z0=f0.children;if(z0&&z0.length){var I0=Ue(f0),J0=[],K0=z0.slice(),j0,Km=1/0,n,i=_n==="slice"?I0.dx:_n==="dice"?I0.dy:_n==="slice-dice"?f0.depth&1?I0.dy:I0.dx:Math.min(I0.dx,I0.dy),l;for(Cp(K0,I0.dx*I0.dy/f0.value),J0.area=0;(l=K0.length)>0;)J0.push(j0=K0[l-1]),J0.area+=j0.area,_n!=="squarify"||(n=d0(J0,i))<=Km?(K0.pop(),Km=n):(J0.area-=J0.pop().area,B0(J0,i,I0,!1),i=Math.min(I0.dx,I0.dy),J0.length=J0.area=0,Km=1/0);J0.length&&(B0(J0,i,I0,!0),J0.length=J0.area=0),z0.forEach(Lp)}}function n0(f0){var z0=f0.children;if(z0&&z0.length){var I0=Ue(f0),J0=z0.slice(),K0,j0=[];for(Cp(J0,I0.dx*I0.dy/f0.value),j0.area=0;K0=J0.pop();)j0.push(K0),j0.area+=K0.area,K0.z!=null&&(B0(j0,K0.z?I0.dx:I0.dy,I0,!J0.length),j0.length=j0.area=0);z0.forEach(n0)}}function d0(f0,z0){for(var I0=f0.area,J0,K0=0,j0=1/0,Km=-1,n=f0.length;++Km<n;)(J0=f0[Km].area)&&(J0<j0&&(j0=J0),J0>K0&&(K0=J0));return I0*=I0,z0*=z0,I0?Math.max(z0*K0*jl/I0,I0/(z0*j0*jl)):1/0}function B0(f0,z0,I0,J0){var K0=-1,j0=f0.length,Km=I0.x,n=I0.y,i=z0?I(f0.area/z0):0,l;if(z0==I0.dx){for((J0||i>I0.dy)&&(i=I0.dy);++K0<j0;)l=f0[K0],l.x=Km,l.y=n,l.dy=i,Km+=l.dx=Math.min(I0.x+I0.dx-Km,i?I(l.area/i):0);l.z=!0,l.dx+=I0.x+I0.dx-Km,I0.y+=i,I0.dy-=i}else{for((J0||i>I0.dx)&&(i=I0.dx);++K0<j0;)l=f0[K0],l.x=Km,l.y=n,l.dx=i,n+=l.dy=Math.min(I0.y+I0.dy-n,i?I(l.area/i):0);l.z=!1,l.dy+=I0.y+I0.dy-n,I0.x+=i,I0.dx-=i}}function Q0(f0){var z0=Do||m(f0),I0=z0[0];return I0.x=I0.y=0,I0.value?(I0.dx=ee[0],I0.dy=ee[1]):I0.dx=I0.dy=0,Do&&m.revalue(I0),Cp([I0],I0.dx*I0.dy/I0.value),(Do?n0:Lp)(I0),We&&(Do=z0),z0}return Q0.size=function(f0){return arguments.length?(ee=f0,Q0):ee},Q0.padding=function(f0){if(!arguments.length)return we;function z0(K0){var j0=f0.call(Q0,K0,K0.depth);return j0==null?G_(K0):Cv(K0,typeof j0=="number"?[j0,j0,j0,j0]:j0)}function I0(K0){return Cv(K0,f0)}var J0;return Ue=(we=f0)==null?G_:(J0=typeof f0)=="function"?z0:(J0==="number"&&(f0=[f0,f0,f0,f0]),I0),Q0},Q0.round=function(f0){return arguments.length?(I=f0?Math.round:Number,Q0):I!=Number},Q0.sticky=function(f0){return arguments.length?(We=f0,Do=null,Q0):We},Q0.ratio=function(f0){return arguments.length?(jl=f0,Q0):jl},Q0.mode=function(f0){return arguments.length?(_n=f0+"",Q0):_n},X2(Q0,m)};function G_(m){return{x:m.x,y:m.y,dx:m.dx,dy:m.dy}}function Cv(m,I){var ee=m.x+I[3],we=m.y+I[0],Ue=m.dx-I[1]-I[3],We=m.dy-I[0]-I[2];return Ue<0&&(ee+=Ue/2,Ue=0),We<0&&(we+=We/2,We=0),{x:ee,y:we,dx:Ue,dy:We}}g.random={normal:function(m,I){var ee=arguments.length;return ee<2&&(I=1),ee<1&&(m=0),function(){var we,Ue,We;do we=Math.random()*2-1,Ue=Math.random()*2-1,We=we*we+Ue*Ue;while(!We||We>1);return m+I*we*Math.sqrt(-2*Math.log(We)/We)}},logNormal:function(){var m=g.random.normal.apply(g,arguments);return function(){return Math.exp(m())}},bates:function(m){var I=g.random.irwinHall(m);return function(){return I()/m}},irwinHall:function(m){return function(){for(var I=0,ee=0;ee<m;ee++)I+=Math.random();return I}}},g.scale={};function b2(m){var I=m[0],ee=m[m.length-1];return I<ee?[I,ee]:[ee,I]}function dy(m){return m.rangeExtent?m.rangeExtent():b2(m.range())}function tw(m,I,ee,we){var Ue=ee(m[0],m[1]),We=we(I[0],I[1]);return function(Do){return We(Ue(Do))}}function V_(m,I){var ee=0,we=m.length-1,Ue=m[ee],We=m[we],Do;return We<Ue&&(Do=ee,ee=we,we=Do,Do=Ue,Ue=We,We=Do),m[ee]=I.floor(Ue),m[we]=I.ceil(We),m}function g5(m){return m?{floor:function(I){return Math.floor(I/m)*m},ceil:function(I){return Math.ceil(I/m)*m}}:Qb}var Qb={floor:Ae,ceil:Ae};function e3(m,I,ee,we){var Ue=[],We=[],Do=0,_n=Math.min(m.length,I.length)-1;for(m[_n]<m[0]&&(m=m.slice().reverse(),I=I.slice().reverse());++Do<=_n;)Ue.push(ee(m[Do-1],m[Do])),We.push(we(I[Do-1],I[Do]));return function(jl){var Cp=g.bisect(m,jl,1,_n)-1;return We[Cp](Ue[Cp](jl))}}g.scale.linear=function(){return t_([0,1],[0,1],Wv,!1)};function t_(m,I,ee,we){var Ue,We;function Do(){var jl=Math.min(m.length,I.length)>2?e3:tw,Cp=we?e5:Q3;return Ue=jl(m,I,Cp,ee),We=jl(I,m,Cp,Wv),_n}function _n(jl){return Ue(jl)}return _n.invert=function(jl){return We(jl)},_n.domain=function(jl){return arguments.length?(m=jl.map(Number),Do()):m},_n.range=function(jl){return arguments.length?(I=jl,Do()):I},_n.rangeRound=function(jl){return _n.range(jl).interpolate(Hb)},_n.clamp=function(jl){return arguments.length?(we=jl,Do()):we},_n.interpolate=function(jl){return arguments.length?(ee=jl,Do()):ee},_n.ticks=function(jl){return n_(m,jl)},_n.tickFormat=function(jl,Cp){return d3_scale_linearTickFormat(m,jl,Cp)},_n.nice=function(jl){return r3(m,jl),Do()},_n.copy=function(){return t_(m,I,ee,we)},Do()}function t3(m,I){return g.rebind(m,I,"range","rangeRound","interpolate","clamp")}function r3(m,I){return V_(m,g5(r_(m,I)[2])),V_(m,g5(r_(m,I)[2])),m}function r_(m,I){I==null&&(I=10);var ee=b2(m),we=ee[1]-ee[0],Ue=Math.pow(10,Math.floor(Math.log(we/I)/Math.LN10)),We=I/we*Ue;return We<=.15?Ue*=10:We<=.35?Ue*=5:We<=.75&&(Ue*=2),ee[0]=Math.ceil(ee[0]/Ue)*Ue,ee[1]=Math.floor(ee[1]/Ue)*Ue+Ue*.5,ee[2]=Ue,ee}function n_(m,I){return g.range.apply(g,r_(m,I))}g.scale.log=function(){return v5(g.scale.linear().domain([0,1]),10,!0,[1,10])};function v5(m,I,ee,we){function Ue(_n){return(ee?Math.log(_n<0?0:_n):-Math.log(_n>0?0:-_n))/Math.log(I)}function We(_n){return ee?Math.pow(I,_n):-Math.pow(I,-_n)}function Do(_n){return m(Ue(_n))}return Do.invert=function(_n){return We(m.invert(_n))},Do.domain=function(_n){return arguments.length?(ee=_n[0]>=0,m.domain((we=_n.map(Number)).map(Ue)),Do):we},Do.base=function(_n){return arguments.length?(I=+_n,m.domain(we.map(Ue)),Do):I},Do.nice=function(){var _n=V_(we.map(Ue),ee?Math:y5);return m.domain(_n),we=_n.map(We),Do},Do.ticks=function(){var _n=b2(we),jl=[],Cp=_n[0],Lp=_n[1],n0=Math.floor(Ue(Cp)),d0=Math.ceil(Ue(Lp)),B0=I%1?2:I;if(isFinite(d0-n0)){if(ee){for(;n0<d0;n0++)for(var Q0=1;Q0<B0;Q0++)jl.push(We(n0)*Q0);jl.push(We(n0))}else for(jl.push(We(n0));n0++<d0;)for(var Q0=B0-1;Q0>0;Q0--)jl.push(We(n0)*Q0);for(n0=0;jl[n0]<Cp;n0++);for(d0=jl.length;jl[d0-1]>Lp;d0--);jl=jl.slice(n0,d0)}return jl},Do.copy=function(){return v5(m.copy(),I,ee,we)},t3(Do,m)}var y5={floor:function(m){return-Math.ceil(-m)},ceil:function(m){return-Math.floor(-m)}};g.scale.pow=function(){return x5(g.scale.linear(),1,[0,1])};function x5(m,I,ee){var we=a_(I),Ue=a_(1/I);function We(Do){return m(we(Do))}return We.invert=function(Do){return Ue(m.invert(Do))},We.domain=function(Do){return arguments.length?(m.domain((ee=Do.map(Number)).map(we)),We):ee},We.ticks=function(Do){return n_(ee,Do)},We.tickFormat=function(Do,_n){return d3_scale_linearTickFormat(ee,Do,_n)},We.nice=function(Do){return We.domain(r3(ee,Do))},We.exponent=function(Do){return arguments.length?(we=a_(I=Do),Ue=a_(1/I),m.domain(ee.map(we)),We):I},We.copy=function(){return x5(m.copy(),I,ee)},t3(We,m)}function a_(m){return function(I){return I<0?-Math.pow(-I,m):Math.pow(I,m)}}g.scale.sqrt=function(){return g.scale.pow().exponent(.5)},g.scale.ordinal=function(){return _5([],{t:"range",a:[[]]})};function _5(m,I){var ee,we,Ue;function We(_n){return we[((ee.get(_n)||(I.t==="range"?ee.set(_n,m.push(_n)):NaN))-1)%we.length]}function Do(_n,jl){return g.range(m.length).map(function(Cp){return _n+jl*Cp})}return We.domain=function(_n){if(!arguments.length)return m;m=[],ee=new H;for(var jl=-1,Cp=_n.length,Lp;++jl<Cp;)ee.has(Lp=_n[jl])||ee.set(Lp,m.push(Lp));return We[I.t].apply(We,I.a)},We.range=function(_n){return arguments.length?(we=_n,Ue=0,I={t:"range",a:arguments},We):we},We.rangePoints=function(_n,jl){arguments.length<2&&(jl=0);var Cp=_n[0],Lp=_n[1],n0=m.length<2?(Cp=(Cp+Lp)/2,0):(Lp-Cp)/(m.length-1+jl);return we=Do(Cp+n0*jl/2,n0),Ue=0,I={t:"rangePoints",a:arguments},We},We.rangeRoundPoints=function(_n,jl){arguments.length<2&&(jl=0);var Cp=_n[0],Lp=_n[1],n0=m.length<2?(Cp=Lp=Math.round((Cp+Lp)/2),0):(Lp-Cp)/(m.length-1+jl)|0;return we=Do(Cp+Math.round(n0*jl/2+(Lp-Cp-(m.length-1+jl)*n0)/2),n0),Ue=0,I={t:"rangeRoundPoints",a:arguments},We},We.rangeBands=function(_n,jl,Cp){arguments.length<2&&(jl=0),arguments.length<3&&(Cp=jl);var Lp=_n[1]<_n[0],n0=_n[Lp-0],d0=_n[1-Lp],B0=(d0-n0)/(m.length-jl+2*Cp);return we=Do(n0+B0*Cp,B0),Lp&&we.reverse(),Ue=B0*(1-jl),I={t:"rangeBands",a:arguments},We},We.rangeRoundBands=function(_n,jl,Cp){arguments.length<2&&(jl=0),arguments.length<3&&(Cp=jl);var Lp=_n[1]<_n[0],n0=_n[Lp-0],d0=_n[1-Lp],B0=Math.floor((d0-n0)/(m.length-jl+2*Cp));return we=Do(n0+Math.round((d0-n0-(m.length-jl)*B0)/2),B0),Lp&&we.reverse(),Ue=Math.round(B0*(1-jl)),I={t:"rangeRoundBands",a:arguments},We},We.rangeBand=function(){return Ue},We.rangeExtent=function(){return b2(I.a[0])},We.copy=function(){return _5(m,I)},We.domain(m)}g.scale.category10=function(){return g.scale.ordinal().range(rw)},g.scale.category20=function(){return g.scale.ordinal().range(Rx)},g.scale.category20b=function(){return g.scale.ordinal().range(b5)},g.scale.category20c=function(){return g.scale.ordinal().range(w5)};var rw=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Je),Rx=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Je),b5=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Je),w5=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Je);g.scale.quantile=function(){return q_([],[])};function q_(m,I){var ee;function we(){var We=0,Do=I.length;for(ee=[];++We<Do;)ee[We-1]=g.quantile(m,We/Do);return Ue}function Ue(We){if(!isNaN(We=+We))return I[g.bisect(ee,We)]}return Ue.domain=function(We){return arguments.length?(m=We.map(B).filter(P).sort(D),we()):m},Ue.range=function(We){return arguments.length?(I=We,we()):I},Ue.quantiles=function(){return ee},Ue.invertExtent=function(We){return We=I.indexOf(We),We<0?[NaN,NaN]:[We>0?ee[We-1]:m[0],We<ee.length?ee[We]:m[m.length-1]]},Ue.copy=function(){return q_(m,I)},we()}g.scale.quantize=function(){return M5(0,1,[0,1])};function M5(m,I,ee){var we,Ue;function We(_n){return ee[Math.max(0,Math.min(Ue,Math.floor(we*(_n-m))))]}function Do(){return we=ee.length/(I-m),Ue=ee.length-1,We}return We.domain=function(_n){return arguments.length?(m=+_n[0],I=+_n[_n.length-1],Do()):[m,I]},We.range=function(_n){return arguments.length?(ee=_n,Do()):ee},We.invertExtent=function(_n){return _n=ee.indexOf(_n),_n=_n<0?NaN:_n/we+m,[_n,_n+1/we]},We.copy=function(){return M5(m,I,ee)},Do()}g.scale.threshold=function(){return S5([.5],[0,1])};function S5(m,I){function ee(we){if(we<=we)return I[g.bisect(m,we)]}return ee.domain=function(we){return arguments.length?(m=we,ee):m},ee.range=function(we){return arguments.length?(I=we,ee):I},ee.invertExtent=function(we){return we=I.indexOf(we),[m[we-1],m[we]]},ee.copy=function(){return S5(m,I)},ee}g.scale.identity=function(){return n3([0,1])};function n3(m){function I(ee){return+ee}return I.invert=I,I.domain=I.range=function(ee){return arguments.length?(m=ee.map(I),I):m},I.ticks=function(ee){return n_(m,ee)},I.tickFormat=function(ee,we){return d3_scale_linearTickFormat(m,ee,we)},I.copy=function(){return n3(m)},I}g.svg={};function a3(){return 0}g.svg.arc=function(){var m=nw,I=$y,ee=a3,we=w2,Ue=$_,We=i3,Do=T5;function _n(){var Cp=Math.max(0,+m.apply(this,arguments)),Lp=Math.max(0,+I.apply(this,arguments)),n0=Ue.apply(this,arguments)-Vl,d0=We.apply(this,arguments)-Vl,B0=Math.abs(d0-n0),Q0=n0>d0?0:1;if(Lp<Cp&&(f0=Lp,Lp=Cp,Cp=f0),B0>=Bl)return jl(Lp,Q0)+(Cp?jl(Cp,1-Q0):"")+"Z";var f0,z0,I0,J0,K0=0,j0=0,Km,n,i,l,E,te,Me,Io,Rp=[];if((J0=(+Do.apply(this,arguments)||0)/2)&&(I0=we===w2?Math.sqrt(Cp*Cp+Lp*Lp):+we.apply(this,arguments),Q0||(j0*=-1),Lp&&(j0=Zp(I0/Lp*Math.sin(J0))),Cp&&(K0=Zp(I0/Cp*Math.sin(J0)))),Lp){Km=Lp*Math.cos(n0+j0),n=Lp*Math.sin(n0+j0),i=Lp*Math.cos(d0-j0),l=Lp*Math.sin(d0-j0);var L0=Math.abs(d0-n0-2*j0)<=ft?0:1;if(j0&&i_(Km,n,i,l)===Q0^L0){var hm=(n0+d0)/2;Km=Lp*Math.cos(hm),n=Lp*Math.sin(hm),i=l=null}}else Km=n=0;if(Cp){E=Cp*Math.cos(d0-K0),te=Cp*Math.sin(d0-K0),Me=Cp*Math.cos(n0+K0),Io=Cp*Math.sin(n0+K0);var Am=Math.abs(n0-d0+2*K0)<=ft?0:1;if(K0&&i_(E,te,Me,Io)===1-Q0^Am){var X0=(n0+d0)/2;E=Cp*Math.cos(X0),te=Cp*Math.sin(X0),Me=Io=null}}else E=te=0;if(B0>Tp&&(f0=Math.min(Math.abs(Lp-Cp)/2,+ee.apply(this,arguments)))>.001){z0=Cp<Lp^Q0?0:1;var em=f0,cm=f0;if(B0<ft){var L1=Me==null?[E,te]:i==null?[Km,n]:cg([Km,n],[Me,Io],[i,l],[E,te]),Y1=Km-L1[0],Rg=n-L1[1],nm=i-L1[0],Y0=l-L1[1],gm=1/Math.sin(Math.acos((Y1*nm+Rg*Y0)/(Math.sqrt(Y1*Y1+Rg*Rg)*Math.sqrt(nm*nm+Y0*Y0)))/2),Wm=Math.sqrt(L1[0]*L1[0]+L1[1]*L1[1]);cm=Math.min(f0,(Cp-Wm)/(gm-1)),em=Math.min(f0,(Lp-Wm)/(gm+1))}if(i!=null){var ng=Lx(Me==null?[E,te]:[Me,Io],[Km,n],Lp,em,Q0),Lg=Lx([i,l],[E,te],Lp,em,Q0);f0===em?Rp.push("M",ng[0],"A",em,",",em," 0 0,",z0," ",ng[1],"A",Lp,",",Lp," 0 ",1-Q0^i_(ng[1][0],ng[1][1],Lg[1][0],Lg[1][1]),",",Q0," ",Lg[1],"A",em,",",em," 0 0,",z0," ",Lg[0]):Rp.push("M",ng[0],"A",em,",",em," 0 1,",z0," ",Lg[0])}else Rp.push("M",Km,",",n);if(Me!=null){var X1=Lx([Km,n],[Me,Io],Cp,-cm,Q0),jg=Lx([E,te],i==null?[Km,n]:[i,l],Cp,-cm,Q0);f0===cm?Rp.push("L",jg[0],"A",cm,",",cm," 0 0,",z0," ",jg[1],"A",Cp,",",Cp," 0 ",Q0^i_(jg[1][0],jg[1][1],X1[1][0],X1[1][1]),",",1-Q0," ",X1[1],"A",cm,",",cm," 0 0,",z0," ",X1[0]):Rp.push("L",jg[0],"A",cm,",",cm," 0 0,",z0," ",X1[0])}else Rp.push("L",E,",",te)}else Rp.push("M",Km,",",n),i!=null&&Rp.push("A",Lp,",",Lp," 0 ",L0,",",Q0," ",i,",",l),Rp.push("L",E,",",te),Me!=null&&Rp.push("A",Cp,",",Cp," 0 ",Am,",",1-Q0," ",Me,",",Io);return Rp.push("Z"),Rp.join("")}function jl(Cp,Lp){return"M0,"+Cp+"A"+Cp+","+Cp+" 0 1,"+Lp+" 0,"+-Cp+"A"+Cp+","+Cp+" 0 1,"+Lp+" 0,"+Cp}return _n.innerRadius=function(Cp){return arguments.length?(m=u0(Cp),_n):m},_n.outerRadius=function(Cp){return arguments.length?(I=u0(Cp),_n):I},_n.cornerRadius=function(Cp){return arguments.length?(ee=u0(Cp),_n):ee},_n.padRadius=function(Cp){return arguments.length?(we=Cp==w2?w2:u0(Cp),_n):we},_n.startAngle=function(Cp){return arguments.length?(Ue=u0(Cp),_n):Ue},_n.endAngle=function(Cp){return arguments.length?(We=u0(Cp),_n):We},_n.padAngle=function(Cp){return arguments.length?(Do=u0(Cp),_n):Do},_n.centroid=function(){var Cp=(+m.apply(this,arguments)+ +I.apply(this,arguments))/2,Lp=(+Ue.apply(this,arguments)+ +We.apply(this,arguments))/2-Vl;return[Math.cos(Lp)*Cp,Math.sin(Lp)*Cp]},_n};var w2="auto";function nw(m){return m.innerRadius}function $y(m){return m.outerRadius}function $_(m){return m.startAngle}function i3(m){return m.endAngle}function T5(m){return m&&m.padAngle}function i_(m,I,ee,we){return(m-ee)*I-(I-we)*m>0?0:1}function Lx(m,I,ee,we,Ue){var We=m[0]-I[0],Do=m[1]-I[1],_n=(Ue?we:-we)/Math.sqrt(We*We+Do*Do),jl=_n*Do,Cp=-_n*We,Lp=m[0]+jl,n0=m[1]+Cp,d0=I[0]+jl,B0=I[1]+Cp,Q0=(Lp+d0)/2,f0=(n0+B0)/2,z0=d0-Lp,I0=B0-n0,J0=z0*z0+I0*I0,K0=ee-we,j0=Lp*B0-d0*n0,Km=(I0<0?-1:1)*Math.sqrt(Math.max(0,K0*K0*J0-j0*j0)),n=(j0*I0-z0*Km)/J0,i=(-j0*z0-I0*Km)/J0,l=(j0*I0+z0*Km)/J0,E=(-j0*z0+I0*Km)/J0,te=n-Q0,Me=i-f0,Io=l-Q0,Rp=E-f0;return te*te+Me*Me>Io*Io+Rp*Rp&&(n=l,i=E),[[n-jl,i-Cp],[n*ee/K0,i*ee/K0]]}function Py(){return!0}function o3(m){var I=tg,ee=Og,we=Py,Ue=my,We=Ue.key,Do=.7;function _n(jl){var Cp=[],Lp=[],n0=-1,d0=jl.length,B0,Q0=u0(I),f0=u0(ee);function z0(){Cp.push("M",Ue(m(Lp),Do))}for(;++n0<d0;)we.call(this,B0=jl[n0],n0)?Lp.push([+Q0.call(this,B0,n0),+f0.call(this,B0,n0)]):Lp.length&&(z0(),Lp=[]);return Lp.length&&z0(),Cp.length?Cp.join(""):null}return _n.x=function(jl){return arguments.length?(I=jl,_n):I},_n.y=function(jl){return arguments.length?(ee=jl,_n):ee},_n.defined=function(jl){return arguments.length?(we=jl,_n):we},_n.interpolate=function(jl){return arguments.length?(typeof jl=="function"?We=Ue=jl:We=(Ue=M2.get(jl)||my).key,_n):We},_n.tension=function(jl){return arguments.length?(Do=jl,_n):Do},_n}g.svg.line=function(){return o3(Ae)};var M2=g.map({linear:my,"linear-closed":E5,step:aw,"step-before":Dx,"step-after":Y_,basis:A5,"basis-open":lw,"basis-closed":C5,bundle:S2,cardinal:sw,"cardinal-open":iw,"cardinal-closed":ow,monotone:u3});M2.forEach(function(m,I){I.key=m,I.closed=/-closed$/.test(m)});function my(m){return m.length>1?m.join("L"):m+"Z"}function E5(m){return m.join("L")+"Z"}function aw(m){for(var I=0,ee=m.length,we=m[0],Ue=[we[0],",",we[1]];++I<ee;)Ue.push("H",(we[0]+(we=m[I])[0])/2,"V",we[1]);return ee>1&&Ue.push("H",we[0]),Ue.join("")}function Dx(m){for(var I=0,ee=m.length,we=m[0],Ue=[we[0],",",we[1]];++I<ee;)Ue.push("V",(we=m[I])[1],"H",we[0]);return Ue.join("")}function Y_(m){for(var I=0,ee=m.length,we=m[0],Ue=[we[0],",",we[1]];++I<ee;)Ue.push("H",(we=m[I])[0],"V",we[1]);return Ue.join("")}function iw(m,I){return m.length<4?my(m):m[1]+W_(m.slice(1,-1),s3(m,I))}function ow(m,I){return m.length<3?E5(m):m[0]+W_((m.push(m[0]),m),s3([m[m.length-2]].concat(m,[m[1]]),I))}function sw(m,I){return m.length<3?my(m):m[0]+W_(m,s3(m,I))}function W_(m,I){if(I.length<1||m.length!=I.length&&m.length!=I.length+2)return my(m);var ee=m.length!=I.length,we="",Ue=m[0],We=m[1],Do=I[0],_n=Do,jl=1;if(ee&&(we+="Q"+(We[0]-Do[0]*2/3)+","+(We[1]-Do[1]*2/3)+","+We[0]+","+We[1],Ue=m[1],jl=2),I.length>1){_n=I[1],We=m[jl],jl++,we+="C"+(Ue[0]+Do[0])+","+(Ue[1]+Do[1])+","+(We[0]-_n[0])+","+(We[1]-_n[1])+","+We[0]+","+We[1];for(var Cp=2;Cp<I.length;Cp++,jl++)We=m[jl],_n=I[Cp],we+="S"+(We[0]-_n[0])+","+(We[1]-_n[1])+","+We[0]+","+We[1]}if(ee){var Lp=m[jl];we+="Q"+(We[0]+_n[0]*2/3)+","+(We[1]+_n[1]*2/3)+","+Lp[0]+","+Lp[1]}return we}function s3(m,I){for(var ee=[],we=(1-I)/2,Ue,We=m[0],Do=m[1],_n=1,jl=m.length;++_n<jl;)Ue=We,We=Do,Do=m[_n],ee.push([we*(Do[0]-Ue[0]),we*(Do[1]-Ue[1])]);return ee}function A5(m){if(m.length<3)return my(m);var I=1,ee=m.length,we=m[0],Ue=we[0],We=we[1],Do=[Ue,Ue,Ue,(we=m[1])[0]],_n=[We,We,We,we[1]],jl=[Ue,",",We,"L",Sy(Iy,Do),",",Sy(Iy,_n)];for(m.push(m[ee-1]);++I<=ee;)we=m[I],Do.shift(),Do.push(we[0]),_n.shift(),_n.push(we[1]),Kx(jl,Do,_n);return m.pop(),jl.push("L",we),jl.join("")}function lw(m){if(m.length<4)return my(m);for(var I=[],ee=-1,we=m.length,Ue,We=[0],Do=[0];++ee<3;)Ue=m[ee],We.push(Ue[0]),Do.push(Ue[1]);for(I.push(Sy(Iy,We)+","+Sy(Iy,Do)),--ee;++ee<we;)Ue=m[ee],We.shift(),We.push(Ue[0]),Do.shift(),Do.push(Ue[1]),Kx(I,We,Do);return I.join("")}function C5(m){for(var I,ee=-1,we=m.length,Ue=we+4,We,Do=[],_n=[];++ee<4;)We=m[ee%we],Do.push(We[0]),_n.push(We[1]);for(I=[Sy(Iy,Do),",",Sy(Iy,_n)],--ee;++ee<Ue;)We=m[ee%we],Do.shift(),Do.push(We[0]),_n.shift(),_n.push(We[1]),Kx(I,Do,_n);return I.join("")}function S2(m,I){var ee=m.length-1;if(ee)for(var we=m[0][0],Ue=m[0][1],We=m[ee][0]-we,Do=m[ee][1]-Ue,_n=-1,jl,Cp;++_n<=ee;)jl=m[_n],Cp=_n/ee,jl[0]=I*jl[0]+(1-I)*(we+Cp*We),jl[1]=I*jl[1]+(1-I)*(Ue+Cp*Do);return A5(m)}function Sy(m,I){return m[0]*I[0]+m[1]*I[1]+m[2]*I[2]+m[3]*I[3]}var l3=[0,2/3,1/3,0],R5=[0,1/3,2/3,0],Iy=[0,1/6,2/3,1/6];function Kx(m,I,ee){m.push("C",Sy(l3,I),",",Sy(l3,ee),",",Sy(R5,I),",",Sy(R5,ee),",",Sy(Iy,I),",",Sy(Iy,ee))}function X_(m,I){return(I[1]-m[1])/(I[0]-m[0])}function Z_(m){for(var I=0,ee=m.length-1,we=[],Ue=m[0],We=m[1],Do=we[0]=X_(Ue,We);++I<ee;)we[I]=(Do+(Do=X_(Ue=We,We=m[I+1])))/2;return we[I]=Do,we}function c3(m){for(var I=[],ee,we,Ue,We,Do=Z_(m),_n=-1,jl=m.length-1;++_n<jl;)ee=X_(m[_n],m[_n+1]),w(ee)<Tp?Do[_n]=Do[_n+1]=0:(we=Do[_n]/ee,Ue=Do[_n+1]/ee,We=we*we+Ue*Ue,We>9&&(We=ee*3/Math.sqrt(We),Do[_n]=We*we,Do[_n+1]=We*Ue));for(_n=-1;++_n<=jl;)We=(m[Math.min(jl,_n+1)][0]-m[Math.max(0,_n-1)][0])/(6*(1+Do[_n]*Do[_n])),I.push([We||0,Do[_n]*We||0]);return I}function u3(m){return m.length<3?my(m):m[0]+W_(m,c3(m))}g.svg.line.radial=function(){var m=o3(o_);return m.radius=m.x,delete m.x,m.angle=m.y,delete m.y,m};function o_(m){for(var I,ee=-1,we=m.length,Ue,We;++ee<we;)I=m[ee],Ue=I[0],We=I[1]-Vl,I[0]=Ue*Math.cos(We),I[1]=Ue*Math.sin(We);return m}function d3(m){var I=tg,ee=tg,we=0,Ue=Og,We=Py,Do=my,_n=Do.key,jl=Do,Cp="L",Lp=.7;function n0(d0){var B0=[],Q0=[],f0=[],z0=-1,I0=d0.length,J0,K0=u0(I),j0=u0(we),Km=I===ee?function(){return i}:u0(ee),n=we===Ue?function(){return l}:u0(Ue),i,l;function E(){B0.push("M",Do(m(f0),Lp),Cp,jl(m(Q0.reverse()),Lp),"Z")}for(;++z0<I0;)We.call(this,J0=d0[z0],z0)?(Q0.push([i=+K0.call(this,J0,z0),l=+j0.call(this,J0,z0)]),f0.push([+Km.call(this,J0,z0),+n.call(this,J0,z0)])):Q0.length&&(E(),Q0=[],f0=[]);return Q0.length&&E(),B0.length?B0.join(""):null}return n0.x=function(d0){return arguments.length?(I=ee=d0,n0):ee},n0.x0=function(d0){return arguments.length?(I=d0,n0):I},n0.x1=function(d0){return arguments.length?(ee=d0,n0):ee},n0.y=function(d0){return arguments.length?(we=Ue=d0,n0):Ue},n0.y0=function(d0){return arguments.length?(we=d0,n0):we},n0.y1=function(d0){return arguments.length?(Ue=d0,n0):Ue},n0.defined=function(d0){return arguments.length?(We=d0,n0):We},n0.interpolate=function(d0){return arguments.length?(typeof d0=="function"?_n=Do=d0:_n=(Do=M2.get(d0)||my).key,jl=Do.reverse||Do,Cp=Do.closed?"M":"L",n0):_n},n0.tension=function(d0){return arguments.length?(Lp=d0,n0):Lp},n0}Dx.reverse=Y_,Y_.reverse=Dx,g.svg.area=function(){return d3(Ae)},g.svg.area.radial=function(){var m=d3(o_);return m.radius=m.x,delete m.x,m.innerRadius=m.x0,delete m.x0,m.outerRadius=m.x1,delete m.x1,m.angle=m.y,delete m.y,m.startAngle=m.y0,delete m.y0,m.endAngle=m.y1,delete m.y1,m};function h3(m){return m.source}function L5(m){return m.target}g.svg.chord=function(){var m=h3,I=L5,ee=D5,we=$_,Ue=i3;function We(Lp,n0){var d0=Do(this,m,Lp,n0),B0=Do(this,I,Lp,n0);return"M"+d0.p0+jl(d0.r,d0.p1,d0.a1-d0.a0)+(_n(d0,B0)?Cp(d0.r,d0.p1,d0.r,d0.p0):Cp(d0.r,d0.p1,B0.r,B0.p0)+jl(B0.r,B0.p1,B0.a1-B0.a0)+Cp(B0.r,B0.p1,d0.r,d0.p0))+"Z"}function Do(Lp,n0,d0,B0){var Q0=n0.call(Lp,d0,B0),f0=ee.call(Lp,Q0,B0),z0=we.call(Lp,Q0,B0)-Vl,I0=Ue.call(Lp,Q0,B0)-Vl;return{r:f0,a0:z0,a1:I0,p0:[f0*Math.cos(z0),f0*Math.sin(z0)],p1:[f0*Math.cos(I0),f0*Math.sin(I0)]}}function _n(Lp,n0){return Lp.a0==n0.a0&&Lp.a1==n0.a1}function jl(Lp,n0,d0){return"A"+Lp+","+Lp+" 0 "+ +(d0>ft)+",1 "+n0}function Cp(Lp,n0,d0,B0){return"Q 0,0 "+B0}return We.radius=function(Lp){return arguments.length?(ee=u0(Lp),We):ee},We.source=function(Lp){return arguments.length?(m=u0(Lp),We):m},We.target=function(Lp){return arguments.length?(I=u0(Lp),We):I},We.startAngle=function(Lp){return arguments.length?(we=u0(Lp),We):we},We.endAngle=function(Lp){return arguments.length?(Ue=u0(Lp),We):Ue},We};function D5(m){return m.radius}g.svg.diagonal=function(){var m=h3,I=L5,ee=k5;function we(Ue,We){var Do=m.call(this,Ue,We),_n=I.call(this,Ue,We),jl=(Do.y+_n.y)/2,Cp=[Do,{x:Do.x,y:jl},{x:_n.x,y:jl},_n];return Cp=Cp.map(ee),"M"+Cp[0]+"C"+Cp[1]+" "+Cp[2]+" "+Cp[3]}return we.source=function(Ue){return arguments.length?(m=u0(Ue),we):m},we.target=function(Ue){return arguments.length?(I=u0(Ue),we):I},we.projection=function(Ue){return arguments.length?(ee=Ue,we):ee},we};function k5(m){return[m.x,m.y]}g.svg.diagonal.radial=function(){var m=g.svg.diagonal(),I=k5,ee=m.projection;return m.projection=function(we){return arguments.length?ee(f3(I=we)):I},m};function f3(m){return function(){var I=m.apply(this,arguments),ee=I[0],we=I[1]-Vl;return[ee*Math.cos(we),ee*Math.sin(we)]}}g.svg.symbol=function(){var m=J_,I=cw;function ee(we,Ue){return(l_.get(m.call(this,we,Ue))||s_)(I.call(this,we,Ue))}return ee.type=function(we){return arguments.length?(m=u0(we),ee):m},ee.size=function(we){return arguments.length?(I=u0(we),ee):I},ee};function cw(){return 64}function J_(){return"circle"}function s_(m){var I=Math.sqrt(m/ft);return"M0,"+I+"A"+I+","+I+" 0 1,1 0,"+-I+"A"+I+","+I+" 0 1,1 0,"+I+"Z"}var l_=g.map({circle:s_,cross:function(m){var I=Math.sqrt(m/5)/2;return"M"+-3*I+","+-I+"H"+-I+"V"+-3*I+"H"+I+"V"+-I+"H"+3*I+"V"+I+"H"+I+"V"+3*I+"H"+-I+"V"+I+"H"+-3*I+"Z"},diamond:function(m){var I=Math.sqrt(m/(2*T2)),ee=I*T2;return"M0,"+-I+"L"+ee+",0 0,"+I+" "+-ee+",0Z"},square:function(m){var I=Math.sqrt(m)/2;return"M"+-I+","+-I+"L"+I+","+-I+" "+I+","+I+" "+-I+","+I+"Z"},"triangle-down":function(m){var I=Math.sqrt(m/K_),ee=I*K_/2;return"M0,"+ee+"L"+I+","+-ee+" "+-I+","+-ee+"Z"},"triangle-up":function(m){var I=Math.sqrt(m/K_),ee=I*K_/2;return"M0,"+-ee+"L"+I+","+ee+" "+-I+","+ee+"Z"}});g.svg.symbolTypes=l_.keys();var K_=Math.sqrt(3),T2=Math.tan(30*Np);pe.transition=function(m){for(var I=gx||++m3,ee=g3(m),we=[],Ue,We,Do=c_||{time:Date.now(),ease:$3,delay:0,duration:250},_n=-1,jl=this.length;++_n<jl;){we.push(Ue=[]);for(var Cp=this[_n],Lp=-1,n0=Cp.length;++Lp<n0;)(We=Cp[Lp])&&rb(We,Lp,ee,I,Do),Ue.push(We)}return E2(we,ee,I)},pe.interrupt=function(m){return this.each(m==null?Q_:p3(g3(m)))};var Q_=p3(g3());function p3(m){return function(){var I,ee,we;(I=this[m])&&(we=I[ee=I.active])&&(we.timer.c=null,we.timer.t=NaN,--I.count?delete I[ee]:delete this[m],I.active+=.5,we.event&&we.event.interrupt.call(this,this.__data__,we.index))}}function E2(m,I,ee){return Se(m,iy),m.namespace=I,m.id=ee,m}var iy=[],m3=0,gx,c_;iy.call=pe.call,iy.empty=pe.empty,iy.node=pe.node,iy.size=pe.size,g.transition=function(m,I){return m&&m.transition?gx?m.transition(I):m:g.selection().transition(m)},g.transition.prototype=iy,iy.select=function(m){var I=this.id,ee=this.namespace,we=[],Ue,We,Do;m=q(m);for(var _n=-1,jl=this.length;++_n<jl;){we.push(Ue=[]);for(var Cp=this[_n],Lp=-1,n0=Cp.length;++Lp<n0;)(Do=Cp[Lp])&&(We=m.call(Do,Do.__data__,Lp,_n))?("__data__"in Do&&(We.__data__=Do.__data__),rb(We,Lp,ee,I,Do[ee][I]),Ue.push(We)):Ue.push(null)}return E2(we,ee,I)},iy.selectAll=function(m){var I=this.id,ee=this.namespace,we=[],Ue,We,Do,_n,jl;m=ae(m);for(var Cp=-1,Lp=this.length;++Cp<Lp;)for(var n0=this[Cp],d0=-1,B0=n0.length;++d0<B0;)if(Do=n0[d0]){jl=Do[ee][I],We=m.call(Do,Do.__data__,d0,Cp),we.push(Ue=[]);for(var Q0=-1,f0=We.length;++Q0<f0;)(_n=We[Q0])&&rb(_n,Q0,ee,I,jl),Ue.push(_n)}return E2(we,ee,I)},iy.filter=function(m){var I=[],ee,we,Ue;typeof m!="function"&&(m=dt(m));for(var We=0,Do=this.length;We<Do;We++){I.push(ee=[]);for(var we=this[We],_n=0,jl=we.length;_n<jl;_n++)(Ue=we[_n])&&m.call(Ue,Ue.__data__,_n,We)&&ee.push(Ue)}return E2(I,this.namespace,this.id)},iy.tween=function(m,I){var ee=this.id,we=this.namespace;return arguments.length<2?this.node()[we][ee].tween.get(m):Bp(this,I==null?function(Ue){Ue[we][ee].tween.remove(m)}:function(Ue){Ue[we][ee].tween.set(m,I)})};function eb(m,I,ee,we){var Ue=m.id,We=m.namespace;return Bp(m,typeof ee=="function"?function(Do,_n,jl){Do[We][Ue].tween.set(I,we(ee.call(Do,Do.__data__,_n,jl)))}:(ee=we(ee),function(Do){Do[We][Ue].tween.set(I,ee)}))}iy.attr=function(m,I){if(arguments.length<2){for(I in m)this.attr(I,m[I]);return this}var ee=m=="transform"?Vb:Wv,we=g.ns.qualify(m);function Ue(){this.removeAttribute(we)}function We(){this.removeAttributeNS(we.space,we.local)}function Do(jl){return jl==null?Ue:(jl+="",function(){var Cp=this.getAttribute(we),Lp;return Cp!==jl&&(Lp=ee(Cp,jl),function(n0){this.setAttribute(we,Lp(n0))})})}function _n(jl){return jl==null?We:(jl+="",function(){var Cp=this.getAttributeNS(we.space,we.local),Lp;return Cp!==jl&&(Lp=ee(Cp,jl),function(n0){this.setAttributeNS(we.space,we.local,Lp(n0))})})}return eb(this,"attr."+m,I,we.local?_n:Do)},iy.attrTween=function(m,I){var ee=g.ns.qualify(m);function we(We,Do){var _n=I.call(this,We,Do,this.getAttribute(ee));return _n&&function(jl){this.setAttribute(ee,_n(jl))}}function Ue(We,Do){var _n=I.call(this,We,Do,this.getAttributeNS(ee.space,ee.local));return _n&&function(jl){this.setAttributeNS(ee.space,ee.local,_n(jl))}}return this.tween("attr."+m,ee.local?Ue:we)},iy.style=function(m,I,ee){var we=arguments.length;if(we<3){if(typeof m!="string"){we<2&&(I="");for(ee in m)this.style(ee,m[ee],I);return this}ee=""}function Ue(){this.style.removeProperty(m)}function We(Do){return Do==null?Ue:(Do+="",function(){var _n=y(this).getComputedStyle(this,null).getPropertyValue(m),jl;return _n!==Do&&(jl=Wv(_n,Do),function(Cp){this.style.setProperty(m,jl(Cp),ee)})})}return eb(this,"style."+m,I,We)},iy.styleTween=function(m,I,ee){arguments.length<3&&(ee="");function we(Ue,We){var Do=I.call(this,Ue,We,y(this).getComputedStyle(this,null).getPropertyValue(m));return Do&&function(_n){this.style.setProperty(m,Do(_n),ee)}}return this.tween("style."+m,we)},iy.text=function(m){return eb(this,"text",m,tb)};function tb(m){return m==null&&(m=""),function(){this.textContent=m}}iy.remove=function(){var m=this.namespace;return this.each("end.transition",function(){var I;this[m].count<2&&(I=this.parentNode)&&I.removeChild(this)})},iy.ease=function(m){var I=this.id,ee=this.namespace;return arguments.length<1?this.node()[ee][I].ease:(typeof m!="function"&&(m=g.ease.apply(g,arguments)),Bp(this,function(we){we[ee][I].ease=m}))},iy.delay=function(m){var I=this.id,ee=this.namespace;return arguments.length<1?this.node()[ee][I].delay:Bp(this,typeof m=="function"?function(we,Ue,We){we[ee][I].delay=+m.call(we,we.__data__,Ue,We)}:(m=+m,function(we){we[ee][I].delay=m}))},iy.duration=function(m){var I=this.id,ee=this.namespace;return arguments.length<1?this.node()[ee][I].duration:Bp(this,typeof m=="function"?function(we,Ue,We){we[ee][I].duration=Math.max(1,m.call(we,we.__data__,Ue,We))}:(m=Math.max(1,m),function(we){we[ee][I].duration=m}))},iy.each=function(m,I){var ee=this.id,we=this.namespace;if(arguments.length<2){var Ue=c_,We=gx;try{gx=ee,Bp(this,function(Do,_n,jl){c_=Do[we][ee],m.call(Do,Do.__data__,_n,jl)})}finally{c_=Ue,gx=We}}else Bp(this,function(Do){var _n=Do[we][ee];(_n.event||(_n.event=g.dispatch("start","end","interrupt"))).on(m,I)});return this},iy.transition=function(){for(var m=this.id,I=++m3,ee=this.namespace,we=[],Ue,We,Do,_n,jl=0,Cp=this.length;jl<Cp;jl++){we.push(Ue=[]);for(var We=this[jl],Lp=0,n0=We.length;Lp<n0;Lp++)(Do=We[Lp])&&(_n=Do[ee][m],rb(Do,Lp,ee,I,{time:_n.time,ease:_n.ease,delay:_n.delay+_n.duration,duration:_n.duration})),Ue.push(Do)}return E2(we,ee,I)};function g3(m){return m==null?"__transition__":"__transition_"+m+"__"}function rb(m,I,ee,we,Ue){var We=m[ee]||(m[ee]={active:0,count:0}),Do=We[we],_n,jl,Cp,Lp,n0;function d0(f0){var z0=Do.delay;if(jl.t=z0+_n,z0<=f0)return B0(f0-z0);jl.c=B0}function B0(f0){var z0=We.active,I0=We[z0];I0&&(I0.timer.c=null,I0.timer.t=NaN,--We.count,delete We[z0],I0.event&&I0.event.interrupt.call(m,m.__data__,I0.index));for(var J0 in We)if(+J0<we){var K0=We[J0];K0.timer.c=null,K0.timer.t=NaN,--We.count,delete We[J0]}jl.c=Q0,E1(function(){return jl.c&&Q0(f0||1)&&(jl.c=null,jl.t=NaN),1},0,_n),We.active=we,Do.event&&Do.event.start.call(m,m.__data__,I),n0=[],Do.tween.forEach(function(j0,Km){(Km=Km.call(m,m.__data__,I))&&n0.push(Km)}),Lp=Do.ease,Cp=Do.duration}function Q0(f0){for(var z0=f0/Cp,I0=Lp(z0),J0=n0.length;J0>0;)n0[--J0].call(m,I0);if(z0>=1)return Do.event&&Do.event.end.call(m,m.__data__,I),--We.count?delete We[we]:delete m[ee],1}Do||(_n=Ue.time,jl=E1(d0,0,_n),Do=We[we]={tween:new H,time:_n,timer:jl,delay:Ue.delay,duration:Ue.duration,ease:Ue.ease,index:I},Ue=null,++We.count)}g.svg.axis=function(){var m=g.scale.linear(),I=nb,ee=6,we=6,Ue=3,We=[10],Do=null,_n;function jl(Cp){Cp.each(function(){var Lp=g.select(this),n0=this.__chart__||m,d0=this.__chart__=m.copy(),B0=Do??(d0.ticks?d0.ticks.apply(d0,We):d0.domain()),Q0=_n??(d0.tickFormat?d0.tickFormat.apply(d0,We):Ae),f0=Lp.selectAll(".tick").data(B0,d0),z0=f0.enter().insert("g",".domain").attr("class","tick").style("opacity",Tp),I0=g.transition(f0.exit()).style("opacity",Tp).remove(),J0=g.transition(f0.order()).style("opacity",1),K0=Math.max(ee,0)+Ue,j0,Km=dy(d0),n=Lp.selectAll(".domain").data([0]),i=(n.enter().append("path").attr("class","domain"),g.transition(n));z0.append("line"),z0.append("text");var l=z0.select("line"),E=J0.select("line"),te=f0.select("text").text(Q0),Me=z0.select("text"),Io=J0.select("text"),Rp=I==="top"||I==="left"?-1:1,L0,hm,Am,X0;if(I==="bottom"||I==="top"?(j0=ab,L0="x",Am="y",hm="x2",X0="y2",te.attr("dy",Rp<0?"0em":".71em").style("text-anchor","middle"),i.attr("d","M"+Km[0]+","+Rp*we+"V0H"+Km[1]+"V"+Rp*we)):(j0=y3,L0="y",Am="x",hm="y2",X0="x2",te.attr("dy",".32em").style("text-anchor",Rp<0?"end":"start"),i.attr("d","M"+Rp*we+","+Km[0]+"H0V"+Km[1]+"H"+Rp*we)),l.attr(X0,Rp*ee),Me.attr(Am,Rp*K0),E.attr(hm,0).attr(X0,Rp*ee),Io.attr(L0,0).attr(Am,Rp*K0),d0.rangeBand){var em=d0,cm=em.rangeBand()/2;n0=d0=function(L1){return em(L1)+cm}}else n0.rangeBand?n0=d0:I0.call(j0,d0,n0);z0.call(j0,n0,d0),J0.call(j0,d0,d0)})}return jl.scale=function(Cp){return arguments.length?(m=Cp,jl):m},jl.orient=function(Cp){return arguments.length?(I=Cp in v3?Cp+"":nb,jl):I},jl.ticks=function(){return arguments.length?(We=h(arguments),jl):We},jl.tickValues=function(Cp){return arguments.length?(Do=Cp,jl):Do},jl.tickFormat=function(Cp){return arguments.length?(_n=Cp,jl):_n},jl.tickSize=function(Cp){var Lp=arguments.length;return Lp?(ee=+Cp,we=+arguments[Lp-1],jl):ee},jl.innerTickSize=function(Cp){return arguments.length?(ee=+Cp,jl):ee},jl.outerTickSize=function(Cp){return arguments.length?(we=+Cp,jl):we},jl.tickPadding=function(Cp){return arguments.length?(Ue=+Cp,jl):Ue},jl.tickSubdivide=function(){return arguments.length&&jl},jl};var nb="bottom",v3={top:1,right:1,bottom:1,left:1};function ab(m,I,ee){m.attr("transform",function(we){var Ue=I(we);return"translate("+(isFinite(Ue)?Ue:ee(we))+",0)"})}function y3(m,I,ee){m.attr("transform",function(we){var Ue=I(we);return"translate(0,"+(isFinite(Ue)?Ue:ee(we))+")"})}g.svg.brush=function(){var m=Ei(Lp,"brushstart","brush","brushend"),I=null,ee=null,we=[0,0],Ue=[0,0],We,Do,_n=!0,jl=!0,Cp=u_[0];function Lp(f0){f0.each(function(){var z0=g.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Q0).on("touchstart.brush",Q0),I0=z0.selectAll(".background").data([0]);I0.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),z0.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var J0=z0.selectAll(".resize").data(Cp,Ae);J0.exit().remove(),J0.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return N5[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),J0.style("display",Lp.empty()?"none":null);var K0=g.transition(z0),j0=g.transition(I0),Km;I&&(Km=dy(I),j0.attr("x",Km[0]).attr("width",Km[1]-Km[0]),d0(K0)),ee&&(Km=dy(ee),j0.attr("y",Km[0]).attr("height",Km[1]-Km[0]),B0(K0)),n0(K0)})}Lp.event=function(f0){f0.each(function(){var z0=m.of(this,arguments),I0={x:we,y:Ue,i:We,j:Do},J0=this.__chart__||I0;this.__chart__=I0,gx?g.select(this).transition().each("start.brush",function(){We=J0.i,Do=J0.j,we=J0.x,Ue=J0.y,z0({type:"brushstart"})}).tween("brush:brush",function(){var K0=Zy(we,I0.x),j0=Zy(Ue,I0.y);return We=Do=null,function(Km){we=I0.x=K0(Km),Ue=I0.y=j0(Km),z0({type:"brush",mode:"resize"})}}).each("end.brush",function(){We=I0.i,Do=I0.j,z0({type:"brush",mode:"resize"}),z0({type:"brushend"})}):(z0({type:"brushstart"}),z0({type:"brush",mode:"resize"}),z0({type:"brushend"}))})};function n0(f0){f0.selectAll(".resize").attr("transform",function(z0){return"translate("+we[+/e$/.test(z0)]+","+Ue[+/^s/.test(z0)]+")"})}function d0(f0){f0.select(".extent").attr("x",we[0]),f0.selectAll(".extent,.n>rect,.s>rect").attr("width",we[1]-we[0])}function B0(f0){f0.select(".extent").attr("y",Ue[0]),f0.selectAll(".extent,.e>rect,.w>rect").attr("height",Ue[1]-Ue[0])}function Q0(){var f0=this,z0=g.select(g.event.target),I0=m.of(f0,arguments),J0=g.select(f0),K0=z0.datum(),j0=!/^(n|s)$/.test(K0)&&I,Km=!/^(e|w)$/.test(K0)&&ee,n=z0.classed("extent"),i=rm(f0),l,E=g.mouse(f0),te,Me=g.select(y(f0)).on("keydown.brush",L0).on("keyup.brush",hm);if(g.event.changedTouches?Me.on("touchmove.brush",Am).on("touchend.brush",em):Me.on("mousemove.brush",Am).on("mouseup.brush",em),J0.interrupt().selectAll("*").interrupt(),n)E[0]=we[0]-E[0],E[1]=Ue[0]-E[1];else if(K0){var Io=+/w$/.test(K0),Rp=+/^n/.test(K0);te=[we[1-Io]-E[0],Ue[1-Rp]-E[1]],E[0]=we[Io],E[1]=Ue[Rp]}else g.event.altKey&&(l=E.slice());J0.style("pointer-events","none").selectAll(".resize").style("display",null),g.select("body").style("cursor",z0.style("cursor")),I0({type:"brushstart"}),Am();function L0(){g.event.keyCode==32&&(n||(l=null,E[0]-=we[1],E[1]-=Ue[1],n=2),nt())}function hm(){g.event.keyCode==32&&n==2&&(E[0]+=we[1],E[1]+=Ue[1],n=0,nt())}function Am(){var cm=g.mouse(f0),L1=!1;te&&(cm[0]+=te[0],cm[1]+=te[1]),n||(g.event.altKey?(l||(l=[(we[0]+we[1])/2,(Ue[0]+Ue[1])/2]),E[0]=we[+(cm[0]<l[0])],E[1]=Ue[+(cm[1]<l[1])]):l=null),j0&&X0(cm,I,0)&&(d0(J0),L1=!0),Km&&X0(cm,ee,1)&&(B0(J0),L1=!0),L1&&(n0(J0),I0({type:"brush",mode:n?"move":"resize"}))}function X0(cm,L1,Y1){var Rg=dy(L1),nm=Rg[0],Y0=Rg[1],gm=E[Y1],Wm=Y1?Ue:we,ng=Wm[1]-Wm[0],Lg,X1;if(n&&(nm-=gm,Y0-=ng+gm),Lg=(Y1?jl:_n)?Math.max(nm,Math.min(Y0,cm[Y1])):cm[Y1],n?X1=(Lg+=gm)+ng:(l&&(gm=Math.max(nm,Math.min(Y0,2*l[Y1]-Lg))),gm<Lg?(X1=Lg,Lg=gm):X1=gm),Wm[0]!=Lg||Wm[1]!=X1)return Y1?Do=null:We=null,Wm[0]=Lg,Wm[1]=X1,!0}function em(){Am(),J0.style("pointer-events","all").selectAll(".resize").style("display",Lp.empty()?"none":null),g.select("body").style("cursor",null),Me.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),i(),I0({type:"brushend"})}}return Lp.x=function(f0){return arguments.length?(I=f0,Cp=u_[!I<<1|!ee],Lp):I},Lp.y=function(f0){return arguments.length?(ee=f0,Cp=u_[!I<<1|!ee],Lp):ee},Lp.clamp=function(f0){return arguments.length?(I&&ee?(_n=!!f0[0],jl=!!f0[1]):I?_n=!!f0:ee&&(jl=!!f0),Lp):I&&ee?[_n,jl]:I?_n:ee?jl:null},Lp.extent=function(f0){var z0,I0,J0,K0,j0;return arguments.length?(I&&(z0=f0[0],I0=f0[1],ee&&(z0=z0[0],I0=I0[0]),We=[z0,I0],I.invert&&(z0=I(z0),I0=I(I0)),I0<z0&&(j0=z0,z0=I0,I0=j0),(z0!=we[0]||I0!=we[1])&&(we=[z0,I0])),ee&&(J0=f0[0],K0=f0[1],I&&(J0=J0[1],K0=K0[1]),Do=[J0,K0],ee.invert&&(J0=ee(J0),K0=ee(K0)),K0<J0&&(j0=J0,J0=K0,K0=j0),(J0!=Ue[0]||K0!=Ue[1])&&(Ue=[J0,K0])),Lp):(I&&(We?(z0=We[0],I0=We[1]):(z0=we[0],I0=we[1],I.invert&&(z0=I.invert(z0),I0=I.invert(I0)),I0<z0&&(j0=z0,z0=I0,I0=j0))),ee&&(Do?(J0=Do[0],K0=Do[1]):(J0=Ue[0],K0=Ue[1],ee.invert&&(J0=ee.invert(J0),K0=ee.invert(K0)),K0<J0&&(j0=J0,J0=K0,K0=j0))),I&&ee?[[z0,J0],[I0,K0]]:I?[z0,I0]:ee&&[J0,K0])},Lp.clear=function(){return Lp.empty()||(we=[0,0],Ue=[0,0],We=Do=null),Lp},Lp.empty=function(){return!!I&&we[0]==we[1]||!!ee&&Ue[0]==Ue[1]},g.rebind(Lp,m,"on")};var N5={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},u_=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];g.text=g0(function(m){return m.responseText}),g.json=function(m,I){return H0(m,"application/json",kx,I)};function kx(m){return JSON.parse(m.responseText)}g.html=function(m,I){return H0(m,"text/html",Nx,I)};function Nx(m){var I=x.createRange();return I.selectNode(x.body),I.createContextualFragment(m.responseText)}g.xml=g0(function(m){return m.responseXML}),typeof ue=="object"&&ue.exports?ue.exports=g:this.d3=g}).apply(self)}),d=t((me,ue)=>{(function(g,s){typeof me=="object"&&typeof ue<"u"?s(me):(g=g||self,s(g.d3=g.d3||{}))})(me,function(g){var s=new Date,h=new Date;function x(dt,yp,Bp,Jp){function m0(s0){return dt(s0=arguments.length===0?new Date:new Date(+s0)),s0}return m0.floor=function(s0){return dt(s0=new Date(+s0)),s0},m0.ceil=function(s0){return dt(s0=new Date(s0-1)),yp(s0,1),dt(s0),s0},m0.round=function(s0){var y0=m0(s0),M0=m0.ceil(s0);return s0-y0<M0-s0?y0:M0},m0.offset=function(s0,y0){return yp(s0=new Date(+s0),y0==null?1:Math.floor(y0)),s0},m0.range=function(s0,y0,M0){var T0=[],G0;if(s0=m0.ceil(s0),M0=M0==null?1:Math.floor(M0),!(s0<y0)||!(M0>0))return T0;do T0.push(G0=new Date(+s0)),yp(s0,M0),dt(s0);while(G0<s0&&s0<y0);return T0},m0.filter=function(s0){return x(function(y0){if(y0>=y0)for(;dt(y0),!s0(y0);)y0.setTime(y0-1)},function(y0,M0){if(y0>=y0)if(M0<0)for(;++M0<=0;)for(;yp(y0,-1),!s0(y0););else for(;--M0>=0;)for(;yp(y0,1),!s0(y0););})},Bp&&(m0.count=function(s0,y0){return s.setTime(+s0),h.setTime(+y0),dt(s),dt(h),Math.floor(Bp(s,h))},m0.every=function(s0){return s0=Math.floor(s0),!isFinite(s0)||!(s0>0)?null:s0>1?m0.filter(Jp?function(y0){return Jp(y0)%s0===0}:function(y0){return m0.count(0,y0)%s0===0}):m0}),m0}var v=x(function(){},function(dt,yp){dt.setTime(+dt+yp)},function(dt,yp){return yp-dt});v.every=function(dt){return dt=Math.floor(dt),!isFinite(dt)||!(dt>0)?null:dt>1?x(function(yp){yp.setTime(Math.floor(yp/dt)*dt)},function(yp,Bp){yp.setTime(+yp+Bp*dt)},function(yp,Bp){return(Bp-yp)/dt}):v};var y=v.range,b=1e3,T=6e4,u=36e5,k=864e5,M=6048e5,D=x(function(dt){dt.setTime(dt-dt.getMilliseconds())},function(dt,yp){dt.setTime(+dt+yp*b)},function(dt,yp){return(yp-dt)/b},function(dt){return dt.getUTCSeconds()}),B=D.range,P=x(function(dt){dt.setTime(dt-dt.getMilliseconds()-dt.getSeconds()*b)},function(dt,yp){dt.setTime(+dt+yp*T)},function(dt,yp){return(yp-dt)/T},function(dt){return dt.getMinutes()}),N=P.range,z=x(function(dt){dt.setTime(dt-dt.getMilliseconds()-dt.getSeconds()*b-dt.getMinutes()*T)},function(dt,yp){dt.setTime(+dt+yp*u)},function(dt,yp){return(yp-dt)/u},function(dt){return dt.getHours()}),F=z.range,w=x(function(dt){dt.setHours(0,0,0,0)},function(dt,yp){dt.setDate(dt.getDate()+yp)},function(dt,yp){return(yp-dt-(yp.getTimezoneOffset()-dt.getTimezoneOffset())*T)/k},function(dt){return dt.getDate()-1}),L=w.range;function O(dt){return x(function(yp){yp.setDate(yp.getDate()-(yp.getDay()+7-dt)%7),yp.setHours(0,0,0,0)},function(yp,Bp){yp.setDate(yp.getDate()+Bp*7)},function(yp,Bp){return(Bp-yp-(Bp.getTimezoneOffset()-yp.getTimezoneOffset())*T)/M})}var H=O(0),W=O(1),Ce=O(2),he=O(3),le=O(4),Y=O(5),Re=O(6),fe=H.range,xe=W.range,ge=Ce.range,ye=he.range,Ae=le.range,Le=Y.range,ce=Re.range,ke=x(function(dt){dt.setDate(1),dt.setHours(0,0,0,0)},function(dt,yp){dt.setMonth(dt.getMonth()+yp)},function(dt,yp){return yp.getMonth()-dt.getMonth()+(yp.getFullYear()-dt.getFullYear())*12},function(dt){return dt.getMonth()}),Pe=ke.range,tt=x(function(dt){dt.setMonth(0,1),dt.setHours(0,0,0,0)},function(dt,yp){dt.setFullYear(dt.getFullYear()+yp)},function(dt,yp){return yp.getFullYear()-dt.getFullYear()},function(dt){return dt.getFullYear()});tt.every=function(dt){return!isFinite(dt=Math.floor(dt))||!(dt>0)?null:x(function(yp){yp.setFullYear(Math.floor(yp.getFullYear()/dt)*dt),yp.setMonth(0,1),yp.setHours(0,0,0,0)},function(yp,Bp){yp.setFullYear(yp.getFullYear()+Bp*dt)})};var Ke=tt.range,nt=x(function(dt){dt.setUTCSeconds(0,0)},function(dt,yp){dt.setTime(+dt+yp*T)},function(dt,yp){return(yp-dt)/T},function(dt){return dt.getUTCMinutes()}),yi=nt.range,Ei=x(function(dt){dt.setUTCMinutes(0,0,0)},function(dt,yp){dt.setTime(+dt+yp*u)},function(dt,yp){return(yp-dt)/u},function(dt){return dt.getUTCHours()}),vs=Ei.range,Se=x(function(dt){dt.setUTCHours(0,0,0,0)},function(dt,yp){dt.setUTCDate(dt.getUTCDate()+yp)},function(dt,yp){return(yp-dt)/k},function(dt){return dt.getUTCDate()-1}),Ee=Se.range;function X(dt){return x(function(yp){yp.setUTCDate(yp.getUTCDate()-(yp.getUTCDay()+7-dt)%7),yp.setUTCHours(0,0,0,0)},function(yp,Bp){yp.setUTCDate(yp.getUTCDate()+Bp*7)},function(yp,Bp){return(Bp-yp)/M})}var Oe=X(0),Qe=X(1),pe=X(2),q=X(3),ae=X(4),ve=X(5),Te=X(6),et=Oe.range,bt=Qe.range,dr=pe.range,Ol=q.range,Xl=ae.range,Pp=ve.range,t0=Te.range,Wp=x(function(dt){dt.setUTCDate(1),dt.setUTCHours(0,0,0,0)},function(dt,yp){dt.setUTCMonth(dt.getUTCMonth()+yp)},function(dt,yp){return yp.getUTCMonth()-dt.getUTCMonth()+(yp.getUTCFullYear()-dt.getUTCFullYear())*12},function(dt){return dt.getUTCMonth()}),$p=Wp.range,Lo=x(function(dt){dt.setUTCMonth(0,1),dt.setUTCHours(0,0,0,0)},function(dt,yp){dt.setUTCFullYear(dt.getUTCFullYear()+yp)},function(dt,yp){return yp.getUTCFullYear()-dt.getUTCFullYear()},function(dt){return dt.getUTCFullYear()});Lo.every=function(dt){return!isFinite(dt=Math.floor(dt))||!(dt>0)?null:x(function(yp){yp.setUTCFullYear(Math.floor(yp.getUTCFullYear()/dt)*dt),yp.setUTCMonth(0,1),yp.setUTCHours(0,0,0,0)},function(yp,Bp){yp.setUTCFullYear(yp.getUTCFullYear()+Bp*dt)})};var kl=Lo.range;g.timeDay=w,g.timeDays=L,g.timeFriday=Y,g.timeFridays=Le,g.timeHour=z,g.timeHours=F,g.timeInterval=x,g.timeMillisecond=v,g.timeMilliseconds=y,g.timeMinute=P,g.timeMinutes=N,g.timeMonday=W,g.timeMondays=xe,g.timeMonth=ke,g.timeMonths=Pe,g.timeSaturday=Re,g.timeSaturdays=ce,g.timeSecond=D,g.timeSeconds=B,g.timeSunday=H,g.timeSundays=fe,g.timeThursday=le,g.timeThursdays=Ae,g.timeTuesday=Ce,g.timeTuesdays=ge,g.timeWednesday=he,g.timeWednesdays=ye,g.timeWeek=H,g.timeWeeks=fe,g.timeYear=tt,g.timeYears=Ke,g.utcDay=Se,g.utcDays=Ee,g.utcFriday=ve,g.utcFridays=Pp,g.utcHour=Ei,g.utcHours=vs,g.utcMillisecond=v,g.utcMilliseconds=y,g.utcMinute=nt,g.utcMinutes=yi,g.utcMonday=Qe,g.utcMondays=bt,g.utcMonth=Wp,g.utcMonths=$p,g.utcSaturday=Te,g.utcSaturdays=t0,g.utcSecond=D,g.utcSeconds=B,g.utcSunday=Oe,g.utcSundays=et,g.utcThursday=ae,g.utcThursdays=Xl,g.utcTuesday=pe,g.utcTuesdays=dr,g.utcWednesday=q,g.utcWednesdays=Ol,g.utcWeek=Oe,g.utcWeeks=et,g.utcYear=Lo,g.utcYears=kl,Object.defineProperty(g,"__esModule",{value:!0})})}),p=t((me,ue)=>{(function(g,s){typeof me=="object"&&typeof ue<"u"?s(me,d()):(g=g||self,s(g.d3=g.d3||{},g.d3))})(me,function(g,s){function h(Uo){if(0<=Uo.y&&Uo.y<100){var Tp=new Date(-1,Uo.m,Uo.d,Uo.H,Uo.M,Uo.S,Uo.L);return Tp.setFullYear(Uo.y),Tp}return new Date(Uo.y,Uo.m,Uo.d,Uo.H,Uo.M,Uo.S,Uo.L)}function x(Uo){if(0<=Uo.y&&Uo.y<100){var Tp=new Date(Date.UTC(-1,Uo.m,Uo.d,Uo.H,Uo.M,Uo.S,Uo.L));return Tp.setUTCFullYear(Uo.y),Tp}return new Date(Date.UTC(Uo.y,Uo.m,Uo.d,Uo.H,Uo.M,Uo.S,Uo.L))}function v(Uo,Tp,Be){return{y:Uo,m:Tp,d:Be,H:0,M:0,S:0,L:0}}function y(Uo){var Tp=Uo.dateTime,Be=Uo.date,ft=Uo.time,mn=Uo.periods,Bl=Uo.days,Vl=Uo.shortDays,Np=Uo.months,Up=Uo.shortMonths,Qp=B(mn),Zp=P(mn),Kp=B(Bl),R0=P(Bl),k0=B(Vl),N0=P(Vl),lm=B(Np),Im=P(Np),u1=B(Up),v1=P(Up),b1={a:ig,A:mg,b:P1,B:lg,c:null,d:ke,e:ke,f:yi,H:Pe,I:tt,j:Ke,L:nt,m:Ei,M:vs,p:G1,q:Sm,Q:y0,s:M0,S:Se,u:Ee,U:X,V:Oe,w:Qe,W:pe,x:null,X:null,y:q,Y:ae,Z:ve,"%":s0},Bm={a:Cg,A:Je,b:Ve,B:Mp,c:null,d:Te,e:Te,f:Xl,H:et,I:bt,j:dr,L:Ol,m:Pp,M:t0,p:kp,q:Vp,Q:y0,s:M0,S:Wp,u:$p,U:Lo,V:kl,w:dt,W:yp,x:null,X:null,y:Bp,Y:Jp,Z:m0,"%":s0},fm={a:t1,A:Um,b:z1,B:F1,c:g1,d:le,e:le,f:ye,H:Re,I:Re,j:Y,L:ge,m:he,M:fe,p:Ym,q:Ce,Q:Le,s:ce,S:xe,u:z,U:F,V:w,w:N,W:L,x:V1,X:K1,y:H,Y:O,Z:W,"%":Ae};b1.x=c1(Be,b1),b1.X=c1(ft,b1),b1.c=c1(Tp,b1),Bm.x=c1(Be,Bm),Bm.X=c1(ft,Bm),Bm.c=c1(Tp,Bm);function c1(wp,Ap){return function(Yp){var Fp=[],u0=-1,g0=0,H0=wp.length,Lm,Em,Qm;for(Yp instanceof Date||(Yp=new Date(+Yp));++u0<H0;)wp.charCodeAt(u0)===37&&(Fp.push(wp.slice(g0,u0)),(Em=b[Lm=wp.charAt(++u0)])!=null?Lm=wp.charAt(++u0):Em=Lm==="e"?" ":"0",(Qm=Ap[Lm])&&(Lm=Qm(Yp,Em)),Fp.push(Lm),g0=u0+1);return Fp.push(wp.slice(g0,u0)),Fp.join("")}}function y1(wp,Ap){return function(Yp){var Fp=v(1900,void 0,1),u0=n1(Fp,wp,Yp+="",0),g0,H0;if(u0!=Yp.length)return null;if("Q"in Fp)return new Date(Fp.Q);if("s"in Fp)return new Date(Fp.s*1e3+("L"in Fp?Fp.L:0));if(Ap&&!("Z"in Fp)&&(Fp.Z=0),"p"in Fp&&(Fp.H=Fp.H%12+Fp.p*12),Fp.m===void 0&&(Fp.m="q"in Fp?Fp.q:0),"V"in Fp){if(Fp.V<1||Fp.V>53)return null;"w"in Fp||(Fp.w=1),"Z"in Fp?(g0=x(v(Fp.y,0,1)),H0=g0.getUTCDay(),g0=H0>4||H0===0?s.utcMonday.ceil(g0):s.utcMonday(g0),g0=s.utcDay.offset(g0,(Fp.V-1)*7),Fp.y=g0.getUTCFullYear(),Fp.m=g0.getUTCMonth(),Fp.d=g0.getUTCDate()+(Fp.w+6)%7):(g0=h(v(Fp.y,0,1)),H0=g0.getDay(),g0=H0>4||H0===0?s.timeMonday.ceil(g0):s.timeMonday(g0),g0=s.timeDay.offset(g0,(Fp.V-1)*7),Fp.y=g0.getFullYear(),Fp.m=g0.getMonth(),Fp.d=g0.getDate()+(Fp.w+6)%7)}else("W"in Fp||"U"in Fp)&&("w"in Fp||(Fp.w="u"in Fp?Fp.u%7:"W"in Fp?1:0),H0="Z"in Fp?x(v(Fp.y,0,1)).getUTCDay():h(v(Fp.y,0,1)).getDay(),Fp.m=0,Fp.d="W"in Fp?(Fp.w+6)%7+Fp.W*7-(H0+5)%7:Fp.w+Fp.U*7-(H0+6)%7);return"Z"in Fp?(Fp.H+=Fp.Z/100|0,Fp.M+=Fp.Z%100,x(Fp)):h(Fp)}}function n1(wp,Ap,Yp,Fp){for(var u0=0,g0=Ap.length,H0=Yp.length,Lm,Em;u0<g0;){if(Fp>=H0)return-1;if(Lm=Ap.charCodeAt(u0++),Lm===37){if(Lm=Ap.charAt(u0++),Em=fm[Lm in b?Ap.charAt(u0++):Lm],!Em||(Fp=Em(wp,Yp,Fp))<0)return-1}else if(Lm!=Yp.charCodeAt(Fp++))return-1}return Fp}function Ym(wp,Ap,Yp){var Fp=Qp.exec(Ap.slice(Yp));return Fp?(wp.p=Zp[Fp[0].toLowerCase()],Yp+Fp[0].length):-1}function t1(wp,Ap,Yp){var Fp=k0.exec(Ap.slice(Yp));return Fp?(wp.w=N0[Fp[0].toLowerCase()],Yp+Fp[0].length):-1}function Um(wp,Ap,Yp){var Fp=Kp.exec(Ap.slice(Yp));return Fp?(wp.w=R0[Fp[0].toLowerCase()],Yp+Fp[0].length):-1}function z1(wp,Ap,Yp){var Fp=u1.exec(Ap.slice(Yp));return Fp?(wp.m=v1[Fp[0].toLowerCase()],Yp+Fp[0].length):-1}function F1(wp,Ap,Yp){var Fp=lm.exec(Ap.slice(Yp));return Fp?(wp.m=Im[Fp[0].toLowerCase()],Yp+Fp[0].length):-1}function g1(wp,Ap,Yp){return n1(wp,Tp,Ap,Yp)}function V1(wp,Ap,Yp){return n1(wp,Be,Ap,Yp)}function K1(wp,Ap,Yp){return n1(wp,ft,Ap,Yp)}function ig(wp){return Vl[wp.getDay()]}function mg(wp){return Bl[wp.getDay()]}function P1(wp){return Up[wp.getMonth()]}function lg(wp){return Np[wp.getMonth()]}function G1(wp){return mn[+(wp.getHours()>=12)]}function Sm(wp){return 1+~~(wp.getMonth()/3)}function Cg(wp){return Vl[wp.getUTCDay()]}function Je(wp){return Bl[wp.getUTCDay()]}function Ve(wp){return Up[wp.getUTCMonth()]}function Mp(wp){return Np[wp.getUTCMonth()]}function kp(wp){return mn[+(wp.getUTCHours()>=12)]}function Vp(wp){return 1+~~(wp.getUTCMonth()/3)}return{format:function(wp){var Ap=c1(wp+="",b1);return Ap.toString=function(){return wp},Ap},parse:function(wp){var Ap=y1(wp+="",!1);return Ap.toString=function(){return wp},Ap},utcFormat:function(wp){var Ap=c1(wp+="",Bm);return Ap.toString=function(){return wp},Ap},utcParse:function(wp){var Ap=y1(wp+="",!0);return Ap.toString=function(){return wp},Ap}}}var b={"-":"",_:" ",0:"0"},T=/^\s*\d+/,u=/^%/,k=/[\\^$*+?|[\]().{}]/g;function M(Uo,Tp,Be){var ft=Uo<0?"-":"",mn=(ft?-Uo:Uo)+"",Bl=mn.length;return ft+(Bl<Be?new Array(Be-Bl+1).join(Tp)+mn:mn)}function D(Uo){return Uo.replace(k,"\\$&")}function B(Uo){return new RegExp("^(?:"+Uo.map(D).join("|")+")","i")}function P(Uo){for(var Tp={},Be=-1,ft=Uo.length;++Be<ft;)Tp[Uo[Be].toLowerCase()]=Be;return Tp}function N(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+1));return ft?(Uo.w=+ft[0],Be+ft[0].length):-1}function z(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+1));return ft?(Uo.u=+ft[0],Be+ft[0].length):-1}function F(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.U=+ft[0],Be+ft[0].length):-1}function w(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.V=+ft[0],Be+ft[0].length):-1}function L(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.W=+ft[0],Be+ft[0].length):-1}function O(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+4));return ft?(Uo.y=+ft[0],Be+ft[0].length):-1}function H(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.y=+ft[0]+(+ft[0]>68?1900:2e3),Be+ft[0].length):-1}function W(Uo,Tp,Be){var ft=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Tp.slice(Be,Be+6));return ft?(Uo.Z=ft[1]?0:-(ft[2]+(ft[3]||"00")),Be+ft[0].length):-1}function Ce(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+1));return ft?(Uo.q=ft[0]*3-3,Be+ft[0].length):-1}function he(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.m=ft[0]-1,Be+ft[0].length):-1}function le(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.d=+ft[0],Be+ft[0].length):-1}function Y(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+3));return ft?(Uo.m=0,Uo.d=+ft[0],Be+ft[0].length):-1}function Re(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.H=+ft[0],Be+ft[0].length):-1}function fe(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.M=+ft[0],Be+ft[0].length):-1}function xe(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+2));return ft?(Uo.S=+ft[0],Be+ft[0].length):-1}function ge(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+3));return ft?(Uo.L=+ft[0],Be+ft[0].length):-1}function ye(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be,Be+6));return ft?(Uo.L=Math.floor(ft[0]/1e3),Be+ft[0].length):-1}function Ae(Uo,Tp,Be){var ft=u.exec(Tp.slice(Be,Be+1));return ft?Be+ft[0].length:-1}function Le(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be));return ft?(Uo.Q=+ft[0],Be+ft[0].length):-1}function ce(Uo,Tp,Be){var ft=T.exec(Tp.slice(Be));return ft?(Uo.s=+ft[0],Be+ft[0].length):-1}function ke(Uo,Tp){return M(Uo.getDate(),Tp,2)}function Pe(Uo,Tp){return M(Uo.getHours(),Tp,2)}function tt(Uo,Tp){return M(Uo.getHours()%12||12,Tp,2)}function Ke(Uo,Tp){return M(1+s.timeDay.count(s.timeYear(Uo),Uo),Tp,3)}function nt(Uo,Tp){return M(Uo.getMilliseconds(),Tp,3)}function yi(Uo,Tp){return nt(Uo,Tp)+"000"}function Ei(Uo,Tp){return M(Uo.getMonth()+1,Tp,2)}function vs(Uo,Tp){return M(Uo.getMinutes(),Tp,2)}function Se(Uo,Tp){return M(Uo.getSeconds(),Tp,2)}function Ee(Uo){var Tp=Uo.getDay();return Tp===0?7:Tp}function X(Uo,Tp){return M(s.timeSunday.count(s.timeYear(Uo)-1,Uo),Tp,2)}function Oe(Uo,Tp){var Be=Uo.getDay();return Uo=Be>=4||Be===0?s.timeThursday(Uo):s.timeThursday.ceil(Uo),M(s.timeThursday.count(s.timeYear(Uo),Uo)+(s.timeYear(Uo).getDay()===4),Tp,2)}function Qe(Uo){return Uo.getDay()}function pe(Uo,Tp){return M(s.timeMonday.count(s.timeYear(Uo)-1,Uo),Tp,2)}function q(Uo,Tp){return M(Uo.getFullYear()%100,Tp,2)}function ae(Uo,Tp){return M(Uo.getFullYear()%1e4,Tp,4)}function ve(Uo){var Tp=Uo.getTimezoneOffset();return(Tp>0?"-":(Tp*=-1,"+"))+M(Tp/60|0,"0",2)+M(Tp%60,"0",2)}function Te(Uo,Tp){return M(Uo.getUTCDate(),Tp,2)}function et(Uo,Tp){return M(Uo.getUTCHours(),Tp,2)}function bt(Uo,Tp){return M(Uo.getUTCHours()%12||12,Tp,2)}function dr(Uo,Tp){return M(1+s.utcDay.count(s.utcYear(Uo),Uo),Tp,3)}function Ol(Uo,Tp){return M(Uo.getUTCMilliseconds(),Tp,3)}function Xl(Uo,Tp){return Ol(Uo,Tp)+"000"}function Pp(Uo,Tp){return M(Uo.getUTCMonth()+1,Tp,2)}function t0(Uo,Tp){return M(Uo.getUTCMinutes(),Tp,2)}function Wp(Uo,Tp){return M(Uo.getUTCSeconds(),Tp,2)}function $p(Uo){var Tp=Uo.getUTCDay();return Tp===0?7:Tp}function Lo(Uo,Tp){return M(s.utcSunday.count(s.utcYear(Uo)-1,Uo),Tp,2)}function kl(Uo,Tp){var Be=Uo.getUTCDay();return Uo=Be>=4||Be===0?s.utcThursday(Uo):s.utcThursday.ceil(Uo),M(s.utcThursday.count(s.utcYear(Uo),Uo)+(s.utcYear(Uo).getUTCDay()===4),Tp,2)}function dt(Uo){return Uo.getUTCDay()}function yp(Uo,Tp){return M(s.utcMonday.count(s.utcYear(Uo)-1,Uo),Tp,2)}function Bp(Uo,Tp){return M(Uo.getUTCFullYear()%100,Tp,2)}function Jp(Uo,Tp){return M(Uo.getUTCFullYear()%1e4,Tp,4)}function m0(){return"+0000"}function s0(){return"%"}function y0(Uo){return+Uo}function M0(Uo){return Math.floor(+Uo/1e3)}var T0;G0({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function G0(Uo){return T0=y(Uo),g.timeFormat=T0.format,g.timeParse=T0.parse,g.utcFormat=T0.utcFormat,g.utcParse=T0.utcParse,T0}var h0="%Y-%m-%dT%H:%M:%S.%LZ";function W0(Uo){return Uo.toISOString()}var rm=Date.prototype.toISOString?W0:g.utcFormat(h0);function V0(Uo){var Tp=new Date(Uo);return isNaN(Tp)?null:Tp}var um=+new Date("2000-01-01T00:00:00.000Z")?V0:g.utcParse(h0);g.isoFormat=rm,g.isoParse=um,g.timeFormatDefaultLocale=G0,g.timeFormatLocale=y,Object.defineProperty(g,"__esModule",{value:!0})})}),_=t((me,ue)=>{(function(g,s){typeof me=="object"&&typeof ue<"u"?s(me):(g=typeof globalThis<"u"?globalThis:g||self,s(g.d3=g.d3||{}))})(me,function(g){function s(he){return Math.abs(he=Math.round(he))>=1e21?he.toLocaleString("en").replace(/,/g,""):he.toString(10)}function h(he,le){if((Y=(he=le?he.toExponential(le-1):he.toExponential()).indexOf("e"))<0)return null;var Y,Re=he.slice(0,Y);return[Re.length>1?Re[0]+Re.slice(2):Re,+he.slice(Y+1)]}function x(he){return he=h(Math.abs(he)),he?he[1]:NaN}function v(he,le){return function(Y,Re){for(var fe=Y.length,xe=[],ge=0,ye=he[0],Ae=0;fe>0&&ye>0&&(Ae+ye+1>Re&&(ye=Math.max(1,Re-Ae)),xe.push(Y.substring(fe-=ye,fe+ye)),!((Ae+=ye+1)>Re));)ye=he[ge=(ge+1)%he.length];return xe.reverse().join(le)}}function y(he){return function(le){return le.replace(/[0-9]/g,function(Y){return he[+Y]})}}var b=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(he){if(!(le=b.exec(he)))throw new Error("invalid format: "+he);var le;return new u({fill:le[1],align:le[2],sign:le[3],symbol:le[4],zero:le[5],width:le[6],comma:le[7],precision:le[8]&&le[8].slice(1),trim:le[9],type:le[10]})}T.prototype=u.prototype;function u(he){this.fill=he.fill===void 0?" ":he.fill+"",this.align=he.align===void 0?">":he.align+"",this.sign=he.sign===void 0?"-":he.sign+"",this.symbol=he.symbol===void 0?"":he.symbol+"",this.zero=!!he.zero,this.width=he.width===void 0?void 0:+he.width,this.comma=!!he.comma,this.precision=he.precision===void 0?void 0:+he.precision,this.trim=!!he.trim,this.type=he.type===void 0?"":he.type+""}u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k(he){e:for(var le=he.length,Y=1,Re=-1,fe;Y<le;++Y)switch(he[Y]){case".":Re=fe=Y;break;case"0":Re===0&&(Re=Y),fe=Y;break;default:if(!+he[Y])break e;Re>0&&(Re=0);break}return Re>0?he.slice(0,Re)+he.slice(fe+1):he}var M;function D(he,le){var Y=h(he,le);if(!Y)return he+"";var Re=Y[0],fe=Y[1],xe=fe-(M=Math.max(-8,Math.min(8,Math.floor(fe/3)))*3)+1,ge=Re.length;return xe===ge?Re:xe>ge?Re+new Array(xe-ge+1).join("0"):xe>0?Re.slice(0,xe)+"."+Re.slice(xe):"0."+new Array(1-xe).join("0")+h(he,Math.max(0,le+xe-1))[0]}function B(he,le){var Y=h(he,le);if(!Y)return he+"";var Re=Y[0],fe=Y[1];return fe<0?"0."+new Array(-fe).join("0")+Re:Re.length>fe+1?Re.slice(0,fe+1)+"."+Re.slice(fe+1):Re+new Array(fe-Re.length+2).join("0")}var P={"%":function(he,le){return(he*100).toFixed(le)},b:function(he){return Math.round(he).toString(2)},c:function(he){return he+""},d:s,e:function(he,le){return he.toExponential(le)},f:function(he,le){return he.toFixed(le)},g:function(he,le){return he.toPrecision(le)},o:function(he){return Math.round(he).toString(8)},p:function(he,le){return B(he*100,le)},r:B,s:D,X:function(he){return Math.round(he).toString(16).toUpperCase()},x:function(he){return Math.round(he).toString(16)}};function N(he){return he}var z=Array.prototype.map,F=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function w(he){var le=he.grouping===void 0||he.thousands===void 0?N:v(z.call(he.grouping,Number),he.thousands+""),Y=he.currency===void 0?"":he.currency[0]+"",Re=he.currency===void 0?"":he.currency[1]+"",fe=he.decimal===void 0?".":he.decimal+"",xe=he.numerals===void 0?N:y(z.call(he.numerals,String)),ge=he.percent===void 0?"%":he.percent+"",ye=he.minus===void 0?"-":he.minus+"",Ae=he.nan===void 0?"NaN":he.nan+"";function Le(ke){ke=T(ke);var Pe=ke.fill,tt=ke.align,Ke=ke.sign,nt=ke.symbol,yi=ke.zero,Ei=ke.width,vs=ke.comma,Se=ke.precision,Ee=ke.trim,X=ke.type;X==="n"?(vs=!0,X="g"):P[X]||(Se===void 0&&(Se=12),Ee=!0,X="g"),(yi||Pe==="0"&&tt==="=")&&(yi=!0,Pe="0",tt="=");var Oe=nt==="$"?Y:nt==="#"&&/[boxX]/.test(X)?"0"+X.toLowerCase():"",Qe=nt==="$"?Re:/[%p]/.test(X)?ge:"",pe=P[X],q=/[defgprs%]/.test(X);Se=Se===void 0?6:/[gprs]/.test(X)?Math.max(1,Math.min(21,Se)):Math.max(0,Math.min(20,Se));function ae(ve){var Te=Oe,et=Qe,bt,dr,Ol;if(X==="c")et=pe(ve)+et,ve="";else{ve=+ve;var Xl=ve<0||1/ve<0;if(ve=isNaN(ve)?Ae:pe(Math.abs(ve),Se),Ee&&(ve=k(ve)),Xl&&+ve==0&&Ke!=="+"&&(Xl=!1),Te=(Xl?Ke==="("?Ke:ye:Ke==="-"||Ke==="("?"":Ke)+Te,et=(X==="s"?F[8+M/3]:"")+et+(Xl&&Ke==="("?")":""),q){for(bt=-1,dr=ve.length;++bt<dr;)if(Ol=ve.charCodeAt(bt),48>Ol||Ol>57){et=(Ol===46?fe+ve.slice(bt+1):ve.slice(bt))+et,ve=ve.slice(0,bt);break}}}vs&&!yi&&(ve=le(ve,1/0));var Pp=Te.length+ve.length+et.length,t0=Pp<Ei?new Array(Ei-Pp+1).join(Pe):"";switch(vs&&yi&&(ve=le(t0+ve,t0.length?Ei-et.length:1/0),t0=""),tt){case"<":ve=Te+ve+et+t0;break;case"=":ve=Te+t0+ve+et;break;case"^":ve=t0.slice(0,Pp=t0.length>>1)+Te+ve+et+t0.slice(Pp);break;default:ve=t0+Te+ve+et;break}return xe(ve)}return ae.toString=function(){return ke+""},ae}function ce(ke,Pe){var tt=Le((ke=T(ke),ke.type="f",ke)),Ke=Math.max(-8,Math.min(8,Math.floor(x(Pe)/3)))*3,nt=Math.pow(10,-Ke),yi=F[8+Ke/3];return function(Ei){return tt(nt*Ei)+yi}}return{format:Le,formatPrefix:ce}}var L;O({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function O(he){return L=w(he),g.format=L.format,g.formatPrefix=L.formatPrefix,L}function H(he){return Math.max(0,-x(Math.abs(he)))}function W(he,le){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(x(le)/3)))*3-x(Math.abs(he)))}function Ce(he,le){return he=Math.abs(he),le=Math.abs(le)-he,Math.max(0,x(le)-x(he))+1}g.FormatSpecifier=u,g.formatDefaultLocale=O,g.formatLocale=w,g.formatSpecifier=T,g.precisionFixed=H,g.precisionPrefix=W,g.precisionRound=Ce,Object.defineProperty(g,"__esModule",{value:!0})})}),S=t((me,ue)=>{ue.exports=function(g){for(var s=g.length,h,x=0;x<s;x++)if(h=g.charCodeAt(x),(h<9||h>13)&&h!==32&&h!==133&&h!==160&&h!==5760&&h!==6158&&(h<8192||h>8205)&&h!==8232&&h!==8233&&h!==8239&&h!==8287&&h!==8288&&h!==12288&&h!==65279)return!1;return!0}}),A=t((me,ue)=>{var g=S();ue.exports=function(s){var h=typeof s;if(h==="string"){var x=s;if(s=+s,s===0&&g(x))return!1}else if(h!=="number")return!1;return s-s<1}}),C=t((me,ue)=>{ue.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}}),j=t((me,ue)=>{(function(g,s){typeof me=="object"&&typeof ue<"u"?s(me):(g=typeof globalThis<"u"?globalThis:g||self,s(g["base64-arraybuffer"]={}))})(me,function(g){for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=typeof Uint8Array>"u"?[]:new Uint8Array(256),x=0;x<s.length;x++)h[s.charCodeAt(x)]=x;var v=function(b){var T=new Uint8Array(b),u,k=T.length,M="";for(u=0;u<k;u+=3)M+=s[T[u]>>2],M+=s[(T[u]&3)<<4|T[u+1]>>4],M+=s[(T[u+1]&15)<<2|T[u+2]>>6],M+=s[T[u+2]&63];return k%3===2?M=M.substring(0,M.length-1)+"=":k%3===1&&(M=M.substring(0,M.length-2)+"=="),M},y=function(b){var T=b.length*.75,u=b.length,k,M=0,D,B,P,N;b[b.length-1]==="="&&(T--,b[b.length-2]==="="&&T--);var z=new ArrayBuffer(T),F=new Uint8Array(z);for(k=0;k<u;k+=4)D=h[b.charCodeAt(k)],B=h[b.charCodeAt(k+1)],P=h[b.charCodeAt(k+2)],N=h[b.charCodeAt(k+3)],F[M++]=D<<2|B>>4,F[M++]=(B&15)<<4|P>>2,F[M++]=(P&3)<<6|N&63;return z};g.decode=y,g.encode=v,Object.defineProperty(g,"__esModule",{value:!0})})}),V=t((me,ue)=>{ue.exports=function(g){return window&&window.process&&window.process.versions?Object.prototype.toString.call(g)==="[object Object]":Object.prototype.toString.call(g)==="[object Object]"&&Object.getPrototypeOf(g).hasOwnProperty("hasOwnProperty")}}),J=t(me=>{var ue=j().decode,g=V(),s=Array.isArray,h=ArrayBuffer,x=DataView;function v(D){return h.isView(D)&&!(D instanceof x)}me.isTypedArray=v;function y(D){return s(D)||v(D)}me.isArrayOrTypedArray=y;function b(D){return!y(D[0])}me.isArray1D=b,me.ensureArray=function(D,B){return s(D)||(D=[]),D.length=B,D};var T={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};T.uint8c=T.u1c,T.uint8=T.u1,T.int8=T.i1,T.uint16=T.u2,T.int16=T.i2,T.uint32=T.u4,T.int32=T.i4,T.float32=T.f4,T.float64=T.f8;function u(D){return D.constructor===ArrayBuffer}me.isArrayBuffer=u,me.decodeTypedArraySpec=function(D){var B=[],P=k(D),N=P.dtype,z=T[N];if(!z)throw new Error('Error in dtype: "'+N+'"');var F=z.BYTES_PER_ELEMENT,w=P.bdata;u(w)||(w=ue(w));var L=P.shape===void 0?[w.byteLength/F]:(""+P.shape).split(",");L.reverse();var O=L.length,H,W,Ce=+L[0],he=F*Ce,le=0;if(O===1)B=new z(w);else if(O===2)for(H=+L[1],W=0;W<H;W++)B[W]=new z(w,le,Ce),le+=he;else if(O===3){H=+L[1];for(var Y=+L[2],Re=0;Re<Y;Re++)for(B[Re]=[],W=0;W<H;W++)B[Re][W]=new z(w,le,Ce),le+=he}else throw new Error("ndim: "+O+'is not supported with the shape:"'+P.shape+'"');return B.bdata=P.bdata,B.dtype=P.dtype,B.shape=L.reverse().join(","),D._inputArray=B,B},me.isTypedArraySpec=function(D){return g(D)&&D.hasOwnProperty("dtype")&&typeof D.dtype=="string"&&D.hasOwnProperty("bdata")&&(typeof D.bdata=="string"||u(D.bdata))&&(D.shape===void 0||D.hasOwnProperty("shape")&&(typeof D.shape=="string"||typeof D.shape=="number"))};function k(D){return{bdata:D.bdata,dtype:D.dtype,shape:D.shape}}me.concat=function(){var D=[],B=!0,P=0,N,z,F,w,L,O,H,W;for(F=0;F<arguments.length;F++)w=arguments[F],O=w.length,O&&(z?D.push(w):(z=w,L=O),s(w)?N=!1:(B=!1,P?N!==w.constructor&&(N=!1):N=w.constructor),P+=O);if(!P)return[];if(!D.length)return z;if(B)return z.concat.apply(z,D);if(N){for(H=new N(P),H.set(z),F=0;F<D.length;F++)w=D[F],H.set(w,L),L+=w.length;return H}for(H=new Array(P),W=0;W<z.length;W++)H[W]=z[W];for(F=0;F<D.length;F++){for(w=D[F],W=0;W<w.length;W++)H[L+W]=w[W];L+=W}return H},me.maxRowLength=function(D){return M(D,Math.max,0)},me.minRowLength=function(D){return M(D,Math.min,1/0)};function M(D,B,P){if(y(D))if(y(D[0])){for(var N=P,z=0;z<D.length;z++)N=B(N,D[z].length);return N}else return D.length;return 0}}),re=t((me,ue)=>{var g=A(),s=J().isArrayOrTypedArray;ue.exports=function(M,D){if(g(D))D=String(D);else if(typeof D!="string"||D.substr(D.length-4)==="[-1]")throw"bad property string";var B=D.split("."),P,N,z,F;for(F=0;F<B.length;F++)if(String(B[F]).slice(0,2)==="__")throw"bad property string";for(F=0;F<B.length;){if(P=String(B[F]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),P){if(P[1])B[F]=P[1];else if(F===0)B.splice(0,1);else throw"bad property string";for(N=P[2].substr(1,P[2].length-2).split("]["),z=0;z<N.length;z++)F++,B.splice(F,0,Number(N[z]))}F++}return typeof M!="object"?k(M,D,B):{set:y(M,B,D),get:h(M,B),astr:D,parts:B,obj:M}};function h(M,D){return function(B){var P=M,N,z,F,w,L;for(w=0;w<D.length-1;w++){if(N=D[w],N===-1){for(z=!0,F=[],L=0;L<P.length;L++)F[L]=h(P[L],D.slice(w+1))(B),F[L]!==F[0]&&(z=!1);return z?F[0]:F}if(typeof N=="number"&&!s(P)||(P=P[N],typeof P!="object"||P===null))return}if(!(typeof P!="object"||P===null)&&(F=P[D[w]],!(!B&&F===null)))return F}}var x=/(^|\.)args\[/;function v(M,D){return M===void 0||M===null&&!D.match(x)}function y(M,D,B){return function(P){var N=M,z="",F=v(P,B),w,L;for(L=0;L<D.length-1;L++){if(w=D[L],typeof w=="number"&&!s(N))throw"array index but container is not an array";if(w===-1){if(F=!T(N,D.slice(L+1),P,B),F)break;return}if(!u(N,w,D[L+1],F))break;if(N=N[w],typeof N!="object"||N===null)throw"container is not an object";z=b(z,w)}if(F){if(L===D.length-1&&(delete N[D[L]],Array.isArray(N)&&+D[L]===N.length-1))for(;N.length&&N[N.length-1]===void 0;)N.pop()}else N[D[L]]=P}}function b(M,D){var B=D;return g(D)?B="["+D+"]":M&&(B="."+D),M+B}function T(M,D,B,P){var N=s(B),z=!0,F=B,w=P.replace("-1",0),L=N?!1:v(B,w),O=D[0],H;for(H=0;H<M.length;H++)w=P.replace("-1",H),N&&(F=B[H%B.length],L=v(F,w)),L&&(z=!1),u(M,H,O,L)&&y(M[H],D,P.replace("-1",H))(F);return z}function u(M,D,B,P){if(M[D]===void 0){if(P)return!1;typeof B=="number"?M[D]=[]:M[D]={}}return!0}function k(M,D,B){return{set:function(){throw"bad container"},get:function(){},astr:D,parts:B,obj:M}}}),ie=t((me,ue)=>{var g=re(),s=/^\w*$/,h=0,x=1,v=2,y=3,b=4;ue.exports=function(T,u,k,M){k=k||"name",M=M||"value";var D,B,P,N={};u&&u.length?(P=g(T,u),B=P.get()):B=T,u=u||"";var z={};if(B)for(D=0;D<B.length;D++)z[B[D][k]]=D;var F=s.test(M),w={set:function(L,O){var H=O===null?b:h;if(!B){if(!P||H===b)return;B=[],P.set(B)}var W=z[L];if(W===void 0){if(H===b)return;H=H|y,W=B.length,z[L]=W}else O!==(F?B[W][M]:g(B[W],M).get())&&(H=H|v);var Ce=B[W]=B[W]||{};return Ce[k]=L,F?Ce[M]=O:g(Ce,M).set(O),O!==null&&(H=H&~b),N[W]=N[W]|H,w},get:function(L){if(B){var O=z[L];if(O!==void 0)return F?B[O][M]:g(B[O],M).get()}},rename:function(L,O){var H=z[L];return H===void 0||(N[H]=N[H]|x,z[O]=H,delete z[L],B[H][k]=O),w},remove:function(L){var O=z[L];if(O===void 0)return w;var H=B[O];if(Object.keys(H).length>2)return N[O]=N[O]|v,w.set(L,null);if(F){for(D=O;D<B.length;D++)N[D]=N[D]|y;for(D=O;D<B.length;D++)z[B[D][k]]--;B.splice(O,1),delete z[L]}else g(H,M).set(null),N[O]=N[O]|v|b;return w},constructUpdate:function(){for(var L,O,H={},W=Object.keys(N),Ce=0;Ce<W.length;Ce++)O=W[Ce],L=u+"["+O+"]",B[O]?(N[O]&x&&(H[L+"."+k]=B[O][k]),N[O]&v&&(F?H[L+"."+M]=N[O]&b?null:B[O][M]:H[L+"."+M]=N[O]&b?null:g(B[O],M).get())):H[L]=null;return H}};return w}}),K=t((me,ue)=>{var g=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,s=/^[^\.\[\]]+$/;ue.exports=function(h,x){for(;x;){var v=h.match(g);if(v)h=v[1];else if(h.match(s))h="";else throw new Error("bad relativeAttr call:"+[h,x]);if(x.charAt(0)==="^")x=x.slice(1);else break}return h&&x.charAt(0)!=="["?h+"."+x:h+x}}),Ne=t((me,ue)=>{var g=A();ue.exports=function(s,h){if(s>0)return Math.log(s)/Math.LN10;var x=Math.log(Math.min(h[0],h[1]))/Math.LN10;return g(x)||(x=Math.log(Math.max(h[0],h[1]))/Math.LN10-6),x}}),G=t((me,ue)=>{var g=J().isArrayOrTypedArray,s=V();ue.exports=function h(x,v){for(var y in v){var b=v[y],T=x[y];if(T!==b)if(y.charAt(0)==="_"||typeof b=="function"){if(y in x)continue;x[y]=b}else if(g(b)&&g(T)&&s(b[0])){if(y==="customdata"||y==="ids")continue;for(var u=Math.min(b.length,T.length),k=0;k<u;k++)T[k]!==b[k]&&s(b[k])&&s(T[k])&&h(T[k],b[k])}else s(b)&&s(T)&&(h(T,b),Object.keys(T).length||delete x[y])}}}),se=t((me,ue)=>{function g(h,x){var v=h%x;return v<0?v+x:v}function s(h,x){return Math.abs(h)>x/2?h-Math.round(h/x)*x:h}ue.exports={mod:g,modHalf:s}}),He=t((me,ue)=>{(function(g){var s=/^\s+/,h=/\s+$/,x=0,v=g.round,y=g.min,b=g.max,T=g.random;function u(q,ae){if(q=q||"",ae=ae||{},q instanceof u)return q;if(!(this instanceof u))return new u(q,ae);var ve=k(q);this._originalInput=q,this._r=ve.r,this._g=ve.g,this._b=ve.b,this._a=ve.a,this._roundA=v(100*this._a)/100,this._format=ae.format||ve.format,this._gradientType=ae.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=ve.ok,this._tc_id=x++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var q=this.toRgb();return(q.r*299+q.g*587+q.b*114)/1e3},getLuminance:function(){var q=this.toRgb(),ae,ve,Te,et,bt,dr;return ae=q.r/255,ve=q.g/255,Te=q.b/255,ae<=.03928?et=ae/12.92:et=g.pow((ae+.055)/1.055,2.4),ve<=.03928?bt=ve/12.92:bt=g.pow((ve+.055)/1.055,2.4),Te<=.03928?dr=Te/12.92:dr=g.pow((Te+.055)/1.055,2.4),.2126*et+.7152*bt+.0722*dr},setAlpha:function(q){return this._a=ke(q),this._roundA=v(100*this._a)/100,this},toHsv:function(){var q=P(this._r,this._g,this._b);return{h:q.h*360,s:q.s,v:q.v,a:this._a}},toHsvString:function(){var q=P(this._r,this._g,this._b),ae=v(q.h*360),ve=v(q.s*100),Te=v(q.v*100);return this._a==1?"hsv("+ae+", "+ve+"%, "+Te+"%)":"hsva("+ae+", "+ve+"%, "+Te+"%, "+this._roundA+")"},toHsl:function(){var q=D(this._r,this._g,this._b);return{h:q.h*360,s:q.s,l:q.l,a:this._a}},toHslString:function(){var q=D(this._r,this._g,this._b),ae=v(q.h*360),ve=v(q.s*100),Te=v(q.l*100);return this._a==1?"hsl("+ae+", "+ve+"%, "+Te+"%)":"hsla("+ae+", "+ve+"%, "+Te+"%, "+this._roundA+")"},toHex:function(q){return z(this._r,this._g,this._b,q)},toHexString:function(q){return"#"+this.toHex(q)},toHex8:function(q){return F(this._r,this._g,this._b,this._a,q)},toHex8String:function(q){return"#"+this.toHex8(q)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(Pe(this._r,255)*100)+"%",g:v(Pe(this._g,255)*100)+"%",b:v(Pe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(Pe(this._r,255)*100)+"%, "+v(Pe(this._g,255)*100)+"%, "+v(Pe(this._b,255)*100)+"%)":"rgba("+v(Pe(this._r,255)*100)+"%, "+v(Pe(this._g,255)*100)+"%, "+v(Pe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Le[z(this._r,this._g,this._b,!0)]||!1},toFilter:function(q){var ae="#"+w(this._r,this._g,this._b,this._a),ve=ae,Te=this._gradientType?"GradientType = 1, ":"";if(q){var et=u(q);ve="#"+w(et._r,et._g,et._b,et._a)}return"progid:DXImageTransform.Microsoft.gradient("+Te+"startColorstr="+ae+",endColorstr="+ve+")"},toString:function(q){var ae=!!q;q=q||this._format;var ve=!1,Te=this._a<1&&this._a>=0,et=!ae&&Te&&(q==="hex"||q==="hex6"||q==="hex3"||q==="hex4"||q==="hex8"||q==="name");return et?q==="name"&&this._a===0?this.toName():this.toRgbString():(q==="rgb"&&(ve=this.toRgbString()),q==="prgb"&&(ve=this.toPercentageRgbString()),(q==="hex"||q==="hex6")&&(ve=this.toHexString()),q==="hex3"&&(ve=this.toHexString(!0)),q==="hex4"&&(ve=this.toHex8String(!0)),q==="hex8"&&(ve=this.toHex8String()),q==="name"&&(ve=this.toName()),q==="hsl"&&(ve=this.toHslString()),q==="hsv"&&(ve=this.toHsvString()),ve||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(q,ae){var ve=q.apply(null,[this].concat([].slice.call(ae)));return this._r=ve._r,this._g=ve._g,this._b=ve._b,this.setAlpha(ve._a),this},lighten:function(){return this._applyModification(W,arguments)},brighten:function(){return this._applyModification(Ce,arguments)},darken:function(){return this._applyModification(he,arguments)},desaturate:function(){return this._applyModification(L,arguments)},saturate:function(){return this._applyModification(O,arguments)},greyscale:function(){return this._applyModification(H,arguments)},spin:function(){return this._applyModification(le,arguments)},_applyCombination:function(q,ae){return q.apply(null,[this].concat([].slice.call(ae)))},analogous:function(){return this._applyCombination(ge,arguments)},complement:function(){return this._applyCombination(Y,arguments)},monochromatic:function(){return this._applyCombination(ye,arguments)},splitcomplement:function(){return this._applyCombination(xe,arguments)},triad:function(){return this._applyCombination(Re,arguments)},tetrad:function(){return this._applyCombination(fe,arguments)}},u.fromRatio=function(q,ae){if(typeof q=="object"){var ve={};for(var Te in q)q.hasOwnProperty(Te)&&(Te==="a"?ve[Te]=q[Te]:ve[Te]=vs(q[Te]));q=ve}return u(q,ae)};function k(q){var ae={r:0,g:0,b:0},ve=1,Te=null,et=null,bt=null,dr=!1,Ol=!1;return typeof q=="string"&&(q=Qe(q)),typeof q=="object"&&(Oe(q.r)&&Oe(q.g)&&Oe(q.b)?(ae=M(q.r,q.g,q.b),dr=!0,Ol=String(q.r).substr(-1)==="%"?"prgb":"rgb"):Oe(q.h)&&Oe(q.s)&&Oe(q.v)?(Te=vs(q.s),et=vs(q.v),ae=N(q.h,Te,et),dr=!0,Ol="hsv"):Oe(q.h)&&Oe(q.s)&&Oe(q.l)&&(Te=vs(q.s),bt=vs(q.l),ae=B(q.h,Te,bt),dr=!0,Ol="hsl"),q.hasOwnProperty("a")&&(ve=q.a)),ve=ke(ve),{ok:dr,format:q.format||Ol,r:y(255,b(ae.r,0)),g:y(255,b(ae.g,0)),b:y(255,b(ae.b,0)),a:ve}}function M(q,ae,ve){return{r:Pe(q,255)*255,g:Pe(ae,255)*255,b:Pe(ve,255)*255}}function D(q,ae,ve){q=Pe(q,255),ae=Pe(ae,255),ve=Pe(ve,255);var Te=b(q,ae,ve),et=y(q,ae,ve),bt,dr,Ol=(Te+et)/2;if(Te==et)bt=dr=0;else{var Xl=Te-et;switch(dr=Ol>.5?Xl/(2-Te-et):Xl/(Te+et),Te){case q:bt=(ae-ve)/Xl+(ae<ve?6:0);break;case ae:bt=(ve-q)/Xl+2;break;case ve:bt=(q-ae)/Xl+4;break}bt/=6}return{h:bt,s:dr,l:Ol}}function B(q,ae,ve){var Te,et,bt;q=Pe(q,360),ae=Pe(ae,100),ve=Pe(ve,100);function dr(Pp,t0,Wp){return Wp<0&&(Wp+=1),Wp>1&&(Wp-=1),Wp<1/6?Pp+(t0-Pp)*6*Wp:Wp<1/2?t0:Wp<2/3?Pp+(t0-Pp)*(2/3-Wp)*6:Pp}if(ae===0)Te=et=bt=ve;else{var Ol=ve<.5?ve*(1+ae):ve+ae-ve*ae,Xl=2*ve-Ol;Te=dr(Xl,Ol,q+1/3),et=dr(Xl,Ol,q),bt=dr(Xl,Ol,q-1/3)}return{r:Te*255,g:et*255,b:bt*255}}function P(q,ae,ve){q=Pe(q,255),ae=Pe(ae,255),ve=Pe(ve,255);var Te=b(q,ae,ve),et=y(q,ae,ve),bt,dr,Ol=Te,Xl=Te-et;if(dr=Te===0?0:Xl/Te,Te==et)bt=0;else{switch(Te){case q:bt=(ae-ve)/Xl+(ae<ve?6:0);break;case ae:bt=(ve-q)/Xl+2;break;case ve:bt=(q-ae)/Xl+4;break}bt/=6}return{h:bt,s:dr,v:Ol}}function N(q,ae,ve){q=Pe(q,360)*6,ae=Pe(ae,100),ve=Pe(ve,100);var Te=g.floor(q),et=q-Te,bt=ve*(1-ae),dr=ve*(1-et*ae),Ol=ve*(1-(1-et)*ae),Xl=Te%6,Pp=[ve,dr,bt,bt,Ol,ve][Xl],t0=[Ol,ve,ve,dr,bt,bt][Xl],Wp=[bt,bt,Ol,ve,ve,dr][Xl];return{r:Pp*255,g:t0*255,b:Wp*255}}function z(q,ae,ve,Te){var et=[Ei(v(q).toString(16)),Ei(v(ae).toString(16)),Ei(v(ve).toString(16))];return Te&&et[0].charAt(0)==et[0].charAt(1)&&et[1].charAt(0)==et[1].charAt(1)&&et[2].charAt(0)==et[2].charAt(1)?et[0].charAt(0)+et[1].charAt(0)+et[2].charAt(0):et.join("")}function F(q,ae,ve,Te,et){var bt=[Ei(v(q).toString(16)),Ei(v(ae).toString(16)),Ei(v(ve).toString(16)),Ei(Se(Te))];return et&&bt[0].charAt(0)==bt[0].charAt(1)&&bt[1].charAt(0)==bt[1].charAt(1)&&bt[2].charAt(0)==bt[2].charAt(1)&&bt[3].charAt(0)==bt[3].charAt(1)?bt[0].charAt(0)+bt[1].charAt(0)+bt[2].charAt(0)+bt[3].charAt(0):bt.join("")}function w(q,ae,ve,Te){var et=[Ei(Se(Te)),Ei(v(q).toString(16)),Ei(v(ae).toString(16)),Ei(v(ve).toString(16))];return et.join("")}u.equals=function(q,ae){return!q||!ae?!1:u(q).toRgbString()==u(ae).toRgbString()},u.random=function(){return u.fromRatio({r:T(),g:T(),b:T()})};function L(q,ae){ae=ae===0?0:ae||10;var ve=u(q).toHsl();return ve.s-=ae/100,ve.s=tt(ve.s),u(ve)}function O(q,ae){ae=ae===0?0:ae||10;var ve=u(q).toHsl();return ve.s+=ae/100,ve.s=tt(ve.s),u(ve)}function H(q){return u(q).desaturate(100)}function W(q,ae){ae=ae===0?0:ae||10;var ve=u(q).toHsl();return ve.l+=ae/100,ve.l=tt(ve.l),u(ve)}function Ce(q,ae){ae=ae===0?0:ae||10;var ve=u(q).toRgb();return ve.r=b(0,y(255,ve.r-v(255*-(ae/100)))),ve.g=b(0,y(255,ve.g-v(255*-(ae/100)))),ve.b=b(0,y(255,ve.b-v(255*-(ae/100)))),u(ve)}function he(q,ae){ae=ae===0?0:ae||10;var ve=u(q).toHsl();return ve.l-=ae/100,ve.l=tt(ve.l),u(ve)}function le(q,ae){var ve=u(q).toHsl(),Te=(ve.h+ae)%360;return ve.h=Te<0?360+Te:Te,u(ve)}function Y(q){var ae=u(q).toHsl();return ae.h=(ae.h+180)%360,u(ae)}function Re(q){var ae=u(q).toHsl(),ve=ae.h;return[u(q),u({h:(ve+120)%360,s:ae.s,l:ae.l}),u({h:(ve+240)%360,s:ae.s,l:ae.l})]}function fe(q){var ae=u(q).toHsl(),ve=ae.h;return[u(q),u({h:(ve+90)%360,s:ae.s,l:ae.l}),u({h:(ve+180)%360,s:ae.s,l:ae.l}),u({h:(ve+270)%360,s:ae.s,l:ae.l})]}function xe(q){var ae=u(q).toHsl(),ve=ae.h;return[u(q),u({h:(ve+72)%360,s:ae.s,l:ae.l}),u({h:(ve+216)%360,s:ae.s,l:ae.l})]}function ge(q,ae,ve){ae=ae||6,ve=ve||30;var Te=u(q).toHsl(),et=360/ve,bt=[u(q)];for(Te.h=(Te.h-(et*ae>>1)+720)%360;--ae;)Te.h=(Te.h+et)%360,bt.push(u(Te));return bt}function ye(q,ae){ae=ae||6;for(var ve=u(q).toHsv(),Te=ve.h,et=ve.s,bt=ve.v,dr=[],Ol=1/ae;ae--;)dr.push(u({h:Te,s:et,v:bt})),bt=(bt+Ol)%1;return dr}u.mix=function(q,ae,ve){ve=ve===0?0:ve||50;var Te=u(q).toRgb(),et=u(ae).toRgb(),bt=ve/100,dr={r:(et.r-Te.r)*bt+Te.r,g:(et.g-Te.g)*bt+Te.g,b:(et.b-Te.b)*bt+Te.b,a:(et.a-Te.a)*bt+Te.a};return u(dr)},u.readability=function(q,ae){var ve=u(q),Te=u(ae);return(g.max(ve.getLuminance(),Te.getLuminance())+.05)/(g.min(ve.getLuminance(),Te.getLuminance())+.05)},u.isReadable=function(q,ae,ve){var Te=u.readability(q,ae),et,bt;switch(bt=!1,et=pe(ve),et.level+et.size){case"AAsmall":case"AAAlarge":bt=Te>=4.5;break;case"AAlarge":bt=Te>=3;break;case"AAAsmall":bt=Te>=7;break}return bt},u.mostReadable=function(q,ae,ve){var Te=null,et=0,bt,dr,Ol,Xl;ve=ve||{},dr=ve.includeFallbackColors,Ol=ve.level,Xl=ve.size;for(var Pp=0;Pp<ae.length;Pp++)bt=u.readability(q,ae[Pp]),bt>et&&(et=bt,Te=u(ae[Pp]));return u.isReadable(q,Te,{level:Ol,size:Xl})||!dr?Te:(ve.includeFallbackColors=!1,u.mostReadable(q,["#fff","#000"],ve))};var Ae=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Le=u.hexNames=ce(Ae);function ce(q){var ae={};for(var ve in q)q.hasOwnProperty(ve)&&(ae[q[ve]]=ve);return ae}function ke(q){return q=parseFloat(q),(isNaN(q)||q<0||q>1)&&(q=1),q}function Pe(q,ae){nt(q)&&(q="100%");var ve=yi(q);return q=y(ae,b(0,parseFloat(q))),ve&&(q=parseInt(q*ae,10)/100),g.abs(q-ae)<1e-6?1:q%ae/parseFloat(ae)}function tt(q){return y(1,b(0,q))}function Ke(q){return parseInt(q,16)}function nt(q){return typeof q=="string"&&q.indexOf(".")!=-1&&parseFloat(q)===1}function yi(q){return typeof q=="string"&&q.indexOf("%")!=-1}function Ei(q){return q.length==1?"0"+q:""+q}function vs(q){return q<=1&&(q=q*100+"%"),q}function Se(q){return g.round(parseFloat(q)*255).toString(16)}function Ee(q){return Ke(q)/255}var X=(function(){var q="[-\\+]?\\d+%?",ae="[-\\+]?\\d*\\.\\d+%?",ve="(?:"+ae+")|(?:"+q+")",Te="[\\s|\\(]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")\\s*\\)?",et="[\\s|\\(]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")\\s*\\)?";return{CSS_UNIT:new RegExp(ve),rgb:new RegExp("rgb"+Te),rgba:new RegExp("rgba"+et),hsl:new RegExp("hsl"+Te),hsla:new RegExp("hsla"+et),hsv:new RegExp("hsv"+Te),hsva:new RegExp("hsva"+et),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Oe(q){return!!X.CSS_UNIT.exec(q)}function Qe(q){q=q.replace(s,"").replace(h,"").toLowerCase();var ae=!1;if(Ae[q])q=Ae[q],ae=!0;else if(q=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ve;return(ve=X.rgb.exec(q))?{r:ve[1],g:ve[2],b:ve[3]}:(ve=X.rgba.exec(q))?{r:ve[1],g:ve[2],b:ve[3],a:ve[4]}:(ve=X.hsl.exec(q))?{h:ve[1],s:ve[2],l:ve[3]}:(ve=X.hsla.exec(q))?{h:ve[1],s:ve[2],l:ve[3],a:ve[4]}:(ve=X.hsv.exec(q))?{h:ve[1],s:ve[2],v:ve[3]}:(ve=X.hsva.exec(q))?{h:ve[1],s:ve[2],v:ve[3],a:ve[4]}:(ve=X.hex8.exec(q))?{r:Ke(ve[1]),g:Ke(ve[2]),b:Ke(ve[3]),a:Ee(ve[4]),format:ae?"name":"hex8"}:(ve=X.hex6.exec(q))?{r:Ke(ve[1]),g:Ke(ve[2]),b:Ke(ve[3]),format:ae?"name":"hex"}:(ve=X.hex4.exec(q))?{r:Ke(ve[1]+""+ve[1]),g:Ke(ve[2]+""+ve[2]),b:Ke(ve[3]+""+ve[3]),a:Ee(ve[4]+""+ve[4]),format:ae?"name":"hex8"}:(ve=X.hex3.exec(q))?{r:Ke(ve[1]+""+ve[1]),g:Ke(ve[2]+""+ve[2]),b:Ke(ve[3]+""+ve[3]),format:ae?"name":"hex"}:!1}function pe(q){var ae,ve;return q=q||{level:"AA",size:"small"},ae=(q.level||"AA").toUpperCase(),ve=(q.size||"small").toLowerCase(),ae!=="AA"&&ae!=="AAA"&&(ae="AA"),ve!=="small"&&ve!=="large"&&(ve="small"),{level:ae,size:ve}}typeof ue<"u"&&ue.exports?ue.exports=u:window.tinycolor=u})(Math)}),Fe=t(me=>{var ue=V(),g=Array.isArray;function s(x,v){var y,b;for(y=0;y<x.length;y++){if(b=x[y],b!==null&&typeof b=="object")return!1;b!==void 0&&(v[y]=b)}return!0}me.extendFlat=function(){return h(arguments,!1,!1,!1)},me.extendDeep=function(){return h(arguments,!0,!1,!1)},me.extendDeepAll=function(){return h(arguments,!0,!0,!1)},me.extendDeepNoArrays=function(){return h(arguments,!0,!1,!0)};function h(x,v,y,b){var T=x[0],u=x.length,k,M,D,B,P,N,z;if(u===2&&g(T)&&g(x[1])&&T.length===0){if(z=s(x[1],T),z)return T;T.splice(0,T.length)}for(var F=1;F<u;F++){k=x[F];for(M in k)D=T[M],B=k[M],b&&g(B)?T[M]=B:v&&B&&(ue(B)||(P=g(B)))?(P?(P=!1,N=D&&g(D)?D:[]):N=D&&ue(D)?D:{},T[M]=h([N,B],v,y,b)):(typeof B<"u"||y)&&(T[M]=B)}return T}}),Xe=t((me,ue)=>{ue.exports=function(g){var s=g.variantValues,h=g.editType,x=g.colorEditType;x===void 0&&(x=h);var v={editType:h,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};g.noNumericWeightValues&&(v.valType="enumerated",v.values=v.extras,v.extras=void 0,v.min=void 0,v.max=void 0);var y={family:{valType:"string",noBlank:!0,strict:!0,editType:h},size:{valType:"number",min:1,editType:h},color:{valType:"color",editType:x},weight:v,style:{editType:h,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:g.noFontVariant?void 0:{editType:h,valType:"enumerated",values:s||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:g.noFontTextcase?void 0:{editType:h,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:g.noFontLineposition?void 0:{editType:h,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:g.noFontShadow?void 0:{editType:h,valType:"string",dflt:g.autoShadowDflt?"auto":"none"},editType:h};return g.autoSize&&(y.size.dflt="auto"),g.autoColor&&(y.color.dflt="auto"),g.arrayOk&&(y.family.arrayOk=!0,y.weight.arrayOk=!0,y.style.arrayOk=!0,g.noFontVariant||(y.variant.arrayOk=!0),g.noFontTextcase||(y.textcase.arrayOk=!0),g.noFontLineposition||(y.lineposition.arrayOk=!0),g.noFontShadow||(y.shadow.arrayOk=!0),y.size.arrayOk=!0,y.color.arrayOk=!0),y}}),be=t((me,ue)=>{ue.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}}),ta=t((me,ue)=>{var g=be(),s=Xe(),h=s({editType:"none"});h.family.dflt=g.HOVERFONT,h.size.dflt=g.HOVERFONTSIZE,ue.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:h,grouptitlefont:s({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},showarrow:{valType:"boolean",dflt:!0,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}}),pn=t((me,ue)=>{var g=Xe(),s=ta().hoverlabel,h=Fe().extendFlat;ue.exports={hoverlabel:{bgcolor:h({},s.bgcolor,{arrayOk:!0}),bordercolor:h({},s.bordercolor,{arrayOk:!0}),font:g({arrayOk:!0,editType:"none"}),align:h({},s.align,{arrayOk:!0}),namelength:h({},s.namelength,{arrayOk:!0}),showarrow:h({},s.showarrow),editType:"none"}}}),mr=t((me,ue)=>{var g=Xe(),s=pn();ue.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:g({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:s.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}}),bp=t((me,ue)=>{var g=He(),s={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},h=s.RdBu;function x(b,T){if(T||(T=h),!b)return T;function u(){try{b=s[b]||JSON.parse(b)}catch{b=T}}return typeof b=="string"&&(u(),typeof b=="string"&&u()),v(b)?b:T}function v(b){var T=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var u=0;u<b.length;u++){var k=b[u];if(k.length!==2||+k[0]<T||!g(k[1]).isValid())return!1;T=+k[0]}return!0}function y(b){return s[b]!==void 0?!0:v(b)}ue.exports={scales:s,defaultScale:h,get:x,isValid:y}}),Sp=t(me=>{me.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],me.defaultLine="#444",me.lightLine="#eee",me.background="#fff",me.borderLine="#BEC8D9",me.lightFraction=1e3/11}),_r=t((me,ue)=>{var g=He(),s=A(),h=J().isTypedArray,x=ue.exports={},v=Sp();x.defaults=v.defaults;var y=x.defaultLine=v.defaultLine;x.lightLine=v.lightLine;var b=x.background=v.background;x.tinyRGB=function(u){var k=u.toRgb();return"rgb("+Math.round(k.r)+", "+Math.round(k.g)+", "+Math.round(k.b)+")"},x.rgb=function(u){return x.tinyRGB(g(u))},x.opacity=function(u){return u?g(u).getAlpha():0},x.addOpacity=function(u,k){var M=g(u).toRgb();return"rgba("+Math.round(M.r)+", "+Math.round(M.g)+", "+Math.round(M.b)+", "+k+")"},x.combine=function(u,k){var M=g(u).toRgb();if(M.a===1)return g(u).toRgbString();var D=g(k||b).toRgb(),B=D.a===1?D:{r:255*(1-D.a)+D.r*D.a,g:255*(1-D.a)+D.g*D.a,b:255*(1-D.a)+D.b*D.a},P={r:B.r*(1-M.a)+M.r*M.a,g:B.g*(1-M.a)+M.g*M.a,b:B.b*(1-M.a)+M.b*M.a};return g(P).toRgbString()},x.interpolate=function(u,k,M){var D=g(u).toRgb(),B=g(k).toRgb(),P={r:M*D.r+(1-M)*B.r,g:M*D.g+(1-M)*B.g,b:M*D.b+(1-M)*B.b};return g(P).toRgbString()},x.contrast=function(u,k,M){var D=g(u);D.getAlpha()!==1&&(D=g(x.combine(u,b)));var B=D.isDark()?k?D.lighten(k):b:M?D.darken(M):y;return B.toString()},x.stroke=function(u,k){var M=g(k);u.style({stroke:x.tinyRGB(M),"stroke-opacity":M.getAlpha()})},x.fill=function(u,k){var M=g(k);u.style({fill:x.tinyRGB(M),"fill-opacity":M.getAlpha()})},x.clean=function(u){if(!(!u||typeof u!="object")){var k=Object.keys(u),M,D,B,P;for(M=0;M<k.length;M++)if(B=k[M],P=u[B],B.substr(B.length-5)==="color")if(Array.isArray(P))for(D=0;D<P.length;D++)P[D]=T(P[D]);else u[B]=T(P);else if(B.substr(B.length-10)==="colorscale"&&Array.isArray(P))for(D=0;D<P.length;D++)Array.isArray(P[D])&&(P[D][1]=T(P[D][1]));else if(Array.isArray(P)){var N=P[0];if(!Array.isArray(N)&&N&&typeof N=="object")for(D=0;D<P.length;D++)x.clean(P[D])}else P&&typeof P=="object"&&!h(P)&&x.clean(P)}};function T(u){if(s(u)||typeof u!="string")return u;var k=u.trim();if(k.substr(0,3)!=="rgb")return u;var M=k.match(/^rgba?\s*\(([^()]*)\)$/);if(!M)return u;var D=M[1].trim().split(/\s*[\s,]\s*/),B=k.charAt(3)==="a"&&D.length===4;if(!B&&D.length!==3)return u;for(var P=0;P<D.length;P++){if(!D[P].length||(D[P]=Number(D[P]),!(D[P]>=0)))return u;if(P===3)D[P]>1&&(D[P]=1);else if(D[P]>=1)return u}var N=Math.round(D[0]*255)+", "+Math.round(D[1]*255)+", "+Math.round(D[2]*255);return B?"rgba("+N+", "+D[3]+")":"rgb("+N+")"}}),xs=t((me,ue)=>{ue.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}}),ne=t(me=>{me.counter=function(ue,g,s,h){var x=(g||"")+(s?"":"$"),v=h===!1?"":"^";return ue==="xy"?new RegExp(v+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+x):new RegExp(v+ue+"([2-9]|[1-9][0-9]+)?"+x)}}),zl=t(me=>{var ue=A(),g=He(),s=Fe().extendFlat,h=mr(),x=bp(),v=_r(),y=xs().DESELECTDIM,b=re(),T=ne().counter,u=se().modHalf,k=J().isArrayOrTypedArray,M=J().isTypedArraySpec,D=J().decodeTypedArraySpec;me.valObjectMeta={data_array:{coerceFunction:function(P,N,z){N.set(k(P)?P:M(P)?D(P):z)}},enumerated:{coerceFunction:function(P,N,z,F){F.coerceNumber&&(P=+P),F.values.indexOf(P)===-1?N.set(z):N.set(P)},validateFunction:function(P,N){N.coerceNumber&&(P=+P);for(var z=N.values,F=0;F<z.length;F++){var w=String(z[F]);if(w.charAt(0)==="/"&&w.charAt(w.length-1)==="/"){var L=new RegExp(w.substr(1,w.length-2));if(L.test(P))return!0}else if(P===z[F])return!0}return!1}},boolean:{coerceFunction:function(P,N,z){P===!0||P===!1?N.set(P):N.set(z)}},number:{coerceFunction:function(P,N,z,F){M(P)&&(P=D(P)),!ue(P)||F.min!==void 0&&P<F.min||F.max!==void 0&&P>F.max?N.set(z):N.set(+P)}},integer:{coerceFunction:function(P,N,z,F){if((F.extras||[]).indexOf(P)!==-1){N.set(P);return}M(P)&&(P=D(P)),P%1||!ue(P)||F.min!==void 0&&P<F.min||F.max!==void 0&&P>F.max?N.set(z):N.set(+P)}},string:{coerceFunction:function(P,N,z,F){if(typeof P!="string"){var w=typeof P=="number";F.strict===!0||!w?N.set(z):N.set(String(P))}else F.noBlank&&!P?N.set(z):N.set(P)}},color:{coerceFunction:function(P,N,z){M(P)&&(P=D(P)),g(P).isValid()?N.set(P):N.set(z)}},colorlist:{coerceFunction:function(P,N,z){function F(w){return g(w).isValid()}!Array.isArray(P)||!P.length?N.set(z):P.every(F)?N.set(P):N.set(z)}},colorscale:{coerceFunction:function(P,N,z){N.set(x.get(P,z))}},angle:{coerceFunction:function(P,N,z){M(P)&&(P=D(P)),P==="auto"?N.set("auto"):ue(P)?N.set(u(+P,360)):N.set(z)}},subplotid:{coerceFunction:function(P,N,z,F){var w=F.regex||T(z);if(typeof P=="string"&&w.test(P)){N.set(P);return}N.set(z)},validateFunction:function(P,N){var z=N.dflt;return P===z?!0:typeof P!="string"?!1:!!T(z).test(P)}},flaglist:{coerceFunction:function(P,N,z,F){if((F.extras||[]).indexOf(P)!==-1){N.set(P);return}if(typeof P!="string"){N.set(z);return}for(var w=P.split("+"),L=0;L<w.length;){var O=w[L];F.flags.indexOf(O)===-1||w.indexOf(O)<L?w.splice(L,1):L++}w.length?N.set(w.join("+")):N.set(z)}},any:{coerceFunction:function(P,N,z){P===void 0?N.set(z):N.set(M(P)?D(P):P)}},info_array:{coerceFunction:function(P,N,z,F){function w(Ae,Le,ce){var ke,Pe={set:function(tt){ke=tt}};return ce===void 0&&(ce=Le.dflt),me.valObjectMeta[Le.valType].coerceFunction(Ae,Pe,ce,Le),ke}if(M(P)&&(P=D(P)),!k(P)){N.set(z);return}var L=F.dimensions===2||F.dimensions==="1-2"&&Array.isArray(P)&&k(P[0]),O=F.items,H=[],W=Array.isArray(O),Ce=W&&L&&k(O[0]),he=L&&W&&!Ce,le=W&&!he?O.length:P.length,Y,Re,fe,xe,ge,ye;if(z=Array.isArray(z)?z:[],L)for(Y=0;Y<le;Y++)for(H[Y]=[],fe=k(P[Y])?P[Y]:[],he?ge=O.length:W?ge=O[Y].length:ge=fe.length,Re=0;Re<ge;Re++)he?xe=O[Re]:W?xe=O[Y][Re]:xe=O,ye=w(fe[Re],xe,(z[Y]||[])[Re]),ye!==void 0&&(H[Y][Re]=ye);else for(Y=0;Y<le;Y++)ye=w(P[Y],W?O[Y]:O,z[Y]),ye!==void 0&&(H[Y]=ye);N.set(H)},validateFunction:function(P,N){if(!k(P))return!1;var z=N.items,F=Array.isArray(z),w=N.dimensions===2;if(!N.freeLength&&P.length!==z.length)return!1;for(var L=0;L<P.length;L++)if(w){if(!k(P[L])||!N.freeLength&&P[L].length!==z[L].length)return!1;for(var O=0;O<P[L].length;O++)if(!B(P[L][O],F?z[L][O]:z))return!1}else if(!B(P[L],F?z[L]:z))return!1;return!0}}},me.coerce=function(P,N,z,F,w){var L=b(z,F).get(),O=b(P,F),H=b(N,F),W=O.get(),Ce=N._template;if(W===void 0&&Ce&&(W=b(Ce,F).get(),Ce=0),w===void 0&&(w=L.dflt),L.arrayOk){if(k(W))return H.set(W),W;if(M(W))return W=D(W),H.set(W),W}var he=me.valObjectMeta[L.valType].coerceFunction;he(W,H,w,L);var le=H.get();return Ce&&le===w&&!B(W,L)&&(W=b(Ce,F).get(),he(W,H,w,L),le=H.get()),le},me.coerce2=function(P,N,z,F,w){var L=b(P,F),O=me.coerce(P,N,z,F,w),H=L.get();return H!=null?O:!1},me.coerceFont=function(P,N,z,F){F||(F={}),z=s({},z),z=s(z,F.overrideDflt||{});var w={family:P(N+".family",z.family),size:P(N+".size",z.size),color:P(N+".color",z.color),weight:P(N+".weight",z.weight),style:P(N+".style",z.style)};if(F.noFontVariant||(w.variant=P(N+".variant",z.variant)),F.noFontLineposition||(w.lineposition=P(N+".lineposition",z.lineposition)),F.noFontTextcase||(w.textcase=P(N+".textcase",z.textcase)),!F.noFontShadow){var L=z.shadow;L==="none"&&F.autoShadowDflt&&(L="auto"),w.shadow=P(N+".shadow",L)}return w},me.coercePattern=function(P,N,z,F){var w=P(N+".shape"),L;if(w||(L=P(N+".path")),w||L){w&&P(N+".solidity"),P(N+".size");var O=P(N+".fillmode"),H=O==="overlay";if(!F){var W=P(N+".bgcolor",H?z:void 0);P(N+".fgcolor",H?v.contrast(W):z)}P(N+".fgopacity",H?.5:1)}},me.coerceHoverinfo=function(P,N,z){var F=N._module.attributes,w=F.hoverinfo?F:h,L=w.hoverinfo,O;if(z._dataLength===1){var H=L.dflt==="all"?L.flags.slice():L.dflt.split("+");H.splice(H.indexOf("name"),1),O=H.join("+")}return me.coerce(P,N,w,"hoverinfo",O)},me.coerceSelectionMarkerOpacity=function(P,N){if(P.marker){var z=P.marker.opacity;if(z!==void 0){var F,w;!k(z)&&!P.selected&&!P.unselected&&(F=z,w=y*z),N("selected.marker.opacity",F),N("unselected.marker.opacity",w)}}};function B(P,N){var z=me.valObjectMeta[N.valType];if(N.arrayOk&&k(P))return!0;if(z.validateFunction)return z.validateFunction(P,N);var F={},w=F,L={set:function(O){w=O}};return z.coerceFunction(P,L,F,N),w!==F}me.validate=B}),Hl=t((me,ue)=>{var g={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/un/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},s={};function h(x,v){for(var y in x){var b=x[y];b.valType?v[y]=b.dflt:(v[y]||(v[y]={}),h(b,v[y]))}}h(g,s),ue.exports={configAttributes:g,dfltConfig:s}}),pr=t((me,ue)=>{var g=c(),s=A(),h=[];ue.exports=function(x,v){if(h.indexOf(x)!==-1)return;h.push(x);var y=1e3;s(v)?y=v:v==="long"&&(y=3e3);var b=g.select("body").selectAll(".plotly-notifier").data([0]);b.enter().append("div").classed("plotly-notifier",!0);var T=b.selectAll(".notifier-note").data(h);function u(k){k.duration(700).style("opacity",0).each("end",function(M){var D=h.indexOf(M);D!==-1&&h.splice(D,1),g.select(this).remove()})}T.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(k){var M=g.select(this);M.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){M.transition().call(u)});for(var D=M.append("p"),B=k.split(/<br\s*\/?>/g),P=0;P<B.length;P++)P&&D.append("br"),D.append("span").text(B[P]);v==="stick"?M.transition().duration(350).style("opacity",1):M.transition().duration(700).style("opacity",1).transition().delay(y).call(u)})}}),Hp=t((me,ue)=>{var g=Hl().dfltConfig,s=pr(),h=ue.exports={};h.log=function(){var x;if(g.logging>1){var v=["LOG:"];for(x=0;x<arguments.length;x++)v.push(arguments[x]);console.trace.apply(console,v)}if(g.notifyOnLogging>1){var y=[];for(x=0;x<arguments.length;x++)y.push(arguments[x]);s(y.join("<br>"),"long")}},h.warn=function(){var x;if(g.logging>0){var v=["WARN:"];for(x=0;x<arguments.length;x++)v.push(arguments[x]);console.trace.apply(console,v)}if(g.notifyOnLogging>0){var y=[];for(x=0;x<arguments.length;x++)y.push(arguments[x]);s(y.join("<br>"),"stick")}},h.error=function(){var x;if(g.logging>0){var v=["ERROR:"];for(x=0;x<arguments.length;x++)v.push(arguments[x]);console.error.apply(console,v)}if(g.notifyOnLogging>0){var y=[];for(x=0;x<arguments.length;x++)y.push(arguments[x]);s(y.join("<br>"),"stick")}}}),Gl=t((me,ue)=>{ue.exports=function(){}}),Ip=t((me,ue)=>{ue.exports=function(g,s){if(s instanceof RegExp){for(var h=s.toString(),x=0;x<g.length;x++)if(g[x]instanceof RegExp&&g[x].toString()===h)return g;g.push(s)}else(s||s===0)&&g.indexOf(s)===-1&&g.push(s);return g}}),qp=t((me,ue)=>{ue.exports=g;function g(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}}),ci=t((me,ue)=>{ue.exports=g;function g(s){var h=new Float32Array(16);return h[0]=s[0],h[1]=s[1],h[2]=s[2],h[3]=s[3],h[4]=s[4],h[5]=s[5],h[6]=s[6],h[7]=s[7],h[8]=s[8],h[9]=s[9],h[10]=s[10],h[11]=s[11],h[12]=s[12],h[13]=s[13],h[14]=s[14],h[15]=s[15],h}}),Ep=t((me,ue)=>{ue.exports=g;function g(s,h){return s[0]=h[0],s[1]=h[1],s[2]=h[2],s[3]=h[3],s[4]=h[4],s[5]=h[5],s[6]=h[6],s[7]=h[7],s[8]=h[8],s[9]=h[9],s[10]=h[10],s[11]=h[11],s[12]=h[12],s[13]=h[13],s[14]=h[14],s[15]=h[15],s}}),o0=t((me,ue)=>{ue.exports=g;function g(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}}),w0=t((me,ue)=>{ue.exports=g;function g(s,h){if(s===h){var x=h[1],v=h[2],y=h[3],b=h[6],T=h[7],u=h[11];s[1]=h[4],s[2]=h[8],s[3]=h[12],s[4]=x,s[6]=h[9],s[7]=h[13],s[8]=v,s[9]=b,s[11]=h[14],s[12]=y,s[13]=T,s[14]=u}else s[0]=h[0],s[1]=h[4],s[2]=h[8],s[3]=h[12],s[4]=h[1],s[5]=h[5],s[6]=h[9],s[7]=h[13],s[8]=h[2],s[9]=h[6],s[10]=h[10],s[11]=h[14],s[12]=h[3],s[13]=h[7],s[14]=h[11],s[15]=h[15];return s}}),a0=t((me,ue)=>{ue.exports=g;function g(s,h){var x=h[0],v=h[1],y=h[2],b=h[3],T=h[4],u=h[5],k=h[6],M=h[7],D=h[8],B=h[9],P=h[10],N=h[11],z=h[12],F=h[13],w=h[14],L=h[15],O=x*u-v*T,H=x*k-y*T,W=x*M-b*T,Ce=v*k-y*u,he=v*M-b*u,le=y*M-b*k,Y=D*F-B*z,Re=D*w-P*z,fe=D*L-N*z,xe=B*w-P*F,ge=B*L-N*F,ye=P*L-N*w,Ae=O*ye-H*ge+W*xe+Ce*fe-he*Re+le*Y;return Ae?(Ae=1/Ae,s[0]=(u*ye-k*ge+M*xe)*Ae,s[1]=(y*ge-v*ye-b*xe)*Ae,s[2]=(F*le-w*he+L*Ce)*Ae,s[3]=(P*he-B*le-N*Ce)*Ae,s[4]=(k*fe-T*ye-M*Re)*Ae,s[5]=(x*ye-y*fe+b*Re)*Ae,s[6]=(w*W-z*le-L*H)*Ae,s[7]=(D*le-P*W+N*H)*Ae,s[8]=(T*ge-u*fe+M*Y)*Ae,s[9]=(v*fe-x*ge-b*Y)*Ae,s[10]=(z*he-F*W+L*O)*Ae,s[11]=(B*W-D*he-N*O)*Ae,s[12]=(u*Re-T*xe-k*Y)*Ae,s[13]=(x*xe-v*Re+y*Y)*Ae,s[14]=(F*H-z*Ce-w*O)*Ae,s[15]=(D*Ce-B*H+P*O)*Ae,s):null}}),P0=t((me,ue)=>{ue.exports=g;function g(s,h){var x=h[0],v=h[1],y=h[2],b=h[3],T=h[4],u=h[5],k=h[6],M=h[7],D=h[8],B=h[9],P=h[10],N=h[11],z=h[12],F=h[13],w=h[14],L=h[15];return s[0]=u*(P*L-N*w)-B*(k*L-M*w)+F*(k*N-M*P),s[1]=-(v*(P*L-N*w)-B*(y*L-b*w)+F*(y*N-b*P)),s[2]=v*(k*L-M*w)-u*(y*L-b*w)+F*(y*M-b*k),s[3]=-(v*(k*N-M*P)-u*(y*N-b*P)+B*(y*M-b*k)),s[4]=-(T*(P*L-N*w)-D*(k*L-M*w)+z*(k*N-M*P)),s[5]=x*(P*L-N*w)-D*(y*L-b*w)+z*(y*N-b*P),s[6]=-(x*(k*L-M*w)-T*(y*L-b*w)+z*(y*M-b*k)),s[7]=x*(k*N-M*P)-T*(y*N-b*P)+D*(y*M-b*k),s[8]=T*(B*L-N*F)-D*(u*L-M*F)+z*(u*N-M*B),s[9]=-(x*(B*L-N*F)-D*(v*L-b*F)+z*(v*N-b*B)),s[10]=x*(u*L-M*F)-T*(v*L-b*F)+z*(v*M-b*u),s[11]=-(x*(u*N-M*B)-T*(v*N-b*B)+D*(v*M-b*u)),s[12]=-(T*(B*w-P*F)-D*(u*w-k*F)+z*(u*P-k*B)),s[13]=x*(B*w-P*F)-D*(v*w-y*F)+z*(v*P-y*B),s[14]=-(x*(u*w-k*F)-T*(v*w-y*F)+z*(v*k-y*u)),s[15]=x*(u*P-k*B)-T*(v*P-y*B)+D*(v*k-y*u),s}}),am=t((me,ue)=>{ue.exports=g;function g(s){var h=s[0],x=s[1],v=s[2],y=s[3],b=s[4],T=s[5],u=s[6],k=s[7],M=s[8],D=s[9],B=s[10],P=s[11],N=s[12],z=s[13],F=s[14],w=s[15],L=h*T-x*b,O=h*u-v*b,H=h*k-y*b,W=x*u-v*T,Ce=x*k-y*T,he=v*k-y*u,le=M*z-D*N,Y=M*F-B*N,Re=M*w-P*N,fe=D*F-B*z,xe=D*w-P*z,ge=B*w-P*F;return L*ge-O*xe+H*fe+W*Re-Ce*Y+he*le}}),sm=t((me,ue)=>{ue.exports=g;function g(s,h,x){var v=h[0],y=h[1],b=h[2],T=h[3],u=h[4],k=h[5],M=h[6],D=h[7],B=h[8],P=h[9],N=h[10],z=h[11],F=h[12],w=h[13],L=h[14],O=h[15],H=x[0],W=x[1],Ce=x[2],he=x[3];return s[0]=H*v+W*u+Ce*B+he*F,s[1]=H*y+W*k+Ce*P+he*w,s[2]=H*b+W*M+Ce*N+he*L,s[3]=H*T+W*D+Ce*z+he*O,H=x[4],W=x[5],Ce=x[6],he=x[7],s[4]=H*v+W*u+Ce*B+he*F,s[5]=H*y+W*k+Ce*P+he*w,s[6]=H*b+W*M+Ce*N+he*L,s[7]=H*T+W*D+Ce*z+he*O,H=x[8],W=x[9],Ce=x[10],he=x[11],s[8]=H*v+W*u+Ce*B+he*F,s[9]=H*y+W*k+Ce*P+he*w,s[10]=H*b+W*M+Ce*N+he*L,s[11]=H*T+W*D+Ce*z+he*O,H=x[12],W=x[13],Ce=x[14],he=x[15],s[12]=H*v+W*u+Ce*B+he*F,s[13]=H*y+W*k+Ce*P+he*w,s[14]=H*b+W*M+Ce*N+he*L,s[15]=H*T+W*D+Ce*z+he*O,s}}),C0=t((me,ue)=>{ue.exports=g;function g(s,h,x){var v=x[0],y=x[1],b=x[2],T,u,k,M,D,B,P,N,z,F,w,L;return h===s?(s[12]=h[0]*v+h[4]*y+h[8]*b+h[12],s[13]=h[1]*v+h[5]*y+h[9]*b+h[13],s[14]=h[2]*v+h[6]*y+h[10]*b+h[14],s[15]=h[3]*v+h[7]*y+h[11]*b+h[15]):(T=h[0],u=h[1],k=h[2],M=h[3],D=h[4],B=h[5],P=h[6],N=h[7],z=h[8],F=h[9],w=h[10],L=h[11],s[0]=T,s[1]=u,s[2]=k,s[3]=M,s[4]=D,s[5]=B,s[6]=P,s[7]=N,s[8]=z,s[9]=F,s[10]=w,s[11]=L,s[12]=T*v+D*y+z*b+h[12],s[13]=u*v+B*y+F*b+h[13],s[14]=k*v+P*y+w*b+h[14],s[15]=M*v+N*y+L*b+h[15]),s}}),Fm=t((me,ue)=>{ue.exports=g;function g(s,h,x){var v=x[0],y=x[1],b=x[2];return s[0]=h[0]*v,s[1]=h[1]*v,s[2]=h[2]*v,s[3]=h[3]*v,s[4]=h[4]*y,s[5]=h[5]*y,s[6]=h[6]*y,s[7]=h[7]*y,s[8]=h[8]*b,s[9]=h[9]*b,s[10]=h[10]*b,s[11]=h[11]*b,s[12]=h[12],s[13]=h[13],s[14]=h[14],s[15]=h[15],s}}),Zm=t((me,ue)=>{ue.exports=g;function g(s,h,x,v){var y=v[0],b=v[1],T=v[2],u=Math.sqrt(y*y+b*b+T*T),k,M,D,B,P,N,z,F,w,L,O,H,W,Ce,he,le,Y,Re,fe,xe,ge,ye,Ae,Le;return Math.abs(u)<1e-6?null:(u=1/u,y*=u,b*=u,T*=u,k=Math.sin(x),M=Math.cos(x),D=1-M,B=h[0],P=h[1],N=h[2],z=h[3],F=h[4],w=h[5],L=h[6],O=h[7],H=h[8],W=h[9],Ce=h[10],he=h[11],le=y*y*D+M,Y=b*y*D+T*k,Re=T*y*D-b*k,fe=y*b*D-T*k,xe=b*b*D+M,ge=T*b*D+y*k,ye=y*T*D+b*k,Ae=b*T*D-y*k,Le=T*T*D+M,s[0]=B*le+F*Y+H*Re,s[1]=P*le+w*Y+W*Re,s[2]=N*le+L*Y+Ce*Re,s[3]=z*le+O*Y+he*Re,s[4]=B*fe+F*xe+H*ge,s[5]=P*fe+w*xe+W*ge,s[6]=N*fe+L*xe+Ce*ge,s[7]=z*fe+O*xe+he*ge,s[8]=B*ye+F*Ae+H*Le,s[9]=P*ye+w*Ae+W*Le,s[10]=N*ye+L*Ae+Ce*Le,s[11]=z*ye+O*Ae+he*Le,h!==s&&(s[12]=h[12],s[13]=h[13],s[14]=h[14],s[15]=h[15]),s)}}),p1=t((me,ue)=>{ue.exports=g;function g(s,h,x){var v=Math.sin(x),y=Math.cos(x),b=h[4],T=h[5],u=h[6],k=h[7],M=h[8],D=h[9],B=h[10],P=h[11];return h!==s&&(s[0]=h[0],s[1]=h[1],s[2]=h[2],s[3]=h[3],s[12]=h[12],s[13]=h[13],s[14]=h[14],s[15]=h[15]),s[4]=b*y+M*v,s[5]=T*y+D*v,s[6]=u*y+B*v,s[7]=k*y+P*v,s[8]=M*y-b*v,s[9]=D*y-T*v,s[10]=B*y-u*v,s[11]=P*y-k*v,s}}),A1=t((me,ue)=>{ue.exports=g;function g(s,h,x){var v=Math.sin(x),y=Math.cos(x),b=h[0],T=h[1],u=h[2],k=h[3],M=h[8],D=h[9],B=h[10],P=h[11];return h!==s&&(s[4]=h[4],s[5]=h[5],s[6]=h[6],s[7]=h[7],s[12]=h[12],s[13]=h[13],s[14]=h[14],s[15]=h[15]),s[0]=b*y-M*v,s[1]=T*y-D*v,s[2]=u*y-B*v,s[3]=k*y-P*v,s[8]=b*v+M*y,s[9]=T*v+D*y,s[10]=u*v+B*y,s[11]=k*v+P*y,s}}),T1=t((me,ue)=>{ue.exports=g;function g(s,h,x){var v=Math.sin(x),y=Math.cos(x),b=h[0],T=h[1],u=h[2],k=h[3],M=h[4],D=h[5],B=h[6],P=h[7];return h!==s&&(s[8]=h[8],s[9]=h[9],s[10]=h[10],s[11]=h[11],s[12]=h[12],s[13]=h[13],s[14]=h[14],s[15]=h[15]),s[0]=b*y+M*v,s[1]=T*y+D*v,s[2]=u*y+B*v,s[3]=k*y+P*v,s[4]=M*y-b*v,s[5]=D*y-T*v,s[6]=B*y-u*v,s[7]=P*y-k*v,s}}),Tm=t((me,ue)=>{ue.exports=g;function g(s,h,x){var v,y,b,T=x[0],u=x[1],k=x[2],M=Math.sqrt(T*T+u*u+k*k);return Math.abs(M)<1e-6?null:(M=1/M,T*=M,u*=M,k*=M,v=Math.sin(h),y=Math.cos(h),b=1-y,s[0]=T*T*b+y,s[1]=u*T*b+k*v,s[2]=k*T*b-u*v,s[3]=0,s[4]=T*u*b-k*v,s[5]=u*u*b+y,s[6]=k*u*b+T*v,s[7]=0,s[8]=T*k*b+u*v,s[9]=u*k*b-T*v,s[10]=k*k*b+y,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}}),x1=t((me,ue)=>{ue.exports=g;function g(s,h,x){var v=h[0],y=h[1],b=h[2],T=h[3],u=v+v,k=y+y,M=b+b,D=v*u,B=v*k,P=v*M,N=y*k,z=y*M,F=b*M,w=T*u,L=T*k,O=T*M;return s[0]=1-(N+F),s[1]=B+O,s[2]=P-L,s[3]=0,s[4]=B-O,s[5]=1-(D+F),s[6]=z+w,s[7]=0,s[8]=P+L,s[9]=z-w,s[10]=1-(D+N),s[11]=0,s[12]=x[0],s[13]=x[1],s[14]=x[2],s[15]=1,s}}),S1=t((me,ue)=>{ue.exports=g;function g(s,h){return s[0]=h[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=h[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=h[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}}),p0=t((me,ue)=>{ue.exports=g;function g(s,h){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=h[0],s[13]=h[1],s[14]=h[2],s[15]=1,s}}),zp=t((me,ue)=>{ue.exports=g;function g(s,h){var x=Math.sin(h),v=Math.cos(h);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=v,s[6]=x,s[7]=0,s[8]=0,s[9]=-x,s[10]=v,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}}),om=t((me,ue)=>{ue.exports=g;function g(s,h){var x=Math.sin(h),v=Math.cos(h);return s[0]=v,s[1]=0,s[2]=-x,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=x,s[9]=0,s[10]=v,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}}),bm=t((me,ue)=>{ue.exports=g;function g(s,h){var x=Math.sin(h),v=Math.cos(h);return s[0]=v,s[1]=x,s[2]=0,s[3]=0,s[4]=-x,s[5]=v,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}}),i1=t((me,ue)=>{ue.exports=g;function g(s,h){var x=h[0],v=h[1],y=h[2],b=h[3],T=x+x,u=v+v,k=y+y,M=x*T,D=v*T,B=v*u,P=y*T,N=y*u,z=y*k,F=b*T,w=b*u,L=b*k;return s[0]=1-B-z,s[1]=D+L,s[2]=P-w,s[3]=0,s[4]=D-L,s[5]=1-M-z,s[6]=N+F,s[7]=0,s[8]=P+w,s[9]=N-F,s[10]=1-M-B,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}}),r1=t((me,ue)=>{ue.exports=g;function g(s,h,x,v,y,b,T){var u=1/(x-h),k=1/(y-v),M=1/(b-T);return s[0]=b*2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=b*2*k,s[6]=0,s[7]=0,s[8]=(x+h)*u,s[9]=(y+v)*k,s[10]=(T+b)*M,s[11]=-1,s[12]=0,s[13]=0,s[14]=T*b*2*M,s[15]=0,s}}),Gp=t((me,ue)=>{ue.exports=g;function g(s,h,x,v,y){var b=1/Math.tan(h/2),T=1/(v-y);return s[0]=b/x,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=b,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(y+v)*T,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*y*v*T,s[15]=0,s}}),i0=t((me,ue)=>{ue.exports=g;function g(s,h,x,v){var y=Math.tan(h.upDegrees*Math.PI/180),b=Math.tan(h.downDegrees*Math.PI/180),T=Math.tan(h.leftDegrees*Math.PI/180),u=Math.tan(h.rightDegrees*Math.PI/180),k=2/(T+u),M=2/(y+b);return s[0]=k,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=M,s[6]=0,s[7]=0,s[8]=-((T-u)*k*.5),s[9]=(y-b)*M*.5,s[10]=v/(x-v),s[11]=-1,s[12]=0,s[13]=0,s[14]=v*x/(x-v),s[15]=0,s}}),l0=t((me,ue)=>{ue.exports=g;function g(s,h,x,v,y,b,T){var u=1/(h-x),k=1/(v-y),M=1/(b-T);return s[0]=-2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*k,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*M,s[11]=0,s[12]=(h+x)*u,s[13]=(y+v)*k,s[14]=(T+b)*M,s[15]=1,s}}),im=t((me,ue)=>{var g=o0();ue.exports=s;function s(h,x,v,y){var b,T,u,k,M,D,B,P,N,z,F=x[0],w=x[1],L=x[2],O=y[0],H=y[1],W=y[2],Ce=v[0],he=v[1],le=v[2];return Math.abs(F-Ce)<1e-6&&Math.abs(w-he)<1e-6&&Math.abs(L-le)<1e-6?g(h):(B=F-Ce,P=w-he,N=L-le,z=1/Math.sqrt(B*B+P*P+N*N),B*=z,P*=z,N*=z,b=H*N-W*P,T=W*B-O*N,u=O*P-H*B,z=Math.sqrt(b*b+T*T+u*u),z?(z=1/z,b*=z,T*=z,u*=z):(b=0,T=0,u=0),k=P*u-N*T,M=N*b-B*u,D=B*T-P*b,z=Math.sqrt(k*k+M*M+D*D),z?(z=1/z,k*=z,M*=z,D*=z):(k=0,M=0,D=0),h[0]=b,h[1]=k,h[2]=B,h[3]=0,h[4]=T,h[5]=M,h[6]=P,h[7]=0,h[8]=u,h[9]=D,h[10]=N,h[11]=0,h[12]=-(b*F+T*w+u*L),h[13]=-(k*F+M*w+D*L),h[14]=-(B*F+P*w+N*L),h[15]=1,h)}}),dm=t((me,ue)=>{ue.exports=g;function g(s){return"mat4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+", "+s[6]+", "+s[7]+", "+s[8]+", "+s[9]+", "+s[10]+", "+s[11]+", "+s[12]+", "+s[13]+", "+s[14]+", "+s[15]+")"}}),pm=t((me,ue)=>{ue.exports={create:qp(),clone:ci(),copy:Ep(),identity:o0(),transpose:w0(),invert:a0(),adjoint:P0(),determinant:am(),multiply:sm(),translate:C0(),scale:Fm(),rotate:Zm(),rotateX:p1(),rotateY:A1(),rotateZ:T1(),fromRotation:Tm(),fromRotationTranslation:x1(),fromScaling:S1(),fromTranslation:p0(),fromXRotation:zp(),fromYRotation:om(),fromZRotation:bm(),fromQuat:i1(),frustum:r1(),perspective:Gp(),perspectiveFromFieldOfView:i0(),ortho:l0(),lookAt:im(),str:dm()}}),Dm=t(me=>{var ue=pm();me.init2dArray=function(g,s){for(var h=new Array(g),x=0;x<g;x++)h[x]=new Array(s);return h},me.transposeRagged=function(g){var s=0,h=g.length,x,v;for(x=0;x<h;x++)s=Math.max(s,g[x].length);var y=new Array(s);for(x=0;x<s;x++)for(y[x]=new Array(h),v=0;v<h;v++)y[x][v]=g[v][x];return y},me.dot=function(g,s){if(!(g.length&&s.length)||g.length!==s.length)return null;var h=g.length,x,v;if(g[0].length)for(x=new Array(h),v=0;v<h;v++)x[v]=me.dot(g[v],s);else if(s[0].length){var y=me.transposeRagged(s);for(x=new Array(y.length),v=0;v<y.length;v++)x[v]=me.dot(g,y[v])}else for(x=0,v=0;v<h;v++)x+=g[v]*s[v];return x},me.translationMatrix=function(g,s){return[[1,0,g],[0,1,s],[0,0,1]]},me.rotationMatrix=function(g){var s=g*Math.PI/180;return[[Math.cos(s),-Math.sin(s),0],[Math.sin(s),Math.cos(s),0],[0,0,1]]},me.rotationXYMatrix=function(g,s,h){return me.dot(me.dot(me.translationMatrix(s,h),me.rotationMatrix(g)),me.translationMatrix(-s,-h))},me.apply3DTransform=function(g){return function(){var s=arguments,h=arguments.length===1?s[0]:[s[0],s[1],s[2]||0];return me.dot(g,[h[0],h[1],h[2],1]).slice(0,3)}},me.apply2DTransform=function(g){return function(){var s=arguments;s.length===3&&(s=s[0]);var h=arguments.length===1?s[0]:[s[0],s[1]];return me.dot(g,[h[0],h[1],1]).slice(0,2)}},me.apply2DTransform2=function(g){var s=me.apply2DTransform(g);return function(h){return s(h.slice(0,2)).concat(s(h.slice(2,4)))}},me.convertCssMatrix=function(g){if(g){var s=g.length;if(s===16)return g;if(s===6)return[g[0],g[1],0,0,g[2],g[3],0,0,0,0,1,0,g[4],g[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},me.inverseTransformMatrix=function(g){var s=[];return ue.invert(s,g),[[s[0],s[1],s[2],s[3]],[s[4],s[5],s[6],s[7]],[s[8],s[9],s[10],s[11]],[s[12],s[13],s[14],s[15]]]}}),Gm=t((me,ue)=>{var g=c(),s=Hp(),h=Dm(),x=pm();function v(F){var w;if(typeof F=="string"){if(w=document.getElementById(F),w===null)throw new Error("No DOM element with id '"+F+"' exists on the page.");return w}else if(F==null)throw new Error("DOM element provided is null or undefined");return F}function y(F){var w=g.select(F);return w.node()instanceof HTMLElement&&w.size()&&w.classed("js-plotly-plot")}function b(F){var w=F&&F.parentNode;w&&w.removeChild(F)}function T(F,w){u("global",F,w)}function u(F,w,L){var O="plotly.js-style-"+F,H=document.getElementById(O);if(!(H&&H.matches(".no-inline-styles"))){H||(H=document.createElement("style"),H.setAttribute("id",O),H.appendChild(document.createTextNode("")),document.head.appendChild(H));var W=H.sheet;W?W.insertRule?W.insertRule(w+"{"+L+"}",0):W.addRule?W.addRule(w,L,0):s.warn("addStyleRule failed"):s.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function k(F){var w="plotly.js-style-"+F,L=document.getElementById(w);L&&b(L)}function M(F,w,L,O,H,W){var Ce=O.split(":"),he=H.split(":"),le="data-btn-style-event-added";W||(W=document),W.querySelectorAll(F).forEach(function(Y){Y.getAttribute(le)||(Y.addEventListener("mouseenter",function(){var Re=this.querySelector(L);Re&&(Re.style[Ce[0]]=Ce[1])}),Y.addEventListener("mouseleave",function(){var Re=this.querySelector(L);Re&&(w&&this.matches(w)?Re.style[Ce[0]]=Ce[1]:Re.style[he[0]]=he[1])}),Y.setAttribute(le,!0))})}function D(F){var w=P(F),L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return w.forEach(function(O){var H=B(O);if(H){var W=h.convertCssMatrix(H);L=x.multiply(L,L,W)}}),L}function B(F){var w=window.getComputedStyle(F,null),L=w.getPropertyValue("-webkit-transform")||w.getPropertyValue("-moz-transform")||w.getPropertyValue("-ms-transform")||w.getPropertyValue("-o-transform")||w.getPropertyValue("transform");return L==="none"?null:L.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(O){return+O})}function P(F){for(var w=[];N(F);)w.push(F),F=F.parentNode,typeof ShadowRoot=="function"&&F instanceof ShadowRoot&&(F=F.host);return w}function N(F){return F&&(F instanceof Element||F instanceof HTMLElement)}function z(F,w){return F&&w&&F.top===w.top&&F.left===w.left&&F.right===w.right&&F.bottom===w.bottom}ue.exports={getGraphDiv:v,isPlotDiv:y,removeElement:b,addStyleRule:T,addRelatedStyleRule:u,deleteRelatedStyleRule:k,setStyleOnHover:M,getFullTransformMatrix:D,getElementTransformMatrix:B,getElementAndAncestors:P,equalDomRects:z}}),qm=t((me,ue)=>{ue.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}}),vm=t((me,ue)=>{var g=Fe().extendFlat,s=V(),h={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},x={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},v=h.flags.slice().concat(["fullReplot"]),y=x.flags.slice().concat("layoutReplot");ue.exports={traces:h,layout:x,traceFlags:function(){return b(v)},layoutFlags:function(){return b(y)},update:function(k,M){var D=M.editType;if(D&&D!=="none")for(var B=D.split("+"),P=0;P<B.length;P++)k[B[P]]=!0},overrideAll:T};function b(k){for(var M={},D=0;D<k.length;D++)M[k[D]]=!1;return M}function T(k,M,D){var B=g({},k);for(var P in B){var N=B[P];s(N)&&(B[P]=u(N,M,D,P))}return D==="from-root"&&(B.editType=M),B}function u(k,M,D,B){if(k.valType){var P=g({},k);if(P.editType=M,Array.isArray(k.items)){P.items=new Array(k.items.length);for(var N=0;N<k.items.length;N++)P.items[N]=u(k.items[N],M)}return P}else return T(k,M,B.charAt(0)==="_"?"nested":"from-root")}}),r0=t(me=>{me.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},me.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},path:{valType:"string",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}}),e1=t((me,ue)=>{ue.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}}),_1=t(me=>{var ue=e1(),g=ue.FORMAT_LINK,s=ue.DATE_FORMAT_LINK;function h(v){var y=v&&v.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(y?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,g,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,s,"for details on the date formatting syntax."].join(" ")}me.templateFormatStringDescription=h;function x(v){var y=v.description?" "+v.description:"",b=v.keys||[];if(b.length>0){for(var T=[],u=0;u<b.length;u++)T[u]="`"+b[u]+"`";y=y+"Finally, the template string has access to ",b.length===1?y=y+"variable "+T[0]:y=y+"variables "+T.slice(0,-1).join(", ")+" and "+T.slice(-1)+"."}return y}me.hovertemplateAttrs=function(v,y){v=v||{},y=y||{},x(y);var b={valType:"string",dflt:"",editType:v.editType||"none"};return v.arrayOk!==!1&&(b.arrayOk=!0),b},me.texttemplateAttrs=function(v,y){v=v||{},y=y||{},x(y);var b={valType:"string",dflt:"",editType:v.editType||"calc"};return v.arrayOk!==!1&&(b.arrayOk=!0),b},me.shapeTexttemplateAttrs=function(v,y){v=v||{},y=y||{},v.newshape,x(y);var b={valType:"string",dflt:"",editType:v.editType||"arraydraw"};return b}}),j1=t((me,ue)=>{function g(L,O){return O?O.d2l(L):L}function s(L,O){return O?O.l2d(L):L}function h(L){return L.x0}function x(L){return L.x1}function v(L){return L.y0}function y(L){return L.y1}function b(L){return L.x0shift||0}function T(L){return L.x1shift||0}function u(L){return L.y0shift||0}function k(L){return L.y1shift||0}function M(L,O){return g(L.x1,O)+T(L)-g(L.x0,O)-b(L)}function D(L,O,H){return g(L.y1,H)+k(L)-g(L.y0,H)-u(L)}function B(L,O){return Math.abs(M(L,O))}function P(L,O,H){return Math.abs(D(L,O,H))}function N(L,O,H){return L.type!=="line"?void 0:Math.sqrt(Math.pow(M(L,O),2)+Math.pow(D(L,O,H),2))}function z(L,O){return s((g(L.x1,O)+T(L)+g(L.x0,O)+b(L))/2,O)}function F(L,O,H){return s((g(L.y1,H)+k(L)+g(L.y0,H)+u(L))/2,H)}function w(L,O,H){return L.type!=="line"?void 0:D(L,O,H)/M(L,O)}ue.exports={x0:h,x1:x,y0:v,y1:y,slope:w,dx:M,dy:D,width:B,height:P,length:N,xcenter:z,ycenter:F}}),q0=t((me,ue)=>{var g=vm().overrideAll,s=mr(),h=Xe(),x=r0().dash,v=Fe().extendFlat,y=_1().shapeTexttemplateAttrs,b=j1();ue.exports=g({newshape:{visible:v({},s.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:v({},s.legend,{}),legendgroup:v({},s.legendgroup,{}),legendgrouptitle:{text:v({},s.legendgrouptitle.text,{}),font:h({})},legendrank:v({},s.legendrank,{}),legendwidth:v({},s.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:v({},x,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:v({},s.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:y({newshape:!0},{keys:Object.keys(b)}),font:h({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")}),d1=t((me,ue)=>{var g=r0().dash,s=Fe().extendFlat;ue.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:s({},g,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}}),tm=t((me,ue)=>{ue.exports=function(g){var s=g.editType;return{t:{valType:"number",dflt:0,editType:s},r:{valType:"number",dflt:0,editType:s},b:{valType:"number",dflt:0,editType:s},l:{valType:"number",dflt:0,editType:s},editType:s}}}),o1=t((me,ue)=>{var g=Xe(),s=qm(),h=Sp(),x=q0(),v=d1(),y=tm(),b=Fe().extendFlat,T=g({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=h.defaultLine,ue.exports={font:T,title:{text:{valType:"string",editType:"layoutstyle"},font:g({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:g({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:b(y({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:h.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:h.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:h.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:x.newshape,activeshape:x.activeshape,newselection:v.newselection,activeselection:v.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},s.transition,{editType:"none"})}}),jm=t(()=>{(function(){if(!document.getElementById("ce8d464691048653ffe3a57c6c18ab566e8366f186677868cf724621a857b4fe")){var me=document.createElement("style");me.id="ce8d464691048653ffe3a57c6c18ab566e8366f186677868cf724621a857b4fe",me.textContent=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,document.head.appendChild(me)}})()}),l1=t(me=>{var ue=Hp(),g=Gl(),s=Ip(),h=V(),x=Gm().addStyleRule,v=Fe(),y=mr(),b=o1(),T=v.extendFlat,u=v.extendDeepAll;me.modules={},me.allCategories={},me.allTypes=[],me.subplotsRegistry={},me.componentsRegistry={},me.layoutArrayContainers=[],me.layoutArrayRegexes=[],me.traceLayoutAttributes={},me.localeRegistry={},me.apiMethodRegistry={},me.collectableSubplotTypes=null,me.register=function(L){if(me.collectableSubplotTypes=null,L)L&&!Array.isArray(L)&&(L=[L]);else throw new Error("No argument passed to Plotly.register.");for(var O=0;O<L.length;O++){var H=L[O];if(!H)throw new Error("Invalid module was attempted to be registered!");switch(H.moduleType){case"trace":k(H);break;case"transform":B(H);break;case"component":D(H);break;case"locale":P(H);break;case"apiMethod":var W=H.name;me.apiMethodRegistry[W]=H.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},me.getModule=function(L){var O=me.modules[w(L)];return O?O._module:!1},me.traceIs=function(L,O){if(L=w(L),L==="various")return!1;var H=me.modules[L];return H||(L&&ue.log("Unrecognized trace type "+L+"."),H=me.modules[y.type.dflt]),!!H.categories[O]},me.getComponentMethod=function(L,O){var H=me.componentsRegistry[L];return H&&H[O]||g},me.call=function(){var L=arguments[0],O=[].slice.call(arguments,1);return me.apiMethodRegistry[L].apply(null,O)};function k(L){var O=L.name,H=L.categories,W=L.meta;if(me.modules[O]){ue.log("Type "+O+" already registered");return}me.subplotsRegistry[L.basePlotModule.name]||M(L.basePlotModule);for(var Ce={},he=0;he<H.length;he++)Ce[H[he]]=!0,me.allCategories[H[he]]=!0;me.modules[O]={_module:L,categories:Ce},W&&Object.keys(W).length&&(me.modules[O].meta=W),me.allTypes.push(O);for(var le in me.componentsRegistry)z(le,O);L.layoutAttributes&&T(me.traceLayoutAttributes,L.layoutAttributes);var Y=L.basePlotModule,Re=Y.name;if(Re==="mapbox"){var fe=Y.constants.styleRules;for(var xe in fe)x(".js-plotly-plot .plotly .mapboxgl-"+xe,fe[xe])}Re==="map"&&jm(),(Re==="geo"||Re==="mapbox"||Re==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function M(L){var O=L.name;if(me.subplotsRegistry[O]){ue.log("Plot type "+O+" already registered.");return}N(L),me.subplotsRegistry[O]=L;for(var H in me.componentsRegistry)F(H,L.name)}function D(L){if(typeof L.name!="string")throw new Error("Component module *name* must be a string.");var O=L.name;me.componentsRegistry[O]=L,L.layoutAttributes&&(L.layoutAttributes._isLinkedToArray&&s(me.layoutArrayContainers,O),N(L));for(var H in me.modules)z(O,H);for(var W in me.subplotsRegistry)F(O,W);L.schema&&L.schema.layout&&u(b,L.schema.layout)}function B(L){if(typeof L.name!="string")throw new Error("Transform module *name* must be a string.");var O="Transform module "+L.name,H=typeof L.transform=="function",W=typeof L.calcTransform=="function";if(!H&&!W)throw new Error(O+" is missing a *transform* or *calcTransform* method.");H&&W&&ue.log([O+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),h(L.attributes)||ue.log(O+" registered without an *attributes* object."),typeof L.supplyDefaults!="function"&&ue.log(O+" registered without a *supplyDefaults* method.")}function P(L){var O=L.name,H=O.split("-")[0],W=L.dictionary,Ce=L.format,he=W&&Object.keys(W).length,le=Ce&&Object.keys(Ce).length,Y=me.localeRegistry,Re=Y[O];if(Re||(Y[O]=Re={}),H!==O){var fe=Y[H];fe||(Y[H]=fe={}),he&&fe.dictionary===Re.dictionary&&(fe.dictionary=W),le&&fe.format===Re.format&&(fe.format=Ce)}he&&(Re.dictionary=W),le&&(Re.format=Ce)}function N(L){if(L.layoutAttributes){var O=L.layoutAttributes._arrayAttrRegexps;if(O)for(var H=0;H<O.length;H++)s(me.layoutArrayRegexes,O[H])}}function z(L,O){var H=me.componentsRegistry[L].schema;if(!(!H||!H.traces)){var W=H.traces[O];W&&u(me.modules[O]._module.attributes,W)}}function F(L,O){var H=me.componentsRegistry[L].schema;if(!(!H||!H.subplots)){var W=me.subplotsRegistry[O],Ce=W.layoutAttributes,he=W.attr==="subplot"?W.name:W.attr;Array.isArray(he)&&(he=he[0]);var le=H.subplots[he];Ce&&le&&u(Ce,le)}}function w(L){return typeof L=="object"&&(L=L.type),L}}),gg=t(me=>{var ue=p().timeFormat,g=A(),s=Hp(),h=se().mod,x=C(),v=x.BADNUM,y=x.ONEDAY,b=x.ONEHOUR,T=x.ONEMIN,u=x.ONESEC,k=x.EPOCHJD,M=l1(),D=p().utcFormat,B=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,P=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,N=new Date().getFullYear()-70;function z(Ae){return Ae&&M.componentsRegistry.calendars&&typeof Ae=="string"&&Ae!=="gregorian"}me.dateTick0=function(Ae,Le){var ce=F(Ae,!!Le);if(Le<2)return ce;var ke=me.dateTime2ms(ce,Ae);return ke+=y*(Le-1),me.ms2DateTime(ke,0,Ae)};function F(Ae,Le){return z(Ae)?Le?M.getComponentMethod("calendars","CANONICAL_SUNDAY")[Ae]:M.getComponentMethod("calendars","CANONICAL_TICK")[Ae]:Le?"2000-01-02":"2000-01-01"}me.dfltRange=function(Ae){return z(Ae)?M.getComponentMethod("calendars","DFLTRANGE")[Ae]:["2000-01-01","2001-01-01"]},me.isJSDate=function(Ae){return typeof Ae=="object"&&Ae!==null&&typeof Ae.getTime=="function"};var w,L;me.dateTime2ms=function(Ae,Le){if(me.isJSDate(Ae)){var ce=Ae.getTimezoneOffset()*T,ke=(Ae.getUTCMinutes()-Ae.getMinutes())*T+(Ae.getUTCSeconds()-Ae.getSeconds())*u+(Ae.getUTCMilliseconds()-Ae.getMilliseconds());if(ke){var Pe=3*T;ce=ce-Pe/2+h(ke-ce+Pe/2,Pe)}return Ae=Number(Ae)-ce,Ae>=w&&Ae<=L?Ae:v}if(typeof Ae!="string"&&typeof Ae!="number")return v;Ae=String(Ae);var tt=z(Le),Ke=Ae.charAt(0);tt&&(Ke==="G"||Ke==="g")&&(Ae=Ae.substr(1),Le="");var nt=tt&&Le.substr(0,7)==="chinese",yi=Ae.match(nt?P:B);if(!yi)return v;var Ei=yi[1],vs=yi[3]||"1",Se=Number(yi[5]||1),Ee=Number(yi[7]||0),X=Number(yi[9]||0),Oe=Number(yi[11]||0);if(tt){if(Ei.length===2)return v;Ei=Number(Ei);var Qe;try{var pe=M.getComponentMethod("calendars","getCal")(Le);if(nt){var q=vs.charAt(vs.length-1)==="i";vs=parseInt(vs,10),Qe=pe.newDate(Ei,pe.toMonthIndex(Ei,vs,q),Se)}else Qe=pe.newDate(Ei,Number(vs),Se)}catch{return v}return Qe?(Qe.toJD()-k)*y+Ee*b+X*T+Oe*u:v}Ei.length===2?Ei=(Number(Ei)+2e3-N)%100+N:Ei=Number(Ei),vs-=1;var ae=new Date(Date.UTC(2e3,vs,Se,Ee,X));return ae.setUTCFullYear(Ei),ae.getUTCMonth()!==vs||ae.getUTCDate()!==Se?v:ae.getTime()+Oe*u},w=me.MIN_MS=me.dateTime2ms("-9999"),L=me.MAX_MS=me.dateTime2ms("9999-12-31 23:59:59.9999"),me.isDateTime=function(Ae,Le){return me.dateTime2ms(Ae,Le)!==v};function O(Ae,Le){return String(Ae+Math.pow(10,Le)).substr(1)}var H=90*y,W=3*b,Ce=5*T;me.ms2DateTime=function(Ae,Le,ce){if(typeof Ae!="number"||!(Ae>=w&&Ae<=L))return v;Le||(Le=0);var ke=Math.floor(h(Ae+.05,1)*10),Pe=Math.round(Ae-ke/10),tt,Ke,nt,yi,Ei,vs;if(z(ce)){var Se=Math.floor(Pe/y)+k,Ee=Math.floor(h(Ae,y));try{tt=M.getComponentMethod("calendars","getCal")(ce).fromJD(Se).formatDate("yyyy-mm-dd")}catch{tt=D("G%Y-%m-%d")(new Date(Pe))}if(tt.charAt(0)==="-")for(;tt.length<11;)tt="-0"+tt.substr(1);else for(;tt.length<10;)tt="0"+tt;Ke=Le<H?Math.floor(Ee/b):0,nt=Le<H?Math.floor(Ee%b/T):0,yi=Le<W?Math.floor(Ee%T/u):0,Ei=Le<Ce?Ee%u*10+ke:0}else vs=new Date(Pe),tt=D("%Y-%m-%d")(vs),Ke=Le<H?vs.getUTCHours():0,nt=Le<H?vs.getUTCMinutes():0,yi=Le<W?vs.getUTCSeconds():0,Ei=Le<Ce?vs.getUTCMilliseconds()*10+ke:0;return he(tt,Ke,nt,yi,Ei)},me.ms2DateTimeLocal=function(Ae){if(!(Ae>=w+y&&Ae<=L-y))return v;var Le=Math.floor(h(Ae+.05,1)*10),ce=new Date(Math.round(Ae-Le/10)),ke=ue("%Y-%m-%d")(ce),Pe=ce.getHours(),tt=ce.getMinutes(),Ke=ce.getSeconds(),nt=ce.getUTCMilliseconds()*10+Le;return he(ke,Pe,tt,Ke,nt)};function he(Ae,Le,ce,ke,Pe){if((Le||ce||ke||Pe)&&(Ae+=" "+O(Le,2)+":"+O(ce,2),(ke||Pe)&&(Ae+=":"+O(ke,2),Pe))){for(var tt=4;Pe%10===0;)tt-=1,Pe/=10;Ae+="."+O(Pe,tt)}return Ae}me.cleanDate=function(Ae,Le,ce){if(Ae===v)return Le;if(me.isJSDate(Ae)||typeof Ae=="number"&&isFinite(Ae)){if(z(ce))return s.error("JS Dates and milliseconds are incompatible with world calendars",Ae),Le;if(Ae=me.ms2DateTimeLocal(+Ae),!Ae&&Le!==void 0)return Le}else if(!me.isDateTime(Ae,ce))return s.error("unrecognized date",Ae),Le;return Ae};var le=/%\d?f/g,Y=/%h/g,Re={1:"1",2:"1",3:"2",4:"2"};function fe(Ae,Le,ce,ke){Ae=Ae.replace(le,function(tt){var Ke=Math.min(+tt.charAt(1)||6,6),nt=(Le/1e3%1+2).toFixed(Ke).substr(2).replace(/0+$/,"")||"0";return nt});var Pe=new Date(Math.floor(Le+.05));if(Ae=Ae.replace(Y,function(){return Re[ce("%q")(Pe)]}),z(ke))try{Ae=M.getComponentMethod("calendars","worldCalFmt")(Ae,Le,ke)}catch{return"Invalid"}return ce(Ae)(Pe)}var xe=[59,59.9,59.99,59.999,59.9999];function ge(Ae,Le){var ce=h(Ae+.05,y),ke=O(Math.floor(ce/b),2)+":"+O(h(Math.floor(ce/T),60),2);if(Le!=="M"){g(Le)||(Le=0);var Pe=Math.min(h(Ae/u,60),xe[Le]),tt=(100+Pe).toFixed(Le).substr(1);Le>0&&(tt=tt.replace(/0+$/,"").replace(/[\.]$/,"")),ke+=":"+tt}return ke}me.formatDate=function(Ae,Le,ce,ke,Pe,tt){if(Pe=z(Pe)&&Pe,!Le)if(ce==="y")Le=tt.year;else if(ce==="m")Le=tt.month;else if(ce==="d")Le=tt.dayMonth+`
`+tt.year;else return ge(Ae,ce)+`
`+fe(tt.dayMonthYear,Ae,ke,Pe);return fe(Le,Ae,ke,Pe)};var ye=3*y;me.incrementMonth=function(Ae,Le,ce){ce=z(ce)&&ce;var ke=h(Ae,y);if(Ae=Math.round(Ae-ke),ce)try{var Pe=Math.round(Ae/y)+k,tt=M.getComponentMethod("calendars","getCal")(ce),Ke=tt.fromJD(Pe);return Le%12?tt.add(Ke,Le,"m"):tt.add(Ke,Le/12,"y"),(Ke.toJD()-k)*y+ke}catch{s.error("invalid ms "+Ae+" in calendar "+ce)}var nt=new Date(Ae+ye);return nt.setUTCMonth(nt.getUTCMonth()+Le)+ke-ye},me.findExactDates=function(Ae,Le){for(var ce=0,ke=0,Pe=0,tt=0,Ke,nt,yi=z(Le)&&M.getComponentMethod("calendars","getCal")(Le),Ei=0;Ei<Ae.length;Ei++){if(nt=Ae[Ei],!g(nt)){tt++;continue}if(!(nt%y))if(yi)try{Ke=yi.fromJD(nt/y+k),Ke.day()===1?Ke.month()===1?ce++:ke++:Pe++}catch{}else Ke=new Date(nt),Ke.getUTCDate()===1?Ke.getUTCMonth()===0?ce++:ke++:Pe++}ke+=ce,Pe+=ke;var vs=Ae.length-tt;return{exactYears:ce/vs,exactMonths:ke/vs,exactDays:Pe/vs}}}),Jg=t((me,ue)=>{ue.exports=function(g){return g}}),Dg=t(me=>{var ue=A(),g=Hp(),s=Jg(),h=C().BADNUM,x=1e-9;me.findBin=function(u,k,M){if(ue(k.start))return M?Math.ceil((u-k.start)/k.size-x)-1:Math.floor((u-k.start)/k.size+x);var D=0,B=k.length,P=0,N=B>1?(k[B-1]-k[0])/(B-1):1,z,F;for(N>=0?F=M?v:y:F=M?T:b,u+=N*x*(M?-1:1)*(N>=0?1:-1);D<B&&P++<100;)z=Math.floor((D+B)/2),F(k[z],u)?D=z+1:B=z;return P>90&&g.log("Long binary search..."),D-1};function v(u,k){return u<k}function y(u,k){return u<=k}function b(u,k){return u>k}function T(u,k){return u>=k}me.sorterAsc=function(u,k){return u-k},me.sorterDes=function(u,k){return k-u},me.distinctVals=function(u){var k=u.slice();k.sort(me.sorterAsc);var M;for(M=k.length-1;M>-1&&k[M]===h;M--);for(var D=k[M]-k[0]||1,B=D/(M||1)/1e4,P=[],N,z=0;z<=M;z++){var F=k[z],w=F-N;N===void 0?(P.push(F),N=F):w>B&&(D=Math.min(D,w),P.push(F),N=F)}return{vals:P,minDiff:D}},me.roundUp=function(u,k,M){for(var D=0,B=k.length-1,P,N=0,z=M?0:1,F=M?1:0,w=M?Math.ceil:Math.floor;D<B&&N++<100;)P=w((D+B)/2),k[P]<=u?D=P+z:B=P-F;return k[D]},me.sort=function(u,k){for(var M=0,D=0,B=1;B<u.length;B++){var P=k(u[B],u[B-1]);if(P<0?M=1:P>0&&(D=1),M&&D)return u.sort(k)}return D?u:u.reverse()},me.findIndexOfMin=function(u,k){k=k||s;for(var M=1/0,D,B=0;B<u.length;B++){var P=k(u[B]);P<M&&(M=P,D=B)}return D}}),Eg=t((me,ue)=>{ue.exports=function(g){return Object.keys(g).sort()}}),ev=t(me=>{var ue=A(),g=J().isArrayOrTypedArray;me.aggNums=function(s,h,x,v){var y,b;if((!v||v>x.length)&&(v=x.length),ue(h)||(h=!1),g(x[0])){for(b=new Array(v),y=0;y<v;y++)b[y]=me.aggNums(s,h,x[y]);x=b}for(y=0;y<v;y++)ue(h)?ue(x[y])&&(h=s(+h,+x[y])):h=x[y];return h},me.len=function(s){return me.aggNums(function(h){return h+1},0,s)},me.mean=function(s,h){return h||(h=me.len(s)),me.aggNums(function(x,v){return x+v},0,s)/h},me.geometricMean=function(s,h){return h||(h=me.len(s)),Math.pow(me.aggNums(function(x,v){return x*v},1,s),1/h)},me.midRange=function(s){if(!(s===void 0||s.length===0))return(me.aggNums(Math.max,null,s)+me.aggNums(Math.min,null,s))/2},me.variance=function(s,h,x){return h||(h=me.len(s)),ue(x)||(x=me.mean(s,h)),me.aggNums(function(v,y){return v+Math.pow(y-x,2)},0,s)/h},me.stdev=function(s,h,x){return Math.sqrt(me.variance(s,h,x))},me.median=function(s){var h=s.slice().sort();return me.interp(h,.5)},me.interp=function(s,h){if(!ue(h))throw"n should be a finite number";if(h=h*s.length-.5,h<0)return s[0];if(h>s.length-1)return s[s.length-1];var x=h%1;return x*s[Math.ceil(h)]+(1-x)*s[Math.floor(h)]}}),pv=t((me,ue)=>{var g=se(),s=g.mod,h=g.modHalf,x=Math.PI,v=2*x;function y(F){return F/180*x}function b(F){return F/x*180}function T(F){return Math.abs(F[1]-F[0])>v-1e-14}function u(F,w){return h(w-F,v)}function k(F,w){return Math.abs(u(F,w))}function M(F,w){if(T(w))return!0;var L,O;w[0]<w[1]?(L=w[0],O=w[1]):(L=w[1],O=w[0]),L=s(L,v),O=s(O,v),L>O&&(O+=v);var H=s(F,v),W=H+v;return H>=L&&H<=O||W>=L&&W<=O}function D(F,w,L,O){if(!M(w,O))return!1;var H,W;return L[0]<L[1]?(H=L[0],W=L[1]):(H=L[1],W=L[0]),F>=H&&F<=W}function B(F,w,L,O,H,W,Ce){H=H||0,W=W||0;var he=T([L,O]),le,Y,Re,fe,xe;he?(le=0,Y=x,Re=v):L<O?(le=L,Re=O):(le=O,Re=L),F<w?(fe=F,xe=w):(fe=w,xe=F);function ge(ce,ke){return[ce*Math.cos(ke)+H,W-ce*Math.sin(ke)]}var ye=Math.abs(Re-le)<=x?0:1;function Ae(ce,ke,Pe){return"A"+[ce,ce]+" "+[0,ye,Pe]+" "+ge(ce,ke)}var Le;return he?fe===null?Le="M"+ge(xe,le)+Ae(xe,Y,0)+Ae(xe,Re,0)+"Z":Le="M"+ge(fe,le)+Ae(fe,Y,0)+Ae(fe,Re,0)+"ZM"+ge(xe,le)+Ae(xe,Y,1)+Ae(xe,Re,1)+"Z":fe===null?(Le="M"+ge(xe,le)+Ae(xe,Re,0),Ce&&(Le+="L0,0Z")):Le="M"+ge(fe,le)+"L"+ge(xe,le)+Ae(xe,Re,0)+"L"+ge(fe,Re)+Ae(fe,le,1)+"Z",Le}function P(F,w,L,O,H){return B(null,F,w,L,O,H,0)}function N(F,w,L,O,H){return B(null,F,w,L,O,H,1)}function z(F,w,L,O,H,W){return B(F,w,L,O,H,W,1)}ue.exports={deg2rad:y,rad2deg:b,angleDelta:u,angleDist:k,isFullCircle:T,isAngleInsideSector:M,isPtInsideSector:D,pathArc:P,pathSector:N,pathAnnulus:z}}),sv=t(me=>{me.isLeftAnchor=function(ue){return ue.xanchor==="left"||ue.xanchor==="auto"&&ue.x<=1/3},me.isCenterAnchor=function(ue){return ue.xanchor==="center"||ue.xanchor==="auto"&&ue.x>1/3&&ue.x<2/3},me.isRightAnchor=function(ue){return ue.xanchor==="right"||ue.xanchor==="auto"&&ue.x>=2/3},me.isTopAnchor=function(ue){return ue.yanchor==="top"||ue.yanchor==="auto"&&ue.y>=2/3},me.isMiddleAnchor=function(ue){return ue.yanchor==="middle"||ue.yanchor==="auto"&&ue.y>1/3&&ue.y<2/3},me.isBottomAnchor=function(ue){return ue.yanchor==="bottom"||ue.yanchor==="auto"&&ue.y<=1/3}}),kv=t(me=>{var ue=se().mod;me.segmentsIntersect=g;function g(y,b,T,u,k,M,D,B){var P=T-y,N=k-y,z=D-k,F=u-b,w=M-b,L=B-M,O=P*L-z*F;if(O===0)return null;var H=(N*L-z*w)/O,W=(N*F-P*w)/O;return W<0||W>1||H<0||H>1?null:{x:y+P*H,y:b+F*H}}me.segmentDistance=function(y,b,T,u,k,M,D,B){if(g(y,b,T,u,k,M,D,B))return 0;var P=T-y,N=u-b,z=D-k,F=B-M,w=P*P+N*N,L=z*z+F*F,O=Math.min(s(P,N,w,k-y,M-b),s(P,N,w,D-y,B-b),s(z,F,L,y-k,b-M),s(z,F,L,T-k,u-M));return Math.sqrt(O)};function s(y,b,T,u,k){var M=u*y+k*b;if(M<0)return u*u+k*k;if(M>T){var D=u-y,B=k-b;return D*D+B*B}else{var P=u*b-k*y;return P*P/T}}var h,x,v;me.getTextLocation=function(y,b,T,u){if((y!==x||u!==v)&&(h={},x=y,v=u),h[T])return h[T];var k=y.getPointAtLength(ue(T-u/2,b)),M=y.getPointAtLength(ue(T+u/2,b)),D=Math.atan((M.y-k.y)/(M.x-k.x)),B=y.getPointAtLength(ue(T,b)),P=(B.x*4+k.x+M.x)/6,N=(B.y*4+k.y+M.y)/6,z={x:P,y:N,theta:D};return h[T]=z,z},me.clearLocationCache=function(){x=null},me.getVisibleSegment=function(y,b,T){var u=b.left,k=b.right,M=b.top,D=b.bottom,B=0,P=y.getTotalLength(),N=P,z,F;function w(O){var H=y.getPointAtLength(O);O===0?z=H:O===P&&(F=H);var W=H.x<u?u-H.x:H.x>k?H.x-k:0,Ce=H.y<M?M-H.y:H.y>D?H.y-D:0;return Math.sqrt(W*W+Ce*Ce)}for(var L=w(B);L;){if(B+=L+T,B>N)return;L=w(B)}for(L=w(N);L;){if(N-=L+T,B>N)return;L=w(N)}return{min:B,max:N,len:N-B,total:P,isClosed:B===0&&N===P&&Math.abs(z.x-F.x)<.1&&Math.abs(z.y-F.y)<.1}},me.findPointOnPath=function(y,b,T,u){u=u||{};for(var k=u.pathLength||y.getTotalLength(),M=u.tolerance||.001,D=u.iterationLimit||30,B=y.getPointAtLength(0)[T]>y.getPointAtLength(k)[T]?-1:1,P=0,N=0,z=k,F,w,L;P<D;){if(F=(N+z)/2,w=y.getPointAtLength(F),L=w[T]-b,Math.abs(L)<M)return w;B*L>0?z=F:N=F,P++}return w}}),Zv=t(me=>{var ue={};me.throttle=function(s,h,x){var v=ue[s],y=Date.now();if(!v){for(var b in ue)ue[b].ts<y-6e4&&delete ue[b];v=ue[s]={ts:0,timer:null}}g(v);function T(){x(),v.ts=Date.now(),v.onDone&&(v.onDone(),v.onDone=null)}if(y>v.ts+h){T();return}v.timer=setTimeout(function(){T(),v.timer=null},h)},me.done=function(s){var h=ue[s];return!h||!h.timer?Promise.resolve():new Promise(function(x){var v=h.onDone;h.onDone=function(){v&&v(),x(),h.onDone=null}})},me.clear=function(s){if(s)g(ue[s]),delete ue[s];else for(var h in ue)me.clear(h)};function g(s){s&&s.timer!==null&&(clearTimeout(s.timer),s.timer=null)}}),ry=t((me,ue)=>{ue.exports=function(g){g._responsiveChartHandler&&(window.removeEventListener("resize",g._responsiveChartHandler),delete g._responsiveChartHandler)}}),oy=t((me,ue)=>{ue.exports=x,ue.exports.isMobile=x,ue.exports.default=x;var g=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/CrOS/,h=/android|ipad|playbook|silk/i;function x(v){v||(v={});let y=v.ua;if(!y&&typeof navigator<"u"&&(y=navigator.userAgent),y&&y.headers&&typeof y.headers["user-agent"]=="string"&&(y=y.headers["user-agent"]),typeof y!="string")return!1;let b=g.test(y)&&!s.test(y)||!!v.tablet&&h.test(y);return!b&&v.tablet&&v.featureDetect&&navigator&&navigator.maxTouchPoints>1&&y.indexOf("Macintosh")!==-1&&y.indexOf("Safari")!==-1&&(b=!0),b}}),Hv=t((me,ue)=>{var g=A(),s=oy();ue.exports=function(x){var v;if(x&&x.hasOwnProperty("userAgent")?v=x.userAgent:v=h(),typeof v!="string")return!0;var y=s({ua:{headers:{"user-agent":v}},tablet:!0,featureDetect:!1});if(!y)for(var b=v.split(" "),T=1;T<b.length;T++){var u=b[T];if(u.indexOf("Safari")!==-1)for(var k=T-1;k>-1;k--){var M=b[k];if(M.substr(0,8)==="Version/"){var D=M.substr(8).split(".")[0];if(g(D)&&(D=+D),D>=13)return!0}}}return y};function h(){var x;return typeof navigator<"u"&&(x=navigator.userAgent),x&&x.headers&&typeof x.headers["user-agent"]=="string"&&(x=x.headers["user-agent"]),x}}),vv=t((me,ue)=>{var g=c();ue.exports=function(s,h,x){var v=s.selectAll("g."+x.replace(/\s/g,".")).data(h,function(b){return b[0].trace.uid});v.exit().remove(),v.enter().append("g").attr("class",x),v.order();var y=s.classed("rangeplot")?"nodeRangePlot3":"node3";return v.each(function(b){b[0][y]=g.select(this)}),v}}),ag=t((me,ue)=>{var g=l1();ue.exports=function(s,h){for(var x=s._context.locale,v=0;v<2;v++){for(var y=s._context.locales,b=0;b<2;b++){var T=(y[x]||{}).dictionary;if(T){var u=T[h];if(u)return u}y=g.localeRegistry}var k=x.split("-")[0];if(k===x)break;x=k}return h}}),_v=t((me,ue)=>{ue.exports=function(g){for(var s={},h=[],x=0,v=0;v<g.length;v++){var y=g[v];s[y]!==1&&(s[y]=1,h[x++]=y)}return h}}),Mv=t((me,ue)=>{ue.exports=function(x){for(var v=h(x)?s:g,y=[],b=0;b<x.length;b++){var T=x[b];v(T)&&y.push(T)}return y};function g(x){return x.visible===!0}function s(x){var v=x[0].trace;return v.visible===!0&&v._length!==0}function h(x){return Array.isArray(x)&&Array.isArray(x[0])&&x[0][0]&&x[0][0].trace}}),c0=t((me,ue)=>{ue.exports=function(g,s){if(!s)return g;var h=1/Math.abs(s),x=h>1?(h*g+h*s)/h:g+s,v=String(x).length;if(v>16){var y=String(s).length,b=String(g).length;if(v>=b+y){var T=parseFloat(x).toPrecision(12);T.indexOf("e+")===-1&&(x=+T)}}return x}}),F0=t((me,ue)=>{var g=A(),s=C().BADNUM,h=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ue.exports=function(x){return typeof x=="string"&&(x=x.replace(h,"")),g(x)?Number(x):s}}),Z=t((me,ue)=>{var g=c(),s=p().utcFormat,h=_().format,x=A(),v=C(),y=v.FP_SAFE,b=-y,T=v.BADNUM,u=ue.exports={};u.adjustFormat=function(pe){return!pe||/^\d[.]\df/.test(pe)||/[.]\d%/.test(pe)?pe:pe==="0.f"?"~f":/^\d%/.test(pe)?"~%":/^\ds/.test(pe)?"~s":!/^[~,.0$]/.test(pe)&&/[&fps]/.test(pe)?"~"+pe:pe};var k={};u.warnBadFormat=function(pe){var q=String(pe);k[q]||(k[q]=1,u.warn('encountered bad format: "'+q+'"'))},u.noFormat=function(pe){return String(pe)},u.numberFormat=function(pe){var q;try{q=h(u.adjustFormat(pe))}catch{return u.warnBadFormat(pe),u.noFormat}return q},u.nestedProperty=re(),u.keyedContainer=ie(),u.relativeAttr=K(),u.isPlainObject=V(),u.toLogRange=Ne(),u.relinkPrivateKeys=G();var M=J();u.isArrayBuffer=M.isArrayBuffer,u.isTypedArray=M.isTypedArray,u.isArrayOrTypedArray=M.isArrayOrTypedArray,u.isArray1D=M.isArray1D,u.ensureArray=M.ensureArray,u.concat=M.concat,u.maxRowLength=M.maxRowLength,u.minRowLength=M.minRowLength;var D=se();u.mod=D.mod,u.modHalf=D.modHalf;var B=zl();u.valObjectMeta=B.valObjectMeta,u.coerce=B.coerce,u.coerce2=B.coerce2,u.coerceFont=B.coerceFont,u.coercePattern=B.coercePattern,u.coerceHoverinfo=B.coerceHoverinfo,u.coerceSelectionMarkerOpacity=B.coerceSelectionMarkerOpacity,u.validate=B.validate;var P=gg();u.dateTime2ms=P.dateTime2ms,u.isDateTime=P.isDateTime,u.ms2DateTime=P.ms2DateTime,u.ms2DateTimeLocal=P.ms2DateTimeLocal,u.cleanDate=P.cleanDate,u.isJSDate=P.isJSDate,u.formatDate=P.formatDate,u.incrementMonth=P.incrementMonth,u.dateTick0=P.dateTick0,u.dfltRange=P.dfltRange,u.findExactDates=P.findExactDates,u.MIN_MS=P.MIN_MS,u.MAX_MS=P.MAX_MS;var N=Dg();u.findBin=N.findBin,u.sorterAsc=N.sorterAsc,u.sorterDes=N.sorterDes,u.distinctVals=N.distinctVals,u.roundUp=N.roundUp,u.sort=N.sort,u.findIndexOfMin=N.findIndexOfMin,u.sortObjectKeys=Eg();var z=ev();u.aggNums=z.aggNums,u.len=z.len,u.mean=z.mean,u.geometricMean=z.geometricMean,u.median=z.median,u.midRange=z.midRange,u.variance=z.variance,u.stdev=z.stdev,u.interp=z.interp;var F=Dm();u.init2dArray=F.init2dArray,u.transposeRagged=F.transposeRagged,u.dot=F.dot,u.translationMatrix=F.translationMatrix,u.rotationMatrix=F.rotationMatrix,u.rotationXYMatrix=F.rotationXYMatrix,u.apply3DTransform=F.apply3DTransform,u.apply2DTransform=F.apply2DTransform,u.apply2DTransform2=F.apply2DTransform2,u.convertCssMatrix=F.convertCssMatrix,u.inverseTransformMatrix=F.inverseTransformMatrix;var w=pv();u.deg2rad=w.deg2rad,u.rad2deg=w.rad2deg,u.angleDelta=w.angleDelta,u.angleDist=w.angleDist,u.isFullCircle=w.isFullCircle,u.isAngleInsideSector=w.isAngleInsideSector,u.isPtInsideSector=w.isPtInsideSector,u.pathArc=w.pathArc,u.pathSector=w.pathSector,u.pathAnnulus=w.pathAnnulus;var L=sv();u.isLeftAnchor=L.isLeftAnchor,u.isCenterAnchor=L.isCenterAnchor,u.isRightAnchor=L.isRightAnchor,u.isTopAnchor=L.isTopAnchor,u.isMiddleAnchor=L.isMiddleAnchor,u.isBottomAnchor=L.isBottomAnchor;var O=kv();u.segmentsIntersect=O.segmentsIntersect,u.segmentDistance=O.segmentDistance,u.getTextLocation=O.getTextLocation,u.clearLocationCache=O.clearLocationCache,u.getVisibleSegment=O.getVisibleSegment,u.findPointOnPath=O.findPointOnPath;var H=Fe();u.extendFlat=H.extendFlat,u.extendDeep=H.extendDeep,u.extendDeepAll=H.extendDeepAll,u.extendDeepNoArrays=H.extendDeepNoArrays;var W=Hp();u.log=W.log,u.warn=W.warn,u.error=W.error;var Ce=ne();u.counterRegex=Ce.counter;var he=Zv();u.throttle=he.throttle,u.throttleDone=he.done,u.clearThrottle=he.clear;var le=Gm();u.getGraphDiv=le.getGraphDiv,u.isPlotDiv=le.isPlotDiv,u.removeElement=le.removeElement,u.addStyleRule=le.addStyleRule,u.addRelatedStyleRule=le.addRelatedStyleRule,u.deleteRelatedStyleRule=le.deleteRelatedStyleRule,u.setStyleOnHover=le.setStyleOnHover,u.getFullTransformMatrix=le.getFullTransformMatrix,u.getElementTransformMatrix=le.getElementTransformMatrix,u.getElementAndAncestors=le.getElementAndAncestors,u.equalDomRects=le.equalDomRects,u.clearResponsive=ry(),u.preserveDrawingBuffer=Hv(),u.makeTraceGroups=vv(),u._=ag(),u.notifier=pr(),u.filterUnique=_v(),u.filterVisible=Mv(),u.pushUnique=Ip(),u.increment=c0(),u.cleanNumber=F0(),u.ensureNumber=function(pe){return x(pe)?(pe=Number(pe),pe>y||pe<b?T:pe):T},u.isIndex=function(pe,q){return q!==void 0&&pe>=q?!1:x(pe)&&pe>=0&&pe%1===0},u.noop=Gl(),u.identity=Jg(),u.repeat=function(pe,q){for(var ae=new Array(q),ve=0;ve<q;ve++)ae[ve]=pe;return ae},u.swapAttrs=function(pe,q,ae,ve){ae||(ae="x"),ve||(ve="y");for(var Te=0;Te<q.length;Te++){var et=q[Te],bt=u.nestedProperty(pe,et.replace("?",ae)),dr=u.nestedProperty(pe,et.replace("?",ve)),Ol=bt.get();bt.set(dr.get()),dr.set(Ol)}},u.raiseToTop=function(pe){pe.parentNode.appendChild(pe)},u.cancelTransition=function(pe){return pe.transition().duration(0)},u.constrain=function(pe,q,ae){return q>ae?Math.max(ae,Math.min(q,pe)):Math.max(q,Math.min(ae,pe))},u.bBoxIntersect=function(pe,q,ae){return ae=ae||0,pe.left<=q.right+ae&&q.left<=pe.right+ae&&pe.top<=q.bottom+ae&&q.top<=pe.bottom+ae},u.simpleMap=function(pe,q,ae,ve,Te){for(var et=pe.length,bt=new Array(et),dr=0;dr<et;dr++)bt[dr]=q(pe[dr],ae,ve,Te);return bt},u.randstr=function pe(q,ae,ve,Te){if(ve||(ve=16),ae===void 0&&(ae=24),ae<=0)return"0";var et=Math.log(Math.pow(2,ae))/Math.log(ve),bt="",dr,Ol,Xl;for(dr=2;et===1/0;dr*=2)et=Math.log(Math.pow(2,ae/dr))/Math.log(ve)*dr;var Pp=et-Math.floor(et);for(dr=0;dr<Math.floor(et);dr++)Xl=Math.floor(Math.random()*ve).toString(ve),bt=Xl+bt;Pp&&(Ol=Math.pow(ve,Pp),Xl=Math.floor(Math.random()*Ol).toString(ve),bt=Xl+bt);var t0=parseInt(bt,ve);return q&&q[bt]||t0!==1/0&&t0>=Math.pow(2,ae)?Te>10?(u.warn("randstr failed uniqueness"),bt):pe(q,ae,ve,(Te||0)+1):bt},u.OptionControl=function(pe,q){pe||(pe={}),q||(q="opt");var ae={};return ae.optionList=[],ae._newoption=function(ve){ve[q]=pe,ae[ve.name]=ve,ae.optionList.push(ve)},ae["_"+q]=pe,ae},u.smooth=function(pe,q){if(q=Math.round(q)||0,q<2)return pe;var ae=pe.length,ve=2*ae,Te=2*q-1,et=new Array(Te),bt=new Array(ae),dr,Ol,Xl,Pp;for(dr=0;dr<Te;dr++)et[dr]=(1-Math.cos(Math.PI*(dr+1)/q))/(2*q);for(dr=0;dr<ae;dr++){for(Pp=0,Ol=0;Ol<Te;Ol++)Xl=dr+Ol+1-q,Xl<-ae?Xl-=ve*Math.round(Xl/ve):Xl>=ve&&(Xl-=ve*Math.floor(Xl/ve)),Xl<0?Xl=-1-Xl:Xl>=ae&&(Xl=ve-1-Xl),Pp+=pe[Xl]*et[Ol];bt[dr]=Pp}return bt},u.syncOrAsync=function(pe,q,ae){var ve,Te;function et(){return u.syncOrAsync(pe,q,ae)}for(;pe.length;)if(Te=pe.splice(0,1)[0],ve=Te(q),ve&&ve.then)return ve.then(et);return ae&&ae(q)},u.stripTrailingSlash=function(pe){return pe.substr(-1)==="/"?pe.substr(0,pe.length-1):pe},u.noneOrAll=function(pe,q,ae){if(pe){var ve=!1,Te=!0,et,bt;for(et=0;et<ae.length;et++)bt=pe[ae[et]],bt!=null?ve=!0:Te=!1;if(ve&&!Te)for(et=0;et<ae.length;et++)pe[ae[et]]=q[ae[et]]}},u.mergeArray=function(pe,q,ae,ve){var Te=typeof ve=="function";if(u.isArrayOrTypedArray(pe))for(var et=Math.min(pe.length,q.length),bt=0;bt<et;bt++){var dr=pe[bt];q[bt][ae]=Te?ve(dr):dr}},u.mergeArrayCastPositive=function(pe,q,ae){return u.mergeArray(pe,q,ae,function(ve){var Te=+ve;return isFinite(Te)&&Te>0?Te:0})},u.fillArray=function(pe,q,ae,ve){if(ve=ve||u.identity,u.isArrayOrTypedArray(pe))for(var Te=0;Te<q.length;Te++)q[Te][ae]=ve(pe[Te])},u.castOption=function(pe,q,ae,ve){ve=ve||u.identity;var Te=u.nestedProperty(pe,ae).get();return u.isArrayOrTypedArray(Te)?Array.isArray(q)&&u.isArrayOrTypedArray(Te[q[0]])?ve(Te[q[0]][q[1]]):ve(Te[q]):Te},u.extractOption=function(pe,q,ae,ve){if(ae in pe)return pe[ae];var Te=u.nestedProperty(q,ve).get();if(!Array.isArray(Te))return Te};function Y(pe){var q={};for(var ae in pe)for(var ve=pe[ae],Te=0;Te<ve.length;Te++)q[ve[Te]]=+ae;return q}u.tagSelected=function(pe,q,ae){var ve=q.selectedpoints,Te=q._indexToPoints,et;Te&&(et=Y(Te));function bt(t0){return t0!==void 0&&t0<pe.length}for(var dr=0;dr<ve.length;dr++){var Ol=ve[dr];if(u.isIndex(Ol)||u.isArrayOrTypedArray(Ol)&&u.isIndex(Ol[0])&&u.isIndex(Ol[1])){var Xl=et?et[Ol]:Ol,Pp=ae?ae[Xl]:Xl;bt(Pp)&&(pe[Pp].selected=1)}}},u.selIndices2selPoints=function(pe){var q=pe.selectedpoints,ae=pe._indexToPoints;if(ae){for(var ve=Y(ae),Te=[],et=0;et<q.length;et++){var bt=q[et];if(u.isIndex(bt)){var dr=ve[bt];u.isIndex(dr)&&Te.push(dr)}}return Te}else return q},u.getTargetArray=function(pe,q){var ae=q.target;if(typeof ae=="string"&&ae){var ve=u.nestedProperty(pe,ae).get();return u.isArrayOrTypedArray(ve)?ve:!1}else if(u.isArrayOrTypedArray(ae))return ae;return!1};function Re(pe,q,ae){var ve={};typeof q!="object"&&(q={});var Te=ae==="pieLike"?-1:3,et=Object.keys(pe),bt,dr,Ol;for(bt=0;bt<et.length;bt++)dr=et[bt],Ol=pe[dr],!(dr.charAt(0)==="_"||typeof Ol=="function")&&(dr==="module"?ve[dr]=Ol:Array.isArray(Ol)?dr==="colorscale"||Te===-1?ve[dr]=Ol.slice():ve[dr]=Ol.slice(0,Te):u.isTypedArray(Ol)?Te===-1?ve[dr]=Ol.subarray():ve[dr]=Ol.subarray(0,Te):Ol&&typeof Ol=="object"?ve[dr]=Re(pe[dr],q[dr],ae):ve[dr]=Ol);for(et=Object.keys(q),bt=0;bt<et.length;bt++)dr=et[bt],Ol=q[dr],(typeof Ol!="object"||!(dr in ve)||typeof ve[dr]!="object")&&(ve[dr]=Ol);return ve}u.minExtend=Re,u.titleCase=function(pe){return pe.charAt(0).toUpperCase()+pe.substr(1)},u.containsAny=function(pe,q){for(var ae=0;ae<q.length;ae++)if(pe.indexOf(q[ae])!==-1)return!0;return!1};var fe=/Version\/[\d\.]+.*Safari/;u.isSafari=function(){return fe.test(window.navigator.userAgent)};var xe=/iPad|iPhone|iPod/;u.isIOS=function(){return xe.test(window.navigator.userAgent)};var ge=/Macintosh.+AppleWebKit.+Gecko\)$/;u.isMacWKWebView=()=>ge.test(window.navigator.userAgent);var ye=/Firefox\/(\d+)\.\d+/;u.getFirefoxVersion=function(){var pe=ye.exec(window.navigator.userAgent);if(pe&&pe.length===2){var q=parseInt(pe[1]);if(!isNaN(q))return q}return null},u.isD3Selection=function(pe){return pe instanceof g.selection},u.ensureSingle=function(pe,q,ae,ve){var Te=pe.select(q+(ae?"."+ae:""));if(Te.size())return Te;var et=pe.append(q);return ae&&et.classed(ae,!0),ve&&et.call(ve),et},u.ensureSingleById=function(pe,q,ae,ve){var Te=pe.select(q+"#"+ae);if(Te.size())return Te;var et=pe.append(q).attr("id",ae);return ve&&et.call(ve),et},u.objectFromPath=function(pe,q){for(var ae=pe.split("."),ve,Te=ve={},et=0;et<ae.length;et++){var bt=ae[et],dr=null,Ol=ae[et].match(/(.*)\[([0-9]+)\]/);Ol?(bt=Ol[1],dr=Ol[2],ve=ve[bt]=[],et===ae.length-1?ve[dr]=q:ve[dr]={},ve=ve[dr]):(et===ae.length-1?ve[bt]=q:ve[bt]={},ve=ve[bt])}return Te};var Ae=/^([^\[\.]+)\.(.+)?/,Le=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function ce(pe){return pe.slice(0,2)==="__"}u.expandObjectPaths=function(pe){var q,ae,ve,Te,et,bt,dr;if(typeof pe=="object"&&!Array.isArray(pe)){for(ae in pe)if(pe.hasOwnProperty(ae))if(q=ae.match(Ae)){if(Te=pe[ae],ve=q[1],ce(ve))continue;delete pe[ae],pe[ve]=u.extendDeepNoArrays(pe[ve]||{},u.objectFromPath(ae,u.expandObjectPaths(Te))[ve])}else if(q=ae.match(Le)){if(Te=pe[ae],ve=q[1],ce(ve))continue;if(et=parseInt(q[2]),delete pe[ae],pe[ve]=pe[ve]||[],q[3]===".")dr=q[4],bt=pe[ve][et]=pe[ve][et]||{},u.extendDeepNoArrays(bt,u.objectFromPath(dr,u.expandObjectPaths(Te)));else{if(ce(ve))continue;pe[ve][et]=u.expandObjectPaths(Te)}}else{if(ce(ae))continue;pe[ae]=u.expandObjectPaths(pe[ae])}}return pe},u.numSeparate=function(pe,q,ae){if(ae||(ae=!1),typeof q!="string"||q.length===0)throw new Error("Separator string required for formatting!");typeof pe=="number"&&(pe=String(pe));var ve=/(\d+)(\d{3})/,Te=q.charAt(0),et=q.charAt(1),bt=pe.split("."),dr=bt[0],Ol=bt.length>1?Te+bt[1]:"";if(et&&(bt.length>1||dr.length>4||ae))for(;ve.test(dr);)dr=dr.replace(ve,"$1"+et+"$2");return dr+Ol},u.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var ke=/^\w*$/;u.templateString=function(pe,q){var ae={};return pe.replace(u.TEMPLATE_STRING_REGEX,function(ve,Te){var et;return ke.test(Te)?et=q[Te]:(ae[Te]=ae[Te]||u.nestedProperty(q,Te).get,et=ae[Te](!0)),et!==void 0?et:""})};var Pe={max:10,count:0,name:"hovertemplate"};u.hovertemplateString=function(){return vs.apply(Pe,arguments)};var tt={max:10,count:0,name:"texttemplate"};u.texttemplateString=function(){return vs.apply(tt,arguments)};var Ke=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function nt(pe){var q=pe.match(Ke);return q?{key:q[1],op:q[2],number:Number(q[3])}:{key:pe,op:null,number:null}}var yi={max:10,count:0,name:"texttemplate",parseMultDiv:!0};u.texttemplateStringForShapes=function(){return vs.apply(yi,arguments)};var Ei=/^[:|\|]/;function vs(pe,q,ae){var ve=this,Te=arguments;return q||(q={}),pe.replace(u.TEMPLATE_STRING_REGEX,function(et,bt,dr){var Ol=bt==="xother"||bt==="yother",Xl=bt==="_xother"||bt==="_yother",Pp=bt==="_xother_"||bt==="_yother_",t0=bt==="xother_"||bt==="yother_",Wp=Ol||Xl||t0||Pp,$p=bt;(Xl||Pp)&&($p=$p.substring(1)),(t0||Pp)&&($p=$p.substring(0,$p.length-1));var Lo=null,kl=null;if(ve.parseMultDiv){var dt=nt($p);$p=dt.key,Lo=dt.op,kl=dt.number}var yp;if(Wp){if(yp=q[$p],yp===void 0)return""}else{var Bp,Jp;for(Jp=3;Jp<Te.length;Jp++)if(Bp=Te[Jp],!!Bp){if(Bp.hasOwnProperty($p)){yp=Bp[$p];break}if(ke.test($p)||(yp=u.nestedProperty(Bp,$p).get(!0)),yp!==void 0)break}}if(yp!==void 0&&(Lo==="*"&&(yp*=kl),Lo==="/"&&(yp/=kl)),yp===void 0&&ve)return ve.count<ve.max&&(u.warn("Variable '"+$p+"' in "+ve.name+" could not be found!"),yp=et),ve.count===ve.max&&u.warn("Too many "+ve.name+" warnings - additional warnings will be suppressed"),ve.count++,et;if(dr){var m0;if(dr[0]===":"&&(m0=ae?ae.numberFormat:u.numberFormat,yp!==""&&(yp=m0(dr.replace(Ei,""))(yp))),dr[0]==="|"){m0=ae?ae.timeFormat:s;var s0=u.dateTime2ms(yp);yp=u.formatDate(s0,dr.replace(Ei,""),!1,m0)}}else{var y0=$p+"Label";q.hasOwnProperty(y0)&&(yp=q[y0])}return Wp&&(yp="("+yp+")",(Xl||Pp)&&(yp=" "+yp),(t0||Pp)&&(yp=yp+" ")),yp})}var Se=48,Ee=57;u.subplotSort=function(pe,q){for(var ae=Math.min(pe.length,q.length)+1,ve=0,Te=0,et=0;et<ae;et++){var bt=pe.charCodeAt(et)||0,dr=q.charCodeAt(et)||0,Ol=bt>=Se&&bt<=Ee,Xl=dr>=Se&&dr<=Ee;if(Ol&&(ve=10*ve+bt-Se),Xl&&(Te=10*Te+dr-Se),!Ol||!Xl){if(ve!==Te)return ve-Te;if(bt!==dr)return bt-dr}}return Te-ve};var X=2e9;u.seedPseudoRandom=function(){X=2e9},u.pseudoRandom=function(){var pe=X;return X=(69069*X+1)%4294967296,Math.abs(X-pe)<429496729?u.pseudoRandom():X/4294967296},u.fillText=function(pe,q,ae){var ve=Array.isArray(ae)?function(bt){ae.push(bt)}:function(bt){ae.text=bt},Te=u.extractOption(pe,q,"htx","hovertext");if(u.isValidTextValue(Te))return ve(Te);var et=u.extractOption(pe,q,"tx","text");if(u.isValidTextValue(et))return ve(et)},u.isValidTextValue=function(pe){return pe||pe===0},u.formatPercent=function(pe,q){q=q||0;for(var ae=(Math.round(100*pe*Math.pow(10,q))*Math.pow(.1,q)).toFixed(q)+"%",ve=0;ve<q;ve++)ae.indexOf(".")!==-1&&(ae=ae.replace("0%","%"),ae=ae.replace(".%","%"));return ae},u.isHidden=function(pe){var q=window.getComputedStyle(pe).display;return!q||q==="none"},u.strTranslate=function(pe,q){return pe||q?"translate("+pe+","+q+")":""},u.strRotate=function(pe){return pe?"rotate("+pe+")":""},u.strScale=function(pe){return pe!==1?"scale("+pe+")":""},u.getTextTransform=function(pe){var q=pe.noCenter,ae=pe.textX,ve=pe.textY,Te=pe.targetX,et=pe.targetY,bt=pe.anchorX||0,dr=pe.anchorY||0,Ol=pe.rotate,Xl=pe.scale;return Xl?Xl>1&&(Xl=1):Xl=0,u.strTranslate(Te-Xl*(ae+bt),et-Xl*(ve+dr))+u.strScale(Xl)+(Ol?"rotate("+Ol+(q?"":" "+ae+" "+ve)+")":"")},u.setTransormAndDisplay=function(pe,q){pe.attr("transform",u.getTextTransform(q)),pe.style("display",q.scale?null:"none")},u.ensureUniformFontSize=function(pe,q){var ae=u.extendFlat({},q);return ae.size=Math.max(q.size,pe._fullLayout.uniformtext.minsize||0),ae},u.join2=function(pe,q,ae){var ve=pe.length;return ve>1?pe.slice(0,-1).join(q)+ae+pe[ve-1]:pe.join(q)},u.bigFont=function(pe){return Math.round(1.2*pe)};var Oe=u.getFirefoxVersion(),Qe=Oe!==null&&Oe<86;u.getPositionFromD3Event=function(){return Qe?[g.event.layerX,g.event.layerY]:[g.event.offsetX,g.event.offsetY]}}),Fl=t(()=>{var me=Z(),ue={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X:focus-within .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group a":"display:grid;place-content:center;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;border:none;background:rgba(0,0,0,0);","X .modebar-btn svg":"position:relative;","X .modebar-btn:focus-visible":"outline:1px solid #000;outline-offset:1px;border-radius:3px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(s in ue)g=s.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),me.addStyleRule(g,ue[s]);var g,s}),Wl=t((me,ue)=>{ue.exports=!0}),x0=t((me,ue)=>{var g=Wl(),s;typeof window.matchMedia=="function"?s=!window.matchMedia("(hover: none)").matches:s=g,ue.exports=s}),S0=t((me,ue)=>{var g=typeof Reflect=="object"?Reflect:null,s=g&&typeof g.apply=="function"?g.apply:function(H,W,Ce){return Function.prototype.apply.call(H,W,Ce)},h;g&&typeof g.ownKeys=="function"?h=g.ownKeys:Object.getOwnPropertySymbols?h=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:h=function(H){return Object.getOwnPropertyNames(H)};function x(H){console&&console.warn&&console.warn(H)}var v=Number.isNaN||function(H){return H!==H};function y(){y.init.call(this)}ue.exports=y,ue.exports.once=w,y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var b=10;function T(H){if(typeof H!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof H)}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(H){if(typeof H!="number"||H<0||v(H))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+H+".");b=H}}),y.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||v(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function u(H){return H._maxListeners===void 0?y.defaultMaxListeners:H._maxListeners}y.prototype.getMaxListeners=function(){return u(this)},y.prototype.emit=function(H){for(var W=[],Ce=1;Ce<arguments.length;Ce++)W.push(arguments[Ce]);var he=H==="error",le=this._events;if(le!==void 0)he=he&&le.error===void 0;else if(!he)return!1;if(he){var Y;if(W.length>0&&(Y=W[0]),Y instanceof Error)throw Y;var Re=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw Re.context=Y,Re}var fe=le[H];if(fe===void 0)return!1;if(typeof fe=="function")s(fe,this,W);else for(var xe=fe.length,ge=N(fe,xe),Ce=0;Ce<xe;++Ce)s(ge[Ce],this,W);return!0};function k(H,W,Ce,he){var le,Y,Re;if(T(Ce),Y=H._events,Y===void 0?(Y=H._events=Object.create(null),H._eventsCount=0):(Y.newListener!==void 0&&(H.emit("newListener",W,Ce.listener?Ce.listener:Ce),Y=H._events),Re=Y[W]),Re===void 0)Re=Y[W]=Ce,++H._eventsCount;else if(typeof Re=="function"?Re=Y[W]=he?[Ce,Re]:[Re,Ce]:he?Re.unshift(Ce):Re.push(Ce),le=u(H),le>0&&Re.length>le&&!Re.warned){Re.warned=!0;var fe=new Error("Possible EventEmitter memory leak detected. "+Re.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");fe.name="MaxListenersExceededWarning",fe.emitter=H,fe.type=W,fe.count=Re.length,x(fe)}return H}y.prototype.addListener=function(H,W){return k(this,H,W,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(H,W){return k(this,H,W,!0)};function M(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function D(H,W,Ce){var he={fired:!1,wrapFn:void 0,target:H,type:W,listener:Ce},le=M.bind(he);return le.listener=Ce,he.wrapFn=le,le}y.prototype.once=function(H,W){return T(W),this.on(H,D(this,H,W)),this},y.prototype.prependOnceListener=function(H,W){return T(W),this.prependListener(H,D(this,H,W)),this},y.prototype.removeListener=function(H,W){var Ce,he,le,Y,Re;if(T(W),he=this._events,he===void 0)return this;if(Ce=he[H],Ce===void 0)return this;if(Ce===W||Ce.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete he[H],he.removeListener&&this.emit("removeListener",H,Ce.listener||W));else if(typeof Ce!="function"){for(le=-1,Y=Ce.length-1;Y>=0;Y--)if(Ce[Y]===W||Ce[Y].listener===W){Re=Ce[Y].listener,le=Y;break}if(le<0)return this;le===0?Ce.shift():z(Ce,le),Ce.length===1&&(he[H]=Ce[0]),he.removeListener!==void 0&&this.emit("removeListener",H,Re||W)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(H){var W,Ce,he;if(Ce=this._events,Ce===void 0)return this;if(Ce.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Ce[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Ce[H]),this;if(arguments.length===0){var le=Object.keys(Ce),Y;for(he=0;he<le.length;++he)Y=le[he],Y!=="removeListener"&&this.removeAllListeners(Y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=Ce[H],typeof W=="function")this.removeListener(H,W);else if(W!==void 0)for(he=W.length-1;he>=0;he--)this.removeListener(H,W[he]);return this};function B(H,W,Ce){var he=H._events;if(he===void 0)return[];var le=he[W];return le===void 0?[]:typeof le=="function"?Ce?[le.listener||le]:[le]:Ce?F(le):N(le,le.length)}y.prototype.listeners=function(H){return B(this,H,!0)},y.prototype.rawListeners=function(H){return B(this,H,!1)},y.listenerCount=function(H,W){return typeof H.listenerCount=="function"?H.listenerCount(W):P.call(H,W)},y.prototype.listenerCount=P;function P(H){var W=this._events;if(W!==void 0){var Ce=W[H];if(typeof Ce=="function")return 1;if(Ce!==void 0)return Ce.length}return 0}y.prototype.eventNames=function(){return this._eventsCount>0?h(this._events):[]};function N(H,W){for(var Ce=new Array(W),he=0;he<W;++he)Ce[he]=H[he];return Ce}function z(H,W){for(;W+1<H.length;W++)H[W]=H[W+1];H.pop()}function F(H){for(var W=new Array(H.length),Ce=0;Ce<W.length;++Ce)W[Ce]=H[Ce].listener||H[Ce];return W}function w(H,W){return new Promise(function(Ce,he){function le(Re){H.removeListener(W,Y),he(Re)}function Y(){typeof H.removeListener=="function"&&H.removeListener("error",le),Ce([].slice.call(arguments))}O(H,W,Y,{once:!0}),W!=="error"&&L(H,le,{once:!0})})}function L(H,W,Ce){typeof H.on=="function"&&O(H,"error",W,Ce)}function O(H,W,Ce,he){if(typeof H.on=="function")he.once?H.once(W,Ce):H.on(W,Ce);else if(typeof H.addEventListener=="function")H.addEventListener(W,function le(Y){he.once&&H.removeEventListener(W,le),Ce(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof H)}}),Mm=t((me,ue)=>{var g=S0().EventEmitter,s={init:function(h){if(h._ev instanceof g)return h;var x=new g,v=new g;return h._ev=x,h._internalEv=v,h.on=x.on.bind(x),h.once=x.once.bind(x),h.removeListener=x.removeListener.bind(x),h.removeAllListeners=x.removeAllListeners.bind(x),h._internalOn=v.on.bind(v),h._internalOnce=v.once.bind(v),h._removeInternalListener=v.removeListener.bind(v),h._removeAllInternalListeners=v.removeAllListeners.bind(v),h.emit=function(y,b){x.emit(y,b),v.emit(y,b)},typeof h.addEventListener=="function"&&h.addEventListener("wheel",()=>{},{passive:!0}),h},triggerHandler:function(h,x,v){var y,b=h._ev;if(!b)return;var T=b._events[x];if(!T)return;function u(M){if(M.listener){if(b.removeListener(x,M.listener),!M.fired)return M.fired=!0,M.listener.apply(b,[v])}else return M.apply(b,[v])}T=Array.isArray(T)?T:[T];var k;for(k=0;k<T.length-1;k++)u(T[k]);return y=u(T[k]),y},purge:function(h){return delete h._ev,delete h.on,delete h.once,delete h.removeListener,delete h.removeAllListeners,delete h.emit,delete h._ev,delete h._internalEv,delete h._internalOn,delete h._internalOnce,delete h._removeInternalListener,delete h._removeAllInternalListeners,h}};ue.exports=s}),km=t((me,ue)=>{var g=Z(),s=Hl().dfltConfig;function h(v,y){for(var b=[],T,u=0;u<y.length;u++)T=y[u],T===v?b[u]=T:typeof T=="object"?b[u]=Array.isArray(T)?g.extendDeep([],T):g.extendDeepAll({},T):b[u]=T;return b}var x={};x.add=function(v,y,b,T,u){var k,M;if(v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},M=v.undoQueue.index,v.autoplay){v.undoQueue.inSequence||(v.autoplay=!1);return}!v.undoQueue.sequence||v.undoQueue.beginSequence?(k={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},v.undoQueue.queue.splice(M,v.undoQueue.queue.length-M,k),v.undoQueue.index+=1):k=v.undoQueue.queue[M-1],v.undoQueue.beginSequence=!1,k&&(k.undo.calls.unshift(y),k.undo.args.unshift(b),k.redo.calls.push(T),k.redo.args.push(u)),v.undoQueue.queue.length>s.queueLength&&(v.undoQueue.queue.shift(),v.undoQueue.index--)},x.startSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!0,v.undoQueue.beginSequence=!0},x.stopSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!1,v.undoQueue.beginSequence=!1},x.undo=function(v){var y,b;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index<=0)){for(v.undoQueue.index--,y=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,b=0;b<y.undo.calls.length;b++)x.plotDo(v,y.undo.calls[b],y.undo.args[b]);v.undoQueue.inSequence=!1,v.autoplay=!1}},x.redo=function(v){var y,b;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index>=v.undoQueue.queue.length)){for(y=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,b=0;b<y.redo.calls.length;b++)x.plotDo(v,y.redo.calls[b],y.redo.args[b]);v.undoQueue.inSequence=!1,v.autoplay=!1,v.undoQueue.index++}},x.plotDo=function(v,y,b){v.autoplay=!0,b=h(v,b),y.apply(null,b)},ue.exports=x}),wm=t((me,ue)=>{ue.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}}),Xm=t(me=>{var ue=l1(),g=Z(),s=mr(),h=o1(),x=wm(),v=qm(),y=Hl().configAttributes,b=vm(),T=g.extendDeepAll,u=g.isPlainObject,k=g.isArrayOrTypedArray,M=g.nestedProperty,D=g.valObjectMeta,B="_isSubplotObj",P="_isLinkedToArray",N="_arrayAttrRegexps",z="_deprecated",F=[B,P,N,z];me.IS_SUBPLOT_OBJ=B,me.IS_LINKED_TO_ARRAY=P,me.DEPRECATED=z,me.UNDERSCORE_ATTRS=F,me.get=function(){var ge={};return ue.allTypes.forEach(function(ye){ge[ye]=H(ye)}),{defs:{valObjects:D,metaKeys:F.concat(["description","role","editType","impliedEdits"]),editType:{traces:b.traces,layout:b.layout},impliedEdits:{}},traces:ge,layout:W(),frames:Ce(),animation:he(v),config:he(y)}},me.crawl=function(ge,ye,Ae,Le){var ce=Ae||0;Le=Le||"",Object.keys(ge).forEach(function(ke){var Pe=ge[ke];if(F.indexOf(ke)===-1){var tt=(Le?Le+".":"")+ke;ye(Pe,ke,ge,ce,tt),!me.isValObject(Pe)&&u(Pe)&&ke!=="impliedEdits"&&me.crawl(Pe,ye,ce+1,tt)}})},me.isValObject=function(ge){return ge&&ge.valType!==void 0},me.findArrayAttributes=function(ge){var ye=[],Ae=[],Le=[],ce,ke;function Pe(Ke,nt,yi,Ei){Ae=Ae.slice(0,Ei).concat([nt]),Le=Le.slice(0,Ei).concat([Ke&&Ke._isLinkedToArray]);var vs=Ke&&(Ke.valType==="data_array"||Ke.arrayOk===!0)&&!(Ae[Ei-1]==="colorbar"&&(nt==="ticktext"||nt==="tickvals"));vs&&tt(ce,0,"")}function tt(Ke,nt,yi){var Ei=Ke[Ae[nt]],vs=yi+Ae[nt];if(nt===Ae.length-1)k(Ei)&&ye.push(ke+vs);else if(Le[nt]){if(Array.isArray(Ei))for(var Se=0;Se<Ei.length;Se++)u(Ei[Se])&&tt(Ei[Se],nt+1,vs+"["+Se+"].")}else u(Ei)&&tt(Ei,nt+1,vs+".")}return ce=ge,ke="",me.crawl(s,Pe),ge._module&&ge._module.attributes&&me.crawl(ge._module.attributes,Pe),ye},me.getTraceValObject=function(ge,ye){var Ae=ye[0],Le=1,ce,ke,Pe=ge._module;if(Pe||(Pe=(ue.modules[ge.type||s.type.dflt]||{})._module),!Pe)return!1;if(ce=Pe.attributes,ke=ce&&ce[Ae],!ke){var tt=Pe.basePlotModule;tt&&tt.attributes&&(ke=tt.attributes[Ae])}return ke||(ke=s[Ae]),L(ke,ye,Le)},me.getLayoutValObject=function(ge,ye){var Ae=w(ge,ye[0]);return L(Ae,ye,1)};function w(ge,ye){var Ae,Le,ce,ke,Pe=ge._basePlotModules;if(Pe){var tt;for(Ae=0;Ae<Pe.length;Ae++){if(ce=Pe[Ae],ce.attrRegex&&ce.attrRegex.test(ye)){if(ce.layoutAttrOverrides)return ce.layoutAttrOverrides;!tt&&ce.layoutAttributes&&(tt=ce.layoutAttributes)}var Ke=ce.baseLayoutAttrOverrides;if(Ke&&ye in Ke)return Ke[ye]}if(tt)return tt}var nt=ge._modules;if(nt){for(Ae=0;Ae<nt.length;Ae++)if(ke=nt[Ae].layoutAttributes,ke&&ye in ke)return ke[ye]}for(Le in ue.componentsRegistry){if(ce=ue.componentsRegistry[Le],ce.name==="colorscale"&&ye.indexOf("coloraxis")===0)return ce.layoutAttributes[ye];if(!ce.schema&&ye===ce.name)return ce.layoutAttributes}return ye in h?h[ye]:!1}function L(ge,ye,Ae){if(!ge)return!1;if(ge._isLinkedToArray){if(O(ye[Ae]))Ae++;else if(Ae<ye.length)return!1}for(;Ae<ye.length;Ae++){var Le=ge[ye[Ae]];if(u(Le))ge=Le;else break;if(Ae===ye.length-1)break;if(ge._isLinkedToArray){if(Ae++,!O(ye[Ae]))return!1}else if(ge.valType==="info_array"){Ae++;var ce=ye[Ae];if(!O(ce))return!1;var ke=ge.items;if(Array.isArray(ke)){if(ce>=ke.length)return!1;if(ge.dimensions===2){if(Ae++,ye.length===Ae)return ge;var Pe=ye[Ae];if(!O(Pe))return!1;ge=ke[ce][Pe]}else ge=ke[ce]}else ge=ke}}return ge}function O(ge){return ge===Math.round(ge)&&ge>=0}function H(ge){var ye,Ae;ye=ue.modules[ge]._module,Ae=ye.basePlotModule;var Le={};Le.type=null;var ce=T({},s),ke=T({},ye.attributes);me.crawl(ke,function(Ke,nt,yi,Ei,vs){M(ce,vs).set(void 0),Ke===void 0&&M(ke,vs).set(void 0)}),T(Le,ce),ue.traceIs(ge,"noOpacity")&&delete Le.opacity,ue.traceIs(ge,"showLegend")||(delete Le.showlegend,delete Le.legendgroup),ue.traceIs(ge,"noHover")&&(delete Le.hoverinfo,delete Le.hoverlabel),ye.selectPoints||delete Le.selectedpoints,T(Le,ke),Ae.attributes&&T(Le,Ae.attributes),Le.type=ge;var Pe={meta:ye.meta||{},categories:ye.categories||{},animatable:!!ye.animatable,type:ge,attributes:he(Le)};if(ye.layoutAttributes){var tt={};T(tt,ye.layoutAttributes),Pe.layoutAttributes=he(tt)}return ye.animatable||me.crawl(Pe,function(Ke){me.isValObject(Ke)&&"anim"in Ke&&delete Ke.anim}),Pe}function W(){var ge={},ye,Ae;T(ge,h);for(ye in ue.subplotsRegistry)if(Ae=ue.subplotsRegistry[ye],!!Ae.layoutAttributes)if(Array.isArray(Ae.attr))for(var Le=0;Le<Ae.attr.length;Le++)fe(ge,Ae,Ae.attr[Le]);else{var ce=Ae.attr==="subplot"?Ae.name:Ae.attr;fe(ge,Ae,ce)}for(ye in ue.componentsRegistry){Ae=ue.componentsRegistry[ye];var ke=Ae.schema;if(ke&&(ke.subplots||ke.layout)){var Pe=ke.subplots;if(Pe&&Pe.xaxis&&!Pe.yaxis)for(var tt in Pe.xaxis)delete ge.yaxis[tt];delete ge.xaxis.shift,delete ge.xaxis.autoshift}else Ae.name==="colorscale"?T(ge,Ae.layoutAttributes):Ae.layoutAttributes&&xe(ge,Ae.layoutAttributes,Ae.name)}return{layoutAttributes:he(ge)}}function Ce(){var ge={frames:T({},x)};return he(ge),ge.frames}function he(ge){return le(ge),Y(ge),Re(ge),ge}function le(ge){function ye(Le){return{valType:"string",editType:"none"}}function Ae(Le,ce,ke){me.isValObject(Le)?(Le.arrayOk===!0||Le.valType==="data_array")&&(ke[ce+"src"]=ye()):u(Le)&&(Le.role="object")}me.crawl(ge,Ae)}function Y(ge){function ye(Ae,Le,ce){if(Ae){var ke=Ae[P];ke&&(delete Ae[P],ce[Le]={items:{}},ce[Le].items[ke]=Ae,ce[Le].role="object")}}me.crawl(ge,ye)}function Re(ge){function ye(Ae){for(var Le in Ae)if(u(Ae[Le]))ye(Ae[Le]);else if(Array.isArray(Ae[Le]))for(var ce=0;ce<Ae[Le].length;ce++)ye(Ae[Le][ce]);else Ae[Le]instanceof RegExp&&(Ae[Le]=Ae[Le].toString())}ye(ge)}function fe(ge,ye,Ae){var Le=M(ge,Ae),ce=T({},ye.layoutAttributes);ce[B]=!0,Le.set(ce)}function xe(ge,ye,Ae){var Le=M(ge,Ae);Le.set(T(Le.get()||{},ye))}}),Nm=t(me=>{var ue=Z(),g=mr(),s="templateitemname",h={name:{valType:"string",editType:"none"}};h[s]={valType:"string",editType:"calc"},me.templatedArray=function(y,b){return b._isLinkedToArray=y,b.name=h.name,b[s]=h[s],b},me.traceTemplater=function(y){var b={},T,u;for(T in y)u=y[T],Array.isArray(u)&&u.length&&(b[T]=0);function k(M){T=ue.coerce(M,{},g,"type");var D={type:T,_template:null};if(T in b){u=y[T];var B=b[T]%u.length;b[T]++,D._template=u[B]}return D}return{newTrace:k}},me.newContainer=function(y,b,T){var u=y._template,k=u&&(u[b]||T&&u[T]);ue.isPlainObject(k)||(k=null);var M=y[b]={_template:k};return M},me.arrayTemplater=function(y,b,T){var u=y._template,k=u&&u[v(b)],M=u&&u[b];(!Array.isArray(M)||!M.length)&&(M=[]);var D={};function B(N){var z={name:N.name,_input:N},F=z[s]=N[s];if(!x(F))return z._template=k,z;for(var w=0;w<M.length;w++){var L=M[w];if(L.name===F)return D[F]=1,z._template=L,z}return z[T]=N[T]||!1,z._template=!1,z}function P(){for(var N=[],z=0;z<M.length;z++){var F=M[z],w=F.name;if(x(w)&&!D[w]){var L={_template:F,name:w,_input:{_templateitemname:w}};L[s]=F[s],N.push(L),D[w]=1}}return N}return{newItem:B,defaultItems:P}};function x(y){return y&&typeof y=="string"}function v(y){var b=y.length-1;return y.charAt(b)!=="s"&&ue.warn("bad argument to arrayDefaultKey: "+y),y.substr(0,y.length-1)+"defaults"}me.arrayDefaultKey=v,me.arrayEditor=function(y,b,T){var u=(ue.nestedProperty(y,b).get()||[]).length,k=T._index,M=k>=u&&(T._input||{})._templateitemname;M&&(k=u);var D=b+"["+k+"]",B;function P(){B={},M&&(B[D]={},B[D][s]=M)}P();function N(L,O){B[L]=O}function z(L,O){M?ue.nestedProperty(B[D],L).set(O):B[D+"."+L]=O}function F(){var L=B;return P(),L}function w(L,O){L&&z(L,O);var H=F();for(var W in H)ue.nestedProperty(y,W).set(H[W])}return{modifyBase:N,modifyItem:z,getUpdateObj:F,applyUpdate:w}}}),m1=t((me,ue)=>{var g=ne().counter;ue.exports={idRegex:{x:g("x","( domain)?"),y:g("y","( domain)?")},attrRegex:g("[xy]axis"),xAxisMatch:g("xaxis"),yAxisMatch:g("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}}),N1=t(me=>{var ue=l1(),g=m1();me.id2name=function(h){if(!(typeof h!="string"||!h.match(g.AX_ID_PATTERN))){var x=h.split(" ")[0].substr(1);return x==="1"&&(x=""),h.charAt(0)+"axis"+x}},me.name2id=function(h){if(h.match(g.AX_NAME_PATTERN)){var x=h.substr(5);return x==="1"&&(x=""),h.charAt(0)+x}},me.cleanId=function(h,x,v){var y=/( domain)$/.test(h);if(!(typeof h!="string"||!h.match(g.AX_ID_PATTERN))&&!(x&&h.charAt(0)!==x)&&!(y&&!v)){var b=h.split(" ")[0].substr(1).replace(/^0+/,"");return b==="1"&&(b=""),h.charAt(0)+b+(y&&v?" domain":"")}},me.list=function(h,x,v){var y=h._fullLayout;if(!y)return[];var b=me.listIds(h,x),T=new Array(b.length),u;for(u=0;u<b.length;u++){var k=b[u];T[u]=y[k.charAt(0)+"axis"+k.substr(1)]}if(!v){var M=y._subplots.gl3d||[];for(u=0;u<M.length;u++){var D=y[M[u]];x?T.push(D[x+"axis"]):T.push(D.xaxis,D.yaxis,D.zaxis)}}return T},me.listIds=function(h,x){var v=h._fullLayout;if(!v)return[];var y=v._subplots;return x?y[x+"axis"]:y.xaxis.concat(y.yaxis)},me.getFromId=function(h,x,v){var y=h._fullLayout;return x=x===void 0||typeof x!="string"?x:x.replace(" domain",""),v==="x"?x=x.replace(/y[0-9]*/,""):v==="y"&&(x=x.replace(/x[0-9]*/,"")),y[me.id2name(x)]},me.getFromTrace=function(h,x,v){var y=h._fullLayout,b=null;if(ue.traceIs(x,"gl3d")){var T=x.scene;T.substr(0,5)==="scene"&&(b=y[T][v+"axis"])}else b=me.getFromId(h,x[v+"axis"]||v);return b},me.idSort=function(h,x){var v=h.charAt(0),y=x.charAt(0);return v!==y?v>y?1:-1:+(h.substr(1)||1)-+(x.substr(1)||1)},me.ref2id=function(h){return/^[xyz]/.test(h)?h.split(" ")[0]:!1};function s(h,x){if(x&&x.length){for(var v=0;v<x.length;v++)if(x[v][h])return!0}return!1}me.isLinked=function(h,x){return s(x,h._axisMatchGroups)||s(x,h._axisConstraintGroups)}}),H1=t((me,ue)=>{function g(h){var x=h._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()}function s(h){var x=h._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),h._fullLayout._outlining=!1}ue.exports={clearOutlineControllers:g,clearOutline:s}}),Sg=t((me,ue)=>{ue.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}}),bg=t(me=>{var ue=l1();m1().SUBPLOT_PATTERN,me.getSubplotCalcData=function(g,s,h){var x=ue.subplotsRegistry[s];if(!x)return[];for(var v=x.attr,y=[],b=0;b<g.length;b++){var T=g[b],u=T[0].trace;u[v]===h&&y.push(T)}return y},me.getModuleCalcData=function(g,s,h){var x=[],v=[],y;if(typeof s=="string"?y=ue.getModule(s).plot:typeof s=="function"?y=s:y=s.plot,!y)return[x,g];for(var b=h,T=0;T<g.length;T++){var u=g[T],k=u[0].trace,M=k.zorder!==void 0;k.visible!==!0||k._length===0||(k._module&&k._module.plot===y&&(!M||k.zorder===b)?x.push(u):v.push(u))}return[x,v]},me.getSubplotData=function(g,s,h){if(!ue.subplotsRegistry[s])return[];for(var x=ue.subplotsRegistry[s].attr,v=[],y,b,T,u=0;u<g.length;u++)y=g[u],y[x]===h&&v.push(y);return v}}),q1=t(me=>{var ue=l1(),g=Z();me.manageCommandObserver=function(b,T,u,k){var M={},D=!0;T&&T._commandObserver&&(M=T._commandObserver),M.cache||(M.cache={}),M.lookupTable={};var B=me.hasSimpleAPICommandBindings(b,u,M.lookupTable);if(T&&T._commandObserver){if(B)return M;if(T._commandObserver.remove)return T._commandObserver.remove(),T._commandObserver=null,M}if(B){s(b,B,M.cache),M.check=function(){if(D){var z=s(b,B,M.cache);return z.changed&&k&&M.lookupTable[z.value]!==void 0&&(M.disable(),Promise.resolve(k({value:z.value,type:B.type,prop:B.prop,traces:B.traces,index:M.lookupTable[z.value]})).then(M.enable,M.enable)),z.changed}};for(var P=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],N=0;N<P.length;N++)b._internalOn(P[N],M.check);M.remove=function(){for(var z=0;z<P.length;z++)b._removeInternalListener(P[z],M.check)}}else g.log("Unable to automatically bind plot updates to API command"),M.lookupTable={},M.remove=function(){};return M.disable=function(){D=!1},M.enable=function(){D=!0},T&&(T._commandObserver=M),M},me.hasSimpleAPICommandBindings=function(b,T,u){var k,M=T.length,D;for(k=0;k<M;k++){var B,P=T[k],N=P.method,z=P.args;if(Array.isArray(z)||(z=[]),!N)return!1;var F=me.computeAPICommandBindings(b,N,z);if(F.length!==1)return!1;if(!D)D=F[0],Array.isArray(D.traces)&&D.traces.sort();else{if(B=F[0],B.type!==D.type||B.prop!==D.prop)return!1;if(Array.isArray(D.traces))if(Array.isArray(B.traces)){B.traces.sort();for(var w=0;w<D.traces.length;w++)if(D.traces[w]!==B.traces[w])return!1}else return!1;else if(B.prop!==D.prop)return!1}B=F[0];var L=B.value;if(Array.isArray(L))if(L.length===1)L=L[0];else return!1;u&&(u[L]=k)}return D};function s(b,T,u){var k,M,D,B=!1;if(T.type==="data")k=b._fullData[T.traces!==null?T.traces[0]:0];else if(T.type==="layout")k=b._fullLayout;else return!1;return M=g.nestedProperty(k,T.prop).get(),D=u[T.type]=u[T.type]||{},D.hasOwnProperty(T.prop)&&D[T.prop]!==M&&(B=!0),D[T.prop]=M,{changed:B,value:M}}me.executeAPICommand=function(b,T,u){if(T==="skip")return Promise.resolve();var k=ue.apiMethodRegistry[T],M=[b];Array.isArray(u)||(u=[]);for(var D=0;D<u.length;D++)M.push(u[D]);return k.apply(null,M).catch(function(B){return g.warn("API call to Plotly."+T+" rejected.",B),Promise.reject(B)})},me.computeAPICommandBindings=function(b,T,u){var k;switch(Array.isArray(u)||(u=[]),T){case"restyle":k=v(b,u);break;case"relayout":k=x(b,u);break;case"update":k=v(b,[u[0],u[2]]).concat(x(b,[u[1]]));break;case"animate":k=h(b,u);break;default:k=[]}return k};function h(b,T){return Array.isArray(T[0])&&T[0].length===1&&["string","number"].indexOf(typeof T[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:T[0][0].toString()}]:[]}function x(b,T){var u=[],k=T[0],M={};if(typeof k=="string")M[k]=T[1];else if(g.isPlainObject(k))M=k;else return u;return y(M,function(D,B,P){u.push({type:"layout",prop:D,value:P})},"",0),u}function v(b,T){var u,k,M,D,B=[];if(k=T[0],M=T[1],u=T[2],D={},typeof k=="string")D[k]=M;else if(g.isPlainObject(k))D=k,u===void 0&&(u=M);else return B;return u===void 0&&(u=null),y(D,function(P,N,z){var F,w;if(Array.isArray(z)){w=z.slice();var L=Math.min(w.length,b.data.length);u&&(L=Math.min(L,u.length)),F=[];for(var O=0;O<L;O++)F[O]=u?u[O]:O}else w=z,F=u?u.slice():null;if(F===null)Array.isArray(w)&&(w=w[0]);else if(Array.isArray(F)){if(!Array.isArray(w)){var H=w;w=[];for(var W=0;W<F.length;W++)w[W]=H}w.length=Math.min(F.length,w.length)}B.push({type:"data",prop:P,traces:F,value:w})},"",0),B}function y(b,T,u,k){Object.keys(b).forEach(function(M){var D=b[M];if(M[0]!=="_"){var B=u+(k>0?".":"")+M;g.isPlainObject(D)?y(D,T,B,k+1):T(B,M,D)}})}}),vg=t((me,ue)=>{var g=c(),s=p().timeFormatLocale,h=_().formatLocale,x=A(),v=j(),y=l1(),b=Xm(),T=Nm(),u=Z(),k=_r(),M=C().BADNUM,D=N1(),B=H1().clearOutline,P=Sg(),N=qm(),z=wm(),F=bg().getModuleCalcData,w=u.relinkPrivateKeys,L=u._,O=ue.exports={};u.extendFlat(O,y),O.attributes=mr(),O.attributes.type.values=O.allTypes,O.fontAttrs=Xe(),O.layoutAttributes=o1();var H=q1();O.executeAPICommand=H.executeAPICommand,O.computeAPICommandBindings=H.computeAPICommandBindings,O.manageCommandObserver=H.manageCommandObserver,O.hasSimpleAPICommandBindings=H.hasSimpleAPICommandBindings,O.redrawText=function(Se){return Se=u.getGraphDiv(Se),new Promise(function(Ee){setTimeout(function(){Se._fullLayout&&(y.getComponentMethod("annotations","draw")(Se),y.getComponentMethod("legend","draw")(Se),y.getComponentMethod("colorbar","draw")(Se),Ee(O.previousPromises(Se)))},300)})},O.resize=function(Se){Se=u.getGraphDiv(Se);var Ee,X=new Promise(function(Oe,Qe){(!Se||u.isHidden(Se))&&Qe(new Error("Resize must be passed a displayed plot div element.")),Se._redrawTimer&&clearTimeout(Se._redrawTimer),Se._resolveResize&&(Ee=Se._resolveResize),Se._resolveResize=Oe,Se._redrawTimer=setTimeout(function(){if(!Se.layout||Se.layout.width&&Se.layout.height||u.isHidden(Se)){Oe(Se);return}delete Se.layout.width,delete Se.layout.height;var pe=Se.changed;Se.autoplay=!0,y.call("relayout",Se,{autosize:!0}).then(function(){Se.changed=pe,Se._resolveResize===Oe&&(delete Se._resolveResize,Oe(Se))})},100)});return Ee&&Ee(X),X},O.previousPromises=function(Se){if((Se._promises||[]).length)return Promise.all(Se._promises).then(function(){Se._promises=[]})},O.addLinks=function(Se){if(!(!Se._context.showLink&&!Se._context.showSources)){var Ee=Se._fullLayout,X=u.ensureSingle(Ee._paper,"text","js-plot-link-container",function(ve){ve.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:k.defaultLine,"pointer-events":"all"}).each(function(){var Te=g.select(this);Te.append("tspan").classed("js-link-to-tool",!0),Te.append("tspan").classed("js-link-spacer",!0),Te.append("tspan").classed("js-sourcelinks",!0)})}),Oe=X.node(),Qe={y:Ee._paper.attr("height")-9};document.body.contains(Oe)&&Oe.getComputedTextLength()>=Ee.width-20?(Qe["text-anchor"]="start",Qe.x=5):(Qe["text-anchor"]="end",Qe.x=Ee._paper.attr("width")-7),X.attr(Qe);var pe=X.select(".js-link-to-tool"),q=X.select(".js-link-spacer"),ae=X.select(".js-sourcelinks");Se._context.showSources&&Se._context.showSources(Se),Se._context.showLink&&W(Se,pe),q.text(pe.text()&&ae.text()?" - ":"")}};function W(Se,Ee){Ee.text("");var X=Ee.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Se._context.linkText+" »");if(Se._context.sendData)X.on("click",function(){O.sendDataToCloud(Se)});else{var Oe=window.location.pathname.split("/"),Qe=window.location.search;X.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+Oe[2].split(".")[0]+"/"+Oe[1]+Qe})}}O.sendDataToCloud=function(Se){var Ee=(window.PLOTLYENV||{}).BASE_URL||Se._context.plotlyServerURL;if(Ee){Se.emit("plotly_beforeexport");var X=g.select(Se).append("div").attr("id","hiddenform").style("display","none"),Oe=X.append("form").attr({action:Ee+"/external",method:"post",target:"_blank"}),Qe=Oe.append("input").attr({type:"text",name:"data"});return Qe.node().value=O.graphJson(Se,!1,"keepdata"),Oe.node().submit(),X.remove(),Se.emit("plotly_afterexport"),!1}};var Ce=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],he=["year","month","dayMonth","dayMonthYear"];O.supplyDefaults=function(Se,Ee){var X=Ee&&Ee.skipUpdateCalc,Oe=Se._fullLayout||{};if(Oe._skipDefaults){delete Oe._skipDefaults;return}var Qe=Se._fullLayout={},pe=Se.layout||{},q=Se._fullData||[],ae=Se._fullData=[],ve=Se.data||[],Te=Se.calcdata||[],et=Se._context||{},bt;Se._transitionData||O.createTransitionData(Se),Qe._dfltTitle={plot:L(Se,"Click to enter Plot title"),subtitle:L(Se,"Click to enter Plot subtitle"),x:L(Se,"Click to enter X axis title"),y:L(Se,"Click to enter Y axis title"),colorbar:L(Se,"Click to enter Colorscale title"),annotation:L(Se,"new text")},Qe._traceWord=L(Se,"trace");var dr=Re(Se,Ce);if(Qe._mapboxAccessToken=et.mapboxAccessToken,Oe._initialAutoSizeIsDone){var Ol=Oe.width,Xl=Oe.height;O.supplyLayoutGlobalDefaults(pe,Qe,dr),pe.width||(Qe.width=Ol),pe.height||(Qe.height=Xl),O.sanitizeMargins(Qe)}else{O.supplyLayoutGlobalDefaults(pe,Qe,dr);var Pp=!pe.width||!pe.height,t0=Qe.autosize,Wp=et.autosizable,$p=Pp&&(t0||Wp);$p?O.plotAutoSize(Se,pe,Qe):Pp&&O.sanitizeMargins(Qe),!t0&&Pp&&(pe.width=Qe.width,pe.height=Qe.height)}Qe._d3locale=fe(dr,Qe.separators),Qe._extraFormat=Re(Se,he),Qe._initialAutoSizeIsDone=!0,Qe._dataLength=ve.length,Qe._modules=[],Qe._visibleModules=[],Qe._basePlotModules=[];var Lo=Qe._subplots=Y(),kl=Qe._splomAxes={x:{},y:{}},dt=Qe._splomSubplots={};Qe._splomGridDflt={},Qe._scatterStackOpts={},Qe._firstScatter={},Qe._alignmentOpts={},Qe._colorAxes={},Qe._requestRangeslider={},Qe._traceUids=le(q,ve),O.supplyDataDefaults(ve,ae,pe,Qe);var yp=Object.keys(kl.x),Bp=Object.keys(kl.y);if(yp.length>1&&Bp.length>1){for(y.getComponentMethod("grid","sizeDefaults")(pe,Qe),bt=0;bt<yp.length;bt++)u.pushUnique(Lo.xaxis,yp[bt]);for(bt=0;bt<Bp.length;bt++)u.pushUnique(Lo.yaxis,Bp[bt]);for(var Jp in dt)u.pushUnique(Lo.cartesian,Jp)}if(Qe._has=O._hasPlotType.bind(Qe),q.length===ae.length)for(bt=0;bt<ae.length;bt++)w(ae[bt],q[bt]);O.supplyLayoutModuleDefaults(pe,Qe,ae,Se._transitionData);var m0=Qe._visibleModules,s0=[];for(bt=0;bt<m0.length;bt++){var y0=m0[bt].crossTraceDefaults;y0&&u.pushUnique(s0,y0)}for(bt=0;bt<s0.length;bt++)s0[bt](ae,Qe);Qe._hasOnlyLargeSploms=Qe._basePlotModules.length===1&&Qe._basePlotModules[0].name==="splom"&&yp.length>15&&Bp.length>15&&Qe.shapes.length===0&&Qe.images.length===0,O.linkSubplots(ae,Qe,q,Oe),O.cleanPlot(ae,Qe,q,Oe);var M0=!!(Oe._has&&Oe._has("cartesian")),T0=!!(Qe._has&&Qe._has("cartesian")),G0=M0,h0=T0;G0&&!h0?Oe._bgLayer.remove():h0&&!G0&&(Qe._shouldCreateBgLayer=!0),Oe._zoomlayer&&!Se._dragging&&B({_fullLayout:Oe}),xe(ae,Qe),w(Qe,Oe),y.getComponentMethod("colorscale","crossTraceDefaults")(ae,Qe),Qe._preGUI||(Qe._preGUI={}),Qe._tracePreGUI||(Qe._tracePreGUI={});var W0=Qe._tracePreGUI,rm={},V0;for(V0 in W0)rm[V0]="old";for(bt=0;bt<ae.length;bt++)V0=ae[bt]._fullInput.uid,rm[V0]||(W0[V0]={}),rm[V0]="new";for(V0 in rm)rm[V0]==="old"&&delete W0[V0];Ae(Qe),y.getComponentMethod("rangeslider","makeData")(Qe),!X&&Te.length===ae.length&&O.supplyDefaultsUpdateCalc(Te,ae)},O.supplyDefaultsUpdateCalc=function(Se,Ee){for(var X=0;X<Ee.length;X++){var Oe=Ee[X],Qe=(Se[X]||[])[0];if(Qe&&Qe.trace){var pe=Qe.trace;if(pe._hasCalcTransform){var q=pe._arrayAttrs,ae,ve,Te;for(ae=0;ae<q.length;ae++)ve=q[ae],Te=u.nestedProperty(pe,ve).get().slice(),u.nestedProperty(Oe,ve).set(Te)}Qe.trace=Oe}}};function le(Se,Ee){var X=Ee.length,Oe=[],Qe,pe;for(Qe=0;Qe<Se.length;Qe++){var q=Se[Qe]._fullInput;q!==pe&&Oe.push(q),pe=q}var ae=Oe.length,ve=new Array(X),Te={};function et(Ol,Xl){ve[Xl]=Ol,Te[Ol]=1}function bt(Ol,Xl){if(Ol&&typeof Ol=="string"&&!Te[Ol])return et(Ol,Xl),!0}for(Qe=0;Qe<X;Qe++){var dr=Ee[Qe].uid;typeof dr=="number"&&(dr=String(dr)),!bt(dr,Qe)&&(Qe<ae&&bt(Oe[Qe].uid,Qe)||et(u.randstr(Te),Qe))}return ve}function Y(){var Se=y.collectableSubplotTypes,Ee={},X,Oe;if(!Se){Se=[];var Qe=y.subplotsRegistry;for(var pe in Qe){var q=Qe[pe],ae=q.attr;if(ae&&(Se.push(pe),Array.isArray(ae)))for(Oe=0;Oe<ae.length;Oe++)u.pushUnique(Se,ae[Oe])}}for(X=0;X<Se.length;X++)Ee[Se[X]]=[];return Ee}function Re(Se,Ee){var X=Se._context.locale;X||(X="en-US");var Oe=!1,Qe={};function pe(bt){for(var dr=!0,Ol=0;Ol<Ee.length;Ol++){var Xl=Ee[Ol];Qe[Xl]||(bt[Xl]?Qe[Xl]=bt[Xl]:dr=!1)}dr&&(Oe=!0)}for(var q=0;q<2;q++){for(var ae=Se._context.locales,ve=0;ve<2;ve++){var Te=(ae[X]||{}).format;if(Te&&(pe(Te),Oe))break;ae=y.localeRegistry}var et=X.split("-")[0];if(Oe||et===X)break;X=et}return Oe||pe(y.localeRegistry.en.format),Qe}function fe(Se,Ee){return Se.decimal=Ee.charAt(0),Se.thousands=Ee.charAt(1),{numberFormat:function(X){try{X=h(Se).format(u.adjustFormat(X))}catch{return u.warnBadFormat(X),u.noFormat}return X},timeFormat:s(Se).utcFormat}}function xe(Se,Ee){var X,Oe=[];Ee.meta&&(X=Ee._meta={meta:Ee.meta,layout:{meta:Ee.meta}});for(var Qe=0;Qe<Se.length;Qe++){var pe=Se[Qe];pe.meta?Oe[pe.index]=pe._meta={meta:pe.meta}:Ee.meta&&(pe._meta={meta:Ee.meta}),Ee.meta&&(pe._meta.layout={meta:Ee.meta})}Oe.length&&(X||(X=Ee._meta={}),X.data=Oe)}O.createTransitionData=function(Se){Se._transitionData||(Se._transitionData={}),Se._transitionData._frames||(Se._transitionData._frames=[]),Se._transitionData._frameHash||(Se._transitionData._frameHash={}),Se._transitionData._counter||(Se._transitionData._counter=0),Se._transitionData._interruptCallbacks||(Se._transitionData._interruptCallbacks=[])},O._hasPlotType=function(Se){var Ee,X=this._basePlotModules||[];for(Ee=0;Ee<X.length;Ee++)if(X[Ee].name===Se)return!0;var Oe=this._modules||[];for(Ee=0;Ee<Oe.length;Ee++){var Qe=Oe[Ee].name;if(Qe===Se)return!0;var pe=y.modules[Qe];if(pe&&pe.categories[Se])return!0}return!1},O.cleanPlot=function(Se,Ee,X,Oe){var Qe,pe,q=Oe._basePlotModules||[];for(Qe=0;Qe<q.length;Qe++){var ae=q[Qe];ae.clean&&ae.clean(Se,Ee,X,Oe)}var ve=Oe._has&&Oe._has("gl"),Te=Ee._has&&Ee._has("gl");ve&&!Te&&Oe._glcontainer!==void 0&&(Oe._glcontainer.selectAll(".gl-canvas").remove(),Oe._glcontainer.selectAll(".no-webgl").remove(),Oe._glcanvas=null);var et=!!Oe._infolayer;e:for(Qe=0;Qe<X.length;Qe++){var bt=X[Qe],dr=bt.uid;for(pe=0;pe<Se.length;pe++){var Ol=Se[pe];if(dr===Ol.uid)continue e}et&&Oe._infolayer.select(".cb"+dr).remove()}},O.linkSubplots=function(Se,Ee,X,Oe){var Qe,pe,q=Oe._plots||{},ae=Ee._plots={},ve=Ee._subplots,Te={_fullData:Se,_fullLayout:Ee},et=ve.cartesian||[];for(Qe=0;Qe<et.length;Qe++){var bt=et[Qe],dr=q[bt],Ol=D.getFromId(Te,bt,"x"),Xl=D.getFromId(Te,bt,"y"),Pp;for(dr?Pp=ae[bt]=dr:(Pp=ae[bt]={},Pp.id=bt),Ol._counterAxes.push(Xl._id),Xl._counterAxes.push(Ol._id),Ol._subplotsWith.push(bt),Xl._subplotsWith.push(bt),Pp.xaxis=Ol,Pp.yaxis=Xl,Pp._hasClipOnAxisFalse=!1,pe=0;pe<Se.length;pe++){var t0=Se[pe];if(t0.xaxis===Pp.xaxis._id&&t0.yaxis===Pp.yaxis._id&&t0.cliponaxis===!1){Pp._hasClipOnAxisFalse=!0;break}}}var Wp=D.list(Te,null,!0),$p;for(Qe=0;Qe<Wp.length;Qe++){$p=Wp[Qe];var Lo=null;$p.overlaying&&(Lo=D.getFromId(Te,$p.overlaying),Lo&&Lo.overlaying&&($p.overlaying=!1,Lo=null)),$p._mainAxis=Lo||$p,Lo&&($p.domain=Lo.domain.slice()),$p._anchorAxis=$p.anchor==="free"?null:D.getFromId(Te,$p.anchor)}for(Qe=0;Qe<Wp.length;Qe++)if($p=Wp[Qe],$p._counterAxes.sort(D.idSort),$p._subplotsWith.sort(u.subplotSort),$p._mainSubplot=ge($p,Ee),$p._counterAxes.length&&($p.spikemode&&$p.spikemode.indexOf("across")!==-1||$p.automargin&&$p.mirror&&$p.anchor!=="free"||y.getComponentMethod("rangeslider","isVisible")($p))){var kl=1,dt=0;for(pe=0;pe<$p._counterAxes.length;pe++){var yp=D.getFromId(Te,$p._counterAxes[pe]);kl=Math.min(kl,yp.domain[0]),dt=Math.max(dt,yp.domain[1])}kl<dt&&($p._counterDomainMin=kl,$p._counterDomainMax=dt)}};function ge(Se,Ee){var X={_fullLayout:Ee},Oe=Se._id.charAt(0)==="x",Qe=Se._mainAxis._anchorAxis,pe="",q="",ae="";if(Qe&&(ae=Qe._mainAxis._id,pe=Oe?Se._id+ae:ae+Se._id),!pe||!Ee._plots[pe]){pe="";for(var ve=Se._counterAxes,Te=0;Te<ve.length;Te++){var et=ve[Te],bt=Oe?Se._id+et:et+Se._id;q||(q=bt);var dr=D.getFromId(X,et);if(ae&&dr.overlaying===ae){pe=bt;break}}}return pe||q}O.clearExpandedTraceDefaultColors=function(Se){var Ee,X,Oe;function Qe(q,ae,ve,Te){X[Te]=ae,X.length=Te+1,q.valType==="color"&&q.dflt===void 0&&Ee.push(X.join("."))}for(X=[],Ee=Se._module._colorAttrs,Ee||(Se._module._colorAttrs=Ee=[],b.crawl(Se._module.attributes,Qe)),Oe=0;Oe<Ee.length;Oe++){var pe=u.nestedProperty(Se,"_input."+Ee[Oe]);pe.get()||u.nestedProperty(Se,Ee[Oe]).set(null)}},O.supplyDataDefaults=function(Se,Ee,X,Oe){var Qe=Oe._modules,pe=Oe._visibleModules,q=Oe._basePlotModules,ae=0,ve,Te,et;Oe._transformModules=[];function bt(Wp){Ee.push(Wp);var $p=Wp._module;$p&&(u.pushUnique(Qe,$p),Wp.visible===!0&&u.pushUnique(pe,$p),u.pushUnique(q,Wp._module.basePlotModule),Wp._input.visible!==!1&&ae++)}var dr={},Ol=[],Xl=(X.template||{}).data||{},Pp=T.traceTemplater(Xl);for(ve=0;ve<Se.length;ve++)et=Se[ve],Te=Pp.newTrace(et),Te.uid=Oe._traceUids[ve],O.supplyTraceDefaults(et,Te,ae,Oe,ve),Te.index=ve,Te._input=et,Te._fullInput=Te,bt(Te),y.traceIs(Te,"carpetAxis")&&(dr[Te.carpet]=Te),y.traceIs(Te,"carpetDependent")&&Ol.push(ve);for(ve=0;ve<Ol.length;ve++)if(Te=Ee[Ol[ve]],!!Te.visible){var t0=dr[Te.carpet];if(Te._carpet=t0,!t0||!t0.visible){Te.visible=!1;continue}Te.xaxis=t0.xaxis,Te.yaxis=t0.yaxis}},O.supplyAnimationDefaults=function(Se){Se=Se||{};var Ee,X={};function Oe(Qe,pe){return u.coerce(Se||{},X,N,Qe,pe)}if(Oe("mode"),Oe("direction"),Oe("fromcurrent"),Array.isArray(Se.frame))for(X.frame=[],Ee=0;Ee<Se.frame.length;Ee++)X.frame[Ee]=O.supplyAnimationFrameDefaults(Se.frame[Ee]||{});else X.frame=O.supplyAnimationFrameDefaults(Se.frame||{});if(Array.isArray(Se.transition))for(X.transition=[],Ee=0;Ee<Se.transition.length;Ee++)X.transition[Ee]=O.supplyAnimationTransitionDefaults(Se.transition[Ee]||{});else X.transition=O.supplyAnimationTransitionDefaults(Se.transition||{});return X},O.supplyAnimationFrameDefaults=function(Se){var Ee={};function X(Oe,Qe){return u.coerce(Se||{},Ee,N.frame,Oe,Qe)}return X("duration"),X("redraw"),Ee},O.supplyAnimationTransitionDefaults=function(Se){var Ee={};function X(Oe,Qe){return u.coerce(Se||{},Ee,N.transition,Oe,Qe)}return X("duration"),X("easing"),Ee},O.supplyFrameDefaults=function(Se){var Ee={};function X(Oe,Qe){return u.coerce(Se,Ee,z,Oe,Qe)}return X("group"),X("name"),X("traces"),X("baseframe"),X("data"),X("layout"),Ee},O.supplyTraceDefaults=function(Se,Ee,X,Oe,Qe){var pe=Oe.colorway||k.defaults,q=pe[X%pe.length],ae;function ve(Lo,kl){return u.coerce(Se,Ee,O.attributes,Lo,kl)}var Te=ve("visible");ve("type"),ve("name",Oe._traceWord+" "+Qe),ve("uirevision",Oe.uirevision);var et=O.getModule(Ee);if(Ee._module=et,et){var bt=et.basePlotModule,dr=bt.attr,Ol=bt.attributes;if(dr&&Ol){var Xl=Oe._subplots,Pp="";if(Array.isArray(dr))for(ae=0;ae<dr.length;ae++){var t0=dr[ae],Wp=u.coerce(Se,Ee,Ol,t0);Xl[t0]&&u.pushUnique(Xl[t0],Wp),Pp+=Wp}else Pp=u.coerce(Se,Ee,Ol,dr);Xl[bt.name]&&u.pushUnique(Xl[bt.name],Pp)}}if(Te&&(ve("customdata"),ve("ids"),ve("meta"),y.traceIs(Ee,"showLegend")?(u.coerce(Se,Ee,et.attributes.showlegend?et.attributes:O.attributes,"showlegend"),ve("legend"),ve("legendwidth"),ve("legendgroup"),ve("legendgrouptitle.text"),ve("legendrank"),Ee._dfltShowLegend=!0):Ee._dfltShowLegend=!1,et&&et.supplyDefaults(Se,Ee,q,Oe),y.traceIs(Ee,"noOpacity")||ve("opacity"),y.traceIs(Ee,"notLegendIsolatable")&&(Ee.visible=!!Ee.visible),y.traceIs(Ee,"noHover")||(Ee.hovertemplate||u.coerceHoverinfo(Se,Ee,Oe),Ee.type!=="parcats"&&y.getComponentMethod("fx","supplyDefaults")(Se,Ee,q,Oe)),et&&et.selectPoints)){var $p=ve("selectedpoints");u.isTypedArray($p)&&(Ee.selectedpoints=Array.from($p))}return Ee},O.supplyLayoutGlobalDefaults=function(Se,Ee,X){function Oe(bt,dr){return u.coerce(Se,Ee,O.layoutAttributes,bt,dr)}var Qe=Se.template;u.isPlainObject(Qe)&&(Ee.template=Qe,Ee._template=Qe.layout,Ee._dataTemplate=Qe.data),Oe("autotypenumbers");var pe=u.coerceFont(Oe,"font"),q=pe.size;u.coerceFont(Oe,"title.font",pe,{overrideDflt:{size:Math.round(q*1.4)}}),Oe("title.text",Ee._dfltTitle.plot),Oe("title.xref");var ae=Oe("title.yref");Oe("title.pad.t"),Oe("title.pad.r"),Oe("title.pad.b"),Oe("title.pad.l");var ve=Oe("title.automargin");Oe("title.x"),Oe("title.xanchor"),Oe("title.y"),Oe("title.yanchor"),Oe("title.subtitle.text",Ee._dfltTitle.subtitle),u.coerceFont(Oe,"title.subtitle.font",pe,{overrideDflt:{size:Math.round(Ee.title.font.size*.7)}}),ve&&(ae==="paper"&&(Ee.title.y!==0&&(Ee.title.y=1),Ee.title.yanchor==="auto"&&(Ee.title.yanchor=Ee.title.y===0?"top":"bottom")),ae==="container"&&(Ee.title.y==="auto"&&(Ee.title.y=1),Ee.title.yanchor==="auto"&&(Ee.title.yanchor=Ee.title.y<.5?"bottom":"top")));var Te=Oe("uniformtext.mode");Te&&Oe("uniformtext.minsize"),Oe("autosize",!(Se.width&&Se.height)),Oe("width"),Oe("height"),Oe("minreducedwidth"),Oe("minreducedheight"),Oe("margin.l"),Oe("margin.r"),Oe("margin.t"),Oe("margin.b"),Oe("margin.pad"),Oe("margin.autoexpand"),Se.width&&Se.height&&O.sanitizeMargins(Ee),y.getComponentMethod("grid","sizeDefaults")(Se,Ee),Oe("paper_bgcolor"),Oe("separators",X.decimal+X.thousands),Oe("hidesources"),Oe("colorway"),Oe("datarevision");var et=Oe("uirevision");Oe("editrevision",et),Oe("selectionrevision",et),y.getComponentMethod("modebar","supplyLayoutDefaults")(Se,Ee),y.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Se,Ee,Oe),y.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(Se,Ee,Oe),Oe("meta"),u.isPlainObject(Se.transition)&&(Oe("transition.duration"),Oe("transition.easing"),Oe("transition.ordering")),y.getComponentMethod("calendars","handleDefaults")(Se,Ee,"calendar"),y.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Se,Ee,Oe),u.coerce(Se,Ee,P,"scattermode")};function ye(Se){return typeof Se=="string"&&Se.substr(Se.length-2)==="px"&&parseFloat(Se)}O.plotAutoSize=function(Se,Ee,X){var Oe=Se._context||{},Qe=Oe.frameMargins,pe,q,ae=u.isPlotDiv(Se);if(ae&&Se.emit("plotly_autosize"),Oe.fillFrame)pe=window.innerWidth,q=window.innerHeight,document.body.style.overflow="hidden";else{var ve=ae?window.getComputedStyle(Se):{};if(pe=ye(ve.width)||ye(ve.maxWidth)||X.width,q=ye(ve.height)||ye(ve.maxHeight)||X.height,x(Qe)&&Qe>0){var Te=1-2*Qe;pe=Math.round(Te*pe),q=Math.round(Te*q)}}var et=O.layoutAttributes.width.min,bt=O.layoutAttributes.height.min;pe<et&&(pe=et),q<bt&&(q=bt);var dr=!Ee.width&&Math.abs(X.width-pe)>1,Ol=!Ee.height&&Math.abs(X.height-q)>1;(Ol||dr)&&(dr&&(X.width=pe),Ol&&(X.height=q)),Se._initialAutoSize||(Se._initialAutoSize={width:pe,height:q}),O.sanitizeMargins(X)},O.supplyLayoutModuleDefaults=function(Se,Ee,X,Oe){var Qe=y.componentsRegistry,pe=Ee._basePlotModules,q,ae,ve,Te=y.subplotsRegistry.cartesian;for(q in Qe)ve=Qe[q],ve.includeBasePlot&&ve.includeBasePlot(Se,Ee);pe.length||pe.push(Te),Ee._has("cartesian")&&(y.getComponentMethod("grid","contentDefaults")(Se,Ee),Te.finalizeSubplots(Se,Ee));for(var et in Ee._subplots)Ee._subplots[et].sort(u.subplotSort);for(ae=0;ae<pe.length;ae++)ve=pe[ae],ve.supplyLayoutDefaults&&ve.supplyLayoutDefaults(Se,Ee,X);var bt=Ee._modules;for(ae=0;ae<bt.length;ae++)ve=bt[ae],ve.supplyLayoutDefaults&&ve.supplyLayoutDefaults(Se,Ee,X);var dr=Ee._transformModules;for(ae=0;ae<dr.length;ae++)ve=dr[ae],ve.supplyLayoutDefaults&&ve.supplyLayoutDefaults(Se,Ee,X,Oe);for(q in Qe)ve=Qe[q],ve.supplyLayoutDefaults&&ve.supplyLayoutDefaults(Se,Ee,X)},O.purge=function(Se){var Ee=Se._fullLayout||{};Ee._glcontainer!==void 0&&(Ee._glcontainer.selectAll(".gl-canvas").remove(),Ee._glcontainer.remove(),Ee._glcanvas=null),Ee._modeBar&&Ee._modeBar.destroy(),Se._transitionData&&(Se._transitionData._interruptCallbacks&&(Se._transitionData._interruptCallbacks.length=0),Se._transitionData._animationRaf&&window.cancelAnimationFrame(Se._transitionData._animationRaf)),u.clearThrottle(),u.clearResponsive(Se),delete Se.data,delete Se.layout,delete Se._fullData,delete Se._fullLayout,delete Se.calcdata,delete Se.empty,delete Se.fid,delete Se.undoqueue,delete Se.undonum,delete Se.autoplay,delete Se.changed,delete Se._promises,delete Se._redrawTimer,delete Se._hmlumcount,delete Se._hmpixcount,delete Se._transitionData,delete Se._transitioning,delete Se._initialAutoSize,delete Se._transitioningWithDuration,delete Se._dragging,delete Se._dragged,delete Se._dragdata,delete Se._hoverdata,delete Se._snapshotInProgress,delete Se._editing,delete Se._mouseDownTime,delete Se._legendMouseDownTime,Se.removeAllListeners&&Se.removeAllListeners()},O.style=function(Se){var Ee=Se._fullLayout._visibleModules,X=[],Oe;for(Oe=0;Oe<Ee.length;Oe++){var Qe=Ee[Oe];Qe.style&&u.pushUnique(X,Qe.style)}for(Oe=0;Oe<X.length;Oe++)X[Oe](Se)},O.sanitizeMargins=function(Se){if(!(!Se||!Se.margin)){var Ee=Se.width,X=Se.height,Oe=Se.margin,Qe=Ee-(Oe.l+Oe.r),pe=X-(Oe.t+Oe.b),q;Qe<0&&(q=(Ee-1)/(Oe.l+Oe.r),Oe.l=Math.floor(q*Oe.l),Oe.r=Math.floor(q*Oe.r)),pe<0&&(q=(X-1)/(Oe.t+Oe.b),Oe.t=Math.floor(q*Oe.t),Oe.b=Math.floor(q*Oe.b))}},O.clearAutoMarginIds=function(Se){Se._fullLayout._pushmarginIds={}},O.allowAutoMargin=function(Se,Ee){Se._fullLayout._pushmarginIds[Ee]=1};function Ae(Se){var Ee=Se.margin;if(!Se._size){var X=Se._size={l:Math.round(Ee.l),r:Math.round(Ee.r),t:Math.round(Ee.t),b:Math.round(Ee.b),p:Math.round(Ee.pad)};X.w=Math.round(Se.width)-X.l-X.r,X.h=Math.round(Se.height)-X.t-X.b}Se._pushmargin||(Se._pushmargin={}),Se._pushmarginIds||(Se._pushmarginIds={}),Se._reservedMargin||(Se._reservedMargin={})}var Le=2,ce=2;O.autoMargin=function(Se,Ee,X){var Oe=Se._fullLayout,Qe=Oe.width,pe=Oe.height,q=Oe.margin,ae=Oe.minreducedwidth,ve=Oe.minreducedheight,Te=u.constrain(Qe-q.l-q.r,Le,ae),et=u.constrain(pe-q.t-q.b,ce,ve),bt=Math.max(0,Qe-Te),dr=Math.max(0,pe-et),Ol=Oe._pushmargin,Xl=Oe._pushmarginIds;if(q.autoexpand!==!1){if(!X)delete Ol[Ee],delete Xl[Ee];else{var Pp=X.pad;if(Pp===void 0&&(Pp=Math.min(12,q.l,q.r,q.t,q.b)),bt){var t0=(X.l+X.r)/bt;t0>1&&(X.l/=t0,X.r/=t0)}if(dr){var Wp=(X.t+X.b)/dr;Wp>1&&(X.t/=Wp,X.b/=Wp)}var $p=X.xl!==void 0?X.xl:X.x,Lo=X.xr!==void 0?X.xr:X.x,kl=X.yt!==void 0?X.yt:X.y,dt=X.yb!==void 0?X.yb:X.y;Ol[Ee]={l:{val:$p,size:X.l+Pp},r:{val:Lo,size:X.r+Pp},b:{val:dt,size:X.b+Pp},t:{val:kl,size:X.t+Pp}},Xl[Ee]=1}if(!Oe._replotting)return O.doAutoMargin(Se)}};function ke(Se){if("_redrawFromAutoMarginCount"in Se._fullLayout)return!1;var Ee=D.list(Se,"",!0);for(var X in Ee)if(Ee[X].autoshift||Ee[X].shift)return!0;return!1}O.doAutoMargin=function(Se){var Ee=Se._fullLayout,X=Ee.width,Oe=Ee.height;Ee._size||(Ee._size={}),Ae(Ee);var Qe=Ee._size,pe=Ee.margin,q={t:0,b:0,l:0,r:0},ae=u.extendFlat({},Qe),ve=pe.l,Te=pe.r,et=pe.t,bt=pe.b,dr=Ee._pushmargin,Ol=Ee._pushmarginIds,Xl=Ee.minreducedwidth,Pp=Ee.minreducedheight;if(pe.autoexpand!==!1){for(var t0 in dr)Ol[t0]||delete dr[t0];var Wp=Se._fullLayout._reservedMargin;for(var $p in Wp)for(var Lo in Wp[$p]){var kl=Wp[$p][Lo];q[Lo]=Math.max(q[Lo],kl)}dr.base={l:{val:0,size:ve},r:{val:1,size:Te},t:{val:1,size:et},b:{val:0,size:bt}};for(var dt in q){var yp=0;for(var Bp in dr)Bp!=="base"&&x(dr[Bp][dt].size)&&(yp=dr[Bp][dt].size>yp?dr[Bp][dt].size:yp);var Jp=Math.max(0,pe[dt]-yp);q[dt]=Math.max(0,q[dt]-Jp)}for(var m0 in dr){var s0=dr[m0].l||{},y0=dr[m0].b||{},M0=s0.val,T0=s0.size,G0=y0.val,h0=y0.size,W0=X-q.r-q.l,rm=Oe-q.t-q.b;for(var V0 in dr){if(x(T0)&&dr[V0].r){var um=dr[V0].r.val,Uo=dr[V0].r.size;if(um>M0){var Tp=(T0*um+(Uo-W0)*M0)/(um-M0),Be=(Uo*(1-M0)+(T0-W0)*(1-um))/(um-M0);Tp+Be>ve+Te&&(ve=Tp,Te=Be)}}if(x(h0)&&dr[V0].t){var ft=dr[V0].t.val,mn=dr[V0].t.size;if(ft>G0){var Bl=(h0*ft+(mn-rm)*G0)/(ft-G0),Vl=(mn*(1-G0)+(h0-rm)*(1-ft))/(ft-G0);Bl+Vl>bt+et&&(bt=Bl,et=Vl)}}}}}var Np=u.constrain(X-pe.l-pe.r,Le,Xl),Up=u.constrain(Oe-pe.t-pe.b,ce,Pp),Qp=Math.max(0,X-Np),Zp=Math.max(0,Oe-Up);if(Qp){var Kp=(ve+Te)/Qp;Kp>1&&(ve/=Kp,Te/=Kp)}if(Zp){var R0=(bt+et)/Zp;R0>1&&(bt/=R0,et/=R0)}if(Qe.l=Math.round(ve)+q.l,Qe.r=Math.round(Te)+q.r,Qe.t=Math.round(et)+q.t,Qe.b=Math.round(bt)+q.b,Qe.p=Math.round(pe.pad),Qe.w=Math.round(X)-Qe.l-Qe.r,Qe.h=Math.round(Oe)-Qe.t-Qe.b,!Ee._replotting&&(O.didMarginChange(ae,Qe)||ke(Se))){"_redrawFromAutoMarginCount"in Ee?Ee._redrawFromAutoMarginCount++:Ee._redrawFromAutoMarginCount=1;var k0=3*(1+Object.keys(Ol).length);if(Ee._redrawFromAutoMarginCount<k0)return y.call("_doPlot",Se);Ee._size=ae,u.warn("Too many auto-margin redraws.")}Pe(Se)};function Pe(Se){var Ee=D.list(Se,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(X){for(var Oe=0;Oe<Ee.length;Oe++){var Qe=Ee[Oe][X];Qe&&Qe()}})}var tt=["l","r","t","b","p","w","h"];O.didMarginChange=function(Se,Ee){for(var X=0;X<tt.length;X++){var Oe=tt[X],Qe=Se[Oe],pe=Ee[Oe];if(!x(Qe)||Math.abs(pe-Qe)>1)return!0}return!1},O.graphJson=function(Se,Ee,X,Oe,Qe,pe){(Qe&&Ee&&!Se._fullData||Qe&&!Ee&&!Se._fullLayout)&&O.supplyDefaults(Se);var q=Qe?Se._fullData:Se.data,ae=Qe?Se._fullLayout:Se.layout,ve=(Se._transitionData||{})._frames;function Te(dr,Ol){if(typeof dr=="function")return Ol?"_function_":null;if(u.isPlainObject(dr)){var Xl={},Pp;return Object.keys(dr).sort().forEach(function(Lo){if(["_","["].indexOf(Lo.charAt(0))===-1){if(typeof dr[Lo]=="function"){Ol&&(Xl[Lo]="_function");return}if(X==="keepdata"){if(Lo.substr(Lo.length-3)==="src")return}else if(X==="keepstream"){if(Pp=dr[Lo+"src"],typeof Pp=="string"&&Pp.indexOf(":")>0&&!u.isPlainObject(dr.stream))return}else if(X!=="keepall"&&(Pp=dr[Lo+"src"],typeof Pp=="string"&&Pp.indexOf(":")>0))return;Xl[Lo]=Te(dr[Lo],Ol)}}),Xl}var t0=Array.isArray(dr),Wp=u.isTypedArray(dr);if((t0||Wp)&&dr.dtype&&dr.shape){var $p=dr.bdata;return Te({dtype:dr.dtype,shape:dr.shape,bdata:u.isArrayBuffer($p)?v.encode($p):$p},Ol)}return t0?dr.map(function(Lo){return Te(Lo,Ol)}):Wp?u.simpleMap(dr,u.identity):u.isJSDate(dr)?u.ms2DateTimeLocal(+dr):dr}var et={data:(q||[]).map(function(dr){var Ol=Te(dr);return Ee&&delete Ol.fit,Ol})};if(!Ee&&(et.layout=Te(ae),Qe)){var bt=ae._size;et.layout.computed={margin:{b:bt.b,l:bt.l,r:bt.r,t:bt.t}}}return ve&&(et.frames=Te(ve)),pe&&(et.config=Te(Se._context,!0)),Oe==="object"?et:JSON.stringify(et)},O.modifyFrames=function(Se,Ee){var X,Oe,Qe,pe=Se._transitionData._frames,q=Se._transitionData._frameHash;for(X=0;X<Ee.length;X++)switch(Oe=Ee[X],Oe.type){case"replace":Qe=Oe.value;var ae=(pe[Oe.index]||{}).name,ve=Qe.name;pe[Oe.index]=q[ve]=Qe,ve!==ae&&(delete q[ae],q[ve]=Qe);break;case"insert":Qe=Oe.value,q[Qe.name]=Qe,pe.splice(Oe.index,0,Qe);break;case"delete":Qe=pe[Oe.index],delete q[Qe.name],pe.splice(Oe.index,1);break}return Promise.resolve()},O.computeFrame=function(Se,Ee){var X=Se._transitionData._frameHash,Oe,Qe,pe,q;if(!Ee)throw new Error("computeFrame must be given a string frame name");var ae=X[Ee.toString()];if(!ae)return!1;for(var ve=[ae],Te=[ae.name];ae.baseframe&&(ae=X[ae.baseframe.toString()])&&Te.indexOf(ae.name)===-1;)ve.push(ae),Te.push(ae.name);for(var et={};ae=ve.pop();)if(ae.layout&&(et.layout=O.extendLayout(et.layout,ae.layout)),ae.data){if(et.data||(et.data=[]),Qe=ae.traces,!Qe)for(Qe=[],Oe=0;Oe<ae.data.length;Oe++)Qe[Oe]=Oe;for(et.traces||(et.traces=[]),Oe=0;Oe<ae.data.length;Oe++)pe=Qe[Oe],pe!=null&&(q=et.traces.indexOf(pe),q===-1&&(q=et.data.length,et.traces[q]=pe),et.data[q]=O.extendTrace(et.data[q],ae.data[Oe]))}return et},O.recomputeFrameHash=function(Se){for(var Ee=Se._transitionData._frameHash={},X=Se._transitionData._frames,Oe=0;Oe<X.length;Oe++){var Qe=X[Oe];Qe&&Qe.name&&(Ee[Qe.name]=Qe)}},O.extendObjectWithContainers=function(Se,Ee,X){var Oe,Qe,pe,q,ae,ve,Te,et,bt=u.extendDeepNoArrays({},Ee||{}),dr=u.expandObjectPaths(bt),Ol={};if(X&&X.length)for(pe=0;pe<X.length;pe++)Oe=u.nestedProperty(dr,X[pe]),Qe=Oe.get(),Qe===void 0?u.nestedProperty(Ol,X[pe]).set(null):(Oe.set(null),u.nestedProperty(Ol,X[pe]).set(Qe));if(Se=u.extendDeepNoArrays(Se||{},dr),X&&X.length){for(pe=0;pe<X.length;pe++)if(ae=u.nestedProperty(Ol,X[pe]),Te=ae.get(),!!Te){for(ve=u.nestedProperty(Se,X[pe]),et=ve.get(),Array.isArray(et)||(et=[],ve.set(et)),q=0;q<Te.length;q++){var Xl=Te[q];Xl===null?et[q]=null:et[q]=O.extendObjectWithContainers(et[q],Xl)}ve.set(et)}}return Se},O.dataArrayContainers=["transforms","dimensions"],O.layoutArrayContainers=y.layoutArrayContainers,O.extendTrace=function(Se,Ee){return O.extendObjectWithContainers(Se,Ee,O.dataArrayContainers)},O.extendLayout=function(Se,Ee){return O.extendObjectWithContainers(Se,Ee,O.layoutArrayContainers)},O.transition=function(Se,Ee,X,Oe,Qe,pe){var q={redraw:Qe.redraw},ae={},ve=[];return q.prepareFn=function(){for(var Te=Array.isArray(Ee)?Ee.length:0,et=Oe.slice(0,Te),bt=0;bt<et.length;bt++){var dr=et[bt],Ol=Se._fullData[dr],Xl=Ol._module;if(Xl){if(Xl.animatable){var Pp=Xl.basePlotModule.name;ae[Pp]||(ae[Pp]=[]),ae[Pp].push(dr)}Se.data[et[bt]]=O.extendTrace(Se.data[et[bt]],Ee[bt])}}var t0=u.expandObjectPaths(u.extendDeepNoArrays({},X)),Wp=/^[xy]axis[0-9]*$/;for(var $p in t0)Wp.test($p)&&delete t0[$p].range;O.extendLayout(Se.layout,t0),delete Se.calcdata,O.supplyDefaults(Se),O.doCalcdata(Se);var Lo=u.expandObjectPaths(X);if(Lo){var kl=Se._fullLayout._plots;for(var dt in kl){var yp=kl[dt],Bp=yp.xaxis,Jp=yp.yaxis,m0=Bp.range.slice(),s0=Jp.range.slice(),y0=null,M0=null,T0=null,G0=null;Array.isArray(Lo[Bp._name+".range"])?y0=Lo[Bp._name+".range"].slice():Array.isArray((Lo[Bp._name]||{}).range)&&(y0=Lo[Bp._name].range.slice()),Array.isArray(Lo[Jp._name+".range"])?M0=Lo[Jp._name+".range"].slice():Array.isArray((Lo[Jp._name]||{}).range)&&(M0=Lo[Jp._name].range.slice()),m0&&y0&&(Bp.r2l(m0[0])!==Bp.r2l(y0[0])||Bp.r2l(m0[1])!==Bp.r2l(y0[1]))&&(T0={xr0:m0,xr1:y0}),s0&&M0&&(Jp.r2l(s0[0])!==Jp.r2l(M0[0])||Jp.r2l(s0[1])!==Jp.r2l(M0[1]))&&(G0={yr0:s0,yr1:M0}),(T0||G0)&&ve.push(u.extendFlat({plotinfo:yp},T0,G0))}}return Promise.resolve()},q.runFn=function(Te){var et,bt=Se._fullLayout._basePlotModules,dr=ve.length,Ol;if(X)for(Ol=0;Ol<bt.length;Ol++)bt[Ol].transitionAxes&&bt[Ol].transitionAxes(Se,ve,pe,Te);dr?(et=u.extendFlat({},pe),et.duration=0,delete ae.cartesian):et=pe;for(var Xl in ae){var Pp=ae[Xl],t0=Se._fullData[Pp[0]]._module;t0.basePlotModule.plot(Se,Pp,et,Te)}},Ke(Se,pe,q)},O.transitionFromReact=function(Se,Ee,X,Oe){var Qe=Se._fullLayout,pe=Qe.transition,q={},ae=[];return q.prepareFn=function(){var ve=Qe._plots;q.redraw=!1,Ee.anim==="some"&&(q.redraw=!0),X.anim==="some"&&(q.redraw=!0);for(var Te in ve){var et=ve[Te],bt=et.xaxis,dr=et.yaxis,Ol=Oe[bt._name].range.slice(),Xl=Oe[dr._name].range.slice(),Pp=bt.range.slice(),t0=dr.range.slice();bt.setScale(),dr.setScale();var Wp=null,$p=null;(bt.r2l(Ol[0])!==bt.r2l(Pp[0])||bt.r2l(Ol[1])!==bt.r2l(Pp[1]))&&(Wp={xr0:Ol,xr1:Pp}),(dr.r2l(Xl[0])!==dr.r2l(t0[0])||dr.r2l(Xl[1])!==dr.r2l(t0[1]))&&($p={yr0:Xl,yr1:t0}),(Wp||$p)&&ae.push(u.extendFlat({plotinfo:et},Wp,$p))}return Promise.resolve()},q.runFn=function(ve){for(var Te=Se._fullData,et=Se._fullLayout,bt=et._basePlotModules,dr,Ol,Xl,Pp=[],t0=0;t0<Te.length;t0++)Pp.push(t0);function Wp(){if(Se._fullLayout)for(var Lo=0;Lo<bt.length;Lo++)bt[Lo].transitionAxes&&bt[Lo].transitionAxes(Se,ae,dr,ve)}function $p(){if(Se._fullLayout)for(var Lo=0;Lo<bt.length;Lo++)bt[Lo].plot(Se,Xl,Ol,ve)}ae.length&&Ee.anim?pe.ordering==="traces first"?(dr=u.extendFlat({},pe,{duration:0}),Xl=Pp,Ol=pe,setTimeout(Wp,pe.duration),$p()):(dr=pe,Xl=null,Ol=u.extendFlat({},pe,{duration:0}),setTimeout($p,dr.duration),Wp()):ae.length?(dr=pe,Wp()):Ee.anim&&(Xl=Pp,Ol=pe,$p())},Ke(Se,pe,q)};function Ke(Se,Ee,X){var Oe=!1;function Qe(bt){var dr=Promise.resolve();if(!bt)return dr;for(;bt.length;)dr=dr.then(bt.shift());return dr}function pe(bt){if(bt)for(;bt.length;)bt.shift()}function q(){return Se.emit("plotly_transitioning",[]),new Promise(function(bt){Se._transitioning=!0,Ee.duration>0&&(Se._transitioningWithDuration=!0),Se._transitionData._interruptCallbacks.push(function(){Oe=!0}),X.redraw&&Se._transitionData._interruptCallbacks.push(function(){return y.call("redraw",Se)}),Se._transitionData._interruptCallbacks.push(function(){Se.emit("plotly_transitioninterrupted",[])});var dr=0,Ol=0;function Xl(){return dr++,function(){Ol++,!Oe&&Ol===dr&&ae(bt)}}X.runFn(Xl),setTimeout(Xl())})}function ae(bt){if(Se._transitionData)return pe(Se._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(X.redraw)return y.call("redraw",Se)}).then(function(){Se._transitioning=!1,Se._transitioningWithDuration=!1,Se.emit("plotly_transitioned",[])}).then(bt)}function ve(){if(Se._transitionData)return Se._transitioning=!1,Qe(Se._transitionData._interruptCallbacks)}var Te=[O.previousPromises,ve,X.prepareFn,O.rehover,O.reselect,q],et=u.syncOrAsync(Te,Se);return(!et||!et.then)&&(et=Promise.resolve()),et.then(function(){return Se})}O.doCalcdata=function(Se,Ee){var X=D.list(Se),Oe=Se._fullData,Qe=Se._fullLayout,pe,q,ae,ve,Te=new Array(Oe.length),et=(Se.calcdata||[]).slice();for(Se.calcdata=Te,Qe._numBoxes=0,Qe._numViolins=0,Qe._violinScaleGroupStats={},Se._hmpixcount=0,Se._hmlumcount=0,Qe._piecolormap={},Qe._sunburstcolormap={},Qe._treemapcolormap={},Qe._iciclecolormap={},Qe._funnelareacolormap={},ae=0;ae<Oe.length;ae++)if(Array.isArray(Ee)&&Ee.indexOf(ae)===-1){Te[ae]=et[ae];continue}for(ae=0;ae<Oe.length;ae++)pe=Oe[ae],pe._arrayAttrs=b.findArrayAttributes(pe),pe._extremes={};var bt=Qe._subplots.polar||[];for(ae=0;ae<bt.length;ae++)X.push(Qe[bt[ae]].radialaxis,Qe[bt[ae]].angularaxis);for(var dr in Qe._colorAxes){var Ol=Qe[dr];Ol.cauto!==!1&&(delete Ol.cmin,delete Ol.cmax)}var Xl=!1;function Pp($p){if(pe=Oe[$p],q=pe._module,pe.visible===!0&&pe.transforms){if(q&&q.calc){var Lo=q.calc(Se,pe);Lo[0]&&Lo[0].t&&Lo[0].t._scene&&delete Lo[0].t._scene.dirty}for(ve=0;ve<pe.transforms.length;ve++){var kl=pe.transforms[ve];q=transformsRegistry[kl.type],q&&q.calcTransform&&(pe._hasCalcTransform=!0,Xl=!0,q.calcTransform(Se,pe,kl))}}}function t0($p,Lo){if(pe=Oe[$p],q=pe._module,!!q.isContainer===Lo){var kl=[];if(pe.visible===!0&&pe._length!==0){delete pe._indexToPoints;var dt=pe.transforms||[];for(ve=dt.length-1;ve>=0;ve--)if(dt[ve].enabled){pe._indexToPoints=dt[ve]._indexToPoints;break}q&&q.calc&&(kl=q.calc(Se,pe))}(!Array.isArray(kl)||!kl[0])&&(kl=[{x:M,y:M}]),kl[0].t||(kl[0].t={}),kl[0].trace=pe,Te[$p]=kl}}for(Ei(X,Oe,Qe),ae=0;ae<Oe.length;ae++)t0(ae,!0);for(ae=0;ae<Oe.length;ae++)Pp(ae);for(Xl&&Ei(X,Oe,Qe),ae=0;ae<Oe.length;ae++)t0(ae,!0);for(ae=0;ae<Oe.length;ae++)t0(ae,!1);vs(Se);var Wp=yi(X,Se);if(Wp.length){for(Qe._numBoxes=0,Qe._numViolins=0,ae=0;ae<Wp.length;ae++)t0(Wp[ae],!0);for(ae=0;ae<Wp.length;ae++)t0(Wp[ae],!1);vs(Se)}y.getComponentMethod("fx","calc")(Se),y.getComponentMethod("errorbars","calc")(Se)};var nt=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function yi(Se,Ee){var X=[],Oe,Qe,pe,q,ae;function ve(V0,um,Uo){var Tp=um._id.charAt(0);if(V0==="histogram2dcontour"){var Be=um._counterAxes[0],ft=D.getFromId(Ee,Be),mn=Tp==="x"||Be==="x"&&ft.type==="category",Bl=Tp==="y"||Be==="y"&&ft.type==="category";return function(Vl,Np){return Vl===0||Np===0||mn&&Vl===Uo[Np].length-1||Bl&&Np===Uo.length-1?-1:(Tp==="y"?Np:Vl)-1}}else return function(Vl,Np){return Tp==="y"?Np:Vl}}var Te={min:function(V0){return u.aggNums(Math.min,null,V0)},max:function(V0){return u.aggNums(Math.max,null,V0)},sum:function(V0){return u.aggNums(function(um,Uo){return um+Uo},null,V0)},total:function(V0){return u.aggNums(function(um,Uo){return um+Uo},null,V0)},mean:function(V0){return u.mean(V0)},"geometric mean":function(V0){return u.geometricMean(V0)},median:function(V0){return u.median(V0)}};function et(V0,um){return V0[1]-um[1]}function bt(V0,um){return um[1]-V0[1]}for(Oe=0;Oe<Se.length;Oe++){var dr=Se[Oe];if(dr.type==="category"){var Ol=dr.categoryorder.match(nt);if(Ol){var Xl=Ol[1],Pp=Ol[2],t0=dr._id.charAt(0),Wp=t0==="x",$p=[];for(Qe=0;Qe<dr._categories.length;Qe++)$p.push([dr._categories[Qe],[]]);for(Qe=0;Qe<dr._traceIndices.length;Qe++){var Lo=dr._traceIndices[Qe],kl=Ee._fullData[Lo];if(kl.visible===!0){var dt=kl.type;y.traceIs(kl,"histogram")&&(delete kl._xautoBinFinished,delete kl._yautoBinFinished);var yp=dt==="splom",Bp=dt==="scattergl",Jp=Ee.calcdata[Lo];for(pe=0;pe<Jp.length;pe++){var m0=Jp[pe],s0,y0;if(yp){var M0=kl._axesDim[dr._id];if(!Wp){var T0=kl._diag[M0][0];T0&&(dr=Ee._fullLayout[D.id2name(T0)])}var G0=m0.trace.dimensions[M0].values;for(q=0;q<G0.length;q++)for(s0=dr._categoriesMap[G0[q]],ae=0;ae<m0.trace.dimensions.length;ae++)if(ae!==M0){var h0=m0.trace.dimensions[ae];$p[s0][1].push(h0.values[q])}}else if(Bp){for(q=0;q<m0.t.x.length;q++)Wp?(s0=m0.t.x[q],y0=m0.t.y[q]):(s0=m0.t.y[q],y0=m0.t.x[q]),$p[s0][1].push(y0);m0.t&&m0.t._scene&&delete m0.t._scene.dirty}else if(m0.hasOwnProperty("z")){y0=m0.z;var W0=ve(kl.type,dr,y0);for(q=0;q<y0.length;q++)for(ae=0;ae<y0[q].length;ae++)s0=W0(ae,q),s0+1&&$p[s0][1].push(y0[q][ae])}else for(s0=m0.p,s0===void 0&&(s0=m0[t0]),y0=m0.s,y0===void 0&&(y0=m0.v),y0===void 0&&(y0=Wp?m0.y:m0.x),Array.isArray(y0)||(y0===void 0?y0=[]:y0=[y0]),q=0;q<y0.length;q++)$p[s0][1].push(y0[q])}}}dr._categoriesValue=$p;var rm=[];for(Qe=0;Qe<$p.length;Qe++)rm.push([$p[Qe][0],Te[Xl]($p[Qe][1])]);rm.sort(Pp==="descending"?bt:et),dr._categoriesAggregatedValue=rm,dr._initialCategories=rm.map(function(V0){return V0[0]}),X=X.concat(dr.sortByInitialCategories())}}}return X}function Ei(Se,Ee,X){var Oe={};function Qe(ve){ve.clearCalc(),ve.type==="multicategory"&&ve.setupMultiCategory(Ee),Oe[ve._id]=1}u.simpleMap(Se,Qe);for(var pe=X._axisMatchGroups||[],q=0;q<pe.length;q++)for(var ae in pe[q])Oe[ae]||Qe(X[D.id2name(ae)])}function vs(Se){var Ee=Se._fullLayout,X=Ee._visibleModules,Oe={},Qe,pe,q;for(pe=0;pe<X.length;pe++){var ae=X[pe],ve=ae.crossTraceCalc;if(ve){var Te=ae.basePlotModule.name;Oe[Te]?u.pushUnique(Oe[Te],ve):Oe[Te]=[ve]}}for(q in Oe){var et=Oe[q],bt=Ee._subplots[q];if(Array.isArray(bt))for(Qe=0;Qe<bt.length;Qe++){var dr=bt[Qe],Ol=q==="cartesian"?Ee._plots[dr]:Ee[dr];for(pe=0;pe<et.length;pe++)et[pe](Se,Ol,dr)}else for(pe=0;pe<et.length;pe++)et[pe](Se)}}O.rehover=function(Se){Se._fullLayout._rehover&&Se._fullLayout._rehover()},O.redrag=function(Se){Se._fullLayout._redrag&&Se._fullLayout._redrag()},O.reselect=function(Se){var Ee=Se._fullLayout,X=(Se.layout||{}).selections,Oe=Ee._previousSelections;Ee._previousSelections=X;var Qe=Ee._reselect||JSON.stringify(X)!==JSON.stringify(Oe);y.getComponentMethod("selections","reselect")(Se,Qe)},O.generalUpdatePerTraceModule=function(Se,Ee,X,Oe){var Qe=Ee.traceHash,pe={},q;for(q=0;q<X.length;q++){var ae=X[q],ve=ae[0].trace;ve.visible&&(pe[ve.type]=pe[ve.type]||[],pe[ve.type].push(ae))}for(var Te in Qe)if(!pe[Te]){var et=Qe[Te][0],bt=et[0].trace;bt.visible=!1,pe[Te]=[et]}for(var dr in pe){var Ol=pe[dr],Xl=Ol[0][0].trace._module;Xl.plot(Se,Ee,u.filterVisible(Ol),Oe)}Ee.traceHash=pe},O.plotBasePlot=function(Se,Ee,X,Oe,Qe){var pe=y.getModule(Se),q=F(Ee.calcdata,pe)[0];pe.plot(Ee,q,Oe,Qe)},O.cleanBasePlot=function(Se,Ee,X,Oe,Qe){var pe=Qe._has&&Qe._has(Se),q=X._has&&X._has(Se);pe&&!q&&Qe["_"+Se+"layer"].selectAll("g.trace").remove()}}),Hg=t(me=>{me.xmlns="http://www.w3.org/2000/xmlns/",me.svg="http://www.w3.org/2000/svg",me.xlink="http://www.w3.org/1999/xlink",me.svgAttrs={xmlns:me.svg,"xmlns:xlink":me.xlink}}),Q1=t((me,ue)=>{ue.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}}),kg=t(me=>{var ue=c(),g=Z(),s=g.strTranslate,h=Hg(),x=Q1().LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;me.convertToTspans=function(ce,ke,Pe){var tt=ce.text(),Ke=!ce.attr("data-notex")&&ke&&ke._context.typesetMath&&typeof MathJax<"u"&&tt.match(v),nt=ue.select(ce.node().parentNode);if(nt.empty())return;var yi=ce.attr("class")?ce.attr("class").split(" ")[0]:"text";yi+="-math",nt.selectAll("svg."+yi).remove(),nt.selectAll("g."+yi+"-group").remove(),ce.style("display",null).attr({"data-unformatted":tt,"data-math":"N"});function Ei(){nt.empty()||(yi=ce.attr("class")+"-math",nt.select("svg."+yi).remove()),ce.text("").style("white-space","pre");var vs=ge(ce.node(),tt);vs&&ce.style("pointer-events","all"),me.positionText(ce),Pe&&Pe.call(ce)}return Ke?(ke&&ke._promises||[]).push(new Promise(function(vs){ce.style("display","none");var Se=parseInt(ce.node().style.fontSize,10),Ee={fontSize:Se};k(Ke[2],Ee,function(X,Oe,Qe){nt.selectAll("svg."+yi).remove(),nt.selectAll("g."+yi+"-group").remove();var pe=X&&X.select("svg");if(!pe||!pe.node()){Ei(),vs();return}var q=nt.append("g").classed(yi+"-group",!0).attr({"pointer-events":"none","data-unformatted":tt,"data-math":"Y"});q.node().appendChild(pe.node()),Oe&&Oe.node()&&pe.node().insertBefore(Oe.node().cloneNode(!0),pe.node().firstChild);var ae=Qe.width,ve=Qe.height;pe.attr({class:yi,height:ve,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var Te=ce.node().style.fill||"black",et=pe.select("g");et.attr({fill:Te,stroke:Te});var bt=et.node().getBoundingClientRect(),dr=bt.width,Ol=bt.height;(dr>ae||Ol>ve)&&(pe.style("overflow","hidden"),bt=pe.node().getBoundingClientRect(),dr=bt.width,Ol=bt.height);var Xl=+ce.attr("x"),Pp=+ce.attr("y"),t0=Se||ce.node().getBoundingClientRect().height,Wp=-t0/4;if(yi[0]==="y")q.attr({transform:"rotate("+[-90,Xl,Pp]+")"+s(-dr/2,Wp-Ol/2)});else if(yi[0]==="l")Pp=Wp-Ol/2;else if(yi[0]==="a"&&yi.indexOf("atitle")!==0)Xl=0,Pp=Wp;else{var $p=ce.attr("text-anchor");Xl=Xl-dr*($p==="middle"?.5:$p==="end"?1:0),Pp=Pp+Wp-Ol/2}pe.attr({x:Xl,y:Pp}),Pe&&Pe.call(ce,q),vs(q)})})):Ei(),ce};var y=/(<|&lt;|&#60;)/g,b=/(>|&gt;|&#62;)/g;function T(ce){return ce.replace(y,"\\lt ").replace(b,"\\gt ")}var u=[["$","$"],["\\(","\\)"]];function k(ce,ke,Pe){var tt=parseInt((MathJax.version||"").split(".")[0]);if(tt!==2&&tt!==3){g.warn("No MathJax version:",MathJax.version);return}var Ke,nt,yi,Ei,vs=function(){return nt=g.extendDeepAll({},MathJax.Hub.config),yi=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:u},displayAlign:"left"})},Se=function(){nt=g.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=u},Ee=function(){if(Ke=MathJax.Hub.config.menuSettings.renderer,Ke!=="SVG")return MathJax.Hub.setRenderer("SVG")},X=function(){Ke=MathJax.config.startup.output,Ke!=="svg"&&(MathJax.config.startup.output="svg")},Oe=function(){var Te="math-output-"+g.randstr({},64);Ei=ue.select("body").append("div").attr({id:Te}).style({visibility:"hidden",position:"absolute","font-size":ke.fontSize+"px"}).text(T(ce));var et=Ei.node();return tt===2?MathJax.Hub.Typeset(et):MathJax.typeset([et])},Qe=function(){var Te=Ei.select(tt===2?".MathJax_SVG":".MathJax"),et=!Te.empty()&&Ei.select("svg").node();if(!et)g.log("There was an error in the tex syntax.",ce),Pe();else{var bt=et.getBoundingClientRect(),dr;tt===2?dr=ue.select("body").select("#MathJax_SVG_glyphs"):dr=Te.select("defs"),Pe(Te,dr,bt)}Ei.remove()},pe=function(){if(Ke!=="SVG")return MathJax.Hub.setRenderer(Ke)},q=function(){Ke!=="svg"&&(MathJax.config.startup.output=Ke)},ae=function(){return yi!==void 0&&(MathJax.Hub.processSectionDelay=yi),MathJax.Hub.Config(nt)},ve=function(){MathJax.config=nt};tt===2?MathJax.Hub.Queue(vs,Ee,Oe,Qe,pe,ae):tt===3&&(Se(),X(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Oe(),Qe(),q(),ve()}))}var M={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},D={sub:"0.3em",sup:"-0.6em"},B={sub:"-0.21em",sup:"0.42em"},P="​",N=["http:","https:","mailto:","",void 0,":"],z=me.NEWLINES=/(\r\n?|\n)/g,F=/(<[^<>]*>)/,w=/<(\/?)([^ >]*)(\s+(.*))?>/i,L=/<br(\s+.*)?>/i;me.BR_TAG_ALL=/<br(\s+.*)?>/gi;var O=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,H=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,W=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,Ce=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function he(ce,ke){if(!ce)return null;var Pe=ce.match(ke),tt=Pe&&(Pe[3]||Pe[4]);return tt&&fe(tt)}var le=/(^|;)\s*color:/;me.plainText=function(ce,ke){ke=ke||{};for(var Pe=ke.len!==void 0&&ke.len!==-1?ke.len:1/0,tt=ke.allowedTags!==void 0?ke.allowedTags:["br"],Ke="...",nt=Ke.length,yi=ce.split(F),Ei=[],vs="",Se=0,Ee=0;Ee<yi.length;Ee++){var X=yi[Ee],Oe=X.match(w),Qe=Oe&&Oe[2].toLowerCase();if(Qe)tt.indexOf(Qe)!==-1&&(Ei.push(X),vs=Qe);else{var pe=X.length;if(Se+pe<Pe)Ei.push(X),Se+=pe;else if(Se<Pe){var q=Pe-Se;vs&&(vs!=="br"||q<=nt||pe<=nt)&&Ei.pop(),Pe>nt?Ei.push(X.substr(0,q-nt)+Ke):Ei.push(X.substr(0,q));break}vs=""}}return Ei.join("")};var Y={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},Re=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function fe(ce){return ce.replace(Re,function(ke,Pe){var tt;return Pe.charAt(0)==="#"?tt=xe(Pe.charAt(1)==="x"?parseInt(Pe.substr(2),16):parseInt(Pe.substr(1),10)):tt=Y[Pe],tt||ke})}me.convertEntities=fe;function xe(ce){if(!(ce>1114111)){var ke=String.fromCodePoint;if(ke)return ke(ce);var Pe=String.fromCharCode;return ce<=65535?Pe(ce):Pe((ce>>10)+55232,ce%1024+56320)}}function ge(ce,ke){ke=ke.replace(z," ");var Pe=!1,tt=[],Ke,nt=-1;function yi(){nt++;var Ol=document.createElementNS(h.svg,"tspan");ue.select(Ol).attr({class:"line",dy:nt*x+"em"}),ce.appendChild(Ol),Ke=Ol;var Xl=tt;if(tt=[{node:Ol}],Xl.length>1)for(var Pp=1;Pp<Xl.length;Pp++)Ei(Xl[Pp])}function Ei(Ol){var Xl=Ol.type,Pp={},t0;if(Xl==="a"){t0="a";var Wp=Ol.target,$p=Ol.href,Lo=Ol.popup;$p&&(Pp={"xlink:xlink:show":Wp==="_blank"||Wp.charAt(0)!=="_"?"new":"replace",target:Wp,"xlink:xlink:href":$p},Lo&&(Pp.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Lo+'");return false;'))}else t0="tspan";Ol.style&&(Pp.style=Ol.style);var kl=document.createElementNS(h.svg,t0);if(Xl==="sup"||Xl==="sub"){vs(Ke,P),Ke.appendChild(kl);var dt=document.createElementNS(h.svg,"tspan");vs(dt,P),ue.select(dt).attr("dy",B[Xl]),Pp.dy=D[Xl],Ke.appendChild(kl),Ke.appendChild(dt)}else Ke.appendChild(kl);ue.select(kl).attr(Pp),Ke=Ol.node=kl,tt.push(Ol)}function vs(Ol,Xl){Ol.appendChild(document.createTextNode(Xl))}function Se(Ol){if(tt.length===1){g.log("Ignoring unexpected end tag </"+Ol+">.",ke);return}var Xl=tt.pop();Ol!==Xl.type&&g.log("Start tag <"+Xl.type+"> doesnt match end tag <"+Ol+">. Pretending it did match.",ke),Ke=tt[tt.length-1].node}var Ee=L.test(ke);Ee?yi():(Ke=ce,tt=[{node:ce}]);for(var X=ke.split(F),Oe=0;Oe<X.length;Oe++){var Qe=X[Oe],pe=Qe.match(w),q=pe&&pe[2].toLowerCase(),ae=M[q];if(q==="br")yi();else if(ae===void 0)vs(Ke,fe(Qe));else if(pe[1])Se(q);else{var ve=pe[4],Te={type:q},et=he(ve,O);if(et?(et=et.replace(le,"$1 fill:"),ae&&(et+=";"+ae)):ae&&(et=ae),et&&(Te.style=et),q==="a"){Pe=!0;var bt=he(ve,H);if(bt){var dr=ye(bt);dr&&(Te.href=dr,Te.target=he(ve,W)||"_blank",Te.popup=he(ve,Ce))}}Ei(Te)}}return Pe}function ye(ce){var ke=encodeURI(decodeURI(ce)),Pe=document.createElement("a"),tt=document.createElement("a");Pe.href=ce,tt.href=ke;var Ke=Pe.protocol,nt=tt.protocol;return N.indexOf(Ke)!==-1&&N.indexOf(nt)!==-1?ke:""}me.sanitizeHTML=function(ce){ce=ce.replace(z," ");for(var ke=document.createElement("p"),Pe=ke,tt=[],Ke=ce.split(F),nt=0;nt<Ke.length;nt++){var yi=Ke[nt],Ei=yi.match(w),vs=Ei&&Ei[2].toLowerCase();if(vs in M)if(Ei[1])tt.length&&(Pe=tt.pop());else{var Se=Ei[4],Ee=he(Se,O),X=Ee?{style:Ee}:{};if(vs==="a"){var Oe=he(Se,H);if(Oe){var Qe=ye(Oe);if(Qe){X.href=Qe;var pe=he(Se,W);pe&&(X.target=pe)}}}var q=document.createElement(vs);Pe.appendChild(q),ue.select(q).attr(X),Pe=q,tt.push(q)}else Pe.appendChild(document.createTextNode(fe(yi)))}var ae="innerHTML";return ke[ae]},me.lineCount=function(ce){return ce.selectAll("tspan.line").size()||1},me.positionText=function(ce,ke,Pe){return ce.each(function(){var tt=ue.select(this);function Ke(Ei,vs){return vs===void 0?(vs=tt.attr(Ei),vs===null&&(tt.attr(Ei,0),vs=0)):tt.attr(Ei,vs),vs}var nt=Ke("x",ke),yi=Ke("y",Pe);this.nodeName==="text"&&tt.selectAll("tspan.line").attr({x:nt,y:yi})})};function Ae(ce,ke,Pe){var tt=Pe.horizontalAlign,Ke=Pe.verticalAlign||"top",nt=ce.node().getBoundingClientRect(),yi=ke.node().getBoundingClientRect(),Ei,vs,Se;return Ke==="bottom"?vs=function(){return nt.bottom-Ei.height}:Ke==="middle"?vs=function(){return nt.top+(nt.height-Ei.height)/2}:vs=function(){return nt.top},tt==="right"?Se=function(){return nt.right-Ei.width}:tt==="center"?Se=function(){return nt.left+(nt.width-Ei.width)/2}:Se=function(){return nt.left},function(){Ei=this.node().getBoundingClientRect();var Ee=Se()-yi.left,X=vs()-yi.top,Oe=Pe.gd||{};if(Pe.gd){Oe._fullLayout._calcInverseTransform(Oe);var Qe=g.apply3DTransform(Oe._fullLayout._invTransform)(Ee,X);Ee=Qe[0],X=Qe[1]}return this.style({top:X+"px",left:Ee+"px","z-index":1e3}),this}}var Le="1px ";me.makeTextShadow=function(ce){var ke=Le,Pe=Le,tt=Le;return ke+Pe+tt+ce+", -"+ke+"-"+Pe+tt+ce+", "+ke+"-"+Pe+tt+ce+", -"+ke+Pe+tt+ce},me.makeEditable=function(ce,ke){var Pe=ke.gd,tt=ke.delegate,Ke=ue.dispatch("edit","input","cancel"),nt=tt||ce;if(ce.style({"pointer-events":tt?"none":"all"}),ce.size()!==1)throw new Error("boo");function yi(){vs(),ce.style({opacity:0});var Se=nt.attr("class"),Ee;Se?Ee="."+Se.split(" ")[0]+"-math-group":Ee="[class*=-math-group]",Ee&&ue.select(ce.node().parentNode).select(Ee).style({opacity:0})}function Ei(Se){var Ee=Se.node(),X=document.createRange();X.selectNodeContents(Ee);var Oe=window.getSelection();Oe.removeAllRanges(),Oe.addRange(X),Ee.focus()}function vs(){var Se=ue.select(Pe),Ee=Se.select(".svg-container"),X=Ee.append("div"),Oe=ce.node().style,Qe=parseFloat(Oe.fontSize||12),pe=ke.text;pe===void 0&&(pe=ce.attr("data-unformatted")),X.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Oe.fontFamily||"Arial","font-size":Qe,color:ke.fill||Oe.fill||"black",opacity:1,"background-color":ke.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Qe/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(pe).call(Ae(ce,Ee,ke)).on("blur",function(){Pe._editing=!1,ce.text(this.textContent).style({opacity:1});var q=ue.select(this).attr("class"),ae;q?ae="."+q.split(" ")[0]+"-math-group":ae="[class*=-math-group]",ae&&ue.select(ce.node().parentNode).select(ae).style({opacity:0});var ve=this.textContent;ue.select(this).transition().duration(0).remove(),ue.select(document).on("mouseup",null),Ke.edit.call(ce,ve)}).on("focus",function(){var q=this;Pe._editing=!0,ue.select(document).on("mouseup",function(){if(ue.event.target===q)return!1;document.activeElement===X.node()&&X.node().blur()})}).on("keyup",function(){ue.event.which===27?(Pe._editing=!1,ce.style({opacity:1}),ue.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Ke.cancel.call(ce,this.textContent)):(Ke.input.call(ce,this.textContent),ue.select(this).call(Ae(ce,Ee,ke)))}).on("keydown",function(){ue.event.which===13&&this.blur()}).call(Ei)}return ke.immediate?yi():nt.on("click",yi),ue.rebind(ce,Ke,"on")}}),eg=t((me,ue)=>{var g=c(),s=He(),h=A(),x=Z(),v=_r(),y=bp().isValid;function b(z,F,w){var L=F?x.nestedProperty(z,F).get()||{}:z,O=L[w||"color"];O&&O._inputArray&&(O=O._inputArray);var H=!1;if(x.isArrayOrTypedArray(O)){for(var W=0;W<O.length;W++)if(h(O[W])){H=!0;break}}return x.isPlainObject(L)&&(H||L.showscale===!0||h(L.cmin)&&h(L.cmax)||y(L.colorscale)||x.isPlainObject(L.colorbar))}var T=["showscale","autocolorscale","colorscale","reversescale","colorbar"],u=["min","max","mid","auto"];function k(z){var F=z._colorAx,w=F||z,L={},O,H,W;for(H=0;H<T.length;H++)W=T[H],L[W]=w[W];if(F)for(O="c",H=0;H<u.length;H++)W=u[H],L[W]=w["c"+W];else{var Ce;for(H=0;H<u.length;H++){if(W=u[H],Ce="c"+W,Ce in w){L[W]=w[Ce];continue}Ce="z"+W,Ce in w&&(L[W]=w[Ce])}O=Ce.charAt(0)}return L._sync=function(he,le){var Y=u.indexOf(he)!==-1?O+he:he;w[Y]=w["_"+Y]=le},L}function M(z){for(var F=k(z),w=F.min,L=F.max,O=F.reversescale?D(F.colorscale):F.colorscale,H=O.length,W=new Array(H),Ce=new Array(H),he=0;he<H;he++){var le=O[he];W[he]=w+le[0]*(L-w),Ce[he]=le[1]}return{domain:W,range:Ce}}function D(z){for(var F=z.length,w=new Array(F),L=F-1,O=0;L>=0;L--,O++){var H=z[L];w[O]=[1-H[0],H[1]]}return w}function B(z,F){F=F||{};for(var w=z.domain,L=z.range,O=L.length,H=new Array(O),W=0;W<O;W++){var Ce=s(L[W]).toRgb();H[W]=[Ce.r,Ce.g,Ce.b,Ce.a]}var he=g.scale.linear().domain(w).range(H).clamp(!0),le=F.noNumericCheck,Y=F.returnArray,Re;return le&&Y?Re=he:le?Re=function(fe){return N(he(fe))}:Y?Re=function(fe){return h(fe)?he(fe):s(fe).isValid()?fe:v.defaultLine}:Re=function(fe){return h(fe)?N(he(fe)):s(fe).isValid()?fe:v.defaultLine},Re.domain=he.domain,Re.range=function(){return L},Re}function P(z,F){return B(M(z),F)}function N(z){var F={r:z[0],g:z[1],b:z[2],a:z[3]};return s(F).toRgbString()}ue.exports={hasColorscale:b,extractOpts:k,extractScale:M,flipScale:D,makeColorScaleFunc:B,makeColorScaleFuncFromTrace:P}}),Iv=t((me,ue)=>{var g=e1(),s=g.FORMAT_LINK,h=g.DATE_FORMAT_LINK;function x(b,T){return{valType:"string",dflt:"",editType:"none",description:(T?v:y)("hover text",b)+["By default the values are formatted using "+(T?"generic number format":"`"+b+"axis.hoverformat`")+"."].join(" ")}}function v(b,T){return["Sets the "+b+" formatting rule"+(T?"for `"+T+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+s+"."].join(" ")}function y(b,T){return v(b,T)+[" And for dates see: "+h+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ue.exports={axisHoverFormat:x,descriptionOnlyNumbers:v,descriptionWithDates:y}}),jp=t((me,ue)=>{var g=Xe(),s=Sp(),h=r0().dash,x=Fe().extendFlat,v=Nm().templatedArray;_1().templateFormatStringDescription;var y=Iv().descriptionWithDates,b=C().ONEDAY,T=m1(),u=T.HOUR_PATTERN,k=T.WEEKDAY_PATTERN,M={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},D=x({},M,{values:M.values.slice().concat(["sync"])});function B(le){return{valType:"integer",min:0,dflt:le?5:0,editType:"ticks"}}var P={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},N={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},z={valType:"data_array",editType:"ticks"},F={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function w(le){var Y={valType:"number",min:0,editType:"ticks"};return le||(Y.dflt=5),Y}function L(le){var Y={valType:"number",min:0,editType:"ticks"};return le||(Y.dflt=1),Y}var O={valType:"color",dflt:s.defaultLine,editType:"ticks"},H={valType:"color",dflt:s.lightLine,editType:"ticks"};function W(le){var Y={valType:"number",min:0,editType:"ticks"};return le||(Y.dflt=1),Y}var Ce=x({},h,{editType:"ticks"}),he={valType:"boolean",editType:"ticks"};ue.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:s.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:g({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},modebardisable:{valType:"flaglist",flags:["autoscale","zoominout"],extras:["none"],dflt:"none",editType:"modebar"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[T.idRegex.x.toString(),T.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[T.idRegex.x.toString(),T.idRegex.y.toString()],editType:"calc"},rangebreaks:v("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[k,u,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:b},editType:"calc"}),tickmode:D,nticks:B(),tick0:P,dtick:N,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:z,ticktext:{valType:"data_array",editType:"ticks"},ticks:F,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:w(),tickwidth:L(),tickcolor:O,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:x({},h,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:g({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B","SI extended"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:y("tick label")},tickformatstops:v("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:y("hover text")},unifiedhovertitle:{text:{valType:"string",dflt:"",editType:"none"},editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:s.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:he,gridcolor:H,gridwidth:W(),griddash:Ce,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},zerolinelayer:{valType:"enumerated",values:["above traces","below traces"],dflt:"below traces",editType:"plot"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",T.idRegex.x.toString(),T.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",T.idRegex.x.toString(),T.idRegex.y.toString()],editType:"plot"},minor:{tickmode:M,nticks:B("minor"),tick0:P,dtick:N,tickvals:z,ticks:F,ticklen:w("minor"),tickwidth:L("minor"),tickcolor:O,gridcolor:H,gridwidth:W("minor"),griddash:Ce,showgrid:he,editType:"ticks"},minorloglabels:{valType:"enumerated",values:["small digits","complete","none"],dflt:"small digits",editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}}),f=t((me,ue)=>{var g=jp(),s=Xe(),h=Fe().extendFlat,x=vm().overrideAll;ue.exports=x({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:g.linecolor,outlinewidth:g.linewidth,bordercolor:g.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:g.minor.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:h({},g.ticks,{dflt:""}),ticklabeloverflow:h({},g.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,ticklabelstep:g.ticklabelstep,showticklabels:g.showticklabels,labelalias:g.labelalias,tickfont:s({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,minexponent:g.minexponent,showexponent:g.showexponent,title:{text:{valType:"string"},font:s({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")}),R=t((me,ue)=>{var g=f(),s=ne().counter,h=Eg(),x=bp().scales;h(x);function v(y){return"`"+y+"`"}ue.exports=function(y,b){y=y||"",b=b||{};var T=b.cLetter||"c";"onlyIfNumerical"in b&&b.onlyIfNumerical;var u="noScale"in b?b.noScale:y==="marker.line",k="showScaleDflt"in b?b.showScaleDflt:T==="z",M=typeof b.colorscaleDflt=="string"?x[b.colorscaleDflt]:null,D=b.editTypeOverride||"",B=y?y+".":"",P;"colorAttr"in b?(P=b.colorAttr,b.colorAttr):(P={z:"z",c:"color"}[T],""+v(B+P));var N=T+"auto",z=T+"min",F=T+"max",w=T+"mid",L={};L[z]=L[F]=void 0;var O={};O[N]=!1;var H={};return P==="color"&&(H.color={valType:"color",arrayOk:!0,editType:D||"style"},b.anim&&(H.color.anim=!0)),H[N]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:L},H[z]={valType:"number",dflt:null,editType:D||"plot",impliedEdits:O},H[F]={valType:"number",dflt:null,editType:D||"plot",impliedEdits:O},H[w]={valType:"number",dflt:null,editType:"calc",impliedEdits:L},H.colorscale={valType:"colorscale",editType:"calc",dflt:M,impliedEdits:{autocolorscale:!1}},H.autocolorscale={valType:"boolean",dflt:b.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},H.reversescale={valType:"boolean",dflt:!1,editType:"plot"},u||(H.showscale={valType:"boolean",dflt:k,editType:"calc"},H.colorbar=g),b.noColorAxis||(H.coloraxis={valType:"subplotid",regex:s("coloraxis"),dflt:null,editType:"calc"}),H}}),$=t((me,ue)=>{var g=Fe().extendFlat,s=R(),h=bp().scales;ue.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:h.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:h.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:h.RdBu,editType:"calc"}},coloraxis:g({_isSubplotObj:!0,editType:"calc"},s("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}}),Q=t((me,ue)=>{var g=Z();ue.exports=function(s){return g.isPlainObject(s.colorbar)}}),Ze=t(me=>{var ue=A(),g=Z(),s=C(),h=s.ONEDAY,x=s.ONEWEEK;me.dtick=function(v,y){var b=y==="log",T=y==="date",u=y==="category",k=T?h:1;if(!v)return k;if(ue(v))return v=Number(v),v<=0?k:u?Math.max(1,Math.round(v)):T?Math.max(.1,v):v;if(typeof v!="string"||!(T||b))return k;var M=v.charAt(0),D=v.substr(1);return D=ue(D)?Number(D):0,D<=0||!(T&&M==="M"&&D===Math.round(D)||b&&M==="L"||b&&M==="D"&&(D===1||D===2))?k:v},me.tick0=function(v,y,b,T){if(y==="date")return g.cleanDate(v,g.dateTick0(b,T%x===0?1:0));if(!(T==="D1"||T==="D2"))return ue(v)?Number(v):0}}),_e=t((me,ue)=>{var g=Ze(),s=Z().isArrayOrTypedArray,h=J().isTypedArraySpec,x=J().decodeTypedArraySpec;ue.exports=function(v,y,b,T,u){u||(u={});var k=u.isMinor,M=k?v.minor||{}:v,D=k?y.minor:y,B=k?"minor.":"";function P(W){var Ce=M[W];return h(Ce)&&(Ce=x(Ce)),Ce!==void 0?Ce:(D._template||{})[W]}var N=P("tick0"),z=P("dtick"),F=P("tickvals"),w=s(F)?"array":z?"linear":"auto",L=b(B+"tickmode",w);if(L==="auto"||L==="sync")b(B+"nticks");else if(L==="linear"){var O=D.dtick=g.dtick(z,T);D.tick0=g.tick0(N,T,y.calendar,O)}else if(T!=="multicategory"){var H=b(B+"tickvals");H===void 0?D.tickmode="auto":k||b("ticktext")}}}),it=t((me,ue)=>{var g=Z(),s=jp();ue.exports=function(h,x,v,y){var b=y.isMinor,T=b?h.minor||{}:h,u=b?x.minor:x,k=b?s.minor:s,M=b?"minor.":"",D=g.coerce2(T,u,k,"ticklen",b?(x.ticklen||5)*.6:void 0),B=g.coerce2(T,u,k,"tickwidth",b?x.tickwidth||1:void 0),P=g.coerce2(T,u,k,"tickcolor",(b?x.tickcolor:void 0)||u.color),N=v(M+"ticks",!b&&y.outerTicks||D||B||P?"outside":"");N||(delete u.ticklen,delete u.tickwidth,delete u.tickcolor)}}),lt=t((me,ue)=>{ue.exports=function(g){var s=["showexponent","showtickprefix","showticksuffix"],h=s.filter(function(v){return g[v]!==void 0}),x=function(v){return g[v]===g[h[0]]};if(h.every(x)||h.length===1)return g[h[0]]}}),Ye=t((me,ue)=>{var g=Z(),s=Nm();ue.exports=function(h,x,v){var y=v.name,b=v.inclusionAttr||"visible",T=x[y],u=g.isArrayOrTypedArray(h[y])?h[y]:[],k=x[y]=[],M=s.arrayTemplater(x,y,b),D,B;for(D=0;D<u.length;D++){var P=u[D];g.isPlainObject(P)?B=M.newItem(P):(B=M.newItem({}),B[b]=!1),B._index=D,B[b]!==!1&&v.handleItemDefaults(P,B,x,v),k.push(B)}var N=M.defaultItems();for(D=0;D<N.length;D++)B=N[D],B._index=k.length,v.handleItemDefaults({},B,x,v,{}),k.push(B);if(g.isArrayOrTypedArray(T)){var z=Math.min(T.length,k.length);for(D=0;D<z;D++)g.relinkPrivateKeys(k[D],T[D])}return k}}),Vt=t((me,ue)=>{var g=Z(),s=_r().contrast,h=jp(),x=lt(),v=Ye();ue.exports=function(b,T,u,k,M){M||(M={});var D=u("labelalias");g.isPlainObject(D)||delete T.labelalias;var B=x(b),P=u("showticklabels");if(P){M.noTicklabelshift||u("ticklabelshift"),M.noTicklabelstandoff||u("ticklabelstandoff");var N=M.font||{},z=T.color,F=T.ticklabelposition||"",w=F.indexOf("inside")!==-1?s(M.bgColor):z&&z!==h.color.dflt?z:N.color;if(g.coerceFont(u,"tickfont",N,{overrideDflt:{color:w}}),!M.noTicklabelstep&&k!=="multicategory"&&k!=="log"&&u("ticklabelstep"),!M.noAng){var L=u("tickangle");!M.noAutotickangles&&L==="auto"&&u("autotickangles")}if(k!=="category"){var O=u("tickformat");v(b,T,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:y}),T.tickformatstops.length||delete T.tickformatstops,!M.noExp&&!O&&k!=="date"&&(u("showexponent",B),u("exponentformat"),u("minexponent"),u("separatethousands"))}!M.noMinorloglabels&&k==="log"&&u("minorloglabels")}};function y(b,T){function u(M,D){return g.coerce(b,T,h.tickformatstops,M,D)}var k=u("enabled");k&&(u("dtickrange"),u("value"))}}),Ct=t((me,ue)=>{var g=lt();ue.exports=function(s,h,x,v,y){y||(y={});var b=y.tickSuffixDflt,T=g(s),u=x("tickprefix");u&&x("showtickprefix",T);var k=x("ticksuffix",b);k&&x("showticksuffix",T)}}),Nl=t((me,ue)=>{var g=Z(),s=Nm(),h=_e(),x=it(),v=Vt(),y=Ct(),b=f();ue.exports=function(T,u,k){var M=s.newContainer(u,"colorbar"),D=T.colorbar||{};function B(ce,ke){return g.coerce(D,M,b,ce,ke)}var P=k.margin||{t:0,b:0,l:0,r:0},N=k.width-P.l-P.r,z=k.height-P.t-P.b,F=B("orientation"),w=F==="v",L=B("thicknessmode");B("thickness",L==="fraction"?30/(w?N:z):30);var O=B("lenmode");B("len",O==="fraction"?1:w?z:N);var H=B("yref"),W=B("xref"),Ce=H==="paper",he=W==="paper",le,Y,Re,fe="left";w?(Re="middle",fe=he?"left":"right",le=he?1.02:1,Y=.5):(Re=Ce?"bottom":"top",fe="center",le=.5,Y=Ce?1.02:1),g.coerce(D,M,{x:{valType:"number",min:he?-2:0,max:he?3:1,dflt:le}},"x"),g.coerce(D,M,{y:{valType:"number",min:Ce?-2:0,max:Ce?3:1,dflt:Y}},"y"),B("xanchor",fe),B("xpad"),B("yanchor",Re),B("ypad"),g.noneOrAll(D,M,["x","y"]),B("outlinecolor"),B("outlinewidth"),B("bordercolor"),B("borderwidth"),B("bgcolor");var xe=g.coerce(D,M,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:w?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");B("ticklabeloverflow",xe.indexOf("inside")!==-1?"hide past domain":"hide past div"),h(D,M,B,"linear");var ge=k.font,ye={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:ge};xe.indexOf("inside")!==-1&&(ye.bgColor="black"),y(D,M,B,"linear",ye),v(D,M,B,"linear",ye),x(D,M,B,"linear",ye),B("title.text",k._dfltTitle.colorbar);var Ae=M.showticklabels?M.tickfont:ge,Le=g.extendFlat({},ge,{family:Ae.family,size:g.bigFont(Ae.size)});g.coerceFont(B,"title.font",Le),B("title.side",w?"top":"right")}}),ms=t((me,ue)=>{var g=A(),s=Z(),h=Q(),x=Nl(),v=bp().isValid,y=l1().traceIs;function b(T,u){var k=u.slice(0,u.length-1);return u?s.nestedProperty(T,k).get()||{}:T}ue.exports=function T(u,k,M,D,B){var P=B.prefix,N=B.cLetter,z="_module"in k,F=b(u,P),w=b(k,P),L=b(k._template||{},P)||{},O=function(){return delete u.coloraxis,delete k.coloraxis,T(u,k,M,D,B)};if(z){var H=M._colorAxes||{},W=D(P+"coloraxis");if(W){var Ce=y(k,"contour")&&s.nestedProperty(k,"contours.coloring").get()||"heatmap",he=H[W];he?(he[2].push(O),he[0]!==Ce&&(he[0]=!1,s.warn(["Ignoring coloraxis:",W,"setting","as it is linked to incompatible colorscales."].join(" ")))):H[W]=[Ce,k,[O]];return}}var le=F[N+"min"],Y=F[N+"max"],Re=g(le)&&g(Y)&&le<Y,fe=D(P+N+"auto",!Re);fe?D(P+N+"mid"):(D(P+N+"min"),D(P+N+"max"));var xe=F.colorscale,ge=L.colorscale,ye;if(xe!==void 0&&(ye=!v(xe)),ge!==void 0&&(ye=!v(ge)),D(P+"autocolorscale",ye),D(P+"colorscale"),D(P+"reversescale"),P!=="marker.line."){var Ae;P&&z&&(Ae=h(F));var Le=D(P+"showscale",Ae);Le&&(P&&L&&(w._template=L),x(F,w,M))}}}),Si=t((me,ue)=>{var g=Z(),s=Nm(),h=$(),x=ms();ue.exports=function(v,y){function b(N,z){return g.coerce(v,y,h,N,z)}b("colorscale.sequential"),b("colorscale.sequentialminus"),b("colorscale.diverging");var T=y._colorAxes,u,k;function M(N,z){return g.coerce(u,k,h.coloraxis,N,z)}for(var D in T){var B=T[D];if(B[0])u=v[D]||{},k=s.newContainer(y,D,"coloraxis"),k._name=D,x(u,k,y,M,{prefix:"",cLetter:"c"});else{for(var P=0;P<B[2].length;P++)B[2][P]();delete y._colorAxes[D]}}}}),_s=t((me,ue)=>{var g=Z(),s=eg().hasColorscale,h=eg().extractOpts;ue.exports=function(x,v){function y(B,P){var N=B["_"+P];N!==void 0&&(B[P]=N)}function b(B,P){var N=P.container?g.nestedProperty(B,P.container).get():B;if(N)if(N.coloraxis)N._colorAx=v[N.coloraxis];else{var z=h(N),F=z.auto;(F||z.min===void 0)&&y(N,P.min),(F||z.max===void 0)&&y(N,P.max),z.autocolorscale&&y(N,"colorscale")}}for(var T=0;T<x.length;T++){var u=x[T],k=u._module.colorbar;if(k)if(Array.isArray(k))for(var M=0;M<k.length;M++)b(u,k[M]);else b(u,k);s(u,"marker.line")&&b(u,{container:"marker.line",min:"cmin",max:"cmax"})}for(var D in v._colorAxes)b(v[D],{min:"cmin",max:"cmax"})}}),gs=t((me,ue)=>{var g=A(),s=Z(),h=eg().extractOpts;ue.exports=function(x,v,y){var b=x._fullLayout,T=y.vals,u=y.containerStr,k=u?s.nestedProperty(v,u).get():v,M=h(k),D=M.auto!==!1,B=M.min,P=M.max,N=M.mid,z=function(){return s.aggNums(Math.min,null,T)},F=function(){return s.aggNums(Math.max,null,T)};if(B===void 0?B=z():D&&(k._colorAx&&g(B)?B=Math.min(B,z()):B=z()),P===void 0?P=F():D&&(k._colorAx&&g(P)?P=Math.max(P,F()):P=F()),D&&N!==void 0&&(P-N>N-B?B=N-(P-N):P-N<N-B&&(P=N+(N-B))),B===P&&(B-=.5,P+=.5),M._sync("min",B),M._sync("max",P),M.autocolorscale){var w;B*P<0?w=b.colorscale.diverging:B>=0?w=b.colorscale.sequential:w=b.colorscale.sequentialminus,M._sync("colorscale",w)}}}),Yl=t((me,ue)=>{var g=bp(),s=eg();ue.exports={moduleType:"component",name:"colorscale",attributes:R(),layoutAttributes:$(),supplyLayoutDefaults:Si(),handleDefaults:ms(),crossTraceDefaults:_s(),calc:gs(),scales:g.scales,defaultScale:g.defaultScale,getScale:g.get,isValidScale:g.isValid,hasColorscale:s.hasColorscale,extractOpts:s.extractOpts,extractScale:s.extractScale,flipScale:s.flipScale,makeColorScaleFunc:s.makeColorScaleFunc,makeColorScaleFuncFromTrace:s.makeColorScaleFuncFromTrace}}),Dp=t((me,ue)=>{var g=Z(),s=J().isTypedArraySpec;ue.exports={hasLines:function(h){return h.visible&&h.mode&&h.mode.indexOf("lines")!==-1},hasMarkers:function(h){return h.visible&&(h.mode&&h.mode.indexOf("markers")!==-1||h.type==="splom")},hasText:function(h){return h.visible&&h.mode&&h.mode.indexOf("text")!==-1},isBubble:function(h){var x=h.marker;return g.isPlainObject(x)&&(g.isArrayOrTypedArray(x.size)||s(x.size))}}}),Op=t((me,ue)=>{var g=A();ue.exports=function(s,h){h||(h=2);var x=s.marker,v=x.sizeref||1,y=x.sizemin||0,b=x.sizemode==="area"?function(T){return Math.sqrt(T/v)}:function(T){return T/v};return function(T){var u=b(T/h);return g(u)&&u>0?Math.max(u,y):0}}}),e0=t(me=>{var ue=Z();me.getSubplot=function(y){return y.subplot||y.xaxis+y.yaxis||y.geo},me.isTraceInSubplots=function(y,b){if(y.type==="splom"){for(var T=y.xaxes||[],u=y.yaxes||[],k=0;k<T.length;k++)for(var M=0;M<u.length;M++)if(b.indexOf(T[k]+u[M])!==-1)return!0;return!1}return b.indexOf(me.getSubplot(y))!==-1},me.flat=function(y,b){for(var T=new Array(y.length),u=0;u<y.length;u++)T[u]=b;return T},me.p2c=function(y,b){for(var T=new Array(y.length),u=0;u<y.length;u++)T[u]=y[u].p2c(b);return T},me.getDistanceFunction=function(y,b,T,u){return y==="closest"?u||me.quadrature(b,T):y.charAt(0)==="x"?b:T},me.getClosest=function(y,b,T){if(T.index!==!1)T.index>=0&&T.index<y.length?T.distance=0:T.index=!1;else for(var u=1/0,k=y.length,M=0;M<k;M++)u=b(y[M]),u<=T.distance&&(T.index=M,T.distance=u);return T},me.inbox=function(y,b,T){return y*b<0||y===0?T:1/0},me.quadrature=function(y,b){return function(T){var u=y(T),k=b(T);return Math.sqrt(u*u+k*k)}},me.makeEventData=function(y,b,T){var u="index"in y?y.index:y.pointNumber,k={data:b._input,fullData:b,curveNumber:b.index,pointNumber:u};if(b._indexToPoints){var M=b._indexToPoints[u];M.length===1?k.pointIndex=M[0]:k.pointIndices=M}else k.pointIndex=u;return b._module.eventData?k=b._module.eventData(k,y,b,T,u):("xVal"in y?k.x=y.xVal:"x"in y&&(k.x=y.x),"yVal"in y?k.y=y.yVal:"y"in y&&(k.y=y.y),y.xa&&(k.xaxis=y.xa),y.ya&&(k.yaxis=y.ya),y.zLabelVal!==void 0&&(k.z=y.zLabelVal)),me.appendArrayPointValue(k,b,u),k},me.appendArrayPointValue=function(y,b,T){var u=b._arrayAttrs;if(u)for(var k=0;k<u.length;k++){var M=u[k],D=s(M);if(y[D]===void 0){var B=ue.nestedProperty(b,M).get(),P=h(B,T);P!==void 0&&(y[D]=P)}}},me.appendArrayMultiPointValues=function(y,b,T){var u=b._arrayAttrs;if(u)for(var k=0;k<u.length;k++){var M=u[k],D=s(M);if(y[D]===void 0){for(var B=ue.nestedProperty(b,M).get(),P=new Array(T.length),N=0;N<T.length;N++)P[N]=h(B,T[N]);y[D]=P}}};var g={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function s(y){return g[y]||y}function h(y,b){if(Array.isArray(b)){if(Array.isArray(y)&&Array.isArray(y[b[0]]))return y[b[0]][b[1]]}else return y[b]}var x={x:!0,y:!0},v={"x unified":!0,"y unified":!0};me.isUnifiedHover=function(y){return typeof y!="string"?!1:!!v[y]},me.isXYhover=function(y){return typeof y!="string"?!1:!!x[y]}}),Xp=t((me,ue)=>{ue.exports=h;var g={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function h(y){var b=[];return y.replace(s,function(T,u,k){var M=u.toLowerCase();for(k=v(k),M=="m"&&k.length>2&&(b.push([u].concat(k.splice(0,2))),M="l",u=u=="m"?"l":"L");;){if(k.length==g[M])return k.unshift(u),b.push(k);if(k.length<g[M])throw new Error("malformed path data");b.push([u].concat(k.splice(0,g[M])))}}),b}var x=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function v(y){var b=y.match(x);return b?b.map(Number):[]}}),_0=t((me,ue)=>{var g=Xp(),s=function(N,z){return z?Math.round(N*(z=Math.pow(10,z)))/z:Math.round(N)},h="M0,0Z",x=Math.sqrt(2),v=Math.sqrt(3),y=Math.PI,b=Math.cos,T=Math.sin;ue.exports={circle:{n:0,f:function(N,z,F){if(u(z))return h;var w=s(N,2),L="M"+w+",0A"+w+","+w+" 0 1,1 0,-"+w+"A"+w+","+w+" 0 0,1 "+w+",0Z";return F?P(z,F,L):L}},square:{n:1,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M"+w+","+w+"H-"+w+"V-"+w+"H"+w+"Z")}},diamond:{n:2,f:function(N,z,F){if(u(z))return h;var w=s(N*1.3,2);return P(z,F,"M"+w+",0L0,"+w+"L-"+w+",0L0,-"+w+"Z")}},cross:{n:3,f:function(N,z,F){if(u(z))return h;var w=s(N*.4,2),L=s(N*1.2,2);return P(z,F,"M"+L+","+w+"H"+w+"V"+L+"H-"+w+"V"+w+"H-"+L+"V-"+w+"H-"+w+"V-"+L+"H"+w+"V-"+w+"H"+L+"Z")}},x:{n:4,f:function(N,z,F){if(u(z))return h;var w=s(N*.8/x,2),L="l"+w+","+w,O="l"+w+",-"+w,H="l-"+w+",-"+w,W="l-"+w+","+w;return P(z,F,"M0,"+w+L+O+H+O+H+W+H+W+L+W+L+"Z")}},"triangle-up":{n:5,f:function(N,z,F){if(u(z))return h;var w=s(N*2/v,2),L=s(N/2,2),O=s(N,2);return P(z,F,"M-"+w+","+L+"H"+w+"L0,-"+O+"Z")}},"triangle-down":{n:6,f:function(N,z,F){if(u(z))return h;var w=s(N*2/v,2),L=s(N/2,2),O=s(N,2);return P(z,F,"M-"+w+",-"+L+"H"+w+"L0,"+O+"Z")}},"triangle-left":{n:7,f:function(N,z,F){if(u(z))return h;var w=s(N*2/v,2),L=s(N/2,2),O=s(N,2);return P(z,F,"M"+L+",-"+w+"V"+w+"L-"+O+",0Z")}},"triangle-right":{n:8,f:function(N,z,F){if(u(z))return h;var w=s(N*2/v,2),L=s(N/2,2),O=s(N,2);return P(z,F,"M-"+L+",-"+w+"V"+w+"L"+O+",0Z")}},"triangle-ne":{n:9,f:function(N,z,F){if(u(z))return h;var w=s(N*.6,2),L=s(N*1.2,2);return P(z,F,"M-"+L+",-"+w+"H"+w+"V"+L+"Z")}},"triangle-se":{n:10,f:function(N,z,F){if(u(z))return h;var w=s(N*.6,2),L=s(N*1.2,2);return P(z,F,"M"+w+",-"+L+"V"+w+"H-"+L+"Z")}},"triangle-sw":{n:11,f:function(N,z,F){if(u(z))return h;var w=s(N*.6,2),L=s(N*1.2,2);return P(z,F,"M"+L+","+w+"H-"+w+"V-"+L+"Z")}},"triangle-nw":{n:12,f:function(N,z,F){if(u(z))return h;var w=s(N*.6,2),L=s(N*1.2,2);return P(z,F,"M-"+w+","+L+"V-"+w+"H"+L+"Z")}},pentagon:{n:13,f:function(N,z,F){if(u(z))return h;var w=s(N*.951,2),L=s(N*.588,2),O=s(-N,2),H=s(N*-.309,2),W=s(N*.809,2);return P(z,F,"M"+w+","+H+"L"+L+","+W+"H-"+L+"L-"+w+","+H+"L0,"+O+"Z")}},hexagon:{n:14,f:function(N,z,F){if(u(z))return h;var w=s(N,2),L=s(N/2,2),O=s(N*v/2,2);return P(z,F,"M"+O+",-"+L+"V"+L+"L0,"+w+"L-"+O+","+L+"V-"+L+"L0,-"+w+"Z")}},hexagon2:{n:15,f:function(N,z,F){if(u(z))return h;var w=s(N,2),L=s(N/2,2),O=s(N*v/2,2);return P(z,F,"M-"+L+","+O+"H"+L+"L"+w+",0L"+L+",-"+O+"H-"+L+"L-"+w+",0Z")}},octagon:{n:16,f:function(N,z,F){if(u(z))return h;var w=s(N*.924,2),L=s(N*.383,2);return P(z,F,"M-"+L+",-"+w+"H"+L+"L"+w+",-"+L+"V"+L+"L"+L+","+w+"H-"+L+"L-"+w+","+L+"V-"+L+"Z")}},star:{n:17,f:function(N,z,F){if(u(z))return h;var w=N*1.4,L=s(w*.225,2),O=s(w*.951,2),H=s(w*.363,2),W=s(w*.588,2),Ce=s(-w,2),he=s(w*-.309,2),le=s(w*.118,2),Y=s(w*.809,2),Re=s(w*.382,2);return P(z,F,"M"+L+","+he+"H"+O+"L"+H+","+le+"L"+W+","+Y+"L0,"+Re+"L-"+W+","+Y+"L-"+H+","+le+"L-"+O+","+he+"H-"+L+"L0,"+Ce+"Z")}},hexagram:{n:18,f:function(N,z,F){if(u(z))return h;var w=s(N*.66,2),L=s(N*.38,2),O=s(N*.76,2);return P(z,F,"M-"+O+",0l-"+L+",-"+w+"h"+O+"l"+L+",-"+w+"l"+L+","+w+"h"+O+"l-"+L+","+w+"l"+L+","+w+"h-"+O+"l-"+L+","+w+"l-"+L+",-"+w+"h-"+O+"Z")}},"star-triangle-up":{n:19,f:function(N,z,F){if(u(z))return h;var w=s(N*v*.8,2),L=s(N*.8,2),O=s(N*1.6,2),H=s(N*4,2),W="A "+H+","+H+" 0 0 1 ";return P(z,F,"M-"+w+","+L+W+w+","+L+W+"0,-"+O+W+"-"+w+","+L+"Z")}},"star-triangle-down":{n:20,f:function(N,z,F){if(u(z))return h;var w=s(N*v*.8,2),L=s(N*.8,2),O=s(N*1.6,2),H=s(N*4,2),W="A "+H+","+H+" 0 0 1 ";return P(z,F,"M"+w+",-"+L+W+"-"+w+",-"+L+W+"0,"+O+W+w+",-"+L+"Z")}},"star-square":{n:21,f:function(N,z,F){if(u(z))return h;var w=s(N*1.1,2),L=s(N*2,2),O="A "+L+","+L+" 0 0 1 ";return P(z,F,"M-"+w+",-"+w+O+"-"+w+","+w+O+w+","+w+O+w+",-"+w+O+"-"+w+",-"+w+"Z")}},"star-diamond":{n:22,f:function(N,z,F){if(u(z))return h;var w=s(N*1.4,2),L=s(N*1.9,2),O="A "+L+","+L+" 0 0 1 ";return P(z,F,"M-"+w+",0"+O+"0,"+w+O+w+",0"+O+"0,-"+w+O+"-"+w+",0Z")}},"diamond-tall":{n:23,f:function(N,z,F){if(u(z))return h;var w=s(N*.7,2),L=s(N*1.4,2);return P(z,F,"M0,"+L+"L"+w+",0L0,-"+L+"L-"+w+",0Z")}},"diamond-wide":{n:24,f:function(N,z,F){if(u(z))return h;var w=s(N*1.4,2),L=s(N*.7,2);return P(z,F,"M0,"+L+"L"+w+",0L0,-"+L+"L-"+w+",0Z")}},hourglass:{n:25,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M"+w+","+w+"H-"+w+"L"+w+",-"+w+"H-"+w+"Z")},noDot:!0},bowtie:{n:26,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M"+w+","+w+"V-"+w+"L-"+w+","+w+"V-"+w+"Z")},noDot:!0},"circle-cross":{n:27,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M0,"+w+"V-"+w+"M"+w+",0H-"+w+"M"+w+",0A"+w+","+w+" 0 1,1 0,-"+w+"A"+w+","+w+" 0 0,1 "+w+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(N,z,F){if(u(z))return h;var w=s(N,2),L=s(N/x,2);return P(z,F,"M"+L+","+L+"L-"+L+",-"+L+"M"+L+",-"+L+"L-"+L+","+L+"M"+w+",0A"+w+","+w+" 0 1,1 0,-"+w+"A"+w+","+w+" 0 0,1 "+w+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M0,"+w+"V-"+w+"M"+w+",0H-"+w+"M"+w+","+w+"H-"+w+"V-"+w+"H"+w+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M"+w+","+w+"L-"+w+",-"+w+"M"+w+",-"+w+"L-"+w+","+w+"M"+w+","+w+"H-"+w+"V-"+w+"H"+w+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(N,z,F){if(u(z))return h;var w=s(N*1.3,2);return P(z,F,"M"+w+",0L0,"+w+"L-"+w+",0L0,-"+w+"ZM0,-"+w+"V"+w+"M-"+w+",0H"+w)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(N,z,F){if(u(z))return h;var w=s(N*1.3,2),L=s(N*.65,2);return P(z,F,"M"+w+",0L0,"+w+"L-"+w+",0L0,-"+w+"ZM-"+L+",-"+L+"L"+L+","+L+"M-"+L+","+L+"L"+L+",-"+L)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(N,z,F){if(u(z))return h;var w=s(N*1.4,2);return P(z,F,"M0,"+w+"V-"+w+"M"+w+",0H-"+w)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M"+w+","+w+"L-"+w+",-"+w+"M"+w+",-"+w+"L-"+w+","+w)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(N,z,F){if(u(z))return h;var w=s(N*1.2,2),L=s(N*.85,2);return P(z,F,"M0,"+w+"V-"+w+"M"+w+",0H-"+w+"M"+L+","+L+"L-"+L+",-"+L+"M"+L+",-"+L+"L-"+L+","+L)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(N,z,F){if(u(z))return h;var w=s(N/2,2),L=s(N,2);return P(z,F,"M"+w+","+L+"V-"+L+"M"+(w-L)+",-"+L+"V"+L+"M"+L+","+w+"H-"+L+"M-"+L+","+(w-L)+"H"+L)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(N,z,F){if(u(z))return h;var w=s(N*1.2,2),L=s(N*1.6,2),O=s(N*.8,2);return P(z,F,"M-"+w+","+O+"L0,0M"+w+","+O+"L0,0M0,-"+L+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(N,z,F){if(u(z))return h;var w=s(N*1.2,2),L=s(N*1.6,2),O=s(N*.8,2);return P(z,F,"M-"+w+",-"+O+"L0,0M"+w+",-"+O+"L0,0M0,"+L+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(N,z,F){if(u(z))return h;var w=s(N*1.2,2),L=s(N*1.6,2),O=s(N*.8,2);return P(z,F,"M"+O+","+w+"L0,0M"+O+",-"+w+"L0,0M-"+L+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(N,z,F){if(u(z))return h;var w=s(N*1.2,2),L=s(N*1.6,2),O=s(N*.8,2);return P(z,F,"M-"+O+","+w+"L0,0M-"+O+",-"+w+"L0,0M"+L+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(N,z,F){if(u(z))return h;var w=s(N*1.4,2);return P(z,F,"M"+w+",0H-"+w)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(N,z,F){if(u(z))return h;var w=s(N*1.4,2);return P(z,F,"M0,"+w+"V-"+w)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M"+w+",-"+w+"L-"+w+","+w)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(N,z,F){if(u(z))return h;var w=s(N,2);return P(z,F,"M"+w+","+w+"L-"+w+",-"+w)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(N,z,F){if(u(z))return h;var w=s(N,2),L=s(N*2,2);return P(z,F,"M0,0L-"+w+","+L+"H"+w+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(N,z,F){if(u(z))return h;var w=s(N,2),L=s(N*2,2);return P(z,F,"M0,0L-"+w+",-"+L+"H"+w+"Z")},noDot:!0},"arrow-left":{n:47,f:function(N,z,F){if(u(z))return h;var w=s(N*2,2),L=s(N,2);return P(z,F,"M0,0L"+w+",-"+L+"V"+L+"Z")},noDot:!0},"arrow-right":{n:48,f:function(N,z,F){if(u(z))return h;var w=s(N*2,2),L=s(N,2);return P(z,F,"M0,0L-"+w+",-"+L+"V"+L+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(N,z,F){if(u(z))return h;var w=s(N,2),L=s(N*2,2);return P(z,F,"M-"+w+",0H"+w+"M0,0L-"+w+","+L+"H"+w+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(N,z,F){if(u(z))return h;var w=s(N,2),L=s(N*2,2);return P(z,F,"M-"+w+",0H"+w+"M0,0L-"+w+",-"+L+"H"+w+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(N,z,F){if(u(z))return h;var w=s(N*2,2),L=s(N,2);return P(z,F,"M0,-"+L+"V"+L+"M0,0L"+w+",-"+L+"V"+L+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(N,z,F){if(u(z))return h;var w=s(N*2,2),L=s(N,2);return P(z,F,"M0,-"+L+"V"+L+"M0,0L-"+w+",-"+L+"V"+L+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(N,z,F){if(u(z))return h;var w=y/2.5,L=2*N*b(w),O=2*N*T(w);return P(z,F,"M0,0L"+-L+","+O+"L"+L+","+O+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(N,z,F){if(u(z))return h;var w=y/4,L=2*N*b(w),O=2*N*T(w);return P(z,F,"M0,0L"+-L+","+O+"A "+2*N+","+2*N+" 0 0 1 "+L+","+O+"Z")},backoff:.4,noDot:!0}};function u(N){return N===null}var k,M,D,B;function P(N,z,F){if((!N||N%360===0)&&!z)return F;if(D===N&&B===z&&k===F)return M;D=N,B=z,k=F;function w(ye,Ae){var Le=b(ye),ce=T(ye),ke=Ae[0],Pe=Ae[1]+(z||0);return[ke*Le-Pe*ce,ke*ce+Pe*Le]}for(var L=N/180*y,O=0,H=0,W=g(F),Ce="",he=0;he<W.length;he++){var le=W[he],Y=le[0],Re=O,fe=H;if(Y==="M"||Y==="L")O=+le[1],H=+le[2];else if(Y==="m"||Y==="l")O+=+le[1],H+=+le[2];else if(Y==="H")O=+le[1];else if(Y==="h")O+=+le[1];else if(Y==="V")H=+le[1];else if(Y==="v")H+=+le[1];else if(Y==="A"){O=+le[1],H=+le[2];var xe=w(L,[+le[6],+le[7]]);le[6]=xe[0],le[7]=xe[1],le[3]=+le[3]+N}(Y==="H"||Y==="V")&&(Y="L"),(Y==="h"||Y==="v")&&(Y="l"),(Y==="m"||Y==="l")&&(O-=Re,H-=fe);var ge=w(L,[O,H]);(Y==="H"||Y==="V")&&(Y="L"),(Y==="M"||Y==="L"||Y==="m"||Y==="l")&&(le[1]=ge[0],le[2]=ge[1]),le[0]=Y,Ce+=le[0]+le.slice(1).join(",")}return M=Ce,Ce}}),D0=t((me,ue)=>{var g=c(),s=Z(),h=s.numberFormat,x=A(),v=He(),y=l1(),b=_r(),T=Yl(),u=s.strTranslate,k=kg(),M=Hg(),D=Q1(),B=D.LINE_SPACING,P=xs().DESELECTDIM,N=Dp(),z=Op(),F=e0().appendArrayPointValue,w=ue.exports={};w.font=function(Lo,kl){var dt=kl.variant,yp=kl.style,Bp=kl.weight,Jp=kl.color,m0=kl.size,s0=kl.family,y0=kl.shadow,M0=kl.lineposition,T0=kl.textcase;s0&&Lo.style("font-family",s0),m0+1&&Lo.style("font-size",m0+"px"),Jp&&Lo.call(b.fill,Jp),Bp&&Lo.style("font-weight",Bp),yp&&Lo.style("font-style",yp),dt&&Lo.style("font-variant",dt),T0&&Lo.style("text-transform",L(H(T0))),y0&&Lo.style("text-shadow",y0==="auto"?k.makeTextShadow(b.contrast(Jp)):L(y0)),M0&&Lo.style("text-decoration-line",L(W(M0)))};function L(Lo){return Lo==="none"?void 0:Lo}var O={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function H(Lo){return O[Lo]}function W(Lo){return Lo.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}w.setPosition=function(Lo,kl,dt){Lo.attr("x",kl).attr("y",dt)},w.setSize=function(Lo,kl,dt){Lo.attr("width",kl).attr("height",dt)},w.setRect=function(Lo,kl,dt,yp,Bp){Lo.call(w.setPosition,kl,dt).call(w.setSize,yp,Bp)},w.translatePoint=function(Lo,kl,dt,yp){var Bp=dt.c2p(Lo.x),Jp=yp.c2p(Lo.y);if(x(Bp)&&x(Jp)&&kl.node())kl.node().nodeName==="text"?kl.attr("x",Bp).attr("y",Jp):kl.attr("transform",u(Bp,Jp));else return!1;return!0},w.translatePoints=function(Lo,kl,dt){Lo.each(function(yp){var Bp=g.select(this);w.translatePoint(yp,Bp,kl,dt)})},w.hideOutsideRangePoint=function(Lo,kl,dt,yp,Bp,Jp){kl.attr("display",dt.isPtWithinRange(Lo,Bp)&&yp.isPtWithinRange(Lo,Jp)?null:"none")},w.hideOutsideRangePoints=function(Lo,kl){if(kl._hasClipOnAxisFalse){var dt=kl.xaxis,yp=kl.yaxis;Lo.each(function(Bp){var Jp=Bp[0].trace,m0=Jp.xcalendar,s0=Jp.ycalendar,y0=y.traceIs(Jp,"bar-like")?".bartext":".point,.textpoint";Lo.selectAll(y0).each(function(M0){w.hideOutsideRangePoint(M0,g.select(this),dt,yp,m0,s0)})})}},w.crispRound=function(Lo,kl,dt){return!kl||!x(kl)?dt||0:Lo._context.staticPlot?kl:kl<1?1:Math.round(kl)},w.singleLineStyle=function(Lo,kl,dt,yp,Bp){kl.style("fill","none");var Jp=(((Lo||[])[0]||{}).trace||{}).line||{},m0=dt||Jp.width||0,s0=Bp||Jp.dash||"";b.stroke(kl,yp||Jp.color),w.dashLine(kl,s0,m0)},w.lineGroupStyle=function(Lo,kl,dt,yp){Lo.style("fill","none").each(function(Bp){var Jp=(((Bp||[])[0]||{}).trace||{}).line||{},m0=kl||Jp.width||0,s0=yp||Jp.dash||"";g.select(this).call(b.stroke,dt||Jp.color).call(w.dashLine,s0,m0)})},w.dashLine=function(Lo,kl,dt){dt=+dt||0,kl=w.dashStyle(kl,dt),Lo.style({"stroke-dasharray":kl,"stroke-width":dt+"px"})},w.dashStyle=function(Lo,kl){kl=+kl||1;var dt=Math.max(kl,3);return Lo==="solid"?Lo="":Lo==="dot"?Lo=dt+"px,"+dt+"px":Lo==="dash"?Lo=3*dt+"px,"+3*dt+"px":Lo==="longdash"?Lo=5*dt+"px,"+5*dt+"px":Lo==="dashdot"?Lo=3*dt+"px,"+dt+"px,"+dt+"px,"+dt+"px":Lo==="longdashdot"&&(Lo=5*dt+"px,"+2*dt+"px,"+dt+"px,"+2*dt+"px"),Lo};function Ce(Lo,kl,dt,yp){var Bp=kl.fillpattern,Jp=kl.fillgradient,m0=w.getPatternAttr,s0=Bp&&(m0(Bp.shape,0,"")||m0(Bp.path,0,""));if(s0){var y0=m0(Bp.bgcolor,0,null),M0=m0(Bp.fgcolor,0,null),T0=Bp.fgopacity,G0=m0(Bp.size,0,8),h0=m0(Bp.solidity,0,.3),W0=kl.uid;w.pattern(Lo,"point",dt,W0,s0,G0,h0,void 0,Bp.fillmode,y0,M0,T0)}else if(Jp&&Jp.type!=="none"){var rm=Jp.type,V0="scatterfill-"+kl.uid;if(yp&&(V0="legendfill-"+kl.uid),!yp&&(Jp.start!==void 0||Jp.stop!==void 0)){var um,Uo;rm==="horizontal"?(um={x:Jp.start,y:0},Uo={x:Jp.stop,y:0}):rm==="vertical"&&(um={x:0,y:Jp.start},Uo={x:0,y:Jp.stop}),um.x=kl._xA.c2p(um.x===void 0?kl._extremes.x.min[0].val:um.x,!0),um.y=kl._yA.c2p(um.y===void 0?kl._extremes.y.min[0].val:um.y,!0),Uo.x=kl._xA.c2p(Uo.x===void 0?kl._extremes.x.max[0].val:Uo.x,!0),Uo.y=kl._yA.c2p(Uo.y===void 0?kl._extremes.y.max[0].val:Uo.y,!0),Lo.call(ge,dt,V0,"linear",Jp.colorscale,"fill",um,Uo,!0,!1)}else rm==="horizontal"&&(rm=rm+"reversed"),Lo.call(w.gradient,dt,V0,rm,Jp.colorscale,"fill")}else kl.fillcolor&&Lo.call(b.fill,kl.fillcolor)}w.singleFillStyle=function(Lo,kl){var dt=g.select(Lo.node()),yp=dt.data(),Bp=((yp[0]||[])[0]||{}).trace||{};Ce(Lo,Bp,kl,!1)},w.fillGroupStyle=function(Lo,kl,dt){Lo.style("stroke-width",0).each(function(yp){var Bp=g.select(this);yp[0].trace&&Ce(Bp,yp[0].trace,kl,dt)})};var he=_0();w.symbolNames=[],w.symbolFuncs=[],w.symbolBackOffs=[],w.symbolNeedLines={},w.symbolNoDot={},w.symbolNoFill={},w.symbolList=[],Object.keys(he).forEach(function(Lo){var kl=he[Lo],dt=kl.n;w.symbolList.push(dt,String(dt),Lo,dt+100,String(dt+100),Lo+"-open"),w.symbolNames[dt]=Lo,w.symbolFuncs[dt]=kl.f,w.symbolBackOffs[dt]=kl.backoff||0,kl.needLine&&(w.symbolNeedLines[dt]=!0),kl.noDot?w.symbolNoDot[dt]=!0:w.symbolList.push(dt+200,String(dt+200),Lo+"-dot",dt+300,String(dt+300),Lo+"-open-dot"),kl.noFill&&(w.symbolNoFill[dt]=!0)});var le=w.symbolNames.length,Y="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";w.symbolNumber=function(Lo){if(x(Lo))Lo=+Lo;else if(typeof Lo=="string"){var kl=0;Lo.indexOf("-open")>0&&(kl=100,Lo=Lo.replace("-open","")),Lo.indexOf("-dot")>0&&(kl+=200,Lo=Lo.replace("-dot","")),Lo=w.symbolNames.indexOf(Lo),Lo>=0&&(Lo+=kl)}return Lo%100>=le||Lo>=400?0:Math.floor(Math.max(Lo,0))};function Re(Lo,kl,dt,yp){var Bp=Lo%100;return w.symbolFuncs[Bp](kl,dt,yp)+(Lo>=200?Y:"")}var fe=h("~f"),xe={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};w.gradient=function(Lo,kl,dt,yp,Bp,Jp){var m0=xe[yp];return ge(Lo,kl,dt,m0.type,Bp,Jp,m0.start,m0.stop,!1,m0.reversed)};function ge(Lo,kl,dt,yp,Bp,Jp,m0,s0,y0,M0){var T0=Bp.length,G0;yp==="linear"?G0={node:"linearGradient",attrs:{x1:m0.x,y1:m0.y,x2:s0.x,y2:s0.y,gradientUnits:y0?"userSpaceOnUse":"objectBoundingBox"},reversed:M0}:yp==="radial"&&(G0={node:"radialGradient",reversed:M0});for(var h0=new Array(T0),W0=0;W0<T0;W0++)G0.reversed?h0[T0-1-W0]=[fe((1-Bp[W0][0])*100),Bp[W0][1]]:h0[W0]=[fe(Bp[W0][0]*100),Bp[W0][1]];var rm=kl._fullLayout,V0="g"+rm._uid+"-"+dt,um=rm._defs.select(".gradients").selectAll("#"+V0).data([yp+h0.join(";")],s.identity);um.exit().remove(),um.enter().append(G0.node).each(function(){var Uo=g.select(this);G0.attrs&&Uo.attr(G0.attrs),Uo.attr("id",V0);var Tp=Uo.selectAll("stop").data(h0);Tp.exit().remove(),Tp.enter().append("stop"),Tp.each(function(Be){var ft=v(Be[1]);g.select(this).attr({offset:Be[0]+"%","stop-color":b.tinyRGB(ft),"stop-opacity":ft.getAlpha()})})}),Lo.style(Jp,Qe(V0,kl)).style(Jp+"-opacity",null),Lo.classed("gradient_filled",!0)}w.pattern=function(Lo,kl,dt,yp,Bp,Jp,m0,s0,y0,M0,T0,G0){var h0=kl==="legend";s0&&(y0==="overlay"?(M0=s0,T0=b.contrast(M0)):(M0=void 0,T0=s0));var W0=dt._fullLayout,rm="p"+W0._uid+"-"+yp,V0,um,Uo=function(R0,k0,N0,lm,Im){return lm+(Im-lm)*(R0-k0)/(N0-k0)},Tp,Be,ft,mn,Bl={},Vl=v(T0),Np=b.tinyRGB(Vl),Up=Vl.getAlpha(),Qp=G0*Up;switch(Bp){case"/":V0=Jp*Math.sqrt(2),um=Jp*Math.sqrt(2),Tp="M-"+V0/4+","+um/4+"l"+V0/2+",-"+um/2+"M0,"+um+"L"+V0+",0M"+V0/4*3+","+um/4*5+"l"+V0/2+",-"+um/2,Be=m0*Jp,mn="path",Bl={d:Tp,opacity:Qp,stroke:Np,"stroke-width":Be+"px"};break;case"\\":V0=Jp*Math.sqrt(2),um=Jp*Math.sqrt(2),Tp="M"+V0/4*3+",-"+um/4+"l"+V0/2+","+um/2+"M0,0L"+V0+","+um+"M-"+V0/4+","+um/4*3+"l"+V0/2+","+um/2,Be=m0*Jp,mn="path",Bl={d:Tp,opacity:Qp,stroke:Np,"stroke-width":Be+"px"};break;case"x":V0=Jp*Math.sqrt(2),um=Jp*Math.sqrt(2),Tp="M-"+V0/4+","+um/4+"l"+V0/2+",-"+um/2+"M0,"+um+"L"+V0+",0M"+V0/4*3+","+um/4*5+"l"+V0/2+",-"+um/2+"M"+V0/4*3+",-"+um/4+"l"+V0/2+","+um/2+"M0,0L"+V0+","+um+"M-"+V0/4+","+um/4*3+"l"+V0/2+","+um/2,Be=Jp-Jp*Math.sqrt(1-m0),mn="path",Bl={d:Tp,opacity:Qp,stroke:Np,"stroke-width":Be+"px"};break;case"|":V0=Jp,um=Jp,mn="path",Tp="M"+V0/2+",0L"+V0/2+","+um,Be=m0*Jp,mn="path",Bl={d:Tp,opacity:Qp,stroke:Np,"stroke-width":Be+"px"};break;case"-":V0=Jp,um=Jp,mn="path",Tp="M0,"+um/2+"L"+V0+","+um/2,Be=m0*Jp,mn="path",Bl={d:Tp,opacity:Qp,stroke:Np,"stroke-width":Be+"px"};break;case"+":V0=Jp,um=Jp,mn="path",Tp="M"+V0/2+",0L"+V0/2+","+um+"M0,"+um/2+"L"+V0+","+um/2,Be=Jp-Jp*Math.sqrt(1-m0),mn="path",Bl={d:Tp,opacity:Qp,stroke:Np,"stroke-width":Be+"px"};break;case".":V0=Jp,um=Jp,m0<Math.PI/4?ft=Math.sqrt(m0*Jp*Jp/Math.PI):ft=Uo(m0,Math.PI/4,1,Jp/2,Jp/Math.sqrt(2)),mn="circle",Bl={cx:V0/2,cy:um/2,r:ft,opacity:Qp,fill:Np};break;default:V0=Jp,um=Jp,mn="path",Bl={d:Bp,opacity:Qp,fill:Np};break}var Zp=[Bp||"noSh",M0||"noBg",T0||"noFg",Jp,m0].join(";"),Kp=W0._defs.select(".patterns").selectAll("#"+rm).data([Zp],s.identity);Kp.exit().remove(),Kp.enter().append("pattern").each(function(){var R0=g.select(this);if(R0.attr({id:rm,width:V0+"px",height:um+"px",patternUnits:"userSpaceOnUse",patternTransform:h0?"scale(0.8)":""}),M0){var k0=v(M0),N0=b.tinyRGB(k0),lm=k0.getAlpha(),Im=R0.selectAll("rect").data([0]);Im.exit().remove(),Im.enter().append("rect").attr({width:V0+"px",height:um+"px",fill:N0,"fill-opacity":lm})}var u1=R0.selectAll(mn).data([0]);u1.exit().remove(),u1.enter().append(mn).attr(Bl)}),Lo.style("fill",Qe(rm,dt)).style("fill-opacity",null),Lo.classed("pattern_filled",!0)},w.initGradients=function(Lo){var kl=Lo._fullLayout,dt=s.ensureSingle(kl._defs,"g","gradients");dt.selectAll("linearGradient,radialGradient").remove(),g.select(Lo).selectAll(".gradient_filled").classed("gradient_filled",!1)},w.initPatterns=function(Lo){var kl=Lo._fullLayout,dt=s.ensureSingle(kl._defs,"g","patterns");dt.selectAll("pattern").remove(),g.select(Lo).selectAll(".pattern_filled").classed("pattern_filled",!1)},w.getPatternAttr=function(Lo,kl,dt){return Lo&&s.isArrayOrTypedArray(Lo)?kl<Lo.length?Lo[kl]:dt:Lo},w.pointStyle=function(Lo,kl,dt,yp){if(Lo.size()){var Bp=w.makePointStyleFns(kl);Lo.each(function(Jp){w.singlePointStyle(Jp,g.select(this),kl,Bp,dt,yp)})}},w.singlePointStyle=function(Lo,kl,dt,yp,Bp,Jp){var m0=dt.marker,s0=m0.line;if(Jp&&Jp.i>=0&&Lo.i===void 0&&(Lo.i=Jp.i),kl.style("opacity",yp.selectedOpacityFn?yp.selectedOpacityFn(Lo):Lo.mo===void 0?m0.opacity:Lo.mo),yp.ms2mrc){var y0;Lo.ms==="various"||m0.size==="various"?y0=3:y0=yp.ms2mrc(Lo.ms),Lo.mrc=y0,yp.selectedSizeFn&&(y0=Lo.mrc=yp.selectedSizeFn(Lo));var M0=w.symbolNumber(Lo.mx||m0.symbol)||0;Lo.om=M0%200>=100;var T0=$p(Lo,dt),G0=ae(Lo,dt);kl.attr("d",Re(M0,y0,T0,G0))}var h0=!1,W0,rm,V0;if(Lo.so)V0=s0.outlierwidth,rm=s0.outliercolor,W0=m0.outliercolor;else{var um=(s0||{}).width;V0=(Lo.mlw+1||um+1||(Lo.trace?(Lo.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Lo?rm=Lo.mlcc=yp.lineScale(Lo.mlc):s.isArrayOrTypedArray(s0.color)?rm=b.defaultLine:rm=s0.color,s.isArrayOrTypedArray(m0.color)&&(W0=b.defaultLine,h0=!0),"mc"in Lo?W0=Lo.mcc=yp.markerScale(Lo.mc):W0=m0.color||m0.colors||"rgba(0,0,0,0)",yp.selectedColorFn&&(W0=yp.selectedColorFn(Lo))}if(Lo.om)kl.call(b.stroke,W0).style({"stroke-width":(V0||1)+"px",fill:"none"});else{kl.style("stroke-width",(Lo.isBlank?0:V0)+"px");var Uo=m0.gradient,Tp=Lo.mgt;Tp?h0=!0:Tp=Uo&&Uo.type,s.isArrayOrTypedArray(Tp)&&(Tp=Tp[0],xe[Tp]||(Tp=0));var Be=m0.pattern,ft=w.getPatternAttr,mn=Be&&(ft(Be.shape,Lo.i,"")||ft(Be.path,Lo.i,""));if(Tp&&Tp!=="none"){var Bl=Lo.mgc;Bl?h0=!0:Bl=Uo.color;var Vl=dt.uid;h0&&(Vl+="-"+Lo.i),w.gradient(kl,Bp,Vl,Tp,[[0,Bl],[1,W0]],"fill")}else if(mn){var Np=!1,Up=Be.fgcolor;!Up&&Jp&&Jp.color&&(Up=Jp.color,Np=!0);var Qp=ft(Up,Lo.i,Jp&&Jp.color||null),Zp=ft(Be.bgcolor,Lo.i,null),Kp=Be.fgopacity,R0=ft(Be.size,Lo.i,8),k0=ft(Be.solidity,Lo.i,.3);Np=Np||Lo.mcc||s.isArrayOrTypedArray(Be.shape)||s.isArrayOrTypedArray(Be.path)||s.isArrayOrTypedArray(Be.bgcolor)||s.isArrayOrTypedArray(Be.fgcolor)||s.isArrayOrTypedArray(Be.size)||s.isArrayOrTypedArray(Be.solidity);var N0=dt.uid;Np&&(N0+="-"+Lo.i),w.pattern(kl,"point",Bp,N0,mn,R0,k0,Lo.mcc,Be.fillmode,Zp,Qp,Kp)}else s.isArrayOrTypedArray(W0)?b.fill(kl,W0[Lo.i]):b.fill(kl,W0);V0&&b.stroke(kl,rm)}},w.makePointStyleFns=function(Lo){var kl={},dt=Lo.marker;return kl.markerScale=w.tryColorscale(dt,""),kl.lineScale=w.tryColorscale(dt,"line"),y.traceIs(Lo,"symbols")&&(kl.ms2mrc=N.isBubble(Lo)?z(Lo):function(){return(dt.size||6)/2}),Lo.selectedpoints&&s.extendFlat(kl,w.makeSelectedPointStyleFns(Lo)),kl},w.makeSelectedPointStyleFns=function(Lo){var kl={},dt=Lo.selected||{},yp=Lo.unselected||{},Bp=Lo.marker||{},Jp=dt.marker||{},m0=yp.marker||{},s0=Bp.opacity,y0=Jp.opacity,M0=m0.opacity,T0=y0!==void 0,G0=M0!==void 0;(s.isArrayOrTypedArray(s0)||T0||G0)&&(kl.selectedOpacityFn=function(ft){var mn=ft.mo===void 0?Bp.opacity:ft.mo;return ft.selected?T0?y0:mn:G0?M0:P*mn});var h0=Bp.color,W0=Jp.color,rm=m0.color;(W0||rm)&&(kl.selectedColorFn=function(ft){var mn=ft.mcc||h0;return ft.selected?W0||mn:rm||mn});var V0=Bp.size,um=Jp.size,Uo=m0.size,Tp=um!==void 0,Be=Uo!==void 0;return y.traceIs(Lo,"symbols")&&(Tp||Be)&&(kl.selectedSizeFn=function(ft){var mn=ft.mrc||V0/2;return ft.selected?Tp?um/2:mn:Be?Uo/2:mn}),kl},w.makeSelectedTextStyleFns=function(Lo){var kl={},dt=Lo.selected||{},yp=Lo.unselected||{},Bp=Lo.textfont||{},Jp=dt.textfont||{},m0=yp.textfont||{},s0=Bp.color,y0=Jp.color,M0=m0.color;return kl.selectedTextColorFn=function(T0){var G0=T0.tc||s0;return T0.selected?y0||G0:M0||(y0?G0:b.addOpacity(G0,P))},kl},w.selectedPointStyle=function(Lo,kl){if(!(!Lo.size()||!kl.selectedpoints)){var dt=w.makeSelectedPointStyleFns(kl),yp=kl.marker||{},Bp=[];dt.selectedOpacityFn&&Bp.push(function(Jp,m0){Jp.style("opacity",dt.selectedOpacityFn(m0))}),dt.selectedColorFn&&Bp.push(function(Jp,m0){b.fill(Jp,dt.selectedColorFn(m0))}),dt.selectedSizeFn&&Bp.push(function(Jp,m0){var s0=m0.mx||yp.symbol||0,y0=dt.selectedSizeFn(m0);Jp.attr("d",Re(w.symbolNumber(s0),y0,$p(m0,kl),ae(m0,kl))),m0.mrc2=y0}),Bp.length&&Lo.each(function(Jp){for(var m0=g.select(this),s0=0;s0<Bp.length;s0++)Bp[s0](m0,Jp)})}},w.tryColorscale=function(Lo,kl){var dt=kl?s.nestedProperty(Lo,kl).get():Lo;if(dt){var yp=dt.color;if((dt.colorscale||dt._colorAx)&&s.isArrayOrTypedArray(yp))return T.makeColorScaleFuncFromTrace(dt)}return s.identity};var ye={start:1,end:-1,middle:0,bottom:1,top:-1};function Ae(Lo,kl,dt,yp,Bp){var Jp=g.select(Lo.node().parentNode),m0=kl.indexOf("top")!==-1?"top":kl.indexOf("bottom")!==-1?"bottom":"middle",s0=kl.indexOf("left")!==-1?"end":kl.indexOf("right")!==-1?"start":"middle",y0=yp?yp/.8+1:0,M0=(k.lineCount(Lo)-1)*B+1,T0=ye[s0]*y0,G0=dt*.75+ye[m0]*y0+(ye[m0]-1)*M0*dt/2;Lo.attr("text-anchor",s0),Bp||Jp.attr("transform",u(T0,G0))}function Le(Lo,kl){var dt=Lo.ts||kl.textfont.size;return x(dt)&&dt>0?dt:0}w.textPointStyle=function(Lo,kl,dt){if(Lo.size()){var yp;if(kl.selectedpoints){var Bp=w.makeSelectedTextStyleFns(kl);yp=Bp.selectedTextColorFn}var Jp=kl.texttemplate,m0=dt._fullLayout;Lo.each(function(s0){var y0=g.select(this),M0=Jp?s.extractOption(s0,kl,"txt","texttemplate"):s.extractOption(s0,kl,"tx","text");if(!M0&&M0!==0){y0.remove();return}if(Jp){var T0=kl._module.formatLabels,G0=T0?T0(s0,kl,m0):{},h0={};F(h0,kl,s0.i);var W0=kl._meta||{};M0=s.texttemplateString(M0,G0,m0._d3locale,h0,s0,W0)}var rm=s0.tp||kl.textposition,V0=Le(s0,kl),um=yp?yp(s0):s0.tc||kl.textfont.color;y0.call(w.font,{family:s0.tf||kl.textfont.family,weight:s0.tw||kl.textfont.weight,style:s0.ty||kl.textfont.style,variant:s0.tv||kl.textfont.variant,textcase:s0.tC||kl.textfont.textcase,lineposition:s0.tE||kl.textfont.lineposition,shadow:s0.tS||kl.textfont.shadow,size:V0,color:um}).text(M0).call(k.convertToTspans,dt).call(Ae,rm,V0,s0.mrc)})}},w.selectedTextStyle=function(Lo,kl){if(!(!Lo.size()||!kl.selectedpoints)){var dt=w.makeSelectedTextStyleFns(kl);Lo.each(function(yp){var Bp=g.select(this),Jp=dt.selectedTextColorFn(yp),m0=yp.tp||kl.textposition,s0=Le(yp,kl);b.fill(Bp,Jp);var y0=y.traceIs(kl,"bar-like");Ae(Bp,m0,s0,yp.mrc2||yp.mrc,y0)})}};var ce=.5;w.smoothopen=function(Lo,kl){if(Lo.length<3)return"M"+Lo.join("L");var dt="M"+Lo[0],yp=[],Bp;for(Bp=1;Bp<Lo.length-1;Bp++)yp.push(yi(Lo[Bp-1],Lo[Bp],Lo[Bp+1],kl));for(dt+="Q"+yp[0][0]+" "+Lo[1],Bp=2;Bp<Lo.length-1;Bp++)dt+="C"+yp[Bp-2][1]+" "+yp[Bp-1][0]+" "+Lo[Bp];return dt+="Q"+yp[Lo.length-3][1]+" "+Lo[Lo.length-1],dt},w.smoothclosed=function(Lo,kl){if(Lo.length<3)return"M"+Lo.join("L")+"Z";var dt="M"+Lo[0],yp=Lo.length-1,Bp=[yi(Lo[yp],Lo[0],Lo[1],kl)],Jp;for(Jp=1;Jp<yp;Jp++)Bp.push(yi(Lo[Jp-1],Lo[Jp],Lo[Jp+1],kl));for(Bp.push(yi(Lo[yp-1],Lo[yp],Lo[0],kl)),Jp=1;Jp<=yp;Jp++)dt+="C"+Bp[Jp-1][1]+" "+Bp[Jp][0]+" "+Lo[Jp];return dt+="C"+Bp[yp][1]+" "+Bp[0][0]+" "+Lo[0]+"Z",dt};var ke,Pe;function tt(Lo,kl,dt){return dt&&(Lo=Se(Lo)),kl?nt(Lo[1]):Ke(Lo[0])}function Ke(Lo){var kl=g.round(Lo,2);return ke=kl,kl}function nt(Lo){var kl=g.round(Lo,2);return Pe=kl,kl}function yi(Lo,kl,dt,yp){var Bp=Lo[0]-kl[0],Jp=Lo[1]-kl[1],m0=dt[0]-kl[0],s0=dt[1]-kl[1],y0=Math.pow(Bp*Bp+Jp*Jp,ce/2),M0=Math.pow(m0*m0+s0*s0,ce/2),T0=(M0*M0*Bp-y0*y0*m0)*yp,G0=(M0*M0*Jp-y0*y0*s0)*yp,h0=3*M0*(y0+M0),W0=3*y0*(y0+M0);return[[Ke(kl[0]+(h0&&T0/h0)),nt(kl[1]+(h0&&G0/h0))],[Ke(kl[0]-(W0&&T0/W0)),nt(kl[1]-(W0&&G0/W0))]]}var Ei={hv:function(Lo,kl,dt){return"H"+Ke(kl[0])+"V"+tt(kl,1,dt)},vh:function(Lo,kl,dt){return"V"+nt(kl[1])+"H"+tt(kl,0,dt)},hvh:function(Lo,kl,dt){return"H"+Ke((Lo[0]+kl[0])/2)+"V"+nt(kl[1])+"H"+tt(kl,0,dt)},vhv:function(Lo,kl,dt){return"V"+nt((Lo[1]+kl[1])/2)+"H"+Ke(kl[0])+"V"+tt(kl,1,dt)}},vs=function(Lo,kl,dt){return"L"+tt(kl,0,dt)+","+tt(kl,1,dt)};w.steps=function(Lo){var kl=Ei[Lo]||vs;return function(dt){for(var yp="M"+Ke(dt[0][0])+","+nt(dt[0][1]),Bp=dt.length,Jp=1;Jp<Bp;Jp++)yp+=kl(dt[Jp-1],dt[Jp],Jp===Bp-1);return yp}};function Se(Lo,kl){var dt=Lo.backoff,yp=Lo.trace,Bp=Lo.d,Jp=Lo.i;if(dt&&yp&&yp.marker&&yp.marker.angle%360===0&&yp.line&&yp.line.shape!=="spline"){var m0=s.isArrayOrTypedArray(dt),s0=Lo,y0=kl?kl[0]:ke||0,M0=kl?kl[1]:Pe||0,T0=s0[0],G0=s0[1],h0=T0-y0,W0=G0-M0,rm=Math.atan2(W0,h0),V0=m0?dt[Jp]:dt;if(V0==="auto"){var um=s0.i;yp.type==="scatter"&&um--;var Uo=s0.marker,Tp=Uo.symbol;s.isArrayOrTypedArray(Tp)&&(Tp=Tp[um]);var Be=Uo.size;s.isArrayOrTypedArray(Be)&&(Be=Be[um]),V0=Uo?w.symbolBackOffs[w.symbolNumber(Tp)]*Be:0,V0+=w.getMarkerStandoff(Bp[um],yp)||0}var ft=T0-V0*Math.cos(rm),mn=G0-V0*Math.sin(rm);(ft<=T0&&ft>=y0||ft>=T0&&ft<=y0)&&(mn<=G0&&mn>=M0||mn>=G0&&mn<=M0)&&(Lo=[ft,mn])}return Lo}w.applyBackoff=Se,w.makeTester=function(){var Lo=s.ensureSingleById(g.select("body"),"svg","js-plotly-tester",function(dt){dt.attr(M.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),kl=s.ensureSingle(Lo,"path","js-reference-point",function(dt){dt.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});w.tester=Lo,w.testref=kl},w.savedBBoxes={};var Ee=0,X=1e4;w.bBox=function(Lo,kl,dt){dt||(dt=Oe(Lo));var yp;if(dt){if(yp=w.savedBBoxes[dt],yp)return s.extendFlat({},yp)}else if(Lo.childNodes.length===1){var Bp=Lo.childNodes[0];if(dt=Oe(Bp),dt){var Jp=+Bp.getAttribute("x")||0,m0=+Bp.getAttribute("y")||0,s0=Bp.getAttribute("transform");if(!s0){var y0=w.bBox(Bp,!1,dt);return Jp&&(y0.left+=Jp,y0.right+=Jp),m0&&(y0.top+=m0,y0.bottom+=m0),y0}if(dt+="~"+Jp+"~"+m0+"~"+s0,yp=w.savedBBoxes[dt],yp)return s.extendFlat({},yp)}}var M0,T0;kl?M0=Lo:(T0=w.tester.node(),M0=Lo.cloneNode(!0),T0.appendChild(M0)),g.select(M0).attr("transform",null).call(k.positionText,0,0);var G0=M0.getBoundingClientRect(),h0=w.testref.node().getBoundingClientRect();kl||T0.removeChild(M0);var W0={height:G0.height,width:G0.width,left:G0.left-h0.left,top:G0.top-h0.top,right:G0.right-h0.left,bottom:G0.bottom-h0.top};return Ee>=X&&(w.savedBBoxes={},Ee=0),dt&&(w.savedBBoxes[dt]=W0),Ee++,s.extendFlat({},W0)};function Oe(Lo){var kl=Lo.getAttribute("data-unformatted");if(kl!==null)return kl+Lo.getAttribute("data-math")+Lo.getAttribute("text-anchor")+Lo.getAttribute("style")}w.setClipUrl=function(Lo,kl,dt){Lo.attr("clip-path",Qe(kl,dt))};function Qe(Lo,kl){if(!Lo)return null;var dt=kl._context,yp=dt._exportedPlot?"":dt._baseUrl||"";return yp?"url('"+yp+"#"+Lo+"')":"url(#"+Lo+")"}w.getTranslate=function(Lo){var kl=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,dt=Lo.attr?"attr":"getAttribute",yp=Lo[dt]("transform")||"",Bp=yp.replace(kl,function(Jp,m0,s0){return[m0,s0].join(" ")}).split(" ");return{x:+Bp[0]||0,y:+Bp[1]||0}},w.setTranslate=function(Lo,kl,dt){var yp=/(\btranslate\(.*?\);?)/,Bp=Lo.attr?"attr":"getAttribute",Jp=Lo.attr?"attr":"setAttribute",m0=Lo[Bp]("transform")||"";return kl=kl||0,dt=dt||0,m0=m0.replace(yp,"").trim(),m0+=u(kl,dt),m0=m0.trim(),Lo[Jp]("transform",m0),m0},w.getScale=function(Lo){var kl=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,dt=Lo.attr?"attr":"getAttribute",yp=Lo[dt]("transform")||"",Bp=yp.replace(kl,function(Jp,m0,s0){return[m0,s0].join(" ")}).split(" ");return{x:+Bp[0]||1,y:+Bp[1]||1}},w.setScale=function(Lo,kl,dt){var yp=/(\bscale\(.*?\);?)/,Bp=Lo.attr?"attr":"getAttribute",Jp=Lo.attr?"attr":"setAttribute",m0=Lo[Bp]("transform")||"";return kl=kl||1,dt=dt||1,m0=m0.replace(yp,"").trim(),m0+="scale("+kl+","+dt+")",m0=m0.trim(),Lo[Jp]("transform",m0),m0};var pe=/\s*sc.*/;w.setPointGroupScale=function(Lo,kl,dt){if(kl=kl||1,dt=dt||1,!!Lo){var yp=kl===1&&dt===1?"":"scale("+kl+","+dt+")";Lo.each(function(){var Bp=(this.getAttribute("transform")||"").replace(pe,"");Bp+=yp,Bp=Bp.trim(),this.setAttribute("transform",Bp)})}};var q=/translate\([^)]*\)\s*$/;w.setTextPointsScale=function(Lo,kl,dt){Lo&&Lo.each(function(){var yp,Bp=g.select(this),Jp=Bp.select("text");if(Jp.node()){var m0=parseFloat(Jp.attr("x")||0),s0=parseFloat(Jp.attr("y")||0),y0=(Bp.attr("transform")||"").match(q);kl===1&&dt===1?yp=[]:yp=[u(m0,s0),"scale("+kl+","+dt+")",u(-m0,-s0)],y0&&yp.push(y0),Bp.attr("transform",yp.join(""))}})};function ae(Lo,kl){var dt;return Lo&&(dt=Lo.mf),dt===void 0&&(dt=kl.marker&&kl.marker.standoff||0),!kl._geo&&!kl._xA?-dt:dt}w.getMarkerStandoff=ae;var ve=Math.atan2,Te=Math.cos,et=Math.sin;function bt(Lo,kl){var dt=kl[0],yp=kl[1];return[dt*Te(Lo)-yp*et(Lo),dt*et(Lo)+yp*Te(Lo)]}var dr,Ol,Xl,Pp,t0,Wp;function $p(Lo,kl){var dt=Lo.ma;dt===void 0&&(dt=kl.marker.angle,(!dt||s.isArrayOrTypedArray(dt))&&(dt=0));var yp,Bp,Jp=kl.marker.angleref;if(Jp==="previous"||Jp==="north"){if(kl._geo){var m0=kl._geo.project(Lo.lonlat);yp=m0[0],Bp=m0[1]}else{var s0=kl._xA,y0=kl._yA;if(s0&&y0)yp=s0.c2p(Lo.x),Bp=y0.c2p(Lo.y);else return 90}if(kl._geo){var M0=Lo.lonlat[0],T0=Lo.lonlat[1],G0=kl._geo.project([M0,T0+1e-5]),h0=kl._geo.project([M0+1e-5,T0]),W0=ve(h0[1]-Bp,h0[0]-yp),rm=ve(G0[1]-Bp,G0[0]-yp),V0;if(Jp==="north")V0=dt/180*Math.PI;else if(Jp==="previous"){var um=M0/180*Math.PI,Uo=T0/180*Math.PI,Tp=dr/180*Math.PI,Be=Ol/180*Math.PI,ft=Tp-um,mn=Te(Be)*et(ft),Bl=et(Be)*Te(Uo)-Te(Be)*et(Uo)*Te(ft);V0=-ve(mn,Bl)-Math.PI,dr=M0,Ol=T0}var Vl=bt(W0,[Te(V0),0]),Np=bt(rm,[et(V0),0]);dt=ve(Vl[1]+Np[1],Vl[0]+Np[0])/Math.PI*180,Jp==="previous"&&!(Wp===kl.uid&&Lo.i===t0+1)&&(dt=null)}if(Jp==="previous"&&!kl._geo)if(Wp===kl.uid&&Lo.i===t0+1&&x(yp)&&x(Bp)){var Up=yp-Xl,Qp=Bp-Pp,Zp=kl.line&&kl.line.shape||"",Kp=Zp.slice(Zp.length-1);Kp==="h"&&(Qp=0),Kp==="v"&&(Up=0),dt+=ve(Qp,Up)/Math.PI*180+90}else dt=null}return Xl=yp,Pp=Bp,t0=Lo.i,Wp=kl.uid,dt}w.getMarkerAngle=$p}),O0=t((me,ue)=>{var g=c(),s=A(),h=vg(),x=l1(),v=Z(),y=v.strTranslate,b=D0(),T=_r(),u=kg(),k=xs(),M=Q1().OPPOSITE_SIDE,D=/ [XY][0-9]* /,B=1.6,P=1.6;function N(z,F,w){var L=z._fullLayout,O=w.propContainer,H=w.propName,W=w.placeholder,Ce=w.traceIndex,he=w.avoid||{},le=w.attributes,Y=w.transform,Re=w.containerGroup,fe=1,xe=O.title,ge=(xe&&xe.text?xe.text:"").trim(),ye=!1,Ae=xe&&xe.font?xe.font:{},Le=Ae.family,ce=Ae.size,ke=Ae.color,Pe=Ae.weight,tt=Ae.style,Ke=Ae.variant,nt=Ae.textcase,yi=Ae.lineposition,Ei=Ae.shadow,vs=w.subtitlePropName,Se=!!vs,Ee=w.subtitlePlaceholder,X=(O.title||{}).subtitle||{text:"",font:{}},Oe=(X.text||"").trim(),Qe=!1,pe=1,q=X.font,ae=q.family,ve=q.size,Te=q.color,et=q.weight,bt=q.style,dr=q.variant,Ol=q.textcase,Xl=q.lineposition,Pp=q.shadow,t0;H==="title.text"?t0="titleText":H.indexOf("axis")!==-1?t0="axisTitleText":H.indexOf("colorbar")!==-1&&(t0="colorbarTitleText");var Wp=z._context.edits[t0];function $p(h0,W0){return h0===void 0||W0===void 0?!1:h0.replace(D," % ")===W0.replace(D," % ")}ge===""?fe=0:$p(ge,W)&&(Wp||(ge=""),fe=.2,ye=!0),Se&&(Oe===""?pe=0:$p(Oe,Ee)&&(Wp||(Oe=""),pe=.2,Qe=!0)),w._meta?ge=v.templateString(ge,w._meta):L._meta&&(ge=v.templateString(ge,L._meta));var Lo=ge||Oe||Wp,kl;Re||(Re=v.ensureSingle(L._infolayer,"g","g-"+F),kl=L._hColorbarMoveTitle);var dt=Re.selectAll("text."+F).data(Lo?[0]:[]);dt.enter().append("text"),dt.text(ge).attr("class",F),dt.exit().remove();var yp=null,Bp=F+"-subtitle",Jp=Oe||Wp;if(Se&&(yp=Re.selectAll("text."+Bp).data(Jp?[0]:[]),yp.enter().append("text"),yp.text(Oe).attr("class",Bp),yp.exit().remove()),!Lo)return Re;function m0(h0,W0){v.syncOrAsync([s0,y0],{title:h0,subtitle:W0})}function s0(h0){var W0=h0.title,rm=h0.subtitle,V0;!Y&&kl&&(Y={}),Y?(V0="",Y.rotate&&(V0+="rotate("+[Y.rotate,le.x,le.y]+")"),(Y.offset||kl)&&(V0+=y(0,(Y.offset||0)-(kl||0)))):V0=null,W0.attr("transform",V0);function um(Bl){if(Bl){var Vl=g.select(Bl.node().parentNode).select("."+Bp);if(!Vl.empty()){var Np=Bl.node().getBBox();if(Np.height){var Up=Np.y+Np.height+B*ve;Vl.attr("y",Up)}}}}if(W0.style("opacity",fe*T.opacity(ke)).call(b.font,{color:T.rgb(ke),size:g.round(ce,2),family:Le,weight:Pe,style:tt,variant:Ke,textcase:nt,shadow:Ei,lineposition:yi}).attr(le).call(u.convertToTspans,z,um),rm&&!rm.empty()){var Uo=Re.select("."+F+"-math-group"),Tp=W0.node().getBBox(),Be=Uo.node()?Uo.node().getBBox():void 0,ft=Be?Be.y+Be.height+B*ve:Tp.y+Tp.height+P*ve,mn=v.extendFlat({},le,{y:ft});rm.attr("transform",V0),rm.style("opacity",pe*T.opacity(Te)).call(b.font,{color:T.rgb(Te),size:g.round(ve,2),family:ae,weight:et,style:bt,variant:dr,textcase:Ol,shadow:Pp,lineposition:Xl}).attr(mn).call(u.convertToTspans,z)}return h.previousPromises(z)}function y0(h0){var W0=h0.title,rm=g.select(W0.node().parentNode);if(he&&he.selection&&he.side&&ge){rm.attr("transform",null);var V0=M[he.side],um=he.side==="left"||he.side==="top"?-1:1,Uo=s(he.pad)?he.pad:2,Tp=b.bBox(rm.node()),Be={t:0,b:0,l:0,r:0},ft=z._fullLayout._reservedMargin;for(var mn in ft)for(var Bl in ft[mn]){var Vl=ft[mn][Bl];Be[Bl]=Math.max(Be[Bl],Vl)}var Np={left:Be.l,top:Be.t,right:L.width-Be.r,bottom:L.height-Be.b},Up=he.maxShift||um*(Np[he.side]-Tp[he.side]),Qp=0;if(Up<0)Qp=Up;else{var Zp=he.offsetLeft||0,Kp=he.offsetTop||0;Tp.left-=Zp,Tp.right-=Zp,Tp.top-=Kp,Tp.bottom-=Kp,he.selection.each(function(){var k0=b.bBox(this);v.bBoxIntersect(Tp,k0,Uo)&&(Qp=Math.max(Qp,um*(k0[he.side]-Tp[V0])+Uo))}),Qp=Math.min(Up,Qp),O._titleScoot=Math.abs(Qp)}if(Qp>0||Up<0){var R0={left:[-Qp,0],right:[Qp,0],top:[0,-Qp],bottom:[0,Qp]}[he.side];rm.attr("transform",y(R0[0],R0[1]))}}}dt.call(m0,yp);function M0(h0,W0){h0.text(W0).on("mouseover.opacity",function(){g.select(this).transition().duration(k.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){g.select(this).transition().duration(k.HIDE_PLACEHOLDER).style("opacity",0)})}if(Wp&&(ge?dt.on(".opacity",null):(M0(dt,W),ye=!0),dt.call(u.makeEditable,{gd:z}).on("edit",function(h0){Ce!==void 0?x.call("_guiRestyle",z,H,h0,Ce):x.call("_guiRelayout",z,H,h0)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(m0)}).on("input",function(h0){this.text(h0||" ").call(u.positionText,le.x,le.y)}),Se)){if(Se&&!ge){var T0=dt.node().getBBox(),G0=T0.y+T0.height+P*ve;yp.attr("y",G0)}Oe?yp.on(".opacity",null):(M0(yp,Ee),Qe=!0),yp.call(u.makeEditable,{gd:z}).on("edit",function(h0){x.call("_guiRelayout",z,"title.subtitle.text",h0)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(m0)}).on("input",function(h0){this.text(h0||" ").call(u.positionText,yp.attr("x"),yp.attr("y"))})}return dt.classed("js-placeholder",ye),yp&&!yp.empty()&&yp.classed("js-placeholder",Qe),Re}ue.exports={draw:N,SUBTITLE_PADDING_EM:P,SUBTITLE_PADDING_MATHJAX_EM:B}}),U0=t((me,ue)=>{var g=c(),s=p().utcFormat,h=Z(),x=h.numberFormat,v=A(),y=h.cleanNumber,b=h.ms2DateTime,T=h.dateTime2ms,u=h.ensureNumber,k=h.isArrayOrTypedArray,M=C(),D=M.FP_SAFE,B=M.BADNUM,P=M.LOG_CLIP,N=M.ONEWEEK,z=M.ONEDAY,F=M.ONEHOUR,w=M.ONEMIN,L=M.ONESEC,O=N1(),H=m1(),W=H.HOUR_PATTERN,Ce=H.WEEKDAY_PATTERN;function he(Y){return Math.pow(10,Y)}function le(Y){return Y!=null}ue.exports=function(Y,Re){Re=Re||{};var fe=Y._id||"x",xe=fe.charAt(0);function ge(X,Oe){if(X>0)return Math.log(X)/Math.LN10;if(X<=0&&Oe&&Y.range&&Y.range.length===2){var Qe=Y.range[0],pe=Y.range[1];return .5*(Qe+pe-2*P*Math.abs(Qe-pe))}else return B}function ye(X,Oe,Qe,pe){if((pe||{}).msUTC&&v(X))return+X;var q=T(X,Qe||Y.calendar);if(q===B)if(v(X)){X=+X;var ae=Math.floor(h.mod(X+.05,1)*10),ve=Math.round(X-ae/10);q=T(new Date(ve))+ae/10}else return B;return q}function Ae(X,Oe,Qe){return b(X,Oe,Qe||Y.calendar)}function Le(X){return Y._categories[Math.round(X)]}function ce(X){if(le(X)){if(Y._categoriesMap===void 0&&(Y._categoriesMap={}),Y._categoriesMap[X]!==void 0)return Y._categoriesMap[X];Y._categories.push(typeof X=="number"?String(X):X);var Oe=Y._categories.length-1;return Y._categoriesMap[X]=Oe,Oe}return B}function ke(X,Oe){for(var Qe=new Array(Oe),pe=0;pe<Oe;pe++){var q=(X[0]||[])[pe],ae=(X[1]||[])[pe];Qe[pe]=Pe([q,ae])}return Qe}function Pe(X){if(Y._categoriesMap)return Y._categoriesMap[X]}function tt(X){var Oe=Pe(X);if(Oe!==void 0)return Oe;if(v(X))return+X}function Ke(X){return v(X)?+X:Pe(X)}function nt(X,Oe,Qe){return g.round(Qe+Oe*X,2)}function yi(X,Oe,Qe){return(X-Qe)/Oe}var Ei=function(X){return v(X)?nt(X,Y._m,Y._b):B},vs=function(X){return yi(X,Y._m,Y._b)};if(Y.rangebreaks){var Se=xe==="y";Ei=function(X){if(!v(X))return B;var Oe=Y._rangebreaks.length;if(!Oe)return nt(X,Y._m,Y._b);var Qe=Se;Y.range[0]>Y.range[1]&&(Qe=!Qe);for(var pe=Qe?-1:1,q=pe*X,ae=0,ve=0;ve<Oe;ve++){var Te=pe*Y._rangebreaks[ve].min,et=pe*Y._rangebreaks[ve].max;if(q<Te)break;if(q>et)ae=ve+1;else{ae=q<(Te+et)/2?ve:ve+1;break}}var bt=Y._B[ae]||0;return isFinite(bt)?nt(X,Y._m2,bt):0},vs=function(X){var Oe=Y._rangebreaks.length;if(!Oe)return yi(X,Y._m,Y._b);for(var Qe=0,pe=0;pe<Oe&&!(X<Y._rangebreaks[pe].pmin);pe++)X>Y._rangebreaks[pe].pmax&&(Qe=pe+1);return yi(X,Y._m2,Y._B[Qe])}}Y.c2l=Y.type==="log"?ge:u,Y.l2c=Y.type==="log"?he:u,Y.l2p=Ei,Y.p2l=vs,Y.c2p=Y.type==="log"?function(X,Oe){return Ei(ge(X,Oe))}:Ei,Y.p2c=Y.type==="log"?function(X){return he(vs(X))}:vs,["linear","-"].indexOf(Y.type)!==-1?(Y.d2r=Y.r2d=Y.d2c=Y.r2c=Y.d2l=Y.r2l=y,Y.c2d=Y.c2r=Y.l2d=Y.l2r=u,Y.d2p=Y.r2p=function(X){return Y.l2p(y(X))},Y.p2d=Y.p2r=vs,Y.cleanPos=u):Y.type==="log"?(Y.d2r=Y.d2l=function(X,Oe){return ge(y(X),Oe)},Y.r2d=Y.r2c=function(X){return he(y(X))},Y.d2c=Y.r2l=y,Y.c2d=Y.l2r=u,Y.c2r=ge,Y.l2d=he,Y.d2p=function(X,Oe){return Y.l2p(Y.d2r(X,Oe))},Y.p2d=function(X){return he(vs(X))},Y.r2p=function(X){return Y.l2p(y(X))},Y.p2r=vs,Y.cleanPos=u):Y.type==="date"?(Y.d2r=Y.r2d=h.identity,Y.d2c=Y.r2c=Y.d2l=Y.r2l=ye,Y.c2d=Y.c2r=Y.l2d=Y.l2r=Ae,Y.d2p=Y.r2p=function(X,Oe,Qe){return Y.l2p(ye(X,0,Qe))},Y.p2d=Y.p2r=function(X,Oe,Qe){return Ae(vs(X),Oe,Qe)},Y.cleanPos=function(X){return h.cleanDate(X,B,Y.calendar)}):Y.type==="category"?(Y.d2c=Y.d2l=ce,Y.r2d=Y.c2d=Y.l2d=Le,Y.d2r=Y.d2l_noadd=tt,Y.r2c=function(X){var Oe=Ke(X);return Oe!==void 0?Oe:Y.fraction2r(.5)},Y.l2r=Y.c2r=u,Y.r2l=Ke,Y.d2p=function(X){return Y.l2p(Y.r2c(X))},Y.p2d=function(X){return Le(vs(X))},Y.r2p=Y.d2p,Y.p2r=vs,Y.cleanPos=function(X){return typeof X=="string"&&X!==""?X:u(X)}):Y.type==="multicategory"&&(Y.r2d=Y.c2d=Y.l2d=Le,Y.d2r=Y.d2l_noadd=tt,Y.r2c=function(X){var Oe=tt(X);return Oe!==void 0?Oe:Y.fraction2r(.5)},Y.r2c_just_indices=Pe,Y.l2r=Y.c2r=u,Y.r2l=tt,Y.d2p=function(X){return Y.l2p(Y.r2c(X))},Y.p2d=function(X){return Le(vs(X))},Y.r2p=Y.d2p,Y.p2r=vs,Y.cleanPos=function(X){return Array.isArray(X)||typeof X=="string"&&X!==""?X:u(X)},Y.setupMultiCategory=function(X){var Oe=Y._traceIndices,Qe,pe,q=Y._matchGroup;if(q&&Y._categories.length===0){for(var ae in q)if(ae!==fe){var ve=Re[O.id2name(ae)];Oe=Oe.concat(ve._traceIndices)}}var Te=[[0,{}],[0,{}]],et=[];for(Qe=0;Qe<Oe.length;Qe++){var bt=X[Oe[Qe]];if(xe in bt){var dr=bt[xe],Ol=bt._length||h.minRowLength(dr);if(k(dr[0])&&k(dr[1]))for(pe=0;pe<Ol;pe++){var Xl=dr[0][pe],Pp=dr[1][pe];le(Xl)&&le(Pp)&&(et.push([Xl,Pp]),Xl in Te[0][1]||(Te[0][1][Xl]=Te[0][0]++),Pp in Te[1][1]||(Te[1][1][Pp]=Te[1][0]++))}}}for(et.sort(function(t0,Wp){var $p=Te[0][1],Lo=$p[t0[0]]-$p[Wp[0]];if(Lo)return Lo;var kl=Te[1][1];return kl[t0[1]]-kl[Wp[1]]}),Qe=0;Qe<et.length;Qe++)ce(et[Qe])}),Y.fraction2r=function(X){var Oe=Y.r2l(Y.range[0]),Qe=Y.r2l(Y.range[1]);return Y.l2r(Oe+X*(Qe-Oe))},Y.r2fraction=function(X){var Oe=Y.r2l(Y.range[0]),Qe=Y.r2l(Y.range[1]);return(Y.r2l(X)-Oe)/(Qe-Oe)},Y.limitRange=function(X){var Oe=Y.minallowed,Qe=Y.maxallowed;if(!(Oe===void 0&&Qe===void 0)){X||(X="range");var pe=h.nestedProperty(Y,X).get(),q=h.simpleMap(pe,Y.r2l),ae=q[1]<q[0];ae&&q.reverse();var ve=h.simpleMap([Oe,Qe],Y.r2l);if(Oe!==void 0&&q[0]<ve[0]&&(pe[ae?1:0]=Oe),Qe!==void 0&&q[1]>ve[1]&&(pe[ae?0:1]=Qe),pe[0]===pe[1]){var Te=Y.l2r(Oe),et=Y.l2r(Qe);if(Oe!==void 0){var bt=Te+1;Qe!==void 0&&(bt=Math.min(bt,et)),pe[ae?1:0]=bt}if(Qe!==void 0){var dr=et+1;Oe!==void 0&&(dr=Math.max(dr,Te)),pe[ae?0:1]=dr}}}},Y.cleanRange=function(X,Oe){Y._cleanRange(X,Oe),Y.limitRange(X)},Y._cleanRange=function(X,Oe){Oe||(Oe={}),X||(X="range");var Qe=h.nestedProperty(Y,X).get(),pe,q;if(Y.type==="date"?q=h.dfltRange(Y.calendar):xe==="y"?q=H.DFLTRANGEY:Y._name==="realaxis"?q=[0,1]:q=Oe.dfltRange||H.DFLTRANGEX,q=q.slice(),(Y.rangemode==="tozero"||Y.rangemode==="nonnegative")&&(q[0]=0),!Qe||Qe.length!==2){h.nestedProperty(Y,X).set(q);return}var ae=Qe[0]===null,ve=Qe[1]===null;for(Y.type==="date"&&!Y.autorange&&(Qe[0]=h.cleanDate(Qe[0],B,Y.calendar),Qe[1]=h.cleanDate(Qe[1],B,Y.calendar)),pe=0;pe<2;pe++)if(Y.type==="date"){if(!h.isDateTime(Qe[pe],Y.calendar)){Y[X]=q;break}if(Y.r2l(Qe[0])===Y.r2l(Qe[1])){var Te=h.constrain(Y.r2l(Qe[0]),h.MIN_MS+1e3,h.MAX_MS-1e3);Qe[0]=Y.l2r(Te-1e3),Qe[1]=Y.l2r(Te+1e3);break}}else{if(!v(Qe[pe]))if(!(ae||ve)&&v(Qe[1-pe]))Qe[pe]=Qe[1-pe]*(pe?10:.1);else{Y[X]=q;break}if(Qe[pe]<-D?Qe[pe]=-D:Qe[pe]>D&&(Qe[pe]=D),Qe[0]===Qe[1]){var et=Math.max(1,Math.abs(Qe[0]*1e-6));Qe[0]-=et,Qe[1]+=et}}},Y.setScale=function(X){var Oe=Re._size;if(Y.overlaying){var Qe=O.getFromId({_fullLayout:Re},Y.overlaying);Y.domain=Qe.domain}var pe=X&&Y._r?"_r":"range",q=Y.calendar;Y.cleanRange(pe);var ae=Y.r2l(Y[pe][0],q),ve=Y.r2l(Y[pe][1],q),Te=xe==="y";if(Te?(Y._offset=Oe.t+(1-Y.domain[1])*Oe.h,Y._length=Oe.h*(Y.domain[1]-Y.domain[0]),Y._m=Y._length/(ae-ve),Y._b=-Y._m*ve):(Y._offset=Oe.l+Y.domain[0]*Oe.w,Y._length=Oe.w*(Y.domain[1]-Y.domain[0]),Y._m=Y._length/(ve-ae),Y._b=-Y._m*ae),Y._rangebreaks=[],Y._lBreaks=0,Y._m2=0,Y._B=[],Y.rangebreaks){var et,bt;if(Y._rangebreaks=Y.locateBreaks(Math.min(ae,ve),Math.max(ae,ve)),Y._rangebreaks.length){for(et=0;et<Y._rangebreaks.length;et++)bt=Y._rangebreaks[et],Y._lBreaks+=Math.abs(bt.max-bt.min);var dr=Te;ae>ve&&(dr=!dr),dr&&Y._rangebreaks.reverse();var Ol=dr?-1:1;for(Y._m2=Ol*Y._length/(Math.abs(ve-ae)-Y._lBreaks),Y._B.push(-Y._m2*(Te?ve:ae)),et=0;et<Y._rangebreaks.length;et++)bt=Y._rangebreaks[et],Y._B.push(Y._B[Y._B.length-1]-Ol*Y._m2*(bt.max-bt.min));for(et=0;et<Y._rangebreaks.length;et++)bt=Y._rangebreaks[et],bt.pmin=Ei(bt.min),bt.pmax=Ei(bt.max)}}if(!isFinite(Y._m)||!isFinite(Y._b)||Y._length<0)throw Re._replotting=!1,new Error("Something went wrong with axis scaling")},Y.maskBreaks=function(X){var Oe=Y.rangebreaks||[],Qe,pe,q,ae,ve;Oe._cachedPatterns||(Oe._cachedPatterns=Oe.map(function($p){return $p.enabled&&$p.bounds?h.simpleMap($p.bounds,$p.pattern?y:Y.d2c):null})),Oe._cachedValues||(Oe._cachedValues=Oe.map(function($p){return $p.enabled&&$p.values?h.simpleMap($p.values,Y.d2c).sort(h.sorterAsc):null}));for(var Te=0;Te<Oe.length;Te++){var et=Oe[Te];if(et.enabled){if(et.bounds){var bt=et.pattern;switch(Qe=Oe._cachedPatterns[Te],pe=Qe[0],q=Qe[1],bt){case Ce:ve=new Date(X),ae=ve.getUTCDay(),pe>q&&(q+=7,ae<pe&&(ae+=7));break;case W:ve=new Date(X);var dr=ve.getUTCHours(),Ol=ve.getUTCMinutes(),Xl=ve.getUTCSeconds(),Pp=ve.getUTCMilliseconds();ae=dr+(Ol/60+Xl/3600+Pp/36e5),pe>q&&(q+=24,ae<pe&&(ae+=24));break;case"":ae=X;break}if(ae>=pe&&ae<q)return B}else for(var t0=Oe._cachedValues[Te],Wp=0;Wp<t0.length;Wp++)if(pe=t0[Wp],q=pe+et.dvalue,X>=pe&&X<q)return B}}return X},Y.locateBreaks=function(X,Oe){var Qe,pe,q,ae,ve=[];if(!Y.rangebreaks)return ve;var Te=Y.rangebreaks.slice().sort(function(kl,dt){return kl.pattern===Ce&&dt.pattern===W?-1:dt.pattern===Ce&&kl.pattern===W?1:0}),et=function(kl,dt){if(kl=h.constrain(kl,X,Oe),dt=h.constrain(dt,X,Oe),kl!==dt){for(var yp=!0,Bp=0;Bp<ve.length;Bp++){var Jp=ve[Bp];kl<Jp.max&&dt>=Jp.min&&(kl<Jp.min&&(Jp.min=kl),dt>Jp.max&&(Jp.max=dt),yp=!1)}yp&&ve.push({min:kl,max:dt})}};for(Qe=0;Qe<Te.length;Qe++){var bt=Te[Qe];if(bt.enabled)if(bt.bounds){var dr=X,Ol=Oe;bt.pattern&&(dr=Math.floor(dr)),pe=h.simpleMap(bt.bounds,bt.pattern?y:Y.r2l),q=pe[0],ae=pe[1];var Xl=new Date(dr),Pp,t0;switch(bt.pattern){case Ce:t0=N,Pp=((ae<q?7:0)+(ae-q))*z,dr+=q*z-(Xl.getUTCDay()*z+Xl.getUTCHours()*F+Xl.getUTCMinutes()*w+Xl.getUTCSeconds()*L+Xl.getUTCMilliseconds());break;case W:t0=z,Pp=((ae<q?24:0)+(ae-q))*F,dr+=q*F-(Xl.getUTCHours()*F+Xl.getUTCMinutes()*w+Xl.getUTCSeconds()*L+Xl.getUTCMilliseconds());break;default:dr=Math.min(pe[0],pe[1]),Ol=Math.max(pe[0],pe[1]),t0=Ol-dr,Pp=t0}for(var Wp=dr;Wp<Ol;Wp+=t0)et(Wp,Wp+Pp)}else for(var $p=h.simpleMap(bt.values,Y.d2c),Lo=0;Lo<$p.length;Lo++)q=$p[Lo],ae=q+bt.dvalue,et(q,ae)}return ve.sort(function(kl,dt){return kl.min-dt.min}),ve},Y.makeCalcdata=function(X,Oe,Qe){var pe,q,ae,ve,Te=Y.type,et=Te==="date"&&X[Oe+"calendar"];if(Oe in X){if(pe=X[Oe],ve=X._length||h.minRowLength(pe),h.isTypedArray(pe)&&(Te==="linear"||Te==="log")){if(ve===pe.length)return pe;if(pe.subarray)return pe.subarray(0,ve)}if(Te==="multicategory")return ke(pe,ve);for(q=new Array(ve),ae=0;ae<ve;ae++)q[ae]=Y.d2c(pe[ae],0,et,Qe)}else{var bt=Oe+"0"in X?Y.d2c(X[Oe+"0"],0,et):0,dr=X["d"+Oe]?Number(X["d"+Oe]):1;for(pe=X[{x:"y",y:"x"}[Oe]],ve=X._length||pe.length,q=new Array(ve),ae=0;ae<ve;ae++)q[ae]=bt+ae*dr}if(Y.rangebreaks)for(ae=0;ae<ve;ae++)q[ae]=Y.maskBreaks(q[ae]);return q},Y.isValidRange=function(X,Oe){return Array.isArray(X)&&X.length===2&&(Oe&&X[0]===null||v(Y.r2l(X[0])))&&(Oe&&X[1]===null||v(Y.r2l(X[1])))},Y.getAutorangeDflt=function(X,Oe){var Qe=!Y.isValidRange(X,"nullOk");return Qe&&Oe&&Oe.reverseDflt?Qe="reversed":X&&(X[0]===null&&X[1]===null?Qe=!0:X[0]===null&&X[1]!==null?Qe="min":X[0]!==null&&X[1]===null&&(Qe="max")),Qe},Y.isReversed=function(){var X=Y.autorange;return X==="reversed"||X==="min reversed"||X==="max reversed"},Y.isPtWithinRange=function(X,Oe){var Qe=Y.c2l(X[xe],null,Oe),pe=Y.r2l(Y.range[0]),q=Y.r2l(Y.range[1]);return pe<q?pe<=Qe&&Qe<=q:q<=Qe&&Qe<=pe},Y._emptyCategories=function(){Y._categories=[],Y._categoriesMap={}},Y.clearCalc=function(){var X=Y._matchGroup;if(X){var Oe=null,Qe=null;for(var pe in X){var q=Re[O.id2name(pe)];if(q._categories){Oe=q._categories,Qe=q._categoriesMap;break}}Oe&&Qe?(Y._categories=Oe,Y._categoriesMap=Qe):Y._emptyCategories()}else Y._emptyCategories();if(Y._initialCategories)for(var ae=0;ae<Y._initialCategories.length;ae++)ce(Y._initialCategories[ae])},Y.sortByInitialCategories=function(){var X=[];if(Y._emptyCategories(),Y._initialCategories)for(var Oe=0;Oe<Y._initialCategories.length;Oe++)ce(Y._initialCategories[Oe]);X=X.concat(Y._traceIndices);var Qe=Y._matchGroup;for(var pe in Qe)if(fe!==pe){var q=Re[O.id2name(pe)];q._categories=Y._categories,q._categoriesMap=Y._categoriesMap,X=X.concat(q._traceIndices)}return X};var Ee=Re._d3locale;Y.type==="date"&&(Y._dateFormat=Ee?Ee.timeFormat:s,Y._extraFormat=Re._extraFormat),Y._separators=Re.separators,Y._numFormat=Ee?Ee.numberFormat:x,delete Y._minDtick,delete Y._forceTick0}}),E0=t((me,ue)=>{var g=A(),s=Z(),h=C().BADNUM,x=s.isArrayOrTypedArray,v=s.isDateTime,y=s.cleanNumber,b=Math.round;ue.exports=function(P,N,z){var F=P,w=z.noMultiCategory;if(x(F)&&!F.length)return"-";if(!w&&B(F))return"multicategory";if(w&&Array.isArray(F[0])){for(var L=[],O=0;O<F.length;O++)if(x(F[O]))for(var H=0;H<F[O].length;H++)L.push(F[O][H]);F=L}if(k(F,N))return"date";var W=z.autotypenumbers!=="strict";return D(F,W)?"category":u(F,W)?"linear":"-"};function T(P,N){return N?g(P):typeof P=="number"}function u(P,N){for(var z=P.length,F=0;F<z;F++)if(T(P[F],N))return!0;return!1}function k(P,N){for(var z=P.length,F=M(z),w=0,L=0,O={},H=0;H<z;H+=F){var W=b(H),Ce=P[W],he=String(Ce);O[he]||(O[he]=1,v(Ce,N)&&w++,g(Ce)&&L++)}return w>L*2}function M(P){return Math.max(1,(P-1)/1e3)}function D(P,N){for(var z=P.length,F=M(z),w=0,L=0,O={},H=0;H<z;H+=F){var W=b(H),Ce=P[W],he=String(Ce);if(!O[he]){O[he]=1;var le=typeof Ce;le==="boolean"?L++:(N?y(Ce)!==h:le==="number")?w++:le==="string"&&L++}}return L>w*2}function B(P){return x(P[0])&&x(P[1])}}),ym=t((me,ue)=>{var g=c(),s=A(),h=Z(),x=C().FP_SAFE,v=l1(),y=D0(),b=N1(),T=b.getFromId,u=b.isLinked;ue.exports={applyAutorangeOptions:Re,getAutoRange:k,makePadFn:D,doAutoRange:z,findExtremes:F,concatExtremes:N};function k(fe,xe){var ge,ye,Ae=[],Le=fe._fullLayout,ce=D(Le,xe,0),ke=D(Le,xe,1),Pe=N(fe,xe),tt=Pe.min,Ke=Pe.max;if(tt.length===0||Ke.length===0)return h.simpleMap(xe.range,xe.r2l);var nt=tt[0].val,yi=Ke[0].val;for(ge=1;ge<tt.length&&nt===yi;ge++)nt=Math.min(nt,tt[ge].val);for(ge=1;ge<Ke.length&&nt===yi;ge++)yi=Math.max(yi,Ke[ge].val);var Ei=xe.autorange,vs=Ei==="reversed"||Ei==="min reversed"||Ei==="max reversed";if(!vs&&xe.range){var Se=h.simpleMap(xe.range,xe.r2l);vs=Se[1]<Se[0]}xe.autorange==="reversed"&&(xe.autorange=!0);var Ee=xe.rangemode,X=Ee==="tozero",Oe=Ee==="nonnegative",Qe=xe._length,pe=Qe/10,q=0,ae,ve,Te,et,bt,dr;for(ge=0;ge<tt.length;ge++)for(ae=tt[ge],ye=0;ye<Ke.length;ye++)ve=Ke[ye],dr=ve.val-ae.val-M(xe,ae.val,ve.val),dr>0&&(bt=Qe-ce(ae)-ke(ve),bt>pe?dr/bt>q&&(Te=ae,et=ve,q=dr/bt):dr/Qe>q&&(Te={val:ae.val,nopad:1},et={val:ve.val,nopad:1},q=dr/Qe));function Ol($p,Lo){return Math.max($p,ke(Lo))}if(nt===yi){var Xl=nt-1,Pp=nt+1;if(X)if(nt===0)Ae=[0,1];else{var t0=(nt>0?Ke:tt).reduce(Ol,0),Wp=nt/(1-Math.min(.5,t0/Qe));Ae=nt>0?[0,Wp]:[Wp,0]}else Oe?Ae=[Math.max(0,Xl),Math.max(1,Pp)]:Ae=[Xl,Pp]}else X?(Te.val>=0&&(Te={val:0,nopad:1}),et.val<=0&&(et={val:0,nopad:1})):Oe&&(Te.val-q*ce(Te)<0&&(Te={val:0,nopad:1}),et.val<=0&&(et={val:1,nopad:1})),q=(et.val-Te.val-M(xe,ae.val,ve.val))/(Qe-ce(Te)-ke(et)),Ae=[Te.val-q*ce(Te),et.val+q*ke(et)];return Ae=Re(Ae,xe),xe.limitRange&&xe.limitRange(),vs&&Ae.reverse(),h.simpleMap(Ae,xe.l2r||Number)}function M(fe,xe,ge){var ye=0;if(fe.rangebreaks)for(var Ae=fe.locateBreaks(xe,ge),Le=0;Le<Ae.length;Le++){var ce=Ae[Le];ye+=ce.max-ce.min}return ye}function D(fe,xe,ge){var ye=.05*xe._length,Ae=xe._anchorAxis||{};if((xe.ticklabelposition||"").indexOf("inside")!==-1||(Ae.ticklabelposition||"").indexOf("inside")!==-1){var Le=xe.isReversed();if(!Le){var ce=h.simpleMap(xe.range,xe.r2l);Le=ce[1]<ce[0]}Le&&(ge=!ge)}var ke=0;return u(fe,xe._id)||(ke=P(fe,xe,ge)),ye=Math.max(ke,ye),xe.constrain==="domain"&&xe._inputDomain&&(ye*=(xe._inputDomain[1]-xe._inputDomain[0])/(xe.domain[1]-xe.domain[0])),function(Pe){return Pe.nopad?0:Pe.pad+(Pe.extrapad?ye:ke)}}var B=3;function P(fe,xe,ge){var ye=0,Ae=xe._id.charAt(0)==="x";for(var Le in fe._plots){var ce=fe._plots[Le];if(!(xe._id!==ce.xaxis._id&&xe._id!==ce.yaxis._id)){var ke=(Ae?ce.yaxis:ce.xaxis)||{};if((ke.ticklabelposition||"").indexOf("inside")!==-1&&(!ge&&(ke.side==="left"||ke.side==="bottom")||ge&&(ke.side==="top"||ke.side==="right"))){if(ke._vals){var Pe=h.deg2rad(ke._tickAngles[ke._id+"tick"]||0),tt=Math.abs(Math.cos(Pe)),Ke=Math.abs(Math.sin(Pe));if(!ke._vals[0].bb){var nt=ke._id+"tick",yi=ke._selections[nt];yi.each(function(Oe){var Qe=g.select(this),pe=Qe.select(".text-math-group");pe.empty()&&(Oe.bb=y.bBox(Qe.node()))})}for(var Ei=0;Ei<ke._vals.length;Ei++){var vs=ke._vals[Ei],Se=vs.bb;if(Se){var Ee=2*B+Se.width,X=2*B+Se.height;ye=Math.max(ye,Ae?Math.max(Ee*tt,X*Ke):Math.max(X*tt,Ee*Ke))}}}ke.ticks==="inside"&&ke.ticklabelposition==="inside"&&(ye+=ke.ticklen||0)}}}return ye}function N(fe,xe,ge){var ye=xe._id,Ae=fe._fullData,Le=fe._fullLayout,ce=[],ke=[],Pe,tt,Ke;function nt(Ee,X){for(Pe=0;Pe<X.length;Pe++){var Oe=Ee[X[Pe]],Qe=(Oe._extremes||{})[ye];if(Oe.visible===!0&&Qe){for(tt=0;tt<Qe.min.length;tt++)Ke=Qe.min[tt],w(ce,Ke.val,Ke.pad,{extrapad:Ke.extrapad});for(tt=0;tt<Qe.max.length;tt++)Ke=Qe.max[tt],L(ke,Ke.val,Ke.pad,{extrapad:Ke.extrapad})}}}if(nt(Ae,xe._traceIndices),nt(Le.annotations||[],xe._annIndices||[]),nt(Le.shapes||[],xe._shapeIndices||[]),xe._matchGroup&&!ge){for(var yi in xe._matchGroup)if(yi!==xe._id){var Ei=T(fe,yi),vs=N(fe,Ei,!0),Se=xe._length/Ei._length;for(tt=0;tt<vs.min.length;tt++)Ke=vs.min[tt],w(ce,Ke.val,Ke.pad*Se,{extrapad:Ke.extrapad});for(tt=0;tt<vs.max.length;tt++)Ke=vs.max[tt],L(ke,Ke.val,Ke.pad*Se,{extrapad:Ke.extrapad})}}return{min:ce,max:ke}}function z(fe,xe,ge){if(xe.setScale(),xe.autorange){xe.range=ge?ge.slice():k(fe,xe),xe._r=xe.range.slice(),xe._rl=h.simpleMap(xe._r,xe.r2l);var ye=xe._input,Ae={};Ae[xe._attr+".range"]=xe.range,Ae[xe._attr+".autorange"]=xe.autorange,v.call("_storeDirectGUIEdit",fe.layout,fe._fullLayout._preGUI,Ae),ye.range=xe.range.slice(),ye.autorange=xe.autorange}var Le=xe._anchorAxis;if(Le&&Le.rangeslider){var ce=Le.rangeslider[xe._name];ce&&ce.rangemode==="auto"&&(ce.range=k(fe,xe)),Le._input.rangeslider[xe._name]=h.extendFlat({},ce)}}function F(fe,xe,ge){ge||(ge={}),fe._m||fe.setScale();var ye=[],Ae=[],Le=xe.length,ce=ge.padded||!1,ke=ge.tozero&&(fe.type==="linear"||fe.type==="-"),Pe=fe.type==="log",tt=!1,Ke=ge.vpadLinearized||!1,nt,yi,Ei,vs,Se,Ee,X,Oe,Qe;function pe(Ol){if(Array.isArray(Ol))return tt=!0,function(Pp){return Math.max(Number(Ol[Pp]||0),0)};var Xl=Math.max(Number(Ol||0),0);return function(){return Xl}}var q=pe((fe._m>0?ge.ppadplus:ge.ppadminus)||ge.ppad||0),ae=pe((fe._m>0?ge.ppadminus:ge.ppadplus)||ge.ppad||0),ve=pe(ge.vpadplus||ge.vpad),Te=pe(ge.vpadminus||ge.vpad);if(!tt){if(Oe=1/0,Qe=-1/0,Pe)for(nt=0;nt<Le;nt++)yi=xe[nt],yi<Oe&&yi>0&&(Oe=yi),yi>Qe&&yi<x&&(Qe=yi);else for(nt=0;nt<Le;nt++)yi=xe[nt],yi<Oe&&yi>-x&&(Oe=yi),yi>Qe&&yi<x&&(Qe=yi);xe=[Oe,Qe],Le=2}var et={tozero:ke,extrapad:ce};function bt(Ol){Ei=xe[Ol],s(Ei)&&(Ee=q(Ol),X=ae(Ol),Ke?(vs=fe.c2l(Ei)-Te(Ol),Se=fe.c2l(Ei)+ve(Ol)):(Oe=Ei-Te(Ol),Qe=Ei+ve(Ol),Pe&&Oe<Qe/10&&(Oe=Qe/10),vs=fe.c2l(Oe),Se=fe.c2l(Qe)),ke&&(vs=Math.min(0,vs),Se=Math.max(0,Se)),H(vs)&&w(ye,vs,X,et),H(Se)&&L(Ae,Se,Ee,et))}var dr=Math.min(6,Le);for(nt=0;nt<dr;nt++)bt(nt);for(nt=Le-1;nt>=dr;nt--)bt(nt);return{min:ye,max:Ae,opts:ge}}function w(fe,xe,ge,ye){O(fe,xe,ge,ye,W)}function L(fe,xe,ge,ye){O(fe,xe,ge,ye,Ce)}function O(fe,xe,ge,ye,Ae){for(var Le=ye.tozero,ce=ye.extrapad,ke=!0,Pe=0;Pe<fe.length&&ke;Pe++){var tt=fe[Pe];if(Ae(tt.val,xe)&&tt.pad>=ge&&(tt.extrapad||!ce)){ke=!1;break}else Ae(xe,tt.val)&&tt.pad<=ge&&(ce||!tt.extrapad)&&(fe.splice(Pe,1),Pe--)}if(ke){var Ke=Le&&xe===0;fe.push({val:xe,pad:Ke?0:ge,extrapad:Ke?!1:ce})}}function H(fe){return s(fe)&&Math.abs(fe)<x}function W(fe,xe){return fe<=xe}function Ce(fe,xe){return fe>=xe}function he(fe,xe){var ge=xe.autorangeoptions;return ge&&ge.minallowed!==void 0&&Y(xe,ge.minallowed,ge.maxallowed)?ge.minallowed:ge&&ge.clipmin!==void 0&&Y(xe,ge.clipmin,ge.clipmax)?Math.max(fe,xe.d2l(ge.clipmin)):fe}function le(fe,xe){var ge=xe.autorangeoptions;return ge&&ge.maxallowed!==void 0&&Y(xe,ge.minallowed,ge.maxallowed)?ge.maxallowed:ge&&ge.clipmax!==void 0&&Y(xe,ge.clipmin,ge.clipmax)?Math.min(fe,xe.d2l(ge.clipmax)):fe}function Y(fe,xe,ge){return xe!==void 0&&ge!==void 0?(xe=fe.d2l(xe),ge=fe.d2l(ge),xe<ge):!0}function Re(fe,xe){if(!xe||!xe.autorangeoptions)return fe;var ge=fe[0],ye=fe[1],Ae=xe.autorangeoptions.include;if(Ae!==void 0){var Le=xe.d2l(ge),ce=xe.d2l(ye);h.isArrayOrTypedArray(Ae)||(Ae=[Ae]);for(var ke=0;ke<Ae.length;ke++){var Pe=xe.d2l(Ae[ke]);Le>=Pe&&(Le=Pe,ge=Pe),ce<=Pe&&(ce=Pe,ye=Pe)}}return ge=he(ge,xe),ye=le(ye,xe),[ge,ye]}}),mm=t((me,ue)=>{var g=c(),s=A(),h=vg(),x=l1(),v=Z(),y=v.strTranslate,b=kg(),T=O0(),u=_r(),k=D0(),M=jp(),D=Ze(),B=C(),P=B.ONEMAXYEAR,N=B.ONEAVGYEAR,z=B.ONEMINYEAR,F=B.ONEMAXQUARTER,w=B.ONEAVGQUARTER,L=B.ONEMINQUARTER,O=B.ONEMAXMONTH,H=B.ONEAVGMONTH,W=B.ONEMINMONTH,Ce=B.ONEWEEK,he=B.ONEDAY,le=he/2,Y=B.ONEHOUR,Re=B.ONEMIN,fe=B.ONESEC,xe=B.ONEMILLI,ge=B.ONEMICROSEC,ye=B.MINUS_SIGN,Ae=B.BADNUM,Le={K:"zeroline"},ce={K:"gridline",L:"path"},ke={K:"minor-gridline",L:"path"},Pe={K:"tick",L:"path"},tt={K:"tick",L:"text"},Ke={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},nt=Q1(),yi=nt.MID_SHIFT,Ei=nt.CAP_SHIFT,vs=nt.LINE_SPACING,Se=nt.OPPOSITE_SIDE,Ee=3,X=ue.exports={};X.setConvert=U0();var Oe=E0(),Qe=N1(),pe=Qe.idSort,q=Qe.isLinked;X.id2name=Qe.id2name,X.name2id=Qe.name2id,X.cleanId=Qe.cleanId,X.list=Qe.list,X.listIds=Qe.listIds,X.getFromId=Qe.getFromId,X.getFromTrace=Qe.getFromTrace;var ae=ym();X.getAutoRange=ae.getAutoRange,X.findExtremes=ae.findExtremes;var ve=1e-4;function Te(Je){var Ve=(Je[1]-Je[0])*ve;return[Je[0]-Ve,Je[1]+Ve]}X.coerceRef=function(Je,Ve,Mp,kp,Vp,wp){var Ap=kp.charAt(kp.length-1),Yp=Mp._fullLayout._subplots[Ap+"axis"],Fp=kp+"ref",u0={};return Vp||(Vp=Yp[0]||(typeof wp=="string"?wp:wp[0])),wp||(wp=Vp),Yp=Yp.concat(Yp.map(function(g0){return g0+" domain"})),u0[Fp]={valType:"enumerated",values:Yp.concat(wp?typeof wp=="string"?[wp]:wp:[]),dflt:Vp},v.coerce(Je,Ve,u0,Fp)},X.getRefType=function(Je){return Je===void 0?Je:Je==="paper"?"paper":Je==="pixel"?"pixel":/( domain)$/.test(Je)?"domain":"range"},X.coercePosition=function(Je,Ve,Mp,kp,Vp,wp){var Ap,Yp,Fp=X.getRefType(kp);if(Fp!=="range")Ap=v.ensureNumber,Yp=Mp(Vp,wp);else{var u0=X.getFromId(Ve,kp);wp=u0.fraction2r(wp),Yp=Mp(Vp,wp),Ap=u0.cleanPos}Je[Vp]=Ap(Yp)},X.cleanPosition=function(Je,Ve,Mp){var kp=Mp==="paper"||Mp==="pixel"?v.ensureNumber:X.getFromId(Ve,Mp).cleanPos;return kp(Je)},X.redrawComponents=function(Je,Ve){Ve=Ve||X.listIds(Je);var Mp=Je._fullLayout;function kp(Vp,wp,Ap,Yp){for(var Fp=x.getComponentMethod(Vp,wp),u0={},g0=0;g0<Ve.length;g0++)for(var H0=Mp[X.id2name(Ve[g0])],Lm=H0[Ap],Em=0;Em<Lm.length;Em++){var Qm=Lm[Em];if(!u0[Qm]&&(Fp(Je,Qm),u0[Qm]=1,Yp))return}}kp("annotations","drawOne","_annIndices"),kp("shapes","drawOne","_shapeIndices"),kp("images","draw","_imgIndices",!0),kp("selections","drawOne","_selectionIndices")};var et=X.getDataConversions=function(Je,Ve,Mp,kp){var Vp,wp=Mp==="x"||Mp==="y"||Mp==="z"?Mp:kp;if(v.isArrayOrTypedArray(wp)){if(Vp={type:Oe(kp,void 0,{autotypenumbers:Je._fullLayout.autotypenumbers}),_categories:[]},X.setConvert(Vp),Vp.type==="category")for(var Ap=0;Ap<kp.length;Ap++)Vp.d2c(kp[Ap])}else Vp=X.getFromTrace(Je,Ve,wp);return Vp?{d2c:Vp.d2c,c2d:Vp.c2d}:wp==="ids"?{d2c:dr,c2d:dr}:{d2c:bt,c2d:bt}};function bt(Je){return+Je}function dr(Je){return String(Je)}X.getDataToCoordFunc=function(Je,Ve,Mp,kp){return et(Je,Ve,Mp,kp).d2c},X.counterLetter=function(Je){var Ve=Je.charAt(0);if(Ve==="x")return"y";if(Ve==="y")return"x"},X.minDtick=function(Je,Ve,Mp,kp){["log","category","multicategory"].indexOf(Je.type)!==-1||!kp?Je._minDtick=0:Je._minDtick===void 0?(Je._minDtick=Ve,Je._forceTick0=Mp):Je._minDtick&&((Je._minDtick/Ve+1e-6)%1<2e-6&&((Mp-Je._forceTick0)/Ve%1+1.000001)%1<2e-6?(Je._minDtick=Ve,Je._forceTick0=Mp):((Ve/Je._minDtick+1e-6)%1>2e-6||((Mp-Je._forceTick0)/Je._minDtick%1+1.000001)%1>2e-6)&&(Je._minDtick=0))},X.saveRangeInitial=function(Je,Ve){for(var Mp=X.list(Je,"",!0),kp=!1,Vp=0;Vp<Mp.length;Vp++){var wp=Mp[Vp],Ap=wp._rangeInitial0===void 0&&wp._rangeInitial1===void 0,Yp=Ap||wp.range[0]!==wp._rangeInitial0||wp.range[1]!==wp._rangeInitial1,Fp=wp.autorange;(Ap&&Fp!==!0||Ve&&Yp)&&(wp._rangeInitial0=Fp==="min"||Fp==="max reversed"?void 0:wp.range[0],wp._rangeInitial1=Fp==="max"||Fp==="min reversed"?void 0:wp.range[1],wp._autorangeInitial=Fp,kp=!0)}return kp},X.saveShowSpikeInitial=function(Je,Ve){for(var Mp=X.list(Je,"",!0),kp=!1,Vp="on",wp=0;wp<Mp.length;wp++){var Ap=Mp[wp],Yp=Ap._showSpikeInitial===void 0,Fp=Yp||Ap.showspikes!==Ap._showspikes;(Yp||Ve&&Fp)&&(Ap._showSpikeInitial=Ap.showspikes,kp=!0),Vp==="on"&&!Ap.showspikes&&(Vp="off")}return Je._fullLayout._cartesianSpikesEnabled=Vp,kp},X.autoBin=function(Je,Ve,Mp,kp,Vp,wp){var Ap=v.aggNums(Math.min,null,Je),Yp=v.aggNums(Math.max,null,Je);if(Ve.type==="category"||Ve.type==="multicategory")return{start:Ap-.5,end:Yp+.5,size:Math.max(1,Math.round(wp)||1),_dataSpan:Yp-Ap};Vp||(Vp=Ve.calendar);var Fp;if(Ve.type==="log"?Fp={type:"linear",range:[Ap,Yp]}:Fp={type:Ve.type,range:v.simpleMap([Ap,Yp],Ve.c2r,0,Vp),calendar:Vp},X.setConvert(Fp),wp=wp&&D.dtick(wp,Fp.type),wp)Fp.dtick=wp,Fp.tick0=D.tick0(void 0,Fp.type,Vp);else{var u0;if(Mp)u0=(Yp-Ap)/Mp;else{var g0=v.distinctVals(Je),H0=Math.pow(10,Math.floor(Math.log(g0.minDiff)/Math.LN10)),Lm=H0*v.roundUp(g0.minDiff/H0,[.9,1.9,4.9,9.9],!0);u0=Math.max(Lm,2*v.stdev(Je)/Math.pow(Je.length,kp?.25:.4)),s(u0)||(u0=1)}X.autoTicks(Fp,u0)}var Em=Fp.dtick,Qm=X.tickIncrement(X.tickFirst(Fp),Em,"reverse",Vp),xm,zm;if(typeof Em=="number")Qm=Ol(Qm,Je,Fp,Ap,Yp),zm=1+Math.floor((Yp-Qm)/Em),xm=Qm+zm*Em;else for(Fp.dtick.charAt(0)==="M"&&(Qm=Xl(Qm,Je,Em,Ap,Vp)),xm=Qm,zm=0;xm<=Yp;)xm=X.tickIncrement(xm,Em,!1,Vp),zm++;return{start:Ve.c2r(Qm,0,Vp),end:Ve.c2r(xm,0,Vp),size:Em,_dataSpan:Yp-Ap}};function Ol(Je,Ve,Mp,kp,Vp){var wp=0,Ap=0,Yp=0,Fp=0;function u0(Em){return(1+(Em-Je)*100/Mp.dtick)%100<2}for(var g0=0;g0<Ve.length;g0++)Ve[g0]%1===0?Yp++:s(Ve[g0])||Fp++,u0(Ve[g0])&&wp++,u0(Ve[g0]+Mp.dtick/2)&&Ap++;var H0=Ve.length-Fp;if(Yp===H0&&Mp.type!=="date")Mp.dtick<1?Je=kp-.5*Mp.dtick:(Je-=.5,Je+Mp.dtick<kp&&(Je+=Mp.dtick));else if(Ap<H0*.1&&(wp>H0*.3||u0(kp)||u0(Vp))){var Lm=Mp.dtick/2;Je+=Je+Lm<kp?Lm:-Lm}return Je}function Xl(Je,Ve,Mp,kp,Vp){var wp=v.findExactDates(Ve,Vp),Ap=.8;if(wp.exactDays>Ap){var Yp=Number(Mp.substr(1));wp.exactYears>Ap&&Yp%12===0?Je=X.tickIncrement(Je,"M6","reverse")+he*1.5:wp.exactMonths>Ap?Je=X.tickIncrement(Je,"M1","reverse")+he*15.5:Je-=le;var Fp=X.tickIncrement(Je,Mp);if(Fp<=kp)return Fp}return Je}X.prepMinorTicks=function(Je,Ve,Mp){if(!Ve.minor.dtick){delete Je.dtick;var kp=Ve.dtick&&s(Ve._tmin),Vp;if(kp){var wp=X.tickIncrement(Ve._tmin,Ve.dtick,!0);Vp=[Ve._tmin,wp*.99+Ve._tmin*.01]}else{var Ap=v.simpleMap(Ve.range,Ve.r2l);Vp=[Ap[0],.8*Ap[0]+.2*Ap[1]]}if(Je.range=v.simpleMap(Vp,Ve.l2r),Je._isMinor=!0,X.prepTicks(Je,Mp),kp){var Yp=s(Ve.dtick),Fp=s(Je.dtick),u0=Yp?Ve.dtick:+Ve.dtick.substring(1),g0=Fp?Je.dtick:+Je.dtick.substring(1);Yp&&Fp?Pp(u0,g0)?u0===2*Ce&&g0===2*he&&(Je.dtick=Ce):u0===2*Ce&&g0===3*he?Je.dtick=Ce:u0===Ce&&!(Ve._input.minor||{}).nticks?Je.dtick=he:t0(u0/g0,2.5)?Je.dtick=u0/2:Je.dtick=u0:String(Ve.dtick).charAt(0)==="M"?Fp?Je.dtick="M1":Pp(u0,g0)?u0>=12&&g0===2&&(Je.dtick="M3"):Je.dtick=Ve.dtick:String(Je.dtick).charAt(0)==="L"?String(Ve.dtick).charAt(0)==="L"?Pp(u0,g0)||(Je.dtick=t0(u0/g0,2.5)?Ve.dtick/2:Ve.dtick):Je.dtick="D1":Je.dtick==="D2"&&+Ve.dtick>1&&(Je.dtick=1)}Je.range=Ve.range}Ve.minor._tick0Init===void 0&&(Je.tick0=Ve.tick0)};function Pp(Je,Ve){return Math.abs((Je/Ve+.5)%1-.5)<.001}function t0(Je,Ve){return Math.abs(Je/Ve-1)<.001}X.prepTicks=function(Je,Ve){var Mp=v.simpleMap(Je.range,Je.r2l,void 0,void 0,Ve);if(Je.tickmode==="auto"||!Je.dtick){var kp=Je.nticks,Vp;kp||(Je.type==="category"||Je.type==="multicategory"?(Vp=Je.tickfont?v.bigFont(Je.tickfont.size||12):15,kp=Je._length/Vp):(Vp=Je._id.charAt(0)==="y"?40:80,kp=v.constrain(Je._length/Vp,4,9)+1),Je._name==="radialaxis"&&(kp*=2)),Je.minor&&Je.minor.tickmode!=="array"||Je.tickmode==="array"&&(kp*=100),Je._roughDTick=Math.abs(Mp[1]-Mp[0])/kp,X.autoTicks(Je,Je._roughDTick),Je._minDtick>0&&Je.dtick<Je._minDtick*2&&(Je.dtick=Je._minDtick,Je.tick0=Je.l2r(Je._forceTick0))}Je.ticklabelmode==="period"&&$p(Je),Je.tick0||(Je.tick0=Je.type==="date"?"2000-01-01":0),Je.type==="date"&&Je.dtick<.1&&(Je.dtick=.1),h0(Je)};function Wp(Je){return+Je.substring(1)}function $p(Je){var Ve;function Mp(){return!(s(Je.dtick)||Je.dtick.charAt(0)!=="M")}var kp=Mp(),Vp=X.getTickFormat(Je);if(Vp){var wp=Je._dtickInit!==Je.dtick;/%[fLQsSMX]/.test(Vp)||(/%[HI]/.test(Vp)?(Ve=Y,wp&&!kp&&Je.dtick<Y&&(Je.dtick=Y)):/%p/.test(Vp)?(Ve=le,wp&&!kp&&Je.dtick<le&&(Je.dtick=le)):/%[Aadejuwx]/.test(Vp)?(Ve=he,wp&&!kp&&Je.dtick<he&&(Je.dtick=he)):/%[UVW]/.test(Vp)?(Ve=Ce,wp&&!kp&&Je.dtick<Ce&&(Je.dtick=Ce)):/%[Bbm]/.test(Vp)?(Ve=H,wp&&(kp?Wp(Je.dtick)<1:Je.dtick<W)&&(Je.dtick="M1")):/%[q]/.test(Vp)?(Ve=w,wp&&(kp?Wp(Je.dtick)<3:Je.dtick<L)&&(Je.dtick="M3")):/%[Yy]/.test(Vp)&&(Ve=N,wp&&(kp?Wp(Je.dtick)<12:Je.dtick<z)&&(Je.dtick="M12")))}kp=Mp(),kp&&Je.tick0===Je._dowTick0&&(Je.tick0=Je._rawTick0),Je._definedDelta=Ve}function Lo(Je,Ve,Mp){for(var kp=0;kp<Je.length;kp++){var Vp=Je[kp].value,wp=kp,Ap=kp+1;kp<Je.length-1?(wp=kp,Ap=kp+1):kp>0?(wp=kp-1,Ap=kp):(wp=kp,Ap=kp);var Yp=Je[wp].value,Fp=Je[Ap].value,u0=Math.abs(Fp-Yp),g0=Mp||u0,H0=0;g0>=z?u0>=z&&u0<=P?H0=u0:H0=N:Mp===w&&g0>=L?u0>=L&&u0<=F?H0=u0:H0=w:g0>=W?u0>=W&&u0<=O?H0=u0:H0=H:Mp===Ce&&g0>=Ce?H0=Ce:g0>=he?H0=he:Mp===le&&g0>=le?H0=le:Mp===Y&&g0>=Y&&(H0=Y);var Lm;H0>=u0&&(H0=u0,Lm=!0);var Em=Vp+H0;if(Ve.rangebreaks&&H0>0){for(var Qm=84,xm=0,zm=0;zm<Qm;zm++){var f1=(zm+.5)/Qm;Ve.maskBreaks(Vp*(1-f1)+f1*Em)!==Ae&&xm++}H0*=xm/Qm,H0||(Je[kp].drop=!0),Lm&&u0>Ce&&(H0=u0)}(H0>0||kp===0)&&(Je[kp].periodX=Vp+H0/2)}}X.calcTicks=function(Je,Ve){for(var Mp=Je.type,kp=Je.calendar,Vp=Je.ticklabelstep,wp=Je.ticklabelmode==="period",Ap=Je.range[0]>Je.range[1],Yp=!Je.ticklabelindex||v.isArrayOrTypedArray(Je.ticklabelindex)?Je.ticklabelindex:[Je.ticklabelindex],Fp=v.simpleMap(Je.range,Je.r2l,void 0,void 0,Ve),u0=Fp[1]<Fp[0],g0=Math.min(Fp[0],Fp[1]),H0=Math.max(Fp[0],Fp[1]),Lm=Math.max(1e3,Je._length||0),Em=[],Qm=[],xm=[],zm=[],f1=[],dg=Je.minor&&(Je.minor.ticks||Je.minor.showgrid),E1=1;E1>=(dg?0:1);E1--){var Gg=!E1;E1?(Je._dtickInit=Je.dtick,Je._tick0Init=Je.tick0):(Je.minor._dtickInit=Je.minor.dtick,Je.minor._tick0Init=Je.minor.tick0);var $1=E1?Je:v.extendFlat({},Je,Je.minor);if(Gg?X.prepMinorTicks($1,Je,Ve):X.prepTicks($1,Ve),$1.tickmode==="array"){E1?(xm=[],Em=yp(Je,!Gg)):(zm=[],Qm=yp(Je,!Gg));continue}if($1.tickmode==="sync"){xm=[],Em=dt(Je);continue}var $g=Te(Fp),tg=$g[0],Og=$g[1],qg=s($1.dtick),W1=Mp==="log"&&!(qg||$1.dtick.charAt(0)==="L"),yv=X.tickFirst($1,Ve);if(E1){if(Je._tmin=yv,yv<tg!==u0)break;(Mp==="category"||Mp==="multicategory")&&(Og=u0?Math.max(-.5,Og):Math.min(Je._categories.length-.5,Og))}var iv=null,cg=yv,rv;if(E1){var Pg;qg?Pg=Je.dtick:Mp==="date"?typeof Je.dtick=="string"&&Je.dtick.charAt(0)==="M"&&(Pg=H*Je.dtick.substring(1)):Pg=Je._roughDTick,rv=Math.round((Je.r2l(cg)-Je.r2l(Je.tick0))/Pg)-1}var Vg=$1.dtick;for($1.rangebreaks&&$1._tick0Init!==$1.tick0&&(cg=mg(cg,Je),u0||(cg=X.tickIncrement(cg,Vg,!u0,kp))),E1&&wp&&(cg=X.tickIncrement(cg,Vg,!u0,kp),rv--);u0?cg>=Og:cg<=Og;cg=X.tickIncrement(cg,Vg,u0,kp)){if(E1&&rv++,$1.rangebreaks&&!u0){if(cg<tg)continue;if($1.maskBreaks(cg)===Ae&&mg(cg,$1)>=H0)break}if(xm.length>Lm||cg===iv)break;iv=cg;var Ov={value:cg};E1?(W1&&cg!==(cg|0)&&(Ov.simpleLabel=!0),Vp>1&&rv%Vp&&(Ov.skipLabel=!0),xm.push(Ov)):(Ov.minor=!0,zm.push(Ov))}}if(!zm||zm.length<2)Yp=!1;else{var xv=(zm[1].value-zm[0].value)*(Ap?-1:1);Cg(xv,Je.tickformat)||(Yp=!1)}if(!Yp)f1=xm;else{var _g=xm.concat(zm);wp&&xm.length&&(_g=_g.slice(1)),_g=_g.sort(function(og,sg){return og.value-sg.value}).filter(function(og,sg,fg){return sg===0||og.value!==fg[sg-1].value});var Ig=_g.map(function(og,sg){return og.minor===void 0&&!og.skipLabel?sg:null}).filter(function(og){return og!==null});Ig.forEach(function(og){Yp.map(function(sg){var fg=og+sg;fg>=0&&fg<_g.length&&v.pushUnique(f1,_g[fg])})})}if(dg){var Tg=Je.minor.ticks==="inside"&&Je.ticks==="outside"||Je.minor.ticks==="outside"&&Je.ticks==="inside";if(!Tg){for(var Ug=xm.map(function(og){return og.value}),wv=[],Dv=0;Dv<zm.length;Dv++){var gv=zm[Dv],Pv=gv.value;if(Ug.indexOf(Pv)===-1){for(var Bv=!1,Tv=0;!Bv&&Tv<xm.length;Tv++)1e7+xm[Tv].value===1e7+Pv&&(Bv=!0);Bv||wv.push(gv)}}zm=wv}}wp&&Lo(f1,Je,Je._definedDelta);var Fg;if(Je.rangebreaks){var sy=Je._id.charAt(0)==="y",qv=1;Je.tickmode==="auto"&&(qv=Je.tickfont?Je.tickfont.size:12);var uy=NaN;for(Fg=xm.length-1;Fg>-1;Fg--){if(xm[Fg].drop){xm.splice(Fg,1);continue}xm[Fg].value=mg(xm[Fg].value,Je);var $v=Je.c2p(xm[Fg].value);(sy?uy>$v-qv:uy<$v+qv)?xm.splice(u0?Fg+1:Fg,1):uy=$v}}ig(Je)&&Math.abs(Fp[1]-Fp[0])===360&&xm.pop(),Je._tmax=(xm[xm.length-1]||{}).value,Je._prevDateHead="",Je._inCalcTicks=!0;var Yv,by=function(og){og.text="",Je._prevDateHead=Yv};xm=xm.concat(zm);function gy(og,sg){var fg=X.tickText(og,sg.value,!1,sg.simpleLabel),Bg=sg.periodX;return Bg!==void 0&&(fg.periodX=Bg,(Bg>H0||Bg<g0)&&(Bg>H0&&(fg.periodX=H0),Bg<g0&&(fg.periodX=g0),by(fg))),fg}var ny;for(Fg=0;Fg<xm.length;Fg++){var Ty=xm[Fg].minor,Yg=xm[Fg].value;Ty?(Yp&&f1.indexOf(xm[Fg])!==-1?ny=gy(Je,xm[Fg]):ny={x:Yg},ny.minor=!0,Qm.push(ny)):(Yv=Je._prevDateHead,ny=gy(Je,xm[Fg]),(xm[Fg].skipLabel||Yp&&f1.indexOf(xm[Fg])===-1)&&by(ny),Em.push(ny))}return Em=Em.concat(Qm),Je._inCalcTicks=!1,wp&&Em.length&&(Em[0].noTick=!0),Em};function kl(Je,Ve){return Je.rangebreaks&&(Ve=Ve.filter(function(Mp){return Je.maskBreaks(Mp.x)!==Ae})),Ve}function dt(Je){var Ve=Je._mainAxis,Mp=[];if(Ve._vals){for(var kp=0;kp<Ve._vals.length;kp++)if(!Ve._vals[kp].noTick){var Vp=Ve.l2p(Ve._vals[kp].x),wp=Je.p2l(Vp),Ap=X.tickText(Je,wp);Ve._vals[kp].minor&&(Ap.minor=!0,Ap.text=""),Mp.push(Ap)}}return Mp=kl(Je,Mp),Mp}function yp(Je,Ve){var Mp=v.simpleMap(Je.range,Je.r2l),kp=Te(Mp),Vp=Math.min(kp[0],kp[1]),wp=Math.max(kp[0],kp[1]),Ap=Je.type==="category"?Je.d2l_noadd:Je.d2l;Je.type==="log"&&String(Je.dtick).charAt(0)!=="L"&&(Je.dtick="L"+Math.pow(10,Math.floor(Math.min(Je.range[0],Je.range[1]))-1));for(var Yp=[],Fp=0;Fp<=1;Fp++)if(!(Ve!==void 0&&(Ve&&Fp||Ve===!1&&!Fp))&&!(Fp&&!Je.minor)){var u0=Fp?Je.minor.tickvals:Je.tickvals,g0=Fp?[]:Je.ticktext;if(u0){v.isArrayOrTypedArray(g0)||(g0=[]);for(var H0=0;H0<u0.length;H0++){var Lm=Ap(u0[H0]);if(Lm>Vp&&Lm<wp){var Em=X.tickText(Je,Lm,!1,String(g0[H0]));Fp&&(Em.minor=!0,Em.text=""),Yp.push(Em)}}}}return Yp=kl(Je,Yp),Yp}var Bp=[2,5,10],Jp=[1,2,3,6,12],m0=[1,2,5,10,15,30],s0=[1,2,3,7,14],y0=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],M0=[-.301,0,.301,.699,1],T0=[15,30,45,90,180];function G0(Je,Ve,Mp){return Ve*v.roundUp(Je/Ve,Mp)}X.autoTicks=function(Je,Ve,Mp){var kp;function Vp(H0){return Math.pow(H0,Math.floor(Math.log(Ve)/Math.LN10))}if(Je.type==="date"){Je.tick0=v.dateTick0(Je.calendar,0);var wp=2*Ve;if(wp>N)Ve/=N,kp=Vp(10),Je.dtick="M"+12*G0(Ve,kp,Bp);else if(wp>H)Ve/=H,Je.dtick="M"+G0(Ve,1,Jp);else if(wp>he){if(Je.dtick=G0(Ve,he,Je._hasDayOfWeekBreaks?[1,2,7,14]:s0),!Mp){var Ap=X.getTickFormat(Je),Yp=Je.ticklabelmode==="period";Yp&&(Je._rawTick0=Je.tick0),/%[uVW]/.test(Ap)?Je.tick0=v.dateTick0(Je.calendar,2):Je.tick0=v.dateTick0(Je.calendar,1),Yp&&(Je._dowTick0=Je.tick0)}}else wp>Y?Je.dtick=G0(Ve,Y,Jp):wp>Re?Je.dtick=G0(Ve,Re,m0):wp>fe?Je.dtick=G0(Ve,fe,m0):(kp=Vp(10),Je.dtick=G0(Ve,kp,Bp))}else if(Je.type==="log"){Je.tick0=0;var Fp=v.simpleMap(Je.range,Je.r2l);if(Je._isMinor&&(Ve*=1.5),Ve>.7)Je.dtick=Math.ceil(Ve);else if(Math.abs(Fp[1]-Fp[0])<1){var u0=1.5*Math.abs((Fp[1]-Fp[0])/Ve);Ve=Math.abs(Math.pow(10,Fp[1])-Math.pow(10,Fp[0]))/u0,kp=Vp(10),Je.dtick="L"+G0(Ve,kp,Bp)}else Je.dtick=Ve>.3?"D2":"D1"}else Je.type==="category"||Je.type==="multicategory"?(Je.tick0=0,Je.dtick=Math.ceil(Math.max(Ve,1))):ig(Je)?(Je.tick0=0,kp=1,Je.dtick=G0(Ve,kp,T0)):(Je.tick0=0,kp=Vp(10),Je.dtick=G0(Ve,kp,Bp));if(Je.dtick===0&&(Je.dtick=1),!s(Je.dtick)&&typeof Je.dtick!="string"){var g0=Je.dtick;throw Je.dtick=1,"ax.dtick error: "+String(g0)}};function h0(Je){var Ve=Je.dtick;if(Je._tickexponent=0,!s(Ve)&&typeof Ve!="string"&&(Ve=1),(Je.type==="category"||Je.type==="multicategory")&&(Je._tickround=null),Je.type==="date"){var Mp=Je.r2l(Je.tick0),kp=Je.l2r(Mp).replace(/(^-|i)/g,""),Vp=kp.length;if(String(Ve).charAt(0)==="M")Vp>10||kp.substr(5)!=="01-01"?Je._tickround="d":Je._tickround=+Ve.substr(1)%12===0?"y":"m";else if(Ve>=he&&Vp<=10||Ve>=he*15)Je._tickround="d";else if(Ve>=Re&&Vp<=16||Ve>=Y)Je._tickround="M";else if(Ve>=fe&&Vp<=19||Ve>=Re)Je._tickround="S";else{var wp=Je.l2r(Mp+Ve).replace(/^-/,"").length;Je._tickround=Math.max(Vp,wp)-20,Je._tickround<0&&(Je._tickround=4)}}else if(s(Ve)||Ve.charAt(0)==="L"){var Ap=Je.range.map(Je.r2d||Number);s(Ve)||(Ve=Number(Ve.substr(1))),Je._tickround=2-Math.floor(Math.log(Ve)/Math.LN10+.01);var Yp=Math.max(Math.abs(Ap[0]),Math.abs(Ap[1])),Fp=Math.floor(Math.log(Yp)/Math.LN10+.01),u0=Je.minexponent===void 0?3:Je.minexponent;Math.abs(Fp)>u0&&(Vl(Je.exponentformat)&&Je.exponentformat!=="SI extended"&&!Np(Fp)||Vl(Je.exponentformat)&&Je.exponentformat==="SI extended"&&!Up(Fp)?Je._tickexponent=3*Math.round((Fp-1)/3):Je._tickexponent=Fp)}else Je._tickround=null}X.tickIncrement=function(Je,Ve,Mp,kp){var Vp=Mp?-1:1;if(s(Ve))return v.increment(Je,Vp*Ve);var wp=Ve.charAt(0),Ap=Vp*Number(Ve.substr(1));if(wp==="M")return v.incrementMonth(Je,Ap,kp);if(wp==="L")return Math.log(Math.pow(10,Je)+Ap)/Math.LN10;if(wp==="D"){var Yp=Ve==="D2"?M0:y0,Fp=Je+Vp*.01,u0=v.roundUp(v.mod(Fp,1),Yp,Mp);return Math.floor(Fp)+Math.log(g.round(Math.pow(10,u0),1))/Math.LN10}throw"unrecognized dtick "+String(Ve)},X.tickFirst=function(Je,Ve){var Mp=Je.r2l||Number,kp=v.simpleMap(Je.range,Mp,void 0,void 0,Ve),Vp=kp[1]<kp[0],wp=Vp?Math.floor:Math.ceil,Ap=Te(kp)[0],Yp=Je.dtick,Fp=Mp(Je.tick0);if(s(Yp)){var u0=wp((Ap-Fp)/Yp)*Yp+Fp;return(Je.type==="category"||Je.type==="multicategory")&&(u0=v.constrain(u0,0,Je._categories.length-1)),u0}var g0=Yp.charAt(0),H0=Number(Yp.substr(1));if(g0==="M"){for(var Lm=0,Em=Fp,Qm,xm,zm;Lm<10;){if(Qm=X.tickIncrement(Em,Yp,Vp,Je.calendar),(Qm-Ap)*(Em-Ap)<=0)return Vp?Math.min(Em,Qm):Math.max(Em,Qm);xm=(Ap-(Em+Qm)/2)/(Qm-Em),zm=g0+(Math.abs(Math.round(xm))||1)*H0,Em=X.tickIncrement(Em,zm,xm<0?!Vp:Vp,Je.calendar),Lm++}return v.error("tickFirst did not converge",Je),Em}else{if(g0==="L")return Math.log(wp((Math.pow(10,Ap)-Fp)/H0)*H0+Fp)/Math.LN10;if(g0==="D"){var f1=Yp==="D2"?M0:y0,dg=v.roundUp(v.mod(Ap,1),f1,Vp);return Math.floor(Ap)+Math.log(g.round(Math.pow(10,dg),1))/Math.LN10}else throw"unrecognized dtick "+String(Yp)}},X.tickText=function(Je,Ve,Mp,kp){var Vp=W0(Je,Ve),wp=Je.tickmode==="array",Ap=Mp||wp,Yp=Je.type,Fp=Yp==="category"?Je.d2l_noadd:Je.d2l,u0,g0=function(zm){var f1=Je.l2p(zm);return f1>=0&&f1<=Je._length?zm:null};if(wp&&v.isArrayOrTypedArray(Je.ticktext)){var H0=v.simpleMap(Je.range,Je.r2l),Lm=(Math.abs(H0[1]-H0[0])-(Je._lBreaks||0))/1e4;for(u0=0;u0<Je.ticktext.length&&!(Math.abs(Ve-Fp(Je.tickvals[u0]))<Lm);u0++);if(u0<Je.ticktext.length)return Vp.text=String(Je.ticktext[u0]),Vp.xbnd=[g0(Vp.x-.5),g0(Vp.x+Je.dtick-.5)],Vp}function Em(zm){if(zm===void 0)return!0;if(Mp)return zm==="none";var f1={first:Je._tmin,last:Je._tmax}[zm];return zm!=="all"&&Ve!==f1}var Qm=Mp?"never":Je.exponentformat!=="none"&&Em(Je.showexponent)?"hide":"";if(Yp==="date"?rm(Je,Vp,Mp,Ap):Yp==="log"?V0(Je,Vp,Mp,Ap,Qm):Yp==="category"?um(Je,Vp):Yp==="multicategory"?Uo(Je,Vp,Mp):ig(Je)?Be(Je,Vp,Mp,Ap,Qm):Tp(Je,Vp,Mp,Ap,Qm),kp||(Je.tickprefix&&!Em(Je.showtickprefix)&&(Vp.text=Je.tickprefix+Vp.text),Je.ticksuffix&&!Em(Je.showticksuffix)&&(Vp.text+=Je.ticksuffix)),Je.labelalias&&Je.labelalias.hasOwnProperty(Vp.text)){var xm=Je.labelalias[Vp.text];typeof xm=="string"&&(Vp.text=xm)}return(Je.tickson==="boundaries"||Je.showdividers)&&(Vp.xbnd=[g0(Vp.x-.5),g0(Vp.x+Je.dtick-.5)]),Vp},X.hoverLabelText=function(Je,Ve,Mp){Mp&&(Je=v.extendFlat({},Je,{hoverformat:Mp}));var kp=v.isArrayOrTypedArray(Ve)?Ve[0]:Ve,Vp=v.isArrayOrTypedArray(Ve)?Ve[1]:void 0;if(Vp!==void 0&&Vp!==kp)return X.hoverLabelText(Je,kp,Mp)+" - "+X.hoverLabelText(Je,Vp,Mp);var wp=Je.type==="log"&&kp<=0,Ap=X.tickText(Je,Je.c2l(wp?-kp:kp),"hover").text;return wp?kp===0?"0":ye+Ap:Ap};function W0(Je,Ve,Mp){var kp=Je.tickfont||{};return{x:Ve,dx:0,dy:0,text:Mp||"",fontSize:kp.size,font:kp.family,fontWeight:kp.weight,fontStyle:kp.style,fontVariant:kp.variant,fontTextcase:kp.textcase,fontLineposition:kp.lineposition,fontShadow:kp.shadow,fontColor:kp.color}}function rm(Je,Ve,Mp,kp){var Vp=Je._tickround,wp=Mp&&Je.hoverformat||X.getTickFormat(Je);kp=!wp&&kp,kp&&(s(Vp)?Vp=4:Vp={y:"m",m:"d",d:"M",M:"S",S:4}[Vp]);var Ap=v.formatDate(Ve.x,wp,Vp,Je._dateFormat,Je.calendar,Je._extraFormat),Yp,Fp=Ap.indexOf(`
`);if(Fp!==-1&&(Yp=Ap.substr(Fp+1),Ap=Ap.substr(0,Fp)),kp&&(Yp!==void 0&&(Ap==="00:00:00"||Ap==="00:00")?(Ap=Yp,Yp=""):Ap.length===8&&(Ap=Ap.replace(/:00$/,""))),Yp)if(Mp)Vp==="d"?Ap+=", "+Yp:Ap=Yp+(Ap?", "+Ap:"");else if(!Je._inCalcTicks||Je._prevDateHead!==Yp)Je._prevDateHead=Yp,Ap+="<br>"+Yp;else{var u0=P1(Je),g0=Je._trueSide||Je.side;(!u0&&g0==="top"||u0&&g0==="bottom")&&(Ap+="<br> ")}Ve.text=Ap}function V0(Je,Ve,Mp,kp,Vp){var wp=Je.dtick,Ap=Ve.x,Yp=Je.tickformat,Fp=typeof wp=="string"&&wp.charAt(0);if(Vp==="never"&&(Vp=""),kp&&Fp!=="L"&&(wp="L3",Fp="L"),Yp||Fp==="L")Ve.text=Zp(Math.pow(10,Ap),Je,Vp,kp);else if(s(wp)||Fp==="D"&&(Je.minorloglabels==="complete"||v.mod(Ap+.01,1)<.1)){Je.minorloglabels==="complete"&&!(v.mod(Ap+.01,1)<.1)&&(Ve.fontSize*=.75);var u0=Math.pow(10,Ap).toExponential(0),g0=u0.split("e"),H0=+g0[1],Lm=Math.abs(H0),Em=Je.exponentformat;Em==="power"||Vl(Em)&&Em!=="SI extended"&&Np(H0)||Vl(Em)&&Em==="SI extended"&&Up(H0)?(Ve.text=g0[0],Lm>0&&(Ve.text+="x10"),Ve.text==="1x10"&&(Ve.text="10"),H0!==0&&H0!==1&&(Ve.text+="<sup>"+(H0>0?"":ye)+Lm+"</sup>"),Ve.fontSize*=1.25):(Em==="e"||Em==="E")&&Lm>2?Ve.text=g0[0]+Em+(H0>0?"+":ye)+Lm:(Ve.text=Zp(Math.pow(10,Ap),Je,"","fakehover"),wp==="D1"&&Je._id.charAt(0)==="y"&&(Ve.dy-=Ve.fontSize/6))}else if(Fp==="D")Ve.text=Je.minorloglabels==="none"?"":String(Math.round(Math.pow(10,v.mod(Ap,1)))),Ve.fontSize*=.75;else throw"unrecognized dtick "+String(wp);if(Je.dtick==="D1"){var Qm=String(Ve.text).charAt(0);(Qm==="0"||Qm==="1")&&(Je._id.charAt(0)==="y"?Ve.dx-=Ve.fontSize/4:(Ve.dy+=Ve.fontSize/2,Ve.dx+=(Je.range[1]>Je.range[0]?1:-1)*Ve.fontSize*(Ap<0?.5:.25)))}}function um(Je,Ve){var Mp=Je._categories[Math.round(Ve.x)];Mp===void 0&&(Mp=""),Ve.text=String(Mp)}function Uo(Je,Ve,Mp){var kp=Math.round(Ve.x),Vp=Je._categories[kp]||[],wp=Vp[1]===void 0?"":String(Vp[1]),Ap=Vp[0]===void 0?"":String(Vp[0]);Mp?Ve.text=Ap+" - "+wp:(Ve.text=wp,Ve.text2=Ap)}function Tp(Je,Ve,Mp,kp,Vp){Vp==="never"?Vp="":Je.showexponent==="all"&&Math.abs(Ve.x/Je.dtick)<1e-6&&(Vp="hide"),Ve.text=Zp(Ve.x,Je,Vp,kp)}function Be(Je,Ve,Mp,kp,Vp){if(Je.thetaunit==="radians"&&!Mp){var wp=Ve.x/180;if(wp===0)Ve.text="0";else{var Ap=ft(wp);if(Ap[1]>=100)Ve.text=Zp(v.deg2rad(Ve.x),Je,Vp,kp);else{var Yp=Ve.x<0;Ap[1]===1?Ap[0]===1?Ve.text="π":Ve.text=Ap[0]+"π":Ve.text=["<sup>",Ap[0],"</sup>","⁄","<sub>",Ap[1],"</sub>","π"].join(""),Yp&&(Ve.text=ye+Ve.text)}}}else Ve.text=Zp(Ve.x,Je,Vp,kp)}function ft(Je){function Ve(Yp,Fp){return Math.abs(Yp-Fp)<=1e-6}function Mp(Yp,Fp){return Ve(Fp,0)?Yp:Mp(Fp,Yp%Fp)}function kp(Yp){for(var Fp=1;!Ve(Math.round(Yp*Fp)/Fp,Yp);)Fp*=10;return Fp}var Vp=kp(Je),wp=Je*Vp,Ap=Math.abs(Mp(wp,Vp));return[Math.round(wp/Ap),Math.round(Vp/Ap)]}var mn=["f","p","n","μ","m","","k","M","G","T"],Bl=["q","r","y","z","a",...mn,"P","E","Z","Y","R","Q"],Vl=Je=>["SI","SI extended","B"].includes(Je);function Np(Je){return Je>14||Je<-15}function Up(Je){return Je>32||Je<-30}function Qp(Je,Ve){return Vl(Ve)?!!(Ve==="SI extended"&&Up(Je)||Ve!=="SI extended"&&Np(Je)):!1}function Zp(Je,Ve,Mp,kp){var Vp=Je<0,wp=Ve._tickround,Ap=Mp||Ve.exponentformat||"B",Yp=Ve._tickexponent,Fp=X.getTickFormat(Ve),u0=Ve.separatethousands;if(kp){var g0={exponentformat:Ap,minexponent:Ve.minexponent,dtick:Ve.showexponent==="none"?Ve.dtick:s(Je)&&Math.abs(Je)||1,range:Ve.showexponent==="none"?Ve.range.map(Ve.r2d):[0,Je||1]};h0(g0),wp=(Number(g0._tickround)||0)+4,Yp=g0._tickexponent,Ve.hoverformat&&(Fp=Ve.hoverformat)}if(Fp)return Ve._numFormat(Fp)(Je).replace(/-/g,ye);var H0=Math.pow(10,-wp)/2;if(Ap==="none"&&(Yp=0),Je=Math.abs(Je),Je<H0)Je="0",Vp=!1;else{if(Je+=H0,Yp&&(Je*=Math.pow(10,-Yp),wp+=Yp),wp===0)Je=String(Math.floor(Je));else if(wp<0){Je=String(Math.round(Je)),Je=Je.substr(0,Je.length+wp);for(var Lm=wp;Lm<0;Lm++)Je+="0"}else{Je=String(Je);var Em=Je.indexOf(".")+1;Em&&(Je=Je.substr(0,Em+wp).replace(/\.?0+$/,""))}Je=v.numSeparate(Je,Ve._separators,u0)}if(Yp&&Ap!=="hide"){Qp(Yp,Ap)&&(Ap="power");var Qm;Yp<0?Qm=ye+-Yp:Ap!=="power"?Qm="+"+Yp:Qm=String(Yp),Ap==="e"||Ap==="E"?Je+=Ap+Qm:Ap==="power"?Je+="×10<sup>"+Qm+"</sup>":Ap==="B"&&Yp===9?Je+="B":Vl(Ap)&&(Je+=Ap==="SI extended"?Bl[Yp/3+10]:mn[Yp/3+5])}return Vp?ye+Je:Je}X.getTickFormat=function(Je){var Ve;function Mp(Fp){return typeof Fp!="string"?Fp:Number(Fp.replace("M",""))*H}function kp(Fp,u0){var g0=["L","D"];if(typeof Fp==typeof u0){if(typeof Fp=="number")return Fp-u0;var H0=g0.indexOf(Fp.charAt(0)),Lm=g0.indexOf(u0.charAt(0));return H0===Lm?Number(Fp.replace(/(L|D)/g,""))-Number(u0.replace(/(L|D)/g,"")):H0-Lm}else return typeof Fp=="number"?1:-1}function Vp(Fp,u0,g0){var H0=g0||function(Qm){return Qm},Lm=u0[0],Em=u0[1];return(!Lm&&typeof Lm!="number"||H0(Lm)<=H0(Fp))&&(!Em&&typeof Em!="number"||H0(Em)>=H0(Fp))}function wp(Fp,u0){var g0=u0[0]===null,H0=u0[1]===null,Lm=kp(Fp,u0[0])>=0,Em=kp(Fp,u0[1])<=0;return(g0||Lm)&&(H0||Em)}var Ap,Yp;if(Je.tickformatstops&&Je.tickformatstops.length>0)switch(Je.type){case"date":case"linear":{for(Ve=0;Ve<Je.tickformatstops.length;Ve++)if(Yp=Je.tickformatstops[Ve],Yp.enabled&&Vp(Je.dtick,Yp.dtickrange,Mp)){Ap=Yp;break}break}case"log":{for(Ve=0;Ve<Je.tickformatstops.length;Ve++)if(Yp=Je.tickformatstops[Ve],Yp.enabled&&wp(Je.dtick,Yp.dtickrange)){Ap=Yp;break}break}}return Ap?Ap.value:Je.tickformat},X.getSubplots=function(Je,Ve){var Mp=Je._fullLayout._subplots,kp=Mp.cartesian.concat(Mp.gl2d||[]),Vp=Ve?X.findSubplotsWithAxis(kp,Ve):kp;return Vp.sort(function(wp,Ap){var Yp=wp.substr(1).split("y"),Fp=Ap.substr(1).split("y");return Yp[0]===Fp[0]?+Yp[1]-+Fp[1]:+Yp[0]-+Fp[0]}),Vp},X.findSubplotsWithAxis=function(Je,Ve){for(var Mp=new RegExp(Ve._id.charAt(0)==="x"?"^"+Ve._id+"y":Ve._id+"$"),kp=[],Vp=0;Vp<Je.length;Vp++){var wp=Je[Vp];Mp.test(wp)&&kp.push(wp)}return kp},X.makeClipPaths=function(Je){var Ve=Je._fullLayout;if(!Ve._hasOnlyLargeSploms){var Mp={_offset:0,_length:Ve.width,_id:""},kp={_offset:0,_length:Ve.height,_id:""},Vp=X.list(Je,"x",!0),wp=X.list(Je,"y",!0),Ap=[],Yp,Fp;for(Yp=0;Yp<Vp.length;Yp++)for(Ap.push({x:Vp[Yp],y:kp}),Fp=0;Fp<wp.length;Fp++)Yp===0&&Ap.push({x:Mp,y:wp[Fp]}),Ap.push({x:Vp[Yp],y:wp[Fp]});var u0=Ve._clips.selectAll(".axesclip").data(Ap,function(g0){return g0.x._id+g0.y._id});u0.enter().append("clipPath").classed("axesclip",!0).attr("id",function(g0){return"clip"+Ve._uid+g0.x._id+g0.y._id}).append("rect"),u0.exit().remove(),u0.each(function(g0){g.select(this).select("rect").attr({x:g0.x._offset||0,y:g0.y._offset||0,width:g0.x._length||1,height:g0.y._length||1})})}},X.draw=function(Je,Ve,Mp){var kp=Je._fullLayout;Ve==="redraw"&&kp._paper.selectAll("g.subplot").each(function(Fp){var u0=Fp[0],g0=kp._plots[u0];if(g0){var H0=g0.xaxis,Lm=g0.yaxis;g0.xaxislayer.selectAll("."+H0._id+"tick").remove(),g0.yaxislayer.selectAll("."+Lm._id+"tick").remove(),g0.xaxislayer.selectAll("."+H0._id+"tick2").remove(),g0.yaxislayer.selectAll("."+Lm._id+"tick2").remove(),g0.xaxislayer.selectAll("."+H0._id+"divider").remove(),g0.yaxislayer.selectAll("."+Lm._id+"divider").remove(),g0.minorGridlayer&&g0.minorGridlayer.selectAll("path").remove(),g0.gridlayer&&g0.gridlayer.selectAll("path").remove(),g0.zerolinelayer&&g0.zerolinelayer.selectAll("path").remove(),g0.zerolinelayerAbove&&g0.zerolinelayerAbove.selectAll("path").remove(),kp._infolayer.select(".g-"+H0._id+"title").remove(),kp._infolayer.select(".g-"+Lm._id+"title").remove()}});var Vp=!Ve||Ve==="redraw"?X.listIds(Je):Ve,wp=X.list(Je),Ap=wp.filter(function(Fp){return Fp.autoshift}).map(function(Fp){return Fp.overlaying});Vp.map(function(Fp){var u0=X.getFromId(Je,Fp);if(u0.tickmode==="sync"&&u0.overlaying){var g0=Vp.findIndex(function(H0){return H0===u0.overlaying});g0>=0&&Vp.unshift(Vp.splice(g0,1).shift())}});var Yp={false:{left:0,right:0}};return v.syncOrAsync(Vp.map(function(Fp){return function(){if(Fp){var u0=X.getFromId(Je,Fp);Mp||(Mp={}),Mp.axShifts=Yp,Mp.overlayingShiftedAx=Ap;var g0=X.drawOne(Je,u0,Mp);return u0._shiftPusher&&G1(u0,u0._fullDepth||0,Yp,!0),u0._r=u0.range.slice(),u0._rl=v.simpleMap(u0._r,u0.r2l),g0}}}))},X.drawOne=function(Je,Ve,Mp){Mp=Mp||{};var kp=Mp.axShifts||{},Vp=Mp.overlayingShiftedAx||[],wp,Ap,Yp;Ve.setScale();var Fp=Je._fullLayout,u0=Ve._id,g0=u0.charAt(0),H0=X.counterLetter(u0),Lm=Fp._plots[Ve._mainSubplot],Em=Ve.zerolinelayer==="above traces";if(!Lm)return;if(Ve._shiftPusher=Ve.autoshift||Vp.indexOf(Ve._id)!==-1||Vp.indexOf(Ve.overlaying)!==-1,Ve._shiftPusher&Ve.anchor==="free"){var Qm=Ve.linewidth/2||0;Ve.ticks==="inside"&&(Qm+=Ve.ticklen),G1(Ve,Qm,kp,!0),G1(Ve,Ve.shift||0,kp,!1)}(Mp.skipTitle!==!0||Ve._shift===void 0)&&(Ve._shift=Sm(Ve,kp));var xm=Lm[g0+"axislayer"],zm=Ve._mainLinePosition,f1=zm+=Ve._shift,dg=Ve._mainMirrorPosition,E1=Ve._vals=X.calcTicks(Ve),Gg=[Ve.mirror,f1,dg].join("_");for(wp=0;wp<E1.length;wp++)E1[wp].axInfo=Gg;Ve._selections={},Ve._tickAngles&&(Ve._prevTickAngles=Ve._tickAngles),Ve._tickAngles={},Ve._depth=null;var $1={};function $g(og){var sg=u0+(og||"tick");return $1[sg]||($1[sg]=lm(Ve,sg,f1)),$1[sg]}if(Ve.visible){var tg=X.makeTransTickFn(Ve),Og=X.makeTransTickLabelFn(Ve),qg,W1,yv=Ve.ticks==="inside",iv=Ve.ticks==="outside";if(Ve.tickson==="boundaries"){var cg=R0(Ve,E1);W1=X.clipEnds(Ve,cg),qg=yv?W1:cg}else W1=X.clipEnds(Ve,E1),qg=yv&&Ve.ticklabelmode!=="period"?W1:E1;var rv=Ve._gridVals=W1,Pg=N0(Ve,E1);if(!Fp._hasOnlyLargeSploms){var Vg=Ve._subplotsWith,Ov={};for(wp=0;wp<Vg.length;wp++){Ap=Vg[wp],Yp=Fp._plots[Ap];var xv=Yp[H0+"axis"],_g=xv._mainAxis._id;if(!Ov[_g]){Ov[_g]=1;var Ig=g0==="x"?"M0,"+xv._offset+"v"+xv._length:"M"+xv._offset+",0h"+xv._length;X.drawGrid(Je,Ve,{vals:rv,counterAxis:xv,layer:Yp.gridlayer.select("."+u0),minorLayer:Yp.minorGridlayer.select("."+u0),path:Ig,transFn:tg}),X.drawZeroLine(Je,Ve,{counterAxis:xv,layer:Em?Yp.zerolinelayerAbove:Yp.zerolinelayer,path:Ig,transFn:tg})}}}var Tg,Ug=X.getTickSigns(Ve),wv=X.getTickSigns(Ve,"minor");if(Ve.ticks||Ve.minor&&Ve.minor.ticks){var Dv=X.makeTickPath(Ve,f1,Ug[2]),gv=X.makeTickPath(Ve,f1,wv[2],{minor:!0}),Pv,Bv,Tv,Fg;if(Ve._anchorAxis&&Ve.mirror&&Ve.mirror!==!0?(Pv=X.makeTickPath(Ve,dg,Ug[3]),Bv=X.makeTickPath(Ve,dg,wv[3],{minor:!0}),Tv=Dv+Pv,Fg=gv+Bv):(Pv="",Bv="",Tv=Dv,Fg=gv),Ve.showdividers&&iv&&Ve.tickson==="boundaries"){var sy={};for(wp=0;wp<Pg.length;wp++)sy[Pg[wp].x]=1;Tg=function(og){return sy[og.x]?Pv:Tv}}else Tg=function(og){return og.minor?Fg:Tv}}if(X.drawTicks(Je,Ve,{vals:qg,layer:xm,path:Tg,transFn:tg}),Ve.mirror==="allticks"){var qv=Object.keys(Ve._linepositions||{});for(wp=0;wp<qv.length;wp++){Ap=qv[wp],Yp=Fp._plots[Ap];var uy=Ve._linepositions[Ap]||[],$v=uy[0],Yv=uy[1],by=uy[2],gy=X.makeTickPath(Ve,$v,by?Ug[0]:wv[0],{minor:by})+X.makeTickPath(Ve,Yv,by?Ug[1]:wv[1],{minor:by});X.drawTicks(Je,Ve,{vals:qg,layer:Yp[g0+"axislayer"],path:gy,transFn:tg})}}var ny=[];if(ny.push(function(){return X.drawLabels(Je,Ve,{vals:E1,layer:xm,plotinfo:Yp,transFn:Og,labelFns:X.makeLabelFns(Ve,f1)})}),Ve.type==="multicategory"){var Ty={x:2,y:10}[g0];ny.push(function(){var og={x:"height",y:"width"}[g0],sg=$g()[og]+Ty+(Ve._tickAngles[u0+"tick"]?Ve.tickfont.size*vs:0);return X.drawLabels(Je,Ve,{vals:k0(Ve,E1),layer:xm,cls:u0+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:tg,labelFns:X.makeLabelFns(Ve,f1+sg*Ug[4])})}),ny.push(function(){return Ve._depth=Ug[4]*($g("tick2")[Ve.side]-f1),b1(Je,Ve,{vals:Pg,layer:xm,path:X.makeTickPath(Ve,f1,Ug[4],{len:Ve._depth}),transFn:tg})})}else Ve.title.hasOwnProperty("standoff")&&ny.push(function(){Ve._depth=Ug[4]*($g()[Ve.side]-f1)});var Yg=x.getComponentMethod("rangeslider","isVisible")(Ve);return!Mp.skipTitle&&!(Yg&&Ve.side==="bottom")&&ny.push(function(){return fm(Je,Ve)}),ny.push(function(){var og=Ve.side.charAt(0),sg=Se[Ve.side].charAt(0),fg=X.getPxPosition(Je,Ve),Bg=iv?Ve.ticklen:0,nv,Xg,ty,Qy;(Ve.automargin||Yg||Ve._shiftPusher)&&(Ve.type==="multicategory"?nv=$g("tick2"):(nv=$g(),g0==="x"&&og==="b"&&(Ve._depth=Math.max(nv.width>0?nv.bottom-fg:0,Bg))));var vy=0,jv=0;if(Ve._shiftPusher&&(vy=Math.max(Bg,nv.height>0?og==="l"?fg-nv.left:nv.right-fg:0),Ve.title.text!==Fp._dfltTitle[g0]&&(jv=(Ve._titleStandoff||0)+(Ve._titleScoot||0),og==="l"&&(jv+=Bm(Ve))),Ve._fullDepth=Math.max(vy,jv)),Ve.automargin){Xg={x:0,y:0,r:0,l:0,t:0,b:0};var wy=[0,1],ex=typeof Ve._shift=="number"?Ve._shift:0;if(g0==="x"){if(og==="b"?Xg[og]=Ve._depth:(Xg[og]=Ve._depth=Math.max(nv.width>0?fg-nv.top:0,Bg),wy.reverse()),nv.width>0){var f2=nv.right-(Ve._offset+Ve._length);f2>0&&(Xg.xr=1,Xg.r=f2);var My=Ve._offset-nv.left;My>0&&(Xg.xl=0,Xg.l=My)}}else if(og==="l"?(Ve._depth=Math.max(nv.height>0?fg-nv.left:0,Bg),Xg[og]=Ve._depth-ex):(Ve._depth=Math.max(nv.height>0?nv.right-fg:0,Bg),Xg[og]=Ve._depth+ex,wy.reverse()),nv.height>0){var tx=nv.bottom-(Ve._offset+Ve._length);tx>0&&(Xg.yb=0,Xg.b=tx);var qy=Ve._offset-nv.top;qy>0&&(Xg.yt=1,Xg.t=qy)}Xg[H0]=Ve.anchor==="free"?Ve.position:Ve._anchorAxis.domain[wy[0]],Ve.title.text!==Fp._dfltTitle[g0]&&(Xg[og]+=Bm(Ve)+(Ve.title.standoff||0)),Ve.mirror&&Ve.anchor!=="free"&&(ty={x:0,y:0,r:0,l:0,t:0,b:0},ty[sg]=Ve.linewidth,Ve.mirror&&Ve.mirror!==!0&&(ty[sg]+=Bg),Ve.mirror===!0||Ve.mirror==="ticks"?ty[H0]=Ve._anchorAxis.domain[wy[1]]:(Ve.mirror==="all"||Ve.mirror==="allticks")&&(ty[H0]=[Ve._counterDomainMin,Ve._counterDomainMax][wy[1]]))}Yg&&(Qy=x.getComponentMethod("rangeslider","autoMarginOpts")(Je,Ve)),typeof Ve.automargin=="string"&&(Kp(Xg,Ve.automargin),Kp(ty,Ve.automargin)),h.autoMargin(Je,t1(Ve),Xg),h.autoMargin(Je,Um(Ve),ty),h.autoMargin(Je,z1(Ve),Qy)}),v.syncOrAsync(ny)}};function Kp(Je,Ve){if(Je){var Mp=Object.keys(Ke).reduce(function(kp,Vp){return Ve.indexOf(Vp)!==-1&&Ke[Vp].forEach(function(wp){kp[wp]=1}),kp},{});Object.keys(Je).forEach(function(kp){Mp[kp]||(kp.length===1?Je[kp]=0:delete Je[kp])})}}function R0(Je,Ve){var Mp=[],kp,Vp=function(wp,Ap){var Yp=wp.xbnd[Ap];Yp!==null&&Mp.push(v.extendFlat({},wp,{x:Yp}))};if(Ve.length){for(kp=0;kp<Ve.length;kp++)Vp(Ve[kp],0);Vp(Ve[kp-1],1)}return Mp}function k0(Je,Ve){for(var Mp=[],kp={},Vp=0;Vp<Ve.length;Vp++){var wp=Ve[Vp];kp[wp.text2]?kp[wp.text2].push(wp.x):kp[wp.text2]=[wp.x]}for(var Ap in kp)Mp.push(W0(Je,v.interp(kp[Ap],.5),Ap));return Mp}function N0(Je,Ve){var Mp=[],kp,Vp,wp=Ve.length&&Ve[Ve.length-1].x<Ve[0].x,Ap=function(Fp,u0){var g0=Fp.xbnd[u0];g0!==null&&Mp.push(v.extendFlat({},Fp,{x:g0}))};if(Je.showdividers&&Ve.length){for(kp=0;kp<Ve.length;kp++){var Yp=Ve[kp];Yp.text2!==Vp&&Ap(Yp,wp?1:0),Vp=Yp.text2}Ap(Ve[kp-1],wp?0:1)}return Mp}function lm(Je,Ve,Mp){var kp,Vp,wp,Ap;if(Je._selections[Ve].size())kp=1/0,Vp=-1/0,wp=1/0,Ap=-1/0,Je._selections[Ve].each(function(){var Fp=Ym(this);if(Fp.node().style.display!=="none"){var u0=k.bBox(Fp.node().parentNode);kp=Math.min(kp,u0.top),Vp=Math.max(Vp,u0.bottom),wp=Math.min(wp,u0.left),Ap=Math.max(Ap,u0.right)}});else{var Yp=X.makeLabelFns(Je,Mp);kp=Vp=Yp.yFn({dx:0,dy:0,fontSize:0}),wp=Ap=Yp.xFn({dx:0,dy:0,fontSize:0})}return{top:kp,bottom:Vp,left:wp,right:Ap,height:Vp-kp,width:Ap-wp}}X.getTickSigns=function(Je,Ve){var Mp=Je._id.charAt(0),kp={x:"top",y:"right"}[Mp],Vp=Je.side===kp?1:-1,wp=[-1,1,Vp,-Vp],Ap=Ve?(Je.minor||{}).ticks:Je.ticks;return Ap!=="inside"==(Mp==="x")&&(wp=wp.map(function(Yp){return-Yp})),Je.side&&wp.push({l:-1,t:-1,r:1,b:1}[Je.side.charAt(0)]),wp},X.makeTransTickFn=function(Je){return Je._id.charAt(0)==="x"?function(Ve){return y(Je._offset+Je.l2p(Ve.x),0)}:function(Ve){return y(0,Je._offset+Je.l2p(Ve.x))}},X.makeTransTickLabelFn=function(Je){var Ve=u1(Je),Mp=Je.ticklabelshift||0,kp=Je.ticklabelstandoff||0,Vp=Ve[0],wp=Ve[1],Ap=Je.range[0]>Je.range[1],Yp=Je.ticklabelposition&&Je.ticklabelposition.indexOf("inside")!==-1,Fp=!Yp;if(Mp){var u0=Ap?-1:1;Mp=Mp*u0}if(kp){var g0=Je.side,H0=Yp&&(g0==="top"||g0==="left")||Fp&&(g0==="bottom"||g0==="right")?1:-1;kp=kp*H0}return Je._id.charAt(0)==="x"?function(Lm){return y(Vp+Je._offset+Je.l2p(Im(Lm))+Mp,wp+kp)}:function(Lm){return y(wp+kp,Vp+Je._offset+Je.l2p(Im(Lm))+Mp)}};function Im(Je){return Je.periodX!==void 0?Je.periodX:Je.x}function u1(Je){var Ve=Je.ticklabelposition||"",Mp=Je.tickson||"",kp=function(Qm){return Ve.indexOf(Qm)!==-1},Vp=kp("top"),wp=kp("left"),Ap=kp("right"),Yp=kp("bottom"),Fp=kp("inside"),u0=Mp!=="boundaries"&&(Yp||wp||Vp||Ap);if(!u0&&!Fp)return[0,0];var g0=Je.side,H0=u0?(Je.tickwidth||0)/2:0,Lm=Ee,Em=Je.tickfont?Je.tickfont.size:12;return(Yp||Vp)&&(H0+=Em*Ei,Lm+=(Je.linewidth||0)/2),(wp||Ap)&&(H0+=(Je.linewidth||0)/2,Lm+=Ee),Fp&&g0==="top"&&(Lm-=Em*(1-Ei)),(wp||Vp)&&(H0=-H0),(g0==="bottom"||g0==="right")&&(Lm=-Lm),[u0?H0:0,Fp?Lm:0]}X.makeTickPath=function(Je,Ve,Mp,kp){kp||(kp={});var Vp=kp.minor;if(Vp&&!Je.minor)return"";var wp=kp.len!==void 0?kp.len:Vp?Je.minor.ticklen:Je.ticklen,Ap=Je._id.charAt(0),Yp=(Je.linewidth||1)/2;return Ap==="x"?"M0,"+(Ve+Yp*Mp)+"v"+wp*Mp:"M"+(Ve+Yp*Mp)+",0h"+wp*Mp},X.makeLabelFns=function(Je,Ve,Mp){var kp=Je.ticklabelposition||"",Vp=Je.tickson||"",wp=function(cg){return kp.indexOf(cg)!==-1},Ap=wp("top"),Yp=wp("left"),Fp=wp("right"),u0=wp("bottom"),g0=Vp!=="boundaries"&&(u0||Yp||Ap||Fp),H0=wp("inside"),Lm=kp==="inside"&&Je.ticks==="inside"||!H0&&Je.ticks==="outside"&&Vp!=="boundaries",Em=0,Qm=0,xm=Lm?Je.ticklen:0;if(H0?xm*=-1:g0&&(xm=0),Lm&&(Em+=xm,Mp)){var zm=v.deg2rad(Mp);Em=xm*Math.cos(zm)+1,Qm=xm*Math.sin(zm)}Je.showticklabels&&(Lm||Je.showline)&&(Em+=.2*Je.tickfont.size),Em+=(Je.linewidth||1)/2*(H0?-1:1);var f1={labelStandoff:Em,labelShift:Qm},dg,E1,Gg,$1,$g=0,tg=Je.side,Og=Je._id.charAt(0),qg=Je.tickangle,W1;if(Og==="x")W1=!H0&&tg==="bottom"||H0&&tg==="top",$1=W1?1:-1,H0&&($1*=-1),dg=Qm*$1,E1=Ve+Em*$1,Gg=W1?1:-.2,Math.abs(qg)===90&&(H0?Gg+=yi:qg===-90&&tg==="bottom"?Gg=Ei:qg===90&&tg==="top"?Gg=yi:Gg=.5,$g=yi/2*(qg/90)),f1.xFn=function(cg){return cg.dx+dg+$g*cg.fontSize},f1.yFn=function(cg){return cg.dy+E1+cg.fontSize*Gg},f1.anchorFn=function(cg,rv){if(g0){if(Yp)return"end";if(Fp)return"start"}return!s(rv)||rv===0||rv===180?"middle":rv*$1<0!==H0?"end":"start"},f1.heightFn=function(cg,rv,Pg){return rv<-60||rv>60?-.5*Pg:Je.side==="top"!==H0?-Pg:0};else if(Og==="y"){if(W1=!H0&&tg==="left"||H0&&tg==="right",$1=W1?1:-1,H0&&($1*=-1),dg=Em,E1=Qm*$1,Gg=0,!H0&&Math.abs(qg)===90&&(qg===-90&&tg==="left"||qg===90&&tg==="right"?Gg=Ei:Gg=.5),H0){var yv=s(qg)?+qg:0;if(yv!==0){var iv=v.deg2rad(yv);$g=Math.abs(Math.sin(iv))*Ei*$1,Gg=0}}f1.xFn=function(cg){return cg.dx+Ve-(dg+cg.fontSize*Gg)*$1+$g*cg.fontSize},f1.yFn=function(cg){return cg.dy+E1+cg.fontSize*yi},f1.anchorFn=function(cg,rv){return s(rv)&&Math.abs(rv)===90?"middle":W1?"end":"start"},f1.heightFn=function(cg,rv,Pg){return Je.side==="right"&&(rv*=-1),rv<-30?-Pg:rv<30?-.5*Pg:0}}return f1};function v1(Je){return[Je.text,Je.x,Je.axInfo,Je.font,Je.fontSize,Je.fontColor].join("_")}X.drawTicks=function(Je,Ve,Mp){Mp=Mp||{};var kp=Ve._id+"tick",Vp=[].concat(Ve.minor&&Ve.minor.ticks?Mp.vals.filter(function(Ap){return Ap.minor&&!Ap.noTick}):[]).concat(Ve.ticks?Mp.vals.filter(function(Ap){return!Ap.minor&&!Ap.noTick}):[]),wp=Mp.layer.selectAll("path."+kp).data(Vp,v1);wp.exit().remove(),wp.enter().append("path").classed(kp,1).classed("ticks",1).classed("crisp",Mp.crisp!==!1).each(function(Ap){return u.stroke(g.select(this),Ap.minor?Ve.minor.tickcolor:Ve.tickcolor)}).style("stroke-width",function(Ap){return k.crispRound(Je,Ap.minor?Ve.minor.tickwidth:Ve.tickwidth,1)+"px"}).attr("d",Mp.path).style("display",null),lg(Ve,[Pe]),wp.attr("transform",Mp.transFn)},X.drawGrid=function(Je,Ve,Mp){if(Mp=Mp||{},Ve.tickmode!=="sync"){var kp=Ve._id+"grid",Vp=Ve.minor&&Ve.minor.showgrid,wp=Vp?Mp.vals.filter(function(f1){return f1.minor}):[],Ap=Ve.showgrid?Mp.vals.filter(function(f1){return!f1.minor}):[],Yp=Mp.counterAxis;if(Yp&&X.shouldShowZeroLine(Je,Ve,Yp))for(var Fp=Ve.tickmode==="array",u0=0;u0<Ap.length;u0++){var g0=Ap[u0].x;if(Fp?!g0:Math.abs(g0)<Ve.dtick/100)if(Ap=Ap.slice(0,u0).concat(Ap.slice(u0+1)),Fp)u0--;else break}Ve._gw=k.crispRound(Je,Ve.gridwidth,1);for(var H0=Vp?k.crispRound(Je,Ve.minor.gridwidth,1):0,Lm=Mp.layer,Em=Mp.minorLayer,Qm=1;Qm>=0;Qm--){var xm=Qm?Lm:Em;if(xm){var zm=xm.selectAll("path."+kp).data(Qm?Ap:wp,v1);zm.exit().remove(),zm.enter().append("path").classed(kp,1).classed("crisp",Mp.crisp!==!1),zm.attr("transform",Mp.transFn).attr("d",Mp.path).each(function(f1){return u.stroke(g.select(this),f1.minor?Ve.minor.gridcolor:Ve.gridcolor||"#ddd")}).style("stroke-dasharray",function(f1){return k.dashStyle(f1.minor?Ve.minor.griddash:Ve.griddash,f1.minor?Ve.minor.gridwidth:Ve.gridwidth)}).style("stroke-width",function(f1){return(f1.minor?H0:Ve._gw)+"px"}).style("display",null),typeof Mp.path=="function"&&zm.attr("d",Mp.path)}}lg(Ve,[ce,ke])}},X.drawZeroLine=function(Je,Ve,Mp){Mp=Mp||Mp;var kp=Ve._id+"zl",Vp=X.shouldShowZeroLine(Je,Ve,Mp.counterAxis),wp=Mp.layer.selectAll("path."+kp).data(Vp?[{x:0,id:Ve._id}]:[]);wp.exit().remove(),wp.enter().append("path").classed(kp,1).classed("zl",1).classed("crisp",Mp.crisp!==!1).each(function(){Mp.layer.selectAll("path").sort(function(Ap,Yp){return pe(Ap.id,Yp.id)})}),wp.attr("transform",Mp.transFn).attr("d",Mp.path).call(u.stroke,Ve.zerolinecolor||u.defaultLine).style("stroke-width",k.crispRound(Je,Ve.zerolinewidth,Ve._gw||1)+"px").style("display",null),lg(Ve,[Le])},X.drawLabels=function(Je,Ve,Mp){Mp=Mp||{};var kp=Je._fullLayout,Vp=Ve._id,wp=Ve.zerolinelayer==="above traces",Ap=Mp.cls||Vp+"tick",Yp=Mp.vals.filter(function(_g){return _g.text}),Fp=Mp.labelFns,u0=Mp.secondary?0:Ve.tickangle,g0=(Ve._prevTickAngles||{})[Ap],H0=Mp.layer.selectAll("g."+Ap).data(Ve.showticklabels?Yp:[],v1),Lm=[];H0.enter().append("g").classed(Ap,1).append("text").attr("text-anchor","middle").each(function(_g){var Ig=g.select(this),Tg=Je._promises.length;Ig.call(b.positionText,Fp.xFn(_g),Fp.yFn(_g)).call(k.font,{family:_g.font,size:_g.fontSize,color:_g.fontColor,weight:_g.fontWeight,style:_g.fontStyle,variant:_g.fontVariant,textcase:_g.fontTextcase,lineposition:_g.fontLineposition,shadow:_g.fontShadow}).text(_g.text).call(b.convertToTspans,Je),Je._promises[Tg]?Lm.push(Je._promises.pop().then(function(){Em(Ig,u0)})):Em(Ig,u0)}),lg(Ve,[tt]),H0.exit().remove(),Mp.repositionOnUpdate&&H0.each(function(_g){g.select(this).select("text").call(b.positionText,Fp.xFn(_g),Fp.yFn(_g))});function Em(_g,Ig){_g.each(function(Tg){var Ug=g.select(this),wv=Ug.select(".text-math-group"),Dv=Fp.anchorFn(Tg,Ig),gv=Mp.transFn.call(Ug.node(),Tg)+(s(Ig)&&+Ig!=0?" rotate("+Ig+","+Fp.xFn(Tg)+","+(Fp.yFn(Tg)-Tg.fontSize/2)+")":""),Pv=b.lineCount(Ug),Bv=vs*Tg.fontSize,Tv=Fp.heightFn(Tg,s(Ig)?+Ig:0,(Pv-1)*Bv);if(Tv&&(gv+=y(0,Tv)),wv.empty()){var Fg=Ug.select("text");Fg.attr({transform:gv,"text-anchor":Dv}),Fg.style("display",null),Ve._adjustTickLabelsOverflow&&Ve._adjustTickLabelsOverflow()}else{var sy=k.bBox(wv.node()).width,qv=sy*{end:-.5,start:.5}[Dv];wv.attr("transform",gv+y(qv,0))}})}Ve._adjustTickLabelsOverflow=function(){var _g=Ve.ticklabeloverflow;if(!(!_g||_g==="allow")){var Ig=_g.indexOf("hide")!==-1,Tg=Ve._id.charAt(0)==="x",Ug=0,wv=Tg?Je._fullLayout.width:Je._fullLayout.height;if(_g.indexOf("domain")!==-1){var Dv=v.simpleMap(Ve.range,Ve.r2l);Ug=Ve.l2p(Dv[0])+Ve._offset,wv=Ve.l2p(Dv[1])+Ve._offset}var gv=Math.min(Ug,wv),Pv=Math.max(Ug,wv),Bv=Ve.side,Tv=1/0,Fg=-1/0;H0.each(function($v){var Yv=g.select(this),by=Yv.select(".text-math-group");if(by.empty()){var gy=k.bBox(Yv.node()),ny=0;Tg?(gy.right>Pv||gy.left<gv)&&(ny=1):(gy.bottom>Pv||gy.top+(Ve.tickangle?0:$v.fontSize/4)<gv)&&(ny=1);var Ty=Yv.select("text");ny?Ig&&Ty.style("display","none"):Ty.node().style.display!=="none"&&(Ty.style("display",null),Bv==="bottom"||Bv==="right"?Tv=Math.min(Tv,Tg?gy.top:gy.left):Tv=-1/0,Bv==="top"||Bv==="left"?Fg=Math.max(Fg,Tg?gy.bottom:gy.right):Fg=1/0)}});for(var sy in kp._plots){var qv=kp._plots[sy];if(!(Ve._id!==qv.xaxis._id&&Ve._id!==qv.yaxis._id)){var uy=Tg?qv.yaxis:qv.xaxis;uy&&(uy["_visibleLabelMin_"+Ve._id]=Tv,uy["_visibleLabelMax_"+Ve._id]=Fg)}}}},Ve._hideCounterAxisInsideTickLabels=function(_g){var Ig=Ve._id.charAt(0)==="x",Tg=[];for(var Ug in kp._plots){var wv=kp._plots[Ug];Ve._id!==wv.xaxis._id&&Ve._id!==wv.yaxis._id||Tg.push(Ig?wv.yaxis:wv.xaxis)}Tg.forEach(function(Dv,gv){Dv&&P1(Dv)&&(_g||[Le,ke,ce,Pe,tt]).forEach(function(Pv){var Bv=Pv.K==="tick"&&Pv.L==="text"&&Ve.ticklabelmode==="period",Tv=kp._plots[Ve._mainSubplot],Fg;if(Pv.K===Le.K){var sy=wp?Tv.zerolinelayerAbove:Tv.zerolinelayer;Fg=sy.selectAll("."+Ve._id+"zl")}else Pv.K===ke.K?Fg=Tv.minorGridlayer.selectAll("."+Ve._id):Pv.K===ce.K?Fg=Tv.gridlayer.selectAll("."+Ve._id):Fg=Tv[Ve._id.charAt(0)+"axislayer"];Fg.each(function(){var qv=g.select(this);Pv.L&&(qv=qv.selectAll(Pv.L)),qv.each(function(uy){var $v=Ve.l2p(Bv?Im(uy):uy.x)+Ve._offset,Yv=g.select(this);$v<Ve["_visibleLabelMax_"+Dv._id]&&$v>Ve["_visibleLabelMin_"+Dv._id]?Yv.style("display","none"):Pv.K==="tick"&&!gv&&Yv.node().style.display!=="none"&&Yv.style("display",null)})})})})},Em(H0,g0+1?g0:u0);function Qm(){return Lm.length&&Promise.all(Lm)}var xm=null;function zm(){if(Em(H0,u0),Yp.length&&Ve.autotickangles&&(Ve.type!=="log"||String(Ve.dtick).charAt(0)!=="D")){xm=Ve.autotickangles[0];var _g=0,Ig=[],Tg,Ug=1;H0.each(function(Xg){_g=Math.max(_g,Xg.fontSize);var ty=Ve.l2p(Xg.x),Qy=Ym(this),vy=k.bBox(Qy.node());Ug=Math.max(Ug,b.lineCount(Qy)),Ig.push({top:0,bottom:10,height:10,left:ty-vy.width/2,right:ty+vy.width/2+2,width:vy.width+2})});var wv=(Ve.tickson==="boundaries"||Ve.showdividers)&&!Mp.secondary,Dv=Yp.length,gv=Math.abs((Yp[Dv-1].x-Yp[0].x)*Ve._m)/(Dv-1),Pv=wv?gv/2:gv,Bv=wv?Ve.ticklen:_g*1.25*Ug,Tv=Math.sqrt(Math.pow(Pv,2)+Math.pow(Bv,2)),Fg=Pv/Tv,sy=Ve.autotickangles.map(function(Xg){return Xg*Math.PI/180}),qv=sy.find(function(Xg){return Math.abs(Math.cos(Xg))<=Fg});qv===void 0&&(qv=sy.reduce(function(Xg,ty){return Math.abs(Math.cos(Xg))<Math.abs(Math.cos(ty))?Xg:ty},sy[0]));var uy=qv*(180/Math.PI);if(wv){var $v=2;for(Ve.ticks&&($v+=Ve.tickwidth/2),Tg=0;Tg<Ig.length;Tg++){var Yv=Yp[Tg].xbnd,by=Ig[Tg];if(Yv[0]!==null&&by.left-Ve.l2p(Yv[0])<$v||Yv[1]!==null&&Ve.l2p(Yv[1])-by.right<$v){xm=uy;break}}}else{var gy=Ve.ticklabelposition||"",ny=Ve.tickson||"",Ty=function(Xg){return gy.indexOf(Xg)!==-1},Yg=Ty("top"),og=Ty("left"),sg=Ty("right"),fg=Ty("bottom"),Bg=ny!=="boundaries"&&(fg||og||Yg||sg),nv=Bg?(Ve.tickwidth||0)+2*Ee:0;for(Tg=0;Tg<Ig.length-1;Tg++)if(v.bBoxIntersect(Ig[Tg],Ig[Tg+1],nv)){xm=uy;break}}xm&&Em(H0,xm)}}Ve._selections&&(Ve._selections[Ap]=H0);var f1=[Qm];Ve.automargin&&kp._redrawFromAutoMarginCount&&g0===90?(xm=g0,f1.push(function(){Em(H0,g0)})):f1.push(zm),Ve._tickAngles&&f1.push(function(){Ve._tickAngles[Ap]=xm===null?s(u0)?u0:0:xm});var dg=function(){var _g=0,Ig=0;return H0.each(function(Tg,Ug){var wv=Ym(this),Dv=wv.select(".text-math-group");if(Dv.empty()){var gv;Ve._vals[Ug]&&(gv=Ve._vals[Ug].bb||k.bBox(wv.node()),Ve._vals[Ug].bb=gv),_g=Math.max(_g,gv.width),Ig=Math.max(Ig,gv.height)}}),{labelsMaxW:_g,labelsMaxH:Ig}},E1=Ve._anchorAxis;if(E1&&(E1.autorange||E1.insiderange)&&P1(Ve)&&!q(kp,Ve._id)&&(kp._insideTickLabelsUpdaterange||(kp._insideTickLabelsUpdaterange={}),E1.autorange&&(kp._insideTickLabelsUpdaterange[E1._name+".autorange"]=E1.autorange,f1.push(dg)),E1.insiderange)){var Gg=dg(),$1=Ve._id.charAt(0)==="y"?Gg.labelsMaxW:Gg.labelsMaxH;$1+=2*Ee,Ve.ticklabelposition==="inside"&&($1+=Ve.ticklen||0);var $g=Ve.side==="right"||Ve.side==="top"?1:-1,tg=$g===1?1:0,Og=$g===1?0:1,qg=[];qg[Og]=E1.range[Og];var W1=E1.range,yv=E1.r2p(W1[tg]),iv=E1.r2p(W1[Og]),cg=kp._insideTickLabelsUpdaterange[E1._name+".range"];if(cg){var rv=E1.r2p(cg[tg]),Pg=E1.r2p(cg[Og]),Vg=$g*(Ve._id.charAt(0)==="y"?1:-1);Vg*yv<Vg*rv&&(yv=rv,qg[tg]=W1[tg]=cg[tg]),Vg*iv>Vg*Pg&&(iv=Pg,qg[Og]=W1[Og]=cg[Og])}var Ov=Math.abs(iv-yv);Ov-$1>0?(Ov-=$1,$1*=1+$1/Ov):$1=0,Ve._id.charAt(0)!=="y"&&($1=-$1),qg[tg]=E1.p2r(E1.r2p(W1[tg])+$g*$1),E1.autorange==="min"||E1.autorange==="max reversed"?(qg[0]=null,E1._rangeInitial0=void 0,E1._rangeInitial1=void 0):(E1.autorange==="max"||E1.autorange==="min reversed")&&(qg[1]=null,E1._rangeInitial0=void 0,E1._rangeInitial1=void 0),kp._insideTickLabelsUpdaterange[E1._name+".range"]=qg}var xv=v.syncOrAsync(f1);return xv&&xv.then&&Je._promises.push(xv),xv};function b1(Je,Ve,Mp){var kp=Ve._id+"divider",Vp=Mp.vals,wp=Mp.layer.selectAll("path."+kp).data(Vp,v1);wp.exit().remove(),wp.enter().insert("path",":first-child").classed(kp,1).classed("crisp",1).call(u.stroke,Ve.dividercolor).style("stroke-width",k.crispRound(Je,Ve.dividerwidth,1)+"px"),wp.attr("transform",Mp.transFn).attr("d",Mp.path)}X.getPxPosition=function(Je,Ve){var Mp=Je._fullLayout._size,kp=Ve._id.charAt(0),Vp=Ve.side,wp;if(Ve.anchor!=="free"?wp=Ve._anchorAxis:kp==="x"?wp={_offset:Mp.t+(1-(Ve.position||0))*Mp.h,_length:0}:kp==="y"&&(wp={_offset:Mp.l+(Ve.position||0)*Mp.w+Ve._shift,_length:0}),Vp==="top"||Vp==="left")return wp._offset;if(Vp==="bottom"||Vp==="right")return wp._offset+wp._length};function Bm(Je){var Ve=Je.title.font.size,Mp=(Je.title.text.match(b.BR_TAG_ALL)||[]).length;return Je.title.hasOwnProperty("standoff")?Ve*(Ei+Mp*vs):Mp?Ve*(Mp+1)*vs:Ve}function fm(Je,Ve){var Mp=Je._fullLayout,kp=Ve._id,Vp=kp.charAt(0),wp=Ve.title.font.size,Ap,Yp=(Ve.title.text.match(b.BR_TAG_ALL)||[]).length;if(Ve.title.hasOwnProperty("standoff"))Ve.side==="bottom"||Ve.side==="right"?Ap=Ve._depth+Ve.title.standoff+wp*Ei:(Ve.side==="top"||Ve.side==="left")&&(Ap=Ve._depth+Ve.title.standoff+wp*(yi+Yp*vs));else{var Fp=P1(Ve);if(Ve.type==="multicategory")Ap=Ve._depth;else{var u0=1.5*wp;Fp&&(u0=.5*wp,Ve.ticks==="outside"&&(u0+=Ve.ticklen)),Ap=10+u0+(Ve.linewidth?Ve.linewidth-1:0)}Fp||(Vp==="x"?Ap+=Ve.side==="top"?wp*(Ve.showticklabels?1:0):wp*(Ve.showticklabels?1.5:.5):Ap+=Ve.side==="right"?wp*(Ve.showticklabels?1:.5):wp*(Ve.showticklabels?.5:0))}var g0=X.getPxPosition(Je,Ve),H0,Lm,Em;Vp==="x"?(Lm=Ve._offset+Ve._length/2,Em=Ve.side==="top"?g0-Ap:g0+Ap):(Em=Ve._offset+Ve._length/2,Lm=Ve.side==="right"?g0+Ap:g0-Ap,H0={rotate:"-90",offset:0});var Qm;if(Ve.type!=="multicategory"){var xm=Ve._selections[Ve._id+"tick"];if(Qm={selection:xm,side:Ve.side},xm&&xm.node()&&xm.node().parentNode){var zm=k.getTranslate(xm.node().parentNode);Qm.offsetLeft=zm.x,Qm.offsetTop=zm.y}Ve.title.hasOwnProperty("standoff")&&(Qm.pad=0)}return Ve._titleStandoff=Ap,T.draw(Je,kp+"title",{propContainer:Ve,propName:Ve._name+".title.text",placeholder:Mp._dfltTitle[Vp],avoid:Qm,transform:H0,attributes:{x:Lm,y:Em,"text-anchor":"middle"}})}X.shouldShowZeroLine=function(Je,Ve,Mp){var kp=v.simpleMap(Ve.range,Ve.r2l);return kp[0]*kp[1]<=0&&Ve.zeroline&&(Ve.type==="linear"||Ve.type==="-")&&!(Ve.rangebreaks&&Ve.maskBreaks(0)===Ae)&&(c1(Ve,0)||!y1(Je,Ve,Mp,kp)||n1(Je,Ve))},X.clipEnds=function(Je,Ve){return Ve.filter(function(Mp){return c1(Je,Mp.x)})};function c1(Je,Ve){var Mp=Je.l2p(Ve);return Mp>1&&Mp<Je._length-1}function y1(Je,Ve,Mp,kp){var Vp=Mp._mainAxis;if(!Vp)return;var wp=Je._fullLayout,Ap=Ve._id.charAt(0),Yp=X.counterLetter(Ve._id),Fp=Ve._offset+(Math.abs(kp[0])<Math.abs(kp[1])==(Ap==="x")?0:Ve._length);function u0(Qm){if(!Qm.showline||!Qm.linewidth)return!1;var xm=Math.max((Qm.linewidth+Ve.zerolinewidth)/2,1);function zm(E1){return typeof E1=="number"&&Math.abs(E1-Fp)<xm}if(zm(Qm._mainLinePosition)||zm(Qm._mainMirrorPosition))return!0;var f1=Qm._linepositions||{};for(var dg in f1)if(zm(f1[dg][0])||zm(f1[dg][1]))return!0}var g0=wp._plots[Mp._mainSubplot];if(!(g0.mainplotinfo||g0).overlays.length)return u0(Mp);for(var H0=X.list(Je,Yp),Lm=0;Lm<H0.length;Lm++){var Em=H0[Lm];if(Em._mainAxis===Vp&&u0(Em))return!0}}function n1(Je,Ve){for(var Mp=Je._fullData,kp=Ve._mainSubplot,Vp=Ve._id.charAt(0),wp=0;wp<Mp.length;wp++){var Ap=Mp[wp];if(Ap.visible===!0&&Ap.xaxis+Ap.yaxis===kp&&(x.traceIs(Ap,"bar-like")&&Ap.orientation==={x:"h",y:"v"}[Vp]||Ap.fill&&Ap.fill.charAt(Ap.fill.length-1)===Vp))return!0}return!1}function Ym(Je){var Ve=g.select(Je),Mp=Ve.select(".text-math-group");return Mp.empty()?Ve.select("text"):Mp}X.allowAutoMargin=function(Je){for(var Ve=X.list(Je,"",!0),Mp=0;Mp<Ve.length;Mp++){var kp=Ve[Mp];kp.automargin&&(h.allowAutoMargin(Je,t1(kp)),kp.mirror&&h.allowAutoMargin(Je,Um(kp))),x.getComponentMethod("rangeslider","isVisible")(kp)&&h.allowAutoMargin(Je,z1(kp))}};function t1(Je){return Je._id+".automargin"}function Um(Je){return t1(Je)+".mirror"}function z1(Je){return Je._id+".rangeslider"}X.swap=function(Je,Ve){for(var Mp=F1(Je,Ve),kp=0;kp<Mp.length;kp++)V1(Je,Mp[kp].x,Mp[kp].y)};function F1(Je,Ve){var Mp=[],kp,Vp;for(kp=0;kp<Ve.length;kp++){var wp=[],Ap=Je._fullData[Ve[kp]].xaxis,Yp=Je._fullData[Ve[kp]].yaxis;if(!(!Ap||!Yp)){for(Vp=0;Vp<Mp.length;Vp++)(Mp[Vp].x.indexOf(Ap)!==-1||Mp[Vp].y.indexOf(Yp)!==-1)&&wp.push(Vp);if(!wp.length){Mp.push({x:[Ap],y:[Yp]});continue}var Fp=Mp[wp[0]],u0;if(wp.length>1)for(Vp=1;Vp<wp.length;Vp++)u0=Mp[wp[Vp]],g1(Fp.x,u0.x),g1(Fp.y,u0.y);g1(Fp.x,[Ap]),g1(Fp.y,[Yp])}}return Mp}function g1(Je,Ve){for(var Mp=0;Mp<Ve.length;Mp++)Je.indexOf(Ve[Mp])===-1&&Je.push(Ve[Mp])}function V1(Je,Ve,Mp){var kp=[],Vp=[],wp=Je.layout,Ap,Yp;for(Ap=0;Ap<Ve.length;Ap++)kp.push(X.getFromId(Je,Ve[Ap]));for(Ap=0;Ap<Mp.length;Ap++)Vp.push(X.getFromId(Je,Mp[Ap]));var Fp=Object.keys(M),u0=["anchor","domain","overlaying","position","side","tickangle","editType"],g0=["linear","log"];for(Ap=0;Ap<Fp.length;Ap++){var H0=Fp[Ap],Lm=kp[0][H0],Em=Vp[0][H0],Qm=!0,xm=!1,zm=!1;if(!(H0.charAt(0)==="_"||typeof Lm=="function"||u0.indexOf(H0)!==-1)){for(Yp=1;Yp<kp.length&&Qm;Yp++){var f1=kp[Yp][H0];H0==="type"&&g0.indexOf(Lm)!==-1&&g0.indexOf(f1)!==-1&&Lm!==f1?xm=!0:f1!==Lm&&(Qm=!1)}for(Yp=1;Yp<Vp.length&&Qm;Yp++){var dg=Vp[Yp][H0];H0==="type"&&g0.indexOf(Em)!==-1&&g0.indexOf(dg)!==-1&&Em!==dg?zm=!0:Vp[Yp][H0]!==Em&&(Qm=!1)}Qm&&(xm&&(wp[kp[0]._name].type="linear"),zm&&(wp[Vp[0]._name].type="linear"),K1(wp,H0,kp,Vp,Je._fullLayout._dfltTitle))}}for(Ap=0;Ap<Je._fullLayout.annotations.length;Ap++){var E1=Je._fullLayout.annotations[Ap];Ve.indexOf(E1.xref)!==-1&&Mp.indexOf(E1.yref)!==-1&&v.swapAttrs(wp.annotations[Ap],["?"])}}function K1(Je,Ve,Mp,kp,Vp){var wp=v.nestedProperty,Ap=wp(Je[Mp[0]._name],Ve).get(),Yp=wp(Je[kp[0]._name],Ve).get(),Fp;for(Ve==="title"&&(Ap&&Ap.text===Vp.x&&(Ap.text=Vp.y),Yp&&Yp.text===Vp.y&&(Yp.text=Vp.x)),Fp=0;Fp<Mp.length;Fp++)wp(Je,Mp[Fp]._name+"."+Ve).set(Yp);for(Fp=0;Fp<kp.length;Fp++)wp(Je,kp[Fp]._name+"."+Ve).set(Ap)}function ig(Je){return Je._id==="angularaxis"}function mg(Je,Ve){for(var Mp=Ve._rangebreaks.length,kp=0;kp<Mp;kp++){var Vp=Ve._rangebreaks[kp];if(Je>=Vp.min&&Je<Vp.max)return Vp.max}return Je}function P1(Je){return(Je.ticklabelposition||"").indexOf("inside")!==-1}function lg(Je,Ve){P1(Je._anchorAxis||{})&&Je._hideCounterAxisInsideTickLabels&&Je._hideCounterAxisInsideTickLabels(Ve)}function G1(Je,Ve,Mp,kp){var Vp=Je.anchor!=="free"&&(Je.overlaying===void 0||Je.overlaying===!1)?Je._id:Je.overlaying,wp;kp?wp=Je.side==="right"?Ve:-Ve:wp=Ve,Vp in Mp||(Mp[Vp]={}),Je.side in Mp[Vp]||(Mp[Vp][Je.side]=0),Mp[Vp][Je.side]+=wp}function Sm(Je,Ve){return Je.autoshift?Ve[Je.overlaying][Je.side]:Je.shift||0}function Cg(Je,Ve){return/%f/.test(Ve)?Je>=ge:/%L/.test(Ve)?Je>=xe:/%[SX]/.test(Ve)?Je>=fe:/%M/.test(Ve)?Je>=Re:/%[HI]/.test(Ve)?Je>=Y:/%p/.test(Ve)?Je>=le:/%[Aadejuwx]/.test(Ve)?Je>=he:/%[UVW]/.test(Ve)?Je>=Ce:/%[Bbm]/.test(Ve)?Je>=W:/%[q]/.test(Ve)?Je>=L:/%[Yy]/.test(Ve)?Je>=z:!0}}),Vm=t((me,ue)=>{ue.exports=function(g,s,h){var x,v;if(h){var y=s==="reversed"||s==="min reversed"||s==="max reversed";x=h[y?1:0],v=h[y?0:1]}var b=g("autorangeoptions.minallowed",v===null?x:void 0),T=g("autorangeoptions.maxallowed",x===null?v:void 0);b===void 0&&g("autorangeoptions.clipmin"),T===void 0&&g("autorangeoptions.clipmax"),g("autorangeoptions.include")}}),Pm=t((me,ue)=>{var g=Vm();ue.exports=function(s,h,x,v){var y=h._template||{},b=h.type||y.type||"-";x("minallowed"),x("maxallowed");var T=x("range");if(!T){var u;!v.noInsiderange&&b!=="log"&&(u=x("insiderange"),u&&(u[0]===null||u[1]===null)&&(h.insiderange=!1,u=void 0),u&&(T=x("range",u)))}var k=h.getAutorangeDflt(T,v),M=x("autorange",k),D;T&&(T[0]===null&&T[1]===null||(T[0]===null||T[1]===null)&&(M==="reversed"||M===!0)||T[0]!==null&&(M==="min"||M==="max reversed")||T[1]!==null&&(M==="max"||M==="min reversed"))&&(T=void 0,delete h.range,h.autorange=!0,D=!0),D||(k=h.getAutorangeDflt(T,v),M=x("autorange",k)),M&&(g(x,M,T),(b==="linear"||b==="-")&&x("rangemode")),h.cleanRange()}}),a1=t((me,ue)=>{var g={left:0,top:0};ue.exports=s;function s(x,v,y){v=v||x.currentTarget||x.srcElement,Array.isArray(y)||(y=[0,0]);var b=x.clientX||0,T=x.clientY||0,u=h(v);return y[0]=b-u.left,y[1]=T-u.top,y}function h(x){return x===window||x===document||x===document.body?g:x.getBoundingClientRect()}}),h1=t((me,ue)=>{var g=Wl();function s(){var h=!1;try{var x=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("test",null,x),window.removeEventListener("test",null,x)}catch{h=!1}return h}ue.exports=g&&s()}),Hm=t((me,ue)=>{ue.exports=function(g,s,h,x,v){var y=(g-h)/(x-h),b=y+s/(x-h),T=(y+b)/2;return v==="left"||v==="bottom"?y:v==="center"||v==="middle"?T:v==="right"||v==="top"?b:y<2/3-T?y:b>4/3-T?b:T}}),w1=t((me,ue)=>{var g=Z(),s=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ue.exports=function(h,x,v,y){return v==="left"?h=0:v==="center"?h=1:v==="right"?h=2:h=g.constrain(Math.floor(h*3),0,2),y==="bottom"?x=0:y==="middle"?x=1:y==="top"?x=2:x=g.constrain(Math.floor(x*3),0,2),s[x][h]}}),_m=t((me,ue)=>{var g=Mm(),s=Zv(),h=Gm().getGraphDiv,x=be(),v=ue.exports={};v.wrapped=function(y,b,T){y=h(y),y._fullLayout&&s.clear(y._fullLayout._uid+x.HOVERID),v.raw(y,b,T)},v.raw=function(y,b){var T=y._fullLayout,u=y._hoverdata;b||(b={}),!(b.target&&!y._dragged&&g.triggerHandler(y,"plotly_beforehover",b)===!1)&&(T._hoverlayer.selectAll("g").remove(),T._hoverlayer.selectAll("line").remove(),T._hoverlayer.selectAll("circle").remove(),y._hoverdata=void 0,b.target&&u&&y.emit("plotly_unhover",{event:b,points:u}))}}),Om=t((me,ue)=>{var g=a1(),s=x0(),h=h1(),x=Z().removeElement,v=m1(),y=ue.exports={};y.align=Hm(),y.getCursor=w1();var b=_m();y.unhover=b.wrapped,y.unhoverRaw=b.raw,y.init=function(k){var M=k.gd,D=1,B=M._context.doubleClickDelay,P=k.element,N,z,F,w,L,O,H,W;M._mouseDownTime||(M._mouseDownTime=0),P.style.pointerEvents="all",P.onmousedown=le,h?(P._ontouchstart&&P.removeEventListener("touchstart",P._ontouchstart),P._ontouchstart=le,P.addEventListener("touchstart",le,{passive:!1})):P.ontouchstart=le;function Ce(fe,xe,ge){return Math.abs(fe)<ge&&(fe=0),Math.abs(xe)<ge&&(xe=0),[fe,xe]}var he=k.clampFn||Ce;function le(fe){M._dragged=!1,M._dragging=!0;var xe=u(fe);N=xe[0],z=xe[1],H=fe.target,O=fe,W=fe.buttons===2||fe.ctrlKey,typeof fe.clientX>"u"&&typeof fe.clientY>"u"&&(fe.clientX=N,fe.clientY=z),F=new Date().getTime(),F-M._mouseDownTime<B?D+=1:(D=1,M._mouseDownTime=F),k.prepFn&&k.prepFn(fe,N,z),s&&!W?(L=T(),L.style.cursor=window.getComputedStyle(P).cursor):s||(L=document,w=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(P).cursor),document.addEventListener("mouseup",Re),document.addEventListener("touchend",Re),k.dragmode!==!1&&(fe.preventDefault(),document.addEventListener("mousemove",Y),document.addEventListener("touchmove",Y,{passive:!1}))}function Y(fe){fe.preventDefault();var xe=u(fe),ge=k.minDrag||v.MINDRAG,ye=he(xe[0]-N,xe[1]-z,ge),Ae=ye[0],Le=ye[1];(Ae||Le)&&(M._dragged=!0,y.unhover(M,fe)),M._dragged&&k.moveFn&&!W&&(M._dragdata={element:P,dx:Ae,dy:Le},k.moveFn(Ae,Le))}function Re(fe){if(delete M._dragdata,k.dragmode!==!1&&(fe.preventDefault(),document.removeEventListener("mousemove",Y),document.removeEventListener("touchmove",Y)),document.removeEventListener("mouseup",Re),document.removeEventListener("touchend",Re),s?x(L):w&&(L.documentElement.style.cursor=w,w=null),!M._dragging){M._dragged=!1;return}if(M._dragging=!1,new Date().getTime()-M._mouseDownTime>B&&(D=Math.max(D-1,1)),M._dragged)k.doneFn&&k.doneFn();else{var xe;O.target===H?xe=O:(xe={target:H,srcElement:H,toElement:H},Object.keys(O).concat(Object.keys(O.__proto__)).forEach(ge=>{var ye=O[ge];!xe[ge]&&typeof ye!="function"&&(xe[ge]=ye)})),k.clickFn&&k.clickFn(D,xe),W||H.dispatchEvent(new MouseEvent("click",fe))}M._dragging=!1,M._dragged=!1}};function T(){var k=document.createElement("div");k.className="dragcover";var M=k.style;return M.position="fixed",M.left=0,M.right=0,M.top=0,M.bottom=0,M.zIndex=999999999,M.background="none",document.body.appendChild(k),k}y.coverSlip=T;function u(k){return g(k.changedTouches?k.changedTouches[0]:k,document.body)}}),D1=t((me,ue)=>{ue.exports=function(g,s){(g.attr("class")||"").split(" ").forEach(function(h){h.indexOf("cursor-")===0&&g.classed(h,!1)}),s&&g.classed("cursor-"+s,!0)}}),$m=t((me,ue)=>{var g=D1(),s="data-savedcursor",h="!!";ue.exports=function(x,v){var y=x.attr(s);if(v){if(!y){for(var b=(x.attr("class")||"").split(" "),T=0;T<b.length;T++){var u=b[T];u.indexOf("cursor-")===0&&x.attr(s,u.substr(7)).classed(u,!1)}x.attr(s)||x.attr(s,h)}g(x,v)}else y&&(x.attr(s,null),y===h?g(x):g(x,y))}}),R1=t((me,ue)=>{var g=Xe(),s=Sp();ue.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"legend"},maxheight:{valType:"number",min:0,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:g({editType:"legend"}),grouptitlefont:g({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:g({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}}),k1=t(me=>{me.isGrouped=function(ue){return(ue.traceorder||"").indexOf("grouped")!==-1},me.isVertical=function(ue){return ue.orientation!=="h"},me.isReversed=function(ue){return(ue.traceorder||"").indexOf("reversed")!==-1}}),Jm=t((me,ue)=>{var g=l1(),s=Z(),h=Nm(),x=mr(),v=R1(),y=o1(),b=k1();function T(u,k,M,D){var B=k[u]||{},P=h.newContainer(M,u);function N(vs,Se){return s.coerce(B,P,v,vs,Se)}var z=s.coerceFont(N,"font",M.font);N("bgcolor",M.paper_bgcolor),N("bordercolor");var F=N("visible");if(F){for(var w,L=function(vs,Se){var Ee=w._input,X=w;return s.coerce(Ee,X,x,vs,Se)},O=M.font||{},H=s.coerceFont(N,"grouptitlefont",O,{overrideDflt:{size:Math.round(O.size*1.1)}}),W=0,Ce=!1,he="normal",le=(M.shapes||[]).filter(function(vs){return vs.showlegend}),Y=D.concat(le).filter(function(vs){return u===(vs.legend||"legend")}),Re=0;Re<Y.length;Re++)if(w=Y[Re],!!w.visible){var fe=w._isShape;(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&w._module.attributes.showlegend.dflt===!1))&&(W++,w.showlegend&&(Ce=!0,(!fe&&g.traceIs(w,"pie-like")||w._input.showlegend===!0)&&W++),s.coerceFont(L,"legendgrouptitle.font",H)),(!fe&&g.traceIs(w,"bar")&&M.barmode==="stack"||["tonextx","tonexty"].indexOf(w.fill)!==-1)&&(he=b.isGrouped({traceorder:he})?"grouped+reversed":"reversed"),w.legendgroup!==void 0&&w.legendgroup!==""&&(he=b.isReversed({traceorder:he})?"reversed+grouped":"grouped")}var xe=s.coerce(k,M,y,"showlegend",Ce&&W>(u==="legend"?1:0));if(xe===!1&&(M[u]=void 0),!(xe===!1&&!B.uirevision)&&(N("uirevision",M.uirevision),xe!==!1)){N("borderwidth");var ge=N("orientation"),ye=N("yref"),Ae=N("xref"),Le=ge==="h",ce=ye==="paper",ke=Ae==="paper",Pe,tt,Ke,nt="left";Le?(Pe=0,g.getComponentMethod("rangeslider","isVisible")(k.xaxis)?ce?(tt=1.1,Ke="bottom"):(tt=1,Ke="top"):ce?(tt=-.1,Ke="top"):(tt=0,Ke="bottom")):(tt=1,Ke="auto",ke?Pe=1.02:(Pe=1,nt="right")),s.coerce(B,P,{x:{valType:"number",editType:"legend",min:ke?-2:0,max:ke?3:1,dflt:Pe}},"x"),s.coerce(B,P,{y:{valType:"number",editType:"legend",min:ce?-2:0,max:ce?3:1,dflt:tt}},"y"),N("traceorder",he),b.isGrouped(M[u])&&N("tracegroupgap"),N("entrywidth"),N("entrywidthmode"),N("indentation"),N("itemsizing"),N("itemwidth"),N("itemclick"),N("itemdoubleclick"),N("groupclick"),N("xanchor",nt),N("yanchor",Ke),N("maxheight"),N("valign"),s.noneOrAll(B,P,["x","y"]);var yi=N("title.text");if(yi){N("title.side",Le?"left":"top");var Ei=s.extendFlat({},z,{size:s.bigFont(z.size)});s.coerceFont(N,"title.font",Ei)}}}}ue.exports=function(u,k,M){var D,B=M.slice(),P=k.shapes;if(P)for(D=0;D<P.length;D++){var N=P[D];if(N.showlegend){var z={_input:N._input,visible:N.visible,showlegend:N.showlegend,legend:N.legend};B.push(z)}}var F=["legend"];for(D=0;D<B.length;D++)s.pushUnique(F,B[D].legend);for(k._legends=[],D=0;D<F.length;D++){var w=F[D];T(w,u,k,B),k[w]&&(k[w]._id=w),k._legends.push(w)}}}),I1=t((me,ue)=>{var g=l1(),s=Z(),h=s.pushUnique,x=!0;ue.exports=function(v,y,b){var T=y._fullLayout;if(y._dragged||y._editing)return;var u=T.legend.itemclick,k=T.legend.itemdoubleclick,M=T.legend.groupclick;b===1&&u==="toggle"&&k==="toggleothers"&&x&&y.data&&y._context.showTips&&s.notifier(s._(y,"Double-click on legend to isolate one trace"),"long"),x=!1;var D;if(b===1?D=u:b===2&&(D=k),!D)return;var B=M==="togglegroup",P=T.hiddenlabels?T.hiddenlabels.slice():[],N=v.data()[0][0];if(N.groupTitle&&N.noClick)return;var z=y._fullData,F=(T.shapes||[]).filter(function($p){return $p.showlegend}),w=z.concat(F),L=N.trace;L._isShape&&(L=L._fullInput);var O=L.legendgroup,H,W,Ce,he,le,Y,Re={},fe=[],xe=[],ge=[];function ye($p,Lo){var kl=fe.indexOf($p),dt=Re.visible;return dt||(dt=Re.visible=[]),fe.indexOf($p)===-1&&(fe.push($p),kl=fe.length-1),dt[kl]=Lo,kl}var Ae=(T.shapes||[]).map(function($p){return $p._input}),Le=!1;function ce($p,Lo){Ae[$p].visible=Lo,Le=!0}function ke($p,Lo){if(!(N.groupTitle&&!B)){var kl=$p._fullInput||$p,dt=kl._isShape,yp=kl.index;yp===void 0&&(yp=kl._index);var Bp=kl.visible===!1?!1:Lo;dt?ce(yp,Bp):ye(yp,Bp)}}var Pe=L.legend,tt=L._fullInput,Ke=tt&&tt._isShape;if(!Ke&&g.traceIs(L,"pie-like")){var nt=N.label,yi=P.indexOf(nt);if(D==="toggle")yi===-1?P.push(nt):P.splice(yi,1);else if(D==="toggleothers"){var Ei=yi!==-1,vs=[];for(H=0;H<y.calcdata.length;H++){var Se=y.calcdata[H];for(W=0;W<Se.length;W++){var Ee=Se[W],X=Ee.label;Pe===Se[0].trace.legend&&nt!==X&&(P.indexOf(X)===-1&&(Ei=!0),h(P,X),vs.push(X))}}if(!Ei)for(var Oe=0;Oe<vs.length;Oe++){var Qe=P.indexOf(vs[Oe]);Qe!==-1&&P.splice(Qe,1)}}g.call("_guiRelayout",y,"hiddenlabels",P)}else{var pe=O&&O.length,q=[],ae;if(pe)for(H=0;H<w.length;H++)ae=w[H],ae.visible&&ae.legendgroup===O&&q.push(H);if(D==="toggle"){var ve;switch(L.visible){case!0:ve="legendonly";break;case!1:ve=!1;break;case"legendonly":ve=!0;break}if(pe)if(B)for(H=0;H<w.length;H++){var Te=w[H];Te.visible!==!1&&Te.legendgroup===O&&ke(Te,ve)}else ke(L,ve);else ke(L,ve)}else if(D==="toggleothers"){var et,bt,dr,Ol,Xl,Pp=!0;for(H=0;H<w.length;H++)if(Xl=w[H],et=Xl===L,dr=Xl.showlegend!==!0,!(et||dr)&&(bt=pe&&Xl.legendgroup===O,!bt&&Xl.legend===Pe&&Xl.visible===!0&&!g.traceIs(Xl,"notLegendIsolatable"))){Pp=!1;break}for(H=0;H<w.length;H++)if(Xl=w[H],!(Xl.visible===!1||Xl.legend!==Pe)&&!g.traceIs(Xl,"notLegendIsolatable"))switch(L.visible){case"legendonly":ke(Xl,!0);break;case!0:Ol=Pp?!0:"legendonly",et=Xl===L,dr=Xl.showlegend!==!0&&!Xl.legendgroup,bt=et||pe&&Xl.legendgroup===O,ke(Xl,bt||dr?!0:Ol);break}}for(H=0;H<xe.length;H++)if(Ce=xe[H],!!Ce){var t0=Ce.constructUpdate(),Wp=Object.keys(t0);for(W=0;W<Wp.length;W++)he=Wp[W],Y=Re[he]=Re[he]||[],Y[ge[H]]=t0[he]}for(le=Object.keys(Re),H=0;H<le.length;H++)for(he=le[H],W=0;W<fe.length;W++)Re[he].hasOwnProperty(W)||(Re[he][W]=void 0);Le?g.call("_guiUpdate",y,Re,{shapes:Ae},fe):g.call("_guiRestyle",y,Re,fe)}}}),ug=t((me,ue)=>{ue.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}}),O1=t((me,ue)=>{var g=l1(),s=k1();ue.exports=function(h,x,v){var y=x._inHover,b=s.isGrouped(x),T=s.isReversed(x),u={},k=[],M=!1,D={},B=0,P=0,N,z;function F(ke,Pe,tt){if(x.visible!==!1&&!(v&&ke!==x._id))if(Pe===""||!s.isGrouped(x)){var Ke="~~i"+B;k.push(Ke),u[Ke]=[tt],B++}else k.indexOf(Pe)===-1?(k.push(Pe),M=!0,u[Pe]=[tt]):u[Pe].push(tt)}for(N=0;N<h.length;N++){var w=h[N],L=w[0],O=L.trace,H=O.legend,W=O.legendgroup;if(!(!y&&(!O.visible||!O.showlegend)))if(g.traceIs(O,"pie-like"))for(D[W]||(D[W]={}),z=0;z<w.length;z++){var Ce=w[z].label;D[W][Ce]||(F(H,W,{label:Ce,color:w[z].color,i:w[z].i,trace:O,pts:w[z].pts}),D[W][Ce]=!0,P=Math.max(P,(Ce||"").length))}else F(H,W,L),P=Math.max(P,(O.name||"").length)}if(!k.length)return[];var he=!M||!b,le=[];for(N=0;N<k.length;N++){var Y=u[k[N]];he?le.push(Y[0]):le.push(Y)}for(he&&(le=[le]),N=0;N<le.length;N++){var Re=1/0;for(z=0;z<le[N].length;z++){var fe=le[N][z].trace.legendrank;Re>fe&&(Re=fe)}le[N][0]._groupMinRank=Re,le[N][0]._preGroupSort=N}var xe=function(ke,Pe){return ke[0]._groupMinRank-Pe[0]._groupMinRank||ke[0]._preGroupSort-Pe[0]._preGroupSort},ge=function(ke,Pe){return ke.trace.legendrank-Pe.trace.legendrank||ke._preSort-Pe._preSort};for(le.forEach(function(ke,Pe){ke[0]._preGroupSort=Pe}),le.sort(xe),N=0;N<le.length;N++){le[N].forEach(function(ke,Pe){ke._preSort=Pe}),le[N].sort(ge);var ye=le[N][0].trace,Ae=null;for(z=0;z<le[N].length;z++){var Le=le[N][z].trace.legendgrouptitle;if(Le&&Le.text){Ae=Le,y&&(Le.font=x._groupTitleFont);break}}if(T&&le[N].reverse(),Ae){var ce=!1;for(z=0;z<le[N].length;z++)if(g.traceIs(le[N][z].trace,"pie-like")){ce=!0;break}le[N].unshift({i:-1,groupTitle:Ae,noClick:ce,trace:{showlegend:ye.showlegend,legendgroup:ye.legendgroup,visible:x.groupclick==="toggleitem"?!0:ye.visible}})}for(z=0;z<le[N].length;z++)le[N][z]=[le[N][z]]}return x._lgroupsLength=le.length,x._maxNameLength=P,le}}),s1=t(me=>{var ue=Z();function g(s){return s.indexOf("e")!==-1?s.replace(/[.]?0+e/,"e"):s.indexOf(".")!==-1?s.replace(/[.]?0+$/,""):s}me.formatPiePercent=function(s,h){var x=g((s*100).toPrecision(3));return ue.numSeparate(x,h)+"%"},me.formatPieValue=function(s,h){var x=g(s.toPrecision(10));return ue.numSeparate(x,h)},me.getFirstFilled=function(s,h){if(ue.isArrayOrTypedArray(s))for(var x=0;x<h.length;x++){var v=s[h[x]];if(v||v===0||v==="")return v}},me.castOption=function(s,h){if(ue.isArrayOrTypedArray(s))return me.getFirstFilled(s,h);if(s)return s},me.getRotationAngle=function(s){return(s==="auto"?0:s)*Math.PI/180}}),yg=t((me,ue)=>{var g=D0(),s=_r();ue.exports=function(h,x,v,y){var b=v.marker.pattern;b&&b.shape?g.pointStyle(h,v,y,x):s.fill(h,x.color)}}),Z1=t((me,ue)=>{var g=_r(),s=s1().castOption,h=yg();ue.exports=function(x,v,y,b){var T=y.marker.line,u=s(T.color,v.pts)||g.defaultLine,k=s(T.width,v.pts)||0;x.call(h,v,y,b).style("stroke-width",k).call(g.stroke,u)}}),pg=t((me,ue)=>{var g=c(),s=l1(),h=Z(),x=h.strTranslate,v=D0(),y=_r(),b=eg().extractOpts,T=Dp(),u=Z1(),k=s1().castOption,M=ug(),D=12,B=5,P=2,N=10,z=5;ue.exports=function(O,H,W){var Ce=H._fullLayout;W||(W=Ce.legend);var he=W.itemsizing==="constant",le=W.itemwidth,Y=(le+M.itemGap*2)/2,Re=x(Y,0),fe=function(vs,Se,Ee,X){var Oe;if(vs+1)Oe=vs;else if(Se&&Se.width>0)Oe=Se.width;else return 0;return he?X:Math.min(Oe,Ee)};O.each(function(vs){var Se=g.select(this),Ee=h.ensureSingle(Se,"g","layers");Ee.style("opacity",vs[0].trace.opacity);var X=W.indentation,Oe=W.valign,Qe=vs[0].lineHeight,pe=vs[0].height;if(Oe==="middle"&&X===0||!Qe||!pe)Ee.attr("transform",null);else{var q={top:1,bottom:-1}[Oe],ae=q*(.5*(Qe-pe+3))||0,ve=W.indentation;Ee.attr("transform",x(ve,ae))}var Te=Ee.selectAll("g.legendfill").data([vs]);Te.enter().append("g").classed("legendfill",!0);var et=Ee.selectAll("g.legendlines").data([vs]);et.enter().append("g").classed("legendlines",!0);var bt=Ee.selectAll("g.legendsymbols").data([vs]);bt.enter().append("g").classed("legendsymbols",!0),bt.selectAll("g.legendpoints").data([vs]).enter().append("g").classed("legendpoints",!0)}).each(Ei).each(ye).each(Le).each(Ae).each(ke).each(nt).each(Ke).each(xe).each(ge).each(Pe).each(tt);function xe(vs){var Se=w(vs),Ee=Se.showFill,X=Se.showLine,Oe=Se.showGradientLine,Qe=Se.showGradientFill,pe=Se.anyFill,q=Se.anyLine,ae=vs[0],ve=ae.trace,Te,et,bt=b(ve),dr=bt.colorscale,Ol=bt.reversescale,Xl=function(dt){if(dt.size())if(Ee)v.fillGroupStyle(dt,H,!0);else{var yp="legendfill-"+ve.uid;v.gradient(dt,H,yp,F(Ol),dr,"fill")}},Pp=function(dt){if(dt.size()){var yp="legendline-"+ve.uid;v.lineGroupStyle(dt),v.gradient(dt,H,yp,F(Ol),dr,"stroke")}},t0=T.hasMarkers(ve)||!pe?"M5,0":q?"M5,-2":"M5,-3",Wp=g.select(this),$p=Wp.select(".legendfill").selectAll("path").data(Ee||Qe?[vs]:[]);if($p.enter().append("path").classed("js-fill",!0),$p.exit().remove(),$p.attr("d",t0+"h"+le+"v6h-"+le+"z").call(Xl),X||Oe){var Lo=fe(void 0,ve.line,N,B);et=h.minExtend(ve,{line:{width:Lo}}),Te=[h.minExtend(ae,{trace:et})]}var kl=Wp.select(".legendlines").selectAll("path").data(X||Oe?[Te]:[]);kl.enter().append("path").classed("js-line",!0),kl.exit().remove(),kl.attr("d",t0+(Oe?"l"+le+",0.0001":"h"+le)).call(X?v.lineGroupStyle:Pp)}function ge(vs){var Se=w(vs),Ee=Se.anyFill,X=Se.anyLine,Oe=Se.showLine,Qe=Se.showMarker,pe=vs[0],q=pe.trace,ae=!Qe&&!X&&!Ee&&T.hasText(q),ve,Te;function et($p,Lo,kl,dt){var yp=h.nestedProperty(q,$p).get(),Bp=h.isArrayOrTypedArray(yp)&&Lo?Lo(yp):yp;if(he&&Bp&&dt!==void 0&&(Bp=dt),kl){if(Bp<kl[0])return kl[0];if(Bp>kl[1])return kl[1]}return Bp}function bt($p){return pe._distinct&&pe.index&&$p[pe.index]?$p[pe.index]:$p[0]}if(Qe||ae||Oe){var dr={},Ol={};if(Qe){dr.mc=et("marker.color",bt),dr.mx=et("marker.symbol",bt),dr.mo=et("marker.opacity",h.mean,[.2,1]),dr.mlc=et("marker.line.color",bt),dr.mlw=et("marker.line.width",h.mean,[0,5],P),Ol.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Xl=et("marker.size",h.mean,[2,16],D);dr.ms=Xl,Ol.marker.size=Xl}Oe&&(Ol.line={width:et("line.width",bt,[0,10],B)}),ae&&(dr.tx="Aa",dr.tp=et("textposition",bt),dr.ts=10,dr.tc=et("textfont.color",bt),dr.tf=et("textfont.family",bt),dr.tw=et("textfont.weight",bt),dr.ty=et("textfont.style",bt),dr.tv=et("textfont.variant",bt),dr.tC=et("textfont.textcase",bt),dr.tE=et("textfont.lineposition",bt),dr.tS=et("textfont.shadow",bt)),ve=[h.minExtend(pe,dr)],Te=h.minExtend(q,Ol),Te.selectedpoints=null,Te.texttemplate=null}var Pp=g.select(this).select("g.legendpoints"),t0=Pp.selectAll("path.scatterpts").data(Qe?ve:[]);t0.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",Re),t0.exit().remove(),t0.call(v.pointStyle,Te,H),Qe&&(ve[0].mrc=3);var Wp=Pp.selectAll("g.pointtext").data(ae?ve:[]);Wp.enter().append("g").classed("pointtext",!0).append("text").attr("transform",Re),Wp.exit().remove(),Wp.selectAll("text").call(v.textPointStyle,Te,H)}function ye(vs){var Se=vs[0].trace,Ee=Se.type==="waterfall";if(vs[0]._distinct&&Ee){var X=vs[0].trace[vs[0].dir].marker;return vs[0].mc=X.color,vs[0].mlw=X.line.width,vs[0].mlc=X.line.color,ce(vs,this,"waterfall")}var Oe=[];Se.visible&&Ee&&(Oe=vs[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var Qe=g.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(Oe);Qe.enter().append("path").classed("legendwaterfall",!0).attr("transform",Re).style("stroke-miterlimit",1),Qe.exit().remove(),Qe.each(function(pe){var q=g.select(this),ae=Se[pe[0]].marker,ve=fe(void 0,ae.line,z,P);q.attr("d",pe[1]).style("stroke-width",ve+"px").call(y.fill,ae.color),ve&&q.call(y.stroke,ae.line.color)})}function Ae(vs){ce(vs,this)}function Le(vs){ce(vs,this,"funnel")}function ce(vs,Se,Ee){var X=vs[0].trace,Oe=X.marker||{},Qe=Oe.line||{},pe=Oe.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",q=Ee?X.visible&&X.type===Ee:s.traceIs(X,"bar"),ae=g.select(Se).select("g.legendpoints").selectAll("path.legend"+Ee).data(q?[vs]:[]);ae.enter().append("path").classed("legend"+Ee,!0).attr("d",pe).attr("transform",Re),ae.exit().remove(),ae.each(function(ve){var Te=g.select(this),et=ve[0],bt=fe(et.mlw,Oe.line,z,P);Te.style("stroke-width",bt+"px");var dr=et.mcc;if(!W._inHover&&"mc"in et){var Ol=b(Oe),Xl=Ol.mid;Xl===void 0&&(Xl=(Ol.max+Ol.min)/2),dr=v.tryColorscale(Oe,"")(Xl)}var Pp=dr||et.mc||Oe.color,t0=Oe.pattern,Wp=v.getPatternAttr,$p=t0&&(Wp(t0.shape,0,"")||Wp(t0.path,0,""));if($p){var Lo=Wp(t0.bgcolor,0,null),kl=Wp(t0.fgcolor,0,null),dt=t0.fgopacity,yp=L(t0.size,8,10),Bp=L(t0.solidity,.5,1),Jp="legend-"+X.uid;Te.call(v.pattern,"legend",H,Jp,$p,yp,Bp,dr,t0.fillmode,Lo,kl,dt)}else Te.call(y.fill,Pp);bt&&y.stroke(Te,et.mlc||Qe.color)})}function ke(vs){var Se=vs[0].trace,Ee=g.select(this).select("g.legendpoints").selectAll("path.legendbox").data(Se.visible&&s.traceIs(Se,"box-violin")?[vs]:[]);Ee.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",Re),Ee.exit().remove(),Ee.each(function(){var X=g.select(this);if((Se.boxpoints==="all"||Se.points==="all")&&y.opacity(Se.fillcolor)===0&&y.opacity((Se.line||{}).color)===0){var Oe=h.minExtend(Se,{marker:{size:he?D:h.constrain(Se.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});Ee.call(v.pointStyle,Oe,H)}else{var Qe=fe(void 0,Se.line,z,P);X.style("stroke-width",Qe+"px").call(y.fill,Se.fillcolor),Qe&&y.stroke(X,Se.line.color)}})}function Pe(vs){var Se=vs[0].trace,Ee=g.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(Se.visible&&Se.type==="candlestick"?[vs,vs]:[]);Ee.enter().append("path").classed("legendcandle",!0).attr("d",function(X,Oe){return Oe?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",Re).style("stroke-miterlimit",1),Ee.exit().remove(),Ee.each(function(X,Oe){var Qe=g.select(this),pe=Se[Oe?"increasing":"decreasing"],q=fe(void 0,pe.line,z,P);Qe.style("stroke-width",q+"px").call(y.fill,pe.fillcolor),q&&y.stroke(Qe,pe.line.color)})}function tt(vs){var Se=vs[0].trace,Ee=g.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(Se.visible&&Se.type==="ohlc"?[vs,vs]:[]);Ee.enter().append("path").classed("legendohlc",!0).attr("d",function(X,Oe){return Oe?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",Re).style("stroke-miterlimit",1),Ee.exit().remove(),Ee.each(function(X,Oe){var Qe=g.select(this),pe=Se[Oe?"increasing":"decreasing"],q=fe(void 0,pe.line,z,P);Qe.style("fill","none").call(v.dashLine,pe.line.dash,q),q&&y.stroke(Qe,pe.line.color)})}function Ke(vs){yi(vs,this,"pie")}function nt(vs){yi(vs,this,"funnelarea")}function yi(vs,Se,Ee){var X=vs[0],Oe=X.trace,Qe=Ee?Oe.visible&&Oe.type===Ee:s.traceIs(Oe,Ee),pe=g.select(Se).select("g.legendpoints").selectAll("path.legend"+Ee).data(Qe?[vs]:[]);if(pe.enter().append("path").classed("legend"+Ee,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",Re),pe.exit().remove(),pe.size()){var q=Oe.marker||{},ae=fe(k(q.line.width,X.pts),q.line,z,P),ve="pieLike",Te=h.minExtend(Oe,{marker:{line:{width:ae}}},ve),et=h.minExtend(X,{trace:Te},ve);u(pe,et,Te,H)}}function Ei(vs){var Se=vs[0].trace,Ee,X=[];if(Se.visible)switch(Se.type){case"histogram2d":case"heatmap":X=[["M-15,-2V4H15V-2Z"]],Ee=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":X=[["M-6,-6V6H6V-6Z"]],Ee=!0;break;case"densitymapbox":case"densitymap":X=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],Ee="radial";break;case"cone":X=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],Ee=!1;break;case"streamtube":X=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],Ee=!1;break;case"surface":X=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],Ee=!0;break;case"mesh3d":X=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Ee=!1;break;case"volume":X=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Ee=!0;break;case"isosurface":X=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],Ee=!1;break}var Oe=g.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(X);Oe.enter().append("path").classed("legend3dandfriends",!0).attr("transform",Re).style("stroke-miterlimit",1),Oe.exit().remove(),Oe.each(function(Qe,pe){var q=g.select(this),ae=b(Se),ve=ae.colorscale,Te=ae.reversescale,et=function(Xl){if(Xl.size()){var Pp="legendfill-"+Se.uid;v.gradient(Xl,H,Pp,F(Te,Ee==="radial"),ve,"fill")}},bt;if(ve){if(!Ee){var dr=ve.length;bt=pe===0?ve[Te?dr-1:0][1]:pe===1?ve[Te?0:dr-1][1]:ve[Math.floor((dr-1)/2)][1]}}else{var Ol=Se.vertexcolor||Se.facecolor||Se.color;bt=h.isArrayOrTypedArray(Ol)?Ol[pe]||Ol[0]:Ol}q.attr("d",Qe[0]),bt?q.call(y.fill,bt):q.call(et)})}};function F(O,H){var W=H?"radial":"horizontal";return W+(O?"":"reversed")}function w(O){var H=O[0].trace,W=H.contours,Ce=T.hasLines(H),he=T.hasMarkers(H),le=H.visible&&H.fill&&H.fill!=="none",Y=!1,Re=!1;if(W){var fe=W.coloring;fe==="lines"?Y=!0:Ce=fe==="none"||fe==="heatmap"||W.showlines,W.type==="constraint"?le=W._operation!=="=":(fe==="fill"||fe==="heatmap")&&(Re=!0)}return{showMarker:he,showLine:Ce,showFill:le,showGradientLine:Y,showGradientFill:Re,anyLine:Ce||Y,anyFill:le||Re}}function L(O,H,W){return O&&h.isArrayOrTypedArray(O)?H:O>W?W:O}}),J1=t((me,ue)=>{var g=c(),s=Z(),h=vg(),x=l1(),v=Mm(),y=Om(),b=D0(),T=_r(),u=kg(),k=I1(),M=ug(),D=Q1(),B=D.LINE_SPACING,P=D.FROM_TL,N=D.FROM_BR,z=O1(),F=pg(),w=k1(),L=1,O=/^legend[0-9]*$/;ue.exports=function(Pe,tt){if(tt)W(Pe,tt);else{var Ke=Pe._fullLayout,nt=Ke._legends,yi=Ke._infolayer.selectAll('[class^="legend"]');yi.each(function(){var Ee=g.select(this),X=Ee.attr("class"),Oe=X.split(" ")[0];Oe.match(O)&&nt.indexOf(Oe)===-1&&Ee.remove()});for(var Ei=0;Ei<nt.length;Ei++){var vs=nt[Ei],Se=Pe._fullLayout[vs];W(Pe,Se)}}};function H(Pe,tt,Ke){if(!(tt.title.side!=="top center"&&tt.title.side!=="top right")){var nt=tt.title.font,yi=nt.size*B,Ei=0,vs=Pe.node(),Se=b.bBox(vs).width;tt.title.side==="top center"?Ei=.5*(tt._width-2*Ke-2*M.titlePad-Se):tt.title.side==="top right"&&(Ei=tt._width-2*Ke-2*M.titlePad-Se),u.positionText(Pe,Ke+M.titlePad+Ei,Ke+yi)}}function W(Pe,tt){var Ke=tt||{},nt=Pe._fullLayout,yi=ke(Ke),Ei,vs,Se=Ke._inHover;if(Se?(vs=Ke.layer,Ei="hover"):(vs=nt._infolayer,Ei=yi),!!vs){Ei+=nt._uid,Pe._legendMouseDownTime||(Pe._legendMouseDownTime=0);var Ee;if(Se){if(!Ke.entries)return;Ee=z(Ke.entries,Ke)}else{for(var X=(Pe.calcdata||[]).slice(),Oe=nt.shapes,Qe=0;Qe<Oe.length;Qe++){var pe=Oe[Qe];if(pe.showlegend){var q={_isShape:!0,_fullInput:pe,index:pe._index,name:pe.name||pe.label.text||"shape "+pe._index,legend:pe.legend,legendgroup:pe.legendgroup,legendgrouptitle:pe.legendgrouptitle,legendrank:pe.legendrank,legendwidth:pe.legendwidth,showlegend:pe.showlegend,visible:pe.visible,opacity:pe.opacity,mode:pe.type==="line"?"lines":"markers",line:pe.line,marker:{line:pe.line,color:pe.fillcolor,size:12,symbol:pe.type==="rect"?"square":pe.type==="circle"?"circle":"hexagon2"}};X.push([{trace:q}])}}Ee=nt.showlegend&&z(X,Ke,nt._legends.length>1)}var ae=nt.hiddenlabels||[];if(!Se&&(!nt.showlegend||!Ee.length))return vs.selectAll("."+yi).remove(),nt._topdefs.select("#"+Ei).remove(),h.autoMargin(Pe,yi);var ve=s.ensureSingle(vs,"g",yi,function(Wp){Se||Wp.attr("pointer-events","all")}),Te=s.ensureSingleById(nt._topdefs,"clipPath",Ei,function(Wp){Wp.append("rect")}),et=s.ensureSingle(ve,"rect","bg",function(Wp){Wp.attr("shape-rendering","crispEdges")});et.call(T.stroke,Ke.bordercolor).call(T.fill,Ke.bgcolor).style("stroke-width",Ke.borderwidth+"px");var bt=s.ensureSingle(ve,"g","scrollbox"),dr=Ke.title;Ke._titleWidth=0,Ke._titleHeight=0;var Ol;dr.text?(Ol=s.ensureSingle(bt,"text",yi+"titletext"),Ol.attr("text-anchor","start").call(b.font,dr.font).text(dr.text),fe(Ol,bt,Pe,Ke,L)):bt.selectAll("."+yi+"titletext").remove();var Xl=s.ensureSingle(ve,"rect","scrollbar",function(Wp){Wp.attr(M.scrollBarEnterAttrs).call(T.fill,M.scrollBarColor)}),Pp=bt.selectAll("g.groups").data(Ee);Pp.enter().append("g").attr("class","groups"),Pp.exit().remove();var t0=Pp.selectAll("g.traces").data(s.identity);t0.enter().append("g").attr("class","traces"),t0.exit().remove(),t0.style("opacity",function(Wp){var $p=Wp[0].trace;return x.traceIs($p,"pie-like")?ae.indexOf(Wp[0].label)!==-1?.5:1:$p.visible==="legendonly"?.5:1}).each(function(){g.select(this).call(le,Pe,Ke)}).call(F,Pe,Ke).each(function(){Se||g.select(this).call(Re,Pe,yi)}),s.syncOrAsync([h.previousPromises,function(){return ye(Pe,Pp,t0,Ke)},function(){var Wp=nt._size,$p=Ke.borderwidth,Lo=Ke.xref==="paper",kl=Ke.yref==="paper";if(dr.text&&H(Ol,Ke,$p),!Se){var dt,yp;Lo?dt=Wp.l+Wp.w*Ke.x-P[Le(Ke)]*Ke._width:dt=nt.width*Ke.x-P[Le(Ke)]*Ke._width,kl?yp=Wp.t+Wp.h*(1-Ke.y)-P[ce(Ke)]*Ke._effHeight:yp=nt.height*(1-Ke.y)-P[ce(Ke)]*Ke._effHeight;var Bp=Ae(Pe,yi,dt,yp);if(Bp)return;if(nt.margin.autoexpand){var Jp=dt,m0=yp;dt=Lo?s.constrain(dt,0,nt.width-Ke._width):Jp,yp=kl?s.constrain(yp,0,nt.height-Ke._effHeight):m0,dt!==Jp&&s.log("Constrain "+yi+".x to make legend fit inside graph"),yp!==m0&&s.log("Constrain "+yi+".y to make legend fit inside graph")}b.setTranslate(ve,dt,yp)}if(Xl.on(".drag",null),ve.on("wheel",null),Se||Ke._height<=Ke._maxHeight||Pe._context.staticPlot){var s0=Ke._effHeight;Se&&(s0=Ke._height),et.attr({width:Ke._width-$p,height:s0-$p,x:$p/2,y:$p/2}),b.setTranslate(bt,0,0),Te.select("rect").attr({width:Ke._width-2*$p,height:s0-2*$p,x:$p,y:$p}),b.setClipUrl(bt,Ei,Pe),b.setRect(Xl,0,0,0,0),delete Ke._scrollY}else{var y0=Math.max(M.scrollBarMinHeight,Ke._effHeight*Ke._effHeight/Ke._height),M0=Ke._effHeight-y0-2*M.scrollBarMargin,T0=Ke._height-Ke._effHeight,G0=M0/T0,h0=Math.min(Ke._scrollY||0,T0);et.attr({width:Ke._width-2*$p+M.scrollBarWidth+M.scrollBarMargin,height:Ke._effHeight-$p,x:$p/2,y:$p/2}),Te.select("rect").attr({width:Ke._width-2*$p+M.scrollBarWidth+M.scrollBarMargin,height:Ke._effHeight-2*$p,x:$p,y:$p+h0}),b.setClipUrl(bt,Ei,Pe),ft(h0,y0,G0),ve.on("wheel",function(){h0=s.constrain(Ke._scrollY+g.event.deltaY/M0*T0,0,T0),ft(h0,y0,G0),h0!==0&&h0!==T0&&g.event.preventDefault()});var W0,rm,V0,um=function(Up,Qp,Zp){var Kp=(Zp-Qp)/G0+Up;return s.constrain(Kp,0,T0)},Uo=function(Up,Qp,Zp){var Kp=(Qp-Zp)/G0+Up;return s.constrain(Kp,0,T0)},Tp=g.behavior.drag().on("dragstart",function(){var Up=g.event.sourceEvent;Up.type==="touchstart"?W0=Up.changedTouches[0].clientY:W0=Up.clientY,V0=h0}).on("drag",function(){var Up=g.event.sourceEvent;Up.buttons===2||Up.ctrlKey||(Up.type==="touchmove"?rm=Up.changedTouches[0].clientY:rm=Up.clientY,h0=um(V0,W0,rm),ft(h0,y0,G0))});Xl.call(Tp);var Be=g.behavior.drag().on("dragstart",function(){var Up=g.event.sourceEvent;Up.type==="touchstart"&&(W0=Up.changedTouches[0].clientY,V0=h0)}).on("drag",function(){var Up=g.event.sourceEvent;Up.type==="touchmove"&&(rm=Up.changedTouches[0].clientY,h0=Uo(V0,W0,rm),ft(h0,y0,G0))});bt.call(Be)}function ft(Up,Qp,Zp){Ke._scrollY=Pe._fullLayout[yi]._scrollY=Up,b.setTranslate(bt,0,-Up),b.setRect(Xl,Ke._width,M.scrollBarMargin+Up*Zp,M.scrollBarWidth,Qp),Te.select("rect").attr("y",$p+Up)}if(Pe._context.edits.legendPosition){var mn,Bl,Vl,Np;ve.classed("cursor-move",!0),y.init({element:ve.node(),gd:Pe,prepFn:function(Up){if(Up.target!==Xl.node()){var Qp=b.getTranslate(ve);Vl=Qp.x,Np=Qp.y}},moveFn:function(Up,Qp){if(Vl!==void 0&&Np!==void 0){var Zp=Vl+Up,Kp=Np+Qp;b.setTranslate(ve,Zp,Kp),mn=y.align(Zp,Ke._width,Wp.l,Wp.l+Wp.w,Ke.xanchor),Bl=y.align(Kp+Ke._height,-Ke._height,Wp.t+Wp.h,Wp.t,Ke.yanchor)}},doneFn:function(){if(mn!==void 0&&Bl!==void 0){var Up={};Up[yi+".x"]=mn,Up[yi+".y"]=Bl,x.call("_guiRelayout",Pe,Up)}},clickFn:function(Up,Qp){var Zp=vs.selectAll("g.traces").filter(function(){var Kp=this.getBoundingClientRect();return Qp.clientX>=Kp.left&&Qp.clientX<=Kp.right&&Qp.clientY>=Kp.top&&Qp.clientY<=Kp.bottom});Zp.size()>0&&he(Pe,ve,Zp,Up,Qp)}})}}],Pe)}}function Ce(Pe,tt,Ke){var nt=Pe[0],yi=nt.width,Ei=tt.entrywidthmode,vs=nt.trace.legendwidth||tt.entrywidth;return Ei==="fraction"?tt._maxWidth*vs:Ke+(vs||yi)}function he(Pe,tt,Ke,nt,yi){var Ei=Ke.data()[0][0].trace,vs={event:yi,node:Ke.node(),curveNumber:Ei.index,expandedIndex:Ei.index,data:Pe.data,layout:Pe.layout,frames:Pe._transitionData._frames,config:Pe._context,fullData:Pe._fullData,fullLayout:Pe._fullLayout};Ei._group&&(vs.group=Ei._group),x.traceIs(Ei,"pie-like")&&(vs.label=Ke.datum()[0].label);var Se=v.triggerHandler(Pe,"plotly_legendclick",vs);if(nt===1){if(Se===!1)return;tt._clickTimeout=setTimeout(function(){Pe._fullLayout&&k(Ke,Pe,nt)},Pe._context.doubleClickDelay)}else if(nt===2){tt._clickTimeout&&clearTimeout(tt._clickTimeout),Pe._legendMouseDownTime=0;var Ee=v.triggerHandler(Pe,"plotly_legenddoubleclick",vs);Ee!==!1&&Se!==!1&&k(Ke,Pe,nt)}}function le(Pe,tt,Ke){var nt=ke(Ke),yi=Pe.data()[0][0],Ei=yi.trace,vs=x.traceIs(Ei,"pie-like"),Se=!Ke._inHover&&tt._context.edits.legendText&&!vs,Ee=Ke._maxNameLength,X,Oe;yi.groupTitle?(X=yi.groupTitle.text,Oe=yi.groupTitle.font):(Oe=Ke.font,Ke.entries?X=yi.text:(X=vs?yi.label:Ei.name,Ei._meta&&(X=s.templateString(X,Ei._meta))));var Qe=s.ensureSingle(Pe,"text",nt+"text");Qe.attr("text-anchor","start").call(b.font,Oe).text(Se?Y(X,Ee):X);var pe=Ke.indentation+Ke.itemwidth+M.itemGap*2;u.positionText(Qe,pe,0),Se?Qe.call(u.makeEditable,{gd:tt,text:X}).call(fe,Pe,tt,Ke).on("edit",function(q){this.text(Y(q,Ee)).call(fe,Pe,tt,Ke);var ae=yi.trace._fullInput||{},ve={};return ve.name=q,ae._isShape?x.call("_guiRelayout",tt,"shapes["+Ei.index+"].name",ve.name):x.call("_guiRestyle",tt,ve,Ei.index)}):fe(Qe,Pe,tt,Ke)}function Y(Pe,tt){var Ke=Math.max(4,tt);if(Pe&&Pe.trim().length>=Ke/2)return Pe;Pe=Pe||"";for(var nt=Ke-Pe.length;nt>0;nt--)Pe+=" ";return Pe}function Re(Pe,tt,Ke){var nt=tt._context.doubleClickDelay,yi,Ei=1,vs=s.ensureSingle(Pe,"rect",Ke+"toggle",function(Se){tt._context.staticPlot||Se.style("cursor","pointer").attr("pointer-events","all"),Se.call(T.fill,"rgba(0,0,0,0)")});tt._context.staticPlot||(vs.on("mousedown",function(){yi=new Date().getTime(),yi-tt._legendMouseDownTime<nt?Ei+=1:(Ei=1,tt._legendMouseDownTime=yi)}),vs.on("mouseup",function(){if(!(tt._dragged||tt._editing)){var Se=tt._fullLayout[Ke];new Date().getTime()-tt._legendMouseDownTime>nt&&(Ei=Math.max(Ei-1,1)),he(tt,Se,Pe,Ei,g.event)}}))}function fe(Pe,tt,Ke,nt,yi){nt._inHover&&Pe.attr("data-notex",!0),u.convertToTspans(Pe,Ke,function(){xe(tt,Ke,nt,yi)})}function xe(Pe,tt,Ke,nt){var yi=Pe.data()[0][0];if(!Ke._inHover&&yi&&!yi.trace.showlegend){Pe.remove();return}var Ei=Pe.select("g[class*=math-group]"),vs=Ei.node(),Se=ke(Ke);Ke||(Ke=tt._fullLayout[Se]);var Ee=Ke.borderwidth,X;nt===L?X=Ke.title.font:yi.groupTitle?X=yi.groupTitle.font:X=Ke.font;var Oe=X.size*B,Qe,pe;if(vs){var q=b.bBox(vs);Qe=q.height,pe=q.width,nt===L?b.setTranslate(Ei,Ee,Ee+Qe*.75):b.setTranslate(Ei,0,Qe*.25)}else{var ae="."+Se+(nt===L?"title":"")+"text",ve=Pe.select(ae),Te=u.lineCount(ve),et=ve.node();if(Qe=Oe*Te,pe=et?b.bBox(et).width:0,nt===L)Ke.title.side==="left"&&(pe+=M.itemGap*2),u.positionText(ve,Ee+M.titlePad,Ee+Oe);else{var bt=M.itemGap*2+Ke.indentation+Ke.itemwidth;yi.groupTitle&&(bt=M.itemGap,pe-=Ke.indentation+Ke.itemwidth),u.positionText(ve,bt,-Oe*((Te-1)/2-.3))}}nt===L?(Ke._titleWidth=pe,Ke._titleHeight=Qe):(yi.lineHeight=Oe,yi.height=Math.max(Qe,16)+3,yi.width=pe)}function ge(Pe){var tt=0,Ke=0,nt=Pe.title.side;return nt&&(nt.indexOf("left")!==-1&&(tt=Pe._titleWidth),nt.indexOf("top")!==-1&&(Ke=Pe._titleHeight)),[tt,Ke]}function ye(Pe,tt,Ke,nt){var yi=Pe._fullLayout,Ei=ke(nt);nt||(nt=yi[Ei]);var vs=yi._size,Se=w.isVertical(nt),Ee=w.isGrouped(nt),X=nt.entrywidthmode==="fraction",Oe=nt.borderwidth,Qe=2*Oe,pe=M.itemGap,q=nt.indentation+nt.itemwidth+pe*2,ae=2*(Oe+pe),ve=ce(nt),Te=nt.y<0||nt.y===0&&ve==="top",et=nt.y>1||nt.y===1&&ve==="bottom",bt=nt.tracegroupgap,dr={};let{orientation:Ol,yref:Xl}=nt,{maxheight:Pp}=nt,t0=Te||et||Ol!=="v"||Xl!=="paper";Pp||(Pp=t0?.5:1);let Wp=t0?yi.height:vs.h;nt._maxHeight=Math.max(Pp>1?Pp:Pp*Wp,30);var $p=0;nt._width=0,nt._height=0;var Lo=ge(nt);if(Se)Ke.each(function(ft){var mn=ft[0].height;b.setTranslate(this,Oe+Lo[0],Oe+Lo[1]+nt._height+mn/2+pe),nt._height+=mn,nt._width=Math.max(nt._width,ft[0].width)}),$p=q+nt._width,nt._width+=pe+q+Qe,nt._height+=ae,Ee&&(tt.each(function(ft,mn){b.setTranslate(this,0,mn*nt.tracegroupgap)}),nt._height+=(nt._lgroupsLength-1)*nt.tracegroupgap);else{var kl=Le(nt),dt=nt.x<0||nt.x===0&&kl==="right",yp=nt.x>1||nt.x===1&&kl==="left",Bp=et||Te,Jp=yi.width/2;nt._maxWidth=Math.max(dt?Bp&&kl==="left"?vs.l+vs.w:Jp:yp?Bp&&kl==="right"?vs.r+vs.w:Jp:vs.w,2*q);var m0=0,s0=0;Ke.each(function(ft){var mn=Ce(ft,nt,q);m0=Math.max(m0,mn),s0+=mn}),$p=null;var y0=0;if(Ee){var M0=0,T0=0,G0=0;tt.each(function(){var ft=0,mn=0;g.select(this).selectAll("g.traces").each(function(Vl){var Np=Ce(Vl,nt,q),Up=Vl[0].height;b.setTranslate(this,Lo[0],Lo[1]+Oe+pe+Up/2+mn),mn+=Up,ft=Math.max(ft,Np),dr[Vl[0].trace.legendgroup]=ft});var Bl=ft+pe;T0>0&&Bl+Oe+T0>nt._maxWidth?(y0=Math.max(y0,T0),T0=0,G0+=M0+bt,M0=mn):M0=Math.max(M0,mn),b.setTranslate(this,T0,G0),T0+=Bl}),nt._width=Math.max(y0,T0)+Oe,nt._height=G0+M0+ae}else{var h0=Ke.size(),W0=s0+Qe+(h0-1)*pe<nt._maxWidth,rm=0,V0=0,um=0,Uo=0;Ke.each(function(ft){var mn=ft[0].height,Bl=Ce(ft,nt,q),Vl=W0?Bl:m0;X||(Vl+=pe),Vl+Oe+V0-pe>=nt._maxWidth&&(y0=Math.max(y0,Uo),V0=0,um+=rm,nt._height+=rm,rm=0),b.setTranslate(this,Lo[0]+Oe+V0,Lo[1]+Oe+um+mn/2+pe),Uo=V0+Bl+pe,V0+=Vl,rm=Math.max(rm,mn)}),W0?(nt._width=V0+Qe,nt._height=rm+ae):(nt._width=Math.max(y0,Uo)+Qe,nt._height+=rm+ae)}}nt._width=Math.ceil(Math.max(nt._width+Lo[0],nt._titleWidth+2*(Oe+M.titlePad))),nt._height=Math.ceil(Math.max(nt._height+Lo[1],nt._titleHeight+2*(Oe+M.itemGap))),nt._effHeight=Math.min(nt._height,nt._maxHeight);var Tp=Pe._context.edits,Be=Tp.legendText||Tp.legendPosition;Ke.each(function(ft){var mn=g.select(this).select("."+Ei+"toggle"),Bl=ft[0].height,Vl=ft[0].trace.legendgroup,Np=Ce(ft,nt,q);Ee&&Vl!==""&&(Np=dr[Vl]);var Up=Be?q:$p||Np;!Se&&!X&&(Up+=pe/2),b.setRect(mn,0,-Bl/2,Up,Bl)})}function Ae(Pe,tt,Ke,nt){var yi=Pe._fullLayout,Ei=yi[tt],vs=Le(Ei),Se=ce(Ei),Ee=Ei.xref==="paper",X=Ei.yref==="paper";Pe._fullLayout._reservedMargin[tt]={};var Oe=Ei.y<.5?"b":"t",Qe=Ei.x<.5?"l":"r",pe={r:yi.width-Ke,l:Ke+Ei._width,b:yi.height-nt,t:nt+Ei._effHeight};if(Ee&&X)return h.autoMargin(Pe,tt,{x:Ei.x,y:Ei.y,l:Ei._width*P[vs],r:Ei._width*N[vs],b:Ei._effHeight*N[Se],t:Ei._effHeight*P[Se]});Ee?Pe._fullLayout._reservedMargin[tt][Oe]=pe[Oe]:X||Ei.orientation==="v"?Pe._fullLayout._reservedMargin[tt][Qe]=pe[Qe]:Pe._fullLayout._reservedMargin[tt][Oe]=pe[Oe]}function Le(Pe){return s.isRightAnchor(Pe)?"right":s.isCenterAnchor(Pe)?"center":"left"}function ce(Pe){return s.isBottomAnchor(Pe)?"bottom":s.isMiddleAnchor(Pe)?"middle":"top"}function ke(Pe){return Pe._id||"legend"}}),wg=t(me=>{var ue=c(),g=A(),s=He(),h=Z(),x=h.pushUnique,v=h.strTranslate,y=h.strRotate,b=Mm(),T=kg(),u=$m(),k=D0(),M=_r(),D=Om(),B=mm(),P=m1().zindexSeparator,N=l1(),z=e0(),F=be(),w=Jm(),L=J1(),O=F.YANGLE,H=Math.PI*O/180,W=1/Math.sin(H),Ce=Math.cos(H),he=Math.sin(H),le=F.HOVERARROWSIZE,Y=F.HOVERTEXTPAD,Re={box:!0,ohlc:!0,violin:!0,candlestick:!0},fe={scatter:!0,scattergl:!0,splom:!0};function xe(q,ae){return q.distance-ae.distance}me.hover=function(q,ae,ve,Te){q=h.getGraphDiv(q);var et=ae.target;h.throttle(q._fullLayout._uid+F.HOVERID,F.HOVERMINTIME,function(){ge(q,ae,ve,Te,et)})},me.loneHover=function(q,ae){var ve=!0;Array.isArray(q)||(ve=!1,q=[q]);var Te=ae.gd,et=Oe(Te),bt=Qe(Te),dr=q.map(function(dt){var yp=dt._x0||dt.x0||dt.x||0,Bp=dt._x1||dt.x1||dt.x||0,Jp=dt._y0||dt.y0||dt.y||0,m0=dt._y1||dt.y1||dt.y||0,s0=dt.eventData;if(s0){var y0=Math.min(yp,Bp),M0=Math.max(yp,Bp),T0=Math.min(Jp,m0),G0=Math.max(Jp,m0),h0=dt.trace;if(N.traceIs(h0,"gl3d")){var W0=Te._fullLayout[h0.scene]._scene.container,rm=W0.offsetLeft,V0=W0.offsetTop;y0+=rm,M0+=rm,T0+=V0,G0+=V0}s0.bbox={x0:y0+bt,x1:M0+bt,y0:T0+et,y1:G0+et},ae.inOut_bbox&&ae.inOut_bbox.push(s0.bbox)}else s0=!1;return{color:dt.color||M.defaultLine,x0:dt.x0||dt.x||0,x1:dt.x1||dt.x||0,y0:dt.y0||dt.y||0,y1:dt.y1||dt.y||0,xLabel:dt.xLabel,yLabel:dt.yLabel,zLabel:dt.zLabel,text:dt.text,name:dt.name,idealAlign:dt.idealAlign,borderColor:dt.borderColor,fontFamily:dt.fontFamily,fontSize:dt.fontSize,fontColor:dt.fontColor,fontWeight:dt.fontWeight,fontStyle:dt.fontStyle,fontVariant:dt.fontVariant,nameLength:dt.nameLength,textAlign:dt.textAlign,trace:dt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:dt.hovertemplate||!1,hovertemplateLabels:dt.hovertemplateLabels||!1,eventData:s0}}),Ol=!1,Xl=Le(dr,{gd:Te,hovermode:"closest",rotateLabels:Ol,bgColor:ae.bgColor||M.background,container:ue.select(ae.container),outerContainer:ae.outerContainer||ae.container}),Pp=Xl.hoverLabels,t0=5,Wp=0,$p=0;Pp.sort(function(dt,yp){return dt.y0-yp.y0}).each(function(dt,yp){var Bp=dt.y0-dt.by/2;Bp-t0<Wp?dt.offset=Wp-Bp+t0:dt.offset=0,Wp=Bp+dt.by+dt.offset,yp===ae.anchorIndex&&($p=dt.offset)}).each(function(dt){dt.offset-=$p});var Lo=Te._fullLayout._invScaleX,kl=Te._fullLayout._invScaleY;return Ke(Pp,Ol,Lo,kl),ve?Pp:Pp.node()};function ge(q,ae,ve,Te,et){ve||(ve="xy"),typeof ve=="string"&&(ve=ve.split(P)[0]);var bt=Array.isArray(ve)?ve:[ve],dr,Ol=q._fullLayout,Xl=Ol.hoversubplots,Pp=Ol._plots||[],t0=Pp[ve],Wp=Ol._has("cartesian"),$p=ae.hovermode||Ol.hovermode,Lo=($p||"").charAt(0)==="x",kl=($p||"").charAt(0)==="y",dt,yp;if(Wp&&(Lo||kl)&&Xl==="axis"){for(var Bp=bt.length,Jp=0;Jp<Bp;Jp++)if(dr=bt[Jp],Pp[dr]){dt=B.getFromId(q,dr,"x"),yp=B.getFromId(q,dr,"y");var m0=(Lo?dt:yp)._subplotsWith;if(m0&&m0.length)for(var s0=0;s0<m0.length;s0++)x(bt,m0[s0])}}if(t0&&Xl!=="single"){var y0=t0.overlays.map(function(W1){return W1.id});bt=bt.concat(y0)}for(var M0=bt.length,T0=new Array(M0),G0=new Array(M0),h0=!1,W0=0;W0<M0;W0++)if(dr=bt[W0],Pp[dr])h0=!0,T0[W0]=Pp[dr].xaxis,G0[W0]=Pp[dr].yaxis;else if(Ol[dr]&&Ol[dr]._subplot){var rm=Ol[dr]._subplot;T0[W0]=rm.xaxis,G0[W0]=rm.yaxis}else{h.warn("Unrecognized subplot: "+dr);return}if($p&&!h0&&($p="closest"),["x","y","closest","x unified","y unified"].indexOf($p)===-1||!q.calcdata||q.querySelector(".zoombox")||q._dragging)return D.unhoverRaw(q,ae);var V0=Ol.hoverdistance;V0===-1&&(V0=1/0);var um=Ol.spikedistance;um===-1&&(um=1/0);var Uo=[],Tp=[],Be,ft,mn,Bl,Vl,Np,Up,Qp,Zp,Kp,R0,k0,N0,lm={hLinePoint:null,vLinePoint:null},Im=!1;if(Array.isArray(ae))for($p="array",mn=0;mn<ae.length;mn++)Vl=q.calcdata[ae[mn].curveNumber||0],Vl&&(Np=Vl[0].trace,Vl[0].trace.hoverinfo!=="skip"&&(Tp.push(Vl),Np.orientation==="h"&&(Im=!0)));else{var u1=q.calcdata.slice();for(u1.sort(function(W1,yv){var iv=W1[0].trace.zorder||0,cg=yv[0].trace.zorder||0;return iv-cg}),Bl=0;Bl<u1.length;Bl++)Vl=u1[Bl],Np=Vl[0].trace,Np.hoverinfo!=="skip"&&z.isTraceInSubplots(Np,bt)&&(Tp.push(Vl),Np.orientation==="h"&&(Im=!0));var v1=!et,b1,Bm;if(v1)"xpx"in ae?b1=ae.xpx:b1=T0[0]._length/2,"ypx"in ae?Bm=ae.ypx:Bm=G0[0]._length/2;else{if(b.triggerHandler(q,"plotly_beforehover",ae)===!1)return;var fm=et.getBoundingClientRect();b1=ae.clientX-fm.left,Bm=ae.clientY-fm.top,Ol._calcInverseTransform(q);var c1=h.apply3DTransform(Ol._invTransform)(b1,Bm);if(b1=c1[0],Bm=c1[1],b1<0||b1>T0[0]._length||Bm<0||Bm>G0[0]._length)return D.unhoverRaw(q,ae)}if(ae.pointerX=b1+T0[0]._offset,ae.pointerY=Bm+G0[0]._offset,"xval"in ae?Be=z.flat(bt,ae.xval):Be=z.p2c(T0,b1),"yval"in ae?ft=z.flat(bt,ae.yval):ft=z.p2c(G0,Bm),!g(Be[0])||!g(ft[0]))return h.warn("Fx.hover failed",ae,q),D.unhoverRaw(q,ae)}var y1=1/0;function n1(W1,yv){for(Bl=0;Bl<Tp.length;Bl++)if(Vl=Tp[Bl],!(!Vl||!Vl[0]||!Vl[0].trace)&&(Np=Vl[0].trace,!(Np.visible!==!0||Np._length===0)&&["carpet","contourcarpet"].indexOf(Np._module.name)===-1)){if(Zp=$p,z.isUnifiedHover(Zp)&&(Zp=Zp.charAt(0)),Np.type==="splom"?(Qp=0,Up=bt[Qp]):(Up=z.getSubplot(Np),Qp=bt.indexOf(Up)),k0={cd:Vl,trace:Np,xa:T0[Qp],ya:G0[Qp],maxHoverDistance:V0,maxSpikeDistance:um,index:!1,distance:Math.min(y1,V0),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:M.defaultLine,name:Np.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},Ol[Up]&&(k0.subplot=Ol[Up]._subplot),Ol._splomScenes&&Ol._splomScenes[Np.uid]&&(k0.scene=Ol._splomScenes[Np.uid]),Zp==="array"){var iv=ae[Bl];"pointNumber"in iv?(k0.index=iv.pointNumber,Zp="closest"):(Zp="","xval"in iv&&(Kp=iv.xval,Zp="x"),"yval"in iv&&(R0=iv.yval,Zp=Zp?"closest":"y"))}else W1!==void 0&&yv!==void 0?(Kp=W1,R0=yv):(Kp=Be[Qp],R0=ft[Qp]);if(N0=Uo.length,V0!==0)if(Np._module&&Np._module.hoverPoints){var cg=Np._module.hoverPoints(k0,Kp,R0,Zp,{finiteRange:!0,hoverLayer:Ol._hoverlayer,hoversubplots:Xl,gd:q});if(cg)for(var rv,Pg=0;Pg<cg.length;Pg++)rv=cg[Pg],g(rv.x0)&&g(rv.y0)&&Uo.push(nt(rv,$p))}else h.log("Unrecognized trace type in hover:",Np);if($p==="closest"&&Uo.length>N0&&(Uo.splice(0,N0),y1=Uo[0].distance),Wp&&um!==0&&Uo.length===0){k0.distance=um,k0.index=!1;var Vg=Np._module.hoverPoints(k0,Kp,R0,"closest",{hoverLayer:Ol._hoverlayer});if(Vg&&(Vg=Vg.filter(function(Ug){return Ug.spikeDistance<=um})),Vg&&Vg.length){var Ov,xv=Vg.filter(function(Ug){return Ug.xa.showspikes&&Ug.xa.spikesnap!=="hovered data"});if(xv.length){var _g=xv[0];g(_g.x0)&&g(_g.y0)&&(Ov=t1(_g),(!lm.vLinePoint||lm.vLinePoint.spikeDistance>Ov.spikeDistance)&&(lm.vLinePoint=Ov))}var Ig=Vg.filter(function(Ug){return Ug.ya.showspikes&&Ug.ya.spikesnap!=="hovered data"});if(Ig.length){var Tg=Ig[0];g(Tg.x0)&&g(Tg.y0)&&(Ov=t1(Tg),(!lm.hLinePoint||lm.hLinePoint.spikeDistance>Ov.spikeDistance)&&(lm.hLinePoint=Ov))}}}}}n1();function Ym(W1,yv,iv){for(var cg=null,rv=1/0,Pg,Vg=0;Vg<W1.length;Vg++)dt&&dt._id!==W1[Vg].xa._id||yp&&yp._id!==W1[Vg].ya._id||(Pg=W1[Vg].spikeDistance,iv&&Vg===0&&(Pg=-1/0),Pg<=rv&&Pg<=yv&&(cg=W1[Vg],rv=Pg));return cg}function t1(W1){return W1?{xa:W1.xa,ya:W1.ya,x:W1.xSpike!==void 0?W1.xSpike:(W1.x0+W1.x1)/2,y:W1.ySpike!==void 0?W1.ySpike:(W1.y0+W1.y1)/2,distance:W1.distance,spikeDistance:W1.spikeDistance,curveNumber:W1.trace.index,color:W1.color,pointNumber:W1.index}:null}var Um={fullLayout:Ol,container:Ol._hoverlayer,event:ae};q._spikepoints;var z1={vLinePoint:lm.vLinePoint,hLinePoint:lm.hLinePoint};q._spikepoints=z1;var F1=function(){var W1=Uo.filter(function(iv){return dt&&dt._id===iv.xa._id&&yp&&yp._id===iv.ya._id}),yv=Uo.filter(function(iv){return!(dt&&dt._id===iv.xa._id&&yp&&yp._id===iv.ya._id)});W1.sort(xe),yv.sort(xe),Uo=W1.concat(yv),Uo=Ee(Uo,$p)};F1();var g1=$p.charAt(0),V1=(g1==="x"||g1==="y")&&Uo[0]&&fe[Uo[0].trace.type];if(Wp&&um!==0&&Uo.length!==0){var K1=Uo.filter(function(W1){return W1.ya.showspikes}),ig=Ym(K1,um,V1);lm.hLinePoint=t1(ig);var mg=Uo.filter(function(W1){return W1.xa.showspikes}),P1=Ym(mg,um,V1);lm.vLinePoint=t1(P1)}if(Uo.length===0){var lg=D.unhoverRaw(q,ae);return Wp&&(lm.hLinePoint!==null||lm.vLinePoint!==null)&&vs()&&yi(q,lm,Um),lg}if(Wp&&vs()&&yi(q,lm,Um),z.isXYhover(Zp)&&Uo[0].length!==0&&Uo[0].trace.type!=="splom"){var G1=Uo[0];Re[G1.trace.type]?Uo=Uo.filter(function(W1){return W1.trace.index===G1.trace.index}):Uo=[G1];var Sm=Uo.length,Cg=X("x",G1,Ol),Je=X("y",G1,Ol);n1(Cg,Je);var Ve=[],Mp={},kp=0,Vp=function(W1){var yv=Re[W1.trace.type]?ye(W1):W1.trace.index;if(!Mp[yv])kp++,Mp[yv]=kp,Ve.push(W1);else{var iv=Mp[yv]-1,cg=Ve[iv];iv>0&&Math.abs(W1.distance)<Math.abs(cg.distance)&&(Ve[iv]=W1)}},wp;for(wp=0;wp<Sm;wp++)Vp(Uo[wp]);for(wp=Uo.length-1;wp>Sm-1;wp--)Vp(Uo[wp]);Uo=Ve,F1()}var Ap=q._hoverdata,Yp=[],Fp=Oe(q),u0=Qe(q);for(mn=0;mn<Uo.length;mn++){var g0=Uo[mn],H0=z.makeEventData(g0,g0.trace,g0.cd);if(g0.hovertemplate!==!1){var Lm=!1;g0.cd[g0.index]&&g0.cd[g0.index].ht&&(Lm=g0.cd[g0.index].ht),g0.hovertemplate=Lm||g0.trace.hovertemplate||!1}if(g0.xa&&g0.ya){var Em=g0.x0+g0.xa._offset,Qm=g0.x1+g0.xa._offset,xm=g0.y0+g0.ya._offset,zm=g0.y1+g0.ya._offset,f1=Math.min(Em,Qm),dg=Math.max(Em,Qm),E1=Math.min(xm,zm),Gg=Math.max(xm,zm);H0.bbox={x0:f1+u0,x1:dg+u0,y0:E1+Fp,y1:Gg+Fp}}g0.eventData=[H0],Yp.push(H0)}q._hoverdata=Yp;var $1=$p==="y"&&(Tp.length>1||Uo.length>1)||$p==="closest"&&Im&&Uo.length>1,$g=M.combine(Ol.plot_bgcolor||M.background,Ol.paper_bgcolor),tg=Le(Uo,{gd:q,hovermode:$p,rotateLabels:$1,bgColor:$g,container:Ol._hoverlayer,outerContainer:Ol._paper.node(),commonLabelOpts:Ol.hoverlabel,hoverdistance:Ol.hoverdistance}),Og=tg.hoverLabels;if(z.isUnifiedHover($p)||(ke(Og,$1,Ol,tg.commonLabelBoundingBox),Ke(Og,$1,Ol._invScaleX,Ol._invScaleY)),et&&et.tagName){var qg=N.getComponentMethod("annotations","hasClickToShow")(q,Yp);u(ue.select(et),qg?"pointer":"")}!et||Te||!Ei(q,ae,Ap)||(Ap&&q.emit("plotly_unhover",{event:ae,points:Ap}),q.emit("plotly_hover",{event:ae,points:q._hoverdata,xaxes:T0,yaxes:G0,xvals:Be,yvals:ft}))}function ye(q){return[q.trace.index,q.index,q.x0,q.y0,q.name,q.attr,q.xa?q.xa._id:"",q.ya?q.ya._id:""].join(",")}var Ae=/<extra>([\s\S]*)<\/extra>/;function Le(q,ae){var ve=ae.gd,Te=ve._fullLayout,et=ae.hovermode,bt=ae.rotateLabels,dr=ae.bgColor,Ol=ae.container,Xl=ae.outerContainer,Pp=ae.commonLabelOpts||{};if(q.length===0)return[[]];var t0=ae.fontFamily||F.HOVERFONT,Wp=ae.fontSize||F.HOVERFONTSIZE,$p=ae.fontWeight||Te.font.weight,Lo=ae.fontStyle||Te.font.style,kl=ae.fontVariant||Te.font.variant,dt=ae.fontTextcase||Te.font.textcase,yp=ae.fontLineposition||Te.font.lineposition,Bp=ae.fontShadow||Te.font.shadow,Jp=q[0],m0=Jp.xa,s0=Jp.ya,y0=et.charAt(0),M0=y0+"Label",T0=Jp[M0];if(T0===void 0&&m0.type==="multicategory")for(var G0=0;G0<q.length&&(T0=q[G0][M0],T0===void 0);G0++);var h0=pe(ve,Xl),W0=h0.top,rm=h0.width,V0=h0.height,um=T0!==void 0&&Jp.distance<=ae.hoverdistance&&(et==="x"||et==="y");if(um){var Uo=!0,Tp,Be;for(Tp=0;Tp<q.length;Tp++)if(Uo&&q[Tp].zLabel===void 0&&(Uo=!1),Be=q[Tp].hoverinfo||q[Tp].trace.hoverinfo,Be){var ft=Array.isArray(Be)?Be:Be.split("+");if(ft.indexOf("all")===-1&&ft.indexOf(et)===-1){um=!1;break}}Uo&&(um=!1)}var mn=Ol.selectAll("g.axistext").data(um?[0]:[]);mn.enter().append("g").classed("axistext",!0),mn.exit().remove();var Bl={minX:0,maxX:0,minY:0,maxY:0};if(mn.each(function(){var Sm=ue.select(this),Cg=h.ensureSingle(Sm,"path","",function($1){$1.style({"stroke-width":"1px"})}),Je=h.ensureSingle(Sm,"text","",function($1){$1.attr("data-notex",1)}),Ve=Pp.bgcolor||M.defaultLine,Mp=Pp.bordercolor||M.contrast(Ve),kp=M.contrast(Ve),Vp=Pp.font,wp={weight:Vp.weight||$p,style:Vp.style||Lo,variant:Vp.variant||kl,textcase:Vp.textcase||dt,lineposition:Vp.lineposition||yp,shadow:Vp.shadow||Bp,family:Vp.family||t0,size:Vp.size||Wp,color:Vp.color||kp};Cg.style({fill:Ve,stroke:Mp}),Je.text(T0).call(k.font,wp).call(T.positionText,0,0).call(T.convertToTspans,ve),Sm.attr("transform","");var Ap=pe(ve,Je.node()),Yp,Fp;if(et==="x"){var u0=m0.side==="top"?"-":"";Je.attr("text-anchor","middle").call(T.positionText,0,m0.side==="top"?W0-Ap.bottom-le-Y:W0-Ap.top+le+Y),Yp=m0._offset+(Jp.x0+Jp.x1)/2,Fp=s0._offset+(m0.side==="top"?0:s0._length);var g0=Ap.width/2+Y,H0=Yp;Yp<g0?H0=g0:Yp>Te.width-g0&&(H0=Te.width-g0),Cg.attr("d","M"+(Yp-H0)+",0L"+(Yp-H0+le)+","+u0+le+"H"+g0+"v"+u0+(Y*2+Ap.height)+"H"+-g0+"V"+u0+le+"H"+(Yp-H0-le)+"Z"),Yp=H0,Bl.minX=Yp-g0,Bl.maxX=Yp+g0,m0.side==="top"?(Bl.minY=Fp-(Y*2+Ap.height),Bl.maxY=Fp-Y):(Bl.minY=Fp+Y,Bl.maxY=Fp+(Y*2+Ap.height))}else{var Lm,Em,Qm;s0.side==="right"?(Lm="start",Em=1,Qm="",Yp=m0._offset+m0._length):(Lm="end",Em=-1,Qm="-",Yp=m0._offset),Fp=s0._offset+(Jp.y0+Jp.y1)/2,Je.attr("text-anchor",Lm),Cg.attr("d","M0,0L"+Qm+le+","+le+"V"+(Y+Ap.height/2)+"h"+Qm+(Y*2+Ap.width)+"V-"+(Y+Ap.height/2)+"H"+Qm+le+"V-"+le+"Z"),Bl.minY=Fp-(Y+Ap.height/2),Bl.maxY=Fp+(Y+Ap.height/2),s0.side==="right"?(Bl.minX=Yp+le,Bl.maxX=Yp+le+(Y*2+Ap.width)):(Bl.minX=Yp-le-(Y*2+Ap.width),Bl.maxX=Yp-le);var xm=Ap.height/2,zm=W0-Ap.top-xm,f1="clip"+Te._uid+"commonlabel"+s0._id,dg;if(Yp<Ap.width+2*Y+le){dg="M-"+(le+Y)+"-"+xm+"h-"+(Ap.width-Y)+"V"+xm+"h"+(Ap.width-Y)+"Z";var E1=Ap.width-Yp+Y;T.positionText(Je,E1,zm),Lm==="end"&&Je.selectAll("tspan").each(function(){var $1=ue.select(this),$g=k.tester.append("text").text($1.text()).call(k.font,wp),tg=pe(ve,$g.node());Math.round(tg.width)<Math.round(Ap.width)&&$1.attr("x",E1-tg.width),$g.remove()})}else T.positionText(Je,Em*(Y+le),zm),dg=null;var Gg=Te._topclips.selectAll("#"+f1).data(dg?[0]:[]);Gg.enter().append("clipPath").attr("id",f1).append("path"),Gg.exit().remove(),Gg.select("path").attr("d",dg),k.setClipUrl(Je,dg?f1:null,ve)}Sm.attr("transform",v(Yp,Fp))}),z.isUnifiedHover(et)){Ol.selectAll("g.hovertext").remove();var Vl=q.filter(function(Sm){return Sm.hoverinfo!=="none"});if(Vl.length===0)return[];var Np=Te.hoverlabel,Up=Np.font,Qp=Vl[0],Zp=((et==="x unified"?Qp.xa:Qp.ya).unifiedhovertitle||{}).text,Kp=Zp?h.hovertemplateString(Zp,{},Te._d3locale,et==="x unified"?{xa:Qp.xa,x:Qp.xVal}:{ya:Qp.ya,y:Qp.yVal}):T0,R0={showlegend:!0,legend:{title:{text:Kp,font:Up},font:Up,bgcolor:Np.bgcolor,bordercolor:Np.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:Te.legend?Te.legend.traceorder:void 0,orientation:"v"}},k0={font:Up};w(R0,k0,ve._fullData);var N0=k0.legend;N0.entries=[];for(var lm=0;lm<Vl.length;lm++){var Im=Vl[lm];if(Im.hoverinfo!=="none"){var u1=ce(Im,!0,et,Te,T0),v1=u1[0],b1=u1[1];Im.name=b1,b1!==""?Im.text=b1+" : "+v1:Im.text=v1;var Bm=Im.cd[Im.index];Bm&&(Bm.mc&&(Im.mc=Bm.mc),Bm.mcc&&(Im.mc=Bm.mcc),Bm.mlc&&(Im.mlc=Bm.mlc),Bm.mlcc&&(Im.mlc=Bm.mlcc),Bm.mlw&&(Im.mlw=Bm.mlw),Bm.mrc&&(Im.mrc=Bm.mrc),Bm.dir&&(Im.dir=Bm.dir)),Im._distinct=!0,N0.entries.push([Im])}}N0.entries.sort(function(Sm,Cg){return Sm[0].trace.index-Cg[0].trace.index}),N0.layer=Ol,N0._inHover=!0,N0._groupTitleFont=Np.grouptitlefont,L(ve,N0);var fm=Ol.select("g.legend"),c1=pe(ve,fm.node()),y1=c1.width+2*Y,n1=c1.height+2*Y,Ym=Vl[0],t1=(Ym.x0+Ym.x1)/2,Um=(Ym.y0+Ym.y1)/2,z1=!(N.traceIs(Ym.trace,"bar-like")||N.traceIs(Ym.trace,"box-violin")),F1,g1;y0==="y"?z1?(g1=Um-Y,F1=Um+Y):(g1=Math.min.apply(null,Vl.map(function(Sm){return Math.min(Sm.y0,Sm.y1)})),F1=Math.max.apply(null,Vl.map(function(Sm){return Math.max(Sm.y0,Sm.y1)}))):g1=F1=h.mean(Vl.map(function(Sm){return(Sm.y0+Sm.y1)/2}))-n1/2;var V1,K1;y0==="x"?z1?(V1=t1+Y,K1=t1-Y):(V1=Math.max.apply(null,Vl.map(function(Sm){return Math.max(Sm.x0,Sm.x1)})),K1=Math.min.apply(null,Vl.map(function(Sm){return Math.min(Sm.x0,Sm.x1)}))):V1=K1=h.mean(Vl.map(function(Sm){return(Sm.x0+Sm.x1)/2}))-y1/2;var ig=m0._offset,mg=s0._offset;F1+=mg,V1+=ig,K1+=ig-y1,g1+=mg-n1;var P1,lg;return V1+y1<rm&&V1>=0?P1=V1:K1+y1<rm&&K1>=0?P1=K1:ig+y1<rm?P1=ig:V1-t1<t1-K1+y1?P1=rm-y1:P1=0,P1+=Y,F1+n1<V0&&F1>=0?lg=F1:g1+n1<V0&&g1>=0?lg=g1:mg+n1<V0?lg=mg:F1-Um<Um-g1+n1?lg=V0-n1:lg=0,lg+=Y,fm.attr("transform",v(P1-1,lg-1)),fm}var G1=Ol.selectAll("g.hovertext").data(q,function(Sm){return ye(Sm)});return G1.enter().append("g").classed("hovertext",!0).each(function(){var Sm=ue.select(this);Sm.append("rect").call(M.fill,M.addOpacity(dr,.8)),Sm.append("text").classed("name",!0),Sm.append("path").style("stroke-width","1px"),Sm.append("text").classed("nums",!0).call(k.font,{weight:$p,style:Lo,variant:kl,textcase:dt,lineposition:yp,shadow:Bp,family:t0,size:Wp})}),G1.exit().remove(),G1.each(function(Sm){var Cg=ue.select(this).attr("transform",""),Je=Sm.color;Array.isArray(Je)&&(Je=Je[Sm.eventData[0].pointNumber]);var Ve=Sm.bgcolor||Je,Mp=M.combine(M.opacity(Ve)?Ve:M.defaultLine,dr),kp=M.combine(M.opacity(Je)?Je:M.defaultLine,dr),Vp=Sm.borderColor||M.contrast(Mp),wp=ce(Sm,um,et,Te,T0,Cg),Ap=wp[0],Yp=wp[1],Fp=Cg.select("text.nums").call(k.font,{family:Sm.fontFamily||t0,size:Sm.fontSize||Wp,color:Sm.fontColor||Vp,weight:Sm.fontWeight||$p,style:Sm.fontStyle||Lo,variant:Sm.fontVariant||kl,textcase:Sm.fontTextcase||dt,lineposition:Sm.fontLineposition||yp,shadow:Sm.fontShadow||Bp}).text(Ap).attr("data-notex",1).call(T.positionText,0,0).call(T.convertToTspans,ve),u0=Cg.select("text.name"),g0=0,H0=0;if(Yp&&Yp!==Ap){u0.call(k.font,{family:Sm.fontFamily||t0,size:Sm.fontSize||Wp,color:kp,weight:Sm.fontWeight||$p,style:Sm.fontStyle||Lo,variant:Sm.fontVariant||kl,textcase:Sm.fontTextcase||dt,lineposition:Sm.fontLineposition||yp,shadow:Sm.fontShadow||Bp}).text(Yp).attr("data-notex",1).call(T.positionText,0,0).call(T.convertToTspans,ve);var Lm=pe(ve,u0.node());g0=Lm.width+2*Y,H0=Lm.height+2*Y}else u0.remove(),Cg.select("rect").remove();Cg.select("path").style({fill:Mp,stroke:Vp});var Em=Sm.xa._offset+(Sm.x0+Sm.x1)/2,Qm=Sm.ya._offset+(Sm.y0+Sm.y1)/2,xm=Math.abs(Sm.x1-Sm.x0),zm=Math.abs(Sm.y1-Sm.y0),f1=pe(ve,Fp.node()),dg=f1.width/Te._invScaleX,E1=f1.height/Te._invScaleY;Sm.ty0=(W0-f1.top)/Te._invScaleY,Sm.bx=dg+2*Y,Sm.by=Math.max(E1+2*Y,H0),Sm.anchor="start",Sm.txwidth=dg,Sm.tx2width=g0,Sm.offset=0;var Gg=(dg+le+Y+g0)*Te._invScaleX,$1,$g;if(bt)Sm.pos=Em,$1=Qm+zm/2+Gg<=V0,$g=Qm-zm/2-Gg>=0,(Sm.idealAlign==="top"||!$1)&&$g?(Qm-=zm/2,Sm.anchor="end"):$1?(Qm+=zm/2,Sm.anchor="start"):Sm.anchor="middle",Sm.crossPos=Qm;else{if(Sm.pos=Qm,$1=Em+xm/2+Gg<=rm,$g=Em-xm/2-Gg>=0,(Sm.idealAlign==="left"||!$1)&&$g)Em-=xm/2,Sm.anchor="end";else if($1)Em+=xm/2,Sm.anchor="start";else{Sm.anchor="middle";var tg=Gg/2,Og=Em+tg-rm,qg=Em-tg;Og>0&&(Em-=Og),qg<0&&(Em+=-qg)}Sm.crossPos=Em}Fp.attr("text-anchor",Sm.anchor),g0&&u0.attr("text-anchor",Sm.anchor),Cg.attr("transform",v(Em,Qm)+(bt?y(O):""))}),{hoverLabels:G1,commonLabelBoundingBox:Bl}}function ce(q,ae,ve,Te,et,bt){var dr="",Ol="";q.nameOverride!==void 0&&(q.name=q.nameOverride),q.name&&(q.trace._meta&&(q.name=h.templateString(q.name,q.trace._meta)),dr=Se(q.name,q.nameLength));var Xl=ve.charAt(0),Pp=Xl==="x"?"y":"x";q.zLabel!==void 0?(q.xLabel!==void 0&&(Ol+="x: "+q.xLabel+"<br>"),q.yLabel!==void 0&&(Ol+="y: "+q.yLabel+"<br>"),q.trace.type!=="choropleth"&&q.trace.type!=="choroplethmapbox"&&q.trace.type!=="choroplethmap"&&(Ol+=(Ol?"z: ":"")+q.zLabel)):ae&&q[Xl+"Label"]===et?Ol=q[Pp+"Label"]||"":q.xLabel===void 0?q.yLabel!==void 0&&q.trace.type!=="scattercarpet"&&(Ol=q.yLabel):q.yLabel===void 0?Ol=q.xLabel:Ol="("+q.xLabel+", "+q.yLabel+")",(q.text||q.text===0)&&!Array.isArray(q.text)&&(Ol+=(Ol?"<br>":"")+q.text),q.extraText!==void 0&&(Ol+=(Ol?"<br>":"")+q.extraText),bt&&Ol===""&&!q.hovertemplate&&(dr===""&&bt.remove(),Ol=dr);var t0=q.hovertemplate||!1;if(t0){var Wp=q.hovertemplateLabels||q;q[Xl+"Label"]!==et&&(Wp[Xl+"other"]=Wp[Xl+"Val"],Wp[Xl+"otherLabel"]=Wp[Xl+"Label"]),Ol=h.hovertemplateString(t0,Wp,Te._d3locale,q.eventData[0]||{},q.trace._meta),Ol=Ol.replace(Ae,function($p,Lo){return dr=Se(Lo,q.nameLength),""})}return[Ol,dr]}function ke(q,ae,ve,Te){var et=ae?"xa":"ya",bt=ae?"ya":"xa",dr=0,Ol=1,Xl=q.size(),Pp=new Array(Xl),t0=0,Wp=Te.minX,$p=Te.maxX,Lo=Te.minY,kl=Te.maxY,dt=function(Be){return Be*ve._invScaleX},yp=function(Be){return Be*ve._invScaleY};q.each(function(Be){var ft=Be[et],mn=Be[bt],Bl=ft._id.charAt(0)==="x",Vl=ft.range;t0===0&&Vl&&Vl[0]>Vl[1]!==Bl&&(Ol=-1);var Np=0,Up=Bl?ve.width:ve.height;if(ve.hovermode==="x"||ve.hovermode==="y"){var Qp=Pe(Be,ae),Zp=Be.anchor,Kp=Zp==="end"?-1:1,R0,k0;if(Zp==="middle")R0=Be.crossPos+(Bl?yp(Qp.y-Be.by/2):dt(Be.bx/2+Be.tx2width/2)),k0=R0+(Bl?yp(Be.by):dt(Be.bx));else if(Bl)R0=Be.crossPos+yp(le+Qp.y)-yp(Be.by/2-le),k0=R0+yp(Be.by);else{var N0=dt(Kp*le+Qp.x),lm=N0+dt(Kp*Be.bx);R0=Be.crossPos+Math.min(N0,lm),k0=Be.crossPos+Math.max(N0,lm)}Bl?Lo!==void 0&&kl!==void 0&&Math.min(k0,kl)-Math.max(R0,Lo)>1&&(mn.side==="left"?(Np=mn._mainLinePosition,Up=ve.width):Up=mn._mainLinePosition):Wp!==void 0&&$p!==void 0&&Math.min(k0,$p)-Math.max(R0,Wp)>1&&(mn.side==="top"?(Np=mn._mainLinePosition,Up=ve.height):Up=mn._mainLinePosition)}Pp[t0++]=[{datum:Be,traceIndex:Be.trace.index,dp:0,pos:Be.pos,posref:Be.posref,size:Be.by*(Bl?W:1)/2,pmin:Np,pmax:Up}]}),Pp.sort(function(Be,ft){return Be[0].posref-ft[0].posref||Ol*(ft[0].traceIndex-Be[0].traceIndex)});var Bp,Jp,m0,s0,y0,M0,T0;function G0(Be){var ft=Be[0],mn=Be[Be.length-1];if(Jp=ft.pmin-ft.pos-ft.dp+ft.size,m0=mn.pos+mn.dp+mn.size-ft.pmax,Jp>.01){for(y0=Be.length-1;y0>=0;y0--)Be[y0].dp+=Jp;Bp=!1}if(!(m0<.01)){if(Jp<-.01){for(y0=Be.length-1;y0>=0;y0--)Be[y0].dp-=m0;Bp=!1}if(Bp){var Bl=0;for(s0=0;s0<Be.length;s0++)M0=Be[s0],M0.pos+M0.dp+M0.size>ft.pmax&&Bl++;for(s0=Be.length-1;s0>=0&&!(Bl<=0);s0--)M0=Be[s0],M0.pos>ft.pmax-1&&(M0.del=!0,Bl--);for(s0=0;s0<Be.length&&!(Bl<=0);s0++)if(M0=Be[s0],M0.pos<ft.pmin+1)for(M0.del=!0,Bl--,m0=M0.size*2,y0=Be.length-1;y0>=0;y0--)Be[y0].dp-=m0;for(s0=Be.length-1;s0>=0&&!(Bl<=0);s0--)M0=Be[s0],M0.pos+M0.dp+M0.size>ft.pmax&&(M0.del=!0,Bl--)}}}for(;!Bp&&dr<=Xl;){for(dr++,Bp=!0,s0=0;s0<Pp.length-1;){var h0=Pp[s0],W0=Pp[s0+1],rm=h0[h0.length-1],V0=W0[0];if(Jp=rm.pos+rm.dp+rm.size-V0.pos-V0.dp+V0.size,Jp>.01){for(y0=W0.length-1;y0>=0;y0--)W0[y0].dp+=Jp;for(h0.push.apply(h0,W0),Pp.splice(s0+1,1),T0=0,y0=h0.length-1;y0>=0;y0--)T0+=h0[y0].dp;for(m0=T0/h0.length,y0=h0.length-1;y0>=0;y0--)h0[y0].dp-=m0;Bp=!1}else s0++}Pp.forEach(G0)}for(s0=Pp.length-1;s0>=0;s0--){var um=Pp[s0];for(y0=um.length-1;y0>=0;y0--){var Uo=um[y0],Tp=Uo.datum;Tp.offset=Uo.dp,Tp.del=Uo.del}}}function Pe(q,ae){var ve=0,Te=q.offset;return ae&&(Te*=-he,ve=q.offset*Ce),{x:ve,y:Te}}function tt(q){var ae={start:1,end:-1,middle:0}[q.anchor],ve=ae*(le+Y),Te=ve+ae*(q.txwidth+Y),et=q.anchor==="middle";return et&&(ve-=q.tx2width/2,Te+=q.txwidth/2+Y),{alignShift:ae,textShiftX:ve,text2ShiftX:Te}}function Ke(q,ae,ve,Te){var et=function(dr){return dr*ve},bt=function(dr){return dr*Te};q.each(function(dr){var Ol=ue.select(this);if(dr.del)return Ol.remove();var Xl=Ol.select("text.nums"),Pp=dr.anchor,t0=Pp==="end"?-1:1,Wp=tt(dr),$p=Pe(dr,ae),Lo=$p.x,kl=$p.y,dt=Pp==="middle",yp="hoverlabel"in dr.trace?dr.trace.hoverlabel.showarrow:!0,Bp;dt?Bp="M-"+et(dr.bx/2+dr.tx2width/2)+","+bt(kl-dr.by/2)+"h"+et(dr.bx)+"v"+bt(dr.by)+"h-"+et(dr.bx)+"Z":yp?Bp="M0,0L"+et(t0*le+Lo)+","+bt(le+kl)+"v"+bt(dr.by/2-le)+"h"+et(t0*dr.bx)+"v-"+bt(dr.by)+"H"+et(t0*le+Lo)+"V"+bt(kl-le)+"Z":Bp="M"+et(t0*le+Lo)+","+bt(kl-dr.by/2)+"h"+et(t0*dr.bx)+"v"+bt(dr.by)+"h"+et(-t0*dr.bx)+"Z",Ol.select("path").attr("d",Bp);var Jp=Lo+Wp.textShiftX,m0=kl+dr.ty0-dr.by/2+Y,s0=dr.textAlign||"auto";s0!=="auto"&&(s0==="left"&&Pp!=="start"?(Xl.attr("text-anchor","start"),Jp=dt?-dr.bx/2-dr.tx2width/2+Y:-dr.bx-Y):s0==="right"&&Pp!=="end"&&(Xl.attr("text-anchor","end"),Jp=dt?dr.bx/2-dr.tx2width/2-Y:dr.bx+Y)),Xl.call(T.positionText,et(Jp),bt(m0)),dr.tx2width&&(Ol.select("text.name").call(T.positionText,et(Wp.text2ShiftX+Wp.alignShift*Y+Lo),bt(kl+dr.ty0-dr.by/2+Y)),Ol.select("rect").call(k.setRect,et(Wp.text2ShiftX+(Wp.alignShift-1)*dr.tx2width/2+Lo),bt(kl-dr.by/2-1),et(dr.tx2width),bt(dr.by+2)))})}function nt(q,ae){var ve=q.index,Te=q.trace||{},et=q.cd[0],bt=q.cd[ve]||{};function dr($p){return $p||g($p)&&$p===0}var Ol=Array.isArray(ve)?function($p,Lo){var kl=h.castOption(et,ve,$p);return dr(kl)?kl:h.extractOption({},Te,"",Lo)}:function($p,Lo){return h.extractOption(bt,Te,$p,Lo)};function Xl($p,Lo,kl){var dt=Ol(Lo,kl);dr(dt)&&(q[$p]=dt)}if(Xl("hoverinfo","hi","hoverinfo"),Xl("bgcolor","hbg","hoverlabel.bgcolor"),Xl("borderColor","hbc","hoverlabel.bordercolor"),Xl("fontFamily","htf","hoverlabel.font.family"),Xl("fontSize","hts","hoverlabel.font.size"),Xl("fontColor","htc","hoverlabel.font.color"),Xl("fontWeight","htw","hoverlabel.font.weight"),Xl("fontStyle","hty","hoverlabel.font.style"),Xl("fontVariant","htv","hoverlabel.font.variant"),Xl("nameLength","hnl","hoverlabel.namelength"),Xl("textAlign","hta","hoverlabel.align"),q.posref=ae==="y"||ae==="closest"&&Te.orientation==="h"?q.xa._offset+(q.x0+q.x1)/2:q.ya._offset+(q.y0+q.y1)/2,q.x0=h.constrain(q.x0,0,q.xa._length),q.x1=h.constrain(q.x1,0,q.xa._length),q.y0=h.constrain(q.y0,0,q.ya._length),q.y1=h.constrain(q.y1,0,q.ya._length),q.xLabelVal!==void 0&&(q.xLabel="xLabel"in q?q.xLabel:B.hoverLabelText(q.xa,q.xLabelVal,Te.xhoverformat),q.xVal=q.xa.c2d(q.xLabelVal)),q.yLabelVal!==void 0&&(q.yLabel="yLabel"in q?q.yLabel:B.hoverLabelText(q.ya,q.yLabelVal,Te.yhoverformat),q.yVal=q.ya.c2d(q.yLabelVal)),q.zLabelVal!==void 0&&q.zLabel===void 0&&(q.zLabel=String(q.zLabelVal)),!isNaN(q.xerr)&&!(q.xa.type==="log"&&q.xerr<=0)){var Pp=B.tickText(q.xa,q.xa.c2l(q.xerr),"hover").text;q.xerrneg!==void 0?q.xLabel+=" +"+Pp+" / -"+B.tickText(q.xa,q.xa.c2l(q.xerrneg),"hover").text:q.xLabel+=" ± "+Pp,ae==="x"&&(q.distance+=1)}if(!isNaN(q.yerr)&&!(q.ya.type==="log"&&q.yerr<=0)){var t0=B.tickText(q.ya,q.ya.c2l(q.yerr),"hover").text;q.yerrneg!==void 0?q.yLabel+=" +"+t0+" / -"+B.tickText(q.ya,q.ya.c2l(q.yerrneg),"hover").text:q.yLabel+=" ± "+t0,ae==="y"&&(q.distance+=1)}var Wp=q.hoverinfo||q.trace.hoverinfo;return Wp&&Wp!=="all"&&(Wp=Array.isArray(Wp)?Wp:Wp.split("+"),Wp.indexOf("x")===-1&&(q.xLabel=void 0),Wp.indexOf("y")===-1&&(q.yLabel=void 0),Wp.indexOf("z")===-1&&(q.zLabel=void 0),Wp.indexOf("text")===-1&&(q.text=void 0),Wp.indexOf("name")===-1&&(q.name=void 0)),q}function yi(q,ae,ve){var Te=ve.container,et=ve.fullLayout,bt=et._size,dr=ve.event,Ol=!!ae.hLinePoint,Xl=!!ae.vLinePoint,Pp,t0;if(Te.selectAll(".spikeline").remove(),!!(Xl||Ol)){var Wp=M.combine(et.plot_bgcolor,et.paper_bgcolor);if(Ol){var $p=ae.hLinePoint,Lo,kl;Pp=$p&&$p.xa,t0=$p&&$p.ya;var dt=t0.spikesnap;dt==="cursor"?(Lo=dr.pointerX,kl=dr.pointerY):(Lo=Pp._offset+$p.x,kl=t0._offset+$p.y);var yp=s.readability($p.color,Wp)<1.5?M.contrast(Wp):$p.color,Bp=t0.spikemode,Jp=t0.spikethickness,m0=t0.spikecolor||yp,s0=B.getPxPosition(q,t0),y0,M0;if(Bp.indexOf("toaxis")!==-1||Bp.indexOf("across")!==-1){if(Bp.indexOf("toaxis")!==-1&&(y0=s0,M0=Lo),Bp.indexOf("across")!==-1){var T0=t0._counterDomainMin,G0=t0._counterDomainMax;t0.anchor==="free"&&(T0=Math.min(T0,t0.position),G0=Math.max(G0,t0.position)),y0=bt.l+T0*bt.w,M0=bt.l+G0*bt.w}Te.insert("line",":first-child").attr({x1:y0,x2:M0,y1:kl,y2:kl,"stroke-width":Jp,stroke:m0,"stroke-dasharray":k.dashStyle(t0.spikedash,Jp)}).classed("spikeline",!0).classed("crisp",!0),Te.insert("line",":first-child").attr({x1:y0,x2:M0,y1:kl,y2:kl,"stroke-width":Jp+2,stroke:Wp}).classed("spikeline",!0).classed("crisp",!0)}Bp.indexOf("marker")!==-1&&Te.insert("circle",":first-child").attr({cx:s0+(t0.side!=="right"?Jp:-Jp),cy:kl,r:Jp,fill:m0}).classed("spikeline",!0)}if(Xl){var h0=ae.vLinePoint,W0,rm;Pp=h0&&h0.xa,t0=h0&&h0.ya;var V0=Pp.spikesnap;V0==="cursor"?(W0=dr.pointerX,rm=dr.pointerY):(W0=Pp._offset+h0.x,rm=t0._offset+h0.y);var um=s.readability(h0.color,Wp)<1.5?M.contrast(Wp):h0.color,Uo=Pp.spikemode,Tp=Pp.spikethickness,Be=Pp.spikecolor||um,ft=B.getPxPosition(q,Pp),mn,Bl;if(Uo.indexOf("toaxis")!==-1||Uo.indexOf("across")!==-1){if(Uo.indexOf("toaxis")!==-1&&(mn=ft,Bl=rm),Uo.indexOf("across")!==-1){var Vl=Pp._counterDomainMin,Np=Pp._counterDomainMax;Pp.anchor==="free"&&(Vl=Math.min(Vl,Pp.position),Np=Math.max(Np,Pp.position)),mn=bt.t+(1-Np)*bt.h,Bl=bt.t+(1-Vl)*bt.h}Te.insert("line",":first-child").attr({x1:W0,x2:W0,y1:mn,y2:Bl,"stroke-width":Tp,stroke:Be,"stroke-dasharray":k.dashStyle(Pp.spikedash,Tp)}).classed("spikeline",!0).classed("crisp",!0),Te.insert("line",":first-child").attr({x1:W0,x2:W0,y1:mn,y2:Bl,"stroke-width":Tp+2,stroke:Wp}).classed("spikeline",!0).classed("crisp",!0)}Uo.indexOf("marker")!==-1&&Te.insert("circle",":first-child").attr({cx:W0,cy:ft-(Pp.side!=="top"?Tp:-Tp),r:Tp,fill:Be}).classed("spikeline",!0)}}}function Ei(q,ae,ve){if(!ve||ve.length!==q._hoverdata.length)return!0;for(var Te=ve.length-1;Te>=0;Te--){var et=ve[Te],bt=q._hoverdata[Te];if(et.curveNumber!==bt.curveNumber||String(et.pointNumber)!==String(bt.pointNumber)||String(et.pointNumbers)!==String(bt.pointNumbers)||et.binNumber!==bt.binNumber)return!0}return!1}function vs(q,ae){return!0}function Se(q,ae){return T.plainText(q||"",{len:ae,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function Ee(q,ae){for(var ve=ae.charAt(0),Te=[],et=[],bt=[],dr=0;dr<q.length;dr++){var Ol=q[dr];N.traceIs(Ol.trace,"bar-like")||N.traceIs(Ol.trace,"box-violin")?bt.push(Ol):Ol.trace[ve+"period"]?et.push(Ol):Te.push(Ol)}return Te.concat(et).concat(bt)}function X(q,ae,ve){var Te=ae[q+"a"],et=ae[q+"Val"],bt=ae.cd[0];if(Te.type==="category"||Te.type==="multicategory")et=Te._categoriesMap[et];else if(Te.type==="date"){var dr=ae.trace[q+"periodalignment"];if(dr){var Ol=ae.cd[ae.index],Xl=Ol[q+"Start"];Xl===void 0&&(Xl=Ol[q]);var Pp=Ol[q+"End"];Pp===void 0&&(Pp=Ol[q]);var t0=Pp-Xl;dr==="end"?et+=t0:dr==="middle"&&(et+=t0/2)}et=Te.d2c(et)}return bt&&bt.t&&bt.t.posLetter===Te._id&&(ve.boxmode==="group"||ve.violinmode==="group")&&(et+=bt.t.dPos),et}function Oe(q){return q.offsetTop+q.clientTop}function Qe(q){return q.offsetLeft+q.clientLeft}function pe(q,ae){var ve=q._fullLayout,Te=ae.getBoundingClientRect(),et=Te.left,bt=Te.top,dr=et+Te.width,Ol=bt+Te.height,Xl=h.apply3DTransform(ve._invTransform)(et,bt),Pp=h.apply3DTransform(ve._invTransform)(dr,Ol),t0=Xl[0],Wp=Xl[1],$p=Pp[0],Lo=Pp[1];return{x:t0,y:Wp,width:$p-t0,height:Lo-Wp,top:Math.min(Wp,Lo),left:Math.min(t0,$p),right:Math.max(t0,$p),bottom:Math.max(Wp,Lo)}}}),tv=t((me,ue)=>{var g=Z(),s=_r(),h=e0().isUnifiedHover;ue.exports=function(x,v,y,b){b=b||{};var T=v.legend;function u(k){b.font[k]||(b.font[k]=T?v.legend.font[k]:v.font[k])}v&&h(v.hovermode)&&(b.font||(b.font={}),u("size"),u("family"),u("color"),u("weight"),u("style"),u("variant"),T?(b.bgcolor||(b.bgcolor=s.combine(v.legend.bgcolor,v.paper_bgcolor)),b.bordercolor||(b.bordercolor=v.legend.bordercolor)):b.bgcolor||(b.bgcolor=v.paper_bgcolor)),y("hoverlabel.bgcolor",b.bgcolor),y("hoverlabel.bordercolor",b.bordercolor),y("hoverlabel.namelength",b.namelength),y("hoverlabel.showarrow",b.showarrow),g.coerceFont(y,"hoverlabel.font",b.font),y("hoverlabel.align",b.align)}}),Sv=t((me,ue)=>{var g=Z(),s=tv(),h=ta();ue.exports=function(x,v){function y(b,T){return g.coerce(x,v,h,b,T)}s(x,v,y)}}),bv=t((me,ue)=>{var g=Z(),s=pn(),h=tv();ue.exports=function(x,v,y,b){function T(k,M){return g.coerce(x,v,s,k,M)}var u=g.extendFlat({},b.hoverlabel);v.hovertemplate&&(u.namelength=-1),h(x,v,T,u)}}),Jv=t((me,ue)=>{var g=Z(),s=ta();ue.exports=function(h,x){function v(y,b){return x[y]!==void 0?x[y]:g.coerce(h,x,s,y,b)}return v("clickmode"),v("hoversubplots"),v("hovermode")}}),Uv=t((me,ue)=>{var g=Z(),s=ta(),h=Jv(),x=tv();ue.exports=function(v,y){function b(P,N){return g.coerce(v,y,s,P,N)}var T=h(v,y);T&&(b("hoverdistance"),b("spikedistance"));var u=b("dragmode");u==="select"&&b("selectdirection");var k=y._has("mapbox"),M=y._has("map"),D=y._has("geo"),B=y._basePlotModules.length;y.dragmode==="zoom"&&((k||M||D)&&B===1||(k||M)&&D&&B===2)&&(y.dragmode="pan"),x(v,y,b),g.coerceFont(b,"hoverlabel.grouptitlefont",y.hoverlabel.font)}}),lv=t((me,ue)=>{var g=Z(),s=l1();ue.exports=function(x){var v=x.calcdata,y=x._fullLayout;function b(D){return function(B){return g.coerceHoverinfo({hoverinfo:B},{_module:D._module},y)}}for(var T=0;T<v.length;T++){var u=v[T],k=u[0].trace;if(!s.traceIs(k,"pie-like")){var M=s.traceIs(k,"2dMap")?h:g.fillArray;M(k.hoverinfo,u,"hi",b(k)),k.hovertemplate&&M(k.hovertemplate,u,"ht"),k.hoverlabel&&(M(k.hoverlabel.bgcolor,u,"hbg"),M(k.hoverlabel.bordercolor,u,"hbc"),M(k.hoverlabel.font.size,u,"hts"),M(k.hoverlabel.font.color,u,"htc"),M(k.hoverlabel.font.family,u,"htf"),M(k.hoverlabel.font.weight,u,"htw"),M(k.hoverlabel.font.style,u,"hty"),M(k.hoverlabel.font.variant,u,"htv"),M(k.hoverlabel.namelength,u,"hnl"),M(k.hoverlabel.align,u,"hta"),M(k.hoverlabel.showarrow,u,"htsa"))}}};function h(x,v,y,b){b=b||g.identity,Array.isArray(x)&&(v[0][y]=b(x))}}),Kv=t((me,ue)=>{var g=l1(),s=wg().hover;ue.exports=function(h,x,v){var y=g.getComponentMethod("annotations","onClick")(h,h._hoverdata);v!==void 0&&s(h,x,v,!0);function b(){h.emit("plotly_click",{points:h._hoverdata,event:x})}h._hoverdata&&x&&x.target&&(y&&y.then?y.then(b):b(),x.stopImmediatePropagation&&x.stopImmediatePropagation())}}),Nv=t((me,ue)=>{var g=c(),s=Z(),h=Om(),x=e0(),v=ta(),y=wg();ue.exports={moduleType:"component",name:"fx",constants:be(),schema:{layout:v},attributes:pn(),layoutAttributes:v,supplyLayoutGlobalDefaults:Sv(),supplyDefaults:bv(),supplyLayoutDefaults:Uv(),calc:lv(),getDistanceFunction:x.getDistanceFunction,getClosest:x.getClosest,inbox:x.inbox,quadrature:x.quadrature,appendArrayPointValue:x.appendArrayPointValue,castHoverOption:T,castHoverinfo:u,hover:y.hover,unhover:h.unhover,loneHover:y.loneHover,loneUnhover:b,click:Kv()};function b(k){var M=s.isD3Selection(k)?k:g.select(k);M.selectAll("g.hovertext").remove(),M.selectAll(".spikeline").remove()}function T(k,M,D){return s.castOption(k,M,"hoverlabel."+D)}function u(k,M,D){function B(P){return s.coerceHoverinfo({hoverinfo:P},{_module:k._module},M)}return s.castOption(k,D,"hoverinfo",B)}}),Fv=t(me=>{me.selectMode=function(ue){return ue==="lasso"||ue==="select"},me.drawMode=function(ue){return ue==="drawclosedpath"||ue==="drawopenpath"||ue==="drawline"||ue==="drawrect"||ue==="drawcircle"},me.openMode=function(ue){return ue==="drawline"||ue==="drawopenpath"},me.rectMode=function(ue){return ue==="select"||ue==="drawline"||ue==="drawrect"||ue==="drawcircle"},me.freeMode=function(ue){return ue==="lasso"||ue==="drawclosedpath"||ue==="drawopenpath"},me.selectingOrDrawing=function(ue){return me.freeMode(ue)||me.rectMode(ue)}}),Qv=t((me,ue)=>{ue.exports=function(g){var s=g._fullLayout;s._glcanvas&&s._glcanvas.size()&&s._glcanvas.each(function(h){h.regl&&h.regl.clear({color:!0,depth:!0})})}}),hy=t((me,ue)=>{ue.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}}),ey=t((me,ue)=>{var g=32;ue.exports={CIRCLE_SIDES:g,i000:0,i090:g/4,i180:g/2,i270:g/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}}),yy=t((me,ue)=>{var g=Z().strTranslate;function s(y,b){switch(y.type){case"log":return y.p2d(b);case"date":return y.p2r(b,0,y.calendar);default:return y.p2r(b)}}function h(y,b){switch(y.type){case"log":return y.d2p(b);case"date":return y.r2p(b,0,y.calendar);default:return y.r2p(b)}}function x(y){var b=y._id.charAt(0)==="y"?1:0;return function(T){return s(y,T[b])}}function v(y){return g(y.xaxis._offset,y.yaxis._offset)}ue.exports={p2r:s,r2p:h,axValue:x,getTransform:v}}),dv=t(me=>{var ue=Xp(),g=ey(),s=g.CIRCLE_SIDES,h=g.SQRT2,x=yy(),v=x.p2r,y=x.r2p,b=[0,3,4,5,6,1,2],T=[0,3,4,1,2];me.writePaths=function(M){var D=M.length;if(!D)return"M0,0Z";for(var B="",P=0;P<D;P++)for(var N=M[P].length,z=0;z<N;z++){var F=M[P][z][0];if(F==="Z")B+="Z";else for(var w=M[P][z].length,L=0;L<w;L++){var O=L;F==="Q"||F==="S"?O=T[L]:F==="C"&&(O=b[L]),B+=M[P][z][O],L>0&&L<w-1&&(B+=",")}}return B},me.readPaths=function(M,D,B,P){var N=ue(M),z=[],F=-1,w=function(){F++,z[F]=[]},L,O=0,H=0,W,Ce,he=function(){W=O,Ce=H};he();for(var le=0;le<N.length;le++){var Y=[],Re,fe,xe,ge,ye=N[le][0],Ae=ye;switch(ye){case"M":w(),O=+N[le][1],H=+N[le][2],Y.push([Ae,O,H]),he();break;case"Q":case"S":Re=+N[le][1],xe=+N[le][2],O=+N[le][3],H=+N[le][4],Y.push([Ae,O,H,Re,xe]);break;case"C":Re=+N[le][1],xe=+N[le][2],fe=+N[le][3],ge=+N[le][4],O=+N[le][5],H=+N[le][6],Y.push([Ae,O,H,Re,xe,fe,ge]);break;case"T":case"L":O=+N[le][1],H=+N[le][2],Y.push([Ae,O,H]);break;case"H":Ae="L",O=+N[le][1],Y.push([Ae,O,H]);break;case"V":Ae="L",H=+N[le][1],Y.push([Ae,O,H]);break;case"A":Ae="L";var Le=+N[le][1],ce=+N[le][2];+N[le][4]||(Le=-Le,ce=-ce);var ke=O-Le,Pe=H;for(L=1;L<=s/2;L++){var tt=2*Math.PI*L/s;Y.push([Ae,ke+Le*Math.cos(tt),Pe+ce*Math.sin(tt)])}break;case"Z":(O!==W||H!==Ce)&&(O=W,H=Ce,Y.push([Ae,O,H]));break}for(var Ke=(B||{}).domain,nt=D._fullLayout._size,yi=B&&B.xsizemode==="pixel",Ei=B&&B.ysizemode==="pixel",vs=P===!1,Se=0;Se<Y.length;Se++){for(L=0;L+2<7;L+=2){var Ee=Y[Se][L+1],X=Y[Se][L+2];Ee===void 0||X===void 0||(O=Ee,H=X,B&&(B.xaxis&&B.xaxis.p2r?(vs&&(Ee-=B.xaxis._offset),yi?Ee=y(B.xaxis,B.xanchor)+Ee:Ee=v(B.xaxis,Ee)):(vs&&(Ee-=nt.l),Ke?Ee=Ke.x[0]+Ee/nt.w:Ee=Ee/nt.w),B.yaxis&&B.yaxis.p2r?(vs&&(X-=B.yaxis._offset),Ei?X=y(B.yaxis,B.yanchor)-X:X=v(B.yaxis,X)):(vs&&(X-=nt.t),Ke?X=Ke.y[1]-X/nt.h:X=1-X/nt.h)),Y[Se][L+1]=Ee,Y[Se][L+2]=X)}z[F].push(Y[Se].slice())}}return z};function u(M,D){return Math.abs(M-D)<=1e-6}function k(M,D){var B=D[1]-M[1],P=D[2]-M[2];return Math.sqrt(B*B+P*P)}me.pointsOnRectangle=function(M){var D=M.length;if(D!==5)return!1;for(var B=1;B<3;B++){var P=M[0][B]-M[1][B],N=M[3][B]-M[2][B];if(!u(P,N))return!1;var z=M[0][B]-M[3][B],F=M[1][B]-M[2][B];if(!u(z,F))return!1}return!u(M[0][1],M[1][1])&&!u(M[0][1],M[3][1])?!1:!!(k(M[0],M[1])*k(M[0],M[3]))},me.pointsOnEllipse=function(M){var D=M.length;if(D!==s+1)return!1;D=s;for(var B=0;B<D;B++){var P=(D*2-B)%D,N=(D/2+P)%D,z=(D/2+B)%D;if(!u(k(M[B],M[z]),k(M[P],M[N])))return!1}return!0},me.handleEllipse=function(M,D,B){if(!M)return[D,B];var P=me.ellipseOver({x0:D[0],y0:D[1],x1:B[0],y1:B[1]}),N=(P.x1+P.x0)/2,z=(P.y1+P.y0)/2,F=(P.x1-P.x0)/2,w=(P.y1-P.y0)/2;F||(F=w=w/h),w||(w=F=F/h);for(var L=[],O=0;O<s;O++){var H=O*2*Math.PI/s;L.push([N+F*Math.cos(H),z+w*Math.sin(H)])}return L},me.ellipseOver=function(M){var D=M.x0,B=M.y0,P=M.x1,N=M.y1,z=P-D,F=N-B;D-=z,B-=F;var w=(D+P)/2,L=(B+N)/2,O=h;return z*=O,F*=O,{x0:w-z,y0:L-F,x1:w+z,y1:L+F}},me.fixDatesForPaths=function(M,D,B){var P=D.type==="date",N=B.type==="date";if(!P&&!N)return M;for(var z=0;z<M.length;z++)for(var F=0;F<M[z].length;F++)for(var w=0;w+2<M[z][F].length;w+=2)P&&(M[z][F][w+1]=M[z][F][w+1].replace(" ","_")),N&&(M[z][F][w+2]=M[z][F][w+2].replace(" ","_"));return M}}),Ev=t((me,ue)=>{var g=N1(),s=Fv(),h=s.drawMode,x=s.openMode,v=ey(),y=v.i000,b=v.i090,T=v.i180,u=v.i270,k=v.cos45,M=v.sin45,D=yy(),B=D.p2r,P=D.r2p,N=H1(),z=N.clearOutline,F=dv(),w=F.readPaths,L=F.writePaths,O=F.ellipseOver,H=F.fixDatesForPaths;function W(he,le){if(he.length){var Y=he[0][0];if(Y){var Re=le.gd,fe=le.isActiveShape,xe=le.dragmode,ge=(Re.layout||{}).shapes||[];if(!h(xe)&&fe!==void 0){var ye=Re._fullLayout._activeShapeIndex;if(ye<ge.length)switch(Re._fullLayout.shapes[ye].type){case"rect":xe="drawrect";break;case"circle":xe="drawcircle";break;case"line":xe="drawline";break;case"path":var Ae=ge[ye].path||"";Ae[Ae.length-1]==="Z"?xe="drawclosedpath":xe="drawopenpath";break}}var Le=Ce(he,le,xe);z(Re);for(var ce=le.editHelpers,ke=(ce||{}).modifyItem,Pe=[],tt=0;tt<ge.length;tt++){var Ke=Re._fullLayout.shapes[tt];if(Pe[tt]=Ke._input,fe!==void 0&&tt===Re._fullLayout._activeShapeIndex){var nt=Le;switch(Ke.type){case"line":case"rect":case"circle":var yi=g.getFromId(Re,Ke.xref);Ke.xref.charAt(0)==="x"&&yi.type.includes("category")?(ke("x0",nt.x0-(Ke.x0shift||0)),ke("x1",nt.x1-(Ke.x1shift||0))):(ke("x0",nt.x0),ke("x1",nt.x1));var Ei=g.getFromId(Re,Ke.yref);Ke.yref.charAt(0)==="y"&&Ei.type.includes("category")?(ke("y0",nt.y0-(Ke.y0shift||0)),ke("y1",nt.y1-(Ke.y1shift||0))):(ke("y0",nt.y0),ke("y1",nt.y1));break;case"path":ke("path",nt.path);break}}}return fe===void 0?(Pe.push(Le),Pe):ce?ce.getUpdateObj():{}}}}function Ce(he,le,Y){var Re=he[0][0],fe=le.gd,xe=Re.getAttribute("d"),ge=fe._fullLayout.newshape,ye=le.plotinfo,Ae=le.isActiveShape,Le=ye.xaxis,ce=ye.yaxis,ke=!!ye.domain||!ye.xaxis,Pe=!!ye.domain||!ye.yaxis,tt=x(Y),Ke=w(xe,fe,ye,Ae),nt={editable:!0,visible:ge.visible,name:ge.name,showlegend:ge.showlegend,legend:ge.legend,legendwidth:ge.legendwidth,legendgroup:ge.legendgroup,legendgrouptitle:{text:ge.legendgrouptitle.text,font:ge.legendgrouptitle.font},legendrank:ge.legendrank,label:ge.label,xref:ke?"paper":Le._id,yref:Pe?"paper":ce._id,layer:ge.layer,opacity:ge.opacity,line:{color:ge.line.color,width:ge.line.width,dash:ge.line.dash}};tt||(nt.fillcolor=ge.fillcolor,nt.fillrule=ge.fillrule);var yi;if(Ke.length===1&&(yi=Ke[0]),yi&&yi.length===5&&Y==="drawrect")nt.type="rect",nt.x0=yi[0][1],nt.y0=yi[0][2],nt.x1=yi[2][1],nt.y1=yi[2][2];else if(yi&&Y==="drawline")nt.type="line",nt.x0=yi[0][1],nt.y0=yi[0][2],nt.x1=yi[1][1],nt.y1=yi[1][2];else if(yi&&Y==="drawcircle"){nt.type="circle";var Ei=yi[y][1],vs=yi[b][1],Se=yi[T][1],Ee=yi[u][1],X=yi[y][2],Oe=yi[b][2],Qe=yi[T][2],pe=yi[u][2],q=ye.xaxis&&(ye.xaxis.type==="date"||ye.xaxis.type==="log"),ae=ye.yaxis&&(ye.yaxis.type==="date"||ye.yaxis.type==="log");q&&(Ei=P(ye.xaxis,Ei),vs=P(ye.xaxis,vs),Se=P(ye.xaxis,Se),Ee=P(ye.xaxis,Ee)),ae&&(X=P(ye.yaxis,X),Oe=P(ye.yaxis,Oe),Qe=P(ye.yaxis,Qe),pe=P(ye.yaxis,pe));var ve=(vs+Ee)/2,Te=(X+Qe)/2,et=(Ee-vs+Se-Ei)/2,bt=(pe-Oe+Qe-X)/2,dr=O({x0:ve,y0:Te,x1:ve+et*k,y1:Te+bt*M});q&&(dr.x0=B(ye.xaxis,dr.x0),dr.x1=B(ye.xaxis,dr.x1)),ae&&(dr.y0=B(ye.yaxis,dr.y0),dr.y1=B(ye.yaxis,dr.y1)),nt.x0=dr.x0,nt.y0=dr.y0,nt.x1=dr.x1,nt.y1=dr.y1}else nt.type="path",Le&&ce&&H(Ke,Le,ce),nt.path=L(Ke),yi=null;return nt}ue.exports={newShapes:W,createShapeObj:Ce}}),Rv=t((me,ue)=>{var g=Fv(),s=g.selectMode,h=H1(),x=h.clearOutline,v=dv(),y=v.readPaths,b=v.writePaths,T=v.fixDatesForPaths;ue.exports=function(u,k){if(u.length){var M=u[0][0];if(M){var D=M.getAttribute("d"),B=k.gd,P=B._fullLayout.newselection,N=k.plotinfo,z=N.xaxis,F=N.yaxis,w=k.isActiveSelection,L=k.dragmode,O=(B.layout||{}).selections||[];if(!s(L)&&w!==void 0){var H=B._fullLayout._activeSelectionIndex;if(H<O.length)switch(B._fullLayout.selections[H].type){case"rect":L="select";break;case"path":L="lasso";break}}var W=y(D,B,N,w),Ce={xref:z._id,yref:F._id,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}},he;W.length===1&&(he=W[0]),he&&he.length===5&&L==="select"?(Ce.type="rect",Ce.x0=he[0][1],Ce.y0=he[0][2],Ce.x1=he[2][1],Ce.y1=he[2][2]):(Ce.type="path",z&&F&&T(W,z,F),Ce.path=b(W),he=null),x(B);for(var le=k.editHelpers,Y=(le||{}).modifyItem,Re=[],fe=0;fe<O.length;fe++){var xe=B._fullLayout.selections[fe];if(!xe){Re[fe]=xe;continue}if(Re[fe]=xe._input,w!==void 0&&fe===B._fullLayout._activeSelectionIndex){var ge=Ce;switch(xe.type){case"rect":Y("x0",ge.x0),Y("x1",ge.x1),Y("y0",ge.y0),Y("y1",ge.y1);break;case"path":Y("path",ge.path);break}}}return w===void 0?(Re.push(Ce),Re):le?le.getUpdateObj():{}}}}}),zv=t((me,ue)=>{ue.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}}),de=t(me=>{var ue=zv(),g=Z(),s=mm();me.rangeToShapePosition=function(v){return v.type==="log"?v.r2d:function(y){return y}},me.shapePositionToRange=function(v){return v.type==="log"?v.d2r:function(y){return y}},me.decodeDate=function(v){return function(y){return y.replace&&(y=y.replace("_"," ")),v(y)}},me.encodeDate=function(v){return function(y){return v(y).replace(" ","_")}},me.extractPathCoords=function(v,y,b){var T=[],u=v.match(ue.segmentRE);return u.forEach(function(k){var M=y[k.charAt(0)].drawn;if(M!==void 0){var D=k.substr(1).match(ue.paramRE);if(!(!D||D.length<M)){var B=D[M],P=b?B:g.cleanNumber(B);T.push(P)}}}),T},me.getDataToPixel=function(v,y,b,T,u){var k=v._fullLayout._size,M;if(y)if(u==="domain")M=function(B){return y._length*(T?1-B:B)+y._offset};else{var D=me.shapePositionToRange(y);M=function(B){var P=x(y,b);return y._offset+y.r2p(D(B,!0))+P},y.type==="date"&&(M=me.decodeDate(M))}else T?M=function(B){return k.t+k.h*(1-B)}:M=function(B){return k.l+k.w*B};return M},me.getPixelToData=function(v,y,b,T){var u=v._fullLayout._size,k;if(y)if(T==="domain")k=function(D){var B=(D-y._offset)/y._length;return b?1-B:B};else{var M=me.rangeToShapePosition(y);k=function(D){return M(y.p2r(D-y._offset))}}else b?k=function(D){return 1-(D-u.t)/u.h}:k=function(D){return(D-u.l)/u.w};return k},me.roundPositionForSharpStrokeRendering=function(v,y){var b=Math.round(y%2)===1,T=Math.round(v);return b?T+.5:T},me.makeShapesOptionsAndPlotinfo=function(v,y){var b=v._fullLayout.shapes[y]||{},T=v._fullLayout._plots[b.xref+b.yref],u=!!T;return u?T._hadPlotinfo=!0:(T={},b.xref&&b.xref!=="paper"&&(T.xaxis=v._fullLayout[b.xref+"axis"]),b.yref&&b.yref!=="paper"&&(T.yaxis=v._fullLayout[b.yref+"axis"])),T.xsizemode=b.xsizemode,T.ysizemode=b.ysizemode,T.xanchor=b.xanchor,T.yanchor=b.yanchor,{options:b,plotinfo:T}},me.makeSelectionsOptionsAndPlotinfo=function(v,y){var b=v._fullLayout.selections[y]||{},T=v._fullLayout._plots[b.xref+b.yref],u=!!T;return u?T._hadPlotinfo=!0:(T={},b.xref&&(T.xaxis=v._fullLayout[b.xref+"axis"]),b.yref&&(T.yaxis=v._fullLayout[b.yref+"axis"])),{options:b,plotinfo:T}},me.getPathString=function(v,y){var b=y.type,T=s.getRefType(y.xref),u=s.getRefType(y.yref),k=s.getFromId(v,y.xref),M=s.getFromId(v,y.yref),D=v._fullLayout._size,B,P,N,z,F=x(k,y.x0shift),w=x(k,y.x1shift),L=x(M,y.y0shift),O=x(M,y.y1shift),H,W,Ce,he;if(k?T==="domain"?P=function(ce){return k._offset+k._length*ce}:(B=me.shapePositionToRange(k),P=function(ce){return k._offset+k.r2p(B(ce,!0))}):P=function(ce){return D.l+D.w*ce},M?u==="domain"?z=function(ce){return M._offset+M._length*(1-ce)}:(N=me.shapePositionToRange(M),z=function(ce){return M._offset+M.r2p(N(ce,!0))}):z=function(ce){return D.t+D.h*(1-ce)},b==="path")return k&&k.type==="date"&&(P=me.decodeDate(P)),M&&M.type==="date"&&(z=me.decodeDate(z)),h(y,P,z);if(y.xsizemode==="pixel"){var le=P(y.xanchor);H=le+y.x0+F,W=le+y.x1+w}else H=P(y.x0)+F,W=P(y.x1)+w;if(y.ysizemode==="pixel"){var Y=z(y.yanchor);Ce=Y-y.y0+L,he=Y-y.y1+O}else Ce=z(y.y0)+L,he=z(y.y1)+O;if(b==="line")return"M"+H+","+Ce+"L"+W+","+he;if(b==="rect")return"M"+H+","+Ce+"H"+W+"V"+he+"H"+H+"Z";var Re=(H+W)/2,fe=(Ce+he)/2,xe=Math.abs(Re-H),ge=Math.abs(fe-Ce),ye="A"+xe+","+ge,Ae=Re+xe+","+fe,Le=Re+","+(fe-ge);return"M"+Ae+ye+" 0 1,1 "+Le+ye+" 0 0,1 "+Ae+"Z"};function h(v,y,b){var T=v.path,u=v.xsizemode,k=v.ysizemode,M=v.xanchor,D=v.yanchor;return T.replace(ue.segmentRE,function(B){var P=0,N=B.charAt(0),z=ue.paramIsX[N],F=ue.paramIsY[N],w=ue.numParams[N],L=B.substr(1).replace(ue.paramRE,function(O){return z[P]?u==="pixel"?O=y(M)+Number(O):O=y(O):F[P]&&(k==="pixel"?O=b(D)-Number(O):O=b(O)),P++,P>w&&(O="X"),O});return P>w&&(L=L.replace(/[\s,]*X.*/,""),g.log("Ignoring extra params in segment "+B)),N+L})}function x(v,y){y=y||0;var b=0;return y&&v&&(v.type==="category"||v.type==="multicategory")&&(b=(v.r2p(1)-v.r2p(0))*y),b}}),ql=t((me,ue)=>{var g=Z(),s=mm(),h=kg(),x=D0(),v=dv().readPaths,y=de(),b=y.getPathString,T=j1(),u=Q1().FROM_TL;ue.exports=function(D,B,P,N){if(N.selectAll(".shape-label").remove(),!!(P.label.text||P.label.texttemplate)){var z;if(P.label.texttemplate){var F={};if(P.type!=="path"){var w=s.getFromId(D,P.xref),L=s.getFromId(D,P.yref);for(var O in T){var H=T[O](P,w,L);H!==void 0&&(F[O]=H)}}z=g.texttemplateStringForShapes(P.label.texttemplate,{},D._fullLayout._d3locale,F)}else z=P.label.text;var W={"data-index":B},Ce=P.label.font,he={"data-notex":1},le=N.append("g").attr(W).classed("shape-label",!0),Y=le.append("text").attr(he).classed("shape-label-text",!0).text(z),Re,fe,xe,ge;if(P.path){var ye=b(D,P),Ae=v(ye,D);Re=1/0,xe=1/0,fe=-1/0,ge=-1/0;for(var Le=0;Le<Ae.length;Le++)for(var ce=0;ce<Ae[Le].length;ce++)for(var ke=Ae[Le][ce],Pe=1;Pe<ke.length;Pe+=2){var tt=ke[Pe],Ke=ke[Pe+1];Re=Math.min(Re,tt),fe=Math.max(fe,tt),xe=Math.min(xe,Ke),ge=Math.max(ge,Ke)}}else{var nt=s.getFromId(D,P.xref),yi=P.x0shift,Ei=P.x1shift,vs=s.getRefType(P.xref),Se=s.getFromId(D,P.yref),Ee=P.y0shift,X=P.y1shift,Oe=s.getRefType(P.yref),Qe=function(dr,Ol){var Xl=y.getDataToPixel(D,nt,Ol,!1,vs);return Xl(dr)},pe=function(dr,Ol){var Xl=y.getDataToPixel(D,Se,Ol,!0,Oe);return Xl(dr)};Re=Qe(P.x0,yi),fe=Qe(P.x1,Ei),xe=pe(P.y0,Ee),ge=pe(P.y1,X)}var q=P.label.textangle;q==="auto"&&(P.type==="line"?q=k(Re,xe,fe,ge):q=0),Y.call(function(dr){return dr.call(x.font,Ce).attr({}),h.convertToTspans(dr,D),dr});var ae=x.bBox(Y.node()),ve=M(Re,xe,fe,ge,P,q,ae),Te=ve.textx,et=ve.texty,bt=ve.xanchor;Y.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[bt],y:et,x:Te,transform:"rotate("+q+","+Te+","+et+")"}).call(h.positionText,Te,et)}};function k(D,B,P,N){var z,F;return F=Math.abs(P-D),P>=D?z=B-N:z=N-B,-180/Math.PI*Math.atan2(z,F)}function M(D,B,P,N,z,F,w){var L=z.label.textposition,O=z.label.textangle,H=z.label.padding,W=z.type,Ce=Math.PI/180*F,he=Math.sin(Ce),le=Math.cos(Ce),Y=z.label.xanchor,Re=z.label.yanchor,fe,xe,ge,ye;if(W==="line"){L==="start"?(fe=D,xe=B):L==="end"?(fe=P,xe=N):(fe=(D+P)/2,xe=(B+N)/2),Y==="auto"&&(L==="start"?O==="auto"?P>D?Y="left":P<D?Y="right":Y="center":P>D?Y="right":P<D?Y="left":Y="center":L==="end"?O==="auto"?P>D?Y="right":P<D?Y="left":Y="center":P>D?Y="left":P<D?Y="right":Y="center":Y="center");var Ae={left:1,center:0,right:-1},Le={bottom:-1,middle:0,top:1};if(O==="auto"){var ce=Le[Re];ge=-H*he*ce,ye=H*le*ce}else{var ke=Ae[Y],Pe=Le[Re];ge=H*ke,ye=H*Pe}fe=fe+ge,xe=xe+ye}else ge=H+3,L.indexOf("right")!==-1?(fe=Math.max(D,P)-ge,Y==="auto"&&(Y="right")):L.indexOf("left")!==-1?(fe=Math.min(D,P)+ge,Y==="auto"&&(Y="left")):(fe=(D+P)/2,Y==="auto"&&(Y="center")),L.indexOf("top")!==-1?xe=Math.min(B,N):L.indexOf("bottom")!==-1?xe=Math.max(B,N):xe=(B+N)/2,ye=H,Re==="bottom"?xe=xe-ye:Re==="top"&&(xe=xe+ye);var tt=u[Re],Ke=z.label.font.size,nt=w.height,yi=(nt*tt-Ke)*he,Ei=-(nt*tt-Ke)*le;return{textx:fe+yi,texty:xe+Ei,xanchor:Y}}}),De=t((me,ue)=>{var g=Z(),s=g.strTranslate,h=Om(),x=Fv(),v=x.drawMode,y=x.selectMode,b=l1(),T=_r(),u=ey(),k=u.i000,M=u.i090,D=u.i180,B=u.i270,P=H1(),N=P.clearOutlineControllers,z=dv(),F=z.pointsOnRectangle,w=z.pointsOnEllipse,L=z.writePaths,O=Ev().newShapes,H=Ev().createShapeObj,W=Rv(),Ce=ql();ue.exports=function Re(fe,xe,ge,ye){ye||(ye=0);var Ae=ge.gd;function Le(){Re(fe,xe,ge,ye++),(w(fe[0])||ge.hasText)&&ce({redrawing:!0})}function ce(Wp){var $p={};ge.isActiveShape!==void 0&&(ge.isActiveShape=!1,$p=O(xe,ge)),ge.isActiveSelection!==void 0&&(ge.isActiveSelection=!1,$p=W(xe,ge),Ae._fullLayout._reselect=!0),Object.keys($p).length&&b.call((Wp||{}).redrawing?"relayout":"_guiRelayout",Ae,$p)}var ke=Ae._fullLayout,Pe=ke._zoomlayer,tt=ge.dragmode,Ke=v(tt),nt=y(tt);(Ke||nt)&&(Ae._fullLayout._outlining=!0),N(Ae),xe.attr("d",L(fe));var yi,Ei,vs,Se,Ee;if(!ye&&(ge.isActiveShape||ge.isActiveSelection)){Ee=he([],fe);var X=Pe.append("g").attr("class","outline-controllers");et(X),t0()}if(Ke&&ge.hasText){var Oe=Pe.select(".label-temp"),Qe=H(xe,ge,ge.dragmode);Ce(Ae,"label-temp",Qe,Oe)}function pe(Wp){vs=+Wp.srcElement.getAttribute("data-i"),Se=+Wp.srcElement.getAttribute("data-j"),yi[vs][Se].moveFn=q}function q(Wp,$p){if(fe.length){var Lo=Ee[vs][Se][1],kl=Ee[vs][Se][2],dt=fe[vs],yp=dt.length;if(F(dt)){var Bp=Wp,Jp=$p;if(ge.isActiveSelection){var m0=le(dt,Se);m0[1]===dt[Se][1]?Jp=0:Bp=0}for(var s0=0;s0<yp;s0++)if(s0!==Se){var y0=dt[s0];y0[1]===dt[Se][1]&&(y0[1]=Lo+Bp),y0[2]===dt[Se][2]&&(y0[2]=kl+Jp)}if(dt[Se][1]=Lo+Bp,dt[Se][2]=kl+Jp,!F(dt))for(var M0=0;M0<yp;M0++)for(var T0=0;T0<dt[M0].length;T0++)dt[M0][T0]=Ee[vs][M0][T0]}else dt[Se][1]=Lo+Wp,dt[Se][2]=kl+$p;Le()}}function ae(){ce()}function ve(){if(fe.length&&fe[vs]&&fe[vs].length){for(var Wp=[],$p=0;$p<fe[vs].length;$p++)$p!==Se&&Wp.push(fe[vs][$p]);Wp.length>1&&!(Wp.length===2&&Wp[1][0]==="Z")&&(Se===0&&(Wp[0][0]="M"),fe[vs]=Wp,Le(),ce())}}function Te(Wp,$p){if(Wp===2){vs=+$p.srcElement.getAttribute("data-i"),Se=+$p.srcElement.getAttribute("data-j");var Lo=fe[vs];!F(Lo)&&!w(Lo)&&ve()}}function et(Wp){yi=[];for(var $p=0;$p<fe.length;$p++){var Lo=fe[$p],kl=F(Lo),dt=!kl&&w(Lo);yi[$p]=[];for(var yp=Lo.length,Bp=0;Bp<yp;Bp++)if(Lo[Bp][0]!=="Z"&&!(dt&&Bp!==k&&Bp!==M&&Bp!==D&&Bp!==B)){var Jp=kl&&ge.isActiveSelection,m0;Jp&&(m0=le(Lo,Bp));var s0=Lo[Bp][1],y0=Lo[Bp][2],M0=Wp.append(Jp?"rect":"circle").attr("data-i",$p).attr("data-j",Bp).style({fill:T.background,stroke:T.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Jp){var T0=m0[1]-s0,G0=m0[2]-y0,h0=G0?5:Math.max(Math.min(25,Math.abs(T0)-5),5),W0=T0?5:Math.max(Math.min(25,Math.abs(G0)-5),5);M0.classed(G0?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",h0).attr("height",W0).attr("x",s0-h0/2).attr("y",y0-W0/2).attr("transform",s(T0/2,G0/2))}else M0.classed("cursor-grab",!0).attr("r",5).attr("cx",s0).attr("cy",y0);yi[$p][Bp]={element:M0.node(),gd:Ae,prepFn:pe,doneFn:ae,clickFn:Te},h.init(yi[$p][Bp])}}}function bt(Wp,$p){if(fe.length)for(var Lo=0;Lo<fe.length;Lo++)for(var kl=0;kl<fe[Lo].length;kl++)for(var dt=0;dt+2<fe[Lo][kl].length;dt+=2)fe[Lo][kl][dt+1]=Ee[Lo][kl][dt+1]+Wp,fe[Lo][kl][dt+2]=Ee[Lo][kl][dt+2]+$p}function dr(Wp,$p){bt(Wp,$p),Le()}function Ol(Wp){vs=+Wp.srcElement.getAttribute("data-i"),vs||(vs=0),Ei[vs].moveFn=dr}function Xl(){ce()}function Pp(Wp){Wp===2&&Y(Ae)}function t0(){if(Ei=[],!!fe.length){var Wp=0;Ei[Wp]={element:xe[0][0],gd:Ae,prepFn:Ol,doneFn:Xl,clickFn:Pp},h.init(Ei[Wp])}}};function he(Re,fe){for(var xe=0;xe<fe.length;xe++){var ge=fe[xe];Re[xe]=[];for(var ye=0;ye<ge.length;ye++){Re[xe][ye]=[];for(var Ae=0;Ae<ge[ye].length;Ae++)Re[xe][ye][Ae]=ge[ye][Ae]}}return Re}function le(Re,fe){var xe=Re[fe][1],ge=Re[fe][2],ye=Re.length,Ae,Le,ce;return Ae=(fe+1)%ye,Le=Re[Ae][1],ce=Re[Ae][2],Le===xe&&ce===ge&&(Ae=(fe+2)%ye,Le=Re[Ae][1],ce=Re[Ae][2]),[Ae,Le,ce]}function Y(Re){if(y(Re._fullLayout.dragmode)){N(Re);var fe=Re._fullLayout._activeSelectionIndex,xe=(Re.layout||{}).selections||[];if(fe<xe.length){for(var ge=[],ye=0;ye<xe.length;ye++)ye!==fe&&ge.push(xe[ye]);delete Re._fullLayout._activeSelectionIndex;var Ae=Re._fullLayout.selections[fe];Re._fullLayout._deselect={xref:Ae.xref,yref:Ae.yref},b.call("_guiRelayout",Re,{selections:ge})}}}}),A0=t((me,ue)=>{var g=c(),s=l1(),h=Z(),x=mm(),v=dv().readPaths,y=De(),b=ql(),T=H1().clearOutlineControllers,u=_r(),k=D0(),M=Nm().arrayEditor,D=Om(),B=D1(),P=zv(),N=de(),z=N.getPathString;ue.exports={draw:F,drawOne:O,eraseActiveShape:Y,drawLabel:b};function F(Re){var fe=Re._fullLayout;fe._shapeUpperLayer.selectAll("path").remove(),fe._shapeLowerLayer.selectAll("path").remove(),fe._shapeUpperLayer.selectAll("text").remove(),fe._shapeLowerLayer.selectAll("text").remove();for(var xe in fe._plots){var ge=fe._plots[xe].shapelayer;ge&&(ge.selectAll("path").remove(),ge.selectAll("text").remove())}for(var ye=0;ye<fe.shapes.length;ye++)fe.shapes[ye].visible===!0&&O(Re,ye)}function w(Re){return!!Re._fullLayout._outlining}function L(Re){return!Re._context.edits.shapePosition}function O(Re,fe){Re._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+fe+'"]').remove();var xe=N.makeShapesOptionsAndPlotinfo(Re,fe),ge=xe.options,ye=xe.plotinfo;if(!ge._input||ge.visible!==!0)return;if(ge.layer==="above")Le(Re._fullLayout._shapeUpperLayer);else if(ge.xref==="paper"||ge.yref==="paper")Le(Re._fullLayout._shapeLowerLayer);else if(ge.layer==="between")Le(ye.shapelayerBetween);else if(ye._hadPlotinfo){var Ae=ye.mainplotinfo||ye;Le(Ae.shapelayer)}else Le(Re._fullLayout._shapeLowerLayer);function Le(ce){var ke=z(Re,ge),Pe={"data-index":fe,"fill-rule":ge.fillrule,d:ke},tt=ge.opacity,Ke=ge.fillcolor,nt=ge.line.width?ge.line.color:"rgba(0,0,0,0)",yi=ge.line.width,Ei=ge.line.dash;!yi&&ge.editable===!0&&(yi=5,Ei="solid");var vs=ke[ke.length-1]!=="Z",Se=L(Re)&&ge.editable&&Re._fullLayout._activeShapeIndex===fe;Se&&(Ke=vs?"rgba(0,0,0,0)":Re._fullLayout.activeshape.fillcolor,tt=Re._fullLayout.activeshape.opacity);var Ee=ce.append("g").classed("shape-group",!0).attr({"data-index":fe}),X=Ee.append("path").attr(Pe).style("opacity",tt).call(u.stroke,nt).call(u.fill,Ke).call(k.dashLine,Ei,yi);H(Ee,Re,ge),b(Re,fe,ge,Ee);var Oe;if((Se||Re._context.edits.shapePosition)&&(Oe=M(Re.layout,"shapes",ge)),Se){X.style({cursor:"move"});var Qe={element:X.node(),plotinfo:ye,gd:Re,editHelpers:Oe,hasText:ge.label.text||ge.label.texttemplate,isActiveShape:!0},pe=v(ke,Re);y(pe,X,Qe)}else Re._context.edits.shapePosition?W(Re,X,ge,fe,ce,Oe):ge.editable===!0&&X.style("pointer-events",vs||u.opacity(Ke)*tt<=.5?"stroke":"all");X.node().addEventListener("click",function(){return he(Re,X)})}}function H(Re,fe,xe){var ge=(xe.xref+xe.yref).replace(/paper/g,"").replace(/[xyz][0-9]* *domain/g,"");k.setClipUrl(Re,ge?"clip"+fe._fullLayout._uid+ge:null,fe)}function W(Re,fe,xe,ge,ye,Ae){var Le=10,ce=10,ke=xe.xsizemode==="pixel",Pe=xe.ysizemode==="pixel",tt=xe.type==="line",Ke=xe.type==="path",nt=Ae.modifyItem,yi,Ei,vs,Se,Ee,X,Oe,Qe,pe,q,ae,ve,Te,et,bt,dr=g.select(fe.node().parentNode),Ol=x.getFromId(Re,xe.xref),Xl=x.getRefType(xe.xref),Pp=x.getFromId(Re,xe.yref),t0=x.getRefType(xe.yref),Wp=xe.x0shift,$p=xe.x1shift,Lo=xe.y0shift,kl=xe.y1shift,dt=function(ft,mn){var Bl=N.getDataToPixel(Re,Ol,mn,!1,Xl);return Bl(ft)},yp=function(ft,mn){var Bl=N.getDataToPixel(Re,Pp,mn,!0,t0);return Bl(ft)},Bp=N.getPixelToData(Re,Ol,!1,Xl),Jp=N.getPixelToData(Re,Pp,!0,t0),m0=M0(),s0={element:m0.node(),gd:Re,prepFn:h0,doneFn:W0,clickFn:rm},y0;D.init(s0),m0.node().onmousemove=G0;function M0(){return tt?T0():fe}function T0(){var ft=10,mn=Math.max(xe.line.width,ft),Bl=ye.append("g").attr("data-index",ge).attr("drag-helper",!0);Bl.append("path").attr("d",fe.attr("d")).style({cursor:"move","stroke-width":mn,"stroke-opacity":"0"});var Vl={"fill-opacity":"0"},Np=Math.max(mn/2,ft);return Bl.append("circle").attr({"data-line-point":"start-point",cx:ke?dt(xe.xanchor)+xe.x0:dt(xe.x0,Wp),cy:Pe?yp(xe.yanchor)-xe.y0:yp(xe.y0,Lo),r:Np}).style(Vl).classed("cursor-grab",!0),Bl.append("circle").attr({"data-line-point":"end-point",cx:ke?dt(xe.xanchor)+xe.x1:dt(xe.x1,$p),cy:Pe?yp(xe.yanchor)-xe.y1:yp(xe.y1,kl),r:Np}).style(Vl).classed("cursor-grab",!0),Bl}function G0(ft){if(w(Re)){y0=null;return}if(tt)ft.target.tagName==="path"?y0="move":y0=ft.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var mn=s0.element.getBoundingClientRect(),Bl=mn.right-mn.left,Vl=mn.bottom-mn.top,Np=ft.clientX-mn.left,Up=ft.clientY-mn.top,Qp=!Ke&&Bl>Le&&Vl>ce&&!ft.shiftKey?D.getCursor(Np/Bl,1-Up/Vl):"move";B(fe,Qp),y0=Qp.split("-")[0]}}function h0(ft){w(Re)||(ke&&(Ee=dt(xe.xanchor)),Pe&&(X=yp(xe.yanchor)),xe.type==="path"?bt=xe.path:(yi=ke?xe.x0:dt(xe.x0),Ei=Pe?xe.y0:yp(xe.y0),vs=ke?xe.x1:dt(xe.x1),Se=Pe?xe.y1:yp(xe.y1)),yi<vs?(pe=yi,Te="x0",q=vs,et="x1"):(pe=vs,Te="x1",q=yi,et="x0"),!Pe&&Ei<Se||Pe&&Ei>Se?(Oe=Ei,ae="y0",Qe=Se,ve="y1"):(Oe=Se,ae="y1",Qe=Ei,ve="y0"),G0(ft),Uo(ye,xe),Be(fe,xe,Re),s0.moveFn=y0==="move"?V0:um,s0.altKey=ft.altKey)}function W0(){w(Re)||(B(fe),Tp(ye),H(fe,Re,xe),s.call("_guiRelayout",Re,Ae.getUpdateObj()))}function rm(){w(Re)||Tp(ye)}function V0(ft,mn){if(xe.type==="path"){var Bl=function(Up){return Up},Vl=Bl,Np=Bl;ke?nt("xanchor",xe.xanchor=Bp(Ee+ft)):(Vl=function(Up){return Bp(dt(Up)+ft)},Ol&&Ol.type==="date"&&(Vl=N.encodeDate(Vl))),Pe?nt("yanchor",xe.yanchor=Jp(X+mn)):(Np=function(Up){return Jp(yp(Up)+mn)},Pp&&Pp.type==="date"&&(Np=N.encodeDate(Np))),nt("path",xe.path=Ce(bt,Vl,Np))}else ke?nt("xanchor",xe.xanchor=Bp(Ee+ft)):(nt("x0",xe.x0=Bp(yi+ft)),nt("x1",xe.x1=Bp(vs+ft))),Pe?nt("yanchor",xe.yanchor=Jp(X+mn)):(nt("y0",xe.y0=Jp(Ei+mn)),nt("y1",xe.y1=Jp(Se+mn)));fe.attr("d",z(Re,xe)),Uo(ye,xe),b(Re,ge,xe,dr)}function um(ft,mn){if(Ke){var Bl=function(fm){return fm},Vl=Bl,Np=Bl;ke?nt("xanchor",xe.xanchor=Bp(Ee+ft)):(Vl=function(fm){return Bp(dt(fm)+ft)},Ol&&Ol.type==="date"&&(Vl=N.encodeDate(Vl))),Pe?nt("yanchor",xe.yanchor=Jp(X+mn)):(Np=function(fm){return Jp(yp(fm)+mn)},Pp&&Pp.type==="date"&&(Np=N.encodeDate(Np))),nt("path",xe.path=Ce(bt,Vl,Np))}else if(tt){if(y0==="resize-over-start-point"){var Up=yi+ft,Qp=Pe?Ei-mn:Ei+mn;nt("x0",xe.x0=ke?Up:Bp(Up)),nt("y0",xe.y0=Pe?Qp:Jp(Qp))}else if(y0==="resize-over-end-point"){var Zp=vs+ft,Kp=Pe?Se-mn:Se+mn;nt("x1",xe.x1=ke?Zp:Bp(Zp)),nt("y1",xe.y1=Pe?Kp:Jp(Kp))}}else{var R0=function(fm){return y0.indexOf(fm)!==-1},k0=R0("n"),N0=R0("s"),lm=R0("w"),Im=R0("e"),u1=k0?Oe+mn:Oe,v1=N0?Qe+mn:Qe,b1=lm?pe+ft:pe,Bm=Im?q+ft:q;Pe&&(k0&&(u1=Oe-mn),N0&&(v1=Qe-mn)),(!Pe&&v1-u1>ce||Pe&&u1-v1>ce)&&(nt(ae,xe[ae]=Pe?u1:Jp(u1)),nt(ve,xe[ve]=Pe?v1:Jp(v1))),Bm-b1>Le&&(nt(Te,xe[Te]=ke?b1:Bp(b1)),nt(et,xe[et]=ke?Bm:Bp(Bm)))}fe.attr("d",z(Re,xe)),Uo(ye,xe),b(Re,ge,xe,dr)}function Uo(ft,mn){(ke||Pe)&&Bl();function Bl(){var Vl=mn.type!=="path",Np=ft.selectAll(".visual-cue").data([0]),Up=1;Np.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Up}).classed("visual-cue",!0);var Qp=dt(ke?mn.xanchor:h.midRange(Vl?[mn.x0,mn.x1]:N.extractPathCoords(mn.path,P.paramIsX))),Zp=yp(Pe?mn.yanchor:h.midRange(Vl?[mn.y0,mn.y1]:N.extractPathCoords(mn.path,P.paramIsY)));if(Qp=N.roundPositionForSharpStrokeRendering(Qp,Up),Zp=N.roundPositionForSharpStrokeRendering(Zp,Up),ke&&Pe){var Kp="M"+(Qp-1-Up)+","+(Zp-1-Up)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Np.attr("d",Kp)}else if(ke){var R0="M"+(Qp-1-Up)+","+(Zp-9-Up)+"v18 h2 v-18 Z";Np.attr("d",R0)}else{var k0="M"+(Qp-9-Up)+","+(Zp-1-Up)+"h18 v2 h-18 Z";Np.attr("d",k0)}}}function Tp(ft){ft.selectAll(".visual-cue").remove()}function Be(ft,mn,Bl){var Vl=mn.xref,Np=mn.yref,Up=x.getFromId(Bl,Vl),Qp=x.getFromId(Bl,Np),Zp="";Vl!=="paper"&&!Up.autorange&&(Zp+=Vl),Np!=="paper"&&!Qp.autorange&&(Zp+=Np),k.setClipUrl(ft,Zp?"clip"+Bl._fullLayout._uid+Zp:null,Bl)}}function Ce(Re,fe,xe){return Re.replace(P.segmentRE,function(ge){var ye=0,Ae=ge.charAt(0),Le=P.paramIsX[Ae],ce=P.paramIsY[Ae],ke=P.numParams[Ae],Pe=ge.substr(1).replace(P.paramRE,function(tt){return ye>=ke||(Le[ye]?tt=fe(tt):ce[ye]&&(tt=xe(tt)),ye++),tt});return Ae+Pe})}function he(Re,fe){if(L(Re)){var xe=fe.node(),ge=+xe.getAttribute("data-index");if(ge>=0){if(ge===Re._fullLayout._activeShapeIndex){le(Re);return}Re._fullLayout._activeShapeIndex=ge,Re._fullLayout._deactivateShape=le,F(Re)}}}function le(Re){if(L(Re)){var fe=Re._fullLayout._activeShapeIndex;fe>=0&&(T(Re),delete Re._fullLayout._activeShapeIndex,F(Re))}}function Y(Re){if(L(Re)){T(Re);var fe=Re._fullLayout._activeShapeIndex,xe=(Re.layout||{}).shapes||[];if(fe<xe.length){for(var ge=[],ye=0;ye<xe.length;ye++)ye!==fe&&ge.push(xe[ye]);return delete Re._fullLayout._activeShapeIndex,s.call("_guiRelayout",Re,{shapes:ge})}}}}),b0=t((me,ue)=>{var g=l1(),s=vg(),h=N1(),x=hy(),v=A0().eraseActiveShape,y=Z(),b=y._,T=ue.exports={};T.toImage={name:"toImage",title:function(W){var Ce=W._context.toImageButtonOptions||{},he=Ce.format||"png";return he==="png"?b(W,"Download plot as a PNG"):b(W,"Download plot")},icon:x.camera,click:function(W){var Ce=W._context.toImageButtonOptions,he={format:Ce.format||"png"};y.notifier(b(W,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(le){le in Ce&&(he[le]=Ce[le])}),g.call("downloadImage",W,he).then(function(le){y.notifier(b(W,"Snapshot succeeded")+" - "+le,"long")}).catch(function(){y.notifier(b(W,"Sorry, there was a problem downloading your snapshot!"),"long")})}},T.sendDataToCloud={name:"sendDataToCloud",title:function(W){return b(W,"Edit in Chart Studio")},icon:x.disk,click:function(W){s.sendDataToCloud(W)}},T.editInChartStudio={name:"editInChartStudio",title:function(W){return b(W,"Edit in Chart Studio")},icon:x.pencil,click:function(W){s.sendDataToCloud(W)}},T.zoom2d={name:"zoom2d",_cat:"zoom",title:function(W){return b(W,"Zoom")},attr:"dragmode",val:"zoom",icon:x.zoombox,click:u},T.pan2d={name:"pan2d",_cat:"pan",title:function(W){return b(W,"Pan")},attr:"dragmode",val:"pan",icon:x.pan,click:u},T.select2d={name:"select2d",_cat:"select",title:function(W){return b(W,"Box Select")},attr:"dragmode",val:"select",icon:x.selectbox,click:u},T.lasso2d={name:"lasso2d",_cat:"lasso",title:function(W){return b(W,"Lasso Select")},attr:"dragmode",val:"lasso",icon:x.lasso,click:u},T.drawclosedpath={name:"drawclosedpath",title:function(W){return b(W,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:x.drawclosedpath,click:u},T.drawopenpath={name:"drawopenpath",title:function(W){return b(W,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:x.drawopenpath,click:u},T.drawline={name:"drawline",title:function(W){return b(W,"Draw line")},attr:"dragmode",val:"drawline",icon:x.drawline,click:u},T.drawrect={name:"drawrect",title:function(W){return b(W,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:x.drawrect,click:u},T.drawcircle={name:"drawcircle",title:function(W){return b(W,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:x.drawcircle,click:u},T.eraseshape={name:"eraseshape",title:function(W){return b(W,"Erase active shape")},icon:x.eraseshape,click:v},T.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(W){return b(W,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:u},T.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(W){return b(W,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:u},T.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(W){return b(W,"Autoscale")},attr:"zoom",val:"auto",icon:x.autoscale,click:u},T.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(W){return b(W,"Reset axes")},attr:"zoom",val:"reset",icon:x.home,click:u},T.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(W){return b(W,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:u},T.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(W){return b(W,"Compare data on hover")},attr:"hovermode",val:function(W){return W._fullLayout._isHoriz?"y":"x"},icon:x.tooltip_compare,gravity:"ne",click:u};function u(W,Ce){var he=Ce.currentTarget,le=he.getAttribute("data-attr"),Y=he.getAttribute("data-val")||!0,Re=W._fullLayout,fe={},xe=h.list(W,null,!0),ge=Re._cartesianSpikesEnabled,ye,Ae;if(le==="zoom"){var Le=Y==="in"?.5:2,ce=(1+Le)/2,ke=(1-Le)/2,Pe,tt;for(Ae=0;Ae<xe.length;Ae++)if(ye=xe[Ae],tt=ye.modebardisable==="none"||ye.modebardisable.indexOf(Y==="auto"||Y==="reset"?"autoscale":"zoominout")===-1,tt&&!ye.fixedrange)if(Pe=ye._name,Y==="auto")fe[Pe+".autorange"]=!0;else if(Y==="reset")ye._rangeInitial0===void 0&&ye._rangeInitial1===void 0?fe[Pe+".autorange"]=!0:ye._rangeInitial0===void 0?(fe[Pe+".autorange"]=ye._autorangeInitial,fe[Pe+".range"]=[null,ye._rangeInitial1]):ye._rangeInitial1===void 0?(fe[Pe+".range"]=[ye._rangeInitial0,null],fe[Pe+".autorange"]=ye._autorangeInitial):fe[Pe+".range"]=[ye._rangeInitial0,ye._rangeInitial1],ye._showSpikeInitial!==void 0&&(fe[Pe+".showspikes"]=ye._showSpikeInitial,ge==="on"&&!ye._showSpikeInitial&&(ge="off"));else{var Ke=[ye.r2l(ye.range[0]),ye.r2l(ye.range[1])],nt=[ce*Ke[0]+ke*Ke[1],ce*Ke[1]+ke*Ke[0]];fe[Pe+".range[0]"]=ye.l2r(nt[0]),fe[Pe+".range[1]"]=ye.l2r(nt[1])}}else le==="hovermode"&&(Y==="x"||Y==="y")&&(Y=Re._isHoriz?"y":"x",he.setAttribute("data-val",Y)),fe[le]=Y;Re._cartesianSpikesEnabled=ge,g.call("_guiRelayout",W,fe)}T.zoom3d={name:"zoom3d",_cat:"zoom",title:function(W){return b(W,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:x.zoombox,click:k},T.pan3d={name:"pan3d",_cat:"pan",title:function(W){return b(W,"Pan")},attr:"scene.dragmode",val:"pan",icon:x.pan,click:k},T.orbitRotation={name:"orbitRotation",title:function(W){return b(W,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:x["3d_rotate"],click:k},T.tableRotation={name:"tableRotation",title:function(W){return b(W,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:x["z-axis"],click:k};function k(W,Ce){for(var he=Ce.currentTarget,le=he.getAttribute("data-attr"),Y=he.getAttribute("data-val")||!0,Re=W._fullLayout._subplots.gl3d||[],fe={},xe=le.split("."),ge=0;ge<Re.length;ge++)fe[Re[ge]+"."+xe[1]]=Y;var ye=Y==="pan"?Y:"zoom";fe.dragmode=ye,g.call("_guiRelayout",W,fe)}T.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(W){return b(W,"Reset camera to default")},attr:"resetDefault",icon:x.home,click:M},T.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(W){return b(W,"Reset camera to last save")},attr:"resetLastSave",icon:x.movie,click:M};function M(W,Ce){for(var he=Ce.currentTarget,le=he.getAttribute("data-attr"),Y=le==="resetLastSave",Re=le==="resetDefault",fe=W._fullLayout,xe=fe._subplots.gl3d||[],ge={},ye=0;ye<xe.length;ye++){var Ae=xe[ye],Le=Ae+".camera",ce=Ae+".aspectratio",ke=Ae+".aspectmode",Pe=fe[Ae]._scene,tt;Y?(ge[Le+".up"]=Pe.viewInitial.up,ge[Le+".eye"]=Pe.viewInitial.eye,ge[Le+".center"]=Pe.viewInitial.center,tt=!0):Re&&(ge[Le+".up"]=null,ge[Le+".eye"]=null,ge[Le+".center"]=null,tt=!0),tt&&(ge[ce+".x"]=Pe.viewInitial.aspectratio.x,ge[ce+".y"]=Pe.viewInitial.aspectratio.y,ge[ce+".z"]=Pe.viewInitial.aspectratio.z,ge[ke]=Pe.viewInitial.aspectmode)}g.call("_guiRelayout",W,ge)}T.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(W){return b(W,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:B};function D(W,Ce){var he=Ce.currentTarget,le=he._previousVal,Y=W._fullLayout,Re=Y._subplots.gl3d||[],fe=["xaxis","yaxis","zaxis"],xe={},ge={};if(le)ge=le,he._previousVal=null;else{for(var ye=0;ye<Re.length;ye++){var Ae=Re[ye],Le=Y[Ae],ce=Ae+".hovermode";xe[ce]=Le.hovermode,ge[ce]=!1;for(var ke=0;ke<3;ke++){var Pe=fe[ke],tt=Ae+"."+Pe+".showspikes";ge[tt]=!1,xe[tt]=Le[Pe].showspikes}}he._previousVal=xe}return ge}function B(W,Ce){var he=D(W,Ce);g.call("_guiRelayout",W,he)}T.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(W){return b(W,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:P},T.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(W){return b(W,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:P},T.resetGeo={name:"resetGeo",_cat:"reset",title:function(W){return b(W,"Reset")},attr:"reset",val:null,icon:x.autoscale,click:P},T.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(W){return b(W,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:z};function P(W,Ce){for(var he=Ce.currentTarget,le=he.getAttribute("data-attr"),Y=he.getAttribute("data-val")||!0,Re=W._fullLayout,fe=Re._subplots.geo||[],xe=0;xe<fe.length;xe++){var ge=fe[xe],ye=Re[ge];if(le==="zoom"){var Ae=ye.projection.scale,Le=Y==="in"?2*Ae:.5*Ae;g.call("_guiRelayout",W,ge+".projection.scale",Le)}}le==="reset"&&H(W,"geo")}T.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(W){return b(W,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:z};function N(W){var Ce=W._fullLayout;return Ce.hovermode?!1:Ce._has("cartesian")?Ce._isHoriz?"y":"x":"closest"}function z(W){var Ce=N(W);g.call("_guiRelayout",W,"hovermode",Ce)}T.resetViewSankey={name:"resetSankeyGroup",title:function(W){return b(W,"Reset view")},icon:x.home,click:function(W){for(var Ce={"node.groups":[],"node.x":[],"node.y":[]},he=0;he<W._fullData.length;he++){var le=W._fullData[he]._viewInitial;Ce["node.groups"].push(le.node.groups.slice()),Ce["node.x"].push(le.node.x.slice()),Ce["node.y"].push(le.node.y.slice())}g.call("restyle",W,Ce)}},T.toggleHover={name:"toggleHover",title:function(W){return b(W,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(W,Ce){var he=D(W,Ce);he.hovermode=N(W),g.call("_guiRelayout",W,he)}},T.resetViews={name:"resetViews",title:function(W){return b(W,"Reset views")},icon:x.home,click:function(W,Ce){var he=Ce.currentTarget;he.setAttribute("data-attr","zoom"),he.setAttribute("data-val","reset"),u(W,Ce),he.setAttribute("data-attr","resetLastSave"),M(W,Ce),H(W,"geo"),H(W,"mapbox"),H(W,"map")}},T.toggleSpikelines={name:"toggleSpikelines",title:function(W){return b(W,"Toggle Spike Lines")},icon:x.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(W){var Ce=W._fullLayout,he=Ce._cartesianSpikesEnabled;Ce._cartesianSpikesEnabled=he==="on"?"off":"on",g.call("_guiRelayout",W,F(W))}};function F(W){for(var Ce=W._fullLayout,he=Ce._cartesianSpikesEnabled==="on",le=h.list(W,null,!0),Y={},Re=0;Re<le.length;Re++){var fe=le[Re];Y[fe._name+".showspikes"]=he?!0:fe._showSpikeInitial}return Y}T.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(W){return b(W,"Reset view")},attr:"reset",icon:x.home,click:function(W){H(W,"mapbox")}},T.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(W){return b(W,"Reset view")},attr:"reset",icon:x.home,click:function(W){H(W,"map")}},T.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(W){return b(W,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:w},T.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(W){return b(W,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:L},T.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(W){return b(W,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:w},T.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(W){return b(W,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:L};function w(W,Ce){O(W,Ce,"mapbox")}function L(W,Ce){O(W,Ce,"map")}function O(W,Ce,he){for(var le=Ce.currentTarget,Y=le.getAttribute("data-val"),Re=W._fullLayout,fe=Re._subplots[he]||[],xe=1.05,ge={},ye=0;ye<fe.length;ye++){var Ae=fe[ye],Le=Re[Ae].zoom,ce=Y==="in"?xe*Le:Le/xe;ge[Ae+".zoom"]=ce}g.call("_guiRelayout",W,ge)}function H(W,Ce){for(var he=W._fullLayout,le=he._subplots[Ce]||[],Y={},Re=0;Re<le.length;Re++)for(var fe=le[Re],xe=he[fe]._subplot,ge=xe.viewInitial,ye=Object.keys(ge),Ae=0;Ae<ye.length;Ae++){var Le=ye[Ae];Y[fe+"."+Le]=ge[Le]}g.call("_guiRelayout",W,Y)}}),v0=t((me,ue)=>{var g=b0(),s=Object.keys(g),h=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],x=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(h),v=[],y=function(b){if(x.indexOf(b._cat||b.name)===-1){var T=b.name,u=(b._cat||b.name).toLowerCase();v.indexOf(T)===-1&&v.push(T),v.indexOf(u)===-1&&v.push(u)}};s.forEach(function(b){y(g[b])}),v.sort(),ue.exports={DRAW_MODES:h,backButtons:x,foreButtons:v}}),Cm=t((me,ue)=>{v0(),ue.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}}),$0=t((me,ue)=>{var g=Z(),s=_r(),h=Nm(),x=Cm();ue.exports=function(v,y){var b=v.modebar||{},T=h.newContainer(y,"modebar");function u(M,D){return g.coerce(b,T,x,M,D)}u("orientation"),u("bgcolor",s.addOpacity(y.paper_bgcolor,.5));var k=s.contrast(s.rgb(y.modebar.bgcolor));u("color",s.addOpacity(k,.3)),u("activecolor",s.addOpacity(k,.7)),u("uirevision",y.uirevision),u("add"),u("remove")}}),M1=t((me,ue)=>{var g=c(),s=A(),h=Z(),x=hy(),v=a().version,y=new DOMParser;function b(M){this.container=M.container,this.element=document.createElement("div"),this.update(M.graphInfo,M.buttons),this.container.appendChild(this.element)}var T=b.prototype;T.update=function(M,D){this.graphInfo=M;var B=this.graphInfo._context,P=this.graphInfo._fullLayout,N="modebar-"+P._uid;this.element.setAttribute("id",N),this.element.setAttribute("role","toolbar"),this._uid=N,this.element.className="modebar modebar--custom",B.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),P.modebar.orientation==="v"&&(this.element.className+=" vertical",D=D.reverse());var z=P.modebar,F="#"+N+" .modebar-group";document.querySelectorAll(F).forEach(function(W){W.style.backgroundColor=z.bgcolor});var w=!this.hasButtons(D),L=this.hasLogo!==B.displaylogo,O=this.locale!==B.locale;if(this.locale=B.locale,(w||L||O)&&(this.removeAllButtons(),this.updateButtons(D),B.watermark||B.displaylogo)){var H=this.getLogo();B.watermark&&(H.className=H.className+" watermark"),P.modebar.orientation==="v"?this.element.insertBefore(H,this.element.childNodes[0]):this.element.appendChild(H),this.hasLogo=!0}this.updateActiveButton(),h.setStyleOnHover("#"+N+" .modebar-btn",".active",".icon path","fill: "+z.activecolor,"fill: "+z.color,this.element)},T.updateButtons=function(M){var D=this;this.buttons=M,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(B){var P=D.createGroup();B.forEach(function(N){var z=N.name;if(!z)throw new Error("must provide button 'name' in button config");if(D.buttonsNames.indexOf(z)!==-1)throw new Error("button name '"+z+"' is taken");D.buttonsNames.push(z);var F=D.createButton(N);D.buttonElements.push(F),P.appendChild(F)}),D.element.appendChild(P)})},T.createGroup=function(){var M=document.createElement("div");M.className="modebar-group";var D=this.graphInfo._fullLayout.modebar;return M.style.backgroundColor=D.bgcolor,M},T.createButton=function(M){var D=this,B=document.createElement("button");B.setAttribute("type","button"),B.setAttribute("rel","tooltip"),B.className="modebar-btn";var P=M.title;P===void 0?P=M.name:typeof P=="function"&&(P=P(this.graphInfo)),(P||P===0)&&(B.setAttribute("data-title",P),B.setAttribute("aria-label",P)),M.attr!==void 0&&B.setAttribute("data-attr",M.attr);var N=M.val;N!==void 0&&(typeof N=="function"&&(N=N(this.graphInfo)),B.setAttribute("data-val",N));var z=M.click;if(typeof z!="function")throw new Error("must provide button 'click' function in button config");B.addEventListener("click",function(w){M.click(D.graphInfo,w),D.updateActiveButton(w.currentTarget)}),B.setAttribute("data-toggle",M.toggle||!1),M.toggle&&g.select(B).classed("active",!0);var F=M.icon;return typeof F=="function"?B.appendChild(F()):B.appendChild(this.createIcon(F||x.question)),B.setAttribute("data-gravity",M.gravity||"n"),B},T.createIcon=function(M){var D=s(M.height)?Number(M.height):M.ascent-M.descent,B="http://www.w3.org/2000/svg",P;if(M.path){P=document.createElementNS(B,"svg"),P.setAttribute("viewBox",[0,0,M.width,D].join(" ")),P.setAttribute("class","icon");var N=document.createElementNS(B,"path");N.setAttribute("d",M.path),M.transform?N.setAttribute("transform",M.transform):M.ascent!==void 0&&N.setAttribute("transform","matrix(1 0 0 -1 0 "+M.ascent+")"),P.appendChild(N)}if(M.svg){var z=y.parseFromString(M.svg,"application/xml");P=z.childNodes[0]}return P.setAttribute("height","1em"),P.setAttribute("width","1em"),P},T.updateActiveButton=function(M){var D=this.graphInfo._fullLayout,B=M!==void 0?M.getAttribute("data-attr"):null;this.buttonElements.forEach(function(P){var N=P.getAttribute("data-val")||!0,z=P.getAttribute("data-attr"),F=P.getAttribute("data-toggle")==="true",w=g.select(P),L=function(W,Ce){var he=D.modebar,le=W.querySelector(".icon path");le&&(Ce||W.matches(":hover")?le.style.fill=he.activecolor:le.style.fill=he.color)};if(F){if(z===B){var O=!w.classed("active");w.classed("active",O),L(P,O)}}else{var H=z===null?z:h.nestedProperty(D,z).get();w.classed("active",H===N),L(P,H===N)}})},T.hasButtons=function(M){var D=this.buttons;if(!D||M.length!==D.length)return!1;for(var B=0;B<M.length;++B){if(M[B].length!==D[B].length)return!1;for(var P=0;P<M[B].length;P++)if(M[B][P].name!==D[B][P].name)return!1}return!0};function u(M){return M+" (v"+v+")"}T.getLogo=function(){var M=this.createGroup(),D=document.createElement("a");return D.href="https://plotly.com/",D.target="_blank",D.setAttribute("data-title",u(h._(this.graphInfo,"Produced with Plotly.js"))),D.className="modebar-btn plotlyjsicon modebar-btn--logo",D.appendChild(this.createIcon(x.newplotlylogo)),M.appendChild(D),M},T.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},T.destroy=function(){h.removeElement(this.container.querySelector(".modebar"))};function k(M,D){var B=M._fullLayout,P=new b({graphInfo:M,container:B._modebardiv.node(),buttons:D});return B._privateplot&&g.select(P.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),P}ue.exports=k}),Z0=t((me,ue)=>{var g=N1(),s=Dp(),h=l1(),x=e0().isUnifiedHover,v=M1(),y=b0(),b=v0().DRAW_MODES,T=Z().extendDeep;ue.exports=function(N){var z=N._fullLayout,F=N._context,w=z._modeBar;if(!F.displayModeBar&&!F.watermark){w&&(w.destroy(),delete z._modeBar);return}if(!Array.isArray(F.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(F.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var L=F.modeBarButtons,O;Array.isArray(L)&&L.length?O=P(L):!F.displayModeBar&&F.watermark?O=[]:O=u(N),w?w.update(N,O):z._modeBar=v(N,O)};function u(N){var z=N._fullLayout,F=N._fullData,w=N._context;function L(q,ae){if(typeof ae=="string"){if(ae.toLowerCase()===q.toLowerCase())return!0}else{var ve=ae.name,Te=ae._cat||ae.name;if(ve===q||Te===q.toLowerCase())return!0}return!1}var O=z.modebar.add;typeof O=="string"&&(O=[O]);var H=z.modebar.remove;typeof H=="string"&&(H=[H]);var W=w.modeBarButtonsToAdd.concat(O.filter(function(q){for(var ae=0;ae<w.modeBarButtonsToRemove.length;ae++)if(L(q,w.modeBarButtonsToRemove[ae]))return!1;return!0})),Ce=w.modeBarButtonsToRemove.concat(H.filter(function(q){for(var ae=0;ae<w.modeBarButtonsToAdd.length;ae++)if(L(q,w.modeBarButtonsToAdd[ae]))return!1;return!0})),he=z._has("cartesian"),le=z._has("gl3d"),Y=z._has("geo"),Re=z._has("pie"),fe=z._has("funnelarea"),xe=z._has("ternary"),ge=z._has("mapbox"),ye=z._has("map"),Ae=z._has("polar"),Le=z._has("smith"),ce=z._has("sankey"),ke=k(z),Pe=x(z.hovermode),tt=[];function Ke(q){if(q.length){for(var ae=[],ve=0;ve<q.length;ve++){for(var Te=q[ve],et=y[Te],bt=et.name.toLowerCase(),dr=(et._cat||et.name).toLowerCase(),Ol=!1,Xl=0;Xl<Ce.length;Xl++){var Pp=Ce[Xl].toLowerCase();if(Pp===bt||Pp===dr){Ol=!0;break}}Ol||ae.push(y[Te])}tt.push(ae)}}var nt=["toImage"];w.showEditInChartStudio?nt.push("editInChartStudio"):w.showSendToCloud&&nt.push("sendDataToCloud"),Ke(nt);var yi=[],Ei=[],vs=[],Se=[];(he||Re||fe||xe)+Y+le+ge+ye+Ae+Le>1?(Ei=["toggleHover"],vs=["resetViews"]):Y?(yi=["zoomInGeo","zoomOutGeo"],Ei=["hoverClosestGeo"],vs=["resetGeo"]):le?(Ei=["hoverClosest3d"],vs=["resetCameraDefault3d","resetCameraLastSave3d"]):ge?(yi=["zoomInMapbox","zoomOutMapbox"],Ei=["toggleHover"],vs=["resetViewMapbox"]):ye?(yi=["zoomInMap","zoomOutMap"],Ei=["toggleHover"],vs=["resetViewMap"]):Re?Ei=["hoverClosestPie"]:ce?(Ei=["hoverClosestCartesian","hoverCompareCartesian"],vs=["resetViewSankey"]):Ei=["toggleHover"],he&&Ei.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(D(F)||Pe)&&(Ei=[]),he&&!ke&&(yi=["zoomIn2d","zoomOut2d","autoScale2d"],vs[0]!=="resetViews"&&(vs=["resetScale2d"])),le?Se=["zoom3d","pan3d","orbitRotation","tableRotation"]:he&&!ke||xe?Se=["zoom2d","pan2d"]:ge||ye||Y?Se=["pan2d"]:Ae&&(Se=["zoom2d"]),M(F)&&Se.push("select2d","lasso2d");var Ee=[],X=function(q){Ee.indexOf(q)===-1&&Ei.indexOf(q)!==-1&&Ee.push(q)};if(Array.isArray(W)){for(var Oe=[],Qe=0;Qe<W.length;Qe++){var pe=W[Qe];typeof pe=="string"?(pe=pe.toLowerCase(),b.indexOf(pe)!==-1?(z._has("mapbox")||z._has("map")||z._has("cartesian"))&&Se.push(pe):pe==="togglespikelines"?X("toggleSpikelines"):pe==="togglehover"?X("toggleHover"):pe==="hovercompare"?X("hoverCompareCartesian"):pe==="hoverclosest"?(X("hoverClosestCartesian"),X("hoverClosestGeo"),X("hoverClosest3d"),X("hoverClosestPie")):pe==="v1hovermode"&&(X("hoverClosestCartesian"),X("hoverCompareCartesian"),X("hoverClosestGeo"),X("hoverClosest3d"),X("hoverClosestPie"))):Oe.push(pe)}W=Oe}return Ke(Se),Ke(yi.concat(vs)),Ke(Ee),B(tt,W)}function k(N){for(var z=g.list({_fullLayout:N},null,!0),F=0;F<z.length;F++){var w=z[F].modebardisable;if(!z[F].fixedrange&&w!=="autoscale+zoominout"&&w!=="zoominout+autoscale")return!1}return!0}function M(N){for(var z=!1,F=0;F<N.length&&!z;F++){var w=N[F];!w._module||!w._module.selectPoints||(h.traceIs(w,"scatter-like")?(s.hasMarkers(w)||s.hasText(w))&&(z=!0):h.traceIs(w,"box-violin")?(w.boxpoints==="all"||w.points==="all")&&(z=!0):z=!0)}return z}function D(N){for(var z=0;z<N.length;z++)if(!h.traceIs(N[z],"noHover"))return!1;return!0}function B(N,z){if(z.length)if(Array.isArray(z[0]))for(var F=0;F<z.length;F++)N.push(z[F]);else N.push(z);return N}function P(N){for(var z=T([],N),F=0;F<z.length;F++)for(var w=z[F],L=0;L<w.length;L++){var O=w[L];if(typeof O=="string")if(y[O]!==void 0)z[F][L]=y[O];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return z}}),Rm=t((me,ue)=>{ue.exports={moduleType:"component",name:"modebar",layoutAttributes:Cm(),supplyLayoutDefaults:$0(),manage:Z0()}}),Ag=t((me,ue)=>{var g=Q1().FROM_BL;ue.exports=function(s,h,x){x===void 0&&(x=g[s.constraintoward||"center"]);var v=[s.r2l(s.range[0]),s.r2l(s.range[1])],y=v[0]+(v[1]-v[0])*x;s.range=s._input.range=[s.l2r(y+(v[0]-y)*h),s.l2r(y+(v[1]-y)*h)],s.setScale()}}),rg=t(me=>{var ue=Z(),g=ym(),s=N1().id2name,h=jp(),x=Ag(),v=U0(),y=C().ALMOST_EQUAL,b=Q1().FROM_BL;me.handleDefaults=function(N,z,F){var w=F.axIds,L=F.axHasImage,O=z._axisConstraintGroups=[],H=z._axisMatchGroups=[],W,Ce,he,le,Y,Re,fe,xe;for(W=0;W<w.length;W++)le=s(w[W]),Y=N[le],Re=z[le],T(Y,Re,{axIds:w,layoutOut:z,hasImage:L[le]});function ge(nt,yi){for(W=0;W<nt.length;W++){Ce=nt[W];for(he in Ce)z[s(he)][yi]=Ce}}for(ge(H,"_matchGroup"),W=0;W<O.length;W++){Ce=O[W];for(he in Ce)if(Re=z[s(he)],Re.fixedrange){for(var ye in Ce){var Ae=s(ye);(N[Ae]||{}).fixedrange===!1&&ue.warn("fixedrange was specified as false for axis "+Ae+" but was overridden because another axis in its constraint group has fixedrange true"),z[Ae].fixedrange=!0}break}}for(W=0;W<O.length;){Ce=O[W];for(he in Ce){Re=z[s(he)],Re._matchGroup&&Object.keys(Re._matchGroup).length===Object.keys(Ce).length&&(O.splice(W,1),W--);break}W++}ge(O,"_constraintGroup");var Le=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],ce=!1,ke=!1;function Pe(){xe=Re[fe],fe==="rangebreaks"&&(ke=Re._hasDayOfWeekBreaks)}for(W=0;W<H.length;W++){Ce=H[W];for(var tt=0;tt<Le.length;tt++){fe=Le[tt],xe=null;var Ke;for(he in Ce)if(le=s(he),Y=N[le],Re=z[le],fe in Re){if(!Re.matches&&(Ke=Re,fe in Y)){Pe();break}xe===null&&fe in Y&&Pe()}if(fe==="range"&&xe&&Y.range&&Y.range.length===2&&Y.range[0]!==null&&Y.range[1]!==null&&(ce=!0),fe==="autorange"&&xe===null&&ce&&(xe=!1),xe===null&&fe in Ke&&(xe=Ke[fe]),xe!==null)for(he in Ce)Re=z[s(he)],Re[fe]=fe==="range"?xe.slice():xe,fe==="rangebreaks"&&(Re._hasDayOfWeekBreaks=ke,v(Re,z))}}};function T(N,z,F){var w=F.axIds,L=F.layoutOut,O=F.hasImage,H=L._axisConstraintGroups,W=L._axisMatchGroups,Ce=z._id,he=Ce.charAt(0),le=((L._splomAxes||{})[he]||{})[Ce]||{},Y=z._id,Re=Y.charAt(0)==="x";z._matchGroup=null,z._constraintGroup=null;function fe(Se,Ee){return ue.coerce(N,z,h,Se,Ee)}fe("constrain",O?"domain":"range"),ue.coerce(N,z,{constraintoward:{valType:"enumerated",values:Re?["left","center","right"]:["bottom","middle","top"],dflt:Re?"center":"middle"}},"constraintoward");var xe=z.type,ge,ye,Ae=[];for(ge=0;ge<w.length;ge++)if(ye=w[ge],ye!==Y){var Le=L[s(ye)];Le.type===xe&&Ae.push(ye)}var ce=k(H,Y);if(ce){var ke=[];for(ge=0;ge<Ae.length;ge++)ye=Ae[ge],ce[ye]||ke.push(ye);Ae=ke}var Pe=Ae.length,tt,Ke;Pe&&(N.matches||le.matches)&&(tt=ue.coerce(N,z,{matches:{valType:"enumerated",values:Ae,dflt:Ae.indexOf(le.matches)!==-1?le.matches:void 0}},"matches"));var nt=O&&!Re?z.anchor:void 0;if(Pe&&!tt&&(N.scaleanchor||nt)&&(Ke=ue.coerce(N,z,{scaleanchor:{valType:"enumerated",values:Ae.concat([!1])}},"scaleanchor",nt)),tt){z._matchGroup=M(W,Y,tt,1);var yi=L[s(tt)],Ei=u(L,z)/u(L,yi);Re!==(tt.charAt(0)==="x")&&(Ei=(Re?"x":"y")+Ei),M(H,Y,tt,Ei)}else N.matches&&w.indexOf(N.matches)!==-1&&ue.warn("ignored "+z._name+'.matches: "'+N.matches+'" to avoid an infinite loop');if(Ke){var vs=fe("scaleratio");vs||(vs=z.scaleratio=1),M(H,Y,Ke,vs)}else N.scaleanchor&&w.indexOf(N.scaleanchor)!==-1&&ue.warn("ignored "+z._name+'.scaleanchor: "'+N.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function u(N,z){var F=z.domain;return F||(F=N[s(z.overlaying)].domain),F[1]-F[0]}function k(N,z){for(var F=0;F<N.length;F++)if(N[F][z])return N[F];return null}function M(N,z,F,w){var L,O,H,W,Ce,he=k(N,z);he===null?(he={},he[z]=1,Ce=N.length,N.push(he)):Ce=N.indexOf(he);var le=Object.keys(he);for(L=0;L<N.length;L++)if(H=N[L],L!==Ce&&H[F]){var Y=H[F];for(O=0;O<le.length;O++)W=le[O],H[W]=D(Y,D(w,he[W]));N.splice(Ce,1);return}if(w!==1)for(O=0;O<le.length;O++){var Re=le[O];he[Re]=D(w,he[Re])}he[F]=1}function D(N,z){var F="",w="",L,O;typeof N=="string"&&(F=N.match(/^[xy]*/)[0],L=F.length,N=+N.substr(L)),typeof z=="string"&&(w=z.match(/^[xy]*/)[0],O=w.length,z=+z.substr(O));var H=N*z;return!L&&!O?H:!L||!O||F.charAt(0)===w.charAt(0)?F+w+N*z:L===O?H:(L>O?F.substr(O):w.substr(L))+H}function B(N,z){for(var F=z._size,w=F.h/F.w,L={},O=Object.keys(N),H=0;H<O.length;H++){var W=O[H],Ce=N[W];if(typeof Ce=="string"){var he=Ce.match(/^[xy]*/)[0],le=he.length;Ce=+Ce.substr(le);for(var Y=he.charAt(0)==="y"?w:1/w,Re=0;Re<le;Re++)Ce*=Y}L[W]=Ce}return L}me.enforce=function(N){var z=N._fullLayout,F=z._axisConstraintGroups||[],w,L,O,H,W,Ce,he,le;for(w=0;w<F.length;w++){O=B(F[w],z);var Y=Object.keys(O),Re=1/0,fe=0,xe=1/0,ge={},ye={},Ae=!1;for(L=0;L<Y.length;L++)H=Y[L],ye[H]=W=z[s(H)],W._inputDomain?W.domain=W._inputDomain.slice():W._inputDomain=W.domain.slice(),W._inputRange||(W._inputRange=W.range.slice()),W.setScale(),ge[H]=Ce=Math.abs(W._m)/O[H],Re=Math.min(Re,Ce),(W.constrain==="domain"||!W._constraintShrinkable)&&(xe=Math.min(xe,Ce)),delete W._constraintShrinkable,fe=Math.max(fe,Ce),W.constrain==="domain"&&(Ae=!0);if(!(Re>y*fe&&!Ae)){for(L=0;L<Y.length;L++)if(H=Y[L],Ce=ge[H],W=ye[H],he=W.constrain,Ce!==xe||he==="domain")if(le=Ce/xe,he==="range")x(W,le);else{var Le=W._inputDomain,ce=(W.domain[1]-W.domain[0])/(Le[1]-Le[0]),ke=(W.r2l(W.range[1])-W.r2l(W.range[0]))/(W.r2l(W._inputRange[1])-W.r2l(W._inputRange[0]));if(le/=ce,le*ke<1){W.domain=W._input.domain=Le.slice(),x(W,le);continue}if(ke<1&&(W.range=W._input.range=W._inputRange.slice(),le*=ke),W.autorange){var Pe=W.r2l(W.range[0]),tt=W.r2l(W.range[1]),Ke=(Pe+tt)/2,nt=Ke,yi=Ke,Ei=Math.abs(tt-Ke),vs=Ke-Ei*le*1.0001,Se=Ke+Ei*le*1.0001,Ee=g.makePadFn(z,W,0),X=g.makePadFn(z,W,1);P(W,le);var Oe=Math.abs(W._m),Qe=g.concatExtremes(N,W),pe=Qe.min,q=Qe.max,ae,ve;for(ve=0;ve<pe.length;ve++)ae=pe[ve].val-Ee(pe[ve])/Oe,ae>vs&&ae<nt&&(nt=ae);for(ve=0;ve<q.length;ve++)ae=q[ve].val+X(q[ve])/Oe,ae<Se&&ae>yi&&(yi=ae);var Te=(yi-nt)/(2*Ei);le/=Te,nt=W.l2r(nt),yi=W.l2r(yi),W.range=W._input.range=Pe<tt?[nt,yi]:[yi,nt]}P(W,le)}}}},me.getAxisGroup=function(N,z){for(var F=N._axisMatchGroups,w=0;w<F.length;w++){var L=F[w];if(L[z])return"g"+w}return z},me.clean=function(N,z){if(z._inputDomain){for(var F=!1,w=z._id,L=N._fullLayout._axisConstraintGroups,O=0;O<L.length;O++)if(L[O][w]){F=!0;break}(!F||z.constrain!=="domain")&&(z._input.domain=z.domain=z._inputDomain,delete z._inputDomain)}};function P(N,z){var F=N._inputDomain,w=b[N.constraintoward],L=F[0]+(F[1]-F[0])*w;N.domain=N._input.domain=[L+(F[0]-L)/z,L+(F[1]-L)/z],N.setScale()}}),C1=t(me=>{var ue=c(),g=l1(),s=vg(),h=Z(),x=kg(),v=Qv(),y=_r(),b=D0(),T=O0(),u=Rm(),k=mm(),M=Q1(),D=rg(),B=D.enforce,P=D.clean,N=ym().doAutoRange,z="start",F="middle",w="end",L=m1().zindexSeparator;me.layoutStyles=function(ce){return h.syncOrAsync([s.doAutoMargin,H],ce)};function O(ce,ke,Pe){for(var tt=0;tt<Pe.length;tt++){var Ke=Pe[tt][0],nt=Pe[tt][1];if(!(Ke[0]>=ce[1]||Ke[1]<=ce[0])&&nt[0]<ke[1]&&nt[1]>ke[0])return!0}return!1}function H(ce){var ke=ce._fullLayout,Pe=ke._size,tt=Pe.p,Ke=k.list(ce,"",!0),nt,yi,Ei,vs,Se,Ee;if(ke._paperdiv.style({width:ce._context.responsive&&ke.autosize&&!ce._context._hasZeroWidth&&!ce.layout.width?"100%":ke.width+"px",height:ce._context.responsive&&ke.autosize&&!ce._context._hasZeroHeight&&!ce.layout.height?"100%":ke.height+"px"}).selectAll(".main-svg").call(b.setSize,ke.width,ke.height),ce._context.setBackground(ce,ke.paper_bgcolor),me.drawMainTitle(ce),u.manage(ce),!ke._has("cartesian"))return s.previousPromises(ce);function X(Be,ft,mn){var Bl=Be._lw/2;if(Be._id.charAt(0)==="x"){if(ft){if(mn==="top")return ft._offset-tt-Bl}else return Pe.t+Pe.h*(1-(Be.position||0))+Bl%1;return ft._offset+ft._length+tt+Bl}if(ft){if(mn==="right")return ft._offset+ft._length+tt+Bl}else return Pe.l+Pe.w*(Be.position||0)+Bl%1;return ft._offset-tt-Bl}for(nt=0;nt<Ke.length;nt++){vs=Ke[nt];var Oe=vs._anchorAxis;vs._linepositions={},vs._lw=b.crispRound(ce,vs.linewidth,1),vs._mainLinePosition=X(vs,Oe,vs.side),vs._mainMirrorPosition=vs.mirror&&Oe?X(vs,Oe,M.OPPOSITE_SIDE[vs.side]):null}var Qe=[],pe=[],q=[],ae=y.opacity(ke.paper_bgcolor)===1&&y.opacity(ke.plot_bgcolor)===1&&ke.paper_bgcolor===ke.plot_bgcolor;for(yi in ke._plots)if(Ei=ke._plots[yi],Ei.mainplot)Ei.bg&&Ei.bg.remove(),Ei.bg=void 0;else{var ve=Ei.xaxis.domain,Te=Ei.yaxis.domain,et=Ei.plotgroup;if(O(ve,Te,q)&&yi.indexOf(L)===-1){var bt=et.node(),dr=Ei.bg=h.ensureSingle(et,"rect","bg");bt.insertBefore(dr.node(),bt.childNodes[0]),pe.push(yi)}else et.select("rect.bg").remove(),q.push([ve,Te]),ae||(Qe.push(yi),pe.push(yi))}var Ol=ke._bgLayer.selectAll(".bg").data(Qe);for(Ol.enter().append("rect").classed("bg",!0),Ol.exit().remove(),Ol.each(function(Be){ke._plots[Be].bg=ue.select(this)}),nt=0;nt<pe.length;nt++)Ei=ke._plots[pe[nt]],Se=Ei.xaxis,Ee=Ei.yaxis,Ei.bg&&Se._offset!==void 0&&Ee._offset!==void 0&&Ei.bg.call(b.setRect,Se._offset-tt,Ee._offset-tt,Se._length+2*tt,Ee._length+2*tt).call(y.fill,ke.plot_bgcolor).style("stroke-width",0);if(!ke._hasOnlyLargeSploms)for(yi in ke._plots){Ei=ke._plots[yi],Se=Ei.xaxis,Ee=Ei.yaxis;var Xl=Ei.clipId="clip"+ke._uid+yi+"plot",Pp=h.ensureSingleById(ke._clips,"clipPath",Xl,function(Be){Be.classed("plotclip",!0).append("rect")});Ei.clipRect=Pp.select("rect").attr({width:Se._length,height:Ee._length}),b.setTranslate(Ei.plot,Se._offset,Ee._offset);var t0,Wp;Ei._hasClipOnAxisFalse?(t0=null,Wp=Xl):(t0=Xl,Wp=null),b.setClipUrl(Ei.plot,t0,ce),Ei.layerClipId=Wp}var $p,Lo,kl,dt,yp,Bp,Jp,m0,s0,y0,M0,T0,G0;function h0(Be){return"M"+$p+","+Be+"H"+Lo}function W0(Be){return"M"+Se._offset+","+Be+"h"+Se._length}function rm(Be){return"M"+Be+","+m0+"V"+Jp}function V0(Be){return Ee._shift!==void 0&&(Be+=Ee._shift),"M"+Be+","+Ee._offset+"v"+Ee._length}function um(Be,ft,mn){if(!Be.showline||yi!==Be._mainSubplot)return"";if(!Be._anchorAxis)return mn(Be._mainLinePosition);var Bl=ft(Be._mainLinePosition);return Be.mirror&&(Bl+=ft(Be._mainMirrorPosition)),Bl}for(yi in ke._plots){Ei=ke._plots[yi],Se=Ei.xaxis,Ee=Ei.yaxis;var Uo="M0,0";W(Se,yi)&&(yp=he(Se,"left",Ee,Ke),$p=Se._offset-(yp?tt+yp:0),Bp=he(Se,"right",Ee,Ke),Lo=Se._offset+Se._length+(Bp?tt+Bp:0),kl=X(Se,Ee,"bottom"),dt=X(Se,Ee,"top"),G0=!Se._anchorAxis||yi!==Se._mainSubplot,G0&&(Se.mirror==="allticks"||Se.mirror==="all")&&(Se._linepositions[yi]=[kl,dt]),Uo=um(Se,h0,W0),G0&&Se.showline&&(Se.mirror==="all"||Se.mirror==="allticks")&&(Uo+=h0(kl)+h0(dt)),Ei.xlines.style("stroke-width",Se._lw+"px").call(y.stroke,Se.showline?Se.linecolor:"rgba(0,0,0,0)")),Ei.xlines.attr("d",Uo);var Tp="M0,0";W(Ee,yi)&&(M0=he(Ee,"bottom",Se,Ke),Jp=Ee._offset+Ee._length+(M0?tt:0),T0=he(Ee,"top",Se,Ke),m0=Ee._offset-(T0?tt:0),s0=X(Ee,Se,"left"),y0=X(Ee,Se,"right"),G0=!Ee._anchorAxis||yi!==Ee._mainSubplot,G0&&(Ee.mirror==="allticks"||Ee.mirror==="all")&&(Ee._linepositions[yi]=[s0,y0]),Tp=um(Ee,rm,V0),G0&&Ee.showline&&(Ee.mirror==="all"||Ee.mirror==="allticks")&&(Tp+=rm(s0)+rm(y0)),Ei.ylines.style("stroke-width",Ee._lw+"px").call(y.stroke,Ee.showline?Ee.linecolor:"rgba(0,0,0,0)")),Ei.ylines.attr("d",Tp)}return k.makeClipPaths(ce),s.previousPromises(ce)}function W(ce,ke){return(ce.ticks||ce.showline)&&(ke===ce._mainSubplot||ce.mirror==="all"||ce.mirror==="allticks")}function Ce(ce,ke,Pe){if(!Pe.showline||!Pe._lw)return!1;if(Pe.mirror==="all"||Pe.mirror==="allticks")return!0;var tt=Pe._anchorAxis;if(!tt)return!1;var Ke=M.FROM_BL[ke];return Pe.side===ke?tt.domain[Ke]===ce.domain[Ke]:Pe.mirror&&tt.domain[1-Ke]===ce.domain[1-Ke]}function he(ce,ke,Pe,tt){if(Ce(ce,ke,Pe))return Pe._lw;for(var Ke=0;Ke<tt.length;Ke++){var nt=tt[Ke];if(nt._mainAxis===Pe._mainAxis&&Ce(ce,ke,nt))return nt._lw}return 0}me.drawMainTitle=function(ce){var ke=ce._fullLayout.title,Pe=ce._fullLayout,tt=Ae(Pe),Ke=Le(Pe),nt=ge(Pe,Ke),yi=xe(Pe,tt);if(T.draw(ce,"gtitle",{propContainer:Pe,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:Pe._dfltTitle.plot,subtitlePlaceholder:Pe._dfltTitle.subtitle,attributes:{x:yi,y:nt,"text-anchor":tt,dy:Ke}}),ke.text&&ke.automargin){var Ei=ue.select(ce).selectAll(".gtitle"),vs=b.bBox(ue.select(ce).selectAll(".g-gtitle").node()).height,Se=Re(ce,ke,vs);if(Se>0){fe(ce,nt,Se,vs),Ei.attr({x:yi,y:nt,"text-anchor":tt,dy:ye(ke.yanchor)}).call(x.positionText,yi,nt);var Ee=(ke.text.match(x.BR_TAG_ALL)||[]).length;if(Ee){var X=M.LINE_SPACING*Ee+M.MID_SHIFT;ke.y===0&&(X=-X),Ei.selectAll(".line").each(function(){var ae=+this.getAttribute("dy").slice(0,-2)-X+"em";this.setAttribute("dy",ae)})}var Oe=ue.select(ce).selectAll(".gtitle-subtitle");if(Oe.node()){var Qe=Ei.node().getBBox(),pe=Qe.y+Qe.height,q=pe+T.SUBTITLE_PADDING_EM*ke.subtitle.font.size;Oe.attr({x:yi,y:q,"text-anchor":tt,dy:ye(ke.yanchor)}).call(x.positionText,yi,q)}}}};function le(ce,ke,Pe,tt,Ke){var nt=ke.yref==="paper"?ce._fullLayout._size.h:ce._fullLayout.height,yi=h.isTopAnchor(ke)?tt:tt-Ke,Ei=Pe==="b"?nt-yi:yi;return h.isTopAnchor(ke)&&Pe==="t"||h.isBottomAnchor(ke)&&Pe==="b"?!1:Ei<Ke}function Y(ce,ke,Pe,tt,Ke){var nt=0;return Pe==="middle"&&(nt+=Ke/2),ce==="t"?(Pe==="top"&&(nt+=Ke),nt+=tt-ke*tt):(Pe==="bottom"&&(nt+=Ke),nt+=ke*tt),nt}function Re(ce,ke,Pe){var tt=ke.y,Ke=ke.yanchor,nt=tt>.5?"t":"b",yi=ce._fullLayout.margin[nt],Ei=0;return ke.yref==="paper"?Ei=Pe+ke.pad.t+ke.pad.b:ke.yref==="container"&&(Ei=Y(nt,tt,Ke,ce._fullLayout.height,Pe)+ke.pad.t+ke.pad.b),Ei>yi?Ei:0}function fe(ce,ke,Pe,tt){var Ke="title.automargin",nt=ce._fullLayout.title,yi=nt.y>.5?"t":"b",Ei={x:nt.x,y:nt.y,t:0,b:0},vs={};nt.yref==="paper"&&le(ce,nt,yi,ke,tt)?Ei[yi]=Pe:nt.yref==="container"&&(vs[yi]=Pe,ce._fullLayout._reservedMargin[Ke]=vs),s.allowAutoMargin(ce,Ke),s.autoMargin(ce,Ke,Ei)}function xe(ce,ke){var Pe=ce.title,tt=ce._size,Ke=0;switch(ke===z?Ke=Pe.pad.l:ke===w&&(Ke=-Pe.pad.r),Pe.xref){case"paper":return tt.l+tt.w*Pe.x+Ke;case"container":default:return ce.width*Pe.x+Ke}}function ge(ce,ke){var Pe=ce.title,tt=ce._size,Ke=0;if(ke==="0em"||!ke?Ke=-Pe.pad.b:ke===M.CAP_SHIFT+"em"&&(Ke=Pe.pad.t),Pe.y==="auto")return tt.t/2;switch(Pe.yref){case"paper":return tt.t+tt.h-tt.h*Pe.y+Ke;case"container":default:return ce.height-ce.height*Pe.y+Ke}}function ye(ce){return ce==="top"?M.CAP_SHIFT+.3+"em":ce==="bottom"?"-0.3em":M.MID_SHIFT+"em"}function Ae(ce){var ke=ce.title,Pe=F;return h.isRightAnchor(ke)?Pe=w:h.isLeftAnchor(ke)&&(Pe=z),Pe}function Le(ce){var ke=ce.title,Pe="0em";return h.isTopAnchor(ke)?Pe=M.CAP_SHIFT+"em":h.isMiddleAnchor(ke)&&(Pe=M.MID_SHIFT+"em"),Pe}me.doTraceStyle=function(ce){var ke=ce.calcdata,Pe=[],tt;for(tt=0;tt<ke.length;tt++){var Ke=ke[tt],nt=Ke[0]||{},yi=nt.trace||{},Ei=yi._module||{},vs=Ei.arraysToCalcdata;vs&&vs(Ke,yi);var Se=Ei.editStyle;Se&&Pe.push({fn:Se,cd0:nt})}if(Pe.length){for(tt=0;tt<Pe.length;tt++){var Ee=Pe[tt];Ee.fn(ce,Ee.cd0)}v(ce),me.redrawReglTraces(ce)}return s.style(ce),g.getComponentMethod("legend","draw")(ce),s.previousPromises(ce)},me.doColorBars=function(ce){return g.getComponentMethod("colorbar","draw")(ce),s.previousPromises(ce)},me.layoutReplot=function(ce){var ke=ce.layout;return ce.layout=void 0,g.call("_doPlot",ce,"",ke)},me.doLegend=function(ce){return g.getComponentMethod("legend","draw")(ce),s.previousPromises(ce)},me.doTicksRelayout=function(ce){return k.draw(ce,"redraw"),ce._fullLayout._hasOnlyLargeSploms&&(g.subplotsRegistry.splom.updateGrid(ce),v(ce),me.redrawReglTraces(ce)),me.drawMainTitle(ce),s.previousPromises(ce)},me.doModeBar=function(ce){var ke=ce._fullLayout;u.manage(ce);for(var Pe=0;Pe<ke._basePlotModules.length;Pe++){var tt=ke._basePlotModules[Pe].updateFx;tt&&tt(ce)}return s.previousPromises(ce)},me.doCamera=function(ce){for(var ke=ce._fullLayout,Pe=ke._subplots.gl3d,tt=0;tt<Pe.length;tt++){var Ke=ke[Pe[tt]],nt=Ke._scene;nt.setViewport(Ke)}},me.drawData=function(ce){var ke=ce._fullLayout;v(ce);for(var Pe=ke._basePlotModules,tt=0;tt<Pe.length;tt++)Pe[tt].plot(ce);return me.redrawReglTraces(ce),s.style(ce),g.getComponentMethod("selections","draw")(ce),g.getComponentMethod("shapes","draw")(ce),g.getComponentMethod("annotations","draw")(ce),g.getComponentMethod("images","draw")(ce),ke._replotting=!1,s.previousPromises(ce)},me.redrawReglTraces=function(ce){var ke=ce._fullLayout;if(ke._has("regl")){var Pe=ce._fullData,tt=[],Ke=[],nt,yi;for(ke._hasOnlyLargeSploms&&ke._splomGrid.draw(),nt=0;nt<Pe.length;nt++){var Ei=Pe[nt];Ei.visible===!0&&Ei._length!==0&&(Ei.type==="splom"?ke._splomScenes[Ei.uid].draw():Ei.type==="scattergl"?h.pushUnique(tt,Ei.xaxis+Ei.yaxis):Ei.type==="scatterpolargl"&&h.pushUnique(Ke,Ei.subplot))}for(nt=0;nt<tt.length;nt++)yi=ke._plots[tt[nt]],yi._scene&&yi._scene.draw();for(nt=0;nt<Ke.length;nt++)yi=ke[Ke[nt]]._subplot,yi._scene&&yi._scene.draw()}},me.doAutoRangeAndConstraints=function(ce){for(var ke=k.list(ce,"",!0),Pe,tt={},Ke=0;Ke<ke.length;Ke++)if(Pe=ke[Ke],!tt[Pe._id]){tt[Pe._id]=1,P(ce,Pe),N(ce,Pe);var nt=Pe._matchGroup;if(nt)for(var yi in nt){var Ei=k.getFromId(ce,yi);N(ce,Ei,Pe.range),tt[yi]=1}}B(ce)},me.finalDraw=function(ce){g.getComponentMethod("rangeslider","draw")(ce),g.getComponentMethod("rangeselector","draw")(ce)},me.drawMarginPushers=function(ce){g.getComponentMethod("legend","draw")(ce),g.getComponentMethod("rangeselector","draw")(ce),g.getComponentMethod("sliders","draw")(ce),g.getComponentMethod("updatemenus","draw")(ce),g.getComponentMethod("colorbar","draw")(ce)}}),Gv=t((me,ue)=>{var g=dv().readPaths,s=De(),h=H1().clearOutlineControllers,x=_r(),v=D0(),y=Nm().arrayEditor,b=de(),T=b.getPathString;ue.exports={draw:u,drawOne:M,activateLastSelection:P};function u(z){var F=z._fullLayout;h(z),F._selectionLayer.selectAll("path").remove();for(var w in F._plots){var L=F._plots[w].selectionLayer;L&&L.selectAll("path").remove()}for(var O=0;O<F.selections.length;O++)M(z,O)}function k(z){return z._context.editSelection}function M(z,F){z._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+F+'"]').remove();var w=b.makeSelectionsOptionsAndPlotinfo(z,F),L=w.options,O=w.plotinfo;if(!L._input)return;H(z._fullLayout._selectionLayer);function H(W){var Ce=T(z,L),he={"data-index":F,"fill-rule":"evenodd",d:Ce},le=L.opacity,Y="rgba(0,0,0,0)",Re=L.line.color||x.contrast(z._fullLayout.plot_bgcolor),fe=L.line.width,xe=L.line.dash;fe||(fe=5,xe="solid");var ge=k(z)&&z._fullLayout._activeSelectionIndex===F;ge&&(Y=z._fullLayout.activeselection.fillcolor,le=z._fullLayout.activeselection.opacity);for(var ye=[],Ae=1;Ae>=0;Ae--){var Le=W.append("path").attr(he).style("opacity",Ae?.1:le).call(x.stroke,Re).call(x.fill,Y).call(v.dashLine,Ae?"solid":xe,Ae?4+fe:fe);if(D(Le,z,L),ge){var ce=y(z.layout,"selections",L);Le.style({cursor:"move"});var ke={element:Le.node(),plotinfo:O,gd:z,editHelpers:ce,isActiveSelection:!0},Pe=g(Ce,z);s(Pe,Le,ke)}else Le.style("pointer-events",Ae?"all":"none");ye[Ae]=Le}var tt=ye[0],Ke=ye[1];Ke.node().addEventListener("click",function(){return B(z,tt)})}}function D(z,F,w){var L=w.xref+w.yref;v.setClipUrl(z,"clip"+F._fullLayout._uid+L,F)}function B(z,F){if(k(z)){var w=F.node(),L=+w.getAttribute("data-index");if(L>=0){if(L===z._fullLayout._activeSelectionIndex){N(z);return}z._fullLayout._activeSelectionIndex=L,z._fullLayout._deactivateSelection=N,u(z)}}}function P(z){if(k(z)){var F=z._fullLayout.selections.length-1;z._fullLayout._activeSelectionIndex=F,z._fullLayout._deactivateSelection=N,u(z)}}function N(z){if(k(z)){var F=z._fullLayout._activeSelectionIndex;F>=0&&(h(z),delete z._fullLayout._activeSelectionIndex,u(z))}}}),av=t((me,ue)=>{function g(){var s,h=0,x=!1;function v(y,b){return s.list.push({type:y,data:b?JSON.parse(JSON.stringify(b)):void 0}),s}return s={list:[],segmentId:function(){return h++},checkIntersection:function(y,b){return v("check",{seg1:y,seg2:b})},segmentChop:function(y,b){return v("div_seg",{seg:y,pt:b}),v("chop",{seg:y,pt:b})},statusRemove:function(y){return v("pop_seg",{seg:y})},segmentUpdate:function(y){return v("seg_update",{seg:y})},segmentNew:function(y,b){return v("new_seg",{seg:y,primary:b})},segmentRemove:function(y){return v("rem_seg",{seg:y})},tempStatus:function(y,b,T){return v("temp_status",{seg:y,above:b,below:T})},rewind:function(y){return v("rewind",{seg:y})},status:function(y,b,T){return v("status",{seg:y,above:b,below:T})},vert:function(y){return y===x?s:(x=y,v("vert",{x:y}))},log:function(y){return typeof y!="string"&&(y=JSON.stringify(y,!1,"  ")),v("log",{txt:y})},reset:function(){return v("reset")},selected:function(y){return v("selected",{segs:y})},chainStart:function(y){return v("chain_start",{seg:y})},chainRemoveHead:function(y,b){return v("chain_rem_head",{index:y,pt:b})},chainRemoveTail:function(y,b){return v("chain_rem_tail",{index:y,pt:b})},chainNew:function(y,b){return v("chain_new",{pt1:y,pt2:b})},chainMatch:function(y){return v("chain_match",{index:y})},chainClose:function(y){return v("chain_close",{index:y})},chainAddHead:function(y,b){return v("chain_add_head",{index:y,pt:b})},chainAddTail:function(y,b){return v("chain_add_tail",{index:y,pt:b})},chainConnect:function(y,b){return v("chain_con",{index1:y,index2:b})},chainReverse:function(y){return v("chain_rev",{index:y})},chainJoin:function(y,b){return v("chain_join",{index1:y,index2:b})},done:function(){return v("done")}},s}ue.exports=g}),hg=t((me,ue)=>{function g(s){typeof s!="number"&&(s=1e-10);var h={epsilon:function(x){return typeof x=="number"&&(s=x),s},pointAboveOrOnLine:function(x,v,y){var b=v[0],T=v[1],u=y[0],k=y[1],M=x[0],D=x[1];return(u-b)*(D-T)-(k-T)*(M-b)>=-s},pointBetween:function(x,v,y){var b=x[1]-v[1],T=y[0]-v[0],u=x[0]-v[0],k=y[1]-v[1],M=u*T+b*k;if(M<s)return!1;var D=T*T+k*k;return!(M-D>-s)},pointsSameX:function(x,v){return Math.abs(x[0]-v[0])<s},pointsSameY:function(x,v){return Math.abs(x[1]-v[1])<s},pointsSame:function(x,v){return h.pointsSameX(x,v)&&h.pointsSameY(x,v)},pointsCompare:function(x,v){return h.pointsSameX(x,v)?h.pointsSameY(x,v)?0:x[1]<v[1]?-1:1:x[0]<v[0]?-1:1},pointsCollinear:function(x,v,y){var b=x[0]-v[0],T=x[1]-v[1],u=v[0]-y[0],k=v[1]-y[1];return Math.abs(b*k-u*T)<s},linesIntersect:function(x,v,y,b){var T=v[0]-x[0],u=v[1]-x[1],k=b[0]-y[0],M=b[1]-y[1],D=T*M-u*k;if(Math.abs(D)<s)return!1;var B=x[0]-y[0],P=x[1]-y[1],N=(k*P-M*B)/D,z=(T*P-u*B)/D,F={alongA:0,alongB:0,pt:[x[0]+N*T,x[1]+N*u]};return N<=-s?F.alongA=-2:N<s?F.alongA=-1:N-1<=-s?F.alongA=0:N-1<s?F.alongA=1:F.alongA=2,z<=-s?F.alongB=-2:z<s?F.alongB=-1:z-1<=-s?F.alongB=0:z-1<s?F.alongB=1:F.alongB=2,F},pointInsideRegion:function(x,v){for(var y=x[0],b=x[1],T=v[v.length-1][0],u=v[v.length-1][1],k=!1,M=0;M<v.length;M++){var D=v[M][0],B=v[M][1];B-b>s!=u-b>s&&(T-D)*(b-B)/(u-B)+D-y>s&&(k=!k),T=D,u=B}return k}};return h}ue.exports=g}),mv=t((me,ue)=>{var g={create:function(){var s={root:{root:!0,next:null},exists:function(h){return!(h===null||h===s.root)},isEmpty:function(){return s.root.next===null},getHead:function(){return s.root.next},insertBefore:function(h,x){for(var v=s.root,y=s.root.next;y!==null;){if(x(y)){h.prev=y.prev,h.next=y,y.prev.next=h,y.prev=h;return}v=y,y=y.next}v.next=h,h.prev=v,h.next=null},findTransition:function(h){for(var x=s.root,v=s.root.next;v!==null&&!h(v);)x=v,v=v.next;return{before:x===s.root?null:x,after:v,insert:function(y){return y.prev=x,y.next=v,x.next=y,v!==null&&(v.prev=y),y}}}};return s},node:function(s){return s.prev=null,s.next=null,s.remove=function(){s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.prev=null,s.next=null},s}};ue.exports=g}),Ng=t((me,ue)=>{var g=mv();function s(h,x,v){function y(F,w){return{id:v?v.segmentId():-1,start:F,end:w,myFill:{above:null,below:null},otherFill:null}}function b(F,w,L){return{id:v?v.segmentId():-1,start:F,end:w,myFill:{above:L.myFill.above,below:L.myFill.below},otherFill:null}}var T=g.create();function u(F,w,L,O,H,W){var Ce=x.pointsCompare(w,H);return Ce!==0?Ce:x.pointsSame(L,W)?0:F!==O?F?1:-1:x.pointAboveOrOnLine(L,O?H:W,O?W:H)?1:-1}function k(F,w){T.insertBefore(F,function(L){var O=u(F.isStart,F.pt,w,L.isStart,L.pt,L.other.pt);return O<0})}function M(F,w){var L=g.node({isStart:!0,pt:F.start,seg:F,primary:w,other:null,status:null});return k(L,F.end),L}function D(F,w,L){var O=g.node({isStart:!1,pt:w.end,seg:w,primary:L,other:F,status:null});F.other=O,k(O,F.pt)}function B(F,w){var L=M(F,w);return D(L,F,w),L}function P(F,w){v&&v.segmentChop(F.seg,w),F.other.remove(),F.seg.end=w,F.other.pt=w,k(F.other,F.pt)}function N(F,w){var L=b(w,F.seg.end,F.seg);return P(F,w),B(L,F.primary)}function z(F,w){var L=g.create();function O(Le,ce){var ke=Le.seg.start,Pe=Le.seg.end,tt=ce.seg.start,Ke=ce.seg.end;return x.pointsCollinear(ke,tt,Ke)?x.pointsCollinear(Pe,tt,Ke)||x.pointAboveOrOnLine(Pe,tt,Ke)?1:-1:x.pointAboveOrOnLine(ke,tt,Ke)?1:-1}function H(Le){return L.findTransition(function(ce){var ke=O(Le,ce.ev);return ke>0})}function W(Le,ce){var ke=Le.seg,Pe=ce.seg,tt=ke.start,Ke=ke.end,nt=Pe.start,yi=Pe.end;v&&v.checkIntersection(ke,Pe);var Ei=x.linesIntersect(tt,Ke,nt,yi);if(Ei===!1){if(!x.pointsCollinear(tt,Ke,nt)||x.pointsSame(tt,yi)||x.pointsSame(Ke,nt))return!1;var vs=x.pointsSame(tt,nt),Se=x.pointsSame(Ke,yi);if(vs&&Se)return ce;var Ee=!vs&&x.pointBetween(tt,nt,yi),X=!Se&&x.pointBetween(Ke,nt,yi);if(vs)return X?N(ce,Ke):N(Le,yi),ce;Ee&&(Se||(X?N(ce,Ke):N(Le,yi)),N(ce,tt))}else Ei.alongA===0&&(Ei.alongB===-1?N(Le,nt):Ei.alongB===0?N(Le,Ei.pt):Ei.alongB===1&&N(Le,yi)),Ei.alongB===0&&(Ei.alongA===-1?N(ce,tt):Ei.alongA===0?N(ce,Ei.pt):Ei.alongA===1&&N(ce,Ke));return!1}for(var Ce=[];!T.isEmpty();){var he=T.getHead();if(v&&v.vert(he.pt[0]),he.isStart){let Le=function(){if(Y){var ce=W(he,Y);if(ce)return ce}return Re?W(he,Re):!1};v&&v.segmentNew(he.seg,he.primary);var le=H(he),Y=le.before?le.before.ev:null,Re=le.after?le.after.ev:null;v&&v.tempStatus(he.seg,Y?Y.seg:!1,Re?Re.seg:!1);var fe=Le();if(fe){if(h){var xe;he.seg.myFill.below===null?xe=!0:xe=he.seg.myFill.above!==he.seg.myFill.below,xe&&(fe.seg.myFill.above=!fe.seg.myFill.above)}else fe.seg.otherFill=he.seg.myFill;v&&v.segmentUpdate(fe.seg),he.other.remove(),he.remove()}if(T.getHead()!==he){v&&v.rewind(he.seg);continue}if(h){var xe;he.seg.myFill.below===null?xe=!0:xe=he.seg.myFill.above!==he.seg.myFill.below,Re?he.seg.myFill.below=Re.seg.myFill.above:he.seg.myFill.below=F,xe?he.seg.myFill.above=!he.seg.myFill.below:he.seg.myFill.above=he.seg.myFill.below}else if(he.seg.otherFill===null){var ge;Re?he.primary===Re.primary?ge=Re.seg.otherFill.above:ge=Re.seg.myFill.above:ge=he.primary?w:F,he.seg.otherFill={above:ge,below:ge}}v&&v.status(he.seg,Y?Y.seg:!1,Re?Re.seg:!1),he.other.status=le.insert(g.node({ev:he}))}else{var ye=he.status;if(ye===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(L.exists(ye.prev)&&L.exists(ye.next)&&W(ye.prev.ev,ye.next.ev),v&&v.statusRemove(ye.ev.seg),ye.remove(),!he.primary){var Ae=he.seg.myFill;he.seg.myFill=he.seg.otherFill,he.seg.otherFill=Ae}Ce.push(he.seg)}T.getHead().remove()}return v&&v.done(),Ce}return h?{addRegion:function(F){for(var w,L=F[F.length-1],O=0;O<F.length;O++){w=L,L=F[O];var H=x.pointsCompare(w,L);H!==0&&B(y(H<0?w:L,H<0?L:w),!0)}},calculate:function(F){return z(F,!1)}}:{calculate:function(F,w,L,O){return F.forEach(function(H){B(b(H.start,H.end,H),!0)}),L.forEach(function(H){B(b(H.start,H.end,H),!1)}),z(w,O)}}}ue.exports=s}),U1=t((me,ue)=>{function g(s,h,x){var v=[],y=[];return s.forEach(function(b){var T=b.start,u=b.end;if(h.pointsSame(T,u)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}x&&x.chainStart(b);var k={index:0,matches_head:!1,matches_pt1:!1},M={index:0,matches_head:!1,matches_pt1:!1},D=k;function B(ge,ye,Ae){return D.index=ge,D.matches_head=ye,D.matches_pt1=Ae,D===k?(D=M,!1):(D=null,!0)}for(var P=0;P<v.length;P++){var N=v[P],z=N[0];N[1];var F=N[N.length-1];if(N[N.length-2],h.pointsSame(z,T)){if(B(P,!0,!0))break}else if(h.pointsSame(z,u)){if(B(P,!0,!1))break}else if(h.pointsSame(F,T)){if(B(P,!1,!0))break}else if(h.pointsSame(F,u)&&B(P,!1,!1))break}if(D===k){v.push([T,u]),x&&x.chainNew(T,u);return}if(D===M){x&&x.chainMatch(k.index);var w=k.index,L=k.matches_pt1?u:T,O=k.matches_head,N=v[w],H=O?N[0]:N[N.length-1],W=O?N[1]:N[N.length-2],Ce=O?N[N.length-1]:N[0],he=O?N[N.length-2]:N[1];if(h.pointsCollinear(W,H,L)&&(O?(x&&x.chainRemoveHead(k.index,L),N.shift()):(x&&x.chainRemoveTail(k.index,L),N.pop()),H=W),h.pointsSame(Ce,L)){v.splice(w,1),h.pointsCollinear(he,Ce,H)&&(O?(x&&x.chainRemoveTail(k.index,H),N.pop()):(x&&x.chainRemoveHead(k.index,H),N.shift())),x&&x.chainClose(k.index),y.push(N);return}O?(x&&x.chainAddHead(k.index,L),N.unshift(L)):(x&&x.chainAddTail(k.index,L),N.push(L));return}function le(ge){x&&x.chainReverse(ge),v[ge].reverse()}function Y(ge,ye){var Ae=v[ge],Le=v[ye],ce=Ae[Ae.length-1],ke=Ae[Ae.length-2],Pe=Le[0],tt=Le[1];h.pointsCollinear(ke,ce,Pe)&&(x&&x.chainRemoveTail(ge,ce),Ae.pop(),ce=ke),h.pointsCollinear(ce,Pe,tt)&&(x&&x.chainRemoveHead(ye,Pe),Le.shift()),x&&x.chainJoin(ge,ye),v[ge]=Ae.concat(Le),v.splice(ye,1)}var Re=k.index,fe=M.index;x&&x.chainConnect(Re,fe);var xe=v[Re].length<v[fe].length;k.matches_head?M.matches_head?xe?(le(Re),Y(Re,fe)):(le(fe),Y(fe,Re)):Y(fe,Re):M.matches_head?Y(Re,fe):xe?(le(Re),Y(fe,Re)):(le(fe),Y(Re,fe))}),y}ue.exports=g}),Mg=t((me,ue)=>{function g(h,x,v){var y=[];return h.forEach(function(b){var T=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);x[T]!==0&&y.push({id:v?v.segmentId():-1,start:b.start,end:b.end,myFill:{above:x[T]===1,below:x[T]===2},otherFill:null})}),v&&v.selected(y),y}var s={union:function(h,x){return g(h,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],x)},intersect:function(h,x){return g(h,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],x)},difference:function(h,x){return g(h,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],x)},differenceRev:function(h,x){return g(h,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],x)},xor:function(h,x){return g(h,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],x)}};ue.exports=s}),hv=t((me,ue)=>{var g={toPolygon:function(s,h){function x(b){if(b.length<=0)return s.segments({inverted:!1,regions:[]});function T(M){var D=M.slice(0,M.length-1);return s.segments({inverted:!1,regions:[D]})}for(var u=T(b[0]),k=1;k<b.length;k++)u=s.selectDifference(s.combine(u,T(b[k])));return u}if(h.type==="Polygon")return s.polygon(x(h.coordinates));if(h.type==="MultiPolygon"){for(var v=s.segments({inverted:!1,regions:[]}),y=0;y<h.coordinates.length;y++)v=s.selectUnion(s.combine(v,x(h.coordinates[y])));return s.polygon(v)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(s,h,x){x=s.polygon(s.segments(x));function v(N,z){return h.pointInsideRegion([(N[0][0]+N[1][0])*.5,(N[0][1]+N[1][1])*.5],z)}function y(N){return{region:N,children:[]}}var b=y(null);function T(N,z){for(var F=0;F<N.children.length;F++){var w=N.children[F];if(v(z,w.region)){T(w,z);return}}for(var L=y(z),F=0;F<N.children.length;F++){var w=N.children[F];v(w.region,z)&&(L.children.push(w),N.children.splice(F,1),F--)}N.children.push(L)}for(var u=0;u<x.regions.length;u++){var k=x.regions[u];k.length<3||T(b,k)}function M(N,z){for(var F=0,w=N[N.length-1][0],L=N[N.length-1][1],O=[],H=0;H<N.length;H++){var W=N[H][0],Ce=N[H][1];O.push([W,Ce]),F+=Ce*w-W*L,w=W,L=Ce}var he=F<0;return he!==z&&O.reverse(),O.push([O[0][0],O[0][1]]),O}var D=[];function B(N){var z=[M(N.region,!1)];D.push(z);for(var F=0;F<N.children.length;F++)z.push(P(N.children[F]))}function P(N){for(var z=0;z<N.children.length;z++)B(N.children[z]);return M(N.region,!0)}for(var u=0;u<b.children.length;u++)B(b.children[u]);return D.length<=0?{type:"Polygon",coordinates:[]}:D.length==1?{type:"Polygon",coordinates:D[0]}:{type:"MultiPolygon",coordinates:D}}};ue.exports=g}),B1=t((me,ue)=>{var g=av(),s=hg(),h=Ng(),x=U1(),v=Mg(),y=hv(),b=!1,T=s(),u;u={buildLog:function(M){return M===!0?b=g():M===!1&&(b=!1),b===!1?!1:b.list},epsilon:function(M){return T.epsilon(M)},segments:function(M){var D=h(!0,T,b);return M.regions.forEach(D.addRegion),{segments:D.calculate(M.inverted),inverted:M.inverted}},combine:function(M,D){var B=h(!1,T,b);return{combined:B.calculate(M.segments,M.inverted,D.segments,D.inverted),inverted1:M.inverted,inverted2:D.inverted}},selectUnion:function(M){return{segments:v.union(M.combined,b),inverted:M.inverted1||M.inverted2}},selectIntersect:function(M){return{segments:v.intersect(M.combined,b),inverted:M.inverted1&&M.inverted2}},selectDifference:function(M){return{segments:v.difference(M.combined,b),inverted:M.inverted1&&!M.inverted2}},selectDifferenceRev:function(M){return{segments:v.differenceRev(M.combined,b),inverted:!M.inverted1&&M.inverted2}},selectXor:function(M){return{segments:v.xor(M.combined,b),inverted:M.inverted1!==M.inverted2}},polygon:function(M){return{regions:x(M.segments,T,b),inverted:M.inverted}},polygonFromGeoJSON:function(M){return y.toPolygon(u,M)},polygonToGeoJSON:function(M){return y.fromPolygon(u,T,M)},union:function(M,D){return k(M,D,u.selectUnion)},intersect:function(M,D){return k(M,D,u.selectIntersect)},difference:function(M,D){return k(M,D,u.selectDifference)},differenceRev:function(M,D){return k(M,D,u.selectDifferenceRev)},xor:function(M,D){return k(M,D,u.selectXor)}};function k(M,D,B){var P=u.segments(M),N=u.segments(D),z=u.combine(P,N),F=B(z);return u.polygon(F)}typeof window=="object"&&(window.PolyBool=u),ue.exports=u}),Kg=t((me,ue)=>{ue.exports=function(g,s,h,x){var v=g[0],y=g[1],b=!1;h===void 0&&(h=0),x===void 0&&(x=s.length);for(var T=x-h,u=0,k=T-1;u<T;k=u++){var M=s[u+h][0],D=s[u+h][1],B=s[k+h][0],P=s[k+h][1],N=D>y!=P>y&&v<(B-M)*(y-D)/(P-D)+M;N&&(b=!b)}return b}}),zg=t((me,ue)=>{var g=Dm().dot,s=C().BADNUM,h=ue.exports={};h.tester=function(x){var v=x.slice(),y=v[0][0],b=y,T=v[0][1],u=T,k;for((v[v.length-1][0]!==v[0][0]||v[v.length-1][1]!==v[0][1])&&v.push(v[0]),k=1;k<v.length;k++)y=Math.min(y,v[k][0]),b=Math.max(b,v[k][0]),T=Math.min(T,v[k][1]),u=Math.max(u,v[k][1]);var M=!1,D;v.length===5&&(v[0][0]===v[1][0]?v[2][0]===v[3][0]&&v[0][1]===v[3][1]&&v[1][1]===v[2][1]&&(M=!0,D=function(F){return F[0]===v[0][0]}):v[0][1]===v[1][1]&&v[2][1]===v[3][1]&&v[0][0]===v[3][0]&&v[1][0]===v[2][0]&&(M=!0,D=function(F){return F[1]===v[0][1]}));function B(F,w){var L=F[0],O=F[1];return!(L===s||L<y||L>b||O===s||O<T||O>u||w&&D(F))}function P(F,w){var L=F[0],O=F[1];if(L===s||L<y||L>b||O===s||O<T||O>u)return!1;var H=v.length,W=v[0][0],Ce=v[0][1],he=0,le,Y,Re,fe,xe;for(le=1;le<H;le++)if(Y=W,Re=Ce,W=v[le][0],Ce=v[le][1],fe=Math.min(Y,W),!(L<fe||L>Math.max(Y,W)||O>Math.max(Re,Ce)))if(O<Math.min(Re,Ce))L!==fe&&he++;else{if(W===Y?xe=O:xe=Re+(L-Y)*(Ce-Re)/(W-Y),O===xe)return!(le===1&&w);O<=xe&&L!==fe&&he++}return he%2===1}var N=!0,z=v[0];for(k=1;k<v.length;k++)if(z[0]!==v[k][0]||z[1]!==v[k][1]){N=!1;break}return{xmin:y,xmax:b,ymin:T,ymax:u,pts:v,contains:M?B:P,isRect:M,degenerate:N}},h.isSegmentBent=function(x,v,y,b){var T=x[v],u=[x[y][0]-T[0],x[y][1]-T[1]],k=g(u,u),M=Math.sqrt(k),D=[-u[1]/M,u[0]/M],B,P,N;for(B=v+1;B<y;B++)if(P=[x[B][0]-T[0],x[B][1]-T[1]],N=g(P,u),N<0||N>k||Math.abs(g(P,D))>b)return!0;return!1},h.filter=function(x,v){var y=[x[0]],b=0,T=0;function u(M){x.push(M);var D=y.length,B=b;y.splice(T+1);for(var P=B+1;P<x.length;P++)(P===x.length-1||h.isSegmentBent(x,B,P+1,v))&&(y.push(x[P]),y.length<D-2&&(b=P,T=y.length-1),B=P)}if(x.length>1){var k=x.pop();u(k)}return{addPt:u,raw:x,filtered:y}}}),xg=t((me,ue)=>{ue.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}}),Qg=t((me,ue)=>{var g=B1(),s=Kg(),h=l1(),x=D0().dashStyle,v=_r(),y=Nv(),b=e0().makeEventData,T=Fv(),u=T.freeMode,k=T.rectMode,M=T.drawMode,D=T.openMode,B=T.selectMode,P=de(),N=zv(),z=De(),F=H1().clearOutline,w=dv(),L=w.handleEllipse,O=w.readPaths,H=Ev().newShapes,W=Rv(),Ce=Gv().activateLastSelection,he=Z(),le=he.sorterAsc,Y=zg(),Re=Zv(),fe=N1().getFromId,xe=Qv(),ge=C1().redrawReglTraces,ye=xg(),Ae=ye.MINSELECT,Le=Y.filter,ce=Y.tester,ke=yy(),Pe=ke.p2r,tt=ke.axValue,Ke=ke.getTransform;function nt(Uo){return Uo.subplot!==void 0}function yi(Uo,Tp,Be,ft,mn){var Bl=!nt(ft),Vl=u(mn),Np=k(mn),Up=D(mn),Qp=M(mn),Zp=B(mn),Kp=mn==="drawline",R0=mn==="drawcircle",k0=Kp||R0,N0=ft.gd,lm=N0._fullLayout,Im=Zp&&lm.newselection.mode==="immediate"&&Bl,u1=lm._zoomlayer,v1=ft.element.getBoundingClientRect(),b1=ft.plotinfo,Bm=Ke(b1),fm=Tp-v1.left,c1=Be-v1.top;lm._calcInverseTransform(N0);var y1=he.apply3DTransform(lm._invTransform)(fm,c1);fm=y1[0],c1=y1[1];var n1=lm._invScaleX,Ym=lm._invScaleY,t1=fm,Um=c1,z1="M"+fm+","+c1,F1=ft.xaxes[0],g1=ft.yaxes[0],V1=F1._length,K1=g1._length,ig=Uo.altKey&&!(M(mn)&&Up),mg,P1,lg,G1,Sm,Cg,Je;Oe(Uo,N0,ft),Vl&&(mg=Le([[fm,c1]],ye.BENDPX));var Ve=u1.selectAll("path.select-outline-"+b1.id).data([1]),Mp=Qp?lm.newshape:lm.newselection;Qp&&(ft.hasText=Mp.label.text||Mp.label.texttemplate);var kp=Qp&&!Up?Mp.fillcolor:"rgba(0,0,0,0)",Vp=Mp.line.color||(Bl?v.contrast(N0._fullLayout.plot_bgcolor):"#7f7f7f");Ve.enter().append("path").attr("class","select-outline select-outline-"+b1.id).style({opacity:Qp?Mp.opacity/2:1,"stroke-dasharray":x(Mp.line.dash,Mp.line.width),"stroke-width":Mp.line.width+"px","shape-rendering":"crispEdges"}).call(v.stroke,Vp).call(v.fill,kp).attr("fill-rule","evenodd").classed("cursor-move",!!Qp).attr("transform",Bm).attr("d",z1+"Z");var wp=u1.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",Bm).attr("d","M0,0Z");if(Qp&&ft.hasText){var Ap=u1.select(".label-temp");Ap.empty()&&(Ap=u1.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Yp=lm._uid+ye.SELECTID,Fp=[],u0=ve(N0,ft.xaxes,ft.yaxes,ft.subplot);Im&&!Uo.shiftKey&&(ft._clearSubplotSelections=function(){if(Bl){var H0=F1._id,Lm=g1._id;Jp(N0,H0,Lm,u0);for(var Em=(N0.layout||{}).selections||[],Qm=[],xm=!1,zm=0;zm<Em.length;zm++){var f1=lm.selections[zm];!f1||f1.xref!==H0||f1.yref!==Lm?Qm.push(Em[zm]):xm=!0}xm&&(N0._fullLayout._noEmitSelectedAtStart=!0,h.call("_guiRelayout",N0,{selections:Qm}))}});var g0=W0(ft);ft.moveFn=function(H0,Lm){ft._clearSubplotSelections&&(ft._clearSubplotSelections(),ft._clearSubplotSelections=void 0),t1=Math.max(0,Math.min(V1,n1*H0+fm)),Um=Math.max(0,Math.min(K1,Ym*Lm+c1));var Em=Math.abs(t1-fm),Qm=Math.abs(Um-c1);if(Np){var xm,zm,f1;if(Zp){var dg=lm.selectdirection;switch(dg==="any"?Qm<Math.min(Em*.6,Ae)?xm="h":Em<Math.min(Qm*.6,Ae)?xm="v":xm="d":xm=dg,xm){case"h":zm=R0?K1/2:0,f1=K1;break;case"v":zm=R0?V1/2:0,f1=V1;break}}if(Qp)switch(lm.newshape.drawdirection){case"vertical":xm="h",zm=R0?K1/2:0,f1=K1;break;case"horizontal":xm="v",zm=R0?V1/2:0,f1=V1;break;case"ortho":Em<Qm?(xm="h",zm=c1,f1=Um):(xm="v",zm=fm,f1=t1);break;default:xm="d"}xm==="h"?(G1=k0?L(R0,[t1,zm],[t1,f1]):[[fm,zm],[fm,f1],[t1,f1],[t1,zm]],G1.xmin=k0?t1:Math.min(fm,t1),G1.xmax=k0?t1:Math.max(fm,t1),G1.ymin=Math.min(zm,f1),G1.ymax=Math.max(zm,f1),wp.attr("d","M"+G1.xmin+","+(c1-Ae)+"h-4v"+2*Ae+"h4ZM"+(G1.xmax-1)+","+(c1-Ae)+"h4v"+2*Ae+"h-4Z")):xm==="v"?(G1=k0?L(R0,[zm,Um],[f1,Um]):[[zm,c1],[zm,Um],[f1,Um],[f1,c1]],G1.xmin=Math.min(zm,f1),G1.xmax=Math.max(zm,f1),G1.ymin=k0?Um:Math.min(c1,Um),G1.ymax=k0?Um:Math.max(c1,Um),wp.attr("d","M"+(fm-Ae)+","+G1.ymin+"v-4h"+2*Ae+"v4ZM"+(fm-Ae)+","+(G1.ymax-1)+"v4h"+2*Ae+"v-4Z")):xm==="d"&&(G1=k0?L(R0,[fm,c1],[t1,Um]):[[fm,c1],[fm,Um],[t1,Um],[t1,c1]],G1.xmin=Math.min(fm,t1),G1.xmax=Math.max(fm,t1),G1.ymin=Math.min(c1,Um),G1.ymax=Math.max(c1,Um),wp.attr("d","M0,0Z"))}else Vl&&(mg.addPt([t1,Um]),G1=mg.filtered);if(ft.selectionDefs&&ft.selectionDefs.length?(lg=Wp(ft.mergedPolygons,G1,ig),G1.subtract=ig,P1=X(ft.selectionDefs.concat([G1]))):(lg=[G1],P1=ce(G1)),z(Lo(lg,Up),Ve,ft),Zp){var E1=dt(N0,!1),Gg=E1.eventData?E1.eventData.points.slice():[];E1=dt(N0,!1,P1,u0,ft),P1=E1.selectionTesters,Je=E1.eventData;var $1;mg?$1=mg.filtered:$1=T0(lg),Re.throttle(Yp,ye.SELECTDELAY,function(){Fp=kl(P1,u0);for(var $g=Fp.slice(),tg=0;tg<Gg.length;tg++){for(var Og=Gg[tg],qg=!1,W1=0;W1<$g.length;W1++)if($g[W1].curveNumber===Og.curveNumber&&$g[W1].pointNumber===Og.pointNumber){qg=!0;break}qg||$g.push(Og)}$g.length&&(Je||(Je={}),Je.points=$g),g0(Je,$1),rm(N0,Je)})}},ft.clickFn=function(H0,Lm){if(wp.remove(),N0._fullLayout._activeShapeIndex>=0){N0._fullLayout._deactivateShape(N0);return}if(!Qp){var Em=lm.clickmode;Re.done(Yp).then(function(){if(Re.clear(Yp),H0===2){for(Ve.remove(),Sm=0;Sm<u0.length;Sm++)Cg=u0[Sm],Cg._module.selectPoints(Cg,!1);if(Pp(N0,u0),q(ft),um(N0),u0.length){var Qm=u0[0].xaxis,xm=u0[0].yaxis;if(Qm&&xm){for(var zm=[],f1=N0._fullLayout.selections,dg=0;dg<f1.length;dg++){var E1=f1[dg];E1&&(E1.xref!==Qm._id||E1.yref!==xm._id)&&zm.push(E1)}zm.length<f1.length&&(N0._fullLayout._noEmitSelectedAtStart=!0,h.call("_guiRelayout",N0,{selections:zm}))}}}else Em.indexOf("select")>-1&&Ei(Lm,N0,ft.xaxes,ft.yaxes,ft.subplot,ft,Ve),Em==="event"&&V0(N0,void 0);y.click(N0,Lm,b1.id)}).catch(he.error)}},ft.doneFn=function(){wp.remove(),Re.done(Yp).then(function(){Re.clear(Yp),!Im&&G1&&ft.selectionDefs&&(G1.subtract=ig,ft.selectionDefs.push(G1),ft.mergedPolygons.length=0,[].push.apply(ft.mergedPolygons,lg)),(Im||Qp)&&q(ft,Im),ft.doneFnCompleted&&ft.doneFnCompleted(Fp),Zp&&V0(N0,Je)}).catch(he.error)}}function Ei(Uo,Tp,Be,ft,mn,Bl,Vl){var Np=Tp._hoverdata,Up=Tp._fullLayout,Qp=Up.clickmode,Zp=Qp.indexOf("event")>-1,Kp=[],R0,k0,N0,lm,Im,u1,v1,b1,Bm,fm;if(et(Np)){Oe(Uo,Tp,Bl),R0=ve(Tp,Be,ft,mn);var c1=bt(Np,R0),y1=c1.pointNumbers.length>0;if(y1?Ol(R0,c1):Xl(R0)&&(v1=dr(c1))){for(Vl&&Vl.remove(),fm=0;fm<R0.length;fm++)k0=R0[fm],k0._module.selectPoints(k0,!1);Pp(Tp,R0),q(Bl),Zp&&um(Tp)}else{b1=Uo.shiftKey&&(v1!==void 0?v1:dr(c1)),N0=vs(c1.pointNumber,c1.searchInfo,b1);var n1=Bl.selectionDefs.concat([N0]);for(lm=X(n1),fm=0;fm<R0.length;fm++)if(Im=R0[fm]._module.selectPoints(R0[fm],lm),u1=$p(Im,R0[fm]),Kp.length)for(var Ym=0;Ym<u1.length;Ym++)Kp.push(u1[Ym]);else Kp=u1;if(Bm={points:Kp},Pp(Tp,R0,Bm),N0&&Bl&&Bl.selectionDefs.push(N0),Vl){var t1=Bl.mergedPolygons,Um=D(Bl.dragmode);z(Lo(t1,Um),Vl,Bl)}Zp&&V0(Tp,Bm)}}}function vs(Uo,Tp,Be){return{pointNumber:Uo,searchInfo:Tp,subtract:!!Be}}function Se(Uo){return"pointNumber"in Uo&&"searchInfo"in Uo}function Ee(Uo){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Tp,Be,ft,mn){var Bl=Uo.searchInfo.cd[0].trace.index,Vl=mn.cd[0].trace.index;return Vl===Bl&&ft===Uo.pointNumber},isRect:!1,degenerate:!1,subtract:!!Uo.subtract}}function X(Uo){if(!Uo.length)return;for(var Tp=[],Be=Se(Uo[0])?0:Uo[0][0][0],ft=Be,mn=Se(Uo[0])?0:Uo[0][0][1],Bl=mn,Vl=0;Vl<Uo.length;Vl++)if(Se(Uo[Vl]))Tp.push(Ee(Uo[Vl]));else{var Np=ce(Uo[Vl]);Np.subtract=!!Uo[Vl].subtract,Tp.push(Np),Be=Math.min(Be,Np.xmin),ft=Math.max(ft,Np.xmax),mn=Math.min(mn,Np.ymin),Bl=Math.max(Bl,Np.ymax)}function Up(Qp,Zp,Kp,R0){for(var k0=!1,N0=0;N0<Tp.length;N0++)Tp[N0].contains(Qp,Zp,Kp,R0)&&(k0=!Tp[N0].subtract);return k0}return{xmin:Be,xmax:ft,ymin:mn,ymax:Bl,pts:[],contains:Up,isRect:!1,degenerate:!1}}function Oe(Uo,Tp,Be){var ft=Tp._fullLayout,mn=Be.plotinfo,Bl=Be.dragmode,Vl=ft._lastSelectedSubplot&&ft._lastSelectedSubplot===mn.id,Np=(Uo.shiftKey||Uo.altKey)&&!(M(Bl)&&D(Bl));Vl&&Np&&mn.selection&&mn.selection.selectionDefs&&!Be.selectionDefs?(Be.selectionDefs=mn.selection.selectionDefs,Be.mergedPolygons=mn.selection.mergedPolygons):(!Np||!mn.selection)&&q(Be),Vl||(F(Tp),ft._lastSelectedSubplot=mn.id)}function Qe(Uo){return Uo._fullLayout._activeShapeIndex>=0}function pe(Uo){return Uo._fullLayout._activeSelectionIndex>=0}function q(Uo,Tp){var Be=Uo.dragmode,ft=Uo.plotinfo,mn=Uo.gd;Qe(mn)&&mn._fullLayout._deactivateShape(mn),pe(mn)&&mn._fullLayout._deactivateSelection(mn);var Bl=mn._fullLayout,Vl=Bl._zoomlayer,Np=M(Be),Up=B(Be);if(Np||Up){var Qp=Vl.selectAll(".select-outline-"+ft.id);if(Qp&&mn._fullLayout._outlining){var Zp;Np&&(Zp=H(Qp,Uo)),Zp&&h.call("_guiRelayout",mn,{shapes:Zp});var Kp;Up&&!nt(Uo)&&(Kp=W(Qp,Uo)),Kp&&(mn._fullLayout._noEmitSelectedAtStart=!0,h.call("_guiRelayout",mn,{selections:Kp}).then(function(){Tp&&Ce(mn)})),mn._fullLayout._outlining=!1}}ft.selection={},ft.selection.selectionDefs=Uo.selectionDefs=[],ft.selection.mergedPolygons=Uo.mergedPolygons=[]}function ae(Uo){return Uo._id}function ve(Uo,Tp,Be,ft){if(!Uo.calcdata)return[];var mn=[],Bl=Tp.map(ae),Vl=Be.map(ae),Np,Up,Qp;for(Qp=0;Qp<Uo.calcdata.length;Qp++)if(Np=Uo.calcdata[Qp],Up=Np[0].trace,!(Up.visible!==!0||!Up._module||!Up._module.selectPoints))if(nt({subplot:ft})&&(Up.subplot===ft||Up.geo===ft))mn.push(Te(Up._module,Np,Tp[0],Be[0]));else if(Up.type==="splom"){if(Up._xaxes[Bl[0]]&&Up._yaxes[Vl[0]]){var Zp=Te(Up._module,Np,Tp[0],Be[0]);Zp.scene=Uo._fullLayout._splomScenes[Up.uid],mn.push(Zp)}}else if(Up.type==="sankey"){var Kp=Te(Up._module,Np,Tp[0],Be[0]);mn.push(Kp)}else{if(Bl.indexOf(Up.xaxis)===-1&&(!Up._xA||!Up._xA.overlaying)||Vl.indexOf(Up.yaxis)===-1&&(!Up._yA||!Up._yA.overlaying))continue;mn.push(Te(Up._module,Np,fe(Uo,Up.xaxis),fe(Uo,Up.yaxis)))}return mn}function Te(Uo,Tp,Be,ft){return{_module:Uo,cd:Tp,xaxis:Be,yaxis:ft}}function et(Uo){return Uo&&Array.isArray(Uo)&&Uo[0].hoverOnBox!==!0}function bt(Uo,Tp){var Be=Uo[0],ft=-1,mn=[],Bl,Vl;for(Vl=0;Vl<Tp.length;Vl++)if(Bl=Tp[Vl],Be.fullData.index===Bl.cd[0].trace.index){if(Be.hoverOnBox===!0)break;Be.pointNumber!==void 0?ft=Be.pointNumber:Be.binNumber!==void 0&&(ft=Be.binNumber,mn=Be.pointNumbers);break}return{pointNumber:ft,pointNumbers:mn,searchInfo:Bl}}function dr(Uo){var Tp=Uo.searchInfo.cd[0].trace,Be=Uo.pointNumber,ft=Uo.pointNumbers,mn=ft.length>0,Bl=mn?ft[0]:Be;return Tp.selectedpoints?Tp.selectedpoints.indexOf(Bl)>-1:!1}function Ol(Uo,Tp){var Be=[],ft,mn,Bl,Vl;for(Vl=0;Vl<Uo.length;Vl++)ft=Uo[Vl],ft.cd[0].trace.selectedpoints&&ft.cd[0].trace.selectedpoints.length>0&&Be.push(ft);if(Be.length===1&&(Bl=Be[0]===Tp.searchInfo,Bl&&(mn=Tp.searchInfo.cd[0].trace,mn.selectedpoints.length===Tp.pointNumbers.length))){for(Vl=0;Vl<Tp.pointNumbers.length;Vl++)if(mn.selectedpoints.indexOf(Tp.pointNumbers[Vl])<0)return!1;return!0}return!1}function Xl(Uo){var Tp=0,Be,ft,mn;for(mn=0;mn<Uo.length;mn++)if(Be=Uo[mn],ft=Be.cd[0].trace,ft.selectedpoints&&(ft.selectedpoints.length>1||(Tp+=ft.selectedpoints.length,Tp>1)))return!1;return Tp===1}function Pp(Uo,Tp,Be){var ft;for(ft=0;ft<Tp.length;ft++){var mn=Tp[ft].cd[0].trace._fullInput,Bl=Uo._fullLayout._tracePreGUI[mn.uid]||{};Bl.selectedpoints===void 0&&(Bl.selectedpoints=mn._input.selectedpoints||null)}var Vl;if(Be){var Np=Be.points||[];for(ft=0;ft<Tp.length;ft++)Vl=Tp[ft].cd[0].trace,Vl._input.selectedpoints=Vl._fullInput.selectedpoints=[],Vl._fullInput!==Vl&&(Vl.selectedpoints=[]);for(var Up=0;Up<Np.length;Up++){var Qp=Np[Up],Zp=Qp.data,Kp=Qp.fullData,R0=Qp.pointIndex,k0=Qp.pointIndices;k0?([].push.apply(Zp.selectedpoints,k0),Vl._fullInput!==Vl&&[].push.apply(Kp.selectedpoints,k0)):(Zp.selectedpoints.push(R0),Vl._fullInput!==Vl&&Kp.selectedpoints.push(R0))}}else for(ft=0;ft<Tp.length;ft++)Vl=Tp[ft].cd[0].trace,delete Vl.selectedpoints,delete Vl._input.selectedpoints,Vl._fullInput!==Vl&&delete Vl._fullInput.selectedpoints;t0(Uo,Tp)}function t0(Uo,Tp){for(var Be=!1,ft=0;ft<Tp.length;ft++){var mn=Tp[ft],Bl=mn.cd;h.traceIs(Bl[0].trace,"regl")&&(Be=!0);var Vl=mn._module,Np=Vl.styleOnSelect||Vl.style;Np&&(Np(Uo,Bl,Bl[0].node3),Bl[0].nodeRangePlot3&&Np(Uo,Bl,Bl[0].nodeRangePlot3))}Be&&(xe(Uo),ge(Uo))}function Wp(Uo,Tp,Be){for(var ft=Be?g.difference:g.union,mn=ft({regions:Uo},{regions:[Tp]}),Bl=mn.regions.reverse(),Vl=0;Vl<Bl.length;Vl++){var Np=Bl[Vl];Np.subtract=y0(Np,Bl.slice(0,Vl))}return Bl}function $p(Uo,Tp){if(Array.isArray(Uo))for(var Be=Tp.cd,ft=Tp.cd[0].trace,mn=0;mn<Uo.length;mn++)Uo[mn]=b(Uo[mn],ft,Be);return Uo}function Lo(Uo,Tp){for(var Be=[],ft=0;ft<Uo.length;ft++){Be[ft]=[];for(var mn=0;mn<Uo[ft].length;mn++){Be[ft][mn]=[],Be[ft][mn][0]=mn?"L":"M";for(var Bl=0;Bl<Uo[ft][mn].length;Bl++)Be[ft][mn].push(Uo[ft][mn][Bl])}Tp||Be[ft].push(["Z",Be[ft][0][1],Be[ft][0][2]])}return Be}function kl(Uo,Tp){for(var Be=[],ft,mn=[],Bl,Vl=0;Vl<Tp.length;Vl++){var Np=Tp[Vl];Bl=Np._module.selectPoints(Np,Uo),mn.push(Bl),ft=$p(Bl,Np),Be=Be.concat(ft)}return Be}function dt(Uo,Tp,Be,ft,mn){var Bl=!!ft,Vl,Np,Up;mn&&(Vl=mn.plotinfo,Np=mn.xaxes[0]._id,Up=mn.yaxes[0]._id);var Qp=[],Zp=[],Kp=s0(Uo),R0=Uo._fullLayout;if(Vl){var k0=R0._zoomlayer,N0=R0.dragmode,lm=M(N0),Im=B(N0);if(lm||Im){var u1=fe(Uo,Np,"x"),v1=fe(Uo,Up,"y");if(u1&&v1){var b1=k0.selectAll(".select-outline-"+Vl.id);if(b1&&Uo._fullLayout._outlining&&b1.length){for(var Bm=b1[0][0],fm=Bm.getAttribute("d"),c1=O(fm,Uo,Vl),y1=[],n1=0;n1<c1.length;n1++){for(var Ym=c1[n1],t1=[],Um=0;Um<Ym.length;Um++)t1.push([M0(u1,Ym[Um][1]),M0(v1,Ym[Um][2])]);t1.xref=Np,t1.yref=Up,t1.subtract=y0(t1,y1),y1.push(t1)}Kp=Kp.concat(y1)}}}}var z1=Np&&Up?[Np+Up]:R0._subplots.cartesian;yp(Uo);for(var F1={},g1=0;g1<z1.length;g1++){var V1=z1[g1],K1=V1.indexOf("y"),ig=V1.slice(0,K1),mg=V1.slice(K1),P1=Np&&Up?Be:void 0;if(P1=m0(Kp,ig,mg,P1),P1){var lg=ft;if(!Bl){var G1=fe(Uo,ig,"x"),Sm=fe(Uo,mg,"y");lg=ve(Uo,[G1],[Sm],V1);for(var Cg=0;Cg<lg.length;Cg++){var Je=lg[Cg],Ve=Je.cd[0],Mp=Ve.trace;if(Je._module.name==="scattergl"&&!Ve.t.xpx){var kp=Mp.x,Vp=Mp.y,wp=Mp._length;Ve.t.xpx=[],Ve.t.ypx=[];for(var Ap=0;Ap<wp;Ap++)Ve.t.xpx[Ap]=G1.c2p(kp[Ap]),Ve.t.ypx[Ap]=Sm.c2p(Vp[Ap])}Je._module.name==="splom"&&(F1[Mp.uid]||(F1[Mp.uid]=!0))}}var Yp=kl(P1,lg);Qp=Qp.concat(Yp),Zp=Zp.concat(lg)}}var Fp={points:Qp};Pp(Uo,Zp,Fp);var u0=R0.clickmode,g0=u0.indexOf("event")>-1&&Tp;if(!Vl&&Tp){var H0=s0(Uo,!0);if(H0.length){var Lm=H0[0].xref,Em=H0[0].yref;if(Lm&&Em){var Qm=T0(H0),xm=h0([fe(Uo,Lm,"x"),fe(Uo,Em,"y")]);xm(Fp,Qm)}}Uo._fullLayout._noEmitSelectedAtStart?Uo._fullLayout._noEmitSelectedAtStart=!1:g0&&V0(Uo,Fp),R0._reselect=!1}if(!Vl&&R0._deselect){var zm=R0._deselect;Np=zm.xref,Up=zm.yref,Bp(Np,Up,Zp)||Jp(Uo,Np,Up,ft),g0&&(Fp.points.length?V0(Uo,Fp):um(Uo)),R0._deselect=!1}return{eventData:Fp,selectionTesters:Be}}function yp(Uo){var Tp=Uo.calcdata;if(Tp)for(var Be=0;Be<Tp.length;Be++){var ft=Tp[Be][0],mn=ft.trace,Bl=Uo._fullLayout._splomScenes;if(Bl){var Vl=Bl[mn.uid];Vl&&(Vl.selectBatch=[])}}}function Bp(Uo,Tp,Be){for(var ft=0;ft<Be.length;ft++){var mn=Be[ft];if(mn.xaxis&&mn.xaxis._id===Uo&&mn.yaxis&&mn.yaxis._id===Tp)return!0}return!1}function Jp(Uo,Tp,Be,ft){ft=ve(Uo,[fe(Uo,Tp,"x")],[fe(Uo,Be,"y")],Tp+Be);for(var mn=0;mn<ft.length;mn++){var Bl=ft[mn];Bl._module.selectPoints(Bl,!1)}Pp(Uo,ft)}function m0(Uo,Tp,Be,ft){for(var mn,Bl=0;Bl<Uo.length;Bl++){var Vl=Uo[Bl];if(!(Tp!==Vl.xref||Be!==Vl.yref))if(mn){var Np=!!Vl.subtract;mn=Wp(mn,Vl,Np),ft=X(mn)}else mn=[Vl],ft=ce(Vl)}return ft}function s0(Uo,Tp){for(var Be=[],ft=Uo._fullLayout,mn=ft.selections,Bl=mn.length,Vl=0;Vl<Bl;Vl++)if(!(Tp&&Vl!==ft._activeSelectionIndex)){var Np=mn[Vl];if(Np){var Up=Np.xref,Qp=Np.yref,Zp=fe(Uo,Up,"x"),Kp=fe(Uo,Qp,"y"),R0,k0,N0,lm,Im;if(Np.type==="rect"){Im=[];var u1=M0(Zp,Np.x0),v1=M0(Zp,Np.x1),b1=M0(Kp,Np.y0),Bm=M0(Kp,Np.y1);Im=[[u1,b1],[u1,Bm],[v1,Bm],[v1,b1]],R0=Math.min(u1,v1),k0=Math.max(u1,v1),N0=Math.min(b1,Bm),lm=Math.max(b1,Bm),Im.xmin=R0,Im.xmax=k0,Im.ymin=N0,Im.ymax=lm,Im.xref=Up,Im.yref=Qp,Im.subtract=!1,Im.isRect=!0,Be.push(Im)}else if(Np.type==="path")for(var fm=Np.path.split("Z"),c1=[],y1=0;y1<fm.length;y1++){var n1=fm[y1];if(n1){n1+="Z";var Ym=P.extractPathCoords(n1,N.paramIsX,"raw"),t1=P.extractPathCoords(n1,N.paramIsY,"raw");R0=1/0,k0=-1/0,N0=1/0,lm=-1/0,Im=[];for(var Um=0;Um<Ym.length;Um++){var z1=M0(Zp,Ym[Um]),F1=M0(Kp,t1[Um]);Im.push([z1,F1]),R0=Math.min(z1,R0),k0=Math.max(z1,k0),N0=Math.min(F1,N0),lm=Math.max(F1,lm)}Im.xmin=R0,Im.xmax=k0,Im.ymin=N0,Im.ymax=lm,Im.xref=Up,Im.yref=Qp,Im.subtract=y0(Im,c1),c1.push(Im),Be.push(Im)}}}}return Be}function y0(Uo,Tp){for(var Be=!1,ft=0;ft<Tp.length;ft++)for(var mn=Tp[ft],Bl=0;Bl<Uo.length;Bl++)if(s(Uo[Bl],mn)){Be=!Be;break}return Be}function M0(Uo,Tp){return Uo.type==="date"&&(Tp=Tp.replace("_"," ")),Uo.type==="log"?Uo.c2p(Tp):Uo.r2p(Tp,null,Uo.calendar)}function T0(Uo){for(var Tp=Uo.length,Be=[],ft=0;ft<Tp;ft++){var mn=Uo[ft];Be=Be.concat(mn),Be=Be.concat([mn[0]])}return G0(Be)}function G0(Uo){return Uo.isRect=Uo.length===5&&Uo[0][0]===Uo[4][0]&&Uo[0][1]===Uo[4][1]&&Uo[0][0]===Uo[1][0]&&Uo[2][0]===Uo[3][0]&&Uo[0][1]===Uo[3][1]&&Uo[1][1]===Uo[2][1]||Uo[0][1]===Uo[1][1]&&Uo[2][1]===Uo[3][1]&&Uo[0][0]===Uo[3][0]&&Uo[1][0]===Uo[2][0],Uo.isRect&&(Uo.xmin=Math.min(Uo[0][0],Uo[2][0]),Uo.xmax=Math.max(Uo[0][0],Uo[2][0]),Uo.ymin=Math.min(Uo[0][1],Uo[2][1]),Uo.ymax=Math.max(Uo[0][1],Uo[2][1])),Uo}function h0(Uo){return function(Tp,Be){for(var ft,mn,Bl=0;Bl<Uo.length;Bl++){var Vl=Uo[Bl],Np=Vl._id,Up=Np.charAt(0);if(Be.isRect){ft||(ft={});var Qp=Be[Up+"min"],Zp=Be[Up+"max"];Qp!==void 0&&Zp!==void 0&&(ft[Np]=[Pe(Vl,Qp),Pe(Vl,Zp)].sort(le))}else mn||(mn={}),mn[Np]=Be.map(tt(Vl))}ft&&(Tp.range=ft),mn&&(Tp.lassoPoints=mn)}}function W0(Uo){var Tp=Uo.plotinfo;return Tp.fillRangeItems||h0(Uo.xaxes.concat(Uo.yaxes))}function rm(Uo,Tp){Uo.emit("plotly_selecting",Tp)}function V0(Uo,Tp){Tp&&(Tp.selections=(Uo.layout||{}).selections||[]),Uo.emit("plotly_selected",Tp)}function um(Uo){Uo.emit("plotly_deselect",null)}ue.exports={reselect:dt,prepSelect:yi,clearOutline:F,clearSelectionsCache:q,selectOnClick:Ei}}),fy=t((me,ue)=>{ue.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]}),Uy=t((me,ue)=>{ue.exports={axisRefDescription:function(g,s,h){return["If set to a",g,"axis id (e.g. *"+g+"* or","*"+g+"2*), the `"+g+"` position refers to a",g,"coordinate. If set to *paper*, the `"+g+"`","position refers to the distance from the",s,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",s,"("+h+"). If set to a",g,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",s,"of the domain of that axis: e.g.,","*"+g+"2 domain* refers to the domain of the second",g," axis and a",g,"position of 0.5 refers to the","point between the",s,"and the",h,"of the domain of the","second",g,"axis."].join(" ")}}}),Fy=t((me,ue)=>{var g=fy(),s=Xe(),h=m1(),x=Nm().templatedArray;Uy(),ue.exports=x("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:s({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:g.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:g.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",h.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",h.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",h.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",h.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:s({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})}),ox=t((me,ue)=>{ue.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}}),Ox=t((me,ue)=>{ue.exports=function(g){return{valType:"color",editType:"style",anim:!0}}}),Px=t((me,ue)=>{var g=Iv().axisHoverFormat,s=_1().texttemplateAttrs,h=_1().hovertemplateAttrs,x=R(),v=Xe(),y=r0().dash,b=r0().pattern,T=D0(),u=ox(),k=Fe().extendFlat,M=Ox();function D(N){return{valType:"any",dflt:0,editType:"calc"}}function B(N){return{valType:"any",editType:"calc"}}function P(N){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}ue.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:D(),yperiod:D(),xperiod0:B(),yperiod0:B(),xperiodalignment:P(),yperiodalignment:P(),xhoverformat:g("x"),yhoverformat:g("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:s({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:h({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:k({},y,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:M(!0),fillgradient:k({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:b,marker:k({symbol:{valType:"enumerated",values:T.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:k({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},x("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},x("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:v({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}}),x3=t((me,ue)=>{var g=Fy(),s=Px().line,h=r0().dash,x=Fe().extendFlat,v=vm().overrideAll,y=Nm().templatedArray;Uy(),ue.exports=v(y("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:x({},g.xref,{}),yref:x({},g.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:s.color,width:x({},s.width,{min:1,dflt:1}),dash:x({},h,{dflt:"dot"})}}),"arraydraw","from-root")}),O5=t((me,ue)=>{var g=Z(),s=mm(),h=Ye(),x=x3(),v=de();ue.exports=function(b,T){h(b,T,{name:"selections",handleItemDefaults:y});for(var u=T.selections,k=0;k<u.length;k++){var M=u[k];M&&M.path===void 0&&(M.x0===void 0||M.x1===void 0||M.y0===void 0||M.y1===void 0)&&(T.selections[k]=null)}};function y(b,T,u){function k(xe,ge){return g.coerce(b,T,x,xe,ge)}var M=k("path"),D=M?"path":"rect",B=k("type",D),P=B!=="path";P&&delete T.path,k("opacity"),k("line.color"),k("line.width"),k("line.dash");for(var N=["x","y"],z=0;z<2;z++){var F=N[z],w={_fullLayout:u},L,O,H,W=s.coerceRef(b,T,w,F);if(L=s.getFromId(w,W),L._selectionIndices.push(T._index),H=v.rangeToShapePosition(L),O=v.shapePositionToRange(L),P){var Ce=F+"0",he=F+"1",le=b[Ce],Y=b[he];b[Ce]=O(b[Ce],!0),b[he]=O(b[he],!0),s.coercePosition(T,w,k,W,Ce),s.coercePosition(T,w,k,W,he);var Re=T[Ce],fe=T[he];Re!==void 0&&fe!==void 0&&(T[Ce]=H(Re),T[he]=H(fe),b[Ce]=le,b[he]=Y)}}P&&g.noneOrAll(b,T,["x0","x1","y0","y1"])}}),P5=t((me,ue)=>{ue.exports=function(g,s,h){h("newselection.mode");var x=h("newselection.line.width");x&&(h("newselection.line.color"),h("newselection.line.dash")),h("activeselection.fillcolor"),h("activeselection.opacity")}}),h_=t((me,ue)=>{var g=l1(),s=Z(),h=N1();ue.exports=function(x){return function(v,y){var b=v[x];if(Array.isArray(b))for(var T=g.subplotsRegistry.cartesian,u=T.idRegex,k=y._subplots,M=k.xaxis,D=k.yaxis,B=k.cartesian,P=y._has("cartesian"),N=0;N<b.length;N++){var z=b[N];if(s.isPlainObject(z)){var F=h.cleanId(z.xref,"x",!1),w=h.cleanId(z.yref,"y",!1),L=u.x.test(F),O=u.y.test(w);if(L||O){P||s.pushUnique(y._basePlotModules,T);var H=!1;L&&M.indexOf(F)===-1&&(M.push(F),H=!0),O&&D.indexOf(w)===-1&&(D.push(w),H=!0),H&&L&&O&&B.push(F+w)}}}}}}),C2=t((me,ue)=>{var g=Gv(),s=Qg();ue.exports={moduleType:"component",name:"selections",layoutAttributes:x3(),supplyLayoutDefaults:O5(),supplyDrawNewSelectionDefaults:P5(),includeBasePlot:h_()("selections"),draw:g.draw,drawOne:g.drawOne,reselect:s.reselect,prepSelect:s.prepSelect,clearOutline:s.clearOutline,clearSelectionsCache:s.clearSelectionsCache,selectOnClick:s.selectOnClick}}),Dy=t((me,ue)=>{var g=c(),s=Z(),h=s.numberFormat,x=He(),v=h1(),y=l1(),b=s.strTranslate,T=kg(),u=_r(),k=D0(),M=Nv(),D=mm(),B=D1(),P=Om(),N=Fv(),z=N.selectingOrDrawing,F=N.freeMode,w=Q1().FROM_TL,L=Qv(),O=C1().redrawReglTraces,H=vg(),W=N1().getFromId,Ce=C2().prepSelect,he=C2().clearOutline,le=C2().selectOnClick,Y=Ag(),Re=m1(),fe=Re.MINDRAG,xe=Re.MINZOOM,ge=!0;function ye(Te,et,bt,dr,Ol,Xl,Pp,t0){var Wp=Te._fullLayout._zoomlayer,$p=Pp+t0==="nsew",Lo=(Pp+t0).length===1,kl,dt,yp,Bp,Jp,m0,s0,y0,M0,T0,G0,h0,W0,rm,V0,um,Uo,Tp,Be,ft,mn,Bl,Vl;bt+=et.yaxis._shift;function Np(){if(kl=et.xaxis,dt=et.yaxis,M0=kl._length,T0=dt._length,s0=kl._offset,y0=dt._offset,yp={},yp[kl._id]=kl,Bp={},Bp[dt._id]=dt,Pp&&t0)for(var Ve=et.overlays,Mp=0;Mp<Ve.length;Mp++){var kp=Ve[Mp].xaxis;yp[kp._id]=kp;var Vp=Ve[Mp].yaxis;Bp[Vp._id]=Vp}Jp=ve(yp),m0=ve(Bp),W0=ce(Jp,t0),rm=ce(m0,Pp),V0=!rm&&!W0,h0=q(Te,Te._fullLayout._axisMatchGroups,yp,Bp),G0=q(Te,Te._fullLayout._axisConstraintGroups,yp,Bp,h0);var wp=G0.isSubplotConstrained||h0.isSubplotConstrained;um=t0||wp,Uo=Pp||wp;var Ap=Te._fullLayout;Tp=Ap._has("scattergl"),Be=Ap._has("splom"),ft=Ap._has("svg")}Np();var Up=nt(rm+W0,Te._fullLayout.dragmode,$p),Qp=Le(et,Pp+t0+"drag",Up,bt,dr,Ol,Xl);if(V0&&!$p)return Qp.onmousedown=null,Qp.style.pointerEvents="none",Qp;var Zp={element:Qp,gd:Te,plotinfo:et};Zp.prepFn=function(Ve,Mp,kp){var Vp=Zp.dragmode,wp=Te._fullLayout.dragmode;wp!==Vp&&(Zp.dragmode=wp),Np(),Bl=Te._fullLayout._invScaleX,Vl=Te._fullLayout._invScaleY,V0||($p?Ve.shiftKey?wp==="pan"?wp="zoom":z(wp)||(wp="pan"):Ve.ctrlKey&&(wp="pan"):wp="pan"),F(wp)?Zp.minDrag=1:Zp.minDrag=void 0,z(wp)?(Zp.xaxes=Jp,Zp.yaxes=m0,Ce(Ve,Mp,kp,Zp,wp)):(Zp.clickFn=R0,z(Vp)&&Kp(),V0||(wp==="zoom"?(Zp.moveFn=n1,Zp.doneFn=t1,Zp.minDrag=1,y1(Ve,Mp,kp)):wp==="pan"&&(Zp.moveFn=K1,Zp.doneFn=lg))),Te._fullLayout._redrag=function(){var Ap=Te._dragdata;if(Ap&&Ap.element===Qp){var Yp=Te._fullLayout.dragmode;z(Yp)||(Np(),G1([0,0,M0,T0]),Zp.moveFn(Ap.dx,Ap.dy))}}};function Kp(){Zp.plotinfo.selection=!1,he(Te)}function R0(Ve,Mp){var kp=Zp.gd;if(kp._fullLayout._activeShapeIndex>=0){kp._fullLayout._deactivateShape(kp);return}var Vp=kp._fullLayout.clickmode;if(Ee(kp),Ve===2&&!Lo&&P1(),$p)Vp.indexOf("select")>-1&&le(Mp,kp,Jp,m0,et.id,Zp),Vp.indexOf("event")>-1&&M.click(kp,Mp,et.id);else if(Ve===1&&Lo){var wp=Pp?dt:kl,Ap=Pp==="s"||t0==="w"?0:1,Yp=wp._name+".range["+Ap+"]",Fp=ke(wp,Ap),u0="left",g0="middle";if(wp.fixedrange)return;Pp?(g0=Pp==="n"?"top":"bottom",wp.side==="right"&&(u0="right")):t0==="e"&&(u0="right"),kp._context.showAxisRangeEntryBoxes&&g.select(Qp).call(T.makeEditable,{gd:kp,immediate:!0,background:kp._fullLayout.paper_bgcolor,text:String(Fp),fill:wp.tickfont?wp.tickfont.color:"#444",horizontalAlign:u0,verticalAlign:g0}).on("edit",function(H0){var Lm=wp.d2r(H0);Lm!==void 0&&y.call("_guiRelayout",kp,Yp,Lm)})}}P.init(Zp);var k0,N0,lm,Im,u1,v1,b1,Bm,fm,c1;function y1(Ve,Mp,kp){var Vp=Qp.getBoundingClientRect();k0=Mp-Vp.left,N0=kp-Vp.top,Te._fullLayout._calcInverseTransform(Te);var wp=s.apply3DTransform(Te._fullLayout._invTransform)(k0,N0);k0=wp[0],N0=wp[1],lm={l:k0,r:k0,w:0,t:N0,b:N0,h:0},Im=Te._hmpixcount?Te._hmlumcount/Te._hmpixcount:x(Te._fullLayout.plot_bgcolor).getLuminance(),u1="M0,0H"+M0+"V"+T0+"H0V0",v1=!1,b1="xy",c1=!1,Bm=yi(Wp,Im,s0,y0,u1),fm=Ei(Wp,s0,y0)}function n1(Ve,Mp){if(Te._transitioningWithDuration)return!1;var kp=Math.max(0,Math.min(M0,Bl*Ve+k0)),Vp=Math.max(0,Math.min(T0,Vl*Mp+N0)),wp=Math.abs(kp-k0),Ap=Math.abs(Vp-N0);lm.l=Math.min(k0,kp),lm.r=Math.max(k0,kp),lm.t=Math.min(N0,Vp),lm.b=Math.max(N0,Vp);function Yp(){b1="",lm.r=lm.l,lm.t=lm.b,fm.attr("d","M0,0Z")}if(G0.isSubplotConstrained)wp>xe||Ap>xe?(b1="xy",wp/M0>Ap/T0?(Ap=wp*T0/M0,N0>Vp?lm.t=N0-Ap:lm.b=N0+Ap):(wp=Ap*M0/T0,k0>kp?lm.l=k0-wp:lm.r=k0+wp),fm.attr("d",pe(lm))):Yp();else if(h0.isSubplotConstrained)if(wp>xe||Ap>xe){b1="xy";var Fp=Math.min(lm.l/M0,(T0-lm.b)/T0),u0=Math.max(lm.r/M0,(T0-lm.t)/T0);lm.l=Fp*M0,lm.r=u0*M0,lm.b=(1-Fp)*T0,lm.t=(1-u0)*T0,fm.attr("d",pe(lm))}else Yp();else!rm||Ap<Math.min(Math.max(wp*.6,fe),xe)?wp<fe||!W0?Yp():(lm.t=0,lm.b=T0,b1="x",fm.attr("d",Oe(lm,N0))):!W0||wp<Math.min(Ap*.6,xe)?(lm.l=0,lm.r=M0,b1="y",fm.attr("d",Qe(lm,k0))):(b1="xy",fm.attr("d",pe(lm)));lm.w=lm.r-lm.l,lm.h=lm.b-lm.t,b1&&(c1=!0),Te._dragged=c1,vs(Bm,fm,lm,u1,v1,Im),Ym(),Te.emit("plotly_relayouting",mn),v1=!0}function Ym(){mn={},(b1==="xy"||b1==="x")&&(Pe(Jp,lm.l/M0,lm.r/M0,mn,G0.xaxes),ig("x",mn)),(b1==="xy"||b1==="y")&&(Pe(m0,(T0-lm.b)/T0,(T0-lm.t)/T0,mn,G0.yaxes),ig("y",mn))}function t1(){Ym(),Ee(Te),lg(),X(Te)}var Um=[0,0,M0,T0],z1=null,F1=Re.REDRAWDELAY,g1=et.mainplot?Te._fullLayout._plots[et.mainplot]:et;function V1(Ve){if(!Te._context._scrollZoom.cartesian&&!Te._fullLayout._enablescrollzoom)return;if(Kp(),Te._transitioningWithDuration){Ve.preventDefault(),Ve.stopPropagation();return}Np(),clearTimeout(z1);var Mp=-Ve.deltaY;if(isFinite(Mp)||(Mp=Ve.wheelDelta/10),!isFinite(Mp)){s.log("Did not find wheel motion attributes: ",Ve);return}var kp=Math.exp(-Math.min(Math.max(Mp,-20),20)/200),Vp=g1.draglayer.select(".nsewdrag").node().getBoundingClientRect(),wp=(Ve.clientX-Vp.left)/Vp.width,Ap=(Vp.bottom-Ve.clientY)/Vp.height,Yp;function Fp(u0,g0,H0){if(u0.fixedrange)return;var Lm=s.simpleMap(u0.range,u0.r2l),Em=Lm[0]+(Lm[1]-Lm[0])*g0;function Qm(xm){return u0.l2r(Em+(xm-Em)*H0)}u0.range=Lm.map(Qm)}if(um){for(t0||(wp=.5),Yp=0;Yp<Jp.length;Yp++)Fp(Jp[Yp],wp,kp);ig("x"),Um[2]*=kp,Um[0]+=Um[2]*wp*(1/kp-1)}if(Uo){for(Pp||(Ap=.5),Yp=0;Yp<m0.length;Yp++)Fp(m0[Yp],Ap,kp);ig("y"),Um[3]*=kp,Um[1]+=Um[3]*(1-Ap)*(1/kp-1)}G1(Um),mg(),Te.emit("plotly_relayouting",mn),z1=setTimeout(function(){Te._fullLayout&&(Um=[0,0,M0,T0],lg())},F1),Ve.preventDefault()}Pp.length*t0.length!==1&&ae(Qp,V1);function K1(Ve,Mp){if(Ve=Ve*Bl,Mp=Mp*Vl,Te._transitioningWithDuration)return;if(Te._fullLayout._replotting=!0,W0==="ew"||rm==="ns"){var kp=W0?-Ve:0,Vp=rm?-Mp:0;if(h0.isSubplotConstrained){if(W0&&rm){var wp=(Ve/M0-Mp/T0)/2;Ve=wp*M0,Mp=-wp*T0,kp=-Ve,Vp=-Mp}rm?kp=-Vp*M0/T0:Vp=-kp*T0/M0}W0&&(tt(Jp,Ve),ig("x")),rm&&(tt(m0,Mp),ig("y")),G1([kp,Vp,M0,T0]),mg(),Te.emit("plotly_relayouting",mn);return}function Ap(Qm,xm,zm){for(var f1=1-xm,dg,E1,Gg=0;Gg<Qm.length;Gg++){var $1=Qm[Gg];if(!$1.fixedrange){dg=$1,E1=$1._rl[f1]+($1._rl[xm]-$1._rl[f1])/Ke(zm/$1._length);var $g=$1.l2r(E1);$g!==!1&&$g!==void 0&&($1.range[xm]=$g)}}return dg._length*(dg._rl[xm]-E1)/(dg._rl[xm]-dg._rl[f1])}var Yp=W0==="w"==(rm==="n")?1:-1;if(W0&&rm&&(G0.isSubplotConstrained||h0.isSubplotConstrained)){var Fp=(Ve/M0+Yp*Mp/T0)/2;Ve=Fp*M0,Mp=Yp*Fp*T0}var u0,g0;if(W0==="w"?Ve=Ap(Jp,0,Ve):W0==="e"?Ve=Ap(Jp,1,-Ve):W0||(Ve=0),rm==="n"?Mp=Ap(m0,1,Mp):rm==="s"?Mp=Ap(m0,0,-Mp):rm||(Mp=0),u0=W0==="w"?Ve:0,g0=rm==="n"?Mp:0,G0.isSubplotConstrained&&!h0.isSubplotConstrained||h0.isSubplotConstrained&&W0&&rm&&Yp>0){var H0;if(h0.isSubplotConstrained||!W0&&rm.length===1){for(H0=0;H0<Jp.length;H0++)Jp[H0].range=Jp[H0]._r.slice(),Y(Jp[H0],1-Mp/T0);Ve=Mp*M0/T0,u0=Ve/2}if(h0.isSubplotConstrained||!rm&&W0.length===1){for(H0=0;H0<m0.length;H0++)m0[H0].range=m0[H0]._r.slice(),Y(m0[H0],1-Ve/M0);Mp=Ve*T0/M0,g0=Mp/2}}(!h0.isSubplotConstrained||!rm)&&ig("x"),(!h0.isSubplotConstrained||!W0)&&ig("y");var Lm=M0-Ve,Em=T0-Mp;h0.isSubplotConstrained&&!(W0&&rm)&&(W0?(g0=u0?0:Ve*T0/M0,Em=Lm*T0/M0):(u0=g0?0:Mp*M0/T0,Lm=Em*M0/T0)),G1([u0,g0,Lm,Em]),mg(),Te.emit("plotly_relayouting",mn)}function ig(Ve,Mp){for(var kp=h0.isSubplotConstrained?{x:m0,y:Jp}[Ve]:h0[Ve+"axes"],Vp=h0.isSubplotConstrained?{x:Jp,y:m0}[Ve]:[],wp=0;wp<kp.length;wp++){var Ap=kp[wp],Yp=Ap._id,Fp=h0.xLinks[Yp]||h0.yLinks[Yp],u0=Vp[0]||yp[Fp]||Bp[Fp];u0&&(Mp?(Mp[Ap._name+".range[0]"]=Mp[u0._name+".range[0]"],Mp[Ap._name+".range[1]"]=Mp[u0._name+".range[1]"]):Ap.range=u0.range.slice())}}function mg(){var Ve=[],Mp;function kp(Yp){for(Mp=0;Mp<Yp.length;Mp++)Yp[Mp].fixedrange||Ve.push(Yp[Mp]._id)}function Vp(Yp,Fp){for(Mp=0;Mp<Yp.length;Mp++){var u0=Yp[Mp],g0=u0[Fp];!u0.fixedrange&&g0.tickmode==="sync"&&Ve.push(g0._id)}}for(um&&(kp(Jp),kp(G0.xaxes),kp(h0.xaxes),Vp(et.overlays,"xaxis")),Uo&&(kp(m0),kp(G0.yaxes),kp(h0.yaxes),Vp(et.overlays,"yaxis")),mn={},Mp=0;Mp<Ve.length;Mp++){var wp=Ve[Mp],Ap=W(Te,wp);D.drawOne(Te,Ap,{skipTitle:!0}),mn[Ap._name+".range[0]"]=Ap.range[0],mn[Ap._name+".range[1]"]=Ap.range[1]}D.redrawComponents(Te,Ve)}function P1(){if(!Te._transitioningWithDuration){var Ve=Te._context.doubleClick,Mp=[];W0&&(Mp=Mp.concat(Jp)),rm&&(Mp=Mp.concat(m0)),h0.xaxes&&(Mp=Mp.concat(h0.xaxes)),h0.yaxes&&(Mp=Mp.concat(h0.yaxes));var kp={},Vp,wp;if(Ve==="reset+autosize")for(Ve="autosize",wp=0;wp<Mp.length;wp++){Vp=Mp[wp];var Ap=Vp._rangeInitial0,Yp=Vp._rangeInitial1,Fp=Ap!==void 0||Yp!==void 0;if(Fp&&(Ap!==void 0&&Ap!==Vp.range[0]||Yp!==void 0&&Yp!==Vp.range[1])||!Fp&&Vp.autorange!==!0){Ve="reset";break}}if(Ve==="autosize")for(wp=0;wp<Mp.length;wp++)Vp=Mp[wp],Vp.fixedrange||(kp[Vp._name+".autorange"]=!0);else if(Ve==="reset"){for((W0||G0.isSubplotConstrained)&&(Mp=Mp.concat(G0.xaxes)),rm&&!G0.isSubplotConstrained&&(Mp=Mp.concat(G0.yaxes)),G0.isSubplotConstrained&&(W0?rm||(Mp=Mp.concat(m0)):Mp=Mp.concat(Jp)),wp=0;wp<Mp.length;wp++)if(Vp=Mp[wp],!Vp.fixedrange){var u0=Vp._name,g0=Vp._autorangeInitial;Vp._rangeInitial0===void 0&&Vp._rangeInitial1===void 0?kp[u0+".autorange"]=!0:Vp._rangeInitial0===void 0?(kp[u0+".autorange"]=g0,kp[u0+".range"]=[null,Vp._rangeInitial1]):Vp._rangeInitial1===void 0?(kp[u0+".range"]=[Vp._rangeInitial0,null],kp[u0+".autorange"]=g0):kp[u0+".range"]=[Vp._rangeInitial0,Vp._rangeInitial1]}}Te.emit("plotly_doubleclick",null),y.call("_guiRelayout",Te,kp)}}function lg(){G1([0,0,M0,T0]),s.syncOrAsync([H.previousPromises,function(){Te._fullLayout._replotting=!1,y.call("_guiRelayout",Te,mn)}],Te)}function G1(Ve){var Mp=Te._fullLayout,kp=Mp._plots,Vp=Mp._subplots.cartesian,wp,Ap,Yp,Fp;if(Be&&y.subplotsRegistry.splom.drag(Te),Tp){for(wp=0;wp<Vp.length;wp++)if(Ap=kp[Vp[wp]],Yp=Ap.xaxis,Fp=Ap.yaxis,Ap._scene){Yp.limitRange&&Yp.limitRange(),Fp.limitRange&&Fp.limitRange();var u0=s.simpleMap(Yp.range,Yp.r2l),g0=s.simpleMap(Fp.range,Fp.r2l);Ap._scene.update({range:[u0[0],g0[0],u0[1],g0[1]]})}}if((Be||Tp)&&(L(Te),O(Te)),ft){var H0=Ve[2]/kl._length,Lm=Ve[3]/dt._length;for(wp=0;wp<Vp.length;wp++){Ap=kp[Vp[wp]],Yp=Ap.xaxis,Fp=Ap.yaxis;var Em=(um||h0.isSubplotConstrained)&&!Yp.fixedrange&&yp[Yp._id],Qm=(Uo||h0.isSubplotConstrained)&&!Fp.fixedrange&&Bp[Fp._id],xm,zm,f1,dg;if(Em?(xm=H0,f1=t0||h0.isSubplotConstrained?Ve[0]:Je(Yp,xm)):h0.xaHash[Yp._id]?(xm=H0,f1=Ve[0]*Yp._length/kl._length):h0.yaHash[Yp._id]?(xm=Lm,f1=rm==="ns"?-Ve[1]*Yp._length/dt._length:Je(Yp,xm,{n:"top",s:"bottom"}[rm])):(xm=Sm(Yp,H0,Lm),f1=Cg(Yp,xm)),xm>1&&(Yp.maxallowed!==void 0&&um===(Yp.range[0]<Yp.range[1]?"e":"w")||Yp.minallowed!==void 0&&um===(Yp.range[0]<Yp.range[1]?"w":"e"))&&(xm=1,f1=0),Qm?(zm=Lm,dg=Pp||h0.isSubplotConstrained?Ve[1]:Je(Fp,zm)):h0.yaHash[Fp._id]?(zm=Lm,dg=Ve[1]*Fp._length/dt._length):h0.xaHash[Fp._id]?(zm=H0,dg=W0==="ew"?-Ve[0]*Fp._length/kl._length:Je(Fp,zm,{e:"right",w:"left"}[W0])):(zm=Sm(Fp,H0,Lm),dg=Cg(Fp,zm)),zm>1&&(Fp.maxallowed!==void 0&&Uo===(Fp.range[0]<Fp.range[1]?"n":"s")||Fp.minallowed!==void 0&&Uo===(Fp.range[0]<Fp.range[1]?"s":"n"))&&(zm=1,dg=0),!(!xm&&!zm)){xm||(xm=1),zm||(zm=1);var E1=Yp._offset-f1/xm,Gg=Fp._offset-dg/zm;Ap.clipRect.call(k.setTranslate,f1,dg).call(k.setScale,xm,zm),Ap.plot.call(k.setTranslate,E1,Gg).call(k.setScale,1/xm,1/zm),(xm!==Ap.xScaleFactor||zm!==Ap.yScaleFactor)&&(k.setPointGroupScale(Ap.zoomScalePts,xm,zm),k.setTextPointsScale(Ap.zoomScaleTxt,xm,zm)),k.hideOutsideRangePoints(Ap.clipOnAxisFalseTraces,Ap),Ap.xScaleFactor=xm,Ap.yScaleFactor=zm}}}}function Sm(Ve,Mp,kp){return Ve.fixedrange?0:um&&G0.xaHash[Ve._id]?Mp:Uo&&(G0.isSubplotConstrained?G0.xaHash:G0.yaHash)[Ve._id]?kp:0}function Cg(Ve,Mp){return Mp?(Ve.range=Ve._r.slice(),Y(Ve,Mp),Je(Ve,Mp)):0}function Je(Ve,Mp,kp){return Ve._length*(1-Mp)*w[kp||Ve.constraintoward||"middle"]}return Qp}function Ae(Te,et,bt,dr){var Ol=s.ensureSingle(Te.draglayer,et,bt,function(Xl){Xl.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",Te.id)});return Ol.call(B,dr),Ol.node()}function Le(Te,et,bt,dr,Ol,Xl,Pp){var t0=Ae(Te,"rect",et,bt);return g.select(t0).call(k.setRect,dr,Ol,Xl,Pp),t0}function ce(Te,et){for(var bt=0;bt<Te.length;bt++)if(!Te[bt].fixedrange)return et;return""}function ke(Te,et){var bt=Te.range[et],dr=Math.abs(bt-Te.range[1-et]),Ol;return Te.type==="date"?bt:Te.type==="log"?(Ol=Math.ceil(Math.max(0,-Math.log(dr)/Math.LN10))+3,h("."+Ol+"g")(Math.pow(10,bt))):(Ol=Math.floor(Math.log(Math.abs(bt))/Math.LN10)-Math.floor(Math.log(dr)/Math.LN10)+4,h("."+String(Ol)+"g")(bt))}function Pe(Te,et,bt,dr,Ol){for(var Xl=0;Xl<Te.length;Xl++){var Pp=Te[Xl];if(!Pp.fixedrange)if(Pp.rangebreaks){var t0=Pp._id.charAt(0)==="y",Wp=t0?1-et:et,$p=t0?1-bt:bt;dr[Pp._name+".range[0]"]=Pp.l2r(Pp.p2l(Wp*Pp._length)),dr[Pp._name+".range[1]"]=Pp.l2r(Pp.p2l($p*Pp._length))}else{var Lo=Pp._rl[0],kl=Pp._rl[1]-Lo;dr[Pp._name+".range[0]"]=Pp.l2r(Lo+kl*et),dr[Pp._name+".range[1]"]=Pp.l2r(Lo+kl*bt)}}if(Ol&&Ol.length){var dt=(et+(1-bt))/2;Pe(Ol,dt,1-dt,dr,[])}}function tt(Te,et){for(var bt=0;bt<Te.length;bt++){var dr=Te[bt];if(!dr.fixedrange){if(dr.rangebreaks){var Ol=0,Xl=dr._length,Pp=dr.p2l(Ol+et)-dr.p2l(Ol),t0=dr.p2l(Xl+et)-dr.p2l(Xl),Wp=(Pp+t0)/2;dr.range=[dr.l2r(dr._rl[0]-Wp),dr.l2r(dr._rl[1]-Wp)]}else dr.range=[dr.l2r(dr._rl[0]-et/dr._m),dr.l2r(dr._rl[1]-et/dr._m)];dr.limitRange&&dr.limitRange()}}}function Ke(Te){return 1-(Te>=0?Math.min(Te,.9):1/(1/Math.max(Te,-.3)+3.222))}function nt(Te,et,bt){return Te?Te==="nsew"?bt?"":et==="pan"?"move":"crosshair":Te.toLowerCase()+"-resize":"pointer"}function yi(Te,et,bt,dr,Ol){return Te.append("path").attr("class","zoombox").style({fill:et>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",b(bt,dr)).attr("d",Ol+"Z")}function Ei(Te,et,bt){return Te.append("path").attr("class","zoombox-corners").style({fill:u.background,stroke:u.defaultLine,"stroke-width":1,opacity:0}).attr("transform",b(et,bt)).attr("d","M0,0Z")}function vs(Te,et,bt,dr,Ol,Xl){Te.attr("d",dr+"M"+bt.l+","+bt.t+"v"+bt.h+"h"+bt.w+"v-"+bt.h+"h-"+bt.w+"Z"),Se(Te,et,Ol,Xl)}function Se(Te,et,bt,dr){bt||(Te.transition().style("fill",dr>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),et.transition().style("opacity",1).duration(200))}function Ee(Te){g.select(Te).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function X(Te){ge&&Te.data&&Te._context.showTips&&(s.notifier(s._(Te,"Double-click to zoom back out"),"long"),ge=!1)}function Oe(Te,et){return"M"+(Te.l-.5)+","+(et-xe-.5)+"h-3v"+(2*xe+1)+"h3ZM"+(Te.r+.5)+","+(et-xe-.5)+"h3v"+(2*xe+1)+"h-3Z"}function Qe(Te,et){return"M"+(et-xe-.5)+","+(Te.t-.5)+"v-3h"+(2*xe+1)+"v3ZM"+(et-xe-.5)+","+(Te.b+.5)+"v3h"+(2*xe+1)+"v-3Z"}function pe(Te){var et=Math.floor(Math.min(Te.b-Te.t,Te.r-Te.l,xe)/2);return"M"+(Te.l-3.5)+","+(Te.t-.5+et)+"h3v"+-et+"h"+et+"v-3h-"+(et+3)+"ZM"+(Te.r+3.5)+","+(Te.t-.5+et)+"h-3v"+-et+"h"+-et+"v-3h"+(et+3)+"ZM"+(Te.r+3.5)+","+(Te.b+.5-et)+"h-3v"+et+"h"+-et+"v3h"+(et+3)+"ZM"+(Te.l-3.5)+","+(Te.b+.5-et)+"h3v"+et+"h"+et+"v3h-"+(et+3)+"Z"}function q(Te,et,bt,dr,Ol){for(var Xl=!1,Pp={},t0={},Wp,$p,Lo,kl,dt=(Ol||{}).xaHash,yp=(Ol||{}).yaHash,Bp=0;Bp<et.length;Bp++){var Jp=et[Bp];for(Wp in bt)if(Jp[Wp]){for(Lo in Jp)!(Ol&&(dt[Lo]||yp[Lo]))&&!(Lo.charAt(0)==="x"?bt:dr)[Lo]&&(Pp[Lo]=Wp);for($p in dr)!(Ol&&(dt[$p]||yp[$p]))&&Jp[$p]&&(Xl=!0)}for($p in dr)if(Jp[$p])for(kl in Jp)!(Ol&&(dt[kl]||yp[kl]))&&!(kl.charAt(0)==="x"?bt:dr)[kl]&&(t0[kl]=$p)}Xl&&(s.extendFlat(Pp,t0),t0={});var m0={},s0=[];for(Lo in Pp){var y0=W(Te,Lo);s0.push(y0),m0[y0._id]=y0}var M0={},T0=[];for(kl in t0){var G0=W(Te,kl);T0.push(G0),M0[G0._id]=G0}return{xaHash:m0,yaHash:M0,xaxes:s0,yaxes:T0,xLinks:Pp,yLinks:t0,isSubplotConstrained:Xl}}function ae(Te,et){if(!v)Te.onwheel!==void 0?Te.onwheel=et:Te.onmousewheel!==void 0?Te.onmousewheel=et:Te.isAddedWheelEvent||(Te.isAddedWheelEvent=!0,Te.addEventListener("wheel",et,{passive:!1}));else{var bt=Te.onwheel!==void 0?"wheel":"mousewheel";Te._onwheel&&Te.removeEventListener(bt,Te._onwheel),Te._onwheel=et,Te.addEventListener(bt,et,{passive:!1})}}function ve(Te){var et=[];for(var bt in Te)et.push(Te[bt]);return et}ue.exports={makeDragBox:ye,makeDragger:Ae,makeRectDragger:Le,makeZoombox:yi,makeCorners:Ei,updateZoombox:vs,xyCorners:pe,transitionZoombox:Se,removeZoombox:Ee,showDoubleClickNotifier:X,attachWheelEventHandler:ae}}),Qx=t(me=>{var ue=c(),g=Nv(),s=Om(),h=D1(),x=Dy().makeDragBox,v=m1().DRAGGERSIZE;me.initInteractions=function(y){var b=y._fullLayout;if(y._context.staticPlot){ue.select(y).selectAll(".drag").remove();return}if(!(!b._has("cartesian")&&!b._has("splom"))){var T=Object.keys(b._plots||{}).sort(function(k,M){if((b._plots[k].mainplot&&!0)===(b._plots[M].mainplot&&!0)){var D=k.split("y"),B=M.split("y");return D[0]===B[0]?Number(D[1]||1)-Number(B[1]||1):Number(D[0]||1)-Number(B[0]||1)}return b._plots[k].mainplot?1:-1});T.forEach(function(k){var M=b._plots[k],D=M.xaxis,B=M.yaxis;if(!M.mainplot){var P=x(y,M,D._offset,B._offset,D._length,B._length,"ns","ew");P.onmousemove=function(F){y._fullLayout._rehover=function(){y._fullLayout._hoversubplot===k&&y._fullLayout._plots[k]&&g.hover(y,F,k)},g.hover(y,F,k),y._fullLayout._lasthover=P,y._fullLayout._hoversubplot=k},P.onmouseout=function(F){y._dragging||(y._fullLayout._hoversubplot=null,s.unhover(y,F))},y._context.showAxisDragHandles&&(x(y,M,D._offset-v,B._offset-v,v,v,"n","w"),x(y,M,D._offset+D._length,B._offset-v,v,v,"n","e"),x(y,M,D._offset-v,B._offset+B._length,v,v,"s","w"),x(y,M,D._offset+D._length,B._offset+B._length,v,v,"s","e"))}if(y._context.showAxisDragHandles){if(k===D._mainSubplot){var N=D._mainLinePosition;D.side==="top"&&(N-=v),x(y,M,D._offset+D._length*.1,N,D._length*.8,v,"","ew"),x(y,M,D._offset,N,D._length*.1,v,"","w"),x(y,M,D._offset+D._length*.9,N,D._length*.1,v,"","e")}if(k===B._mainSubplot){var z=B._mainLinePosition;B.side!=="right"&&(z-=v),x(y,M,z,B._offset+B._length*.1,v,B._length*.8,"ns",""),x(y,M,z,B._offset+B._length*.9,v,B._length*.1,"s",""),x(y,M,z,B._offset,v,B._length*.1,"n","")}}});var u=b._hoverlayer.node();u.onmousemove=function(k){k.target=y._fullLayout._lasthover,g.hover(y,k,b._hoversubplot)},u.onclick=function(k){k.target=y._fullLayout._lasthover,g.click(y,k)},u.onmousedown=function(k){y._fullLayout._lasthover.onmousedown(k)},me.updateFx(y)}},me.updateFx=function(y){var b=y._fullLayout,T=b.dragmode==="pan"?"move":"crosshair";h(b._draggers,T)}}),_3=t((me,ue)=>{var g=l1();ue.exports=function(s){for(var h=g.layoutArrayContainers,x=g.layoutArrayRegexes,v=s.split("[")[0],y,b,T=0;T<x.length;T++)if(b=s.match(x[T]),b&&b.index===0){y=b[0];break}if(y||(y=h[h.indexOf(v)]),!y)return!1;var u=s.substr(y.length);return u?(b=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),b?{array:y,index:Number(b[1]),property:b[3]||""}:!1):{array:y,index:"",property:""}}}),b3=t(me=>{var ue=V(),g=Gl(),s=Hp(),h=Dg().sorterAsc,x=l1();me.containerArrayMatch=_3();var v=me.isAddVal=function(b){return b==="add"||ue(b)},y=me.isRemoveVal=function(b){return b===null||b==="remove"};me.applyContainerArrayChanges=function(b,T,u,k,M){var D=T.astr,B=x.getComponentMethod(D,"supplyLayoutDefaults"),P=x.getComponentMethod(D,"draw"),N=x.getComponentMethod(D,"drawOne"),z=k.replot||k.recalc||B===g||P===g,F=b.layout,w=b._fullLayout;if(u[""]){Object.keys(u).length>1&&s.warn("Full array edits are incompatible with other edits",D);var L=u[""][""];if(y(L))T.set(null);else if(Array.isArray(L))T.set(L);else return s.warn("Unrecognized full array edit value",D,L),!0;return z?!1:(B(F,w),P(b),!0)}var O=Object.keys(u).map(Number).sort(h),H=T.get(),W=H||[],Ce=M(w,D).get(),he=[],le=-1,Y=W.length,Re,fe,xe,ge,ye,Ae,Le,ce;for(Re=0;Re<O.length;Re++){if(xe=O[Re],ge=u[xe],ye=Object.keys(ge),Ae=ge[""],Le=v(Ae),xe<0||xe>W.length-(Le?0:1)){s.warn("index out of range",D,xe);continue}if(Ae!==void 0)ye.length>1&&s.warn("Insertion & removal are incompatible with edits to the same index.",D,xe),y(Ae)?he.push(xe):Le?(Ae==="add"&&(Ae={}),W.splice(xe,0,Ae),Ce&&Ce.splice(xe,0,{})):s.warn("Unrecognized full object edit value",D,xe,Ae),le===-1&&(le=xe);else for(fe=0;fe<ye.length;fe++)ce=D+"["+xe+"].",M(W[xe],ye[fe],ce).set(ge[ye[fe]])}for(Re=he.length-1;Re>=0;Re--)W.splice(he[Re],1),Ce&&Ce.splice(he[Re],1);if(W.length?H||T.set(W):T.set(null),z)return!1;if(B(F,w),N!==g){var ke;if(le===-1)ke=O;else{for(Y=Math.max(W.length,Y),ke=[],Re=0;Re<O.length&&(xe=O[Re],!(xe>=le));Re++)ke.push(xe);for(Re=le;Re<Y;Re++)ke.push(Re)}for(Re=0;Re<ke.length;Re++)N(b,ke[Re])}else P(b);return!0}}),w3=t(me=>{var ue=A(),g=l1(),s=Z(),h=vg(),x=N1(),v=_r(),y=x.cleanId,b=x.getFromTrace,T=g.traceIs,u=["x","y","z"];me.clearPromiseQueue=function(w){Array.isArray(w._promises)&&w._promises.length>0&&s.log("Clearing previous rejected promises from queue."),w._promises=[]},me.cleanLayout=function(w){var L;w||(w={}),w.xaxis1&&(w.xaxis||(w.xaxis=w.xaxis1),delete w.xaxis1),w.yaxis1&&(w.yaxis||(w.yaxis=w.yaxis1),delete w.yaxis1),w.scene1&&(w.scene||(w.scene=w.scene1),delete w.scene1);var O=(h.subplotsRegistry.cartesian||{}).attrRegex;(h.subplotsRegistry.polar||{}).attrRegex,(h.subplotsRegistry.ternary||{}).attrRegex,(h.subplotsRegistry.gl3d||{}).attrRegex;var H=Object.keys(w);for(L=0;L<H.length;L++){var W=H[L];if(O&&O.test(W)){var Ce=w[W];Ce.anchor&&Ce.anchor!=="free"&&(Ce.anchor=y(Ce.anchor)),Ce.overlaying&&(Ce.overlaying=y(Ce.overlaying)),Ce.type||(Ce.isdate?Ce.type="date":Ce.islog?Ce.type="log":Ce.isdate===!1&&Ce.islog===!1&&(Ce.type="linear")),(Ce.autorange==="withzero"||Ce.autorange==="tozero")&&(Ce.autorange=!0,Ce.rangemode="tozero"),Ce.insiderange&&delete Ce.range,delete Ce.islog,delete Ce.isdate,delete Ce.categories,P(Ce,"domain")&&delete Ce.domain}}var he=Array.isArray(w.annotations)?w.annotations.length:0;for(L=0;L<he;L++){var le=w.annotations[L];s.isPlainObject(le)&&(k(le,"xref"),k(le,"yref"))}var Y=Array.isArray(w.shapes)?w.shapes.length:0;for(L=0;L<Y;L++){var Re=w.shapes[L];s.isPlainObject(Re)&&(k(Re,"xref"),k(Re,"yref"))}var fe=Array.isArray(w.images)?w.images.length:0;for(L=0;L<fe;L++){var xe=w.images[L];s.isPlainObject(xe)&&(k(xe,"xref"),k(xe,"yref"))}var ge=w.legend;return ge&&(ge.x>3?(ge.x=1.02,ge.xanchor="left"):ge.x<-2&&(ge.x=-.02,ge.xanchor="right"),ge.y>3?(ge.y=1.02,ge.yanchor="bottom"):ge.y<-2&&(ge.y=-.02,ge.yanchor="top")),w.dragmode==="rotate"&&(w.dragmode="orbit"),v.clean(w),w.template&&w.template.layout&&me.cleanLayout(w.template.layout),w};function k(w,L){var O=w[L],H=L.charAt(0);O&&O!=="paper"&&(w[L]=y(O,H,!0))}me.cleanData=function(w){for(var L=0;L<w.length;L++){var O=w[L],H;if(O.type==="histogramy"&&"xbins"in O&&!("ybins"in O)&&(O.ybins=O.xbins,delete O.xbins),O.type==="histogramy"&&me.swapXYData(O),(O.type==="histogramx"||O.type==="histogramy")&&(O.type="histogram"),"scl"in O&&!("colorscale"in O)&&(O.colorscale=O.scl,delete O.scl),"reversescl"in O&&!("reversescale"in O)&&(O.reversescale=O.reversescl,delete O.reversescl),O.xaxis&&(O.xaxis=y(O.xaxis,"x")),O.yaxis&&(O.yaxis=y(O.yaxis,"y")),T(O,"gl3d")&&O.scene&&(O.scene=h.subplotsRegistry.gl3d.cleanId(O.scene)),!T(O,"pie-like")&&!T(O,"bar-like"))if(Array.isArray(O.textposition))for(H=0;H<O.textposition.length;H++)O.textposition[H]=B(O.textposition[H]);else O.textposition&&(O.textposition=B(O.textposition));var W=g.getModule(O);if(W&&W.colorbar){var Ce=W.colorbar.container,he=Ce?O[Ce]:O;he&&he.colorscale&&(he.colorscale==="YIGnBu"&&(he.colorscale="YlGnBu"),he.colorscale==="YIOrRd"&&(he.colorscale="YlOrRd"))}if(O.type==="surface"&&s.isPlainObject(O.contours)){var le=["x","y","z"];for(H=0;H<le.length;H++){var Y=O.contours[le[H]];s.isPlainObject(Y)&&(Y.highlightColor&&(Y.highlightcolor=Y.highlightColor,delete Y.highlightColor),Y.highlightWidth&&(Y.highlightwidth=Y.highlightWidth,delete Y.highlightWidth))}}if(O.type==="candlestick"||O.type==="ohlc"){var Re=(O.increasing||{}).showlegend!==!1,fe=(O.decreasing||{}).showlegend!==!1,xe=M(O.increasing),ge=M(O.decreasing);if(xe!==!1&&ge!==!1){var ye=D(xe,ge,Re,fe);ye&&(O.name=ye)}else(xe||ge)&&!O.name&&(O.name=xe||ge)}P(O,"line")&&delete O.line,"marker"in O&&(P(O.marker,"line")&&delete O.marker.line,P(O,"marker")&&delete O.marker),v.clean(O),O.autobinx&&(delete O.autobinx,delete O.xbins),O.autobiny&&(delete O.autobiny,delete O.ybins)}};function M(w){if(!s.isPlainObject(w))return!1;var L=w.name;return delete w.name,delete w.showlegend,(typeof L=="string"||typeof L=="number")&&String(L)}function D(w,L,O,H){if(O&&!H)return w;if(H&&!O||!w.trim())return L;if(!L.trim())return w;var W=Math.min(w.length,L.length),Ce;for(Ce=0;Ce<W&&w.charAt(Ce)===L.charAt(Ce);Ce++);var he=w.substr(0,Ce);return he.trim()}function B(w){var L="middle",O="center";return typeof w=="string"&&(w.indexOf("top")!==-1?L="top":w.indexOf("bottom")!==-1&&(L="bottom"),w.indexOf("left")!==-1?O="left":w.indexOf("right")!==-1&&(O="right")),L+" "+O}function P(w,L){return L in w&&typeof w[L]=="object"&&Object.keys(w[L]).length===0}me.swapXYData=function(w){var L;if(s.swapAttrs(w,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(w.z)&&Array.isArray(w.z[0])&&(w.transpose?delete w.transpose:w.transpose=!0),w.error_x&&w.error_y){var O=w.error_y,H="copy_ystyle"in O?O.copy_ystyle:!(O.color||O.thickness||O.width);s.swapAttrs(w,["error_?.copy_ystyle"]),H&&s.swapAttrs(w,["error_?.color","error_?.thickness","error_?.width"])}if(typeof w.hoverinfo=="string"){var W=w.hoverinfo.split("+");for(L=0;L<W.length;L++)W[L]==="x"?W[L]="y":W[L]==="y"&&(W[L]="x");w.hoverinfo=W.join("+")}},me.coerceTraceIndices=function(w,L){if(ue(L))return[L];if(!Array.isArray(L)||!L.length)return w.data.map(function(W,Ce){return Ce});if(Array.isArray(L)){for(var O=[],H=0;H<L.length;H++)s.isIndex(L[H],w.data.length)?O.push(L[H]):s.warn("trace index (",L[H],") is not a number or is out of bounds");return O}return L},me.manageArrayContainers=function(w,L,O){var H=w.obj,W=w.parts,Ce=W.length,he=W[Ce-1],le=ue(he);if(le&&L===null){var Y=W.slice(0,Ce-1).join("."),Re=s.nestedProperty(H,Y).get();Re.splice(he,1)}else le&&w.get()===void 0&&w.get()===void 0&&(O[w.astr]=null),w.set(L)};var N=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function z(w){var L=w.search(N);if(L>0)return w.substr(0,L)}me.hasParent=function(w,L){for(var O=z(L);O;){if(O in w)return!0;O=z(O)}return!1},me.clearAxisTypes=function(w,L,O){for(var H=0;H<L.length;H++)for(var W=w._fullData[H],Ce=0;Ce<3;Ce++){var he=b(w,W,u[Ce]);if(he&&he.type!=="log"){var le=he._name,Y=he._id.substr(1);if(Y.substr(0,5)==="scene"){if(O[Y]!==void 0)continue;le=Y+"."+le}var Re=le+".type";O[le]===void 0&&O[Re]===void 0&&s.nestedProperty(w.layout,Re).set(null)}}};var F=(w,L)=>{let O=(...H)=>H.every(W=>s.isPlainObject(W))||H.every(W=>Array.isArray(W));if([w,L].every(H=>Array.isArray(H))){if(w.length!==L.length)return!1;for(let H=0;H<w.length;H++){let W=w[H],Ce=L[H];if(W!==Ce&&!(O(W,Ce)&&F(W,Ce)))return!1}return!0}else if([w,L].every(H=>s.isPlainObject(H))){if(Object.keys(w).length!==Object.keys(L).length)return!1;for(let H in w){if(H.startsWith("_"))continue;let W=w[H],Ce=L[H];if(W!==Ce&&!(O(W,Ce)&&F(W,Ce)))return!1}return!0}return!1};me.collectionsAreEqual=F}),ob=t(me=>{var ue=c(),g=A(),s=x0(),h=Z(),x=h.nestedProperty,v=Mm(),y=km(),b=l1(),T=Xm(),u=vg(),k=mm(),M=Pm(),D=jp(),B=D0(),P=_r(),N=Qx().initInteractions,z=Hg(),F=C2().clearOutline,w=Hl().dfltConfig,L=b3(),O=w3(),H=C1(),W=vm(),Ce=m1().AX_NAME_PATTERN,he=0,le=5;function Y(Be,ft,mn,Bl){var Vl;if(Be=h.getGraphDiv(Be),v.init(Be),h.isPlainObject(ft)){var Np=ft;ft=Np.data,mn=Np.layout,Bl=Np.config,Vl=Np.frames}var Up=v.triggerHandler(Be,"plotly_beforeplot",[ft,mn,Bl]);if(Up===!1)return Promise.reject();!ft&&!mn&&!h.isPlotDiv(Be)&&h.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Be);function Qp(){if(Vl)return me.addFrames(Be,Vl)}ye(Be,Bl),mn||(mn={}),ue.select(Be).classed("js-plotly-plot",!0),B.makeTester(),Array.isArray(Be._promises)||(Be._promises=[]);var Zp=(Be.data||[]).length===0&&Array.isArray(ft);Array.isArray(ft)&&(O.cleanData(ft),Zp?Be.data=ft:Be.data.push.apply(Be.data,ft),Be.empty=!1),(!Be.layout||Zp)&&(Be.layout=O.cleanLayout(mn)),u.supplyDefaults(Be);var Kp=Be._fullLayout,R0=Kp._has("cartesian");Kp._replotting=!0,(Zp||Kp._shouldCreateBgLayer)&&(Tp(Be),Kp._shouldCreateBgLayer&&delete Kp._shouldCreateBgLayer),B.initGradients(Be),B.initPatterns(Be),Zp&&k.saveShowSpikeInitial(Be);var k0=!Be.calcdata||Be.calcdata.length!==(Be._fullData||[]).length;k0&&u.doCalcdata(Be);for(var N0=0;N0<Be.calcdata.length;N0++)Be.calcdata[N0][0].trace=Be._fullData[N0];Be._context.responsive?Be._responsiveChartHandler||(Be._responsiveChartHandler=function(){h.isHidden(Be)||u.resize(Be)},window.addEventListener("resize",Be._responsiveChartHandler)):h.clearResponsive(Be);var lm=h.extendFlat({},Kp._size),Im=0;function u1(){for(var Ym=Kp._basePlotModules,t1=0;t1<Ym.length;t1++)Ym[t1].drawFramework&&Ym[t1].drawFramework(Be);!Kp._glcanvas&&Kp._has("gl")&&(Kp._glcanvas=Kp._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(g1){return g1.key}),Kp._glcanvas.enter().append("canvas").attr("class",function(g1){return"gl-canvas gl-canvas-"+g1.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Um=Be._context.plotGlPixelRatio;if(Kp._glcanvas){Kp._glcanvas.attr("width",Kp.width*Um).attr("height",Kp.height*Um).style("width",Kp.width+"px").style("height",Kp.height+"px");var z1=Kp._glcanvas.data()[0].regl;if(z1&&(Math.floor(Kp.width*Um)!==z1._gl.drawingBufferWidth||Math.floor(Kp.height*Um)!==z1._gl.drawingBufferHeight)){var F1="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Im)h.error(F1);else return h.log(F1+" Clearing graph and plotting again."),u.cleanPlot([],{},Be._fullData,Kp),u.supplyDefaults(Be),Kp=Be._fullLayout,u.doCalcdata(Be),Im++,u1()}}return Kp.modebar.orientation==="h"?Kp._modebardiv.style("height",null).style("width","100%"):Kp._modebardiv.style("width",null).style("height",Kp.height+"px"),u.previousPromises(Be)}function v1(){if(u.clearAutoMarginIds(Be),H.drawMarginPushers(Be),k.allowAutoMargin(Be),Be._fullLayout.title.text&&Be._fullLayout.title.automargin&&u.allowAutoMargin(Be,"title.automargin"),Kp._has("pie"))for(var Ym=Be._fullData,t1=0;t1<Ym.length;t1++){var Um=Ym[t1];Um.type==="pie"&&Um.automargin&&u.allowAutoMargin(Be,"pie."+Um.uid+".automargin")}return u.doAutoMargin(Be),u.previousPromises(Be)}function b1(){if(u.didMarginChange(lm,Kp._size))return h.syncOrAsync([v1,H.layoutStyles],Be)}function Bm(){if(!k0){fm();return}return h.syncOrAsync([b.getComponentMethod("shapes","calcAutorange"),b.getComponentMethod("annotations","calcAutorange"),fm],Be)}function fm(){Be._transitioning||(H.doAutoRangeAndConstraints(Be),Zp&&k.saveRangeInitial(Be),b.getComponentMethod("rangeslider","calcAutorange")(Be))}function c1(){return k.draw(Be,Zp?"":"redraw")}var y1=[u.previousPromises,Qp,u1,v1,b1];R0&&y1.push(Bm),y1.push(H.layoutStyles),R0&&y1.push(c1,function(Ym){var t1=Ym._fullLayout._insideTickLabelsUpdaterange;if(t1)return Ym._fullLayout._insideTickLabelsUpdaterange=void 0,et(Ym,t1).then(function(){k.saveRangeInitial(Ym,!0)})}),y1.push(H.drawData,H.finalDraw,N,u.addLinks,u.rehover,u.redrag,u.reselect,u.doAutoMargin,u.previousPromises);var n1=h.syncOrAsync(y1,Be);return(!n1||!n1.then)&&(n1=Promise.resolve()),n1.then(function(){return Re(Be),Be})}function Re(Be){var ft=Be._fullLayout;ft._redrawFromAutoMarginCount?ft._redrawFromAutoMarginCount--:Be.emit("plotly_afterplot")}function fe(Be){return h.extendFlat(w,Be)}function xe(Be,ft){try{Be._fullLayout._paper.style("background",ft)}catch(mn){h.error(mn)}}function ge(Be,ft){var mn=P.combine(ft,"white");xe(Be,mn)}function ye(Be,ft){if(!Be._context){Be._context=h.extendDeep({},w);var mn=ue.select("base");Be._context._baseUrl=mn.size()&&mn.attr("href")?window.location.href.split("#")[0]:""}var Bl=Be._context,Vl,Np,Up;if(ft){for(Np=Object.keys(ft),Vl=0;Vl<Np.length;Vl++)Up=Np[Vl],!(Up==="editable"||Up==="edits")&&Up in Bl&&(Up==="setBackground"&&ft[Up]==="opaque"?Bl[Up]=ge:Bl[Up]=ft[Up]);var Qp=ft.editable;if(Qp!==void 0)for(Bl.editable=Qp,Np=Object.keys(Bl.edits),Vl=0;Vl<Np.length;Vl++)Bl.edits[Np[Vl]]=Qp;if(ft.edits)for(Np=Object.keys(ft.edits),Vl=0;Vl<Np.length;Vl++)Up=Np[Vl],Up in Bl.edits&&(Bl.edits[Up]=ft.edits[Up]);Bl._exportedPlot=ft._exportedPlot}Bl.staticPlot&&(Bl.editable=!1,Bl.edits={},Bl.autosizable=!1,Bl.scrollZoom=!1,Bl.doubleClick=!1,Bl.showTips=!1,Bl.showLink=!1,Bl.displayModeBar=!1),Bl.displayModeBar==="hover"&&!s&&(Bl.displayModeBar=!0),(Bl.setBackground==="transparent"||typeof Bl.setBackground!="function")&&(Bl.setBackground=xe),Bl._hasZeroHeight=Bl._hasZeroHeight||Be.clientHeight===0,Bl._hasZeroWidth=Bl._hasZeroWidth||Be.clientWidth===0;var Zp=Bl.scrollZoom,Kp=Bl._scrollZoom={};if(Zp===!0)Kp.cartesian=1,Kp.gl3d=1,Kp.geo=1,Kp.mapbox=1,Kp.map=1;else if(typeof Zp=="string"){var R0=Zp.split("+");for(Vl=0;Vl<R0.length;Vl++)Kp[R0[Vl]]=1}else Zp!==!1&&(Kp.gl3d=1,Kp.geo=1,Kp.mapbox=1,Kp.map=1)}function Ae(Be){if(Be=h.getGraphDiv(Be),!h.isPlotDiv(Be))throw new Error("This element is not a Plotly plot: "+Be);return O.cleanData(Be.data),O.cleanLayout(Be.layout),Be.calcdata=void 0,me._doPlot(Be).then(function(){return Be.emit("plotly_redraw"),Be})}function Le(Be,ft,mn,Bl){return Be=h.getGraphDiv(Be),u.cleanPlot([],{},Be._fullData||[],Be._fullLayout||{}),u.purge(Be),me._doPlot(Be,ft,mn,Bl)}function ce(Be,ft){var mn=ft+1,Bl=[],Vl,Np;for(Vl=0;Vl<Be.length;Vl++)Np=Be[Vl],Np<0?Bl.push(mn+Np):Bl.push(Np);return Bl}function ke(Be,ft,mn){var Bl,Vl;for(Bl=0;Bl<ft.length;Bl++){if(Vl=ft[Bl],Vl!==parseInt(Vl,10))throw new Error("all values in "+mn+" must be integers");if(Vl>=Be.data.length||Vl<-Be.data.length)throw new Error(mn+" must be valid indices for gd.data.");if(ft.indexOf(Vl,Bl+1)>-1||Vl>=0&&ft.indexOf(-Be.data.length+Vl)>-1||Vl<0&&ft.indexOf(Be.data.length+Vl)>-1)throw new Error("each index in "+mn+" must be unique.")}}function Pe(Be,ft,mn){if(!Array.isArray(Be.data))throw new Error("gd.data must be an array.");if(typeof ft>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(ft)||(ft=[ft]),ke(Be,ft,"currentIndices"),typeof mn<"u"&&!Array.isArray(mn)&&(mn=[mn]),typeof mn<"u"&&ke(Be,mn,"newIndices"),typeof mn<"u"&&ft.length!==mn.length)throw new Error("current and new indices must be of equal length.")}function tt(Be,ft,mn){var Bl,Vl;if(!Array.isArray(Be.data))throw new Error("gd.data must be an array.");if(typeof ft>"u")throw new Error("traces must be defined.");for(Array.isArray(ft)||(ft=[ft]),Bl=0;Bl<ft.length;Bl++)if(Vl=ft[Bl],typeof Vl!="object"||Array.isArray(Vl)||Vl===null)throw new Error("all values in traces array must be non-array objects");if(typeof mn<"u"&&!Array.isArray(mn)&&(mn=[mn]),typeof mn<"u"&&mn.length!==ft.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Ke(Be,ft,mn,Bl){var Vl=h.isPlainObject(Bl);if(!Array.isArray(Be.data))throw new Error("gd.data must be an array");if(!h.isPlainObject(ft))throw new Error("update must be a key:value object");if(typeof mn>"u")throw new Error("indices must be an integer or array of integers");ke(Be,mn,"indices");for(var Np in ft){if(!Array.isArray(ft[Np])||ft[Np].length!==mn.length)throw new Error("attribute "+Np+" must be an array of length equal to indices array length");if(Vl&&(!(Np in Bl)||!Array.isArray(Bl[Np])||Bl[Np].length!==ft[Np].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 correspondence with the keys and number of traces in the update object")}}function nt(Be,ft,mn,Bl){var Vl=h.isPlainObject(Bl),Np=[],Up,Qp,Zp,Kp,R0;Array.isArray(mn)||(mn=[mn]),mn=ce(mn,Be.data.length-1);for(var k0 in ft)for(var N0=0;N0<mn.length;N0++){if(Up=Be.data[mn[N0]],Zp=x(Up,k0),Qp=Zp.get(),Kp=ft[k0][N0],!h.isArrayOrTypedArray(Kp))throw new Error("attribute: "+k0+" index: "+N0+" must be an array");if(!h.isArrayOrTypedArray(Qp))throw new Error("cannot extend missing or non-array attribute: "+k0);if(Qp.constructor!==Kp.constructor)throw new Error("cannot extend array with an array of a different type: "+k0);R0=Vl?Bl[k0][N0]:Bl,g(R0)||(R0=-1),Np.push({prop:Zp,target:Qp,insert:Kp,maxp:Math.floor(R0)})}return Np}function yi(Be,ft,mn,Bl,Vl){Ke(Be,ft,mn,Bl);for(var Np=nt(Be,ft,mn,Bl),Up={},Qp={},Zp=0;Zp<Np.length;Zp++){var Kp=Np[Zp].prop,R0=Np[Zp].maxp,k0=Vl(Np[Zp].target,Np[Zp].insert,R0);Kp.set(k0[0]),Array.isArray(Up[Kp.astr])||(Up[Kp.astr]=[]),Up[Kp.astr].push(k0[1]),Array.isArray(Qp[Kp.astr])||(Qp[Kp.astr]=[]),Qp[Kp.astr].push(Np[Zp].target.length)}return{update:Up,maxPoints:Qp}}function Ei(Be,ft){var mn=new Be.constructor(Be.length+ft.length);return mn.set(Be),mn.set(ft,Be.length),mn}function vs(Be,ft,mn,Bl){Be=h.getGraphDiv(Be);function Vl(Zp,Kp,R0){var k0,N0;if(h.isTypedArray(Zp))if(R0<0){var lm=new Zp.constructor(0),Im=Ei(Zp,Kp);R0<0?(k0=Im,N0=lm):(k0=lm,N0=Im)}else if(k0=new Zp.constructor(R0),N0=new Zp.constructor(Zp.length+Kp.length-R0),R0===Kp.length)k0.set(Kp),N0.set(Zp);else if(R0<Kp.length){var u1=Kp.length-R0;k0.set(Kp.subarray(u1)),N0.set(Zp),N0.set(Kp.subarray(0,u1),Zp.length)}else{var v1=R0-Kp.length,b1=Zp.length-v1;k0.set(Zp.subarray(b1)),k0.set(Kp,v1),N0.set(Zp.subarray(0,b1))}else k0=Zp.concat(Kp),N0=R0>=0&&R0<k0.length?k0.splice(0,k0.length-R0):[];return[k0,N0]}var Np=yi(Be,ft,mn,Bl,Vl),Up=me.redraw(Be),Qp=[Be,Np.update,mn,Np.maxPoints];return y.add(Be,me.prependTraces,Qp,vs,arguments),Up}function Se(Be,ft,mn,Bl){Be=h.getGraphDiv(Be);function Vl(Zp,Kp,R0){var k0,N0;if(h.isTypedArray(Zp))if(R0<=0){var lm=new Zp.constructor(0),Im=Ei(Kp,Zp);R0<0?(k0=Im,N0=lm):(k0=lm,N0=Im)}else if(k0=new Zp.constructor(R0),N0=new Zp.constructor(Zp.length+Kp.length-R0),R0===Kp.length)k0.set(Kp),N0.set(Zp);else if(R0<Kp.length){var u1=Kp.length-R0;k0.set(Kp.subarray(0,u1)),N0.set(Kp.subarray(u1)),N0.set(Zp,u1)}else{var v1=R0-Kp.length;k0.set(Kp),k0.set(Zp.subarray(0,v1),Kp.length),N0.set(Zp.subarray(v1))}else k0=Kp.concat(Zp),N0=R0>=0&&R0<k0.length?k0.splice(R0,k0.length):[];return[k0,N0]}var Np=yi(Be,ft,mn,Bl,Vl),Up=me.redraw(Be),Qp=[Be,Np.update,mn,Np.maxPoints];return y.add(Be,me.extendTraces,Qp,Se,arguments),Up}function Ee(Be,ft,mn){Be=h.getGraphDiv(Be);var Bl=[],Vl=me.deleteTraces,Np=Ee,Up=[Be,Bl],Qp=[Be,ft],Zp,Kp;for(tt(Be,ft,mn),Array.isArray(ft)||(ft=[ft]),ft=ft.map(function(R0){return h.extendFlat({},R0)}),O.cleanData(ft),Zp=0;Zp<ft.length;Zp++)Be.data.push(ft[Zp]);for(Zp=0;Zp<ft.length;Zp++)Bl.push(-ft.length+Zp);if(typeof mn>"u")return Kp=me.redraw(Be),y.add(Be,Vl,Up,Np,Qp),Kp;Array.isArray(mn)||(mn=[mn]);try{Pe(Be,Bl,mn)}catch(R0){throw Be.data.splice(Be.data.length-ft.length,ft.length),R0}return y.startSequence(Be),y.add(Be,Vl,Up,Np,Qp),Kp=me.moveTraces(Be,Bl,mn),y.stopSequence(Be),Kp}function X(Be,ft){Be=h.getGraphDiv(Be);var mn=[],Bl=me.addTraces,Vl=X,Np=[Be,mn,ft],Up=[Be,ft],Qp,Zp;if(typeof ft>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(ft)||(ft=[ft]),ke(Be,ft,"indices"),ft=ce(ft,Be.data.length-1),ft.sort(h.sorterDes),Qp=0;Qp<ft.length;Qp+=1)Zp=Be.data.splice(ft[Qp],1)[0],mn.push(Zp);var Kp=me.redraw(Be);return y.add(Be,Bl,Np,Vl,Up),Kp}function Oe(Be,ft,mn){Be=h.getGraphDiv(Be);var Bl=[],Vl=[],Np=Oe,Up=Oe,Qp=[Be,mn,ft],Zp=[Be,ft,mn],Kp;if(Pe(Be,ft,mn),ft=Array.isArray(ft)?ft:[ft],typeof mn>"u")for(mn=[],Kp=0;Kp<ft.length;Kp++)mn.push(-ft.length+Kp);for(mn=Array.isArray(mn)?mn:[mn],ft=ce(ft,Be.data.length-1),mn=ce(mn,Be.data.length-1),Kp=0;Kp<Be.data.length;Kp++)ft.indexOf(Kp)===-1&&Bl.push(Be.data[Kp]);for(Kp=0;Kp<ft.length;Kp++)Vl.push({newIndex:mn[Kp],trace:Be.data[ft[Kp]]});for(Vl.sort(function(k0,N0){return k0.newIndex-N0.newIndex}),Kp=0;Kp<Vl.length;Kp+=1)Bl.splice(Vl[Kp].newIndex,0,Vl[Kp].trace);Be.data=Bl;var R0=me.redraw(Be);return y.add(Be,Np,Qp,Up,Zp),R0}function Qe(Be,ft,mn,Bl){Be=h.getGraphDiv(Be),O.clearPromiseQueue(Be);var Vl={};if(typeof ft=="string")Vl[ft]=mn;else if(h.isPlainObject(ft))Vl=h.extendFlat({},ft),Bl===void 0&&(Bl=mn);else return h.warn("Restyle fail.",ft,mn,Bl),Promise.reject();Object.keys(Vl).length&&(Be.changed=!0);var Np=O.coerceTraceIndices(Be,Bl),Up=Te(Be,Vl,Np),Qp=Up.flags;Qp.calc&&(Be.calcdata=void 0),Qp.clearAxisTypes&&O.clearAxisTypes(Be,Np,{});var Zp=[];Qp.fullReplot?Zp.push(me._doPlot):(Zp.push(u.previousPromises),u.supplyDefaults(Be),Qp.markerSize&&(u.doCalcdata(Be),dr(Zp)),Qp.style&&Zp.push(H.doTraceStyle),Qp.colorbars&&Zp.push(H.doColorBars),Zp.push(Re)),Zp.push(u.rehover,u.redrag,u.reselect),y.add(Be,Qe,[Be,Up.undoit,Up.traces],Qe,[Be,Up.redoit,Up.traces]);var Kp=h.syncOrAsync(Zp,Be);return(!Kp||!Kp.then)&&(Kp=Promise.resolve()),Kp.then(function(){return Be.emit("plotly_restyle",Up.eventData),Be})}function pe(Be){return Be===void 0?null:Be}function q(Be,ft){return ft?function(mn,Bl,Vl){var Np=x(mn,Bl),Up=Np.set;return Np.set=function(Qp){var Zp=(Vl||"")+Bl;ae(Zp,Np.get(),Qp,Be),Up(Qp)},Np}:x}function ae(Be,ft,mn,Bl){if(Array.isArray(ft)||Array.isArray(mn))for(var Vl=Array.isArray(ft)?ft:[],Np=Array.isArray(mn)?mn:[],Up=Math.max(Vl.length,Np.length),Qp=0;Qp<Up;Qp++)ae(Be+"["+Qp+"]",Vl[Qp],Np[Qp],Bl);else if(h.isPlainObject(ft)||h.isPlainObject(mn)){var Zp=h.isPlainObject(ft)?ft:{},Kp=h.isPlainObject(mn)?mn:{},R0=h.extendFlat({},Zp,Kp);for(var k0 in R0)ae(Be+"."+k0,Zp[k0],Kp[k0],Bl)}else Bl[Be]===void 0&&(Bl[Be]=pe(ft))}function ve(Be,ft,mn){for(var Bl in mn){var Vl=x(Be,Bl);ae(Bl,Vl.get(),mn[Bl],ft)}}function Te(Be,ft,mn){var Bl=Be._fullLayout,Vl=Be._fullData,Np=Be.data,Up=Bl._guiEditing,Qp=q(Bl._preGUI,Up),Zp=h.extendDeepAll({},ft),Kp,R0=W.traceFlags(),k0={},N0={},lm;function Im(){return mn.map(function(){})}function u1(g0){var H0=k.id2name(g0);lm.indexOf(H0)===-1&&lm.push(H0)}function v1(g0){return"LAYOUT"+g0+".autorange"}function b1(g0){return"LAYOUT"+g0+".range"}function Bm(g0){for(var H0=g0;H0<Vl.length;H0++)if(Vl[H0]._input===Np[g0])return Vl[H0]}function fm(g0,H0,Lm){if(Array.isArray(g0)){g0.forEach(function(zm){fm(zm,H0,Lm)});return}if(!(g0 in ft||O.hasParent(ft,g0))){var Em;if(g0.substr(0,6)==="LAYOUT")Em=Qp(Be.layout,g0.replace("LAYOUT",""));else{var Qm=mn[Lm],xm=Bl._tracePreGUI[Bm(Qm)._fullInput.uid];Em=q(xm,Up)(Np[Qm],g0)}g0 in N0||(N0[g0]=Im()),N0[g0][Lm]===void 0&&(N0[g0][Lm]=pe(Em.get())),H0!==void 0&&Em.set(H0)}}function c1(g0){return function(H0){return Vl[H0][g0]}}function y1(g0){return function(H0,Lm){return H0===!1?Vl[mn[Lm]][g0]:null}}for(var n1 in ft){if(O.hasParent(ft,n1))throw new Error("cannot set "+n1+" and a parent attribute simultaneously");var Ym=ft[n1],t1,Um,z1,F1,g1,V1;if((n1==="autobinx"||n1==="autobiny")&&(n1=n1.charAt(n1.length-1)+"bins",Array.isArray(Ym)?Ym=Ym.map(y1(n1)):Ym===!1?Ym=mn.map(c1(n1)):Ym=null),k0[n1]=Ym,n1.substr(0,6)==="LAYOUT"){z1=Qp(Be.layout,n1.replace("LAYOUT","")),N0[n1]=[pe(z1.get())],z1.set(Array.isArray(Ym)?Ym[0]:Ym),R0.calc=!0;continue}for(N0[n1]=Im(),Kp=0;Kp<mn.length;Kp++){t1=Np[mn[Kp]],Um=Bm(mn[Kp]);var K1=Bl._tracePreGUI[Um._fullInput.uid];if(z1=q(K1,Up)(t1,n1),F1=z1.get(),g1=Array.isArray(Ym)?Ym[Kp%Ym.length]:Ym,g1!==void 0){var ig=z1.parts[z1.parts.length-1],mg=n1.substr(0,n1.length-ig.length-1),P1=mg?mg+".":"",lg=mg?x(Um,mg).get():Um;if(V1=T.getTraceValObject(Um,z1.parts),V1&&V1.impliedEdits&&g1!==null)for(var G1 in V1.impliedEdits)fm(h.relativeAttr(n1,G1),V1.impliedEdits[G1],Kp);else if((ig==="thicknessmode"||ig==="lenmode")&&F1!==g1&&(g1==="fraction"||g1==="pixels")&&lg){var Sm=Bl._size,Cg=lg.orient,Je=Cg==="top"||Cg==="bottom";if(ig==="thicknessmode"){var Ve=Je?Sm.h:Sm.w;fm(P1+"thickness",lg.thickness*(g1==="fraction"?1/Ve:Ve),Kp)}else{var Mp=Je?Sm.w:Sm.h;fm(P1+"len",lg.len*(g1==="fraction"?1/Mp:Mp),Kp)}}else if(n1==="type"&&(g1==="pie"!=(F1==="pie")||g1==="funnelarea"!=(F1==="funnelarea"))){var kp="x",Vp="y";(g1==="bar"||F1==="bar")&&t1.orientation==="h"&&(kp="y",Vp="x"),h.swapAttrs(t1,["?","?src"],"labels",kp),h.swapAttrs(t1,["d?","?0"],"label",kp),h.swapAttrs(t1,["?","?src"],"values",Vp),F1==="pie"||F1==="funnelarea"?(x(t1,"marker.color").set(x(t1,"marker.colors").get()),Bl._pielayer.selectAll("g.trace").remove()):b.traceIs(t1,"cartesian")&&x(t1,"marker.colors").set(x(t1,"marker.color").get())}N0[n1][Kp]=pe(F1);var wp=["swapxy","swapxyaxes","orientation","orientationaxes"];if(wp.indexOf(n1)!==-1){if(n1==="orientation"){z1.set(g1);var Ap=t1.x&&!t1.y?"h":"v";if((z1.get()||Ap)===Um.orientation)continue}else n1==="orientationaxes"&&(t1.orientation={v:"h",h:"v"}[Um.orientation]);O.swapXYData(t1),R0.calc=R0.clearAxisTypes=!0}else u.dataArrayContainers.indexOf(z1.parts[0])!==-1?(O.manageArrayContainers(z1,g1,N0),R0.calc=!0):(V1?V1.arrayOk&&!b.traceIs(Um,"regl")&&(h.isArrayOrTypedArray(g1)||h.isArrayOrTypedArray(F1))?R0.calc=!0:W.update(R0,V1):R0.calc=!0,z1.set(g1))}}if(["swapxyaxes","orientationaxes"].indexOf(n1)!==-1&&k.swap(Be,mn),n1==="orientationaxes"){var Yp=x(Be.layout,"hovermode"),Fp=Yp.get();Fp==="x"?Yp.set("y"):Fp==="y"?Yp.set("x"):Fp==="x unified"?Yp.set("y unified"):Fp==="y unified"&&Yp.set("x unified")}if(["orientation","type"].indexOf(n1)!==-1){for(lm=[],Kp=0;Kp<mn.length;Kp++){var u0=Np[mn[Kp]];b.traceIs(u0,"cartesian")&&(u1(u0.xaxis||"x"),u1(u0.yaxis||"y"))}fm(lm.map(v1),!0,0),fm(lm.map(b1),[0,1],0)}}return(R0.calc||R0.plot)&&(R0.fullReplot=!0),{flags:R0,undoit:N0,redoit:k0,traces:mn,eventData:h.extendDeepNoArrays([],[Zp,mn])}}function et(Be,ft,mn){Be=h.getGraphDiv(Be),O.clearPromiseQueue(Be);var Bl={};if(typeof ft=="string")Bl[ft]=mn;else if(h.isPlainObject(ft))Bl=h.extendFlat({},ft);else return h.warn("Relayout fail.",ft,mn),Promise.reject();Object.keys(Bl).length&&(Be.changed=!0);var Vl=t0(Be,Bl),Np=Vl.flags;Np.calc&&(Be.calcdata=void 0);var Up=[u.previousPromises];Np.layoutReplot?Up.push(H.layoutReplot):Object.keys(Bl).length&&(bt(Be,Np,Vl)||u.supplyDefaults(Be),Np.legend&&Up.push(H.doLegend),Np.layoutstyle&&Up.push(H.layoutStyles),Np.axrange&&dr(Up,Vl.rangesAltered),Np.ticks&&Up.push(H.doTicksRelayout),Np.modebar&&Up.push(H.doModeBar),Np.camera&&Up.push(H.doCamera),Np.colorbars&&Up.push(H.doColorBars),Up.push(Re)),Up.push(u.rehover,u.redrag,u.reselect),y.add(Be,et,[Be,Vl.undoit],et,[Be,Vl.redoit]);var Qp=h.syncOrAsync(Up,Be);return(!Qp||!Qp.then)&&(Qp=Promise.resolve(Be)),Qp.then(function(){return Be.emit("plotly_relayout",Vl.eventData),Be})}function bt(Be,ft,mn){var Bl=Be._fullLayout;if(!ft.axrange)return!1;for(var Vl in ft)if(Vl!=="axrange"&&ft[Vl])return!1;var Np,Up,Qp=function(lm,Im){return h.coerce(Np,Up,D,lm,Im)},Zp={};for(var Kp in mn.rangesAltered){var R0=k.id2name(Kp);if(Np=Be.layout[R0],Up=Bl[R0],M(Np,Up,Qp,Zp),Up._matchGroup){for(var k0 in Up._matchGroup)if(k0!==Kp){var N0=Bl[k.id2name(k0)];N0.autorange=Up.autorange,N0.range=Up.range.slice(),N0._input.range=Up.range.slice()}}}return!0}function dr(Be,ft){var mn=ft?function(Bl){var Vl=[],Np=!0;for(var Up in ft){var Qp=k.getFromId(Bl,Up);if(Vl.push(Up),(Qp.ticklabelposition||"").indexOf("inside")!==-1&&Qp._anchorAxis&&Vl.push(Qp._anchorAxis._id),Qp._matchGroup)for(var Zp in Qp._matchGroup)ft[Zp]||Vl.push(Zp)}return k.draw(Bl,Vl,{skipTitle:Np})}:function(Bl){return k.draw(Bl,"redraw")};Be.push(F,H.doAutoRangeAndConstraints,mn,H.drawData,H.finalDraw)}var Ol=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Xl=/^[xyz]axis[0-9]*\.autorange$/,Pp=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function t0(Be,ft){var mn=Be.layout,Bl=Be._fullLayout,Vl=Bl._guiEditing,Np=q(Bl._preGUI,Vl),Up=Object.keys(ft),Qp=k.list(Be),Zp=h.extendDeepAll({},ft),Kp={},R0,k0,N0;for(Up=Object.keys(ft),k0=0;k0<Up.length;k0++)if(Up[k0].indexOf("allaxes")===0){for(N0=0;N0<Qp.length;N0++){var lm=Qp[N0]._id.substr(1),Im=lm.indexOf("scene")!==-1?lm+".":"",u1=Up[k0].replace("allaxes",Im+Qp[N0]._name);ft[u1]||(ft[u1]=ft[Up[k0]])}delete ft[Up[k0]]}var v1=W.layoutFlags(),b1={},Bm={};function fm(xm,zm){if(Array.isArray(xm)){xm.forEach(function(dg){fm(dg,zm)});return}if(!(xm in ft||O.hasParent(ft,xm))){var f1=Np(mn,xm);xm in Bm||(Bm[xm]=pe(f1.get())),zm!==void 0&&f1.set(zm)}}var c1={},y1;function n1(xm){var zm=k.name2id(xm.split(".")[0]);return c1[zm]=1,zm}for(var Ym in ft){if(O.hasParent(ft,Ym))throw new Error("cannot set "+Ym+" and a parent attribute simultaneously");for(var t1=Np(mn,Ym),Um=ft[Ym],z1=t1.parts.length,F1=z1-1;F1>0&&typeof t1.parts[F1]!="string";)F1--;var g1=t1.parts[F1],V1=t1.parts[F1-1]+"."+g1,K1=t1.parts.slice(0,F1).join("."),ig=x(Be.layout,K1).get(),mg=x(Bl,K1).get(),P1=t1.get();if(Um!==void 0){b1[Ym]=Um,Bm[Ym]=g1==="reverse"?Um:pe(P1);var lg=T.getLayoutValObject(Bl,t1.parts);if(lg&&lg.impliedEdits&&Um!==null)for(var G1 in lg.impliedEdits)fm(h.relativeAttr(Ym,G1),lg.impliedEdits[G1]);if(["width","height"].indexOf(Ym)!==-1)if(Um){fm("autosize",null);var Sm=Ym==="height"?"width":"height";fm(Sm,Bl[Sm])}else Bl[Ym]=Be._initialAutoSize[Ym];else if(Ym==="autosize")fm("width",Um?null:Bl.width),fm("height",Um?null:Bl.height);else if(V1.match(Ol))n1(V1),x(Bl,K1+"._inputRange").set(null);else if(V1.match(Xl)){n1(V1),x(Bl,K1+"._inputRange").set(null);var Cg=x(Bl,K1).get();Cg._inputDomain&&(Cg._input.domain=Cg._inputDomain.slice())}else V1.match(Pp)&&x(Bl,K1+"._inputDomain").set(null);if(g1==="type"){y1=ig;var Je=mg.type==="linear"&&Um==="log",Ve=mg.type==="log"&&Um==="linear";if(Je||Ve){if(!y1||!y1.range)fm(K1+".autorange",!0);else if(mg.autorange)Je&&(y1.range=y1.range[1]>y1.range[0]?[1,2]:[2,1]);else{var Mp=y1.range[0],kp=y1.range[1];Je?(Mp<=0&&kp<=0&&fm(K1+".autorange",!0),Mp<=0?Mp=kp/1e6:kp<=0&&(kp=Mp/1e6),fm(K1+".range[0]",Math.log(Mp)/Math.LN10),fm(K1+".range[1]",Math.log(kp)/Math.LN10)):(fm(K1+".range[0]",Math.pow(10,Mp)),fm(K1+".range[1]",Math.pow(10,kp)))}Array.isArray(Bl._subplots.polar)&&Bl._subplots.polar.length&&Bl[t1.parts[0]]&&t1.parts[1]==="radialaxis"&&delete Bl[t1.parts[0]]._subplot.viewInitial["radialaxis.range"],b.getComponentMethod("annotations","convertCoords")(Be,mg,Um,fm),b.getComponentMethod("images","convertCoords")(Be,mg,Um,fm)}else fm(K1+".autorange",!0),fm(K1+".range",null);x(Bl,K1+"._inputRange").set(null)}else if(g1.match(Ce)){var Vp=x(Bl,Ym).get(),wp=(Um||{}).type;(!wp||wp==="-")&&(wp="linear"),b.getComponentMethod("annotations","convertCoords")(Be,Vp,wp,fm),b.getComponentMethod("images","convertCoords")(Be,Vp,wp,fm)}var Ap=L.containerArrayMatch(Ym);if(Ap){R0=Ap.array,k0=Ap.index;var Yp=Ap.property,Fp=lg||{editType:"calc"};k0!==""&&Yp===""&&(L.isAddVal(Um)?Bm[Ym]=null:L.isRemoveVal(Um)?Bm[Ym]=(x(mn,R0).get()||[])[k0]:h.warn("unrecognized full object value",ft)),W.update(v1,Fp),Kp[R0]||(Kp[R0]={});var u0=Kp[R0][k0];u0||(u0=Kp[R0][k0]={}),u0[Yp]=Um,delete ft[Ym]}else g1==="reverse"?(ig.range?ig.range.reverse():(fm(K1+".autorange",!0),ig.range=[1,0]),mg.autorange?v1.calc=!0:v1.plot=!0):(Ym==="dragmode"&&(Um===!1&&P1!==!1||Um!==!1&&P1===!1)||Bl._has("scatter-like")&&Bl._has("regl")&&Ym==="dragmode"&&(Um==="lasso"||Um==="select")&&!(P1==="lasso"||P1==="select")?v1.plot=!0:lg?W.update(v1,lg):v1.calc=!0,t1.set(Um))}}for(R0 in Kp){var g0=L.applyContainerArrayChanges(Be,Np(mn,R0),Kp[R0],v1,Np);g0||(v1.plot=!0)}for(var H0 in c1){y1=k.getFromId(Be,H0);var Lm=y1&&y1._constraintGroup;if(Lm){v1.calc=!0;for(var Em in Lm)c1[Em]||(k.getFromId(Be,Em)._constraintShrinkable=!0)}}(Wp(Be)||ft.height||ft.width)&&(v1.plot=!0);var Qm=Bl.shapes;for(k0=0;k0<Qm.length;k0++)if(Qm[k0].showlegend){v1.calc=!0;break}return(v1.plot||v1.calc)&&(v1.layoutReplot=!0),{flags:v1,rangesAltered:c1,undoit:Bm,redoit:b1,eventData:Zp}}function Wp(Be){var ft=Be._fullLayout,mn=ft.width,Bl=ft.height;return Be.layout.autosize&&u.plotAutoSize(Be,Be.layout,ft),ft.width!==mn||ft.height!==Bl}function $p(Be,ft,mn,Bl){Be=h.getGraphDiv(Be),O.clearPromiseQueue(Be),h.isPlainObject(ft)||(ft={}),h.isPlainObject(mn)||(mn={}),Object.keys(ft).length&&(Be.changed=!0),Object.keys(mn).length&&(Be.changed=!0);var Vl=O.coerceTraceIndices(Be,Bl),Np=Te(Be,h.extendFlat({},ft),Vl),Up=Np.flags,Qp=t0(Be,h.extendFlat({},mn)),Zp=Qp.flags;(Up.calc||Zp.calc)&&(Be.calcdata=void 0),Up.clearAxisTypes&&O.clearAxisTypes(Be,Vl,mn);var Kp=[];Zp.layoutReplot?Kp.push(H.layoutReplot):Up.fullReplot?Kp.push(me._doPlot):(Kp.push(u.previousPromises),bt(Be,Zp,Qp)||u.supplyDefaults(Be),Up.style&&Kp.push(H.doTraceStyle),(Up.colorbars||Zp.colorbars)&&Kp.push(H.doColorBars),Zp.legend&&Kp.push(H.doLegend),Zp.layoutstyle&&Kp.push(H.layoutStyles),Zp.axrange&&dr(Kp,Qp.rangesAltered),Zp.ticks&&Kp.push(H.doTicksRelayout),Zp.modebar&&Kp.push(H.doModeBar),Zp.camera&&Kp.push(H.doCamera),Kp.push(Re)),Kp.push(u.rehover,u.redrag,u.reselect),y.add(Be,$p,[Be,Np.undoit,Qp.undoit,Np.traces],$p,[Be,Np.redoit,Qp.redoit,Np.traces]);var R0=h.syncOrAsync(Kp,Be);return(!R0||!R0.then)&&(R0=Promise.resolve(Be)),R0.then(function(){return Be.emit("plotly_update",{data:Np.eventData,layout:Qp.eventData}),Be})}function Lo(Be){return function(ft){ft._fullLayout._guiEditing=!0;var mn=Be.apply(null,arguments);return ft._fullLayout._guiEditing=!1,mn}}var kl=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],dt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function yp(Be,ft){for(var mn=0;mn<ft.length;mn++){var Bl=ft[mn],Vl=Be.match(Bl.pattern);if(Vl){var Np=Vl[1]||"";return{head:Np,tail:Be.substr(Np.length+1),attr:Bl.attr}}}}function Bp(Be,ft){var mn=x(ft,Be).get();if(mn!==void 0)return mn;var Bl=Be.split(".");for(Bl.pop();Bl.length>1;)if(Bl.pop(),mn=x(ft,Bl.join(".")+".uirevision").get(),mn!==void 0)return mn;return ft.uirevision}function Jp(Be,ft){for(var mn=0;mn<ft.length;mn++)if(ft[mn]._fullInput.uid===Be)return mn;return-1}function m0(Be,ft,mn){for(var Bl=0;Bl<ft.length;Bl++)if(ft[Bl].uid===Be)return Bl;return!ft[mn]||ft[mn].uid?-1:mn}function s0(Be,ft){var mn=h.isPlainObject(Be),Bl=Array.isArray(Be);return mn||Bl?(mn&&h.isPlainObject(ft)||Bl&&Array.isArray(ft))&&JSON.stringify(Be)===JSON.stringify(ft):Be===ft}function y0(Be,ft,mn,Bl){var Vl=Bl._preGUI,Np,Up,Qp,Zp,Kp,R0,k0,N0,lm,Im,u1=[],v1={},b1={};for(Np in Vl){if(Kp=yp(Np,kl),Kp){if(lm=Kp.head,Im=Kp.tail,Up=Kp.attr||lm+".uirevision",Qp=x(Bl,Up).get(),Zp=Qp&&Bp(Up,ft),Zp&&Zp===Qp){if(R0=Vl[Np],R0===null&&(R0=void 0),k0=x(ft,Np),N0=k0.get(),s0(N0,R0)){N0===void 0&&Im==="autorange"&&u1.push(lm),k0.set(pe(x(Bl,Np).get()));continue}else if(Im==="autorange"||Im.substr(0,6)==="range["){var Bm=Vl[lm+".range[0]"],fm=Vl[lm+".range[1]"],c1=Vl[lm+".autorange"];if(c1||c1===null&&Bm===null&&fm===null){if(!(lm in v1)){var y1=x(ft,lm).get();v1[lm]=y1&&(y1.autorange||y1.autorange!==!1&&(!y1.range||y1.range.length!==2))}if(v1[lm]){k0.set(pe(x(Bl,Np).get()));continue}}}}}else h.warn("unrecognized GUI edit: "+Np);delete Vl[Np],Kp&&Kp.tail.substr(0,6)==="range["&&(b1[Kp.head]=1)}for(var n1=0;n1<u1.length;n1++){var Ym=u1[n1];if(b1[Ym]){var t1=x(ft,Ym).get();t1&&delete t1.autorange}}var Um=Bl._tracePreGUI;for(var z1 in Um){var F1=Um[z1],g1=null,V1;for(Np in F1){if(!g1){var K1=Jp(z1,mn);if(K1<0){delete Um[z1];break}var ig=mn[K1];V1=ig._fullInput;var mg=m0(z1,Be,V1.index);if(mg<0){delete Um[z1];break}g1=Be[mg]}if(Kp=yp(Np,dt),Kp){if(Kp.attr?(Qp=x(Bl,Kp.attr).get(),Zp=Qp&&Bp(Kp.attr,ft)):(Qp=V1.uirevision,Zp=g1.uirevision,Zp===void 0&&(Zp=ft.uirevision)),Zp&&Zp===Qp&&(R0=F1[Np],R0===null&&(R0=void 0),k0=x(g1,Np),N0=k0.get(),s0(N0,R0))){k0.set(pe(x(V1,Np).get()));continue}}else h.warn("unrecognized GUI edit: "+Np+" in trace uid "+z1);delete F1[Np]}}}function M0(Be,ft,mn,Bl){var Vl,Np;function Up(){return me.addFrames(Be,Vl)}Be=h.getGraphDiv(Be),O.clearPromiseQueue(Be);var Qp=Be._fullData,Zp=Be._fullLayout;if(!h.isPlotDiv(Be)||!Qp||!Zp)Np=me.newPlot(Be,ft,mn,Bl);else{if(h.isPlainObject(ft)){var Kp=ft;ft=Kp.data,mn=Kp.layout,Bl=Kp.config,Vl=Kp.frames}var R0=!1;if(Bl){let V1=h.extendDeepAll({},Be._context);Be._context=void 0,ye(Be,Bl),R0=!O.collectionsAreEqual(V1,Be._context)}if(R0){let V1=Be._ev.eventNames().map(K1=>[K1,Be._ev.listeners(K1)]);Np=me.newPlot(Be,ft,mn,Bl).then(()=>{for(let[K1,ig]of V1)ig.forEach(mg=>Be.on(K1,mg));return me.react(Be,ft,mn,Bl)})}else{Be.data=ft||[],O.cleanData(Be.data),Be.layout=mn||{},O.cleanLayout(Be.layout),y0(Be.data,Be.layout,Qp,Zp),u.supplyDefaults(Be,{skipUpdateCalc:!0});var k0=Be._fullData,N0=Be._fullLayout,lm=N0.datarevision===void 0,Im=N0.transition,u1=G0(Be,Zp,N0,lm,Im),v1=u1.newDataRevision,b1=T0(Be,Qp,k0,lm,Im,v1);if(Wp(Be)&&(u1.layoutReplot=!0),b1.calc||u1.calc){Be.calcdata=void 0;for(var Bm=Object.getOwnPropertyNames(N0),fm=0;fm<Bm.length;fm++){var c1=Bm[fm],y1=c1.substring(0,5);if(y1==="xaxis"||y1==="yaxis"){var n1=N0[c1]._emptyCategories;n1&&n1()}}}else u.supplyDefaultsUpdateCalc(Be.calcdata,k0);var Ym=[];if(Vl&&(Be._transitionData={},u.createTransitionData(Be),Ym.push(Up)),N0.transition&&(b1.anim||u1.anim))u1.ticks&&Ym.push(H.doTicksRelayout),u.doCalcdata(Be),H.doAutoRangeAndConstraints(Be),Ym.push(function(){return u.transitionFromReact(Be,b1,u1,Zp)});else if(b1.fullReplot||u1.layoutReplot)Be._fullLayout._skipDefaults=!0,Ym.push(me._doPlot);else{for(var t1 in u1.arrays){var Um=u1.arrays[t1];if(Um.length){var z1=b.getComponentMethod(t1,"drawOne");if(z1!==h.noop)for(var F1=0;F1<Um.length;F1++)z1(Be,Um[F1]);else{var g1=b.getComponentMethod(t1,"draw");if(g1===h.noop)throw new Error("cannot draw components: "+t1);g1(Be)}}}Ym.push(u.previousPromises),b1.style&&Ym.push(H.doTraceStyle),(b1.colorbars||u1.colorbars)&&Ym.push(H.doColorBars),u1.legend&&Ym.push(H.doLegend),u1.layoutstyle&&Ym.push(H.layoutStyles),u1.axrange&&dr(Ym),u1.ticks&&Ym.push(H.doTicksRelayout),u1.modebar&&Ym.push(H.doModeBar),u1.camera&&Ym.push(H.doCamera),Ym.push(Re)}Ym.push(u.rehover,u.redrag,u.reselect),Np=h.syncOrAsync(Ym,Be),(!Np||!Np.then)&&(Np=Promise.resolve(Be))}}return Np.then(()=>(R0||Be.emit("plotly_react",{config:Bl,data:ft,layout:mn}),Be))}function T0(Be,ft,mn,Bl,Vl,Np){var Up=ft.length===mn.length;if(!Vl&&!Up)return{fullReplot:!0,calc:!0};var Qp=W.traceFlags();Qp.arrays={},Qp.nChanges=0,Qp.nChangesAnim=0;var Zp,Kp;function R0(lm){var Im=T.getTraceValObject(Kp,lm);return!Kp._module.animatable&&Im.anim&&(Im.anim=!1),Im}var k0={getValObject:R0,flags:Qp,immutable:Bl,transition:Vl,newDataRevision:Np,gd:Be},N0={};for(Zp=0;Zp<ft.length;Zp++)if(mn[Zp]){if(Kp=mn[Zp]._fullInput,N0[Kp.uid])continue;N0[Kp.uid]=1,h0(ft[Zp]._fullInput,Kp,[],k0)}return(Qp.calc||Qp.plot)&&(Qp.fullReplot=!0),Vl&&Qp.nChanges&&Qp.nChangesAnim&&(Qp.anim=Qp.nChanges===Qp.nChangesAnim&&Up?"all":"some"),Qp}function G0(Be,ft,mn,Bl,Vl){var Np=W.layoutFlags();Np.arrays={},Np.rangesAltered={},Np.nChanges=0,Np.nChangesAnim=0;function Up(N0){return T.getLayoutValObject(mn,N0)}for(var Qp in mn)if(!(!Qp.startsWith("xaxis")&&!Qp.startsWith("yaxis"))&&ft[Qp]){var Zp=mn[Qp].domain,Kp=ft[Qp].domain,R0=ft[Qp]._inputDomain;ft[Qp]._inputDomain&&(Zp[0]===R0[0]&&Zp[1]===R0[1]?mn[Qp].domain=ft[Qp].domain:(Zp[0]!==Kp[0]||Zp[1]!==Kp[1])&&(mn[Qp]._inputDomain=null))}var k0={getValObject:Up,flags:Np,immutable:Bl,transition:Vl,gd:Be};return h0(ft,mn,[],k0),(Np.plot||Np.calc)&&(Np.layoutReplot=!0),Vl&&Np.nChanges&&Np.nChangesAnim&&(Np.anim=Np.nChanges===Np.nChangesAnim?"all":"some"),Np}function h0(Be,ft,mn,Bl){var Vl,Np,Up,Qp=Bl.getValObject,Zp=Bl.flags,Kp=Bl.immutable,R0=Bl.inArray,k0=Bl.arrayIndex;function N0(){var K1=Vl.editType;if(R0&&K1.indexOf("arraydraw")!==-1){h.pushUnique(Zp.arrays[R0],k0);return}W.update(Zp,Vl),K1!=="none"&&Zp.nChanges++,Bl.transition&&Vl.anim&&Zp.nChangesAnim++,(Ol.test(Up)||Xl.test(Up))&&(Zp.rangesAltered[mn[0]]=1),Np==="datarevision"&&(Zp.newDataRevision=1)}function lm(K1){return K1.valType==="data_array"||K1.arrayOk}for(Np in Be){if(Zp.calc&&!Bl.transition)return;var Im=Be[Np],u1=ft[Np],v1=mn.concat(Np);if(Up=v1.join("."),!(Np.charAt(0)==="_"||typeof Im=="function"||Im===u1)){if((Np==="tick0"||Np==="dtick")&&mn[0]!=="geo"){var b1=ft.tickmode;if(b1==="auto"||b1==="array"||!b1)continue}if(!(Np==="range"&&ft.autorange)&&!((Np==="zmin"||Np==="zmax")&&ft.type==="contourcarpet")&&(Vl=Qp(v1),!!Vl&&!(Vl._compareAsJSON&&JSON.stringify(Im)===JSON.stringify(u1)))){var Bm=Vl.valType,fm,c1=lm(Vl),y1=Array.isArray(Im),n1=Array.isArray(u1);if(y1&&n1){var Ym="_input_"+Np,t1=Be[Ym],Um=ft[Ym];if(Array.isArray(t1)&&t1===Um)continue}if(u1===void 0)c1&&y1?Zp.calc=!0:N0();else if(Vl._isLinkedToArray){var z1=[],F1=!1;R0||(Zp.arrays[Np]=z1);var g1=Math.min(Im.length,u1.length),V1=Math.max(Im.length,u1.length);if(g1!==V1)if(Vl.editType==="arraydraw")F1=!0;else{N0();continue}for(fm=0;fm<g1;fm++)h0(Im[fm],u1[fm],v1.concat(fm),h.extendFlat({inArray:Np,arrayIndex:fm},Bl));if(F1)for(fm=g1;fm<V1;fm++)z1.push(fm)}else!Bm&&h.isPlainObject(Im)?h0(Im,u1,v1,Bl):c1?y1&&n1?(Kp&&(Zp.calc=!0),(Kp||Bl.newDataRevision)&&N0()):y1!==n1?Zp.calc=!0:N0():y1&&n1?(Im.length!==u1.length||String(Im)!==String(u1))&&N0():N0()}}}for(Np in ft)if(!(Np in Be||Np.charAt(0)==="_"||typeof ft[Np]=="function"))if(Vl=Qp(mn.concat(Np)),lm(Vl)&&Array.isArray(ft[Np])){Zp.calc=!0;return}else N0()}function W0(Be,ft,mn){if(Be=h.getGraphDiv(Be),!h.isPlotDiv(Be))throw new Error("This element is not a Plotly plot: "+Be+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Bl=Be._transitionData;Bl._frameQueue||(Bl._frameQueue=[]),mn=u.supplyAnimationDefaults(mn);var Vl=mn.transition,Np=mn.frame;Bl._frameWaitingCnt===void 0&&(Bl._frameWaitingCnt=0);function Up(Kp){return Array.isArray(Vl)?Kp>=Vl.length?Vl[0]:Vl[Kp]:Vl}function Qp(Kp){return Array.isArray(Np)?Kp>=Np.length?Np[0]:Np[Kp]:Np}function Zp(Kp,R0){var k0=0;return function(){if(Kp&&++k0===R0)return Kp()}}return new Promise(function(Kp,R0){function k0(){if(Bl._frameQueue.length!==0){for(;Bl._frameQueue.length;){var g1=Bl._frameQueue.pop();g1.onInterrupt&&g1.onInterrupt()}Be.emit("plotly_animationinterrupted",[])}}function N0(g1){if(g1.length!==0){for(var V1=0;V1<g1.length;V1++){var K1;g1[V1].type==="byname"?K1=u.computeFrame(Be,g1[V1].name):K1=g1[V1].data;var ig=Qp(V1),mg=Up(V1);mg.duration=Math.min(mg.duration,ig.duration);var P1={frame:K1,name:g1[V1].name,frameOpts:ig,transitionOpts:mg};V1===g1.length-1&&(P1.onComplete=Zp(Kp,2),P1.onInterrupt=R0),Bl._frameQueue.push(P1)}mn.mode==="immediate"&&(Bl._lastFrameAt=-1/0),Bl._animationRaf||u1()}}function lm(){Be.emit("plotly_animated"),window.cancelAnimationFrame(Bl._animationRaf),Bl._animationRaf=null}function Im(){Bl._currentFrame&&Bl._currentFrame.onComplete&&Bl._currentFrame.onComplete();var g1=Bl._currentFrame=Bl._frameQueue.shift();if(g1){var V1=g1.name?g1.name.toString():null;Be._fullLayout._currentFrame=V1,Bl._lastFrameAt=Date.now(),Bl._timeToNext=g1.frameOpts.duration,u.transition(Be,g1.frame.data,g1.frame.layout,O.coerceTraceIndices(Be,g1.frame.traces),g1.frameOpts,g1.transitionOpts).then(function(){g1.onComplete&&g1.onComplete()}),Be.emit("plotly_animatingframe",{name:V1,frame:g1.frame,animation:{frame:g1.frameOpts,transition:g1.transitionOpts}})}else lm()}function u1(){Be.emit("plotly_animating"),Bl._lastFrameAt=-1/0,Bl._timeToNext=0,Bl._runningTransitions=0,Bl._currentFrame=null;var g1=function(){Bl._animationRaf=window.requestAnimationFrame(g1),Date.now()-Bl._lastFrameAt>Bl._timeToNext&&Im()};g1()}var v1=0;function b1(g1){return Array.isArray(Vl)?v1>=Vl.length?g1.transitionOpts=Vl[v1]:g1.transitionOpts=Vl[0]:g1.transitionOpts=Vl,v1++,g1}var Bm,fm,c1=[],y1=ft==null,n1=Array.isArray(ft),Ym=!y1&&!n1&&h.isPlainObject(ft);if(Ym)c1.push({type:"object",data:b1(h.extendFlat({},ft))});else if(y1||["string","number"].indexOf(typeof ft)!==-1)for(Bm=0;Bm<Bl._frames.length;Bm++)fm=Bl._frames[Bm],fm&&(y1||String(fm.group)===String(ft))&&c1.push({type:"byname",name:String(fm.name),data:b1({name:fm.name})});else if(n1)for(Bm=0;Bm<ft.length;Bm++){var t1=ft[Bm];["number","string"].indexOf(typeof t1)!==-1?(t1=String(t1),c1.push({type:"byname",name:t1,data:b1({name:t1})})):h.isPlainObject(t1)&&c1.push({type:"object",data:b1(h.extendFlat({},t1))})}for(Bm=0;Bm<c1.length;Bm++)if(fm=c1[Bm],fm.type==="byname"&&!Bl._frameHash[fm.data.name]){h.warn('animate failure: frame not found: "'+fm.data.name+'"'),R0();return}["next","immediate"].indexOf(mn.mode)!==-1&&k0(),mn.direction==="reverse"&&c1.reverse();var Um=Be._fullLayout._currentFrame;if(Um&&mn.fromcurrent){var z1=-1;for(Bm=0;Bm<c1.length;Bm++)if(fm=c1[Bm],fm.type==="byname"&&fm.name===Um){z1=Bm;break}if(z1>0&&z1<c1.length-1){var F1=[];for(Bm=0;Bm<c1.length;Bm++)fm=c1[Bm],(c1[Bm].type!=="byname"||Bm>z1)&&F1.push(fm);c1=F1}}c1.length>0?N0(c1):(Be.emit("plotly_animated"),Kp())})}function rm(Be,ft,mn){if(Be=h.getGraphDiv(Be),ft==null)return Promise.resolve();if(!h.isPlotDiv(Be))throw new Error("This element is not a Plotly plot: "+Be+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Bl,Vl,Np,Up,Qp=Be._transitionData._frames,Zp=Be._transitionData._frameHash;if(!Array.isArray(ft))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+ft);var Kp=Qp.length+ft.length*2,R0=[],k0={};for(Bl=ft.length-1;Bl>=0;Bl--)if(h.isPlainObject(ft[Bl])){var N0=ft[Bl].name,lm=(Zp[N0]||k0[N0]||{}).name,Im=ft[Bl].name,u1=Zp[lm]||k0[lm];lm&&Im&&typeof Im=="number"&&u1&&he<le&&(he++,h.warn('addFrames: overwriting frame "'+(Zp[lm]||k0[lm]).name+'" with a frame whose name of type "number" also equates to "'+lm+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),he===le&&h.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),k0[N0]={name:N0},R0.push({frame:u.supplyFrameDefaults(ft[Bl]),index:mn&&mn[Bl]!==void 0&&mn[Bl]!==null?mn[Bl]:Kp+Bl})}R0.sort(function(Ym,t1){return Ym.index>t1.index?-1:Ym.index<t1.index?1:0});var v1=[],b1=[],Bm=Qp.length;for(Bl=R0.length-1;Bl>=0;Bl--){if(Vl=R0[Bl].frame,typeof Vl.name=="number"&&h.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Vl.name)for(;Zp[Vl.name="frame "+Be._transitionData._counter++];);if(Zp[Vl.name]){for(Np=0;Np<Qp.length&&(Qp[Np]||{}).name!==Vl.name;Np++);v1.push({type:"replace",index:Np,value:Vl}),b1.unshift({type:"replace",index:Np,value:Qp[Np]})}else Up=Math.max(0,Math.min(R0[Bl].index,Bm)),v1.push({type:"insert",index:Up,value:Vl}),b1.unshift({type:"delete",index:Up}),Bm++}var fm=u.modifyFrames,c1=u.modifyFrames,y1=[Be,b1],n1=[Be,v1];return y&&y.add(Be,fm,y1,c1,n1),u.modifyFrames(Be,v1)}function V0(Be,ft){if(Be=h.getGraphDiv(Be),!h.isPlotDiv(Be))throw new Error("This element is not a Plotly plot: "+Be);var mn,Bl,Vl=Be._transitionData._frames,Np=[],Up=[];if(!ft)for(ft=[],mn=0;mn<Vl.length;mn++)ft.push(mn);for(ft=ft.slice(),ft.sort(),mn=ft.length-1;mn>=0;mn--)Bl=ft[mn],Np.push({type:"delete",index:Bl}),Up.unshift({type:"insert",index:Bl,value:Vl[Bl]});var Qp=u.modifyFrames,Zp=u.modifyFrames,Kp=[Be,Up],R0=[Be,Np];return y&&y.add(Be,Qp,Kp,Zp,R0),u.modifyFrames(Be,Np)}function um(Be){Be=h.getGraphDiv(Be);var ft=Be._fullLayout||{},mn=Be._fullData||[];return u.cleanPlot([],{},mn,ft),u.purge(Be),v.purge(Be),ft._container&&ft._container.remove(),delete Be._context,Be}function Uo(Be){var ft=Be._fullLayout,mn=Be.getBoundingClientRect();if(!h.equalDomRects(mn,ft._lastBBox)){var Bl=ft._invTransform=h.inverseTransformMatrix(h.getFullTransformMatrix(Be));ft._invScaleX=Math.sqrt(Bl[0][0]*Bl[0][0]+Bl[0][1]*Bl[0][1]+Bl[0][2]*Bl[0][2]),ft._invScaleY=Math.sqrt(Bl[1][0]*Bl[1][0]+Bl[1][1]*Bl[1][1]+Bl[1][2]*Bl[1][2]),ft._lastBBox=mn}}function Tp(Be){var ft=ue.select(Be),mn=Be._fullLayout;if(mn._calcInverseTransform=Uo,mn._calcInverseTransform(Be),mn._container=ft.selectAll(".plot-container").data([0]),mn._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),mn._paperdiv=mn._container.selectAll(".svg-container").data([0]),mn._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),mn._glcontainer=mn._paperdiv.selectAll(".gl-container").data([{}]),mn._glcontainer.enter().append("div").classed("gl-container",!0),mn._paperdiv.selectAll(".main-svg").remove(),mn._paperdiv.select(".modebar-container").remove(),mn._paper=mn._paperdiv.insert("svg",":first-child").classed("main-svg",!0),mn._toppaper=mn._paperdiv.append("svg").classed("main-svg",!0),mn._modebardiv=mn._paperdiv.append("div"),delete mn._modeBar,mn._hoverpaper=mn._paperdiv.append("svg").classed("main-svg",!0),!mn._uid){var Bl={};ue.selectAll("defs").each(function(){this.id&&(Bl[this.id.split("-")[1]]=1)}),mn._uid=h.randstr(Bl)}mn._paperdiv.selectAll(".main-svg").attr(z.svgAttrs),mn._defs=mn._paper.append("defs").attr("id","defs-"+mn._uid),mn._clips=mn._defs.append("g").classed("clips",!0),mn._topdefs=mn._toppaper.append("defs").attr("id","topdefs-"+mn._uid),mn._topclips=mn._topdefs.append("g").classed("clips",!0),mn._bgLayer=mn._paper.append("g").classed("bglayer",!0),mn._draggers=mn._paper.append("g").classed("draglayer",!0);var Vl=mn._paper.append("g").classed("layer-below",!0);mn._imageLowerLayer=Vl.append("g").classed("imagelayer",!0),mn._shapeLowerLayer=Vl.append("g").classed("shapelayer",!0),mn._cartesianlayer=mn._paper.append("g").classed("cartesianlayer",!0),mn._polarlayer=mn._paper.append("g").classed("polarlayer",!0),mn._smithlayer=mn._paper.append("g").classed("smithlayer",!0),mn._ternarylayer=mn._paper.append("g").classed("ternarylayer",!0),mn._geolayer=mn._paper.append("g").classed("geolayer",!0),mn._funnelarealayer=mn._paper.append("g").classed("funnelarealayer",!0),mn._pielayer=mn._paper.append("g").classed("pielayer",!0),mn._iciclelayer=mn._paper.append("g").classed("iciclelayer",!0),mn._treemaplayer=mn._paper.append("g").classed("treemaplayer",!0),mn._sunburstlayer=mn._paper.append("g").classed("sunburstlayer",!0),mn._indicatorlayer=mn._toppaper.append("g").classed("indicatorlayer",!0),mn._glimages=mn._paper.append("g").classed("glimages",!0);var Np=mn._toppaper.append("g").classed("layer-above",!0);mn._imageUpperLayer=Np.append("g").classed("imagelayer",!0),mn._shapeUpperLayer=Np.append("g").classed("shapelayer",!0),mn._selectionLayer=mn._toppaper.append("g").classed("selectionlayer",!0),mn._infolayer=mn._toppaper.append("g").classed("infolayer",!0),mn._menulayer=mn._toppaper.append("g").classed("menulayer",!0),mn._zoomlayer=mn._toppaper.append("g").classed("zoomlayer",!0),mn._hoverlayer=mn._hoverpaper.append("g").classed("hoverlayer",!0),mn._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Be.emit("plotly_framework")}me.animate=W0,me.addFrames=rm,me.deleteFrames=V0,me.addTraces=Ee,me.deleteTraces=X,me.extendTraces=vs,me.moveTraces=Oe,me.prependTraces=Se,me.newPlot=Le,me._doPlot=Y,me.purge=um,me.react=M0,me.redraw=Ae,me.relayout=et,me.restyle=Qe,me.setPlotConfig=fe,me.update=$p,me._guiRelayout=Lo(et),me._guiRestyle=Lo(Qe),me._guiUpdate=Lo($p),me._storeDirectGUIEdit=ve}),vx=t(me=>{var ue=l1();me.getDelay=function(h){return h._has&&(h._has("gl3d")||h._has("mapbox")||h._has("map"))?500:0},me.getRedrawFunc=function(h){return function(){ue.getComponentMethod("colorbar","draw")(h)}},me.encodeSVG=function(h){return"data:image/svg+xml,"+encodeURIComponent(h)},me.encodeJSON=function(h){return"data:application/json,"+encodeURIComponent(h)};var g=window.URL||window.webkitURL;me.createObjectURL=function(h){return g.createObjectURL(h)},me.revokeObjectURL=function(h){return g.revokeObjectURL(h)},me.createBlob=function(h,x){if(x==="svg")return new window.Blob([h],{type:"image/svg+xml;charset=utf-8"});if(x==="full-json")return new window.Blob([h],{type:"application/json;charset=utf-8"});var v=s(window.atob(h));return new window.Blob([v],{type:"image/"+x})},me.octetStream=function(h){document.location.href="data:application/octet-stream"+h};function s(h){for(var x=h.length,v=new ArrayBuffer(x),y=new Uint8Array(v),b=0;b<x;b++)y[b]=h.charCodeAt(b);return v}me.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/}),sb=t((me,ue)=>{var g=c();Z();var s=D0(),h=_r();Hg();var x=/"/g,v="TOBESTRIPPED",y=new RegExp('("'+v+")|("+v+'")',"g");function b(u){var k=g.select("body").append("div").style({display:"none"}).html(""),M=u.replace(/(&[^;]*;)/gi,function(D){return D==="&lt;"?"&#60;":D==="&rt;"?"&#62;":D.indexOf("<")!==-1||D.indexOf(">")!==-1?"":k.html(D).text()});return k.remove(),M}function T(u){return u.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}ue.exports=function(u,k,M){var D=u._fullLayout,B=D._paper,P=D._toppaper,N=D.width,z=D.height,F;B.insert("rect",":first-child").call(s.setRect,0,0,N,z).call(h.fill,D.paper_bgcolor);var w=D._basePlotModules||[];for(F=0;F<w.length;F++){var L=w[F];L.toSVG&&L.toSVG(u)}if(P){var O=P.node().childNodes,H=Array.prototype.slice.call(O);for(F=0;F<H.length;F++){var W=H[F];W.childNodes.length&&B.node().appendChild(W)}}D._draggers&&D._draggers.remove(),B.node().style.background="",B.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var he=g.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){he.remove();return}else he.style({visibility:null,display:null});var le=this.style.fontFamily;le&&le.indexOf('"')!==-1&&he.style("font-family",le.replace(x,v));var Y=this.style.fontWeight;Y&&(Y==="normal"||Y==="400")&&he.style("font-weight",void 0);var Re=this.style.fontStyle;Re&&Re==="normal"&&he.style("font-style",void 0);var fe=this.style.fontVariant;fe&&fe==="normal"&&he.style("font-variant",void 0)}),B.selectAll(".gradient_filled,.pattern_filled").each(function(){var he=g.select(this),le=this.style.fill;le&&le.indexOf("url(")!==-1&&he.style("fill",le.replace(x,v));var Y=this.style.stroke;Y&&Y.indexOf("url(")!==-1&&he.style("stroke",Y.replace(x,v))}),(k==="pdf"||k==="eps")&&B.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),k==="svg"&&M&&(B.attr("width",M*N),B.attr("height",M*z),B.attr("viewBox","0 0 "+N+" "+z));var Ce=new window.XMLSerializer().serializeToString(B.node());return Ce=b(Ce),Ce=T(Ce),Ce=Ce.replace(y,"'"),Ce}}),yx=t((me,ue)=>{var g=Z(),s=S0().EventEmitter,h=vx();function x(v){var y=v.emitter||new s,b=new Promise(function(T,u){var k=window.Image,M=v.svg,D=v.format||"png",B=v.canvas,P=v.scale||1,N=v.width||300,z=v.height||150,F=P*N,w=P*z,L=B.getContext("2d",{willReadFrequently:!0}),O=new k,H,W;D==="svg"||g.isSafari()?W=h.encodeSVG(M):(H=h.createBlob(M,"svg"),W=h.createObjectURL(H)),B.width=F,B.height=w,O.onload=function(){var Ce;switch(H=null,h.revokeObjectURL(W),D!=="svg"&&L.drawImage(O,0,0,F,w),D){case"jpeg":Ce=B.toDataURL("image/jpeg");break;case"png":Ce=B.toDataURL("image/png");break;case"webp":Ce=B.toDataURL("image/webp");break;case"svg":Ce=W;break;default:var he="Image format is not jpeg, png, svg or webp.";if(u(new Error(he)),!v.promise)return y.emit("error",he)}T(Ce),v.promise||y.emit("success",Ce)},O.onerror=function(Ce){if(H=null,h.revokeObjectURL(W),u(Ce),!v.promise)return y.emit("error",Ce)},O.src=W});return v.promise?b:y}ue.exports=x}),f_=t((me,ue)=>{var g=A(),s=ob(),h=vg(),x=Z(),v=vx(),y=sb(),b=yx(),T=a().version,u={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function k(M,D){D=D||{};var B,P,N,z;x.isPlainObject(M)?(B=M.data||[],P=M.layout||{},N=M.config||{},z={}):(M=x.getGraphDiv(M),B=x.extendDeep([],M.data),P=x.extendDeep({},M.layout),N=M._context,z=M._fullLayout||{});function F(Le){return!(Le in D)||x.validate(D[Le],u[Le])}if(!F("width")&&D.width!==null||!F("height")&&D.height!==null)throw new Error("Height and width should be pixel values.");if(!F("format"))throw new Error("Export format is not "+x.join2(u.format.values,", "," or ")+".");var w={};function L(Le,ce){return x.coerce(D,w,u,Le,ce)}var O=L("format"),H=L("width"),W=L("height"),Ce=L("scale"),he=L("setBackground"),le=L("imageDataOnly"),Y=document.createElement("div");Y.style.position="absolute",Y.style.left="-5000px",document.body.appendChild(Y);var Re=x.extendFlat({},P);H?Re.width=H:D.width===null&&g(z.width)&&(Re.width=z.width),W?Re.height=W:D.height===null&&g(z.height)&&(Re.height=z.height);var fe=x.extendFlat({},N,{_exportedPlot:!0,staticPlot:!0,setBackground:he}),xe=v.getRedrawFunc(Y);function ge(){return new Promise(function(Le){setTimeout(Le,v.getDelay(Y._fullLayout))})}function ye(){return new Promise(function(Le,ce){var ke=y(Y,O,Ce),Pe=Y._fullLayout.width,tt=Y._fullLayout.height;function Ke(){s.purge(Y),document.body.removeChild(Y)}if(O==="full-json"){var nt=h.graphJson(Y,!1,"keepdata","object",!0,!0);return nt.version=T,nt=JSON.stringify(nt),Ke(),Le(le?nt:v.encodeJSON(nt))}if(Ke(),O==="svg")return Le(le?ke:v.encodeSVG(ke));var yi=document.createElement("canvas");yi.id=x.randstr(),b({format:O,width:Pe,height:tt,scale:Ce,canvas:yi,svg:ke,promise:!0}).then(Le).catch(ce)})}function Ae(Le){return le?Le.replace(v.IMAGE_URL_PREFIX,""):Le}return new Promise(function(Le,ce){s.newPlot(Y,B,Re,fe).then(xe).then(ge).then(ye).then(function(ke){Le(Ae(ke))}).catch(function(ke){ce(ke)})})}ue.exports=k}),R2=t((me,ue)=>{var g=Z(),s=vg(),h=Xm(),x=Hl().dfltConfig,v=g.isPlainObject,y=Array.isArray,b=g.isArrayOrTypedArray;ue.exports=function(w,L){w===void 0&&(w=[]),L===void 0&&(L={});var O=h.get(),H=[],W={_context:g.extendFlat({},x)},Ce,he;y(w)?(W.data=g.extendDeep([],w),Ce=w):(W.data=[],Ce=[],H.push(D("array","data"))),v(L)?(W.layout=g.extendDeep({},L),he=L):(W.layout={},he={},arguments.length>1&&H.push(D("object","layout"))),s.supplyDefaults(W);for(var le=W._fullData,Y=Ce.length,Re=0;Re<Y;Re++){var fe=Ce[Re],xe=["data",Re];if(!v(fe)){H.push(D("object",xe));continue}var ge=le[Re],ye=ge.type,Ae=O.traces[ye].attributes;Ae.type={valType:"enumerated",values:[ye]},ge.visible===!1&&fe.visible!==!1&&H.push(D("invisible",xe)),T(fe,ge,Ae,H,xe)}var Le=W._fullLayout,ce=u(O,le);return T(he,Le,ce,H,"layout"),H.length===0?void 0:H};function T(w,L,O,H,W,Ce){Ce=Ce||[];for(var he=Object.keys(w),le=0;le<he.length;le++){var Y=he[le],Re=Ce.slice();Re.push(Y);var fe=w[Y],xe=L[Y],ge=P(O,Y),ye=(ge||{}).valType,Ae=ye==="info_array",Le=ye==="colorscale",ce=(ge||{}).items;if(!B(O,Y))H.push(D("schema",W,Re));else if(v(fe)&&v(xe)&&ye!=="any")T(fe,xe,ge,H,W,Re);else if(Ae&&y(fe)){fe.length>xe.length&&H.push(D("unused",W,Re.concat(xe.length)));var ke=xe.length,Pe=Array.isArray(ce);Pe&&(ke=Math.min(ke,ce.length));var tt,Ke,nt,yi,Ei;if(ge.dimensions===2)for(Ke=0;Ke<ke;Ke++)if(y(fe[Ke])){fe[Ke].length>xe[Ke].length&&H.push(D("unused",W,Re.concat(Ke,xe[Ke].length)));var vs=xe[Ke].length;for(tt=0;tt<(Pe?Math.min(vs,ce[Ke].length):vs);tt++)nt=Pe?ce[Ke][tt]:ce,yi=fe[Ke][tt],Ei=xe[Ke][tt],g.validate(yi,nt)?Ei!==yi&&Ei!==+yi&&H.push(D("dynamic",W,Re.concat(Ke,tt),yi,Ei)):H.push(D("value",W,Re.concat(Ke,tt),yi))}else H.push(D("array",W,Re.concat(Ke),fe[Ke]));else for(Ke=0;Ke<ke;Ke++)nt=Pe?ce[Ke]:ce,yi=fe[Ke],Ei=xe[Ke],g.validate(yi,nt)?Ei!==yi&&Ei!==+yi&&H.push(D("dynamic",W,Re.concat(Ke),yi,Ei)):H.push(D("value",W,Re.concat(Ke),yi))}else if(ge.items&&!Ae&&y(fe)){var Se=ce[Object.keys(ce)[0]],Ee=[],X,Oe;for(X=0;X<xe.length;X++){var Qe=xe[X]._index||X;if(Oe=Re.slice(),Oe.push(Qe),v(fe[Qe])&&v(xe[X])){Ee.push(Qe);var pe=fe[Qe],q=xe[X];v(pe)&&pe.visible!==!1&&q.visible===!1?H.push(D("invisible",W,Oe)):T(pe,q,Se,H,W,Oe)}}for(X=0;X<fe.length;X++)Oe=Re.slice(),Oe.push(X),v(fe[X])?Ee.indexOf(X)===-1&&H.push(D("unused",W,Oe)):H.push(D("object",W,Oe,fe[X]))}else!v(fe)&&v(xe)?H.push(D("object",W,Re,fe)):!b(fe)&&b(xe)&&!Ae&&!Le?H.push(D("array",W,Re,fe)):Y in L?g.validate(fe,ge)?ge.valType==="enumerated"&&(ge.coerceNumber&&fe!==+xe||!b(fe)&&fe!==xe||String(fe)!==String(xe))&&H.push(D("dynamic",W,Re,fe,xe)):H.push(D("value",W,Re,fe)):H.push(D("unused",W,Re,fe))}return H}function u(w,L){for(var O=w.layout.layoutAttributes,H=0;H<L.length;H++){var W=L[H],Ce=w.traces[W.type],he=Ce.layoutAttributes;he&&(W.subplot?g.extendFlat(O[Ce.attributes.subplot.dflt],he):g.extendFlat(O,he))}return O}var k={object:function(w,L){var O;return w==="layout"&&L===""?O="The layout argument":w[0]==="data"&&L===""?O="Trace "+w[1]+" in the data argument":O=M(w)+"key "+L,O+" must be linked to an object container"},array:function(w,L){var O;return w==="data"?O="The data argument":O=M(w)+"key "+L,O+" must be linked to an array container"},schema:function(w,L){return M(w)+"key "+L+" is not part of the schema"},unused:function(w,L,O){var H=v(O)?"container":"key";return M(w)+H+" "+L+" did not get coerced"},dynamic:function(w,L,O,H){return[M(w)+"key",L,"(set to '"+O+"')","got reset to","'"+H+"'","during defaults."].join(" ")},invisible:function(w,L){return(L?M(w)+"item "+L:"Trace "+w[1])+" got defaulted to be not visible"},value:function(w,L,O){return[M(w)+"key "+L,"is set to an invalid value ("+O+")"].join(" ")}};function M(w){return y(w)?"In data trace "+w[1]+", ":"In "+w+", "}function D(w,L,O,H,W){O=O||"";var Ce,he;y(L)?(Ce=L[0],he=L[1]):(Ce=L,he=null);var le=F(O),Y=k[w](L,le,H,W);return g.log(Y),{code:w,container:Ce,trace:he,path:O,astr:le,msg:Y}}function B(w,L){var O=z(L),H=O.keyMinusId,W=O.id;return H in w&&w[H]._isSubplotObj&&W?!0:L in w}function P(w,L){if(L in w)return w[L];var O=z(L);return w[O.keyMinusId]}var N=g.counterRegex("([a-z]+)");function z(w){var L=w.match(N);return{keyMinusId:L&&L[1],id:L&&L[2]}}function F(w){if(!y(w))return String(w);for(var L="",O=0;O<w.length;O++){var H=w[O];typeof H=="number"?L=L.substr(0,L.length-1)+"["+H+"]":L+=H,O<w.length-1&&(L+=".")}return L}}),lb=t((me,ue)=>{var g=Z(),s=vx();function h(x,v,y){var b=document.createElement("a"),T="download"in b,u=new Promise(function(k,M){var D,B;if(T)return D=s.createBlob(x,y),B=s.createObjectURL(D),b.href=B,b.download=v,document.body.appendChild(b),b.click(),document.body.removeChild(b),s.revokeObjectURL(B),D=null,k(v);if(g.isSafari()){var P=y==="svg"?",":";base64,";return s.octetStream(P+encodeURIComponent(x)),k(v)}M(new Error("download error"))});return u}ue.exports=h}),cb=t((me,ue)=>{var g=Z(),s=f_(),h=lb();vx();function x(v,y){var b;return g.isPlainObject(v)||(b=g.getGraphDiv(v)),y=y||{},y.format=y.format||"png",y.width=y.width||null,y.height=y.height||null,y.imageDataOnly=!0,new Promise(function(T,u){b&&b._snapshotInProgress&&u(new Error("Snapshotting already in progress.")),b&&(b._snapshotInProgress=!0);var k=s(v,y),M=y.filename||v.fn||"newplot";M+="."+y.format.replace("-","."),k.then(function(D){return b&&(b._snapshotInProgress=!1),h(D,M,y.format)}).then(function(D){T(D)}).catch(function(D){b&&(b._snapshotInProgress=!1),u(D)})})}ue.exports=x}),Ix=t(me=>{var ue=Z(),g=ue.isPlainObject,s=Xm(),h=vg(),x=mr(),v=Nm(),y=Hl().dfltConfig;me.makeTemplate=function(N){N=ue.isPlainObject(N)?N:ue.getGraphDiv(N),N=ue.extendDeep({_context:y},{data:N.data,layout:N.layout}),h.supplyDefaults(N);var z=N.data||[],F=N.layout||{};F._basePlotModules=N._fullLayout._basePlotModules,F._modules=N._fullLayout._modules;var w={data:{},layout:{}};z.forEach(function(fe){var xe={};u(fe,xe,M.bind(null,fe));var ge=ue.coerce(fe,{},x,"type"),ye=w.data[ge];ye||(ye=w.data[ge]=[]),ye.push(xe)}),u(F,w.layout,k.bind(null,F)),delete w.layout.template;var L=F.template;if(g(L)){var O=L.layout,H,W,Ce,he,le,Y;g(O)&&b(O,w.layout);var Re=L.data;if(g(Re)){for(W in w.data)if(Ce=Re[W],Array.isArray(Ce)){for(le=w.data[W],Y=le.length,he=Ce.length,H=0;H<Y;H++)b(Ce[H%he],le[H]);for(H=Y;H<he;H++)le.push(ue.extendDeep({},Ce[H]))}for(W in Re)W in w.data||(w.data[W]=ue.extendDeep([],Re[W]))}}return w};function b(N,z){N=ue.extendDeep({},N);var F=Object.keys(N).sort(),w,L;function O(le,Y,Re){if(g(Y)&&g(le))b(le,Y);else if(Array.isArray(Y)&&Array.isArray(le)){var fe=v.arrayTemplater({_template:N},Re);for(L=0;L<Y.length;L++){var xe=Y[L],ge=fe.newItem(xe)._template;ge&&b(ge,xe)}var ye=fe.defaultItems();for(L=0;L<ye.length;L++)Y.push(ye[L]._template);for(L=0;L<Y.length;L++)delete Y[L].templateitemname}}for(w=0;w<F.length;w++){var H=F[w],W=N[H];if(H in z?O(W,z[H],H):z[H]=W,T(H)===H)for(var Ce in z){var he=T(Ce);Ce!==he&&he===H&&!(Ce in N)&&O(W,z[Ce],H)}}}function T(N){return N.replace(/[0-9]+$/,"")}function u(N,z,F,w,L){var O=L&&F(L);for(var H in N){var W=N[H],Ce=D(N,H,w),he=D(N,H,L),le=F(he);if(!le){var Y=T(H);Y!==H&&(he=D(N,Y,L),le=F(he))}if(!(O&&O===le)&&!(!le||le._noTemplating||le.valType==="data_array"||le.arrayOk&&Array.isArray(W)))if(!le.valType&&g(W))u(W,z,F,Ce,he);else if(le._isLinkedToArray&&Array.isArray(W))for(var Re=!1,fe=0,xe={},ge=0;ge<W.length;ge++){var ye=W[ge];if(g(ye)){var Ae=ye.name;if(Ae)xe[Ae]||(u(ye,z,F,D(W,fe,Ce),D(W,fe,he)),fe++,xe[Ae]=1);else if(!Re){var Le=v.arrayDefaultKey(H),ce=D(N,Le,w),ke=D(W,fe,Ce);u(ye,z,F,ke,D(W,fe,he));var Pe=ue.nestedProperty(z,ke),tt=ue.nestedProperty(z,ce);tt.set(Pe.get()),Pe.set(null),Re=!0}}}else{var Ke=ue.nestedProperty(z,Ce);Ke.set(W)}}}function k(N,z){return s.getLayoutValObject(N,ue.nestedProperty({},z).parts)}function M(N,z){return s.getTraceValObject(N,ue.nestedProperty({},z).parts)}function D(N,z,F){var w;return F?Array.isArray(N)?w=F+"["+z+"]":w=F+"."+z:w=z,w}me.validateTemplate=function(N,z){var F=ue.extendDeep({},{_context:y,data:N.data,layout:N.layout}),w=F.layout||{};g(z)||(z=w.template||{});var L=z.layout,O=z.data,H=[];F.layout=w,F.layout.template=z,h.supplyDefaults(F);var W=F._fullLayout,Ce=F._fullData,he={};function le(ce,ke){for(var Pe in ce)if(Pe.charAt(0)!=="_"&&g(ce[Pe])){var tt=T(Pe),Ke=[],nt;for(nt=0;nt<ke.length;nt++)Ke.push(D(ce,Pe,ke[nt])),tt!==Pe&&Ke.push(D(ce,tt,ke[nt]));for(nt=0;nt<Ke.length;nt++)he[Ke[nt]]=1;le(ce[Pe],Ke)}}function Y(ce,ke){for(var Pe in ce)if(Pe.indexOf("defaults")===-1&&g(ce[Pe])){var tt=D(ce,Pe,ke);he[tt]?Y(ce[Pe],tt):H.push({code:"unused",path:tt})}}if(g(L)?(le(W,["layout"]),Y(L,"layout")):H.push({code:"layout"}),!g(O))H.push({code:"data"});else{for(var Re={},fe,xe=0;xe<Ce.length;xe++){var ge=Ce[xe];fe=ge.type,Re[fe]=(Re[fe]||0)+1,ge._fullInput._template||H.push({code:"missing",index:ge.index,traceType:fe})}for(fe in O){var ye=O[fe].length,Ae=Re[fe]||0;ye>Ae?H.push({code:"unused",traceType:fe,templateCount:ye,dataCount:Ae}):Ae>ye&&H.push({code:"reused",traceType:fe,templateCount:ye,dataCount:Ae})}}function Le(ce,ke){for(var Pe in ce)if(Pe.charAt(0)!=="_"){var tt=ce[Pe],Ke=D(ce,Pe,ke);g(tt)?(Array.isArray(ce)&&tt._template===!1&&tt.templateitemname&&H.push({code:"missing",path:Ke,templateitemname:tt.templateitemname}),Le(tt,Ke)):Array.isArray(tt)&&B(tt)&&Le(tt,Ke)}}if(Le({data:Ce,layout:W},""),H.length)return H.map(P)};function B(N){for(var z=0;z<N.length;z++)if(g(N[z]))return!0}function P(N){var z;switch(N.code){case"data":z="The template has no key data.";break;case"layout":z="The template has no key layout.";break;case"missing":N.path?z="There are no templates for item "+N.path+" with name "+N.templateitemname:z="There are no templates for trace "+N.index+", of type "+N.traceType+".";break;case"unused":N.path?z="The template item at "+N.path+" was not used in constructing the plot.":N.dataCount?z="Some of the templates of type "+N.traceType+" were not used. The template has "+N.templateCount+" traces, the data only has "+N.dataCount+" of this type.":z="The template has "+N.templateCount+" traces of type "+N.traceType+" but there are none in the data.";break;case"reused":z="Some of the templates of type "+N.traceType+" were used more than once. The template has "+N.templateCount+" traces, the data has "+N.dataCount+" of this type.";break}return N.msg=z,N}}),e2=t(me=>{var ue=ob();me._doPlot=ue._doPlot,me.newPlot=ue.newPlot,me.restyle=ue.restyle,me.relayout=ue.relayout,me.redraw=ue.redraw,me.update=ue.update,me._guiRestyle=ue._guiRestyle,me._guiRelayout=ue._guiRelayout,me._guiUpdate=ue._guiUpdate,me._storeDirectGUIEdit=ue._storeDirectGUIEdit,me.react=ue.react,me.extendTraces=ue.extendTraces,me.prependTraces=ue.prependTraces,me.addTraces=ue.addTraces,me.deleteTraces=ue.deleteTraces,me.moveTraces=ue.moveTraces,me.purge=ue.purge,me.addFrames=ue.addFrames,me.deleteFrames=ue.deleteFrames,me.animate=ue.animate,me.setPlotConfig=ue.setPlotConfig;var g=Gm().getGraphDiv,s=A0().eraseActiveShape;me.deleteActiveShape=function(x){return s(g(x))},me.toImage=f_(),me.validate=R2(),me.downloadImage=cb();var h=Ix();me.makeTemplate=h.makeTemplate,me.validateTemplate=h.validateTemplate}),p_=t((me,ue)=>{var g=Z(),s=l1();ue.exports=function(h,x,v,y){var b=y("x"),T=y("y"),u,k=s.getComponentMethod("calendars","handleTraceDefaults");if(k(h,x,["x","y"],v),b){var M=g.minRowLength(b);T?u=Math.min(M,g.minRowLength(T)):(u=M,y("y0"),y("dy"))}else{if(!T)return 0;u=g.minRowLength(T),y("x0"),y("dx")}return x._length=u,u}}),ub=t((me,ue)=>{var g=Z().dateTick0,s=C(),h=s.ONEWEEK;function x(v,y){return v%h===0?g(y,1):g(y,0)}ue.exports=function(v,y,b,T,u){if(u||(u={x:!0,y:!0}),u.x){var k=T("xperiod");k&&(T("xperiod0",x(k,y.xcalendar)),T("xperiodalignment"))}if(u.y){var M=T("yperiod");M&&(T("yperiod0",x(M,y.ycalendar)),T("yperiodalignment"))}}}),Ux=t((me,ue)=>{var g=["orientation","groupnorm","stackgaps"];ue.exports=function(s,h,x,v){var y=x._scatterStackOpts,b=v("stackgroup");if(b){var T=h.xaxis+h.yaxis,u=y[T];u||(u=y[T]={});var k=u[b],M=!1;k?k.traces.push(h):(k=u[b]={traceIndices:[],traces:[h]},M=!0);for(var D={orientation:h.x&&!h.y?"h":"v"},B=0;B<g.length;B++){var P=g[B],N=P+"Found";if(!k[N]){var z=s[P]!==void 0,F=P==="orientation";if((z||M)&&(k[P]=v(P,D[P]),F&&(k.fillDflt=k[P]==="h"?"tonextx":"tonexty"),z&&(k[N]=!0,!M&&(delete k.traces[0][P],F))))for(var w=0;w<k.traces.length-1;w++){var L=k.traces[w];L._input.fill!==L.fill&&(L.fill=k.fillDflt)}}}return k}}}),M3=t((me,ue)=>{var g=_r(),s=eg().hasColorscale,h=ms(),x=Dp();ue.exports=function(v,y,b,T,u,k){var M=x.isBubble(v),D=(v.line||{}).color,B;if(k=k||{},D&&(b=D),u("marker.symbol"),u("marker.opacity",M?.7:1),u("marker.size"),k.noAngle||(u("marker.angle"),k.noAngleRef||u("marker.angleref"),k.noStandOff||u("marker.standoff")),u("marker.color",b),s(v,"marker")&&h(v,y,T,u,{prefix:"marker.",cLetter:"c"}),k.noSelect||(u("selected.marker.color"),u("unselected.marker.color"),u("selected.marker.size"),u("unselected.marker.size")),k.noLine||(D&&!Array.isArray(D)&&y.marker.color!==D?B=D:M?B=g.background:B=g.defaultLine,u("marker.line.color",B),s(v,"marker.line")&&h(v,y,T,u,{prefix:"marker.line.",cLetter:"c"}),u("marker.line.width",M?1:0)),M&&(u("marker.sizeref"),u("marker.sizemin"),u("marker.sizemode")),k.gradient){var P=u("marker.gradient.type");P!=="none"&&u("marker.gradient.color")}}}),S3=t((me,ue)=>{var g=Z().isArrayOrTypedArray,s=eg().hasColorscale,h=ms();ue.exports=function(x,v,y,b,T,u){u||(u={});var k=(x.marker||{}).color;if(k&&k._inputArray&&(k=k._inputArray),T("line.color",y),s(x,"line"))h(x,v,b,T,{prefix:"line.",cLetter:"c"});else{var M=(g(k)?!1:k)||y;T("line.color",M)}T("line.width"),u.noDash||T("line.dash"),u.backoff&&T("line.backoff")}}),T3=t((me,ue)=>{ue.exports=function(g,s,h){var x=h("line.shape");x==="spline"&&h("line.smoothing")}}),I5=t((me,ue)=>{var g=Z();ue.exports=function(s,h,x,v,y){y=y||{},v("textposition"),g.coerceFont(v,"textfont",y.font||x.font,y),y.noSelect||(v("selected.textfont.color"),v("unselected.textfont.color"))}}),U5=t((me,ue)=>{var g=_r(),s=Z().isArrayOrTypedArray;function h(x){for(var v=g.interpolate(x[0][1],x[1][1],.5),y=2;y<x.length;y++){var b=g.interpolate(x[y-1][1],x[y][1],.5);v=g.interpolate(v,b,x[y-1][0]/x[y][0])}return v}ue.exports=function(x,v,y,b,T){T||(T={});var u=!1;if(v.marker){var k=v.marker.color,M=(v.marker.line||{}).color;k&&!s(k)?u=k:M&&!s(M)&&(u=M)}var D;if(T.moduleHasFillgradient){var B=b("fillgradient.type");if(B!=="none"){b("fillgradient.start"),b("fillgradient.stop");var P=b("fillgradient.colorscale");P&&(D=h(P))}}b("fillcolor",g.addOpacity((v.line||{}).color||u||D||y,.5))}}),F5=t((me,ue)=>{var g=Z(),s=l1(),h=Px(),x=ox(),v=Dp(),y=p_(),b=ub(),T=Ux(),u=M3(),k=S3(),M=T3(),D=I5(),B=U5(),P=Z().coercePattern;ue.exports=function(N,z,F,w){function L(Re,fe){return g.coerce(N,z,h,Re,fe)}var O=y(N,z,w,L);if(O||(z.visible=!1),!!z.visible){b(N,z,w,L),L("xhoverformat"),L("yhoverformat"),L("zorder");var H=T(N,z,w,L);w.scattermode==="group"&&z.orientation===void 0&&L("orientation","v");var W=!H&&O<x.PTS_LINESONLY?"lines+markers":"lines";L("text"),L("hovertext"),L("mode",W),v.hasMarkers(z)&&u(N,z,F,w,L,{gradient:!0}),v.hasLines(z)&&(k(N,z,F,w,L,{backoff:!0}),M(N,z,L),L("connectgaps"),L("line.simplify")),v.hasText(z)&&(L("texttemplate"),D(N,z,w,L));var Ce=[];(v.hasMarkers(z)||v.hasText(z))&&(L("cliponaxis"),L("marker.maxdisplayed"),Ce.push("points")),L("fill",H?H.fillDflt:"none"),z.fill!=="none"&&(B(N,z,F,L,{moduleHasFillgradient:!0}),v.hasLines(z)||M(N,z,L),P(L,"fillpattern",z.fillcolor,!1));var he=(z.line||{}).color,le=(z.marker||{}).color;(z.fill==="tonext"||z.fill==="toself")&&Ce.push("fills"),L("hoveron",Ce.join("+")||"points"),z.hoveron!=="fills"&&L("hovertemplate");var Y=s.getComponentMethod("errorbars","supplyDefaults");Y(N,z,he||le||F,{axis:"y"}),Y(N,z,he||le||F,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(z,L)}}}),db=t((me,ue)=>{var g=rg().getAxisGroup;ue.exports=function(s,h,x,v,y){var b=h.orientation,T=h[{v:"x",h:"y"}[b]+"axis"],u=g(x,T)+b,k=x._alignmentOpts||{},M=v("alignmentgroup"),D=k[u];D||(D=k[u]={});var B=D[M];B?B.traces.push(h):B=D[M]={traces:[h],alignmentIndex:Object.keys(D).length,offsetGroups:{}};var P=v("offsetgroup")||"",N=B.offsetGroups,z=N[P];h._offsetIndex=0,(y!=="group"||P)&&(z||(z=N[P]={offsetIndex:Object.keys(N).length}),h._offsetIndex=z.offsetIndex)}}),E3=t((me,ue)=>{var g=Z(),s=db(),h=Px();ue.exports=function(x,v){var y,b,T,u=v.scattermode;function k(N){return g.coerce(b._input,b,h,N)}if(v.scattermode==="group")for(T=0;T<x.length;T++)b=x[T],b.type==="scatter"&&(y=b._input,s(y,b,v,k,u));for(T=0;T<x.length;T++){var M=x[T];if(M.type==="scatter"){var D=M.fill;if(!(D==="none"||D==="toself")&&(M.opacity=void 0,D==="tonexty"||D==="tonextx"))for(var B=T-1;B>=0;B--){var P=x[B];if(P.type==="scatter"&&P.xaxis===M.xaxis&&P.yaxis===M.yaxis){P.opacity=void 0;break}}}}}}),hb=t((me,ue)=>{var g=Z(),s=Sg();ue.exports=function(h,x){function v(b,T){return g.coerce(h,x,s,b,T)}var y=x.barmode==="group";x.scattermode==="group"&&v("scattergap",y?x.bargap:.2)}}),By=t((me,ue)=>{var g=A(),s=Z(),h=s.dateTime2ms,x=s.incrementMonth,v=C(),y=v.ONEAVGMONTH;ue.exports=function(b,T,u,k){if(T.type!=="date")return{vals:k};var M=b[u+"periodalignment"];if(!M)return{vals:k};var D=b[u+"period"],B;if(g(D)){if(D=+D,D<=0)return{vals:k}}else if(typeof D=="string"&&D.charAt(0)==="M"){var P=+D.substring(1);if(P>0&&Math.round(P)===P)B=P;else return{vals:k}}for(var N=T.calendar,z=M==="start",F=M==="end",w=b[u+"period0"],L=h(w,N)||0,O=[],H=[],W=[],Ce=k.length,he=0;he<Ce;he++){var le=k[he],Y,Re,fe;if(B){for(Y=Math.round((le-L)/(B*y)),fe=x(L,B*Y,N);fe>le;)fe=x(fe,-B,N);for(;fe<=le;)fe=x(fe,B,N);Re=x(fe,-B,N)}else{for(Y=Math.round((le-L)/D),fe=L+Y*D;fe>le;)fe-=D;for(;fe<=le;)fe+=D;Re=fe-D}O[he]=z?Re:F?fe:(Re+fe)/2,H[he]=Re,W[he]=fe}return{vals:O,starts:H,ends:W}}}),m_=t((me,ue)=>{var g=eg().hasColorscale,s=gs(),h=Dp();ue.exports=function(x,v){h.hasLines(v)&&g(v,"line")&&s(x,v,{vals:v.line.color,containerStr:"line",cLetter:"c"}),h.hasMarkers(v)&&(g(v,"marker")&&s(x,v,{vals:v.marker.color,containerStr:"marker",cLetter:"c"}),g(v,"marker.line")&&s(x,v,{vals:v.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}}),ky=t((me,ue)=>{var g=Z();ue.exports=function(s,h){for(var x=0;x<s.length;x++)s[x].i=x;g.mergeArray(h.text,s,"tx"),g.mergeArray(h.texttemplate,s,"txt"),g.mergeArray(h.hovertext,s,"htx"),g.mergeArray(h.customdata,s,"data"),g.mergeArray(h.textposition,s,"tp"),h.textfont&&(g.mergeArrayCastPositive(h.textfont.size,s,"ts"),g.mergeArray(h.textfont.color,s,"tc"),g.mergeArray(h.textfont.family,s,"tf"),g.mergeArray(h.textfont.weight,s,"tw"),g.mergeArray(h.textfont.style,s,"ty"),g.mergeArray(h.textfont.variant,s,"tv"),g.mergeArray(h.textfont.textcase,s,"tC"),g.mergeArray(h.textfont.lineposition,s,"tE"),g.mergeArray(h.textfont.shadow,s,"tS"));var v=h.marker;if(v){g.mergeArrayCastPositive(v.size,s,"ms"),g.mergeArrayCastPositive(v.opacity,s,"mo"),g.mergeArray(v.symbol,s,"mx"),g.mergeArray(v.angle,s,"ma"),g.mergeArray(v.standoff,s,"mf"),g.mergeArray(v.color,s,"mc");var y=v.line;v.line&&(g.mergeArray(y.color,s,"mlc"),g.mergeArrayCastPositive(y.width,s,"mlw"));var b=v.gradient;b&&b.type!=="none"&&(g.mergeArray(b.type,s,"mgt"),g.mergeArray(b.color,s,"mgc"))}}}),Fx=t((me,ue)=>{var g=Z();ue.exports=function(s,h){g.isArrayOrTypedArray(h.selectedpoints)&&g.tagSelected(s,h)}}),g_=t((me,ue)=>{var g=A(),s=Z(),h=mm(),x=By(),v=C().BADNUM,y=Dp(),b=m_(),T=ky(),u=Fx();function k(z,F){var w=z._fullLayout,L=F._xA=h.getFromId(z,F.xaxis||"x","x"),O=F._yA=h.getFromId(z,F.yaxis||"y","y"),H=L.makeCalcdata(F,"x"),W=O.makeCalcdata(F,"y"),Ce=x(F,L,"x",H),he=x(F,O,"y",W),le=Ce.vals,Y=he.vals,Re=F._length,fe=new Array(Re),xe=F.ids,ge=N(F,w,L,O),ye=!1,Ae,Le,ce,ke,Pe,tt;B(w,F);var Ke="x",nt="y",yi;if(ge)s.pushUnique(ge.traceIndices,F.index),Ae=ge.orientation==="v",Ae?(nt="s",yi="x"):(Ke="s",yi="y"),Pe=ge.stackgaps==="interpolate";else{var Ei=D(F,Re);M(z,F,L,O,le,Y,Ei)}var vs=!!F.xperiodalignment,Se=!!F.yperiodalignment;for(Le=0;Le<Re;Le++){var Ee=fe[Le]={},X=g(le[Le]),Oe=g(Y[Le]);X&&Oe?(Ee[Ke]=le[Le],Ee[nt]=Y[Le],vs&&(Ee.orig_x=H[Le],Ee.xEnd=Ce.ends[Le],Ee.xStart=Ce.starts[Le]),Se&&(Ee.orig_y=W[Le],Ee.yEnd=he.ends[Le],Ee.yStart=he.starts[Le])):ge&&(Ae?X:Oe)?(Ee[yi]=Ae?le[Le]:Y[Le],Ee.gap=!0,Pe?(Ee.s=v,ye=!0):Ee.s=0):Ee[Ke]=Ee[nt]=v,xe&&(Ee.id=String(xe[Le]))}if(T(fe,F),b(z,F),u(fe,F),ge){for(Le=0;Le<fe.length;)fe[Le][yi]===v?fe.splice(Le,1):Le++;if(s.sort(fe,function(ae,ve){return ae[yi]-ve[yi]||ae.i-ve.i}),ye){for(Le=0;Le<fe.length-1&&fe[Le].gap;)Le++;for(tt=fe[Le].s,tt||(tt=fe[Le].s=0),ce=0;ce<Le;ce++)fe[ce].s=tt;for(ke=fe.length-1;ke>Le&&fe[ke].gap;)ke--;for(tt=fe[ke].s,ce=fe.length-1;ce>ke;ce--)fe[ce].s=tt;for(;Le<ke;)if(Le++,fe[Le].gap){for(ce=Le+1;fe[ce].gap;)ce++;for(var Qe=fe[Le-1][yi],pe=fe[Le-1].s,q=(fe[ce].s-pe)/(fe[ce][yi]-Qe);Le<ce;)fe[Le].s=pe+(fe[Le][yi]-Qe)*q,Le++}}}return fe}function M(z,F,w,L,O,H,W){var Ce=F._length,he=z._fullLayout,le=w._id,Y=L._id,Re=he._firstScatter[P(F)]===F.uid,fe=(N(F,he,w,L)||{}).orientation,xe=F.fill;w._minDtick=0,L._minDtick=0;var ge={padded:!0},ye={padded:!0};W&&(ge.ppad=ye.ppad=W);var Ae=Ce<2||O[0]!==O[Ce-1]||H[0]!==H[Ce-1];Ae&&(xe==="tozerox"||xe==="tonextx"&&(Re||fe==="h"))?ge.tozero=!0:!(F.error_y||{}).visible&&(xe==="tonexty"||xe==="tozeroy"||!y.hasMarkers(F)&&!y.hasText(F))&&(ge.padded=!1,ge.ppad=0),Ae&&(xe==="tozeroy"||xe==="tonexty"&&(Re||fe==="v"))?ye.tozero=!0:(xe==="tonextx"||xe==="tozerox")&&(ye.padded=!1),le&&(F._extremes[le]=h.findExtremes(w,O,ge)),Y&&(F._extremes[Y]=h.findExtremes(L,H,ye))}function D(z,F){if(y.hasMarkers(z)){var w=z.marker,L=1.6*(z.marker.sizeref||1),O;if(z.marker.sizemode==="area"?O=function(le){return Math.max(Math.sqrt((le||0)/L),3)}:O=function(le){return Math.max((le||0)/L,3)},s.isArrayOrTypedArray(w.size)){var H={type:"linear"};h.setConvert(H);for(var W=H.makeCalcdata(z.marker,"size"),Ce=new Array(F),he=0;he<F;he++)Ce[he]=O(W[he]);return Ce}else return O(w.size)}}function B(z,F){var w=P(F),L=z._firstScatter;L[w]||(L[w]=F.uid)}function P(z){var F=z.stackgroup;return z.xaxis+z.yaxis+z.type+(F?"-"+F:"")}function N(z,F,w,L){var O=z.stackgroup;if(O){var H=F._scatterStackOpts[w._id+L._id][O],W=H.orientation==="v"?L:w;if(W.type==="linear"||W.type==="log")return H}}ue.exports={calc:k,calcMarkerSize:D,calcAxisExpansion:M,setFirstScatter:B,getStackOpts:N}}),v_=t((me,ue)=>{ue.exports=s;var g=Z().distinctVals;function s(h,x){this.traces=h,this.sepNegVal=x.sepNegVal,this.overlapNoMerge=x.overlapNoMerge;for(var v=1/0,y=x.posAxis._id.charAt(0),b=[],T=0;T<h.length;T++){for(var u=h[T],k=0;k<u.length;k++){var M=u[k],D=M.p;D===void 0&&(D=M[y]),D!==void 0&&b.push(D)}u[0]&&u[0].width1&&(v=Math.min(u[0].width1,v))}this.positions=b;var B=g(b);this.distinctPositions=B.vals,B.vals.length===1&&v!==1/0?this.minDiff=v:this.minDiff=Math.min(B.minDiff,v);var P=(x.posAxis||{}).type;(P==="category"||P==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}s.prototype.put=function(h,x,v){var y=this.getLabel(h,x,v),b=this.bins[y]||0;return this.bins[y]=b+v,b},s.prototype.get=function(h,x,v){var y=this.getLabel(h,x,v);return this.bins[y]||0},s.prototype.getLabel=function(h,x,v){var y=v<0&&this.sepNegVal?"v":"^",b=this.overlapNoMerge?h:Math.round(h/this.binWidth);return y+b+"g"+x}}),L2=t((me,ue)=>{var g=A(),s=Z().isArrayOrTypedArray,h=C().BADNUM,x=l1(),v=mm(),y=rg().getAxisGroup,b=v_();function T(fe,xe){for(var ge=xe.xaxis,ye=xe.yaxis,Ae=fe._fullLayout,Le=fe._fullData,ce=fe.calcdata,ke=[],Pe=[],tt=0;tt<Le.length;tt++){var Ke=Le[tt];if(Ke.visible===!0&&x.traceIs(Ke,"bar")&&Ke.xaxis===ge._id&&Ke.yaxis===ye._id&&(Ke.orientation==="h"?ke.push(ce[tt]):Pe.push(ce[tt]),Ke._computePh))for(var nt=fe.calcdata[tt],yi=0;yi<nt.length;yi++)typeof nt[yi].ph0=="function"&&(nt[yi].ph0=nt[yi].ph0()),typeof nt[yi].ph1=="function"&&(nt[yi].ph1=nt[yi].ph1())}var Ei={xCat:ge.type==="category"||ge.type==="multicategory",yCat:ye.type==="category"||ye.type==="multicategory",mode:Ae.barmode,norm:Ae.barnorm,gap:Ae.bargap,groupgap:Ae.bargroupgap};u(fe,ge,ye,Pe,Ei),u(fe,ye,ge,ke,Ei)}function u(fe,xe,ge,ye,Ae){if(ye.length){var Le,ce,ke,Pe,tt;switch(D(ge,ye),Ae.mode){case"overlay":B(fe,xe,ge,ye,Ae);break;case"group":for(Le=[],ce=[],ke=0;ke<ye.length;ke++)Pe=ye[ke],tt=Pe[0].trace,tt.offset===void 0?ce.push(Pe):Le.push(Pe);ce.length&&P(fe,xe,ge,ce,Ae),Le.length&&B(fe,xe,ge,Le,Ae);break;case"stack":case"relative":for(Le=[],ce=[],ke=0;ke<ye.length;ke++)Pe=ye[ke],tt=Pe[0].trace,tt.base===void 0?ce.push(Pe):Le.push(Pe);M(ce),ce.length&&N(fe,xe,ge,ce,Ae),Le.length&&B(fe,xe,ge,Le,Ae);break}k(ye),Y(ye,xe)}}function k(fe){var xe,ge,ye,Ae,Le,ce,ke;for(xe=0;xe<fe.length;xe++)ge=fe[xe],ye=ge[0].trace,Ae=ge[0].t,Ae.cornerradiusvalue===void 0&&(Le=ye.marker?ye.marker.cornerradius:void 0,Le!==void 0&&(ce=g(Le)?+Le:+Le.slice(0,-1),ke=g(Le)?"px":"%",Ae.cornerradiusvalue=ce,Ae.cornerradiusform=ke))}function M(fe){if(!(fe.length<2)){var xe,ge,ye,Ae,Le,ce,ke;for(xe=0;xe<fe.length&&(ge=fe[xe],ye=ge[0].trace,Le=ye.marker?ye.marker.cornerradius:void 0,Le===void 0);xe++);if(Le!==void 0)for(ce=g(Le)?+Le:+Le.slice(0,-1),ke=g(Le)?"px":"%",xe=0;xe<fe.length;xe++)ge=fe[xe],Ae=ge[0].t,Ae.cornerradiusvalue=ce,Ae.cornerradiusform=ke}}function D(fe,xe){var ge,ye;for(ge=0;ge<xe.length;ge++){var Ae=xe[ge],Le=Ae[0].trace,ce=Le.type==="funnel"?Le._base:Le.base,ke,Pe=Le.orientation==="h"?Le.xcalendar:Le.ycalendar,tt=fe.type==="category"||fe.type==="multicategory"?function(){return null}:fe.d2c;if(s(ce)){for(ye=0;ye<Math.min(ce.length,Ae.length);ye++)ke=tt(ce[ye],0,Pe),g(ke)?(Ae[ye].b=+ke,Ae[ye].hasB=1):Ae[ye].b=0;for(;ye<Ae.length;ye++)Ae[ye].b=0}else{ke=tt(ce,0,Pe);var Ke=g(ke);for(ke=Ke?ke:0,ye=0;ye<Ae.length;ye++)Ae[ye].b=ke,Ke&&(Ae[ye].hasB=1)}}}function B(fe,xe,ge,ye,Ae){for(var Le=0;Le<ye.length;Le++){var ce=ye[Le],ke=new b([ce],{posAxis:xe,sepNegVal:!1,overlapNoMerge:!Ae.norm});z(fe,xe,ke,Ae),Ae.norm?(W(ke),he(ge,ke,Ae)):O(ge,ke)}}function P(fe,xe,ge,ye,Ae){var Le=new b(ye,{posAxis:xe,sepNegVal:!1,overlapNoMerge:!Ae.norm});z(fe,xe,Le,Ae),Ce(Le,xe),Ae.norm?(W(Le),he(ge,Le,Ae)):O(ge,Le)}function N(fe,xe,ge,ye,Ae){var Le=new b(ye,{posAxis:xe,sepNegVal:Ae.mode==="relative",overlapNoMerge:!(Ae.norm||Ae.mode==="stack"||Ae.mode==="relative")});z(fe,xe,Le,Ae),H(ge,Le,Ae);for(var ce=0;ce<ye.length;ce++)for(var ke=ye[ce],Pe=ke[0].t.offsetindex,tt=0;tt<ke.length;tt++){var Ke=ke[tt];if(Ke.s!==h){var nt=Ke.b+Ke.s===Le.get(Ke.p,Pe,Ke.s);nt&&(Ke._outmost=!0)}}Ae.norm&&he(ge,Le,Ae)}function z(fe,xe,ge,ye){var Ae=fe._fullLayout,Le=ge.positions,ce=ge.distinctPositions,ke=ge.minDiff,Pe=ge.traces,tt=Pe.length,Ke=Le.length!==ce.length,nt=ke*(1-ye.gap),yi,Ei,vs,Se;if(xe._id==="angularaxis")yi=nt,Ei=yi*(1-(ye.groupgap||0)),vs=-Ei/2;else{var Ee=y(Ae,xe._id)+Pe[0][0].trace.orientation;Se=Ae._alignmentOpts[Ee]||{}}for(var X=0;X<tt;X++){var Oe=Pe[X],Qe=Oe[0].trace;if(xe._id!=="angularaxis"){var pe=Se[Qe.alignmentgroup]||{},q=Object.keys(pe.offsetGroups||{}).length;q?yi=nt/q:yi=Ke?nt/tt:nt,Ei=yi*(1-(ye.groupgap||0)),q?vs=((2*Qe._offsetIndex+1-q)*yi-Ei)/2:vs=Ke?((2*X+1-tt)*yi-Ei)/2:-Ei/2}var ae=Oe[0].t;ae.barwidth=Ei,ae.offsetindex=Qe._offsetIndex||0,ae.poffset=vs,ae.bargroupwidth=nt,ae.bardelta=ke}ge.binWidth=Pe[0][0].t.barwidth/100,F(ge),w(xe,ge),xe._id==="angularaxis"?L(xe,ge):L(xe,ge,Ke)}function F(fe){var xe=fe.traces,ge,ye;for(ge=0;ge<xe.length;ge++){var Ae=xe[ge],Le=Ae[0],ce=Le.trace,ke=Le.t,Pe=ce._offset||ce.offset,tt=ke.poffset,Ke;if(s(Pe)){for(Ke=Array.prototype.slice.call(Pe,0,Ae.length),ye=0;ye<Ke.length;ye++)g(Ke[ye])||(Ke[ye]=tt);for(ye=Ke.length;ye<Ae.length;ye++)Ke.push(tt);ke.poffset=Ke}else Pe!==void 0&&(ke.poffset=Pe);var nt=ce._width||ce.width,yi=ke.barwidth;if(s(nt)){var Ei=Array.prototype.slice.call(nt,0,Ae.length);for(ye=0;ye<Ei.length;ye++)g(Ei[ye])||(Ei[ye]=yi);for(ye=Ei.length;ye<Ae.length;ye++)Ei.push(yi);if(ke.barwidth=Ei,Pe===void 0){for(Ke=[],ye=0;ye<Ae.length;ye++)Ke.push(tt+(yi-Ei[ye])/2);ke.poffset=Ke}}else nt!==void 0&&(ke.barwidth=nt,Pe===void 0&&(ke.poffset=tt+(yi-nt)/2))}}function w(fe,xe){for(var ge=xe.traces,ye=Re(fe),Ae=0;Ae<ge.length;Ae++)for(var Le=ge[Ae],ce=Le[0].t,ke=ce.poffset,Pe=s(ke),tt=ce.barwidth,Ke=s(tt),nt=0;nt<Le.length;nt++){var yi=Le[nt],Ei=yi.w=Ke?tt[nt]:tt;yi.p===void 0&&(yi.p=yi[ye],yi["orig_"+ye]=yi[ye]);var vs=(Pe?ke[nt]:ke)+Ei/2;yi[ye]=yi.p+vs}}function L(fe,xe,ge){var ye=xe.traces,Ae=xe.minDiff,Le=Ae/2;v.minDtick(fe,xe.minDiff,xe.distinctPositions[0],ge);for(var ce=0;ce<ye.length;ce++){var ke=ye[ce],Pe=ke[0],tt=Pe.trace,Ke=[],nt,yi,Ei,vs;for(vs=0;vs<ke.length;vs++)nt=ke[vs],yi=nt.p-Le,Ei=nt.p+Le,Ke.push(yi,Ei);if(tt.width||tt.offset){var Se=Pe.t,Ee=Se.poffset,X=Se.barwidth,Oe=s(Ee),Qe=s(X);for(vs=0;vs<ke.length;vs++){nt=ke[vs];var pe=Oe?Ee[vs]:Ee,q=Qe?X[vs]:X;yi=nt.p+pe,Ei=yi+q,Ke.push(yi,Ei)}}tt._extremes[fe._id]=v.findExtremes(fe,Ke,{padded:!1})}}function O(fe,xe){for(var ge=xe.traces,ye=Re(fe),Ae=0;Ae<ge.length;Ae++){for(var Le=ge[Ae],ce=Le[0].trace,ke=ce.type==="scatter",Pe=ce.orientation==="v",tt=[],Ke=!1,nt=0;nt<Le.length;nt++){var yi=Le[nt],Ei=ke?0:yi.b,vs=ke?Pe?yi.y:yi.x:Ei+yi.s;yi[ye]=vs,tt.push(vs),yi.hasB&&tt.push(Ei),(!yi.hasB||!yi.b)&&(Ke=!0)}ce._extremes[fe._id]=v.findExtremes(fe,tt,{tozero:Ke,padded:!0})}}function H(fe,xe,ge){var ye=Re(fe),Ae=xe.traces,Le,ce,ke,Pe,tt,Ke,nt;for(Pe=0;Pe<Ae.length;Pe++)if(Le=Ae[Pe],ce=Le[0].trace,ce.type==="funnel")for(nt=Le[0].t.offsetindex,tt=0;tt<Le.length;tt++)Ke=Le[tt],Ke.s!==h&&xe.put(Ke.p,nt,-.5*Ke.s);for(Pe=0;Pe<Ae.length;Pe++){Le=Ae[Pe],ce=Le[0].trace,ke=ce.type==="funnel",nt=ce.type==="barpolar"?0:Le[0].t.offsetindex;var yi=[];for(tt=0;tt<Le.length;tt++)if(Ke=Le[tt],Ke.s!==h){var Ei;ke?Ei=Ke.s:Ei=Ke.s+Ke.b;var vs=xe.put(Ke.p,nt,Ei),Se=vs+Ei;Ke.b=vs,Ke[ye]=Se,ge.norm||(yi.push(Se),Ke.hasB&&yi.push(vs))}ge.norm||(ce._extremes[fe._id]=v.findExtremes(fe,yi,{tozero:!0,padded:!0}))}}function W(fe){for(var xe=fe.traces,ge=0;ge<xe.length;ge++)for(var ye=xe[ge],Ae=ye[0].t.offsetindex,Le=0;Le<ye.length;Le++){var ce=ye[Le];ce.s!==h&&fe.put(ce.p,Ae,ce.b+ce.s)}}function Ce(fe,xe){for(var ge=fe.traces,ye=0;ye<ge.length;ye++){var Ae=ge[ye],Le=Ae[0].trace,ce=Ae[0].t.offsetindex;if(Le.base===void 0)for(var ke=new b([Ae],{posAxis:xe,sepNegVal:!0,overlapNoMerge:!0}),Pe=0;Pe<Ae.length;Pe++){var tt=Ae[Pe];if(tt.p!==h){var Ke=ke.put(tt.p,ce,tt.b+tt.s);Ke&&(tt.b=Ke)}}}}function he(fe,xe,ge){var ye=xe.traces,Ae=Re(fe),Le=ge.norm==="fraction"?1:100,ce=Le/1e9,ke=fe.l2c(fe.c2l(0)),Pe=ge.mode==="stack"?Le:ke;function tt(ae){return g(fe.c2l(ae))&&(ae<ke-ce||ae>Pe+ce||!g(ke))}for(var Ke=0;Ke<ye.length;Ke++){for(var nt=ye[Ke],yi=nt[0].t.offsetindex,Ei=nt[0].trace,vs=[],Se=!1,Ee=!1,X=0;X<nt.length;X++){var Oe=nt[X];if(Oe.s!==h){var Qe=Math.abs(Le/xe.get(Oe.p,yi,Oe.s));Oe.b*=Qe,Oe.s*=Qe;var pe=Oe.b,q=pe+Oe.s;Oe[Ae]=q,vs.push(q),Ee=Ee||tt(q),Oe.hasB&&(vs.push(pe),Ee=Ee||tt(pe)),(!Oe.hasB||!Oe.b)&&(Se=!0)}}Ei._extremes[fe._id]=v.findExtremes(fe,vs,{tozero:Se,padded:Ee})}}function le(fe,xe,ge,ye){for(var Ae=Re(ye),Le=0;Le<fe.length;Le++)for(var ce=fe[Le],ke=0;ke<ce.length;ke++){var Pe=ce[ke],tt=Pe[Ae];Pe._sMin=xe[tt],Pe._sMax=ge[tt]}}function Y(fe,xe){var ge=Re(xe),ye={},Ae,Le,ce,ke=1/0,Pe=-1/0;for(Ae=0;Ae<fe.length;Ae++)for(ce=fe[Ae],Le=0;Le<ce.length;Le++){var tt=ce[Le].p;g(tt)&&(ke=Math.min(ke,tt),Pe=Math.max(Pe,tt))}var Ke=1e4/(Pe-ke),nt=ye.round=function(Te){return String(Math.round(Ke*(Te-ke)))},yi={},Ei={},vs=fe.some(function(Te){var et=Te[0].trace;return"marker"in et&&et.marker.cornerradius});for(Ae=0;Ae<fe.length;Ae++){ce=fe[Ae],ce[0].t.extents=ye;var Se=ce[0].t.poffset,Ee=s(Se);for(Le=0;Le<ce.length;Le++){var X=ce[Le],Oe=X[ge]-X.w/2;if(g(Oe)){var Qe=X[ge]+X.w/2,pe=nt(X.p);ye[pe]?ye[pe]=[Math.min(Oe,ye[pe][0]),Math.max(Qe,ye[pe][1])]:ye[pe]=[Oe,Qe]}if(X.p0=X.p+(Ee?Se[Le]:Se),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s,vs){var q=Math.min(X.s0,X.s1)||0,ae=Math.max(X.s0,X.s1)||0,ve=X[ge];yi[ve]=ve in yi?Math.min(yi[ve],q):q,Ei[ve]=ve in Ei?Math.max(Ei[ve],ae):ae}}}vs&&le(fe,yi,Ei,xe)}function Re(fe){return fe._id.charAt(0)}ue.exports={crossTraceCalc:T,setGroupPositions:u}}),fb=t((me,ue)=>{var g=g_(),s=L2().setGroupPositions;function h(y,b){for(var T=b.xaxis,u=b.yaxis,k=y._fullLayout,M=y._fullData,D=y.calcdata,B=[],P=[],N=0;N<M.length;N++){var z=M[N];z.visible===!0&&z.type==="scatter"&&z.xaxis===T._id&&z.yaxis===u._id&&(z.orientation==="h"?B.push(D[N]):z.orientation==="v"&&P.push(D[N]))}var F={mode:k.scattermode,gap:k.scattergap};s(y,T,u,P,F),s(y,u,T,B,F)}ue.exports=function(y,b){y._fullLayout.scattermode==="group"&&h(y,b);var T=b.xaxis,u=b.yaxis,k=T._id+u._id,M=y._fullLayout._scatterStackOpts[k];if(M){var D=y.calcdata,B,P,N,z,F,w,L,O,H,W,Ce,he,le,Y,Re;for(var fe in M){W=M[fe];var xe=W.traceIndices;if(xe.length){for(Ce=W.stackgaps==="interpolate",he=W.groupnorm,W.orientation==="v"?(le="x",Y="y"):(le="y",Y="x"),Re=new Array(xe.length),B=0;B<Re.length;B++)Re[B]=!1;w=D[xe[0]];var ge=new Array(w.length);for(B=0;B<w.length;B++)ge[B]=w[B][le];for(B=1;B<xe.length;B++){for(F=D[xe[B]],P=N=0;P<F.length;P++){for(L=F[P][le];L>ge[N]&&N<ge.length;N++)x(F,P,ge[N],B,Re,Ce,le),P++;if(L!==ge[N]){for(z=0;z<B;z++)x(D[xe[z]],N,L,z,Re,Ce,le);ge.splice(N,0,L)}N++}for(;N<ge.length;N++)x(F,P,ge[N],B,Re,Ce,le),P++}var ye=ge.length;for(P=0;P<w.length;P++){for(O=w[P][Y]=w[P].s,B=1;B<xe.length;B++)F=D[xe[B]],F[0].trace._rawLength=F[0].trace._length,F[0].trace._length=ye,O+=F[P].s,F[P][Y]=O;if(he)for(H=(he==="fraction"?O:O/100)||1,B=0;B<xe.length;B++){var Ae=D[xe[B]][P];Ae[Y]/=H,Ae.sNorm=Ae.s/H}}for(B=0;B<xe.length;B++){F=D[xe[B]];var Le=F[0].trace,ce=g.calcMarkerSize(Le,Le._rawLength),ke=Array.isArray(ce);if(ce&&Re[B]||ke){var Pe=ce;for(ce=new Array(ye),P=0;P<ye;P++)ce[P]=F[P].gap?0:ke?Pe[F[P].i]:Pe}var tt=new Array(ye),Ke=new Array(ye);for(P=0;P<ye;P++)tt[P]=F[P].x,Ke[P]=F[P].y;g.calcAxisExpansion(y,Le,T,u,tt,Ke,ce),F[0].t.orientation=W.orientation}}}}};function x(y,b,T,u,k,M,D){k[u]=!0;var B={i:null,gap:!0,s:0};if(B[D]=T,y.splice(b,0,B),b&&T===y[b-1][D]){var P=y[b-1];B.s=P.s,B.i=P.i,B.gap=P.gap}else M&&(B.s=v(y,b,T,D));b||(y[0].t=y[1].t,y[0].trace=y[1].trace,delete y[1].t,delete y[1].trace)}function v(y,b,T,u){var k=y[b-1],M=y[b+1];return M?k?k.s+(M.s-k.s)*(T-k[u])/(M[u]-k[u]):M.s:k.s}}),Bx=t((me,ue)=>{var g=D0(),s=C(),h=s.BADNUM,x=s.LOG_CLIP,v=x+.5,y=x-.5,b=Z(),T=b.segmentsIntersect,u=b.constrain,k=ox();ue.exports=function(M,D){var B=D.trace||{},P=D.xaxis,N=D.yaxis,z=P.type==="log",F=N.type==="log",w=P._length,L=N._length,O=D.backoff,H=B.marker,W=D.connectGaps,Ce=D.baseTolerance,he=D.shape,le=he==="linear",Y=B.fill&&B.fill!=="none",Re=[],fe=k.minTolerance,xe=M.length,ge=new Array(xe),ye=0,Ae,Le,ce,ke,Pe,tt,Ke,nt,yi,Ei,vs,Se,Ee,X,Oe,Qe;function pe(Up){var Qp=M[Up];if(!Qp)return!1;var Zp=D.linearized?P.l2p(Qp.x):P.c2p(Qp.x),Kp=D.linearized?N.l2p(Qp.y):N.c2p(Qp.y);if(Zp===h){if(z&&(Zp=P.c2p(Qp.x,!0)),Zp===h)return!1;F&&Kp===h&&(Zp*=Math.abs(P._m*L*(P._m>0?v:y)/(N._m*w*(N._m>0?v:y)))),Zp*=1e3}if(Kp===h){if(F&&(Kp=N.c2p(Qp.y,!0)),Kp===h)return!1;Kp*=1e3}return[Zp,Kp]}function q(Up,Qp,Zp,Kp){var R0=Zp-Up,k0=Kp-Qp,N0=.5-Up,lm=.5-Qp,Im=R0*R0+k0*k0,u1=R0*N0+k0*lm;if(u1>0&&u1<Im){var v1=N0*k0-lm*R0;if(v1*v1<Im)return!0}}var ae,ve;function Te(Up,Qp){var Zp=Up[0]/w,Kp=Up[1]/L,R0=Math.max(0,-Zp,Zp-1,-Kp,Kp-1);return R0&&ae!==void 0&&q(Zp,Kp,ae,ve)&&(R0=0),R0&&Qp&&q(Zp,Kp,Qp[0]/w,Qp[1]/L)&&(R0=0),(1+k.toleranceGrowth*R0)*Ce}function et(Up,Qp){var Zp=Up[0]-Qp[0],Kp=Up[1]-Qp[1];return Math.sqrt(Zp*Zp+Kp*Kp)}var bt=k.maxScreensAway,dr=-w*bt,Ol=w*(1+bt),Xl=-L*bt,Pp=L*(1+bt),t0=[[dr,Xl,Ol,Xl],[Ol,Xl,Ol,Pp],[Ol,Pp,dr,Pp],[dr,Pp,dr,Xl]],Wp,$p,Lo,kl,dt,yp;function Bp(Up,Qp){for(var Zp=[],Kp=0,R0=0;R0<4;R0++){var k0=t0[R0],N0=T(Up[0],Up[1],Qp[0],Qp[1],k0[0],k0[1],k0[2],k0[3]);N0&&(!Kp||Math.abs(N0.x-Zp[0][0])>1||Math.abs(N0.y-Zp[0][1])>1)&&(N0=[N0.x,N0.y],Kp&&et(N0,Up)<et(Zp[0],Up)?Zp.unshift(N0):Zp.push(N0),Kp++)}return Zp}function Jp(Up){if(Up[0]<dr||Up[0]>Ol||Up[1]<Xl||Up[1]>Pp)return[u(Up[0],dr,Ol),u(Up[1],Xl,Pp)]}function m0(Up,Qp){if(Up[0]===Qp[0]&&(Up[0]===dr||Up[0]===Ol)||Up[1]===Qp[1]&&(Up[1]===Xl||Up[1]===Pp))return!0}function s0(Up,Qp){var Zp=[],Kp=Jp(Up),R0=Jp(Qp);return Kp&&R0&&m0(Kp,R0)||(Kp&&Zp.push(Kp),R0&&Zp.push(R0)),Zp}function y0(Up,Qp,Zp){return function(Kp,R0){var k0=Jp(Kp),N0=Jp(R0),lm=[];if(k0&&N0&&m0(k0,N0))return lm;k0&&lm.push(k0),N0&&lm.push(N0);var Im=2*b.constrain((Kp[Up]+R0[Up])/2,Qp,Zp)-((k0||Kp)[Up]+(N0||R0)[Up]);if(Im){var u1;k0&&N0?u1=Im>0==k0[Up]>N0[Up]?k0:N0:u1=k0||N0,u1[Up]+=Im}return lm}}var M0;he==="linear"||he==="spline"?M0=Bp:he==="hv"||he==="vh"?M0=s0:he==="hvh"?M0=y0(0,dr,Ol):he==="vhv"&&(M0=y0(1,Xl,Pp));function T0(Up,Qp){var Zp=Qp[0]-Up[0],Kp=(Qp[1]-Up[1])/Zp,R0=(Up[1]*Qp[0]-Qp[1]*Up[0])/Zp;return R0>0?[Kp>0?dr:Ol,Pp]:[Kp>0?Ol:dr,Xl]}function G0(Up){var Qp=Up[0],Zp=Up[1],Kp=Qp===ge[ye-1][0],R0=Zp===ge[ye-1][1];if(!(Kp&&R0))if(ye>1){var k0=Qp===ge[ye-2][0],N0=Zp===ge[ye-2][1];Kp&&(Qp===dr||Qp===Ol)&&k0?N0?ye--:ge[ye-1]=Up:R0&&(Zp===Xl||Zp===Pp)&&N0?k0?ye--:ge[ye-1]=Up:ge[ye++]=Up}else ge[ye++]=Up}function h0(Up){ge[ye-1][0]!==Up[0]&&ge[ye-1][1]!==Up[1]&&G0([Lo,kl]),G0(Up),dt=null,Lo=kl=0}var W0=b.isArrayOrTypedArray(H);function rm(Up){if(Up&&O&&(Up.i=Ae,Up.d=M,Up.trace=B,Up.marker=W0?H[Up.i]:H,Up.backoff=O),ae=Up[0]/w,ve=Up[1]/L,Wp=Up[0]<dr?dr:Up[0]>Ol?Ol:0,$p=Up[1]<Xl?Xl:Up[1]>Pp?Pp:0,Wp||$p){if(!ye)ge[ye++]=[Wp||Up[0],$p||Up[1]];else if(dt){var Qp=M0(dt,Up);Qp.length>1&&(h0(Qp[0]),ge[ye++]=Qp[1])}else yp=M0(ge[ye-1],Up)[0],ge[ye++]=yp;var Zp=ge[ye-1];Wp&&$p&&(Zp[0]!==Wp||Zp[1]!==$p)?(dt&&(Lo!==Wp&&kl!==$p?G0(Lo&&kl?T0(dt,Up):[Lo||Wp,kl||$p]):Lo&&kl&&G0([Lo,kl])),G0([Wp,$p])):Lo-Wp&&kl-$p&&G0([Wp||Lo,$p||kl]),dt=Up,Lo=Wp,kl=$p}else dt&&h0(M0(dt,Up)[0]),ge[ye++]=Up}for(Ae=0;Ae<xe;Ae++)if(Le=pe(Ae),!!Le){for(ye=0,dt=null,rm(Le),Ae++;Ae<xe;Ae++){if(ke=pe(Ae),!ke){if(W)continue;break}if(!le||!D.simplify){rm(ke);continue}var V0=pe(Ae+1);if(Ei=et(ke,Le),!(!(Y&&(ye===0||ye===xe-1))&&Ei<Te(ke,V0)*fe)){for(nt=[(ke[0]-Le[0])/Ei,(ke[1]-Le[1])/Ei],Pe=Le,vs=Ei,Se=X=Oe=0,Ke=!1,ce=ke,Ae++;Ae<M.length;Ae++){if(tt=V0,V0=pe(Ae+1),!tt){if(W)continue;break}if(yi=[tt[0]-Le[0],tt[1]-Le[1]],Qe=yi[0]*nt[1]-yi[1]*nt[0],X=Math.min(X,Qe),Oe=Math.max(Oe,Qe),Oe-X>Te(tt,V0))break;ce=tt,Ee=yi[0]*nt[0]+yi[1]*nt[1],Ee>vs?(vs=Ee,ke=tt,Ke=!1):Ee<Se&&(Se=Ee,Pe=tt,Ke=!0)}if(Ke?(rm(ke),ce!==Pe&&rm(Pe)):(Pe!==Le&&rm(Pe),ce!==ke&&rm(ke)),rm(ce),Ae>=M.length||!tt)break;rm(tt),Le=tt}}dt&&G0([Lo||dt[0],kl||dt[1]]),Re.push(ge.slice(0,ye))}var um=he.slice(he.length-1);if(O&&um!=="h"&&um!=="v"){for(var Uo=!1,Tp=-1,Be=[],ft=0;ft<Re.length;ft++)for(var mn=0;mn<Re[ft].length-1;mn++){var Bl=Re[ft][mn],Vl=Re[ft][mn+1],Np=g.applyBackoff(Vl,Bl);(Np[0]!==Vl[0]||Np[1]!==Vl[1])&&(Uo=!0),Be[Tp+1]||(Tp++,Be[Tp]=[Bl,[Np[0],Np[1]]])}return Uo?Be:Re}return Re}}),A3=t((me,ue)=>{var g={tonextx:1,tonexty:1,tonext:1};ue.exports=function(s,h,x){var v,y,b,T,u,k={},M=!1,D=-1,B=0,P=-1;for(y=0;y<x.length;y++)v=x[y][0].trace,b=v.stackgroup||"",b?b in k?u=k[b]:(u=k[b]=B,B++):v.fill in g&&P>=0?u=P:(u=P=B,B++),u<D&&(M=!0),v._groupIndex=D=u;var N=x.slice();M&&N.sort(function(F,w){var L=F[0].trace,O=w[0].trace;return L._groupIndex-O._groupIndex||L.index-O.index});var z={};for(y=0;y<N.length;y++)v=N[y][0].trace,b=v.stackgroup||"",v.visible===!0?(v._nexttrace=null,v.fill in g&&(T=z[b],v._prevtrace=T||null,T&&(T._nexttrace=v)),v._ownfill=v.fill&&(v.fill.substr(0,6)==="tozero"||v.fill==="toself"||v.fill.substr(0,2)==="to"&&!v._prevtrace),z[b]=v):v._prevtrace=v._nexttrace=v._ownfill=null;return N}}),y_=t((me,ue)=>{var g=c(),s=l1(),h=Z(),x=h.ensureSingle,v=h.identity,y=D0(),b=Dp(),T=Bx(),u=A3(),k=zg().tester;ue.exports=function(P,N,z,F,w,L){var O,H,W=!w,Ce=!!w&&w.duration>0,he=u(P,N,z);if(O=F.selectAll("g.trace").data(he,function(Y){return Y[0].trace.uid}),O.enter().append("g").attr("class",function(Y){return"trace scatter trace"+Y[0].trace.uid}).style("stroke-miterlimit",2),O.order(),M(P,O,N),Ce){L&&(H=L());var le=g.transition().duration(w.duration).ease(w.easing).each("end",function(){H&&H()}).each("interrupt",function(){H&&H()});le.each(function(){F.selectAll("g.trace").each(function(Y,Re){D(P,Re,N,Y,he,this,w)})})}else O.each(function(Y,Re){D(P,Re,N,Y,he,this,w)});W&&O.exit().remove(),F.selectAll("path:not([d])").remove()};function M(P,N,z){N.each(function(F){var w=x(g.select(this),"g","fills");y.setClipUrl(w,z.layerClipId,P);var L=F[0].trace,O=[];L._ownfill&&O.push("_ownFill"),L._nexttrace&&O.push("_nextFill");var H=w.selectAll("g").data(O,v);H.enter().append("g"),H.exit().each(function(W){L[W]=null}).remove(),H.order().each(function(W){L[W]=x(g.select(this),"path","js-fill")})})}function D(P,N,z,F,w,L,O){var H=P._context.staticPlot,W;B(P,N,z,F,w);var Ce=!!O&&O.duration>0;function he(h0){return Ce?h0.transition():h0}var le=z.xaxis,Y=z.yaxis,Re=F[0].trace,fe=Re.line,xe=g.select(L),ge=x(xe,"g","errorbars"),ye=x(xe,"g","lines"),Ae=x(xe,"g","points"),Le=x(xe,"g","text");if(s.getComponentMethod("errorbars","plot")(P,ge,z,O),Re.visible!==!0)return;he(xe).style("opacity",Re.opacity);var ce,ke,Pe=Re.fill.charAt(Re.fill.length-1);Pe!=="x"&&Pe!=="y"&&(Pe="");var tt,Ke;Pe==="y"?(tt=1,Ke=Y.c2p(0,!0)):Pe==="x"&&(tt=0,Ke=le.c2p(0,!0)),F[0][z.isRangePlot?"nodeRangePlot3":"node3"]=xe;var nt="",yi=[],Ei=Re._prevtrace,vs=null,Se=null;Ei&&(nt=Ei._prevRevpath||"",ke=Ei._nextFill,yi=Ei._ownPolygons,vs=Ei._fillsegments,Se=Ei._fillElement);var Ee,X,Oe="",Qe="",pe,q,ae,ve,Te,et,bt=[];Re._polygons=[];var dr=[],Ol=[],Xl=h.noop;if(ce=Re._ownFill,b.hasLines(Re)||Re.fill!=="none"){ke&&ke.datum(F),["hv","vh","hvh","vhv"].indexOf(fe.shape)!==-1?(pe=y.steps(fe.shape),q=y.steps(fe.shape.split("").reverse().join(""))):fe.shape==="spline"?pe=q=function(h0){var W0=h0[h0.length-1];return h0.length>1&&h0[0][0]===W0[0]&&h0[0][1]===W0[1]?y.smoothclosed(h0.slice(1),fe.smoothing):y.smoothopen(h0,fe.smoothing)}:pe=q=function(h0){return"M"+h0.join("L")},ae=function(h0){return q(h0.reverse())},Ol=T(F,{xaxis:le,yaxis:Y,trace:Re,connectGaps:Re.connectgaps,baseTolerance:Math.max(fe.width||1,3)/4,shape:fe.shape,backoff:fe.backoff,simplify:fe.simplify,fill:Re.fill}),dr=new Array(Ol.length);var Pp=0;for(W=0;W<Ol.length;W++){var t0,Wp=Ol[W];!t0||!Pe?(t0=Wp.slice(),dr[Pp]=t0,Pp++):t0.push.apply(t0,Wp)}Re._fillElement=null,Re._fillExclusionElement=Se,Re._fillsegments=dr.slice(0,Pp),dr=Re._fillsegments,Ol.length&&(ve=Ol[0][0].slice(),Te=Ol[Ol.length-1],et=Te[Te.length-1].slice()),Xl=function(h0){return function(W0){if(Ee=pe(W0),X=ae(W0),Oe?Pe?(Oe+="L"+Ee.substr(1),Qe=X+("L"+Qe.substr(1))):(Oe+="Z"+Ee,Qe=X+"Z"+Qe):(Oe=Ee,Qe=X),b.hasLines(Re)){var rm=g.select(this);if(rm.datum(F),h0)he(rm.style("opacity",0).attr("d",Ee).call(y.lineGroupStyle)).style("opacity",1);else{var V0=he(rm);V0.attr("d",Ee),y.singleLineStyle(F,V0)}}}}}var $p=ye.selectAll(".js-line").data(Ol);he($p.exit()).style("opacity",0).remove(),$p.each(Xl(!1)),$p.enter().append("path").classed("js-line",!0).style("vector-effect",H?"none":"non-scaling-stroke").call(y.lineGroupStyle).each(Xl(!0)),y.setClipUrl($p,z.layerClipId,P);function Lo(h0){he(h0).attr("d","M0,0Z")}var kl=function(){var h0=new Array(dr.length);for(W=0;W<dr.length;W++)h0[W]=k(dr[W]);return h0},dt=function(h0){var W0,rm;if(!h0||h0.length===0)for(W0=new Array(dr.length),rm=0;rm<dr.length;rm++){var V0=dr[rm][0].slice(),um=dr[rm][dr[rm].length-1].slice();V0[tt]=um[tt]=Ke;var Uo=[um,V0],Tp=Uo.concat(dr[rm]);W0[rm]=k(Tp)}else{for(W0=new Array(h0.length-1+dr.length),rm=0;rm<h0.length-1;rm++)W0[rm]=k(h0[rm]);var Be=h0[h0.length-1].slice();for(Be.reverse(),rm=0;rm<dr.length;rm++)W0[h0.length-1+rm]=k(dr[rm].concat(Be))}return W0};Ol.length?(ce?(ce.datum(F),ve&&et&&(Pe?(ve[tt]=et[tt]=Ke,he(ce).attr("d","M"+et+"L"+ve+"L"+Oe.substr(1)).call(y.singleFillStyle,P),bt=dt(null)):(he(ce).attr("d",Oe+"Z").call(y.singleFillStyle,P),bt=kl())),Re._polygons=bt,Re._fillElement=ce):ke&&(Re.fill.substr(0,6)==="tonext"&&Oe&&nt?(Re.fill==="tonext"?(he(ke).attr("d",Oe+"Z"+nt+"Z").call(y.singleFillStyle,P),bt=kl(),Re._polygons=bt.concat(yi)):(he(ke).attr("d",Oe+"L"+nt.substr(1)+"Z").call(y.singleFillStyle,P),bt=dt(vs),Re._polygons=bt),Re._fillElement=ke):Lo(ke)),Re._prevRevpath=Qe):(ce?Lo(ce):ke&&Lo(ke),Re._prevRevpath=null),Re._ownPolygons=bt;function yp(h0){return h0.filter(function(W0){return!W0.gap&&W0.vis})}function Bp(h0){return h0.filter(function(W0){return W0.vis})}function Jp(h0){return h0.filter(function(W0){return!W0.gap})}function m0(h0){return h0.id}function s0(h0){if(h0.ids)return m0}function y0(){return!1}function M0(h0,W0,rm){var V0,um,Uo,Tp=rm[0].trace,Be=b.hasMarkers(Tp),ft=b.hasText(Tp),mn=s0(Tp),Bl=y0,Vl=y0;if(Be||ft){var Np=v,Up=Tp.stackgroup,Qp=Up&&P._fullLayout._scatterStackOpts[le._id+Y._id][Up].stackgaps==="infer zero";Tp.marker.maxdisplayed||Tp._needsCull?Np=Qp?Bp:yp:Up&&!Qp&&(Np=Jp),Be&&(Bl=Np),ft&&(Vl=Np)}um=h0.selectAll("path.point"),V0=um.data(Bl,mn);var Zp=V0.enter().append("path").classed("point",!0);Ce&&Zp.call(y.pointStyle,Tp,P).call(y.translatePoints,le,Y).style("opacity",0).transition().style("opacity",1),V0.order();var Kp;Be&&(Kp=y.makePointStyleFns(Tp)),V0.each(function(R0){var k0=g.select(this),N0=he(k0);Uo=y.translatePoint(R0,N0,le,Y),Uo?(y.singlePointStyle(R0,N0,Tp,Kp,P),z.layerClipId&&y.hideOutsideRangePoint(R0,N0,le,Y,Tp.xcalendar,Tp.ycalendar),Tp.customdata&&k0.classed("plotly-customdata",R0.data!==null&&R0.data!==void 0)):N0.remove()}),Ce?V0.exit().transition().style("opacity",0).remove():V0.exit().remove(),um=W0.selectAll("g"),V0=um.data(Vl,mn),V0.enter().append("g").classed("textpoint",!0).append("text"),V0.order(),V0.each(function(R0){var k0=g.select(this),N0=he(k0.select("text"));Uo=y.translatePoint(R0,N0,le,Y),Uo?z.layerClipId&&y.hideOutsideRangePoint(R0,k0,le,Y,Tp.xcalendar,Tp.ycalendar):k0.remove()}),V0.selectAll("text").call(y.textPointStyle,Tp,P).each(function(R0){var k0=le.c2p(R0.x),N0=Y.c2p(R0.y);g.select(this).selectAll("tspan.line").each(function(){he(g.select(this)).attr({x:k0,y:N0})})}),V0.exit().remove()}Ae.datum(F),Le.datum(F),M0(Ae,Le,F);var T0=Re.cliponaxis===!1,G0=T0?null:z.layerClipId;y.setClipUrl(Ae,G0,P),y.setClipUrl(Le,G0,P)}function B(P,N,z,F,w){var L=z.xaxis,O=z.yaxis,H=g.extent(h.simpleMap(L.range,L.r2c)),W=g.extent(h.simpleMap(O.range,O.r2c)),Ce=F[0].trace;if(b.hasMarkers(Ce)){var he=Ce.marker.maxdisplayed;if(he!==0){var le=F.filter(function(xe){return xe.x>=H[0]&&xe.x<=H[1]&&xe.y>=W[0]&&xe.y<=W[1]}),Y=Math.ceil(le.length/he),Re=0;w.forEach(function(xe,ge){var ye=xe[0].trace;b.hasMarkers(ye)&&ye.marker.maxdisplayed>0&&ge<N&&Re++});var fe=Math.round(Re*Y/3+Math.floor(Re/3)*Y/7.1);F.forEach(function(xe){delete xe.vis}),le.forEach(function(xe,ge){Math.round((ge+fe)%Y)===0&&(xe.vis=!0)})}}}}),jx=t((me,ue)=>{ue.exports={container:"marker",min:"cmin",max:"cmax"}}),B5=t((me,ue)=>{var g=mm();ue.exports=function(s,h,x){var v={},y={_fullLayout:x},b=g.getFromTrace(y,h,"x"),T=g.getFromTrace(y,h,"y"),u=s.orig_x;u===void 0&&(u=s.x);var k=s.orig_y;return k===void 0&&(k=s.y),v.xLabel=g.tickText(b,b.c2l(u),!0).text,v.yLabel=g.tickText(T,T.c2l(k),!0).text,v}}),Ey=t((me,ue)=>{var g=c(),s=D0(),h=l1();function x(T){var u=g.select(T).selectAll("g.trace.scatter");u.style("opacity",function(k){return k[0].trace.opacity}),u.selectAll("g.points").each(function(k){var M=g.select(this),D=k.trace||k[0].trace;v(M,D,T)}),u.selectAll("g.text").each(function(k){var M=g.select(this),D=k.trace||k[0].trace;y(M,D,T)}),u.selectAll("g.trace path.js-line").call(s.lineGroupStyle),u.selectAll("g.trace path.js-fill").call(s.fillGroupStyle,T,!1),h.getComponentMethod("errorbars","style")(u)}function v(T,u,k){s.pointStyle(T.selectAll("path.point"),u,k)}function y(T,u,k){s.textPointStyle(T.selectAll("text"),u,k)}function b(T,u,k){var M=u[0].trace;M.selectedpoints?(s.selectedPointStyle(k.selectAll("path.point"),M),s.selectedTextStyle(k.selectAll("text"),M)):(v(k,M,T),y(k,M,T))}ue.exports={style:x,stylePoints:v,styleText:y,styleOnSelect:b}}),pb=t((me,ue)=>{var g=_r(),s=Dp();ue.exports=function(h,x){var v,y;if(h.mode==="lines")return v=h.line.color,v&&g.opacity(v)?v:h.fillcolor;if(h.mode==="none")return h.fill?h.fillcolor:"";var b=x.mcc||(h.marker||{}).color,T=x.mlcc||((h.marker||{}).line||{}).color;return y=b&&g.opacity(b)?b:T&&g.opacity(T)&&(x.mlw||((h.marker||{}).line||{}).width)?T:"",y?g.opacity(y)<.3?g.addOpacity(y,.3):y:(v=(h.line||{}).color,v&&g.opacity(v)&&s.hasLines(h)&&h.line.width?v:h.fillcolor)}}),sx=t((me,ue)=>{var g=Z(),s=Nv(),h=l1(),x=pb(),v=_r(),y=g.fillText;ue.exports=function(b,T,u,k){var M=b.cd,D=M[0].trace,B=b.xa,P=b.ya,N=B.c2p(T),z=P.c2p(u),F=[N,z],w=D.hoveron||"",L=D.mode.indexOf("markers")!==-1?3:.5,O=!!D.xperiodalignment,H=!!D.yperiodalignment;if(w.indexOf("points")!==-1){var W=function(nt){if(O){var yi=B.c2p(nt.xStart),Ei=B.c2p(nt.xEnd);return N>=Math.min(yi,Ei)&&N<=Math.max(yi,Ei)?0:1/0}var vs=Math.max(3,nt.mrc||0),Se=1-1/vs,Ee=Math.abs(B.c2p(nt.x)-N);return Ee<vs?Se*Ee/vs:Ee-vs+Se},Ce=function(nt){if(H){var yi=P.c2p(nt.yStart),Ei=P.c2p(nt.yEnd);return z>=Math.min(yi,Ei)&&z<=Math.max(yi,Ei)?0:1/0}var vs=Math.max(3,nt.mrc||0),Se=1-1/vs,Ee=Math.abs(P.c2p(nt.y)-z);return Ee<vs?Se*Ee/vs:Ee-vs+Se},he=function(nt){var yi=Math.max(L,nt.mrc||0),Ei=B.c2p(nt.x)-N,vs=P.c2p(nt.y)-z;return Math.max(Math.sqrt(Ei*Ei+vs*vs)-yi,1-L/yi)},le=s.getDistanceFunction(k,W,Ce,he);if(s.getClosest(M,le,b),b.index!==!1){var Y=M[b.index],Re=B.c2p(Y.x,!0),fe=P.c2p(Y.y,!0),xe=Y.mrc||1;b.index=Y.i;var ge=M[0].t.orientation,ye=ge&&(Y.sNorm||Y.s),Ae=ge==="h"?ye:Y.orig_x!==void 0?Y.orig_x:Y.x,Le=ge==="v"?ye:Y.orig_y!==void 0?Y.orig_y:Y.y;return g.extendFlat(b,{color:x(D,Y),x0:Re-xe,x1:Re+xe,xLabelVal:Ae,y0:fe-xe,y1:fe+xe,yLabelVal:Le,spikeDistance:he(Y),hovertemplate:D.hovertemplate}),y(Y,D,b),h.getComponentMethod("errorbars","hoverInfo")(Y,D,b),[b]}}function ce(nt){if(!nt)return!1;var yi=nt.node();try{var Ei=new DOMPoint(F[0],F[1]);return yi.isPointInFill(Ei)}catch{var vs=yi.ownerSVGElement.createSVGPoint();return vs.x=F[0],vs.y=F[1],yi.isPointInFill(vs)}}function ke(nt){var yi,Ei=[],vs=1/0,Se=-1/0,Ee=1/0,X=-1/0,Oe;for(yi=0;yi<nt.length;yi++){var Qe=nt[yi];Qe.contains(F)&&(Ei.push(Qe),Ee=Math.min(Ee,Qe.ymin),X=Math.max(X,Qe.ymax))}if(Ei.length===0)return null;Ee=Math.max(Ee,0),X=Math.min(X,P._length),Oe=(Ee+X)/2;var pe,q,ae,ve,Te,et,bt;for(yi=0;yi<Ei.length;yi++)for(q=Ei[yi].pts,pe=1;pe<q.length;pe++)et=q[pe-1][1],bt=q[pe][1],et>Oe!=bt>=Oe&&(ve=q[pe-1][0],Te=q[pe][0],bt-et&&(ae=ve+(Te-ve)*(Oe-et)/(bt-et),vs=Math.min(vs,ae),Se=Math.max(Se,ae)));return vs=Math.max(vs,0),Se=Math.min(Se,B._length),{x0:vs,x1:Se,y0:Oe,y1:Oe}}if(w.indexOf("fills")!==-1&&D._fillElement){var Pe=ce(D._fillElement)&&!ce(D._fillExclusionElement);if(Pe){var tt=ke(D._polygons);tt===null&&(tt={x0:F[0],x1:F[0],y0:F[1],y1:F[1]});var Ke=v.defaultLine;return v.opacity(D.fillcolor)?Ke=D.fillcolor:v.opacity((D.line||{}).color)&&(Ke=D.line.color),g.extendFlat(b,{distance:b.maxHoverDistance,x0:tt.x0,x1:tt.x1,y0:tt.y0,y1:tt.y1,color:Ke,hovertemplate:!1}),delete b.index,D.text&&!g.isArrayOrTypedArray(D.text)?b.text=String(D.text):b.text=D.name,[b]}}}}),C3=t((me,ue)=>{var g=Dp();ue.exports=function(s,h){var x=s.cd,v=s.xaxis,y=s.yaxis,b=[],T=x[0].trace,u,k,M,D,B=!g.hasMarkers(T)&&!g.hasText(T);if(B)return[];if(h===!1)for(u=0;u<x.length;u++)x[u].selected=0;else for(u=0;u<x.length;u++)k=x[u],M=v.c2p(k.x),D=y.c2p(k.y),k.i!==null&&h.contains([M,D],!1,u,s)?(b.push({pointNumber:k.i,x:v.c2d(k.x),y:y.c2d(k.y)}),k.selected=1):k.selected=0;return b}}),x_=t((me,ue)=>{ue.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}}),Hx=t((me,ue)=>{var g=l1().traceIs,s=E0();ue.exports=function(b,T,u,k){u("autotypenumbers",k.autotypenumbersDflt);var M=u("type",(k.splomStash||{}).type);M==="-"&&(h(T,k.data),T.type==="-"?T.type="linear":b.type=T.type)};function h(b,T){if(b.type==="-"){var u=b._id,k=u.charAt(0),M;u.indexOf("scene")!==-1&&(u=k);var D=x(T,u,k);if(D){if(D.type==="histogram"&&k==={v:"y",h:"x"}[D.orientation||"v"]){b.type="linear";return}var B=k+"calendar",P=D[B],N={noMultiCategory:!g(D,"cartesian")||g(D,"noMultiCategory")};if(D.type==="box"&&D._hasPreCompStats&&k==={h:"x",v:"y"}[D.orientation||"v"]&&(N.noMultiCategory=!0),N.autotypenumbers=b.autotypenumbers,y(D,k)){var z=v(D),F=[];for(M=0;M<T.length;M++){var w=T[M];!g(w,"box-violin")||(w[k+"axis"]||k)!==u||(w[z]!==void 0?F.push(w[z][0]):w.name!==void 0?F.push(w.name):F.push("text"),w[B]!==P&&(P=void 0))}b.type=s(F,P,N)}else if(D.type==="splom"){var L=D.dimensions,O=L[D._axesDim[u]];O.visible&&(b.type=s(O.values,P,N))}else b.type=s(D[k]||[D[k+"0"]],P,N)}}}function x(b,T,u){for(var k=0;k<b.length;k++){var M=b[k];if(M.type==="splom"&&M._length>0&&(M["_"+u+"axes"]||{})[T]||(M[u+"axis"]||u)===T&&(y(M,u)||(M[u]||[]).length||M[u+"0"]))return M}}function v(b){return{v:"x",h:"y"}[b.orientation||"v"]}function y(b,T){var u=v(b),k=g(b,"box-violin"),M=g(b._fullInput||{},"candlestick");return k&&!M&&T===u&&b[u]===void 0&&b[u+"0"]===void 0}}),mb=t((me,ue)=>{var g=J().isTypedArraySpec;function s(h,x){var v=x.dataAttr||h._id.charAt(0),y={},b,T,u;if(x.axData)b=x.axData;else for(b=[],T=0;T<x.data.length;T++){var k=x.data[T];k[v+"axis"]===h._id&&b.push(k)}for(T=0;T<b.length;T++){var M=b[T][v];for(u=0;u<M.length;u++){var D=M[u];D!=null&&(y[D]=1)}}return Object.keys(y)}ue.exports=function(h,x,v,y){if(x.type==="category"){var b=h.categoryarray,T=Array.isArray(b)&&b.length>0||g(b),u;T&&(u="array");var k=v("categoryorder",u),M;k==="array"&&(M=v("categoryarray")),!T&&k==="array"&&(k=x.categoryorder="trace"),k==="trace"?x._initialCategories=[]:k==="array"?x._initialCategories=M.slice():(M=s(x,y).sort(),k==="category ascending"?x._initialCategories=M:k==="category descending"&&(x._initialCategories=M.reverse()))}}}),R3=t((me,ue)=>{var g=He().mix,s=Sp(),h=Z();ue.exports=function(x,v,y,b){b=b||{};var T=b.dfltColor;function u(Y,Re){return h.coerce2(x,v,b.attributes,Y,Re)}var k=u("linecolor",T),M=u("linewidth"),D=y("showline",b.showLine||!!k||!!M);D||(delete v.linecolor,delete v.linewidth);var B=g(T,b.bgColor,b.blend||s.lightFraction).toRgbString(),P=u("gridcolor",B),N=u("gridwidth"),z=u("griddash"),F=y("showgrid",b.showGrid||!!P||!!N||!!z);if(F||(delete v.gridcolor,delete v.gridwidth,delete v.griddash),b.hasMinor){var w=g(v.gridcolor,b.bgColor,67).toRgbString(),L=u("minor.gridcolor",w),O=u("minor.gridwidth",v.gridwidth||1),H=u("minor.griddash",v.griddash||"solid"),W=y("minor.showgrid",!!L||!!O||!!H);W||(delete v.minor.gridcolor,delete v.minor.gridwidth,delete v.minor.griddash)}if(!b.noZeroLine){u("zerolinelayer");var Ce=u("zerolinecolor",T),he=u("zerolinewidth"),le=y("zeroline",b.showGrid||!!Ce||!!he);le||(delete v.zerolinelayer,delete v.zerolinecolor,delete v.zerolinewidth)}}}),__=t((me,ue)=>{var g=A(),s=l1(),h=Z(),x=Nm(),v=Ye(),y=jp(),b=_e(),T=it(),u=Vt(),k=Ct(),M=mb(),D=R3(),B=Pm(),P=U0(),N=m1().WEEKDAY_PATTERN,z=m1().HOUR_PATTERN;ue.exports=function(O,H,W,Ce,he){var le=Ce.letter,Y=Ce.font||{},Re=Ce.splomStash||{},fe=W("visible",!Ce.visibleDflt),xe=H._template||{},ge=H.type||xe.type||"-",ye;if(ge==="date"){var Ae=s.getComponentMethod("calendars","handleDefaults");Ae(O,H,"calendar",Ce.calendar),Ce.noTicklabelmode||(ye=W("ticklabelmode"))}!Ce.noTicklabelindex&&(ge==="date"||ge==="linear")&&W("ticklabelindex");var Le="";(!Ce.noTicklabelposition||ge==="multicategory")&&(Le=h.coerce(O,H,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:ye==="period"?["outside","inside"]:le==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),Ce.noTicklabeloverflow||W("ticklabeloverflow",Le.indexOf("inside")!==-1?"hide past domain":ge==="category"||ge==="multicategory"?"allow":"hide past div"),P(H,he),B(O,H,W,Ce),M(O,H,W,Ce),Ce.noHover||(ge!=="category"&&W("hoverformat"),Ce.noUnifiedhovertitle||W("unifiedhovertitle.text"));var ce=W("color"),ke=ce!==y.color.dflt?ce:Y.color,Pe=Re.label||he._dfltTitle[le];if(k(O,H,W,ge,Ce),!fe)return H;W("title.text",Pe),h.coerceFont(W,"title.font",Y,{overrideDflt:{size:h.bigFont(Y.size),color:ke}}),b(O,H,W,ge);var tt=Ce.hasMinor;if(tt&&(x.newContainer(H,"minor"),b(O,H,W,ge,{isMinor:!0})),u(O,H,W,ge,Ce),T(O,H,W,Ce),tt){var Ke=Ce.isMinor;Ce.isMinor=!0,T(O,H,W,Ce),Ce.isMinor=Ke}D(O,H,W,{dfltColor:ce,bgColor:Ce.bgColor,showGrid:Ce.showGrid,hasMinor:tt,attributes:y}),tt&&!H.minor.ticks&&!H.minor.showgrid&&delete H.minor,(H.showline||H.ticks)&&W("mirror");var nt=ge==="multicategory";if(!Ce.noTickson&&(ge==="category"||nt)&&(H.ticks||H.showgrid)&&(nt?(W("tickson","boundaries"),delete H.ticklabelposition):W("tickson")),nt){var yi=W("showdividers");yi&&(W("dividercolor"),W("dividerwidth"))}if(ge==="date")if(v(O,H,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:F}),!H.rangebreaks.length)delete H.rangebreaks;else{for(var Ei=0;Ei<H.rangebreaks.length;Ei++)if(H.rangebreaks[Ei].pattern===N){H._hasDayOfWeekBreaks=!0;break}if(P(H,he),he._has("scattergl")||he._has("splom"))for(var vs=0;vs<Ce.data.length;vs++){var Se=Ce.data[vs];(Se.type==="scattergl"||Se.type==="splom")&&(Se.visible=!1,h.warn(Se.type+" traces do not work on axes with rangebreaks. Setting trace "+Se.index+" to `visible: false`."))}}return H};function F(O,H,W){function Ce(Ae,Le){return h.coerce(O,H,y.rangebreaks,Ae,Le)}var he=Ce("enabled");if(he){var le=Ce("bounds");if(le&&le.length>=2){var Y="",Re,fe;if(le.length===2){for(Re=0;Re<2;Re++)if(fe=L(le[Re]),fe){Y=N;break}}var xe=Ce("pattern",Y);if(xe===N)for(Re=0;Re<2;Re++)fe=L(le[Re]),fe&&(H.bounds[Re]=le[Re]=fe-1);if(xe)for(Re=0;Re<2;Re++)switch(fe=le[Re],xe){case N:if(!g(fe)){H.enabled=!1;return}if(fe=+fe,fe!==Math.floor(fe)||fe<0||fe>=7){H.enabled=!1;return}H.bounds[Re]=le[Re]=fe;break;case z:if(!g(fe)){H.enabled=!1;return}if(fe=+fe,fe<0||fe>24){H.enabled=!1;return}H.bounds[Re]=le[Re]=fe;break}if(W.autorange===!1){var ge=W.range;if(ge[0]<ge[1]){if(le[0]<ge[0]&&le[1]>ge[1]){H.enabled=!1;return}}else if(le[0]>ge[0]&&le[1]<ge[1]){H.enabled=!1;return}}}else{var ye=Ce("values");if(ye&&ye.length)Ce("dvalue");else{H.enabled=!1;return}}}}var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function L(O){if(typeof O=="string")return w[O.substr(0,3).toLowerCase()]}}),gb=t((me,ue)=>{var g=A(),s=Z();ue.exports=function(h,x,v,y){var b=y.counterAxes||[],T=y.overlayableAxes||[],u=y.letter,k=y.grid,M=y.overlayingDomain,D,B,P,N,z,F;k&&(B=k._domains[u][k._axisMap[x._id]],D=k._anchors[x._id],B&&(P=k[u+"side"].split(" ")[0],N=k.domain[u][P==="right"||P==="top"?1:0])),B=B||[0,1],D=D||(g(h.position)?"free":b[0]||"free"),P=P||(u==="x"?"bottom":"left"),N=N||0,z=0,F=!1;var w=s.coerce(h,x,{anchor:{valType:"enumerated",values:["free"].concat(b),dflt:D}},"anchor"),L=s.coerce(h,x,{side:{valType:"enumerated",values:u==="x"?["bottom","top"]:["left","right"],dflt:P}},"side");if(w==="free"){if(u==="y"){var O=v("autoshift");O&&(N=L==="left"?M[0]:M[1],F=x.automargin?x.automargin:!0,z=L==="left"?-3:3),v("shift",z)}v("position",N)}v("automargin",F);var H=!1;if(T.length&&(H=s.coerce(h,x,{overlaying:{valType:"enumerated",values:[!1].concat(T),dflt:!1}},"overlaying")),!H){var W=v("domain",B);W[0]>W[1]-1/4096&&(x.domain=B),s.noneOrAll(h.domain,x.domain,B),x.tickmode==="sync"&&(x.tickmode="auto")}return v("layer"),x}}),jy=t((me,ue)=>{var g=Z(),s=_r(),h=e0().isUnifiedHover,x=Jv(),v=Nm(),y=o1(),b=jp(),T=Hx(),u=__(),k=rg(),M=gb(),D=N1(),B=D.id2name,P=D.name2id,N=m1().AX_ID_PATTERN,z=l1(),F=z.traceIs,w=z.getComponentMethod;function L(O,H,W){Array.isArray(O[H])?O[H].push(W):O[H]=[W]}ue.exports=function(O,H,W){var Ce=H.autotypenumbers,he={},le={},Y={},Re={},fe={},xe={},ge={},ye={},Ae={},Le={},ce,ke;for(ce=0;ce<W.length;ce++){var Pe=W[ce];if(F(Pe,"cartesian")){var tt;if(Pe.xaxis)tt=B(Pe.xaxis),L(he,tt,Pe);else if(Pe.xaxes)for(ke=0;ke<Pe.xaxes.length;ke++)L(he,B(Pe.xaxes[ke]),Pe);var Ke;if(Pe.yaxis)Ke=B(Pe.yaxis),L(he,Ke,Pe);else if(Pe.yaxes)for(ke=0;ke<Pe.yaxes.length;ke++)L(he,B(Pe.yaxes[ke]),Pe);if(Pe.type==="funnel"?Pe.orientation==="h"?(tt&&(le[tt]=!0),Ke&&(ge[Ke]=!0)):Ke&&(Y[Ke]=!0):Pe.type==="image"?(Ke&&(ye[Ke]=!0),tt&&(ye[tt]=!0)):(Ke&&(fe[Ke]=!0,xe[Ke]=!0),(!F(Pe,"carpet")||Pe.type==="carpet"&&!Pe._cheater)&&tt&&(Re[tt]=!0)),Pe.type==="carpet"&&Pe._cheater&&tt&&(le[tt]=!0),F(Pe,"2dMap")&&(Ae[tt]=!0,Ae[Ke]=!0),F(Pe,"oriented")){var nt=Pe.orientation==="h"?Ke:tt;Le[nt]=!0}}}var yi=H._subplots,Ei=yi.xaxis,vs=yi.yaxis,Se=g.simpleMap(Ei,B),Ee=g.simpleMap(vs,B),X=Se.concat(Ee),Oe=s.background;Ei.length&&vs.length&&(Oe=g.coerce(O,H,y,"plot_bgcolor"));var Qe=s.combine(Oe,H.paper_bgcolor),pe,q,ae,ve,Te;function et(){var mn=he[pe]||[];Te._traceIndices=mn.map(function(Bl){return Bl.index}),Te._annIndices=[],Te._shapeIndices=[],Te._selectionIndices=[],Te._imgIndices=[],Te._subplotsWith=[],Te._counterAxes=[],Te._name=Te._attr=pe,Te._id=q}function bt(mn,Bl){return g.coerce(ve,Te,b,mn,Bl)}function dr(mn,Bl){return g.coerce2(ve,Te,b,mn,Bl)}function Ol(mn){return mn==="x"?vs:Ei}function Xl(mn,Bl){for(var Vl=mn==="x"?Se:Ee,Np=[],Up=0;Up<Vl.length;Up++){var Qp=Vl[Up];Qp!==Bl&&!(O[Qp]||{}).overlaying&&Np.push(P(Qp))}return Np}var Pp={x:Ol("x"),y:Ol("y")},t0=Pp.x.concat(Pp.y),Wp={},$p=[];function Lo(){var mn=ve.matches;N.test(mn)&&t0.indexOf(mn)===-1&&(Wp[mn]=ve.type,$p=Object.keys(Wp))}var kl=x(O,H),dt=h(kl);for(ce=0;ce<X.length;ce++){pe=X[ce],q=P(pe),ae=pe.charAt(0),g.isPlainObject(O[pe])||(O[pe]={}),ve=O[pe],Te=v.newContainer(H,pe,ae+"axis"),et();var yp=ae==="x"&&!Re[pe]&&le[pe]||ae==="y"&&!fe[pe]&&Y[pe],Bp=ae==="y"&&(!xe[pe]&&ge[pe]||ye[pe]),Jp={hasMinor:!0,letter:ae,font:H.font,outerTicks:Ae[pe],showGrid:!Le[pe],data:he[pe]||[],bgColor:Qe,calendar:H.calendar,automargin:!0,visibleDflt:yp,reverseDflt:Bp,autotypenumbersDflt:Ce,splomStash:((H._splomAxes||{})[ae]||{})[q],noAutotickangles:ae==="y"};bt("uirevision",H.uirevision),T(ve,Te,bt,Jp),u(ve,Te,bt,Jp,H);var m0=dt&&ae===kl.charAt(0),s0=dr("spikecolor",dt?Te.color:void 0),y0=dr("spikethickness",dt?1.5:void 0),M0=dr("spikedash",dt?"dot":void 0),T0=dr("spikemode",dt?"across":void 0),G0=dr("spikesnap"),h0=bt("showspikes",!!m0||!!s0||!!y0||!!M0||!!T0||!!G0);h0||(delete Te.spikecolor,delete Te.spikethickness,delete Te.spikedash,delete Te.spikemode,delete Te.spikesnap);var W0=B(ve.overlaying),rm=[0,1];if(H[W0]!==void 0){var V0=B(H[W0].anchor);H[V0]!==void 0&&(rm=H[V0].domain)}M(ve,Te,bt,{letter:ae,counterAxes:Pp[ae],overlayableAxes:Xl(ae,pe),grid:H.grid,overlayingDomain:rm}),bt("title.standoff"),Lo(),Te._input=ve}for(ce=0;ce<$p.length;){q=$p[ce++],pe=B(q),ae=pe.charAt(0),g.isPlainObject(O[pe])||(O[pe]={}),ve=O[pe],Te=v.newContainer(H,pe,ae+"axis"),et();var um={letter:ae,font:H.font,outerTicks:Ae[pe],showGrid:!Le[pe],data:[],bgColor:Qe,calendar:H.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:Ce,splomStash:((H._splomAxes||{})[ae]||{})[q]};bt("uirevision",H.uirevision),Te.type=Wp[q]||"linear",u(ve,Te,bt,um,H),M(ve,Te,bt,{letter:ae,counterAxes:Pp[ae],overlayableAxes:Xl(ae,pe),grid:H.grid}),bt("fixedrange"),bt("modebardisable"),Lo(),Te._input=ve}var Uo=w("rangeslider","handleDefaults"),Tp=w("rangeselector","handleDefaults");for(ce=0;ce<Se.length;ce++)pe=Se[ce],ve=O[pe],Te=H[pe],Uo(O,H,pe),Te.type==="date"&&Tp(ve,Te,H,Ee,Te.calendar),bt("fixedrange"),bt("modebardisable");for(ce=0;ce<Ee.length;ce++){pe=Ee[ce],ve=O[pe],Te=H[pe];var Be=H[B(Te.anchor)],ft=w("rangeslider","isVisible")(Be);bt("fixedrange",ft),bt("modebardisable")}k.handleDefaults(O,H,{axIds:t0.concat($p).sort(D.idSort),axHasImage:ye})}}),t2=t((me,ue)=>{var g=c(),s=l1(),h=Z(),x=D0(),v=mm();ue.exports=function(y,b,T,u){var k=y._fullLayout;if(b.length===0){v.redrawComponents(y);return}function M(H){var W=H.xaxis,Ce=H.yaxis;k._defs.select("#"+H.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),H.plot.call(x.setTranslate,W._offset,Ce._offset).call(x.setScale,1,1);var he=H.plot.selectAll(".scatterlayer .trace");he.selectAll(".point").call(x.setPointGroupScale,1,1),he.selectAll(".textpoint").call(x.setTextPointsScale,1,1),he.call(x.hideOutsideRangePoints,H)}function D(H,W){var Ce=H.plotinfo,he=Ce.xaxis,le=Ce.yaxis,Y=he._length,Re=le._length,fe=!!H.xr1,xe=!!H.yr1,ge=[];if(fe){var ye=h.simpleMap(H.xr0,he.r2l),Ae=h.simpleMap(H.xr1,he.r2l),Le=ye[1]-ye[0],ce=Ae[1]-Ae[0];ge[0]=(ye[0]*(1-W)+W*Ae[0]-ye[0])/(ye[1]-ye[0])*Y,ge[2]=Y*(1-W+W*ce/Le),he.range[0]=he.l2r(ye[0]*(1-W)+W*Ae[0]),he.range[1]=he.l2r(ye[1]*(1-W)+W*Ae[1])}else ge[0]=0,ge[2]=Y;if(xe){var ke=h.simpleMap(H.yr0,le.r2l),Pe=h.simpleMap(H.yr1,le.r2l),tt=ke[1]-ke[0],Ke=Pe[1]-Pe[0];ge[1]=(ke[1]*(1-W)+W*Pe[1]-ke[1])/(ke[0]-ke[1])*Re,ge[3]=Re*(1-W+W*Ke/tt),le.range[0]=he.l2r(ke[0]*(1-W)+W*Pe[0]),le.range[1]=le.l2r(ke[1]*(1-W)+W*Pe[1])}else ge[1]=0,ge[3]=Re;v.drawOne(y,he,{skipTitle:!0}),v.drawOne(y,le,{skipTitle:!0}),v.redrawComponents(y,[he._id,le._id]);var nt=fe?Y/ge[2]:1,yi=xe?Re/ge[3]:1,Ei=fe?ge[0]:0,vs=xe?ge[1]:0,Se=fe?ge[0]/ge[2]*Y:0,Ee=xe?ge[1]/ge[3]*Re:0,X=he._offset-Se,Oe=le._offset-Ee;Ce.clipRect.call(x.setTranslate,Ei,vs).call(x.setScale,1/nt,1/yi),Ce.plot.call(x.setTranslate,X,Oe).call(x.setScale,nt,yi),x.setPointGroupScale(Ce.zoomScalePts,1/nt,1/yi),x.setTextPointsScale(Ce.zoomScaleTxt,1/nt,1/yi)}var B;u&&(B=u());function P(){for(var H={},W=0;W<b.length;W++){var Ce=b[W],he=Ce.plotinfo.xaxis,le=Ce.plotinfo.yaxis;Ce.xr1&&(H[he._name+".range"]=Ce.xr1.slice()),Ce.yr1&&(H[le._name+".range"]=Ce.yr1.slice())}return B&&B(),s.call("relayout",y,H).then(function(){for(var Y=0;Y<b.length;Y++)M(b[Y].plotinfo)})}function N(){for(var H={},W=0;W<b.length;W++){var Ce=b[W],he=Ce.plotinfo.xaxis,le=Ce.plotinfo.yaxis;Ce.xr0&&(H[he._name+".range"]=Ce.xr0.slice()),Ce.yr0&&(H[le._name+".range"]=Ce.yr0.slice())}return s.call("relayout",y,H).then(function(){for(var Y=0;Y<b.length;Y++)M(b[Y].plotinfo)})}var z,F,w,L=g.ease(T.easing);y._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(w),w=null,N()});function O(){F=Date.now();for(var H=Math.min(1,(F-z)/T.duration),W=L(H),Ce=0;Ce<b.length;Ce++)D(b[Ce],W);F-z>T.duration?(P(),w=window.cancelAnimationFrame(O)):w=window.requestAnimationFrame(O)}return z=Date.now(),w=window.requestAnimationFrame(O),Promise.resolve()}}),xx=t(me=>{var ue=c(),g=l1(),s=Z(),h=vg(),x=D0(),v=bg().getModuleCalcData,y=N1(),b=m1(),T=Hg(),u=s.ensureSingle;function k(F,w,L){return s.ensureSingle(F,w,L,function(O){O.datum(L)})}var M=b.zindexSeparator;me.name="cartesian",me.attr=["xaxis","yaxis"],me.idRoot=["x","y"],me.idRegex=b.idRegex,me.attrRegex=b.attrRegex,me.attributes=x_(),me.layoutAttributes=jp(),me.supplyLayoutDefaults=jy(),me.transitionAxes=t2(),me.finalizeSubplots=function(F,w){var L=w._subplots,O=L.xaxis,H=L.yaxis,W=L.cartesian,Ce=W,he={},le={},Y,Re,fe;for(Y=0;Y<Ce.length;Y++){var xe=Ce[Y].split("y");he[xe[0]]=1,le["y"+xe[1]]=1}for(Y=0;Y<O.length;Y++)Re=O[Y],he[Re]||(fe=(F[y.id2name(Re)]||{}).anchor,b.idRegex.y.test(fe)||(fe="y"),W.push(Re+fe),Ce.push(Re+fe),le[fe]||(le[fe]=1,s.pushUnique(H,fe)));for(Y=0;Y<H.length;Y++)fe=H[Y],le[fe]||(Re=(F[y.id2name(fe)]||{}).anchor,b.idRegex.x.test(Re)||(Re="x"),W.push(Re+fe),Ce.push(Re+fe),he[Re]||(he[Re]=1,s.pushUnique(O,Re)));if(!Ce.length){Re="",fe="";for(var ge in F)if(b.attrRegex.test(ge)){var ye=ge.charAt(0);ye==="x"?(!Re||+ge.substr(5)<+Re.substr(5))&&(Re=ge):(!fe||+ge.substr(5)<+fe.substr(5))&&(fe=ge)}Re=Re?y.name2id(Re):"x",fe=fe?y.name2id(fe):"y",O.push(Re),H.push(fe),W.push(Re+fe)}},me.plot=function(F,w,L,O){var H=F._fullLayout,W=H._subplots.cartesian,Ce=F.calcdata,he;if(!Array.isArray(w))for(w=[],he=0;he<Ce.length;he++)w.push(he);for(var le=H._zindices,Y=0;Y<le.length;Y++){var Re=le[Y];for(he=0;he<W.length;he++){var fe=W[he],xe=H._plots[fe];if(Y>0){var ge=xe.id;if(ge.indexOf(M)!==-1)continue;ge+=M+(Y+1),xe=s.extendFlat({},xe,{id:ge,plot:H._cartesianlayer.selectAll(".subplot").select("."+ge)})}for(var ye=[],Ae,Le=0;Le<Ce.length;Le++){var ce=Ce[Le],ke=ce[0].trace;Re===(ke.zorder||0)&&ke.xaxis+ke.yaxis===fe&&((w.indexOf(ke.index)!==-1||ke.carpet)&&(Ae&&Ae[0].trace.xaxis+Ae[0].trace.yaxis===fe&&["tonextx","tonexty","tonext"].indexOf(ke.fill)!==-1&&ye.indexOf(Ae)===-1&&ye.push(Ae),ye.push(ce)),Ae=ce)}D(F,xe,ye,L,O)}}};function D(F,w,L,O,H){for(var W=b.traceLayerClasses,Ce=F._fullLayout,he=Ce._zindices,le=Ce._modules,Y,Re,fe,xe=[],ge=[],ye=0;ye<he.length;ye++)for(var Ae=he[ye],Le=0;Le<le.length;Le++){Y=le[Le];var ce=Y.name,ke=g.modules[ce].categories;if(ke.svg){var Pe=Y.layerName||ce+"layer",tt=Pe+(ye?Number(ye)+1:""),Ke=Y.plot;Re=v(L,Ke,Ae),fe=Re[0],L=Re[1],fe.length&&xe.push({i:W.indexOf(Pe),zindex:ye,className:tt,plotMethod:Ke,cdModule:fe}),ke.zoomScale&&ge.push("."+tt)}}xe.sort(function(Ei,vs){return(Ei.zindex||0)-(vs.zindex||0)||Ei.i-vs.i});var nt=w.plot.selectAll("g.mlayer").data(xe,function(Ei){return Ei.className});if(nt.enter().append("g").attr("class",function(Ei){return Ei.className}).classed("mlayer",!0).classed("rangeplot",w.isRangePlot),nt.exit().remove(),nt.order(),nt.each(function(Ei){var vs=ue.select(this),Se=Ei.className;Ei.plotMethod(F,w,Ei.cdModule,vs,O,H),b.clipOnAxisFalseQuery.indexOf("."+Se)===-1&&x.setClipUrl(vs,w.layerClipId,F)}),Ce._has("scattergl")&&(Y=g.getModule("scattergl"),fe=v(L,Y)[0],Y.plot(F,w,fe)),!F._context.staticPlot&&(w._hasClipOnAxisFalse&&(w.clipOnAxisFalseTraces=w.plot.selectAll(b.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),ge.length)){var yi=w.plot.selectAll(ge.join(",")).selectAll(".trace");w.zoomScalePts=yi.selectAll("path.point"),w.zoomScaleTxt=yi.selectAll(".textpoint")}}me.clean=function(F,w,L,O){var H=O._plots||{},W=w._plots||{},Ce=O._subplots||{},he,le,Y;if(O._hasOnlyLargeSploms&&!w._hasOnlyLargeSploms)for(Y in H)he=H[Y],he.plotgroup&&he.plotgroup.remove();var Re=O._has&&O._has("gl"),fe=w._has&&w._has("gl");if(Re&&!fe)for(Y in H)he=H[Y],he._scene&&he._scene.destroy();if(Ce.xaxis&&Ce.yaxis){var xe=y.listIds({_fullLayout:O});for(le=0;le<xe.length;le++){var ge=xe[le];w[y.id2name(ge)]||O._infolayer.selectAll(".g-"+ge+"title").remove()}}var ye=O._has&&O._has("cartesian"),Ae=w._has&&w._has("cartesian");if(ye&&!Ae)N(O._cartesianlayer.selectAll(".subplot"),O),O._defs.selectAll(".axesclip").remove(),delete O._axisConstraintGroups,delete O._axisMatchGroups;else if(Ce.cartesian)for(le=0;le<Ce.cartesian.length;le++){var Le=Ce.cartesian[le];if(Le.indexOf(M)===-1&&!W[Le]){var ce="."+Le+",."+Le+"-x,."+Le+"-y";O._cartesianlayer.selectAll(ce).remove(),z(Le,O)}}},me.drawFramework=function(F){var w=F._fullLayout,L=F.calcdata,O,H={};for(O=0;O<L.length;O++){var W=L[O][0],Ce=W.trace,he=Ce.zorder||0;H[he]||(H[he]=[]),H[he].push(W)}var le=Object.keys(H).map(Number).sort(s.sorterAsc);le.length||(le=[0]),w._zindices=le;var Y=B(F),Re=Y.length,fe=[];for(O=0;O<Re;O++)fe[O]=Y[O].slice();for(var xe=1;xe<le.length;xe++){var ge=[];for(O=0;O<Re;O++)ge[O]=Y[O].slice(),ge[O][0]+=M+(xe+1);fe=fe.concat(ge)}var ye=w._cartesianlayer.selectAll(".subplot").data(fe,String);ye.enter().append("g").attr("class",function(Ae){return"subplot "+Ae[0]}),ye.order(),ye.exit().call(N,w),ye.each(function(Ae){var Le=Ae[0],ce=Le.indexOf(M),ke=ce!==-1,Pe=ke?Le.slice(0,ce):Le,tt=w._plots[Le];tt||(tt=s.extendFlat({},w._plots[Pe]),tt&&(tt.id=Le,w._plots[Le]=tt,w._subplots.cartesian.push(Le))),tt&&(tt.plotgroup=ue.select(this),P(F,tt),ke||(tt.draglayer=u(w._draggers,"g",Le)))})},me.rangePlot=function(F,w,L){P(F,w),D(F,w,L),h.style(F)};function B(F){var w=F._fullLayout,L=w._zindices.length,O=w._subplots.cartesian,H=O.length,W,Ce,he,le,Y,Re,fe=[],xe=[];for(W=0;W<H;W++){he=O[W],le=w._plots[he],Y=le.xaxis,Re=le.yaxis;var ge=Y._mainAxis,ye=Re._mainAxis,Ae=ge._id+ye._id,Le=w._plots[Ae];le.overlays=[],Ae!==he&&Le?(le.mainplot=Ae,le.mainplotinfo=Le,xe.push(he)):(le.mainplot=void 0,le.mainplotinfo=void 0,fe.push(he))}for(W=0;W<xe.length;W++)he=xe[W],le=w._plots[he],le.mainplotinfo.overlays.push(le);var ce=fe.concat(xe),ke=[];for(W=0;W<H;W++){he=ce[W],le=w._plots[he],Y=le.xaxis,Re=le.yaxis;for(var Pe=[],tt=1;tt<=L;tt++){var Ke="";for(tt>1&&(Ke+=M+tt),Pe.push(he+Ke),Ce=0;Ce<le.overlays.length;Ce++)Pe.push(le.overlays[Ce].id+Ke)}Pe=Pe.concat([Y.layer,Re.layer,Y.overlaying||"",Re.overlaying||""]),ke.push(Pe)}return ke}function P(F,w){var L=F._fullLayout,O=w.plotgroup,H=w.id,W=H.indexOf(M),Ce=W!==-1,he=b.layerValue2layerClass[w.xaxis.layer],le=b.layerValue2layerClass[w.yaxis.layer],Y=L._hasOnlyLargeSploms,Re=L._zindices.length>1,fe=w.mainplotinfo;if(!w.mainplot||Re)if(Y)w.xlines=u(O,"path","xlines-above"),w.ylines=u(O,"path","ylines-above"),w.xaxislayer=u(O,"g","xaxislayer-above"),w.yaxislayer=u(O,"g","yaxislayer-above");else{if(!Ce){var xe=u(O,"g","layer-subplot");w.shapelayer=u(xe,"g","shapelayer"),w.imagelayer=u(xe,"g","imagelayer"),fe&&Re?(w.minorGridlayer=fe.minorGridlayer,w.gridlayer=fe.gridlayer,w.zerolinelayer=fe.zerolinelayer):(w.minorGridlayer=u(O,"g","minor-gridlayer"),w.gridlayer=u(O,"g","gridlayer"),w.zerolinelayer=u(O,"g","zerolinelayer"));var ge=u(O,"g","layer-between");w.shapelayerBetween=u(ge,"g","shapelayer"),w.imagelayerBetween=u(ge,"g","imagelayer"),u(O,"path","xlines-below"),u(O,"path","ylines-below"),w.overlinesBelow=u(O,"g","overlines-below"),u(O,"g","xaxislayer-below"),u(O,"g","yaxislayer-below"),w.overaxesBelow=u(O,"g","overaxes-below")}w.overplot=u(O,"g","overplot"),w.plot=u(w.overplot,"g",H),fe&&Re?w.zerolinelayerAbove=fe.zerolinelayerAbove:w.zerolinelayerAbove=u(O,"g","zerolinelayer-above"),Ce||(w.xlines=u(O,"path","xlines-above"),w.ylines=u(O,"path","ylines-above"),w.overlinesAbove=u(O,"g","overlines-above"),u(O,"g","xaxislayer-above"),u(O,"g","yaxislayer-above"),w.overaxesAbove=u(O,"g","overaxes-above"),w.xlines=O.select(".xlines-"+he),w.ylines=O.select(".ylines-"+le),w.xaxislayer=O.select(".xaxislayer-"+he),w.yaxislayer=O.select(".yaxislayer-"+le))}else{var ye=fe.plotgroup,Ae=H+"-x",Le=H+"-y";w.minorGridlayer=fe.minorGridlayer,w.gridlayer=fe.gridlayer,w.zerolinelayer=fe.zerolinelayer,w.zerolinelayerAbove=fe.zerolinelayerAbove,u(fe.overlinesBelow,"path",Ae),u(fe.overlinesBelow,"path",Le),u(fe.overaxesBelow,"g",Ae),u(fe.overaxesBelow,"g",Le),w.plot=u(fe.overplot,"g",H),u(fe.overlinesAbove,"path",Ae),u(fe.overlinesAbove,"path",Le),u(fe.overaxesAbove,"g",Ae),u(fe.overaxesAbove,"g",Le),w.xlines=ye.select(".overlines-"+he).select("."+Ae),w.ylines=ye.select(".overlines-"+le).select("."+Le),w.xaxislayer=ye.select(".overaxes-"+he).select("."+Ae),w.yaxislayer=ye.select(".overaxes-"+le).select("."+Le)}Ce||(Y||(k(w.minorGridlayer,"g",w.xaxis._id),k(w.minorGridlayer,"g",w.yaxis._id),w.minorGridlayer.selectAll("g").map(function(ce){return ce[0]}).sort(y.idSort),k(w.gridlayer,"g",w.xaxis._id),k(w.gridlayer,"g",w.yaxis._id),w.gridlayer.selectAll("g").map(function(ce){return ce[0]}).sort(y.idSort)),w.xlines.style("fill","none").classed("crisp",!0),w.ylines.style("fill","none").classed("crisp",!0))}function N(F,w){if(F){var L={};F.each(function(le){var Y=le[0],Re=ue.select(this);Re.remove(),z(Y,w),L[Y]=!0});for(var O in w._plots)for(var H=w._plots[O],W=H.overlays||[],Ce=0;Ce<W.length;Ce++){var he=W[Ce];L[he.id]&&he.plot.selectAll(".trace").remove()}}}function z(F,w){w._draggers.selectAll("g."+F).remove(),w._defs.select("#clip"+w._uid+F+"plot").remove()}me.toSVG=function(F){var w=F._fullLayout._glimages,L=ue.select(F).selectAll(".svg-container"),O=L.filter(function(W,Ce){return Ce===L.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function H(){var W=this,Ce=W.toDataURL("image/png"),he=w.append("svg:image");he.attr({xmlns:T.svg,"xlink:href":Ce,preserveAspectRatio:"none",x:0,y:0,width:W.style.width,height:W.style.height})}O.each(H)},me.updateFx=Qx().updateFx}),b_=t((me,ue)=>{var g=Dp();ue.exports={hasLines:g.hasLines,hasMarkers:g.hasMarkers,hasText:g.hasText,isBubble:g.isBubble,attributes:Px(),layoutAttributes:Sg(),supplyDefaults:F5(),crossTraceDefaults:E3(),supplyLayoutDefaults:hb(),calc:g_().calc,crossTraceCalc:fb(),arraysToCalcdata:ky(),plot:y_(),colorbar:jx(),formatLabels:B5(),style:Ey().style,styleOnSelect:Ey().styleOnSelect,hoverPoints:sx(),selectPoints:C3(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:xx(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}}),D2=t((me,ue)=>{var g=c(),s=_r(),h=fy(),x=Z(),v=x.strScale,y=x.strRotate,b=x.strTranslate;ue.exports=function(T,u,k){var M=T.node(),D=h[k.arrowhead||0],B=h[k.startarrowhead||0],P=(k.arrowwidth||1)*(k.arrowsize||1),N=(k.arrowwidth||1)*(k.startarrowsize||1),z=u.indexOf("start")>=0,F=u.indexOf("end")>=0,w=D.backoff*P+k.standoff,L=B.backoff*N+k.startstandoff,O,H,W,Ce;if(M.nodeName==="line"){O={x:+T.attr("x1"),y:+T.attr("y1")},H={x:+T.attr("x2"),y:+T.attr("y2")};var he=O.x-H.x,le=O.y-H.y;if(W=Math.atan2(le,he),Ce=W+Math.PI,w&&L&&w+L>Math.sqrt(he*he+le*le)){tt();return}if(w){if(w*w>he*he+le*le){tt();return}var Y=w*Math.cos(W),Re=w*Math.sin(W);H.x+=Y,H.y+=Re,T.attr({x2:H.x,y2:H.y})}if(L){if(L*L>he*he+le*le){tt();return}var fe=L*Math.cos(W),xe=L*Math.sin(W);O.x-=fe,O.y-=xe,T.attr({x1:O.x,y1:O.y})}}else if(M.nodeName==="path"){var ge=M.getTotalLength(),ye="";if(ge<w+L){tt();return}var Ae=M.getPointAtLength(0),Le=M.getPointAtLength(.1);W=Math.atan2(Ae.y-Le.y,Ae.x-Le.x),O=M.getPointAtLength(Math.min(L,ge)),ye="0px,"+L+"px,";var ce=M.getPointAtLength(ge),ke=M.getPointAtLength(ge-.1);Ce=Math.atan2(ce.y-ke.y,ce.x-ke.x),H=M.getPointAtLength(Math.max(0,ge-w));var Pe=ye?L+w:w;ye+=ge-Pe+"px,"+ge+"px",T.style("stroke-dasharray",ye)}function tt(){T.style("stroke-dasharray","0px,100px")}function Ke(nt,yi,Ei,vs){nt.path&&(nt.noRotate&&(Ei=0),g.select(M.parentNode).append("path").attr({class:T.attr("class"),d:nt.path,transform:b(yi.x,yi.y)+y(Ei*180/Math.PI)+v(vs)}).style({fill:s.rgb(k.arrowcolor),"stroke-width":0}))}z&&Ke(B,O,W,N),F&&Ke(D,H,Ce,P)}}),Ay=t((me,ue)=>{var g=c(),s=l1(),h=vg(),x=Z(),v=x.strTranslate,y=mm(),b=_r(),T=D0(),u=Nv(),k=kg(),M=D1(),D=Om(),B=Nm().arrayEditor,P=D2();ue.exports={draw:N,drawOne:z,drawRaw:w};function N(L){var O=L._fullLayout;O._infolayer.selectAll(".annotation").remove();for(var H=0;H<O.annotations.length;H++)O.annotations[H].visible&&z(L,H);return h.previousPromises(L)}function z(L,O){var H=L._fullLayout,W=H.annotations[O]||{},Ce=y.getFromId(L,W.xref),he=y.getFromId(L,W.yref);Ce&&Ce.setScale(),he&&he.setScale(),w(L,W,O,!1,Ce,he)}function F(L,O,H,W,Ce){var he=Ce[H],le=Ce[H+"ref"],Y=H.indexOf("y")!==-1,Re=y.getRefType(le)==="domain",fe=Y?W.h:W.w;return L?Re?he+(Y?-O:O)/L._length:L.p2r(L.r2p(he)+O):he+(Y?-O:O)/fe}function w(L,O,H,W,Ce,he){var le=L._fullLayout,Y=L._fullLayout._size,Re=L._context.edits,fe,xe;W?(fe="annotation-"+W,xe=W+".annotations"):(fe="annotation",xe="annotations");var ge=B(L.layout,xe,O),ye=ge.modifyBase,Ae=ge.modifyItem,Le=ge.getUpdateObj;le._infolayer.selectAll("."+fe+'[data-index="'+H+'"]').remove();var ce="clip"+le._uid+"_ann"+H;if(!O._input||O.visible===!1){g.selectAll("#"+ce).remove();return}var ke={x:{},y:{}},Pe=+O.textangle||0,tt=le._infolayer.append("g").classed(fe,!0).attr("data-index",String(H)).style("opacity",O.opacity),Ke=tt.append("g").classed("annotation-text-g",!0),nt=Re[O.showarrow?"annotationTail":"annotationPosition"],yi=O.captureevents||Re.annotationText||nt;function Ei(bt){var dr={index:H,annotation:O._input,fullAnnotation:O,event:bt};return W&&(dr.subplotId=W),dr}var vs=Ke.append("g").style("pointer-events",yi?"all":null).call(M,"pointer").on("click",function(){L._dragging=!1,L.emit("plotly_clickannotation",Ei(g.event))});O.hovertext&&vs.on("mouseover",function(){var bt=O.hoverlabel,dr=bt.font,Ol=this.getBoundingClientRect(),Xl=L.getBoundingClientRect();u.loneHover({x0:Ol.left-Xl.left,x1:Ol.right-Xl.left,y:(Ol.top+Ol.bottom)/2-Xl.top,text:O.hovertext,color:bt.bgcolor,borderColor:bt.bordercolor,fontFamily:dr.family,fontSize:dr.size,fontColor:dr.color,fontWeight:dr.weight,fontStyle:dr.style,fontVariant:dr.variant,fontShadow:dr.fontShadow,fontLineposition:dr.fontLineposition,fontTextcase:dr.fontTextcase},{container:le._hoverlayer.node(),outerContainer:le._paper.node(),gd:L})}).on("mouseout",function(){u.loneUnhover(le._hoverlayer.node())});var Se=O.borderwidth,Ee=O.borderpad,X=Se+Ee,Oe=vs.append("rect").attr("class","bg").style("stroke-width",Se+"px").call(b.stroke,O.bordercolor).call(b.fill,O.bgcolor),Qe=O.width||O.height,pe=le._topclips.selectAll("#"+ce).data(Qe?[0]:[]);pe.enter().append("clipPath").classed("annclip",!0).attr("id",ce).append("rect"),pe.exit().remove();var q=O.font,ae=le._meta?x.templateString(O.text,le._meta):O.text,ve=vs.append("text").classed("annotation-text",!0).text(ae);function Te(bt){return bt.call(T.font,q).attr({"text-anchor":{left:"start",right:"end"}[O.align]||"middle"}),k.convertToTspans(bt,L,et),bt}function et(){var bt=ve.selectAll("a");if(bt.size()===1&&bt.text()===ve.text()){var dr=vs.insert("a",":first-child").attr({"xlink:xlink:href":bt.attr("xlink:href"),"xlink:xlink:show":bt.attr("xlink:show")}).style({cursor:"pointer"});dr.node().appendChild(Oe.node())}var Ol=vs.select(".annotation-text-math-group"),Xl=!Ol.empty(),Pp=T.bBox((Xl?Ol:ve).node()),t0=Pp.width,Wp=Pp.height,$p=O.width||t0,Lo=O.height||Wp,kl=Math.round($p+2*X),dt=Math.round(Lo+2*X);function yp(Bm,fm){return fm==="auto"&&(Bm<1/3?fm="left":Bm>2/3?fm="right":fm="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[fm]}for(var Bp=!1,Jp=["x","y"],m0=0;m0<Jp.length;m0++){var s0=Jp[m0],y0=O[s0+"ref"]||s0,M0=O["a"+s0+"ref"],T0={x:Ce,y:he}[s0],G0=(Pe+(s0==="x"?0:-90))*Math.PI/180,h0=kl*Math.cos(G0),W0=dt*Math.sin(G0),rm=Math.abs(h0)+Math.abs(W0),V0=O[s0+"anchor"],um=O[s0+"shift"]*(s0==="x"?1:-1),Uo=ke[s0],Tp,Be,ft,mn,Bl,Vl=y.getRefType(y0);if(T0&&Vl!=="domain"){var Np=T0.r2fraction(O[s0]);(Np<0||Np>1)&&(M0===y0?(Np=T0.r2fraction(O["a"+s0]),(Np<0||Np>1)&&(Bp=!0)):Bp=!0),Tp=T0._offset+T0.r2p(O[s0]),mn=.5}else{var Up=Vl==="domain";s0==="x"?(ft=O[s0],Tp=Up?T0._offset+T0._length*ft:Tp=Y.l+Y.w*ft):(ft=1-O[s0],Tp=Up?T0._offset+T0._length*ft:Tp=Y.t+Y.h*ft),mn=O.showarrow?.5:ft}if(O.showarrow){Uo.head=Tp;var Qp=O["a"+s0];if(Bl=h0*yp(.5,O.xanchor)-W0*yp(.5,O.yanchor),M0===y0){var Zp=y.getRefType(M0);Zp==="domain"?(s0==="y"&&(Qp=1-Qp),Uo.tail=T0._offset+T0._length*Qp):Zp==="paper"?s0==="y"?(Qp=1-Qp,Uo.tail=Y.t+Y.h*Qp):Uo.tail=Y.l+Y.w*Qp:Uo.tail=T0._offset+T0.r2p(Qp),Be=Bl}else Uo.tail=Tp+Qp,Be=Bl+Qp;Uo.text=Uo.tail+Bl;var Kp=le[s0==="x"?"width":"height"];if(y0==="paper"&&(Uo.head=x.constrain(Uo.head,1,Kp-1)),M0==="pixel"){var R0=-Math.max(Uo.tail-3,Uo.text),k0=Math.min(Uo.tail+3,Uo.text)-Kp;R0>0?(Uo.tail+=R0,Uo.text+=R0):k0>0&&(Uo.tail-=k0,Uo.text-=k0)}Uo.tail+=um,Uo.head+=um}else Bl=rm*yp(mn,V0),Be=Bl,Uo.text=Tp+Bl;Uo.text+=um,Bl+=um,Be+=um,O["_"+s0+"padplus"]=rm/2+Be,O["_"+s0+"padminus"]=rm/2-Be,O["_"+s0+"size"]=rm,O["_"+s0+"shift"]=Bl}if(Bp){vs.remove();return}var N0=0,lm=0;if(O.align!=="left"&&(N0=($p-t0)*(O.align==="center"?.5:1)),O.valign!=="top"&&(lm=(Lo-Wp)*(O.valign==="middle"?.5:1)),Xl)Ol.select("svg").attr({x:X+N0-1,y:X+lm}).call(T.setClipUrl,Qe?ce:null,L);else{var Im=X+lm-Pp.top,u1=X+N0-Pp.left;ve.call(k.positionText,u1,Im).call(T.setClipUrl,Qe?ce:null,L)}pe.select("rect").call(T.setRect,X,X,$p,Lo),Oe.call(T.setRect,Se/2,Se/2,kl-Se,dt-Se),vs.call(T.setTranslate,Math.round(ke.x.text-kl/2),Math.round(ke.y.text-dt/2)),Ke.attr({transform:"rotate("+Pe+","+ke.x.text+","+ke.y.text+")"});var v1=function(Bm,fm){tt.selectAll(".annotation-arrow-g").remove();var c1=ke.x.head,y1=ke.y.head,n1=ke.x.tail+Bm,Ym=ke.y.tail+fm,t1=ke.x.text+Bm,Um=ke.y.text+fm,z1=x.rotationXYMatrix(Pe,t1,Um),F1=x.apply2DTransform(z1),g1=x.apply2DTransform2(z1),V1=+Oe.attr("width"),K1=+Oe.attr("height"),ig=t1-.5*V1,mg=ig+V1,P1=Um-.5*K1,lg=P1+K1,G1=[[ig,P1,ig,lg],[ig,lg,mg,lg],[mg,lg,mg,P1],[mg,P1,ig,P1]].map(g1);if(!G1.reduce(function(u0,g0){return u0^!!x.segmentsIntersect(c1,y1,c1+1e6,y1+1e6,g0[0],g0[1],g0[2],g0[3])},!1)){G1.forEach(function(u0){var g0=x.segmentsIntersect(n1,Ym,c1,y1,u0[0],u0[1],u0[2],u0[3]);g0&&(n1=g0.x,Ym=g0.y)});var Sm=O.arrowwidth,Cg=O.arrowcolor,Je=O.arrowside,Ve=tt.append("g").style({opacity:b.opacity(Cg)}).classed("annotation-arrow-g",!0),Mp=Ve.append("path").attr("d","M"+n1+","+Ym+"L"+c1+","+y1).style("stroke-width",Sm+"px").call(b.stroke,b.rgb(Cg));if(P(Mp,Je,O),Re.annotationPosition&&Mp.node().parentNode&&!W){var kp=c1,Vp=y1;if(O.standoff){var wp=Math.sqrt(Math.pow(c1-n1,2)+Math.pow(y1-Ym,2));kp+=O.standoff*(n1-c1)/wp,Vp+=O.standoff*(Ym-y1)/wp}var Ap=Ve.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(n1-kp)+","+(Ym-Vp),transform:v(kp,Vp)}).style("stroke-width",Sm+6+"px").call(b.stroke,"rgba(0,0,0,0)").call(b.fill,"rgba(0,0,0,0)"),Yp,Fp;D.init({element:Ap.node(),gd:L,prepFn:function(){var u0=T.getTranslate(vs);Yp=u0.x,Fp=u0.y,Ce&&Ce.autorange&&ye(Ce._name+".autorange",!0),he&&he.autorange&&ye(he._name+".autorange",!0)},moveFn:function(u0,g0){var H0=F1(Yp,Fp),Lm=H0[0]+u0,Em=H0[1]+g0;vs.call(T.setTranslate,Lm,Em),Ae("x",F(Ce,u0,"x",Y,O)),Ae("y",F(he,g0,"y",Y,O)),O.axref===O.xref&&Ae("ax",F(Ce,u0,"ax",Y,O)),O.ayref===O.yref&&Ae("ay",F(he,g0,"ay",Y,O)),Ve.attr("transform",v(u0,g0)),Ke.attr({transform:"rotate("+Pe+","+Lm+","+Em+")"})},doneFn:function(){s.call("_guiRelayout",L,Le());var u0=document.querySelector(".js-notes-box-panel");u0&&u0.redraw(u0.selectedObj)}})}}};if(O.showarrow&&v1(0,0),nt){var b1;D.init({element:vs.node(),gd:L,prepFn:function(){b1=Ke.attr("transform")},moveFn:function(Bm,fm){var c1="pointer";if(O.showarrow)O.axref===O.xref?Ae("ax",F(Ce,Bm,"ax",Y,O)):Ae("ax",O.ax+Bm),O.ayref===O.yref?Ae("ay",F(he,fm,"ay",Y.w,O)):Ae("ay",O.ay+fm),v1(Bm,fm);else{if(W)return;var y1,n1;if(Ce)y1=F(Ce,Bm,"x",Y,O);else{var Ym=O._xsize/Y.w,t1=O.x+(O._xshift-O.xshift)/Y.w-Ym/2;y1=D.align(t1+Bm/Y.w,Ym,0,1,O.xanchor)}if(he)n1=F(he,fm,"y",Y,O);else{var Um=O._ysize/Y.h,z1=O.y-(O._yshift+O.yshift)/Y.h-Um/2;n1=D.align(z1-fm/Y.h,Um,0,1,O.yanchor)}Ae("x",y1),Ae("y",n1),(!Ce||!he)&&(c1=D.getCursor(Ce?.5:y1,he?.5:n1,O.xanchor,O.yanchor))}Ke.attr({transform:v(Bm,fm)+b1}),M(vs,c1)},clickFn:function(Bm,fm){O.captureevents&&L.emit("plotly_clickannotation",Ei(fm))},doneFn:function(){M(vs),s.call("_guiRelayout",L,Le());var Bm=document.querySelector(".js-notes-box-panel");Bm&&Bm.redraw(Bm.selectedObj)}})}}Re.annotationText?ve.call(k.makeEditable,{delegate:vs,gd:L}).call(Te).on("edit",function(bt){O.text=bt,this.call(Te),Ae("text",bt),Ce&&Ce.autorange&&ye(Ce._name+".autorange",!0),he&&he.autorange&&ye(he._name+".autorange",!0),s.call("_guiRelayout",L,Le())}):ve.call(Te)}}),Hy=t((me,ue)=>{var g=Z(),s=l1(),h=Nm().arrayEditor;ue.exports={hasClickToShow:x,onClick:v};function x(T,u){var k=y(T,u);return k.on.length>0||k.explicitOff.length>0}function v(T,u){var k=y(T,u),M=k.on,D=k.off.concat(k.explicitOff),B={},P=T._fullLayout.annotations,N,z;if(M.length||D.length){for(N=0;N<M.length;N++)z=h(T.layout,"annotations",P[M[N]]),z.modifyItem("visible",!0),g.extendFlat(B,z.getUpdateObj());for(N=0;N<D.length;N++)z=h(T.layout,"annotations",P[D[N]]),z.modifyItem("visible",!1),g.extendFlat(B,z.getUpdateObj());return s.call("update",T,{},B)}}function y(T,u){var k=T._fullLayout.annotations,M=[],D=[],B=[],P=(u||[]).length,N,z,F,w,L,O,H,W;for(N=0;N<k.length;N++)if(F=k[N],w=F.clicktoshow,w){for(z=0;z<P;z++)if(L=u[z],O=L.xaxis,H=L.yaxis,O._id===F.xref&&H._id===F.yref&&O.d2r(L.x)===b(F._xclick,O)&&H.d2r(L.y)===b(F._yclick,H)){F.visible?w==="onout"?W=D:W=B:W=M,W.push(N);break}z===P&&F.visible&&w==="onout"&&D.push(N)}return{on:M,off:D,explicitOff:B}}function b(T,u){return u.type==="log"?u.l2r(T):u.d2r(T)}}),lx=t((me,ue)=>{var g=Z(),s=_r();ue.exports=function(h,x,v,y){y("opacity");var b=y("bgcolor"),T=y("bordercolor"),u=s.opacity(T);y("borderpad");var k=y("borderwidth"),M=y("showarrow");y("text",M?" ":v._dfltTitle.annotation),y("textangle"),g.coerceFont(y,"font",v.font),y("width"),y("align");var D=y("height");if(D&&y("valign"),M){var B=y("arrowside"),P,N;B.indexOf("end")!==-1&&(P=y("arrowhead"),N=y("arrowsize")),B.indexOf("start")!==-1&&(y("startarrowhead",P),y("startarrowsize",N)),y("arrowcolor",u?x.bordercolor:s.defaultLine),y("arrowwidth",(u&&k||1)*2),y("standoff"),y("startstandoff")}var z=y("hovertext"),F=v.hoverlabel||{};if(z){var w=y("hoverlabel.bgcolor",F.bgcolor||(s.opacity(b)?s.rgb(b):s.defaultLine)),L=y("hoverlabel.bordercolor",F.bordercolor||s.contrast(w)),O=g.extendFlat({},F.font);O.color||(O.color=L),g.coerceFont(y,"hoverlabel.font",O)}y("captureevents",!!z)}}),Jy=t((me,ue)=>{var g=Z(),s=mm(),h=Ye(),x=lx(),v=Fy();ue.exports=function(b,T){h(b,T,{name:"annotations",handleItemDefaults:y})};function y(b,T,u){function k(Y,Re){return g.coerce(b,T,v,Y,Re)}var M=k("visible"),D=k("clicktoshow");if(M||D){x(b,T,u,k);for(var B=T.showarrow,P=["x","y"],N=[-10,-30],z={_fullLayout:u},F=0;F<2;F++){var w=P[F],L=s.coerceRef(b,T,z,w,"","paper");if(L!=="paper"){var O=s.getFromId(z,L);O._annIndices.push(T._index)}if(s.coercePosition(T,z,k,L,w,.5),B){var H="a"+w,W=s.coerceRef(b,T,z,H,"pixel",["pixel","paper"]);W!=="pixel"&&W!==L&&(W=T[H]="pixel");var Ce=W==="pixel"?N[F]:.4;s.coercePosition(T,z,k,W,H,Ce)}k(w+"anchor"),k(w+"shift")}if(g.noneOrAll(b,T,["x","y"]),B&&g.noneOrAll(b,T,["ax","ay"]),D){var he=k("xclick"),le=k("yclick");T._xclick=he===void 0?T.x:s.cleanPosition(he,z,T.xref),T._yclick=le===void 0?T.y:s.cleanPosition(le,z,T.yref)}}}}),Ky=t((me,ue)=>{var g=Z(),s=mm(),h=Ay().draw;ue.exports=function(y){var b=y._fullLayout,T=g.filterVisible(b.annotations);if(T.length&&y._fullData.length)return g.syncOrAsync([h,x],y)};function x(y){var b=y._fullLayout;g.filterVisible(b.annotations).forEach(function(T){var u=s.getFromId(y,T.xref),k=s.getFromId(y,T.yref),M=s.getRefType(T.xref),D=s.getRefType(T.yref);T._extremes={},M==="range"&&v(T,u),D==="range"&&v(T,k)})}function v(y,b){var T=b._id,u=T.charAt(0),k=y[u],M=y["a"+u],D=y[u+"ref"],B=y["a"+u+"ref"],P=y["_"+u+"padplus"],N=y["_"+u+"padminus"],z={x:1,y:-1}[u]*y[u+"shift"],F=3*y.arrowsize*y.arrowwidth||0,w=F+z,L=F-z,O=3*y.startarrowsize*y.arrowwidth||0,H=O+z,W=O-z,Ce;if(B===D){var he=s.findExtremes(b,[b.r2c(k)],{ppadplus:w,ppadminus:L}),le=s.findExtremes(b,[b.r2c(M)],{ppadplus:Math.max(P,H),ppadminus:Math.max(N,W)});Ce={min:[he.min[0],le.min[0]],max:[he.max[0],le.max[0]]}}else H=M?H+M:H,W=M?W-M:W,Ce=s.findExtremes(b,[b.r2c(k)],{ppadplus:Math.max(P,w,H),ppadminus:Math.max(N,L,W)});y._extremes[T]=Ce}}),cx=t((me,ue)=>{var g=A(),s=Ne();ue.exports=function(h,x,v,y){x=x||{};var b=v==="log"&&x.type==="linear",T=v==="linear"&&x.type==="log";if(!(b||T))return;var u=h._fullLayout.annotations,k=x._id.charAt(0),M,D;function B(N){var z=M[N],F=null;b?F=s(z,x.range):F=Math.pow(10,z),g(F)||(F=null),y(D+N,F)}for(var P=0;P<u.length;P++)M=u[P],D="annotations["+P+"].",M[k+"ref"]===x._id&&B(k),M["a"+k+"ref"]===x._id&&B("a"+k)}}),L3=t((me,ue)=>{var g=Ay(),s=Hy();ue.exports={moduleType:"component",name:"annotations",layoutAttributes:Fy(),supplyLayoutDefaults:Jy(),includeBasePlot:h_()("annotations"),calcAutorange:Ky(),draw:g.draw,drawOne:g.drawOne,drawRaw:g.drawRaw,hasClickToShow:s.hasClickToShow,onClick:s.onClick,convertCoords:cx()}}),k2=t((me,ue)=>{var g=Fy(),s=vm().overrideAll,h=Nm().templatedArray;ue.exports=s(h("annotation",{visible:g.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:g.xanchor,xshift:g.xshift,yanchor:g.yanchor,yshift:g.yshift,text:g.text,textangle:g.textangle,font:g.font,width:g.width,height:g.height,opacity:g.opacity,align:g.align,valign:g.valign,bgcolor:g.bgcolor,bordercolor:g.bordercolor,borderpad:g.borderpad,borderwidth:g.borderwidth,showarrow:g.showarrow,arrowcolor:g.arrowcolor,arrowhead:g.arrowhead,startarrowhead:g.startarrowhead,arrowside:g.arrowside,arrowsize:g.arrowsize,startarrowsize:g.startarrowsize,arrowwidth:g.arrowwidth,standoff:g.standoff,startstandoff:g.startstandoff,hovertext:g.hovertext,hoverlabel:g.hoverlabel,captureevents:g.captureevents}),"calc","from-root")}),vb=t((me,ue)=>{var g=Z(),s=mm(),h=Ye(),x=lx(),v=k2();ue.exports=function(b,T,u){h(b,T,{name:"annotations",handleItemDefaults:y,fullLayout:u.fullLayout})};function y(b,T,u,k){function M(P,N){return g.coerce(b,T,v,P,N)}function D(P){var N=P+"axis",z={_fullLayout:{}};return z._fullLayout[N]=u[N],s.coercePosition(T,z,M,P,P,.5)}var B=M("visible");B&&(x(b,T,k.fullLayout,M),D("x"),D("y"),D("z"),g.noneOrAll(b,T,["x","y","z"]),T.xref="x",T.yref="y",T.zref="z",M("xanchor"),M("yanchor"),M("xshift"),M("yshift"),T.showarrow&&(T.axref="pixel",T.ayref="pixel",M("ax",-10),M("ay",-30),g.noneOrAll(b,T,["ax","ay"])))}}),D3=t((me,ue)=>{var g=Z(),s=mm();ue.exports=function(x){for(var v=x.fullSceneLayout,y=v.annotations,b=0;b<y.length;b++)h(y[b],x);x.fullLayout._infolayer.selectAll(".annotation-"+x.id).remove()};function h(x,v){var y=v.fullSceneLayout,b=y.domain,T=v.fullLayout._size,u={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};x._xa={},g.extendFlat(x._xa,u),s.setConvert(x._xa),x._xa._offset=T.l+b.x[0]*T.w,x._xa.l2p=function(){return .5*(1+x._pdata[0]/x._pdata[3])*T.w*(b.x[1]-b.x[0])},x._ya={},g.extendFlat(x._ya,u),s.setConvert(x._ya),x._ya._offset=T.t+(1-b.y[1])*T.h,x._ya.l2p=function(){return .5*(1-x._pdata[1]/x._pdata[3])*T.h*(b.y[1]-b.y[0])}}}),xy=t((me,ue)=>{function g(h,x){var v=[0,0,0,0],y,b;for(y=0;y<4;++y)for(b=0;b<4;++b)v[b]+=h[4*y+b]*x[y];return v}function s(h,x){var v=g(h.projection,g(h.view,g(h.model,[x[0],x[1],x[2],1])));return v}ue.exports=s}),Vv=t((me,ue)=>{var g=Ay().drawRaw,s=xy(),h=["x","y","z"];ue.exports=function(x){for(var v=x.fullSceneLayout,y=x.dataScale,b=v.annotations,T=0;T<b.length;T++){for(var u=b[T],k=!1,M=0;M<3;M++){var D=h[M],B=u[D],P=v[D+"axis"],N=P.r2fraction(B);if(N<0||N>1){k=!0;break}}k?x.fullLayout._infolayer.select(".annotation-"+x.id+'[data-index="'+T+'"]').remove():(u._pdata=s(x.glplot.cameraParams,[v.xaxis.r2l(u.x)*y[0],v.yaxis.r2l(u.y)*y[1],v.zaxis.r2l(u.z)*y[2]]),g(x.graphDiv,u,T,x.id,u._xa,u._ya))}}}),fv=t((me,ue)=>{var g=l1(),s=Z();ue.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:k2()}}},layoutAttributes:k2(),handleDefaults:vb(),includeBasePlot:h,convert:D3(),draw:Vv()};function h(x,v){var y=g.subplotsRegistry.gl3d;if(y)for(var b=y.attrRegex,T=Object.keys(x),u=0;u<T.length;u++){var k=T[u];b.test(k)&&(x[k].annotations||[]).length&&(s.pushUnique(v._basePlotModules,y),s.pushUnique(v._subplots.gl3d,k))}}}),ux=t((me,ue)=>{var g=Fy(),s=Xe(),h=Px().line,x=r0().dash,v=Fe().extendFlat,y=Nm().templatedArray;Uy();var b=mr(),T=_1().shapeTexttemplateAttrs,u=j1();ue.exports=y("shape",{visible:v({},b.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:v({},b.legend,{editType:"calc+arraydraw"}),legendgroup:v({},b.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:v({},b.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:s({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:v({},b.legendrank,{editType:"calc+arraydraw"}),legendwidth:v({},b.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:v({},g.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:v({},g.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:v({},h.color,{editType:"arraydraw"}),width:v({},h.width,{editType:"calc+arraydraw"}),dash:v({},x,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:T({},{keys:Object.keys(u)}),font:s({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})}),Gy=t((me,ue)=>{var g=Z(),s=mm(),h=Ye(),x=ux(),v=de();ue.exports=function(T,u){h(T,u,{name:"shapes",handleItemDefaults:b})};function y(T,u){return T?"bottom":u.indexOf("top")!==-1?"top":u.indexOf("bottom")!==-1?"bottom":"middle"}function b(T,u,k){function M(Se,Ee){return g.coerce(T,u,x,Se,Ee)}u._isShape=!0;var D=M("visible");if(D){var B=M("showlegend");B&&(M("legend"),M("legendwidth"),M("legendgroup"),M("legendgrouptitle.text"),g.coerceFont(M,"legendgrouptitle.font"),M("legendrank"));var P=M("path"),N=P?"path":"rect",z=M("type",N),F=z!=="path";F&&delete u.path,M("editable"),M("layer"),M("opacity"),M("fillcolor"),M("fillrule");var w=M("line.width");w&&(M("line.color"),M("line.dash"));for(var L=M("xsizemode"),O=M("ysizemode"),H=["x","y"],W=0;W<2;W++){var Ce=H[W],he=Ce+"anchor",le=Ce==="x"?L:O,Y={_fullLayout:k},Re,fe,xe,ge=s.coerceRef(T,u,Y,Ce,void 0,"paper"),ye=s.getRefType(ge);if(ye==="range"?(Re=s.getFromId(Y,ge),Re._shapeIndices.push(u._index),xe=v.rangeToShapePosition(Re),fe=v.shapePositionToRange(Re),(Re.type==="category"||Re.type==="multicategory")&&(M(Ce+"0shift"),M(Ce+"1shift"))):fe=xe=g.identity,F){var Ae=.25,Le=.75,ce=Ce+"0",ke=Ce+"1",Pe=T[ce],tt=T[ke];T[ce]=fe(T[ce],!0),T[ke]=fe(T[ke],!0),le==="pixel"?(M(ce,0),M(ke,10)):(s.coercePosition(u,Y,M,ge,ce,Ae),s.coercePosition(u,Y,M,ge,ke,Le)),u[ce]=xe(u[ce]),u[ke]=xe(u[ke]),T[ce]=Pe,T[ke]=tt}if(le==="pixel"){var Ke=T[he];T[he]=fe(T[he],!0),s.coercePosition(u,Y,M,ge,he,.25),u[he]=xe(u[he]),T[he]=Ke}}F&&g.noneOrAll(T,u,["x0","x1","y0","y1"]);var nt=z==="line",yi,Ei;if(F&&(yi=M("label.texttemplate")),yi||(Ei=M("label.text")),Ei||yi){M("label.textangle");var vs=M("label.textposition",nt?"middle":"middle center");M("label.xanchor"),M("label.yanchor",y(nt,vs)),M("label.padding"),g.coerceFont(M,"label.font",k.font)}}}}),yb=t((me,ue)=>{var g=_r(),s=Z();function h(x,v){return x?"bottom":v.indexOf("top")!==-1?"top":v.indexOf("bottom")!==-1?"bottom":"middle"}ue.exports=function(x,v,y){y("newshape.visible"),y("newshape.name"),y("newshape.showlegend"),y("newshape.legend"),y("newshape.legendwidth"),y("newshape.legendgroup"),y("newshape.legendgrouptitle.text"),s.coerceFont(y,"newshape.legendgrouptitle.font"),y("newshape.legendrank"),y("newshape.drawdirection"),y("newshape.layer"),y("newshape.fillcolor"),y("newshape.fillrule"),y("newshape.opacity");var b=y("newshape.line.width");if(b){var T=(x||{}).plot_bgcolor||"#FFF";y("newshape.line.color",g.contrast(T)),y("newshape.line.dash")}var u=x.dragmode==="drawline",k=y("newshape.label.text"),M=y("newshape.label.texttemplate");if(k||M){y("newshape.label.textangle");var D=y("newshape.label.textposition",u?"middle":"middle center");y("newshape.label.xanchor"),y("newshape.label.yanchor",h(u,D)),y("newshape.label.padding"),s.coerceFont(y,"newshape.label.font",v.font)}y("activeshape.fillcolor"),y("activeshape.opacity")}}),_x=t((me,ue)=>{var g=Z(),s=mm(),h=zv(),x=de();ue.exports=function(u){var k=u._fullLayout,M=g.filterVisible(k.shapes);if(!(!M.length||!u._fullData.length))for(var D=0;D<M.length;D++){var B=M[D];B._extremes={};var P,N,z=s.getRefType(B.xref),F=s.getRefType(B.yref);B.xref!=="paper"&&z!=="domain"&&(P=s.getFromId(u,B.xref),N=T(P,B,h.paramIsX),N&&(B._extremes[P._id]=s.findExtremes(P,N,v(B)))),B.yref!=="paper"&&F!=="domain"&&(P=s.getFromId(u,B.yref),N=T(P,B,h.paramIsY),N&&(B._extremes[P._id]=s.findExtremes(P,N,y(B))))}};function v(u){return b(u.line.width,u.xsizemode,u.x0,u.x1,u.path,!1)}function y(u){return b(u.line.width,u.ysizemode,u.y0,u.y1,u.path,!0)}function b(u,k,M,D,B,P){var N=u/2,z=P;if(k==="pixel"){var F=B?x.extractPathCoords(B,P?h.paramIsY:h.paramIsX):[M,D],w=g.aggNums(Math.max,null,F),L=g.aggNums(Math.min,null,F),O=L<0?Math.abs(L)+N:N,H=w>0?w+N:N;return{ppad:N,ppadplus:z?O:H,ppadminus:z?H:O}}else return{ppad:N}}function T(u,k,M){var D=u._id.charAt(0)==="x"?"x":"y",B=u.type==="category"||u.type==="multicategory",P,N,z=0,F=0,w=B?u.r2c:u.d2c,L=k[D+"sizemode"]==="scaled";if(L?(P=k[D+"0"],N=k[D+"1"],B&&(z=k[D+"0shift"],F=k[D+"1shift"])):(P=k[D+"anchor"],N=k[D+"anchor"]),P!==void 0)return[w(P)+z,w(N)+F];if(k.path){var O=1/0,H=-1/0,W=k.path.match(h.segmentRE),Ce,he,le,Y,Re;for(u.type==="date"&&(w=x.decodeDate(w)),Ce=0;Ce<W.length;Ce++)he=W[Ce],le=M[he.charAt(0)].drawn,le!==void 0&&(Y=W[Ce].substr(1).match(h.paramRE),!(!Y||Y.length<le)&&(Re=w(Y[le]),Re<O&&(O=Re),Re>H&&(H=Re)));if(H>=O)return[O,H]}}}),k3=t((me,ue)=>{var g=A0();ue.exports={moduleType:"component",name:"shapes",layoutAttributes:ux(),supplyLayoutDefaults:Gy(),supplyDrawNewShapeDefaults:yb(),includeBasePlot:h_()("shapes"),calcAutorange:_x(),draw:g.draw,drawOne:g.drawOne}}),xb=t((me,ue)=>{var g=m1(),s=Nm().templatedArray;Uy(),ue.exports=s("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",g.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",g.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})}),r2=t((me,ue)=>{var g=Z(),s=mm(),h=Ye(),x=xb(),v="images";ue.exports=function(b,T){var u={name:v,handleItemDefaults:y};h(b,T,u)};function y(b,T,u){function k(L,O){return g.coerce(b,T,x,L,O)}var M=k("source"),D=k("visible",!!M);if(!D)return T;k("layer"),k("xanchor"),k("yanchor"),k("sizex"),k("sizey"),k("sizing"),k("opacity");for(var B={_fullLayout:u},P=["x","y"],N=0;N<2;N++){var z=P[N],F=s.coerceRef(b,T,B,z,"paper",void 0);if(F!=="paper"){var w=s.getFromId(B,F);w._imgIndices.push(T._index)}s.coercePosition(T,B,k,F,z,0)}return T}}),Gx=t((me,ue)=>{var g=c(),s=D0(),h=mm(),x=N1(),v=Hg();ue.exports=function(y){var b=y._fullLayout,T=[],u={},k=[],M,D;for(D=0;D<b.images.length;D++){var B=b.images[D];if(B.visible)if(B.layer==="below"&&B.xref!=="paper"&&B.yref!=="paper"){M=x.ref2id(B.xref)+x.ref2id(B.yref);var P=b._plots[M];if(!P){k.push(B);continue}P.mainplot&&(M=P.mainplot.id),u[M]||(u[M]=[]),u[M].push(B)}else B.layer==="above"?T.push(B):k.push(B)}var N={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function z(le){var Y=g.select(this);if(this._imgSrc!==le.source)if(Y.attr("xmlns",v.svg),!y._context.staticPlot||le.source&&le.source.slice(0,5)==="data:")Y.attr("xlink:href",le.source),this._imgSrc=le.source;else{var Re=new Promise((function(fe){var xe=new Image;this.img=xe,xe.setAttribute("crossOrigin","anonymous"),xe.onerror=ge,xe.onload=function(){var ye=document.createElement("canvas");ye.width=this.width,ye.height=this.height;var Ae=ye.getContext("2d",{willReadFrequently:!0});Ae.drawImage(this,0,0);var Le=ye.toDataURL("image/png");Y.attr("xlink:href",Le),fe()},Y.on("error",ge),xe.src=le.source,this._imgSrc=le.source;function ge(){Y.remove(),fe()}}).bind(this));y._promises.push(Re)}}function F(le){var Y=g.select(this),Re=h.getFromId(y,le.xref),fe=h.getFromId(y,le.yref),xe=h.getRefType(le.xref)==="domain",ge=h.getRefType(le.yref)==="domain",ye=b._size,Ae,Le;Re!==void 0?Ae=typeof le.xref=="string"&&xe?Re._length*le.sizex:Math.abs(Re.l2p(le.sizex)-Re.l2p(0)):Ae=le.sizex*ye.w,fe!==void 0?Le=typeof le.yref=="string"&&ge?fe._length*le.sizey:Math.abs(fe.l2p(le.sizey)-fe.l2p(0)):Le=le.sizey*ye.h;var ce=Ae*N.x[le.xanchor].offset,ke=Le*N.y[le.yanchor].offset,Pe=N.x[le.xanchor].sizing+N.y[le.yanchor].sizing,tt,Ke;switch(Re!==void 0?tt=typeof le.xref=="string"&&xe?Re._length*le.x+Re._offset:Re.r2p(le.x)+Re._offset:tt=le.x*ye.w+ye.l,tt+=ce,fe!==void 0?Ke=typeof le.yref=="string"&&ge?fe._length*(1-le.y)+fe._offset:fe.r2p(le.y)+fe._offset:Ke=ye.h-le.y*ye.h+ye.t,Ke+=ke,le.sizing){case"fill":Pe+=" slice";break;case"stretch":Pe="none";break}Y.attr({x:tt,y:Ke,width:Ae,height:Le,preserveAspectRatio:Pe,opacity:le.opacity});var nt=Re&&h.getRefType(le.xref)!=="domain"?Re._id:"",yi=fe&&h.getRefType(le.yref)!=="domain"?fe._id:"",Ei=nt+yi;s.setClipUrl(Y,Ei?"clip"+b._uid+Ei:null,y)}function w(le){return[le.xref,le.x,le.sizex,le.yref,le.y,le.sizey].join("_")}function L(le,Y){return le._index-Y._index}var O=b._imageLowerLayer.selectAll("image").data(k,w),H=b._imageUpperLayer.selectAll("image").data(T,w);O.enter().append("image"),H.enter().append("image"),O.exit().remove(),H.exit().remove(),O.each(function(le){z.bind(this)(le),F.bind(this)(le)}),H.each(function(le){z.bind(this)(le),F.bind(this)(le)}),O.sort(L),H.sort(L);var W=Object.keys(b._plots);for(D=0;D<W.length;D++){M=W[D];var Ce=b._plots[M];if(Ce.imagelayer){var he=Ce.imagelayer.selectAll("image").data(u[M]||[],w);he.enter().append("image"),he.exit().remove(),he.each(function(le){z.bind(this)(le),F.bind(this)(le)}),he.sort(L)}}}}),_b=t((me,ue)=>{var g=A(),s=Ne();ue.exports=function(h,x,v,y){x=x||{};var b=v==="log"&&x.type==="linear",T=v==="linear"&&x.type==="log";if(b||T){for(var u=h._fullLayout.images,k=x._id.charAt(0),M,D,B=0;B<u.length;B++)if(M=u[B],D="images["+B+"].",M[k+"ref"]===x._id){var P=M[k],N=M["size"+k],z=null,F=null;if(b){z=s(P,x.range);var w=N/Math.pow(10,z)/2;F=2*Math.log(w+Math.sqrt(1+w*w))/Math.LN10}else z=Math.pow(10,P),F=z*(Math.pow(10,N/2)-Math.pow(10,-N/2));g(z)?g(F)||(F=null):(z=null,F=null),y(D+k,z),y(D+"size"+k,F)}}}}),N2=t((me,ue)=>{ue.exports={moduleType:"component",name:"images",layoutAttributes:xb(),supplyLayoutDefaults:r2(),includeBasePlot:h_()("images"),draw:Gx(),convertCoords:_b()}}),z2=t((me,ue)=>{ue.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}}),bx=t((me,ue)=>{var g=Xe(),s=Sp(),h=Fe().extendFlat,x=vm().overrideAll,v=tm(),y=Nm().templatedArray,b=y("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ue.exports=x(y("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:b,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:h(v({editType:"arraydraw"}),{}),font:g({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:s.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")}),dx=t((me,ue)=>{var g=Z(),s=Ye(),h=bx(),x=z2(),v=x.name,y=h.buttons;ue.exports=function(u,k){var M={name:v,handleItemDefaults:b};s(u,k,M)};function b(u,k,M){function D(N,z){return g.coerce(u,k,h,N,z)}var B=s(u,k,{name:"buttons",handleItemDefaults:T}),P=D("visible",B.length>0);P&&(D("active"),D("direction"),D("type"),D("showactive"),D("x"),D("y"),g.noneOrAll(u,k,["x","y"]),D("xanchor"),D("yanchor"),D("pad.t"),D("pad.r"),D("pad.b"),D("pad.l"),g.coerceFont(D,"font",M.font),D("bgcolor",M.paper_bgcolor),D("bordercolor"),D("borderwidth"))}function T(u,k){function M(B,P){return g.coerce(u,k,y,B,P)}var D=M("visible",u.method==="skip"||Array.isArray(u.args));D&&(M("method"),M("args"),M("args2"),M("label"),M("execute"))}}),wx=t((me,ue)=>{ue.exports=v;var g=c(),s=_r(),h=D0(),x=Z();function v(y,b,T){this.gd=y,this.container=b,this.id=T,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}v.barWidth=2,v.barLength=20,v.barRadius=2,v.barPad=1,v.barColor="#808BA4",v.prototype.enable=function(y,b,T){var u=this.gd._fullLayout,k=u.width,M=u.height;this.position=y;var D=this.position.l,B=this.position.w,P=this.position.t,N=this.position.h,z=this.position.direction,F=z==="down",w=z==="left",L=z==="right",O=z==="up",H=B,W=N,Ce,he,le,Y;!F&&!w&&!L&&!O&&(this.position.direction="down",F=!0);var Re=F||O;Re?(Ce=D,he=Ce+H,F?(le=P,Y=Math.min(le+W,M),W=Y-le):(Y=P+W,le=Math.max(Y-W,0),W=Y-le)):(le=P,Y=le+W,w?(he=D+H,Ce=Math.max(he-H,0),H=he-Ce):(Ce=D,he=Math.min(Ce+H,k),H=he-Ce)),this._box={l:Ce,t:le,w:H,h:W};var fe=B>H,xe=v.barLength+2*v.barPad,ge=v.barWidth+2*v.barPad,ye=D,Ae=P+N;Ae+ge>M&&(Ae=M-ge);var Le=this.container.selectAll("rect.scrollbar-horizontal").data(fe?[0]:[]);Le.exit().on(".drag",null).remove(),Le.enter().append("rect").classed("scrollbar-horizontal",!0).call(s.fill,v.barColor),fe?(this.hbar=Le.attr({rx:v.barRadius,ry:v.barRadius,x:ye,y:Ae,width:xe,height:ge}),this._hbarXMin=ye+xe/2,this._hbarTranslateMax=H-xe):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var ce=N>W,ke=v.barWidth+2*v.barPad,Pe=v.barLength+2*v.barPad,tt=D+B,Ke=P;tt+ke>k&&(tt=k-ke);var nt=this.container.selectAll("rect.scrollbar-vertical").data(ce?[0]:[]);nt.exit().on(".drag",null).remove(),nt.enter().append("rect").classed("scrollbar-vertical",!0).call(s.fill,v.barColor),ce?(this.vbar=nt.attr({rx:v.barRadius,ry:v.barRadius,x:tt,y:Ke,width:ke,height:Pe}),this._vbarYMin=Ke+Pe/2,this._vbarTranslateMax=W-Pe):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var yi=this.id,Ei=Ce-.5,vs=ce?he+ke+.5:he+.5,Se=le-.5,Ee=fe?Y+ge+.5:Y+.5,X=u._topdefs.selectAll("#"+yi).data(fe||ce?[0]:[]);if(X.exit().remove(),X.enter().append("clipPath").attr("id",yi).append("rect"),fe||ce?(this._clipRect=X.select("rect").attr({x:Math.floor(Ei),y:Math.floor(Se),width:Math.ceil(vs)-Math.floor(Ei),height:Math.ceil(Ee)-Math.floor(Se)}),this.container.call(h.setClipUrl,yi,this.gd),this.bg.attr({x:D,y:P,width:B,height:N})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect),fe||ce){var Oe=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Oe);var Qe=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault(),g.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));fe&&this.hbar.on(".drag",null).call(Qe),ce&&this.vbar.on(".drag",null).call(Qe)}this.setTranslate(b,T)},v.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},v.prototype._onBoxDrag=function(){var y=this.translateX,b=this.translateY;this.hbar&&(y-=g.event.dx),this.vbar&&(b-=g.event.dy),this.setTranslate(y,b)},v.prototype._onBoxWheel=function(){var y=this.translateX,b=this.translateY;this.hbar&&(y+=g.event.deltaY),this.vbar&&(b+=g.event.deltaY),this.setTranslate(y,b)},v.prototype._onBarDrag=function(){var y=this.translateX,b=this.translateY;if(this.hbar){var T=y+this._hbarXMin,u=T+this._hbarTranslateMax,k=x.constrain(g.event.x,T,u),M=(k-T)/(u-T),D=this.position.w-this._box.w;y=M*D}if(this.vbar){var B=b+this._vbarYMin,P=B+this._vbarTranslateMax,N=x.constrain(g.event.y,B,P),z=(N-B)/(P-B),F=this.position.h-this._box.h;b=z*F}this.setTranslate(y,b)},v.prototype.setTranslate=function(y,b){var T=this.position.w-this._box.w,u=this.position.h-this._box.h;if(y=x.constrain(y||0,0,T),b=x.constrain(b||0,0,u),this.translateX=y,this.translateY=b,this.container.call(h.setTranslate,this._box.l-this.position.l-y,this._box.t-this.position.t-b),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+y-.5),y:Math.floor(this.position.t+b-.5)}),this.hbar){var k=y/T;this.hbar.call(h.setTranslate,y+k*this._hbarTranslateMax,b)}if(this.vbar){var M=b/u;this.vbar.call(h.setTranslate,y,b+M*this._vbarTranslateMax)}}}),hx=t((me,ue)=>{var g=c(),s=vg(),h=_r(),x=D0(),v=Z(),y=kg(),b=Nm().arrayEditor,T=Q1().LINE_SPACING,u=z2(),k=wx();ue.exports=function(xe){var ge=xe._fullLayout,ye=v.filterVisible(ge[u.name]);function Ae(yi){s.autoMargin(xe,Y(yi))}var Le=ge._menulayer.selectAll("g."+u.containerClassName).data(ye.length>0?[0]:[]);if(Le.enter().append("g").classed(u.containerClassName,!0).style("cursor","pointer"),Le.exit().each(function(){g.select(this).selectAll("g."+u.headerGroupClassName).each(Ae)}).remove(),ye.length!==0){var ce=Le.selectAll("g."+u.headerGroupClassName).data(ye,M);ce.enter().append("g").classed(u.headerGroupClassName,!0);for(var ke=v.ensureSingle(Le,"g",u.dropdownButtonGroupClassName,function(yi){yi.style("pointer-events","all")}),Pe=0;Pe<ye.length;Pe++){var tt=ye[Pe];le(xe,tt)}var Ke="updatemenus"+ge._uid,nt=new k(xe,ke,Ke);ce.enter().size()&&(ke.node().parentNode.appendChild(ke.node()),ke.call(fe)),ce.exit().each(function(yi){ke.call(fe),Ae(yi)}).remove(),ce.each(function(yi){var Ei=g.select(this),vs=yi.type==="dropdown"?ke:null;s.manageCommandObserver(xe,yi,yi.buttons,function(Se){P(xe,yi,yi.buttons[Se.index],Ei,vs,nt,Se.index,!0)}),yi.type==="dropdown"?(N(xe,Ei,ke,nt,yi),B(ke,yi)&&z(xe,Ei,ke,nt,yi)):z(xe,Ei,null,null,yi)})}};function M(xe){return xe._index}function D(xe){return+xe.attr(u.menuIndexAttrName)==-1}function B(xe,ge){return+xe.attr(u.menuIndexAttrName)===ge._index}function P(xe,ge,ye,Ae,Le,ce,ke,Pe){ge.active=ke,b(xe.layout,u.name,ge).applyUpdate("active",ke),ge.type==="buttons"?z(xe,Ae,null,null,ge):ge.type==="dropdown"&&(Le.attr(u.menuIndexAttrName,"-1"),N(xe,Ae,Le,ce,ge),Pe||z(xe,Ae,Le,ce,ge))}function N(xe,ge,ye,Ae,Le){var ce=v.ensureSingle(ge,"g",u.headerClassName,function(Ei){Ei.style("pointer-events","all")}),ke=Le._dims,Pe=Le.active,tt=Le.buttons[Pe]||u.blankHeaderOpts,Ke={y:Le.pad.t,yPad:0,x:Le.pad.l,xPad:0,index:0},nt={width:ke.headerWidth,height:ke.headerHeight};ce.call(L,Le,tt,xe).call(Re,Le,Ke,nt);var yi=v.ensureSingle(ge,"text",u.headerArrowClassName,function(Ei){Ei.attr("text-anchor","end").call(x.font,Le.font).text(u.arrowSymbol[Le.direction])});yi.attr({x:ke.headerWidth-u.arrowOffsetX+Le.pad.l,y:ke.headerHeight/2+u.textOffsetY+Le.pad.t}),ce.on("click",function(){ye.call(fe,String(B(ye,Le)?-1:Le._index)),z(xe,ge,ye,Ae,Le)}),ce.on("mouseover",function(){ce.call(Ce)}),ce.on("mouseout",function(){ce.call(he,Le)}),x.setTranslate(ge,ke.lx,ke.ly)}function z(xe,ge,ye,Ae,Le){ye||(ye=ge,ye.attr("pointer-events","all"));var ce=!D(ye)||Le.type==="buttons"?Le.buttons:[],ke=Le.type==="dropdown"?u.dropdownButtonClassName:u.buttonClassName,Pe=ye.selectAll("g."+ke).data(v.filterVisible(ce)),tt=Pe.enter().append("g").classed(ke,!0),Ke=Pe.exit();Le.type==="dropdown"?(tt.attr("opacity","0").transition().attr("opacity","1"),Ke.transition().attr("opacity","0").remove()):Ke.remove();var nt=0,yi=0,Ei=Le._dims,vs=["up","down"].indexOf(Le.direction)!==-1;Le.type==="dropdown"&&(vs?yi=Ei.headerHeight+u.gapButtonHeader:nt=Ei.headerWidth+u.gapButtonHeader),Le.type==="dropdown"&&Le.direction==="up"&&(yi=-u.gapButtonHeader+u.gapButton-Ei.openHeight),Le.type==="dropdown"&&Le.direction==="left"&&(nt=-u.gapButtonHeader+u.gapButton-Ei.openWidth);var Se={x:Ei.lx+nt+Le.pad.l,y:Ei.ly+yi+Le.pad.t,yPad:u.gapButton,xPad:u.gapButton,index:0},Ee={l:Se.x+Le.borderwidth,t:Se.y+Le.borderwidth};Pe.each(function(X,Oe){var Qe=g.select(this);Qe.call(L,Le,X,xe).call(Re,Le,Se),Qe.on("click",function(){g.event.defaultPrevented||(X.execute&&(X.args2&&Le.active===Oe?(P(xe,Le,X,ge,ye,Ae,-1),s.executeAPICommand(xe,X.method,X.args2)):(P(xe,Le,X,ge,ye,Ae,Oe),s.executeAPICommand(xe,X.method,X.args))),xe.emit("plotly_buttonclicked",{menu:Le,button:X,active:Le.active}))}),Qe.on("mouseover",function(){Qe.call(Ce)}),Qe.on("mouseout",function(){Qe.call(he,Le),Pe.call(W,Le)})}),Pe.call(W,Le),vs?(Ee.w=Math.max(Ei.openWidth,Ei.headerWidth),Ee.h=Se.y-Ee.t):(Ee.w=Se.x-Ee.l,Ee.h=Math.max(Ei.openHeight,Ei.headerHeight)),Ee.direction=Le.direction,Ae&&(Pe.size()?F(xe,ge,ye,Ae,Le,Ee):w(Ae))}function F(xe,ge,ye,Ae,Le,ce){var ke=Le.direction,Pe=ke==="up"||ke==="down",tt=Le._dims,Ke=Le.active,nt,yi,Ei;if(Pe)for(yi=0,Ei=0;Ei<Ke;Ei++)yi+=tt.heights[Ei]+u.gapButton;else for(nt=0,Ei=0;Ei<Ke;Ei++)nt+=tt.widths[Ei]+u.gapButton;Ae.enable(ce,nt,yi),Ae.hbar&&Ae.hbar.attr("opacity","0").transition().attr("opacity","1"),Ae.vbar&&Ae.vbar.attr("opacity","0").transition().attr("opacity","1")}function w(xe){var ge=!!xe.hbar,ye=!!xe.vbar;ge&&xe.hbar.transition().attr("opacity","0").each("end",function(){ge=!1,ye||xe.disable()}),ye&&xe.vbar.transition().attr("opacity","0").each("end",function(){ye=!1,ge||xe.disable()})}function L(xe,ge,ye,Ae){xe.call(O,ge).call(H,ge,ye,Ae)}function O(xe,ge){var ye=v.ensureSingle(xe,"rect",u.itemRectClassName,function(Ae){Ae.attr({rx:u.rx,ry:u.ry,"shape-rendering":"crispEdges"})});ye.call(h.stroke,ge.bordercolor).call(h.fill,ge.bgcolor).style("stroke-width",ge.borderwidth+"px")}function H(xe,ge,ye,Ae){var Le=v.ensureSingle(xe,"text",u.itemTextClassName,function(Pe){Pe.attr({"text-anchor":"start","data-notex":1})}),ce=ye.label,ke=Ae._fullLayout._meta;ke&&(ce=v.templateString(ce,ke)),Le.call(x.font,ge.font).text(ce).call(y.convertToTspans,Ae)}function W(xe,ge){var ye=ge.active;xe.each(function(Ae,Le){var ce=g.select(this);Le===ye&&ge.showactive&&ce.select("rect."+u.itemRectClassName).call(h.fill,u.activeColor)})}function Ce(xe){xe.select("rect."+u.itemRectClassName).call(h.fill,u.hoverColor)}function he(xe,ge){xe.select("rect."+u.itemRectClassName).call(h.fill,ge.bgcolor)}function le(xe,ge){var ye=ge._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},Ae=x.tester.selectAll("g."+u.dropdownButtonClassName).data(v.filterVisible(ge.buttons));Ae.enter().append("g").classed(u.dropdownButtonClassName,!0);var Le=["up","down"].indexOf(ge.direction)!==-1;Ae.each(function(nt,yi){var Ei=g.select(this);Ei.call(L,ge,nt,xe);var vs=Ei.select("."+u.itemTextClassName),Se=vs.node()&&x.bBox(vs.node()).width,Ee=Math.max(Se+u.textPadX,u.minWidth),X=ge.font.size*T,Oe=y.lineCount(vs),Qe=Math.max(X*Oe,u.minHeight)+u.textOffsetY;Qe=Math.ceil(Qe),Ee=Math.ceil(Ee),ye.widths[yi]=Ee,ye.heights[yi]=Qe,ye.height1=Math.max(ye.height1,Qe),ye.width1=Math.max(ye.width1,Ee),Le?(ye.totalWidth=Math.max(ye.totalWidth,Ee),ye.openWidth=ye.totalWidth,ye.totalHeight+=Qe+u.gapButton,ye.openHeight+=Qe+u.gapButton):(ye.totalWidth+=Ee+u.gapButton,ye.openWidth+=Ee+u.gapButton,ye.totalHeight=Math.max(ye.totalHeight,Qe),ye.openHeight=ye.totalHeight)}),Le?ye.totalHeight-=u.gapButton:ye.totalWidth-=u.gapButton,ye.headerWidth=ye.width1+u.arrowPadX,ye.headerHeight=ye.height1,ge.type==="dropdown"&&(Le?(ye.width1+=u.arrowPadX,ye.totalHeight=ye.height1):ye.totalWidth=ye.width1,ye.totalWidth+=u.arrowPadX),Ae.remove();var ce=ye.totalWidth+ge.pad.l+ge.pad.r,ke=ye.totalHeight+ge.pad.t+ge.pad.b,Pe=xe._fullLayout._size;ye.lx=Pe.l+Pe.w*ge.x,ye.ly=Pe.t+Pe.h*(1-ge.y);var tt="left";v.isRightAnchor(ge)&&(ye.lx-=ce,tt="right"),v.isCenterAnchor(ge)&&(ye.lx-=ce/2,tt="center");var Ke="top";v.isBottomAnchor(ge)&&(ye.ly-=ke,Ke="bottom"),v.isMiddleAnchor(ge)&&(ye.ly-=ke/2,Ke="middle"),ye.totalWidth=Math.ceil(ye.totalWidth),ye.totalHeight=Math.ceil(ye.totalHeight),ye.lx=Math.round(ye.lx),ye.ly=Math.round(ye.ly),s.autoMargin(xe,Y(ge),{x:ge.x,y:ge.y,l:ce*({right:1,center:.5}[tt]||0),r:ce*({left:1,center:.5}[tt]||0),b:ke*({top:1,middle:.5}[Ke]||0),t:ke*({bottom:1,middle:.5}[Ke]||0)})}function Y(xe){return u.autoMarginIdRoot+xe._index}function Re(xe,ge,ye,Ae){Ae=Ae||{};var Le=xe.select("."+u.itemRectClassName),ce=xe.select("."+u.itemTextClassName),ke=ge.borderwidth,Pe=ye.index,tt=ge._dims;x.setTranslate(xe,ke+ye.x,ke+ye.y);var Ke=["up","down"].indexOf(ge.direction)!==-1,nt=Ae.height||(Ke?tt.heights[Pe]:tt.height1);Le.attr({x:0,y:0,width:Ae.width||(Ke?tt.width1:tt.widths[Pe]),height:nt});var yi=ge.font.size*T,Ei=y.lineCount(ce),vs=(Ei-1)*yi/2;y.positionText(ce,u.textOffsetX,nt/2-vs+u.textOffsetY),Ke?ye.y+=tt.heights[Pe]+ye.yPad:ye.x+=tt.widths[Pe]+ye.xPad,ye.index++}function fe(xe,ge){xe.attr(u.menuIndexAttrName,ge||"-1").selectAll("g."+u.dropdownButtonClassName).remove()}}),bb=t((me,ue)=>{var g=z2();ue.exports={moduleType:"component",name:g.name,layoutAttributes:bx(),supplyLayoutDefaults:dx(),draw:hx()}}),n2=t((me,ue)=>{ue.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}}),Vx=t((me,ue)=>{var g=Xe(),s=tm(),h=Fe().extendDeepAll,x=vm().overrideAll,v=qm(),y=Nm().templatedArray,b=n2(),T=y("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ue.exports=x(y("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:T,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:h(s({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:v.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:g({})},font:g({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")}),w_=t((me,ue)=>{var g=Z(),s=Ye(),h=Vx(),x=n2(),v=x.name,y=h.steps;ue.exports=function(u,k){s(u,k,{name:v,handleItemDefaults:b})};function b(u,k,M){function D(O,H){return g.coerce(u,k,h,O,H)}for(var B=s(u,k,{name:"steps",handleItemDefaults:T}),P=0,N=0;N<B.length;N++)B[N].visible&&P++;var z;if(P<2?z=k.visible=!1:z=D("visible"),!!z){k._stepCount=P;var F=k._visibleSteps=g.filterVisible(B),w=D("active");(B[w]||{}).visible||(k.active=F[0]._index),D("x"),D("y"),g.noneOrAll(u,k,["x","y"]),D("xanchor"),D("yanchor"),D("len"),D("lenmode"),D("pad.t"),D("pad.r"),D("pad.b"),D("pad.l"),g.coerceFont(D,"font",M.font);var L=D("currentvalue.visible");L&&(D("currentvalue.xanchor"),D("currentvalue.prefix"),D("currentvalue.suffix"),D("currentvalue.offset"),g.coerceFont(D,"currentvalue.font",k.font)),D("transition.duration"),D("transition.easing"),D("bgcolor"),D("activebgcolor"),D("bordercolor"),D("borderwidth"),D("ticklen"),D("tickwidth"),D("tickcolor"),D("minorticklen")}}function T(u,k){function M(P,N){return g.coerce(u,k,y,P,N)}var D;if(u.method!=="skip"&&!Array.isArray(u.args)?D=k.visible=!1:D=M("visible"),D){M("method"),M("args");var B=M("label","step-"+k._index);M("value",B),M("execute")}}}),qx=t((me,ue)=>{var g=c(),s=vg(),h=_r(),x=D0(),v=Z(),y=v.strTranslate,b=kg(),T=Nm().arrayEditor,u=n2(),k=Q1(),M=k.LINE_SPACING,D=k.FROM_TL,B=k.FROM_BR;ue.exports=function(Le){var ce=Le._context.staticPlot,ke=Le._fullLayout,Pe=N(ke,Le),tt=ke._infolayer.selectAll("g."+u.containerClassName).data(Pe.length>0?[0]:[]);tt.enter().append("g").classed(u.containerClassName,!0).style("cursor",ce?null:"ew-resize");function Ke(vs){vs._commandObserver&&(vs._commandObserver.remove(),delete vs._commandObserver),s.autoMargin(Le,P(vs))}if(tt.exit().each(function(){g.select(this).selectAll("g."+u.groupClassName).each(Ke)}).remove(),Pe.length!==0){var nt=tt.selectAll("g."+u.groupClassName).data(Pe,z);nt.enter().append("g").classed(u.groupClassName,!0),nt.exit().each(Ke).remove();for(var yi=0;yi<Pe.length;yi++){var Ei=Pe[yi];F(Le,Ei)}nt.each(function(vs){var Se=g.select(this);Re(vs),s.manageCommandObserver(Le,vs,vs._visibleSteps,function(Ee){var X=Se.data()[0];X.active!==Ee.index&&(X._dragging||he(Le,Se,X,Ee.index,!1,!0))}),w(Le,g.select(this),vs)})}};function P(Le){return u.autoMarginIdRoot+Le._index}function N(Le,ce){for(var ke=Le[u.name],Pe=[],tt=0;tt<ke.length;tt++){var Ke=ke[tt];Ke.visible&&(Ke._gd=ce,Pe.push(Ke))}return Pe}function z(Le){return Le._index}function F(Le,ce){var ke=x.tester.selectAll("g."+u.labelGroupClass).data(ce._visibleSteps);ke.enter().append("g").classed(u.labelGroupClass,!0);var Pe=0,tt=0;ke.each(function(Qe){var pe=g.select(this),q=H(pe,{step:Qe},ce),ae=q.node();if(ae){var ve=x.bBox(ae);tt=Math.max(tt,ve.height),Pe=Math.max(Pe,ve.width)}}),ke.remove();var Ke=ce._dims={};Ke.inputAreaWidth=Math.max(u.railWidth,u.gripHeight);var nt=Le._fullLayout._size;Ke.lx=nt.l+nt.w*ce.x,Ke.ly=nt.t+nt.h*(1-ce.y),ce.lenmode==="fraction"?Ke.outerLength=Math.round(nt.w*ce.len):Ke.outerLength=ce.len,Ke.inputAreaStart=0,Ke.inputAreaLength=Math.round(Ke.outerLength-ce.pad.l-ce.pad.r);var yi=Ke.inputAreaLength-2*u.stepInset,Ei=yi/(ce._stepCount-1),vs=Pe+u.labelPadding;if(Ke.labelStride=Math.max(1,Math.ceil(vs/Ei)),Ke.labelHeight=tt,Ke.currentValueMaxWidth=0,Ke.currentValueHeight=0,Ke.currentValueTotalHeight=0,Ke.currentValueMaxLines=1,ce.currentvalue.visible){var Se=x.tester.append("g");ke.each(function(Qe){var pe=L(Se,ce,Qe.label),q=pe.node()&&x.bBox(pe.node())||{width:0,height:0},ae=b.lineCount(pe);Ke.currentValueMaxWidth=Math.max(Ke.currentValueMaxWidth,Math.ceil(q.width)),Ke.currentValueHeight=Math.max(Ke.currentValueHeight,Math.ceil(q.height)),Ke.currentValueMaxLines=Math.max(Ke.currentValueMaxLines,ae)}),Ke.currentValueTotalHeight=Ke.currentValueHeight+ce.currentvalue.offset,Se.remove()}Ke.height=Ke.currentValueTotalHeight+u.tickOffset+ce.ticklen+u.labelOffset+Ke.labelHeight+ce.pad.t+ce.pad.b;var Ee="left";v.isRightAnchor(ce)&&(Ke.lx-=Ke.outerLength,Ee="right"),v.isCenterAnchor(ce)&&(Ke.lx-=Ke.outerLength/2,Ee="center");var X="top";v.isBottomAnchor(ce)&&(Ke.ly-=Ke.height,X="bottom"),v.isMiddleAnchor(ce)&&(Ke.ly-=Ke.height/2,X="middle"),Ke.outerLength=Math.ceil(Ke.outerLength),Ke.height=Math.ceil(Ke.height),Ke.lx=Math.round(Ke.lx),Ke.ly=Math.round(Ke.ly);var Oe={y:ce.y,b:Ke.height*B[X],t:Ke.height*D[X]};ce.lenmode==="fraction"?(Oe.l=0,Oe.xl=ce.x-ce.len*D[Ee],Oe.r=0,Oe.xr=ce.x+ce.len*B[Ee]):(Oe.x=ce.x,Oe.l=Ke.outerLength*D[Ee],Oe.r=Ke.outerLength*B[Ee]),s.autoMargin(Le,P(ce),Oe)}function w(Le,ce,ke){(ke.steps[ke.active]||{}).visible||(ke.active=ke._visibleSteps[0]._index),ce.call(L,ke).call(Ae,ke).call(W,ke).call(Y,ke).call(ye,Le,ke).call(O,Le,ke);var Pe=ke._dims;x.setTranslate(ce,Pe.lx+ke.pad.l,Pe.ly+ke.pad.t),ce.call(fe,ke,!1),ce.call(L,ke)}function L(Le,ce,ke){if(ce.currentvalue.visible){var Pe=ce._dims,tt,Ke;switch(ce.currentvalue.xanchor){case"right":tt=Pe.inputAreaLength-u.currentValueInset-Pe.currentValueMaxWidth,Ke="left";break;case"center":tt=Pe.inputAreaLength*.5,Ke="middle";break;default:tt=u.currentValueInset,Ke="left"}var nt=v.ensureSingle(Le,"text",u.labelClass,function(X){X.attr({"text-anchor":Ke,"data-notex":1})}),yi=ce.currentvalue.prefix?ce.currentvalue.prefix:"";if(typeof ke=="string")yi+=ke;else{var Ei=ce.steps[ce.active].label,vs=ce._gd._fullLayout._meta;vs&&(Ei=v.templateString(Ei,vs)),yi+=Ei}ce.currentvalue.suffix&&(yi+=ce.currentvalue.suffix),nt.call(x.font,ce.currentvalue.font).text(yi).call(b.convertToTspans,ce._gd);var Se=b.lineCount(nt),Ee=(Pe.currentValueMaxLines+1-Se)*ce.currentvalue.font.size*M;return b.positionText(nt,tt,Ee),nt}}function O(Le,ce,ke){var Pe=v.ensureSingle(Le,"rect",u.gripRectClass,function(tt){tt.call(le,ce,Le,ke).style("pointer-events","all")});Pe.attr({width:u.gripWidth,height:u.gripHeight,rx:u.gripRadius,ry:u.gripRadius}).call(h.stroke,ke.bordercolor).call(h.fill,ke.bgcolor).style("stroke-width",ke.borderwidth+"px")}function H(Le,ce,ke){var Pe=v.ensureSingle(Le,"text",u.labelClass,function(nt){nt.attr({"text-anchor":"middle","data-notex":1})}),tt=ce.step.label,Ke=ke._gd._fullLayout._meta;return Ke&&(tt=v.templateString(tt,Ke)),Pe.call(x.font,ke.font).text(tt).call(b.convertToTspans,ke._gd),Pe}function W(Le,ce){var ke=v.ensureSingle(Le,"g",u.labelsClass),Pe=ce._dims,tt=ke.selectAll("g."+u.labelGroupClass).data(Pe.labelSteps);tt.enter().append("g").classed(u.labelGroupClass,!0),tt.exit().remove(),tt.each(function(Ke){var nt=g.select(this);nt.call(H,Ke,ce),x.setTranslate(nt,xe(ce,Ke.fraction),u.tickOffset+ce.ticklen+ce.font.size*M+u.labelOffset+Pe.currentValueTotalHeight)})}function Ce(Le,ce,ke,Pe,tt){var Ke=Math.round(Pe*(ke._stepCount-1)),nt=ke._visibleSteps[Ke]._index;nt!==ke.active&&he(Le,ce,ke,nt,!0,tt)}function he(Le,ce,ke,Pe,tt,Ke){var nt=ke.active;ke.active=Pe,T(Le.layout,u.name,ke).applyUpdate("active",Pe);var yi=ke.steps[ke.active];ce.call(fe,ke,Ke),ce.call(L,ke),Le.emit("plotly_sliderchange",{slider:ke,step:ke.steps[ke.active],interaction:tt,previousActive:nt}),yi&&yi.method&&tt&&(ce._nextMethod?(ce._nextMethod.step=yi,ce._nextMethod.doCallback=tt,ce._nextMethod.doTransition=Ke):(ce._nextMethod={step:yi,doCallback:tt,doTransition:Ke},ce._nextMethodRaf=window.requestAnimationFrame(function(){var Ei=ce._nextMethod.step;Ei.method&&(Ei.execute&&s.executeAPICommand(Le,Ei.method,Ei.args),ce._nextMethod=null,ce._nextMethodRaf=null)})))}function le(Le,ce,ke){if(ce._context.staticPlot)return;var Pe=ke.node(),tt=g.select(ce);function Ke(){return ke.data()[0]}function nt(){var yi=Ke();ce.emit("plotly_sliderstart",{slider:yi});var Ei=ke.select("."+u.gripRectClass);g.event.stopPropagation(),g.event.preventDefault(),Ei.call(h.fill,yi.activebgcolor);var vs=ge(yi,g.mouse(Pe)[0]);Ce(ce,ke,yi,vs,!0),yi._dragging=!0;function Se(){var X=Ke(),Oe=ge(X,g.mouse(Pe)[0]);Ce(ce,ke,X,Oe,!1)}tt.on("mousemove",Se),tt.on("touchmove",Se);function Ee(){var X=Ke();X._dragging=!1,Ei.call(h.fill,X.bgcolor),tt.on("mouseup",null),tt.on("mousemove",null),tt.on("touchend",null),tt.on("touchmove",null),ce.emit("plotly_sliderend",{slider:X,step:X.steps[X.active]})}tt.on("mouseup",Ee),tt.on("touchend",Ee)}Le.on("mousedown",nt),Le.on("touchstart",nt)}function Y(Le,ce){var ke=Le.selectAll("rect."+u.tickRectClass).data(ce._visibleSteps),Pe=ce._dims;ke.enter().append("rect").classed(u.tickRectClass,!0),ke.exit().remove(),ke.attr({width:ce.tickwidth+"px","shape-rendering":"crispEdges"}),ke.each(function(tt,Ke){var nt=Ke%Pe.labelStride===0,yi=g.select(this);yi.attr({height:nt?ce.ticklen:ce.minorticklen}).call(h.fill,ce.tickcolor),x.setTranslate(yi,xe(ce,Ke/(ce._stepCount-1))-.5*ce.tickwidth,(nt?u.tickOffset:u.minorTickOffset)+Pe.currentValueTotalHeight)})}function Re(Le){var ce=Le._dims;ce.labelSteps=[];for(var ke=Le._stepCount,Pe=0;Pe<ke;Pe+=ce.labelStride)ce.labelSteps.push({fraction:Pe/(ke-1),step:Le._visibleSteps[Pe]})}function fe(Le,ce,ke){for(var Pe=Le.select("rect."+u.gripRectClass),tt=0,Ke=0;Ke<ce._stepCount;Ke++)if(ce._visibleSteps[Ke]._index===ce.active){tt=Ke;break}var nt=xe(ce,tt/(ce._stepCount-1));if(!ce._invokingCommand){var yi=Pe;ke&&ce.transition.duration>0&&(yi=yi.transition().duration(ce.transition.duration).ease(ce.transition.easing)),yi.attr("transform",y(nt-u.gripWidth*.5,ce._dims.currentValueTotalHeight))}}function xe(Le,ce){var ke=Le._dims;return ke.inputAreaStart+u.stepInset+(ke.inputAreaLength-2*u.stepInset)*Math.min(1,Math.max(0,ce))}function ge(Le,ce){var ke=Le._dims;return Math.min(1,Math.max(0,(ce-u.stepInset-ke.inputAreaStart)/(ke.inputAreaLength-2*u.stepInset-2*ke.inputAreaStart)))}function ye(Le,ce,ke){var Pe=ke._dims,tt=v.ensureSingle(Le,"rect",u.railTouchRectClass,function(Ke){Ke.call(le,ce,Le,ke).style("pointer-events","all")});tt.attr({width:Pe.inputAreaLength,height:Math.max(Pe.inputAreaWidth,u.tickOffset+ke.ticklen+Pe.labelHeight)}).call(h.fill,ke.bgcolor).attr("opacity",0),x.setTranslate(tt,0,Pe.currentValueTotalHeight)}function Ae(Le,ce){var ke=ce._dims,Pe=ke.inputAreaLength-u.railInset*2,tt=v.ensureSingle(Le,"rect",u.railRectClass);tt.attr({width:Pe,height:u.railWidth,rx:u.railRadius,ry:u.railRadius,"shape-rendering":"crispEdges"}).call(h.stroke,ce.bordercolor).call(h.fill,ce.bgcolor).style("stroke-width",ce.borderwidth+"px"),x.setTranslate(tt,u.railInset,(ke.inputAreaWidth-u.railWidth)*.5+ke.currentValueTotalHeight)}}),_y=t((me,ue)=>{var g=n2();ue.exports={moduleType:"component",name:g.name,layoutAttributes:Vx(),supplyLayoutDefaults:w_(),draw:qx()}}),a2=t((me,ue)=>{var g=Sp();ue.exports={bgcolor:{valType:"color",dflt:g.background,editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}}),wb=t((me,ue)=>{ue.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}}),Mb=t((me,ue)=>{ue.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}}),j5=t(me=>{var ue=N1(),g=kg(),s=Mb(),h=Q1().LINE_SPACING,x=s.name;function v(y){var b=y&&y[x];return b&&b.visible}me.isVisible=v,me.makeData=function(y){for(var b=ue.list({_fullLayout:y},"x",!0),T=y.margin,u=[],k=0;k<b.length;k++){var M=b[k];if(v(M)){u.push(M);var D=M[x];D._id=x+M._id,D._height=(y.height-T.b-T.t)*D.thickness,D._offsetShift=Math.floor(D.borderwidth/2)}}y._rangeSliderData=u},me.autoMarginOpts=function(y,b){var T=y._fullLayout,u=b[x],k=b._id.charAt(0),M=0,D=0;if(b.side==="bottom"&&(M=b._depth,b.title.text!==T._dfltTitle[k])){D=1.5*b.title.font.size+10+u._offsetShift;var B=(b.title.text.match(g.BR_TAG_ALL)||[]).length;D+=B*b.title.font.size*h}return{x:0,y:b._counterDomainMin,l:0,r:0,t:0,b:u._height+M+Math.max(T.margin.b,D),pad:s.extraPad+u._offsetShift*2}}}),H5=t((me,ue)=>{var g=Z(),s=Nm(),h=N1(),x=a2(),v=wb();ue.exports=function(y,b,T){var u=y[T],k=b[T];if(!(u.rangeslider||b._requestRangeslider[k._id]))return;g.isPlainObject(u.rangeslider)||(u.rangeslider={});var M=u.rangeslider,D=s.newContainer(k,"rangeslider");function B(Y,Re){return g.coerce(M,D,x,Y,Re)}var P,N;function z(Y,Re){return g.coerce(P,N,v,Y,Re)}var F=B("visible");if(F){B("bgcolor",b.plot_bgcolor),B("bordercolor"),B("borderwidth"),B("thickness"),B("autorange",!k.isValidRange(M.range)),B("range");var w=b._subplots;if(w)for(var L=w.cartesian.filter(function(Y){return Y.substr(0,Y.indexOf("y"))===h.name2id(T)}).map(function(Y){return Y.substr(Y.indexOf("y"),Y.length)}),O=g.simpleMap(L,h.id2name),H=0;H<O.length;H++){var W=O[H];P=M[W]||{},N=s.newContainer(D,W,"yaxis");var Ce=b[W],he;P.range&&Ce.isValidRange(P.range)&&(he="fixed");var le=z("rangemode",he);le!=="match"&&z("range",Ce.range.slice())}D._input=M}}}),ly=t((me,ue)=>{var g=N1().list,s=ym().getAutoRange,h=Mb();ue.exports=function(x){for(var v=g(x,"x",!0),y=0;y<v.length;y++){var b=v[y],T=b[h.name];T&&T.visible&&T.autorange&&(T._input.autorange=!0,T._input.range=T.range=s(x,b))}}}),Sb=t((me,ue)=>{var g=c(),s=l1(),h=vg(),x=Z(),v=x.strTranslate,y=D0(),b=_r(),T=O0(),u=xx(),k=N1(),M=Om(),D=D1(),B=Mb();ue.exports=function(le){for(var Y=le._fullLayout,Re=Y._rangeSliderData,fe=0;fe<Re.length;fe++){var xe=Re[fe][B.name];xe._clipId=xe._id+"-"+Y._uid}function ge(Ae){return Ae._name}var ye=Y._infolayer.selectAll("g."+B.containerClassName).data(Re,ge);ye.exit().each(function(Ae){var Le=Ae[B.name];Y._topdefs.select("#"+Le._clipId).remove()}).remove(),Re.length!==0&&(ye.enter().append("g").classed(B.containerClassName,!0).attr("pointer-events","all"),ye.each(function(Ae){var Le=g.select(this),ce=Ae[B.name],ke=Y[k.id2name(Ae.anchor)],Pe=ce[k.id2name(Ae.anchor)];if(ce.range){var tt=x.simpleMap(ce.range,Ae.r2l),Ke=x.simpleMap(Ae.range,Ae.r2l),nt;Ke[0]<Ke[1]?nt=[Math.min(tt[0],Ke[0]),Math.max(tt[1],Ke[1])]:nt=[Math.max(tt[0],Ke[0]),Math.min(tt[1],Ke[1])],ce.range=ce._input.range=x.simpleMap(nt,Ae.l2r)}Ae.cleanRange("rangeslider.range");var yi=Y._size,Ei=Ae.domain;ce._width=yi.w*(Ei[1]-Ei[0]);var vs=Math.round(yi.l+yi.w*Ei[0]),Se=Math.round(yi.t+yi.h*(1-Ae._counterDomainMin)+(Ae.side==="bottom"?Ae._depth:0)+ce._offsetShift+B.extraPad);Le.attr("transform",v(vs,Se)),ce._rl=x.simpleMap(ce.range,Ae.r2l);var Ee=ce._rl[0],X=ce._rl[1],Oe=X-Ee;if(ce.p2d=function(Ol){return Ol/ce._width*Oe+Ee},ce.d2p=function(Ol){return(Ol-Ee)/Oe*ce._width},Ae.rangebreaks){var Qe=Ae.locateBreaks(Ee,X);if(Qe.length){var pe,q,ae=0;for(pe=0;pe<Qe.length;pe++)q=Qe[pe],ae+=q.max-q.min;var ve=ce._width/(X-Ee-ae),Te=[-ve*Ee];for(pe=0;pe<Qe.length;pe++)q=Qe[pe],Te.push(Te[Te.length-1]-ve*(q.max-q.min));for(ce.d2p=function(Ol){for(var Xl=Te[0],Pp=0;Pp<Qe.length;Pp++){var t0=Qe[Pp];if(Ol>=t0.max)Xl=Te[Pp+1];else if(Ol<t0.min)break}return Xl+ve*Ol},pe=0;pe<Qe.length;pe++)q=Qe[pe],q.pmin=ce.d2p(q.min),q.pmax=ce.d2p(q.max);ce.p2d=function(Ol){for(var Xl=Te[0],Pp=0;Pp<Qe.length;Pp++){var t0=Qe[Pp];if(Ol>=t0.pmax)Xl=Te[Pp+1];else if(Ol<t0.pmin)break}return(Ol-Xl)/ve}}}if(Pe.rangemode!=="match"){var et=ke.r2l(Pe.range[0]),bt=ke.r2l(Pe.range[1]),dr=bt-et;ce.d2pOppAxis=function(Ol){return(Ol-et)/dr*ce._height}}Le.call(w,le,Ae,ce).call(L,le,Ae,ce).call(O,le,Ae,ce).call(W,le,Ae,ce,Pe).call(Ce,le,Ae,ce).call(he,le,Ae,ce),N(Le,le,Ae,ce),F(Le,le,Ae,ce,ke,Pe),Ae.side==="bottom"&&T.draw(le,Ae._id+"title",{propContainer:Ae,propName:Ae._name+".title.text",placeholder:Y._dfltTitle.x,attributes:{x:Ae._offset+Ae._length/2,y:Se+ce._height+ce._offsetShift+10+1.5*Ae.title.font.size,"text-anchor":"middle"}})}))};function P(le){return typeof le.clientX=="number"?le.clientX:le.touches&&le.touches.length>0?le.touches[0].clientX:0}function N(le,Y,Re,fe){if(Y._context.staticPlot)return;var xe=le.select("rect."+B.slideBoxClassName).node(),ge=le.select("rect."+B.grabAreaMinClassName).node(),ye=le.select("rect."+B.grabAreaMaxClassName).node();function Ae(){var Le=g.event,ce=Le.target,ke=P(Le),Pe=ke-le.node().getBoundingClientRect().left,tt=fe.d2p(Re._rl[0]),Ke=fe.d2p(Re._rl[1]),nt=M.coverSlip();this.addEventListener("touchmove",yi),this.addEventListener("touchend",Ei),nt.addEventListener("mousemove",yi),nt.addEventListener("mouseup",Ei);function yi(vs){var Se=P(vs),Ee=+Se-ke,X,Oe,Qe;switch(ce){case xe:if(Qe="ew-resize",tt+Ee>Re._length||Ke+Ee<0)return;X=tt+Ee,Oe=Ke+Ee;break;case ge:if(Qe="col-resize",tt+Ee>Re._length)return;X=tt+Ee,Oe=Ke;break;case ye:if(Qe="col-resize",Ke+Ee<0)return;X=tt,Oe=Ke+Ee;break;default:Qe="ew-resize",X=Pe,Oe=Pe+Ee;break}if(Oe<X){var pe=Oe;Oe=X,X=pe}fe._pixelMin=X,fe._pixelMax=Oe,D(g.select(nt),Qe),z(le,Y,Re,fe)}function Ei(){nt.removeEventListener("mousemove",yi),nt.removeEventListener("mouseup",Ei),this.removeEventListener("touchmove",yi),this.removeEventListener("touchend",Ei),x.removeElement(nt)}}le.on("mousedown",Ae),le.on("touchstart",Ae)}function z(le,Y,Re,fe){function xe(Ae){return Re.l2r(x.constrain(Ae,fe._rl[0],fe._rl[1]))}var ge=xe(fe.p2d(fe._pixelMin)),ye=xe(fe.p2d(fe._pixelMax));window.requestAnimationFrame(function(){s.call("_guiRelayout",Y,Re._name+".range",[ge,ye])})}function F(le,Y,Re,fe,xe,ge){var ye=B.handleWidth/2;function Ae(vs){return x.constrain(vs,0,fe._width)}function Le(vs){return x.constrain(vs,0,fe._height)}function ce(vs){return x.constrain(vs,-ye,fe._width+ye)}var ke=Ae(fe.d2p(Re._rl[0])),Pe=Ae(fe.d2p(Re._rl[1]));if(le.select("rect."+B.slideBoxClassName).attr("x",ke).attr("width",Pe-ke),le.select("rect."+B.maskMinClassName).attr("width",ke),le.select("rect."+B.maskMaxClassName).attr("x",Pe).attr("width",fe._width-Pe),ge.rangemode!=="match"){var tt=fe._height-Le(fe.d2pOppAxis(xe._rl[1])),Ke=fe._height-Le(fe.d2pOppAxis(xe._rl[0]));le.select("rect."+B.maskMinOppAxisClassName).attr("x",ke).attr("height",tt).attr("width",Pe-ke),le.select("rect."+B.maskMaxOppAxisClassName).attr("x",ke).attr("y",Ke).attr("height",fe._height-Ke).attr("width",Pe-ke),le.select("rect."+B.slideBoxClassName).attr("y",tt).attr("height",Ke-tt)}var nt=.5,yi=Math.round(ce(ke-ye))-nt,Ei=Math.round(ce(Pe-ye))+nt;le.select("g."+B.grabberMinClassName).attr("transform",v(yi,nt)),le.select("g."+B.grabberMaxClassName).attr("transform",v(Ei,nt))}function w(le,Y,Re,fe){var xe=x.ensureSingle(le,"rect",B.bgClassName,function(Le){Le.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),ge=fe.borderwidth%2===0?fe.borderwidth:fe.borderwidth-1,ye=-fe._offsetShift,Ae=y.crispRound(Y,fe.borderwidth);xe.attr({width:fe._width+ge,height:fe._height+ge,transform:v(ye,ye),"stroke-width":Ae}).call(b.stroke,fe.bordercolor).call(b.fill,fe.bgcolor)}function L(le,Y,Re,fe){var xe=Y._fullLayout,ge=x.ensureSingleById(xe._topdefs,"clipPath",fe._clipId,function(ye){ye.append("rect").attr({x:0,y:0})});ge.select("rect").attr({width:fe._width,height:fe._height})}function O(le,Y,Re,fe){var xe=Y.calcdata,ge=le.selectAll("g."+B.rangePlotClassName).data(Re._subplotsWith,x.identity);ge.enter().append("g").attr("class",function(Ae){return B.rangePlotClassName+" "+Ae}).call(y.setClipUrl,fe._clipId,Y),ge.order(),ge.exit().remove();var ye;ge.each(function(Ae,Le){var ce=g.select(this),ke=Le===0,Pe=k.getFromId(Y,Ae,"y"),tt=Pe._name,Ke=fe[tt],nt={data:[],layout:{xaxis:{type:Re.type,domain:[0,1],range:fe.range.slice(),calendar:Re.calendar},width:fe._width,height:fe._height,margin:{t:0,b:0,l:0,r:0}},_context:Y._context};Re.rangebreaks&&(nt.layout.xaxis.rangebreaks=Re.rangebreaks),nt.layout[tt]={type:Pe.type,domain:[0,1],range:Ke.rangemode!=="match"?Ke.range.slice():Pe.range.slice(),calendar:Pe.calendar},Pe.rangebreaks&&(nt.layout[tt].rangebreaks=Pe.rangebreaks),h.supplyDefaults(nt);var yi=nt._fullLayout.xaxis,Ei=nt._fullLayout[tt];yi.clearCalc(),yi.setScale(),Ei.clearCalc(),Ei.setScale();var vs={id:Ae,plotgroup:ce,xaxis:yi,yaxis:Ei,isRangePlot:!0};ke?ye=vs:(vs.mainplot="xy",vs.mainplotinfo=ye),u.rangePlot(Y,vs,H(xe,Ae))})}function H(le,Y){for(var Re=[],fe=0;fe<le.length;fe++){var xe=le[fe],ge=xe[0].trace;ge.xaxis+ge.yaxis===Y&&Re.push(xe)}return Re}function W(le,Y,Re,fe,xe){var ge=x.ensureSingle(le,"rect",B.maskMinClassName,function(ce){ce.attr({x:0,y:0,"shape-rendering":"crispEdges"})});ge.attr("height",fe._height).call(b.fill,B.maskColor);var ye=x.ensureSingle(le,"rect",B.maskMaxClassName,function(ce){ce.attr({y:0,"shape-rendering":"crispEdges"})});if(ye.attr("height",fe._height).call(b.fill,B.maskColor),xe.rangemode!=="match"){var Ae=x.ensureSingle(le,"rect",B.maskMinOppAxisClassName,function(ce){ce.attr({y:0,"shape-rendering":"crispEdges"})});Ae.attr("width",fe._width).call(b.fill,B.maskOppAxisColor);var Le=x.ensureSingle(le,"rect",B.maskMaxOppAxisClassName,function(ce){ce.attr({y:0,"shape-rendering":"crispEdges"})});Le.attr("width",fe._width).style("border-top",B.maskOppBorder).call(b.fill,B.maskOppAxisColor)}}function Ce(le,Y,Re,fe){if(!Y._context.staticPlot){var xe=x.ensureSingle(le,"rect",B.slideBoxClassName,function(ge){ge.attr({y:0,cursor:B.slideBoxCursor,"shape-rendering":"crispEdges"})});xe.attr({height:fe._height,fill:B.slideBoxFill})}}function he(le,Y,Re,fe){var xe=x.ensureSingle(le,"g",B.grabberMinClassName),ge=x.ensureSingle(le,"g",B.grabberMaxClassName),ye={x:0,width:B.handleWidth,rx:B.handleRadius,fill:b.background,stroke:b.defaultLine,"stroke-width":B.handleStrokeWidth,"shape-rendering":"crispEdges"},Ae={y:Math.round(fe._height/4),height:Math.round(fe._height/2)},Le=x.ensureSingle(xe,"rect",B.handleMinClassName,function(Ke){Ke.attr(ye)});Le.attr(Ae);var ce=x.ensureSingle(ge,"rect",B.handleMaxClassName,function(Ke){Ke.attr(ye)});ce.attr(Ae);var ke={width:B.grabAreaWidth,x:0,y:0,fill:B.grabAreaFill,cursor:Y._context.staticPlot?void 0:B.grabAreaCursor},Pe=x.ensureSingle(xe,"rect",B.grabAreaMinClassName,function(Ke){Ke.attr(ke)});Pe.attr("height",fe._height);var tt=x.ensureSingle(ge,"rect",B.grabAreaMaxClassName,function(Ke){Ke.attr(ke)});tt.attr("height",fe._height)}}),O2=t((me,ue)=>{var g=Z(),s=a2(),h=wb(),x=j5();ue.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:g.extendFlat({},s,{yaxis:h})}}},layoutAttributes:a2(),handleDefaults:H5(),calcAutorange:ly(),draw:Sb(),isVisible:x.isVisible,makeData:x.makeData,autoMarginOpts:x.autoMarginOpts}}),$x=t((me,ue)=>{var g=Xe(),s=Sp(),h=Nm().templatedArray,x=h("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ue.exports={visible:{valType:"boolean",editType:"plot"},buttons:x,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:g({editType:"plot"}),bgcolor:{valType:"color",dflt:s.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}}),M_=t((me,ue)=>{ue.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}}),i2=t((me,ue)=>{var g=Z(),s=_r(),h=Nm(),x=Ye(),v=$x(),y=M_();ue.exports=function(u,k,M,D,B){var P=u.rangeselector||{},N=h.newContainer(k,"rangeselector");function z(H,W){return g.coerce(P,N,v,H,W)}var F=x(P,N,{name:"buttons",handleItemDefaults:b,calendar:B}),w=z("visible",F.length>0);if(w){var L=T(k,M,D);z("x",L[0]),z("y",L[1]),g.noneOrAll(u,k,["x","y"]),z("xanchor"),z("yanchor"),g.coerceFont(z,"font",M.font);var O=z("bgcolor");z("activecolor",s.contrast(O,y.lightAmount,y.darkAmount)),z("bordercolor"),z("borderwidth")}};function b(u,k,M,D){var B=D.calendar;function P(F,w){return g.coerce(u,k,v.buttons,F,w)}var N=P("visible");if(N){var z=P("step");z!=="all"&&(B&&B!=="gregorian"&&(z==="month"||z==="year")?k.stepmode="backward":P("stepmode"),P("count")),P("label")}}function T(u,k,M){for(var D=M.filter(function(z){return k[z].anchor===u._id}),B=0,P=0;P<D.length;P++){var N=k[D[P]].domain;N&&(B=Math.max(N[1],B))}return[u.domain[0],B+y.yPad]}}),o2=t((me,ue)=>{var g=d(),s=Z().titleCase;ue.exports=function(x,v){var y=x._name,b={};if(v.step==="all")b[y+".autorange"]=!0;else{var T=h(x,v);b[y+".range[0]"]=T[0],b[y+".range[1]"]=T[1]}return b};function h(x,v){var y=x.range,b=new Date(x.r2l(y[1])),T=v.step,u=g["utc"+s(T)],k=v.count,M;switch(v.stepmode){case"backward":M=x.l2r(+u.offset(b,-k));break;case"todate":var D=u.offset(b,-k);M=x.l2r(+u.ceil(D));break}var B=y[1];return[M,B]}}),G5=t((me,ue)=>{var g=c(),s=l1(),h=vg(),x=_r(),v=D0(),y=Z(),b=y.strTranslate,T=kg(),u=N1(),k=Q1(),M=k.LINE_SPACING,D=k.FROM_TL,B=k.FROM_BR,P=M_(),N=o2();ue.exports=function(he){var le=he._fullLayout,Y=le._infolayer.selectAll(".rangeselector").data(z(he),F);Y.enter().append("g").classed("rangeselector",!0),Y.exit().remove(),Y.style({cursor:"pointer","pointer-events":"all"}),Y.each(function(Re){var fe=g.select(this),xe=Re,ge=xe.rangeselector,ye=fe.selectAll("g.button").data(y.filterVisible(ge.buttons));ye.enter().append("g").classed("button",!0),ye.exit().remove(),ye.each(function(Ae){var Le=g.select(this),ce=N(xe,Ae);Ae._isActive=w(xe,Ae,ce),Le.call(L,ge,Ae),Le.call(H,ge,Ae,he),Le.on("click",function(){he._dragged||s.call("_guiRelayout",he,ce)}),Le.on("mouseover",function(){Ae._isHovered=!0,Le.call(L,ge,Ae)}),Le.on("mouseout",function(){Ae._isHovered=!1,Le.call(L,ge,Ae)})}),Ce(he,ye,ge,xe._name,fe)})};function z(he){for(var le=u.list(he,"x",!0),Y=[],Re=0;Re<le.length;Re++){var fe=le[Re];fe.rangeselector&&fe.rangeselector.visible&&Y.push(fe)}return Y}function F(he){return he._id}function w(he,le,Y){if(le.step==="all")return he.autorange===!0;var Re=Object.keys(Y);return he.range[0]===Y[Re[0]]&&he.range[1]===Y[Re[1]]}function L(he,le,Y){var Re=y.ensureSingle(he,"rect","selector-rect",function(fe){fe.attr("shape-rendering","crispEdges")});Re.attr({rx:P.rx,ry:P.ry}),Re.call(x.stroke,le.bordercolor).call(x.fill,O(le,Y)).style("stroke-width",le.borderwidth+"px")}function O(he,le){return le._isActive||le._isHovered?he.activecolor:he.bgcolor}function H(he,le,Y,Re){function fe(ge){T.convertToTspans(ge,Re)}var xe=y.ensureSingle(he,"text","selector-text",function(ge){ge.attr("text-anchor","middle")});xe.call(v.font,le.font).text(W(Y,Re._fullLayout._meta)).call(fe)}function W(he,le){return he.label?le?y.templateString(he.label,le):he.label:he.step==="all"?"all":he.count+he.step.charAt(0)}function Ce(he,le,Y,Re,fe){var xe=0,ge=0,ye=Y.borderwidth;le.each(function(){var tt=g.select(this),Ke=tt.select(".selector-text"),nt=Y.font.size*M,yi=Math.max(nt*T.lineCount(Ke),16)+3;ge=Math.max(ge,yi)}),le.each(function(){var tt=g.select(this),Ke=tt.select(".selector-rect"),nt=tt.select(".selector-text"),yi=nt.node()&&v.bBox(nt.node()).width,Ei=Y.font.size*M,vs=T.lineCount(nt),Se=Math.max(yi+10,P.minButtonWidth);tt.attr("transform",b(ye+xe,ye)),Ke.attr({x:0,y:0,width:Se,height:ge}),T.positionText(nt,Se/2,ge/2-(vs-1)*Ei/2+3),xe+=Se+5});var Ae=he._fullLayout._size,Le=Ae.l+Ae.w*Y.x,ce=Ae.t+Ae.h*(1-Y.y),ke="left";y.isRightAnchor(Y)&&(Le-=xe,ke="right"),y.isCenterAnchor(Y)&&(Le-=xe/2,ke="center");var Pe="top";y.isBottomAnchor(Y)&&(ce-=ge,Pe="bottom"),y.isMiddleAnchor(Y)&&(ce-=ge/2,Pe="middle"),xe=Math.ceil(xe),ge=Math.ceil(ge),Le=Math.round(Le),ce=Math.round(ce),h.autoMargin(he,Re+"-range-selector",{x:Y.x,y:Y.y,l:xe*D[ke],r:xe*B[ke],b:ge*B[Pe],t:ge*D[Pe]}),fe.attr("transform",b(Le,ce))}}),N3=t((me,ue)=>{ue.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:$x()}}},layoutAttributes:$x(),handleDefaults:i2(),draw:G5()}}),Tb=t(me=>{var ue=Fe().extendFlat;me.attributes=function(g,s){g=g||{},s=s||{};var h={valType:"info_array",editType:g.editType,items:[{valType:"number",min:0,max:1,editType:g.editType},{valType:"number",min:0,max:1,editType:g.editType}],dflt:[0,1]};g.name&&g.name+"",g.trace,s.description&&""+s.description;var x={x:ue({},h,{}),y:ue({},h,{}),editType:g.editType};return g.noGridCell||(x.row={valType:"integer",min:0,dflt:0,editType:g.editType},x.column={valType:"integer",min:0,dflt:0,editType:g.editType}),x},me.defaults=function(g,s,h,x){var v=x&&x.x||[0,1],y=x&&x.y||[0,1],b=s.grid;if(b){var T=h("domain.column");T!==void 0&&(T<b.columns?v=b._domains.x[T]:delete g.domain.column);var u=h("domain.row");u!==void 0&&(u<b.rows?y=b._domains.y[u]:delete g.domain.row)}var k=h("domain.x",v),M=h("domain.y",y);k[0]<k[1]||(g.domain.x=v.slice()),M[0]<M[1]||(g.domain.y=y.slice())}}),z3=t((me,ue)=>{var g=Z(),s=ne().counter,h=Tb().attributes,x=m1().idRegex,v=Nm(),y={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[s("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:h({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function b(D,B,P){var N=B[P+"axes"],z=Object.keys((D._splomAxes||{})[P]||{});if(Array.isArray(N))return N;if(z.length)return z}function T(D,B){var P=D.grid||{},N=b(B,P,"x"),z=b(B,P,"y");if(!D.grid&&!N&&!z)return;var F=Array.isArray(P.subplots)&&Array.isArray(P.subplots[0]),w=Array.isArray(N),L=Array.isArray(z),O=w&&N!==P.xaxes&&L&&z!==P.yaxes,H,W;F?(H=P.subplots.length,W=P.subplots[0].length):(L&&(H=z.length),w&&(W=N.length));var Ce=v.newContainer(B,"grid");function he(ce,ke){return g.coerce(P,Ce,y,ce,ke)}var le=he("rows",H),Y=he("columns",W);if(!(le*Y>1)){delete B.grid;return}if(!F&&!w&&!L){var Re=he("pattern")==="independent";Re&&(F=!0)}Ce._hasSubplotGrid=F;var fe=he("roworder"),xe=fe==="top to bottom",ge=F?.2:.1,ye=F?.3:.1,Ae,Le;O&&B._splomGridDflt&&(Ae=B._splomGridDflt.xside,Le=B._splomGridDflt.yside),Ce._domains={x:u("x",he,ge,Ae,Y),y:u("y",he,ye,Le,le,xe)}}function u(D,B,P,N,z,F){var w=B(D+"gap",P),L=B("domain."+D);B(D+"side",N);for(var O=new Array(z),H=L[0],W=(L[1]-H)/(z-w),Ce=W*(1-w),he=0;he<z;he++){var le=H+W*he;O[F?z-1-he:he]=[le,le+Ce]}return O}function k(D,B){var P=B.grid;if(!(!P||!P._domains)){var N=D.grid||{},z=B._subplots,F=P._hasSubplotGrid,w=P.rows,L=P.columns,O=P.pattern==="independent",H,W,Ce,he,le,Y,Re,fe=P._axisMap={};if(F){var xe=N.subplots||[];Y=P.subplots=new Array(w);var ge=1;for(H=0;H<w;H++){var ye=Y[H]=new Array(L),Ae=xe[H]||[];for(W=0;W<L;W++)if(O?(le=ge===1?"xy":"x"+ge+"y"+ge,ge++):le=Ae[W],ye[W]="",z.cartesian.indexOf(le)!==-1){if(Re=le.indexOf("y"),Ce=le.slice(0,Re),he=le.slice(Re),fe[Ce]!==void 0&&fe[Ce]!==W||fe[he]!==void 0&&fe[he]!==H)continue;ye[W]=le,fe[Ce]=W,fe[he]=H}}}else{var Le=b(B,N,"x"),ce=b(B,N,"y");P.xaxes=M(Le,z.xaxis,L,fe,"x"),P.yaxes=M(ce,z.yaxis,w,fe,"y")}var ke=P._anchors={},Pe=P.roworder==="top to bottom";for(var tt in fe){var Ke=tt.charAt(0),nt=P[Ke+"side"],yi,Ei,vs;if(nt.length<8)ke[tt]="free";else if(Ke==="x"){if(nt.charAt(0)==="t"===Pe?(yi=0,Ei=1,vs=w):(yi=w-1,Ei=-1,vs=-1),F){var Se=fe[tt];for(H=yi;H!==vs;H+=Ei)if(le=Y[H][Se],!!le&&(Re=le.indexOf("y"),le.slice(0,Re)===tt)){ke[tt]=le.slice(Re);break}}else for(H=yi;H!==vs;H+=Ei)if(he=P.yaxes[H],z.cartesian.indexOf(tt+he)!==-1){ke[tt]=he;break}}else if(nt.charAt(0)==="l"?(yi=0,Ei=1,vs=L):(yi=L-1,Ei=-1,vs=-1),F){var Ee=fe[tt];for(H=yi;H!==vs;H+=Ei)if(le=Y[Ee][H],!!le&&(Re=le.indexOf("y"),le.slice(Re)===tt)){ke[tt]=le.slice(0,Re);break}}else for(H=yi;H!==vs;H+=Ei)if(Ce=P.xaxes[H],z.cartesian.indexOf(Ce+tt)!==-1){ke[tt]=Ce;break}}}}function M(D,B,P,N,z){var F=new Array(P),w;function L(O,H){B.indexOf(H)!==-1&&N[H]===void 0?(F[O]=H,N[H]=O):F[O]=""}if(Array.isArray(D))for(w=0;w<P;w++)L(w,D[w]);else for(L(0,z),w=1;w<P;w++)L(w,z+(w+1));return F}ue.exports={moduleType:"component",name:"grid",schema:{layout:{grid:y}},layoutAttributes:y,sizeDefaults:T,contentDefaults:k}}),Mx=t((me,ue)=>{ue.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}}),Eb=t((me,ue)=>{var g=A(),s=l1(),h=Z(),x=Nm(),v=Mx();ue.exports=function(y,b,T,u){var k="error_"+u.axis,M=x.newContainer(b,k),D=y[k]||{};function B(O,H){return h.coerce(D,M,v,O,H)}var P=D.array!==void 0||D.value!==void 0||D.type==="sqrt",N=B("visible",P);if(N!==!1){var z=B("type","array"in D?"data":"percent"),F=!0;z!=="sqrt"&&(F=B("symmetric",!((z==="data"?"arrayminus":"valueminus")in D))),z==="data"?(B("array"),B("traceref"),F||(B("arrayminus"),B("tracerefminus"))):(z==="percent"||z==="constant")&&(B("value"),F||B("valueminus"));var w="copy_"+u.inherit+"style";if(u.inherit){var L=b["error_"+u.inherit];(L||{}).visible&&B(w,!(D.color||g(D.thickness)||g(D.width)))}(!u.inherit||!M[w])&&(B("color",T),B("thickness"),B("width",s.traceIs(b,"gl3d")?0:4))}}}),P2=t((me,ue)=>{ue.exports=function(s){var h=s.type,x=s.symmetric;if(h==="data"){var v=s.array||[];if(x)return function(u,k){var M=+v[k];return[M,M]};var y=s.arrayminus||[];return function(u,k){var M=+v[k],D=+y[k];return!isNaN(M)||!isNaN(D)?[D||0,M||0]:[NaN,NaN]}}else{var b=g(h,s.value),T=g(h,s.valueminus);return x||s.valueminus===void 0?function(u){var k=b(u);return[k,k]}:function(u){return[T(u),b(u)]}}};function g(s,h){if(s==="percent")return function(x){return Math.abs(x*h/100)};if(s==="constant")return function(){return Math.abs(h)};if(s==="sqrt")return function(x){return Math.sqrt(Math.abs(x))}}}),O3=t((me,ue)=>{var g=A(),s=l1(),h=mm(),x=Z(),v=P2();ue.exports=function(b){for(var T=b.calcdata,u=0;u<T.length;u++){var k=T[u],M=k[0].trace;if(M.visible===!0&&s.traceIs(M,"errorBarsOK")){var D=h.getFromId(b,M.xaxis),B=h.getFromId(b,M.yaxis);y(k,M,D,"x"),y(k,M,B,"y")}}};function y(b,T,u,k){var M=T["error_"+k]||{},D=M.visible&&["linear","log"].indexOf(u.type)!==-1,B=[];if(D){for(var P=v(M),N=0;N<b.length;N++){var z=b[N],F=z.i;if(F===void 0)F=N;else if(F===null)continue;var w=z[k];if(g(u.c2l(w))){var L=P(w,F);if(g(L[0])&&g(L[1])){var O=z[k+"s"]=w-L[0],H=z[k+"h"]=w+L[1];B.push(O,H)}}}var W=u._id,Ce=T._extremes[W],he=h.findExtremes(u,B,x.extendFlat({tozero:Ce.opts.tozero},{padded:!0}));Ce.min=Ce.min.concat(he.min),Ce.max=Ce.max.concat(he.max)}}}),s2=t((me,ue)=>{var g=c(),s=A(),h=D0(),x=Dp();ue.exports=function(y,b,T,u){var k,M=T.xaxis,D=T.yaxis,B=u&&u.duration>0,P=y._context.staticPlot;b.each(function(N){var z=N[0].trace,F=z.error_x||{},w=z.error_y||{},L;z.ids&&(L=function(Ce){return Ce.id});var O=x.hasMarkers(z)&&z.marker.maxdisplayed>0;!w.visible&&!F.visible&&(N=[]);var H=g.select(this).selectAll("g.errorbar").data(N,L);if(H.exit().remove(),!!N.length){F.visible||H.selectAll("path.xerror").remove(),w.visible||H.selectAll("path.yerror").remove(),H.style("opacity",1);var W=H.enter().append("g").classed("errorbar",!0);B&&W.style("opacity",0).transition().duration(u.duration).style("opacity",1),h.setClipUrl(H,T.layerClipId,y),H.each(function(Ce){var he=g.select(this),le=v(Ce,M,D);if(!(O&&!Ce.vis)){var Y,Re=he.select("path.yerror");if(w.visible&&s(le.x)&&s(le.yh)&&s(le.ys)){var fe=w.width;Y="M"+(le.x-fe)+","+le.yh+"h"+2*fe+"m-"+fe+",0V"+le.ys,le.noYS||(Y+="m-"+fe+",0h"+2*fe),k=!Re.size(),k?Re=he.append("path").style("vector-effect",P?"none":"non-scaling-stroke").classed("yerror",!0):B&&(Re=Re.transition().duration(u.duration).ease(u.easing)),Re.attr("d",Y)}else Re.remove();var xe=he.select("path.xerror");if(F.visible&&s(le.y)&&s(le.xh)&&s(le.xs)){var ge=(F.copy_ystyle?w:F).width;Y="M"+le.xh+","+(le.y-ge)+"v"+2*ge+"m0,-"+ge+"H"+le.xs,le.noXS||(Y+="m0,-"+ge+"v"+2*ge),k=!xe.size(),k?xe=he.append("path").style("vector-effect",P?"none":"non-scaling-stroke").classed("xerror",!0):B&&(xe=xe.transition().duration(u.duration).ease(u.easing)),xe.attr("d",Y)}else xe.remove()}})}})};function v(y,b,T){var u={x:b.c2p(y.x),y:T.c2p(y.y)};return y.yh!==void 0&&(u.yh=T.c2p(y.yh),u.ys=T.c2p(y.ys),s(u.ys)||(u.noYS=!0,u.ys=T.c2p(y.ys,!0))),y.xh!==void 0&&(u.xh=b.c2p(y.xh),u.xs=b.c2p(y.xs),s(u.xs)||(u.noXS=!0,u.xs=b.c2p(y.xs,!0))),u}}),Ab=t((me,ue)=>{var g=c(),s=_r();ue.exports=function(h){h.each(function(x){var v=x[0].trace,y=v.error_y||{},b=v.error_x||{},T=g.select(this);T.selectAll("path.yerror").style("stroke-width",y.thickness+"px").call(s.stroke,y.color),b.copy_ystyle&&(b=y),T.selectAll("path.xerror").style("stroke-width",b.thickness+"px").call(s.stroke,b.color)})}}),S_=t((me,ue)=>{var g=Z(),s=vm().overrideAll,h=Mx(),x={error_x:g.extendFlat({},h),error_y:g.extendFlat({},h)};delete x.error_x.copy_zstyle,delete x.error_y.copy_zstyle,delete x.error_y.copy_ystyle;var v={error_x:g.extendFlat({},h),error_y:g.extendFlat({},h),error_z:g.extendFlat({},h)};delete v.error_x.copy_ystyle,delete v.error_y.copy_ystyle,delete v.error_z.copy_ystyle,delete v.error_z.copy_zstyle,ue.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:x,bar:x,histogram:x,scatter3d:s(v,"calc","nested"),scattergl:s(x,"calc","nested")}},supplyDefaults:Eb(),calc:O3(),makeComputeError:P2(),plot:s2(),style:Ab(),hoverInfo:y};function y(b,T,u){(T.error_y||{}).visible&&(u.yerr=b.yh-b.y,T.error_y.symmetric||(u.yerrneg=b.y-b.ys)),(T.error_x||{}).visible&&(u.xerr=b.xh-b.x,T.error_x.symmetric||(u.xerrneg=b.x-b.xs))}}),T_=t((me,ue)=>{ue.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}}),P3=t((me,ue)=>{var g=c(),s=He(),h=vg(),x=l1(),v=mm(),y=Om(),b=Z(),T=b.strTranslate,u=Fe().extendFlat,k=D1(),M=D0(),D=_r(),B=O0(),P=kg(),N=eg().flipScale,z=__(),F=gb(),w=jp(),L=Q1(),O=L.LINE_SPACING,H=L.FROM_TL,W=L.FROM_BR,Ce=T_().cn;function he(ge){var ye=ge._fullLayout,Ae=ye._infolayer.selectAll("g."+Ce.colorbar).data(le(ge),function(Le){return Le._id});Ae.enter().append("g").attr("class",function(Le){return Le._id}).classed(Ce.colorbar,!0),Ae.each(function(Le){var ce=g.select(this);b.ensureSingle(ce,"rect",Ce.cbbg),b.ensureSingle(ce,"g",Ce.cbfills),b.ensureSingle(ce,"g",Ce.cblines),b.ensureSingle(ce,"g",Ce.cbaxis,function(Pe){Pe.classed(Ce.crisp,!0)}),b.ensureSingle(ce,"g",Ce.cbtitleunshift,function(Pe){Pe.append("g").classed(Ce.cbtitle,!0)}),b.ensureSingle(ce,"rect",Ce.cboutline);var ke=Y(ce,Le,ge);ke&&ke.then&&(ge._promises||[]).push(ke),ge._context.edits.colorbarPosition&&Re(ce,Le,ge)}),Ae.exit().each(function(Le){h.autoMargin(ge,Le._id)}).remove(),Ae.order()}function le(ge){var ye=ge._fullLayout,Ae=ge.calcdata,Le=[],ce,ke,Pe,tt;function Ke(q){return u(q,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function nt(){typeof tt.calc=="function"?tt.calc(ge,Pe,ce):(ce._fillgradient=ke.reversescale?N(ke.colorscale):ke.colorscale,ce._zrange=[ke[tt.min],ke[tt.max]])}for(var yi=0;yi<Ae.length;yi++){var Ei=Ae[yi];if(Pe=Ei[0].trace,!!Pe._module){var vs=Pe._module.colorbar;if(Pe.visible===!0&&vs)for(var Se=Array.isArray(vs),Ee=Se?vs:[vs],X=0;X<Ee.length;X++){tt=Ee[X];var Oe=tt.container;ke=Oe?Pe[Oe]:Pe,ke&&ke.showscale&&(ce=Ke(ke.colorbar),ce._id="cb"+Pe.uid+(Se&&Oe?"-"+Oe:""),ce._traceIndex=Pe.index,ce._propPrefix=(Oe?Oe+".":"")+"colorbar.",ce._meta=Pe._meta,nt(),Le.push(ce))}}}for(var Qe in ye._colorAxes)if(ke=ye[Qe],ke.showscale){var pe=ye._colorAxes[Qe];ce=Ke(ke.colorbar),ce._id="cb"+Qe,ce._propPrefix=Qe+".colorbar.",ce._meta=ye._meta,tt={min:"cmin",max:"cmax"},pe[0]!=="heatmap"&&(Pe=pe[1],tt.calc=Pe._module.colorbar.calc),nt(),Le.push(ce)}return Le}function Y(ge,ye,Ae){var Le=ye.orientation==="v",ce=ye.len,ke=ye.lenmode,Pe=ye.thickness,tt=ye.thicknessmode,Ke=ye.outlinewidth,nt=ye.borderwidth,yi=ye.bgcolor,Ei=ye.xanchor,vs=ye.yanchor,Se=ye.xpad,Ee=ye.ypad,X=ye.x,Oe=Le?ye.y:1-ye.y,Qe=ye.yref==="paper",pe=ye.xref==="paper",q=Ae._fullLayout,ae=q._size,ve=ye._fillcolor,Te=ye._line,et=ye.title,bt=et.side,dr=ye._zrange||g.extent((typeof ve=="function"?ve:Te.color).domain()),Ol=typeof Te.color=="function"?Te.color:function(){return Te.color},Xl=typeof ve=="function"?ve:function(){return ve},Pp=ye._levels,t0=fe(Ae,ye,dr),Wp=t0.fill,$p=t0.line,Lo=Math.round(Pe*(tt==="fraction"?Le?ae.w:ae.h:1)),kl=Lo/(Le?ae.w:ae.h),dt=Math.round(ce*(ke==="fraction"?Le?ae.h:ae.w:1)),yp=dt/(Le?ae.h:ae.w),Bp=pe?ae.w:Ae._fullLayout.width,Jp=Qe?ae.h:Ae._fullLayout.height,m0=Math.round(Le?X*Bp+Se:Oe*Jp+Ee),s0={center:.5,right:1}[Ei]||0,y0={top:1,middle:.5}[vs]||0,M0=Le?X-s0*kl:Oe-y0*kl,T0=Le?Oe-y0*yp:X-s0*yp,G0=Math.round(Le?Jp*(1-T0):Bp*T0);ye._lenFrac=yp,ye._thickFrac=kl,ye._uFrac=M0,ye._vFrac=T0;var h0=ye._axis=xe(Ae,ye,dr);h0.position=kl+(Le?X+Se/ae.w:Oe+Ee/ae.h);var W0=["top","bottom"].indexOf(bt)!==-1;if(Le&&W0&&(h0.title.side=bt,h0.titlex=X+Se/ae.w,h0.titley=T0+(et.side==="top"?yp-Ee/ae.h:Ee/ae.h)),!Le&&!W0&&(h0.title.side=bt,h0.titley=Oe+Ee/ae.h,h0.titlex=T0+Se/ae.w),Te.color&&ye.tickmode==="auto"){h0.tickmode="linear",h0.tick0=Pp.start;var rm=Pp.size,V0=b.constrain(dt/50,4,15)+1,um=(dr[1]-dr[0])/((ye.nticks||V0)*rm);if(um>1){var Uo=Math.pow(10,Math.floor(Math.log(um)/Math.LN10));rm*=Uo*b.roundUp(um/Uo,[2,5,10]),(Math.abs(Pp.start)/Pp.size+1e-6)%1<2e-6&&(h0.tick0=0)}h0.dtick=rm}h0.domain=Le?[T0+Ee/ae.h,T0+yp-Ee/ae.h]:[T0+Se/ae.w,T0+yp-Se/ae.w],h0.setScale(),ge.attr("transform",T(Math.round(ae.l),Math.round(ae.t)));var Tp=ge.select("."+Ce.cbtitleunshift).attr("transform",T(-Math.round(ae.l),-Math.round(ae.t))),Be=h0.ticklabelposition,ft=h0.title.font.size,mn=ge.select("."+Ce.cbaxis),Bl,Vl=0,Np=0;function Up(k0,N0){var lm={propContainer:h0,propName:ye._propPrefix+"title.text",traceIndex:ye._traceIndex,_meta:ye._meta,placeholder:q._dfltTitle.colorbar,containerGroup:ge.select("."+Ce.cbtitle)},Im=k0.charAt(0)==="h"?k0.substr(1):"h"+k0;ge.selectAll("."+Im+",."+Im+"-math-group").remove(),B.draw(Ae,k0,u(lm,N0||{}))}function Qp(){if(Le&&W0||!Le&&!W0){var k0,N0;bt==="top"&&(k0=Se+ae.l+Bp*X,N0=Ee+ae.t+Jp*(1-T0-yp)+3+ft*.75),bt==="bottom"&&(k0=Se+ae.l+Bp*X,N0=Ee+ae.t+Jp*(1-T0)-3-ft*.25),bt==="right"&&(N0=Ee+ae.t+Jp*Oe+3+ft*.75,k0=Se+ae.l+Bp*T0),Up(h0._id+"title",{attributes:{x:k0,y:N0,"text-anchor":Le?"start":"middle"}})}}function Zp(){if(Le&&!W0||!Le&&W0){var k0=h0.position||0,N0=h0._offset+h0._length/2,lm,Im;if(bt==="right")Im=N0,lm=ae.l+Bp*k0+10+ft*(h0.showticklabels?1:.5);else if(lm=N0,bt==="bottom"&&(Im=ae.t+Jp*k0+10+(Be.indexOf("inside")===-1?h0.tickfont.size:0)+(h0.ticks!=="inside"&&ye.ticklen||0)),bt==="top"){var u1=et.text.split("<br>").length;Im=ae.t+Jp*k0+10-Lo-O*ft*u1}Up((Le?"h":"v")+h0._id+"title",{avoid:{selection:g.select(Ae).selectAll("g."+h0._id+"tick"),side:bt,offsetTop:Le?0:ae.t,offsetLeft:Le?ae.l:0,maxShift:Le?q.width:q.height},attributes:{x:lm,y:Im,"text-anchor":"middle"},transform:{rotate:Le?-90:0,offset:0}})}}function Kp(){if(!Le&&!W0||Le&&W0){var k0=ge.select("."+Ce.cbtitle),N0=k0.select("text"),lm=[-Ke/2,Ke/2],Im=k0.select(".h"+h0._id+"title-math-group").node(),u1=15.6;N0.node()&&(u1=parseInt(N0.node().style.fontSize,10)*O);var v1;if(Im?(v1=M.bBox(Im),Np=v1.width,Vl=v1.height,Vl>u1&&(lm[1]-=(Vl-u1)/2)):N0.node()&&!N0.classed(Ce.jsPlaceholder)&&(v1=M.bBox(N0.node()),Np=v1.width,Vl=v1.height),Le){if(Vl){if(Vl+=5,bt==="top")h0.domain[1]-=Vl/ae.h,lm[1]*=-1;else{h0.domain[0]+=Vl/ae.h;var b1=P.lineCount(N0);lm[1]+=(1-b1)*u1}k0.attr("transform",T(lm[0],lm[1])),h0.setScale()}}else Np&&(bt==="right"&&(h0.domain[0]+=(Np+ft/2)/ae.w),k0.attr("transform",T(lm[0],lm[1])),h0.setScale())}ge.selectAll("."+Ce.cbfills+",."+Ce.cblines).attr("transform",Le?T(0,Math.round(ae.h*(1-h0.domain[1]))):T(Math.round(ae.w*h0.domain[0]),0)),mn.attr("transform",Le?T(0,Math.round(-ae.t)):T(Math.round(-ae.l),0));var Bm=ge.select("."+Ce.cbfills).selectAll("rect."+Ce.cbfill).attr("style","").data(Wp);Bm.enter().append("rect").classed(Ce.cbfill,!0).attr("style",""),Bm.exit().remove();var fm=dr.map(h0.c2p).map(Math.round).sort(function(t1,Um){return t1-Um});Bm.each(function(t1,Um){var z1=[Um===0?dr[0]:(Wp[Um]+Wp[Um-1])/2,Um===Wp.length-1?dr[1]:(Wp[Um]+Wp[Um+1])/2].map(h0.c2p).map(Math.round);Le&&(z1[1]=b.constrain(z1[1]+(z1[1]>z1[0])?1:-1,fm[0],fm[1]));var F1=g.select(this).attr(Le?"x":"y",m0).attr(Le?"y":"x",g.min(z1)).attr(Le?"width":"height",Math.max(Lo,2)).attr(Le?"height":"width",Math.max(g.max(z1)-g.min(z1),2));if(ye._fillgradient)M.gradient(F1,Ae,ye._id,Le?"vertical":"horizontalreversed",ye._fillgradient,"fill");else{var g1=Xl(t1).replace("e-","");F1.attr("fill",s(g1).toHexString())}});var c1=ge.select("."+Ce.cblines).selectAll("path."+Ce.cbline).data(Te.color&&Te.width?$p:[]);c1.enter().append("path").classed(Ce.cbline,!0),c1.exit().remove(),c1.each(function(t1){var Um=m0,z1=Math.round(h0.c2p(t1))+Te.width/2%1;g.select(this).attr("d","M"+(Le?Um+","+z1:z1+","+Um)+(Le?"h":"v")+Lo).call(M.lineGroupStyle,Te.width,Ol(t1),Te.dash)}),mn.selectAll("g."+h0._id+"tick,path").remove();var y1=m0+Lo+(Ke||0)/2-(ye.ticks==="outside"?1:0),n1=v.calcTicks(h0),Ym=v.getTickSigns(h0)[2];return v.drawTicks(Ae,h0,{vals:h0.ticks==="inside"?v.clipEnds(h0,n1):n1,layer:mn,path:v.makeTickPath(h0,y1,Ym),transFn:v.makeTransTickFn(h0)}),v.drawLabels(Ae,h0,{vals:n1,layer:mn,transFn:v.makeTransTickLabelFn(h0),labelFns:v.makeLabelFns(h0,y1)})}function R0(){var k0,N0=Lo+Ke/2;Be.indexOf("inside")===-1&&(k0=M.bBox(mn.node()),N0+=Le?k0.width:k0.height),Bl=Tp.select("text");var lm=0,Im=Le&&bt==="top",u1=!Le&&bt==="right",v1=0;if(Bl.node()&&!Bl.classed(Ce.jsPlaceholder)){var b1,Bm=Tp.select(".h"+h0._id+"title-math-group").node();Bm&&(Le&&W0||!Le&&!W0)?(k0=M.bBox(Bm),lm=k0.width,b1=k0.height):(k0=M.bBox(Tp.node()),lm=k0.right-ae.l-(Le?m0:G0),b1=k0.bottom-ae.t-(Le?G0:m0),!Le&&bt==="top"&&(N0+=k0.height,v1=k0.height)),u1&&(Bl.attr("transform",T(lm/2+ft/2,0)),lm*=2),N0=Math.max(N0,Le?lm:b1)}var fm=(Le?Se:Ee)*2+N0+nt+Ke/2,c1=0;!Le&&et.text&&vs==="bottom"&&Oe<=0&&(c1=fm/2,fm+=c1,v1+=c1),q._hColorbarMoveTitle=c1,q._hColorbarMoveCBTitle=v1;var y1=nt+Ke,n1=(Le?m0:G0)-y1/2-(Le?Se:0),Ym=(Le?G0:m0)-(Le?dt:Ee+v1-c1);ge.select("."+Ce.cbbg).attr("x",n1).attr("y",Ym).attr(Le?"width":"height",Math.max(fm-c1,2)).attr(Le?"height":"width",Math.max(dt+y1,2)).call(D.fill,yi).call(D.stroke,ye.bordercolor).style("stroke-width",nt);var t1=u1?Math.max(lm-10,0):0;ge.selectAll("."+Ce.cboutline).attr("x",(Le?m0:G0+Se)+t1).attr("y",(Le?G0+Ee-dt:m0)+(Im?Vl:0)).attr(Le?"width":"height",Math.max(Lo,2)).attr(Le?"height":"width",Math.max(dt-(Le?2*Ee+Vl:2*Se+t1),2)).call(D.stroke,ye.outlinecolor).style({fill:"none","stroke-width":Ke});var Um=Le?s0*fm:0,z1=Le?0:(1-y0)*fm-v1;if(Um=pe?ae.l-Um:-Um,z1=Qe?ae.t-z1:-z1,ge.attr("transform",T(Um,z1)),!Le&&(nt||s(yi).getAlpha()&&!s.equals(q.paper_bgcolor,yi))){var F1=mn.selectAll("text"),g1=F1[0].length,V1=ge.select("."+Ce.cbbg).node(),K1=M.bBox(V1),ig=M.getTranslate(ge),mg=2;F1.each(function(Vp,wp){var Ap=0,Yp=g1-1;if(wp===Ap||wp===Yp){var Fp=M.bBox(this),u0=M.getTranslate(this),g0;if(wp===Yp){var H0=Fp.right+u0.x,Lm=K1.right+ig.x+G0-nt-mg+X;g0=Lm-H0,g0>0&&(g0=0)}else if(wp===Ap){var Em=Fp.left+u0.x,Qm=K1.left+ig.x+G0+nt+mg;g0=Qm-Em,g0<0&&(g0=0)}g0&&(g1<3?this.setAttribute("transform","translate("+g0+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var P1={},lg=H[Ei],G1=W[Ei],Sm=H[vs],Cg=W[vs],Je=fm-Lo;Le?(ke==="pixels"?(P1.y=Oe,P1.t=dt*Sm,P1.b=dt*Cg):(P1.t=P1.b=0,P1.yt=Oe+ce*Sm,P1.yb=Oe-ce*Cg),tt==="pixels"?(P1.x=X,P1.l=fm*lg,P1.r=fm*G1):(P1.l=Je*lg,P1.r=Je*G1,P1.xl=X-Pe*lg,P1.xr=X+Pe*G1)):(ke==="pixels"?(P1.x=X,P1.l=dt*lg,P1.r=dt*G1):(P1.l=P1.r=0,P1.xl=X+ce*lg,P1.xr=X-ce*G1),tt==="pixels"?(P1.y=1-Oe,P1.t=fm*Sm,P1.b=fm*Cg):(P1.t=Je*Sm,P1.b=Je*Cg,P1.yt=Oe-Pe*Sm,P1.yb=Oe+Pe*Cg));var Ve=ye.y<.5?"b":"t",Mp=ye.x<.5?"l":"r";Ae._fullLayout._reservedMargin[ye._id]={};var kp={r:q.width-n1-Um,l:n1+P1.r,b:q.height-Ym-z1,t:Ym+P1.b};pe&&Qe?h.autoMargin(Ae,ye._id,P1):pe?Ae._fullLayout._reservedMargin[ye._id][Ve]=kp[Ve]:Qe||Le?Ae._fullLayout._reservedMargin[ye._id][Mp]=kp[Mp]:Ae._fullLayout._reservedMargin[ye._id][Ve]=kp[Ve]}return b.syncOrAsync([h.previousPromises,Qp,Kp,Zp,h.previousPromises,R0],Ae)}function Re(ge,ye,Ae){var Le=ye.orientation==="v",ce=Ae._fullLayout,ke=ce._size,Pe,tt,Ke;y.init({element:ge.node(),gd:Ae,prepFn:function(){Pe=ge.attr("transform"),k(ge)},moveFn:function(nt,yi){ge.attr("transform",Pe+T(nt,yi)),tt=y.align((Le?ye._uFrac:ye._vFrac)+nt/ke.w,Le?ye._thickFrac:ye._lenFrac,0,1,ye.xanchor),Ke=y.align((Le?ye._vFrac:1-ye._uFrac)-yi/ke.h,Le?ye._lenFrac:ye._thickFrac,0,1,ye.yanchor);var Ei=y.getCursor(tt,Ke,ye.xanchor,ye.yanchor);k(ge,Ei)},doneFn:function(){if(k(ge),tt!==void 0&&Ke!==void 0){var nt={};nt[ye._propPrefix+"x"]=tt,nt[ye._propPrefix+"y"]=Ke,ye._traceIndex!==void 0?x.call("_guiRestyle",Ae,nt,ye._traceIndex):x.call("_guiRelayout",Ae,nt)}}})}function fe(ge,ye,Ae){var Le=ye._levels,ce=[],ke=[],Pe,tt,Ke=Le.end+Le.size/100,nt=Le.size,yi=1.001*Ae[0]-.001*Ae[1],Ei=1.001*Ae[1]-.001*Ae[0];for(tt=0;tt<1e5&&(Pe=Le.start+tt*nt,!(nt>0?Pe>=Ke:Pe<=Ke));tt++)Pe>yi&&Pe<Ei&&ce.push(Pe);if(ye._fillgradient)ke=[0];else if(typeof ye._fillcolor=="function"){var vs=ye._filllevels;if(vs)for(Ke=vs.end+vs.size/100,nt=vs.size,tt=0;tt<1e5&&(Pe=vs.start+tt*nt,!(nt>0?Pe>=Ke:Pe<=Ke));tt++)Pe>Ae[0]&&Pe<Ae[1]&&ke.push(Pe);else ke=ce.map(function(Se){return Se-Le.size/2}),ke.push(ke[ke.length-1]+Le.size)}else ye._fillcolor&&typeof ye._fillcolor=="string"&&(ke=[0]);return Le.size<0&&(ce.reverse(),ke.reverse()),{line:ce,fill:ke}}function xe(ge,ye,Ae){var Le=ge._fullLayout,ce=ye.orientation==="v",ke={type:"linear",range:Ae,tickmode:ye.tickmode,nticks:ye.nticks,tick0:ye.tick0,dtick:ye.dtick,tickvals:ye.tickvals,ticktext:ye.ticktext,ticks:ye.ticks,ticklen:ye.ticklen,tickwidth:ye.tickwidth,tickcolor:ye.tickcolor,showticklabels:ye.showticklabels,labelalias:ye.labelalias,ticklabelposition:ye.ticklabelposition,ticklabeloverflow:ye.ticklabeloverflow,ticklabelstep:ye.ticklabelstep,tickfont:ye.tickfont,tickangle:ye.tickangle,tickformat:ye.tickformat,exponentformat:ye.exponentformat,minexponent:ye.minexponent,separatethousands:ye.separatethousands,showexponent:ye.showexponent,showtickprefix:ye.showtickprefix,tickprefix:ye.tickprefix,showticksuffix:ye.showticksuffix,ticksuffix:ye.ticksuffix,title:ye.title,showline:!0,anchor:"free",side:ce?"right":"bottom",position:1},Pe=ce?"y":"x",tt={type:"linear",_id:Pe+ye._id},Ke={letter:Pe,font:Le.font,noAutotickangles:Pe==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:Le.calendar};function nt(yi,Ei){return b.coerce(ke,tt,w,yi,Ei)}return z(ke,tt,nt,Ke,Le),F(ke,tt,nt,Ke),tt}ue.exports={draw:he}}),I3=t((me,ue)=>{ue.exports={moduleType:"component",name:"colorbar",attributes:f(),supplyDefaults:Nl(),draw:P3().draw,hasColorbar:Q()}}),Yx=t((me,ue)=>{ue.exports={moduleType:"component",name:"legend",layoutAttributes:R1(),supplyLayoutDefaults:Jm(),draw:J1(),style:pg()}}),Wx=t((me,ue)=>{ue.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}}),U3=t((me,ue)=>{ue.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}}),Cb=t((me,ue)=>{var g=l1(),s=Z(),h=s.extendFlat,x=s.extendDeep;function v(b){var T;switch(b){case"themes__thumb":T={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":T={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:T={}}return T}function y(b){var T=["xaxis","yaxis","zaxis"];return T.indexOf(b.slice(0,5))>-1}ue.exports=function(b,T){var u,k=b.data,M=b.layout,D=x([],k),B=x({},M,v(T.tileClass)),P=b._context||{};if(T.width&&(B.width=T.width),T.height&&(B.height=T.height),T.tileClass==="thumbnail"||T.tileClass==="themes__thumb"){B.annotations=[];var N=Object.keys(B);for(u=0;u<N.length;u++)y(N[u])&&(B[N[u]].title={text:""});for(u=0;u<D.length;u++){var z=D[u];z.showscale=!1,z.marker&&(z.marker.showscale=!1),g.traceIs(z,"pie-like")&&(z.textposition="none")}}if(Array.isArray(T.annotations))for(u=0;u<T.annotations.length;u++)B.annotations.push(T.annotations[u]);var F=Object.keys(B).filter(function(W){return W.match(/^scene\d*$/)});if(F.length){var w={};for(T.tileClass==="thumbnail"&&(w={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),u=0;u<F.length;u++){var L=B[F[u]];L.xaxis||(L.xaxis={}),L.yaxis||(L.yaxis={}),L.zaxis||(L.zaxis={}),h(L.xaxis,w),h(L.yaxis,w),h(L.zaxis,w),L._scene=null}}var O=document.createElement("div");T.tileClass&&(O.className=T.tileClass);var H={gd:O,td:O,layout:B,data:D,config:{staticPlot:T.staticPlot===void 0?!0:T.staticPlot,plotGlPixelRatio:T.plotGlPixelRatio===void 0?2:T.plotGlPixelRatio,displaylogo:T.displaylogo||!1,showLink:T.showLink||!1,showTips:T.showTips||!1,mapboxAccessToken:P.mapboxAccessToken}};return T.setBackground!=="transparent"&&(H.config.setBackground=T.setBackground||"opaque"),H.gd.defaultLayout=v(T.tileClass),H}}),l2=t((me,ue)=>{var g=S0().EventEmitter,s=l1(),h=Z(),x=vx(),v=Cb(),y=sb(),b=yx();function T(u,k){var M=new g,D=v(u,{format:"png"}),B=D.gd;B.style.position="absolute",B.style.left="-5000px",document.body.appendChild(B);function P(){var z=x.getDelay(B._fullLayout);setTimeout(function(){var F=y(B),w=document.createElement("canvas");w.id=h.randstr(),M=b({format:k.format,width:B._fullLayout.width,height:B._fullLayout.height,canvas:w,emitter:M,svg:F}),M.clean=function(){B&&document.body.removeChild(B)}},z)}var N=x.getRedrawFunc(B);return s.call("_doPlot",B,D.data,D.layout,D.config).then(N).then(P).catch(function(z){M.emit("error",z)}),M}ue.exports=T}),I2=t((me,ue)=>{var g=vx(),s={getDelay:g.getDelay,getRedrawFunc:g.getRedrawFunc,clone:Cb(),toSVG:sb(),svgToImg:yx(),toImage:l2(),downloadImage:cb()};ue.exports=s}),E_=t(me=>{me.version=a().version,o(),Fl();var ue=l1(),g=me.register=ue.register,s=e2(),h=Object.keys(s);for(v=0;v<h.length;v++)x=h[v],x.charAt(0)!=="_"&&(me[x]=s[x]),g({moduleType:"apiMethod",name:x,fn:s[x]});var x,v;g(b_()),g([L3(),fv(),C2(),k3(),N2(),bb(),_y(),O2(),N3(),z3(),S_(),Yl(),I3(),Yx(),Nv(),Rm()]),g([Wx(),U3()]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(g(window.PlotlyLocales),delete window.PlotlyLocales),me.Icons=hy();var y=Nv(),b=vg();me.Plots={resize:b.resize,graphJson:b.graphJson,sendDataToCloud:b.sendDataToCloud},me.Fx={hover:y.hover,unhover:y.unhover,loneHover:y.loneHover,loneUnhover:y.loneUnhover},me.Snapshot=I2(),me.PlotSchema=Xm()}),U2=t((me,ue)=>{ue.exports=E_()}),c2=t((me,ue)=>{ue.exports={TEXTPAD:3,eventDataKeys:["value","label"]}}),F2=t((me,ue)=>{var g=Px(),s=Iv().axisHoverFormat,h=_1().hovertemplateAttrs,x=_1().texttemplateAttrs,v=R(),y=Xe(),b=c2(),T=r0().pattern,u=Fe().extendFlat,k=y({editType:"calc",arrayOk:!0,colorEditType:"style"}),M=g.marker,D=M.line,B=u({},D.width,{dflt:0}),P=u({width:B,editType:"calc"},v("marker.line")),N=u({line:P,editType:"calc"},v("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:T,cornerradius:{valType:"any",editType:"calc"}});ue.exports={x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),text:g.text,texttemplate:x({editType:"plot"},{keys:b.eventDataKeys}),hovertext:g.hovertext,hovertemplate:h({},{keys:b.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:u({},k,{}),insidetextfont:u({},k,{}),outsidetextfont:u({},k,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:u({},g.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:N,offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:{marker:{opacity:g.selected.marker.opacity,color:g.selected.marker.color,editType:"style"},textfont:g.selected.textfont,editType:"style"},unselected:{marker:{opacity:g.unselected.marker.opacity,color:g.unselected.marker.color,editType:"style"},textfont:g.unselected.textfont,editType:"style"},zorder:g.zorder}}),Sx=t((me,ue)=>{ue.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}}),F3=t((me,ue)=>{var g=_r(),s=eg().hasColorscale,h=ms(),x=Z().coercePattern;ue.exports=function(v,y,b,T,u){var k=b("marker.color",T),M=s(v,"marker");M&&h(v,y,u,b,{prefix:"marker.",cLetter:"c"}),b("marker.line.color",g.defaultLine),s(v,"marker.line")&&h(v,y,u,b,{prefix:"marker.line.",cLetter:"c"}),b("marker.line.width"),b("marker.opacity"),x(b,"marker.pattern",k,M),b("selected.marker.color"),b("unselected.marker.color")}}),Wy=t((me,ue)=>{var g=A(),s=Z(),h=_r(),x=l1(),v=p_(),y=ub(),b=F3(),T=db(),u=F2(),k=s.coerceFont;function M(N,z,F,w){function L(he,le){return s.coerce(N,z,u,he,le)}var O=v(N,z,w,L);if(!O){z.visible=!1;return}y(N,z,w,L),L("xhoverformat"),L("yhoverformat"),L("zorder"),L("orientation",z.x&&!z.y?"h":"v"),L("base"),L("offset"),L("width"),L("text"),L("hovertext"),L("hovertemplate");var H=L("textposition");P(N,z,w,L,H,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),b(N,z,L,F,w);var W=(z.marker.line||{}).color,Ce=x.getComponentMethod("errorbars","supplyDefaults");Ce(N,z,W||h.defaultLine,{axis:"y"}),Ce(N,z,W||h.defaultLine,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(z,L)}function D(N,z){var F,w;function L(W,Ce){return s.coerce(w._input,w,u,W,Ce)}for(var O=0;O<N.length;O++)if(w=N[O],w.type==="bar"){F=w._input;var H=L("marker.cornerradius",z.barcornerradius);w.marker&&(w.marker.cornerradius=B(H)),T(F,w,z,L,z.barmode)}}function B(N){if(g(N)){if(N=+N,N>=0)return N}else if(typeof N=="string"&&(N=N.trim(),N.slice(-1)==="%"&&g(N.slice(0,-1))&&(N=+N.slice(0,-1),N>=0)))return N+"%"}function P(N,z,F,w,L,O){O=O||{};var H=O.moduleHasSelected!==!1,W=O.moduleHasUnselected!==!1,Ce=O.moduleHasConstrain!==!1,he=O.moduleHasCliponaxis!==!1,le=O.moduleHasTextangle!==!1,Y=O.moduleHasInsideanchor!==!1,Re=!!O.hasPathbar,fe=Array.isArray(L)||L==="auto",xe=fe||L==="inside",ge=fe||L==="outside";if(xe||ge){var ye=k(w,"textfont",F.font),Ae=s.extendFlat({},ye),Le=N.textfont&&N.textfont.color,ce=!Le;if(ce&&delete Ae.color,k(w,"insidetextfont",Ae),Re){var ke=s.extendFlat({},ye);ce&&delete ke.color,k(w,"pathbar.textfont",ke)}ge&&k(w,"outsidetextfont",ye),H&&w("selected.textfont.color"),W&&w("unselected.textfont.color"),Ce&&w("constraintext"),he&&w("cliponaxis"),le&&w("textangle"),w("texttemplate")}xe&&Y&&w("insidetextanchor")}ue.exports={supplyDefaults:M,crossTraceDefaults:D,handleText:P,validateCornerradius:B}}),Rb=t((me,ue)=>{var g=l1(),s=mm(),h=Z(),x=Sx(),v=Wy().validateCornerradius;ue.exports=function(y,b,T){function u(H,W){return h.coerce(y,b,x,H,W)}for(var k=!1,M=!1,D=!1,B={},P=u("barmode"),N=P==="group",z=0;z<T.length;z++){var F=T[z];if(g.traceIs(F,"bar")&&F.visible)k=!0;else continue;var w=F.xaxis+F.yaxis;if(N?(B[w]&&(D=!0),B[w]=!0):(w+=F._input.offsetgroup,B.length>0&&!B[w]&&(D=!0),B[w]=!0),F.visible&&F.type==="histogram"){var L=s.getFromId({_fullLayout:b},F[F.orientation==="v"?"xaxis":"yaxis"]);L.type!=="category"&&(M=!0)}}if(!k){delete b.barmode;return}P!=="overlay"&&u("barnorm"),u("bargap",M&&!D?0:.2),u("bargroupgap");var O=u("barcornerradius");b.barcornerradius=v(O)}}),A_=t((me,ue)=>{var g=Z();ue.exports=function(s,h){for(var x=0;x<s.length;x++)s[x].i=x;g.mergeArray(h.text,s,"tx"),g.mergeArray(h.hovertext,s,"htx");var v=h.marker;if(v){g.mergeArray(v.opacity,s,"mo",!0),g.mergeArray(v.color,s,"mc");var y=v.line;y&&(g.mergeArray(y.color,s,"mlc"),g.mergeArrayCastPositive(y.width,s,"mlw"))}}}),Tx=t((me,ue)=>{var g=mm(),s=By(),h=eg().hasColorscale,x=gs(),v=A_(),y=Fx();ue.exports=function(b,T){var u=g.getFromId(b,T.xaxis||"x"),k=g.getFromId(b,T.yaxis||"y"),M,D,B,P,N,z,F={msUTC:!!(T.base||T.base===0)};T.orientation==="h"?(M=u.makeCalcdata(T,"x",F),B=k.makeCalcdata(T,"y"),P=s(T,k,"y",B),N=!!T.yperiodalignment,z="y"):(M=k.makeCalcdata(T,"y",F),B=u.makeCalcdata(T,"x"),P=s(T,u,"x",B),N=!!T.xperiodalignment,z="x"),D=P.vals;for(var w=Math.min(D.length,M.length),L=new Array(w),O=0;O<w;O++)L[O]={p:D[O],s:M[O]},N&&(L[O].orig_p=B[O],L[O][z+"End"]=P.ends[O],L[O][z+"Start"]=P.starts[O]),T.ids&&(L[O].id=String(T.ids[O]));return h(T,"marker")&&x(b,T,{vals:T.marker.color,containerStr:"marker",cLetter:"c"}),h(T,"marker.line")&&x(b,T,{vals:T.marker.line.color,containerStr:"marker.line",cLetter:"c"}),v(L,T),y(L,T),L}}),Xy=t((me,ue)=>{var g=c(),s=Z();function h(b,T,u){var k=b._fullLayout,M=k["_"+u+"Text_minsize"];if(M){var D=k.uniformtext.mode==="hide",B;switch(u){case"funnelarea":case"pie":case"sunburst":B="g.slice";break;case"treemap":case"icicle":B="g.slice, g.pathbar";break;default:B="g.points > g.point"}T.selectAll(B).each(function(P){var N=P.transform;if(N){N.scale=D&&N.hide?0:M/N.fontSize;var z=g.select(this).select("text");s.setTransormAndDisplay(z,N)}})}}function x(b,T,u){if(u.uniformtext.mode){var k=y(b),M=u.uniformtext.minsize,D=T.scale*T.fontSize;T.hide=D<M,u[k]=u[k]||1/0,T.hide||(u[k]=Math.min(u[k],Math.max(D,M)))}}function v(b,T){var u=y(b);T[u]=void 0}function y(b){return"_"+b+"Text_minsize"}ue.exports={recordMinTextSize:x,clearMinTextSize:v,resizeText:h}}),Xx=t(me=>{var ue=A(),g=He(),s=Z().isArrayOrTypedArray;me.coerceString=function(h,x,v){if(typeof x=="string"){if(x||!h.noBlank)return x}else if((typeof x=="number"||x===!0)&&!h.strict)return String(x);return v!==void 0?v:h.dflt},me.coerceNumber=function(h,x,v){if(ue(x)){x=+x;var y=h.min,b=h.max,T=y!==void 0&&x<y||b!==void 0&&x>b;if(!T)return x}return v!==void 0?v:h.dflt},me.coerceColor=function(h,x,v){return g(x).isValid()?x:v!==void 0?v:h.dflt},me.coerceEnumerated=function(h,x,v){return h.coerceNumber&&(x=+x),h.values.indexOf(x)!==-1?x:v!==void 0?v:h.dflt},me.getValue=function(h,x){var v;return s(h)?x<h.length&&(v=h[x]):v=h,v},me.getLineWidth=function(h,x){var v=0<x.mlw?x.mlw:s(h.marker.line.width)?0:h.marker.line.width;return v}}),B2=t((me,ue)=>{var g=c(),s=_r(),h=D0(),x=Z(),v=l1(),y=Xy().resizeText,b=F2(),T=b.textfont,u=b.insidetextfont,k=b.outsidetextfont,M=Xx();function D(he){var le=g.select(he).selectAll('g[class^="barlayer"]').selectAll("g.trace");y(he,le,"bar");var Y=le.size(),Re=he._fullLayout;le.style("opacity",function(fe){return fe[0].trace.opacity}).each(function(fe){(Re.barmode==="stack"&&Y>1||Re.bargap===0&&Re.bargroupgap===0&&!fe[0].trace.marker.line.width)&&g.select(this).attr("shape-rendering","crispEdges")}),le.selectAll("g.points").each(function(fe){var xe=g.select(this),ge=fe[0].trace;B(xe,ge,he)}),v.getComponentMethod("errorbars","style")(le)}function B(he,le,Y){h.pointStyle(he.selectAll("path"),le,Y),P(he,le,Y)}function P(he,le,Y){he.selectAll("text").each(function(Re){var fe=g.select(this),xe=x.ensureUniformFontSize(Y,w(fe,Re,le,Y));h.font(fe,xe)})}function N(he,le,Y){var Re=le[0].trace;Re.selectedpoints?z(Y,Re,he):(B(Y,Re,he),v.getComponentMethod("errorbars","style")(Y))}function z(he,le,Y){h.selectedPointStyle(he.selectAll("path"),le),F(he.selectAll("text"),le,Y)}function F(he,le,Y){he.each(function(Re){var fe=g.select(this),xe;if(Re.selected){xe=x.ensureUniformFontSize(Y,w(fe,Re,le,Y));var ge=le.selected.textfont&&le.selected.textfont.color;ge&&(xe.color=ge),h.font(fe,xe)}else h.selectedTextStyle(fe,le)})}function w(he,le,Y,Re){var fe=Re._fullLayout.font,xe=Y.textfont;if(he.classed("bartext-inside")){var ge=Ce(le,Y);xe=O(Y,le.i,fe,ge)}else he.classed("bartext-outside")&&(xe=H(Y,le.i,fe));return xe}function L(he,le,Y){return W(T,he.textfont,le,Y)}function O(he,le,Y,Re){var fe=L(he,le,Y),xe=he._input.textfont===void 0||he._input.textfont.color===void 0||Array.isArray(he.textfont.color)&&he.textfont.color[le]===void 0;return xe&&(fe={color:s.contrast(Re),family:fe.family,size:fe.size,weight:fe.weight,style:fe.style,variant:fe.variant,textcase:fe.textcase,lineposition:fe.lineposition,shadow:fe.shadow}),W(u,he.insidetextfont,le,fe)}function H(he,le,Y){var Re=L(he,le,Y);return W(k,he.outsidetextfont,le,Re)}function W(he,le,Y,Re){le=le||{};var fe=M.getValue(le.family,Y),xe=M.getValue(le.size,Y),ge=M.getValue(le.color,Y),ye=M.getValue(le.weight,Y),Ae=M.getValue(le.style,Y),Le=M.getValue(le.variant,Y),ce=M.getValue(le.textcase,Y),ke=M.getValue(le.lineposition,Y),Pe=M.getValue(le.shadow,Y);return{family:M.coerceString(he.family,fe,Re.family),size:M.coerceNumber(he.size,xe,Re.size),color:M.coerceColor(he.color,ge,Re.color),weight:M.coerceString(he.weight,ye,Re.weight),style:M.coerceString(he.style,Ae,Re.style),variant:M.coerceString(he.variant,Le,Re.variant),textcase:M.coerceString(he.variant,ce,Re.textcase),lineposition:M.coerceString(he.variant,ke,Re.lineposition),shadow:M.coerceString(he.variant,Pe,Re.shadow)}}function Ce(he,le){return le.type==="waterfall"?le[he.dir].marker.color:he.mcc||he.mc||le.marker.color}ue.exports={style:D,styleTextPoints:P,styleOnSelect:N,getInsideTextFont:O,getOutsideTextFont:H,getBarColor:Ce,resizeText:y}}),Lb=t((me,ue)=>{var g=c(),s=A(),h=Z(),x=kg(),v=_r(),y=D0(),b=l1(),T=mm().tickText,u=Xy(),k=u.recordMinTextSize,M=u.clearMinTextSize,D=B2(),B=Xx(),P=c2(),N=F2(),z=N.text,F=N.textposition,w=e0().appendArrayPointValue,L=P.TEXTPAD;function O(nt){return nt.id}function H(nt){if(nt.ids)return O}function W(nt){return(nt>0)-(nt<0)}function Ce(nt,yi){return nt<yi?1:-1}function he(nt,yi,Ei,vs){var Se=[],Ee=[],X=vs?yi:Ei,Oe=vs?Ei:yi;return Se[0]=X.c2p(nt.s0,!0),Ee[0]=Oe.c2p(nt.p0,!0),Se[1]=X.c2p(nt.s1,!0),Ee[1]=Oe.c2p(nt.p1,!0),vs?[Se,Ee]:[Ee,Se]}function le(nt,yi,Ei,vs){if(!yi.uniformtext.mode&&Y(Ei)){var Se;return vs&&(Se=vs()),nt.transition().duration(Ei.duration).ease(Ei.easing).each("end",function(){Se&&Se()}).each("interrupt",function(){Se&&Se()})}else return nt}function Y(nt){return nt&&nt.duration>0}function Re(nt,yi,Ei,vs,Se,Ee){var X=yi.xaxis,Oe=yi.yaxis,Qe=nt._fullLayout,pe=nt._context.staticPlot;Se||(Se={mode:Qe.barmode,norm:Qe.barmode,gap:Qe.bargap,groupgap:Qe.bargroupgap},M("bar",Qe));var q=h.makeTraceGroups(vs,Ei,"trace bars").each(function(ae){var ve=g.select(this),Te=ae[0].trace,et=ae[0].t,bt=Te.type==="waterfall",dr=Te.type==="funnel",Ol=Te.type==="histogram",Xl=Te.type==="bar",Pp=Xl||dr,t0=0;bt&&Te.connector.visible&&Te.connector.mode==="between"&&(t0=Te.connector.line.width/2);var Wp=Te.orientation==="h",$p=Y(Se),Lo=h.ensureSingle(ve,"g","points"),kl=H(Te),dt=Lo.selectAll("g.point").data(h.identity,kl);dt.enter().append("g").classed("point",!0),dt.exit().remove(),dt.each(function(Bp,Jp){var m0=g.select(this),s0=he(Bp,X,Oe,Wp),y0=s0[0][0],M0=s0[0][1],T0=s0[1][0],G0=s0[1][1],h0=(Wp?M0-y0:G0-T0)===0;h0&&Pp&&B.getLineWidth(Te,Bp)&&(h0=!1),h0||(h0=!s(y0)||!s(M0)||!s(T0)||!s(G0)),Bp.isBlank=h0,h0&&(Wp?M0=y0:G0=T0),t0&&!h0&&(Wp?(y0-=Ce(y0,M0)*t0,M0+=Ce(y0,M0)*t0):(T0-=Ce(T0,G0)*t0,G0+=Ce(T0,G0)*t0));var W0,rm;if(Te.type==="waterfall"){if(!h0){var V0=Te[Bp.dir].marker;W0=V0.line.width,rm=V0.color}}else W0=B.getLineWidth(Te,Bp),rm=Bp.mc||Te.marker.color;function um(y1){var n1=g.round(W0/2%1,2);return Se.gap===0&&Se.groupgap===0?g.round(Math.round(y1)-n1,2):y1}function Uo(y1,n1,Ym){return Ym&&y1===n1?y1:Math.abs(y1-n1)>=2?um(y1):y1>n1?Math.ceil(y1):Math.floor(y1)}var Tp=v.opacity(rm),Be=Tp<1||W0>.01?um:Uo;nt._context.staticPlot||(y0=Be(y0,M0,Wp),M0=Be(M0,y0,Wp),T0=Be(T0,G0,!Wp),G0=Be(G0,T0,!Wp));var ft=Wp?X.c2p:Oe.c2p,mn;Bp.s0>0?mn=Bp._sMax:Bp.s0<0?mn=Bp._sMin:mn=Bp.s1>0?Bp._sMax:Bp._sMin;function Bl(y1,n1){if(!y1)return 0;var Ym=Math.abs(Wp?G0-T0:M0-y0),t1=Math.abs(Wp?M0-y0:G0-T0),Um=Be(Math.abs(ft(mn,!0)-ft(0,!0))),z1=Bp.hasB?Math.min(Ym/2,t1/2):Math.min(Ym/2,Um),F1;if(n1==="%"){var g1=Math.min(50,y1);F1=Ym*(g1/100)}else F1=y1;return Be(Math.max(Math.min(F1,z1),0))}var Vl=Xl||Ol?Bl(et.cornerradiusvalue,et.cornerradiusform):0,Np,Up,Qp="M"+y0+","+T0+"V"+G0+"H"+M0+"V"+T0+"Z",Zp=0;if(Vl&&Bp.s){var Kp=W(Bp.s0)===0||W(Bp.s)===W(Bp.s0)?Bp.s1:Bp.s0;if(Zp=Be(Bp.hasB?0:Math.abs(ft(mn,!0)-ft(Kp,!0))),Zp<Vl){var R0=Ce(y0,M0),k0=Ce(T0,G0),N0=R0===-k0?1:0;if(Wp)if(Bp.hasB)Np="M"+(y0+Vl*R0)+","+T0+"A "+Vl+","+Vl+" 0 0 "+N0+" "+y0+","+(T0+Vl*k0)+"V"+(G0-Vl*k0)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+(y0+Vl*R0)+","+G0+"H"+(M0-Vl*R0)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+M0+","+(G0-Vl*k0)+"V"+(T0+Vl*k0)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+(M0-Vl*R0)+","+T0+"Z";else{Up=Math.abs(M0-y0)+Zp;var lm=Up<Vl?Vl-Math.sqrt(Up*(2*Vl-Up)):0,Im=Zp>0?Math.sqrt(Zp*(2*Vl-Zp)):0,u1=R0>0?Math.max:Math.min;Np="M"+y0+","+T0+"V"+(G0-lm*k0)+"H"+u1(M0-(Vl-Zp)*R0,y0)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+M0+","+(G0-Vl*k0-Im)+"V"+(T0+Vl*k0+Im)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+u1(M0-(Vl-Zp)*R0,y0)+","+(T0+lm*k0)+"Z"}else if(Bp.hasB)Np="M"+(y0+Vl*R0)+","+T0+"A "+Vl+","+Vl+" 0 0 "+N0+" "+y0+","+(T0+Vl*k0)+"V"+(G0-Vl*k0)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+(y0+Vl*R0)+","+G0+"H"+(M0-Vl*R0)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+M0+","+(G0-Vl*k0)+"V"+(T0+Vl*k0)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+(M0-Vl*R0)+","+T0+"Z";else{Up=Math.abs(G0-T0)+Zp;var v1=Up<Vl?Vl-Math.sqrt(Up*(2*Vl-Up)):0,b1=Zp>0?Math.sqrt(Zp*(2*Vl-Zp)):0,Bm=k0>0?Math.max:Math.min;Np="M"+(y0+v1*R0)+","+T0+"V"+Bm(G0-(Vl-Zp)*k0,T0)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+(y0+Vl*R0-b1)+","+G0+"H"+(M0-Vl*R0+b1)+"A "+Vl+","+Vl+" 0 0 "+N0+" "+(M0-v1*R0)+","+Bm(G0-(Vl-Zp)*k0,T0)+"V"+T0+"Z"}}else Np=Qp}else Np=Qp;var fm=le(h.ensureSingle(m0,"path"),Qe,Se,Ee);if(fm.style("vector-effect",pe?"none":"non-scaling-stroke").attr("d",isNaN((M0-y0)*(G0-T0))||h0&&nt._context.staticPlot?"M0,0Z":Np).call(y.setClipUrl,yi.layerClipId,nt),!Qe.uniformtext.mode&&$p){var c1=y.makePointStyleFns(Te);y.singlePointStyle(Bp,fm,Te,c1,nt)}fe(nt,yi,m0,ae,Jp,y0,M0,T0,G0,Vl,Zp,Se,Ee),yi.layerClipId&&y.hideOutsideRangePoint(Bp,m0.select("text"),X,Oe,Te.xcalendar,Te.ycalendar)});var yp=Te.cliponaxis===!1;y.setClipUrl(ve,yp?null:yi.layerClipId,nt)});b.getComponentMethod("errorbars","plot")(nt,q,yi,Se)}function fe(nt,yi,Ei,vs,Se,Ee,X,Oe,Qe,pe,q,ae,ve){var Te=yi.xaxis,et=yi.yaxis,bt=nt._fullLayout,dr;function Ol(Up,Qp,Zp){var Kp=h.ensureSingle(Up,"text").text(Qp).attr({class:"bartext bartext-"+dr,"text-anchor":"middle","data-notex":1}).call(y.font,Zp).call(x.convertToTspans,nt);return Kp}var Xl=vs[0].trace,Pp=Xl.orientation==="h",t0=ke(bt,vs,Se,Te,et);dr=Pe(Xl,Se);var Wp=ae.mode==="stack"||ae.mode==="relative",$p=vs[Se],Lo=!Wp||$p._outmost,kl=$p.hasB,dt=pe&&pe-q>L;if(!t0||dr==="none"||($p.isBlank||Ee===X||Oe===Qe)&&(dr==="auto"||dr==="inside")){Ei.select("text").remove();return}var yp=bt.font,Bp=D.getBarColor(vs[Se],Xl),Jp=D.getInsideTextFont(Xl,Se,yp,Bp),m0=D.getOutsideTextFont(Xl,Se,yp),s0=Xl.insidetextanchor||"end",y0=Ei.datum();Pp?Te.type==="log"&&y0.s0<=0&&(Te.range[0]<Te.range[1]?Ee=0:Ee=Te._length):et.type==="log"&&y0.s0<=0&&(et.range[0]<et.range[1]?Oe=et._length:Oe=0);var M0=Math.abs(X-Ee),T0=Math.abs(Qe-Oe),G0=M0-2*L,h0=T0-2*L,W0,rm,V0,um,Uo;if(dr==="outside"&&!Lo&&!$p.hasB&&(dr="inside"),dr==="auto")if(Lo){dr="inside",Uo=h.ensureUniformFontSize(nt,Jp),W0=Ol(Ei,t0,Uo),rm=y.bBox(W0.node()),V0=rm.width,um=rm.height;var Tp=V0>0&&um>0,Be;dt?kl?Be=xe(G0-2*pe,h0,V0,um,Pp)||xe(G0,h0-2*pe,V0,um,Pp):Pp?Be=xe(G0-(pe-q),h0,V0,um,Pp)||xe(G0,h0-2*(pe-q),V0,um,Pp):Be=xe(G0,h0-(pe-q),V0,um,Pp)||xe(G0-2*(pe-q),h0,V0,um,Pp):Be=xe(G0,h0,V0,um,Pp),Tp&&Be?dr="inside":(dr="outside",W0.remove(),W0=null)}else dr="inside";if(!W0){Uo=h.ensureUniformFontSize(nt,dr==="outside"?m0:Jp),W0=Ol(Ei,t0,Uo);var ft=W0.attr("transform");if(W0.attr("transform",""),rm=y.bBox(W0.node()),V0=rm.width,um=rm.height,W0.attr("transform",ft),V0<=0||um<=0){W0.remove();return}}var mn=Xl.textangle,Bl,Vl;dr==="outside"?(Vl=Xl.constraintext==="both"||Xl.constraintext==="outside",Bl=ce(Ee,X,Oe,Qe,rm,{isHorizontal:Pp,constrained:Vl,angle:mn})):(Vl=Xl.constraintext==="both"||Xl.constraintext==="inside",Bl=Ae(Ee,X,Oe,Qe,rm,{isHorizontal:Pp,constrained:Vl,angle:mn,anchor:s0,hasB:kl,r:pe,overhead:q})),Bl.fontSize=Uo.size,k(Xl.type==="histogram"?"bar":Xl.type,Bl,bt),$p.transform=Bl;var Np=le(W0,bt,ae,ve);h.setTransormAndDisplay(Np,Bl)}function xe(nt,yi,Ei,vs,Se){if(nt<0||yi<0)return!1;var Ee=Ei<=nt&&vs<=yi,X=Ei<=yi&&vs<=nt,Oe=Se?nt>=Ei*(yi/vs):yi>=vs*(nt/Ei);return Ee||X||Oe}function ge(nt){return nt==="auto"?0:nt}function ye(nt,yi){var Ei=Math.PI/180*yi,vs=Math.abs(Math.sin(Ei)),Se=Math.abs(Math.cos(Ei));return{x:nt.width*Se+nt.height*vs,y:nt.width*vs+nt.height*Se}}function Ae(nt,yi,Ei,vs,Se,Ee){var X=!!Ee.isHorizontal,Oe=!!Ee.constrained,Qe=Ee.angle||0,pe=Ee.anchor,q=pe==="end",ae=pe==="start",ve=Ee.leftToRight||0,Te=(ve+1)/2,et=1-Te,bt=Ee.hasB,dr=Ee.r,Ol=Ee.overhead,Xl=Se.width,Pp=Se.height,t0=Math.abs(yi-nt),Wp=Math.abs(vs-Ei),$p=t0>2*L&&Wp>2*L?L:0;t0-=2*$p,Wp-=2*$p;var Lo=ge(Qe);Qe==="auto"&&!(Xl<=t0&&Pp<=Wp)&&(Xl>t0||Pp>Wp)&&(!(Xl>Wp||Pp>t0)||Xl<Pp!=t0<Wp)&&(Lo+=90);var kl=ye(Se,Lo),dt,yp;if(dr&&dr-Ol>L){var Bp=Le(nt,yi,Ei,vs,kl,dr,Ol,X,bt);dt=Bp.scale,yp=Bp.pad}else dt=1,Oe&&(dt=Math.min(1,t0/kl.x,Wp/kl.y)),yp=0;var Jp=Se.left*et+Se.right*Te,m0=(Se.top+Se.bottom)/2,s0=(nt+L)*et+(yi-L)*Te,y0=(Ei+vs)/2,M0=0,T0=0;if(ae||q){var G0=(X?kl.x:kl.y)/2;dr&&(q||bt)&&($p+=yp);var h0=X?Ce(nt,yi):Ce(Ei,vs);X?ae?(s0=nt+h0*$p,M0=-h0*G0):(s0=yi-h0*$p,M0=h0*G0):ae?(y0=Ei+h0*$p,T0=-h0*G0):(y0=vs-h0*$p,T0=h0*G0)}return{textX:Jp,textY:m0,targetX:s0,targetY:y0,anchorX:M0,anchorY:T0,scale:dt,rotate:Lo}}function Le(nt,yi,Ei,vs,Se,Ee,X,Oe,Qe){var pe=Math.max(0,Math.abs(yi-nt)-2*L),q=Math.max(0,Math.abs(vs-Ei)-2*L),ae=Ee-L,ve=X?ae-Math.sqrt(ae*ae-(ae-X)*(ae-X)):ae,Te=Qe?ae*2:Oe?ae-X:2*ve,et=Qe?ae*2:Oe?2*ve:ae-X,bt,dr,Ol,Xl,Pp;return Se.y/Se.x>=q/(pe-Te)?Xl=q/Se.y:Se.y/Se.x<=(q-et)/pe?Xl=pe/Se.x:!Qe&&Oe?(bt=Se.x*Se.x+Se.y*Se.y/4,dr=-2*Se.x*(pe-ae)-Se.y*(q/2-ae),Ol=(pe-ae)*(pe-ae)+(q/2-ae)*(q/2-ae)-ae*ae,Xl=(-dr+Math.sqrt(dr*dr-4*bt*Ol))/(2*bt)):Qe?(bt=(Se.x*Se.x+Se.y*Se.y)/4,dr=-Se.x*(pe/2-ae)-Se.y*(q/2-ae),Ol=(pe/2-ae)*(pe/2-ae)+(q/2-ae)*(q/2-ae)-ae*ae,Xl=(-dr+Math.sqrt(dr*dr-4*bt*Ol))/(2*bt)):(bt=Se.x*Se.x/4+Se.y*Se.y,dr=-Se.x*(pe/2-ae)-2*Se.y*(q-ae),Ol=(pe/2-ae)*(pe/2-ae)+(q-ae)*(q-ae)-ae*ae,Xl=(-dr+Math.sqrt(dr*dr-4*bt*Ol))/(2*bt)),Xl=Math.min(1,Xl),Oe?Pp=Math.max(0,ae-Math.sqrt(Math.max(0,ae*ae-(ae-(q-Se.y*Xl)/2)*(ae-(q-Se.y*Xl)/2)))-X):Pp=Math.max(0,ae-Math.sqrt(Math.max(0,ae*ae-(ae-(pe-Se.x*Xl)/2)*(ae-(pe-Se.x*Xl)/2)))-X),{scale:Xl,pad:Pp}}function ce(nt,yi,Ei,vs,Se,Ee){var X=!!Ee.isHorizontal,Oe=!!Ee.constrained,Qe=Ee.angle||0,pe=Se.width,q=Se.height,ae=Math.abs(yi-nt),ve=Math.abs(vs-Ei),Te;X?Te=ve>2*L?L:0:Te=ae>2*L?L:0;var et=1;Oe&&(et=X?Math.min(1,ve/q):Math.min(1,ae/pe));var bt=ge(Qe),dr=ye(Se,bt),Ol=(X?dr.x:dr.y)/2,Xl=(Se.left+Se.right)/2,Pp=(Se.top+Se.bottom)/2,t0=(nt+yi)/2,Wp=(Ei+vs)/2,$p=0,Lo=0,kl=X?Ce(yi,nt):Ce(Ei,vs);return X?(t0=yi-kl*Te,$p=kl*Ol):(Wp=vs+kl*Te,Lo=-kl*Ol),{textX:Xl,textY:Pp,targetX:t0,targetY:Wp,anchorX:$p,anchorY:Lo,scale:et,rotate:bt}}function ke(nt,yi,Ei,vs,Se){var Ee=yi[0].trace,X=Ee.texttemplate,Oe;return X?Oe=tt(nt,yi,Ei,vs,Se):Ee.textinfo?Oe=Ke(yi,Ei,vs,Se):Oe=B.getValue(Ee.text,Ei),B.coerceString(z,Oe)}function Pe(nt,yi){var Ei=B.getValue(nt.textposition,yi);return B.coerceEnumerated(F,Ei)}function tt(nt,yi,Ei,vs,Se){var Ee=yi[0].trace,X=h.castOption(Ee,Ei,"texttemplate");if(!X)return"";var Oe=Ee.type==="histogram",Qe=Ee.type==="waterfall",pe=Ee.type==="funnel",q=Ee.orientation==="h",ae,ve,Te,et;q?(ae="y",ve=Se,Te="x",et=vs):(ae="x",ve=vs,Te="y",et=Se);function bt($p){return T(ve,ve.c2l($p),!0).text}function dr($p){return T(et,et.c2l($p),!0).text}var Ol=yi[Ei],Xl={};Xl.label=Ol.p,Xl.labelLabel=Xl[ae+"Label"]=bt(Ol.p);var Pp=h.castOption(Ee,Ol.i,"text");(Pp===0||Pp)&&(Xl.text=Pp),Xl.value=Ol.s,Xl.valueLabel=Xl[Te+"Label"]=dr(Ol.s);var t0={};w(t0,Ee,Ol.i),(Oe||t0.x===void 0)&&(t0.x=q?Xl.value:Xl.label),(Oe||t0.y===void 0)&&(t0.y=q?Xl.label:Xl.value),(Oe||t0.xLabel===void 0)&&(t0.xLabel=q?Xl.valueLabel:Xl.labelLabel),(Oe||t0.yLabel===void 0)&&(t0.yLabel=q?Xl.labelLabel:Xl.valueLabel),Qe&&(Xl.delta=+Ol.rawS||Ol.s,Xl.deltaLabel=dr(Xl.delta),Xl.final=Ol.v,Xl.finalLabel=dr(Xl.final),Xl.initial=Xl.final-Xl.delta,Xl.initialLabel=dr(Xl.initial)),pe&&(Xl.value=Ol.s,Xl.valueLabel=dr(Xl.value),Xl.percentInitial=Ol.begR,Xl.percentInitialLabel=h.formatPercent(Ol.begR),Xl.percentPrevious=Ol.difR,Xl.percentPreviousLabel=h.formatPercent(Ol.difR),Xl.percentTotal=Ol.sumR,Xl.percenTotalLabel=h.formatPercent(Ol.sumR));var Wp=h.castOption(Ee,Ol.i,"customdata");return Wp&&(Xl.customdata=Wp),h.texttemplateString(X,Xl,nt._d3locale,t0,Xl,Ee._meta||{})}function Ke(nt,yi,Ei,vs){var Se=nt[0].trace,Ee=Se.orientation==="h",X=Se.type==="waterfall",Oe=Se.type==="funnel";function Qe(Wp){var $p=Ee?vs:Ei;return T($p,Wp,!0).text}function pe(Wp){var $p=Ee?Ei:vs;return T($p,+Wp,!0).text}var q=Se.textinfo,ae=nt[yi],ve=q.split("+"),Te=[],et,bt=function(Wp){return ve.indexOf(Wp)!==-1};if(bt("label")&&Te.push(Qe(nt[yi].p)),bt("text")&&(et=h.castOption(Se,ae.i,"text"),(et===0||et)&&Te.push(et)),X){var dr=+ae.rawS||ae.s,Ol=ae.v,Xl=Ol-dr;bt("initial")&&Te.push(pe(Xl)),bt("delta")&&Te.push(pe(dr)),bt("final")&&Te.push(pe(Ol))}if(Oe){bt("value")&&Te.push(pe(ae.s));var Pp=0;bt("percent initial")&&Pp++,bt("percent previous")&&Pp++,bt("percent total")&&Pp++;var t0=Pp>1;bt("percent initial")&&(et=h.formatPercent(ae.begR),t0&&(et+=" of initial"),Te.push(et)),bt("percent previous")&&(et=h.formatPercent(ae.difR),t0&&(et+=" of previous"),Te.push(et)),bt("percent total")&&(et=h.formatPercent(ae.sumR),t0&&(et+=" of total"),Te.push(et))}return Te.join("<br>")}ue.exports={plot:Re,toMoveInsideBar:Ae}}),j2=t((me,ue)=>{var g=Nv(),s=l1(),h=_r(),x=Z().fillText,v=Xx().getLineWidth,y=mm().hoverLabelText,b=C().BADNUM;function T(M,D,B,P,N){var z=u(M,D,B,P,N);if(z){var F=z.cd,w=F[0].trace,L=F[z.index];return z.color=k(w,L),s.getComponentMethod("errorbars","hoverInfo")(L,w,z),[z]}}function u(M,D,B,P,N){var z=M.cd,F=z[0].trace,w=z[0].t,L=P==="closest",O=F.type==="waterfall",H=M.maxHoverDistance,W=M.maxSpikeDistance,Ce,he,le,Y,Re,fe,xe;F.orientation==="h"?(Ce=B,he=D,le="y",Y="x",Re=vs,fe=nt):(Ce=D,he=B,le="x",Y="y",fe=vs,Re=nt);var ge=F[le+"period"],ye=L||ge;function Ae(et){return ce(et,-1)}function Le(et){return ce(et,1)}function ce(et,bt){var dr=et.w;return et[le]+bt*dr/2}function ke(et){return et[le+"End"]-et[le+"Start"]}var Pe=L?Ae:ge?function(et){return et.p-ke(et)/2}:function(et){return Math.min(Ae(et),et.p-w.bardelta/2)},tt=L?Le:ge?function(et){return et.p+ke(et)/2}:function(et){return Math.max(Le(et),et.p+w.bardelta/2)};function Ke(et,bt,dr){return N.finiteRange&&(dr=0),g.inbox(et-Ce,bt-Ce,dr+Math.min(1,Math.abs(bt-et)/xe)-1)}function nt(et){return Ke(Pe(et),tt(et),H)}function yi(et){return Ke(Ae(et),Le(et),W)}function Ei(et){var bt=et[Y];if(O){var dr=Math.abs(et.rawS)||0;he>0?bt+=dr:he<0&&(bt-=dr)}return bt}function vs(et){var bt=he,dr=et.b,Ol=Ei(et);return g.inbox(dr-bt,Ol-bt,H+(Ol-bt)/(Ol-dr)-1)}function Se(et){var bt=he,dr=et.b,Ol=Ei(et);return g.inbox(dr-bt,Ol-bt,W+(Ol-bt)/(Ol-dr)-1)}var Ee=M[le+"a"],X=M[Y+"a"];xe=Math.abs(Ee.r2c(Ee.range[1])-Ee.r2c(Ee.range[0]));function Oe(et){return(Re(et)+fe(et))/2}var Qe=g.getDistanceFunction(P,Re,fe,Oe);if(g.getClosest(z,Qe,M),M.index!==!1&&z[M.index].p!==b){ye||(Pe=function(et){return Math.min(Ae(et),et.p-w.bargroupwidth/2)},tt=function(et){return Math.max(Le(et),et.p+w.bargroupwidth/2)});var pe=M.index,q=z[pe],ae=F.base?q.b+q.s:q.s;M[Y+"0"]=M[Y+"1"]=X.c2p(q[Y],!0),M[Y+"LabelVal"]=ae;var ve=w.extents[w.extents.round(q.p)];M[le+"0"]=Ee.c2p(L?Pe(q):ve[0],!0),M[le+"1"]=Ee.c2p(L?tt(q):ve[1],!0);var Te=q.orig_p!==void 0;return M[le+"LabelVal"]=Te?q.orig_p:q.p,M.labelLabel=y(Ee,M[le+"LabelVal"],F[le+"hoverformat"]),M.valueLabel=y(X,M[Y+"LabelVal"],F[Y+"hoverformat"]),M.baseLabel=y(X,q.b,F[Y+"hoverformat"]),M.spikeDistance=(Se(q)+yi(q))/2,M[le+"Spike"]=Ee.c2p(q.p,!0),x(q,F,M),M.hovertemplate=F.hovertemplate,M}}function k(M,D){var B=D.mcc||M.marker.color,P=D.mlcc||M.marker.line.color,N=v(M,D);if(h.opacity(B))return B;if(h.opacity(P)&&N)return P}ue.exports={hoverPoints:T,hoverOnBars:u,getTraceColor:k}}),H2=t((me,ue)=>{ue.exports=function(g,s,h){return g.x="xVal"in s?s.xVal:s.x,g.y="yVal"in s?s.yVal:s.y,s.xa&&(g.xaxis=s.xa),s.ya&&(g.yaxis=s.ya),h.orientation==="h"?(g.label=g.y,g.value=g.x):(g.label=g.x,g.value=g.y),g}}),B3=t((me,ue)=>{ue.exports=function(s,h){var x=s.cd,v=s.xaxis,y=s.yaxis,b=x[0].trace,T=b.type==="funnel",u=b.orientation==="h",k=[],M;if(h===!1)for(M=0;M<x.length;M++)x[M].selected=0;else for(M=0;M<x.length;M++){var D=x[M],B="ct"in D?D.ct:g(D,v,y,u,T);h.contains(B,!1,M,s)?(k.push({pointNumber:M,x:v.c2d(D.x),y:y.c2d(D.y)}),D.selected=1):D.selected=0}return k};function g(s,h,x,v,y){var b=h.c2p(v?s.s0:s.p0,!0),T=h.c2p(v?s.s1:s.p1,!0),u=x.c2p(v?s.p0:s.s0,!0),k=x.c2p(v?s.p1:s.s1,!0);return y?[(b+T)/2,(u+k)/2]:v?[T,(u+k)/2]:[(b+T)/2,k]}}),j3=t((me,ue)=>{ue.exports={attributes:F2(),layoutAttributes:Sx(),supplyDefaults:Wy().supplyDefaults,crossTraceDefaults:Wy().crossTraceDefaults,supplyLayoutDefaults:Rb(),calc:Tx(),crossTraceCalc:L2().crossTraceCalc,colorbar:jx(),arraysToCalcdata:A_(),plot:Lb().plot,style:B2().style,styleOnSelect:B2().styleOnSelect,hoverPoints:j2().hoverPoints,eventData:H2(),selectPoints:B3(),moduleType:"trace",name:"bar",basePlotModule:xx(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}}),u2=t((me,ue)=>{ue.exports=j3()}),G2=t((me,ue)=>{var g=mr(),s=Tb().attributes,h=Xe(),x=Sp(),v=_1().hovertemplateAttrs,y=_1().texttemplateAttrs,b=Fe().extendFlat,T=r0().pattern,u=h({editType:"plot",arrayOk:!0,colorEditType:"plot"});ue.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:T,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:v({},{keys:["label","color","value","percent","text"]}),texttemplate:y({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:b({},u,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},u,{}),outsidetextfont:b({},u,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},u,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:s({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}}),H3=t((me,ue)=>{var g=A(),s=Z(),h=G2(),x=Tb().defaults,v=Wy().handleText,y=Z().coercePattern;function b(k,M){var D=s.isArrayOrTypedArray(k),B=s.isArrayOrTypedArray(M),P=Math.min(D?k.length:1/0,B?M.length:1/0);if(isFinite(P)||(P=0),P&&B){for(var N,z=0;z<P;z++){var F=M[z];if(g(F)&&F>0){N=!0;break}}N||(P=0)}return{hasLabels:D,hasValues:B,len:P}}function T(k,M,D,B,P){var N=B("marker.line.width");N&&B("marker.line.color",P?void 0:D.paper_bgcolor);var z=B("marker.colors");y(B,"marker.pattern",z),k.marker&&!M.marker.pattern.fgcolor&&(M.marker.pattern.fgcolor=k.marker.colors),M.marker.pattern.bgcolor||(M.marker.pattern.bgcolor=D.paper_bgcolor)}function u(k,M,D,B){function P(fe,xe){return s.coerce(k,M,h,fe,xe)}var N=P("labels"),z=P("values"),F=b(N,z),w=F.len;if(M._hasLabels=F.hasLabels,M._hasValues=F.hasValues,!M._hasLabels&&M._hasValues&&(P("label0"),P("dlabel")),!w){M.visible=!1;return}M._length=w,T(k,M,B,P,!0),P("scalegroup");var L=P("text"),O=P("texttemplate"),H;if(O||(H=P("textinfo",s.isArrayOrTypedArray(L)?"text+percent":"percent")),P("hovertext"),P("hovertemplate"),O||H&&H!=="none"){var W=P("textposition");v(k,M,B,P,W,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var Ce=Array.isArray(W)||W==="auto",he=Ce||W==="outside";he&&P("automargin"),(W==="inside"||W==="auto"||Array.isArray(W))&&P("insidetextorientation")}else H==="none"&&P("textposition","none");x(M,B,P);var le=P("hole"),Y=P("title.text");if(Y){var Re=P("title.position",le?"middle center":"top center");!le&&Re==="middle center"&&(M.title.position="top center"),s.coerceFont(P,"title.font",B.font)}P("sort"),P("direction"),P("rotation"),P("pull")}ue.exports={handleLabelsAndValues:b,handleMarkerDefaults:T,supplyDefaults:u}}),C_=t((me,ue)=>{ue.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}}),Db=t((me,ue)=>{var g=Z(),s=C_();ue.exports=function(h,x){function v(y,b){return g.coerce(h,x,s,y,b)}v("hiddenlabels"),v("piecolorway",x.colorway),v("extendpiecolors")}}),Cy=t((me,ue)=>{var g=A(),s=He(),h=_r(),x={};function v(u,k){var M=[],D=u._fullLayout,B=D.hiddenlabels||[],P=k.labels,N=k.marker.colors||[],z=k.values,F=k._length,w=k._hasValues&&F,L,O;if(k.dlabel)for(P=new Array(F),L=0;L<F;L++)P[L]=String(k.label0+L*k.dlabel);var H={},W=y(D["_"+k.type+"colormap"]),Ce=0,he=!1;for(L=0;L<F;L++){var le,Y,Re;if(w){if(le=z[L],!g(le))continue;le=+le}else le=1;Y=P[L],(Y===void 0||Y==="")&&(Y=L),Y=String(Y);var fe=H[Y];fe===void 0?(H[Y]=M.length,Re=B.indexOf(Y)!==-1,Re||(Ce+=le),M.push({v:le,label:Y,color:W(N[L],Y),i:L,pts:[L],hidden:Re})):(he=!0,O=M[fe],O.v+=le,O.pts.push(L),O.hidden||(Ce+=le),O.color===!1&&N[L]&&(O.color=W(N[L],Y)))}M=M.filter(function(ge){return ge.v>=0});var xe=k.type==="funnelarea"?he:k.sort;return xe&&M.sort(function(ge,ye){return ye.v-ge.v}),M[0]&&(M[0].vTotal=Ce),M}function y(u){return function(k,M){return!k||(k=s(k),!k.isValid())?!1:(k=h.addOpacity(k,k.getAlpha()),u[M]||(u[M]=k),k)}}function b(u,k){var M=(k||{}).type;M||(M="pie");var D=u._fullLayout,B=u.calcdata,P=D[M+"colorway"],N=D["_"+M+"colormap"];D["extend"+M+"colors"]&&(P=T(P,x));for(var z=0,F=0;F<B.length;F++){var w=B[F],L=w[0].trace.type;if(L===M)for(var O=0;O<w.length;O++){var H=w[O];H.color===!1&&(N[H.label]?H.color=N[H.label]:(N[H.label]=H.color=P[z%P.length],z++))}}}function T(u,k){var M,D=JSON.stringify(u),B=k[D];if(!B){for(B=u.slice(),M=0;M<u.length;M++)B.push(s(u[M]).lighten(20).toHexString());for(M=0;M<u.length;M++)B.push(s(u[M]).darken(20).toHexString());k[D]=B}return B}ue.exports={calc:v,crossTraceCalc:b,makePullColorFn:y,generateExtendedColors:T}}),Vy=t((me,ue)=>{var g=e0().appendArrayMultiPointValues;ue.exports=function(s,h){var x={curveNumber:h.index,pointNumbers:s.pts,data:h._input,fullData:h,label:s.label,color:s.color,value:s.v,percent:s.percent,text:s.text,bbox:s.bbox,v:s.v};return s.pts.length===1&&(x.pointNumber=x.i=s.pts[0]),g(x,h,s.pts),h.type==="funnelarea"&&(delete x.v,delete x.i),x}}),Ex=t((me,ue)=>{var g=c(),s=vg(),h=Nv(),x=_r(),v=D0(),y=Z(),b=y.strScale,T=y.strTranslate,u=kg(),k=Xy(),M=k.recordMinTextSize,D=k.clearMinTextSize,B=c2().TEXTPAD,P=s1(),N=Vy(),z=Z().isValidTextValue;function F(Ee,X){var Oe=Ee._context.staticPlot,Qe=Ee._fullLayout,pe=Qe._size;D("pie",Qe),W(X,Ee),Ke(X,pe);var q=y.makeTraceGroups(Qe._pielayer,X,"trace").each(function(ae){var ve=g.select(this),Te=ae[0],et=Te.trace;yi(ae),ve.attr("stroke-linejoin","round"),ve.each(function(){var bt=g.select(this).selectAll("g.slice").data(ae);bt.enter().append("g").classed("slice",!0),bt.exit().remove();var dr=[[[],[]],[[],[]]],Ol=!1;bt.each(function(dt,yp){if(dt.hidden){g.select(this).selectAll("path,g").remove();return}dt.pointNumber=dt.i,dt.curveNumber=et.index,dr[dt.pxmid[1]<0?0:1][dt.pxmid[0]<0?0:1].push(dt);var Bp=Te.cx,Jp=Te.cy,m0=g.select(this),s0=m0.selectAll("path.surface").data([dt]);if(s0.enter().append("path").classed("surface",!0).style({"pointer-events":Oe?"none":"all"}),m0.call(L,Ee,ae),et.pull){var y0=+P.castOption(et.pull,dt.pts)||0;y0>0&&(Bp+=y0*dt.pxmid[0],Jp+=y0*dt.pxmid[1])}dt.cxFinal=Bp,dt.cyFinal=Jp;function M0(um,Uo,Tp,Be){var ft=Be*(Uo[0]-um[0]),mn=Be*(Uo[1]-um[1]);return"a"+Be*Te.r+","+Be*Te.r+" 0 "+dt.largeArc+(Tp?" 1 ":" 0 ")+ft+","+mn}var T0=et.hole;if(dt.v===Te.vTotal){var G0="M"+(Bp+dt.px0[0])+","+(Jp+dt.px0[1])+M0(dt.px0,dt.pxmid,!0,1)+M0(dt.pxmid,dt.px0,!0,1)+"Z";T0?s0.attr("d","M"+(Bp+T0*dt.px0[0])+","+(Jp+T0*dt.px0[1])+M0(dt.px0,dt.pxmid,!1,T0)+M0(dt.pxmid,dt.px0,!1,T0)+"Z"+G0):s0.attr("d",G0)}else{var h0=M0(dt.px0,dt.px1,!0,1);if(T0){var W0=1-T0;s0.attr("d","M"+(Bp+T0*dt.px1[0])+","+(Jp+T0*dt.px1[1])+M0(dt.px1,dt.px0,!1,T0)+"l"+W0*dt.px0[0]+","+W0*dt.px0[1]+h0+"Z")}else s0.attr("d","M"+Bp+","+Jp+"l"+dt.px0[0]+","+dt.px0[1]+h0+"Z")}vs(Ee,dt,Te);var rm=P.castOption(et.textposition,dt.pts),V0=m0.selectAll("g.slicetext").data(dt.text&&rm!=="none"?[0]:[]);V0.enter().append("g").classed("slicetext",!0),V0.exit().remove(),V0.each(function(){var um=y.ensureSingle(g.select(this),"text","",function(Np){Np.attr("data-notex",1)}),Uo=y.ensureUniformFontSize(Ee,rm==="outside"?O(et,dt,Qe.font):H(et,dt,Qe.font));um.text(dt.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,Uo).call(u.convertToTspans,Ee);var Tp=v.bBox(um.node()),Be;if(rm==="outside")Be=ye(Tp,dt);else if(Be=Ce(Tp,dt,Te),rm==="auto"&&Be.scale<1){var ft=y.ensureUniformFontSize(Ee,et.outsidetextfont);um.call(v.font,ft),Tp=v.bBox(um.node()),Be=ye(Tp,dt)}var mn=Be.textPosAngle,Bl=mn===void 0?dt.pxmid:Ei(Te.r,mn);if(Be.targetX=Bp+Bl[0]*Be.rCenter+(Be.x||0),Be.targetY=Jp+Bl[1]*Be.rCenter+(Be.y||0),Se(Be,Tp),Be.outside){var Vl=Be.targetY;dt.yLabelMin=Vl-Tp.height/2,dt.yLabelMid=Vl,dt.yLabelMax=Vl+Tp.height/2,dt.labelExtraX=0,dt.labelExtraY=0,Ol=!0}Be.fontSize=Uo.size,M(et.type,Be,Qe),ae[yp].transform=Be,y.setTransormAndDisplay(um,Be)})});var Xl=g.select(this).selectAll("g.titletext").data(et.title.text?[0]:[]);if(Xl.enter().append("g").classed("titletext",!0),Xl.exit().remove(),Xl.each(function(){var dt=y.ensureSingle(g.select(this),"text","",function(Jp){Jp.attr("data-notex",1)}),yp=et.title.text;et._meta&&(yp=y.templateString(yp,et._meta)),dt.text(yp).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,et.title.font).call(u.convertToTspans,Ee);var Bp;et.title.position==="middle center"?Bp=Ae(Te):Bp=Le(Te,pe),dt.attr("transform",T(Bp.x,Bp.y)+b(Math.min(1,Bp.scale))+T(Bp.tx,Bp.ty))}),Ol&&tt(dr,et),w(bt,et),Ol&&et.automargin){var Pp=v.bBox(ve.node()),t0=et.domain,Wp=pe.w*(t0.x[1]-t0.x[0]),$p=pe.h*(t0.y[1]-t0.y[0]),Lo=(.5*Wp-Te.r)/pe.w,kl=(.5*$p-Te.r)/pe.h;s.autoMargin(Ee,"pie."+et.uid+".automargin",{xl:t0.x[0]-Lo,xr:t0.x[1]+Lo,yb:t0.y[0]-kl,yt:t0.y[1]+kl,l:Math.max(Te.cx-Te.r-Pp.left,0),r:Math.max(Pp.right-(Te.cx+Te.r),0),b:Math.max(Pp.bottom-(Te.cy+Te.r),0),t:Math.max(Te.cy-Te.r-Pp.top,0),pad:5})}})});setTimeout(function(){q.selectAll("tspan").each(function(){var ae=g.select(this);ae.attr("dy")&&ae.attr("dy",ae.attr("dy"))})},0)}function w(Ee,X){Ee.each(function(Oe){var Qe=g.select(this);if(!Oe.labelExtraX&&!Oe.labelExtraY){Qe.select("path.textline").remove();return}var pe=Qe.select("g.slicetext text");Oe.transform.targetX+=Oe.labelExtraX,Oe.transform.targetY+=Oe.labelExtraY,y.setTransormAndDisplay(pe,Oe.transform);var q=Oe.cxFinal+Oe.pxmid[0],ae=Oe.cyFinal+Oe.pxmid[1],ve="M"+q+","+ae,Te=(Oe.yLabelMax-Oe.yLabelMin)*(Oe.pxmid[0]<0?-1:1)/4;if(Oe.labelExtraX){var et=Oe.labelExtraX*Oe.pxmid[1]/Oe.pxmid[0],bt=Oe.yLabelMid+Oe.labelExtraY-(Oe.cyFinal+Oe.pxmid[1]);Math.abs(et)>Math.abs(bt)?ve+="l"+bt*Oe.pxmid[0]/Oe.pxmid[1]+","+bt+"H"+(q+Oe.labelExtraX+Te):ve+="l"+Oe.labelExtraX+","+et+"v"+(bt-et)+"h"+Te}else ve+="V"+(Oe.yLabelMid+Oe.labelExtraY)+"h"+Te;y.ensureSingle(Qe,"path","textline").call(x.stroke,X.outsidetextfont.color).attr({"stroke-width":Math.min(2,X.outsidetextfont.size/8),d:ve,fill:"none"})})}function L(Ee,X,Oe){var Qe=Oe[0],pe=Qe.cx,q=Qe.cy,ae=Qe.trace,ve=ae.type==="funnelarea";"_hasHoverLabel"in ae||(ae._hasHoverLabel=!1),"_hasHoverEvent"in ae||(ae._hasHoverEvent=!1),Ee.on("mouseover",function(Te){var et=X._fullLayout,bt=X._fullData[ae.index];if(!(X._dragging||et.hovermode===!1)){var dr=bt.hoverinfo;if(Array.isArray(dr)&&(dr=h.castHoverinfo({hoverinfo:[P.castOption(dr,Te.pts)],_module:ae._module},et,0)),dr==="all"&&(dr="label+text+value+percent+name"),bt.hovertemplate||dr!=="none"&&dr!=="skip"&&dr){var Ol=Te.rInscribed||0,Xl=pe+Te.pxmid[0]*(1-Ol),Pp=q+Te.pxmid[1]*(1-Ol),t0=et.separators,Wp=[];if(dr&&dr.indexOf("label")!==-1&&Wp.push(Te.label),Te.text=P.castOption(bt.hovertext||bt.text,Te.pts),dr&&dr.indexOf("text")!==-1){var $p=Te.text;y.isValidTextValue($p)&&Wp.push($p)}Te.value=Te.v,Te.valueLabel=P.formatPieValue(Te.v,t0),dr&&dr.indexOf("value")!==-1&&Wp.push(Te.valueLabel),Te.percent=Te.v/Qe.vTotal,Te.percentLabel=P.formatPiePercent(Te.percent,t0),dr&&dr.indexOf("percent")!==-1&&Wp.push(Te.percentLabel);var Lo=bt.hoverlabel,kl=Lo.font,dt=[];h.loneHover({trace:ae,x0:Xl-Ol*Qe.r,x1:Xl+Ol*Qe.r,y:Pp,_x0:ve?pe+Te.TL[0]:Xl-Ol*Qe.r,_x1:ve?pe+Te.TR[0]:Xl+Ol*Qe.r,_y0:ve?q+Te.TL[1]:Pp-Ol*Qe.r,_y1:ve?q+Te.BL[1]:Pp+Ol*Qe.r,text:Wp.join("<br>"),name:bt.hovertemplate||dr.indexOf("name")!==-1?bt.name:void 0,idealAlign:Te.pxmid[0]<0?"left":"right",color:P.castOption(Lo.bgcolor,Te.pts)||Te.color,borderColor:P.castOption(Lo.bordercolor,Te.pts),fontFamily:P.castOption(kl.family,Te.pts),fontSize:P.castOption(kl.size,Te.pts),fontColor:P.castOption(kl.color,Te.pts),nameLength:P.castOption(Lo.namelength,Te.pts),textAlign:P.castOption(Lo.align,Te.pts),hovertemplate:P.castOption(bt.hovertemplate,Te.pts),hovertemplateLabels:Te,eventData:[N(Te,bt)]},{container:et._hoverlayer.node(),outerContainer:et._paper.node(),gd:X,inOut_bbox:dt}),Te.bbox=dt[0],ae._hasHoverLabel=!0}ae._hasHoverEvent=!0,X.emit("plotly_hover",{points:[N(Te,bt)],event:g.event})}}),Ee.on("mouseout",function(Te){var et=X._fullLayout,bt=X._fullData[ae.index],dr=g.select(this).datum();ae._hasHoverEvent&&(Te.originalEvent=g.event,X.emit("plotly_unhover",{points:[N(dr,bt)],event:g.event}),ae._hasHoverEvent=!1),ae._hasHoverLabel&&(h.loneUnhover(et._hoverlayer.node()),ae._hasHoverLabel=!1)}),Ee.on("click",function(Te){var et=X._fullLayout,bt=X._fullData[ae.index];X._dragging||et.hovermode===!1||(X._hoverdata=[N(Te,bt)],h.click(X,g.event))})}function O(Ee,X,Oe){var Qe=P.castOption(Ee.outsidetextfont.color,X.pts)||P.castOption(Ee.textfont.color,X.pts)||Oe.color,pe=P.castOption(Ee.outsidetextfont.family,X.pts)||P.castOption(Ee.textfont.family,X.pts)||Oe.family,q=P.castOption(Ee.outsidetextfont.size,X.pts)||P.castOption(Ee.textfont.size,X.pts)||Oe.size,ae=P.castOption(Ee.outsidetextfont.weight,X.pts)||P.castOption(Ee.textfont.weight,X.pts)||Oe.weight,ve=P.castOption(Ee.outsidetextfont.style,X.pts)||P.castOption(Ee.textfont.style,X.pts)||Oe.style,Te=P.castOption(Ee.outsidetextfont.variant,X.pts)||P.castOption(Ee.textfont.variant,X.pts)||Oe.variant,et=P.castOption(Ee.outsidetextfont.textcase,X.pts)||P.castOption(Ee.textfont.textcase,X.pts)||Oe.textcase,bt=P.castOption(Ee.outsidetextfont.lineposition,X.pts)||P.castOption(Ee.textfont.lineposition,X.pts)||Oe.lineposition,dr=P.castOption(Ee.outsidetextfont.shadow,X.pts)||P.castOption(Ee.textfont.shadow,X.pts)||Oe.shadow;return{color:Qe,family:pe,size:q,weight:ae,style:ve,variant:Te,textcase:et,lineposition:bt,shadow:dr}}function H(Ee,X,Oe){var Qe=P.castOption(Ee.insidetextfont.color,X.pts);!Qe&&Ee._input.textfont&&(Qe=P.castOption(Ee._input.textfont.color,X.pts));var pe=P.castOption(Ee.insidetextfont.family,X.pts)||P.castOption(Ee.textfont.family,X.pts)||Oe.family,q=P.castOption(Ee.insidetextfont.size,X.pts)||P.castOption(Ee.textfont.size,X.pts)||Oe.size,ae=P.castOption(Ee.insidetextfont.weight,X.pts)||P.castOption(Ee.textfont.weight,X.pts)||Oe.weight,ve=P.castOption(Ee.insidetextfont.style,X.pts)||P.castOption(Ee.textfont.style,X.pts)||Oe.style,Te=P.castOption(Ee.insidetextfont.variant,X.pts)||P.castOption(Ee.textfont.variant,X.pts)||Oe.variant,et=P.castOption(Ee.insidetextfont.textcase,X.pts)||P.castOption(Ee.textfont.textcase,X.pts)||Oe.textcase,bt=P.castOption(Ee.insidetextfont.lineposition,X.pts)||P.castOption(Ee.textfont.lineposition,X.pts)||Oe.lineposition,dr=P.castOption(Ee.insidetextfont.shadow,X.pts)||P.castOption(Ee.textfont.shadow,X.pts)||Oe.shadow;return{color:Qe||x.contrast(X.color),family:pe,size:q,weight:ae,style:ve,variant:Te,textcase:et,lineposition:bt,shadow:dr}}function W(Ee,X){for(var Oe,Qe,pe=0;pe<Ee.length;pe++)if(Oe=Ee[pe][0],Qe=Oe.trace,Qe.title.text){var q=Qe.title.text;Qe._meta&&(q=y.templateString(q,Qe._meta));var ae=v.tester.append("text").attr("data-notex",1).text(q).call(v.font,Qe.title.font).call(u.convertToTspans,X),ve=v.bBox(ae.node(),!0);Oe.titleBox={width:ve.width,height:ve.height},ae.remove()}}function Ce(Ee,X,Oe){var Qe=Oe.r||X.rpx1,pe=X.rInscribed,q=X.startangle===X.stopangle;if(q)return{rCenter:1-pe,scale:0,rotate:0,textPosAngle:0};var ae=X.ring,ve=ae===1&&Math.abs(X.startangle-X.stopangle)===Math.PI*2,Te=X.halfangle,et=X.midangle,bt=Oe.trace.insidetextorientation,dr=bt==="horizontal",Ol=bt==="tangential",Xl=bt==="radial",Pp=bt==="auto",t0=[],Wp;if(!Pp){var $p=function(m0,s0){if(he(X,m0)){var y0=Math.abs(m0-X.startangle),M0=Math.abs(m0-X.stopangle),T0=y0<M0?y0:M0;s0==="tan"?Wp=Y(Ee,Qe,ae,T0,0):Wp=le(Ee,Qe,ae,T0,Math.PI/2),Wp.textPosAngle=m0,t0.push(Wp)}},Lo;if(dr||Ol){for(Lo=4;Lo>=-4;Lo-=2)$p(Math.PI*Lo,"tan");for(Lo=4;Lo>=-4;Lo-=2)$p(Math.PI*(Lo+1),"tan")}if(dr||Xl){for(Lo=4;Lo>=-4;Lo-=2)$p(Math.PI*(Lo+1.5),"rad");for(Lo=4;Lo>=-4;Lo-=2)$p(Math.PI*(Lo+.5),"rad")}}if(ve||Pp||dr){var kl=Math.sqrt(Ee.width*Ee.width+Ee.height*Ee.height);if(Wp={scale:pe*Qe*2/kl,rCenter:1-pe,rotate:0},Wp.textPosAngle=(X.startangle+X.stopangle)/2,Wp.scale>=1)return Wp;t0.push(Wp)}(Pp||Xl)&&(Wp=le(Ee,Qe,ae,Te,et),Wp.textPosAngle=(X.startangle+X.stopangle)/2,t0.push(Wp)),(Pp||Ol)&&(Wp=Y(Ee,Qe,ae,Te,et),Wp.textPosAngle=(X.startangle+X.stopangle)/2,t0.push(Wp));for(var dt=0,yp=0,Bp=0;Bp<t0.length;Bp++){var Jp=t0[Bp].scale;if(yp<Jp&&(yp=Jp,dt=Bp),!Pp&&yp>=1)break}return t0[dt]}function he(Ee,X){var Oe=Ee.startangle,Qe=Ee.stopangle;return Oe>X&&X>Qe||Oe<X&&X<Qe}function le(Ee,X,Oe,Qe,pe){X=Math.max(0,X-2*B);var q=Ee.width/Ee.height,ae=xe(q,Qe,X,Oe);return{scale:ae*2/Ee.height,rCenter:Re(q,ae/X),rotate:fe(pe)}}function Y(Ee,X,Oe,Qe,pe){X=Math.max(0,X-2*B);var q=Ee.height/Ee.width,ae=xe(q,Qe,X,Oe);return{scale:ae*2/Ee.width,rCenter:Re(q,ae/X),rotate:fe(pe+Math.PI/2)}}function Re(Ee,X){return Math.cos(X)-Ee*X}function fe(Ee){return(180/Math.PI*Ee+720)%180-90}function xe(Ee,X,Oe,Qe){var pe=Ee+1/(2*Math.tan(X));return Oe*Math.min(1/(Math.sqrt(pe*pe+.5)+pe),Qe/(Math.sqrt(Ee*Ee+Qe/2)+Ee))}function ge(Ee,X){return Ee.v===X.vTotal&&!X.trace.hole?1:Math.min(1/(1+1/Math.sin(Ee.halfangle)),Ee.ring/2)}function ye(Ee,X){var Oe=X.pxmid[0],Qe=X.pxmid[1],pe=Ee.width/2,q=Ee.height/2;return Oe<0&&(pe*=-1),Qe<0&&(q*=-1),{scale:1,rCenter:1,rotate:0,x:pe+Math.abs(q)*(pe>0?1:-1)/2,y:q/(1+Oe*Oe/(Qe*Qe)),outside:!0}}function Ae(Ee){var X=Math.sqrt(Ee.titleBox.width*Ee.titleBox.width+Ee.titleBox.height*Ee.titleBox.height);return{x:Ee.cx,y:Ee.cy,scale:Ee.trace.hole*Ee.r*2/X,tx:0,ty:-Ee.titleBox.height/2+Ee.trace.title.font.size}}function Le(Ee,X){var Oe=1,Qe=1,pe,q=Ee.trace,ae={x:Ee.cx,y:Ee.cy},ve={tx:0,ty:0};ve.ty+=q.title.font.size,pe=Pe(q),q.title.position.indexOf("top")!==-1?(ae.y-=(1+pe)*Ee.r,ve.ty-=Ee.titleBox.height):q.title.position.indexOf("bottom")!==-1&&(ae.y+=(1+pe)*Ee.r);var Te=ce(Ee.r,Ee.trace.aspectratio),et=X.w*(q.domain.x[1]-q.domain.x[0])/2;return q.title.position.indexOf("left")!==-1?(et=et+Te,ae.x-=(1+pe)*Te,ve.tx+=Ee.titleBox.width/2):q.title.position.indexOf("center")!==-1?et*=2:q.title.position.indexOf("right")!==-1&&(et=et+Te,ae.x+=(1+pe)*Te,ve.tx-=Ee.titleBox.width/2),Oe=et/Ee.titleBox.width,Qe=ke(Ee,X)/Ee.titleBox.height,{x:ae.x,y:ae.y,scale:Math.min(Oe,Qe),tx:ve.tx,ty:ve.ty}}function ce(Ee,X){return Ee/(X===void 0?1:X)}function ke(Ee,X){var Oe=Ee.trace,Qe=X.h*(Oe.domain.y[1]-Oe.domain.y[0]);return Math.min(Ee.titleBox.height,Qe/2)}function Pe(Ee){var X=Ee.pull;if(!X)return 0;var Oe;if(y.isArrayOrTypedArray(X))for(X=0,Oe=0;Oe<Ee.pull.length;Oe++)Ee.pull[Oe]>X&&(X=Ee.pull[Oe]);return X}function tt(Ee,X){var Oe,Qe,pe,q,ae,ve,Te,et,bt,dr,Ol,Xl,Pp;function t0(kl,dt){return kl.pxmid[1]-dt.pxmid[1]}function Wp(kl,dt){return dt.pxmid[1]-kl.pxmid[1]}function $p(kl,dt){dt||(dt={});var yp=dt.labelExtraY+(Qe?dt.yLabelMax:dt.yLabelMin),Bp=Qe?kl.yLabelMin:kl.yLabelMax,Jp=Qe?kl.yLabelMax:kl.yLabelMin,m0=kl.cyFinal+ae(kl.px0[1],kl.px1[1]),s0=yp-Bp,y0,M0,T0,G0,h0,W0;if(s0*Te>0&&(kl.labelExtraY=s0),!!y.isArrayOrTypedArray(X.pull))for(M0=0;M0<dr.length;M0++)T0=dr[M0],!(T0===kl||(P.castOption(X.pull,kl.pts)||0)>=(P.castOption(X.pull,T0.pts)||0))&&((kl.pxmid[1]-T0.pxmid[1])*Te>0?(G0=T0.cyFinal+ae(T0.px0[1],T0.px1[1]),s0=G0-Bp-kl.labelExtraY,s0*Te>0&&(kl.labelExtraY+=s0)):(Jp+kl.labelExtraY-m0)*Te>0&&(y0=3*ve*Math.abs(M0-dr.indexOf(kl)),h0=T0.cxFinal+q(T0.px0[0],T0.px1[0]),W0=h0+y0-(kl.cxFinal+kl.pxmid[0])-kl.labelExtraX,W0*ve>0&&(kl.labelExtraX+=W0)))}for(Qe=0;Qe<2;Qe++)for(pe=Qe?t0:Wp,ae=Qe?Math.max:Math.min,Te=Qe?1:-1,Oe=0;Oe<2;Oe++){for(q=Oe?Math.max:Math.min,ve=Oe?1:-1,et=Ee[Qe][Oe],et.sort(pe),bt=Ee[1-Qe][Oe],dr=bt.concat(et),Xl=[],Ol=0;Ol<et.length;Ol++)et[Ol].yLabelMid!==void 0&&Xl.push(et[Ol]);for(Pp=!1,Ol=0;Qe&&Ol<bt.length;Ol++)if(bt[Ol].yLabelMid!==void 0){Pp=bt[Ol];break}for(Ol=0;Ol<Xl.length;Ol++){var Lo=Ol&&Xl[Ol-1];Pp&&!Ol&&(Lo=Pp),$p(Xl[Ol],Lo)}}}function Ke(Ee,X){for(var Oe=[],Qe=0;Qe<Ee.length;Qe++){var pe=Ee[Qe][0],q=pe.trace,ae=q.domain,ve=X.w*(ae.x[1]-ae.x[0]),Te=X.h*(ae.y[1]-ae.y[0]);q.title.text&&q.title.position!=="middle center"&&(Te-=ke(pe,X));var et=ve/2,bt=Te/2;q.type==="funnelarea"&&!q.scalegroup&&(bt/=q.aspectratio),pe.r=Math.min(et,bt)/(1+Pe(q)),pe.cx=X.l+X.w*(q.domain.x[1]+q.domain.x[0])/2,pe.cy=X.t+X.h*(1-q.domain.y[0])-Te/2,q.title.text&&q.title.position.indexOf("bottom")!==-1&&(pe.cy-=ke(pe,X)),q.scalegroup&&Oe.indexOf(q.scalegroup)===-1&&Oe.push(q.scalegroup)}nt(Ee,Oe)}function nt(Ee,X){for(var Oe,Qe,pe,q=0;q<X.length;q++){var ae=1/0,ve=X[q];for(Qe=0;Qe<Ee.length;Qe++)if(Oe=Ee[Qe][0],pe=Oe.trace,pe.scalegroup===ve){var Te;if(pe.type==="pie")Te=Oe.r*Oe.r;else if(pe.type==="funnelarea"){var et,bt;pe.aspectratio>1?(et=Oe.r,bt=et/pe.aspectratio):(bt=Oe.r,et=bt*pe.aspectratio),et*=(1+pe.baseratio)/2,Te=et*bt}ae=Math.min(ae,Te/Oe.vTotal)}for(Qe=0;Qe<Ee.length;Qe++)if(Oe=Ee[Qe][0],pe=Oe.trace,pe.scalegroup===ve){var dr=ae*Oe.vTotal;pe.type==="funnelarea"&&(dr/=(1+pe.baseratio)/2,dr/=pe.aspectratio),Oe.r=Math.sqrt(dr)}}}function yi(Ee){var X=Ee[0],Oe=X.r,Qe=X.trace,pe=P.getRotationAngle(Qe.rotation),q=2*Math.PI/X.vTotal,ae="px0",ve="px1",Te,et,bt;if(Qe.direction==="counterclockwise"){for(Te=0;Te<Ee.length&&Ee[Te].hidden;Te++);if(Te===Ee.length)return;pe+=q*Ee[Te].v,q*=-1,ae="px1",ve="px0"}for(bt=Ei(Oe,pe),Te=0;Te<Ee.length;Te++)et=Ee[Te],!et.hidden&&(et[ae]=bt,et.startangle=pe,pe+=q*et.v/2,et.pxmid=Ei(Oe,pe),et.midangle=pe,pe+=q*et.v/2,bt=Ei(Oe,pe),et.stopangle=pe,et[ve]=bt,et.largeArc=et.v>X.vTotal/2?1:0,et.halfangle=Math.PI*Math.min(et.v/X.vTotal,.5),et.ring=1-Qe.hole,et.rInscribed=ge(et,X))}function Ei(Ee,X){return[Ee*Math.sin(X),-Ee*Math.cos(X)]}function vs(Ee,X,Oe){var Qe=Ee._fullLayout,pe=Oe.trace,q=pe.texttemplate,ae=pe.textinfo;if(!q&&ae&&ae!=="none"){var ve=ae.split("+"),Te=function(dt){return ve.indexOf(dt)!==-1},et=Te("label"),bt=Te("text"),dr=Te("value"),Ol=Te("percent"),Xl=Qe.separators,Pp;if(Pp=et?[X.label]:[],bt){var t0=P.getFirstFilled(pe.text,X.pts);z(t0)&&Pp.push(t0)}dr&&Pp.push(P.formatPieValue(X.v,Xl)),Ol&&Pp.push(P.formatPiePercent(X.v/Oe.vTotal,Xl)),X.text=Pp.join("<br>")}function Wp(dt){return{label:dt.label,value:dt.v,valueLabel:P.formatPieValue(dt.v,Qe.separators),percent:dt.v/Oe.vTotal,percentLabel:P.formatPiePercent(dt.v/Oe.vTotal,Qe.separators),color:dt.color,text:dt.text,customdata:y.castOption(pe,dt.i,"customdata")}}if(q){var $p=y.castOption(pe,X.i,"texttemplate");if(!$p)X.text="";else{var Lo=Wp(X),kl=P.getFirstFilled(pe.text,X.pts);(z(kl)||kl==="")&&(Lo.text=kl),X.text=y.texttemplateString($p,Lo,Ee._fullLayout._d3locale,Lo,pe._meta||{})}}}function Se(Ee,X){var Oe=Ee.rotate*Math.PI/180,Qe=Math.cos(Oe),pe=Math.sin(Oe),q=(X.left+X.right)/2,ae=(X.top+X.bottom)/2;Ee.textX=q*Qe-ae*pe,Ee.textY=q*pe+ae*Qe,Ee.noCenter=!0}ue.exports={plot:F,formatSliceLabel:vs,transformInsideText:Ce,determineInsideTextFont:H,positionTitleOutside:Le,prerenderTitles:W,layoutAreas:Ke,attachFxHandlers:L,computeTransform:Se}}),kb=t((me,ue)=>{var g=c(),s=Z1(),h=Xy().resizeText;ue.exports=function(x){var v=x._fullLayout._pielayer.selectAll(".trace");h(x,v,"pie"),v.each(function(y){var b=y[0],T=b.trace,u=g.select(this);u.style({opacity:T.opacity}),u.selectAll("path.surface").each(function(k){g.select(this).call(s,k,T,x)})})}}),G3=t(me=>{var ue=vg();me.name="pie",me.plot=function(g,s,h,x){ue.plotBasePlot(me.name,g,s,h,x)},me.clean=function(g,s,h,x){ue.cleanBasePlot(me.name,g,s,h,x)}}),Ax=t((me,ue)=>{ue.exports={attributes:G2(),supplyDefaults:H3().supplyDefaults,supplyLayoutDefaults:Db(),layoutAttributes:C_(),calc:Cy().calc,crossTraceCalc:Cy().crossTraceCalc,plot:Ex().plot,style:kb(),styleOne:Z1(),moduleType:"trace",name:"pie",basePlotModule:G3(),categories:["pie-like","pie","showLegend"],meta:{}}}),Ny=t((me,ue)=>{ue.exports=Ax()}),cv=t((me,ue)=>{var g=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;function x(y){if(y==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(y)}function v(){try{if(!Object.assign)return!1;var y=new String("abc");if(y[5]="de",Object.getOwnPropertyNames(y)[0]==="5")return!1;for(var b={},T=0;T<10;T++)b["_"+String.fromCharCode(T)]=T;var u=Object.getOwnPropertyNames(b).map(function(M){return b[M]});if(u.join("")!=="0123456789")return!1;var k={};return"abcdefghijklmnopqrst".split("").forEach(function(M){k[M]=M}),Object.keys(Object.assign({},k)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ue.exports=v()?Object.assign:function(y,b){for(var T,u=x(y),k,M=1;M<arguments.length;M++){T=Object(arguments[M]);for(var D in T)s.call(T,D)&&(u[D]=T[D]);if(g){k=g(T);for(var B=0;B<k.length;B++)h.call(T,k[B])&&(u[k[B]]=T[k[B]])}}return u}}),py=t((me,ue)=>{var g=cv();function s(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}g(s.prototype,{instance:function(T,u){T=(T||"gregorian").toLowerCase(),u=u||"";var k=this._localCals[T+"-"+u];if(!k&&this.calendars[T]&&(k=new this.calendars[T](u),this._localCals[T+"-"+u]=k),!k)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,T);return k},newDate:function(T,u,k,M,D){return M=(T!=null&&T.year?T.calendar():typeof M=="string"?this.instance(M,D):M)||this.instance(),M.newDate(T,u,k)},substituteDigits:function(T){return function(u){return(u+"").replace(/[0-9]/g,function(k){return T[k]})}},substituteChineseDigits:function(T,u){return function(k){for(var M="",D=0;k>0;){var B=k%10;M=(B===0?"":T[B]+u[D])+M,D++,k=Math.floor(k/10)}return M.indexOf(T[1]+u[1])===0&&(M=M.substr(1)),M||T[0]}}});function h(T,u,k,M){if(this._calendar=T,this._year=u,this._month=k,this._day=M,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(b.local.invalidDate||b.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function x(T,u){return T=""+T,"000000".substring(0,u-T.length)+T}g(h.prototype,{newDate:function(T,u,k){return this._calendar.newDate(T??this,u,k)},year:function(T){return arguments.length===0?this._year:this.set(T,"y")},month:function(T){return arguments.length===0?this._month:this.set(T,"m")},day:function(T){return arguments.length===0?this._day:this.set(T,"d")},date:function(T,u,k){if(!this._calendar.isValid(T,u,k))throw(b.local.invalidDate||b.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=T,this._month=u,this._day=k,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(T,u){return this._calendar.add(this,T,u)},set:function(T,u){return this._calendar.set(this,T,u)},compareTo:function(T){if(this._calendar.name!==T._calendar.name)throw(b.local.differentCalendars||b.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,T._calendar.local.name);var u=this._year!==T._year?this._year-T._year:this._month!==T._month?this.monthOfYear()-T.monthOfYear():this._day-T._day;return u===0?0:u<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(T){return this._calendar.fromJD(T)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(T){return this._calendar.fromJSDate(T)},toString:function(){return(this.year()<0?"-":"")+x(Math.abs(this.year()),4)+"-"+x(this.month(),2)+"-"+x(this.day(),2)}});function v(){this.shortYearCutoff="+10"}g(v.prototype,{_validateLevel:0,newDate:function(T,u,k){return T==null?this.today():(T.year&&(this._validate(T,u,k,b.local.invalidDate||b.regionalOptions[""].invalidDate),k=T.day(),u=T.month(),T=T.year()),new h(this,T,u,k))},today:function(){return this.fromJSDate(new Date)},epoch:function(T){var u=this._validate(T,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return u.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(T){var u=this._validate(T,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return(u.year()<0?"-":"")+x(Math.abs(u.year()),4)},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear),12},monthOfYear:function(T,u){var k=this._validate(T,u,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth);return(k.month()+this.monthsInYear(k)-this.firstMonth)%this.monthsInYear(k)+this.minMonth},fromMonthOfYear:function(T,u){var k=(u+this.firstMonth-2*this.minMonth)%this.monthsInYear(T)+this.minMonth;return this._validate(T,k,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth),k},daysInYear:function(T){var u=this._validate(T,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return this.leapYear(u)?366:365},dayOfYear:function(T,u,k){var M=this._validate(T,u,k,b.local.invalidDate||b.regionalOptions[""].invalidDate);return M.toJD()-this.newDate(M.year(),this.fromMonthOfYear(M.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(T,u,k){var M=this._validate(T,u,k,b.local.invalidDate||b.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(M))+2)%this.daysInWeek()},extraInfo:function(T,u,k){return this._validate(T,u,k,b.local.invalidDate||b.regionalOptions[""].invalidDate),{}},add:function(T,u,k){return this._validate(T,this.minMonth,this.minDay,b.local.invalidDate||b.regionalOptions[""].invalidDate),this._correctAdd(T,this._add(T,u,k),u,k)},_add:function(T,u,k){if(this._validateLevel++,k==="d"||k==="w"){var M=T.toJD()+u*(k==="w"?this.daysInWeek():1),D=T.calendar().fromJD(M);return this._validateLevel--,[D.year(),D.month(),D.day()]}try{var B=T.year()+(k==="y"?u:0),P=T.monthOfYear()+(k==="m"?u:0),D=T.day(),N=function(w){for(;P<w.minMonth;)B--,P+=w.monthsInYear(B);for(var L=w.monthsInYear(B);P>L-1+w.minMonth;)B++,P-=L,L=w.monthsInYear(B)};k==="y"?(T.month()!==this.fromMonthOfYear(B,P)&&(P=this.newDate(B,T.month(),this.minDay).monthOfYear()),P=Math.min(P,this.monthsInYear(B)),D=Math.min(D,this.daysInMonth(B,this.fromMonthOfYear(B,P)))):k==="m"&&(N(this),D=Math.min(D,this.daysInMonth(B,this.fromMonthOfYear(B,P))));var z=[B,this.fromMonthOfYear(B,P),D];return this._validateLevel--,z}catch(F){throw this._validateLevel--,F}},_correctAdd:function(T,u,k,M){if(!this.hasYearZero&&(M==="y"||M==="m")&&(u[0]===0||T.year()>0!=u[0]>0)){var D={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[M],B=k<0?-1:1;u=this._add(T,k*D[0]+B*D[1],D[2])}return T.date(u[0],u[1],u[2])},set:function(T,u,k){this._validate(T,this.minMonth,this.minDay,b.local.invalidDate||b.regionalOptions[""].invalidDate);var M=k==="y"?u:T.year(),D=k==="m"?u:T.month(),B=k==="d"?u:T.day();return(k==="y"||k==="m")&&(B=Math.min(B,this.daysInMonth(M,D))),T.date(M,D,B)},isValid:function(T,u,k){this._validateLevel++;var M=this.hasYearZero||T!==0;if(M){var D=this.newDate(T,u,this.minDay);M=u>=this.minMonth&&u-this.minMonth<this.monthsInYear(D)&&k>=this.minDay&&k-this.minDay<this.daysInMonth(D)}return this._validateLevel--,M},toJSDate:function(T,u,k){var M=this._validate(T,u,k,b.local.invalidDate||b.regionalOptions[""].invalidDate);return b.instance().fromJD(this.toJD(M)).toJSDate()},fromJSDate:function(T){return this.fromJD(b.instance().fromJSDate(T).toJD())},_validate:function(T,u,k,M){if(T.year){if(this._validateLevel===0&&this.name!==T.calendar().name)throw(b.local.differentCalendars||b.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,T.calendar().local.name);return T}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(T,u,k))throw M.replace(/\{0\}/,this.local.name);var D=this.newDate(T,u,k);return this._validateLevel--,D}catch(B){throw this._validateLevel--,B}}});function y(T){this.local=this.regionalOptions[T]||this.regionalOptions[""]}y.prototype=new v,g(y.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){var u=this._validate(k,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear),k=u.year()+(u.year()<0?1:0);return k%4===0&&(k%100!==0||k%400===0)},weekOfYear:function(T,u,k){var M=this.newDate(T,u,k);return M.add(4-(M.dayOfWeek()||7),"d"),Math.floor((M.dayOfYear()-1)/7)+1},daysInMonth:function(T,u){var k=this._validate(T,u,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth);return this.daysPerMonth[k.month()-1]+(k.month()===2&&this.leapYear(k.year())?1:0)},weekDay:function(T,u,k){return(this.dayOfWeek(T,u,k)||7)<6},toJD:function(T,u,k){var M=this._validate(T,u,k,b.local.invalidDate||b.regionalOptions[""].invalidDate);T=M.year(),u=M.month(),k=M.day(),T<0&&T++,u<3&&(u+=12,T--);var D=Math.floor(T/100),B=2-D+Math.floor(D/4);return Math.floor(365.25*(T+4716))+Math.floor(30.6001*(u+1))+k+B-1524.5},fromJD:function(T){var u=Math.floor(T+.5),k=Math.floor((u-186721625e-2)/36524.25);k=u+1+k-Math.floor(k/4);var M=k+1524,D=Math.floor((M-122.1)/365.25),B=Math.floor(365.25*D),P=Math.floor((M-B)/30.6001),N=M-B-Math.floor(P*30.6001),z=P-(P>13.5?13:1),F=D-(z>2.5?4716:4715);return F<=0&&F--,this.newDate(F,z,N)},toJSDate:function(T,u,k){var M=this._validate(T,u,k,b.local.invalidDate||b.regionalOptions[""].invalidDate),D=new Date(M.year(),M.month()-1,M.day());return D.setHours(0),D.setMinutes(0),D.setSeconds(0),D.setMilliseconds(0),D.setHours(D.getHours()>12?D.getHours()+2:0),D},fromJSDate:function(T){return this.newDate(T.getFullYear(),T.getMonth()+1,T.getDate())}});var b=ue.exports=new s;b.cdate=h,b.baseCalendar=v,b.calendars.gregorian=y}),fx=t(()=>{var me=cv(),ue=py();me(ue.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),ue.local=ue.regionalOptions[""],me(ue.cdate.prototype,{formatDate:function(g,s){return typeof g!="string"&&(s=g,g=""),this._calendar.formatDate(g||"",this,s)}}),me(ue.baseCalendar.prototype,{UNIX_EPOCH:ue.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:1440*60,TICKS_EPOCH:ue.instance().jdEpoch,TICKS_PER_DAY:1440*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(g,s,h){if(typeof g!="string"&&(h=s,s=g,g=""),!s)return"";if(s.calendar()!==this)throw ue.local.invalidFormat||ue.regionalOptions[""].invalidFormat;g=g||this.local.dateFormat,h=h||{};for(var x=h.dayNamesShort||this.local.dayNamesShort,v=h.dayNames||this.local.dayNames,y=h.monthNumbers||this.local.monthNumbers,b=h.monthNamesShort||this.local.monthNamesShort,T=h.monthNames||this.local.monthNames,u=h.calculateWeek||this.local.calculateWeek,k=function(H,W){for(var Ce=1;O+Ce<g.length&&g.charAt(O+Ce)===H;)Ce++;return O+=Ce-1,Math.floor(Ce/(W||1))>1},M=function(H,W,Ce,he){var le=""+W;if(k(H,he))for(;le.length<Ce;)le="0"+le;return le},D=function(H,W,Ce,he){return k(H)?he[W]:Ce[W]},B=this,P=function(H){return typeof y=="function"?y.call(B,H,k("m")):F(M("m",H.month(),2))},N=function(H,W){return W?typeof T=="function"?T.call(B,H):T[H.month()-B.minMonth]:typeof b=="function"?b.call(B,H):b[H.month()-B.minMonth]},z=this.local.digits,F=function(H){return h.localNumbers&&z?z(H):H},w="",L=!1,O=0;O<g.length;O++)if(L)g.charAt(O)==="'"&&!k("'")?L=!1:w+=g.charAt(O);else switch(g.charAt(O)){case"d":w+=F(M("d",s.day(),2));break;case"D":w+=D("D",s.dayOfWeek(),x,v);break;case"o":w+=M("o",s.dayOfYear(),3);break;case"w":w+=M("w",s.weekOfYear(),2);break;case"m":w+=P(s);break;case"M":w+=N(s,k("M"));break;case"y":w+=k("y",2)?s.year():(s.year()%100<10?"0":"")+s.year()%100;break;case"Y":k("Y",2),w+=s.formatYear();break;case"J":w+=s.toJD();break;case"@":w+=(s.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":w+=(s.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":k("'")?w+="'":L=!0;break;default:w+=g.charAt(O)}return w},parseDate:function(g,s,h){if(s==null)throw ue.local.invalidArguments||ue.regionalOptions[""].invalidArguments;if(s=typeof s=="object"?s.toString():s+"",s==="")return null;g=g||this.local.dateFormat,h=h||{};var x=h.shortYearCutoff||this.shortYearCutoff;x=typeof x!="string"?x:this.today().year()%100+parseInt(x,10);for(var v=h.dayNamesShort||this.local.dayNamesShort,y=h.dayNames||this.local.dayNames,b=h.parseMonth||this.local.parseMonth,T=h.monthNumbers||this.local.monthNumbers,u=h.monthNamesShort||this.local.monthNamesShort,k=h.monthNames||this.local.monthNames,M=-1,D=-1,B=-1,P=-1,N=-1,z=!1,F=!1,w=function(xe,ge){for(var ye=1;Y+ye<g.length&&g.charAt(Y+ye)===xe;)ye++;return Y+=ye-1,Math.floor(ye/(ge||1))>1},L=function(xe,ge){var ye=w(xe,ge),Ae=[2,3,ye?4:2,ye?4:2,10,11,20]["oyYJ@!".indexOf(xe)+1],Le=new RegExp("^-?\\d{1,"+Ae+"}"),ce=s.substring(le).match(Le);if(!ce)throw(ue.local.missingNumberAt||ue.regionalOptions[""].missingNumberAt).replace(/\{0\}/,le);return le+=ce[0].length,parseInt(ce[0],10)},O=this,H=function(){if(typeof T=="function"){w("m");var xe=T.call(O,s.substring(le));return le+=xe.length,xe}return L("m")},W=function(xe,ge,ye,Ae){for(var Le=w(xe,Ae)?ye:ge,ce=0;ce<Le.length;ce++)if(s.substr(le,Le[ce].length).toLowerCase()===Le[ce].toLowerCase())return le+=Le[ce].length,ce+O.minMonth;throw(ue.local.unknownNameAt||ue.regionalOptions[""].unknownNameAt).replace(/\{0\}/,le)},Ce=function(){if(typeof k=="function"){var xe=w("M")?k.call(O,s.substring(le)):u.call(O,s.substring(le));return le+=xe.length,xe}return W("M",u,k)},he=function(){if(s.charAt(le)!==g.charAt(Y))throw(ue.local.unexpectedLiteralAt||ue.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,le);le++},le=0,Y=0;Y<g.length;Y++)if(F)g.charAt(Y)==="'"&&!w("'")?F=!1:he();else switch(g.charAt(Y)){case"d":P=L("d");break;case"D":W("D",v,y);break;case"o":N=L("o");break;case"w":L("w");break;case"m":B=H();break;case"M":B=Ce();break;case"y":var Re=Y;z=!w("y",2),Y=Re,D=L("y",2);break;case"Y":D=L("Y",2);break;case"J":M=L("J")+.5,s.charAt(le)==="."&&(le++,L("J"));break;case"@":M=L("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":M=L("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":le=s.length;break;case"'":w("'")?he():F=!0;break;default:he()}if(le<s.length)throw ue.local.unexpectedText||ue.regionalOptions[""].unexpectedText;if(D===-1?D=this.today().year():D<100&&z&&(D+=x===-1?1900:this.today().year()-this.today().year()%100-(D<=x?0:100)),typeof B=="string"&&(B=b.call(this,D,B)),N>-1){B=1,P=N;for(var fe=this.daysInMonth(D,B);P>fe;fe=this.daysInMonth(D,B))B++,P-=fe}return M>-1?this.fromJD(M):this.newDate(D,B,P)},determineDate:function(g,s,h,x,v){h&&typeof h!="object"&&(v=x,x=h,h=null),typeof x!="string"&&(v=x,x="");var y=this,b=function(T){try{return y.parseDate(x,T,v)}catch{}T=T.toLowerCase();for(var u=(T.match(/^c/)&&h?h.newDate():null)||y.today(),k=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,M=k.exec(T);M;)u.add(parseInt(M[1],10),M[2]||"d"),M=k.exec(T);return u};return s=s?s.newDate():null,g=g==null?s:typeof g=="string"?b(g):typeof g=="number"?isNaN(g)||g===1/0||g===-1/0?s:y.today().add(g,"d"):y.newDate(g),g}})}),Wg=t(()=>{var me=py(),ue=cv(),g=me.instance();function s(M){this.local=this.regionalOptions[M||""]||this.regionalOptions[""]}s.prototype=new me.baseCalendar,ue(s.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(M,D){if(typeof M=="string"){var B=M.match(x);return B?B[0]:""}var P=this._validateYear(M),N=M.month(),z=""+this.toChineseMonth(P,N);return D&&z.length<2&&(z="0"+z),this.isIntercalaryMonth(P,N)&&(z+="i"),z},monthNames:function(M){if(typeof M=="string"){var D=M.match(v);return D?D[0]:""}var B=this._validateYear(M),P=M.month(),N=this.toChineseMonth(B,P),z=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][N-1];return this.isIntercalaryMonth(B,P)&&(z="闰"+z),z},monthNamesShort:function(M){if(typeof M=="string"){var D=M.match(y);return D?D[0]:""}var B=this._validateYear(M),P=M.month(),N=this.toChineseMonth(B,P),z=["一","二","三","四","五","六","七","八","九","十","十一","十二"][N-1];return this.isIntercalaryMonth(B,P)&&(z="闰"+z),z},parseMonth:function(M,D){M=this._validateYear(M);var B=parseInt(D),P;if(isNaN(B))D[0]==="闰"&&(P=!0,D=D.substring(1)),D[D.length-1]==="月"&&(D=D.substring(0,D.length-1)),B=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(D);else{var N=D[D.length-1];P=N==="i"||N==="I"}var z=this.toMonthIndex(M,B,P);return z},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(M,D){if(M.year&&(M=M.year()),typeof M!="number"||M<1888||M>2111)throw D.replace(/\{0\}/,this.local.name);return M},toMonthIndex:function(M,D,B){var P=this.intercalaryMonth(M),N=B&&D!==P;if(N||D<1||D>12)throw me.local.invalidMonth.replace(/\{0\}/,this.local.name);var z;return P?!B&&D<=P?z=D-1:z=D:z=D-1,z},toChineseMonth:function(M,D){M.year&&(M=M.year(),D=M.month());var B=this.intercalaryMonth(M),P=B?12:11;if(D<0||D>P)throw me.local.invalidMonth.replace(/\{0\}/,this.local.name);var N;return B?D<B?N=D+1:N=D:N=D+1,N},intercalaryMonth:function(M){M=this._validateYear(M);var D=b[M-b[0]],B=D>>13;return B},isIntercalaryMonth:function(M,D){M.year&&(M=M.year(),D=M.month());var B=this.intercalaryMonth(M);return!!B&&B===D},leapYear:function(M){return this.intercalaryMonth(M)!==0},weekOfYear:function(M,D,B){var P=this._validateYear(M,me.local.invalidyear),N=T[P-T[0]],z=N>>9&4095,F=N>>5&15,w=N&31,L;L=g.newDate(z,F,w),L.add(4-(L.dayOfWeek()||7),"d");var O=this.toJD(M,D,B)-L.toJD();return 1+Math.floor(O/7)},monthsInYear:function(M){return this.leapYear(M)?13:12},daysInMonth:function(M,D){M.year&&(D=M.month(),M=M.year()),M=this._validateYear(M);var B=b[M-b[0]],P=B>>13,N=P?12:11;if(D>N)throw me.local.invalidMonth.replace(/\{0\}/,this.local.name);var z=B&1<<12-D?30:29;return z},weekDay:function(M,D,B){return(this.dayOfWeek(M,D,B)||7)<6},toJD:function(M,D,B){var P=this._validate(M,z,B,me.local.invalidDate);M=this._validateYear(P.year()),D=P.month(),B=P.day();var N=this.isIntercalaryMonth(M,D),z=this.toChineseMonth(M,D),F=k(M,z,B,N);return g.toJD(F.year,F.month,F.day)},fromJD:function(M){var D=g.fromJD(M),B=u(D.year(),D.month(),D.day()),P=this.toMonthIndex(B.year,B.month,B.isIntercalary);return this.newDate(B.year,P,B.day)},fromString:function(M){var D=M.match(h),B=this._validateYear(+D[1]),P=+D[2],N=!!D[3],z=this.toMonthIndex(B,P,N),F=+D[4];return this.newDate(B,z,F)},add:function(M,D,B){var P=M.year(),N=M.month(),z=this.isIntercalaryMonth(P,N),F=this.toChineseMonth(P,N),w=Object.getPrototypeOf(s.prototype).add.call(this,M,D,B);if(B==="y"){var L=w.year(),O=w.month(),H=this.isIntercalaryMonth(L,F),W=z&&H?this.toMonthIndex(L,F,!0):this.toMonthIndex(L,F,!1);W!==O&&w.month(W)}return w}});var h=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,x=/^\d?\d[iI]?/m,v=/^闰?十?[一二三四五六七八九]?月/m,y=/^闰?十?[一二三四五六七八九]?/m;me.calendars.chinese=s;var b=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],T=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function u(M,D,B,P){var N,z;if(typeof M=="object")N=M,z=D||{};else{var F=typeof M=="number"&&M>=1888&&M<=2111;if(!F)throw new Error("Solar year outside range 1888-2111");var w=typeof D=="number"&&D>=1&&D<=12;if(!w)throw new Error("Solar month outside range 1 - 12");var L=typeof B=="number"&&B>=1&&B<=31;if(!L)throw new Error("Solar day outside range 1 - 31");N={year:M,month:D,day:B},z={}}var O=T[N.year-T[0]],H=N.year<<9|N.month<<5|N.day;z.year=H>=O?N.year:N.year-1,O=T[z.year-T[0]];var W=O>>9&4095,Ce=O>>5&15,he=O&31,le,Y=new Date(W,Ce-1,he),Re=new Date(N.year,N.month-1,N.day);le=Math.round((Re-Y)/(24*3600*1e3));var fe=b[z.year-b[0]],xe;for(xe=0;xe<13;xe++){var ge=fe&1<<12-xe?30:29;if(le<ge)break;le-=ge}var ye=fe>>13;return!ye||xe<ye?(z.isIntercalary=!1,z.month=1+xe):xe===ye?(z.isIntercalary=!0,z.month=xe):(z.isIntercalary=!1,z.month=xe),z.day=1+le,z}function k(M,D,B,P,N){var z,F;if(typeof M=="object")F=M,z=D||{};else{var w=typeof M=="number"&&M>=1888&&M<=2111;if(!w)throw new Error("Lunar year outside range 1888-2111");var L=typeof D=="number"&&D>=1&&D<=12;if(!L)throw new Error("Lunar month outside range 1 - 12");var O=typeof B=="number"&&B>=1&&B<=30;if(!O)throw new Error("Lunar day outside range 1 - 30");var H;typeof P=="object"?(H=!1,z=P):(H=!!P,z={}),F={year:M,month:D,day:B,isIntercalary:H}}var W;W=F.day-1;var Ce=b[F.year-b[0]],he=Ce>>13,le;he&&(F.month>he||F.isIntercalary)?le=F.month:le=F.month-1;for(var Y=0;Y<le;Y++){var Re=Ce&1<<12-Y?30:29;W+=Re}var fe=T[F.year-T[0]],xe=fe>>9&4095,ge=fe>>5&15,ye=fe&31,Ae=new Date(xe,ge-1,ye+W);return z.year=Ae.getFullYear(),z.month=1+Ae.getMonth(),z.day=Ae.getDate(),z}}),Lv=t(()=>{var me=py(),ue=cv();function g(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var h=this._validate(x,this.minMonth,this.minDay,me.local.invalidYear),x=h.year()+(h.year()<0?1:0);return x%4===3||x%4===-1},monthsInYear:function(s){return this._validate(s,this.minMonth,this.minDay,me.local.invalidYear||me.regionalOptions[""].invalidYear),13},weekOfYear:function(s,h,x){var v=this.newDate(s,h,x);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(s,h){var x=this._validate(s,h,this.minDay,me.local.invalidMonth);return this.daysPerMonth[x.month()-1]+(x.month()===13&&this.leapYear(x.year())?1:0)},weekDay:function(s,h,x){return(this.dayOfWeek(s,h,x)||7)<6},toJD:function(s,h,x){var v=this._validate(s,h,x,me.local.invalidDate);return s=v.year(),s<0&&s++,v.day()+(v.month()-1)*30+(s-1)*365+Math.floor(s/4)+this.jdEpoch-1},fromJD:function(s){var h=Math.floor(s)+.5-this.jdEpoch,x=Math.floor((h-Math.floor((h+366)/1461))/365)+1;x<=0&&x--,h=Math.floor(s)+.5-this.newDate(x,1,1).toJD();var v=Math.floor(h/30)+1,y=h-(v-1)*30+1;return this.newDate(x,v,y)}}),me.calendars.coptic=g}),cy=t(()=>{var me=py(),ue=cv();function g(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(h){return this._validate(h,this.minMonth,this.minDay,me.local.invalidYear),!1},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,me.local.invalidYear),13},daysInYear:function(h){return this._validate(h,this.minMonth,this.minDay,me.local.invalidYear),400},weekOfYear:function(h,x,v){var y=this.newDate(h,x,v);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/8)+1},daysInMonth:function(h,x){var v=this._validate(h,x,this.minDay,me.local.invalidMonth);return this.daysPerMonth[v.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(h,x,v){var y=this._validate(h,x,v,me.local.invalidDate);return(y.day()+1)%8},weekDay:function(h,x,v){var y=this.dayOfWeek(h,x,v);return y>=2&&y<=6},extraInfo:function(h,x,v){var y=this._validate(h,x,v,me.local.invalidDate);return{century:s[Math.floor((y.year()-1)/100)+1]||""}},toJD:function(h,x,v){var y=this._validate(h,x,v,me.local.invalidDate);return h=y.year()+(y.year()<0?1:0),x=y.month(),v=y.day(),v+(x>1?16:0)+(x>2?(x-2)*32:0)+(h-1)*400+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h+.5)-Math.floor(this.jdEpoch)-1;var x=Math.floor(h/400)+1;h-=(x-1)*400,h+=h>15?16:0;var v=Math.floor(h/32)+1,y=h-(v-1)*32+1;return this.newDate(x<=0?x-1:x,v,y)}});var s={20:"Fruitbat",21:"Anchovy"};me.calendars.discworld=g}),R_=t(()=>{var me=py(),ue=cv();function g(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var h=this._validate(x,this.minMonth,this.minDay,me.local.invalidYear),x=h.year()+(h.year()<0?1:0);return x%4===3||x%4===-1},monthsInYear:function(s){return this._validate(s,this.minMonth,this.minDay,me.local.invalidYear||me.regionalOptions[""].invalidYear),13},weekOfYear:function(s,h,x){var v=this.newDate(s,h,x);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(s,h){var x=this._validate(s,h,this.minDay,me.local.invalidMonth);return this.daysPerMonth[x.month()-1]+(x.month()===13&&this.leapYear(x.year())?1:0)},weekDay:function(s,h,x){return(this.dayOfWeek(s,h,x)||7)<6},toJD:function(s,h,x){var v=this._validate(s,h,x,me.local.invalidDate);return s=v.year(),s<0&&s++,v.day()+(v.month()-1)*30+(s-1)*365+Math.floor(s/4)+this.jdEpoch-1},fromJD:function(s){var h=Math.floor(s)+.5-this.jdEpoch,x=Math.floor((h-Math.floor((h+366)/1461))/365)+1;x<=0&&x--,h=Math.floor(s)+.5-this.newDate(x,1,1).toJD();var v=Math.floor(h/30)+1,y=h-(v-1)*30+1;return this.newDate(x,v,y)}}),me.calendars.ethiopian=g}),d2=t(()=>{var me=py(),ue=cv();function g(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var x=this._validate(h,this.minMonth,this.minDay,me.local.invalidYear);return this._leapYear(x.year())},_leapYear:function(h){return h=h<0?h+1:h,s(h*7+1,19)<7},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,me.local.invalidYear),this._leapYear(h.year?h.year():h)?13:12},weekOfYear:function(h,x,v){var y=this.newDate(h,x,v);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInYear:function(h){var x=this._validate(h,this.minMonth,this.minDay,me.local.invalidYear);return h=x.year(),this.toJD(h===-1?1:h+1,7,1)-this.toJD(h,7,1)},daysInMonth:function(h,x){return h.year&&(x=h.month(),h=h.year()),this._validate(h,x,this.minDay,me.local.invalidMonth),x===12&&this.leapYear(h)||x===8&&s(this.daysInYear(h),10)===5?30:x===9&&s(this.daysInYear(h),10)===3?29:this.daysPerMonth[x-1]},weekDay:function(h,x,v){return this.dayOfWeek(h,x,v)!==6},extraInfo:function(h,x,v){var y=this._validate(h,x,v,me.local.invalidDate);return{yearType:(this.leapYear(y)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(y)%10-3]}},toJD:function(h,x,v){var y=this._validate(h,x,v,me.local.invalidDate);h=y.year(),x=y.month(),v=y.day();var b=h<=0?h+1:h,T=this.jdEpoch+this._delay1(b)+this._delay2(b)+v+1;if(x<7){for(var u=7;u<=this.monthsInYear(h);u++)T+=this.daysInMonth(h,u);for(var u=1;u<x;u++)T+=this.daysInMonth(h,u)}else for(var u=7;u<x;u++)T+=this.daysInMonth(h,u);return T},_delay1:function(h){var x=Math.floor((235*h-234)/19),v=12084+13753*x,y=x*29+Math.floor(v/25920);return s(3*(y+1),7)<3&&y++,y},_delay2:function(h){var x=this._delay1(h-1),v=this._delay1(h),y=this._delay1(h+1);return y-v===356?2:v-x===382?1:0},fromJD:function(h){h=Math.floor(h)+.5;for(var x=Math.floor((h-this.jdEpoch)*98496/35975351)-1;h>=this.toJD(x===-1?1:x+1,7,1);)x++;for(var v=h<this.toJD(x,1,1)?7:1;h>this.toJD(x,v,this.daysInMonth(x,v));)v++;var y=h-this.toJD(x,v,1)+1;return this.newDate(x,v,y)}});function s(h,x){return h-x*Math.floor(h/x)}me.calendars.hebrew=g}),Zx=t(()=>{var me=py(),ue=cv();function g(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(s){var h=this._validate(s,this.minMonth,this.minDay,me.local.invalidYear);return(h.year()*11+14)%30<11},weekOfYear:function(s,h,x){var v=this.newDate(s,h,x);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(s){return this.leapYear(s)?355:354},daysInMonth:function(s,h){var x=this._validate(s,h,this.minDay,me.local.invalidMonth);return this.daysPerMonth[x.month()-1]+(x.month()===12&&this.leapYear(x.year())?1:0)},weekDay:function(s,h,x){return this.dayOfWeek(s,h,x)!==5},toJD:function(s,h,x){var v=this._validate(s,h,x,me.local.invalidDate);return s=v.year(),h=v.month(),x=v.day(),s=s<=0?s+1:s,x+Math.ceil(29.5*(h-1))+(s-1)*354+Math.floor((3+11*s)/30)+this.jdEpoch-1},fromJD:function(s){s=Math.floor(s)+.5;var h=Math.floor((30*(s-this.jdEpoch)+10646)/10631);h=h<=0?h-1:h;var x=Math.min(12,Math.ceil((s-29-this.toJD(h,1,1))/29.5)+1),v=s-this.toJD(h,x,1)+1;return this.newDate(h,x,v)}}),me.calendars.islamic=g}),L_=t(()=>{var me=py(),ue=cv();function g(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var h=this._validate(x,this.minMonth,this.minDay,me.local.invalidYear),x=h.year()<0?h.year()+1:h.year();return x%4===0},weekOfYear:function(s,h,x){var v=this.newDate(s,h,x);return v.add(4-(v.dayOfWeek()||7),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(s,h){var x=this._validate(s,h,this.minDay,me.local.invalidMonth);return this.daysPerMonth[x.month()-1]+(x.month()===2&&this.leapYear(x.year())?1:0)},weekDay:function(s,h,x){return(this.dayOfWeek(s,h,x)||7)<6},toJD:function(s,h,x){var v=this._validate(s,h,x,me.local.invalidDate);return s=v.year(),h=v.month(),x=v.day(),s<0&&s++,h<=2&&(s--,h+=12),Math.floor(365.25*(s+4716))+Math.floor(30.6001*(h+1))+x-1524.5},fromJD:function(s){var h=Math.floor(s+.5),x=h+1524,v=Math.floor((x-122.1)/365.25),y=Math.floor(365.25*v),b=Math.floor((x-y)/30.6001),T=b-Math.floor(b<14?1:13),u=v-Math.floor(T>2?4716:4715),k=x-y-Math.floor(30.6001*b);return u<=0&&u--,this.newDate(u,T,k)}}),me.calendars.julian=g}),V2=t(()=>{var me=py(),ue=cv();function g(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(x){return this._validate(x,this.minMonth,this.minDay,me.local.invalidYear),!1},formatYear:function(x){var v=this._validate(x,this.minMonth,this.minDay,me.local.invalidYear);x=v.year();var y=Math.floor(x/400);x=x%400,x+=x<0?400:0;var b=Math.floor(x/20);return y+"."+b+"."+x%20},forYear:function(x){if(x=x.split("."),x.length<3)throw"Invalid Mayan year";for(var v=0,y=0;y<x.length;y++){var b=parseInt(x[y],10);if(Math.abs(b)>19||y>0&&b<0)throw"Invalid Mayan year";v=v*20+b}return v},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,me.local.invalidYear),18},weekOfYear:function(x,v,y){return this._validate(x,v,y,me.local.invalidDate),0},daysInYear:function(x){return this._validate(x,this.minMonth,this.minDay,me.local.invalidYear),360},daysInMonth:function(x,v){return this._validate(x,v,this.minDay,me.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(x,v,y){var b=this._validate(x,v,y,me.local.invalidDate);return b.day()},weekDay:function(x,v,y){return this._validate(x,v,y,me.local.invalidDate),!0},extraInfo:function(x,v,y){var b=this._validate(x,v,y,me.local.invalidDate),T=b.toJD(),u=this._toHaab(T),k=this._toTzolkin(T);return{haabMonthName:this.local.haabMonths[u[0]-1],haabMonth:u[0],haabDay:u[1],tzolkinDayName:this.local.tzolkinMonths[k[0]-1],tzolkinDay:k[0],tzolkinTrecena:k[1]}},_toHaab:function(x){x-=this.jdEpoch;var v=s(x+8+340,365);return[Math.floor(v/20)+1,s(v,20)]},_toTzolkin:function(x){return x-=this.jdEpoch,[h(x+20,20),h(x+4,13)]},toJD:function(x,v,y){var b=this._validate(x,v,y,me.local.invalidDate);return b.day()+b.month()*20+b.year()*360+this.jdEpoch},fromJD:function(x){x=Math.floor(x)+.5-this.jdEpoch;var v=Math.floor(x/360);x=x%360,x+=x<0?360:0;var y=Math.floor(x/20),b=x%20;return this.newDate(v,y,b)}});function s(x,v){return x-v*Math.floor(x/v)}function h(x,v){return s(x-1,v)+1}me.calendars.mayan=g}),h2=t(()=>{var me=py(),ue=cv();function g(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar;var s=me.instance("gregorian");ue(g.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var x=this._validate(h,this.minMonth,this.minDay,me.local.invalidYear||me.regionalOptions[""].invalidYear);return s.leapYear(x.year()+(x.year()<1?1:0)+1469)},weekOfYear:function(h,x,v){var y=this.newDate(h,x,v);return y.add(1-(y.dayOfWeek()||7),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(h,x){var v=this._validate(h,x,this.minDay,me.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(h,x,v){return(this.dayOfWeek(h,x,v)||7)<6},toJD:function(b,x,v){var y=this._validate(b,x,v,me.local.invalidMonth),b=y.year();b<0&&b++;for(var T=y.day(),u=1;u<y.month();u++)T+=this.daysPerMonth[u-1];return T+s.toJD(b+1468,3,13)},fromJD:function(h){h=Math.floor(h+.5);for(var x=Math.floor((h-(this.jdEpoch-1))/366);h>=this.toJD(x+1,1,1);)x++;for(var v=h-Math.floor(this.toJD(x,1,1)+.5)+1,y=1;v>this.daysInMonth(x,y);)v-=this.daysInMonth(x,y),y++;return this.newDate(x,y,v)}}),me.calendars.nanakshahi=g}),V5=t(()=>{var me=py(),ue=cv();function g(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(s){return this.daysInYear(s)!==this.daysPerYear},weekOfYear:function(s,h,x){var v=this.newDate(s,h,x);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(s){var h=this._validate(s,this.minMonth,this.minDay,me.local.invalidYear);if(s=h.year(),typeof this.NEPALI_CALENDAR_DATA[s]>"u")return this.daysPerYear;for(var x=0,v=this.minMonth;v<=12;v++)x+=this.NEPALI_CALENDAR_DATA[s][v];return x},daysInMonth:function(s,h){return s.year&&(h=s.month(),s=s.year()),this._validate(s,h,this.minDay,me.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[s]>"u"?this.daysPerMonth[h-1]:this.NEPALI_CALENDAR_DATA[s][h]},weekDay:function(s,h,x){return this.dayOfWeek(s,h,x)!==6},toJD:function(s,h,x){var v=this._validate(s,h,x,me.local.invalidDate);s=v.year(),h=v.month(),x=v.day();var y=me.instance(),b=0,T=h,u=s;this._createMissingCalendarData(s);var k=s-(T>9||T===9&&x>=this.NEPALI_CALENDAR_DATA[u][0]?56:57);for(h!==9&&(b=x,T--);T!==9;)T<=0&&(T=12,u--),b+=this.NEPALI_CALENDAR_DATA[u][T],T--;return h===9?(b+=x-this.NEPALI_CALENDAR_DATA[u][0],b<0&&(b+=y.daysInYear(k))):b+=this.NEPALI_CALENDAR_DATA[u][9]-this.NEPALI_CALENDAR_DATA[u][0],y.newDate(k,1,1).add(b,"d").toJD()},fromJD:function(s){var h=me.instance(),x=h.fromJD(s),v=x.year(),y=x.dayOfYear(),b=v+56;this._createMissingCalendarData(b);for(var T=9,u=this.NEPALI_CALENDAR_DATA[b][0],k=this.NEPALI_CALENDAR_DATA[b][T]-u+1;y>k;)T++,T>12&&(T=1,b++),k+=this.NEPALI_CALENDAR_DATA[b][T];var M=this.NEPALI_CALENDAR_DATA[b][T]-(k-y);return this.newDate(b,T,M)},_createMissingCalendarData:function(s){var h=this.daysPerMonth.slice(0);h.unshift(17);for(var x=s-1;x<s+2;x++)typeof this.NEPALI_CALENDAR_DATA[x]>"u"&&(this.NEPALI_CALENDAR_DATA[x]=h)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),me.calendars.nepali=g}),ay=t(()=>{var me=py(),ue=cv();function g(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function s(h){var x=h-475;h<0&&x++;var v=.242197,y=v*x,b=v*(x+1),T=y-Math.floor(y),u=b-Math.floor(b);return T>u}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],dayNames:["Yekshanbeh","Doshanbeh","Seshanbeh","Chahārshanbeh","Panjshanbeh","Jom'eh","Shanbeh"],dayNamesShort:["Yek","Do","Se","Cha","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(h){var x=this._validate(h,this.minMonth,this.minDay,me.local.invalidYear);return s(x.year())},weekOfYear:function(h,x,v){var y=this.newDate(h,x,v);return y.add(-((y.dayOfWeek()+1)%7),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(h,x){var v=this._validate(h,x,this.minDay,me.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(h,x,v){return this.dayOfWeek(h,x,v)!==5},toJD:function(h,x,v){var y=this._validate(h,x,v,me.local.invalidDate);h=y.year(),x=y.month(),v=y.day();var b=0;if(h>0)for(var T=1;T<h;T++)s(T)&&b++;else if(h<0)for(var T=h;T<0;T++)s(T)&&b--;return v+(x<=7?(x-1)*31:(x-1)*30+6)+(h>0?h-1:h)*365+b+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h)+.5;var x=475+(h-this.toJD(475,1,1))/365.242197,v=Math.floor(x);v<=0&&v--,h>this.toJD(v,12,s(v)?30:29)&&(v++,v===0&&v++);var y=h-this.toJD(v,1,1)+1,b=y<=186?Math.ceil(y/31):Math.ceil((y-6)/30),T=h-this.toJD(v,b,1)+1;return this.newDate(v,b,T)}}),me.calendars.persian=g,me.calendars.jalali=g}),Nb=t(()=>{var me=py(),ue=cv(),g=me.instance();function s(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}s.prototype=new me.baseCalendar,ue(s.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(v){var x=this._validate(v,this.minMonth,this.minDay,me.local.invalidYear),v=this._t2gYear(x.year());return g.leapYear(v)},weekOfYear:function(b,x,v){var y=this._validate(b,this.minMonth,this.minDay,me.local.invalidYear),b=this._t2gYear(y.year());return g.weekOfYear(b,y.month(),y.day())},daysInMonth:function(h,x){var v=this._validate(h,x,this.minDay,me.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(h,x,v){return(this.dayOfWeek(h,x,v)||7)<6},toJD:function(b,x,v){var y=this._validate(b,x,v,me.local.invalidDate),b=this._t2gYear(y.year());return g.toJD(b,y.month(),y.day())},fromJD:function(h){var x=g.fromJD(h),v=this._g2tYear(x.year());return this.newDate(v,x.month(),x.day())},_t2gYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&h<=-1?1:0)},_g2tYear:function(h){return h-this.yearsOffset-(h>=1&&h<=this.yearsOffset?1:0)}}),me.calendars.taiwan=s}),zb=t(()=>{var me=py(),ue=cv(),g=me.instance();function s(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}s.prototype=new me.baseCalendar,ue(s.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var x=this._validate(v,this.minMonth,this.minDay,me.local.invalidYear),v=this._t2gYear(x.year());return g.leapYear(v)},weekOfYear:function(b,x,v){var y=this._validate(b,this.minMonth,this.minDay,me.local.invalidYear),b=this._t2gYear(y.year());return g.weekOfYear(b,y.month(),y.day())},daysInMonth:function(h,x){var v=this._validate(h,x,this.minDay,me.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(h,x,v){return(this.dayOfWeek(h,x,v)||7)<6},toJD:function(b,x,v){var y=this._validate(b,x,v,me.local.invalidDate),b=this._t2gYear(y.year());return g.toJD(b,y.month(),y.day())},fromJD:function(h){var x=g.fromJD(h),v=this._g2tYear(x.year());return this.newDate(v,x.month(),x.day())},_t2gYear:function(h){return h-this.yearsOffset-(h>=1&&h<=this.yearsOffset?1:0)},_g2tYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&h<=-1?1:0)}}),me.calendars.thai=s}),V3=t(()=>{var me=py(),ue=cv();function g(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}g.prototype=new me.baseCalendar,ue(g.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(h){var x=this._validate(h,this.minMonth,this.minDay,me.local.invalidYear);return this.daysInYear(x.year())===355},weekOfYear:function(h,x,v){var y=this.newDate(h,x,v);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInYear:function(h){for(var x=0,v=1;v<=12;v++)x+=this.daysInMonth(h,v);return x},daysInMonth:function(h,x){for(var v=this._validate(h,x,this.minDay,me.local.invalidMonth),y=v.toJD()-24e5+.5,b=0,T=0;T<s.length;T++){if(s[T]>y)return s[b]-s[b-1];b++}return 30},weekDay:function(h,x,v){return this.dayOfWeek(h,x,v)!==5},toJD:function(h,x,v){var y=this._validate(h,x,v,me.local.invalidDate),b=12*(y.year()-1)+y.month()-15292,T=y.day()+s[b-1]-1;return T+24e5-.5},fromJD:function(h){for(var x=h-24e5+.5,v=0,y=0;y<s.length&&!(s[y]>x);y++)v++;var b=v+15292,T=Math.floor((b-1)/12),u=T+1,k=b-12*T,M=x-s[v-1]+1;return this.newDate(u,k,M)},isValid:function(h,x,v){var y=me.baseCalendar.prototype.isValid.apply(this,arguments);return y&&(h=h.year!=null?h.year:h,y=h>=1276&&h<=1500),y},_validate:function(h,x,v,y){var b=me.baseCalendar.prototype._validate.apply(this,arguments);if(b.year<1276||b.year>1500)throw y.replace(/\{0\}/,this.local.name);return b}}),me.calendars.ummalqura=g;var s=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]}),q3=t((me,ue)=>{ue.exports=py(),fx(),Wg(),Lv(),cy(),R_(),d2(),Zx(),L_(),V2(),h2(),V5(),ay(),Nb(),zb(),V3()}),q5=t((me,ue)=>{var g=q3(),s=Z(),h=C(),x=h.EPOCHJD,v=h.ONEDAY,y={valType:"enumerated",values:s.sortObjectKeys(g.calendars),editType:"calc",dflt:"gregorian"},b=function(Ce,he,le,Y){var Re={};return Re[le]=y,s.coerce(Ce,he,Re,le,Y)},T=function(Ce,he,le,Y){for(var Re=0;Re<le.length;Re++)b(Ce,he,le[Re]+"calendar",Y.calendar)},u={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},k={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},M={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},D="##",B={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:D,w:D,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function P(Ce,he,le){for(var Y=Math.floor((he+.05)/v)+x,Re=z(le).fromJD(Y),fe=0,xe,ge,ye,Ae,Le;(fe=Ce.indexOf("%",fe))!==-1;)xe=Ce.charAt(fe+1),xe==="0"||xe==="-"||xe==="_"?(ye=3,ge=Ce.charAt(fe+2),xe==="_"&&(xe="-")):(ge=xe,xe="0",ye=2),Ae=B[ge],Ae?(Ae===D?Le=D:Le=Re.formatDate(Ae[xe]),Ce=Ce.substr(0,fe)+Le+Ce.substr(fe+ye),fe+=Le.length):fe+=ye;return Ce}var N={};function z(Ce){var he=N[Ce];return he||(he=N[Ce]=g.instance(Ce),he)}function F(Ce){return s.extendFlat({},y,{description:Ce})}function w(Ce){return"Sets the calendar system to use with `"+Ce+"` date data."}var L={xcalendar:F(w("x"))},O=s.extendFlat({},L,{ycalendar:F(w("y"))}),H=s.extendFlat({},O,{zcalendar:F(w("z"))}),W=F(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ue.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:O,bar:O,box:O,heatmap:O,contour:O,histogram:O,histogram2d:O,histogram2dcontour:O,scatter3d:H,surface:H,mesh3d:H,scattergl:O,ohlc:L,candlestick:L},layout:{calendar:F(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:W},yaxis:{calendar:W},scene:{xaxis:{calendar:W},yaxis:{calendar:W},zaxis:{calendar:W}},polar:{radialaxis:{calendar:W}}}},layoutAttributes:y,handleDefaults:b,handleTraceDefaults:T,CANONICAL_SUNDAY:k,CANONICAL_TICK:u,DFLTRANGE:M,getCal:z,worldCalFmt:P}}),Ob=t((me,ue)=>{ue.exports=q5()}),Pb=t((me,ue)=>{var g=U2();g.register([u2(),Ny(),Ob()]),ue.exports=g});return Pb()})();/*! Bundled license information:

		native-promise-only/lib/npo.src.js:
		  (*! Native Promise Only
		      v0.8.1 (c) Kyle Simpson
		      MIT License: http://getify.mit-license.org
		  *)

		polybooljs/index.js:
		  (*
		   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
		   * @license MIT
		   * @preserve Project Home: https://github.com/voidqk/polybooljs
		   *)

		object-assign/index.js:
		  (*
		  object-assign
		  (c) Sindre Sorhus
		  @license MIT
		  *)
		*/return window.Plotly=e,e})})(plotlyBasic_min$1)),plotlyBasic_min$1.exports}var plotlyBasic_minExports=requirePlotlyBasic_min();const Plotly=getDefaultExportFromCjs(plotlyBasic_minExports);function getBandTraces(r,e,t={}){const a=[];return e.forEach((o,c)=>{a.push({name:t.name,legendgroup:t.name,showlegend:c===0,...traceDefaultBands,...t,x:r,y:o})}),a}function getBandLayout(r=[],e=[]){return deepmerge.all([plotBandLayout,{xaxis:{tickvals:e,ticktext:r},yaxis:{}}])}function getBandStructure(r){const t=getXLabelsfromkpath(r[0].bandsData.path).map(prettifyLabels),a=getXLabelPos(r[0].bandsData.paths),o=getBandLayout(t,a);let c=[];for(const[d,p]of r.entries()){let _=p.traceFormat;(!_||Object.keys(_).length===0)&&(_={name:`Band Structure ${d}`,line:{color:getColor(d),width:1}});const S=p.bandsData,{xs:A,ys:C}=getXYData(S),j=getBandTraces(A,C,_);c.push(...j)}return{bandTraces:c,bandLayout:o}}function getDosLayout(r="h"){let e;return r==="v"?e=plotDOSLayoutF:e=plotDOSLayout,e}function getDosTraces(r,e="h",t={}){const a=e==="v"?r.y:r.x,o=e==="v"?r.x:r.y;return{...traceDefaultDos,...t,x:a,y:o}}function getDos(r,e="h"){const t=[];for(const[o,c]of r.entries()){let d=c.traceFormat;(!d||Object.keys(d).length===0)&&(d={name:`DOS ${o}`,line:{color:getColor(o),width:2}});const p=c.dosData,_=getDosTraces(p,e,d);t.push(_)}const a=getDosLayout(e);return{dosTraces:t,dosLayout:a}}function getProjectionTraces(r,e,t,a={},o=1){const c=transpose(t),d=transpose(e),p=[];return d.forEach((_,S)=>{const A=c[S],C=new Float64Array(_.length),j=new Float64Array(_.length);for(let ie=0;ie<_.length;ie++){const K=A[ie]*o;C[ie]=_[ie]+K,j[ie]=_[ie]-K}const V=r.length,J=new Float32Array(V*2),re=new Float32Array(V*2);for(let ie=0;ie<V;ie++)J[ie]=r[ie],re[ie]=j[ie],J[2*V-1-ie]=r[ie],re[2*V-1-ie]=C[ie];p.push({name:a.name,legendgroup:a.name,type:"scatter",mode:"lines",fill:"toself",...a,showlegend:S===0,x:J,y:re})}),p}function handleSettings(r,e){for(const t in r)r[t]!==null&&typeof r[t]=="object"&&!Array.isArray(r[t])&&e[t]&&typeof e[t]=="object"&&!Array.isArray(e[t])?e[t]=deepmerge(e[t],r[t]):e[t]=r[t]}function BandsVisualiser(r,{bandsDataArray:e=[],dosDataArray:t=[],fermiLevels:a=[],customTraces:o=[],settings:c={}}){let d=[],p={},_=[],S=[],A={};typeof a=="number"&&(a=[a]);const C=e.length>0,j=t.length>0;if(C){const ie=getBandStructure(e);d=ie.bandTraces,p=ie.bandLayout;for(const[K,Ne]of e.entries())if(Ne.hasOwnProperty("projections"))for(const[G,se]of Ne.projections.entries()){const He=se.traceFormat&&Object.keys(se.traceFormat).length>0?se.traceFormat:{name:`Projection ${G}`,line:{color:getColor(G),width:0}};_.push(...getProjectionTraces(Ne.bandsData.x,Ne.bandsData.y,se.projData.weights,He))}}if(j){const K=getDos(t,C?"v":"h");S=K.dosTraces,A=K.dosLayout}let V={},J=[];if(j&&!C)J=S,V={...A,showlegend:A?.showlegend??!0};else if(C&&!j)J=[...d,..._],V={...p,showlegend:p?.showlegend??!0};else if(j&&C){S=S.map(K=>({...K,xaxis:"x2",yaxis:"y"}));const ie=mergeLegendTracesByName([..._,...S]);J=[...d,...ie],V={...plotCombinedLayout,xaxis:{...plotCombinedLayout.xaxis||{},...p?.xaxis||{}},xaxis2:{...plotCombinedLayout.xaxis2||{},...A?.xaxis2||{}},yaxis:{...plotCombinedLayout.yaxis||{},...p?.yaxis||{},...A?.yaxis||{}}}}for(const ie of o)console.log(ie),ie.target==="dos"?J.push({...ie,xaxis:"x2",yaxis:"y"}):ie.target==="bands"?J.push({...ie,xaxis:"x",yaxis:"y"}):J.push({...ie});const re=addfermiLines(a,J,j,C);handleSettings(c,V),Plotly.react(r,re,V,{displaylogo:!1,responsive:!0})}function CardContainer({children:r,header:e,footer:t,className:a="",childrenClassName:o="",style:c={}}){return jsxRuntimeExports$1.jsxs("div",{className:`ae:w-full ae:max-w-full ae:bg-slate-100 ae:border ae:border-slate-200 ae:p-3 ae:rounded-md ae:shadow-md ${a}`,style:c,children:[e&&jsxRuntimeExports$1.jsx("div",{className:"explorerHeadingBig ae:mb-2",children:e}),jsxRuntimeExports$1.jsx("div",{className:`ae:px-1 ${o}`,children:r}),t&&jsxRuntimeExports$1.jsx("div",{className:"ae:mt-2 ae:text-sm ae:text-gray-500",children:t})]})}function BandsDataVisualiser({nodeData:r}){const e=reactExports.useRef(null),[t,a]=reactExports.useState(null),[o,c]=reactExports.useState(!1),[d,p]=reactExports.useState(null),_=r.downloadByFormat?.json,S=r?.attributes?.units||"N/A";return reactExports.useEffect(()=>{if(!_)return;(async()=>{c(!0),p(null);try{const C=await fetch(_);if(!C.ok)throw new Error(`HTTP error: ${C.status}`);const j=await C.json();a([{bandsData:j}])}catch(C){console.error("Failed to fetch bands JSON:",C),p(C.message)}finally{c(!1)}})()},[_]),reactExports.useEffect(()=>{!e.current||!t||BandsVisualiser(e.current,{bandsDataArray:t,settings:{showlegend:!1,yaxis:{title:{text:`Value [${S}]`}},xaxis:{title:{text:"Path"}},margin:{l:80,b:45}}})},[t,S]),jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:jsxRuntimeExports$1.jsx(CardContainer,{header:"Bands Structure Plot",className:"ae:!px-1.5 ae:!pt-2",childrenClassName:"ae:!p-0",children:jsxRuntimeExports$1.jsxs("div",{className:"ae:w-full ae:h-[450px] ae:relative ae:flex ae:items-center ae:justify-center",children:[o&&jsxRuntimeExports$1.jsx(Spinner,{}),d&&!o&&jsxRuntimeExports$1.jsx(ErrorDisplay,{message:d,onRetry:()=>{}}),!o&&!d&&t&&jsxRuntimeExports$1.jsx("div",{ref:e,className:"ae:absolute ae:inset-0 "})]})})})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const os="162",Dn={ROTATE:0,DOLLY:1,PAN:2},Un={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},No=0,Ms=1,Fo=2,Qa=1,Oo=2,jt=3,hn=0,Et=1,Gt=2,ln=0,Qn=1,Ss=2,Es=3,ys=4,Bo=5,Tn=100,zo=101,Go=102,Ts=103,bs=104,Ho=200,Vo=201,ko=202,Wo=203,Jr=204,Qr=205,Xo=206,Yo=207,qo=208,jo=209,Ko=210,Zo=211,$o=212,Jo=213,Qo=214,el=0,tl=1,nl=2,Qi=3,il=4,rl=5,sl=6,al=7,eo=0,ol=1,ll=2,cn=0,cl=1,ul=2,hl=3,fl=4,dl=5,pl=6,ml=7,to=300,ii=301,ri=302,es=303,ts=304,lr=306,ns=1e3,Nt=1001,is=1002,xt=1003,As=1004,ui=1005,St=1006,gr=1007,An=1008,un=1009,_l=1010,gl=1011,ls=1012,no=1013,on=1014,Kt=1015,_i=1016,io=1017,ro=1018,wn=1020,vl=1021,Ft=1023,xl=1024,Ml=1025,Rn=1026,si=1027,Sl=1028,so=1029,El=1030,ao=1031,oo=1033,vr=33776,xr=33777,Mr=33778,Sr=33779,ws=35840,Rs=35841,Cs=35842,Ps=35843,lo=36196,Ls=37492,Ds=37496,Us=37808,Is=37809,Ns=37810,Fs=37811,Os=37812,Bs=37813,zs=37814,Gs=37815,Hs=37816,Vs=37817,ks=37818,Ws=37819,Xs=37820,Ys=37821,Er=36492,qs=36494,js=36495,yl=36283,Ks=36284,Zs=36285,$s=36286,Tl=3200,bl=3201,Al=0,wl=1,an="",Bt="srgb",dn="srgb-linear",cs="display-p3",cr="display-p3-linear",er="linear",$e="srgb",tr="rec709",nr="p3",In=7680,Js=519,Rl=512,Cl=513,Pl=514,co=515,Ll=516,Dl=517,Ul=518,Il=519,Qs=35044,ea="300 es",rs=1035,Zt=2e3,ir=2001;class Ln{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const a=this._listeners;a[e]===void 0&&(a[e]=[]),a[e].indexOf(t)===-1&&a[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const a=this._listeners;return a[e]!==void 0&&a[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const o=a.indexOf(t);o!==-1&&a.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const a=t.slice(0);for(let o=0,c=a.length;o<c;o++)a[o].call(this,e);e.target=null}}}const pt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ei=Math.PI/180,gi=180/Math.PI;function oi(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,a=Math.random()*4294967295|0;return(pt[r&255]+pt[r>>8&255]+pt[r>>16&255]+pt[r>>24&255]+"-"+pt[e&255]+pt[e>>8&255]+"-"+pt[e>>16&15|64]+pt[e>>24&255]+"-"+pt[t&63|128]+pt[t>>8&255]+"-"+pt[t>>16&255]+pt[t>>24&255]+pt[a&255]+pt[a>>8&255]+pt[a>>16&255]+pt[a>>24&255]).toLowerCase()}function _t(r,e,t){return Math.max(e,Math.min(t,r))}function us(r,e){return(r%e+e)%e}function mi(r,e,t){return(1-t)*r+t*e}function ss(r){return(r&r-1)===0&&r!==0}function rr(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Zn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function gt(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Kl={DEG2RAD:ei};class Ie{constructor(e=0,t=0){Ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,a=this.y,o=e.elements;return this.x=o[0]*t+o[3]*a+o[6],this.y=o[1]*t+o[4]*a+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(t,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const a=this.dot(e)/t;return Math.acos(_t(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,a=this.y-e.y;return t*t+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const a=Math.cos(t),o=Math.sin(t),c=this.x-e.x,d=this.y-e.y;return this.x=c*a-d*o+e.x,this.y=c*o+d*a+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ge{constructor(e,t,a,o,c,d,p,_,S){Ge.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,a,o,c,d,p,_,S)}set(e,t,a,o,c,d,p,_,S){const A=this.elements;return A[0]=e,A[1]=o,A[2]=p,A[3]=t,A[4]=c,A[5]=_,A[6]=a,A[7]=d,A[8]=S,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,a=e.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],this}extractBasis(e,t,a){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const a=e.elements,o=t.elements,c=this.elements,d=a[0],p=a[3],_=a[6],S=a[1],A=a[4],C=a[7],j=a[2],V=a[5],J=a[8],re=o[0],ie=o[3],K=o[6],Ne=o[1],G=o[4],se=o[7],He=o[2],Fe=o[5],Xe=o[8];return c[0]=d*re+p*Ne+_*He,c[3]=d*ie+p*G+_*Fe,c[6]=d*K+p*se+_*Xe,c[1]=S*re+A*Ne+C*He,c[4]=S*ie+A*G+C*Fe,c[7]=S*K+A*se+C*Xe,c[2]=j*re+V*Ne+J*He,c[5]=j*ie+V*G+J*Fe,c[8]=j*K+V*se+J*Xe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],a=e[1],o=e[2],c=e[3],d=e[4],p=e[5],_=e[6],S=e[7],A=e[8];return t*d*A-t*p*S-a*c*A+a*p*_+o*c*S-o*d*_}invert(){const e=this.elements,t=e[0],a=e[1],o=e[2],c=e[3],d=e[4],p=e[5],_=e[6],S=e[7],A=e[8],C=A*d-p*S,j=p*_-A*c,V=S*c-d*_,J=t*C+a*j+o*V;if(J===0)return this.set(0,0,0,0,0,0,0,0,0);const re=1/J;return e[0]=C*re,e[1]=(o*S-A*a)*re,e[2]=(p*a-o*d)*re,e[3]=j*re,e[4]=(A*t-o*_)*re,e[5]=(o*c-p*t)*re,e[6]=V*re,e[7]=(a*_-S*t)*re,e[8]=(d*t-a*c)*re,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,a,o,c,d,p){const _=Math.cos(c),S=Math.sin(c);return this.set(a*_,a*S,-a*(_*d+S*p)+d+e,-o*S,o*_,-o*(-S*d+_*p)+p+t,0,0,1),this}scale(e,t){return this.premultiply(yr.makeScale(e,t)),this}rotate(e){return this.premultiply(yr.makeRotation(-e)),this}translate(e,t){return this.premultiply(yr.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,-a,0,a,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,a=e.elements;for(let o=0;o<9;o++)if(t[o]!==a[o])return!1;return!0}fromArray(e,t=0){for(let a=0;a<9;a++)this.elements[a]=e[a+t];return this}toArray(e=[],t=0){const a=this.elements;return e[t]=a[0],e[t+1]=a[1],e[t+2]=a[2],e[t+3]=a[3],e[t+4]=a[4],e[t+5]=a[5],e[t+6]=a[6],e[t+7]=a[7],e[t+8]=a[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const yr=new Ge;function uo(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function sr(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Zl(){const r=sr("canvas");return r.style.display="block",r}const na={};function $l(r){r in na||(na[r]=!0,console.warn(r))}const ia=new Ge().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),ra=new Ge().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ti={[dn]:{transfer:er,primaries:tr,toReference:r=>r,fromReference:r=>r},[Bt]:{transfer:$e,primaries:tr,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[cr]:{transfer:er,primaries:nr,toReference:r=>r.applyMatrix3(ra),fromReference:r=>r.applyMatrix3(ia)},[cs]:{transfer:$e,primaries:nr,toReference:r=>r.convertSRGBToLinear().applyMatrix3(ra),fromReference:r=>r.applyMatrix3(ia).convertLinearToSRGB()}},Jl=new Set([dn,cr]),je={enabled:!0,_workingColorSpace:dn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!Jl.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const a=Ti[e].toReference,o=Ti[t].fromReference;return o(a(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return Ti[r].primaries},getTransfer:function(r){return r===an?er:Ti[r].transfer}};function ti$1(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Tr(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Nn;class ho{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Nn===void 0&&(Nn=sr("canvas")),Nn.width=e.width,Nn.height=e.height;const a=Nn.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),t=Nn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sr("canvas");t.width=e.width,t.height=e.height;const a=t.getContext("2d");a.drawImage(e,0,0,e.width,e.height);const o=a.getImageData(0,0,e.width,e.height),c=o.data;for(let d=0;d<c.length;d++)c[d]=ti$1(c[d]/255)*255;return a.putImageData(o,0,0),t}else if(e.data){const t=e.data.slice(0);for(let a=0;a<t.length;a++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[a]=Math.floor(ti$1(t[a]/255)*255):t[a]=ti$1(t[a]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ql=0;class fo{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ql++}),this.uuid=oi(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const a={uuid:this.uuid,url:""},o=this.data;if(o!==null){let c;if(Array.isArray(o)){c=[];for(let d=0,p=o.length;d<p;d++)o[d].isDataTexture?c.push(br(o[d].image)):c.push(br(o[d]))}else c=br(o);a.url=c}return t||(e.images[this.uuid]=a),a}}function br(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?ho.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ec=0;class yt extends Ln{constructor(e=yt.DEFAULT_IMAGE,t=yt.DEFAULT_MAPPING,a=Nt,o=Nt,c=St,d=An,p=Ft,_=un,S=yt.DEFAULT_ANISOTROPY,A=an){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ec++}),this.uuid=oi(),this.name="",this.source=new fo(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=a,this.wrapT=o,this.magFilter=c,this.minFilter=d,this.anisotropy=S,this.format=p,this.internalFormat=null,this.type=_,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ge,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=A,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const a={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),t||(e.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==to)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ns:e.x=e.x-Math.floor(e.x);break;case Nt:e.x=e.x<0?0:1;break;case is:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ns:e.y=e.y-Math.floor(e.y);break;case Nt:e.y=e.y<0?0:1;break;case is:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}yt.DEFAULT_IMAGE=null;yt.DEFAULT_MAPPING=to;yt.DEFAULT_ANISOTROPY=1;class ht{constructor(e=0,t=0,a=0,o=1){ht.prototype.isVector4=!0,this.x=e,this.y=t,this.z=a,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,a,o){return this.x=e,this.y=t,this.z=a,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,a=this.y,o=this.z,c=this.w,d=e.elements;return this.x=d[0]*t+d[4]*a+d[8]*o+d[12]*c,this.y=d[1]*t+d[5]*a+d[9]*o+d[13]*c,this.z=d[2]*t+d[6]*a+d[10]*o+d[14]*c,this.w=d[3]*t+d[7]*a+d[11]*o+d[15]*c,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,a,o,c;const d=e.elements,p=d[0],_=d[4],S=d[8],A=d[1],C=d[5],j=d[9],V=d[2],J=d[6],re=d[10];if(Math.abs(_-A)<.01&&Math.abs(S-V)<.01&&Math.abs(j-J)<.01){if(Math.abs(_+A)<.1&&Math.abs(S+V)<.1&&Math.abs(j+J)<.1&&Math.abs(p+C+re-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const K=(p+1)/2,Ne=(C+1)/2,G=(re+1)/2,se=(_+A)/4,He=(S+V)/4,Fe=(j+J)/4;return K>Ne&&K>G?K<.01?(a=0,o=.707106781,c=.707106781):(a=Math.sqrt(K),o=se/a,c=He/a):Ne>G?Ne<.01?(a=.707106781,o=0,c=.707106781):(o=Math.sqrt(Ne),a=se/o,c=Fe/o):G<.01?(a=.707106781,o=.707106781,c=0):(c=Math.sqrt(G),a=He/c,o=Fe/c),this.set(a,o,c,t),this}let ie=Math.sqrt((J-j)*(J-j)+(S-V)*(S-V)+(A-_)*(A-_));return Math.abs(ie)<.001&&(ie=1),this.x=(J-j)/ie,this.y=(S-V)/ie,this.z=(A-_)/ie,this.w=Math.acos((p+C+re-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(t,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this.z=e.z+(t.z-e.z)*a,this.w=e.w+(t.w-e.w)*a,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tc extends Ln{constructor(e=1,t=1,a={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ht(0,0,e,t),this.scissorTest=!1,this.viewport=new ht(0,0,e,t);const o={width:e,height:t,depth:1};a=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:St,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},a);const c=new yt(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.colorSpace);c.flipY=!1,c.generateMipmaps=a.generateMipmaps,c.internalFormat=a.internalFormat,this.textures=[];const d=a.count;for(let p=0;p<d;p++)this.textures[p]=c.clone(),this.textures[p].isRenderTargetTexture=!0;this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this.samples=a.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,a=1){if(this.width!==e||this.height!==t||this.depth!==a){this.width=e,this.height=t,this.depth=a;for(let o=0,c=this.textures.length;o<c;o++)this.textures[o].image.width=e,this.textures[o].image.height=t,this.textures[o].image.depth=a;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let a=0,o=e.textures.length;a<o;a++)this.textures[a]=e.textures[a].clone(),this.textures[a].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new fo(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Cn extends tc{constructor(e=1,t=1,a={}){super(e,t,a),this.isWebGLRenderTarget=!0}}class po extends yt{constructor(e=null,t=1,a=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:a,depth:o},this.magFilter=xt,this.minFilter=xt,this.wrapR=Nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nc extends yt{constructor(e=null,t=1,a=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:a,depth:o},this.magFilter=xt,this.minFilter=xt,this.wrapR=Nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pn{constructor(e=0,t=0,a=0,o=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=a,this._w=o}static slerpFlat(e,t,a,o,c,d,p){let _=a[o+0],S=a[o+1],A=a[o+2],C=a[o+3];const j=c[d+0],V=c[d+1],J=c[d+2],re=c[d+3];if(p===0){e[t+0]=_,e[t+1]=S,e[t+2]=A,e[t+3]=C;return}if(p===1){e[t+0]=j,e[t+1]=V,e[t+2]=J,e[t+3]=re;return}if(C!==re||_!==j||S!==V||A!==J){let ie=1-p;const K=_*j+S*V+A*J+C*re,Ne=K>=0?1:-1,G=1-K*K;if(G>Number.EPSILON){const He=Math.sqrt(G),Fe=Math.atan2(He,K*Ne);ie=Math.sin(ie*Fe)/He,p=Math.sin(p*Fe)/He}const se=p*Ne;if(_=_*ie+j*se,S=S*ie+V*se,A=A*ie+J*se,C=C*ie+re*se,ie===1-p){const He=1/Math.sqrt(_*_+S*S+A*A+C*C);_*=He,S*=He,A*=He,C*=He}}e[t]=_,e[t+1]=S,e[t+2]=A,e[t+3]=C}static multiplyQuaternionsFlat(e,t,a,o,c,d){const p=a[o],_=a[o+1],S=a[o+2],A=a[o+3],C=c[d],j=c[d+1],V=c[d+2],J=c[d+3];return e[t]=p*J+A*C+_*V-S*j,e[t+1]=_*J+A*j+S*C-p*V,e[t+2]=S*J+A*V+p*j-_*C,e[t+3]=A*J-p*C-_*j-S*V,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,a,o){return this._x=e,this._y=t,this._z=a,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const a=e._x,o=e._y,c=e._z,d=e._order,p=Math.cos,_=Math.sin,S=p(a/2),A=p(o/2),C=p(c/2),j=_(a/2),V=_(o/2),J=_(c/2);switch(d){case"XYZ":this._x=j*A*C+S*V*J,this._y=S*V*C-j*A*J,this._z=S*A*J+j*V*C,this._w=S*A*C-j*V*J;break;case"YXZ":this._x=j*A*C+S*V*J,this._y=S*V*C-j*A*J,this._z=S*A*J-j*V*C,this._w=S*A*C+j*V*J;break;case"ZXY":this._x=j*A*C-S*V*J,this._y=S*V*C+j*A*J,this._z=S*A*J+j*V*C,this._w=S*A*C-j*V*J;break;case"ZYX":this._x=j*A*C-S*V*J,this._y=S*V*C+j*A*J,this._z=S*A*J-j*V*C,this._w=S*A*C+j*V*J;break;case"YZX":this._x=j*A*C+S*V*J,this._y=S*V*C+j*A*J,this._z=S*A*J-j*V*C,this._w=S*A*C-j*V*J;break;case"XZY":this._x=j*A*C-S*V*J,this._y=S*V*C-j*A*J,this._z=S*A*J+j*V*C,this._w=S*A*C+j*V*J;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const a=t/2,o=Math.sin(a);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,a=t[0],o=t[4],c=t[8],d=t[1],p=t[5],_=t[9],S=t[2],A=t[6],C=t[10],j=a+p+C;if(j>0){const V=.5/Math.sqrt(j+1);this._w=.25/V,this._x=(A-_)*V,this._y=(c-S)*V,this._z=(d-o)*V}else if(a>p&&a>C){const V=2*Math.sqrt(1+a-p-C);this._w=(A-_)/V,this._x=.25*V,this._y=(o+d)/V,this._z=(c+S)/V}else if(p>C){const V=2*Math.sqrt(1+p-a-C);this._w=(c-S)/V,this._x=(o+d)/V,this._y=.25*V,this._z=(_+A)/V}else{const V=2*Math.sqrt(1+C-a-p);this._w=(d-o)/V,this._x=(c+S)/V,this._y=(_+A)/V,this._z=.25*V}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let a=e.dot(t)+1;return a<Number.EPSILON?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=a):(this._x=0,this._y=-e.z,this._z=e.y,this._w=a)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=a),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_t(this.dot(e),-1,1)))}rotateTowards(e,t){const a=this.angleTo(e);if(a===0)return this;const o=Math.min(1,t/a);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const a=e._x,o=e._y,c=e._z,d=e._w,p=t._x,_=t._y,S=t._z,A=t._w;return this._x=a*A+d*p+o*S-c*_,this._y=o*A+d*_+c*p-a*S,this._z=c*A+d*S+a*_-o*p,this._w=d*A-a*p-o*_-c*S,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const a=this._x,o=this._y,c=this._z,d=this._w;let p=d*e._w+a*e._x+o*e._y+c*e._z;if(p<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,p=-p):this.copy(e),p>=1)return this._w=d,this._x=a,this._y=o,this._z=c,this;const _=1-p*p;if(_<=Number.EPSILON){const V=1-t;return this._w=V*d+t*this._w,this._x=V*a+t*this._x,this._y=V*o+t*this._y,this._z=V*c+t*this._z,this.normalize(),this}const S=Math.sqrt(_),A=Math.atan2(S,p),C=Math.sin((1-t)*A)/S,j=Math.sin(t*A)/S;return this._w=d*C+this._w*j,this._x=a*C+this._x*j,this._y=o*C+this._y*j,this._z=c*C+this._z*j,this._onChangeCallback(),this}slerpQuaternions(e,t,a){return this.copy(e).slerp(t,a)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),a=Math.random(),o=Math.sqrt(1-a),c=Math.sqrt(a);return this.set(o*Math.sin(e),o*Math.cos(e),c*Math.sin(t),c*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class U{constructor(e=0,t=0,a=0){U.prototype.isVector3=!0,this.x=e,this.y=t,this.z=a}set(e,t,a){return a===void 0&&(a=this.z),this.x=e,this.y=t,this.z=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sa.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sa.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,a=this.y,o=this.z,c=e.elements;return this.x=c[0]*t+c[3]*a+c[6]*o,this.y=c[1]*t+c[4]*a+c[7]*o,this.z=c[2]*t+c[5]*a+c[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,a=this.y,o=this.z,c=e.elements,d=1/(c[3]*t+c[7]*a+c[11]*o+c[15]);return this.x=(c[0]*t+c[4]*a+c[8]*o+c[12])*d,this.y=(c[1]*t+c[5]*a+c[9]*o+c[13])*d,this.z=(c[2]*t+c[6]*a+c[10]*o+c[14])*d,this}applyQuaternion(e){const t=this.x,a=this.y,o=this.z,c=e.x,d=e.y,p=e.z,_=e.w,S=2*(d*o-p*a),A=2*(p*t-c*o),C=2*(c*a-d*t);return this.x=t+_*S+d*C-p*A,this.y=a+_*A+p*S-c*C,this.z=o+_*C+c*A-d*S,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,a=this.y,o=this.z,c=e.elements;return this.x=c[0]*t+c[4]*a+c[8]*o,this.y=c[1]*t+c[5]*a+c[9]*o,this.z=c[2]*t+c[6]*a+c[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(t,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this.z=e.z+(t.z-e.z)*a,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const a=e.x,o=e.y,c=e.z,d=t.x,p=t.y,_=t.z;return this.x=o*_-c*p,this.y=c*d-a*_,this.z=a*p-o*d,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const a=e.dot(this)/t;return this.copy(e).multiplyScalar(a)}projectOnPlane(e){return Ar.copy(this).projectOnVector(e),this.sub(Ar)}reflect(e){return this.sub(Ar.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const a=this.dot(e)/t;return Math.acos(_t(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,a=this.y-e.y,o=this.z-e.z;return t*t+a*a+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,a){const o=Math.sin(t)*e;return this.x=o*Math.sin(a),this.y=Math.cos(t)*e,this.z=o*Math.cos(a),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,a){return this.x=e*Math.sin(t),this.y=a,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=a,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,a=Math.sqrt(1-t*t);return this.x=a*Math.cos(e),this.y=t,this.z=a*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ar=new U,sa=new Pn;class vi{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,a=e.length;t<a;t+=3)this.expandByPoint(Dt.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,a=e.count;t<a;t++)this.expandByPoint(Dt.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,a=e.length;t<a;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const a=Dt.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const a=e.geometry;if(a!==void 0){const c=a.getAttribute("position");if(t===!0&&c!==void 0&&e.isInstancedMesh!==!0)for(let d=0,p=c.count;d<p;d++)e.isMesh===!0?e.getVertexPosition(d,Dt):Dt.fromBufferAttribute(c,d),Dt.applyMatrix4(e.matrixWorld),this.expandByPoint(Dt);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bi.copy(e.boundingBox)):(a.boundingBox===null&&a.computeBoundingBox(),bi.copy(a.boundingBox)),bi.applyMatrix4(e.matrixWorld),this.union(bi)}const o=e.children;for(let c=0,d=o.length;c<d;c++)this.expandByObject(o[c],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Dt),Dt.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,a;return e.normal.x>0?(t=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,a=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),t<=-e.constant&&a>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(hi$1),Ai.subVectors(this.max,hi$1),Fn.subVectors(e.a,hi$1),On.subVectors(e.b,hi$1),Bn.subVectors(e.c,hi$1),Jt.subVectors(On,Fn),Qt.subVectors(Bn,On),gn.subVectors(Fn,Bn);let t=[0,-Jt.z,Jt.y,0,-Qt.z,Qt.y,0,-gn.z,gn.y,Jt.z,0,-Jt.x,Qt.z,0,-Qt.x,gn.z,0,-gn.x,-Jt.y,Jt.x,0,-Qt.y,Qt.x,0,-gn.y,gn.x,0];return!wr(t,Fn,On,Bn,Ai)||(t=[1,0,0,0,1,0,0,0,1],!wr(t,Fn,On,Bn,Ai))?!1:(wi.crossVectors(Jt,Qt),t=[wi.x,wi.y,wi.z],wr(t,Fn,On,Bn,Ai))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dt).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Dt).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(kt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),kt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),kt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),kt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),kt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),kt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),kt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),kt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(kt),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const kt=[new U,new U,new U,new U,new U,new U,new U,new U],Dt=new U,bi=new vi,Fn=new U,On=new U,Bn=new U,Jt=new U,Qt=new U,gn=new U,hi$1=new U,Ai=new U,wi=new U,vn=new U;function wr(r,e,t,a,o){for(let c=0,d=r.length-3;c<=d;c+=3){vn.fromArray(r,c);const p=o.x*Math.abs(vn.x)+o.y*Math.abs(vn.y)+o.z*Math.abs(vn.z),_=e.dot(vn),S=t.dot(vn),A=a.dot(vn);if(Math.max(-Math.max(_,S,A),Math.min(_,S,A))>p)return!1}return!0}const ic=new vi,fi=new U,Rr=new U;class ur{constructor(e=new U,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const a=this.center;t!==void 0?a.copy(t):ic.setFromPoints(e).getCenter(a);let o=0;for(let c=0,d=e.length;c<d;c++)o=Math.max(o,a.distanceToSquared(e[c]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const a=this.center.distanceToSquared(e);return t.copy(e),a>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;fi.subVectors(e,this.center);const t=fi.lengthSq();if(t>this.radius*this.radius){const a=Math.sqrt(t),o=(a-this.radius)*.5;this.center.addScaledVector(fi,o/a),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Rr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(fi.copy(e.center).add(Rr)),this.expandByPoint(fi.copy(e.center).sub(Rr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Wt=new U,Cr=new U,Ri=new U,en=new U,Pr=new U,Ci=new U,Lr=new U;class hs{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wt)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const a=t.dot(this.direction);return a<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,a)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Wt.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Wt.copy(this.origin).addScaledVector(this.direction,t),Wt.distanceToSquared(e))}distanceSqToSegment(e,t,a,o){Cr.copy(e).add(t).multiplyScalar(.5),Ri.copy(t).sub(e).normalize(),en.copy(this.origin).sub(Cr);const c=e.distanceTo(t)*.5,d=-this.direction.dot(Ri),p=en.dot(this.direction),_=-en.dot(Ri),S=en.lengthSq(),A=Math.abs(1-d*d);let C,j,V,J;if(A>0)if(C=d*_-p,j=d*p-_,J=c*A,C>=0)if(j>=-J)if(j<=J){const re=1/A;C*=re,j*=re,V=C*(C+d*j+2*p)+j*(d*C+j+2*_)+S}else j=c,C=Math.max(0,-(d*j+p)),V=-C*C+j*(j+2*_)+S;else j=-c,C=Math.max(0,-(d*j+p)),V=-C*C+j*(j+2*_)+S;else j<=-J?(C=Math.max(0,-(-d*c+p)),j=C>0?-c:Math.min(Math.max(-c,-_),c),V=-C*C+j*(j+2*_)+S):j<=J?(C=0,j=Math.min(Math.max(-c,-_),c),V=j*(j+2*_)+S):(C=Math.max(0,-(d*c+p)),j=C>0?c:Math.min(Math.max(-c,-_),c),V=-C*C+j*(j+2*_)+S);else j=d>0?-c:c,C=Math.max(0,-(d*j+p)),V=-C*C+j*(j+2*_)+S;return a&&a.copy(this.origin).addScaledVector(this.direction,C),o&&o.copy(Cr).addScaledVector(Ri,j),V}intersectSphere(e,t){Wt.subVectors(e.center,this.origin);const a=Wt.dot(this.direction),o=Wt.dot(Wt)-a*a,c=e.radius*e.radius;if(o>c)return null;const d=Math.sqrt(c-o),p=a-d,_=a+d;return _<0?null:p<0?this.at(_,t):this.at(p,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const a=-(this.origin.dot(e.normal)+e.constant)/t;return a>=0?a:null}intersectPlane(e,t){const a=this.distanceToPlane(e);return a===null?null:this.at(a,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let a,o,c,d,p,_;const S=1/this.direction.x,A=1/this.direction.y,C=1/this.direction.z,j=this.origin;return S>=0?(a=(e.min.x-j.x)*S,o=(e.max.x-j.x)*S):(a=(e.max.x-j.x)*S,o=(e.min.x-j.x)*S),A>=0?(c=(e.min.y-j.y)*A,d=(e.max.y-j.y)*A):(c=(e.max.y-j.y)*A,d=(e.min.y-j.y)*A),a>d||c>o||((c>a||isNaN(a))&&(a=c),(d<o||isNaN(o))&&(o=d),C>=0?(p=(e.min.z-j.z)*C,_=(e.max.z-j.z)*C):(p=(e.max.z-j.z)*C,_=(e.min.z-j.z)*C),a>_||p>o)||((p>a||a!==a)&&(a=p),(_<o||o!==o)&&(o=_),o<0)?null:this.at(a>=0?a:o,t)}intersectsBox(e){return this.intersectBox(e,Wt)!==null}intersectTriangle(e,t,a,o,c){Pr.subVectors(t,e),Ci.subVectors(a,e),Lr.crossVectors(Pr,Ci);let d=this.direction.dot(Lr),p;if(d>0){if(o)return null;p=1}else if(d<0)p=-1,d=-d;else return null;en.subVectors(this.origin,e);const _=p*this.direction.dot(Ci.crossVectors(en,Ci));if(_<0)return null;const S=p*this.direction.dot(Pr.cross(en));if(S<0||_+S>d)return null;const A=-p*en.dot(Lr);return A<0?null:this.at(A/d,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class st{constructor(e,t,a,o,c,d,p,_,S,A,C,j,V,J,re,ie){st.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,a,o,c,d,p,_,S,A,C,j,V,J,re,ie)}set(e,t,a,o,c,d,p,_,S,A,C,j,V,J,re,ie){const K=this.elements;return K[0]=e,K[4]=t,K[8]=a,K[12]=o,K[1]=c,K[5]=d,K[9]=p,K[13]=_,K[2]=S,K[6]=A,K[10]=C,K[14]=j,K[3]=V,K[7]=J,K[11]=re,K[15]=ie,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new st().fromArray(this.elements)}copy(e){const t=this.elements,a=e.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],this}copyPosition(e){const t=this.elements,a=e.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,a){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}makeBasis(e,t,a){return this.set(e.x,t.x,a.x,0,e.y,t.y,a.y,0,e.z,t.z,a.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,a=e.elements,o=1/zn.setFromMatrixColumn(e,0).length(),c=1/zn.setFromMatrixColumn(e,1).length(),d=1/zn.setFromMatrixColumn(e,2).length();return t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o,t[3]=0,t[4]=a[4]*c,t[5]=a[5]*c,t[6]=a[6]*c,t[7]=0,t[8]=a[8]*d,t[9]=a[9]*d,t[10]=a[10]*d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,a=e.x,o=e.y,c=e.z,d=Math.cos(a),p=Math.sin(a),_=Math.cos(o),S=Math.sin(o),A=Math.cos(c),C=Math.sin(c);if(e.order==="XYZ"){const j=d*A,V=d*C,J=p*A,re=p*C;t[0]=_*A,t[4]=-_*C,t[8]=S,t[1]=V+J*S,t[5]=j-re*S,t[9]=-p*_,t[2]=re-j*S,t[6]=J+V*S,t[10]=d*_}else if(e.order==="YXZ"){const j=_*A,V=_*C,J=S*A,re=S*C;t[0]=j+re*p,t[4]=J*p-V,t[8]=d*S,t[1]=d*C,t[5]=d*A,t[9]=-p,t[2]=V*p-J,t[6]=re+j*p,t[10]=d*_}else if(e.order==="ZXY"){const j=_*A,V=_*C,J=S*A,re=S*C;t[0]=j-re*p,t[4]=-d*C,t[8]=J+V*p,t[1]=V+J*p,t[5]=d*A,t[9]=re-j*p,t[2]=-d*S,t[6]=p,t[10]=d*_}else if(e.order==="ZYX"){const j=d*A,V=d*C,J=p*A,re=p*C;t[0]=_*A,t[4]=J*S-V,t[8]=j*S+re,t[1]=_*C,t[5]=re*S+j,t[9]=V*S-J,t[2]=-S,t[6]=p*_,t[10]=d*_}else if(e.order==="YZX"){const j=d*_,V=d*S,J=p*_,re=p*S;t[0]=_*A,t[4]=re-j*C,t[8]=J*C+V,t[1]=C,t[5]=d*A,t[9]=-p*A,t[2]=-S*A,t[6]=V*C+J,t[10]=j-re*C}else if(e.order==="XZY"){const j=d*_,V=d*S,J=p*_,re=p*S;t[0]=_*A,t[4]=-C,t[8]=S*A,t[1]=j*C+re,t[5]=d*A,t[9]=V*C-J,t[2]=J*C-V,t[6]=p*A,t[10]=re*C+j}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rc,e,sc)}lookAt(e,t,a){const o=this.elements;return At.subVectors(e,t),At.lengthSq()===0&&(At.z=1),At.normalize(),tn.crossVectors(a,At),tn.lengthSq()===0&&(Math.abs(a.z)===1?At.x+=1e-4:At.z+=1e-4,At.normalize(),tn.crossVectors(a,At)),tn.normalize(),Pi.crossVectors(At,tn),o[0]=tn.x,o[4]=Pi.x,o[8]=At.x,o[1]=tn.y,o[5]=Pi.y,o[9]=At.y,o[2]=tn.z,o[6]=Pi.z,o[10]=At.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const a=e.elements,o=t.elements,c=this.elements,d=a[0],p=a[4],_=a[8],S=a[12],A=a[1],C=a[5],j=a[9],V=a[13],J=a[2],re=a[6],ie=a[10],K=a[14],Ne=a[3],G=a[7],se=a[11],He=a[15],Fe=o[0],Xe=o[4],be=o[8],ta=o[12],pn=o[1],mr=o[5],bp=o[9],Sp=o[13],_r=o[2],xs=o[6],ne=o[10],zl=o[14],Hl=o[3],pr=o[7],Hp=o[11],Gl=o[15];return c[0]=d*Fe+p*pn+_*_r+S*Hl,c[4]=d*Xe+p*mr+_*xs+S*pr,c[8]=d*be+p*bp+_*ne+S*Hp,c[12]=d*ta+p*Sp+_*zl+S*Gl,c[1]=A*Fe+C*pn+j*_r+V*Hl,c[5]=A*Xe+C*mr+j*xs+V*pr,c[9]=A*be+C*bp+j*ne+V*Hp,c[13]=A*ta+C*Sp+j*zl+V*Gl,c[2]=J*Fe+re*pn+ie*_r+K*Hl,c[6]=J*Xe+re*mr+ie*xs+K*pr,c[10]=J*be+re*bp+ie*ne+K*Hp,c[14]=J*ta+re*Sp+ie*zl+K*Gl,c[3]=Ne*Fe+G*pn+se*_r+He*Hl,c[7]=Ne*Xe+G*mr+se*xs+He*pr,c[11]=Ne*be+G*bp+se*ne+He*Hp,c[15]=Ne*ta+G*Sp+se*zl+He*Gl,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],a=e[4],o=e[8],c=e[12],d=e[1],p=e[5],_=e[9],S=e[13],A=e[2],C=e[6],j=e[10],V=e[14],J=e[3],re=e[7],ie=e[11],K=e[15];return J*(+c*_*C-o*S*C-c*p*j+a*S*j+o*p*V-a*_*V)+re*(+t*_*V-t*S*j+c*d*j-o*d*V+o*S*A-c*_*A)+ie*(+t*S*C-t*p*V-c*d*C+a*d*V+c*p*A-a*S*A)+K*(-o*p*A-t*_*C+t*p*j+o*d*C-a*d*j+a*_*A)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,a){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=a),this}invert(){const e=this.elements,t=e[0],a=e[1],o=e[2],c=e[3],d=e[4],p=e[5],_=e[6],S=e[7],A=e[8],C=e[9],j=e[10],V=e[11],J=e[12],re=e[13],ie=e[14],K=e[15],Ne=C*ie*S-re*j*S+re*_*V-p*ie*V-C*_*K+p*j*K,G=J*j*S-A*ie*S-J*_*V+d*ie*V+A*_*K-d*j*K,se=A*re*S-J*C*S+J*p*V-d*re*V-A*p*K+d*C*K,He=J*C*_-A*re*_-J*p*j+d*re*j+A*p*ie-d*C*ie,Fe=t*Ne+a*G+o*se+c*He;if(Fe===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Xe=1/Fe;return e[0]=Ne*Xe,e[1]=(re*j*c-C*ie*c-re*o*V+a*ie*V+C*o*K-a*j*K)*Xe,e[2]=(p*ie*c-re*_*c+re*o*S-a*ie*S-p*o*K+a*_*K)*Xe,e[3]=(C*_*c-p*j*c-C*o*S+a*j*S+p*o*V-a*_*V)*Xe,e[4]=G*Xe,e[5]=(A*ie*c-J*j*c+J*o*V-t*ie*V-A*o*K+t*j*K)*Xe,e[6]=(J*_*c-d*ie*c-J*o*S+t*ie*S+d*o*K-t*_*K)*Xe,e[7]=(d*j*c-A*_*c+A*o*S-t*j*S-d*o*V+t*_*V)*Xe,e[8]=se*Xe,e[9]=(J*C*c-A*re*c-J*a*V+t*re*V+A*a*K-t*C*K)*Xe,e[10]=(d*re*c-J*p*c+J*a*S-t*re*S-d*a*K+t*p*K)*Xe,e[11]=(A*p*c-d*C*c-A*a*S+t*C*S+d*a*V-t*p*V)*Xe,e[12]=He*Xe,e[13]=(A*re*o-J*C*o+J*a*j-t*re*j-A*a*ie+t*C*ie)*Xe,e[14]=(J*p*o-d*re*o-J*a*_+t*re*_+d*a*ie-t*p*ie)*Xe,e[15]=(d*C*o-A*p*o+A*a*_-t*C*_-d*a*j+t*p*j)*Xe,this}scale(e){const t=this.elements,a=e.x,o=e.y,c=e.z;return t[0]*=a,t[4]*=o,t[8]*=c,t[1]*=a,t[5]*=o,t[9]*=c,t[2]*=a,t[6]*=o,t[10]*=c,t[3]*=a,t[7]*=o,t[11]*=c,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,a,o))}makeTranslation(e,t,a){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,a,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),a=Math.sin(e);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const a=Math.cos(t),o=Math.sin(t),c=1-a,d=e.x,p=e.y,_=e.z,S=c*d,A=c*p;return this.set(S*d+a,S*p-o*_,S*_+o*p,0,S*p+o*_,A*p+a,A*_-o*d,0,S*_-o*p,A*_+o*d,c*_*_+a,0,0,0,0,1),this}makeScale(e,t,a){return this.set(e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this}makeShear(e,t,a,o,c,d){return this.set(1,a,c,0,e,1,d,0,t,o,1,0,0,0,0,1),this}compose(e,t,a){const o=this.elements,c=t._x,d=t._y,p=t._z,_=t._w,S=c+c,A=d+d,C=p+p,j=c*S,V=c*A,J=c*C,re=d*A,ie=d*C,K=p*C,Ne=_*S,G=_*A,se=_*C,He=a.x,Fe=a.y,Xe=a.z;return o[0]=(1-(re+K))*He,o[1]=(V+se)*He,o[2]=(J-G)*He,o[3]=0,o[4]=(V-se)*Fe,o[5]=(1-(j+K))*Fe,o[6]=(ie+Ne)*Fe,o[7]=0,o[8]=(J+G)*Xe,o[9]=(ie-Ne)*Xe,o[10]=(1-(j+re))*Xe,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,a){const o=this.elements;let c=zn.set(o[0],o[1],o[2]).length();const d=zn.set(o[4],o[5],o[6]).length(),p=zn.set(o[8],o[9],o[10]).length();this.determinant()<0&&(c=-c),e.x=o[12],e.y=o[13],e.z=o[14],Ut.copy(this);const _=1/c,S=1/d,A=1/p;return Ut.elements[0]*=_,Ut.elements[1]*=_,Ut.elements[2]*=_,Ut.elements[4]*=S,Ut.elements[5]*=S,Ut.elements[6]*=S,Ut.elements[8]*=A,Ut.elements[9]*=A,Ut.elements[10]*=A,t.setFromRotationMatrix(Ut),a.x=c,a.y=d,a.z=p,this}makePerspective(e,t,a,o,c,d,p=Zt){const _=this.elements,S=2*c/(t-e),A=2*c/(a-o),C=(t+e)/(t-e),j=(a+o)/(a-o);let V,J;if(p===Zt)V=-(d+c)/(d-c),J=-2*d*c/(d-c);else if(p===ir)V=-d/(d-c),J=-d*c/(d-c);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+p);return _[0]=S,_[4]=0,_[8]=C,_[12]=0,_[1]=0,_[5]=A,_[9]=j,_[13]=0,_[2]=0,_[6]=0,_[10]=V,_[14]=J,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,t,a,o,c,d,p=Zt){const _=this.elements,S=1/(t-e),A=1/(a-o),C=1/(d-c),j=(t+e)*S,V=(a+o)*A;let J,re;if(p===Zt)J=(d+c)*C,re=-2*C;else if(p===ir)J=c*C,re=-1*C;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+p);return _[0]=2*S,_[4]=0,_[8]=0,_[12]=-j,_[1]=0,_[5]=2*A,_[9]=0,_[13]=-V,_[2]=0,_[6]=0,_[10]=re,_[14]=-J,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const t=this.elements,a=e.elements;for(let o=0;o<16;o++)if(t[o]!==a[o])return!1;return!0}fromArray(e,t=0){for(let a=0;a<16;a++)this.elements[a]=e[a+t];return this}toArray(e=[],t=0){const a=this.elements;return e[t]=a[0],e[t+1]=a[1],e[t+2]=a[2],e[t+3]=a[3],e[t+4]=a[4],e[t+5]=a[5],e[t+6]=a[6],e[t+7]=a[7],e[t+8]=a[8],e[t+9]=a[9],e[t+10]=a[10],e[t+11]=a[11],e[t+12]=a[12],e[t+13]=a[13],e[t+14]=a[14],e[t+15]=a[15],e}}const zn=new U,Ut=new st,rc=new U(0,0,0),sc=new U(1,1,1),tn=new U,Pi=new U,At=new U,aa=new st,oa=new Pn;class $t{constructor(e=0,t=0,a=0,o=$t.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=a,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,a,o=this._order){return this._x=e,this._y=t,this._z=a,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,a=!0){const o=e.elements,c=o[0],d=o[4],p=o[8],_=o[1],S=o[5],A=o[9],C=o[2],j=o[6],V=o[10];switch(t){case"XYZ":this._y=Math.asin(_t(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-A,V),this._z=Math.atan2(-d,c)):(this._x=Math.atan2(j,S),this._z=0);break;case"YXZ":this._x=Math.asin(-_t(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(p,V),this._z=Math.atan2(_,S)):(this._y=Math.atan2(-C,c),this._z=0);break;case"ZXY":this._x=Math.asin(_t(j,-1,1)),Math.abs(j)<.9999999?(this._y=Math.atan2(-C,V),this._z=Math.atan2(-d,S)):(this._y=0,this._z=Math.atan2(_,c));break;case"ZYX":this._y=Math.asin(-_t(C,-1,1)),Math.abs(C)<.9999999?(this._x=Math.atan2(j,V),this._z=Math.atan2(_,c)):(this._x=0,this._z=Math.atan2(-d,S));break;case"YZX":this._z=Math.asin(_t(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-A,S),this._y=Math.atan2(-C,c)):(this._x=0,this._y=Math.atan2(p,V));break;case"XZY":this._z=Math.asin(-_t(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(j,S),this._y=Math.atan2(p,c)):(this._x=Math.atan2(-A,V),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,a===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,a){return aa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aa,t,a)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return oa.setFromEuler(this),this.setFromQuaternion(oa,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$t.DEFAULT_ORDER="XYZ";class mo{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ac=0;const la=new U,Gn=new Pn,Xt=new st,Li=new U,di=new U,oc=new U,lc=new Pn,ca=new U(1,0,0),ua=new U(0,1,0),ha=new U(0,0,1),cc={type:"added"},uc={type:"removed"},Dr={type:"childadded",child:null},Ur={type:"childremoved",child:null};class Mt extends Ln{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ac++}),this.uuid=oi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mt.DEFAULT_UP.clone();const e=new U,t=new $t,a=new Pn,o=new U(1,1,1);function c(){a.setFromEuler(t,!1)}function d(){t.setFromQuaternion(a,void 0,!1)}t._onChange(c),a._onChange(d),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new st},normalMatrix:{value:new Ge}}),this.matrix=new st,this.matrixWorld=new st,this.matrixAutoUpdate=Mt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Mt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new mo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Gn.setFromAxisAngle(e,t),this.quaternion.multiply(Gn),this}rotateOnWorldAxis(e,t){return Gn.setFromAxisAngle(e,t),this.quaternion.premultiply(Gn),this}rotateX(e){return this.rotateOnAxis(ca,e)}rotateY(e){return this.rotateOnAxis(ua,e)}rotateZ(e){return this.rotateOnAxis(ha,e)}translateOnAxis(e,t){return la.copy(e).applyQuaternion(this.quaternion),this.position.add(la.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ca,e)}translateY(e){return this.translateOnAxis(ua,e)}translateZ(e){return this.translateOnAxis(ha,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xt.copy(this.matrixWorld).invert())}lookAt(e,t,a){e.isVector3?Li.copy(e):Li.set(e,t,a);const o=this.parent;this.updateWorldMatrix(!0,!1),di.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xt.lookAt(di,Li,this.up):Xt.lookAt(Li,di,this.up),this.quaternion.setFromRotationMatrix(Xt),o&&(Xt.extractRotation(o.matrixWorld),Gn.setFromRotationMatrix(Xt),this.quaternion.premultiply(Gn.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(cc),Dr.child=e,this.dispatchEvent(Dr),Dr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(uc),Ur.child=e,this.dispatchEvent(Ur),Ur.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xt.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xt.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xt),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let a=0,o=this.children.length;a<o;a++){const c=this.children[a].getObjectByProperty(e,t);if(c!==void 0)return c}}getObjectsByProperty(e,t,a=[]){this[e]===t&&a.push(this);const o=this.children;for(let c=0,d=o.length;c<d;c++)o[c].getObjectsByProperty(e,t,a);return a}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(di,e,oc),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(di,lc,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let a=0,o=t.length;a<o;a++)t[a].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let a=0,o=t.length;a<o;a++)t[a].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let a=0,o=t.length;a<o;a++){const c=t[a];(c.matrixWorldAutoUpdate===!0||e===!0)&&c.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const a=this.parent;if(e===!0&&a!==null&&a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const o=this.children;for(let c=0,d=o.length;c<d;c++){const p=o[c];p.matrixWorldAutoUpdate===!0&&p.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",a={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(p=>({boxInitialized:p.boxInitialized,boxMin:p.box.min.toArray(),boxMax:p.box.max.toArray(),sphereInitialized:p.sphereInitialized,sphereRadius:p.sphere.radius,sphereCenter:p.sphere.center.toArray()})),o.maxGeometryCount=this._maxGeometryCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function c(p,_){return p[_.uuid]===void 0&&(p[_.uuid]=_.toJSON(e)),_.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=c(e.geometries,this.geometry);const p=this.geometry.parameters;if(p!==void 0&&p.shapes!==void 0){const _=p.shapes;if(Array.isArray(_))for(let S=0,A=_.length;S<A;S++){const C=_[S];c(e.shapes,C)}else c(e.shapes,_)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(c(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const p=[];for(let _=0,S=this.material.length;_<S;_++)p.push(c(e.materials,this.material[_]));o.material=p}else o.material=c(e.materials,this.material);if(this.children.length>0){o.children=[];for(let p=0;p<this.children.length;p++)o.children.push(this.children[p].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let p=0;p<this.animations.length;p++){const _=this.animations[p];o.animations.push(c(e.animations,_))}}if(t){const p=d(e.geometries),_=d(e.materials),S=d(e.textures),A=d(e.images),C=d(e.shapes),j=d(e.skeletons),V=d(e.animations),J=d(e.nodes);p.length>0&&(a.geometries=p),_.length>0&&(a.materials=_),S.length>0&&(a.textures=S),A.length>0&&(a.images=A),C.length>0&&(a.shapes=C),j.length>0&&(a.skeletons=j),V.length>0&&(a.animations=V),J.length>0&&(a.nodes=J)}return a.object=o,a;function d(p){const _=[];for(const S in p){const A=p[S];delete A.metadata,_.push(A)}return _}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let a=0;a<e.children.length;a++){const o=e.children[a];this.add(o.clone())}return this}}Mt.DEFAULT_UP=new U(0,1,0);Mt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const It=new U,Yt=new U,Ir=new U,qt=new U,Hn=new U,Vn=new U,fa=new U,Nr=new U,Fr=new U,Or=new U;class Ot{constructor(e=new U,t=new U,a=new U){this.a=e,this.b=t,this.c=a}static getNormal(e,t,a,o){o.subVectors(a,t),It.subVectors(e,t),o.cross(It);const c=o.lengthSq();return c>0?o.multiplyScalar(1/Math.sqrt(c)):o.set(0,0,0)}static getBarycoord(e,t,a,o,c){It.subVectors(o,t),Yt.subVectors(a,t),Ir.subVectors(e,t);const d=It.dot(It),p=It.dot(Yt),_=It.dot(Ir),S=Yt.dot(Yt),A=Yt.dot(Ir),C=d*S-p*p;if(C===0)return c.set(0,0,0),null;const j=1/C,V=(S*_-p*A)*j,J=(d*A-p*_)*j;return c.set(1-V-J,J,V)}static containsPoint(e,t,a,o){return this.getBarycoord(e,t,a,o,qt)===null?!1:qt.x>=0&&qt.y>=0&&qt.x+qt.y<=1}static getInterpolation(e,t,a,o,c,d,p,_){return this.getBarycoord(e,t,a,o,qt)===null?(_.x=0,_.y=0,"z"in _&&(_.z=0),"w"in _&&(_.w=0),null):(_.setScalar(0),_.addScaledVector(c,qt.x),_.addScaledVector(d,qt.y),_.addScaledVector(p,qt.z),_)}static isFrontFacing(e,t,a,o){return It.subVectors(a,t),Yt.subVectors(e,t),It.cross(Yt).dot(o)<0}set(e,t,a){return this.a.copy(e),this.b.copy(t),this.c.copy(a),this}setFromPointsAndIndices(e,t,a,o){return this.a.copy(e[t]),this.b.copy(e[a]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,a,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,a),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return It.subVectors(this.c,this.b),Yt.subVectors(this.a,this.b),It.cross(Yt).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ot.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ot.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,a,o,c){return Ot.getInterpolation(e,this.a,this.b,this.c,t,a,o,c)}containsPoint(e){return Ot.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ot.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const a=this.a,o=this.b,c=this.c;let d,p;Hn.subVectors(o,a),Vn.subVectors(c,a),Nr.subVectors(e,a);const _=Hn.dot(Nr),S=Vn.dot(Nr);if(_<=0&&S<=0)return t.copy(a);Fr.subVectors(e,o);const A=Hn.dot(Fr),C=Vn.dot(Fr);if(A>=0&&C<=A)return t.copy(o);const j=_*C-A*S;if(j<=0&&_>=0&&A<=0)return d=_/(_-A),t.copy(a).addScaledVector(Hn,d);Or.subVectors(e,c);const V=Hn.dot(Or),J=Vn.dot(Or);if(J>=0&&V<=J)return t.copy(c);const re=V*S-_*J;if(re<=0&&S>=0&&J<=0)return p=S/(S-J),t.copy(a).addScaledVector(Vn,p);const ie=A*J-V*C;if(ie<=0&&C-A>=0&&V-J>=0)return fa.subVectors(c,o),p=(C-A)/(C-A+(V-J)),t.copy(o).addScaledVector(fa,p);const K=1/(ie+re+j);return d=re*K,p=j*K,t.copy(a).addScaledVector(Hn,d).addScaledVector(Vn,p)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nn={h:0,s:0,l:0},Di={h:0,s:0,l:0};function Br(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class qe{constructor(e,t,a){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,a)}set(e,t,a){if(t===void 0&&a===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,t,a);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Bt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,je.toWorkingColorSpace(this,t),this}setRGB(e,t,a,o=je.workingColorSpace){return this.r=e,this.g=t,this.b=a,je.toWorkingColorSpace(this,o),this}setHSL(e,t,a,o=je.workingColorSpace){if(e=us(e,1),t=_t(t,0,1),a=_t(a,0,1),t===0)this.r=this.g=this.b=a;else{const c=a<=.5?a*(1+t):a+t-a*t,d=2*a-c;this.r=Br(d,c,e+1/3),this.g=Br(d,c,e),this.b=Br(d,c,e-1/3)}return je.toWorkingColorSpace(this,o),this}setStyle(e,t=Bt){function a(c){c!==void 0&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let c;const d=o[1],p=o[2];switch(d){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return a(c[4]),this.setRGB(Math.min(255,parseInt(c[1],10))/255,Math.min(255,parseInt(c[2],10))/255,Math.min(255,parseInt(c[3],10))/255,t);if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return a(c[4]),this.setRGB(Math.min(100,parseInt(c[1],10))/100,Math.min(100,parseInt(c[2],10))/100,Math.min(100,parseInt(c[3],10))/100,t);break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return a(c[4]),this.setHSL(parseFloat(c[1])/360,parseFloat(c[2])/100,parseFloat(c[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const c=o[1],d=c.length;if(d===3)return this.setRGB(parseInt(c.charAt(0),16)/15,parseInt(c.charAt(1),16)/15,parseInt(c.charAt(2),16)/15,t);if(d===6)return this.setHex(parseInt(c,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Bt){const a=_o[e.toLowerCase()];return a!==void 0?this.setHex(a,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ti$1(e.r),this.g=ti$1(e.g),this.b=ti$1(e.b),this}copyLinearToSRGB(e){return this.r=Tr(e.r),this.g=Tr(e.g),this.b=Tr(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Bt){return je.fromWorkingColorSpace(mt.copy(this),e),Math.round(_t(mt.r*255,0,255))*65536+Math.round(_t(mt.g*255,0,255))*256+Math.round(_t(mt.b*255,0,255))}getHexString(e=Bt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=je.workingColorSpace){je.fromWorkingColorSpace(mt.copy(this),t);const a=mt.r,o=mt.g,c=mt.b,d=Math.max(a,o,c),p=Math.min(a,o,c);let _,S;const A=(p+d)/2;if(p===d)_=0,S=0;else{const C=d-p;switch(S=A<=.5?C/(d+p):C/(2-d-p),d){case a:_=(o-c)/C+(o<c?6:0);break;case o:_=(c-a)/C+2;break;case c:_=(a-o)/C+4;break}_/=6}return e.h=_,e.s=S,e.l=A,e}getRGB(e,t=je.workingColorSpace){return je.fromWorkingColorSpace(mt.copy(this),t),e.r=mt.r,e.g=mt.g,e.b=mt.b,e}getStyle(e=Bt){je.fromWorkingColorSpace(mt.copy(this),e);const t=mt.r,a=mt.g,o=mt.b;return e!==Bt?`color(${e} ${t.toFixed(3)} ${a.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(a*255)},${Math.round(o*255)})`}offsetHSL(e,t,a){return this.getHSL(nn),this.setHSL(nn.h+e,nn.s+t,nn.l+a)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,a){return this.r=e.r+(t.r-e.r)*a,this.g=e.g+(t.g-e.g)*a,this.b=e.b+(t.b-e.b)*a,this}lerpHSL(e,t){this.getHSL(nn),e.getHSL(Di);const a=mi(nn.h,Di.h,t),o=mi(nn.s,Di.s,t),c=mi(nn.l,Di.l,t);return this.setHSL(a,o,c),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,a=this.g,o=this.b,c=e.elements;return this.r=c[0]*t+c[3]*a+c[6]*o,this.g=c[1]*t+c[4]*a+c[7]*o,this.b=c[2]*t+c[5]*a+c[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const mt=new qe;qe.NAMES=_o;let hc=0;class xi extends Ln{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hc++}),this.uuid=oi(),this.name="",this.type="Material",this.blending=Qn,this.side=hn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Jr,this.blendDst=Qr,this.blendEquation=Tn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new qe(0,0,0),this.blendAlpha=0,this.depthFunc=Qi,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Js,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=In,this.stencilZFail=In,this.stencilZPass=In,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const a=e[t];if(a===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const o=this[t];if(o===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(a):o&&o.isVector3&&a&&a.isVector3?o.copy(a):this[t]=a}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const a={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),this.roughness!==void 0&&(a.roughness=this.roughness),this.metalness!==void 0&&(a.metalness=this.metalness),this.sheen!==void 0&&(a.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(a.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(a.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(a.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(a.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(a.shininess=this.shininess),this.clearcoat!==void 0&&(a.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(a.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(a.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(a.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(a.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(a.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(a.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(a.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(e).uuid,a.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(e).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(e).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(e).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(e).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(a.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(a.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(a.combine=this.combine)),this.envMapRotation!==void 0&&(a.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(a.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(a.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(a.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(a.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(a.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(a.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(a.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(a.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(a.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(a.size=this.size),this.shadowSide!==null&&(a.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(a.sizeAttenuation=this.sizeAttenuation),this.blending!==Qn&&(a.blending=this.blending),this.side!==hn&&(a.side=this.side),this.vertexColors===!0&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),this.transparent===!0&&(a.transparent=!0),this.blendSrc!==Jr&&(a.blendSrc=this.blendSrc),this.blendDst!==Qr&&(a.blendDst=this.blendDst),this.blendEquation!==Tn&&(a.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(a.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(a.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(a.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(a.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(a.blendAlpha=this.blendAlpha),this.depthFunc!==Qi&&(a.depthFunc=this.depthFunc),this.depthTest===!1&&(a.depthTest=this.depthTest),this.depthWrite===!1&&(a.depthWrite=this.depthWrite),this.colorWrite===!1&&(a.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(a.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Js&&(a.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(a.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(a.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==In&&(a.stencilFail=this.stencilFail),this.stencilZFail!==In&&(a.stencilZFail=this.stencilZFail),this.stencilZPass!==In&&(a.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(a.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(a.rotation=this.rotation),this.polygonOffset===!0&&(a.polygonOffset=!0),this.polygonOffsetFactor!==0&&(a.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(a.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(a.linewidth=this.linewidth),this.dashSize!==void 0&&(a.dashSize=this.dashSize),this.gapSize!==void 0&&(a.gapSize=this.gapSize),this.scale!==void 0&&(a.scale=this.scale),this.dithering===!0&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),this.alphaHash===!0&&(a.alphaHash=!0),this.alphaToCoverage===!0&&(a.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(a.premultipliedAlpha=!0),this.forceSinglePass===!0&&(a.forceSinglePass=!0),this.wireframe===!0&&(a.wireframe=!0),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(a.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(a.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(a.flatShading=!0),this.visible===!1&&(a.visible=!1),this.toneMapped===!1&&(a.toneMapped=!1),this.fog===!1&&(a.fog=!1),Object.keys(this.userData).length>0&&(a.userData=this.userData);function o(c){const d=[];for(const p in c){const _=c[p];delete _.metadata,d.push(_)}return d}if(t){const c=o(e.textures),d=o(e.images);c.length>0&&(a.textures=c),d.length>0&&(a.images=d)}return a}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let a=null;if(t!==null){const o=t.length;a=new Array(o);for(let c=0;c!==o;++c)a[c]=t[c].clone()}return this.clippingPlanes=a,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ni extends xi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $t,this.combine=eo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rt=new U,Ui=new Ie;class Ht{constructor(e,t,a=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=a,this.usage=Qs,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Kt,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return $l("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,a){e*=this.itemSize,a*=t.itemSize;for(let o=0,c=this.itemSize;o<c;o++)this.array[e+o]=t.array[a+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,a=this.count;t<a;t++)Ui.fromBufferAttribute(this,t),Ui.applyMatrix3(e),this.setXY(t,Ui.x,Ui.y);else if(this.itemSize===3)for(let t=0,a=this.count;t<a;t++)rt.fromBufferAttribute(this,t),rt.applyMatrix3(e),this.setXYZ(t,rt.x,rt.y,rt.z);return this}applyMatrix4(e){for(let t=0,a=this.count;t<a;t++)rt.fromBufferAttribute(this,t),rt.applyMatrix4(e),this.setXYZ(t,rt.x,rt.y,rt.z);return this}applyNormalMatrix(e){for(let t=0,a=this.count;t<a;t++)rt.fromBufferAttribute(this,t),rt.applyNormalMatrix(e),this.setXYZ(t,rt.x,rt.y,rt.z);return this}transformDirection(e){for(let t=0,a=this.count;t<a;t++)rt.fromBufferAttribute(this,t),rt.transformDirection(e),this.setXYZ(t,rt.x,rt.y,rt.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let a=this.array[e*this.itemSize+t];return this.normalized&&(a=Zn(a,this.array)),a}setComponent(e,t,a){return this.normalized&&(a=gt(a,this.array)),this.array[e*this.itemSize+t]=a,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Zn(t,this.array)),t}setX(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Zn(t,this.array)),t}setY(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Zn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Zn(t,this.array)),t}setW(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,a){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),a=gt(a,this.array)),this.array[e+0]=t,this.array[e+1]=a,this}setXYZ(e,t,a,o){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),a=gt(a,this.array),o=gt(o,this.array)),this.array[e+0]=t,this.array[e+1]=a,this.array[e+2]=o,this}setXYZW(e,t,a,o,c){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),a=gt(a,this.array),o=gt(o,this.array),c=gt(c,this.array)),this.array[e+0]=t,this.array[e+1]=a,this.array[e+2]=o,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qs&&(e.usage=this.usage),e}}class go extends Ht{constructor(e,t,a){super(new Uint16Array(e),t,a)}}class vo extends Ht{constructor(e,t,a){super(new Uint32Array(e),t,a)}}class ut extends Ht{constructor(e,t,a){super(new Float32Array(e),t,a)}}let fc=0;const Pt=new st,zr=new Mt,kn=new U,wt=new vi,pi=new vi,ct=new U;class Tt extends Ln{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fc++}),this.uuid=oi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(uo(e)?vo:go)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,a=0){this.groups.push({start:e,count:t,materialIndex:a})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const a=this.attributes.normal;if(a!==void 0){const c=new Ge().getNormalMatrix(e);a.applyNormalMatrix(c),a.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pt.makeRotationFromQuaternion(e),this.applyMatrix4(Pt),this}rotateX(e){return Pt.makeRotationX(e),this.applyMatrix4(Pt),this}rotateY(e){return Pt.makeRotationY(e),this.applyMatrix4(Pt),this}rotateZ(e){return Pt.makeRotationZ(e),this.applyMatrix4(Pt),this}translate(e,t,a){return Pt.makeTranslation(e,t,a),this.applyMatrix4(Pt),this}scale(e,t,a){return Pt.makeScale(e,t,a),this.applyMatrix4(Pt),this}lookAt(e){return zr.lookAt(e),zr.updateMatrix(),this.applyMatrix4(zr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kn).negate(),this.translate(kn.x,kn.y,kn.z),this}setFromPoints(e){const t=[];for(let a=0,o=e.length;a<o;a++){const c=e[a];t.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new ut(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const c=t[a];wt.setFromBufferAttribute(c),this.morphTargetsRelative?(ct.addVectors(this.boundingBox.min,wt.min),this.boundingBox.expandByPoint(ct),ct.addVectors(this.boundingBox.max,wt.max),this.boundingBox.expandByPoint(ct)):(this.boundingBox.expandByPoint(wt.min),this.boundingBox.expandByPoint(wt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ur);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new U,1/0);return}if(e){const a=this.boundingSphere.center;if(wt.setFromBufferAttribute(e),t)for(let c=0,d=t.length;c<d;c++){const p=t[c];pi.setFromBufferAttribute(p),this.morphTargetsRelative?(ct.addVectors(wt.min,pi.min),wt.expandByPoint(ct),ct.addVectors(wt.max,pi.max),wt.expandByPoint(ct)):(wt.expandByPoint(pi.min),wt.expandByPoint(pi.max))}wt.getCenter(a);let o=0;for(let c=0,d=e.count;c<d;c++)ct.fromBufferAttribute(e,c),o=Math.max(o,a.distanceToSquared(ct));if(t)for(let c=0,d=t.length;c<d;c++){const p=t[c],_=this.morphTargetsRelative;for(let S=0,A=p.count;S<A;S++)ct.fromBufferAttribute(p,S),_&&(kn.fromBufferAttribute(e,S),ct.add(kn)),o=Math.max(o,a.distanceToSquared(ct))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const a=t.position,o=t.normal,c=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ht(new Float32Array(4*a.count),4));const d=this.getAttribute("tangent"),p=[],_=[];for(let be=0;be<a.count;be++)p[be]=new U,_[be]=new U;const S=new U,A=new U,C=new U,j=new Ie,V=new Ie,J=new Ie,re=new U,ie=new U;function K(be,ta,pn){S.fromBufferAttribute(a,be),A.fromBufferAttribute(a,ta),C.fromBufferAttribute(a,pn),j.fromBufferAttribute(c,be),V.fromBufferAttribute(c,ta),J.fromBufferAttribute(c,pn),A.sub(S),C.sub(S),V.sub(j),J.sub(j);const mr=1/(V.x*J.y-J.x*V.y);isFinite(mr)&&(re.copy(A).multiplyScalar(J.y).addScaledVector(C,-V.y).multiplyScalar(mr),ie.copy(C).multiplyScalar(V.x).addScaledVector(A,-J.x).multiplyScalar(mr),p[be].add(re),p[ta].add(re),p[pn].add(re),_[be].add(ie),_[ta].add(ie),_[pn].add(ie))}let Ne=this.groups;Ne.length===0&&(Ne=[{start:0,count:e.count}]);for(let be=0,ta=Ne.length;be<ta;++be){const pn=Ne[be],mr=pn.start,bp=pn.count;for(let Sp=mr,_r=mr+bp;Sp<_r;Sp+=3)K(e.getX(Sp+0),e.getX(Sp+1),e.getX(Sp+2))}const G=new U,se=new U,He=new U,Fe=new U;function Xe(be){He.fromBufferAttribute(o,be),Fe.copy(He);const ta=p[be];G.copy(ta),G.sub(He.multiplyScalar(He.dot(ta))).normalize(),se.crossVectors(Fe,ta);const pn=se.dot(_[be])<0?-1:1;d.setXYZW(be,G.x,G.y,G.z,pn)}for(let be=0,ta=Ne.length;be<ta;++be){const pn=Ne[be],mr=pn.start,bp=pn.count;for(let Sp=mr,_r=mr+bp;Sp<_r;Sp+=3)Xe(e.getX(Sp+0)),Xe(e.getX(Sp+1)),Xe(e.getX(Sp+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let a=this.getAttribute("normal");if(a===void 0)a=new Ht(new Float32Array(t.count*3),3),this.setAttribute("normal",a);else for(let j=0,V=a.count;j<V;j++)a.setXYZ(j,0,0,0);const o=new U,c=new U,d=new U,p=new U,_=new U,S=new U,A=new U,C=new U;if(e)for(let j=0,V=e.count;j<V;j+=3){const J=e.getX(j+0),re=e.getX(j+1),ie=e.getX(j+2);o.fromBufferAttribute(t,J),c.fromBufferAttribute(t,re),d.fromBufferAttribute(t,ie),A.subVectors(d,c),C.subVectors(o,c),A.cross(C),p.fromBufferAttribute(a,J),_.fromBufferAttribute(a,re),S.fromBufferAttribute(a,ie),p.add(A),_.add(A),S.add(A),a.setXYZ(J,p.x,p.y,p.z),a.setXYZ(re,_.x,_.y,_.z),a.setXYZ(ie,S.x,S.y,S.z)}else for(let j=0,V=t.count;j<V;j+=3)o.fromBufferAttribute(t,j+0),c.fromBufferAttribute(t,j+1),d.fromBufferAttribute(t,j+2),A.subVectors(d,c),C.subVectors(o,c),A.cross(C),a.setXYZ(j+0,A.x,A.y,A.z),a.setXYZ(j+1,A.x,A.y,A.z),a.setXYZ(j+2,A.x,A.y,A.z);this.normalizeNormals(),a.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,a=e.count;t<a;t++)ct.fromBufferAttribute(e,t),ct.normalize(),e.setXYZ(t,ct.x,ct.y,ct.z)}toNonIndexed(){function e(p,_){const S=p.array,A=p.itemSize,C=p.normalized,j=new S.constructor(_.length*A);let V=0,J=0;for(let re=0,ie=_.length;re<ie;re++){p.isInterleavedBufferAttribute?V=_[re]*p.data.stride+p.offset:V=_[re]*A;for(let K=0;K<A;K++)j[J++]=S[V++]}return new Ht(j,A,C)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tt,a=this.index.array,o=this.attributes;for(const p in o){const _=o[p],S=e(_,a);t.setAttribute(p,S)}const c=this.morphAttributes;for(const p in c){const _=[],S=c[p];for(let A=0,C=S.length;A<C;A++){const j=S[A],V=e(j,a);_.push(V)}t.morphAttributes[p]=_}t.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let p=0,_=d.length;p<_;p++){const S=d[p];t.addGroup(S.start,S.count,S.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const _=this.parameters;for(const S in _)_[S]!==void 0&&(e[S]=_[S]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const a=this.attributes;for(const _ in a){const S=a[_];e.data.attributes[_]=S.toJSON(e.data)}const o={};let c=!1;for(const _ in this.morphAttributes){const S=this.morphAttributes[_],A=[];for(let C=0,j=S.length;C<j;C++){const V=S[C];A.push(V.toJSON(e.data))}A.length>0&&(o[_]=A,c=!0)}c&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));const p=this.boundingSphere;return p!==null&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const a=e.index;a!==null&&this.setIndex(a.clone(t));const o=e.attributes;for(const S in o){const A=o[S];this.setAttribute(S,A.clone(t))}const c=e.morphAttributes;for(const S in c){const A=[],C=c[S];for(let j=0,V=C.length;j<V;j++)A.push(C[j].clone(t));this.morphAttributes[S]=A}this.morphTargetsRelative=e.morphTargetsRelative;const d=e.groups;for(let S=0,A=d.length;S<A;S++){const C=d[S];this.addGroup(C.start,C.count,C.materialIndex)}const p=e.boundingBox;p!==null&&(this.boundingBox=p.clone());const _=e.boundingSphere;return _!==null&&(this.boundingSphere=_.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const da=new st,xn=new hs,Ii=new ur,pa=new U,Wn=new U,Xn=new U,Yn=new U,Gr=new U,Ni=new U,Fi=new Ie,Oi=new Ie,Bi=new Ie,ma=new U,_a=new U,ga=new U,zi=new U,Gi=new U;class Rt extends Mt{constructor(e=new Tt,t=new ni){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const a=e[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=a.length;o<c;o++){const d=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}getVertexPosition(e,t){const a=this.geometry,o=a.attributes.position,c=a.morphAttributes.position,d=a.morphTargetsRelative;t.fromBufferAttribute(o,e);const p=this.morphTargetInfluences;if(c&&p){Ni.set(0,0,0);for(let _=0,S=c.length;_<S;_++){const A=p[_],C=c[_];A!==0&&(Gr.fromBufferAttribute(C,e),d?Ni.addScaledVector(Gr,A):Ni.addScaledVector(Gr.sub(t),A))}t.add(Ni)}return t}raycast(e,t){const a=this.geometry,o=this.material,c=this.matrixWorld;o!==void 0&&(a.boundingSphere===null&&a.computeBoundingSphere(),Ii.copy(a.boundingSphere),Ii.applyMatrix4(c),xn.copy(e.ray).recast(e.near),!(Ii.containsPoint(xn.origin)===!1&&(xn.intersectSphere(Ii,pa)===null||xn.origin.distanceToSquared(pa)>(e.far-e.near)**2))&&(da.copy(c).invert(),xn.copy(e.ray).applyMatrix4(da),!(a.boundingBox!==null&&xn.intersectsBox(a.boundingBox)===!1)&&this._computeIntersections(e,t,xn)))}_computeIntersections(e,t,a){let o;const c=this.geometry,d=this.material,p=c.index,_=c.attributes.position,S=c.attributes.uv,A=c.attributes.uv1,C=c.attributes.normal,j=c.groups,V=c.drawRange;if(p!==null)if(Array.isArray(d))for(let J=0,re=j.length;J<re;J++){const ie=j[J],K=d[ie.materialIndex],Ne=Math.max(ie.start,V.start),G=Math.min(p.count,Math.min(ie.start+ie.count,V.start+V.count));for(let se=Ne,He=G;se<He;se+=3){const Fe=p.getX(se),Xe=p.getX(se+1),be=p.getX(se+2);o=Hi(this,K,e,a,S,A,C,Fe,Xe,be),o&&(o.faceIndex=Math.floor(se/3),o.face.materialIndex=ie.materialIndex,t.push(o))}}else{const J=Math.max(0,V.start),re=Math.min(p.count,V.start+V.count);for(let ie=J,K=re;ie<K;ie+=3){const Ne=p.getX(ie),G=p.getX(ie+1),se=p.getX(ie+2);o=Hi(this,d,e,a,S,A,C,Ne,G,se),o&&(o.faceIndex=Math.floor(ie/3),t.push(o))}}else if(_!==void 0)if(Array.isArray(d))for(let J=0,re=j.length;J<re;J++){const ie=j[J],K=d[ie.materialIndex],Ne=Math.max(ie.start,V.start),G=Math.min(_.count,Math.min(ie.start+ie.count,V.start+V.count));for(let se=Ne,He=G;se<He;se+=3){const Fe=se,Xe=se+1,be=se+2;o=Hi(this,K,e,a,S,A,C,Fe,Xe,be),o&&(o.faceIndex=Math.floor(se/3),o.face.materialIndex=ie.materialIndex,t.push(o))}}else{const J=Math.max(0,V.start),re=Math.min(_.count,V.start+V.count);for(let ie=J,K=re;ie<K;ie+=3){const Ne=ie,G=ie+1,se=ie+2;o=Hi(this,d,e,a,S,A,C,Ne,G,se),o&&(o.faceIndex=Math.floor(ie/3),t.push(o))}}}}function dc(r,e,t,a,o,c,d,p){let _;if(e.side===Et?_=a.intersectTriangle(d,c,o,!0,p):_=a.intersectTriangle(o,c,d,e.side===hn,p),_===null)return null;Gi.copy(p),Gi.applyMatrix4(r.matrixWorld);const S=t.ray.origin.distanceTo(Gi);return S<t.near||S>t.far?null:{distance:S,point:Gi.clone(),object:r}}function Hi(r,e,t,a,o,c,d,p,_,S){r.getVertexPosition(p,Wn),r.getVertexPosition(_,Xn),r.getVertexPosition(S,Yn);const A=dc(r,e,t,a,Wn,Xn,Yn,zi);if(A){o&&(Fi.fromBufferAttribute(o,p),Oi.fromBufferAttribute(o,_),Bi.fromBufferAttribute(o,S),A.uv=Ot.getInterpolation(zi,Wn,Xn,Yn,Fi,Oi,Bi,new Ie)),c&&(Fi.fromBufferAttribute(c,p),Oi.fromBufferAttribute(c,_),Bi.fromBufferAttribute(c,S),A.uv1=Ot.getInterpolation(zi,Wn,Xn,Yn,Fi,Oi,Bi,new Ie)),d&&(ma.fromBufferAttribute(d,p),_a.fromBufferAttribute(d,_),ga.fromBufferAttribute(d,S),A.normal=Ot.getInterpolation(zi,Wn,Xn,Yn,ma,_a,ga,new U),A.normal.dot(a.direction)>0&&A.normal.multiplyScalar(-1));const C={a:p,b:_,c:S,normal:new U,materialIndex:0};Ot.getNormal(Wn,Xn,Yn,C.normal),A.face=C}return A}class Mi extends Tt{constructor(e=1,t=1,a=1,o=1,c=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:a,widthSegments:o,heightSegments:c,depthSegments:d};const p=this;o=Math.floor(o),c=Math.floor(c),d=Math.floor(d);const _=[],S=[],A=[],C=[];let j=0,V=0;J("z","y","x",-1,-1,a,t,e,d,c,0),J("z","y","x",1,-1,a,t,-e,d,c,1),J("x","z","y",1,1,e,a,t,o,d,2),J("x","z","y",1,-1,e,a,-t,o,d,3),J("x","y","z",1,-1,e,t,a,o,c,4),J("x","y","z",-1,-1,e,t,-a,o,c,5),this.setIndex(_),this.setAttribute("position",new ut(S,3)),this.setAttribute("normal",new ut(A,3)),this.setAttribute("uv",new ut(C,2));function J(re,ie,K,Ne,G,se,He,Fe,Xe,be,ta){const pn=se/Xe,mr=He/be,bp=se/2,Sp=He/2,_r=Fe/2,xs=Xe+1,ne=be+1;let zl=0,Hl=0;const pr=new U;for(let Hp=0;Hp<ne;Hp++){const Gl=Hp*mr-Sp;for(let Ip=0;Ip<xs;Ip++){const qp=Ip*pn-bp;pr[re]=qp*Ne,pr[ie]=Gl*G,pr[K]=_r,S.push(pr.x,pr.y,pr.z),pr[re]=0,pr[ie]=0,pr[K]=Fe>0?1:-1,A.push(pr.x,pr.y,pr.z),C.push(Ip/Xe),C.push(1-Hp/be),zl+=1}}for(let Hp=0;Hp<be;Hp++)for(let Gl=0;Gl<Xe;Gl++){const Ip=j+Gl+xs*Hp,qp=j+Gl+xs*(Hp+1),ci=j+(Gl+1)+xs*(Hp+1),Ep=j+(Gl+1)+xs*Hp;_.push(Ip,qp,Ep),_.push(qp,ci,Ep),Hl+=6}p.addGroup(V,Hl,ta),V+=Hl,j+=zl}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ai(r){const e={};for(const t in r){e[t]={};for(const a in r[t]){const o=r[t][a];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][a]=null):e[t][a]=o.clone():Array.isArray(o)?e[t][a]=o.slice():e[t][a]=o}}return e}function vt(r){const e={};for(let t=0;t<r.length;t++){const a=ai(r[t]);for(const o in a)e[o]=a[o]}return e}function pc(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function xo(r){return r.getRenderTarget()===null?r.outputColorSpace:je.workingColorSpace}const mc={clone:ai,merge:vt};var _c=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gc=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class fn extends xi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_c,this.fragmentShader=gc,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ai(e.uniforms),this.uniformsGroups=pc(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const c=this.uniforms[o].value;c&&c.isTexture?t.uniforms[o]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?t.uniforms[o]={type:"c",value:c.getHex()}:c&&c.isVector2?t.uniforms[o]={type:"v2",value:c.toArray()}:c&&c.isVector3?t.uniforms[o]={type:"v3",value:c.toArray()}:c&&c.isVector4?t.uniforms[o]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?t.uniforms[o]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?t.uniforms[o]={type:"m4",value:c.toArray()}:t.uniforms[o]={value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const a={};for(const o in this.extensions)this.extensions[o]===!0&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}class Mo extends Mt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new st,this.projectionMatrix=new st,this.projectionMatrixInverse=new st,this.coordinateSystem=Zt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const rn=new U,va=new Ie,xa=new Ie;class Lt extends Mo{constructor(e=50,t=1,a=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=a,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=gi*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ei*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gi*2*Math.atan(Math.tan(ei*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,a){rn.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(rn.x,rn.y).multiplyScalar(-e/rn.z),rn.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),a.set(rn.x,rn.y).multiplyScalar(-e/rn.z)}getViewSize(e,t){return this.getViewBounds(e,va,xa),t.subVectors(xa,va)}setViewOffset(e,t,a,o,c,d){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=a,this.view.offsetY=o,this.view.width=c,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ei*.5*this.fov)/this.zoom,a=2*t,o=this.aspect*a,c=-.5*o;const d=this.view;if(this.view!==null&&this.view.enabled){const _=d.fullWidth,S=d.fullHeight;c+=d.offsetX*o/_,t-=d.offsetY*a/S,o*=d.width/_,a*=d.height/S}const p=this.filmOffset;p!==0&&(c+=e*p/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+o,t,t-a,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const qn=-90,jn=1;class vc extends Mt{constructor(e,t,a){super(),this.type="CubeCamera",this.renderTarget=a,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new Lt(qn,jn,e,t);o.layers=this.layers,this.add(o);const c=new Lt(qn,jn,e,t);c.layers=this.layers,this.add(c);const d=new Lt(qn,jn,e,t);d.layers=this.layers,this.add(d);const p=new Lt(qn,jn,e,t);p.layers=this.layers,this.add(p);const _=new Lt(qn,jn,e,t);_.layers=this.layers,this.add(_);const S=new Lt(qn,jn,e,t);S.layers=this.layers,this.add(S)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[a,o,c,d,p,_]=t;for(const S of t)this.remove(S);if(e===Zt)a.up.set(0,1,0),a.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),c.up.set(0,0,-1),c.lookAt(0,1,0),d.up.set(0,0,1),d.lookAt(0,-1,0),p.up.set(0,1,0),p.lookAt(0,0,1),_.up.set(0,1,0),_.lookAt(0,0,-1);else if(e===ir)a.up.set(0,-1,0),a.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),c.up.set(0,0,1),c.lookAt(0,1,0),d.up.set(0,0,-1),d.lookAt(0,-1,0),p.up.set(0,-1,0),p.lookAt(0,0,1),_.up.set(0,-1,0),_.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const S of t)this.add(S),S.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:a,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[c,d,p,_,S,A]=this.children,C=e.getRenderTarget(),j=e.getActiveCubeFace(),V=e.getActiveMipmapLevel(),J=e.xr.enabled;e.xr.enabled=!1;const re=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,e.setRenderTarget(a,0,o),e.render(t,c),e.setRenderTarget(a,1,o),e.render(t,d),e.setRenderTarget(a,2,o),e.render(t,p),e.setRenderTarget(a,3,o),e.render(t,_),e.setRenderTarget(a,4,o),e.render(t,S),a.texture.generateMipmaps=re,e.setRenderTarget(a,5,o),e.render(t,A),e.setRenderTarget(C,j,V),e.xr.enabled=J,a.texture.needsPMREMUpdate=!0}}class So extends yt{constructor(e,t,a,o,c,d,p,_,S,A){e=e!==void 0?e:[],t=t!==void 0?t:ii,super(e,t,a,o,c,d,p,_,S,A),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class xc extends Cn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const a={width:e,height:e,depth:1},o=[a,a,a,a,a,a];this.texture=new So(o,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:St}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const a={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new Mi(5,5,5),c=new fn({name:"CubemapFromEquirect",uniforms:ai(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,side:Et,blending:ln});c.uniforms.tEquirect.value=t;const d=new Rt(o,c),p=t.minFilter;return t.minFilter===An&&(t.minFilter=St),new vc(1,10,this).update(e,d),t.minFilter=p,d.geometry.dispose(),d.material.dispose(),this}clear(e,t,a,o){const c=e.getRenderTarget();for(let d=0;d<6;d++)e.setRenderTarget(this,d),e.clear(t,a,o);e.setRenderTarget(c)}}const Hr=new U,Mc=new U,Sc=new Ge;class sn{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,a,o){return this.normal.set(e,t,a),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,a){const o=Hr.subVectors(a,t).cross(Mc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const a=e.delta(Hr),o=this.normal.dot(a);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const c=-(e.start.dot(this.normal)+this.constant)/o;return c<0||c>1?null:t.copy(e.start).addScaledVector(a,c)}intersectsLine(e){const t=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return t<0&&a>0||a<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const a=t||Sc.getNormalMatrix(e),o=this.coplanarPoint(Hr).applyMatrix4(e),c=this.normal.applyMatrix3(a).normalize();return this.constant=-o.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Mn=new ur,Vi=new U;class Eo{constructor(e=new sn,t=new sn,a=new sn,o=new sn,c=new sn,d=new sn){this.planes=[e,t,a,o,c,d]}set(e,t,a,o,c,d){const p=this.planes;return p[0].copy(e),p[1].copy(t),p[2].copy(a),p[3].copy(o),p[4].copy(c),p[5].copy(d),this}copy(e){const t=this.planes;for(let a=0;a<6;a++)t[a].copy(e.planes[a]);return this}setFromProjectionMatrix(e,t=Zt){const a=this.planes,o=e.elements,c=o[0],d=o[1],p=o[2],_=o[3],S=o[4],A=o[5],C=o[6],j=o[7],V=o[8],J=o[9],re=o[10],ie=o[11],K=o[12],Ne=o[13],G=o[14],se=o[15];if(a[0].setComponents(_-c,j-S,ie-V,se-K).normalize(),a[1].setComponents(_+c,j+S,ie+V,se+K).normalize(),a[2].setComponents(_+d,j+A,ie+J,se+Ne).normalize(),a[3].setComponents(_-d,j-A,ie-J,se-Ne).normalize(),a[4].setComponents(_-p,j-C,ie-re,se-G).normalize(),t===Zt)a[5].setComponents(_+p,j+C,ie+re,se+G).normalize();else if(t===ir)a[5].setComponents(p,C,re,G).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Mn.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Mn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Mn)}intersectsSprite(e){return Mn.center.set(0,0,0),Mn.radius=.7071067811865476,Mn.applyMatrix4(e.matrixWorld),this.intersectsSphere(Mn)}intersectsSphere(e){const t=this.planes,a=e.center,o=-e.radius;for(let c=0;c<6;c++)if(t[c].distanceToPoint(a)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let a=0;a<6;a++){const o=t[a];if(Vi.x=o.normal.x>0?e.max.x:e.min.x,Vi.y=o.normal.y>0?e.max.y:e.min.y,Vi.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Vi)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let a=0;a<6;a++)if(t[a].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function yo(){let r=null,e=!1,t=null,a=null;function o(c,d){t(c,d),a=r.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(a=r.requestAnimationFrame(o),e=!0)},stop:function(){r.cancelAnimationFrame(a),e=!1},setAnimationLoop:function(c){t=c},setContext:function(c){r=c}}}function Ec(r,e){const t=e.isWebGL2,a=new WeakMap;function o(S,A){const C=S.array,j=S.usage,V=C.byteLength,J=r.createBuffer();r.bindBuffer(A,J),r.bufferData(A,C,j),S.onUploadCallback();let re;if(C instanceof Float32Array)re=r.FLOAT;else if(C instanceof Uint16Array)if(S.isFloat16BufferAttribute)if(t)re=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else re=r.UNSIGNED_SHORT;else if(C instanceof Int16Array)re=r.SHORT;else if(C instanceof Uint32Array)re=r.UNSIGNED_INT;else if(C instanceof Int32Array)re=r.INT;else if(C instanceof Int8Array)re=r.BYTE;else if(C instanceof Uint8Array)re=r.UNSIGNED_BYTE;else if(C instanceof Uint8ClampedArray)re=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+C);return{buffer:J,type:re,bytesPerElement:C.BYTES_PER_ELEMENT,version:S.version,size:V}}function c(S,A,C){const j=A.array,V=A._updateRange,J=A.updateRanges;if(r.bindBuffer(C,S),V.count===-1&&J.length===0&&r.bufferSubData(C,0,j),J.length!==0){for(let re=0,ie=J.length;re<ie;re++){const K=J[re];t?r.bufferSubData(C,K.start*j.BYTES_PER_ELEMENT,j,K.start,K.count):r.bufferSubData(C,K.start*j.BYTES_PER_ELEMENT,j.subarray(K.start,K.start+K.count))}A.clearUpdateRanges()}V.count!==-1&&(t?r.bufferSubData(C,V.offset*j.BYTES_PER_ELEMENT,j,V.offset,V.count):r.bufferSubData(C,V.offset*j.BYTES_PER_ELEMENT,j.subarray(V.offset,V.offset+V.count)),V.count=-1),A.onUploadCallback()}function d(S){return S.isInterleavedBufferAttribute&&(S=S.data),a.get(S)}function p(S){S.isInterleavedBufferAttribute&&(S=S.data);const A=a.get(S);A&&(r.deleteBuffer(A.buffer),a.delete(S))}function _(S,A){if(S.isGLBufferAttribute){const j=a.get(S);(!j||j.version<S.version)&&a.set(S,{buffer:S.buffer,type:S.type,bytesPerElement:S.elementSize,version:S.version});return}S.isInterleavedBufferAttribute&&(S=S.data);const C=a.get(S);if(C===void 0)a.set(S,o(S,A));else if(C.version<S.version){if(C.size!==S.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");c(C.buffer,S,A),C.version=S.version}}return{get:d,remove:p,update:_}}class hr extends Tt{constructor(e=1,t=1,a=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:a,heightSegments:o};const c=e/2,d=t/2,p=Math.floor(a),_=Math.floor(o),S=p+1,A=_+1,C=e/p,j=t/_,V=[],J=[],re=[],ie=[];for(let K=0;K<A;K++){const Ne=K*j-d;for(let G=0;G<S;G++){const se=G*C-c;J.push(se,-Ne,0),re.push(0,0,1),ie.push(G/p),ie.push(1-K/_)}}for(let K=0;K<_;K++)for(let Ne=0;Ne<p;Ne++){const G=Ne+S*K,se=Ne+S*(K+1),He=Ne+1+S*(K+1),Fe=Ne+1+S*K;V.push(G,se,Fe),V.push(se,He,Fe)}this.setIndex(V),this.setAttribute("position",new ut(J,3)),this.setAttribute("normal",new ut(re,3)),this.setAttribute("uv",new ut(ie,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hr(e.width,e.height,e.widthSegments,e.heightSegments)}}var yc=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Tc=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,bc=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Ac=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wc=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Rc=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cc=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Pc=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Lc=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Dc=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Uc=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ic=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Nc=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Fc=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Oc=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Bc=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,zc=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Gc=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Hc=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Vc=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Wc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Xc=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Yc=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,qc=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,jc=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Kc=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Zc=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,$c=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Jc=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Qc="gl_FragColor = linearToOutputTexel( gl_FragColor );",eu=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,tu=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nu=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,iu=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ru=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,su=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,au=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ou=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lu=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cu=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uu=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hu=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,fu=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,du=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pu=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,mu=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,_u=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gu=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vu=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xu=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Mu=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Su=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Eu=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,yu=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Tu=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,bu=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Au=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wu=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ru=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Cu=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Pu=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Lu=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Du=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Uu=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Iu=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Nu=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Fu=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Ou=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Bu=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,zu=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Gu=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Hu=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Vu=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ku=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Wu=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Xu=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Yu=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,qu=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ju=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Ku=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Zu=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$u=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Ju=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Qu=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eh=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,th=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,nh=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ih=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rh=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sh=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,ah=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oh=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,lh=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ch=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uh=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,hh=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fh=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dh=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ph=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mh=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,_h=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gh=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,vh=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,xh=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Mh=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Sh=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Eh=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yh=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Th=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ah=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Rh=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ch=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ph=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Lh=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Dh=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Uh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ih=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Nh=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Fh=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Oh=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Bh=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zh=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gh=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hh=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Vh=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kh=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Wh=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Xh=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yh=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qh=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jh=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kh=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zh=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$h=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Jh=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Qh=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ef=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tf=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nf=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ze={alphahash_fragment:yc,alphahash_pars_fragment:Tc,alphamap_fragment:bc,alphamap_pars_fragment:Ac,alphatest_fragment:wc,alphatest_pars_fragment:Rc,aomap_fragment:Cc,aomap_pars_fragment:Pc,batching_pars_vertex:Lc,batching_vertex:Dc,begin_vertex:Uc,beginnormal_vertex:Ic,bsdfs:Nc,iridescence_fragment:Fc,bumpmap_pars_fragment:Oc,clipping_planes_fragment:Bc,clipping_planes_pars_fragment:zc,clipping_planes_pars_vertex:Gc,clipping_planes_vertex:Hc,color_fragment:Vc,color_pars_fragment:kc,color_pars_vertex:Wc,color_vertex:Xc,common:Yc,cube_uv_reflection_fragment:qc,defaultnormal_vertex:jc,displacementmap_pars_vertex:Kc,displacementmap_vertex:Zc,emissivemap_fragment:$c,emissivemap_pars_fragment:Jc,colorspace_fragment:Qc,colorspace_pars_fragment:eu,envmap_fragment:tu,envmap_common_pars_fragment:nu,envmap_pars_fragment:iu,envmap_pars_vertex:ru,envmap_physical_pars_fragment:_u,envmap_vertex:su,fog_vertex:au,fog_pars_vertex:ou,fog_fragment:lu,fog_pars_fragment:cu,gradientmap_pars_fragment:uu,lightmap_fragment:hu,lightmap_pars_fragment:fu,lights_lambert_fragment:du,lights_lambert_pars_fragment:pu,lights_pars_begin:mu,lights_toon_fragment:gu,lights_toon_pars_fragment:vu,lights_phong_fragment:xu,lights_phong_pars_fragment:Mu,lights_physical_fragment:Su,lights_physical_pars_fragment:Eu,lights_fragment_begin:yu,lights_fragment_maps:Tu,lights_fragment_end:bu,logdepthbuf_fragment:Au,logdepthbuf_pars_fragment:wu,logdepthbuf_pars_vertex:Ru,logdepthbuf_vertex:Cu,map_fragment:Pu,map_pars_fragment:Lu,map_particle_fragment:Du,map_particle_pars_fragment:Uu,metalnessmap_fragment:Iu,metalnessmap_pars_fragment:Nu,morphinstance_vertex:Fu,morphcolor_vertex:Ou,morphnormal_vertex:Bu,morphtarget_pars_vertex:zu,morphtarget_vertex:Gu,normal_fragment_begin:Hu,normal_fragment_maps:Vu,normal_pars_fragment:ku,normal_pars_vertex:Wu,normal_vertex:Xu,normalmap_pars_fragment:Yu,clearcoat_normal_fragment_begin:qu,clearcoat_normal_fragment_maps:ju,clearcoat_pars_fragment:Ku,iridescence_pars_fragment:Zu,opaque_fragment:$u,packing:Ju,premultiplied_alpha_fragment:Qu,project_vertex:eh,dithering_fragment:th,dithering_pars_fragment:nh,roughnessmap_fragment:ih,roughnessmap_pars_fragment:rh,shadowmap_pars_fragment:sh,shadowmap_pars_vertex:ah,shadowmap_vertex:oh,shadowmask_pars_fragment:lh,skinbase_vertex:ch,skinning_pars_vertex:uh,skinning_vertex:hh,skinnormal_vertex:fh,specularmap_fragment:dh,specularmap_pars_fragment:ph,tonemapping_fragment:mh,tonemapping_pars_fragment:_h,transmission_fragment:gh,transmission_pars_fragment:vh,uv_pars_fragment:xh,uv_pars_vertex:Mh,uv_vertex:Sh,worldpos_vertex:Eh,background_vert:yh,background_frag:Th,backgroundCube_vert:bh,backgroundCube_frag:Ah,cube_vert:wh,cube_frag:Rh,depth_vert:Ch,depth_frag:Ph,distanceRGBA_vert:Lh,distanceRGBA_frag:Dh,equirect_vert:Uh,equirect_frag:Ih,linedashed_vert:Nh,linedashed_frag:Fh,meshbasic_vert:Oh,meshbasic_frag:Bh,meshlambert_vert:zh,meshlambert_frag:Gh,meshmatcap_vert:Hh,meshmatcap_frag:Vh,meshnormal_vert:kh,meshnormal_frag:Wh,meshphong_vert:Xh,meshphong_frag:Yh,meshphysical_vert:qh,meshphysical_frag:jh,meshtoon_vert:Kh,meshtoon_frag:Zh,points_vert:$h,points_frag:Jh,shadow_vert:Qh,shadow_frag:ef,sprite_vert:tf,sprite_frag:nf},oe={common:{diffuse:{value:new qe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ge},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ge}},envmap:{envMap:{value:null},envMapRotation:{value:new Ge},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ge}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ge}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ge},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ge},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ge},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ge}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ge}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ge}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0},uvTransform:{value:new Ge}},sprite:{diffuse:{value:new qe(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ge},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0}}},zt={basic:{uniforms:vt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.fog]),vertexShader:ze.meshbasic_vert,fragmentShader:ze.meshbasic_frag},lambert:{uniforms:vt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,oe.lights,{emissive:{value:new qe(0)}}]),vertexShader:ze.meshlambert_vert,fragmentShader:ze.meshlambert_frag},phong:{uniforms:vt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,oe.lights,{emissive:{value:new qe(0)},specular:{value:new qe(1118481)},shininess:{value:30}}]),vertexShader:ze.meshphong_vert,fragmentShader:ze.meshphong_frag},standard:{uniforms:vt([oe.common,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.roughnessmap,oe.metalnessmap,oe.fog,oe.lights,{emissive:{value:new qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ze.meshphysical_vert,fragmentShader:ze.meshphysical_frag},toon:{uniforms:vt([oe.common,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.gradientmap,oe.fog,oe.lights,{emissive:{value:new qe(0)}}]),vertexShader:ze.meshtoon_vert,fragmentShader:ze.meshtoon_frag},matcap:{uniforms:vt([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,{matcap:{value:null}}]),vertexShader:ze.meshmatcap_vert,fragmentShader:ze.meshmatcap_frag},points:{uniforms:vt([oe.points,oe.fog]),vertexShader:ze.points_vert,fragmentShader:ze.points_frag},dashed:{uniforms:vt([oe.common,oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ze.linedashed_vert,fragmentShader:ze.linedashed_frag},depth:{uniforms:vt([oe.common,oe.displacementmap]),vertexShader:ze.depth_vert,fragmentShader:ze.depth_frag},normal:{uniforms:vt([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,{opacity:{value:1}}]),vertexShader:ze.meshnormal_vert,fragmentShader:ze.meshnormal_frag},sprite:{uniforms:vt([oe.sprite,oe.fog]),vertexShader:ze.sprite_vert,fragmentShader:ze.sprite_frag},background:{uniforms:{uvTransform:{value:new Ge},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ze.background_vert,fragmentShader:ze.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ge}},vertexShader:ze.backgroundCube_vert,fragmentShader:ze.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ze.cube_vert,fragmentShader:ze.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ze.equirect_vert,fragmentShader:ze.equirect_frag},distanceRGBA:{uniforms:vt([oe.common,oe.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ze.distanceRGBA_vert,fragmentShader:ze.distanceRGBA_frag},shadow:{uniforms:vt([oe.lights,oe.fog,{color:{value:new qe(0)},opacity:{value:1}}]),vertexShader:ze.shadow_vert,fragmentShader:ze.shadow_frag}};zt.physical={uniforms:vt([zt.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ge},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ge},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ge},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ge},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ge},sheen:{value:0},sheenColor:{value:new qe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ge},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ge},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ge},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ge},attenuationDistance:{value:0},attenuationColor:{value:new qe(0)},specularColor:{value:new qe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ge},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ge},anisotropyVector:{value:new Ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ge}}]),vertexShader:ze.meshphysical_vert,fragmentShader:ze.meshphysical_frag};const ki={r:0,b:0,g:0},Sn=new $t,rf=new st;function sf(r,e,t,a,o,c,d){const p=new qe(0);let _=c===!0?0:1,S,A,C=null,j=0,V=null;function J(ie,K){let Ne=!1,G=K.isScene===!0?K.background:null;G&&G.isTexture&&(G=(K.backgroundBlurriness>0?t:e).get(G)),G===null?re(p,_):G&&G.isColor&&(re(G,1),Ne=!0);const se=r.xr.getEnvironmentBlendMode();se==="additive"?a.buffers.color.setClear(0,0,0,1,d):se==="alpha-blend"&&a.buffers.color.setClear(0,0,0,0,d),(r.autoClear||Ne)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),G&&(G.isCubeTexture||G.mapping===lr)?(A===void 0&&(A=new Rt(new Mi(1,1,1),new fn({name:"BackgroundCubeMaterial",uniforms:ai(zt.backgroundCube.uniforms),vertexShader:zt.backgroundCube.vertexShader,fragmentShader:zt.backgroundCube.fragmentShader,side:Et,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),A.geometry.deleteAttribute("uv"),A.onBeforeRender=function(He,Fe,Xe){this.matrixWorld.copyPosition(Xe.matrixWorld)},Object.defineProperty(A.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(A)),Sn.copy(K.backgroundRotation),Sn.x*=-1,Sn.y*=-1,Sn.z*=-1,G.isCubeTexture&&G.isRenderTargetTexture===!1&&(Sn.y*=-1,Sn.z*=-1),A.material.uniforms.envMap.value=G,A.material.uniforms.flipEnvMap.value=G.isCubeTexture&&G.isRenderTargetTexture===!1?-1:1,A.material.uniforms.backgroundBlurriness.value=K.backgroundBlurriness,A.material.uniforms.backgroundIntensity.value=K.backgroundIntensity,A.material.uniforms.backgroundRotation.value.setFromMatrix4(rf.makeRotationFromEuler(Sn)),A.material.toneMapped=je.getTransfer(G.colorSpace)!==$e,(C!==G||j!==G.version||V!==r.toneMapping)&&(A.material.needsUpdate=!0,C=G,j=G.version,V=r.toneMapping),A.layers.enableAll(),ie.unshift(A,A.geometry,A.material,0,0,null)):G&&G.isTexture&&(S===void 0&&(S=new Rt(new hr(2,2),new fn({name:"BackgroundMaterial",uniforms:ai(zt.background.uniforms),vertexShader:zt.background.vertexShader,fragmentShader:zt.background.fragmentShader,side:hn,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),Object.defineProperty(S.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(S)),S.material.uniforms.t2D.value=G,S.material.uniforms.backgroundIntensity.value=K.backgroundIntensity,S.material.toneMapped=je.getTransfer(G.colorSpace)!==$e,G.matrixAutoUpdate===!0&&G.updateMatrix(),S.material.uniforms.uvTransform.value.copy(G.matrix),(C!==G||j!==G.version||V!==r.toneMapping)&&(S.material.needsUpdate=!0,C=G,j=G.version,V=r.toneMapping),S.layers.enableAll(),ie.unshift(S,S.geometry,S.material,0,0,null))}function re(ie,K){ie.getRGB(ki,xo(r)),a.buffers.color.setClear(ki.r,ki.g,ki.b,K,d)}return{getClearColor:function(){return p},setClearColor:function(ie,K=1){p.set(ie),_=K,re(p,_)},getClearAlpha:function(){return _},setClearAlpha:function(ie){_=ie,re(p,_)},render:J}}function af(r,e,t,a){const o=r.getParameter(r.MAX_VERTEX_ATTRIBS),c=a.isWebGL2?null:e.get("OES_vertex_array_object"),d=a.isWebGL2||c!==null,p={},_=ie(null);let S=_,A=!1;function C(_r,xs,ne,zl,Hl){let pr=!1;if(d){const Hp=re(zl,ne,xs);S!==Hp&&(S=Hp,V(S.object)),pr=K(_r,zl,ne,Hl),pr&&Ne(_r,zl,ne,Hl)}else{const Hp=xs.wireframe===!0;(S.geometry!==zl.id||S.program!==ne.id||S.wireframe!==Hp)&&(S.geometry=zl.id,S.program=ne.id,S.wireframe=Hp,pr=!0)}Hl!==null&&t.update(Hl,r.ELEMENT_ARRAY_BUFFER),(pr||A)&&(A=!1,be(_r,xs,ne,zl),Hl!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(Hl).buffer))}function j(){return a.isWebGL2?r.createVertexArray():c.createVertexArrayOES()}function V(_r){return a.isWebGL2?r.bindVertexArray(_r):c.bindVertexArrayOES(_r)}function J(_r){return a.isWebGL2?r.deleteVertexArray(_r):c.deleteVertexArrayOES(_r)}function re(_r,xs,ne){const zl=ne.wireframe===!0;let Hl=p[_r.id];Hl===void 0&&(Hl={},p[_r.id]=Hl);let pr=Hl[xs.id];pr===void 0&&(pr={},Hl[xs.id]=pr);let Hp=pr[zl];return Hp===void 0&&(Hp=ie(j()),pr[zl]=Hp),Hp}function ie(_r){const xs=[],ne=[],zl=[];for(let Hl=0;Hl<o;Hl++)xs[Hl]=0,ne[Hl]=0,zl[Hl]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:xs,enabledAttributes:ne,attributeDivisors:zl,object:_r,attributes:{},index:null}}function K(_r,xs,ne,zl){const Hl=S.attributes,pr=xs.attributes;let Hp=0;const Gl=ne.getAttributes();for(const Ip in Gl)if(Gl[Ip].location>=0){const qp=Hl[Ip];let ci=pr[Ip];if(ci===void 0&&(Ip==="instanceMatrix"&&_r.instanceMatrix&&(ci=_r.instanceMatrix),Ip==="instanceColor"&&_r.instanceColor&&(ci=_r.instanceColor)),qp===void 0||qp.attribute!==ci||ci&&qp.data!==ci.data)return!0;Hp++}return S.attributesNum!==Hp||S.index!==zl}function Ne(_r,xs,ne,zl){const Hl={},pr=xs.attributes;let Hp=0;const Gl=ne.getAttributes();for(const Ip in Gl)if(Gl[Ip].location>=0){let qp=pr[Ip];qp===void 0&&(Ip==="instanceMatrix"&&_r.instanceMatrix&&(qp=_r.instanceMatrix),Ip==="instanceColor"&&_r.instanceColor&&(qp=_r.instanceColor));const ci={};ci.attribute=qp,qp&&qp.data&&(ci.data=qp.data),Hl[Ip]=ci,Hp++}S.attributes=Hl,S.attributesNum=Hp,S.index=zl}function G(){const _r=S.newAttributes;for(let xs=0,ne=_r.length;xs<ne;xs++)_r[xs]=0}function se(_r){He(_r,0)}function He(_r,xs){const ne=S.newAttributes,zl=S.enabledAttributes,Hl=S.attributeDivisors;ne[_r]=1,zl[_r]===0&&(r.enableVertexAttribArray(_r),zl[_r]=1),Hl[_r]!==xs&&((a.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[a.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](_r,xs),Hl[_r]=xs)}function Fe(){const _r=S.newAttributes,xs=S.enabledAttributes;for(let ne=0,zl=xs.length;ne<zl;ne++)xs[ne]!==_r[ne]&&(r.disableVertexAttribArray(ne),xs[ne]=0)}function Xe(_r,xs,ne,zl,Hl,pr,Hp){Hp===!0?r.vertexAttribIPointer(_r,xs,ne,Hl,pr):r.vertexAttribPointer(_r,xs,ne,zl,Hl,pr)}function be(_r,xs,ne,zl){if(a.isWebGL2===!1&&(_r.isInstancedMesh||zl.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;G();const Hl=zl.attributes,pr=ne.getAttributes(),Hp=xs.defaultAttributeValues;for(const Gl in pr){const Ip=pr[Gl];if(Ip.location>=0){let qp=Hl[Gl];if(qp===void 0&&(Gl==="instanceMatrix"&&_r.instanceMatrix&&(qp=_r.instanceMatrix),Gl==="instanceColor"&&_r.instanceColor&&(qp=_r.instanceColor)),qp!==void 0){const ci=qp.normalized,Ep=qp.itemSize,o0=t.get(qp);if(o0===void 0)continue;const w0=o0.buffer,a0=o0.type,P0=o0.bytesPerElement,am=a.isWebGL2===!0&&(a0===r.INT||a0===r.UNSIGNED_INT||qp.gpuType===no);if(qp.isInterleavedBufferAttribute){const sm=qp.data,C0=sm.stride,Fm=qp.offset;if(sm.isInstancedInterleavedBuffer){for(let Zm=0;Zm<Ip.locationSize;Zm++)He(Ip.location+Zm,sm.meshPerAttribute);_r.isInstancedMesh!==!0&&zl._maxInstanceCount===void 0&&(zl._maxInstanceCount=sm.meshPerAttribute*sm.count)}else for(let Zm=0;Zm<Ip.locationSize;Zm++)se(Ip.location+Zm);r.bindBuffer(r.ARRAY_BUFFER,w0);for(let Zm=0;Zm<Ip.locationSize;Zm++)Xe(Ip.location+Zm,Ep/Ip.locationSize,a0,ci,C0*P0,(Fm+Ep/Ip.locationSize*Zm)*P0,am)}else{if(qp.isInstancedBufferAttribute){for(let sm=0;sm<Ip.locationSize;sm++)He(Ip.location+sm,qp.meshPerAttribute);_r.isInstancedMesh!==!0&&zl._maxInstanceCount===void 0&&(zl._maxInstanceCount=qp.meshPerAttribute*qp.count)}else for(let sm=0;sm<Ip.locationSize;sm++)se(Ip.location+sm);r.bindBuffer(r.ARRAY_BUFFER,w0);for(let sm=0;sm<Ip.locationSize;sm++)Xe(Ip.location+sm,Ep/Ip.locationSize,a0,ci,Ep*P0,Ep/Ip.locationSize*sm*P0,am)}}else if(Hp!==void 0){const ci=Hp[Gl];if(ci!==void 0)switch(ci.length){case 2:r.vertexAttrib2fv(Ip.location,ci);break;case 3:r.vertexAttrib3fv(Ip.location,ci);break;case 4:r.vertexAttrib4fv(Ip.location,ci);break;default:r.vertexAttrib1fv(Ip.location,ci)}}}}Fe()}function ta(){bp();for(const _r in p){const xs=p[_r];for(const ne in xs){const zl=xs[ne];for(const Hl in zl)J(zl[Hl].object),delete zl[Hl];delete xs[ne]}delete p[_r]}}function pn(_r){if(p[_r.id]===void 0)return;const xs=p[_r.id];for(const ne in xs){const zl=xs[ne];for(const Hl in zl)J(zl[Hl].object),delete zl[Hl];delete xs[ne]}delete p[_r.id]}function mr(_r){for(const xs in p){const ne=p[xs];if(ne[_r.id]===void 0)continue;const zl=ne[_r.id];for(const Hl in zl)J(zl[Hl].object),delete zl[Hl];delete ne[_r.id]}}function bp(){Sp(),A=!0,S!==_&&(S=_,V(S.object))}function Sp(){_.geometry=null,_.program=null,_.wireframe=!1}return{setup:C,reset:bp,resetDefaultState:Sp,dispose:ta,releaseStatesOfGeometry:pn,releaseStatesOfProgram:mr,initAttributes:G,enableAttribute:se,disableUnusedAttributes:Fe}}function of(r,e,t,a){const o=a.isWebGL2;let c;function d(A){c=A}function p(A,C){r.drawArrays(c,A,C),t.update(C,c,1)}function _(A,C,j){if(j===0)return;let V,J;if(o)V=r,J="drawArraysInstanced";else if(V=e.get("ANGLE_instanced_arrays"),J="drawArraysInstancedANGLE",V===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}V[J](c,A,C,j),t.update(C,c,j)}function S(A,C,j){if(j===0)return;const V=e.get("WEBGL_multi_draw");if(V===null)for(let J=0;J<j;J++)this.render(A[J],C[J]);else{V.multiDrawArraysWEBGL(c,A,0,C,0,j);let J=0;for(let re=0;re<j;re++)J+=C[re];t.update(J,c,1)}}this.setMode=d,this.render=p,this.renderInstances=_,this.renderMultiDraw=S}function lf(r,e,t){let a;function o(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const Xe=e.get("EXT_texture_filter_anisotropic");a=r.getParameter(Xe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function c(Xe){if(Xe==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";Xe="mediump"}return Xe==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const d=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let p=t.precision!==void 0?t.precision:"highp";const _=c(p);_!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",_,"instead."),p=_);const S=d||e.has("WEBGL_draw_buffers"),A=t.logarithmicDepthBuffer===!0,C=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),j=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),V=r.getParameter(r.MAX_TEXTURE_SIZE),J=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),re=r.getParameter(r.MAX_VERTEX_ATTRIBS),ie=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),K=r.getParameter(r.MAX_VARYING_VECTORS),Ne=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),G=j>0,se=d||e.has("OES_texture_float"),He=G&&se,Fe=d?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:d,drawBuffers:S,getMaxAnisotropy:o,getMaxPrecision:c,precision:p,logarithmicDepthBuffer:A,maxTextures:C,maxVertexTextures:j,maxTextureSize:V,maxCubemapSize:J,maxAttributes:re,maxVertexUniforms:ie,maxVaryings:K,maxFragmentUniforms:Ne,vertexTextures:G,floatFragmentTextures:se,floatVertexTextures:He,maxSamples:Fe}}function cf(r){const e=this;let t=null,a=0,o=!1,c=!1;const d=new sn,p=new Ge,_={value:null,needsUpdate:!1};this.uniform=_,this.numPlanes=0,this.numIntersection=0,this.init=function(C,j){const V=C.length!==0||j||a!==0||o;return o=j,a=C.length,V},this.beginShadows=function(){c=!0,A(null)},this.endShadows=function(){c=!1},this.setGlobalState=function(C,j){t=A(C,j,0)},this.setState=function(C,j,V){const J=C.clippingPlanes,re=C.clipIntersection,ie=C.clipShadows,K=r.get(C);if(!o||J===null||J.length===0||c&&!ie)c?A(null):S();else{const Ne=c?0:a,G=Ne*4;let se=K.clippingState||null;_.value=se,se=A(J,j,G,V);for(let He=0;He!==G;++He)se[He]=t[He];K.clippingState=se,this.numIntersection=re?this.numPlanes:0,this.numPlanes+=Ne}};function S(){_.value!==t&&(_.value=t,_.needsUpdate=a>0),e.numPlanes=a,e.numIntersection=0}function A(C,j,V,J){const re=C!==null?C.length:0;let ie=null;if(re!==0){if(ie=_.value,J!==!0||ie===null){const K=V+re*4,Ne=j.matrixWorldInverse;p.getNormalMatrix(Ne),(ie===null||ie.length<K)&&(ie=new Float32Array(K));for(let G=0,se=V;G!==re;++G,se+=4)d.copy(C[G]).applyMatrix4(Ne,p),d.normal.toArray(ie,se),ie[se+3]=d.constant}_.value=ie,_.needsUpdate=!0}return e.numPlanes=re,e.numIntersection=0,ie}}function uf(r){let e=new WeakMap;function t(d,p){return p===es?d.mapping=ii:p===ts&&(d.mapping=ri),d}function a(d){if(d&&d.isTexture){const p=d.mapping;if(p===es||p===ts)if(e.has(d)){const _=e.get(d).texture;return t(_,d.mapping)}else{const _=d.image;if(_&&_.height>0){const S=new xc(_.height);return S.fromEquirectangularTexture(r,d),e.set(d,S),d.addEventListener("dispose",o),t(S.texture,d.mapping)}else return null}}return d}function o(d){const p=d.target;p.removeEventListener("dispose",o);const _=e.get(p);_!==void 0&&(e.delete(p),_.dispose())}function c(){e=new WeakMap}return{get:a,dispose:c}}class hf extends Mo{constructor(e=-1,t=1,a=1,o=-1,c=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=a,this.bottom=o,this.near=c,this.far=d,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,a,o,c,d){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=a,this.view.offsetY=o,this.view.width=c,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let c=a-e,d=a+e,p=o+t,_=o-t;if(this.view!==null&&this.view.enabled){const S=(this.right-this.left)/this.view.fullWidth/this.zoom,A=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=S*this.view.offsetX,d=c+S*this.view.width,p-=A*this.view.offsetY,_=p-A*this.view.height}this.projectionMatrix.makeOrthographic(c,d,p,_,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const $n=4,Ma=[.125,.215,.35,.446,.526,.582],bn=20,Vr=new hf,Sa=new qe;let kr=null,Wr=0,Xr=0;const yn=(1+Math.sqrt(5))/2,Kn=1/yn,Ea=[new U(1,1,1),new U(-1,1,1),new U(1,1,-1),new U(-1,1,-1),new U(0,yn,Kn),new U(0,yn,-Kn),new U(Kn,0,yn),new U(-Kn,0,yn),new U(yn,Kn,0),new U(-yn,Kn,0)];class ya{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,a=.1,o=100){kr=this._renderer.getRenderTarget(),Wr=this._renderer.getActiveCubeFace(),Xr=this._renderer.getActiveMipmapLevel(),this._setSize(256);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,a,o,c),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Aa(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ba(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(kr,Wr,Xr),e.scissorTest=!1,Wi(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ii||e.mapping===ri?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),kr=this._renderer.getRenderTarget(),Wr=this._renderer.getActiveCubeFace(),Xr=this._renderer.getActiveMipmapLevel();const a=t||this._allocateTargets();return this._textureToCubeUV(e,a),this._applyPMREM(a),this._cleanup(a),a}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,a={magFilter:St,minFilter:St,generateMipmaps:!1,type:_i,format:Ft,colorSpace:dn,depthBuffer:!1},o=Ta(e,t,a);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ta(e,t,a);const{_lodMax:c}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ff(c)),this._blurMaterial=df(c,e,t)}return o}_compileMaterial(e){const t=new Rt(this._lodPlanes[0],e);this._renderer.compile(t,Vr)}_sceneToCubeUV(e,t,a,o){const c=new Lt(90,1,t,a),d=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],_=this._renderer,S=_.autoClear,A=_.toneMapping;_.getClearColor(Sa),_.toneMapping=cn,_.autoClear=!1;const C=new ni({name:"PMREM.Background",side:Et,depthWrite:!1,depthTest:!1}),j=new Rt(new Mi,C);let V=!1;const J=e.background;J?J.isColor&&(C.color.copy(J),e.background=null,V=!0):(C.color.copy(Sa),V=!0);for(let re=0;re<6;re++){const ie=re%3;ie===0?(c.up.set(0,d[re],0),c.lookAt(p[re],0,0)):ie===1?(c.up.set(0,0,d[re]),c.lookAt(0,p[re],0)):(c.up.set(0,d[re],0),c.lookAt(0,0,p[re]));const K=this._cubeSize;Wi(o,ie*K,re>2?K:0,K,K),_.setRenderTarget(o),V&&_.render(j,c),_.render(e,c)}j.geometry.dispose(),j.material.dispose(),_.toneMapping=A,_.autoClear=S,e.background=J}_textureToCubeUV(e,t){const a=this._renderer,o=e.mapping===ii||e.mapping===ri;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=Aa()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ba());const c=o?this._cubemapMaterial:this._equirectMaterial,d=new Rt(this._lodPlanes[0],c),p=c.uniforms;p.envMap.value=e;const _=this._cubeSize;Wi(t,0,0,3*_,2*_),a.setRenderTarget(t),a.render(d,Vr)}_applyPMREM(e){const t=this._renderer,a=t.autoClear;t.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const c=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),d=Ea[(o-1)%Ea.length];this._blur(e,o-1,o,c,d)}t.autoClear=a}_blur(e,t,a,o,c){const d=this._pingPongRenderTarget;this._halfBlur(e,d,t,a,o,"latitudinal",c),this._halfBlur(d,e,a,a,o,"longitudinal",c)}_halfBlur(e,t,a,o,c,d,p){const _=this._renderer,S=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const A=3,C=new Rt(this._lodPlanes[o],S),j=S.uniforms,V=this._sizeLods[a]-1,J=isFinite(c)?Math.PI/(2*V):2*Math.PI/(2*bn-1),re=c/J,ie=isFinite(c)?1+Math.floor(A*re):bn;ie>bn&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${ie} samples when the maximum is set to ${bn}`);const K=[];let Ne=0;for(let Xe=0;Xe<bn;++Xe){const be=Xe/re,ta=Math.exp(-be*be/2);K.push(ta),Xe===0?Ne+=ta:Xe<ie&&(Ne+=2*ta)}for(let Xe=0;Xe<K.length;Xe++)K[Xe]=K[Xe]/Ne;j.envMap.value=e.texture,j.samples.value=ie,j.weights.value=K,j.latitudinal.value=d==="latitudinal",p&&(j.poleAxis.value=p);const{_lodMax:G}=this;j.dTheta.value=J,j.mipInt.value=G-a;const se=this._sizeLods[o],He=3*se*(o>G-$n?o-G+$n:0),Fe=4*(this._cubeSize-se);Wi(t,He,Fe,3*se,2*se),_.setRenderTarget(t),_.render(C,Vr)}}function ff(r){const e=[],t=[],a=[];let o=r;const c=r-$n+1+Ma.length;for(let d=0;d<c;d++){const p=Math.pow(2,o);t.push(p);let _=1/p;d>r-$n?_=Ma[d-r+$n-1]:d===0&&(_=0),a.push(_);const S=1/(p-2),A=-S,C=1+S,j=[A,A,C,A,C,C,A,A,C,C,A,C],V=6,J=6,re=3,ie=2,K=1,Ne=new Float32Array(re*J*V),G=new Float32Array(ie*J*V),se=new Float32Array(K*J*V);for(let Fe=0;Fe<V;Fe++){const Xe=Fe%3*2/3-1,be=Fe>2?0:-1,ta=[Xe,be,0,Xe+2/3,be,0,Xe+2/3,be+1,0,Xe,be,0,Xe+2/3,be+1,0,Xe,be+1,0];Ne.set(ta,re*J*Fe),G.set(j,ie*J*Fe);const pn=[Fe,Fe,Fe,Fe,Fe,Fe];se.set(pn,K*J*Fe)}const He=new Tt;He.setAttribute("position",new Ht(Ne,re)),He.setAttribute("uv",new Ht(G,ie)),He.setAttribute("faceIndex",new Ht(se,K)),e.push(He),o>$n&&o--}return{lodPlanes:e,sizeLods:t,sigmas:a}}function Ta(r,e,t){const a=new Cn(r,e,t);return a.texture.mapping=lr,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function Wi(r,e,t,a,o){r.viewport.set(e,t,a,o),r.scissor.set(e,t,a,o)}function df(r,e,t){const a=new Float32Array(bn),o=new U(0,1,0);return new fn({name:"SphericalGaussianBlur",defines:{n:bn,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:fs(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function ba(){return new fn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:fs(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function Aa(){return new fn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:fs(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function fs(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function pf(r){let e=new WeakMap,t=null;function a(p){if(p&&p.isTexture){const _=p.mapping,S=_===es||_===ts,A=_===ii||_===ri;if(S||A)if(p.isRenderTargetTexture&&p.needsPMREMUpdate===!0){p.needsPMREMUpdate=!1;let C=e.get(p);return t===null&&(t=new ya(r)),C=S?t.fromEquirectangular(p,C):t.fromCubemap(p,C),e.set(p,C),C.texture}else{if(e.has(p))return e.get(p).texture;{const C=p.image;if(S&&C&&C.height>0||A&&C&&o(C)){t===null&&(t=new ya(r));const j=S?t.fromEquirectangular(p):t.fromCubemap(p);return e.set(p,j),p.addEventListener("dispose",c),j.texture}else return null}}}return p}function o(p){let _=0;const S=6;for(let A=0;A<S;A++)p[A]!==void 0&&_++;return _===S}function c(p){const _=p.target;_.removeEventListener("dispose",c);const S=e.get(_);S!==void 0&&(e.delete(_),S.dispose())}function d(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:a,dispose:d}}function mf(r){const e={};function t(a){if(e[a]!==void 0)return e[a];let o;switch(a){case"WEBGL_depth_texture":o=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=r.getExtension(a)}return e[a]=o,o}return{has:function(a){return t(a)!==null},init:function(a){a.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(a){const o=t(a);return o===null&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),o}}}function _f(r,e,t,a){const o={},c=new WeakMap;function d(C){const j=C.target;j.index!==null&&e.remove(j.index);for(const J in j.attributes)e.remove(j.attributes[J]);for(const J in j.morphAttributes){const re=j.morphAttributes[J];for(let ie=0,K=re.length;ie<K;ie++)e.remove(re[ie])}j.removeEventListener("dispose",d),delete o[j.id];const V=c.get(j);V&&(e.remove(V),c.delete(j)),a.releaseStatesOfGeometry(j),j.isInstancedBufferGeometry===!0&&delete j._maxInstanceCount,t.memory.geometries--}function p(C,j){return o[j.id]===!0||(j.addEventListener("dispose",d),o[j.id]=!0,t.memory.geometries++),j}function _(C){const j=C.attributes;for(const J in j)e.update(j[J],r.ARRAY_BUFFER);const V=C.morphAttributes;for(const J in V){const re=V[J];for(let ie=0,K=re.length;ie<K;ie++)e.update(re[ie],r.ARRAY_BUFFER)}}function S(C){const j=[],V=C.index,J=C.attributes.position;let re=0;if(V!==null){const Ne=V.array;re=V.version;for(let G=0,se=Ne.length;G<se;G+=3){const He=Ne[G+0],Fe=Ne[G+1],Xe=Ne[G+2];j.push(He,Fe,Fe,Xe,Xe,He)}}else if(J!==void 0){const Ne=J.array;re=J.version;for(let G=0,se=Ne.length/3-1;G<se;G+=3){const He=G+0,Fe=G+1,Xe=G+2;j.push(He,Fe,Fe,Xe,Xe,He)}}else return;const ie=new(uo(j)?vo:go)(j,1);ie.version=re;const K=c.get(C);K&&e.remove(K),c.set(C,ie)}function A(C){const j=c.get(C);if(j){const V=C.index;V!==null&&j.version<V.version&&S(C)}else S(C);return c.get(C)}return{get:p,update:_,getWireframeAttribute:A}}function gf(r,e,t,a){const o=a.isWebGL2;let c;function d(V){c=V}let p,_;function S(V){p=V.type,_=V.bytesPerElement}function A(V,J){r.drawElements(c,J,p,V*_),t.update(J,c,1)}function C(V,J,re){if(re===0)return;let ie,K;if(o)ie=r,K="drawElementsInstanced";else if(ie=e.get("ANGLE_instanced_arrays"),K="drawElementsInstancedANGLE",ie===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ie[K](c,J,p,V*_,re),t.update(J,c,re)}function j(V,J,re){if(re===0)return;const ie=e.get("WEBGL_multi_draw");if(ie===null)for(let K=0;K<re;K++)this.render(V[K]/_,J[K]);else{ie.multiDrawElementsWEBGL(c,J,0,p,V,0,re);let K=0;for(let Ne=0;Ne<re;Ne++)K+=J[Ne];t.update(K,c,1)}}this.setMode=d,this.setIndex=S,this.render=A,this.renderInstances=C,this.renderMultiDraw=j}function vf(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function a(c,d,p){switch(t.calls++,d){case r.TRIANGLES:t.triangles+=p*(c/3);break;case r.LINES:t.lines+=p*(c/2);break;case r.LINE_STRIP:t.lines+=p*(c-1);break;case r.LINE_LOOP:t.lines+=p*c;break;case r.POINTS:t.points+=p*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d);break}}function o(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:a}}function xf(r,e){return r[0]-e[0]}function Mf(r,e){return Math.abs(e[1])-Math.abs(r[1])}function Sf(r,e,t){const a={},o=new Float32Array(8),c=new WeakMap,d=new ht,p=[];for(let S=0;S<8;S++)p[S]=[S,0];function _(S,A,C){const j=S.morphTargetInfluences;if(e.isWebGL2===!0){const V=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,J=V!==void 0?V.length:0;let re=c.get(A);if(re===void 0||re.count!==J){let ie=function(){mr.dispose(),c.delete(A),A.removeEventListener("dispose",ie)};re!==void 0&&re.texture.dispose();const K=A.morphAttributes.position!==void 0,Ne=A.morphAttributes.normal!==void 0,G=A.morphAttributes.color!==void 0,se=A.morphAttributes.position||[],He=A.morphAttributes.normal||[],Fe=A.morphAttributes.color||[];let Xe=0;K===!0&&(Xe=1),Ne===!0&&(Xe=2),G===!0&&(Xe=3);let be=A.attributes.position.count*Xe,ta=1;be>e.maxTextureSize&&(ta=Math.ceil(be/e.maxTextureSize),be=e.maxTextureSize);const pn=new Float32Array(be*ta*4*J),mr=new po(pn,be,ta,J);mr.type=Kt,mr.needsUpdate=!0;const bp=Xe*4;for(let Sp=0;Sp<J;Sp++){const _r=se[Sp],xs=He[Sp],ne=Fe[Sp],zl=be*ta*4*Sp;for(let Hl=0;Hl<_r.count;Hl++){const pr=Hl*bp;K===!0&&(d.fromBufferAttribute(_r,Hl),pn[zl+pr+0]=d.x,pn[zl+pr+1]=d.y,pn[zl+pr+2]=d.z,pn[zl+pr+3]=0),Ne===!0&&(d.fromBufferAttribute(xs,Hl),pn[zl+pr+4]=d.x,pn[zl+pr+5]=d.y,pn[zl+pr+6]=d.z,pn[zl+pr+7]=0),G===!0&&(d.fromBufferAttribute(ne,Hl),pn[zl+pr+8]=d.x,pn[zl+pr+9]=d.y,pn[zl+pr+10]=d.z,pn[zl+pr+11]=ne.itemSize===4?d.w:1)}}re={count:J,texture:mr,size:new Ie(be,ta)},c.set(A,re),A.addEventListener("dispose",ie)}if(S.isInstancedMesh===!0&&S.morphTexture!==null)C.getUniforms().setValue(r,"morphTexture",S.morphTexture,t);else{let ie=0;for(let Ne=0;Ne<j.length;Ne++)ie+=j[Ne];const K=A.morphTargetsRelative?1:1-ie;C.getUniforms().setValue(r,"morphTargetBaseInfluence",K),C.getUniforms().setValue(r,"morphTargetInfluences",j)}C.getUniforms().setValue(r,"morphTargetsTexture",re.texture,t),C.getUniforms().setValue(r,"morphTargetsTextureSize",re.size)}else{const V=j===void 0?0:j.length;let J=a[A.id];if(J===void 0||J.length!==V){J=[];for(let G=0;G<V;G++)J[G]=[G,0];a[A.id]=J}for(let G=0;G<V;G++){const se=J[G];se[0]=G,se[1]=j[G]}J.sort(Mf);for(let G=0;G<8;G++)G<V&&J[G][1]?(p[G][0]=J[G][0],p[G][1]=J[G][1]):(p[G][0]=Number.MAX_SAFE_INTEGER,p[G][1]=0);p.sort(xf);const re=A.morphAttributes.position,ie=A.morphAttributes.normal;let K=0;for(let G=0;G<8;G++){const se=p[G],He=se[0],Fe=se[1];He!==Number.MAX_SAFE_INTEGER&&Fe?(re&&A.getAttribute("morphTarget"+G)!==re[He]&&A.setAttribute("morphTarget"+G,re[He]),ie&&A.getAttribute("morphNormal"+G)!==ie[He]&&A.setAttribute("morphNormal"+G,ie[He]),o[G]=Fe,K+=Fe):(re&&A.hasAttribute("morphTarget"+G)===!0&&A.deleteAttribute("morphTarget"+G),ie&&A.hasAttribute("morphNormal"+G)===!0&&A.deleteAttribute("morphNormal"+G),o[G]=0)}const Ne=A.morphTargetsRelative?1:1-K;C.getUniforms().setValue(r,"morphTargetBaseInfluence",Ne),C.getUniforms().setValue(r,"morphTargetInfluences",o)}}return{update:_}}function Ef(r,e,t,a){let o=new WeakMap;function c(_){const S=a.render.frame,A=_.geometry,C=e.get(_,A);if(o.get(C)!==S&&(e.update(C),o.set(C,S)),_.isInstancedMesh&&(_.hasEventListener("dispose",p)===!1&&_.addEventListener("dispose",p),o.get(_)!==S&&(t.update(_.instanceMatrix,r.ARRAY_BUFFER),_.instanceColor!==null&&t.update(_.instanceColor,r.ARRAY_BUFFER),o.set(_,S))),_.isSkinnedMesh){const j=_.skeleton;o.get(j)!==S&&(j.update(),o.set(j,S))}return C}function d(){o=new WeakMap}function p(_){const S=_.target;S.removeEventListener("dispose",p),t.remove(S.instanceMatrix),S.instanceColor!==null&&t.remove(S.instanceColor)}return{update:c,dispose:d}}class To extends yt{constructor(e,t,a,o,c,d,p,_,S,A){if(A=A!==void 0?A:Rn,A!==Rn&&A!==si)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");a===void 0&&A===Rn&&(a=on),a===void 0&&A===si&&(a=wn),super(null,o,c,d,p,_,A,a,S),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=p!==void 0?p:xt,this.minFilter=_!==void 0?_:xt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const bo=new yt,Ao=new To(1,1);Ao.compareFunction=co;const wo=new po,Ro=new nc,Co=new So,wa=[],Ra=[],Ca=new Float32Array(16),Pa=new Float32Array(9),La=new Float32Array(4);function li$1(r,e,t){const a=r[0];if(a<=0||a>0)return r;const o=e*t;let c=wa[o];if(c===void 0&&(c=new Float32Array(o),wa[o]=c),e!==0){a.toArray(c,0);for(let d=1,p=0;d!==e;++d)p+=t,r[d].toArray(c,p)}return c}function at(r,e){if(r.length!==e.length)return!1;for(let t=0,a=r.length;t<a;t++)if(r[t]!==e[t])return!1;return!0}function ot(r,e){for(let t=0,a=e.length;t<a;t++)r[t]=e[t]}function fr(r,e){let t=Ra[e];t===void 0&&(t=new Int32Array(e),Ra[e]=t);for(let a=0;a!==e;++a)t[a]=r.allocateTextureUnit();return t}function yf(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function Tf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(at(t,e))return;r.uniform2fv(this.addr,e),ot(t,e)}}function bf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(at(t,e))return;r.uniform3fv(this.addr,e),ot(t,e)}}function Af(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(at(t,e))return;r.uniform4fv(this.addr,e),ot(t,e)}}function wf(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(at(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),ot(t,e)}else{if(at(t,a))return;La.set(a),r.uniformMatrix2fv(this.addr,!1,La),ot(t,a)}}function Rf(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(at(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),ot(t,e)}else{if(at(t,a))return;Pa.set(a),r.uniformMatrix3fv(this.addr,!1,Pa),ot(t,a)}}function Cf(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(at(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),ot(t,e)}else{if(at(t,a))return;Ca.set(a),r.uniformMatrix4fv(this.addr,!1,Ca),ot(t,a)}}function Pf(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Lf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(at(t,e))return;r.uniform2iv(this.addr,e),ot(t,e)}}function Df(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(at(t,e))return;r.uniform3iv(this.addr,e),ot(t,e)}}function Uf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(at(t,e))return;r.uniform4iv(this.addr,e),ot(t,e)}}function If(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Nf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(at(t,e))return;r.uniform2uiv(this.addr,e),ot(t,e)}}function Ff(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(at(t,e))return;r.uniform3uiv(this.addr,e),ot(t,e)}}function Of(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(at(t,e))return;r.uniform4uiv(this.addr,e),ot(t,e)}}function Bf(r,e,t){const a=this.cache,o=t.allocateTextureUnit();a[0]!==o&&(r.uniform1i(this.addr,o),a[0]=o);const c=this.type===r.SAMPLER_2D_SHADOW?Ao:bo;t.setTexture2D(e||c,o)}function zf(r,e,t){const a=this.cache,o=t.allocateTextureUnit();a[0]!==o&&(r.uniform1i(this.addr,o),a[0]=o),t.setTexture3D(e||Ro,o)}function Gf(r,e,t){const a=this.cache,o=t.allocateTextureUnit();a[0]!==o&&(r.uniform1i(this.addr,o),a[0]=o),t.setTextureCube(e||Co,o)}function Hf(r,e,t){const a=this.cache,o=t.allocateTextureUnit();a[0]!==o&&(r.uniform1i(this.addr,o),a[0]=o),t.setTexture2DArray(e||wo,o)}function Vf(r){switch(r){case 5126:return yf;case 35664:return Tf;case 35665:return bf;case 35666:return Af;case 35674:return wf;case 35675:return Rf;case 35676:return Cf;case 5124:case 35670:return Pf;case 35667:case 35671:return Lf;case 35668:case 35672:return Df;case 35669:case 35673:return Uf;case 5125:return If;case 36294:return Nf;case 36295:return Ff;case 36296:return Of;case 35678:case 36198:case 36298:case 36306:case 35682:return Bf;case 35679:case 36299:case 36307:return zf;case 35680:case 36300:case 36308:case 36293:return Gf;case 36289:case 36303:case 36311:case 36292:return Hf}}function kf(r,e){r.uniform1fv(this.addr,e)}function Wf(r,e){const t=li$1(e,this.size,2);r.uniform2fv(this.addr,t)}function Xf(r,e){const t=li$1(e,this.size,3);r.uniform3fv(this.addr,t)}function Yf(r,e){const t=li$1(e,this.size,4);r.uniform4fv(this.addr,t)}function qf(r,e){const t=li$1(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function jf(r,e){const t=li$1(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function Kf(r,e){const t=li$1(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function Zf(r,e){r.uniform1iv(this.addr,e)}function $f(r,e){r.uniform2iv(this.addr,e)}function Jf(r,e){r.uniform3iv(this.addr,e)}function Qf(r,e){r.uniform4iv(this.addr,e)}function ed(r,e){r.uniform1uiv(this.addr,e)}function td$1(r,e){r.uniform2uiv(this.addr,e)}function nd(r,e){r.uniform3uiv(this.addr,e)}function id(r,e){r.uniform4uiv(this.addr,e)}function rd(r,e,t){const a=this.cache,o=e.length,c=fr(t,o);at(a,c)||(r.uniform1iv(this.addr,c),ot(a,c));for(let d=0;d!==o;++d)t.setTexture2D(e[d]||bo,c[d])}function sd(r,e,t){const a=this.cache,o=e.length,c=fr(t,o);at(a,c)||(r.uniform1iv(this.addr,c),ot(a,c));for(let d=0;d!==o;++d)t.setTexture3D(e[d]||Ro,c[d])}function ad(r,e,t){const a=this.cache,o=e.length,c=fr(t,o);at(a,c)||(r.uniform1iv(this.addr,c),ot(a,c));for(let d=0;d!==o;++d)t.setTextureCube(e[d]||Co,c[d])}function od(r,e,t){const a=this.cache,o=e.length,c=fr(t,o);at(a,c)||(r.uniform1iv(this.addr,c),ot(a,c));for(let d=0;d!==o;++d)t.setTexture2DArray(e[d]||wo,c[d])}function ld(r){switch(r){case 5126:return kf;case 35664:return Wf;case 35665:return Xf;case 35666:return Yf;case 35674:return qf;case 35675:return jf;case 35676:return Kf;case 5124:case 35670:return Zf;case 35667:case 35671:return $f;case 35668:case 35672:return Jf;case 35669:case 35673:return Qf;case 5125:return ed;case 36294:return td$1;case 36295:return nd;case 36296:return id;case 35678:case 36198:case 36298:case 36306:case 35682:return rd;case 35679:case 36299:case 36307:return sd;case 35680:case 36300:case 36308:case 36293:return ad;case 36289:case 36303:case 36311:case 36292:return od}}class cd{constructor(e,t,a){this.id=e,this.addr=a,this.cache=[],this.type=t.type,this.setValue=Vf(t.type)}}class ud{constructor(e,t,a){this.id=e,this.addr=a,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ld(t.type)}}class hd{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,a){const o=this.seq;for(let c=0,d=o.length;c!==d;++c){const p=o[c];p.setValue(e,t[p.id],a)}}}const Yr=/(\w+)(\])?(\[|\.)?/g;function Da(r,e){r.seq.push(e),r.map[e.id]=e}function fd(r,e,t){const a=r.name,o=a.length;for(Yr.lastIndex=0;;){const c=Yr.exec(a),d=Yr.lastIndex;let p=c[1];const _=c[2]==="]",S=c[3];if(_&&(p=p|0),S===void 0||S==="["&&d+2===o){Da(t,S===void 0?new cd(p,r,e):new ud(p,r,e));break}else{let A=t.map[p];A===void 0&&(A=new hd(p),Da(t,A)),t=A}}}class Ji{constructor(e,t){this.seq=[],this.map={};const a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<a;++o){const c=e.getActiveUniform(t,o),d=e.getUniformLocation(t,c.name);fd(c,d,this)}}setValue(e,t,a,o){const c=this.map[t];c!==void 0&&c.setValue(e,a,o)}setOptional(e,t,a){const o=t[a];o!==void 0&&this.setValue(e,a,o)}static upload(e,t,a,o){for(let c=0,d=t.length;c!==d;++c){const p=t[c],_=a[p.id];_.needsUpdate!==!1&&p.setValue(e,_.value,o)}}static seqWithValue(e,t){const a=[];for(let o=0,c=e.length;o!==c;++o){const d=e[o];d.id in t&&a.push(d)}return a}}function Ua(r,e,t){const a=r.createShader(e);return r.shaderSource(a,t),r.compileShader(a),a}const dd=37297;let pd=0;function md(r,e){const t=r.split(`
`),a=[],o=Math.max(e-6,0),c=Math.min(e+6,t.length);for(let d=o;d<c;d++){const p=d+1;a.push(`${p===e?">":" "} ${p}: ${t[d]}`)}return a.join(`
`)}function _d(r){const e=je.getPrimaries(je.workingColorSpace),t=je.getPrimaries(r);let a;switch(e===t?a="":e===nr&&t===tr?a="LinearDisplayP3ToLinearSRGB":e===tr&&t===nr&&(a="LinearSRGBToLinearDisplayP3"),r){case dn:case cr:return[a,"LinearTransferOETF"];case Bt:case cs:return[a,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[a,"LinearTransferOETF"]}}function Ia(r,e,t){const a=r.getShaderParameter(e,r.COMPILE_STATUS),o=r.getShaderInfoLog(e).trim();if(a&&o==="")return"";const c=/ERROR: 0:(\d+)/.exec(o);if(c){const d=parseInt(c[1]);return t.toUpperCase()+`

`+o+`

`+md(r.getShaderSource(e),d)}else return o}function gd(r,e){const t=_d(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function vd(r,e){let t;switch(e){case cl:t="Linear";break;case ul:t="Reinhard";break;case hl:t="OptimizedCineon";break;case fl:t="ACESFilmic";break;case pl:t="AgX";break;case ml:t="Neutral";break;case dl:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function xd(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.alphaToCoverage||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Jn).join(`
`)}function Md(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Jn).join(`
`)}function Sd(r){const e=[];for(const t in r){const a=r[t];a!==!1&&e.push("#define "+t+" "+a)}return e.join(`
`)}function Ed(r,e){const t={},a=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let o=0;o<a;o++){const c=r.getActiveAttrib(e,o),d=c.name;let p=1;c.type===r.FLOAT_MAT2&&(p=2),c.type===r.FLOAT_MAT3&&(p=3),c.type===r.FLOAT_MAT4&&(p=4),t[d]={type:c.type,location:r.getAttribLocation(e,d),locationSize:p}}return t}function Jn(r){return r!==""}function Na(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Fa(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const yd=/^[ \t]*#include +<([\w\d./]+)>/gm;function as(r){return r.replace(yd,bd)}const Td=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function bd(r,e){let t=ze[e];if(t===void 0){const a=Td.get(e);if(a!==void 0)t=ze[a],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,a);else throw new Error("Can not resolve #include <"+e+">")}return as(t)}const Ad=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Oa(r){return r.replace(Ad,wd)}function wd(r,e,t,a){let o="";for(let c=parseInt(e);c<parseInt(t);c++)o+=a.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return o}function Ba(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	`;return r.isWebGL2&&(e+=`precision ${r.precision} sampler3D;
		precision ${r.precision} sampler2DArray;
		precision ${r.precision} sampler2DShadow;
		precision ${r.precision} samplerCubeShadow;
		precision ${r.precision} sampler2DArrayShadow;
		precision ${r.precision} isampler2D;
		precision ${r.precision} isampler3D;
		precision ${r.precision} isamplerCube;
		precision ${r.precision} isampler2DArray;
		precision ${r.precision} usampler2D;
		precision ${r.precision} usampler3D;
		precision ${r.precision} usamplerCube;
		precision ${r.precision} usampler2DArray;
		`),r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Rd(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Qa?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Oo?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===jt&&(e="SHADOWMAP_TYPE_VSM"),e}function Cd(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case ii:case ri:e="ENVMAP_TYPE_CUBE";break;case lr:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Pd(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case ri:e="ENVMAP_MODE_REFRACTION";break}return e}function Ld(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case eo:e="ENVMAP_BLENDING_MULTIPLY";break;case ol:e="ENVMAP_BLENDING_MIX";break;case ll:e="ENVMAP_BLENDING_ADD";break}return e}function Dd(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,a=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:a,maxMip:t}}function Ud(r,e,t,a){const o=r.getContext(),c=t.defines;let d=t.vertexShader,p=t.fragmentShader;const _=Rd(t),S=Cd(t),A=Pd(t),C=Ld(t),j=Dd(t),V=t.isWebGL2?"":xd(t),J=Md(t),re=Sd(c),ie=o.createProgram();let K,Ne,G=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(K=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,re].filter(Jn).join(`
`),K.length>0&&(K+=`
`),Ne=[V,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,re].filter(Jn).join(`
`),Ne.length>0&&(Ne+=`
`)):(K=[Ba(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,re,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+A:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+_:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Jn).join(`
`),Ne=[V,Ba(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,re,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+S:"",t.envMap?"#define "+A:"",t.envMap?"#define "+C:"",j?"#define CUBEUV_TEXEL_WIDTH "+j.texelWidth:"",j?"#define CUBEUV_TEXEL_HEIGHT "+j.texelHeight:"",j?"#define CUBEUV_MAX_MIP "+j.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+_:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==cn?"#define TONE_MAPPING":"",t.toneMapping!==cn?ze.tonemapping_pars_fragment:"",t.toneMapping!==cn?vd("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ze.colorspace_pars_fragment,gd("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Jn).join(`
`)),d=as(d),d=Na(d,t),d=Fa(d,t),p=as(p),p=Na(p,t),p=Fa(p,t),d=Oa(d),p=Oa(p),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(G=`#version 300 es
`,K=[J,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+K,Ne=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===ea?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ea?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ne);const se=G+K+d,He=G+Ne+p,Fe=Ua(o,o.VERTEX_SHADER,se),Xe=Ua(o,o.FRAGMENT_SHADER,He);o.attachShader(ie,Fe),o.attachShader(ie,Xe),t.index0AttributeName!==void 0?o.bindAttribLocation(ie,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(ie,0,"position"),o.linkProgram(ie);function be(bp){if(r.debug.checkShaderErrors){const Sp=o.getProgramInfoLog(ie).trim(),_r=o.getShaderInfoLog(Fe).trim(),xs=o.getShaderInfoLog(Xe).trim();let ne=!0,zl=!0;if(o.getProgramParameter(ie,o.LINK_STATUS)===!1)if(ne=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(o,ie,Fe,Xe);else{const Hl=Ia(o,Fe,"vertex"),pr=Ia(o,Xe,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(ie,o.VALIDATE_STATUS)+`

Material Name: `+bp.name+`
Material Type: `+bp.type+`

Program Info Log: `+Sp+`
`+Hl+`
`+pr)}else Sp!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Sp):(_r===""||xs==="")&&(zl=!1);zl&&(bp.diagnostics={runnable:ne,programLog:Sp,vertexShader:{log:_r,prefix:K},fragmentShader:{log:xs,prefix:Ne}})}o.deleteShader(Fe),o.deleteShader(Xe),ta=new Ji(o,ie),pn=Ed(o,ie)}let ta;this.getUniforms=function(){return ta===void 0&&be(this),ta};let pn;this.getAttributes=function(){return pn===void 0&&be(this),pn};let mr=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return mr===!1&&(mr=o.getProgramParameter(ie,dd)),mr},this.destroy=function(){a.releaseStatesOfProgram(this),o.deleteProgram(ie),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=pd++,this.cacheKey=e,this.usedTimes=1,this.program=ie,this.vertexShader=Fe,this.fragmentShader=Xe,this}let Id=0;class Nd{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,a=e.fragmentShader,o=this._getShaderStage(t),c=this._getShaderStage(a),d=this._getShaderCacheForMaterial(e);return d.has(o)===!1&&(d.add(o),o.usedTimes++),d.has(c)===!1&&(d.add(c),c.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const a of t)a.usedTimes--,a.usedTimes===0&&this.shaderCache.delete(a.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let a=t.get(e);return a===void 0&&(a=new Set,t.set(e,a)),a}_getShaderStage(e){const t=this.shaderCache;let a=t.get(e);return a===void 0&&(a=new Fd(e),t.set(e,a)),a}}class Fd{constructor(e){this.id=Id++,this.code=e,this.usedTimes=0}}function Od(r,e,t,a,o,c,d){const p=new mo,_=new Nd,S=new Set,A=[],C=o.isWebGL2,j=o.logarithmicDepthBuffer,V=o.vertexTextures;let J=o.precision;const re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ie(pn){return S.add(pn),pn===0?"uv":`uv${pn}`}function K(pn,mr,bp,Sp,_r){const xs=Sp.fog,ne=_r.geometry,zl=pn.isMeshStandardMaterial?Sp.environment:null,Hl=(pn.isMeshStandardMaterial?t:e).get(pn.envMap||zl),pr=Hl&&Hl.mapping===lr?Hl.image.height:null,Hp=re[pn.type];pn.precision!==null&&(J=o.getMaxPrecision(pn.precision),J!==pn.precision&&console.warn("THREE.WebGLProgram.getParameters:",pn.precision,"not supported, using",J,"instead."));const Gl=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,Ip=Gl!==void 0?Gl.length:0;let qp=0;ne.morphAttributes.position!==void 0&&(qp=1),ne.morphAttributes.normal!==void 0&&(qp=2),ne.morphAttributes.color!==void 0&&(qp=3);let ci,Ep,o0,w0;if(Hp){const gg=zt[Hp];ci=gg.vertexShader,Ep=gg.fragmentShader}else ci=pn.vertexShader,Ep=pn.fragmentShader,_.update(pn),o0=_.getVertexShaderID(pn),w0=_.getFragmentShaderID(pn);const a0=r.getRenderTarget(),P0=_r.isInstancedMesh===!0,am=_r.isBatchedMesh===!0,sm=!!pn.map,C0=!!pn.matcap,Fm=!!Hl,Zm=!!pn.aoMap,p1=!!pn.lightMap,A1=!!pn.bumpMap,T1=!!pn.normalMap,Tm=!!pn.displacementMap,x1=!!pn.emissiveMap,S1=!!pn.metalnessMap,p0=!!pn.roughnessMap,zp=pn.anisotropy>0,om=pn.clearcoat>0,bm=pn.iridescence>0,i1=pn.sheen>0,r1=pn.transmission>0,Gp=zp&&!!pn.anisotropyMap,i0=om&&!!pn.clearcoatMap,l0=om&&!!pn.clearcoatNormalMap,im=om&&!!pn.clearcoatRoughnessMap,dm=bm&&!!pn.iridescenceMap,pm=bm&&!!pn.iridescenceThicknessMap,Dm=i1&&!!pn.sheenColorMap,Gm=i1&&!!pn.sheenRoughnessMap,qm=!!pn.specularMap,vm=!!pn.specularColorMap,r0=!!pn.specularIntensityMap,e1=r1&&!!pn.transmissionMap,_1=r1&&!!pn.thicknessMap,j1=!!pn.gradientMap,q0=!!pn.alphaMap,d1=pn.alphaTest>0,tm=!!pn.alphaHash,o1=!!pn.extensions;let jm=cn;pn.toneMapped&&(a0===null||a0.isXRRenderTarget===!0)&&(jm=r.toneMapping);const l1={isWebGL2:C,shaderID:Hp,shaderType:pn.type,shaderName:pn.name,vertexShader:ci,fragmentShader:Ep,defines:pn.defines,customVertexShaderID:o0,customFragmentShaderID:w0,isRawShaderMaterial:pn.isRawShaderMaterial===!0,glslVersion:pn.glslVersion,precision:J,batching:am,instancing:P0,instancingColor:P0&&_r.instanceColor!==null,instancingMorph:P0&&_r.morphTexture!==null,supportsVertexTextures:V,outputColorSpace:a0===null?r.outputColorSpace:a0.isXRRenderTarget===!0?a0.texture.colorSpace:dn,alphaToCoverage:!!pn.alphaToCoverage,map:sm,matcap:C0,envMap:Fm,envMapMode:Fm&&Hl.mapping,envMapCubeUVHeight:pr,aoMap:Zm,lightMap:p1,bumpMap:A1,normalMap:T1,displacementMap:V&&Tm,emissiveMap:x1,normalMapObjectSpace:T1&&pn.normalMapType===wl,normalMapTangentSpace:T1&&pn.normalMapType===Al,metalnessMap:S1,roughnessMap:p0,anisotropy:zp,anisotropyMap:Gp,clearcoat:om,clearcoatMap:i0,clearcoatNormalMap:l0,clearcoatRoughnessMap:im,iridescence:bm,iridescenceMap:dm,iridescenceThicknessMap:pm,sheen:i1,sheenColorMap:Dm,sheenRoughnessMap:Gm,specularMap:qm,specularColorMap:vm,specularIntensityMap:r0,transmission:r1,transmissionMap:e1,thicknessMap:_1,gradientMap:j1,opaque:pn.transparent===!1&&pn.blending===Qn&&pn.alphaToCoverage===!1,alphaMap:q0,alphaTest:d1,alphaHash:tm,combine:pn.combine,mapUv:sm&&ie(pn.map.channel),aoMapUv:Zm&&ie(pn.aoMap.channel),lightMapUv:p1&&ie(pn.lightMap.channel),bumpMapUv:A1&&ie(pn.bumpMap.channel),normalMapUv:T1&&ie(pn.normalMap.channel),displacementMapUv:Tm&&ie(pn.displacementMap.channel),emissiveMapUv:x1&&ie(pn.emissiveMap.channel),metalnessMapUv:S1&&ie(pn.metalnessMap.channel),roughnessMapUv:p0&&ie(pn.roughnessMap.channel),anisotropyMapUv:Gp&&ie(pn.anisotropyMap.channel),clearcoatMapUv:i0&&ie(pn.clearcoatMap.channel),clearcoatNormalMapUv:l0&&ie(pn.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:im&&ie(pn.clearcoatRoughnessMap.channel),iridescenceMapUv:dm&&ie(pn.iridescenceMap.channel),iridescenceThicknessMapUv:pm&&ie(pn.iridescenceThicknessMap.channel),sheenColorMapUv:Dm&&ie(pn.sheenColorMap.channel),sheenRoughnessMapUv:Gm&&ie(pn.sheenRoughnessMap.channel),specularMapUv:qm&&ie(pn.specularMap.channel),specularColorMapUv:vm&&ie(pn.specularColorMap.channel),specularIntensityMapUv:r0&&ie(pn.specularIntensityMap.channel),transmissionMapUv:e1&&ie(pn.transmissionMap.channel),thicknessMapUv:_1&&ie(pn.thicknessMap.channel),alphaMapUv:q0&&ie(pn.alphaMap.channel),vertexTangents:!!ne.attributes.tangent&&(T1||zp),vertexColors:pn.vertexColors,vertexAlphas:pn.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,pointsUvs:_r.isPoints===!0&&!!ne.attributes.uv&&(sm||q0),fog:!!xs,useFog:pn.fog===!0,fogExp2:!!xs&&xs.isFogExp2,flatShading:pn.flatShading===!0,sizeAttenuation:pn.sizeAttenuation===!0,logarithmicDepthBuffer:j,skinning:_r.isSkinnedMesh===!0,morphTargets:ne.morphAttributes.position!==void 0,morphNormals:ne.morphAttributes.normal!==void 0,morphColors:ne.morphAttributes.color!==void 0,morphTargetsCount:Ip,morphTextureStride:qp,numDirLights:mr.directional.length,numPointLights:mr.point.length,numSpotLights:mr.spot.length,numSpotLightMaps:mr.spotLightMap.length,numRectAreaLights:mr.rectArea.length,numHemiLights:mr.hemi.length,numDirLightShadows:mr.directionalShadowMap.length,numPointLightShadows:mr.pointShadowMap.length,numSpotLightShadows:mr.spotShadowMap.length,numSpotLightShadowsWithMaps:mr.numSpotLightShadowsWithMaps,numLightProbes:mr.numLightProbes,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:pn.dithering,shadowMapEnabled:r.shadowMap.enabled&&bp.length>0,shadowMapType:r.shadowMap.type,toneMapping:jm,useLegacyLights:r._useLegacyLights,decodeVideoTexture:sm&&pn.map.isVideoTexture===!0&&je.getTransfer(pn.map.colorSpace)===$e,premultipliedAlpha:pn.premultipliedAlpha,doubleSided:pn.side===Gt,flipSided:pn.side===Et,useDepthPacking:pn.depthPacking>=0,depthPacking:pn.depthPacking||0,index0AttributeName:pn.index0AttributeName,extensionDerivatives:o1&&pn.extensions.derivatives===!0,extensionFragDepth:o1&&pn.extensions.fragDepth===!0,extensionDrawBuffers:o1&&pn.extensions.drawBuffers===!0,extensionShaderTextureLOD:o1&&pn.extensions.shaderTextureLOD===!0,extensionClipCullDistance:o1&&pn.extensions.clipCullDistance===!0&&a.has("WEBGL_clip_cull_distance"),extensionMultiDraw:o1&&pn.extensions.multiDraw===!0&&a.has("WEBGL_multi_draw"),rendererExtensionFragDepth:C||a.has("EXT_frag_depth"),rendererExtensionDrawBuffers:C||a.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:C||a.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:a.has("KHR_parallel_shader_compile"),customProgramCacheKey:pn.customProgramCacheKey()};return l1.vertexUv1s=S.has(1),l1.vertexUv2s=S.has(2),l1.vertexUv3s=S.has(3),S.clear(),l1}function Ne(pn){const mr=[];if(pn.shaderID?mr.push(pn.shaderID):(mr.push(pn.customVertexShaderID),mr.push(pn.customFragmentShaderID)),pn.defines!==void 0)for(const bp in pn.defines)mr.push(bp),mr.push(pn.defines[bp]);return pn.isRawShaderMaterial===!1&&(G(mr,pn),se(mr,pn),mr.push(r.outputColorSpace)),mr.push(pn.customProgramCacheKey),mr.join()}function G(pn,mr){pn.push(mr.precision),pn.push(mr.outputColorSpace),pn.push(mr.envMapMode),pn.push(mr.envMapCubeUVHeight),pn.push(mr.mapUv),pn.push(mr.alphaMapUv),pn.push(mr.lightMapUv),pn.push(mr.aoMapUv),pn.push(mr.bumpMapUv),pn.push(mr.normalMapUv),pn.push(mr.displacementMapUv),pn.push(mr.emissiveMapUv),pn.push(mr.metalnessMapUv),pn.push(mr.roughnessMapUv),pn.push(mr.anisotropyMapUv),pn.push(mr.clearcoatMapUv),pn.push(mr.clearcoatNormalMapUv),pn.push(mr.clearcoatRoughnessMapUv),pn.push(mr.iridescenceMapUv),pn.push(mr.iridescenceThicknessMapUv),pn.push(mr.sheenColorMapUv),pn.push(mr.sheenRoughnessMapUv),pn.push(mr.specularMapUv),pn.push(mr.specularColorMapUv),pn.push(mr.specularIntensityMapUv),pn.push(mr.transmissionMapUv),pn.push(mr.thicknessMapUv),pn.push(mr.combine),pn.push(mr.fogExp2),pn.push(mr.sizeAttenuation),pn.push(mr.morphTargetsCount),pn.push(mr.morphAttributeCount),pn.push(mr.numDirLights),pn.push(mr.numPointLights),pn.push(mr.numSpotLights),pn.push(mr.numSpotLightMaps),pn.push(mr.numHemiLights),pn.push(mr.numRectAreaLights),pn.push(mr.numDirLightShadows),pn.push(mr.numPointLightShadows),pn.push(mr.numSpotLightShadows),pn.push(mr.numSpotLightShadowsWithMaps),pn.push(mr.numLightProbes),pn.push(mr.shadowMapType),pn.push(mr.toneMapping),pn.push(mr.numClippingPlanes),pn.push(mr.numClipIntersection),pn.push(mr.depthPacking)}function se(pn,mr){p.disableAll(),mr.isWebGL2&&p.enable(0),mr.supportsVertexTextures&&p.enable(1),mr.instancing&&p.enable(2),mr.instancingColor&&p.enable(3),mr.instancingMorph&&p.enable(4),mr.matcap&&p.enable(5),mr.envMap&&p.enable(6),mr.normalMapObjectSpace&&p.enable(7),mr.normalMapTangentSpace&&p.enable(8),mr.clearcoat&&p.enable(9),mr.iridescence&&p.enable(10),mr.alphaTest&&p.enable(11),mr.vertexColors&&p.enable(12),mr.vertexAlphas&&p.enable(13),mr.vertexUv1s&&p.enable(14),mr.vertexUv2s&&p.enable(15),mr.vertexUv3s&&p.enable(16),mr.vertexTangents&&p.enable(17),mr.anisotropy&&p.enable(18),mr.alphaHash&&p.enable(19),mr.batching&&p.enable(20),pn.push(p.mask),p.disableAll(),mr.fog&&p.enable(0),mr.useFog&&p.enable(1),mr.flatShading&&p.enable(2),mr.logarithmicDepthBuffer&&p.enable(3),mr.skinning&&p.enable(4),mr.morphTargets&&p.enable(5),mr.morphNormals&&p.enable(6),mr.morphColors&&p.enable(7),mr.premultipliedAlpha&&p.enable(8),mr.shadowMapEnabled&&p.enable(9),mr.useLegacyLights&&p.enable(10),mr.doubleSided&&p.enable(11),mr.flipSided&&p.enable(12),mr.useDepthPacking&&p.enable(13),mr.dithering&&p.enable(14),mr.transmission&&p.enable(15),mr.sheen&&p.enable(16),mr.opaque&&p.enable(17),mr.pointsUvs&&p.enable(18),mr.decodeVideoTexture&&p.enable(19),mr.alphaToCoverage&&p.enable(20),pn.push(p.mask)}function He(pn){const mr=re[pn.type];let bp;if(mr){const Sp=zt[mr];bp=mc.clone(Sp.uniforms)}else bp=pn.uniforms;return bp}function Fe(pn,mr){let bp;for(let Sp=0,_r=A.length;Sp<_r;Sp++){const xs=A[Sp];if(xs.cacheKey===mr){bp=xs,++bp.usedTimes;break}}return bp===void 0&&(bp=new Ud(r,mr,pn,c),A.push(bp)),bp}function Xe(pn){if(--pn.usedTimes===0){const mr=A.indexOf(pn);A[mr]=A[A.length-1],A.pop(),pn.destroy()}}function be(pn){_.remove(pn)}function ta(){_.dispose()}return{getParameters:K,getProgramCacheKey:Ne,getUniforms:He,acquireProgram:Fe,releaseProgram:Xe,releaseShaderCache:be,programs:A,dispose:ta}}function Bd(){let r=new WeakMap;function e(c){let d=r.get(c);return d===void 0&&(d={},r.set(c,d)),d}function t(c){r.delete(c)}function a(c,d,p){r.get(c)[d]=p}function o(){r=new WeakMap}return{get:e,remove:t,update:a,dispose:o}}function zd(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function za(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Ga(){const r=[];let e=0;const t=[],a=[],o=[];function c(){e=0,t.length=0,a.length=0,o.length=0}function d(C,j,V,J,re,ie){let K=r[e];return K===void 0?(K={id:C.id,object:C,geometry:j,material:V,groupOrder:J,renderOrder:C.renderOrder,z:re,group:ie},r[e]=K):(K.id=C.id,K.object=C,K.geometry=j,K.material=V,K.groupOrder=J,K.renderOrder=C.renderOrder,K.z=re,K.group=ie),e++,K}function p(C,j,V,J,re,ie){const K=d(C,j,V,J,re,ie);V.transmission>0?a.push(K):V.transparent===!0?o.push(K):t.push(K)}function _(C,j,V,J,re,ie){const K=d(C,j,V,J,re,ie);V.transmission>0?a.unshift(K):V.transparent===!0?o.unshift(K):t.unshift(K)}function S(C,j){t.length>1&&t.sort(C||zd),a.length>1&&a.sort(j||za),o.length>1&&o.sort(j||za)}function A(){for(let C=e,j=r.length;C<j;C++){const V=r[C];if(V.id===null)break;V.id=null,V.object=null,V.geometry=null,V.material=null,V.group=null}}return{opaque:t,transmissive:a,transparent:o,init:c,push:p,unshift:_,finish:A,sort:S}}function Gd(){let r=new WeakMap;function e(a,o){const c=r.get(a);let d;return c===void 0?(d=new Ga,r.set(a,[d])):o>=c.length?(d=new Ga,c.push(d)):d=c[o],d}function t(){r=new WeakMap}return{get:e,dispose:t}}function Hd(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new qe};break;case"SpotLight":t={position:new U,direction:new U,color:new qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new qe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new qe,groundColor:new qe};break;case"RectAreaLight":t={color:new qe,position:new U,halfWidth:new U,halfHeight:new U};break}return r[e.id]=t,t}}}function Vd(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let kd=0;function Wd(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Xd(r,e){const t=new Hd,a=Vd(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let A=0;A<9;A++)o.probe.push(new U);const c=new U,d=new st,p=new st;function _(A,C){let j=0,V=0,J=0;for(let bp=0;bp<9;bp++)o.probe[bp].set(0,0,0);let re=0,ie=0,K=0,Ne=0,G=0,se=0,He=0,Fe=0,Xe=0,be=0,ta=0;A.sort(Wd);const pn=C===!0?Math.PI:1;for(let bp=0,Sp=A.length;bp<Sp;bp++){const _r=A[bp],xs=_r.color,ne=_r.intensity,zl=_r.distance,Hl=_r.shadow&&_r.shadow.map?_r.shadow.map.texture:null;if(_r.isAmbientLight)j+=xs.r*ne*pn,V+=xs.g*ne*pn,J+=xs.b*ne*pn;else if(_r.isLightProbe){for(let pr=0;pr<9;pr++)o.probe[pr].addScaledVector(_r.sh.coefficients[pr],ne);ta++}else if(_r.isDirectionalLight){const pr=t.get(_r);if(pr.color.copy(_r.color).multiplyScalar(_r.intensity*pn),_r.castShadow){const Hp=_r.shadow,Gl=a.get(_r);Gl.shadowBias=Hp.bias,Gl.shadowNormalBias=Hp.normalBias,Gl.shadowRadius=Hp.radius,Gl.shadowMapSize=Hp.mapSize,o.directionalShadow[re]=Gl,o.directionalShadowMap[re]=Hl,o.directionalShadowMatrix[re]=_r.shadow.matrix,se++}o.directional[re]=pr,re++}else if(_r.isSpotLight){const pr=t.get(_r);pr.position.setFromMatrixPosition(_r.matrixWorld),pr.color.copy(xs).multiplyScalar(ne*pn),pr.distance=zl,pr.coneCos=Math.cos(_r.angle),pr.penumbraCos=Math.cos(_r.angle*(1-_r.penumbra)),pr.decay=_r.decay,o.spot[K]=pr;const Hp=_r.shadow;if(_r.map&&(o.spotLightMap[Xe]=_r.map,Xe++,Hp.updateMatrices(_r),_r.castShadow&&be++),o.spotLightMatrix[K]=Hp.matrix,_r.castShadow){const Gl=a.get(_r);Gl.shadowBias=Hp.bias,Gl.shadowNormalBias=Hp.normalBias,Gl.shadowRadius=Hp.radius,Gl.shadowMapSize=Hp.mapSize,o.spotShadow[K]=Gl,o.spotShadowMap[K]=Hl,Fe++}K++}else if(_r.isRectAreaLight){const pr=t.get(_r);pr.color.copy(xs).multiplyScalar(ne),pr.halfWidth.set(_r.width*.5,0,0),pr.halfHeight.set(0,_r.height*.5,0),o.rectArea[Ne]=pr,Ne++}else if(_r.isPointLight){const pr=t.get(_r);if(pr.color.copy(_r.color).multiplyScalar(_r.intensity*pn),pr.distance=_r.distance,pr.decay=_r.decay,_r.castShadow){const Hp=_r.shadow,Gl=a.get(_r);Gl.shadowBias=Hp.bias,Gl.shadowNormalBias=Hp.normalBias,Gl.shadowRadius=Hp.radius,Gl.shadowMapSize=Hp.mapSize,Gl.shadowCameraNear=Hp.camera.near,Gl.shadowCameraFar=Hp.camera.far,o.pointShadow[ie]=Gl,o.pointShadowMap[ie]=Hl,o.pointShadowMatrix[ie]=_r.shadow.matrix,He++}o.point[ie]=pr,ie++}else if(_r.isHemisphereLight){const pr=t.get(_r);pr.skyColor.copy(_r.color).multiplyScalar(ne*pn),pr.groundColor.copy(_r.groundColor).multiplyScalar(ne*pn),o.hemi[G]=pr,G++}}Ne>0&&(e.isWebGL2?r.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=oe.LTC_FLOAT_1,o.rectAreaLTC2=oe.LTC_FLOAT_2):(o.rectAreaLTC1=oe.LTC_HALF_1,o.rectAreaLTC2=oe.LTC_HALF_2):r.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=oe.LTC_FLOAT_1,o.rectAreaLTC2=oe.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=oe.LTC_HALF_1,o.rectAreaLTC2=oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=j,o.ambient[1]=V,o.ambient[2]=J;const mr=o.hash;(mr.directionalLength!==re||mr.pointLength!==ie||mr.spotLength!==K||mr.rectAreaLength!==Ne||mr.hemiLength!==G||mr.numDirectionalShadows!==se||mr.numPointShadows!==He||mr.numSpotShadows!==Fe||mr.numSpotMaps!==Xe||mr.numLightProbes!==ta)&&(o.directional.length=re,o.spot.length=K,o.rectArea.length=Ne,o.point.length=ie,o.hemi.length=G,o.directionalShadow.length=se,o.directionalShadowMap.length=se,o.pointShadow.length=He,o.pointShadowMap.length=He,o.spotShadow.length=Fe,o.spotShadowMap.length=Fe,o.directionalShadowMatrix.length=se,o.pointShadowMatrix.length=He,o.spotLightMatrix.length=Fe+Xe-be,o.spotLightMap.length=Xe,o.numSpotLightShadowsWithMaps=be,o.numLightProbes=ta,mr.directionalLength=re,mr.pointLength=ie,mr.spotLength=K,mr.rectAreaLength=Ne,mr.hemiLength=G,mr.numDirectionalShadows=se,mr.numPointShadows=He,mr.numSpotShadows=Fe,mr.numSpotMaps=Xe,mr.numLightProbes=ta,o.version=kd++)}function S(A,C){let j=0,V=0,J=0,re=0,ie=0;const K=C.matrixWorldInverse;for(let Ne=0,G=A.length;Ne<G;Ne++){const se=A[Ne];if(se.isDirectionalLight){const He=o.directional[j];He.direction.setFromMatrixPosition(se.matrixWorld),c.setFromMatrixPosition(se.target.matrixWorld),He.direction.sub(c),He.direction.transformDirection(K),j++}else if(se.isSpotLight){const He=o.spot[J];He.position.setFromMatrixPosition(se.matrixWorld),He.position.applyMatrix4(K),He.direction.setFromMatrixPosition(se.matrixWorld),c.setFromMatrixPosition(se.target.matrixWorld),He.direction.sub(c),He.direction.transformDirection(K),J++}else if(se.isRectAreaLight){const He=o.rectArea[re];He.position.setFromMatrixPosition(se.matrixWorld),He.position.applyMatrix4(K),p.identity(),d.copy(se.matrixWorld),d.premultiply(K),p.extractRotation(d),He.halfWidth.set(se.width*.5,0,0),He.halfHeight.set(0,se.height*.5,0),He.halfWidth.applyMatrix4(p),He.halfHeight.applyMatrix4(p),re++}else if(se.isPointLight){const He=o.point[V];He.position.setFromMatrixPosition(se.matrixWorld),He.position.applyMatrix4(K),V++}else if(se.isHemisphereLight){const He=o.hemi[ie];He.direction.setFromMatrixPosition(se.matrixWorld),He.direction.transformDirection(K),ie++}}}return{setup:_,setupView:S,state:o}}function Ha(r,e){const t=new Xd(r,e),a=[],o=[];function c(){a.length=0,o.length=0}function d(A){a.push(A)}function p(A){o.push(A)}function _(A){t.setup(a,A)}function S(A){t.setupView(a,A)}return{init:c,state:{lightsArray:a,shadowsArray:o,lights:t},setupLights:_,setupLightsView:S,pushLight:d,pushShadow:p}}function Yd(r,e){let t=new WeakMap;function a(c,d=0){const p=t.get(c);let _;return p===void 0?(_=new Ha(r,e),t.set(c,[_])):d>=p.length?(_=new Ha(r,e),p.push(_)):_=p[d],_}function o(){t=new WeakMap}return{get:a,dispose:o}}class qd extends xi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Tl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class jd extends xi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Kd=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Zd=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function $d(r,e,t){let a=new Eo;const o=new Ie,c=new Ie,d=new ht,p=new qd({depthPacking:bl}),_=new jd,S={},A=t.maxTextureSize,C={[hn]:Et,[Et]:hn,[Gt]:Gt},j=new fn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:Kd,fragmentShader:Zd}),V=j.clone();V.defines.HORIZONTAL_PASS=1;const J=new Tt;J.setAttribute("position",new Ht(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const re=new Rt(J,j),ie=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qa;let K=this.type;this.render=function(Fe,Xe,be){if(ie.enabled===!1||ie.autoUpdate===!1&&ie.needsUpdate===!1||Fe.length===0)return;const ta=r.getRenderTarget(),pn=r.getActiveCubeFace(),mr=r.getActiveMipmapLevel(),bp=r.state;bp.setBlending(ln),bp.buffers.color.setClear(1,1,1,1),bp.buffers.depth.setTest(!0),bp.setScissorTest(!1);const Sp=K!==jt&&this.type===jt,_r=K===jt&&this.type!==jt;for(let xs=0,ne=Fe.length;xs<ne;xs++){const zl=Fe[xs],Hl=zl.shadow;if(Hl===void 0){console.warn("THREE.WebGLShadowMap:",zl,"has no shadow.");continue}if(Hl.autoUpdate===!1&&Hl.needsUpdate===!1)continue;o.copy(Hl.mapSize);const pr=Hl.getFrameExtents();if(o.multiply(pr),c.copy(Hl.mapSize),(o.x>A||o.y>A)&&(o.x>A&&(c.x=Math.floor(A/pr.x),o.x=c.x*pr.x,Hl.mapSize.x=c.x),o.y>A&&(c.y=Math.floor(A/pr.y),o.y=c.y*pr.y,Hl.mapSize.y=c.y)),Hl.map===null||Sp===!0||_r===!0){const Gl=this.type!==jt?{minFilter:xt,magFilter:xt}:{};Hl.map!==null&&Hl.map.dispose(),Hl.map=new Cn(o.x,o.y,Gl),Hl.map.texture.name=zl.name+".shadowMap",Hl.camera.updateProjectionMatrix()}r.setRenderTarget(Hl.map),r.clear();const Hp=Hl.getViewportCount();for(let Gl=0;Gl<Hp;Gl++){const Ip=Hl.getViewport(Gl);d.set(c.x*Ip.x,c.y*Ip.y,c.x*Ip.z,c.y*Ip.w),bp.viewport(d),Hl.updateMatrices(zl,Gl),a=Hl.getFrustum(),se(Xe,be,Hl.camera,zl,this.type)}Hl.isPointLightShadow!==!0&&this.type===jt&&Ne(Hl,be),Hl.needsUpdate=!1}K=this.type,ie.needsUpdate=!1,r.setRenderTarget(ta,pn,mr)};function Ne(Fe,Xe){const be=e.update(re);j.defines.VSM_SAMPLES!==Fe.blurSamples&&(j.defines.VSM_SAMPLES=Fe.blurSamples,V.defines.VSM_SAMPLES=Fe.blurSamples,j.needsUpdate=!0,V.needsUpdate=!0),Fe.mapPass===null&&(Fe.mapPass=new Cn(o.x,o.y)),j.uniforms.shadow_pass.value=Fe.map.texture,j.uniforms.resolution.value=Fe.mapSize,j.uniforms.radius.value=Fe.radius,r.setRenderTarget(Fe.mapPass),r.clear(),r.renderBufferDirect(Xe,null,be,j,re,null),V.uniforms.shadow_pass.value=Fe.mapPass.texture,V.uniforms.resolution.value=Fe.mapSize,V.uniforms.radius.value=Fe.radius,r.setRenderTarget(Fe.map),r.clear(),r.renderBufferDirect(Xe,null,be,V,re,null)}function G(Fe,Xe,be,ta){let pn=null;const mr=be.isPointLight===!0?Fe.customDistanceMaterial:Fe.customDepthMaterial;if(mr!==void 0)pn=mr;else if(pn=be.isPointLight===!0?_:p,r.localClippingEnabled&&Xe.clipShadows===!0&&Array.isArray(Xe.clippingPlanes)&&Xe.clippingPlanes.length!==0||Xe.displacementMap&&Xe.displacementScale!==0||Xe.alphaMap&&Xe.alphaTest>0||Xe.map&&Xe.alphaTest>0){const bp=pn.uuid,Sp=Xe.uuid;let _r=S[bp];_r===void 0&&(_r={},S[bp]=_r);let xs=_r[Sp];xs===void 0&&(xs=pn.clone(),_r[Sp]=xs,Xe.addEventListener("dispose",He)),pn=xs}if(pn.visible=Xe.visible,pn.wireframe=Xe.wireframe,ta===jt?pn.side=Xe.shadowSide!==null?Xe.shadowSide:Xe.side:pn.side=Xe.shadowSide!==null?Xe.shadowSide:C[Xe.side],pn.alphaMap=Xe.alphaMap,pn.alphaTest=Xe.alphaTest,pn.map=Xe.map,pn.clipShadows=Xe.clipShadows,pn.clippingPlanes=Xe.clippingPlanes,pn.clipIntersection=Xe.clipIntersection,pn.displacementMap=Xe.displacementMap,pn.displacementScale=Xe.displacementScale,pn.displacementBias=Xe.displacementBias,pn.wireframeLinewidth=Xe.wireframeLinewidth,pn.linewidth=Xe.linewidth,be.isPointLight===!0&&pn.isMeshDistanceMaterial===!0){const bp=r.properties.get(pn);bp.light=be}return pn}function se(Fe,Xe,be,ta,pn){if(Fe.visible===!1)return;if(Fe.layers.test(Xe.layers)&&(Fe.isMesh||Fe.isLine||Fe.isPoints)&&(Fe.castShadow||Fe.receiveShadow&&pn===jt)&&(!Fe.frustumCulled||a.intersectsObject(Fe))){Fe.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,Fe.matrixWorld);const bp=e.update(Fe),Sp=Fe.material;if(Array.isArray(Sp)){const _r=bp.groups;for(let xs=0,ne=_r.length;xs<ne;xs++){const zl=_r[xs],Hl=Sp[zl.materialIndex];if(Hl&&Hl.visible){const pr=G(Fe,Hl,ta,pn);Fe.onBeforeShadow(r,Fe,Xe,be,bp,pr,zl),r.renderBufferDirect(be,null,bp,pr,Fe,zl),Fe.onAfterShadow(r,Fe,Xe,be,bp,pr,zl)}}}else if(Sp.visible){const _r=G(Fe,Sp,ta,pn);Fe.onBeforeShadow(r,Fe,Xe,be,bp,_r,null),r.renderBufferDirect(be,null,bp,_r,Fe,null),Fe.onAfterShadow(r,Fe,Xe,be,bp,_r,null)}}const mr=Fe.children;for(let bp=0,Sp=mr.length;bp<Sp;bp++)se(mr[bp],Xe,be,ta,pn)}function He(Fe){Fe.target.removeEventListener("dispose",He);for(const Xe in S){const be=S[Xe],ta=Fe.target.uuid;ta in be&&(be[ta].dispose(),delete be[ta])}}}function Jd(r,e,t){const a=t.isWebGL2;function o(){let q0=!1;const d1=new ht;let tm=null;const o1=new ht(0,0,0,0);return{setMask:function(jm){tm!==jm&&!q0&&(r.colorMask(jm,jm,jm,jm),tm=jm)},setLocked:function(jm){q0=jm},setClear:function(jm,l1,gg,Jg,Dg){Dg===!0&&(jm*=Jg,l1*=Jg,gg*=Jg),d1.set(jm,l1,gg,Jg),o1.equals(d1)===!1&&(r.clearColor(jm,l1,gg,Jg),o1.copy(d1))},reset:function(){q0=!1,tm=null,o1.set(-1,0,0,0)}}}function c(){let q0=!1,d1=null,tm=null,o1=null;return{setTest:function(jm){jm?P0(r.DEPTH_TEST):am(r.DEPTH_TEST)},setMask:function(jm){d1!==jm&&!q0&&(r.depthMask(jm),d1=jm)},setFunc:function(jm){if(tm!==jm){switch(jm){case el:r.depthFunc(r.NEVER);break;case tl:r.depthFunc(r.ALWAYS);break;case nl:r.depthFunc(r.LESS);break;case Qi:r.depthFunc(r.LEQUAL);break;case il:r.depthFunc(r.EQUAL);break;case rl:r.depthFunc(r.GEQUAL);break;case sl:r.depthFunc(r.GREATER);break;case al:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}tm=jm}},setLocked:function(jm){q0=jm},setClear:function(jm){o1!==jm&&(r.clearDepth(jm),o1=jm)},reset:function(){q0=!1,d1=null,tm=null,o1=null}}}function d(){let q0=!1,d1=null,tm=null,o1=null,jm=null,l1=null,gg=null,Jg=null,Dg=null;return{setTest:function(Eg){q0||(Eg?P0(r.STENCIL_TEST):am(r.STENCIL_TEST))},setMask:function(Eg){d1!==Eg&&!q0&&(r.stencilMask(Eg),d1=Eg)},setFunc:function(Eg,ev,pv){(tm!==Eg||o1!==ev||jm!==pv)&&(r.stencilFunc(Eg,ev,pv),tm=Eg,o1=ev,jm=pv)},setOp:function(Eg,ev,pv){(l1!==Eg||gg!==ev||Jg!==pv)&&(r.stencilOp(Eg,ev,pv),l1=Eg,gg=ev,Jg=pv)},setLocked:function(Eg){q0=Eg},setClear:function(Eg){Dg!==Eg&&(r.clearStencil(Eg),Dg=Eg)},reset:function(){q0=!1,d1=null,tm=null,o1=null,jm=null,l1=null,gg=null,Jg=null,Dg=null}}}const p=new o,_=new c,S=new d,A=new WeakMap,C=new WeakMap;let j={},V={},J=new WeakMap,re=[],ie=null,K=!1,Ne=null,G=null,se=null,He=null,Fe=null,Xe=null,be=null,ta=new qe(0,0,0),pn=0,mr=!1,bp=null,Sp=null,_r=null,xs=null,ne=null;const zl=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Hl=!1,pr=0;const Hp=r.getParameter(r.VERSION);Hp.indexOf("WebGL")!==-1?(pr=parseFloat(/^WebGL (\d)/.exec(Hp)[1]),Hl=pr>=1):Hp.indexOf("OpenGL ES")!==-1&&(pr=parseFloat(/^OpenGL ES (\d)/.exec(Hp)[1]),Hl=pr>=2);let Gl=null,Ip={};const qp=r.getParameter(r.SCISSOR_BOX),ci=r.getParameter(r.VIEWPORT),Ep=new ht().fromArray(qp),o0=new ht().fromArray(ci);function w0(q0,d1,tm,o1){const jm=new Uint8Array(4),l1=r.createTexture();r.bindTexture(q0,l1),r.texParameteri(q0,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(q0,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let gg=0;gg<tm;gg++)a&&(q0===r.TEXTURE_3D||q0===r.TEXTURE_2D_ARRAY)?r.texImage3D(d1,0,r.RGBA,1,1,o1,0,r.RGBA,r.UNSIGNED_BYTE,jm):r.texImage2D(d1+gg,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,jm);return l1}const a0={};a0[r.TEXTURE_2D]=w0(r.TEXTURE_2D,r.TEXTURE_2D,1),a0[r.TEXTURE_CUBE_MAP]=w0(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),a&&(a0[r.TEXTURE_2D_ARRAY]=w0(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),a0[r.TEXTURE_3D]=w0(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),p.setClear(0,0,0,1),_.setClear(1),S.setClear(0),P0(r.DEPTH_TEST),_.setFunc(Qi),Tm(!1),x1(Ms),P0(r.CULL_FACE),A1(ln);function P0(q0){j[q0]!==!0&&(r.enable(q0),j[q0]=!0)}function am(q0){j[q0]!==!1&&(r.disable(q0),j[q0]=!1)}function sm(q0,d1){return V[q0]!==d1?(r.bindFramebuffer(q0,d1),V[q0]=d1,a&&(q0===r.DRAW_FRAMEBUFFER&&(V[r.FRAMEBUFFER]=d1),q0===r.FRAMEBUFFER&&(V[r.DRAW_FRAMEBUFFER]=d1)),!0):!1}function C0(q0,d1){let tm=re,o1=!1;if(q0){tm=J.get(d1),tm===void 0&&(tm=[],J.set(d1,tm));const jm=q0.textures;if(tm.length!==jm.length||tm[0]!==r.COLOR_ATTACHMENT0){for(let l1=0,gg=jm.length;l1<gg;l1++)tm[l1]=r.COLOR_ATTACHMENT0+l1;tm.length=jm.length,o1=!0}}else tm[0]!==r.BACK&&(tm[0]=r.BACK,o1=!0);if(o1)if(t.isWebGL2)r.drawBuffers(tm);else if(e.has("WEBGL_draw_buffers")===!0)e.get("WEBGL_draw_buffers").drawBuffersWEBGL(tm);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function Fm(q0){return ie!==q0?(r.useProgram(q0),ie=q0,!0):!1}const Zm={[Tn]:r.FUNC_ADD,[zo]:r.FUNC_SUBTRACT,[Go]:r.FUNC_REVERSE_SUBTRACT};if(a)Zm[Ts]=r.MIN,Zm[bs]=r.MAX;else{const q0=e.get("EXT_blend_minmax");q0!==null&&(Zm[Ts]=q0.MIN_EXT,Zm[bs]=q0.MAX_EXT)}const p1={[Ho]:r.ZERO,[Vo]:r.ONE,[ko]:r.SRC_COLOR,[Jr]:r.SRC_ALPHA,[Ko]:r.SRC_ALPHA_SATURATE,[qo]:r.DST_COLOR,[Xo]:r.DST_ALPHA,[Wo]:r.ONE_MINUS_SRC_COLOR,[Qr]:r.ONE_MINUS_SRC_ALPHA,[jo]:r.ONE_MINUS_DST_COLOR,[Yo]:r.ONE_MINUS_DST_ALPHA,[Zo]:r.CONSTANT_COLOR,[$o]:r.ONE_MINUS_CONSTANT_COLOR,[Jo]:r.CONSTANT_ALPHA,[Qo]:r.ONE_MINUS_CONSTANT_ALPHA};function A1(q0,d1,tm,o1,jm,l1,gg,Jg,Dg,Eg){if(q0===ln){K===!0&&(am(r.BLEND),K=!1);return}if(K===!1&&(P0(r.BLEND),K=!0),q0!==Bo){if(q0!==Ne||Eg!==mr){if((G!==Tn||Fe!==Tn)&&(r.blendEquation(r.FUNC_ADD),G=Tn,Fe=Tn),Eg)switch(q0){case Qn:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Ss:r.blendFunc(r.ONE,r.ONE);break;case Es:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case ys:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q0);break}else switch(q0){case Qn:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Ss:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case Es:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case ys:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q0);break}se=null,He=null,Xe=null,be=null,ta.set(0,0,0),pn=0,Ne=q0,mr=Eg}return}jm=jm||d1,l1=l1||tm,gg=gg||o1,(d1!==G||jm!==Fe)&&(r.blendEquationSeparate(Zm[d1],Zm[jm]),G=d1,Fe=jm),(tm!==se||o1!==He||l1!==Xe||gg!==be)&&(r.blendFuncSeparate(p1[tm],p1[o1],p1[l1],p1[gg]),se=tm,He=o1,Xe=l1,be=gg),(Jg.equals(ta)===!1||Dg!==pn)&&(r.blendColor(Jg.r,Jg.g,Jg.b,Dg),ta.copy(Jg),pn=Dg),Ne=q0,mr=!1}function T1(q0,d1){q0.side===Gt?am(r.CULL_FACE):P0(r.CULL_FACE);let tm=q0.side===Et;d1&&(tm=!tm),Tm(tm),q0.blending===Qn&&q0.transparent===!1?A1(ln):A1(q0.blending,q0.blendEquation,q0.blendSrc,q0.blendDst,q0.blendEquationAlpha,q0.blendSrcAlpha,q0.blendDstAlpha,q0.blendColor,q0.blendAlpha,q0.premultipliedAlpha),_.setFunc(q0.depthFunc),_.setTest(q0.depthTest),_.setMask(q0.depthWrite),p.setMask(q0.colorWrite);const o1=q0.stencilWrite;S.setTest(o1),o1&&(S.setMask(q0.stencilWriteMask),S.setFunc(q0.stencilFunc,q0.stencilRef,q0.stencilFuncMask),S.setOp(q0.stencilFail,q0.stencilZFail,q0.stencilZPass)),p0(q0.polygonOffset,q0.polygonOffsetFactor,q0.polygonOffsetUnits),q0.alphaToCoverage===!0?P0(r.SAMPLE_ALPHA_TO_COVERAGE):am(r.SAMPLE_ALPHA_TO_COVERAGE)}function Tm(q0){bp!==q0&&(q0?r.frontFace(r.CW):r.frontFace(r.CCW),bp=q0)}function x1(q0){q0!==No?(P0(r.CULL_FACE),q0!==Sp&&(q0===Ms?r.cullFace(r.BACK):q0===Fo?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):am(r.CULL_FACE),Sp=q0}function S1(q0){q0!==_r&&(Hl&&r.lineWidth(q0),_r=q0)}function p0(q0,d1,tm){q0?(P0(r.POLYGON_OFFSET_FILL),(xs!==d1||ne!==tm)&&(r.polygonOffset(d1,tm),xs=d1,ne=tm)):am(r.POLYGON_OFFSET_FILL)}function zp(q0){q0?P0(r.SCISSOR_TEST):am(r.SCISSOR_TEST)}function om(q0){q0===void 0&&(q0=r.TEXTURE0+zl-1),Gl!==q0&&(r.activeTexture(q0),Gl=q0)}function bm(q0,d1,tm){tm===void 0&&(Gl===null?tm=r.TEXTURE0+zl-1:tm=Gl);let o1=Ip[tm];o1===void 0&&(o1={type:void 0,texture:void 0},Ip[tm]=o1),(o1.type!==q0||o1.texture!==d1)&&(Gl!==tm&&(r.activeTexture(tm),Gl=tm),r.bindTexture(q0,d1||a0[q0]),o1.type=q0,o1.texture=d1)}function i1(){const q0=Ip[Gl];q0!==void 0&&q0.type!==void 0&&(r.bindTexture(q0.type,null),q0.type=void 0,q0.texture=void 0)}function r1(){try{r.compressedTexImage2D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function Gp(){try{r.compressedTexImage3D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function i0(){try{r.texSubImage2D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function l0(){try{r.texSubImage3D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function im(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function dm(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function pm(){try{r.texStorage2D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function Dm(){try{r.texStorage3D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function Gm(){try{r.texImage2D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function qm(){try{r.texImage3D.apply(r,arguments)}catch(q0){console.error("THREE.WebGLState:",q0)}}function vm(q0){Ep.equals(q0)===!1&&(r.scissor(q0.x,q0.y,q0.z,q0.w),Ep.copy(q0))}function r0(q0){o0.equals(q0)===!1&&(r.viewport(q0.x,q0.y,q0.z,q0.w),o0.copy(q0))}function e1(q0,d1){let tm=C.get(d1);tm===void 0&&(tm=new WeakMap,C.set(d1,tm));let o1=tm.get(q0);o1===void 0&&(o1=r.getUniformBlockIndex(d1,q0.name),tm.set(q0,o1))}function _1(q0,d1){const tm=C.get(d1).get(q0);A.get(d1)!==tm&&(r.uniformBlockBinding(d1,tm,q0.__bindingPointIndex),A.set(d1,tm))}function j1(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),a===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),j={},Gl=null,Ip={},V={},J=new WeakMap,re=[],ie=null,K=!1,Ne=null,G=null,se=null,He=null,Fe=null,Xe=null,be=null,ta=new qe(0,0,0),pn=0,mr=!1,bp=null,Sp=null,_r=null,xs=null,ne=null,Ep.set(0,0,r.canvas.width,r.canvas.height),o0.set(0,0,r.canvas.width,r.canvas.height),p.reset(),_.reset(),S.reset()}return{buffers:{color:p,depth:_,stencil:S},enable:P0,disable:am,bindFramebuffer:sm,drawBuffers:C0,useProgram:Fm,setBlending:A1,setMaterial:T1,setFlipSided:Tm,setCullFace:x1,setLineWidth:S1,setPolygonOffset:p0,setScissorTest:zp,activeTexture:om,bindTexture:bm,unbindTexture:i1,compressedTexImage2D:r1,compressedTexImage3D:Gp,texImage2D:Gm,texImage3D:qm,updateUBOMapping:e1,uniformBlockBinding:_1,texStorage2D:pm,texStorage3D:Dm,texSubImage2D:i0,texSubImage3D:l0,compressedTexSubImage2D:im,compressedTexSubImage3D:dm,scissor:vm,viewport:r0,reset:j1}}function Qd(r,e,t,a,o,c,d){const p=o.isWebGL2,_=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,S=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),A=new Ie,C=new WeakMap;let j;const V=new WeakMap;let J=!1;try{J=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function re(p0,zp){return J?new OffscreenCanvas(p0,zp):sr("canvas")}function ie(p0,zp,om,bm){let i1=1;const r1=S1(p0);if((r1.width>bm||r1.height>bm)&&(i1=bm/Math.max(r1.width,r1.height)),i1<1||zp===!0)if(typeof HTMLImageElement<"u"&&p0 instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&p0 instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&p0 instanceof ImageBitmap||typeof VideoFrame<"u"&&p0 instanceof VideoFrame){const Gp=zp?rr:Math.floor,i0=Gp(i1*r1.width),l0=Gp(i1*r1.height);j===void 0&&(j=re(i0,l0));const im=om?re(i0,l0):j;return im.width=i0,im.height=l0,im.getContext("2d").drawImage(p0,0,0,i0,l0),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r1.width+"x"+r1.height+") to ("+i0+"x"+l0+")."),im}else return"data"in p0&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r1.width+"x"+r1.height+")."),p0;return p0}function K(p0){const zp=S1(p0);return ss(zp.width)&&ss(zp.height)}function Ne(p0){return p?!1:p0.wrapS!==Nt||p0.wrapT!==Nt||p0.minFilter!==xt&&p0.minFilter!==St}function G(p0,zp){return p0.generateMipmaps&&zp&&p0.minFilter!==xt&&p0.minFilter!==St}function se(p0){r.generateMipmap(p0)}function He(p0,zp,om,bm,i1=!1){if(p===!1)return zp;if(p0!==null){if(r[p0]!==void 0)return r[p0];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+p0+"'")}let r1=zp;if(zp===r.RED&&(om===r.FLOAT&&(r1=r.R32F),om===r.HALF_FLOAT&&(r1=r.R16F),om===r.UNSIGNED_BYTE&&(r1=r.R8)),zp===r.RED_INTEGER&&(om===r.UNSIGNED_BYTE&&(r1=r.R8UI),om===r.UNSIGNED_SHORT&&(r1=r.R16UI),om===r.UNSIGNED_INT&&(r1=r.R32UI),om===r.BYTE&&(r1=r.R8I),om===r.SHORT&&(r1=r.R16I),om===r.INT&&(r1=r.R32I)),zp===r.RG&&(om===r.FLOAT&&(r1=r.RG32F),om===r.HALF_FLOAT&&(r1=r.RG16F),om===r.UNSIGNED_BYTE&&(r1=r.RG8)),zp===r.RG_INTEGER&&(om===r.UNSIGNED_BYTE&&(r1=r.RG8UI),om===r.UNSIGNED_SHORT&&(r1=r.RG16UI),om===r.UNSIGNED_INT&&(r1=r.RG32UI),om===r.BYTE&&(r1=r.RG8I),om===r.SHORT&&(r1=r.RG16I),om===r.INT&&(r1=r.RG32I)),zp===r.RGBA){const Gp=i1?er:je.getTransfer(bm);om===r.FLOAT&&(r1=r.RGBA32F),om===r.HALF_FLOAT&&(r1=r.RGBA16F),om===r.UNSIGNED_BYTE&&(r1=Gp===$e?r.SRGB8_ALPHA8:r.RGBA8),om===r.UNSIGNED_SHORT_4_4_4_4&&(r1=r.RGBA4),om===r.UNSIGNED_SHORT_5_5_5_1&&(r1=r.RGB5_A1)}return(r1===r.R16F||r1===r.R32F||r1===r.RG16F||r1===r.RG32F||r1===r.RGBA16F||r1===r.RGBA32F)&&e.get("EXT_color_buffer_float"),r1}function Fe(p0,zp,om){return G(p0,om)===!0||p0.isFramebufferTexture&&p0.minFilter!==xt&&p0.minFilter!==St?Math.log2(Math.max(zp.width,zp.height))+1:p0.mipmaps!==void 0&&p0.mipmaps.length>0?p0.mipmaps.length:p0.isCompressedTexture&&Array.isArray(p0.image)?zp.mipmaps.length:1}function Xe(p0){return p0===xt||p0===As||p0===ui?r.NEAREST:r.LINEAR}function be(p0){const zp=p0.target;zp.removeEventListener("dispose",be),pn(zp),zp.isVideoTexture&&C.delete(zp)}function ta(p0){const zp=p0.target;zp.removeEventListener("dispose",ta),bp(zp)}function pn(p0){const zp=a.get(p0);if(zp.__webglInit===void 0)return;const om=p0.source,bm=V.get(om);if(bm){const i1=bm[zp.__cacheKey];i1.usedTimes--,i1.usedTimes===0&&mr(p0),Object.keys(bm).length===0&&V.delete(om)}a.remove(p0)}function mr(p0){const zp=a.get(p0);r.deleteTexture(zp.__webglTexture);const om=p0.source,bm=V.get(om);delete bm[zp.__cacheKey],d.memory.textures--}function bp(p0){const zp=a.get(p0);if(p0.depthTexture&&p0.depthTexture.dispose(),p0.isWebGLCubeRenderTarget)for(let bm=0;bm<6;bm++){if(Array.isArray(zp.__webglFramebuffer[bm]))for(let i1=0;i1<zp.__webglFramebuffer[bm].length;i1++)r.deleteFramebuffer(zp.__webglFramebuffer[bm][i1]);else r.deleteFramebuffer(zp.__webglFramebuffer[bm]);zp.__webglDepthbuffer&&r.deleteRenderbuffer(zp.__webglDepthbuffer[bm])}else{if(Array.isArray(zp.__webglFramebuffer))for(let bm=0;bm<zp.__webglFramebuffer.length;bm++)r.deleteFramebuffer(zp.__webglFramebuffer[bm]);else r.deleteFramebuffer(zp.__webglFramebuffer);if(zp.__webglDepthbuffer&&r.deleteRenderbuffer(zp.__webglDepthbuffer),zp.__webglMultisampledFramebuffer&&r.deleteFramebuffer(zp.__webglMultisampledFramebuffer),zp.__webglColorRenderbuffer)for(let bm=0;bm<zp.__webglColorRenderbuffer.length;bm++)zp.__webglColorRenderbuffer[bm]&&r.deleteRenderbuffer(zp.__webglColorRenderbuffer[bm]);zp.__webglDepthRenderbuffer&&r.deleteRenderbuffer(zp.__webglDepthRenderbuffer)}const om=p0.textures;for(let bm=0,i1=om.length;bm<i1;bm++){const r1=a.get(om[bm]);r1.__webglTexture&&(r.deleteTexture(r1.__webglTexture),d.memory.textures--),a.remove(om[bm])}a.remove(p0)}let Sp=0;function _r(){Sp=0}function xs(){const p0=Sp;return p0>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+p0+" texture units while this GPU supports only "+o.maxTextures),Sp+=1,p0}function ne(p0){const zp=[];return zp.push(p0.wrapS),zp.push(p0.wrapT),zp.push(p0.wrapR||0),zp.push(p0.magFilter),zp.push(p0.minFilter),zp.push(p0.anisotropy),zp.push(p0.internalFormat),zp.push(p0.format),zp.push(p0.type),zp.push(p0.generateMipmaps),zp.push(p0.premultiplyAlpha),zp.push(p0.flipY),zp.push(p0.unpackAlignment),zp.push(p0.colorSpace),zp.join()}function zl(p0,zp){const om=a.get(p0);if(p0.isVideoTexture&&Tm(p0),p0.isRenderTargetTexture===!1&&p0.version>0&&om.__version!==p0.version){const bm=p0.image;if(bm===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(bm.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{o0(om,p0,zp);return}}t.bindTexture(r.TEXTURE_2D,om.__webglTexture,r.TEXTURE0+zp)}function Hl(p0,zp){const om=a.get(p0);if(p0.version>0&&om.__version!==p0.version){o0(om,p0,zp);return}t.bindTexture(r.TEXTURE_2D_ARRAY,om.__webglTexture,r.TEXTURE0+zp)}function pr(p0,zp){const om=a.get(p0);if(p0.version>0&&om.__version!==p0.version){o0(om,p0,zp);return}t.bindTexture(r.TEXTURE_3D,om.__webglTexture,r.TEXTURE0+zp)}function Hp(p0,zp){const om=a.get(p0);if(p0.version>0&&om.__version!==p0.version){w0(om,p0,zp);return}t.bindTexture(r.TEXTURE_CUBE_MAP,om.__webglTexture,r.TEXTURE0+zp)}const Gl={[ns]:r.REPEAT,[Nt]:r.CLAMP_TO_EDGE,[is]:r.MIRRORED_REPEAT},Ip={[xt]:r.NEAREST,[As]:r.NEAREST_MIPMAP_NEAREST,[ui]:r.NEAREST_MIPMAP_LINEAR,[St]:r.LINEAR,[gr]:r.LINEAR_MIPMAP_NEAREST,[An]:r.LINEAR_MIPMAP_LINEAR},qp={[Rl]:r.NEVER,[Il]:r.ALWAYS,[Cl]:r.LESS,[co]:r.LEQUAL,[Pl]:r.EQUAL,[Ul]:r.GEQUAL,[Ll]:r.GREATER,[Dl]:r.NOTEQUAL};function ci(p0,zp,om){if(zp.type===Kt&&e.has("OES_texture_float_linear")===!1&&(zp.magFilter===St||zp.magFilter===gr||zp.magFilter===ui||zp.magFilter===An||zp.minFilter===St||zp.minFilter===gr||zp.minFilter===ui||zp.minFilter===An)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),om?(r.texParameteri(p0,r.TEXTURE_WRAP_S,Gl[zp.wrapS]),r.texParameteri(p0,r.TEXTURE_WRAP_T,Gl[zp.wrapT]),(p0===r.TEXTURE_3D||p0===r.TEXTURE_2D_ARRAY)&&r.texParameteri(p0,r.TEXTURE_WRAP_R,Gl[zp.wrapR]),r.texParameteri(p0,r.TEXTURE_MAG_FILTER,Ip[zp.magFilter]),r.texParameteri(p0,r.TEXTURE_MIN_FILTER,Ip[zp.minFilter])):(r.texParameteri(p0,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(p0,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(p0===r.TEXTURE_3D||p0===r.TEXTURE_2D_ARRAY)&&r.texParameteri(p0,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(zp.wrapS!==Nt||zp.wrapT!==Nt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(p0,r.TEXTURE_MAG_FILTER,Xe(zp.magFilter)),r.texParameteri(p0,r.TEXTURE_MIN_FILTER,Xe(zp.minFilter)),zp.minFilter!==xt&&zp.minFilter!==St&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),zp.compareFunction&&(r.texParameteri(p0,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(p0,r.TEXTURE_COMPARE_FUNC,qp[zp.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(zp.magFilter===xt||zp.minFilter!==ui&&zp.minFilter!==An||zp.type===Kt&&e.has("OES_texture_float_linear")===!1||p===!1&&zp.type===_i&&e.has("OES_texture_half_float_linear")===!1)return;if(zp.anisotropy>1||a.get(zp).__currentAnisotropy){const bm=e.get("EXT_texture_filter_anisotropic");r.texParameterf(p0,bm.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(zp.anisotropy,o.getMaxAnisotropy())),a.get(zp).__currentAnisotropy=zp.anisotropy}}}function Ep(p0,zp){let om=!1;p0.__webglInit===void 0&&(p0.__webglInit=!0,zp.addEventListener("dispose",be));const bm=zp.source;let i1=V.get(bm);i1===void 0&&(i1={},V.set(bm,i1));const r1=ne(zp);if(r1!==p0.__cacheKey){i1[r1]===void 0&&(i1[r1]={texture:r.createTexture(),usedTimes:0},d.memory.textures++,om=!0),i1[r1].usedTimes++;const Gp=i1[p0.__cacheKey];Gp!==void 0&&(i1[p0.__cacheKey].usedTimes--,Gp.usedTimes===0&&mr(zp)),p0.__cacheKey=r1,p0.__webglTexture=i1[r1].texture}return om}function o0(p0,zp,om){let bm=r.TEXTURE_2D;(zp.isDataArrayTexture||zp.isCompressedArrayTexture)&&(bm=r.TEXTURE_2D_ARRAY),zp.isData3DTexture&&(bm=r.TEXTURE_3D);const i1=Ep(p0,zp),r1=zp.source;t.bindTexture(bm,p0.__webglTexture,r.TEXTURE0+om);const Gp=a.get(r1);if(r1.version!==Gp.__version||i1===!0){t.activeTexture(r.TEXTURE0+om);const i0=je.getPrimaries(je.workingColorSpace),l0=zp.colorSpace===an?null:je.getPrimaries(zp.colorSpace),im=zp.colorSpace===an||i0===l0?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,zp.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,zp.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,zp.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,im);const dm=Ne(zp)&&K(zp.image)===!1;let pm=ie(zp.image,dm,!1,o.maxTextureSize);pm=x1(zp,pm);const Dm=K(pm)||p,Gm=c.convert(zp.format,zp.colorSpace);let qm=c.convert(zp.type),vm=He(zp.internalFormat,Gm,qm,zp.colorSpace,zp.isVideoTexture);ci(bm,zp,Dm);let r0;const e1=zp.mipmaps,_1=p&&zp.isVideoTexture!==!0&&vm!==lo,j1=Gp.__version===void 0||i1===!0,q0=r1.dataReady,d1=Fe(zp,pm,Dm);if(zp.isDepthTexture)vm=r.DEPTH_COMPONENT,p?zp.type===Kt?vm=r.DEPTH_COMPONENT32F:zp.type===on?vm=r.DEPTH_COMPONENT24:zp.type===wn?vm=r.DEPTH24_STENCIL8:vm=r.DEPTH_COMPONENT16:zp.type===Kt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),zp.format===Rn&&vm===r.DEPTH_COMPONENT&&zp.type!==ls&&zp.type!==on&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),zp.type=on,qm=c.convert(zp.type)),zp.format===si&&vm===r.DEPTH_COMPONENT&&(vm=r.DEPTH_STENCIL,zp.type!==wn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),zp.type=wn,qm=c.convert(zp.type))),j1&&(_1?t.texStorage2D(r.TEXTURE_2D,1,vm,pm.width,pm.height):t.texImage2D(r.TEXTURE_2D,0,vm,pm.width,pm.height,0,Gm,qm,null));else if(zp.isDataTexture)if(e1.length>0&&Dm){_1&&j1&&t.texStorage2D(r.TEXTURE_2D,d1,vm,e1[0].width,e1[0].height);for(let tm=0,o1=e1.length;tm<o1;tm++)r0=e1[tm],_1?q0&&t.texSubImage2D(r.TEXTURE_2D,tm,0,0,r0.width,r0.height,Gm,qm,r0.data):t.texImage2D(r.TEXTURE_2D,tm,vm,r0.width,r0.height,0,Gm,qm,r0.data);zp.generateMipmaps=!1}else _1?(j1&&t.texStorage2D(r.TEXTURE_2D,d1,vm,pm.width,pm.height),q0&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,pm.width,pm.height,Gm,qm,pm.data)):t.texImage2D(r.TEXTURE_2D,0,vm,pm.width,pm.height,0,Gm,qm,pm.data);else if(zp.isCompressedTexture)if(zp.isCompressedArrayTexture){_1&&j1&&t.texStorage3D(r.TEXTURE_2D_ARRAY,d1,vm,e1[0].width,e1[0].height,pm.depth);for(let tm=0,o1=e1.length;tm<o1;tm++)r0=e1[tm],zp.format!==Ft?Gm!==null?_1?q0&&t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,tm,0,0,0,r0.width,r0.height,pm.depth,Gm,r0.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,tm,vm,r0.width,r0.height,pm.depth,0,r0.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_1?q0&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,tm,0,0,0,r0.width,r0.height,pm.depth,Gm,qm,r0.data):t.texImage3D(r.TEXTURE_2D_ARRAY,tm,vm,r0.width,r0.height,pm.depth,0,Gm,qm,r0.data)}else{_1&&j1&&t.texStorage2D(r.TEXTURE_2D,d1,vm,e1[0].width,e1[0].height);for(let tm=0,o1=e1.length;tm<o1;tm++)r0=e1[tm],zp.format!==Ft?Gm!==null?_1?q0&&t.compressedTexSubImage2D(r.TEXTURE_2D,tm,0,0,r0.width,r0.height,Gm,r0.data):t.compressedTexImage2D(r.TEXTURE_2D,tm,vm,r0.width,r0.height,0,r0.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_1?q0&&t.texSubImage2D(r.TEXTURE_2D,tm,0,0,r0.width,r0.height,Gm,qm,r0.data):t.texImage2D(r.TEXTURE_2D,tm,vm,r0.width,r0.height,0,Gm,qm,r0.data)}else if(zp.isDataArrayTexture)_1?(j1&&t.texStorage3D(r.TEXTURE_2D_ARRAY,d1,vm,pm.width,pm.height,pm.depth),q0&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,pm.width,pm.height,pm.depth,Gm,qm,pm.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,vm,pm.width,pm.height,pm.depth,0,Gm,qm,pm.data);else if(zp.isData3DTexture)_1?(j1&&t.texStorage3D(r.TEXTURE_3D,d1,vm,pm.width,pm.height,pm.depth),q0&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,pm.width,pm.height,pm.depth,Gm,qm,pm.data)):t.texImage3D(r.TEXTURE_3D,0,vm,pm.width,pm.height,pm.depth,0,Gm,qm,pm.data);else if(zp.isFramebufferTexture){if(j1)if(_1)t.texStorage2D(r.TEXTURE_2D,d1,vm,pm.width,pm.height);else{let tm=pm.width,o1=pm.height;for(let jm=0;jm<d1;jm++)t.texImage2D(r.TEXTURE_2D,jm,vm,tm,o1,0,Gm,qm,null),tm>>=1,o1>>=1}}else if(e1.length>0&&Dm){if(_1&&j1){const tm=S1(e1[0]);t.texStorage2D(r.TEXTURE_2D,d1,vm,tm.width,tm.height)}for(let tm=0,o1=e1.length;tm<o1;tm++)r0=e1[tm],_1?q0&&t.texSubImage2D(r.TEXTURE_2D,tm,0,0,Gm,qm,r0):t.texImage2D(r.TEXTURE_2D,tm,vm,Gm,qm,r0);zp.generateMipmaps=!1}else if(_1){if(j1){const tm=S1(pm);t.texStorage2D(r.TEXTURE_2D,d1,vm,tm.width,tm.height)}q0&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Gm,qm,pm)}else t.texImage2D(r.TEXTURE_2D,0,vm,Gm,qm,pm);G(zp,Dm)&&se(bm),Gp.__version=r1.version,zp.onUpdate&&zp.onUpdate(zp)}p0.__version=zp.version}function w0(p0,zp,om){if(zp.image.length!==6)return;const bm=Ep(p0,zp),i1=zp.source;t.bindTexture(r.TEXTURE_CUBE_MAP,p0.__webglTexture,r.TEXTURE0+om);const r1=a.get(i1);if(i1.version!==r1.__version||bm===!0){t.activeTexture(r.TEXTURE0+om);const Gp=je.getPrimaries(je.workingColorSpace),i0=zp.colorSpace===an?null:je.getPrimaries(zp.colorSpace),l0=zp.colorSpace===an||Gp===i0?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,zp.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,zp.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,zp.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,l0);const im=zp.isCompressedTexture||zp.image[0].isCompressedTexture,dm=zp.image[0]&&zp.image[0].isDataTexture,pm=[];for(let tm=0;tm<6;tm++)!im&&!dm?pm[tm]=ie(zp.image[tm],!1,!0,o.maxCubemapSize):pm[tm]=dm?zp.image[tm].image:zp.image[tm],pm[tm]=x1(zp,pm[tm]);const Dm=pm[0],Gm=K(Dm)||p,qm=c.convert(zp.format,zp.colorSpace),vm=c.convert(zp.type),r0=He(zp.internalFormat,qm,vm,zp.colorSpace),e1=p&&zp.isVideoTexture!==!0,_1=r1.__version===void 0||bm===!0,j1=i1.dataReady;let q0=Fe(zp,Dm,Gm);ci(r.TEXTURE_CUBE_MAP,zp,Gm);let d1;if(im){e1&&_1&&t.texStorage2D(r.TEXTURE_CUBE_MAP,q0,r0,Dm.width,Dm.height);for(let tm=0;tm<6;tm++){d1=pm[tm].mipmaps;for(let o1=0;o1<d1.length;o1++){const jm=d1[o1];zp.format!==Ft?qm!==null?e1?j1&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,o1,0,0,jm.width,jm.height,qm,jm.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,o1,r0,jm.width,jm.height,0,jm.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):e1?j1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,o1,0,0,jm.width,jm.height,qm,vm,jm.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,o1,r0,jm.width,jm.height,0,qm,vm,jm.data)}}}else{if(d1=zp.mipmaps,e1&&_1){d1.length>0&&q0++;const tm=S1(pm[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,q0,r0,tm.width,tm.height)}for(let tm=0;tm<6;tm++)if(dm){e1?j1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,0,0,0,pm[tm].width,pm[tm].height,qm,vm,pm[tm].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,0,r0,pm[tm].width,pm[tm].height,0,qm,vm,pm[tm].data);for(let o1=0;o1<d1.length;o1++){const jm=d1[o1].image[tm].image;e1?j1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,o1+1,0,0,jm.width,jm.height,qm,vm,jm.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,o1+1,r0,jm.width,jm.height,0,qm,vm,jm.data)}}else{e1?j1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,0,0,0,qm,vm,pm[tm]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,0,r0,qm,vm,pm[tm]);for(let o1=0;o1<d1.length;o1++){const jm=d1[o1];e1?j1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,o1+1,0,0,qm,vm,jm.image[tm]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+tm,o1+1,r0,qm,vm,jm.image[tm])}}}G(zp,Gm)&&se(r.TEXTURE_CUBE_MAP),r1.__version=i1.version,zp.onUpdate&&zp.onUpdate(zp)}p0.__version=zp.version}function a0(p0,zp,om,bm,i1,r1){const Gp=c.convert(om.format,om.colorSpace),i0=c.convert(om.type),l0=He(om.internalFormat,Gp,i0,om.colorSpace);if(!a.get(zp).__hasExternalTextures){const im=Math.max(1,zp.width>>r1),dm=Math.max(1,zp.height>>r1);i1===r.TEXTURE_3D||i1===r.TEXTURE_2D_ARRAY?t.texImage3D(i1,r1,l0,im,dm,zp.depth,0,Gp,i0,null):t.texImage2D(i1,r1,l0,im,dm,0,Gp,i0,null)}t.bindFramebuffer(r.FRAMEBUFFER,p0),T1(zp)?_.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,bm,i1,a.get(om).__webglTexture,0,A1(zp)):(i1===r.TEXTURE_2D||i1>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&i1<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,bm,i1,a.get(om).__webglTexture,r1),t.bindFramebuffer(r.FRAMEBUFFER,null)}function P0(p0,zp,om){if(r.bindRenderbuffer(r.RENDERBUFFER,p0),zp.depthBuffer&&!zp.stencilBuffer){let bm=p===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(om||T1(zp)){const i1=zp.depthTexture;i1&&i1.isDepthTexture&&(i1.type===Kt?bm=r.DEPTH_COMPONENT32F:i1.type===on&&(bm=r.DEPTH_COMPONENT24));const r1=A1(zp);T1(zp)?_.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,r1,bm,zp.width,zp.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,r1,bm,zp.width,zp.height)}else r.renderbufferStorage(r.RENDERBUFFER,bm,zp.width,zp.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,p0)}else if(zp.depthBuffer&&zp.stencilBuffer){const bm=A1(zp);om&&T1(zp)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,bm,r.DEPTH24_STENCIL8,zp.width,zp.height):T1(zp)?_.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,bm,r.DEPTH24_STENCIL8,zp.width,zp.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,zp.width,zp.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,p0)}else{const bm=zp.textures;for(let i1=0;i1<bm.length;i1++){const r1=bm[i1],Gp=c.convert(r1.format,r1.colorSpace),i0=c.convert(r1.type),l0=He(r1.internalFormat,Gp,i0,r1.colorSpace),im=A1(zp);om&&T1(zp)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,im,l0,zp.width,zp.height):T1(zp)?_.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,im,l0,zp.width,zp.height):r.renderbufferStorage(r.RENDERBUFFER,l0,zp.width,zp.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function am(p0,zp){if(zp&&zp.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,p0),!(zp.depthTexture&&zp.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!a.get(zp.depthTexture).__webglTexture||zp.depthTexture.image.width!==zp.width||zp.depthTexture.image.height!==zp.height)&&(zp.depthTexture.image.width=zp.width,zp.depthTexture.image.height=zp.height,zp.depthTexture.needsUpdate=!0),zl(zp.depthTexture,0);const om=a.get(zp.depthTexture).__webglTexture,bm=A1(zp);if(zp.depthTexture.format===Rn)T1(zp)?_.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,om,0,bm):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,om,0);else if(zp.depthTexture.format===si)T1(zp)?_.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,om,0,bm):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,om,0);else throw new Error("Unknown depthTexture format")}function sm(p0){const zp=a.get(p0),om=p0.isWebGLCubeRenderTarget===!0;if(p0.depthTexture&&!zp.__autoAllocateDepthBuffer){if(om)throw new Error("target.depthTexture not supported in Cube render targets");am(zp.__webglFramebuffer,p0)}else if(om){zp.__webglDepthbuffer=[];for(let bm=0;bm<6;bm++)t.bindFramebuffer(r.FRAMEBUFFER,zp.__webglFramebuffer[bm]),zp.__webglDepthbuffer[bm]=r.createRenderbuffer(),P0(zp.__webglDepthbuffer[bm],p0,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,zp.__webglFramebuffer),zp.__webglDepthbuffer=r.createRenderbuffer(),P0(zp.__webglDepthbuffer,p0,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function C0(p0,zp,om){const bm=a.get(p0);zp!==void 0&&a0(bm.__webglFramebuffer,p0,p0.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),om!==void 0&&sm(p0)}function Fm(p0){const zp=p0.texture,om=a.get(p0),bm=a.get(zp);p0.addEventListener("dispose",ta);const i1=p0.textures,r1=p0.isWebGLCubeRenderTarget===!0,Gp=i1.length>1,i0=K(p0)||p;if(Gp||(bm.__webglTexture===void 0&&(bm.__webglTexture=r.createTexture()),bm.__version=zp.version,d.memory.textures++),r1){om.__webglFramebuffer=[];for(let l0=0;l0<6;l0++)if(p&&zp.mipmaps&&zp.mipmaps.length>0){om.__webglFramebuffer[l0]=[];for(let im=0;im<zp.mipmaps.length;im++)om.__webglFramebuffer[l0][im]=r.createFramebuffer()}else om.__webglFramebuffer[l0]=r.createFramebuffer()}else{if(p&&zp.mipmaps&&zp.mipmaps.length>0){om.__webglFramebuffer=[];for(let l0=0;l0<zp.mipmaps.length;l0++)om.__webglFramebuffer[l0]=r.createFramebuffer()}else om.__webglFramebuffer=r.createFramebuffer();if(Gp)if(o.drawBuffers)for(let l0=0,im=i1.length;l0<im;l0++){const dm=a.get(i1[l0]);dm.__webglTexture===void 0&&(dm.__webglTexture=r.createTexture(),d.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(p&&p0.samples>0&&T1(p0)===!1){om.__webglMultisampledFramebuffer=r.createFramebuffer(),om.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,om.__webglMultisampledFramebuffer);for(let l0=0;l0<i1.length;l0++){const im=i1[l0];om.__webglColorRenderbuffer[l0]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,om.__webglColorRenderbuffer[l0]);const dm=c.convert(im.format,im.colorSpace),pm=c.convert(im.type),Dm=He(im.internalFormat,dm,pm,im.colorSpace,p0.isXRRenderTarget===!0),Gm=A1(p0);r.renderbufferStorageMultisample(r.RENDERBUFFER,Gm,Dm,p0.width,p0.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l0,r.RENDERBUFFER,om.__webglColorRenderbuffer[l0])}r.bindRenderbuffer(r.RENDERBUFFER,null),p0.depthBuffer&&(om.__webglDepthRenderbuffer=r.createRenderbuffer(),P0(om.__webglDepthRenderbuffer,p0,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(r1){t.bindTexture(r.TEXTURE_CUBE_MAP,bm.__webglTexture),ci(r.TEXTURE_CUBE_MAP,zp,i0);for(let l0=0;l0<6;l0++)if(p&&zp.mipmaps&&zp.mipmaps.length>0)for(let im=0;im<zp.mipmaps.length;im++)a0(om.__webglFramebuffer[l0][im],p0,zp,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+l0,im);else a0(om.__webglFramebuffer[l0],p0,zp,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+l0,0);G(zp,i0)&&se(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Gp){for(let l0=0,im=i1.length;l0<im;l0++){const dm=i1[l0],pm=a.get(dm);t.bindTexture(r.TEXTURE_2D,pm.__webglTexture),ci(r.TEXTURE_2D,dm,i0),a0(om.__webglFramebuffer,p0,dm,r.COLOR_ATTACHMENT0+l0,r.TEXTURE_2D,0),G(dm,i0)&&se(r.TEXTURE_2D)}t.unbindTexture()}else{let l0=r.TEXTURE_2D;if((p0.isWebGL3DRenderTarget||p0.isWebGLArrayRenderTarget)&&(p?l0=p0.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(l0,bm.__webglTexture),ci(l0,zp,i0),p&&zp.mipmaps&&zp.mipmaps.length>0)for(let im=0;im<zp.mipmaps.length;im++)a0(om.__webglFramebuffer[im],p0,zp,r.COLOR_ATTACHMENT0,l0,im);else a0(om.__webglFramebuffer,p0,zp,r.COLOR_ATTACHMENT0,l0,0);G(zp,i0)&&se(l0),t.unbindTexture()}p0.depthBuffer&&sm(p0)}function Zm(p0){const zp=K(p0)||p,om=p0.textures;for(let bm=0,i1=om.length;bm<i1;bm++){const r1=om[bm];if(G(r1,zp)){const Gp=p0.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,i0=a.get(r1).__webglTexture;t.bindTexture(Gp,i0),se(Gp),t.unbindTexture()}}}function p1(p0){if(p&&p0.samples>0&&T1(p0)===!1){const zp=p0.textures,om=p0.width,bm=p0.height;let i1=r.COLOR_BUFFER_BIT;const r1=[],Gp=p0.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,i0=a.get(p0),l0=zp.length>1;if(l0)for(let im=0;im<zp.length;im++)t.bindFramebuffer(r.FRAMEBUFFER,i0.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+im,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,i0.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+im,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,i0.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,i0.__webglFramebuffer);for(let im=0;im<zp.length;im++){r1.push(r.COLOR_ATTACHMENT0+im),p0.depthBuffer&&r1.push(Gp);const dm=i0.__ignoreDepthValues!==void 0?i0.__ignoreDepthValues:!1;if(dm===!1&&(p0.depthBuffer&&(i1|=r.DEPTH_BUFFER_BIT),p0.stencilBuffer&&(i1|=r.STENCIL_BUFFER_BIT)),l0&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i0.__webglColorRenderbuffer[im]),dm===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[Gp]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Gp])),l0){const pm=a.get(zp[im]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,pm,0)}r.blitFramebuffer(0,0,om,bm,0,0,om,bm,i1,r.NEAREST),S&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,r1)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),l0)for(let im=0;im<zp.length;im++){t.bindFramebuffer(r.FRAMEBUFFER,i0.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+im,r.RENDERBUFFER,i0.__webglColorRenderbuffer[im]);const dm=a.get(zp[im]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,i0.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+im,r.TEXTURE_2D,dm,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,i0.__webglMultisampledFramebuffer)}}function A1(p0){return Math.min(o.maxSamples,p0.samples)}function T1(p0){const zp=a.get(p0);return p&&p0.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&zp.__useRenderToTexture!==!1}function Tm(p0){const zp=d.render.frame;C.get(p0)!==zp&&(C.set(p0,zp),p0.update())}function x1(p0,zp){const om=p0.colorSpace,bm=p0.format,i1=p0.type;return p0.isCompressedTexture===!0||p0.isVideoTexture===!0||p0.format===rs||om!==dn&&om!==an&&(je.getTransfer(om)===$e?p===!1?e.has("EXT_sRGB")===!0&&bm===Ft?(p0.format=rs,p0.minFilter=St,p0.generateMipmaps=!1):zp=ho.sRGBToLinear(zp):(bm!==Ft||i1!==un)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",om)),zp}function S1(p0){return typeof HTMLImageElement<"u"&&p0 instanceof HTMLImageElement?(A.width=p0.naturalWidth||p0.width,A.height=p0.naturalHeight||p0.height):typeof VideoFrame<"u"&&p0 instanceof VideoFrame?(A.width=p0.displayWidth,A.height=p0.displayHeight):(A.width=p0.width,A.height=p0.height),A}this.allocateTextureUnit=xs,this.resetTextureUnits=_r,this.setTexture2D=zl,this.setTexture2DArray=Hl,this.setTexture3D=pr,this.setTextureCube=Hp,this.rebindTextures=C0,this.setupRenderTarget=Fm,this.updateRenderTargetMipmap=Zm,this.updateMultisampleRenderTarget=p1,this.setupDepthRenderbuffer=sm,this.setupFrameBufferTexture=a0,this.useMultisampledRTT=T1}function ep(r,e,t){const a=t.isWebGL2;function o(c,d=an){let p;const _=je.getTransfer(d);if(c===un)return r.UNSIGNED_BYTE;if(c===io)return r.UNSIGNED_SHORT_4_4_4_4;if(c===ro)return r.UNSIGNED_SHORT_5_5_5_1;if(c===_l)return r.BYTE;if(c===gl)return r.SHORT;if(c===ls)return r.UNSIGNED_SHORT;if(c===no)return r.INT;if(c===on)return r.UNSIGNED_INT;if(c===Kt)return r.FLOAT;if(c===_i)return a?r.HALF_FLOAT:(p=e.get("OES_texture_half_float"),p!==null?p.HALF_FLOAT_OES:null);if(c===vl)return r.ALPHA;if(c===Ft)return r.RGBA;if(c===xl)return r.LUMINANCE;if(c===Ml)return r.LUMINANCE_ALPHA;if(c===Rn)return r.DEPTH_COMPONENT;if(c===si)return r.DEPTH_STENCIL;if(c===rs)return p=e.get("EXT_sRGB"),p!==null?p.SRGB_ALPHA_EXT:null;if(c===Sl)return r.RED;if(c===so)return r.RED_INTEGER;if(c===El)return r.RG;if(c===ao)return r.RG_INTEGER;if(c===oo)return r.RGBA_INTEGER;if(c===vr||c===xr||c===Mr||c===Sr)if(_===$e)if(p=e.get("WEBGL_compressed_texture_s3tc_srgb"),p!==null){if(c===vr)return p.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(c===xr)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(c===Mr)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(c===Sr)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(p=e.get("WEBGL_compressed_texture_s3tc"),p!==null){if(c===vr)return p.COMPRESSED_RGB_S3TC_DXT1_EXT;if(c===xr)return p.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(c===Mr)return p.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(c===Sr)return p.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(c===ws||c===Rs||c===Cs||c===Ps)if(p=e.get("WEBGL_compressed_texture_pvrtc"),p!==null){if(c===ws)return p.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(c===Rs)return p.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(c===Cs)return p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(c===Ps)return p.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(c===lo)return p=e.get("WEBGL_compressed_texture_etc1"),p!==null?p.COMPRESSED_RGB_ETC1_WEBGL:null;if(c===Ls||c===Ds)if(p=e.get("WEBGL_compressed_texture_etc"),p!==null){if(c===Ls)return _===$e?p.COMPRESSED_SRGB8_ETC2:p.COMPRESSED_RGB8_ETC2;if(c===Ds)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:p.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(c===Us||c===Is||c===Ns||c===Fs||c===Os||c===Bs||c===zs||c===Gs||c===Hs||c===Vs||c===ks||c===Ws||c===Xs||c===Ys)if(p=e.get("WEBGL_compressed_texture_astc"),p!==null){if(c===Us)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:p.COMPRESSED_RGBA_ASTC_4x4_KHR;if(c===Is)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:p.COMPRESSED_RGBA_ASTC_5x4_KHR;if(c===Ns)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:p.COMPRESSED_RGBA_ASTC_5x5_KHR;if(c===Fs)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:p.COMPRESSED_RGBA_ASTC_6x5_KHR;if(c===Os)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:p.COMPRESSED_RGBA_ASTC_6x6_KHR;if(c===Bs)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:p.COMPRESSED_RGBA_ASTC_8x5_KHR;if(c===zs)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:p.COMPRESSED_RGBA_ASTC_8x6_KHR;if(c===Gs)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:p.COMPRESSED_RGBA_ASTC_8x8_KHR;if(c===Hs)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:p.COMPRESSED_RGBA_ASTC_10x5_KHR;if(c===Vs)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:p.COMPRESSED_RGBA_ASTC_10x6_KHR;if(c===ks)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:p.COMPRESSED_RGBA_ASTC_10x8_KHR;if(c===Ws)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:p.COMPRESSED_RGBA_ASTC_10x10_KHR;if(c===Xs)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:p.COMPRESSED_RGBA_ASTC_12x10_KHR;if(c===Ys)return _===$e?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:p.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(c===Er||c===qs||c===js)if(p=e.get("EXT_texture_compression_bptc"),p!==null){if(c===Er)return _===$e?p.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:p.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(c===qs)return p.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(c===js)return p.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(c===yl||c===Ks||c===Zs||c===$s)if(p=e.get("EXT_texture_compression_rgtc"),p!==null){if(c===Er)return p.COMPRESSED_RED_RGTC1_EXT;if(c===Ks)return p.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(c===Zs)return p.COMPRESSED_RED_GREEN_RGTC2_EXT;if(c===$s)return p.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return c===wn?a?r.UNSIGNED_INT_24_8:(p=e.get("WEBGL_depth_texture"),p!==null?p.UNSIGNED_INT_24_8_WEBGL:null):r[c]!==void 0?r[c]:null}return{convert:o}}class tp extends Lt{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Xi extends Mt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const np={type:"move"};class qr{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const a of e.hand.values())this._getHandJoint(t,a)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,a){let o=null,c=null,d=null;const p=this._targetRay,_=this._grip,S=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(S&&e.hand){d=!0;for(const re of e.hand.values()){const ie=t.getJointPose(re,a),K=this._getHandJoint(S,re);ie!==null&&(K.matrix.fromArray(ie.transform.matrix),K.matrix.decompose(K.position,K.rotation,K.scale),K.matrixWorldNeedsUpdate=!0,K.jointRadius=ie.radius),K.visible=ie!==null}const A=S.joints["index-finger-tip"],C=S.joints["thumb-tip"],j=A.position.distanceTo(C.position),V=.02,J=.005;S.inputState.pinching&&j>V+J?(S.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!S.inputState.pinching&&j<=V-J&&(S.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else _!==null&&e.gripSpace&&(c=t.getPose(e.gripSpace,a),c!==null&&(_.matrix.fromArray(c.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,c.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(c.linearVelocity)):_.hasLinearVelocity=!1,c.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(c.angularVelocity)):_.hasAngularVelocity=!1));p!==null&&(o=t.getPose(e.targetRaySpace,a),o===null&&c!==null&&(o=c),o!==null&&(p.matrix.fromArray(o.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,o.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(o.linearVelocity)):p.hasLinearVelocity=!1,o.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(o.angularVelocity)):p.hasAngularVelocity=!1,this.dispatchEvent(np)))}return p!==null&&(p.visible=o!==null),_!==null&&(_.visible=c!==null),S!==null&&(S.visible=d!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const a=new Xi;a.matrixAutoUpdate=!1,a.visible=!1,e.joints[t.jointName]=a,e.add(a)}return e.joints[t.jointName]}}const ip=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,rp=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class sp{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,a){if(this.texture===null){const o=new yt,c=e.properties.get(o);c.__webglTexture=t.texture,(t.depthNear!=a.depthNear||t.depthFar!=a.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=o}}render(e,t){if(this.texture!==null){if(this.mesh===null){const a=t.cameras[0].viewport,o=new fn({extensions:{fragDepth:!0},vertexShader:ip,fragmentShader:rp,uniforms:{depthColor:{value:this.texture},depthWidth:{value:a.z},depthHeight:{value:a.w}}});this.mesh=new Rt(new hr(20,20),o)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class ap extends Ln{constructor(e,t){super();const a=this;let o=null,c=1,d=null,p="local-floor",_=1,S=null,A=null,C=null,j=null,V=null,J=null;const re=new sp,ie=t.getContextAttributes();let K=null,Ne=null;const G=[],se=[],He=new Ie;let Fe=null;const Xe=new Lt;Xe.layers.enable(1),Xe.viewport=new ht;const be=new Lt;be.layers.enable(2),be.viewport=new ht;const ta=[Xe,be],pn=new tp;pn.layers.enable(1),pn.layers.enable(2);let mr=null,bp=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ci){let Ep=G[ci];return Ep===void 0&&(Ep=new qr,G[ci]=Ep),Ep.getTargetRaySpace()},this.getControllerGrip=function(ci){let Ep=G[ci];return Ep===void 0&&(Ep=new qr,G[ci]=Ep),Ep.getGripSpace()},this.getHand=function(ci){let Ep=G[ci];return Ep===void 0&&(Ep=new qr,G[ci]=Ep),Ep.getHandSpace()};function Sp(ci){const Ep=se.indexOf(ci.inputSource);if(Ep===-1)return;const o0=G[Ep];o0!==void 0&&(o0.update(ci.inputSource,ci.frame,S||d),o0.dispatchEvent({type:ci.type,data:ci.inputSource}))}function _r(){o.removeEventListener("select",Sp),o.removeEventListener("selectstart",Sp),o.removeEventListener("selectend",Sp),o.removeEventListener("squeeze",Sp),o.removeEventListener("squeezestart",Sp),o.removeEventListener("squeezeend",Sp),o.removeEventListener("end",_r),o.removeEventListener("inputsourceschange",xs);for(let ci=0;ci<G.length;ci++){const Ep=se[ci];Ep!==null&&(se[ci]=null,G[ci].disconnect(Ep))}mr=null,bp=null,re.reset(),e.setRenderTarget(K),V=null,j=null,C=null,o=null,Ne=null,qp.stop(),a.isPresenting=!1,e.setPixelRatio(Fe),e.setSize(He.width,He.height,!1),a.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ci){c=ci,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ci){p=ci,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return S||d},this.setReferenceSpace=function(ci){S=ci},this.getBaseLayer=function(){return j!==null?j:V},this.getBinding=function(){return C},this.getFrame=function(){return J},this.getSession=function(){return o},this.setSession=async function(ci){if(o=ci,o!==null){if(K=e.getRenderTarget(),o.addEventListener("select",Sp),o.addEventListener("selectstart",Sp),o.addEventListener("selectend",Sp),o.addEventListener("squeeze",Sp),o.addEventListener("squeezestart",Sp),o.addEventListener("squeezeend",Sp),o.addEventListener("end",_r),o.addEventListener("inputsourceschange",xs),ie.xrCompatible!==!0&&await t.makeXRCompatible(),Fe=e.getPixelRatio(),e.getSize(He),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Ep={antialias:o.renderState.layers===void 0?ie.antialias:!0,alpha:!0,depth:ie.depth,stencil:ie.stencil,framebufferScaleFactor:c};V=new XRWebGLLayer(o,t,Ep),o.updateRenderState({baseLayer:V}),e.setPixelRatio(1),e.setSize(V.framebufferWidth,V.framebufferHeight,!1),Ne=new Cn(V.framebufferWidth,V.framebufferHeight,{format:Ft,type:un,colorSpace:e.outputColorSpace,stencilBuffer:ie.stencil})}else{let Ep=null,o0=null,w0=null;ie.depth&&(w0=ie.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ep=ie.stencil?si:Rn,o0=ie.stencil?wn:on);const a0={colorFormat:t.RGBA8,depthFormat:w0,scaleFactor:c};C=new XRWebGLBinding(o,t),j=C.createProjectionLayer(a0),o.updateRenderState({layers:[j]}),e.setPixelRatio(1),e.setSize(j.textureWidth,j.textureHeight,!1),Ne=new Cn(j.textureWidth,j.textureHeight,{format:Ft,type:un,depthTexture:new To(j.textureWidth,j.textureHeight,o0,void 0,void 0,void 0,void 0,void 0,void 0,Ep),stencilBuffer:ie.stencil,colorSpace:e.outputColorSpace,samples:ie.antialias?4:0});const P0=e.properties.get(Ne);P0.__ignoreDepthValues=j.ignoreDepthValues}Ne.isXRRenderTarget=!0,this.setFoveation(_),S=null,d=await o.requestReferenceSpace(p),qp.setContext(o),qp.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function xs(ci){for(let Ep=0;Ep<ci.removed.length;Ep++){const o0=ci.removed[Ep],w0=se.indexOf(o0);w0>=0&&(se[w0]=null,G[w0].disconnect(o0))}for(let Ep=0;Ep<ci.added.length;Ep++){const o0=ci.added[Ep];let w0=se.indexOf(o0);if(w0===-1){for(let P0=0;P0<G.length;P0++)if(P0>=se.length){se.push(o0),w0=P0;break}else if(se[P0]===null){se[P0]=o0,w0=P0;break}if(w0===-1)break}const a0=G[w0];a0&&a0.connect(o0)}}const ne=new U,zl=new U;function Hl(ci,Ep,o0){ne.setFromMatrixPosition(Ep.matrixWorld),zl.setFromMatrixPosition(o0.matrixWorld);const w0=ne.distanceTo(zl),a0=Ep.projectionMatrix.elements,P0=o0.projectionMatrix.elements,am=a0[14]/(a0[10]-1),sm=a0[14]/(a0[10]+1),C0=(a0[9]+1)/a0[5],Fm=(a0[9]-1)/a0[5],Zm=(a0[8]-1)/a0[0],p1=(P0[8]+1)/P0[0],A1=am*Zm,T1=am*p1,Tm=w0/(-Zm+p1),x1=Tm*-Zm;Ep.matrixWorld.decompose(ci.position,ci.quaternion,ci.scale),ci.translateX(x1),ci.translateZ(Tm),ci.matrixWorld.compose(ci.position,ci.quaternion,ci.scale),ci.matrixWorldInverse.copy(ci.matrixWorld).invert();const S1=am+Tm,p0=sm+Tm,zp=A1-x1,om=T1+(w0-x1),bm=C0*sm/p0*S1,i1=Fm*sm/p0*S1;ci.projectionMatrix.makePerspective(zp,om,bm,i1,S1,p0),ci.projectionMatrixInverse.copy(ci.projectionMatrix).invert()}function pr(ci,Ep){Ep===null?ci.matrixWorld.copy(ci.matrix):ci.matrixWorld.multiplyMatrices(Ep.matrixWorld,ci.matrix),ci.matrixWorldInverse.copy(ci.matrixWorld).invert()}this.updateCamera=function(ci){if(o===null)return;re.texture!==null&&(ci.near=re.depthNear,ci.far=re.depthFar),pn.near=be.near=Xe.near=ci.near,pn.far=be.far=Xe.far=ci.far,(mr!==pn.near||bp!==pn.far)&&(o.updateRenderState({depthNear:pn.near,depthFar:pn.far}),mr=pn.near,bp=pn.far,Xe.near=mr,Xe.far=bp,be.near=mr,be.far=bp,Xe.updateProjectionMatrix(),be.updateProjectionMatrix(),ci.updateProjectionMatrix());const Ep=ci.parent,o0=pn.cameras;pr(pn,Ep);for(let w0=0;w0<o0.length;w0++)pr(o0[w0],Ep);o0.length===2?Hl(pn,Xe,be):pn.projectionMatrix.copy(Xe.projectionMatrix),Hp(ci,pn,Ep)};function Hp(ci,Ep,o0){o0===null?ci.matrix.copy(Ep.matrixWorld):(ci.matrix.copy(o0.matrixWorld),ci.matrix.invert(),ci.matrix.multiply(Ep.matrixWorld)),ci.matrix.decompose(ci.position,ci.quaternion,ci.scale),ci.updateMatrixWorld(!0),ci.projectionMatrix.copy(Ep.projectionMatrix),ci.projectionMatrixInverse.copy(Ep.projectionMatrixInverse),ci.isPerspectiveCamera&&(ci.fov=gi*2*Math.atan(1/ci.projectionMatrix.elements[5]),ci.zoom=1)}this.getCamera=function(){return pn},this.getFoveation=function(){if(!(j===null&&V===null))return _},this.setFoveation=function(ci){_=ci,j!==null&&(j.fixedFoveation=ci),V!==null&&V.fixedFoveation!==void 0&&(V.fixedFoveation=ci)},this.hasDepthSensing=function(){return re.texture!==null};let Gl=null;function Ip(ci,Ep){if(A=Ep.getViewerPose(S||d),J=Ep,A!==null){const o0=A.views;V!==null&&(e.setRenderTargetFramebuffer(Ne,V.framebuffer),e.setRenderTarget(Ne));let w0=!1;o0.length!==pn.cameras.length&&(pn.cameras.length=0,w0=!0);for(let P0=0;P0<o0.length;P0++){const am=o0[P0];let sm=null;if(V!==null)sm=V.getViewport(am);else{const Fm=C.getViewSubImage(j,am);sm=Fm.viewport,P0===0&&(e.setRenderTargetTextures(Ne,Fm.colorTexture,j.ignoreDepthValues?void 0:Fm.depthStencilTexture),e.setRenderTarget(Ne))}let C0=ta[P0];C0===void 0&&(C0=new Lt,C0.layers.enable(P0),C0.viewport=new ht,ta[P0]=C0),C0.matrix.fromArray(am.transform.matrix),C0.matrix.decompose(C0.position,C0.quaternion,C0.scale),C0.projectionMatrix.fromArray(am.projectionMatrix),C0.projectionMatrixInverse.copy(C0.projectionMatrix).invert(),C0.viewport.set(sm.x,sm.y,sm.width,sm.height),P0===0&&(pn.matrix.copy(C0.matrix),pn.matrix.decompose(pn.position,pn.quaternion,pn.scale)),w0===!0&&pn.cameras.push(C0)}const a0=o.enabledFeatures;if(a0&&a0.includes("depth-sensing")){const P0=C.getDepthInformation(o0[0]);P0&&P0.isValid&&P0.texture&&re.init(e,P0,o.renderState)}}for(let o0=0;o0<G.length;o0++){const w0=se[o0],a0=G[o0];w0!==null&&a0!==void 0&&a0.update(w0,Ep,S||d)}re.render(e,pn),Gl&&Gl(ci,Ep),Ep.detectedPlanes&&a.dispatchEvent({type:"planesdetected",data:Ep}),J=null}const qp=new yo;qp.setAnimationLoop(Ip),this.setAnimationLoop=function(ci){Gl=ci},this.dispose=function(){}}}const En=new $t,op=new st;function lp(r,e){function t(ie,K){ie.matrixAutoUpdate===!0&&ie.updateMatrix(),K.value.copy(ie.matrix)}function a(ie,K){K.color.getRGB(ie.fogColor.value,xo(r)),K.isFog?(ie.fogNear.value=K.near,ie.fogFar.value=K.far):K.isFogExp2&&(ie.fogDensity.value=K.density)}function o(ie,K,Ne,G,se){K.isMeshBasicMaterial||K.isMeshLambertMaterial?c(ie,K):K.isMeshToonMaterial?(c(ie,K),C(ie,K)):K.isMeshPhongMaterial?(c(ie,K),A(ie,K)):K.isMeshStandardMaterial?(c(ie,K),j(ie,K),K.isMeshPhysicalMaterial&&V(ie,K,se)):K.isMeshMatcapMaterial?(c(ie,K),J(ie,K)):K.isMeshDepthMaterial?c(ie,K):K.isMeshDistanceMaterial?(c(ie,K),re(ie,K)):K.isMeshNormalMaterial?c(ie,K):K.isLineBasicMaterial?(d(ie,K),K.isLineDashedMaterial&&p(ie,K)):K.isPointsMaterial?_(ie,K,Ne,G):K.isSpriteMaterial?S(ie,K):K.isShadowMaterial?(ie.color.value.copy(K.color),ie.opacity.value=K.opacity):K.isShaderMaterial&&(K.uniformsNeedUpdate=!1)}function c(ie,K){ie.opacity.value=K.opacity,K.color&&ie.diffuse.value.copy(K.color),K.emissive&&ie.emissive.value.copy(K.emissive).multiplyScalar(K.emissiveIntensity),K.map&&(ie.map.value=K.map,t(K.map,ie.mapTransform)),K.alphaMap&&(ie.alphaMap.value=K.alphaMap,t(K.alphaMap,ie.alphaMapTransform)),K.bumpMap&&(ie.bumpMap.value=K.bumpMap,t(K.bumpMap,ie.bumpMapTransform),ie.bumpScale.value=K.bumpScale,K.side===Et&&(ie.bumpScale.value*=-1)),K.normalMap&&(ie.normalMap.value=K.normalMap,t(K.normalMap,ie.normalMapTransform),ie.normalScale.value.copy(K.normalScale),K.side===Et&&ie.normalScale.value.negate()),K.displacementMap&&(ie.displacementMap.value=K.displacementMap,t(K.displacementMap,ie.displacementMapTransform),ie.displacementScale.value=K.displacementScale,ie.displacementBias.value=K.displacementBias),K.emissiveMap&&(ie.emissiveMap.value=K.emissiveMap,t(K.emissiveMap,ie.emissiveMapTransform)),K.specularMap&&(ie.specularMap.value=K.specularMap,t(K.specularMap,ie.specularMapTransform)),K.alphaTest>0&&(ie.alphaTest.value=K.alphaTest);const Ne=e.get(K),G=Ne.envMap,se=Ne.envMapRotation;if(G&&(ie.envMap.value=G,En.copy(se),En.x*=-1,En.y*=-1,En.z*=-1,G.isCubeTexture&&G.isRenderTargetTexture===!1&&(En.y*=-1,En.z*=-1),ie.envMapRotation.value.setFromMatrix4(op.makeRotationFromEuler(En)),ie.flipEnvMap.value=G.isCubeTexture&&G.isRenderTargetTexture===!1?-1:1,ie.reflectivity.value=K.reflectivity,ie.ior.value=K.ior,ie.refractionRatio.value=K.refractionRatio),K.lightMap){ie.lightMap.value=K.lightMap;const He=r._useLegacyLights===!0?Math.PI:1;ie.lightMapIntensity.value=K.lightMapIntensity*He,t(K.lightMap,ie.lightMapTransform)}K.aoMap&&(ie.aoMap.value=K.aoMap,ie.aoMapIntensity.value=K.aoMapIntensity,t(K.aoMap,ie.aoMapTransform))}function d(ie,K){ie.diffuse.value.copy(K.color),ie.opacity.value=K.opacity,K.map&&(ie.map.value=K.map,t(K.map,ie.mapTransform))}function p(ie,K){ie.dashSize.value=K.dashSize,ie.totalSize.value=K.dashSize+K.gapSize,ie.scale.value=K.scale}function _(ie,K,Ne,G){ie.diffuse.value.copy(K.color),ie.opacity.value=K.opacity,ie.size.value=K.size*Ne,ie.scale.value=G*.5,K.map&&(ie.map.value=K.map,t(K.map,ie.uvTransform)),K.alphaMap&&(ie.alphaMap.value=K.alphaMap,t(K.alphaMap,ie.alphaMapTransform)),K.alphaTest>0&&(ie.alphaTest.value=K.alphaTest)}function S(ie,K){ie.diffuse.value.copy(K.color),ie.opacity.value=K.opacity,ie.rotation.value=K.rotation,K.map&&(ie.map.value=K.map,t(K.map,ie.mapTransform)),K.alphaMap&&(ie.alphaMap.value=K.alphaMap,t(K.alphaMap,ie.alphaMapTransform)),K.alphaTest>0&&(ie.alphaTest.value=K.alphaTest)}function A(ie,K){ie.specular.value.copy(K.specular),ie.shininess.value=Math.max(K.shininess,1e-4)}function C(ie,K){K.gradientMap&&(ie.gradientMap.value=K.gradientMap)}function j(ie,K){ie.metalness.value=K.metalness,K.metalnessMap&&(ie.metalnessMap.value=K.metalnessMap,t(K.metalnessMap,ie.metalnessMapTransform)),ie.roughness.value=K.roughness,K.roughnessMap&&(ie.roughnessMap.value=K.roughnessMap,t(K.roughnessMap,ie.roughnessMapTransform)),e.get(K).envMap&&(ie.envMapIntensity.value=K.envMapIntensity)}function V(ie,K,Ne){ie.ior.value=K.ior,K.sheen>0&&(ie.sheenColor.value.copy(K.sheenColor).multiplyScalar(K.sheen),ie.sheenRoughness.value=K.sheenRoughness,K.sheenColorMap&&(ie.sheenColorMap.value=K.sheenColorMap,t(K.sheenColorMap,ie.sheenColorMapTransform)),K.sheenRoughnessMap&&(ie.sheenRoughnessMap.value=K.sheenRoughnessMap,t(K.sheenRoughnessMap,ie.sheenRoughnessMapTransform))),K.clearcoat>0&&(ie.clearcoat.value=K.clearcoat,ie.clearcoatRoughness.value=K.clearcoatRoughness,K.clearcoatMap&&(ie.clearcoatMap.value=K.clearcoatMap,t(K.clearcoatMap,ie.clearcoatMapTransform)),K.clearcoatRoughnessMap&&(ie.clearcoatRoughnessMap.value=K.clearcoatRoughnessMap,t(K.clearcoatRoughnessMap,ie.clearcoatRoughnessMapTransform)),K.clearcoatNormalMap&&(ie.clearcoatNormalMap.value=K.clearcoatNormalMap,t(K.clearcoatNormalMap,ie.clearcoatNormalMapTransform),ie.clearcoatNormalScale.value.copy(K.clearcoatNormalScale),K.side===Et&&ie.clearcoatNormalScale.value.negate())),K.iridescence>0&&(ie.iridescence.value=K.iridescence,ie.iridescenceIOR.value=K.iridescenceIOR,ie.iridescenceThicknessMinimum.value=K.iridescenceThicknessRange[0],ie.iridescenceThicknessMaximum.value=K.iridescenceThicknessRange[1],K.iridescenceMap&&(ie.iridescenceMap.value=K.iridescenceMap,t(K.iridescenceMap,ie.iridescenceMapTransform)),K.iridescenceThicknessMap&&(ie.iridescenceThicknessMap.value=K.iridescenceThicknessMap,t(K.iridescenceThicknessMap,ie.iridescenceThicknessMapTransform))),K.transmission>0&&(ie.transmission.value=K.transmission,ie.transmissionSamplerMap.value=Ne.texture,ie.transmissionSamplerSize.value.set(Ne.width,Ne.height),K.transmissionMap&&(ie.transmissionMap.value=K.transmissionMap,t(K.transmissionMap,ie.transmissionMapTransform)),ie.thickness.value=K.thickness,K.thicknessMap&&(ie.thicknessMap.value=K.thicknessMap,t(K.thicknessMap,ie.thicknessMapTransform)),ie.attenuationDistance.value=K.attenuationDistance,ie.attenuationColor.value.copy(K.attenuationColor)),K.anisotropy>0&&(ie.anisotropyVector.value.set(K.anisotropy*Math.cos(K.anisotropyRotation),K.anisotropy*Math.sin(K.anisotropyRotation)),K.anisotropyMap&&(ie.anisotropyMap.value=K.anisotropyMap,t(K.anisotropyMap,ie.anisotropyMapTransform))),ie.specularIntensity.value=K.specularIntensity,ie.specularColor.value.copy(K.specularColor),K.specularColorMap&&(ie.specularColorMap.value=K.specularColorMap,t(K.specularColorMap,ie.specularColorMapTransform)),K.specularIntensityMap&&(ie.specularIntensityMap.value=K.specularIntensityMap,t(K.specularIntensityMap,ie.specularIntensityMapTransform))}function J(ie,K){K.matcap&&(ie.matcap.value=K.matcap)}function re(ie,K){const Ne=e.get(K).light;ie.referencePosition.value.setFromMatrixPosition(Ne.matrixWorld),ie.nearDistance.value=Ne.shadow.camera.near,ie.farDistance.value=Ne.shadow.camera.far}return{refreshFogUniforms:a,refreshMaterialUniforms:o}}function cp(r,e,t,a){let o={},c={},d=[];const p=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function _(Ne,G){const se=G.program;a.uniformBlockBinding(Ne,se)}function S(Ne,G){let se=o[Ne.id];se===void 0&&(J(Ne),se=A(Ne),o[Ne.id]=se,Ne.addEventListener("dispose",ie));const He=G.program;a.updateUBOMapping(Ne,He);const Fe=e.render.frame;c[Ne.id]!==Fe&&(j(Ne),c[Ne.id]=Fe)}function A(Ne){const G=C();Ne.__bindingPointIndex=G;const se=r.createBuffer(),He=Ne.__size,Fe=Ne.usage;return r.bindBuffer(r.UNIFORM_BUFFER,se),r.bufferData(r.UNIFORM_BUFFER,He,Fe),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,G,se),se}function C(){for(let Ne=0;Ne<p;Ne++)if(d.indexOf(Ne)===-1)return d.push(Ne),Ne;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function j(Ne){const G=o[Ne.id],se=Ne.uniforms,He=Ne.__cache;r.bindBuffer(r.UNIFORM_BUFFER,G);for(let Fe=0,Xe=se.length;Fe<Xe;Fe++){const be=Array.isArray(se[Fe])?se[Fe]:[se[Fe]];for(let ta=0,pn=be.length;ta<pn;ta++){const mr=be[ta];if(V(mr,Fe,ta,He)===!0){const bp=mr.__offset,Sp=Array.isArray(mr.value)?mr.value:[mr.value];let _r=0;for(let xs=0;xs<Sp.length;xs++){const ne=Sp[xs],zl=re(ne);typeof ne=="number"||typeof ne=="boolean"?(mr.__data[0]=ne,r.bufferSubData(r.UNIFORM_BUFFER,bp+_r,mr.__data)):ne.isMatrix3?(mr.__data[0]=ne.elements[0],mr.__data[1]=ne.elements[1],mr.__data[2]=ne.elements[2],mr.__data[3]=0,mr.__data[4]=ne.elements[3],mr.__data[5]=ne.elements[4],mr.__data[6]=ne.elements[5],mr.__data[7]=0,mr.__data[8]=ne.elements[6],mr.__data[9]=ne.elements[7],mr.__data[10]=ne.elements[8],mr.__data[11]=0):(ne.toArray(mr.__data,_r),_r+=zl.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,bp,mr.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function V(Ne,G,se,He){const Fe=Ne.value,Xe=G+"_"+se;if(He[Xe]===void 0)return typeof Fe=="number"||typeof Fe=="boolean"?He[Xe]=Fe:He[Xe]=Fe.clone(),!0;{const be=He[Xe];if(typeof Fe=="number"||typeof Fe=="boolean"){if(be!==Fe)return He[Xe]=Fe,!0}else if(be.equals(Fe)===!1)return be.copy(Fe),!0}return!1}function J(Ne){const G=Ne.uniforms;let se=0;const He=16;for(let Xe=0,be=G.length;Xe<be;Xe++){const ta=Array.isArray(G[Xe])?G[Xe]:[G[Xe]];for(let pn=0,mr=ta.length;pn<mr;pn++){const bp=ta[pn],Sp=Array.isArray(bp.value)?bp.value:[bp.value];for(let _r=0,xs=Sp.length;_r<xs;_r++){const ne=Sp[_r],zl=re(ne),Hl=se%He;Hl!==0&&He-Hl<zl.boundary&&(se+=He-Hl),bp.__data=new Float32Array(zl.storage/Float32Array.BYTES_PER_ELEMENT),bp.__offset=se,se+=zl.storage}}}const Fe=se%He;return Fe>0&&(se+=He-Fe),Ne.__size=se,Ne.__cache={},this}function re(Ne){const G={boundary:0,storage:0};return typeof Ne=="number"||typeof Ne=="boolean"?(G.boundary=4,G.storage=4):Ne.isVector2?(G.boundary=8,G.storage=8):Ne.isVector3||Ne.isColor?(G.boundary=16,G.storage=12):Ne.isVector4?(G.boundary=16,G.storage=16):Ne.isMatrix3?(G.boundary=48,G.storage=48):Ne.isMatrix4?(G.boundary=64,G.storage=64):Ne.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Ne),G}function ie(Ne){const G=Ne.target;G.removeEventListener("dispose",ie);const se=d.indexOf(G.__bindingPointIndex);d.splice(se,1),r.deleteBuffer(o[G.id]),delete o[G.id],delete c[G.id]}function K(){for(const Ne in o)r.deleteBuffer(o[Ne]);d=[],o={},c={}}return{bind:_,update:S,dispose:K}}class Po{constructor(e={}){const{canvas:t=Zl(),context:a=null,depth:o=!0,stencil:c=!0,alpha:d=!1,antialias:p=!1,premultipliedAlpha:_=!0,preserveDrawingBuffer:S=!1,powerPreference:A="default",failIfMajorPerformanceCaveat:C=!1}=e;this.isWebGLRenderer=!0;let j;a!==null?j=a.getContextAttributes().alpha:j=d;const V=new Uint32Array(4),J=new Int32Array(4);let re=null,ie=null;const K=[],Ne=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Bt,this._useLegacyLights=!1,this.toneMapping=cn,this.toneMappingExposure=1;const G=this;let se=!1,He=0,Fe=0,Xe=null,be=-1,ta=null;const pn=new ht,mr=new ht;let bp=null;const Sp=new qe(0);let _r=0,xs=t.width,ne=t.height,zl=1,Hl=null,pr=null;const Hp=new ht(0,0,xs,ne),Gl=new ht(0,0,xs,ne);let Ip=!1;const qp=new Eo;let ci=!1,Ep=!1,o0=null;const w0=new st,a0=new Ie,P0=new U,am={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function sm(){return Xe===null?zl:1}let C0=a;function Fm(c0,F0){for(let Z=0;Z<c0.length;Z++){const Fl=c0[Z],Wl=t.getContext(Fl,F0);if(Wl!==null)return Wl}return null}try{const c0={alpha:!0,depth:o,stencil:c,antialias:p,premultipliedAlpha:_,preserveDrawingBuffer:S,powerPreference:A,failIfMajorPerformanceCaveat:C};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${os}`),t.addEventListener("webglcontextlost",j1,!1),t.addEventListener("webglcontextrestored",q0,!1),t.addEventListener("webglcontextcreationerror",d1,!1),C0===null){const F0=["webgl2","webgl","experimental-webgl"];if(G.isWebGL1Renderer===!0&&F0.shift(),C0=Fm(F0,c0),C0===null)throw Fm(F0)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&C0 instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),C0.getShaderPrecisionFormat===void 0&&(C0.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(c0){throw console.error("THREE.WebGLRenderer: "+c0.message),c0}let Zm,p1,A1,T1,Tm,x1,S1,p0,zp,om,bm,i1,r1,Gp,i0,l0,im,dm,pm,Dm,Gm,qm,vm,r0;function e1(){Zm=new mf(C0),p1=new lf(C0,Zm,e),Zm.init(p1),qm=new ep(C0,Zm,p1),A1=new Jd(C0,Zm,p1),T1=new vf(C0),Tm=new Bd,x1=new Qd(C0,Zm,A1,Tm,p1,qm,T1),S1=new uf(G),p0=new pf(G),zp=new Ec(C0,p1),vm=new af(C0,Zm,zp,p1),om=new _f(C0,zp,T1,vm),bm=new Ef(C0,om,zp,T1),pm=new Sf(C0,p1,x1),l0=new cf(Tm),i1=new Od(G,S1,p0,Zm,p1,vm,l0),r1=new lp(G,Tm),Gp=new Gd,i0=new Yd(Zm,p1),dm=new sf(G,S1,p0,A1,bm,j,_),im=new $d(G,bm,p1),r0=new cp(C0,T1,p1,A1),Dm=new of(C0,Zm,T1,p1),Gm=new gf(C0,Zm,T1,p1),T1.programs=i1.programs,G.capabilities=p1,G.extensions=Zm,G.properties=Tm,G.renderLists=Gp,G.shadowMap=im,G.state=A1,G.info=T1}e1();const _1=new ap(G,C0);this.xr=_1,this.getContext=function(){return C0},this.getContextAttributes=function(){return C0.getContextAttributes()},this.forceContextLoss=function(){const c0=Zm.get("WEBGL_lose_context");c0&&c0.loseContext()},this.forceContextRestore=function(){const c0=Zm.get("WEBGL_lose_context");c0&&c0.restoreContext()},this.getPixelRatio=function(){return zl},this.setPixelRatio=function(c0){c0!==void 0&&(zl=c0,this.setSize(xs,ne,!1))},this.getSize=function(c0){return c0.set(xs,ne)},this.setSize=function(c0,F0,Z=!0){if(_1.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}xs=c0,ne=F0,t.width=Math.floor(c0*zl),t.height=Math.floor(F0*zl),Z===!0&&(t.style.width=c0+"px",t.style.height=F0+"px"),this.setViewport(0,0,c0,F0)},this.getDrawingBufferSize=function(c0){return c0.set(xs*zl,ne*zl).floor()},this.setDrawingBufferSize=function(c0,F0,Z){xs=c0,ne=F0,zl=Z,t.width=Math.floor(c0*Z),t.height=Math.floor(F0*Z),this.setViewport(0,0,c0,F0)},this.getCurrentViewport=function(c0){return c0.copy(pn)},this.getViewport=function(c0){return c0.copy(Hp)},this.setViewport=function(c0,F0,Z,Fl){c0.isVector4?Hp.set(c0.x,c0.y,c0.z,c0.w):Hp.set(c0,F0,Z,Fl),A1.viewport(pn.copy(Hp).multiplyScalar(zl).round())},this.getScissor=function(c0){return c0.copy(Gl)},this.setScissor=function(c0,F0,Z,Fl){c0.isVector4?Gl.set(c0.x,c0.y,c0.z,c0.w):Gl.set(c0,F0,Z,Fl),A1.scissor(mr.copy(Gl).multiplyScalar(zl).round())},this.getScissorTest=function(){return Ip},this.setScissorTest=function(c0){A1.setScissorTest(Ip=c0)},this.setOpaqueSort=function(c0){Hl=c0},this.setTransparentSort=function(c0){pr=c0},this.getClearColor=function(c0){return c0.copy(dm.getClearColor())},this.setClearColor=function(){dm.setClearColor.apply(dm,arguments)},this.getClearAlpha=function(){return dm.getClearAlpha()},this.setClearAlpha=function(){dm.setClearAlpha.apply(dm,arguments)},this.clear=function(c0=!0,F0=!0,Z=!0){let Fl=0;if(c0){let Wl=!1;if(Xe!==null){const x0=Xe.texture.format;Wl=x0===oo||x0===ao||x0===so}if(Wl){const x0=Xe.texture.type,S0=x0===un||x0===on||x0===ls||x0===wn||x0===io||x0===ro,Mm=dm.getClearColor(),km=dm.getClearAlpha(),wm=Mm.r,Xm=Mm.g,Nm=Mm.b;S0?(V[0]=wm,V[1]=Xm,V[2]=Nm,V[3]=km,C0.clearBufferuiv(C0.COLOR,0,V)):(J[0]=wm,J[1]=Xm,J[2]=Nm,J[3]=km,C0.clearBufferiv(C0.COLOR,0,J))}else Fl|=C0.COLOR_BUFFER_BIT}F0&&(Fl|=C0.DEPTH_BUFFER_BIT),Z&&(Fl|=C0.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),C0.clear(Fl)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",j1,!1),t.removeEventListener("webglcontextrestored",q0,!1),t.removeEventListener("webglcontextcreationerror",d1,!1),Gp.dispose(),i0.dispose(),Tm.dispose(),S1.dispose(),p0.dispose(),bm.dispose(),vm.dispose(),r0.dispose(),i1.dispose(),_1.dispose(),_1.removeEventListener("sessionstart",Dg),_1.removeEventListener("sessionend",Eg),o0&&(o0.dispose(),o0=null),ev.stop()};function j1(c0){c0.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),se=!0}function q0(){console.log("THREE.WebGLRenderer: Context Restored."),se=!1;const c0=T1.autoReset,F0=im.enabled,Z=im.autoUpdate,Fl=im.needsUpdate,Wl=im.type;e1(),T1.autoReset=c0,im.enabled=F0,im.autoUpdate=Z,im.needsUpdate=Fl,im.type=Wl}function d1(c0){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",c0.statusMessage)}function tm(c0){const F0=c0.target;F0.removeEventListener("dispose",tm),o1(F0)}function o1(c0){jm(c0),Tm.remove(c0)}function jm(c0){const F0=Tm.get(c0).programs;F0!==void 0&&(F0.forEach(function(Z){i1.releaseProgram(Z)}),c0.isShaderMaterial&&i1.releaseShaderCache(c0))}this.renderBufferDirect=function(c0,F0,Z,Fl,Wl,x0){F0===null&&(F0=am);const S0=Wl.isMesh&&Wl.matrixWorld.determinant()<0,Mm=ag(c0,F0,Z,Fl,Wl);A1.setMaterial(Fl,S0);let km=Z.index,wm=1;if(Fl.wireframe===!0){if(km=om.getWireframeAttribute(Z),km===void 0)return;wm=2}const Xm=Z.drawRange,Nm=Z.attributes.position;let m1=Xm.start*wm,N1=(Xm.start+Xm.count)*wm;x0!==null&&(m1=Math.max(m1,x0.start*wm),N1=Math.min(N1,(x0.start+x0.count)*wm)),km!==null?(m1=Math.max(m1,0),N1=Math.min(N1,km.count)):Nm!=null&&(m1=Math.max(m1,0),N1=Math.min(N1,Nm.count));const H1=N1-m1;if(H1<0||H1===1/0)return;vm.setup(Wl,Fl,Mm,Z,km);let Sg,bg=Dm;if(km!==null&&(Sg=zp.get(km),bg=Gm,bg.setIndex(Sg)),Wl.isMesh)Fl.wireframe===!0?(A1.setLineWidth(Fl.wireframeLinewidth*sm()),bg.setMode(C0.LINES)):bg.setMode(C0.TRIANGLES);else if(Wl.isLine){let q1=Fl.linewidth;q1===void 0&&(q1=1),A1.setLineWidth(q1*sm()),Wl.isLineSegments?bg.setMode(C0.LINES):Wl.isLineLoop?bg.setMode(C0.LINE_LOOP):bg.setMode(C0.LINE_STRIP)}else Wl.isPoints?bg.setMode(C0.POINTS):Wl.isSprite&&bg.setMode(C0.TRIANGLES);if(Wl.isBatchedMesh)bg.renderMultiDraw(Wl._multiDrawStarts,Wl._multiDrawCounts,Wl._multiDrawCount);else if(Wl.isInstancedMesh)bg.renderInstances(m1,H1,Wl.count);else if(Z.isInstancedBufferGeometry){const q1=Z._maxInstanceCount!==void 0?Z._maxInstanceCount:1/0,vg=Math.min(Z.instanceCount,q1);bg.renderInstances(m1,H1,vg)}else bg.render(m1,H1)};function l1(c0,F0,Z){c0.transparent===!0&&c0.side===Gt&&c0.forceSinglePass===!1?(c0.side=Et,c0.needsUpdate=!0,oy(c0,F0,Z),c0.side=hn,c0.needsUpdate=!0,oy(c0,F0,Z),c0.side=Gt):oy(c0,F0,Z)}this.compile=function(c0,F0,Z=null){Z===null&&(Z=c0),ie=i0.get(Z),ie.init(),Ne.push(ie),Z.traverseVisible(function(Wl){Wl.isLight&&Wl.layers.test(F0.layers)&&(ie.pushLight(Wl),Wl.castShadow&&ie.pushShadow(Wl))}),c0!==Z&&c0.traverseVisible(function(Wl){Wl.isLight&&Wl.layers.test(F0.layers)&&(ie.pushLight(Wl),Wl.castShadow&&ie.pushShadow(Wl))}),ie.setupLights(G._useLegacyLights);const Fl=new Set;return c0.traverse(function(Wl){const x0=Wl.material;if(x0)if(Array.isArray(x0))for(let S0=0;S0<x0.length;S0++){const Mm=x0[S0];l1(Mm,Z,Wl),Fl.add(Mm)}else l1(x0,Z,Wl),Fl.add(x0)}),Ne.pop(),ie=null,Fl},this.compileAsync=function(c0,F0,Z=null){const Fl=this.compile(c0,F0,Z);return new Promise(Wl=>{function x0(){if(Fl.forEach(function(S0){Tm.get(S0).currentProgram.isReady()&&Fl.delete(S0)}),Fl.size===0){Wl(c0);return}setTimeout(x0,10)}Zm.get("KHR_parallel_shader_compile")!==null?x0():setTimeout(x0,10)})};let gg=null;function Jg(c0){gg&&gg(c0)}function Dg(){ev.stop()}function Eg(){ev.start()}const ev=new yo;ev.setAnimationLoop(Jg),typeof self<"u"&&ev.setContext(self),this.setAnimationLoop=function(c0){gg=c0,_1.setAnimationLoop(c0),c0===null?ev.stop():ev.start()},_1.addEventListener("sessionstart",Dg),_1.addEventListener("sessionend",Eg),this.render=function(c0,F0){if(F0!==void 0&&F0.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(se===!0)return;c0.matrixWorldAutoUpdate===!0&&c0.updateMatrixWorld(),F0.parent===null&&F0.matrixWorldAutoUpdate===!0&&F0.updateMatrixWorld(),_1.enabled===!0&&_1.isPresenting===!0&&(_1.cameraAutoUpdate===!0&&_1.updateCamera(F0),F0=_1.getCamera()),c0.isScene===!0&&c0.onBeforeRender(G,c0,F0,Xe),ie=i0.get(c0,Ne.length),ie.init(),Ne.push(ie),w0.multiplyMatrices(F0.projectionMatrix,F0.matrixWorldInverse),qp.setFromProjectionMatrix(w0),Ep=this.localClippingEnabled,ci=l0.init(this.clippingPlanes,Ep),re=Gp.get(c0,K.length),re.init(),K.push(re),pv(c0,F0,0,G.sortObjects),re.finish(),G.sortObjects===!0&&re.sort(Hl,pr),this.info.render.frame++,ci===!0&&l0.beginShadows();const Z=ie.state.shadowsArray;if(im.render(Z,c0,F0),ci===!0&&l0.endShadows(),this.info.autoReset===!0&&this.info.reset(),(_1.enabled===!1||_1.isPresenting===!1||_1.hasDepthSensing()===!1)&&dm.render(re,c0),ie.setupLights(G._useLegacyLights),F0.isArrayCamera){const Fl=F0.cameras;for(let Wl=0,x0=Fl.length;Wl<x0;Wl++){const S0=Fl[Wl];sv(re,c0,S0,S0.viewport)}}else sv(re,c0,F0);Xe!==null&&(x1.updateMultisampleRenderTarget(Xe),x1.updateRenderTargetMipmap(Xe)),c0.isScene===!0&&c0.onAfterRender(G,c0,F0),vm.resetDefaultState(),be=-1,ta=null,Ne.pop(),Ne.length>0?ie=Ne[Ne.length-1]:ie=null,K.pop(),K.length>0?re=K[K.length-1]:re=null};function pv(c0,F0,Z,Fl){if(c0.visible===!1)return;if(c0.layers.test(F0.layers)){if(c0.isGroup)Z=c0.renderOrder;else if(c0.isLOD)c0.autoUpdate===!0&&c0.update(F0);else if(c0.isLight)ie.pushLight(c0),c0.castShadow&&ie.pushShadow(c0);else if(c0.isSprite){if(!c0.frustumCulled||qp.intersectsSprite(c0)){Fl&&P0.setFromMatrixPosition(c0.matrixWorld).applyMatrix4(w0);const x0=bm.update(c0),S0=c0.material;S0.visible&&re.push(c0,x0,S0,Z,P0.z,null)}}else if((c0.isMesh||c0.isLine||c0.isPoints)&&(!c0.frustumCulled||qp.intersectsObject(c0))){const x0=bm.update(c0),S0=c0.material;if(Fl&&(c0.boundingSphere!==void 0?(c0.boundingSphere===null&&c0.computeBoundingSphere(),P0.copy(c0.boundingSphere.center)):(x0.boundingSphere===null&&x0.computeBoundingSphere(),P0.copy(x0.boundingSphere.center)),P0.applyMatrix4(c0.matrixWorld).applyMatrix4(w0)),Array.isArray(S0)){const Mm=x0.groups;for(let km=0,wm=Mm.length;km<wm;km++){const Xm=Mm[km],Nm=S0[Xm.materialIndex];Nm&&Nm.visible&&re.push(c0,x0,Nm,Z,P0.z,Xm)}}else S0.visible&&re.push(c0,x0,S0,Z,P0.z,null)}}const Wl=c0.children;for(let x0=0,S0=Wl.length;x0<S0;x0++)pv(Wl[x0],F0,Z,Fl)}function sv(c0,F0,Z,Fl){const Wl=c0.opaque,x0=c0.transmissive,S0=c0.transparent;ie.setupLightsView(Z),ci===!0&&l0.setGlobalState(G.clippingPlanes,Z),x0.length>0&&kv(Wl,x0,F0,Z),Fl&&A1.viewport(pn.copy(Fl)),Wl.length>0&&Zv(Wl,F0,Z),x0.length>0&&Zv(x0,F0,Z),S0.length>0&&Zv(S0,F0,Z),A1.buffers.depth.setTest(!0),A1.buffers.depth.setMask(!0),A1.buffers.color.setMask(!0),A1.setPolygonOffset(!1)}function kv(c0,F0,Z,Fl){if((Z.isScene===!0?Z.overrideMaterial:null)!==null)return;const Wl=p1.isWebGL2;o0===null&&(o0=new Cn(1,1,{generateMipmaps:!0,type:Zm.has("EXT_color_buffer_half_float")?_i:un,minFilter:An,samples:Wl?4:0})),G.getDrawingBufferSize(a0),Wl?o0.setSize(a0.x,a0.y):o0.setSize(rr(a0.x),rr(a0.y));const x0=G.getRenderTarget();G.setRenderTarget(o0),G.getClearColor(Sp),_r=G.getClearAlpha(),_r<1&&G.setClearColor(16777215,.5),G.clear();const S0=G.toneMapping;G.toneMapping=cn,Zv(c0,Z,Fl),x1.updateMultisampleRenderTarget(o0),x1.updateRenderTargetMipmap(o0);let Mm=!1;for(let km=0,wm=F0.length;km<wm;km++){const Xm=F0[km],Nm=Xm.object,m1=Xm.geometry,N1=Xm.material,H1=Xm.group;if(N1.side===Gt&&Nm.layers.test(Fl.layers)){const Sg=N1.side;N1.side=Et,N1.needsUpdate=!0,ry(Nm,Z,Fl,m1,N1,H1),N1.side=Sg,N1.needsUpdate=!0,Mm=!0}}Mm===!0&&(x1.updateMultisampleRenderTarget(o0),x1.updateRenderTargetMipmap(o0)),G.setRenderTarget(x0),G.setClearColor(Sp,_r),G.toneMapping=S0}function Zv(c0,F0,Z){const Fl=F0.isScene===!0?F0.overrideMaterial:null;for(let Wl=0,x0=c0.length;Wl<x0;Wl++){const S0=c0[Wl],Mm=S0.object,km=S0.geometry,wm=Fl===null?S0.material:Fl,Xm=S0.group;Mm.layers.test(Z.layers)&&ry(Mm,F0,Z,km,wm,Xm)}}function ry(c0,F0,Z,Fl,Wl,x0){c0.onBeforeRender(G,F0,Z,Fl,Wl,x0),c0.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,c0.matrixWorld),c0.normalMatrix.getNormalMatrix(c0.modelViewMatrix),Wl.onBeforeRender(G,F0,Z,Fl,c0,x0),Wl.transparent===!0&&Wl.side===Gt&&Wl.forceSinglePass===!1?(Wl.side=Et,Wl.needsUpdate=!0,G.renderBufferDirect(Z,F0,Fl,Wl,c0,x0),Wl.side=hn,Wl.needsUpdate=!0,G.renderBufferDirect(Z,F0,Fl,Wl,c0,x0),Wl.side=Gt):G.renderBufferDirect(Z,F0,Fl,Wl,c0,x0),c0.onAfterRender(G,F0,Z,Fl,Wl,x0)}function oy(c0,F0,Z){F0.isScene!==!0&&(F0=am);const Fl=Tm.get(c0),Wl=ie.state.lights,x0=ie.state.shadowsArray,S0=Wl.state.version,Mm=i1.getParameters(c0,Wl.state,x0,F0,Z),km=i1.getProgramCacheKey(Mm);let wm=Fl.programs;Fl.environment=c0.isMeshStandardMaterial?F0.environment:null,Fl.fog=F0.fog,Fl.envMap=(c0.isMeshStandardMaterial?p0:S1).get(c0.envMap||Fl.environment),Fl.envMapRotation=Fl.environment!==null&&c0.envMap===null?F0.environmentRotation:c0.envMapRotation,wm===void 0&&(c0.addEventListener("dispose",tm),wm=new Map,Fl.programs=wm);let Xm=wm.get(km);if(Xm!==void 0){if(Fl.currentProgram===Xm&&Fl.lightsStateVersion===S0)return vv(c0,Mm),Xm}else Mm.uniforms=i1.getUniforms(c0),c0.onBuild(Z,Mm,G),c0.onBeforeCompile(Mm,G),Xm=i1.acquireProgram(Mm,km),wm.set(km,Xm),Fl.uniforms=Mm.uniforms;const Nm=Fl.uniforms;return(!c0.isShaderMaterial&&!c0.isRawShaderMaterial||c0.clipping===!0)&&(Nm.clippingPlanes=l0.uniform),vv(c0,Mm),Fl.needsLights=Mv(c0),Fl.lightsStateVersion=S0,Fl.needsLights&&(Nm.ambientLightColor.value=Wl.state.ambient,Nm.lightProbe.value=Wl.state.probe,Nm.directionalLights.value=Wl.state.directional,Nm.directionalLightShadows.value=Wl.state.directionalShadow,Nm.spotLights.value=Wl.state.spot,Nm.spotLightShadows.value=Wl.state.spotShadow,Nm.rectAreaLights.value=Wl.state.rectArea,Nm.ltc_1.value=Wl.state.rectAreaLTC1,Nm.ltc_2.value=Wl.state.rectAreaLTC2,Nm.pointLights.value=Wl.state.point,Nm.pointLightShadows.value=Wl.state.pointShadow,Nm.hemisphereLights.value=Wl.state.hemi,Nm.directionalShadowMap.value=Wl.state.directionalShadowMap,Nm.directionalShadowMatrix.value=Wl.state.directionalShadowMatrix,Nm.spotShadowMap.value=Wl.state.spotShadowMap,Nm.spotLightMatrix.value=Wl.state.spotLightMatrix,Nm.spotLightMap.value=Wl.state.spotLightMap,Nm.pointShadowMap.value=Wl.state.pointShadowMap,Nm.pointShadowMatrix.value=Wl.state.pointShadowMatrix),Fl.currentProgram=Xm,Fl.uniformsList=null,Xm}function Hv(c0){if(c0.uniformsList===null){const F0=c0.currentProgram.getUniforms();c0.uniformsList=Ji.seqWithValue(F0.seq,c0.uniforms)}return c0.uniformsList}function vv(c0,F0){const Z=Tm.get(c0);Z.outputColorSpace=F0.outputColorSpace,Z.batching=F0.batching,Z.instancing=F0.instancing,Z.instancingColor=F0.instancingColor,Z.instancingMorph=F0.instancingMorph,Z.skinning=F0.skinning,Z.morphTargets=F0.morphTargets,Z.morphNormals=F0.morphNormals,Z.morphColors=F0.morphColors,Z.morphTargetsCount=F0.morphTargetsCount,Z.numClippingPlanes=F0.numClippingPlanes,Z.numIntersection=F0.numClipIntersection,Z.vertexAlphas=F0.vertexAlphas,Z.vertexTangents=F0.vertexTangents,Z.toneMapping=F0.toneMapping}function ag(c0,F0,Z,Fl,Wl){F0.isScene!==!0&&(F0=am),x1.resetTextureUnits();const x0=F0.fog,S0=Fl.isMeshStandardMaterial?F0.environment:null,Mm=Xe===null?G.outputColorSpace:Xe.isXRRenderTarget===!0?Xe.texture.colorSpace:dn,km=(Fl.isMeshStandardMaterial?p0:S1).get(Fl.envMap||S0),wm=Fl.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,Xm=!!Z.attributes.tangent&&(!!Fl.normalMap||Fl.anisotropy>0),Nm=!!Z.morphAttributes.position,m1=!!Z.morphAttributes.normal,N1=!!Z.morphAttributes.color;let H1=cn;Fl.toneMapped&&(Xe===null||Xe.isXRRenderTarget===!0)&&(H1=G.toneMapping);const Sg=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,bg=Sg!==void 0?Sg.length:0,q1=Tm.get(Fl),vg=ie.state.lights;if(ci===!0&&(Ep===!0||c0!==ta)){const $=c0===ta&&Fl.id===be;l0.setState(Fl,c0,$)}let Hg=!1;Fl.version===q1.__version?(q1.needsLights&&q1.lightsStateVersion!==vg.state.version||q1.outputColorSpace!==Mm||Wl.isBatchedMesh&&q1.batching===!1||!Wl.isBatchedMesh&&q1.batching===!0||Wl.isInstancedMesh&&q1.instancing===!1||!Wl.isInstancedMesh&&q1.instancing===!0||Wl.isSkinnedMesh&&q1.skinning===!1||!Wl.isSkinnedMesh&&q1.skinning===!0||Wl.isInstancedMesh&&q1.instancingColor===!0&&Wl.instanceColor===null||Wl.isInstancedMesh&&q1.instancingColor===!1&&Wl.instanceColor!==null||Wl.isInstancedMesh&&q1.instancingMorph===!0&&Wl.morphTexture===null||Wl.isInstancedMesh&&q1.instancingMorph===!1&&Wl.morphTexture!==null||q1.envMap!==km||Fl.fog===!0&&q1.fog!==x0||q1.numClippingPlanes!==void 0&&(q1.numClippingPlanes!==l0.numPlanes||q1.numIntersection!==l0.numIntersection)||q1.vertexAlphas!==wm||q1.vertexTangents!==Xm||q1.morphTargets!==Nm||q1.morphNormals!==m1||q1.morphColors!==N1||q1.toneMapping!==H1||p1.isWebGL2===!0&&q1.morphTargetsCount!==bg)&&(Hg=!0):(Hg=!0,q1.__version=Fl.version);let Q1=q1.currentProgram;Hg===!0&&(Q1=oy(Fl,F0,Wl));let kg=!1,eg=!1,Iv=!1;const jp=Q1.getUniforms(),f=q1.uniforms;if(A1.useProgram(Q1.program)&&(kg=!0,eg=!0,Iv=!0),Fl.id!==be&&(be=Fl.id,eg=!0),kg||ta!==c0){jp.setValue(C0,"projectionMatrix",c0.projectionMatrix),jp.setValue(C0,"viewMatrix",c0.matrixWorldInverse);const $=jp.map.cameraPosition;$!==void 0&&$.setValue(C0,P0.setFromMatrixPosition(c0.matrixWorld)),p1.logarithmicDepthBuffer&&jp.setValue(C0,"logDepthBufFC",2/(Math.log(c0.far+1)/Math.LN2)),(Fl.isMeshPhongMaterial||Fl.isMeshToonMaterial||Fl.isMeshLambertMaterial||Fl.isMeshBasicMaterial||Fl.isMeshStandardMaterial||Fl.isShaderMaterial)&&jp.setValue(C0,"isOrthographic",c0.isOrthographicCamera===!0),ta!==c0&&(ta=c0,eg=!0,Iv=!0)}if(Wl.isSkinnedMesh){jp.setOptional(C0,Wl,"bindMatrix"),jp.setOptional(C0,Wl,"bindMatrixInverse");const $=Wl.skeleton;$&&(p1.floatVertexTextures?($.boneTexture===null&&$.computeBoneTexture(),jp.setValue(C0,"boneTexture",$.boneTexture,x1)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Wl.isBatchedMesh&&(jp.setOptional(C0,Wl,"batchingTexture"),jp.setValue(C0,"batchingTexture",Wl._matricesTexture,x1));const R=Z.morphAttributes;if((R.position!==void 0||R.normal!==void 0||R.color!==void 0&&p1.isWebGL2===!0)&&pm.update(Wl,Z,Q1),(eg||q1.receiveShadow!==Wl.receiveShadow)&&(q1.receiveShadow=Wl.receiveShadow,jp.setValue(C0,"receiveShadow",Wl.receiveShadow)),Fl.isMeshGouraudMaterial&&Fl.envMap!==null&&(f.envMap.value=km,f.flipEnvMap.value=km.isCubeTexture&&km.isRenderTargetTexture===!1?-1:1),eg&&(jp.setValue(C0,"toneMappingExposure",G.toneMappingExposure),q1.needsLights&&_v(f,Iv),x0&&Fl.fog===!0&&r1.refreshFogUniforms(f,x0),r1.refreshMaterialUniforms(f,Fl,zl,ne,o0),Ji.upload(C0,Hv(q1),f,x1)),Fl.isShaderMaterial&&Fl.uniformsNeedUpdate===!0&&(Ji.upload(C0,Hv(q1),f,x1),Fl.uniformsNeedUpdate=!1),Fl.isSpriteMaterial&&jp.setValue(C0,"center",Wl.center),jp.setValue(C0,"modelViewMatrix",Wl.modelViewMatrix),jp.setValue(C0,"normalMatrix",Wl.normalMatrix),jp.setValue(C0,"modelMatrix",Wl.matrixWorld),Fl.isShaderMaterial||Fl.isRawShaderMaterial){const $=Fl.uniformsGroups;for(let Q=0,Ze=$.length;Q<Ze;Q++)if(p1.isWebGL2){const _e=$[Q];r0.update(_e,Q1),r0.bind(_e,Q1)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Q1}function _v(c0,F0){c0.ambientLightColor.needsUpdate=F0,c0.lightProbe.needsUpdate=F0,c0.directionalLights.needsUpdate=F0,c0.directionalLightShadows.needsUpdate=F0,c0.pointLights.needsUpdate=F0,c0.pointLightShadows.needsUpdate=F0,c0.spotLights.needsUpdate=F0,c0.spotLightShadows.needsUpdate=F0,c0.rectAreaLights.needsUpdate=F0,c0.hemisphereLights.needsUpdate=F0}function Mv(c0){return c0.isMeshLambertMaterial||c0.isMeshToonMaterial||c0.isMeshPhongMaterial||c0.isMeshStandardMaterial||c0.isShadowMaterial||c0.isShaderMaterial&&c0.lights===!0}this.getActiveCubeFace=function(){return He},this.getActiveMipmapLevel=function(){return Fe},this.getRenderTarget=function(){return Xe},this.setRenderTargetTextures=function(c0,F0,Z){Tm.get(c0.texture).__webglTexture=F0,Tm.get(c0.depthTexture).__webglTexture=Z;const Fl=Tm.get(c0);Fl.__hasExternalTextures=!0,Fl.__autoAllocateDepthBuffer=Z===void 0,Fl.__autoAllocateDepthBuffer||Zm.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Fl.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(c0,F0){const Z=Tm.get(c0);Z.__webglFramebuffer=F0,Z.__useDefaultFramebuffer=F0===void 0},this.setRenderTarget=function(c0,F0=0,Z=0){Xe=c0,He=F0,Fe=Z;let Fl=!0,Wl=null,x0=!1,S0=!1;if(c0){const Mm=Tm.get(c0);Mm.__useDefaultFramebuffer!==void 0?(A1.bindFramebuffer(C0.FRAMEBUFFER,null),Fl=!1):Mm.__webglFramebuffer===void 0?x1.setupRenderTarget(c0):Mm.__hasExternalTextures&&x1.rebindTextures(c0,Tm.get(c0.texture).__webglTexture,Tm.get(c0.depthTexture).__webglTexture);const km=c0.texture;(km.isData3DTexture||km.isDataArrayTexture||km.isCompressedArrayTexture)&&(S0=!0);const wm=Tm.get(c0).__webglFramebuffer;c0.isWebGLCubeRenderTarget?(Array.isArray(wm[F0])?Wl=wm[F0][Z]:Wl=wm[F0],x0=!0):p1.isWebGL2&&c0.samples>0&&x1.useMultisampledRTT(c0)===!1?Wl=Tm.get(c0).__webglMultisampledFramebuffer:Array.isArray(wm)?Wl=wm[Z]:Wl=wm,pn.copy(c0.viewport),mr.copy(c0.scissor),bp=c0.scissorTest}else pn.copy(Hp).multiplyScalar(zl).floor(),mr.copy(Gl).multiplyScalar(zl).floor(),bp=Ip;if(A1.bindFramebuffer(C0.FRAMEBUFFER,Wl)&&p1.drawBuffers&&Fl&&A1.drawBuffers(c0,Wl),A1.viewport(pn),A1.scissor(mr),A1.setScissorTest(bp),x0){const Mm=Tm.get(c0.texture);C0.framebufferTexture2D(C0.FRAMEBUFFER,C0.COLOR_ATTACHMENT0,C0.TEXTURE_CUBE_MAP_POSITIVE_X+F0,Mm.__webglTexture,Z)}else if(S0){const Mm=Tm.get(c0.texture),km=F0||0;C0.framebufferTextureLayer(C0.FRAMEBUFFER,C0.COLOR_ATTACHMENT0,Mm.__webglTexture,Z||0,km)}be=-1},this.readRenderTargetPixels=function(c0,F0,Z,Fl,Wl,x0,S0){if(!(c0&&c0.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Mm=Tm.get(c0).__webglFramebuffer;if(c0.isWebGLCubeRenderTarget&&S0!==void 0&&(Mm=Mm[S0]),Mm){A1.bindFramebuffer(C0.FRAMEBUFFER,Mm);try{const km=c0.texture,wm=km.format,Xm=km.type;if(wm!==Ft&&qm.convert(wm)!==C0.getParameter(C0.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Nm=Xm===_i&&(Zm.has("EXT_color_buffer_half_float")||p1.isWebGL2&&Zm.has("EXT_color_buffer_float"));if(Xm!==un&&qm.convert(Xm)!==C0.getParameter(C0.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Xm===Kt&&(p1.isWebGL2||Zm.has("OES_texture_float")||Zm.has("WEBGL_color_buffer_float")))&&!Nm){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}F0>=0&&F0<=c0.width-Fl&&Z>=0&&Z<=c0.height-Wl&&C0.readPixels(F0,Z,Fl,Wl,qm.convert(wm),qm.convert(Xm),x0)}finally{const km=Xe!==null?Tm.get(Xe).__webglFramebuffer:null;A1.bindFramebuffer(C0.FRAMEBUFFER,km)}}},this.copyFramebufferToTexture=function(c0,F0,Z=0){const Fl=Math.pow(2,-Z),Wl=Math.floor(F0.image.width*Fl),x0=Math.floor(F0.image.height*Fl);x1.setTexture2D(F0,0),C0.copyTexSubImage2D(C0.TEXTURE_2D,Z,0,0,c0.x,c0.y,Wl,x0),A1.unbindTexture()},this.copyTextureToTexture=function(c0,F0,Z,Fl=0){const Wl=F0.image.width,x0=F0.image.height,S0=qm.convert(Z.format),Mm=qm.convert(Z.type);x1.setTexture2D(Z,0),C0.pixelStorei(C0.UNPACK_FLIP_Y_WEBGL,Z.flipY),C0.pixelStorei(C0.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),C0.pixelStorei(C0.UNPACK_ALIGNMENT,Z.unpackAlignment),F0.isDataTexture?C0.texSubImage2D(C0.TEXTURE_2D,Fl,c0.x,c0.y,Wl,x0,S0,Mm,F0.image.data):F0.isCompressedTexture?C0.compressedTexSubImage2D(C0.TEXTURE_2D,Fl,c0.x,c0.y,F0.mipmaps[0].width,F0.mipmaps[0].height,S0,F0.mipmaps[0].data):C0.texSubImage2D(C0.TEXTURE_2D,Fl,c0.x,c0.y,S0,Mm,F0.image),Fl===0&&Z.generateMipmaps&&C0.generateMipmap(C0.TEXTURE_2D),A1.unbindTexture()},this.copyTextureToTexture3D=function(c0,F0,Z,Fl,Wl=0){if(G.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const x0=Math.round(c0.max.x-c0.min.x),S0=Math.round(c0.max.y-c0.min.y),Mm=c0.max.z-c0.min.z+1,km=qm.convert(Fl.format),wm=qm.convert(Fl.type);let Xm;if(Fl.isData3DTexture)x1.setTexture3D(Fl,0),Xm=C0.TEXTURE_3D;else if(Fl.isDataArrayTexture||Fl.isCompressedArrayTexture)x1.setTexture2DArray(Fl,0),Xm=C0.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}C0.pixelStorei(C0.UNPACK_FLIP_Y_WEBGL,Fl.flipY),C0.pixelStorei(C0.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Fl.premultiplyAlpha),C0.pixelStorei(C0.UNPACK_ALIGNMENT,Fl.unpackAlignment);const Nm=C0.getParameter(C0.UNPACK_ROW_LENGTH),m1=C0.getParameter(C0.UNPACK_IMAGE_HEIGHT),N1=C0.getParameter(C0.UNPACK_SKIP_PIXELS),H1=C0.getParameter(C0.UNPACK_SKIP_ROWS),Sg=C0.getParameter(C0.UNPACK_SKIP_IMAGES),bg=Z.isCompressedTexture?Z.mipmaps[Wl]:Z.image;C0.pixelStorei(C0.UNPACK_ROW_LENGTH,bg.width),C0.pixelStorei(C0.UNPACK_IMAGE_HEIGHT,bg.height),C0.pixelStorei(C0.UNPACK_SKIP_PIXELS,c0.min.x),C0.pixelStorei(C0.UNPACK_SKIP_ROWS,c0.min.y),C0.pixelStorei(C0.UNPACK_SKIP_IMAGES,c0.min.z),Z.isDataTexture||Z.isData3DTexture?C0.texSubImage3D(Xm,Wl,F0.x,F0.y,F0.z,x0,S0,Mm,km,wm,bg.data):Fl.isCompressedArrayTexture?C0.compressedTexSubImage3D(Xm,Wl,F0.x,F0.y,F0.z,x0,S0,Mm,km,bg.data):C0.texSubImage3D(Xm,Wl,F0.x,F0.y,F0.z,x0,S0,Mm,km,wm,bg),C0.pixelStorei(C0.UNPACK_ROW_LENGTH,Nm),C0.pixelStorei(C0.UNPACK_IMAGE_HEIGHT,m1),C0.pixelStorei(C0.UNPACK_SKIP_PIXELS,N1),C0.pixelStorei(C0.UNPACK_SKIP_ROWS,H1),C0.pixelStorei(C0.UNPACK_SKIP_IMAGES,Sg),Wl===0&&Fl.generateMipmaps&&C0.generateMipmap(Xm),A1.unbindTexture()},this.initTexture=function(c0){c0.isCubeTexture?x1.setTextureCube(c0,0):c0.isData3DTexture?x1.setTexture3D(c0,0):c0.isDataArrayTexture||c0.isCompressedArrayTexture?x1.setTexture2DArray(c0,0):x1.setTexture2D(c0,0),A1.unbindTexture()},this.resetState=function(){He=0,Fe=0,Xe=null,A1.reset(),vm.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zt}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===cs?"display-p3":"srgb",t.unpackColorSpace=je.workingColorSpace===cr?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class up extends Po{}up.prototype.isWebGL1Renderer=!0;class hp extends Mt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $t,this.environmentRotation=new $t,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ar extends xi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Va=new U,ka=new U,Wa=new st,jr=new hs,Yi=new ur;class ds extends Mt{constructor(e=new Tt,t=new ar){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,a=[0];for(let o=1,c=t.count;o<c;o++)Va.fromBufferAttribute(t,o-1),ka.fromBufferAttribute(t,o),a[o]=a[o-1],a[o]+=Va.distanceTo(ka);e.setAttribute("lineDistance",new ut(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const a=this.geometry,o=this.matrixWorld,c=e.params.Line.threshold,d=a.drawRange;if(a.boundingSphere===null&&a.computeBoundingSphere(),Yi.copy(a.boundingSphere),Yi.applyMatrix4(o),Yi.radius+=c,e.ray.intersectsSphere(Yi)===!1)return;Wa.copy(o).invert(),jr.copy(e.ray).applyMatrix4(Wa);const p=c/((this.scale.x+this.scale.y+this.scale.z)/3),_=p*p,S=new U,A=new U,C=new U,j=new U,V=this.isLineSegments?2:1,J=a.index,re=a.attributes.position;if(J!==null){const ie=Math.max(0,d.start),K=Math.min(J.count,d.start+d.count);for(let Ne=ie,G=K-1;Ne<G;Ne+=V){const se=J.getX(Ne),He=J.getX(Ne+1);if(S.fromBufferAttribute(re,se),A.fromBufferAttribute(re,He),jr.distanceSqToSegment(S,A,j,C)>_)continue;j.applyMatrix4(this.matrixWorld);const Fe=e.ray.origin.distanceTo(j);Fe<e.near||Fe>e.far||t.push({distance:Fe,point:C.clone().applyMatrix4(this.matrixWorld),index:Ne,face:null,faceIndex:null,object:this})}}else{const ie=Math.max(0,d.start),K=Math.min(re.count,d.start+d.count);for(let Ne=ie,G=K-1;Ne<G;Ne+=V){if(S.fromBufferAttribute(re,Ne),A.fromBufferAttribute(re,Ne+1),jr.distanceSqToSegment(S,A,j,C)>_)continue;j.applyMatrix4(this.matrixWorld);const se=e.ray.origin.distanceTo(j);se<e.near||se>e.far||t.push({distance:se,point:C.clone().applyMatrix4(this.matrixWorld),index:Ne,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const a=e[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=a.length;o<c;o++){const d=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}}const Xa=new U,Ya=new U;class fp extends ds{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,a=[];for(let o=0,c=t.count;o<c;o+=2)Xa.fromBufferAttribute(t,o),Ya.fromBufferAttribute(t,o+1),a[o]=o===0?0:a[o-1],a[o+1]=a[o]+Xa.distanceTo(Ya);e.setAttribute("lineDistance",new ut(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ps extends Tt{constructor(e=1,t=1,a=1,o=32,c=1,d=!1,p=0,_=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:a,radialSegments:o,heightSegments:c,openEnded:d,thetaStart:p,thetaLength:_};const S=this;o=Math.floor(o),c=Math.floor(c);const A=[],C=[],j=[],V=[];let J=0;const re=[],ie=a/2;let K=0;Ne(),d===!1&&(e>0&&G(!0),t>0&&G(!1)),this.setIndex(A),this.setAttribute("position",new ut(C,3)),this.setAttribute("normal",new ut(j,3)),this.setAttribute("uv",new ut(V,2));function Ne(){const se=new U,He=new U;let Fe=0;const Xe=(t-e)/a;for(let be=0;be<=c;be++){const ta=[],pn=be/c,mr=pn*(t-e)+e;for(let bp=0;bp<=o;bp++){const Sp=bp/o,_r=Sp*_+p,xs=Math.sin(_r),ne=Math.cos(_r);He.x=mr*xs,He.y=-pn*a+ie,He.z=mr*ne,C.push(He.x,He.y,He.z),se.set(xs,Xe,ne).normalize(),j.push(se.x,se.y,se.z),V.push(Sp,1-pn),ta.push(J++)}re.push(ta)}for(let be=0;be<o;be++)for(let ta=0;ta<c;ta++){const pn=re[ta][be],mr=re[ta+1][be],bp=re[ta+1][be+1],Sp=re[ta][be+1];A.push(pn,mr,Sp),A.push(mr,bp,Sp),Fe+=6}S.addGroup(K,Fe,0),K+=Fe}function G(se){const He=J,Fe=new Ie,Xe=new U;let be=0;const ta=se===!0?e:t,pn=se===!0?1:-1;for(let bp=1;bp<=o;bp++)C.push(0,ie*pn,0),j.push(0,pn,0),V.push(.5,.5),J++;const mr=J;for(let bp=0;bp<=o;bp++){const Sp=bp/o*_+p,_r=Math.cos(Sp),xs=Math.sin(Sp);Xe.x=ta*xs,Xe.y=ie*pn,Xe.z=ta*_r,C.push(Xe.x,Xe.y,Xe.z),j.push(0,pn,0),Fe.x=_r*.5+.5,Fe.y=xs*.5*pn+.5,V.push(Fe.x,Fe.y),J++}for(let bp=0;bp<o;bp++){const Sp=He+bp,_r=mr+bp;se===!0?A.push(_r,_r+1,Sp):A.push(_r+1,_r,Sp),be+=3}S.addGroup(K,be,se===!0?1:2),K+=be}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ps(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const qi=new U,ji=new U,Kr=new U,Ki=new Ot;class dp extends Tt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),o=Math.cos(ei*t),c=e.getIndex(),d=e.getAttribute("position"),p=c?c.count:d.count,_=[0,0,0],S=["a","b","c"],A=new Array(3),C={},j=[];for(let V=0;V<p;V+=3){c?(_[0]=c.getX(V),_[1]=c.getX(V+1),_[2]=c.getX(V+2)):(_[0]=V,_[1]=V+1,_[2]=V+2);const{a:J,b:re,c:ie}=Ki;if(J.fromBufferAttribute(d,_[0]),re.fromBufferAttribute(d,_[1]),ie.fromBufferAttribute(d,_[2]),Ki.getNormal(Kr),A[0]=`${Math.round(J.x*a)},${Math.round(J.y*a)},${Math.round(J.z*a)}`,A[1]=`${Math.round(re.x*a)},${Math.round(re.y*a)},${Math.round(re.z*a)}`,A[2]=`${Math.round(ie.x*a)},${Math.round(ie.y*a)},${Math.round(ie.z*a)}`,!(A[0]===A[1]||A[1]===A[2]||A[2]===A[0]))for(let K=0;K<3;K++){const Ne=(K+1)%3,G=A[K],se=A[Ne],He=Ki[S[K]],Fe=Ki[S[Ne]],Xe=`${G}_${se}`,be=`${se}_${G}`;be in C&&C[be]?(Kr.dot(C[be].normal)<=o&&(j.push(He.x,He.y,He.z),j.push(Fe.x,Fe.y,Fe.z)),C[be]=null):Xe in C||(C[Xe]={index0:_[K],index1:_[Ne],normal:Kr.clone()})}}for(const V in C)if(C[V]){const{index0:J,index1:re}=C[V];qi.fromBufferAttribute(d,J),ji.fromBufferAttribute(d,re),j.push(qi.x,qi.y,qi.z),j.push(ji.x,ji.y,ji.z)}this.setAttribute("position",new ut(j,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class or extends Tt{constructor(e=1,t=32,a=16,o=0,c=Math.PI*2,d=0,p=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:a,phiStart:o,phiLength:c,thetaStart:d,thetaLength:p},t=Math.max(3,Math.floor(t)),a=Math.max(2,Math.floor(a));const _=Math.min(d+p,Math.PI);let S=0;const A=[],C=new U,j=new U,V=[],J=[],re=[],ie=[];for(let K=0;K<=a;K++){const Ne=[],G=K/a;let se=0;K===0&&d===0?se=.5/t:K===a&&_===Math.PI&&(se=-.5/t);for(let He=0;He<=t;He++){const Fe=He/t;C.x=-e*Math.cos(o+Fe*c)*Math.sin(d+G*p),C.y=e*Math.cos(d+G*p),C.z=e*Math.sin(o+Fe*c)*Math.sin(d+G*p),J.push(C.x,C.y,C.z),j.copy(C).normalize(),re.push(j.x,j.y,j.z),ie.push(Fe+se,1-G),Ne.push(S++)}A.push(Ne)}for(let K=0;K<a;K++)for(let Ne=0;Ne<t;Ne++){const G=A[K][Ne+1],se=A[K][Ne],He=A[K+1][Ne],Fe=A[K+1][Ne+1];(K!==0||d>0)&&V.push(G,se,Fe),(K!==a-1||_<Math.PI)&&V.push(se,He,Fe)}this.setIndex(V),this.setAttribute("position",new ut(J,3)),this.setAttribute("normal",new ut(re,3)),this.setAttribute("uv",new ut(ie,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new or(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class qa{constructor(e=1,t=0,a=0){return this.radius=e,this.phi=t,this.theta=a,this}set(e,t,a){return this.radius=e,this.phi=t,this.theta=a,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,a){return this.radius=Math.sqrt(e*e+t*t+a*a),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,a),this.phi=Math.acos(_t(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const ja=new U;let Zi,Zr;class Ka extends Mt{constructor(e=new U(0,0,1),t=new U(0,0,0),a=1,o=16776960,c=a*.2,d=c*.2){super(),this.type="ArrowHelper",Zi===void 0&&(Zi=new Tt,Zi.setAttribute("position",new ut([0,0,0,0,1,0],3)),Zr=new ps(0,.5,1,5,1),Zr.translate(0,-.5,0)),this.position.copy(t),this.line=new ds(Zi,new ar({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Rt(Zr,new ni({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(a,c,d)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ja.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ja,t)}}setLength(e,t=e*.2,a=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(a,t,a),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:os}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=os);const Za={type:"change"},$r={type:"start"},$a={type:"end"},$i=new hs,Ja=new sn,pp=Math.cos(70*Kl.DEG2RAD);class mp extends Ln{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new U,this.cursor=new U,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Dn.ROTATE,MIDDLE:Dn.DOLLY,RIGHT:Dn.PAN},this.touches={ONE:Un.ROTATE,TWO:Un.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(r0){r0.addEventListener("keydown",i0),this._domElementKeyEvents=r0},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",i0),this._domElementKeyEvents=null},this.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},this.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(Za),a.update(),c=o.NONE},this.update=(function(){const r0=new U,e1=new Pn().setFromUnitVectors(e.up,new U(0,1,0)),_1=e1.clone().invert(),j1=new U,q0=new Pn,d1=new U,tm=2*Math.PI;return function(o1=null){const jm=a.object.position;r0.copy(jm).sub(a.target),r0.applyQuaternion(e1),p.setFromVector3(r0),a.autoRotate&&c===o.NONE&&bp(pn(o1)),a.enableDamping?(p.theta+=_.theta*a.dampingFactor,p.phi+=_.phi*a.dampingFactor):(p.theta+=_.theta,p.phi+=_.phi);let l1=a.minAzimuthAngle,gg=a.maxAzimuthAngle;isFinite(l1)&&isFinite(gg)&&(l1<-Math.PI?l1+=tm:l1>Math.PI&&(l1-=tm),gg<-Math.PI?gg+=tm:gg>Math.PI&&(gg-=tm),l1<=gg?p.theta=Math.max(l1,Math.min(gg,p.theta)):p.theta=p.theta>(l1+gg)/2?Math.max(l1,p.theta):Math.min(gg,p.theta)),p.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,p.phi)),p.makeSafe(),a.enableDamping===!0?a.target.addScaledVector(A,a.dampingFactor):a.target.add(A),a.target.sub(a.cursor),a.target.clampLength(a.minTargetRadius,a.maxTargetRadius),a.target.add(a.cursor);let Jg=!1;if(a.zoomToCursor&&Fe||a.object.isOrthographicCamera)p.radius=Hp(p.radius);else{const Dg=p.radius;p.radius=Hp(p.radius*S),Jg=Dg!=p.radius}if(r0.setFromSpherical(p),r0.applyQuaternion(_1),jm.copy(a.target).add(r0),a.object.lookAt(a.target),a.enableDamping===!0?(_.theta*=1-a.dampingFactor,_.phi*=1-a.dampingFactor,A.multiplyScalar(1-a.dampingFactor)):(_.set(0,0,0),A.set(0,0,0)),a.zoomToCursor&&Fe){let Dg=null;if(a.object.isPerspectiveCamera){const Eg=r0.length();Dg=Hp(Eg*S);const ev=Eg-Dg;a.object.position.addScaledVector(se,ev),a.object.updateMatrixWorld(),Jg=!!ev}else if(a.object.isOrthographicCamera){const Eg=new U(He.x,He.y,0);Eg.unproject(a.object);const ev=a.object.zoom;a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/S)),a.object.updateProjectionMatrix(),Jg=ev!==a.object.zoom;const pv=new U(He.x,He.y,0);pv.unproject(a.object),a.object.position.sub(pv).add(Eg),a.object.updateMatrixWorld(),Dg=r0.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),a.zoomToCursor=!1;Dg!==null&&(this.screenSpacePanning?a.target.set(0,0,-1).transformDirection(a.object.matrix).multiplyScalar(Dg).add(a.object.position):($i.origin.copy(a.object.position),$i.direction.set(0,0,-1).transformDirection(a.object.matrix),Math.abs(a.object.up.dot($i.direction))<pp?e.lookAt(a.target):(Ja.setFromNormalAndCoplanarPoint(a.object.up,a.target),$i.intersectPlane(Ja,a.target))))}else if(a.object.isOrthographicCamera){const Dg=a.object.zoom;a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/S)),Dg!==a.object.zoom&&(a.object.updateProjectionMatrix(),Jg=!0)}return S=1,Fe=!1,Jg||j1.distanceToSquared(a.object.position)>d||8*(1-q0.dot(a.object.quaternion))>d||d1.distanceToSquared(a.target)>d?(a.dispatchEvent(Za),j1.copy(a.object.position),q0.copy(a.object.quaternion),d1.copy(a.target),!0):!1}})(),this.dispose=function(){a.domElement.removeEventListener("contextmenu",dm),a.domElement.removeEventListener("pointerdown",x1),a.domElement.removeEventListener("pointercancel",p0),a.domElement.removeEventListener("wheel",bm),a.domElement.removeEventListener("pointermove",S1),a.domElement.removeEventListener("pointerup",p0),a.domElement.getRootNode().removeEventListener("keydown",r1,{capture:!0}),a._domElementKeyEvents!==null&&(a._domElementKeyEvents.removeEventListener("keydown",i0),a._domElementKeyEvents=null)};const a=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=o.NONE;const d=1e-6,p=new qa,_=new qa;let S=1;const A=new U,C=new Ie,j=new Ie,V=new Ie,J=new Ie,re=new Ie,ie=new Ie,K=new Ie,Ne=new Ie,G=new Ie,se=new U,He=new Ie;let Fe=!1;const Xe=[],be={};let ta=!1;function pn(r0){return r0!==null?2*Math.PI/60*a.autoRotateSpeed*r0:2*Math.PI/60/60*a.autoRotateSpeed}function mr(r0){const e1=Math.abs(r0*.01);return Math.pow(.95,a.zoomSpeed*e1)}function bp(r0){_.theta-=r0}function Sp(r0){_.phi-=r0}const _r=(function(){const r0=new U;return function(e1,_1){r0.setFromMatrixColumn(_1,0),r0.multiplyScalar(-e1),A.add(r0)}})(),xs=(function(){const r0=new U;return function(e1,_1){a.screenSpacePanning===!0?r0.setFromMatrixColumn(_1,1):(r0.setFromMatrixColumn(_1,0),r0.crossVectors(a.object.up,r0)),r0.multiplyScalar(e1),A.add(r0)}})(),ne=(function(){const r0=new U;return function(e1,_1){const j1=a.domElement;if(a.object.isPerspectiveCamera){const q0=a.object.position;r0.copy(q0).sub(a.target);let d1=r0.length();d1*=Math.tan(a.object.fov/2*Math.PI/180),_r(2*e1*d1/j1.clientHeight,a.object.matrix),xs(2*_1*d1/j1.clientHeight,a.object.matrix)}else a.object.isOrthographicCamera?(_r(e1*(a.object.right-a.object.left)/a.object.zoom/j1.clientWidth,a.object.matrix),xs(_1*(a.object.top-a.object.bottom)/a.object.zoom/j1.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}})();function zl(r0){a.object.isPerspectiveCamera||a.object.isOrthographicCamera?S/=r0:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function Hl(r0){a.object.isPerspectiveCamera||a.object.isOrthographicCamera?S*=r0:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function pr(r0,e1){if(!a.zoomToCursor)return;Fe=!0;const _1=a.domElement.getBoundingClientRect(),j1=r0-_1.left,q0=e1-_1.top,d1=_1.width,tm=_1.height;He.x=j1/d1*2-1,He.y=-(q0/tm)*2+1,se.set(He.x,He.y,1).unproject(a.object).sub(a.object.position).normalize()}function Hp(r0){return Math.max(a.minDistance,Math.min(a.maxDistance,r0))}function Gl(r0){C.set(r0.clientX,r0.clientY)}function Ip(r0){pr(r0.clientX,r0.clientX),K.set(r0.clientX,r0.clientY)}function qp(r0){J.set(r0.clientX,r0.clientY)}function ci(r0){j.set(r0.clientX,r0.clientY),V.subVectors(j,C).multiplyScalar(a.rotateSpeed);const e1=a.domElement;bp(2*Math.PI*V.x/e1.clientHeight),Sp(2*Math.PI*V.y/e1.clientHeight),C.copy(j),a.update()}function Ep(r0){Ne.set(r0.clientX,r0.clientY),G.subVectors(Ne,K),G.y>0?zl(mr(G.y)):G.y<0&&Hl(mr(G.y)),K.copy(Ne),a.update()}function o0(r0){re.set(r0.clientX,r0.clientY),ie.subVectors(re,J).multiplyScalar(a.panSpeed),ne(ie.x,ie.y),J.copy(re),a.update()}function w0(r0){pr(r0.clientX,r0.clientY),r0.deltaY<0?Hl(mr(r0.deltaY)):r0.deltaY>0&&zl(mr(r0.deltaY)),a.update()}function a0(r0){let e1=!1;switch(r0.code){case a.keys.UP:r0.ctrlKey||r0.metaKey||r0.shiftKey?Sp(2*Math.PI*a.rotateSpeed/a.domElement.clientHeight):ne(0,a.keyPanSpeed),e1=!0;break;case a.keys.BOTTOM:r0.ctrlKey||r0.metaKey||r0.shiftKey?Sp(-2*Math.PI*a.rotateSpeed/a.domElement.clientHeight):ne(0,-a.keyPanSpeed),e1=!0;break;case a.keys.LEFT:r0.ctrlKey||r0.metaKey||r0.shiftKey?bp(2*Math.PI*a.rotateSpeed/a.domElement.clientHeight):ne(a.keyPanSpeed,0),e1=!0;break;case a.keys.RIGHT:r0.ctrlKey||r0.metaKey||r0.shiftKey?bp(-2*Math.PI*a.rotateSpeed/a.domElement.clientHeight):ne(-a.keyPanSpeed,0),e1=!0;break}e1&&(r0.preventDefault(),a.update())}function P0(r0){if(Xe.length===1)C.set(r0.pageX,r0.pageY);else{const e1=vm(r0),_1=.5*(r0.pageX+e1.x),j1=.5*(r0.pageY+e1.y);C.set(_1,j1)}}function am(r0){if(Xe.length===1)J.set(r0.pageX,r0.pageY);else{const e1=vm(r0),_1=.5*(r0.pageX+e1.x),j1=.5*(r0.pageY+e1.y);J.set(_1,j1)}}function sm(r0){const e1=vm(r0),_1=r0.pageX-e1.x,j1=r0.pageY-e1.y,q0=Math.sqrt(_1*_1+j1*j1);K.set(0,q0)}function C0(r0){a.enableZoom&&sm(r0),a.enablePan&&am(r0)}function Fm(r0){a.enableZoom&&sm(r0),a.enableRotate&&P0(r0)}function Zm(r0){if(Xe.length==1)j.set(r0.pageX,r0.pageY);else{const _1=vm(r0),j1=.5*(r0.pageX+_1.x),q0=.5*(r0.pageY+_1.y);j.set(j1,q0)}V.subVectors(j,C).multiplyScalar(a.rotateSpeed);const e1=a.domElement;bp(2*Math.PI*V.x/e1.clientHeight),Sp(2*Math.PI*V.y/e1.clientHeight),C.copy(j)}function p1(r0){if(Xe.length===1)re.set(r0.pageX,r0.pageY);else{const e1=vm(r0),_1=.5*(r0.pageX+e1.x),j1=.5*(r0.pageY+e1.y);re.set(_1,j1)}ie.subVectors(re,J).multiplyScalar(a.panSpeed),ne(ie.x,ie.y),J.copy(re)}function A1(r0){const e1=vm(r0),_1=r0.pageX-e1.x,j1=r0.pageY-e1.y,q0=Math.sqrt(_1*_1+j1*j1);Ne.set(0,q0),G.set(0,Math.pow(Ne.y/K.y,a.zoomSpeed)),zl(G.y),K.copy(Ne);const d1=(r0.pageX+e1.x)*.5,tm=(r0.pageY+e1.y)*.5;pr(d1,tm)}function T1(r0){a.enableZoom&&A1(r0),a.enablePan&&p1(r0)}function Tm(r0){a.enableZoom&&A1(r0),a.enableRotate&&Zm(r0)}function x1(r0){a.enabled!==!1&&(Xe.length===0&&(a.domElement.setPointerCapture(r0.pointerId),a.domElement.addEventListener("pointermove",S1),a.domElement.addEventListener("pointerup",p0)),!Gm(r0)&&(pm(r0),r0.pointerType==="touch"?l0(r0):zp(r0)))}function S1(r0){a.enabled!==!1&&(r0.pointerType==="touch"?im(r0):om(r0))}function p0(r0){switch(Dm(r0),Xe.length){case 0:a.domElement.releasePointerCapture(r0.pointerId),a.domElement.removeEventListener("pointermove",S1),a.domElement.removeEventListener("pointerup",p0),a.dispatchEvent($a),c=o.NONE;break;case 1:const e1=Xe[0],_1=be[e1];l0({pointerId:e1,pageX:_1.x,pageY:_1.y});break}}function zp(r0){let e1;switch(r0.button){case 0:e1=a.mouseButtons.LEFT;break;case 1:e1=a.mouseButtons.MIDDLE;break;case 2:e1=a.mouseButtons.RIGHT;break;default:e1=-1}switch(e1){case Dn.DOLLY:if(a.enableZoom===!1)return;Ip(r0),c=o.DOLLY;break;case Dn.ROTATE:if(r0.ctrlKey||r0.metaKey||r0.shiftKey){if(a.enablePan===!1)return;qp(r0),c=o.PAN}else{if(a.enableRotate===!1)return;Gl(r0),c=o.ROTATE}break;case Dn.PAN:if(r0.ctrlKey||r0.metaKey||r0.shiftKey){if(a.enableRotate===!1)return;Gl(r0),c=o.ROTATE}else{if(a.enablePan===!1)return;qp(r0),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&a.dispatchEvent($r)}function om(r0){switch(c){case o.ROTATE:if(a.enableRotate===!1)return;ci(r0);break;case o.DOLLY:if(a.enableZoom===!1)return;Ep(r0);break;case o.PAN:if(a.enablePan===!1)return;o0(r0);break}}function bm(r0){a.enabled===!1||a.enableZoom===!1||c!==o.NONE||(r0.preventDefault(),a.dispatchEvent($r),w0(i1(r0)),a.dispatchEvent($a))}function i1(r0){const e1=r0.deltaMode,_1={clientX:r0.clientX,clientY:r0.clientY,deltaY:r0.deltaY};switch(e1){case 1:_1.deltaY*=16;break;case 2:_1.deltaY*=100;break}return r0.ctrlKey&&!ta&&(_1.deltaY*=10),_1}function r1(r0){r0.key==="Control"&&(ta=!0,a.domElement.getRootNode().addEventListener("keyup",Gp,{passive:!0,capture:!0}))}function Gp(r0){r0.key==="Control"&&(ta=!1,a.domElement.getRootNode().removeEventListener("keyup",Gp,{passive:!0,capture:!0}))}function i0(r0){a.enabled===!1||a.enablePan===!1||a0(r0)}function l0(r0){switch(qm(r0),Xe.length){case 1:switch(a.touches.ONE){case Un.ROTATE:if(a.enableRotate===!1)return;P0(r0),c=o.TOUCH_ROTATE;break;case Un.PAN:if(a.enablePan===!1)return;am(r0),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(a.touches.TWO){case Un.DOLLY_PAN:if(a.enableZoom===!1&&a.enablePan===!1)return;C0(r0),c=o.TOUCH_DOLLY_PAN;break;case Un.DOLLY_ROTATE:if(a.enableZoom===!1&&a.enableRotate===!1)return;Fm(r0),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&a.dispatchEvent($r)}function im(r0){switch(qm(r0),c){case o.TOUCH_ROTATE:if(a.enableRotate===!1)return;Zm(r0),a.update();break;case o.TOUCH_PAN:if(a.enablePan===!1)return;p1(r0),a.update();break;case o.TOUCH_DOLLY_PAN:if(a.enableZoom===!1&&a.enablePan===!1)return;T1(r0),a.update();break;case o.TOUCH_DOLLY_ROTATE:if(a.enableZoom===!1&&a.enableRotate===!1)return;Tm(r0),a.update();break;default:c=o.NONE}}function dm(r0){a.enabled!==!1&&r0.preventDefault()}function pm(r0){Xe.push(r0.pointerId)}function Dm(r0){delete be[r0.pointerId];for(let e1=0;e1<Xe.length;e1++)if(Xe[e1]==r0.pointerId){Xe.splice(e1,1);return}}function Gm(r0){for(let e1=0;e1<Xe.length;e1++)if(Xe[e1]==r0.pointerId)return!0;return!1}function qm(r0){let e1=be[r0.pointerId];e1===void 0&&(e1=new Ie,be[r0.pointerId]=e1),e1.set(r0.pageX,r0.pageY)}function vm(r0){const e1=r0.pointerId===Xe[0]?Xe[1]:Xe[0];return be[e1]}a.domElement.addEventListener("contextmenu",dm),a.domElement.addEventListener("pointerdown",x1),a.domElement.addEventListener("pointercancel",p0),a.domElement.addEventListener("wheel",bm,{passive:!1}),a.domElement.getRootNode().addEventListener("keydown",r1,{passive:!0,capture:!0}),this.update()}}var _p=function(r,e){return e=typeof e<"u"?e:!1,r=r.replace(/GAMMA/gi,"&Gamma;"),r=r.replace(/DELTA/gi,"&Delta;"),r=r.replace(/SIGMA/gi,"&Sigma;"),r=r.replace(/LAMBDA/gi,"&Lambda;"),r=r.replace(/\-/gi,"&mdash;"),e?r=r.replace(/_(.)/gi,function(t,a,o,c){return'<tspan baseline-shift="sub">'+a+"</tspan>"}):r=r.replace(/_(.)/gi,function(t,a,o,c){return"<sub>"+a+"</sub>"}),r},gp=function(a,o,t){var a=a,o=o;t==null&&(t={});var c=t.showAxes??!0,d=t.showBVectors??!0,p=t.showPathpoints??!1,_=t.disableInteractOverlay??!1,S=!1,A=[],C=new ni({color:13975119,opacity:.15,transparent:!0,side:Gt}),j=new ar({color:3355443,opacity:1,transparent:!1,linewidth:1}),V=new ar({color:285405,opacity:1,transparent:!1}),J=new ni({color:3311805,opacity:1,transparent:!1}),re=new ni({color:8925746,opacity:1,transparent:!1}),ie=null,K=null,Ne=null;this.resizeRenderer=function(){if(a){var Xe=window.devicePixelRatio||1,be=a.offsetWidth,ta=a.offsetHeight;Ne&&(K.aspect=be/ta,K.updateProjectionMatrix(),Ne.setSize(be*Xe,ta*Xe),Ne.domElement.style.width=be+"px",Ne.domElement.style.height=ta+"px",Ne.domElement.width=be*Xe,Ne.domElement.height=ta*Xe,Fe())}};var G=function(Xe,be){be=typeof be<"u"?be:"#000000";var ta;{var ta=document.createElement("div");ta.style.position="absolute",ta.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",ta.style.color=be,ta.style.width=100,ta.style.height=100,ta.style.fontSize="12px",ta.innerHTML=Xe,ta.style.top="-100px",ta.style.left="-100px",ta.style.userSelect="none",ta.style.userSelect="none",ta.style.webkitUserSelect="none",ta.style.MozUserSelect="none",ta.setAttribute("unselectable","on"),ta.style.pointerEvents="none"}return ta},se=function(Xe){var be=document.createElement("div");be.classList.add(Xe),be.style.position="absolute",be.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",be.style.zIndex=1,be.style.width="100%",be.style.height="100%",be.style.display="table",be.style.top="0px",be.style.left="0px",be.style.textAlign="center",be.style.verticalAlign="middle",be.style.userSelect="none",be.style.userSelect="none",be.style.webkitUserSelect="none",be.style.MozUserSelect="none",be.setAttribute("unselectable","on");var ta=document.createElement("span");return ta.innerHTML="Double click to toggle interaction",ta.style.color="rgb(80, 80, 80)",ta.style.fontSize="24px",ta.style.fontWeight="bold",ta.style.backgroundColor="rgba(230,230,230,0.5)",ta.style.display="table-cell",ta.style.verticalAlign="middle",ta.style.lineHeight="normal",ta.style.userSelect="none",ta.style.userSelect="none",ta.style.webkitUserSelect="none",ta.style.MozUserSelect="none",ta.setAttribute("unselectable","on"),ta.onmouseover=function(){this.style.backgroundColor="rgba(230,230,230,0.5)",this.innerHTML="Double click to toggle interaction"},ta.onmouseleave=function(){this.style.backgroundColor="rgba(255,255,255,0.01)",this.innerHTML=""},be.appendChild(ta),be};this.loadBZ=function(Xe){if(Xe==null||Object.keys(Xe).length===0||a==null||a.id==""||o==null)return;let be=Xe.b1,ta=Xe.b2,pn=Xe.b3,mr=Xe.faces_data,bp=Xe.kpoints,Sp=Xe.path,_r=Xe.explicit_kpoints_abs;var xs=window.devicePixelRatio||1;o.innerHTML="";for(var ne=a;ne.firstChild;)ne.removeChild(ne.firstChild);A=[],ie=new hp;let zl=ne.offsetWidth,Hl=ne.offsetHeight;K=new Lt(45,zl/Hl,.01,1e3),K.position.z=3,Ne=new Po({alpha:!0,preserveDrawingBuffer:!0}),Ne.setClearColor(16777215,0),Ne.setSize(zl*xs,Hl*xs),Ne.domElement.style.width=zl+"px",Ne.domElement.style.height=Hl+"px",Ne.domElement.width=zl*xs,Ne.domElement.height=Hl*xs,ne.appendChild(Ne.domElement);let pr=new mp(K,Ne.domElement);pr.addEventListener("change",Fe),pr.enableDamping=!0,pr.dampingFactor=.25,pr.enableZoom=!0;let Hp=Math.sqrt(Math.max(Math.pow(be[0],2)+Math.pow(be[1],2)+Math.pow(be[2],2),Math.pow(ta[0],2)+Math.pow(ta[1],2)+Math.pow(ta[2],2),Math.pow(pn[0],2)+Math.pow(pn[1],2)+Math.pow(pn[2],2)));var Gl=Hp*1.5;if(K.position.z=Hp*3,c){var Ip=[[new U(1,0,0),'<span style="font-style: italic">x</span>'],[new U(0,1,0),'<span style="font-style: italic">y</span>'],[new U(0,0,1),'<span style="font-style: italic">z</span>']];Ip.forEach(function(S1){var p0=S1[0],zp=S1[1],om=new U(0,0,0),bm=5592405,i1=new Ka(p0,om,Gl,bm,Gl/10,Gl/20);ie.add(i1);var r1="#555555",Gp=G(zp,r1),i0=p0.clone();i0.sub(om),i0.multiplyScalar(Gl),ne.appendChild(Gp),A.push([i0,Gp])})}var qp=[[be,'<span style="font-weight: bold">b</span><sub>1</sub>'],[ta,'<span style="font-weight: bold">b</span><sub>2</sub>'],[pn,'<span style="font-weight: bold">b</span><sub>3</sub>']],qp;if(d||(qp=[]),qp.forEach(function(S1){var p0=S1[0],zp=S1[1],om=Math.sqrt(Math.pow(p0[0],2)+Math.pow(p0[1],2)+Math.pow(p0[2],2)),bm=new U(p0[0]/om,p0[1]/om,p0[2]/om),i1=new U(0,0,0),r1=0,Gp=new Ka(bm,i1,length=om,r1=r1,om/10,om/20);ie.add(Gp);var i0=G(zp=zp),l0=bm.clone();l0.sub(i1),l0.multiplyScalar(om),ne.appendChild(i0),A.push([l0,i0])}),mr){var ci=new Tt,Ep=[];mr.triangles_vertices.forEach(function(S1){Ep.push(S1[0],S1[1],S1[2])}),ci.setAttribute("position",new ut(Ep,3));var o0=[];mr.triangles.forEach(function(S1){o0.push(S1[0],S1[1],S1[2])}),ci.setIndex(o0);var w0=new Rt(ci,C),a0=new dp(w0.geometry),P0=new fp(a0,j);ie.add(w0),ie.add(P0)}if(bp)for(var am in bp){let S1=bp[am],p0=.02*Hp;var sm=new or(p0,16,16),C0=new Rt(sm,J);C0.translateX(S1[0]),C0.translateY(S1[1]),C0.translateZ(S1[2]),ie.add(C0),am=_p(am,S);var Fm=G(am);ne.appendChild(Fm),A.push([new U(S1[0],S1[1],S1[2]),Fm])}if(Sp&&bp&&Sp.forEach(function(S1){var p0=S1[0],zp=S1[1],om=bp[p0],bm=bp[zp],i1=[];i1.push(new U(om[0],om[1],om[2])),i1.push(new U(bm[0],bm[1],bm[2]));var r1=new Tt().setFromPoints(i1),Gp=new ds(r1,V);Gp.material.linewidth=4,ie.add(Gp)}),p&&_r)for(var Zm in _r){var p1=_r[Zm],A1=.01*Hp,sm=new or(A1,16,16),C0=new Rt(sm,re);C0.translateX(p1[0]),C0.translateY(p1[1]),C0.translateZ(p1[2]),ie.add(C0)}Fe();var T1=function(S1,p0){if(typeof p0>"u")var zp=!pr.enabled;else var zp=p0;pr.enabled=zp;for(var om=ne.getElementsByClassName("BZDoubleClickText"),bm=0;bm<om.length;bm++)ne.removeChild(om[bm]);zp||ne.appendChild(se("BZDoubleClickText"))};_||(T1(),ne.addEventListener("dblclick",T1));var Tm,x1=!1;ne.addEventListener("touchend",function(S1){if(typeof Tm<"u"&&clearTimeout(Tm),x1)x1=!1,S1.preventDefault(),T1();else{if(S1.targetTouches.length!=0){typeof Tm<"u"&&(clearTimeout(Tm),x1=!1);return}x1=!0,Tm=setTimeout(function(){x1=!1},500)}}),ne.addEventListener("touchcancel",function(S1){typeof Tm<"u"&&(clearTimeout(Tm),x1=!1)}),ne.addEventListener("touchmove",function(S1){typeof Tm<"u"&&(clearTimeout(Tm),x1=!1)})};function He(Xe,be){var ta=Xe.clone().project(be),pn=window.devicePixelRatio||1,mr,bp;{var mr=.5*Ne.domElement.width/pn,bp=.5*Ne.domElement.height/pn;ta.x=ta.x*mr+mr,ta.y=-(ta.y*bp)+bp}return{left:ta.x,top:ta.y}}function Fe(){Ne.render(ie,K),A.forEach(function(Xe){var be=Xe[0],ta=Xe[1],pn=He(be,K);ta.style.top=pn.top+"px",ta.style.left=pn.left+"px"})}};function vp(r){let e="";for(;e.length<r;)e+=Math.random().toString(36).substring(2);return e.substring(0,r)}function xp(r,e,t){let a=document.createElement("div");a.className="bz-main-container";let o=vp(6),c=document.createElement("div");c.id=`canvas-${o}`,c.className="bz-canvas3d";let d=document.createElement("div");d.id=`info-${o}`,a.appendChild(c),a.appendChild(d),r.appendChild(a);let p=new gp(c,d,t);return window.addEventListener("resize",p.resizeRenderer),requestAnimationFrame(()=>{p.loadBZ(e)}),p}function BZVisualizer({data:r,options:e}){const t=reactExports.useRef(null);return reactExports.useEffect(()=>{t.current&&(t.current.innerHTML="",xp(t.current,r,e))},[r,e]),jsxRuntimeExports$1.jsx("div",{ref:t,style:{width:"100%",height:"400px"}})}function reciprocalLattice(r){if(!r||r.length<3)return[[1,0,0],[0,1,0],[0,0,1]];const[e,t,a]=r,o=(A,C)=>[A[1]*C[2]-A[2]*C[1],A[2]*C[0]-A[0]*C[2],A[0]*C[1]-A[1]*C[0]],d=((A,C)=>A[0]*C[0]+A[1]*C[1]+A[2]*C[2])(e,o(t,a)),p=o(t,a).map(A=>2*Math.PI*A/d),_=o(a,e).map(A=>2*Math.PI*A/d),S=o(e,t).map(A=>2*Math.PI*A/d);return[p,_,S]}function KpointsDataVisualiser({nodeData:r={}}){const e=r.attributes||{},t=r.derived_properties||{};if(!e&&!t)return jsxRuntimeExports$1.jsx("div",{children:"No attributes available"});e.cell&&(e.cell[0]?.[0],e.cell[1]?.[1],e.cell[2]?.[2]),e.cell?.length;const[a,o,c]=reciprocalLattice(e.cell),d={...t,b1:a,b2:o,b3:c},p=["vector","x","y","z"],_=[{vector:"b1",x:a[0],y:a[1],z:a[2]},{vector:"b2",x:o[0],y:o[1],z:o[2]},{vector:"b3",x:c[0],y:c[1],z:c[2]}],S=["x","y","z"],A=(e.cell||[]).map(G=>({x:G[0]??0,y:G[1]??0,z:G[2]??0})),C=["dimension","value"],j=(e.mesh||[]).map((G,se)=>({dimension:se+1,value:G??0})),V=["i","x","y","z"],J=(e.offset||[]).map((G,se)=>({i:se+1,x:Array.isArray(G)?G[0]??0:G??0,y:Array.isArray(G)?G[1]??0:0,z:Array.isArray(G)?G[2]??0:0})),re=["axis","periodic"],ie=["pbc1","pbc2","pbc3"].filter(G=>G in e).map(G=>({axis:G,periodic:!!e[G]})),K=["K-point number","x","y","z"],Ne=(t.explicit_kpoints_abs||[]).map((G,se)=>({"K-point number":se+1,x:G[0]??0,y:G[1]??0,z:G[2]??0}));return jsxRuntimeExports$1.jsxs("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-2",children:[jsxRuntimeExports$1.jsx(CardContainer,{header:"Brillouin Zone",className:"ae:!px-1.5 ae:!py-2",childrenClassName:"ae:!p-0",children:jsxRuntimeExports$1.jsx("div",{className:"ae:w-full",children:jsxRuntimeExports$1.jsx(BZVisualizer,{data:d,options:{showAxes:!0,showBVectors:!0,showPathpoints:!1,disableInteractOverlay:!0}})})}),jsxRuntimeExports$1.jsx(DataTable,{title:"Reciprocal cell vectors (1/Å)",columns:p,data:_,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"Cell",columns:S,data:A,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"Mesh",columns:C,data:j,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"Offset",columns:V,data:J,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"PBC Flags",columns:re,data:ie,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"Explicit K-points (Absolute)",columns:K,data:Ne,sortableCols:!1})]})}var li=Object.defineProperty,hi=(r,e,t)=>e in r?li(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ti=(r,e,t)=>hi(r,typeof e!="symbol"?e+"":e,t),jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:r,type:a,key:d,ref:o!==void 0?o:null,props:c}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}jsxRuntime.exports=requireReactJsxRuntime_production();var jsxRuntimeExports=jsxRuntime.exports;const ControlBox=({viewerParams:r,onViewerParamChange:e,onViewerEvent:t})=>{const a=(d,p)=>{let _=r.supercell;_[d]=parseInt(p),e("supercell",_)},o=d=>{e(d,!r[d])},c=d=>{t("camera",d)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(d=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:r.supercell[d],onChange:p=>a(d,p.target.value)},d))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>c("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>c("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>c("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.bonds,onChange:()=>o("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.packedCell,onChange:()=>o("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.atomLabels,onChange:()=>o("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.spaceFilling,onChange:()=>o("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3DmolMin={exports:{}};/*! For license information please see 3Dmol-min.js.LICENSE.txt */(function(module,exports){var factory;factory=()=>(()=>{var __webpack_modules__={3:(r,e,t)=>{var a=t(663),o=t(981),c=t(972),d=t(681),p=t(834),_=t(746),S=t(670),A=Object.prototype.toString;function C(V){if(!(this instanceof C))return new C(V);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},V||{});var J=this.options;J.raw&&J.windowBits>=0&&J.windowBits<16&&(J.windowBits=-J.windowBits,J.windowBits===0&&(J.windowBits=-15)),!(J.windowBits>=0&&J.windowBits<16)||V&&V.windowBits||(J.windowBits+=32),J.windowBits>15&&J.windowBits<48&&(15&J.windowBits||(J.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var re=a.inflateInit2(this.strm,J.windowBits);if(re!==d.Z_OK)throw new Error(p[re]);if(this.header=new S,a.inflateGetHeader(this.strm,this.header),J.dictionary&&(typeof J.dictionary=="string"?J.dictionary=c.string2buf(J.dictionary):A.call(J.dictionary)==="[object ArrayBuffer]"&&(J.dictionary=new Uint8Array(J.dictionary)),J.raw&&(re=a.inflateSetDictionary(this.strm,J.dictionary))!==d.Z_OK))throw new Error(p[re])}function j(V,J){var re=new C(J);if(re.push(V,!0),re.err)throw re.msg||p[re.err];return re.result}C.prototype.push=function(V,J){var re,ie,K,Ne,G,se=this.strm,He=this.options.chunkSize,Fe=this.options.dictionary,Xe=!1;if(this.ended)return!1;ie=J===~~J?J:J===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof V=="string"?se.input=c.binstring2buf(V):A.call(V)==="[object ArrayBuffer]"?se.input=new Uint8Array(V):se.input=V,se.next_in=0,se.avail_in=se.input.length;do{if(se.avail_out===0&&(se.output=new o.Buf8(He),se.next_out=0,se.avail_out=He),(re=a.inflate(se,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&Fe&&(re=a.inflateSetDictionary(this.strm,Fe)),re===d.Z_BUF_ERROR&&Xe===!0&&(re=d.Z_OK,Xe=!1),re!==d.Z_STREAM_END&&re!==d.Z_OK)return this.onEnd(re),this.ended=!0,!1;se.next_out&&(se.avail_out!==0&&re!==d.Z_STREAM_END&&(se.avail_in!==0||ie!==d.Z_FINISH&&ie!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(K=c.utf8border(se.output,se.next_out),Ne=se.next_out-K,G=c.buf2string(se.output,K),se.next_out=Ne,se.avail_out=He-Ne,Ne&&o.arraySet(se.output,se.output,K,Ne,0),this.onData(G)):this.onData(o.shrinkBuf(se.output,se.next_out)))),se.avail_in===0&&se.avail_out===0&&(Xe=!0)}while((se.avail_in>0||se.avail_out===0)&&re!==d.Z_STREAM_END);return re===d.Z_STREAM_END&&(ie=d.Z_FINISH),ie===d.Z_FINISH?(re=a.inflateEnd(this.strm),this.onEnd(re),this.ended=!0,re===d.Z_OK):ie!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),se.avail_out=0,!0)},C.prototype.onData=function(V){this.chunks.push(V)},C.prototype.onEnd=function(V){V===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},e.Inflate=C,e.inflate=j,e.inflateRaw=function(V,J){return(J=J||{}).raw=!0,j(V,J)},e.ungzip=j},16:(r,e,t)=>{t.r(e),t.d(e,{CAP:()=>a,CC:()=>S.CC,CONTEXTS_PER_VIEWPORT:()=>m1,Color:()=>S.Color,CustomLinear:()=>A.CustomLinear,Cylinder:()=>p.Cylinder,GLDraw:()=>o,GLModel:()=>ag,GLShape:()=>S0,GLViewer:()=>H1,GLVolumetricRender:()=>Nm,Gradient:()=>A.Gradient,GradientType:()=>A.GradientType,Label:()=>Xm,LabelCount:()=>km,MarchingCube:()=>Z,MarchingCubeInitializer:()=>F0,Matrix3:()=>_.Matrix3,Matrix4:()=>_.Matrix4,Parsers:()=>vm,PausableTimer:()=>C.PausableTimer,PointGrid:()=>Fl,ProteinSurface:()=>Wl,Quaternion:()=>_.Quaternion,ROYGB:()=>A.ROYGB,RWB:()=>A.RWB,Ray:()=>_.Ray,Sinebow:()=>A.Sinebow,Sphere:()=>p.Sphere,SurfaceType:()=>_v,Triangle:()=>p.Triangle,Vector2:()=>_.Vector2,Vector3:()=>_.Vector3,VolumeData:()=>x0.VolumeData,adjustVolumeStyle:()=>C.adjustVolumeStyle,applyPartialCharges:()=>Iv,autoinit:()=>vg,autoload:()=>kg,base64ToArray:()=>C.base64ToArray,bondLength:()=>a0.bondLength,builtinColorSchemes:()=>S.builtinColorSchemes,builtinGradients:()=>A.builtinGradients,chains:()=>S.chains,clamp:()=>_.clamp,conversionMatrix3:()=>_.conversionMatrix3,createStereoViewer:()=>q1,createViewer:()=>Sg,createViewerGrid:()=>bg,deepCopy:()=>C.deepCopy,degToRad:()=>_.degToRad,download:()=>C.download,drawCartoon:()=>bp,elementColors:()=>S.elementColors,extend:()=>C.extend,get:()=>C.get,getAtomProperty:()=>C.getAtomProperty,getColorFromStyle:()=>C.getColorFromStyle,getElement:()=>C.getElement,getExtent:()=>C.getExtent,getGradient:()=>A.getGradient,getPropertyRange:()=>C.getPropertyRange,getbin:()=>C.getbin,htmlColors:()=>S.htmlColors,inflateString:()=>C.inflateString,isEmptyObject:()=>C.isEmptyObject,isNumeric:()=>C.isNumeric,makeFunction:()=>C.makeFunction,mergeGeos:()=>C.mergeGeos,normalizeValue:()=>A.normalizeValue,partialCharges:()=>eg,processing_autoinit:()=>Hg,residues:()=>S.residues,setBondLength:()=>a0.setBondLength,setSyncSurface:()=>c0,specStringToObject:()=>C.specStringToObject,splitMesh:()=>Mm,ssColors:()=>S.ssColors,subdivide_spline:()=>j,syncSurface:()=>Mv,viewers:()=>Q1});var a,o,c=t(111),d=t(378),p=t(99),_=t(529),S=t(222);(function(jp){jp[jp.NONE=0]="NONE",jp[jp.FLAT=1]="FLAT",jp[jp.ROUND=2]="ROUND"})(a||(a={})),(function(jp){function f(Q,Ze,_e){var it,lt,Ye,Vt,Ct,Nl=Math.hypot(Q,Ze);Nl<1e-4?(lt=0,Ye=1):(lt=-Q/Nl,Ye=Ze/Nl),Ze=-lt*Q+Ye*Ze,(it=Math.hypot(Ze,_e))<1e-4?(Vt=0,Ct=1):(Vt=_e/it,Ct=Ze/it);var ms=new Float32Array(9);return ms[0]=Ye,ms[1]=lt,ms[2]=0,ms[3]=-lt*Ct,ms[4]=Ye*Ct,ms[5]=Vt,ms[6]=lt*Vt,ms[7]=-Ye*Vt,ms[8]=Ct,ms}var R=new class{constructor(){this.cache={};let Q,Ze=[],_e=Math.pow(2,4),it=2,lt=Math.pow(2,it),Ye=_e/lt;for(Ze[0]=new _.Vector3(-1,0,0),Ze[Ye]=new _.Vector3(0,0,1),Ze[2*Ye]=new _.Vector3(1,0,0),Ze[3*Ye]=new _.Vector3(0,0,-1),it=3;it<=4;it++){for(lt=Math.pow(2,it-1),Ye=_e/lt,Q=0;Q<lt-1;Q++)Ze[Ye/2+Q*Ye]=Ze[Q*Ye].clone().add(Ze[(Q+1)*Ye]).normalize();Q=lt-1,Ze[Ye/2+Q*Ye]=Ze[Q*Ye].clone().add(Ze[0]).normalize()}this.basisVectors=Ze}getVerticesForRadius(Q,Ze,_e){if(this.cache!==void 0&&this.cache[Q]!==void 0&&this.cache[Q][Ze+_e]!==void 0)return this.cache[Q][Ze+_e];for(var it,lt=this.basisVectors.length,Ye=[],Vt=[],Ct=0;Ct<lt;Ct++)Ye.push(this.basisVectors[Ct].clone().multiplyScalar(Q)),Ye.push(this.basisVectors[Ct].clone().multiplyScalar(Q)),it=this.basisVectors[Ct].clone().normalize(),Vt.push(it),Vt.push(it);var Nl,ms,Si=[],_s=10,gs=lt,Yl=2*Math.PI,Dp=Math.PI,Op=!1,e0=!1;for(ms=0;ms<=_s;ms++){Op=ms===0||ms===_s,e0=ms===5;var Xp=[],_0=[];for(Nl=0;Nl<=gs;Nl++)if(e0){var D0=Nl<gs?2*Nl:0;_0.push(D0+1),Xp.push(D0)}else{var O0=Nl/gs,U0=ms/_s;if(Op&&Nl!==0)Op&&Xp.push(Ye.length-1);else if(Nl<gs){var E0=new _.Vector3;E0.x=-Q*Math.cos(0+O0*Yl)*Math.sin(0+U0*Dp),E0.y=Ze==1?0:Q*Math.cos(0+U0*Dp),E0.z=Q*Math.sin(0+O0*Yl)*Math.sin(0+U0*Dp),Math.abs(E0.x)<1e-5&&(E0.x=0),Math.abs(E0.y)<1e-5&&(E0.y=0),Math.abs(E0.z)<1e-5&&(E0.z=0),Ze==a.FLAT?(it=new _.Vector3(0,Math.cos(0+U0*Dp),0)).normalize():(it=new _.Vector3(E0.x,E0.y,E0.z)).normalize(),Ye.push(E0),Vt.push(it),Xp.push(Ye.length-1)}else Xp.push(Ye.length-gs)}e0&&Si.push(_0),Si.push(Xp)}var ym={vertices:Ye,normals:Vt,verticesRows:Si,w:gs,h:_s};return Q in this.cache||(this.cache[Q]={}),this.cache[Q][Ze+_e]=ym,ym}};jp.drawCylinder=function(Q,Ze,_e,it,lt,Ye=0,Vt=0){if(!Ze||!_e)return;let Ct=function(b0){if(typeof b0=="string"){let v0=b0;return v0.toLowerCase()=="flat"?a.FLAT:v0.toLowerCase()=="round"?a.ROUND:a.NONE}return b0};Ye=Ct(Ye);var Nl=(Vt=Ct(Vt))||Ye;lt=lt||{r:0,g:0,b:0};var ms,Si,_s,gs,Yl,Dp,Op=f(_e.x-Ze.x,_e.y-Ze.y,_e.z-Ze.z),e0=R.getVerticesForRadius(it,Vt,"to"),Xp=e0.w,_0=e0.h,D0=Nl?_0*Xp+2:2*Xp,O0=Q.updateGeoGroup(D0),U0=e0.vertices,E0=e0.normals,ym=e0.verticesRows,mm=ym[_0/2],Vm=ym[_0/2+1],Pm=O0.vertices,a1=O0.vertexArray,h1=O0.normalArray,Hm=O0.colorArray,w1=O0.faceArray;for(_s=0;_s<Xp;++_s){var _m=2*_s;gs=Op[0]*U0[_m].x+Op[3]*U0[_m].y+Op[6]*U0[_m].z,Yl=Op[1]*U0[_m].x+Op[4]*U0[_m].y+Op[7]*U0[_m].z,Dp=Op[5]*U0[_m].y+Op[8]*U0[_m].z,ms=3*(Pm+_m),Si=O0.faceidx,a1[ms]=gs+Ze.x,a1[ms+1]=Yl+Ze.y,a1[ms+2]=Dp+Ze.z,a1[ms+3]=gs+_e.x,a1[ms+4]=Yl+_e.y,a1[ms+5]=Dp+_e.z,h1[ms]=gs,h1[ms+3]=gs,h1[ms+1]=Yl,h1[ms+4]=Yl,h1[ms+2]=Dp,h1[ms+5]=Dp,Hm[ms]=lt.r,Hm[ms+3]=lt.r,Hm[ms+1]=lt.g,Hm[ms+4]=lt.g,Hm[ms+2]=lt.b,Hm[ms+5]=lt.b,w1[Si]=Vm[_s]+Pm,w1[Si+1]=Vm[_s+1]+Pm,w1[Si+2]=mm[_s]+Pm,w1[Si+3]=mm[_s]+Pm,w1[Si+4]=Vm[_s+1]+Pm,w1[Si+5]=mm[_s+1]+Pm,O0.faceidx+=6}if(Nl){var Om,D1,$m,R1,k1,Jm,I1,ug,O1,s1,yg,Z1,pg,J1,wg,tv,Sv,bv,Jv,Uv,lv,Kv,Nv,Fv,Qv,hy,ey,yy,dv,Ev,Rv,zv,de=Ye?_0+1:_0/2+1;for(Yl=Vt?0:_0/2;Yl<de;Yl++)if(Yl!==_0/2){var ql=Yl<=_0/2?_e:Ze,De=R.getVerticesForRadius(it,Vt,"to"),A0=R.getVerticesForRadius(it,Ye,"from");for(ql===_e?(U0=De.vertices,E0=De.normals,ym=De.verticesRows):ql==Ze&&(U0=A0.vertices,E0=A0.normals,ym=A0.verticesRows),gs=0;gs<Xp;gs++)Si=O0.faceidx,dv=3*((Om=ym[Yl][gs+1])+Pm),Ev=3*((D1=ym[Yl][gs])+Pm),Rv=3*(($m=ym[Yl+1][gs])+Pm),zv=3*((R1=ym[Yl+1][gs+1])+Pm),k1=Op[0]*U0[Om].x+Op[3]*U0[Om].y+Op[6]*U0[Om].z,Jm=Op[0]*U0[D1].x+Op[3]*U0[D1].y+Op[6]*U0[D1].z,I1=Op[0]*U0[$m].x+Op[3]*U0[$m].y+Op[6]*U0[$m].z,ug=Op[0]*U0[R1].x+Op[3]*U0[R1].y+Op[6]*U0[R1].z,O1=Op[1]*U0[Om].x+Op[4]*U0[Om].y+Op[7]*U0[Om].z,s1=Op[1]*U0[D1].x+Op[4]*U0[D1].y+Op[7]*U0[D1].z,yg=Op[1]*U0[$m].x+Op[4]*U0[$m].y+Op[7]*U0[$m].z,Z1=Op[1]*U0[R1].x+Op[4]*U0[R1].y+Op[7]*U0[R1].z,pg=Op[5]*U0[Om].y+Op[8]*U0[Om].z,J1=Op[5]*U0[D1].y+Op[8]*U0[D1].z,wg=Op[5]*U0[$m].y+Op[8]*U0[$m].z,tv=Op[5]*U0[R1].y+Op[8]*U0[R1].z,a1[dv]=k1+ql.x,a1[Ev]=Jm+ql.x,a1[Rv]=I1+ql.x,a1[zv]=ug+ql.x,a1[dv+1]=O1+ql.y,a1[Ev+1]=s1+ql.y,a1[Rv+1]=yg+ql.y,a1[zv+1]=Z1+ql.y,a1[dv+2]=pg+ql.z,a1[Ev+2]=J1+ql.z,a1[Rv+2]=wg+ql.z,a1[zv+2]=tv+ql.z,Hm[dv]=lt.r,Hm[Ev]=lt.r,Hm[Rv]=lt.r,Hm[zv]=lt.r,Hm[dv+1]=lt.g,Hm[Ev+1]=lt.g,Hm[Rv+1]=lt.g,Hm[zv+1]=lt.g,Hm[dv+2]=lt.b,Hm[Ev+2]=lt.b,Hm[Rv+2]=lt.b,Hm[zv+2]=lt.b,Sv=Op[0]*E0[Om].x+Op[3]*E0[Om].y+Op[6]*E0[Om].z,bv=Op[0]*E0[D1].x+Op[3]*E0[D1].y+Op[6]*E0[D1].z,Jv=Op[0]*E0[$m].x+Op[3]*E0[$m].y+Op[6]*E0[$m].z,Uv=Op[0]*E0[R1].x+Op[3]*E0[R1].y+Op[6]*E0[R1].z,lv=Op[1]*E0[Om].x+Op[4]*E0[Om].y+Op[7]*E0[Om].z,Kv=Op[1]*E0[D1].x+Op[4]*E0[D1].y+Op[7]*E0[D1].z,Nv=Op[1]*E0[$m].x+Op[4]*E0[$m].y+Op[7]*E0[$m].z,Fv=Op[1]*E0[R1].x+Op[4]*E0[R1].y+Op[7]*E0[R1].z,Qv=Op[5]*E0[Om].y+Op[8]*E0[Om].z,hy=Op[5]*E0[D1].y+Op[8]*E0[D1].z,ey=Op[5]*E0[$m].y+Op[8]*E0[$m].z,yy=Op[5]*E0[R1].y+Op[8]*E0[R1].z,Yl===0?(h1[dv]=Sv,h1[Rv]=Jv,h1[zv]=Uv,h1[dv+1]=lv,h1[Rv+1]=Nv,h1[zv+1]=Fv,h1[dv+2]=Qv,h1[Rv+2]=ey,h1[zv+2]=yy,w1[Si]=Om+Pm,w1[Si+1]=$m+Pm,w1[Si+2]=R1+Pm,O0.faceidx+=3):Yl===de-1?(h1[dv]=Sv,h1[Ev]=bv,h1[Rv]=Jv,h1[dv+1]=lv,h1[Ev+1]=Kv,h1[Rv+1]=Nv,h1[dv+2]=Qv,h1[Ev+2]=hy,h1[Rv+2]=ey,w1[Si]=Om+Pm,w1[Si+1]=D1+Pm,w1[Si+2]=$m+Pm,O0.faceidx+=3):(h1[dv]=Sv,h1[Ev]=bv,h1[zv]=Uv,h1[dv+1]=lv,h1[Ev+1]=Kv,h1[zv+1]=Fv,h1[dv+2]=Qv,h1[Ev+2]=hy,h1[zv+2]=yy,h1[Ev]=bv,h1[Rv]=Jv,h1[zv]=Uv,h1[Ev+1]=Kv,h1[Rv+1]=Nv,h1[zv+1]=Fv,h1[Ev+2]=hy,h1[Rv+2]=ey,h1[zv+2]=yy,w1[Si]=Om+Pm,w1[Si+1]=D1+Pm,w1[Si+2]=R1+Pm,w1[Si+3]=D1+Pm,w1[Si+4]=$m+Pm,w1[Si+5]=R1+Pm,O0.faceidx+=6)}}O0.vertices+=D0},jp.drawCone=function(Q,Ze,_e,it,lt){if(!Ze||!_e)return;lt=lt||{r:0,g:0,b:0};let Ye=new _.Vector3(_e.x-Ze.x,_e.y-Ze.y,_e.z-Ze.z);var Vt=f(Ye.x,Ye.y,Ye.z);Ye=Ye.normalize();var Ct,Nl,ms,Si,_s,gs,Yl=R.basisVectors.length,Dp=R.basisVectors,Op=Yl+2,e0=Q.updateGeoGroup(Op),Xp=e0.vertices,_0=e0.vertexArray,D0=e0.normalArray,O0=e0.colorArray,U0=e0.faceArray;for(_0[Ct=3*Xp]=Ze.x,_0[Ct+1]=Ze.y,_0[Ct+2]=Ze.z,D0[Ct]=-Ye.x,D0[Ct+1]=-Ye.y,D0[Ct+2]=-Ye.z,O0[Ct]=lt.r,O0[Ct+1]=lt.g,O0[Ct+2]=lt.b,_0[Ct+3]=_e.x,_0[Ct+4]=_e.y,_0[Ct+5]=_e.z,D0[Ct+3]=Ye.x,D0[Ct+4]=Ye.y,D0[Ct+5]=Ye.z,O0[Ct+3]=lt.r,O0[Ct+4]=lt.g,O0[Ct+5]=lt.b,Ct+=6,ms=0;ms<Yl;++ms){var E0=Dp[ms].clone();E0.multiplyScalar(it),Si=Vt[0]*E0.x+Vt[3]*E0.y+Vt[6]*E0.z,_s=Vt[1]*E0.x+Vt[4]*E0.y+Vt[7]*E0.z,gs=Vt[5]*E0.y+Vt[8]*E0.z,_0[Ct]=Si+Ze.x,_0[Ct+1]=_s+Ze.y,_0[Ct+2]=gs+Ze.z,D0[Ct]=Si,D0[Ct+1]=_s,D0[Ct+2]=gs,O0[Ct]=lt.r,O0[Ct+1]=lt.g,O0[Ct+2]=lt.b,Ct+=3}for(e0.vertices+=Yl+2,Nl=e0.faceidx,ms=0;ms<Yl;ms++){var ym=Xp+2+ms,mm=Xp+2+(ms+1)%Yl;U0[Nl]=ym,U0[Nl+1]=mm,U0[Nl+2]=Xp,U0[Nl+=3]=ym,U0[Nl+1]=mm,U0[Nl+2]=Xp+1,Nl+=3}e0.faceidx+=6*Yl};var $=new class{constructor(){this.cache=new Map}getVerticesForRadius(Q,Ze){Ze=Ze||2,this.cache.has(Ze)||this.cache.set(Ze,new Map);let _e=this.cache.get(Ze);if(_e.has(Q))return _e.get(Q);var it={vertices:[],verticesRows:[],normals:[]},lt=16*Ze,Ye=10*Ze;Q<1&&(lt=10*Ze,Ye=8*Ze);var Vt,Ct,Nl=2*Math.PI,ms=Math.PI;for(Ct=0;Ct<=Ye;Ct++){let _s=[];for(Vt=0;Vt<=lt;Vt++){let gs=Vt/lt,Yl=Ct/Ye,Dp=-Q*Math.cos(0+gs*Nl)*Math.sin(0+Yl*ms),Op=Q*Math.cos(0+Yl*ms),e0=Q*Math.sin(0+gs*Nl)*Math.sin(0+Yl*ms);var Si=new _.Vector3(Dp,Op,e0);Si.normalize(),it.vertices.push({x:Dp,y:Op,z:e0}),it.normals.push(Si),_s.push(it.vertices.length-1)}it.verticesRows.push(_s)}return _e.set(Q,it),it}};jp.drawSphere=function(Q,Ze,_e,it,lt){var Ye=$.getVerticesForRadius(_e,lt),Vt=Ye.vertices,Ct=Ye.normals,Nl=Q.updateGeoGroup(Vt.length),ms=Nl.vertices,Si=Nl.vertexArray,_s=Nl.colorArray,gs=Nl.faceArray,Yl=Nl.lineArray,Dp=Nl.normalArray;for(let Xp=0,_0=Vt.length;Xp<_0;++Xp){let D0=3*(ms+Xp),O0=Vt[Xp];Si[D0]=O0.x+Ze.x,Si[D0+1]=O0.y+Ze.y,Si[D0+2]=O0.z+Ze.z,_s[D0]=it.r,_s[D0+1]=it.g,_s[D0+2]=it.b}Nl.vertices+=Vt.length;let Op=Ye.verticesRows,e0=Op.length-1;for(let Xp=0;Xp<e0;Xp++){let _0=Op[Xp].length-1;for(let D0=0;D0<_0;D0++){let O0=Nl.faceidx,U0=Nl.lineidx,E0=Op[Xp][D0+1]+ms,ym=3*E0,mm=Op[Xp][D0]+ms,Vm=3*mm,Pm=Op[Xp+1][D0]+ms,a1=3*Pm,h1=Op[Xp+1][D0+1]+ms,Hm=3*h1,w1=Ct[E0-ms],_m=Ct[mm-ms],Om=Ct[Pm-ms],D1=Ct[h1-ms];Math.abs(Vt[E0-ms].y)===_e?(Dp[ym]=w1.x,Dp[a1]=Om.x,Dp[Hm]=D1.x,Dp[ym+1]=w1.y,Dp[a1+1]=Om.y,Dp[Hm+1]=D1.y,Dp[ym+2]=w1.z,Dp[a1+2]=Om.z,Dp[Hm+2]=D1.z,gs[O0]=E0,gs[O0+1]=Pm,gs[O0+2]=h1,Yl[U0]=E0,Yl[U0+1]=Pm,Yl[U0+2]=E0,Yl[U0+3]=h1,Yl[U0+4]=Pm,Yl[U0+5]=h1,Nl.faceidx+=3,Nl.lineidx+=6):Math.abs(Vt[Pm-ms].y)===_e?(Dp[ym]=w1.x,Dp[Vm]=_m.x,Dp[a1]=Om.x,Dp[ym+1]=w1.y,Dp[Vm+1]=_m.y,Dp[a1+1]=Om.y,Dp[ym+2]=w1.z,Dp[Vm+2]=_m.z,Dp[a1+2]=Om.z,gs[O0]=E0,gs[O0+1]=mm,gs[O0+2]=Pm,Yl[U0]=E0,Yl[U0+1]=mm,Yl[U0+2]=E0,Yl[U0+3]=Pm,Yl[U0+4]=mm,Yl[U0+5]=Pm,Nl.faceidx+=3,Nl.lineidx+=6):(Dp[ym]=w1.x,Dp[Vm]=_m.x,Dp[Hm]=D1.x,Dp[ym+1]=w1.y,Dp[Vm+1]=_m.y,Dp[Hm+1]=D1.y,Dp[ym+2]=w1.z,Dp[Vm+2]=_m.z,Dp[Hm+2]=D1.z,Dp[Vm]=_m.x,Dp[a1]=Om.x,Dp[Hm]=D1.x,Dp[Vm+1]=_m.y,Dp[a1+1]=Om.y,Dp[Hm+1]=D1.y,Dp[Vm+2]=_m.z,Dp[a1+2]=Om.z,Dp[Hm+2]=D1.z,gs[O0]=E0,gs[O0+1]=mm,gs[O0+2]=h1,gs[O0+3]=mm,gs[O0+4]=Pm,gs[O0+5]=h1,Yl[U0]=E0,Yl[U0+1]=mm,Yl[U0+2]=E0,Yl[U0+3]=h1,Yl[U0+4]=mm,Yl[U0+5]=Pm,Yl[U0+6]=Pm,Yl[U0+7]=h1,Nl.faceidx+=6,Nl.lineidx+=8)}}}})(o||(o={}));var A=t(546),C=t(864);function j(jp,f){var R,$,Q,Ze,_e,it,lt,Ye,Vt,Ct=[],Nl=jp;for((Nl=[]).push(jp[0]),R=1,$=jp.length-1;R<$;R++)if(_e=jp[R],it=jp[R+1],_e.smoothen){var ms=new _.Vector3((_e.x+it.x)/2,(_e.y+it.y)/2,(_e.z+it.z)/2);ms.atom=_e.atom,Nl.push(ms)}else Nl.push(_e);for(Nl.push(jp[jp.length-1]),R=-1,Q=Nl.length;R<=Q-3;R++)if(Ze=Nl[R===-1?0:R],_e=Nl[R+1],it=Nl[R+2],lt=Nl[R===Q-3?Q-1:R+3],Ye=new _.Vector3().subVectors(it,Ze).multiplyScalar(.5),Vt=new _.Vector3().subVectors(lt,_e).multiplyScalar(.5),!it.skip)for(var Si=0;Si<f;Si++){var _s=1/f*Si,gs=_e.x+_s*Ye.x+_s*_s*(-3*_e.x+3*it.x-2*Ye.x-Vt.x)+_s*_s*_s*(2*_e.x-2*it.x+Ye.x+Vt.x),Yl=_e.y+_s*Ye.y+_s*_s*(-3*_e.y+3*it.y-2*Ye.y-Vt.y)+_s*_s*_s*(2*_e.y-2*it.y+Ye.y+Vt.y),Dp=_e.z+_s*Ye.z+_s*_s*(-3*_e.z+3*it.z-2*Ye.z-Vt.z)+_s*_s*_s*(2*_e.z-2*it.z+Ye.z+Vt.z),Op=new _.Vector3(gs,Yl,Dp);Op.atom=Si<f/2?_e.atom:it.atom,Ct.push(Op)}return Ct.push(Nl[Nl.length-1]),Ct}const V=.5,J=1.3,re=.8,ie=.4,K=.4;function Ne(jp,f,R,$){for(var Q,Ze,_e,it,lt=0,Ye=f.length;lt<Ye;lt++){it=Math.round(lt*($.length-1)/Ye),_e=S.CC.color($[it]);var Vt=jp.updateGeoGroup(2),Ct=Vt.vertexArray,Nl=Vt.colorArray,ms=Vt.faceArray;Ct[Ze=3*(Q=Vt.vertices)]=f[lt].x,Ct[Ze+1]=f[lt].y,Ct[Ze+2]=f[lt].z,Ct[Ze+3]=R[lt].x,Ct[Ze+4]=R[lt].y,Ct[Ze+5]=R[lt].z;for(var Si=0;Si<6;++Si)Nl[Ze+3*Si]=_e.r,Nl[Ze+1+3*Si]=_e.g,Nl[Ze+2+3*Si]=_e.b;if(lt>0){var _s=[Q,Q+1,Q-1,Q-2],gs=Vt.faceidx;ms[gs]=_s[0],ms[gs+1]=_s[1],ms[gs+2]=_s[3],ms[gs+3]=_s[1],ms[gs+4]=_s[2],ms[gs+5]=_s[3],Vt.faceidx+=6}Vt.vertices+=2}}function G(jp,f,R,$,Q,Ze,_e){_e&&_e!=="default"||(_e="rectangle"),_e==="edged"?(function(it,lt,Ye,Vt,Ct){if(!(lt.length<2)){var Nl,ms;if(Nl=lt[0],ms=lt[lt.length-1],Nl=j(Nl,Vt),ms=j(ms,Vt),!Ct)return Ne(it,Nl,ms,Ye);var Si,_s,gs,Yl,Dp,Op,e0,Xp,_0,D0,O0,U0,E0,ym,mm,Vm,Pm,a1,h1,Hm,w1,_m,Om=[],D1=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(E0=0,ym=Nl.length;E0<ym;E0++){if(D0=Math.round(E0*(Ye.length-1)/ym),_0=S.CC.color(Ye[D0]),Om.push(_s=Nl[E0]),Om.push(_s),Om.push(gs=ms[E0]),Om.push(gs),E0<ym-1){var $m=Nl[E0+1].clone().sub(Nl[E0]);Si=ms[E0].clone().sub(Nl[E0]).cross($m).normalize().multiplyScalar(Ct)}for(Om.push(Yl=Nl[E0].clone().add(Si)),Om.push(Yl),Om.push(Dp=ms[E0].clone().add(Si)),Om.push(Dp),_s.atom!==void 0&&(O0=_s.atom),Hm=(h1=it.updateGeoGroup(8)).vertexArray,w1=h1.colorArray,_m=h1.faceArray,Hm[e0=3*(Op=h1.vertices)]=_s.x,Hm[e0+1]=_s.y,Hm[e0+2]=_s.z,Hm[e0+3]=_s.x,Hm[e0+4]=_s.y,Hm[e0+5]=_s.z,Hm[e0+6]=gs.x,Hm[e0+7]=gs.y,Hm[e0+8]=gs.z,Hm[e0+9]=gs.x,Hm[e0+10]=gs.y,Hm[e0+11]=gs.z,Hm[e0+12]=Yl.x,Hm[e0+13]=Yl.y,Hm[e0+14]=Yl.z,Hm[e0+15]=Yl.x,Hm[e0+16]=Yl.y,Hm[e0+17]=Yl.z,Hm[e0+18]=Dp.x,Hm[e0+19]=Dp.y,Hm[e0+20]=Dp.z,Hm[e0+21]=Dp.x,Hm[e0+22]=Dp.y,Hm[e0+23]=Dp.z,mm=0;mm<8;++mm)w1[e0+3*mm]=_0.r,w1[e0+1+3*mm]=_0.g,w1[e0+2+3*mm]=_0.b;if(E0>0){var R1=U0!==void 0&&O0!==void 0&&U0.serial!==O0.serial;for(mm=0;mm<4;mm++){var k1=[Op+D1[mm][0],Op+D1[mm][1],Op+D1[mm][2],Op+D1[mm][3]];if(_m[Xp=h1.faceidx]=k1[0],_m[Xp+1]=k1[1],_m[Xp+2]=k1[3],_m[Xp+3]=k1[1],_m[Xp+4]=k1[2],_m[Xp+5]=k1[3],h1.faceidx+=6,O0.clickable||U0.clickable||O0.hoverable||U0.hoverable){var Jm=Om[k1[3]].clone(),I1=Om[k1[0]].clone(),ug=Om[k1[2]].clone(),O1=Om[k1[1]].clone();if(Jm.atom=Om[k1[3]].atom||null,ug.atom=Om[k1[2]].atom||null,I1.atom=Om[k1[0]].atom||null,O1.atom=Om[k1[1]].atom||null,R1){var s1=Jm.clone().add(I1).multiplyScalar(.5),yg=ug.clone().add(O1).multiplyScalar(.5),Z1=Jm.clone().add(O1).multiplyScalar(.5);mm%2==0?((U0.clickable||U0.hoverable)&&(Vm=new p.Triangle(s1,Z1,Jm),Pm=new p.Triangle(yg,ug,Z1),a1=new p.Triangle(Z1,ug,Jm),U0.intersectionShape.triangle.push(Vm),U0.intersectionShape.triangle.push(Pm),U0.intersectionShape.triangle.push(a1)),(O0.clickable||O0.hoverable)&&(Vm=new p.Triangle(I1,O1,Z1),Pm=new p.Triangle(O1,yg,Z1),a1=new p.Triangle(I1,Z1,s1),O0.intersectionShape.triangle.push(Vm),O0.intersectionShape.triangle.push(Pm),O0.intersectionShape.triangle.push(a1))):((O0.clickable||O0.hoverable)&&(Vm=new p.Triangle(s1,Z1,Jm),Pm=new p.Triangle(yg,ug,Z1),a1=new p.Triangle(Z1,ug,Jm),O0.intersectionShape.triangle.push(Vm),O0.intersectionShape.triangle.push(Pm),O0.intersectionShape.triangle.push(a1)),(U0.clickable||U0.hoverable)&&(Vm=new p.Triangle(I1,O1,Z1),Pm=new p.Triangle(O1,yg,Z1),a1=new p.Triangle(I1,Z1,s1),U0.intersectionShape.triangle.push(Vm),U0.intersectionShape.triangle.push(Pm),U0.intersectionShape.triangle.push(a1)))}else(O0.clickable||O0.hoverable)&&(Vm=new p.Triangle(I1,O1,Jm),Pm=new p.Triangle(O1,ug,Jm),O0.intersectionShape.triangle.push(Vm),O0.intersectionShape.triangle.push(Pm))}}}h1.vertices+=8,U0=O0}var pg=Om.length-8;for(Hm=(h1=it.updateGeoGroup(8)).vertexArray,w1=h1.colorArray,_m=h1.faceArray,e0=3*(Op=h1.vertices),Xp=h1.faceidx,E0=0;E0<4;E0++){Om.push(Om[2*E0]),Om.push(Om[pg+2*E0]);var J1=Om[2*E0],wg=Om[pg+2*E0];Hm[e0+6*E0]=J1.x,Hm[e0+1+6*E0]=J1.y,Hm[e0+2+6*E0]=J1.z,Hm[e0+3+6*E0]=wg.x,Hm[e0+4+6*E0]=wg.y,Hm[e0+5+6*E0]=wg.z,w1[e0+6*E0]=_0.r,w1[e0+1+6*E0]=_0.g,w1[e0+2+6*E0]=_0.b,w1[e0+3+6*E0]=_0.r,w1[e0+4+6*E0]=_0.g,w1[e0+5+6*E0]=_0.b}pg+=8,Vm=[Op,Op+2,Op+6,Op+4],Pm=[Op+1,Op+5,Op+7,Op+3],_m[Xp]=Vm[0],_m[Xp+1]=Vm[1],_m[Xp+2]=Vm[3],_m[Xp+3]=Vm[1],_m[Xp+4]=Vm[2],_m[Xp+5]=Vm[3],_m[Xp+6]=Pm[0],_m[Xp+7]=Pm[1],_m[Xp+8]=Pm[3],_m[Xp+9]=Pm[1],_m[Xp+10]=Pm[2],_m[Xp+11]=Pm[3],h1.faceidx+=12,h1.vertices+=8}})(jp,f,R,$,Q):_e!=="rectangle"&&_e!=="oval"&&_e!=="parabola"||(function(it,lt,Ye,Vt,Ct,Nl,ms){var Si,_s,gs,Yl,Dp,Op,e0,Xp,_0,D0;if((gs=lt.length)<2||lt[0].length<2)return;for(Si=0;Si<gs;Si++)lt[Si]=j(lt[Si],Vt);if(Yl=lt[0].length,!Ct)return Ne(it,lt[0],lt[gs-1],Ye);var O0=[],U0=[],E0=[];for(_s=0;_s<gs;_s++)O0.push(.25+1.5*Math.sqrt((gs-1)*_s-Math.pow(_s,2))/(gs-1)),U0.push(.5),E0.push(2*(Math.pow(_s/gs,2)-_s/gs)+.6);var ym,mm,Vm,Pm,a1,h1,Hm,w1,_m,Om,D1=[];for(_s=0;_s<2*gs-1;_s++)D1[_s]=[_s,_s+1,_s+1-2*gs,_s-2*gs];D1[2*gs-1]=[_s,_s+1-2*gs,_s+1-4*gs,_s-2*gs];let $m=it.updateGeoGroup();for(Si=0;Si<Yl;Si++){let I1=it.groups,ug=!1;var R1,k1;for($m=it.updateGeoGroup(2*gs),I1!=it.groups&&Si>0&&(Si-=1,ug=!0),h1=Math.round(Si*(Ye.length-1)/Yl),a1=S.CC.color(Ye[h1]),_0=e0,D0=Xp,e0=[],Xp=[],Dp=[],lt[0][Si].atom!==void 0&&(Pm=lt[0][Si].atom,ms==="oval"?Op=O0:ms==="rectangle"?Op=U0:ms==="parabola"&&(Op=E0)),Op||(Op=U0),_s=0;_s<gs;_s++)R1=Si<Yl-1?lt[_s][Si+1].clone().sub(lt[_s][Si]):lt[_s][Si-1].clone().sub(lt[_s][Si]).negate(),k1=_s<gs-1?lt[_s+1][Si].clone().sub(lt[_s][Si]):lt[_s-1][Si].clone().sub(lt[_s][Si]).negate(),Dp[_s]=k1.cross(R1).normalize().multiplyScalar(Ct*Op[_s]);for(_s=0;_s<gs;_s++)e0[_s]=lt[_s][Si].clone().add(Dp[_s].clone().negate());for(_s=0;_s<gs;_s++)Xp[_s]=lt[_s][Si].clone().add(Dp[_s]);for(Hm=$m.vertexArray,w1=$m.colorArray,_m=$m.faceArray,mm=3*(ym=$m.vertices),_s=0;_s<gs;_s++)Hm[mm+3*_s+0]=e0[_s].x,Hm[mm+3*_s+1]=e0[_s].y,Hm[mm+3*_s+2]=e0[_s].z;for(_s=0;_s<gs;_s++)Hm[mm+3*_s+0+3*gs]=Xp[gs-1-_s].x,Hm[mm+3*_s+1+3*gs]=Xp[gs-1-_s].y,Hm[mm+3*_s+2+3*gs]=Xp[gs-1-_s].z;for(_s=0;_s<2*gs;++_s)w1[mm+3*_s+0]=a1.r,w1[mm+3*_s+1]=a1.g,w1[mm+3*_s+2]=a1.b;if(Si>0&&!ug){for(_s=0;_s<2*gs;_s++)Om=[ym+D1[_s][0],ym+D1[_s][1],ym+D1[_s][2],ym+D1[_s][3]],_m[Vm=$m.faceidx]=Om[0],_m[Vm+1]=Om[1],_m[Vm+2]=Om[3],_m[Vm+3]=Om[1],_m[Vm+4]=Om[2],_m[Vm+5]=Om[3],$m.faceidx+=6;if(Pm.clickable||Pm.hoverable){var Jm=[];for(_s in Jm.push(new p.Triangle(_0[0],e0[0],e0[gs-1])),Jm.push(new p.Triangle(_0[0],e0[gs-1],_0[gs-1])),Jm.push(new p.Triangle(_0[gs-1],e0[gs-1],Xp[gs-1])),Jm.push(new p.Triangle(_0[gs-1],Xp[gs-1],D0[gs-1])),Jm.push(new p.Triangle(Xp[0],D0[0],D0[gs-1])),Jm.push(new p.Triangle(Xp[gs-1],Xp[0],D0[gs-1])),Jm.push(new p.Triangle(e0[0],_0[0],D0[0])),Jm.push(new p.Triangle(Xp[0],e0[0],D0[0])),Jm)Pm.intersectionShape.triangle.push(Jm[_s])}}$m.vertices+=2*gs}for(Hm=$m.vertexArray,w1=$m.colorArray,_m=$m.faceArray,mm=3*(ym=$m.vertices),Vm=$m.faceidx,Si=0;Si<gs-1;Si++)Om=[Si,Si+1,2*gs-2-Si,2*gs-1-Si],_m[Vm=$m.faceidx]=Om[0],_m[Vm+1]=Om[1],_m[Vm+2]=Om[3],_m[Vm+3]=Om[1],_m[Vm+4]=Om[2],_m[Vm+5]=Om[3],$m.faceidx+=6;for(Si=0;Si<gs-1;Si++)Om=[ym-1-Si,ym-2-Si,ym-2*gs+Si+1,ym-2*gs+Si],_m[Vm=$m.faceidx]=Om[0],_m[Vm+1]=Om[1],_m[Vm+2]=Om[3],_m[Vm+3]=Om[1],_m[Vm+4]=Om[2],_m[Vm+5]=Om[3],$m.faceidx+=6})(jp,f,R,$,Q,0,_e)}function se(jp){return jp&&jp.elem==="C"&&jp.atom==="CA"}function He(jp,f){if(jp&&f&&jp.chain===f.chain){if(!(jp.hetflag||f.hetflag||jp.reschain!==f.reschain||jp.resi!==f.resi&&jp.resi!==f.resi-1))return!0;if(jp.resi<f.resi){var R=jp.x-f.x,$=jp.y-f.y,Q=jp.z-f.z,Ze=R*R+$*$+Q*Q;if(jp.atom=="CA"&&f.atom=="CA"&&Ze<16||(jp.atom=="P"||f.atom=="P")&&Ze<64)return!0}}return!1}function Fe(jp,f,R,$,Q){if(f!=null&&f.vertices!=0){Q&&(f.initTypedArrays(),f.setUpNormals());var Ze=new d.MeshDoubleLambertMaterial;Ze.vertexColors=d.Coloring.FaceColors,typeof R=="number"&&R>=0&&R<1&&(Ze.transparent=!0,Ze.opacity=R),Ze.outline=$;var _e=new d.Mesh(f,Ze);jp.add(_e)}}function Xe(jp,f,R,$,Q,Ze,_e,it,lt){var Ye,Vt,Ct,Nl,ms,Si;if($&&Q&&_e){var _s=Q.sub($);_s.normalize();var gs=it[lt];for(Vt=lt+1;Vt<it.length&&(gs=it[Vt]).atom!=_e.atom;Vt++);if((gs=gs?new _.Vector3(gs.x,gs.y,gs.z):new _.Vector3(0,0,0)).sub($),_e.ss==="arrow start"){var Yl=gs.clone().multiplyScalar(.3).cross(Q);$.add(Yl);var Dp=gs.clone().cross(_s).normalize();_s.rotateAboutVector(Dp,.43)}for(_e.style.cartoon.ribbon?Ye=_e.style.cartoon.thickness||ie:_e.style.cartoon.width?Ye=_e.style.cartoon.width:_e.ss==="c"?Ye=_e.atom==="P"?re:V:_e.ss==="arrow start"?(Ye=J,ms=!0):Ye=_e.ss==="arrow end"||_e.ss==="h"&&_e.style.cartoon.tubes||_e.ss==="tube start"?V:J,Ze!=null&&_s.dot(Ze)<0&&_s.negate(),_s.multiplyScalar(Ye),Vt=0;Vt<f;Vt++)Ct=2*Vt/(f-1)-1,(Nl=new _.Vector3($.x+Ct*_s.x,$.y+Ct*_s.y,$.z+Ct*_s.z)).atom=_e,_e.ss==="s"&&(Nl.smoothen=!0),jp[Vt].push(Nl);if(ms)for(_s.multiplyScalar(2),Vt=0;Vt<f;Vt++)Ct=2*Vt/(f-1)-1,(Nl=new _.Vector3($.x+Ct*_s.x,$.y+Ct*_s.y,$.z+Ct*_s.z)).atom=_e,Nl.smoothen=!1,Nl.skip=!0,jp[Vt].push(Nl);return Si=_e.style.cartoon.style||"default",jp.style?jp.style!=Si&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),jp.style="default"):jp.style=Si,_e.ss!=="arrow start"&&_e.ss!=="arrow end"||(_e.ss="s"),ms}}const be={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},ta={DA:!0,DG:!0,A:!0,G:!0},pn={DT:!0,DC:!0,U:!0,C:!0,T:!0},mr={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function bp(jp,f,R,$=10){let Q=$,Ze=$;var _e,it,lt,Ye,Vt,Ct,Nl,ms,Si,_s,gs,Yl,Dp,Op,e0,Xp,_0,D0,O0=new d.Geometry(!0),U0=new d.Geometry(!0),E0=[],ym=[],mm=1,Vm=!1,Pm={};for(var a1 in A.Gradient.builtinGradients)A.Gradient.builtinGradients.hasOwnProperty(a1)&&(Pm[a1]=new A.Gradient.builtinGradients[a1](R[1],R[0]));var h1=function(J1,wg){return R&&wg.color==="spectrum"?wg.colorscheme in Pm?Pm[wg.colorscheme].valueToHex(J1.resi):Pm.sinebow.valueToHex(J1.resi):(0,C.getColorFromStyle)(J1,wg).getHex()};for(ms=0;ms<Q;ms++)ym[ms]=[];var Hm=!1,w1=!1,_m=[];for(ms in f){if((Ye=f[ms]).elem==="C"&&Ye.atom==="CA"){var Om=He(lt,Ye);Om&&Ye.ss==="s"?Hm=!0:Hm&&(lt&&it&&lt.style.cartoon.arrows&&it.style.cartoon.arrows&&(lt.ss="arrow end",it.ss="arrow start"),Hm=!1),Om&&(lt.ss==="h"||lt.ss=="tube start")&&lt.style.cartoon.tubes?!w1&&lt.ss!="tube start"&&Ye.style.cartoon.tubes&&(Ye.ss="tube start",w1=!0):w1&&(lt.ss==="tube start"?lt.ss="tube end":it&&it.style.cartoon.tubes&&(it.ss="tube end"),w1=!1),it=lt,lt=Ye}Ye&&Ye.atom in be&&_m.push(Ye)}w1&&lt.style.cartoon.tubes&&(lt.ss="tube end",w1=!1);var D1=function(J1){ym[0].length>0&&G(U0,ym,E0,Ze,Nl,0,ym.style);var wg=[],tv=null;if(J1){for(ms=0;ms<Q;ms++)wg[ms]=ym[ms][ym[ms].length-1];tv=E0[E0.length-1]}for(ym=[],ms=0;ms<Q;ms++)ym[ms]=[];if(E0=[],J1){for(ms=0;ms<Q;ms++)ym[ms].push(wg[ms]);E0.push(tv)}Fe(jp,U0,mm,Vm,!0),Fe(jp,O0,mm,Vm,!1),U0=new d.Geometry(!0),O0=new d.Geometry(!0)};lt=void 0;let $m=[];for(var R1=0;R1<_m.length;R1++){var k1=(Ye=_m[R1]).resn.trim(),Jm=k1 in mr;if(mm=1,_e=Ye.style.cartoon,lt&&lt.style.cartoon&&(mm=lt.style.cartoon.opacity),lt&&lt.style.cartoon&&lt.style.cartoon.outline&&(Vm=lt.style.cartoon.outline),!lt||!lt.style.cartoon||Ye.style.cartoon&&lt.style.cartoon.opacity==Ye.style.cartoon.opacity||D1(lt.chain==Ye.chain),lt&&Ye&&!He(lt,Ye)&&lt.chain&&lt.chain==Ye.chain&&!lt.hetflag&&!Ye.hetflag&&lt.reschain+1==Ye.reschain&&$m.push([lt,Ye]),_e.style==="trace"){if(!Ye.hetflag&&(Ye.elem==="C"&&Ye.atom==="CA"||Jm&&Ye.atom==="P"||Ye.atom==="BB")){if(Ct=h1(Ye,_e),Nl=(0,C.isNumeric)(_e.thickness)?_e.thickness:ie,He(lt,Ye))if(Ct==Vt){var I1=S.CC.color(Ct);o.drawCylinder(O0,lt,Ye,Nl,I1,2,2)}else{var ug=new _.Vector3().addVectors(lt,Ye).multiplyScalar(.5),O1=S.CC.color(Vt),s1=S.CC.color(Ct);o.drawCylinder(O0,lt,ug,Nl,O1,2,0),o.drawCylinder(O0,ug,Ye,Nl,s1,0,2)}if((Ye.clickable===!0||Ye.hoverable)&&Ye.intersectionShape!==void 0){var yg=new _.Vector3(Ye.x,Ye.y,Ye.z);Ye.intersectionShape.sphere.push(new p.Sphere(yg,Nl))}lt=Ye,Vt=Ct}}else{if(se(Ye)||Jm&&(Ye.atom==="P"||Ye.atom.indexOf("O5")==0)){if(D0)if(Ye.ss==="tube end")D0=!1,_0=new _.Vector3(Ye.x,Ye.y,Ye.z),o.drawCylinder(O0,Xp,_0,2,S.CC.color(Vt),1,1),Ye.ss="h";else{if(lt.chain==Ye.chain&&lt.ss!=="tube end")continue;D0=!1,lt.ss="h",_0=new _.Vector3(lt.x,lt.y,lt.z),o.drawCylinder(O0,Xp,_0,2,S.CC.color(Vt),1,1)}if(lt&&(!He(lt,Ye)||lt.ss==="tube start")){for(lt.ss==="tube start"&&(D0=!0,Xp=new _.Vector3(lt.x,lt.y,lt.z),lt.ss="h"),e0&&(Op=Yl?new _.Vector3().addVectors(lt,Yl).multiplyScalar(.5):new _.Vector3(lt.x,lt.y,lt.z),o.drawCylinder(O0,Op,e0,K,S.CC.color(e0.color),0,2),Xe(ym,Q,!0,Yl,Dp,gs,lt,_m,R1),E0.push(Ct),Op=null,e0=null),ym[0].length>0&&G(U0,ym,E0,Ze,Nl,0,ym.style),ym=[],ms=0;ms<Q;ms++)ym[ms]=[];E0=[]}if(lt===void 0||lt.rescode!=Ye.rescode||lt.resi!=Ye.resi){if(e0&&lt!=null){var Z1=(Op=new _.Vector3().addVectors(lt,Ye).multiplyScalar(.5)).clone().sub(e0).multiplyScalar(.02);Op.add(Z1),o.drawCylinder(O0,Op,e0,K,S.CC.color(e0.color),0,2),Op=null,e0=null}Ct=h1(Ye,_e),E0.push(Ct),Nl=(0,C.isNumeric)(_e.thickness)?_e.thickness:ie,lt=Ye,(Si=new _.Vector3(lt.x,lt.y,lt.z)).resi=lt.resi,Vt=Ct}Ye.clickable!==!0&&Ye.hoverable!==!0||Ye.intersectionShape!==void 0&&Ye.intersectionShape.triangle!==void 0||(Ye.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else lt!=null&&(se(lt)&&Ye.atom==="O"||Jm&&lt.atom==="P"&&(Ye.atom==="OP2"||Ye.atom==="O2P")||Jm&&lt.atom.indexOf("O5")==0&&Ye.atom.indexOf("C5")==0)?((_s=new _.Vector3(Ye.x,Ye.y,Ye.z)).resi=Ye.resi,Ye.atom!=="OP2"&&Ye.atom!=="O2P"||(Dp=new _.Vector3(Ye.x,Ye.y,Ye.z))):Jm&&Ye.atom.indexOf("O3")==0?Yl=new _.Vector3(Ye.x,Ye.y,Ye.z):(Ye.atom==="N1"&&k1 in ta||Ye.atom==="N3"&&k1 in pn)&&((e0=new _.Vector3(Ye.x,Ye.y,Ye.z)).color=(0,C.getColorFromStyle)(Ye,_e).getHex());_s&&Si&&_s.resi===Si.resi&&(Xe(ym,Q,!0,Si,_s,gs,lt,_m,R1),gs=_s,Si=null,_s=null,E0.push(Ct))}}e0&&(Op=Yl?new _.Vector3().addVectors(lt,Yl).multiplyScalar(.5):new _.Vector3(lt.x,lt.y,lt.z),o.drawCylinder(O0,Op,e0,K,S.CC.color(e0.color),0,2),Xe(ym,Q,!0,Yl,Dp,gs,lt,_m,R1),E0.push(Ct)),D1(!1);var pg=function(J1,wg){if(J1.style.cartoon.gapcutoff&&J1.style.cartoon.gapcutoff==wg.style.cartoon.gapcutoff){let Sv=J1.style.cartoon.gapcutoff,bv=wg.resi-J1.resi;if(bv>0&&bv<Sv){let Jv=.25,Uv=wg.x-J1.x,lv=wg.y-J1.y,Kv=wg.z-J1.z,Nv=Math.sqrt(Uv*Uv+lv*lv+Kv*Kv),Fv=Nv/(2*bv),Qv=new _.Vector3(J1.x,J1.y,J1.z),hy=Nv/Fv,ey=new _.Vector3((wg.x-J1.x)/hy,(wg.y-J1.y)/hy,(wg.z-J1.z)/hy);Qv.add({x:ey.x/2,y:ey.y/2,z:ey.z/2});let yy=Qv.clone().add(ey);ey.multiplyScalar(2);let dv=(0,C.extend)({},J1);for(var tv=0;tv<bv;tv++){dv.resi+=1;let Ev=h1(dv,dv.style.cartoon);o.drawCylinder(O0,Qv,yy,Jv,S.CC.color(Ev),a.FLAT,a.FLAT),Qv.add(ey),yy.add(ey)}D1(!1)}}};for(let J1 of $m)pg(J1[0],J1[1])}var Sp=t(797),_r=t(865),xs=t(392);function ne(jp,f){for(var R=[[]],$=(f=f||{}).assignBonds===void 0||f.assignBonds,Q=jp.trimStart().split(/\r?\n|\r/);Q.length>0&&!(Q.length<3);){var Ze=parseInt(Q[0]);if(isNaN(Ze)||Ze<=0||Q.length<Ze+2)break;var _e=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(Q[1]);if(_e!=null&&_e.length>1){var it=new Float32Array(_e[1].split(/\s+/)),lt=new d.Matrix3(it[0],it[3],it[6],it[1],it[4],it[7],it[2],it[5],it[8]);R.modelData=[{cryst:{matrix:lt}}]}for(var Ye=2,Vt=R[R.length-1].length,Ct=Vt+Ze,Nl=Vt;Nl<Ct;Nl++){var ms=Q[Ye++].trim().split(/\s+/),Si={};Si.serial=Nl;var _s=ms[0];Si.atom=Si.elem=_s[0].toUpperCase()+_s.substring(1,2).toLowerCase(),Si.x=parseFloat(ms[1]),Si.y=parseFloat(ms[2]),Si.z=parseFloat(ms[3]),Si.hetflag=!0,Si.bonds=[],Si.bondOrder=[],Si.properties={},R[R.length-1][Nl]=Si,ms.length>=7&&(Si.dx=parseFloat(ms[4]),Si.dy=parseFloat(ms[5]),Si.dz=parseFloat(ms[6]))}if(!f.multimodel)break;R.push([]),Q.splice(0,Ye)}if($)for(let Yl=0;Yl<R.length;Yl++)(0,xs.assignBonds)(R[Yl],f);if(f.onemol){var gs=R;(R=[]).push(gs[0]);for(let Yl=1;Yl<gs.length;Yl++){let Dp=R[0].length;for(let Op=0;Op<gs[Yl].length;Op++){let e0=gs[Yl][Op];for(let Xp=0;Xp<e0.bonds.length;Xp++)e0.bonds[Xp]=e0.bonds[Xp]+Dp;e0.index=R[0].length,e0.serial=R[0].length,R[0].push(e0)}}}return R}function zl(jp,f){var R="V2000",$=jp.split(/\r?\n|\r/);return $.length>3&&$[3].length>38&&(R=$[3].substring(34,39)),R==="V2000"?(function(Q,Ze){var _e=[[]],it=!1;for(Ze.keepH!==void 0&&(it=!Ze.keepH);Q.length>0&&!(Q.length<4);){var lt=parseInt(Q[3].substring(0,3));if(isNaN(lt)||lt<=0)break;var Ye=parseInt(Q[3].substring(3,6)),Vt=4;if(Q.length<4+lt+Ye)break;var Ct,Nl,ms=[],Si=_e[_e.length-1].length,_s=Si+lt;for(Ct=Si;Ct<_s;Ct++,Vt++){var gs={},Yl=(Nl=Q[Vt]).substring(31,34).replace(/ /g,"");gs.atom=gs.elem=Yl[0].toUpperCase()+Yl.substring(1).toLowerCase(),gs.elem==="H"&&it||(gs.serial=Ct,ms[Ct]=_e[_e.length-1].length,gs.x=parseFloat(Nl.substring(0,10)),gs.y=parseFloat(Nl.substring(10,20)),gs.z=parseFloat(Nl.substring(20,30)),gs.hetflag=!0,gs.bonds=[],gs.bondOrder=[],gs.properties={},gs.index=_e[_e.length-1].length,_e[_e.length-1].push(gs))}for(Ct=0;Ct<Ye;Ct++,Vt++){Nl=Q[Vt];var Dp=ms[parseInt(Nl.substring(0,3))-1+Si],Op=ms[parseInt(Nl.substring(3,6))-1+Si],e0=parseFloat(Nl.substring(6));Dp!==void 0&&Op!==void 0&&(_e[_e.length-1][Dp].bonds.push(Op),_e[_e.length-1][Dp].bondOrder.push(e0),_e[_e.length-1][Op].bonds.push(Dp),_e[_e.length-1][Op].bondOrder.push(e0))}if(!Ze.multimodel)break;for(Ze.onemol||_e.push([]);Q[Vt]!=="$$$$"&&Vt<Q.length;)Vt++;Q.splice(0,++Vt)}return _e})($,f):R==="V3000"?(function(Q,Ze){var _e=[[]],it=!1;for(Ze.keepH!==void 0&&(it=!Ze.keepH);Q.length>0&&!(Q.length<8)&&Q[4].startsWith("M  V30 BEGIN CTAB")&&Q[5].startsWith("M  V30 COUNTS")&&!(Q[5].length<14);){var lt=Q[5].substring(13).match(/\S+/g);if(lt.length<2)break;var Ye=parseInt(lt[0]);if(isNaN(Ye)||Ye<=0)break;var Vt=parseInt(lt[1]),Ct=7;if(Q.length<8+Ye+Vt)break;var Nl,ms=[],Si=_e[_e.length-1].length,_s=Si+Ye;for(Nl=Si;Nl<_s;Nl++,Ct++){var gs=Q[Ct].substring(6).match(/\S+/g);if(gs.length>4){var Yl={},Dp=gs[1].replace(/ /g,"");Yl.atom=Yl.elem=Dp[0].toUpperCase()+Dp.substring(1).toLowerCase(),Yl.elem==="H"&&it||(Yl.serial=Nl,ms[Nl]=_e[_e.length-1].length,Yl.x=parseFloat(gs[2]),Yl.y=parseFloat(gs[3]),Yl.z=parseFloat(gs[4]),Yl.hetflag=!0,Yl.bonds=[],Yl.bondOrder=[],Yl.properties={},Yl.index=_e[_e.length-1].length,_e[_e.length-1].push(Yl))}}if(Q[Ct]!=="M  V30 END ATOM"||(Ct++,Vt===0||Q[Ct]!=="M  V30 BEGIN BOND"))break;for(Ct++,Nl=0;Nl<Vt;Nl++,Ct++){var Op=Q[Ct].substring(6).match(/\S+/g);if(Op.length>3){var e0=ms[parseInt(Op[2])-1+Si],Xp=ms[parseInt(Op[3])-1+Si],_0=parseFloat(Op[1]);e0!==void 0&&Xp!==void 0&&(_e[_e.length-1][e0].bonds.push(Xp),_e[_e.length-1][e0].bondOrder.push(_0),_e[_e.length-1][Xp].bonds.push(e0),_e[_e.length-1][Xp].bondOrder.push(_0))}}if(!Ze.multimodel)break;for(Ze.onemol||_e.push([]);Q[Ct]!=="$$$$"&&Ct<Q.length;)Ct++;Q.splice(0,++Ct)}return _e})($,f):[[""]]}function Hl(jp,f){var R=[[]];typeof jp=="string"&&(jp=JSON.parse(jp));for(var $=jp.m,Q=$[0].a,Ze=$[0].b,_e=$[0].s,it=f!==void 0&&f.parseStyle!==void 0?f.parseStyle:_e!==void 0,lt=R[R.length-1].length,Ye=0;Ye<Q.length;Ye++){var Vt=Q[Ye],Ct={};Ct.id=Vt.i,Ct.x=Vt.x,Ct.y=Vt.y,Ct.z=Vt.z||0,Ct.bonds=[],Ct.bondOrder=[];var Nl=Vt.l||"C";Ct.elem=Nl[0].toUpperCase()+Nl.substring(1).toLowerCase(),Ct.serial=R[R.length-1].length,it&&(Ct.style=_e[Vt.s||0]),R[R.length-1].push(Ct)}for(let ms=0;ms<Ze.length;ms++){let Si=Ze[ms],_s=Si.b+lt,gs=Si.e+lt,Yl=Si.o||1,Dp=R[R.length-1][_s],Op=R[R.length-1][gs];Dp.bonds.push(gs),Dp.bondOrder.push(Yl),Op.bonds.push(_s),Op.bondOrder.push(Yl)}return R}function pr(jp,f){(function(Ye,Vt){const Ct=Vt||3.2,Nl=Ct*Ct,ms=[];for(let Si=0,_s=Ye.length;Si<_s;Si++){Ye[Si].index=Si;const gs=Ye[Si];gs.hetflag||gs.atom!=="N"&&gs.atom!=="O"||(ms.push(gs),gs.hbondOther=null,gs.hbondDistanceSq=Number.POSITIVE_INFINITY)}ms.sort(function(Si,_s){return Si.z-_s.z});for(let Si=0,_s=ms.length;Si<_s;Si++){const gs=ms[Si];for(let Yl=Si+1;Yl<_s;Yl++){const Dp=ms[Yl],Op=Dp.z-gs.z;if(Op>Ct)break;if(Dp.atom==gs.atom)continue;const e0=Math.abs(Dp.y-gs.y);if(e0>Ct)continue;const Xp=Math.abs(Dp.x-gs.x);if(Xp>Ct)continue;const _0=Xp*Xp+e0*e0+Op*Op;_0>Nl||Dp.chain==gs.chain&&Math.abs(Dp.resi-gs.resi)<4||(_0<gs.hbondDistanceSq&&(gs.hbondOther=Dp,gs.hbondDistanceSq=_0),_0<Dp.hbondDistanceSq&&(Dp.hbondOther=gs,Dp.hbondDistanceSq=_0))}}})(jp,f);const R={};let $,Q,Ze,_e,it,lt;for($=0,Q=jp.length;$<Q;$++)if(it=jp[$],R[it.chain]===void 0&&(R[it.chain]=[]),isFinite(it.hbondDistanceSq)){const Ye=it.hbondOther;R[Ye.chain]===void 0&&(R[Ye.chain]=[]),Math.abs(Ye.resi-it.resi)===4&&(R[it.chain][it.resi]="h")}for(Ze in R)for(_e=1;_e<R[Ze].length-1;_e++){const Ye=R[Ze][_e-1],Vt=R[Ze][_e+1];lt=R[Ze][_e],Ye=="h"&&Ye==Vt&&lt!=Ye&&(R[Ze][_e]=Ye)}for($=0,Q=jp.length;$<Q;$++)it=jp[$],isFinite(it.hbondDistanceSq)&&R[it.chain][it.resi]!="h"&&it.ss!=="h"&&(R[it.chain][it.resi]="maybesheet");for(let Ye=0,Vt=jp.length;Ye<Vt;Ye++)if(it=jp[Ye],isFinite(it.hbondDistanceSq)&&R[it.chain][it.resi]=="maybesheet"){let Ct=it.hbondOther,Nl=R[Ct.chain][Ct.resi];Nl!="maybesheet"&&Nl!="s"||(R[it.chain][it.resi]="s",R[Ct.chain][Ct.resi]="s")}for(let Ye in R){for(let Vt=1;Vt<R[Ye].length-1;Vt++){const Ct=R[Ye][Vt-1],Nl=R[Ye][Vt+1];lt=R[Ye][Vt],Ct=="s"&&Ct==Nl&&lt!=Ct&&(R[Ye][Vt]=Ct)}for(let Vt=0;Vt<R[Ye].length;Vt++){const Ct=R[Ye][Vt];Ct!="h"&&Ct!="s"||R[Ye][Vt-1]!=Ct&&R[Ye][Vt+1]!=Ct&&delete R[Ye][Vt]}}for($=0,Q=jp.length;$<Q;$++)it=jp[$],lt=R[it.chain][it.resi],delete it.hbondOther,delete it.hbondDistanceSq,lt!==void 0&&lt!=="maybesheet"&&(it.ss=lt,R[it.chain][it.resi-1]!=lt&&(it.ssbegin=!0),R[it.chain][it.resi+1]!=lt&&(it.ssend=!0))}function Hp(jp,f,R,$){const Q=!R.duplicateAssemblyAtoms,Ze=f.length;let _e=Ze,it=-1,lt=null,Ye=null;(R.normalizeAssembly||R.wrapAtoms)&&$&&(lt=(0,d.conversionMatrix3)($.a,$.b,$.c,$.alpha,$.beta,$.gamma),Ye=new d.Matrix3,Ye.getInverse3(lt));let Vt=function(ms){let Si=ms.clone().applyMatrix3(Ye);const _s=[Si.x,Si.y,Si.z],gs=[0,0,0];for(let Dp=0;Dp<3;Dp++){for(;_s[Dp]<-.001;)_s[Dp]+=1,gs[Dp]+=1;for(;_s[Dp]>1.001;)_s[Dp]-=1,gs[Dp]-=1}const Yl=new d.Vector3(gs[0],gs[1],gs[2]);return Yl.applyMatrix3(lt),Yl};if(R.normalizeAssembly&&$)for(let ms=0;ms<jp.length;ms++){const Si=new d.Vector3(0,0,0);for(let gs=0;gs<Ze;gs++){const Yl=new d.Vector3(f[gs].x,f[gs].y,f[gs].z);Yl.applyMatrix4(jp[ms]),Si.add(Yl)}Si.divideScalar(Ze);const _s=Vt(Si);jp[ms].isNearlyIdentity()&&_s.lengthSq()>.001&&(it=ms),jp[ms].translate(_s)}if(Q){if(jp.length>1)for(let ms=0;ms<f.length;ms++){var Ct=[];for(let Si=0;Si<jp.length;Si++)if(!jp[Si].isNearlyIdentity()){var Nl=new d.Vector3;Nl.set(f[ms].x,f[ms].y,f[ms].z),Nl.applyMatrix4(jp[Si]),Ct.push(Nl)}f[ms].symmetries=Ct}}else{for(let ms=0;ms<Ze;ms++)f[ms].sym=-1;for(let ms=0;ms<jp.length;ms++)if(jp[ms].isNearlyIdentity()||it==ms)for(let Si=0;Si<Ze;Si++)f[Si].sym=ms;else{let Si=new d.Vector3;for(let _s=0;_s<Ze;_s++){const gs=[];for(let Dp=0;Dp<f[_s].bonds.length;Dp++)gs.push(f[_s].bonds[Dp]+_e);if(Si.set(f[_s].x,f[_s].y,f[_s].z),Si.applyMatrix4(jp[ms]),R.wrapAtoms&&$){let Dp=Vt(Si);Si.add(Dp)}const Yl={};for(const Dp in f[_s])Yl[Dp]=f[_s][Dp];Yl.x=Si.x,Yl.y=Si.y,Yl.z=Si.z,Yl.bonds=gs,Yl.sym=ms,Yl.index=f.length,f.push(Yl)}_e=f.length}if(R.wrapAtoms&&$){let ms=new d.Vector3;for(let Si=0;Si<Ze;Si++){ms.set(f[Si].x,f[Si].y,f[Si].z);let _s=Vt(ms);ms.add(_s),f[Si].x=ms.x,f[Si].y=ms.y,f[Si].z=ms.z}}if(it>=0){const ms=new d.Vector3;for(let Si=0;Si<Ze;Si++)ms.set(f[Si].x,f[Si].y,f[Si].z),ms.applyMatrix4(jp[it]),f[Si].x=ms.x,f[Si].y=ms.y,f[Si].z=ms.z}jp.length=0}}var Gl=t(408);const Ip=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"]);function qp(jp,f){const R=[],$=[];for(let it=0,lt=jp.length;it<lt;it++){const Ye=jp[it];Ye.index=it,Ye.hetflag||!Ip.has(Ye.resn)?$.push(Ye):R.push(Ye)}(0,xs.assignBonds)($,f),R.sort(function(it,lt){return it.chain!==lt.chain?it.chain<lt.chain?-1:1:it.resi-lt.resi});let Q,Ze=-1,_e=-1;for(let it=0,lt=R.length;it<lt;it++){const Ye=R[it];Ye.resi!==Ze&&(Ze=Ye.resi,Q||_e++,Q=!1),Ye.reschain=_e;for(let Vt=it+1;Vt<R.length;Vt++){const Ct=R[Vt];if(Ct.chain!==Ye.chain||Ct.resi-Ye.resi>1)break;(0,Gl.areConnected)(Ye,Ct,f)&&(Ye.bonds.indexOf(Ct.index)===-1&&(Ye.bonds.push(Ct.index),Ye.bondOrder.push(1),Ct.bonds.push(Ye.index),Ct.bondOrder.push(1)),Ye.resi!==Ct.resi&&(Q=!0))}}}const ci=function(jp,f,R,$){return new d.Vector3(f,R,$).applyMatrix3(jp)};function Ep(jp,f={}){const R=[],$=!f.doAssembly,Q=R.modelData=[],Ze=f.assignBonds===void 0||f.assignBonds;function _e(Nl,ms){const Si=[];let _s=0,gs=0;for(;gs<Nl.length;){for(;Nl.substring(gs,gs+ms.length)!==ms&&gs<Nl.length;)if(Nl[gs]==="'"){for(gs++;gs<Nl.length&&Nl[gs]!=="'";)gs++;for(;Nl.substring(gs,gs+ms.length)!==ms&&gs<Nl.length;)gs++}else if(Nl[gs]==='"'){for(gs++;gs<Nl.length&&Nl[gs]!=='"';)gs++;gs++}else gs++;Si.push(Nl.substring(_s,gs)),_s=gs+=ms.length}return Si}const it=jp.split(/\r?\n|\r/),lt=[];let Ye=!1;for(let Nl=0;Nl<it.length;Nl++){var Vt=it[Nl].split("#")[0];if(Ye?Vt[0]===";"&&(Ye=!1):Vt[0]===";"&&(Ye=!0),Ye||Vt!==""){if(!Ye&&(Vt=Vt.trim())[0]==="_"){const ms=Vt.split(/\s/)[0].indexOf(".");if(ms>-1){let Si=Vt.split("");Si[ms]="_",Vt=(Vt=Si.join("")).substring(0,ms)+"_"+Vt.substring(ms+1)}}lt.push(Vt)}}let Ct=0;for(;Ct<lt.length;){for(;!lt[Ct].startsWith("data_")||lt[Ct]==="data_global";)Ct++;Ct++;const Nl={};for(;Ct<lt.length&&!lt[Ct].startsWith("data_");)if(lt[Ct][0]===void 0)Ct++;else if(lt[Ct][0]==="_"){const gs=lt[Ct].split(/\s/)[0].toLowerCase(),Yl=Nl[gs]=Nl[gs]||[],Dp=lt[Ct].substring(lt[Ct].indexOf(gs)+gs.length);if(Dp==="")if(Ct++,lt[Ct][0]===";"){let Op=lt[Ct].substring(1);for(Ct++;lt[Ct]!==";";)Op=Op+`
`+lt[Ct],Ct++;Yl.push(Op)}else Yl.push(lt[Ct]);else Yl.push(Dp.trim());Ct++}else if(lt[Ct].substring(0,5)==="loop_"){Ct++;const gs=[];for(;lt[Ct]===""||lt[Ct][0]==="_";){if(lt[Ct]!==""){let Dp=lt[Ct].split(/\s/)[0].toLowerCase(),Op=Nl[Dp]=Nl[Dp]||[];gs.push(Op)}Ct++}let Yl=0;for(;Ct<lt.length&&lt[Ct][0]!=="_"&&!lt[Ct].startsWith("loop_")&&!lt[Ct].startsWith("data_");){let Dp=_e(lt[Ct]," ");for(let Op=0;Op<Dp.length;Op++)Dp[Op]!==""&&(gs[Yl].push(Dp[Op]),Yl=(Yl+1)%gs.length);Ct++}}else Ct++;Q.push({symmetries:[]}),R.push([]);const ms=Nl._atom_site_id!==void 0?Nl._atom_site_id.length:Nl._atom_site_label.length;let Si;if(Nl._cell_length_a!==void 0){const gs=parseFloat(Nl._cell_length_a),Yl=parseFloat(Nl._cell_length_b),Dp=parseFloat(Nl._cell_length_c),Op=parseFloat(Nl._cell_angle_alpha)||90,e0=parseFloat(Nl._cell_angle_beta)||90,Xp=parseFloat(Nl._cell_angle_gamma)||90;Si=(0,d.conversionMatrix3)(gs,Yl,Dp,Op,e0,Xp),Q[Q.length-1].cryst={a:gs,b:Yl,c:Dp,alpha:Op,beta:e0,gamma:Xp}}for(let gs=0;gs<ms;gs++){if(Nl._atom_site_group_pdb!==void 0&&Nl._atom_site_group_pdb[gs]==="TER")continue;const Yl={};if(Nl._atom_site_cartn_x!==void 0)Yl.x=parseFloat(Nl._atom_site_cartn_x[gs]),Yl.y=parseFloat(Nl._atom_site_cartn_y[gs]),Yl.z=parseFloat(Nl._atom_site_cartn_z[gs]);else{const Op=ci(Si,parseFloat(Nl._atom_site_fract_x[gs]),parseFloat(Nl._atom_site_fract_y[gs]),parseFloat(Nl._atom_site_fract_z[gs]));Yl.x=Op.x,Yl.y=Op.y,Yl.z=Op.z}Yl.chain=Nl._atom_site_auth_asym_id?Nl._atom_site_auth_asym_id[gs]:Nl._atom_site_label_asym_id?Nl._atom_site_label_asym_id[gs]:void 0,Yl.lchain=Nl._atom_site_label_asym_id?Nl._atom_site_label_asym_id[gs]:void 0,Yl.resi=Nl._atom_site_auth_seq_id?parseInt(Nl._atom_site_auth_seq_id[gs]):Nl._atom_site_label_seq_id?Nl._atom_site_label_seq_id[gs]:void 0,Yl.resn=Nl._atom_site_auth_comp_id?Nl._atom_site_auth_comp_id[gs].trim():Nl._atom_site_label_comp_id?Nl._atom_site_label_comp_id[gs].trim():void 0,Yl.atom=Nl._atom_site_auth_atom_id?Nl._atom_site_auth_atom_id[gs].replace(/"/gm,""):Nl._atom_site_label_atom_id?Nl._atom_site_label_atom_id[gs].replace(/"/gm,""):void 0,Yl.hetflag=!Nl._atom_site_group_pdb||Nl._atom_site_group_pdb[gs]==="HETA"||Nl._atom_site_group_pdb[gs]==="HETATM",Nl._atom_site_b_iso_or_equiv&&(Yl.b=parseFloat(Nl._atom_site_b_iso_or_equiv[gs]));let Dp="X";Nl._atom_site_type_symbol?Dp=Nl._atom_site_type_symbol[gs].replace(/\(?\+?\d+.*/,""):Nl._atom_site_label&&(Dp=Nl._atom_site_label[gs].split("_")[0].replace(/\(?\d+.*/,"")),Yl.elem=Dp[0].toUpperCase()+Dp.substring(1,2).toLowerCase(),Yl.bonds=[],Yl.ss="c",Yl.serial=gs,Yl.bondOrder=[],Yl.properties={},R[R.length-1].push(Yl)}if(Nl._pdbx_struct_oper_list_id!==void 0&&!$)for(let gs=0;gs<Nl._pdbx_struct_oper_list_id.length;gs++){const Yl=parseFloat(Nl["_pdbx_struct_oper_list_matrix[1][1]"][gs]),Dp=parseFloat(Nl["_pdbx_struct_oper_list_matrix[1][2]"][gs]),Op=parseFloat(Nl["_pdbx_struct_oper_list_matrix[1][3]"][gs]),e0=parseFloat(Nl["_pdbx_struct_oper_list_vector[1]"][gs]),Xp=parseFloat(Nl["_pdbx_struct_oper_list_matrix[2][1]"][gs]),_0=parseFloat(Nl["_pdbx_struct_oper_list_matrix[2][2]"][gs]),D0=parseFloat(Nl["_pdbx_struct_oper_list_matrix[2][3]"][gs]),O0=parseFloat(Nl["_pdbx_struct_oper_list_vector[2]"][gs]),U0=parseFloat(Nl["_pdbx_struct_oper_list_matrix[3][1]"][gs]),E0=parseFloat(Nl["_pdbx_struct_oper_list_matrix[3][2]"][gs]),ym=parseFloat(Nl["_pdbx_struct_oper_list_matrix[3][3]"][gs]),mm=parseFloat(Nl["_pdbx_struct_oper_list_vector[3]"][gs]),Vm=new d.Matrix4(Yl,Dp,Op,e0,Xp,_0,D0,O0,U0,E0,ym,mm);Q[Q.length-1].symmetries.push(Vm)}const _s=function(gs){const Yl=gs.match("-"),Dp=(gs=gs.replace(/[-xyz]/g,"")).split("/");let Op,e0;return e0=Dp[1]===void 0?1:parseInt(Dp[1]),Op=Dp[0]===""?1:parseInt(Dp[0]),Op/e0*(Yl?-1:1)};if(Nl._symmetry_equiv_pos_as_xyz!==void 0&&!$)for(let gs=0;gs<Nl._symmetry_equiv_pos_as_xyz.length;gs++){const Yl=Nl._symmetry_equiv_pos_as_xyz[gs].replace(/["' ]/g,"").split(",").map(function(Xp){return Xp.replace(/-/g,"+-")});let Dp=new d.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let Xp=0;Xp<3;Xp++){const _0=Yl[Xp].split("+");for(let D0=0;D0<_0.length;D0++){const O0=_0[D0];if(O0==="")continue;const U0=_s(O0);O0.match("x")?Dp.elements[Xp+0]=U0:O0.match("y")?Dp.elements[Xp+4]=U0:O0.match("z")?Dp.elements[Xp+8]=U0:Dp.elements[Xp+12]=U0}}const Op=Si.getMatrix4(),e0=new d.Matrix4().getInverse(Op,!0);Dp=new d.Matrix4().multiplyMatrices(Dp,e0),Dp=new d.Matrix4().multiplyMatrices(Op,Dp),Q[Q.length-1].symmetries.push(Dp)}}for(let Nl=0;Nl<R.length;Nl++)!Ze||f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms||qp(R[Nl],f),pr(R[Nl],f.hbondCutoff),Hp(Q[Nl].symmetries,R[Nl],f,Q[Nl].cryst),f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms&&Ze&&qp(R[Nl],f);return R}let o0={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function w0(jp,f){var R=[[]],$=!1;f.keepH!==void 0&&($=!f.keepH);var Q=jp.search(/@<TRIPOS>MOLECULE/),Ze=jp.search(/@<TRIPOS>ATOM/);if(Q==-1||Ze==-1)return R;for(var _e=jp.substring(Q).split(/\r?\n|\r/);_e.length>0;){var it=[],lt=_e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Ye=parseInt(lt[0]),Vt=0;lt.length>1&&(Vt=parseInt(lt[1]));var Ct,Nl=4;for(Ct=3;Ct<_e.length;Ct++)if(_e[Ct]=="@<TRIPOS>ATOM"){Nl=Ct+1;break}var ms=R[R.length-1].length,Si=ms+Ye;for(Ct=ms;Ct<Si;Ct++){var _s={},gs=(lt=_e[Nl++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5];if(gs=o0[gs]!==void 0?o0[gs]:(gs=gs.split(".")[0])[0].toUpperCase()+gs.substring(1).toLowerCase(),_s.atom=lt[1],_s.elem=gs,!(_s.elem=="H"&&$)){var Yl=R[R.length-1].length,Dp=parseInt(lt[0]);_s.serial=Dp,_s.x=parseFloat(lt[2]),_s.y=parseFloat(lt[3]),_s.z=parseFloat(lt[4]),_s.atom=lt[5];var Op=parseFloat(lt[8]);_s.index=Yl,_s.bonds=[],_s.bondOrder=[],_s.properties={charge:Op,partialCharge:Op},it[Dp]=Yl,R[R.length-1].push(_s)}}for(var e0=!1;Nl<_e.length;)if(_e[Nl++]=="@<TRIPOS>BOND"){e0=!0;break}if(e0&&Vt)for(Ct=0;Ct<Vt;Ct++){lt=_e[Nl++].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var Xp=parseInt(lt[1]),_0=R[R.length-1][it[Xp]],D0=parseInt(lt[2]),O0=R[R.length-1][it[D0]],U0=parseInt(lt[3]);isNaN(U0)&&(U0=1),_0!==void 0&&O0!==void 0&&(_0.bonds.push(it[D0]),_0.bondOrder.push(U0),O0.bonds.push(it[Xp]),O0.bondOrder.push(U0))}if(!f.multimodel)break;f.onemol||R.push([]),_e.splice(0,Nl),jp=_e.join(`
`)}return R}var a0=t(40);function P0(jp,f){let R=jp.replace(/ /g,"");return R.length>0&&R[0]==="H"&&R!=="Hg"&&R!=="He"&&R!=="Hf"&&R!=="Hs"&&R!=="Ho"&&(R="H"),R.length>1&&(R=R[0].toUpperCase()+R.substring(1).toLowerCase(),a0.bondTable[R]===void 0?R=R[0]:f&&(R==="Ca"||R==="Cd")&&(R="C")),R}function am(jp){for(const f in jp)return!1;return!0}function sm(jp,f,R){const $=[],Q=f.assignBonds===void 0||f.assignBonds,Ze=!f.keepH,_e=!!f.noSecondaryStructure,it=!f.noComputeSecondaryStructure,lt=!f.doAssembly,Ye=f.altLoc?f.altLoc:"A",Vt={symmetries:[],cryst:void 0};let Ct,Nl=[];const ms=[];let Si;const _s={};for(let gs=0;gs<jp.length;gs++){Si=jp[gs].replace(/^\s*/,"");const Yl=Si.substring(0,6);let Dp,Op,e0;if(Yl.indexOf("END")===0){if(Nl=jp.slice(gs+1),Yl==="END")for(const Xp in R)R.hasOwnProperty(Xp)&&delete R[Xp];break}if(Yl==="ATOM  "||Yl==="HETATM"){let Xp,_0,D0,O0,U0,E0,ym,mm,Vm,Pm,a1,h1;if(a1=Si.substring(16,17),a1!==" "&&a1!==Ye&&Ye!=="*"||(Pm=parseInt(Si.substring(6,11)),Ct=Si.substring(12,16).replace(/ /g,""),Xp=Si.substring(17,20).replace(/ /g,""),_0=Si.substring(21,22),D0=parseInt(Si.substring(22,26)),O0=Si.substring(26,27),U0=parseFloat(Si.substring(30,38)),E0=parseFloat(Si.substring(38,46)),ym=parseFloat(Si.substring(46,54)),h1=parseFloat(Si.substring(60,68)),Vm=Si.substring(76,78).replace(/ /g,""),Vm=Vm===""||a0.bondTable[Vm]===void 0?P0(Si.substring(12,14),Si[0]=="A"):Vm[0].toUpperCase()+Vm.substring(1).toLowerCase(),Vm==="H"&&Ze))continue;mm=Yl[0]=="H",ms[Pm]=$.length,$.push({resn:Xp,x:U0,y:E0,z:ym,elem:Vm,hetflag:mm,altLoc:a1,chain:_0,resi:D0,icode:O0,rescode:D0+(O0!==" "?"^"+O0:""),serial:Pm,atom:Ct,bonds:[],ss:"c",bondOrder:[],properties:{},b:h1,pdbline:Si})}else if(Yl==="SHEET "){Dp=Si.substring(21,22),Op=parseInt(Si.substring(22,26)),e0=parseInt(Si.substring(33,37)),Dp in R||(R[Dp]={}),R[Dp][Op]="s1";for(let Xp=Op+1;Xp<e0;Xp++)R[Dp][Xp]="s";R[Dp][e0]="s2"}else if(Yl==="CONECT"){const Xp=ms[parseInt(Si.substring(6,11))],_0=$[Xp],D0=[11,16,21,26];for(let O0=0;O0<4;O0++){const U0=ms[parseInt(Si.substring(D0[O0],D0[O0]+5))];let E0=Xp+":"+U0;const ym=$[U0];if(_0!==void 0&&ym!==void 0)if(_s[E0]){_s[E0]+=1;for(let mm=0;mm<_0.bonds.length;mm++)if(_0.bonds[mm]==U0){const Vm=_s[E0];_0.bondOrder[mm]=Vm>=4?1:Vm}}else _s[E0]=1,_0.bonds.length!=0&&_0.bonds[_0.bonds.length-1]===U0||(_0.bonds.push(U0),_0.bondOrder.push(1))}}else if(Yl==="HELIX "){Dp=Si.substring(19,20),Op=parseInt(Si.substring(21,25)),e0=parseInt(Si.substring(33,37)),Dp in R||(R[Dp]={}),R[Dp][Op]="h1";for(let Xp=Op+1;Xp<e0;Xp++)R[Dp][Xp]="h";R[Dp][e0]="h2"}else if(lt||Yl!=="REMARK"||Si.substring(13,18)!=="BIOMT"){if(Yl==="CRYST1"){let Xp,_0,D0,O0,U0,E0;Xp=parseFloat(Si.substring(7,15)),_0=parseFloat(Si.substring(16,24)),D0=parseFloat(Si.substring(25,33)),O0=parseFloat(Si.substring(34,40)),U0=parseFloat(Si.substring(41,47)),E0=parseFloat(Si.substring(48,54)),Vt.cryst={a:Xp,b:_0,c:D0,alpha:O0,beta:U0,gamma:E0}}else if(Yl==="ANISOU"){const Xp=$[ms[parseInt(Si.substring(6,11))]];if(Xp){const _0=Si.substring(30).trim().split(/\s+/),D0={u11:parseInt(_0[0]),u22:parseInt(_0[1]),u33:parseInt(_0[2]),u12:parseInt(_0[3]),u13:parseInt(_0[4]),u23:parseInt(_0[5])};Xp.uMat=D0}}}else{let Xp,_0=new d.Matrix4;for(Xp=1;Xp<=3;Xp++)if(Si=jp[gs].replace(/^\s*/,""),parseInt(Si.substring(18,19))==Xp)_0.elements[Xp-1]=parseFloat(Si.substring(23,33)),_0.elements[Xp-1+4]=parseFloat(Si.substring(33,43)),_0.elements[Xp-1+8]=parseFloat(Si.substring(43,53)),_0.elements[Xp-1+12]=parseFloat(Si.substring(53)),gs++;else for(;Si.substring(13,18)==="BIOMT";)gs++,Si=jp[gs].replace(/^\s*/,"");_0.elements[3]=0,_0.elements[7]=0,_0.elements[11]=0,_0.elements[15]=1,Vt.symmetries.push(_0),gs--}}if((function(gs,Yl){for(let Dp=0,Op=gs.length;Dp<Op;Dp++){const e0=gs[Dp];for(let Xp=0;Xp<e0.bonds.length;Xp++){const _0=gs[e0.bonds[Xp]],D0=Yl[e0.serial];_0&&D0&&_0.bonds.indexOf(D0)<0&&(_0.bonds.push(D0),_0.bondOrder.push(e0.bondOrder[Xp]))}}})($,ms),Q&&qp($,f),lt||Hp(Vt.symmetries,$,f,Vt.cryst),it&&!_e&&pr($,f.hbondCutoff),!am(R))for(let gs=0;gs<$.length;gs++){const Yl=$[gs];if(Yl!==void 0&&Yl.chain in R&&Yl.resi in R[Yl.chain]){const Dp=R[Yl.chain][Yl.resi];Yl.ss=Dp[0],Dp.length>1&&(Dp[1]=="1"?Yl.ssbegin=!0:Dp[1]=="2"&&(Yl.ssend=!0))}}return[$,Vt,Nl]}function C0(jp,f){f=f||{};var R=[],$={};R.modelData=[];for(var Q=jp.split(/\r?\n|\r/);Q.length>0;){var Ze=sm(Q,f,$),_e=Ze[0],it=Ze[1];if(Q=Ze[2],_e.length!=0){if(f.multimodel&&f.onemol&&R.length>0)for(var lt=R[0].length,Ye=0;Ye<_e.length;Ye++){var Vt=_e[Ye];Vt.index=Ye;for(var Ct=0;Ct<Vt.bonds.length;Ct++)Vt.bonds[Ct]+=lt;R[0].push(Vt)}else R.modelData.push(it),R.push(_e);if(!f.multimodel)break}}return R}function Fm(jp,f){var R=[[]],$=!f.noSecondaryStructure;R.modelData=[{symmetries:[]}];var Q,Ze=[],_e=jp.split(/\r?\n|\r/);for(let e0=0;e0<_e.length;e0++){var it=(Q=_e[e0].replace(/^\s*/,"")).substring(0,6);if(it.indexOf("END")==0){if(f.multimodel){f.onemol||R.push([]);continue}break}if(it=="ATOM  "||it=="HETATM"){var lt;let Xp=parseInt(Q.substring(6,11)),_0=Q.substring(12,16).replace(/ /g,""),D0=Q.substring(17,20).trim(),O0=Q.substring(21,22),U0=parseInt(Q.substring(22,26));var Ye=Q.substring(30).trim().split(/\s+/),Vt=parseFloat(Ye[0]),Ct=parseFloat(Ye[1]),Nl=parseFloat(Ye[2]),ms=parseFloat(Ye[3]),Si=parseFloat(Ye[4]),_s=_0[0];_0.length>1&&_0[1].toUpperCase()!=_0[1]&&(_s=_0.substring(0,2)),lt=Q[0]=="H",Ze[Xp]=R[R.length-1].length,R[R.length-1].push({resn:D0,x:Vt,y:Ct,z:Nl,elem:_s,hetflag:lt,chain:O0,resi:U0,serial:Xp,atom:_0,bonds:[],ss:"c",bondOrder:[],properties:{charge:ms,partialCharge:ms,radius:Si},pdbline:Q})}else if(it=="CONECT"){var gs=parseInt(Q.substring(6,11)),Yl=R[R.length-1][Ze[gs]];for(let Xp=0;Xp<4;Xp++){var Dp=parseInt(Q.substring([11,16,21,26][Xp],[11,16,21,26][Xp]+5)),Op=R[R.length-1][Ze[Dp]];Yl!==void 0&&Op!==void 0&&(Yl.bonds.push(Ze[Dp]),Yl.bondOrder.push(1))}}}for(let e0=0;e0<R.length;e0++)qp(R[e0],f),$&&pr(R[e0],f.hbondCutoff);return R}var Zm=t(471),p1=function(jp){return String.fromCharCode.apply(null,jp).replace(/\0/g,"")},A1=function(jp){return jp==0||jp==2||jp==4?"h":jp==3?"s":"c"};let T1=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function Tm(jp,f){var R=!f.keepH,$=f.altLoc?f.altLoc:"A",Q=!!f.noSecondaryStructure,Ze=!f.noComputeSecondaryStructure,_e=!f.doAssembly,it=f.assemblyIndex?f.assemblyIndex:0;jp=typeof jp=="string"?(0,C.base64ToArray)(jp):new Uint8Array(jp);var lt,Ye,Vt,Ct,Nl,ms,Si=Zm.decode(jp),_s=[[]],gs=_s.modelData=[],Yl=0,Dp=0,Op=0,e0=Si.secStructList,Xp=Si.bFactorList,_0=Si.altLocList,D0=Si.occupancyList,O0=Si.bondAtomList,U0=Si.bondOrderList,E0=Si.numModels;if(E0==0)return _s;f.multimodel||(E0=1);var ym=[];if(!_e&&Si.bioAssemblyList&&Si.bioAssemblyList.length>0){var mm=Si.bioAssemblyList[it].transformList;for(lt=0,ms=mm.length;lt<ms;lt++){var Vm=new d.Matrix4(mm[lt].matrix);Vm.transpose(),ym.push(Vm)}}var Pm=null;if(Si.unitCell){var a1=Si.unitCell;Pm={a:a1[0],b:a1[1],c:a1[2],alpha:a1[3],beta:a1[4],gamma:a1[5]}}let h1=[];Si.entityList.forEach(ql=>{ql.chainIndexList.forEach(De=>{h1[De]=ql.type=="polymer"})});var Hm=0;for(Nl=0;Nl<E0;Nl++){var w1=Si.chainsPerModel[Nl],_m=_s[_s.length-1],Om=[];for(gs.push({symmetries:ym,cryst:Pm}),lt=0;lt<w1;++lt){var D1=Si.groupsPerChain[Yl],$m=p1(Si.chainIdList.subarray(4*Yl,4*Yl+4));Si.chainNameList&&($m=p1(Si.chainNameList.subarray(4*Yl,4*Yl+4)));var R1=Dp,k1="";for(Ye=0;Ye<D1;++Ye){var Jm=Si.groupList[Si.groupTypeList[Dp]],I1=Jm.atomNameList.length,ug=0,O1=!1,s1=!1;if(e0){ug=e0[Dp];var yg=A1(ug);Dp!=0&&yg==k1||(O1=!0),k1=yg;var Z1=Dp+1;(Z1>=e0.length||A1(e0[Z1]!=yg))&&(s1=!0)}var pg=Si.groupIdList[Dp],J1=Jm.groupName;let ql=Jm.chemCompType;var wg=Op;let De=T1.has(ql)||!h1[Yl];for(Vt=0;Vt<I1;++Vt){var tv=Jm.elementList[Vt];if(R&&tv=="H")Op+=1;else{var Sv="";Xp&&(Sv=Xp[Op]);var bv="";_0&&_0[Op]&&(bv=String.fromCharCode(_0[Op]));var Jv="";if(D0&&(Jv=D0[Op]),bv==""||bv==$||$=="*"){var Uv=Si.atomIdList[Op],lv=Jm.atomNameList[Vt],Kv=0;Jm.atomChargeList&&(Kv=Jm.atomChargeList[Vt]);var Nv=Si.xCoordList[Op],Fv=Si.yCoordList[Op],Qv=Si.zCoordList[Op];Om[Op]=_m.length,_m.push({resn:J1,x:Nv,y:Fv,z:Qv,elem:tv,hetflag:De,chain:$m,resi:pg,icode:bv,rescode:pg+(bv!=" "?"^"+bv:""),serial:Uv,altLoc:bv,index:Op,atom:lv,bonds:[],ss:A1(ug),ssbegin:O1,ssend:s1,bondOrder:[],properties:{charge:Kv,occupancy:Jv},b:Sv}),Op+=1}else Op+=1}}var hy=Jm.bondAtomList;for(Vt=0,Ct=Jm.bondOrderList.length;Vt<Ct;++Vt){var ey=wg+hy[2*Vt],yy=wg+hy[2*Vt+1],dv=Jm.bondOrderList[Vt],Ev=Om[ey],Rv=Om[yy],zv=_m[Ev],de=_m[Rv];zv&&de&&(zv.bonds.push(Rv),zv.bondOrder.push(dv),de.bonds.push(Ev),de.bondOrder.push(dv))}Dp+=1}for(Dp=R1,Ye=0;Ye<D1;++Ye)Dp+=1;Yl+=1}if(O0)for(let ql=Hm,De=O0.length;ql<De;ql+=2){let A0=O0[ql],b0=O0[ql+1],v0=U0?U0[ql/2]:1;if(A0>=Op){Hm=ql;break}let Cm=Om[A0],$0=Om[b0],M1=_m[Cm],Z0=_m[$0];M1&&Z0&&(M1.bonds.push($0),M1.bondOrder.push(v0),Z0.bonds.push(Cm),Z0.bondOrder.push(v0))}f.multimodel&&(f.onemol||_s.push([]))}if(!_e)for(let ql=0;ql<_s.length;ql++)Hp(gs[ql].symmetries,_s[ql],f,gs[ql].cryst);return Ze&&!Q&&pr(_s,f.hbondCutoff),_s}function x1(jp){var f,R=[],$=0,Q=jp.split(/\r?\n|\r/);if(!(Q.length>0&&Q[0].includes("VERSION")))return[];{var Ze=Q.filter(function(Si){return Si.includes("POINTERS")||Si.includes("ATOM_NAME")||Si.includes("CHARGE")||Si.includes("RADII")||Si.includes("BONDS_INC_HYDROGEN")||Si.includes("BONDS_WITHOUT_HYDROGEN")||Si.includes("RESIDUE_LABEL")||Si.includes("RESIDUE_POINTER")}),_e=Ct("POINTERS");if(_e==-1)return[];var it=Nl(_e),lt=parseInt(Q[_e+1].slice(0,it[1]));let ms=parseInt(Q[_e+2].slice(it[1],it[0]+it[1]));if(isNaN(lt)||lt<=0)return[];if((_e=Ct("ATOM_NAME"))==-1)return[];var Ye=(it=Nl(_e))[0];for(let Si=0;Si<lt/it[0];Si++){Si==parseInt(lt/it[0])&&(Ye=lt%it[0]);for(let _s=0;_s<Ye;_s++){let gs={},Yl={charge:"",radii:""};gs.serial=$,gs.x=0,gs.y=0,gs.z=0,gs.atom=Q[_e+1].slice(it[1]*_s,it[1]*(_s+1)).trim(),gs.elem=Q[_e+1].slice(it[1]*_s,it[1]*_s+1).trim(),gs.properties=Yl,gs.bonds=[],gs.bondOrder=[],gs.index=R.length,R.push(gs),$++}_e++}if((_e=Ct("CHARGE"))!=-1){$=0,Ye=(it=Nl(_e))[0];for(let Si=0;Si<lt/it[0];Si++){Si==parseInt(lt/it[0])&&(Ye=lt%it[0]);for(let _s=0;_s<Ye;_s++)R[$].properties.charge=parseFloat(Q[_e+1].slice(it[1]*_s,it[1]*(_s+1))),$++;_e++}}var Vt=[];if((_e=Ct("RESIDUE_POINTER"))!=-1){Ye=(it=Nl(_e))[0],_e+=1;for(let Si=0;Si<ms/it[0];Si++){Si==parseInt(ms/it[0])&&(Ye=ms%it[0]);for(let _s=0;_s<Ye;_s++)Vt.push(parseInt(Q[_e].slice(it[1]*_s,it[1]*(_s+1))));_e++}if((_e=Ct("RESIDUE_LABEL"))!=-1){let Si=[];Ye=(it=Nl(_e))[0],_e+=1;for(let Dp=0;Dp<ms/it[0];Dp++){Dp==parseInt(ms/it[0])&&(Ye=ms%it[0]);for(let Op=0;Op<Ye;Op++)Si.push(Q[_e].slice(it[1]*Op,it[1]*(Op+1)).trim());_e++}let _s=0,gs=0,Yl="";Vt.push(R.length+1);for(let Dp=0;Dp<R.length;Dp++)Dp+1>=Vt[_s]&&(Yl=Si[_s],_s+=1,gs+=1),R[Dp].resi=gs,R[Dp].resn=Yl}}if((_e=Ct("RADII"))!=-1){$=0,Ye=(it=Nl(_e))[0];for(let Si=0;Si<lt/it[0];Si++){Si==parseInt(lt/it[0])&&(Ye=lt%it[0]);for(let _s=0;_s<Ye;_s++)R[$].properties.radii=parseFloat(Q[_e+1].slice(it[1]*_s,it[1]*(_s+1))),$++;_e++}}if((_e=Ct("BONDS_WITHOUT_HYDROGEN"))!=-1)for($=0,Ye=(it=Nl(_e))[0],_e+=1;!Q[_e].match(/^%FLAG/);){Q[_e+1].match(/^%FLAG/)&&(Ye=lt%it[0]);for(let Si=0;Si<Ye;Si++)$%3==0?f=parseInt(Q[_e].slice(it[1]*Si,it[1]*(Si+1))/3):$%3==1&&(R[f].bonds.push(parseInt(Q[_e].slice(it[1]*Si,it[1]*(Si+1))/3)),R[f].bondOrder.push(1)),$++;_e++}if((_e=Ct("BONDS_INC_HYDROGEN"))!=-1)for($=0,Ye=(it=Nl(_e))[0],_e+=1;!Q[_e].match(/^%FLAG/);){Q[_e+1].match(/^%FLAG/)&&(Ye=lt%it[0]);for(let Si=0;Si<Ye;Si++)$%3==0?f=parseInt(Q[_e].slice(it[1]*Si,it[1]*(Si+1))/3):$%3==1&&(R[f].bonds.push(parseInt(Q[_e].slice(it[1]*Si,it[1]*(Si+1))/3)),R[f].bonds.push(1)),$++;_e++}}function Ct(ms){var Si=Q.indexOf(Ze.filter(function(_s){return _s.includes(ms)})[0]);if(Number.isInteger(Si)&&Si>0){for(;!Q[Si].includes("FORMAT");)Si++;return Si}return-1}function Nl(ms){var Si=Q[ms].match(/\((\d*)\S*/),_s=Q[ms].match(/[a-zA-Z](\d*)\)\s*/);return _s==null&&(_s=Q[ms].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(Si[1]),parseInt(_s[1])]}return[R]}function S1(jp,f){const R=[],$=jp.split(/\r?\n|\r/);for(;$.length>0;){const Q=parseInt($[1]);if($.length<3||isNaN(Q)||Q<=0||$.length<Q+3)break;const Ze=[];R.push(Ze);let _e=2;const it=Ze.length,lt=it+Q;for(let Ye=it;Ye<lt;Ye++){const Vt=$[_e++],Ct={};Ct.serial=Ye,Ct.atom=Vt.slice(10,15).trim(),Ct.elem=P0(Ct.atom,!0),Ct.x=10*parseFloat(Vt.slice(20,28)),Ct.y=10*parseFloat(Vt.slice(28,36)),Ct.z=10*parseFloat(Vt.slice(36,44)),Ct.resi=parseInt(Vt.slice(0,5)),Ct.resn=Vt.slice(5,10).trim(),Ct.bonds=[],Ct.bondOrder=[],Ct.properties={},Vt.length>44&&(Ct.dx=10*parseFloat(Vt.slice(44,52)),Ct.dy=10*parseFloat(Vt.slice(52,60)),Ct.dz=10*parseFloat(Vt.slice(60,68))),Ze[Ye]=Ct}if($.length<=_e+3){const Ye=$[_e++].trim().split(/\s+/);if(Ye.length===3){for(let Vt=0;Vt<3;Vt++)Ye[Vt]=(10*parseFloat(Ye[Vt])).toString();R.box=Ye}}$.splice(0,++_e)}for(let Q=0;Q<R.length;Q++)qp(R[Q],f);return R}const p0={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function zp(jp,f){const R=[],$=jp.split(/\r?\n|\r/);let Q=0,Ze=0,_e=0;for(;_e<$.length-9;){for(var it=_e;it<$.length;it++)if($[it].match(/ITEM: NUMBER OF ATOMS/)&&(Ze=parseInt($[it+1])),$[it].match(/ITEM: ATOMS/)){Q=it+1;break}const lt=$[Q-1].replace("ITEM: ATOMS ","").split(" ");R.push([]);for(let Ye=Q;Ye<Q+Ze;Ye++){const Vt={},Ct={},Nl=$[Ye].split(" ");for(let ms=0;ms<Nl.length;ms++){const Si=p0[lt[ms]];Si!==void 0&&(Si==="serial"?Vt[Si]=parseInt(Nl[ms]):Si==="x"||Si==="y"||Si==="z"?Vt[Si]=parseFloat(Nl[ms]):Si==="charge"||Si==="radius"?Ct[Si]=parseFloat(Nl[ms]):Vt[Si]=Nl[ms]),Vt.properties=Ct,Vt.bonds=[],Vt.bondOrder=[]}R[R.length-1][Ye-Q]=Vt}_e=Q+Ze-1}if(f.assignBonds)for(let lt=0;lt<R.length;lt++)(0,xs.assignBonds)(R[lt],f);return R}var om;(function(jp){(function(f){f[f.Int8=1]="Int8",f[f.Int16=2]="Int16",f[f.Int32=3]="Int32",f[f.Uint8=4]="Uint8",f[f.Uint16=5]="Uint16",f[f.Uint32=6]="Uint32"})(jp.IntDataType||(jp.IntDataType={})),(function(f){f[f.Float32=32]="Float32",f[f.Float64=33]="Float64"})(jp.FloatDataType||(jp.FloatDataType={})),jp.getDataType=function(f){let R;return R=f instanceof Int8Array?jp.IntDataType.Int8:f instanceof Int16Array?jp.IntDataType.Int16:f instanceof Int32Array?jp.IntDataType.Int32:f instanceof Uint8Array?jp.IntDataType.Uint8:f instanceof Uint16Array?jp.IntDataType.Uint16:f instanceof Uint32Array?jp.IntDataType.Uint32:f instanceof Float32Array?jp.FloatDataType.Float32:f instanceof Float64Array?jp.FloatDataType.Float64:jp.IntDataType.Int32,R},jp.isSignedIntegerDataType=function(f){if(f instanceof Int8Array||f instanceof Int16Array||f instanceof Int32Array)return!0;for(let R=0,$=f.length;R<$;R++)if(R<0)return!1;return!0}})(om||(om={}));const bm=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function i1(jp){let f=jp.data;for(let R=jp.encoding.length-1;R>=0;R--)f=r1(f,jp.encoding[R]);return f}function r1(jp,f){switch(f.kind){case"ByteArray":switch(f.type){case om.IntDataType.Uint8:return jp;case om.IntDataType.Int8:return(function(R){return new Int8Array(R.buffer,R.byteOffset)})(jp);case om.IntDataType.Int16:return(function(R){return l0(R,2,Int16Array)})(jp);case om.IntDataType.Uint16:return(function(R){return l0(R,2,Uint16Array)})(jp);case om.IntDataType.Int32:return(function(R){return l0(R,4,Int32Array)})(jp);case om.IntDataType.Uint32:return(function(R){return l0(R,4,Uint32Array)})(jp);case om.FloatDataType.Float32:return(function(R){return l0(R,4,Float32Array)})(jp);case om.FloatDataType.Float64:return(function(R){return l0(R,8,Float64Array)})(jp);default:throw new Error("unreachable")}case"FixedPoint":return(function(R,$){const Q=R.length,Ze=i0($.srcType,Q),_e=1/$.factor;for(let it=0;it<Q;it++)Ze[it]=_e*R[it];return Ze})(jp,f);case"IntervalQuantization":return(function(R,$){const Q=R.length,Ze=i0($.srcType,Q),_e=($.max-$.min)/($.numSteps-1),it=$.min;for(let lt=0;lt<Q;lt++)Ze[lt]=it+_e*R[lt];return Ze})(jp,f);case"RunLength":return(function(R,$){const Q=Gp($.srcType,$.srcSize);let Ze=0;for(let _e=0,it=R.length;_e<it;_e+=2){const lt=R[_e],Ye=R[_e+1];for(let Vt=0;Vt<Ye;++Vt)Q[Ze++]=lt}return Q})(jp,f);case"Delta":return(function(R,$){const Q=R.length,Ze=Gp($.srcType,Q);if(!Q)return R;Ze[0]=R[0]+(0|$.origin);for(let _e=1;_e<Q;++_e)Ze[_e]=R[_e]+Ze[_e-1];return Ze})(jp,f);case"IntegerPacking":return(function(R,$){return R.length===$.srcSize?R:$.isUnsigned?(function(Q,Ze){const _e=Ze.byteCount===1?255:65535,it=Q.length,lt=new Int32Array(Ze.srcSize);let Ye=0,Vt=0;for(;Ye<it;){let Ct=0,Nl=Q[Ye];for(;Nl===_e;)Ct+=Nl,Ye++,Nl=Q[Ye];Ct+=Nl,lt[Vt]=Ct,Ye++,Vt++}return lt})(R,$):(function(Q,Ze){const _e=Ze.byteCount===1?127:32767,it=-_e-1,lt=Q.length,Ye=new Int32Array(Ze.srcSize);let Vt=0,Ct=0;for(;Vt<lt;){let Nl=0,ms=Q[Vt];for(;ms===_e||ms===it;)Nl+=ms,Vt++,ms=Q[Vt];Nl+=ms,Ye[Ct]=Nl,Vt++,Ct++}return Ye})(R,$)})(jp,f);case"StringArray":return(function(R,$){const Q=i1({encoding:$.offsetEncoding,data:$.offsets}),Ze=i1({encoding:$.dataEncoding,data:R}),_e=$.stringData,it=new Array(Q.length);it[0]="";for(let Vt=1,Ct=Q.length;Vt<Ct;Vt++)it[Vt]=_e.substring(Q[Vt-1],Q[Vt]);let lt=0;const Ye=new Array(Ze.length);for(let Vt=0,Ct=Ze.length;Vt<Ct;Vt++)Ye[lt++]=it[Ze[Vt]+1];return Ye})(jp,f)}}function Gp(jp,f){switch(jp){case om.IntDataType.Int8:return new Int8Array(f);case om.IntDataType.Int16:return new Int16Array(f);case om.IntDataType.Int32:return new Int32Array(f);case om.IntDataType.Uint8:return new Uint8Array(f);case om.IntDataType.Uint16:return new Uint16Array(f);case om.IntDataType.Uint32:return new Uint32Array(f);default:return new Int32Array(f)}}function i0(jp,f){switch(jp){case om.FloatDataType.Float32:return new Float32Array(f);case om.FloatDataType.Float64:default:return new Float64Array(f)}}function l0(jp,f,R){return jp.byteOffset==0&&jp.byteLength==jp.buffer.byteLength||(jp=new Uint8Array(jp)),new R(bm?jp.buffer:(function($,Q){const Ze=new ArrayBuffer($.length),_e=new Uint8Array(Ze);for(let it=0,lt=$.length;it<lt;it+=Q)for(let Ye=0;Ye<Q;Ye++)_e[it+Q-Ye-1]=$[it+Ye];return Ze})(jp,f))}function im(jp){const f=Object.create(null),R=Object.create(null);for(const $ of jp.columns)f[$.name]=$;return{rowCount:jp.rowCount,name:jp.name.substring(1),fieldNames:jp.columns.map($=>$.name),getField($){const Q=f[$];if(Q)return R[$]||(R[$]=i1(Q.data)),R[$]}}}var dm=t(471);class pm{constructor(f){if(this.C={},f){let R=f.getField("comp_id"),$=f.getField("atom_id_1"),Q=f.getField("atom_id_2"),Ze=f.getField("value_order");for(let _e=0;_e<R.length;_e++){let it=R[_e],lt=$[_e],Ye=Q[_e],Vt=Ze[_e],Ct=1;Vt=="doub"?Ct=2:Vt=="trip"&&(Ct=3),this.C[it]==null&&(this.C[it]={}),this.C[it][lt]==null&&(this.C[it][lt]={}),this.C[it][Ye]==null&&(this.C[it][Ye]={}),this.C[it][lt][Ye]=Ct,this.C[it][Ye][lt]=Ct}}}order(f,R,$){return this.C[f]!==void 0&&this.C[f][R]!==void 0&&this.C[f][R][$]!==void 0?this.C[f][R][$]:0}}class Dm{constructor(f){if(this.C=[],f){let R=f.getField("conn_type_id"),$=f.getField("ptnr1_label_asym_id"),Q=f.getField("ptnr1_label_seq_id"),Ze=f.getField("ptnr1_label_comp_id"),_e=f.getField("ptnr1_label_atom_id"),it=f.getField("ptnr2_label_asym_id"),lt=f.getField("ptnr2_label_seq_id"),Ye=f.getField("ptnr2_label_comp_id"),Vt=f.getField("ptnr2_label_atom_id"),Ct=f.getField("pdbx_value_order");for(let Nl=0;Nl<R.length;Nl++)if(R[Nl]=="disulf"||R[Nl]=="covale"){let ms=Ct?Ct[Nl]==""?1:parseInt(Ct[Nl]):1;this.C.push([[$[Nl],Q[Nl],Ze[Nl],_e[Nl]],[it[Nl],lt[Nl],Ye[Nl],Vt[Nl]],ms])}}}}class Gm{constructor(){this.R={}}add(f){this.R[f.lchain]==null&&(this.R[f.lchain]={}),this.R[f.lchain][f.lresi]==null&&(this.R[f.lchain][f.lresi]={}),this.R[f.lchain][f.lresi][f.lresn]==null&&(this.R[f.lchain][f.lresi][f.lresn]=[]),this.R[f.lchain][f.lresi][f.lresn].push(f),this.R[f.lchain][f.lresi][f.lresn][f.atom]=f}geta([f,R,$,Q]){if(this.R[f]!==void 0&&this.R[f][R]!==void 0&&this.R[f][R][$]!==void 0)return this.R[f][R][$][Q]}setBonds(f,R){for(let $ in this.R)for(let Q in this.R[$])for(let Ze in this.R[$][Q]){let _e=this.R[$][Q][Ze];for(let it=0;it<_e.length;it++)for(let lt=it+1;lt<_e.length;lt++){let Ye=_e[it],Vt=_e[lt],Ct=f.order(Ze,Ye.atom,Vt.atom);Ye.altLoc!=Vt.altLoc&&Ye.altLoc!=""&&Vt.altLoc!=""&&(Ct=0),Ct>0&&(Ye.bonds.push(Vt.index),Vt.bonds.push(Ye.index),Ye.bondOrder.push(Ct),Vt.bondOrder.push(Ct))}}for(let $ of R.C){let Q=$[0],Ze=$[1],_e=$[2],it=this.geta(Q),lt=this.geta(Ze);it!=null&&lt!=null&&(it.bonds.push(lt.index),lt.bonds.push(it.index),it.bondOrder.push(_e),lt.bondOrder.push(_e))}}}function qm(jp,f){var R=!f.keepH,$=f.altLoc?f.altLoc:"A",Q=!f.noComputeSecondaryStructure;const Ze=!f.doAssembly,_e=f.assignBonds===void 0||f.assignBonds;if(typeof jp=="string")try{jp=(0,C.base64ToArray)(jp)}catch{jp=new TextEncoder().encode(jp)}else jp=new Uint8Array(jp);var it=dm.decodeMsgpack(jp);it==31&&(jp=(0,C.inflateString)(jp,!1),it=dm.decodeMsgpack(jp));var lt=[],Ye=lt.modelData=[],Vt=it.dataBlocks.length;if(Vt==0)return lt;f.multimodel||(Vt=1);for(let Ct=0;Ct<Vt;Ct++){let Nl=lt.length;const ms=[];Ye.push({symmetries:[]}),lt.push([]);const Si=it.dataBlocks[Ct],_s=Object.create(null);for(const O1 of Si.categories)_s[O1.name.substr(1)]=im(O1);let gs={},Yl=_s.struct_conf;if(Yl){let O1=Yl.getField("conf_type_id"),s1=Yl.getField("beg_label_asym_id"),yg=Yl.getField("beg_label_seq_id"),Z1=Yl.getField("end_label_seq_id");for(let pg=0;pg<O1.length;pg++)if(O1[pg].startsWith("H")){let J1=s1[pg],wg=yg[pg],tv=Z1[pg];J1 in gs||(gs[J1]={}),gs[J1][wg]="h1";for(let Sv=wg+1;Sv<tv;Sv++)gs[J1][Sv]="h";gs[J1][tv]="h2"}}let Dp=_s.struct_sheet_range;if(Dp){let O1=Dp.getField("id"),s1=Dp.getField("beg_label_asym_id"),yg=Dp.getField("beg_label_seq_id"),Z1=Dp.getField("end_label_seq_id");for(let pg=0;pg<O1.length;pg++){let J1=s1[pg],wg=yg[pg],tv=Z1[pg];J1 in gs||(gs[J1]={}),gs[J1][wg]="s1";for(let Sv=wg+1;Sv<tv;Sv++)gs[J1][Sv]="s";gs[J1][tv]="s2"}}let Op=_s.pdbx_struct_oper_list,e0=Op.getField("id");if(e0&&!Ze){let O1=Op.getField("matrix[1][1]"),s1=Op.getField("matrix[1][2]"),yg=Op.getField("matrix[1][3]"),Z1=Op.getField("matrix[2][1]"),pg=Op.getField("matrix[2][2]"),J1=Op.getField("matrix[2][3]"),wg=Op.getField("matrix[3][1]"),tv=Op.getField("matrix[3][2]"),Sv=Op.getField("matrix[3][3]"),bv=Op.getField("vector[1]"),Jv=Op.getField("vector[2]"),Uv=Op.getField("vector[3]");for(let lv=0;lv<e0.length;lv++){const Kv=new d.Matrix4(O1[lv],s1[lv],yg[lv],bv[lv],Z1[lv],pg[lv],J1[lv],Jv[lv],wg[lv],tv[lv],Sv[lv],Uv[lv]);Ye[Ye.length-1].symmetries.push(Kv)}}let Xp=new pm(_s.chem_comp_bond),_0=new Gm,D0=new Dm(_s.struct_conn),O0=_s.atom_site,U0=O0.rowCount,E0=O0.getField("group_PDB"),ym=O0.getField("Cartn_x"),mm=O0.getField("Cartn_y"),Vm=O0.getField("Cartn_z"),Pm=O0.getField("auth_asym_id"),a1=O0.getField("label_asym_id"),h1=O0.getField("auth_seq_id"),Hm=O0.getField("label_seq_id"),w1=O0.getField("auth_comp_id"),_m=O0.getField("label_comp_id"),Om=O0.getField("auth_atom_id"),D1=O0.getField("label_atom_id"),$m=O0.getField("type_symbol"),R1=O0.getField("B_iso_or_equiv"),k1=O0.getField("id"),Jm=O0.getField("label_alt_id"),I1=O0.getField("pdbx_PDB_model_num"),ug=I1?I1[0]:0;for(let O1=0;O1<U0;O1++){if(E0!==void 0&&E0[O1]==="TER")continue;if(I1&&I1[O1]!=ug){if(ug=I1[O1],!f.multimodel)break;f.onemol||(lt.push([]),Ye.push(Ye[Ye.length-1]),ug=I1[O1],_0.setBonds(Xp,D0),_0=new Gm)}const s1={};s1.x=ym[O1],s1.y=mm[O1],s1.z=Vm[O1],s1.chain=Pm?Pm[O1]:a1?a1[O1]:void 0,s1.lchain=a1?a1[O1]:void 0,s1.resi=h1?h1[O1]:Hm?Hm[O1]:void 0,s1.lresi=Hm?Hm[O1]:void 0,s1.resn=w1?w1[O1].trim():_m?_m[O1].trim():void 0,s1.lresn=_m?_m[O1].trim():void 0,s1.atom=Om?Om[O1].replace(/"/gm,""):D1?D1[O1].replace(/"/gm,""):void 0,s1.icode=Jm?Jm[O1]:void 0,s1.altLoc=s1.icode,s1.hetflag=!E0||E0[O1]==="HETA"||E0[O1]==="HETATM";let yg="X";$m&&(yg=$m[O1].replace(/\(?\+?\d+.*/,"")),s1.elem=yg[0].toUpperCase()+yg.substring(1,2).toLowerCase(),R1&&(s1.b=R1[O1]),R&&s1.elem=="H"||s1.altLoc!=""&&s1.altLoc!=$&&$!="*"||(s1.bonds=[],s1.ss="c",s1.serial=k1[O1],s1.model=ug,s1.bondOrder=[],s1.properties={},s1.index=lt[lt.length-1].length,ms[s1.serial]=[lt.length,s1.index],lt[lt.length-1].push(s1),_0.add(s1))}if(_0.setBonds(Xp,D0),!am(gs))for(let O1=Nl;O1<lt.length;O1++){let s1=lt[O1];for(let yg=0;yg<s1.length;yg++){const Z1=s1[yg];if(Z1!==void 0&&Z1.lchain in gs&&Z1.lresi in gs[Z1.lchain]){const pg=gs[Z1.lchain][Z1.lresi];Z1.ss=pg[0],pg.length>1&&(pg[1]=="1"?Z1.ssbegin=!0:pg[1]=="2"&&(Z1.ssend=!0))}}}f.multimodel&&Ct<Vt-1&&(f.onemol||(lt.push([]),Ye.push({symmetries:[]})))}for(let Ct=0;Ct<lt.length;Ct++)!_e||f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms||qp(lt[Ct],f),Q&&pr(lt[Ct],f.hbondCutoff),Hp(Ye[Ct].symmetries,lt[Ct],f,Ye[Ct].cryst),f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms&&_e&&qp(lt[Ct],f);return lt}const vm={vasp:Sp.VASP,VASP:Sp.VASP,cube:_r.CUBE,CUBE:_r.CUBE,xyz:ne,XYZ:ne,sdf:zl,SDF:zl,json:Hl,cdjson:Hl,CDJSON:Hl,mcif:Ep,cif:Ep,CIF:Ep,mol2:w0,MOL2:w0,pdb:C0,PDB:C0,pdbqt:C0,PDBQT:C0,pqr:Fm,PQR:Fm,mmtf:Tm,MMTF:Tm,prmtop:x1,PRMTOP:x1,gro:S1,GRO:S1,lammpstrj:zp,LAMMPSTRJ:zp,bcif:qm,BCIF:qm};function r0(jp,f="utf8"){return new TextDecoder(f).decode(jp)}const e1=new TextEncoder,_1=(()=>{const jp=new Uint8Array(4);return!((new Uint32Array(jp.buffer)[0]=1)&jp[0])})(),j1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class q0{constructor(f=8192,R={}){ti(this,"buffer"),ti(this,"byteLength"),ti(this,"byteOffset"),ti(this,"length"),ti(this,"offset"),ti(this,"lastWrittenByte"),ti(this,"littleEndian"),ti(this,"_data"),ti(this,"_mark"),ti(this,"_marks");let $=!1;typeof f=="number"?f=new ArrayBuffer(f):($=!0,this.lastWrittenByte=f.byteLength);const Q=R.offset?R.offset>>>0:0,Ze=f.byteLength-Q;let _e=Q;(ArrayBuffer.isView(f)||f instanceof q0)&&(f.byteLength!==f.buffer.byteLength&&(_e=f.byteOffset+Q),f=f.buffer),this.lastWrittenByte=$?Ze:0,this.buffer=f,this.length=Ze,this.byteLength=Ze,this.byteOffset=_e,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,_e,Ze),this._mark=0,this._marks=[]}available(f=1){return this.offset+f<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(f=1){return this.offset+=f,this}back(f=1){return this.offset-=f,this}seek(f){return this.offset=f,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const f=this._marks.pop();if(f===void 0)throw new Error("Mark stack empty");return this.seek(f),this}rewind(){return this.offset=0,this}ensureAvailable(f=1){if(!this.available(f)){const R=2*(this.offset+f),$=new Uint8Array(R);$.set(new Uint8Array(this.buffer)),this.buffer=$.buffer,this.length=R,this.byteLength=R,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(f=1){return this.readArray(f,"uint8")}readArray(f,R){const $=j1[R].BYTES_PER_ELEMENT*f,Q=this.byteOffset+this.offset,Ze=this.buffer.slice(Q,Q+$);if(this.littleEndian===_1&&R!=="uint8"&&R!=="int8"){const it=new Uint8Array(this.buffer.slice(Q,Q+$));it.reverse();const lt=new j1[R](it.buffer);return this.offset+=$,lt.reverse(),lt}const _e=new j1[R](Ze);return this.offset+=$,_e}readInt16(){const f=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,f}readUint16(){const f=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,f}readInt32(){const f=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,f}readUint32(){const f=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,f}readFloat32(){const f=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,f}readFloat64(){const f=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,f}readBigInt64(){const f=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,f}readBigUint64(){const f=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,f}readChar(){return String.fromCharCode(this.readInt8())}readChars(f=1){let R="";for(let $=0;$<f;$++)R+=this.readChar();return R}readUtf8(f=1){return r0(this.readBytes(f))}decodeText(f=1,R="utf8"){return r0(this.readBytes(f),R)}writeBoolean(f){return this.writeUint8(f?255:0),this}writeInt8(f){return this.ensureAvailable(1),this._data.setInt8(this.offset++,f),this._updateLastWrittenByte(),this}writeUint8(f){return this.ensureAvailable(1),this._data.setUint8(this.offset++,f),this._updateLastWrittenByte(),this}writeByte(f){return this.writeUint8(f)}writeBytes(f){this.ensureAvailable(f.length);for(let R=0;R<f.length;R++)this._data.setUint8(this.offset++,f[R]);return this._updateLastWrittenByte(),this}writeInt16(f){return this.ensureAvailable(2),this._data.setInt16(this.offset,f,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(f){return this.ensureAvailable(2),this._data.setUint16(this.offset,f,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(f){return this.ensureAvailable(4),this._data.setInt32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(f){return this.ensureAvailable(4),this._data.setUint32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(f){return this.ensureAvailable(4),this._data.setFloat32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(f){return this.ensureAvailable(8),this._data.setFloat64(this.offset,f,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(f){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,f,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(f){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,f,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(f){return this.writeUint8(f.charCodeAt(0))}writeChars(f){for(let R=0;R<f.length;R++)this.writeUint8(f.charCodeAt(R));return this}writeUtf8(f){return this.writeBytes((function(R){return e1.encode(R)})(f))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const d1=1,tm=2,o1=3,jm=4,l1=5,gg=6;function Jg(jp){switch(Number(jp)){case d1:return"byte";case tm:return"char";case o1:return"short";case jm:return"int";case l1:return"float";case gg:return"double";default:return"undefined"}}function Dg(jp){switch(Number(jp)){case d1:case tm:return 1;case o1:return 2;case jm:case l1:return 4;case gg:return 8;default:return-1}}function Eg(jp){switch(String(jp)){case"byte":return d1;case"char":return tm;case"short":return o1;case"int":return jm;case"float":return l1;case"double":return gg;default:return-1}}function ev(jp,f){if(jp!==1){const R=new Array(jp);for(let $=0;$<jp;$++)R[$]=f();return R}return f()}function pv(jp,f,R){switch(f){case d1:return Array.from(jp.readBytes(R));case tm:return($=jp.readChars(R)).charCodeAt($.length-1)===0?$.substring(0,$.length-1):$;case o1:return ev(R,jp.readInt16.bind(jp));case jm:return ev(R,jp.readInt32.bind(jp));case l1:return ev(R,jp.readFloat32.bind(jp));case gg:return ev(R,jp.readFloat64.bind(jp));default:throw new Error(`non valid type ${f}`)}var $}function sv(jp,f){if(jp)throw new TypeError(`Not a valid NetCDF v3.x file: ${f}`)}function kv(jp){jp.offset%4!=0&&jp.skip(4-jp.offset%4)}function Zv(jp){const f=jp.readUint32(),R=jp.readChars(f);return kv(jp),R}function ry(jp,f){const R={version:f},$={length:jp.readUint32()},Q=(function(_e){const it={};let lt,Ye;const Vt=_e.readUint32();let Ct;if(Vt===0)return sv(_e.readUint32()!==0,"wrong empty tag for list of dimensions"),[];{sv(Vt!==10,"wrong tag for list of dimensions");const Nl=_e.readUint32();Ct=new Array(Nl);for(let ms=0;ms<Nl;ms++){const Si=Zv(_e),_s=_e.readUint32();_s===0&&(lt=ms,Ye=Si),Ct[ms]={name:Si,size:_s}}}return lt!==void 0&&(it.recordId=lt),Ye!==void 0&&(it.recordName=Ye),it.dimensions=Ct,it})(jp);Array.isArray(Q)||($.id=Q.recordId,$.name=Q.recordName,R.dimensions=Q.dimensions),R.globalAttributes=oy(jp);const Ze=(function(_e,it,lt){const Ye=_e.readUint32();let Vt,Ct=0;if(Ye===0)return sv(_e.readUint32()!==0,"wrong empty tag for list of variables"),[];{sv(Ye!==11,"wrong tag for list of variables");const Nl=_e.readUint32();Vt=new Array(Nl);for(let ms=0;ms<Nl;ms++){const Si=Zv(_e),_s=_e.readUint32(),gs=new Array(_s);for(let _0=0;_0<_s;_0++)gs[_0]=_e.readUint32();const Yl=oy(_e),Dp=_e.readUint32();sv(Dp<1&&Dp>6,`non valid type ${Dp}`);const Op=_e.readUint32();let e0=_e.readUint32();lt===2&&(sv(e0>0,"offsets larger than 4GB not supported"),e0=_e.readUint32());let Xp=!1;it!==void 0&&gs[0]===it&&(Ct+=Op,Xp=!0),Vt[ms]={name:Si,dimensions:gs,attributes:Yl,type:Jg(Dp),size:Op,offset:e0,record:Xp}}}return{variables:Vt,recordStep:Ct}})(jp,$?.id,f);return Array.isArray(Ze)||(R.variables=Ze.variables,$.recordStep=Ze.recordStep),R.recordDimension=$,R}function oy(jp){const f=jp.readUint32();let R;if(f===0)return sv(jp.readUint32()!==0,"wrong empty tag for list of attributes"),[];{sv(f!==12,"wrong tag for list of attributes");const $=jp.readUint32();R=new Array($);for(let Q=0;Q<$;Q++){const Ze=Zv(jp),_e=jp.readUint32();sv(_e<1||_e>6,`non valid type ${_e}`);const it=jp.readUint32(),lt=pv(jp,_e,it);kv(jp),R[Q]={name:Ze,type:Jg(_e),value:lt}}}return R}function Hv(){const jp=[];jp.push("DIMENSIONS");for(const R of this.dimensions)jp.push(`  ${R.name.padEnd(30)} = size: ${R.size}`);jp.push(""),jp.push("GLOBAL ATTRIBUTES");for(const R of this.globalAttributes)jp.push(`  ${R.name.padEnd(30)} = ${R.value}`);const f=JSON.parse(JSON.stringify(this.variables));jp.push(""),jp.push("VARIABLES:");for(const R of f){R.value=this.getDataVariable(R);let $=JSON.stringify(R.value);$.length>50&&($=$.substring(0,50)),isNaN(R.value.length)||($+=` (length: ${R.value.length})`),jp.push(`  ${R.name.padEnd(30)} = ${$}`)}return jp.join(`
`)}class vv{constructor(f){this.toString=Hv;const R=new q0(f);R.setBigEndian(),sv(R.readChars(3)!=="CDF","should start with CDF");const $=R.readByte();sv($>2,"unknown version"),this.header=ry(R,$),this.buffer=R}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(f){const R=this.globalAttributes.find($=>$.name===f);return R?R.value:null}getDataVariableAsString(f){const R=this.getDataVariable(f);return R?R.join(""):null}get variables(){return this.header.variables}getDataVariable(f){let R;if(R=typeof f=="string"?this.header.variables.find($=>$.name===f):f,R===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(R.offset),R.record?(function($,Q,Ze){const _e=Eg(Q.type),it=Q.size?Q.size/Dg(_e):1,lt=Ze.length,Ye=new Array(lt),Vt=Ze.recordStep;if(!Vt)throw new Error("recordDimension.recordStep is undefined");for(let Ct=0;Ct<lt;Ct++){const Nl=$.offset;Ye[Ct]=pv($,_e,it),$.seek(Nl+Vt)}return Ye})(this.buffer,R,this.header.recordDimension):(function($,Q){const Ze=Eg(Q.type),_e=Q.size/Dg(Ze),it=new Array(_e);for(let lt=0;lt<_e;lt++)it[lt]=pv($,Ze,1);return it})(this.buffer,R)}dataVariableExists(f){return this.header.variables.find(R=>R.name===f)!==void 0}attributeExists(f){return this.globalAttributes.find(R=>R.name===f)!==void 0}}class ag{static sameObj(f,R){return f&&R?JSON.stringify(f)==JSON.stringify(R):f==R}constructor(f,R,$){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new _.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=S.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=R||{},this.viewer=$,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:S.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=f}getRadiusFromStyle(f,R){var $=this.defaultSphereRadius;if(R.radius!==void 0)$=R.radius;else if(ag.vdwRadii[f.elem])$=ag.vdwRadii[f.elem];else if(f.elem.length>1){let Q=f.elem;Q=Q[0].toUpperCase()+Q[1].toLowerCase(),ag.vdwRadii[Q]&&($=ag.vdwRadii[Q])}return R.scale!==void 0&&($*=R.scale),$}drawAtomCross(f,R){if(f.style.cross){var $=f.style.cross;if(!$.hidden){var Q=$.linewidth||ag.defaultlineWidth;R[Q]||(R[Q]=new d.Geometry);var Ze=R[Q].updateGeoGroup(6),_e=this.getRadiusFromStyle(f,$),it=[[_e,0,0],[-_e,0,0],[0,_e,0],[0,-_e,0],[0,0,_e],[0,0,-_e]],lt=f.clickable||f.hoverable;lt&&f.intersectionShape===void 0&&(f.intersectionShape={sphere:[],cylinder:[],line:[]});for(var Ye=(0,C.getColorFromStyle)(f,$),Vt=Ze.vertexArray,Ct=Ze.colorArray,Nl=0;Nl<6;Nl++){var ms=3*Ze.vertices;if(Ze.vertices++,Vt[ms]=f.x+it[Nl][0],Vt[ms+1]=f.y+it[Nl][1],Vt[ms+2]=f.z+it[Nl][2],Ct[ms]=Ye.r,Ct[ms+1]=Ye.g,Ct[ms+2]=Ye.b,lt){var Si=new _.Vector3(it[Nl][0],it[Nl][1],it[Nl][2]);Si.multiplyScalar(.1),Si.set(Si.x+f.x,Si.y+f.y,Si.z+f.z),f.intersectionShape.line.push(Si)}}}}}getGoodCross(f,R,$,Q){for(var Ze=null,_e=-1,it=0,lt=f.bonds.length;it<lt;it++)if(f.bonds[it]!=R.index){let Vt=f.bonds[it],Ct=this.atoms[Vt],Nl=new _.Vector3(Ct.x,Ct.y,Ct.z).clone();Nl.sub($);let ms=Nl.clone();ms.cross(Q);var Ye=ms.lengthSq();if(Ye>_e&&(Ze=ms,(_e=Ye)>.1))return Ze}return Ze}getSideBondV(f,R,$){var Q,Ze,_e,it,lt=new _.Vector3(f.x,f.y,f.z),Ye=new _.Vector3(R.x,R.y,R.z).clone(),Vt=null;if(Ye.sub(lt),f.bonds.length===1)R.bonds.length===1?(Vt=Ye.clone(),Math.abs(Vt.x)>1e-4?Vt.y+=1:Vt.x+=1):(Q=($+1)%R.bonds.length,Ze=R.bonds[Q],(_e=this.atoms[Ze]).index==f.index&&(Q=(Q+1)%R.bonds.length,Ze=R.bonds[Q],_e=this.atoms[Ze]),(it=new _.Vector3(_e.x,_e.y,_e.z).clone()).sub(lt),(Vt=it.clone()).cross(Ye));else if((Vt=this.getGoodCross(f,R,lt,Ye)).lengthSq()<.01){var Ct=this.getGoodCross(R,f,lt,Ye);Ct!=null&&(Vt=Ct)}return Vt.lengthSq()<.01&&(Vt=Ye.clone(),Math.abs(Vt.x)>1e-4?Vt.y+=1:Vt.x+=1),Vt.cross(Ye),Vt.normalize(),Vt}addLine(f,R,$,Q,Ze,_e){f[$]=Q.x,f[$+1]=Q.y,f[$+2]=Q.z,R[$]=_e.r,R[$+1]=_e.g,R[$+2]=_e.b,f[$+3]=Ze.x,f[$+4]=Ze.y,f[$+5]=Ze.z,R[$+3]=_e.r,R[$+4]=_e.g,R[$+5]=_e.b}drawBondLines(f,R,$){if(f.style.line){var Q=f.style.line;if(!Q.hidden){var Ze,_e,it,lt,Ye=Q.linewidth||ag.defaultlineWidth;$[Ye]||($[Ye]=new d.Geometry);for(var Vt=$[Ye].updateGeoGroup(6*f.bonds.length),Ct=Vt.vertexArray,Nl=Vt.colorArray,ms=0;ms<f.bonds.length;ms++){var Si=R[f.bonds[ms]];if(Si.style.line&&!(f.index>=Si.index)){var _s=new _.Vector3(f.x,f.y,f.z),gs=new _.Vector3(Si.x,Si.y,Si.z),Yl=_s.clone().add(gs).multiplyScalar(.5),Dp=!1,Op=f.clickable||f.hoverable,e0=Si.clickable||Si.hoverable;(Op||e0)&&(Op&&(f.intersectionShape===void 0&&(f.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),f.intersectionShape.line.push(_s),f.intersectionShape.line.push(Yl)),e0&&(Si.intersectionShape===void 0&&(Si.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Si.intersectionShape.line.push(Yl),Si.intersectionShape.line.push(gs)));var Xp=(0,C.getColorFromStyle)(f,f.style.line),_0=(0,C.getColorFromStyle)(Si,Si.style.line);if(f.bondStyles&&f.bondStyles[ms]){var D0=f.bondStyles[ms];if(!D0.iswire)continue;D0.singleBond&&(Dp=!0),D0.color1!==void 0&&(Xp=S.CC.color(D0.color1)),D0.color2!==void 0&&(_0=S.CC.color(D0.color2))}var O0,U0,E0=3*Vt.vertices;if(f.bondOrder[ms]>1&&f.bondOrder[ms]<4&&!Dp){var ym=this.getSideBondV(f,Si,ms),mm=gs.clone();mm.sub(_s),f.bondOrder[ms]==2?(ym.multiplyScalar(.1),(Ze=_s.clone()).add(ym),(_e=_s.clone()).sub(ym),(it=Ze.clone()).add(mm),(lt=_e.clone()).add(mm),Xp==_0?(Vt.vertices+=4,this.addLine(Ct,Nl,E0,Ze,it,Xp),this.addLine(Ct,Nl,E0+6,_e,lt,Xp)):(Vt.vertices+=8,mm.multiplyScalar(.5),(O0=Ze.clone()).add(mm),(U0=_e.clone()).add(mm),this.addLine(Ct,Nl,E0,Ze,O0,Xp),this.addLine(Ct,Nl,E0+6,O0,it,_0),this.addLine(Ct,Nl,E0+12,_e,U0,Xp),this.addLine(Ct,Nl,E0+18,U0,lt,_0))):f.bondOrder[ms]==3&&(ym.multiplyScalar(.1),(Ze=_s.clone()).add(ym),(_e=_s.clone()).sub(ym),(it=Ze.clone()).add(mm),(lt=_e.clone()).add(mm),Xp==_0?(Vt.vertices+=6,this.addLine(Ct,Nl,E0,_s,gs,Xp),this.addLine(Ct,Nl,E0+6,Ze,it,Xp),this.addLine(Ct,Nl,E0+12,_e,lt,Xp)):(Vt.vertices+=12,mm.multiplyScalar(.5),(O0=Ze.clone()).add(mm),(U0=_e.clone()).add(mm),this.addLine(Ct,Nl,E0,_s,Yl,Xp),this.addLine(Ct,Nl,E0+6,Yl,gs,_0),this.addLine(Ct,Nl,E0+12,Ze,O0,Xp),this.addLine(Ct,Nl,E0+18,O0,it,_0),this.addLine(Ct,Nl,E0+24,_e,U0,Xp),this.addLine(Ct,Nl,E0+30,U0,lt,_0)))}else Xp==_0?(Vt.vertices+=2,this.addLine(Ct,Nl,E0,_s,gs,Xp)):(Vt.vertices+=4,this.addLine(Ct,Nl,E0,_s,Yl,Xp),this.addLine(Ct,Nl,E0+6,Yl,gs,_0))}}}}}drawAtomSphere(f,R){if(f.style.sphere){var $=f.style.sphere;if(!$.hidden){var Q=(0,C.getColorFromStyle)(f,$),Ze=this.getRadiusFromStyle(f,$);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var _e=new _.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new p.Sphere(_e,Ze))}o.drawSphere(R,f,Ze,Q)}}}drawAtomClickSphere(f){if(f.style.clicksphere){var R=f.style.clicksphere;if(!R.hidden){var $=this.getRadiusFromStyle(f,R);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var Q=new _.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new p.Sphere(Q,$))}}}}drawAtomInstanced(f,R){if(f.style.sphere){var $=f.style.sphere;if(!$.hidden){var Q=this.getRadiusFromStyle(f,$),Ze=(0,C.getColorFromStyle)(f,$),_e=R.updateGeoGroup(1),it=_e.vertices,lt=3*it,Ye=_e.vertexArray,Vt=_e.colorArray,Ct=_e.radiusArray;if(Ye[lt]=f.x,Ye[lt+1]=f.y,Ye[lt+2]=f.z,Vt[lt]=Ze.r,Vt[lt+1]=Ze.g,Vt[lt+2]=Ze.b,Ct[it]=Q,(f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var Nl=new _.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new p.Sphere(Nl,Q))}_e.vertices+=1}}}drawSphereImposter(f,R,$,Q){var Ze,_e=f.updateGeoGroup(4),it=_e.vertices,lt=3*it,Ye=_e.vertexArray,Vt=_e.colorArray;for(Ze=0;Ze<4;Ze++)Ye[lt+3*Ze]=R.x,Ye[lt+3*Ze+1]=R.y,Ye[lt+3*Ze+2]=R.z;var Ct=_e.normalArray;for(Ze=0;Ze<4;Ze++)Vt[lt+3*Ze]=Q.r,Vt[lt+3*Ze+1]=Q.g,Vt[lt+3*Ze+2]=Q.b;Ct[lt+0]=-$,Ct[lt+1]=$,Ct[lt+2]=0,Ct[lt+3]=-$,Ct[lt+4]=-$,Ct[lt+5]=0,Ct[lt+6]=$,Ct[lt+7]=-$,Ct[lt+8]=0,Ct[lt+9]=$,Ct[lt+10]=$,Ct[lt+11]=0,_e.vertices+=4;var Nl=_e.faceArray,ms=_e.faceidx;Nl[ms+0]=it,Nl[ms+1]=it+1,Nl[ms+2]=it+2,Nl[ms+3]=it+2,Nl[ms+4]=it+3,Nl[ms+5]=it,_e.faceidx+=6}drawAtomImposter(f,R){if(f.style.sphere){var $=f.style.sphere;if(!$.hidden){var Q=this.getRadiusFromStyle(f,$),Ze=(0,C.getColorFromStyle)(f,$);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var _e=new _.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new p.Sphere(_e,Q))}this.drawSphereImposter(R,f,Q,Ze)}}}calculateDashes(f,R,$,Q,Ze){var _e=Math.sqrt(Math.pow(f.x-R.x,2)+Math.pow(f.y-R.y,2)+Math.pow(f.z-R.z,2));$=Math.max($,0),Ze=Math.max(Ze,0)+2*$,(Q=Math.max(Q,.001))+Ze>_e&&(Q=_e,Ze=0);var it,lt=Math.floor((_e-Q)/(Q+Ze))+1;Ze=(_e-lt*Q)/lt;for(var Ye=new _.Vector3(f.x,f.y,f.z),Vt=new _.Vector3((R.x-f.x)/(_e/Ze),(R.y-f.y)/(_e/Ze),(R.z-f.z)/(_e/Ze)),Ct=new _.Vector3((R.x-f.x)/(_e/Q),(R.y-f.y)/(_e/Q),(R.z-f.z)/(_e/Q)),Nl=[],ms=0;ms<lt;ms++)it=new _.Vector3(Ye.x+Ct.x,Ye.y+Ct.y,Ye.z+Ct.z),Nl.push({from:Ye,to:it}),Ye=new _.Vector3(it.x+Vt.x,it.y+Vt.y,it.z+Vt.z);return Nl}static drawStickImposter(f,R,$,Q,Ze,_e=0,it=0){for(var lt=f.updateGeoGroup(4),Ye=lt.vertices,Vt=3*Ye,Ct=lt.vertexArray,Nl=lt.colorArray,ms=lt.radiusArray,Si=lt.normalArray,_s=Ze.r,gs=Ze.g,Yl=Ze.b,Dp=function(D0){var O0=-D0;return O0==0&&(O0=-1e-4),O0},Op=Vt,e0=0;e0<4;e0++)Ct[Op]=R.x,Si[Op]=$.x,Nl[Op]=_s,Ct[++Op]=R.y,Si[Op]=$.y,Nl[Op]=gs,Ct[++Op]=R.z,Si[Op]=$.z,Nl[Op]=e0<2?Yl:Dp(Yl),Op++;lt.vertices+=4,ms[Ye]=-Q,ms[Ye+1]=Q,ms[Ye+2]=-Q,ms[Ye+3]=Q;var Xp=lt.faceArray,_0=lt.faceidx;Xp[_0+0]=Ye,Xp[_0+1]=Ye+1,Xp[_0+2]=Ye+2,Xp[_0+3]=Ye+2,Xp[_0+4]=Ye+3,Xp[_0+5]=Ye,lt.faceidx+=6}drawBondSticks(f,R,$){var Q,Ze;if(f.style.stick){var _e=f.style.stick;if(!_e.hidden){var it,lt,Ye,Vt,Ct,Nl,ms,Si,_s,gs,Yl,Dp,Op,e0,Xp=_e.radius||this.defaultStickRadius,_0=_e.doubleBondScaling||.4,D0=_e.tripleBondScaling||.25,O0=((Q=_e.dashedBondConfig)===null||Q===void 0?void 0:Q.dashLength)||.1,U0=((Ze=_e.dashedBondConfig)===null||Ze===void 0?void 0:Ze.gapLength)||.25,E0=Xp,ym=_e.singleBonds||!1,mm=_e.dashedBonds||!1,Vm=0,Pm=0,a1=(0,C.getColorFromStyle)(f,_e);!f.capDrawn&&f.bonds.length<4&&(Vm=2);var h1=Uv=>{var lv=$.imposter?ag.drawStickImposter:o.drawCylinder;return!mm&&Uv>=1?lv:(Kv,Nv,Fv,Qv,hy,ey=0,yy=0,dv=.1,Ev=.25)=>{this.calculateDashes(Nv,Fv,Qv,dv,Ev).forEach(Rv=>{lv(Kv,Rv.from,Rv.to,Qv,hy,ey,yy)})}};for(Ye=0;Ye<f.bonds.length;Ye++){var Hm=h1(f.bondOrder[Ye]),w1=R[f.bonds[Ye]];if(Dp=Op=e0=null,f.index<w1.index){var _m=w1.style;if(!_m.stick||_m.stick.hidden)continue;var Om=(0,C.getColorFromStyle)(w1,_m.stick);if(E0=Xp,Vt=ym,f.bondStyles&&f.bondStyles[Ye]){if((Ct=f.bondStyles[Ye]).iswire)continue;Ct.radius&&(E0=Ct.radius),Ct.singleBond&&(Vt=!0),Ct.color1!==void 0&&(a1=S.CC.color(Ct.color1)),Ct.color2!==void 0&&(Om=S.CC.color(Ct.color2))}var D1=new _.Vector3(f.x,f.y,f.z),$m=new _.Vector3(w1.x,w1.y,w1.z);if(f.bondOrder[Ye]<=1||Vt||f.bondOrder[Ye]>3){if(f.bondOrder[Ye]<1&&(E0*=f.bondOrder[Ye]),!w1.capDrawn&&w1.bonds.length<4&&(Pm=2),a1!=Om?(Dp=new _.Vector3().addVectors(D1,$m).multiplyScalar(.5),Hm($,D1,Dp,E0,a1,Vm,0,O0,U0),Hm($,Dp,$m,E0,Om,0,Pm,O0,U0)):Hm($,D1,$m,E0,a1,Vm,Pm,O0,U0),it=f.clickable||f.hoverable,lt=w1.clickable||w1.hoverable,it||lt){if(Dp||(Dp=new _.Vector3().addVectors(D1,$m).multiplyScalar(.5)),it){var R1=new p.Cylinder(D1,Dp,E0),k1=new p.Sphere(D1,E0);f.intersectionShape.cylinder.push(R1),f.intersectionShape.sphere.push(k1)}if(lt){var Jm=new p.Cylinder($m,Dp,E0),I1=new p.Sphere($m,E0);w1.intersectionShape.cylinder.push(Jm),w1.intersectionShape.sphere.push(I1)}}}else if(f.bondOrder[Ye]>1){var ug=0,O1=0;E0!=Xp&&(ug=2,O1=2);var s1,yg,Z1,pg,J1,wg=$m.clone(),tv=null;wg.sub(D1),tv=this.getSideBondV(f,w1,Ye),f.bondOrder[Ye]==2?(s1=E0*_0,tv.multiplyScalar(1.5*s1),(yg=D1.clone()).add(tv),(Z1=D1.clone()).sub(tv),(pg=yg.clone()).add(wg),(J1=Z1.clone()).add(wg),a1!=Om?(Dp=new _.Vector3().addVectors(yg,pg).multiplyScalar(.5),Op=new _.Vector3().addVectors(Z1,J1).multiplyScalar(.5),Hm($,yg,Dp,s1,a1,ug,0),Hm($,Dp,pg,s1,Om,0,O1),Hm($,Z1,Op,s1,a1,ug,0),Hm($,Op,J1,s1,Om,0,O1)):(Hm($,yg,pg,s1,a1,ug,O1),Hm($,Z1,J1,s1,a1,ug,O1)),it=f.clickable||f.hoverable,lt=w1.clickable||w1.hoverable,(it||lt)&&(Dp||(Dp=new _.Vector3().addVectors(yg,pg).multiplyScalar(.5)),Op||(Op=new _.Vector3().addVectors(Z1,J1).multiplyScalar(.5)),it&&(Nl=new p.Cylinder(yg,Dp,s1),ms=new p.Cylinder(Z1,Op,s1),f.intersectionShape.cylinder.push(Nl),f.intersectionShape.cylinder.push(ms)),lt&&(_s=new p.Cylinder(pg,Dp,s1),gs=new p.Cylinder(J1,Op,s1),w1.intersectionShape.cylinder.push(_s),w1.intersectionShape.cylinder.push(gs)))):f.bondOrder[Ye]==3&&(s1=E0*D0,tv.cross(wg),tv.normalize(),tv.multiplyScalar(3*s1),(yg=D1.clone()).add(tv),(Z1=D1.clone()).sub(tv),(pg=yg.clone()).add(wg),(J1=Z1.clone()).add(wg),a1!=Om?(Dp=new _.Vector3().addVectors(yg,pg).multiplyScalar(.5),Op=new _.Vector3().addVectors(Z1,J1).multiplyScalar(.5),e0=new _.Vector3().addVectors(D1,$m).multiplyScalar(.5),Hm($,yg,Dp,s1,a1,ug,0),Hm($,Dp,pg,s1,Om,0,O1),Hm($,D1,e0,s1,a1,Vm,0),Hm($,e0,$m,s1,Om,0,Pm),Hm($,Z1,Op,s1,a1,ug,0),Hm($,Op,J1,s1,Om,0,O1)):(Hm($,yg,pg,s1,a1,ug,O1),Hm($,D1,$m,s1,a1,Vm,Pm),Hm($,Z1,J1,s1,a1,ug,O1)),it=f.clickable||f.hoverable,lt=w1.clickable||w1.hoverable,(it||lt)&&(Dp||(Dp=new _.Vector3().addVectors(yg,pg).multiplyScalar(.5)),Op||(Op=new _.Vector3().addVectors(Z1,J1).multiplyScalar(.5)),e0||(e0=new _.Vector3().addVectors(D1,$m).multiplyScalar(.5)),it&&(Nl=new p.Cylinder(yg.clone(),Dp.clone(),s1),ms=new p.Cylinder(Z1.clone(),Op.clone(),s1),Si=new p.Cylinder(D1.clone(),e0.clone(),s1),f.intersectionShape.cylinder.push(Nl),f.intersectionShape.cylinder.push(ms),f.intersectionShape.cylinder.push(Si)),lt&&(_s=new p.Cylinder(pg.clone(),Dp.clone(),s1),gs=new p.Cylinder(J1.clone(),Op.clone(),s1),Yl=new p.Cylinder($m.clone(),e0.clone(),s1),w1.intersectionShape.cylinder.push(_s),w1.intersectionShape.cylinder.push(gs),w1.intersectionShape.cylinder.push(Yl))))}}}var Sv=!1,bv=0,Jv=!1;for(Ye=0;Ye<f.bonds.length;Ye++)Vt=ym,f.bondStyles&&f.bondStyles[Ye]&&((Ct=f.bondStyles[Ye]).singleBond&&(Vt=!0),Ct.radius&&Ct.radius!=Xp&&(Jv=!0)),(Vt||f.bondOrder[Ye]==1)&&bv++;Jv?bv>0&&(Sv=!0):bv==0&&(f.bonds.length>0||_e.showNonBonded)&&(Sv=!0),Sv&&(E0=Xp,$.imposter?this.drawSphereImposter($.sphereGeometry,f,E0,a1):o.drawSphere($,f,E0,a1))}}}createMolObj(f,R){R=R||{};var $,Q,Ze,_e,it=new d.Object3D,lt=[],Ye={},Vt={},Ct=this.drawAtomSphere,Nl=null,ms=null;R.supportsImposters?(Ct=this.drawAtomImposter,(Nl=new d.Geometry(!0)).imposter=!0,(ms=new d.Geometry(!0,!0)).imposter=!0,ms.sphereGeometry=new d.Geometry(!0),ms.sphereGeometry.imposter=!0,ms.drawnCaps={}):R.supportsAIA?(Ct=this.drawAtomInstanced,(Nl=new d.Geometry(!1,!0,!0)).instanced=!0,ms=new d.Geometry(!0)):(Nl=new d.Geometry(!0),ms=new d.Geometry(!0));var Si,_s={},gs=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for($=0,Ze=f.length;$<Ze;$++){var Yl=f[$];if(Yl&&Yl.style){for(Q in(Yl.clickable||Yl.hoverable)&&Yl.intersectionShape===void 0&&(Yl.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),_e={line:void 0,cross:void 0,stick:void 0,sphere:void 0})Yl.style[Q]?Yl.style[Q].opacity?_e[Q]=parseFloat(Yl.style[Q].opacity):_e[Q]=1:_e[Q]=void 0,_s[Q]?_e[Q]!=null&&_s[Q]!=_e[Q]&&(console.log("Warning: "+Q+" opacity is ambiguous"),_s[Q]=1):_s[Q]=_e[Q];Ct.call(this,Yl,Nl),this.drawAtomClickSphere(Yl),this.drawAtomCross(Yl,Vt),this.drawBondLines(Yl,f,Ye),this.drawBondSticks(Yl,f,ms),Yl.style.cartoon===void 0||Yl.style.cartoon.hidden||(Yl.style.cartoon.color!=="spectrum"||typeof Yl.resi!="number"||Yl.hetflag||(Yl.resi<gs[0]&&(gs[0]=Yl.resi),Yl.resi>gs[1]&&(gs[1]=Yl.resi)),lt.push(Yl))}}if(lt.length>0&&bp(it,lt,gs,this.defaultCartoonQuality),Nl&&Nl.vertices>0){Nl.initTypedArrays();var Dp=null,Op=null;Nl.imposter?Dp=new d.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):Nl.instanced?(Op=new d.Geometry(!0),o.drawSphere(Op,{x:0,y:0,z:0},1,new S.Color(.5,.5,.5)),Op.initTypedArrays(),Dp=new d.InstancedMaterial({sphereMaterial:new d.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:Op})):Dp=new d.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),_s.sphere<1&&_s.sphere>=0&&(Dp.transparent=!0,Dp.opacity=_s.sphere),Op=new d.Mesh(Nl,Dp),it.add(Op)}if(ms.vertices>0){var e0=null,Xp=null,_0=ms.sphereGeometry;_0&&_0.vertices!==void 0&&_0.vertices!=0||(_0=null),ms.initTypedArrays(),_0&&_0.initTypedArrays();var D0={ambient:0,vertexColors:!0,reflectivity:0};ms.imposter?(e0=new d.StickImposterMaterial(D0),Xp=new d.SphereImposterMaterial(D0)):(e0=new d.MeshLambertMaterial(D0),Xp=new d.MeshLambertMaterial(D0),e0.wireframe&&(ms.setUpWireframe(),_0&&_0.setUpWireframe())),_s.stick<1&&_s.stick>=0&&(e0.transparent=!0,e0.opacity=_s.stick,Xp.transparent=!0,Xp.opacity=_s.stick);var O0=new d.Mesh(ms,e0);if(it.add(O0),_0){var U0=new d.Mesh(_0,Xp);it.add(U0)}}for($ in Ye)if(Ye.hasOwnProperty($)){Si=$;var E0=new d.LineBasicMaterial({linewidth:Si,vertexColors:!0});_s.line<1&&_s.line>=0&&(E0.transparent=!0,E0.opacity=_s.line),Ye[$].initTypedArrays();var ym=new d.Line(Ye[$],E0,d.LineStyle.LinePieces);it.add(ym)}for($ in Vt)if(Vt.hasOwnProperty($)){Si=$;var mm=new d.LineBasicMaterial({linewidth:Si,vertexColors:!0});_s.cross<1&&_s.cross>=0&&(mm.transparent=!0,mm.opacity=_s.cross),Vt[$].initTypedArrays();var Vm=new d.Line(Vt[$],mm,d.LineStyle.LinePieces);it.add(Vm)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var Pm,a1=new d.Object3D;for(Pm=0;Pm<this.modelData.symmetries.length;Pm++){var h1=new d.Object3D;(h1=it.clone()).matrix.copy(this.modelData.symmetries[Pm]),h1.matrixAutoUpdate=!1,a1.add(h1)}return a1}return it}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(f){this.atoms=f.atoms,this.frames=f.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const f=this.modelData.cryst;this.modelData.cryst.matrix=(0,_.conversionMatrix3)(f.a,f.b,f.c,f.alpha,f.beta,f.gamma)}return this.modelData.cryst}return null}setCrystData(f,R,$,Q,Ze,_e){f=f||1,R=R||1,$=$||1,Q=Q||90,Ze=Ze||90,_e=_e||90;const it=(0,_.conversionMatrix3)(f,R,$,Q,Ze,_e);this.modelData.cryst={a:f,b:R,c:$,alpha:Q,beta:Ze,gamma:_e,matrix:it}}setCrystMatrix(f){f=f||new _.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:f}}getSymmetries(){return this.modelData.symmetries===void 0&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(f){f===void 0?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=f,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(f,R,$,Q){var Ze=R-f;return Ze<-$?R+Q:Ze>$?R-Q:R}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var f=this.box[0],R=this.box[1],$=this.box[2],Q=.9*f,Ze=.9*R,_e=.9*$,it=0;it<this.atomdfs.length;it++)for(var lt=this.atomdfs[it],Ye=1;Ye<lt.length;Ye++){var Vt=this.atoms[lt[Ye][0]],Ct=this.atoms[lt[Ye][1]];Vt.x=this.adjustCoord(Ct.x,Vt.x,Q,f),Vt.y=this.adjustCoord(Ct.y,Vt.y,Ze,R),Vt.z=this.adjustCoord(Ct.z,Vt.z,_e,$)}}setFrame(f){var R=this.getNumFrames();let $=this,Q=this.viewer;return new Promise(function(Ze,_e){if(R==0&&Ze(),(f<0||f>=R)&&(f=R-1),$.frames.url!=null){var it=$.frames.url;(0,C.getbin)(it+"/traj/frame/"+f+"/"+$.frames.path,void 0,"POST",void 0).then(function(lt){for(var Ye=new Float32Array(lt,44),Vt=0,Ct=0;Ct<$.atoms.length;Ct++)$.atoms[Ct].x=Ye[Vt++],$.atoms[Ct].y=Ye[Vt++],$.atoms[Ct].z=Ye[Vt++];$.box&&$.atomdfs&&$.adjustCoordinatesToBox(),Ze()}).catch(_e)}else $.atoms=$.frames[f],Ze();$.molObj=null,$.modelDatas&&f<$.modelDatas.length&&($.modelData=$.modelDatas[f],$.unitCellObjects&&Q&&(Q.removeUnitCell($),Q.addUnitCell($)))})}addFrame(f){this.frames.push(f)}vibrate(f=10,R=1,$=!1,Q){var Ze=0,_e=f;let it=this.viewer;$&&(Ze=-f,_e=f),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),Ze<_e&&(this.frames=[]),$&&(this.frames.origIndex=f);for(var lt=Ze;lt<_e;lt++){var Ye=[],Vt=this.frames.length;if(lt!=0||Q){for(var Ct=0;Ct<this.atoms.length;Ct++){var Nl=(0,C.getAtomProperty)(this.atoms[Ct],"dx"),ms=(0,C.getAtomProperty)(this.atoms[Ct],"dy"),Si=(0,C.getAtomProperty)(this.atoms[Ct],"dz"),_s=new _.Vector3(Nl,ms,Si),gs=new _.Vector3(this.atoms[Ct].x,this.atoms[Ct].y,this.atoms[Ct].z),Yl=lt*R/f;_s.multiplyScalar(Yl),gs.add(_s);var Dp={};for(var Op in this.atoms[Ct])Dp[Op]=this.atoms[Ct][Op];if(Dp.x=gs.x,Dp.y=gs.y,Dp.z=gs.z,Ye.push(Dp),it&&Q){var e0=(0,C.extend)({},Q),Xp=new _.Vector3(Nl,ms,Si);if(Xp.multiplyScalar(R),Xp.add(gs),e0.start=gs,e0.end=Xp,e0.frame=Vt,!e0.color){var _0=Dp.style.sphere;_0||(_0=Dp.style.stick),_0||(_0=Dp.style.line),e0.color=(0,C.getColorFromStyle)(Dp,_0)}it.addArrow(e0)}}this.frames.push(Ye)}else this.frames.push(this.atoms)}}setAtomDefaults(f){for(let R=0;R<f.length;R++){let $=f[R];$&&($.style=$.style||(0,C.deepCopy)(ag.defaultAtomStyle),$.color=$.color||this.ElementColors[$.elem]||this.defaultColor,$.model=this.id,($.clickable||$.hoverable)&&($.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(f,R,$={}){var Q=ag.parseMolData(f,R,$);this.dontDuplicateAtoms=!$.duplicateAssemblyAtoms;var Ze=Q.modelData;if(Ze&&(Array.isArray(Ze)?(this.modelData=Ze[0],$.frames&&(this.modelDatas=Ze)):this.modelData=Ze),Q.box?this.box=Q.box:this.box=null,this.frames.length==0){for(let it=0;it<Q.length;it++)Q[it].length!=0&&this.frames.push(Q[it]);this.frames[0]&&(this.atoms=this.frames[0])}else if($.frames)for(let it=0;it<Q.length;it++)this.frames.push(Q[it]);else for(var _e=0;_e<Q.length;_e++)this.addAtoms(Q[_e]);for(let it=0;it<this.frames.length;it++)this.setAtomDefaults(this.frames[it]);$.vibrate&&$.vibrate.frames&&$.vibrate.amplitude&&this.vibrate($.vibrate.frames,$.vibrate.amplitude),$.style&&this.setStyle({},$.style)}setDontDuplicateAtoms(f){this.dontDuplicateAtoms=f}setModelData(f){this.modelData=f}propertyMatches(f,R){if(f==R)return!0;if(typeof R=="string"&&typeof f=="number"){var $=R.match(/(-?\d+)\s*-\s*(-?\d+)/);if($){var Q=parseInt($[1]),Ze=parseInt($[2]);if($&&f>=Q&&f<=Ze)return!0}}return!1}static deepCopyAndCache(f,R){if(typeof f!="object"||f==null||f instanceof ag||f.__cache_created)return f;const $={};for(const Q in f){const Ze=f[Q];if(Array.isArray(Ze)){$[Q]=[];for(let _e=0;_e<Ze.length;_e++)$[Q].push(ag.deepCopyAndCache(Ze[_e],R))}else $[Q]=typeof Ze=="object"&&Q!="properties"&&Q!="model"?ag.deepCopyAndCache(Ze,R):Ze;if(Q=="and"||Q=="or"){const _e=[];for(const it of $[Q]){const lt=new Set;for(const Ye of R.selectedAtoms(it))lt.add(Ye.index);_e.push(lt)}if(Q=="and"){const it=function(Ye,Vt){const Ct=new Set;for(const Nl of Vt)Ye.has(Nl)&&Ct.add(Nl);return Ct};let lt=new Set(_e[0]);for(const Ye of _e.splice(1))lt=it(lt,Ye);$[Q].__cached_results=lt}else if(Q=="or"){const it=new Set;for(const lt of _e)for(const Ye of lt)it.add(Ye);$[Q].__cached_results=it}}}return $.__cache_created=!0,$}atomIsSelected(f,R){if(R===void 0)return!0;var $=!!R.invert,Q=!0;for(var Ze in R)if(Ze=="and"||Ze=="or"||Ze=="not"){if(Ze=="not"){if(this.atomIsSelected(f,R[Ze])){Q=!1;break}}else if(R[Ze].__cached_results===void 0&&(R=ag.deepCopyAndCache(R,this)),!(Q=R[Ze].__cached_results.has(f.index)))break}else if(Ze==="predicate"){if(!R.predicate(f)){Q=!1;break}}else if(Ze=="properties"&&f[Ze]){for(var _e in R.properties)if(!_e.startsWith("__cache")){if(f.properties[_e]===void 0){Q=!1;break}if(f.properties[_e]!=R.properties[_e]){Q=!1;break}}}else if(Ze=="model"){let Ye=R.model;if(typeof Ye=="number"&&Ye<0&&(Ye=this.viewer.getNextModelId()+Ye),Array.isArray(Ye)){let Vt=!1;for(let Ct=0;Ct<Ye.length;Ct++)if(Ye[Ct]==this||Ye[Ct]==this.id){Vt=!0;break}if(!Vt){Q=!1;break}}else if(Ye!=this&&Ye!=this.id){Q=!1;break}}else if(R.hasOwnProperty(Ze)&&!ag.ignoredKeys.has(Ze)&&!Ze.startsWith("__cache")){if(f[Ze]===void 0){Q=!1;break}let Ye=!1;if(Ze==="bonds"){if(R[Ze]!=f.bonds.length){Q=!1;break}}else if(Array.isArray(R[Ze])){var it=R[Ze],lt=f[Ze];for(let Vt=0;Vt<it.length;Vt++)if(this.propertyMatches(lt,it[Vt])){Ye=!0;break}if(!Ye){Q=!1;break}}else{let Vt=R[Ze];if(!this.propertyMatches(f[Ze],Vt)){Q=!1;break}}}return $?!Q:Q}static squaredDistance(f,R){var $=R.x-f.x,Q=R.y-f.y,Ze=R.z-f.z;return $*$+Q*Q+Ze*Ze}expandAtomList(f,R){if(R<=0)return f;for(var $=(0,C.getExtent)(f,void 0),Q=[[],[],[]],Ze=0;Ze<3;Ze++)Q[0][Ze]=$[0][Ze]-R,Q[1][Ze]=$[1][Ze]+R,Q[2][Ze]=$[2][Ze];var _e=[];for(let Vt=0;Vt<this.atoms.length;Vt++){var it=this.atoms[Vt].x,lt=this.atoms[Vt].y,Ye=this.atoms[Vt].z;it>=Q[0][0]&&it<=Q[1][0]&&lt>=Q[0][1]&&lt<=Q[1][1]&&Ye>=Q[0][2]&&Ye<=Q[1][2]&&(it>=$[0][0]&&it<=$[1][0]&&lt>=$[0][1]&&lt<=$[1][1]&&Ye>=$[0][2]&&Ye<=$[1][2]||_e.push(this.atoms[Vt]))}return _e}static getFloat(f){return typeof f=="number"?f:parseFloat(f)}selectedAtoms(f,R){var $=[];f=ag.deepCopyAndCache(f||{},this),R||(R=this.atoms);for(var Q=R.length,Ze=0;Ze<Q;Ze++){var _e=R[Ze];_e&&this.atomIsSelected(_e,f)&&$.push(_e)}if(f.hasOwnProperty("expand")){const Dp=ag.getFloat(f.expand);let Op=this.expandAtomList($,Dp),e0=$.length;const Xp=Dp*Dp;for(let _0=0;_0<Op.length;_0++)for(let D0=0;D0<e0;D0++){var it=ag.squaredDistance(Op[_0],$[D0]);it<Xp&&it>0&&$.push(Op[_0])}}if(f.hasOwnProperty("within")&&f.within.hasOwnProperty("sel")&&f.within.hasOwnProperty("distance")){var lt=this.selectedAtoms(f.within.sel,this.atoms),Ye={};const Dp=ag.getFloat(f.within.distance),Op=Dp*Dp;for(let e0=0;e0<lt.length;e0++)for(let Xp=0;Xp<$.length;Xp++){let _0=ag.squaredDistance(lt[e0],$[Xp]);_0<Op&&_0>0&&(Ye[Xp]=1)}var Vt=[];if(f.within.invert)for(let e0=0;e0<$.length;e0++)Ye[e0]||Vt.push($[e0]);else for(let e0 in Ye)Vt.push($[e0]);$=Vt}if(f.hasOwnProperty("byres")){var Ct={},Nl=[],ms=[];for(let Dp=0;Dp<$.length;Dp++){let Op=$[Dp];var Si=Op.chain,_s=Op.resi;if(Ct[Si]===void 0&&(Ct[Si]={}),Op.hasOwnProperty("resi")&&Ct[Si][_s]===void 0){for(Ct[Si][_s]=!0,ms.push(Op);ms.length>0;)if(Op=ms.pop(),Si=Op.chain,_s=Op.resi,Nl[Op.index]===void 0){Nl[Op.index]=!0;for(var gs=0;gs<Op.bonds.length;gs++){var Yl=this.atoms[Op.bonds[gs]];Nl[Yl.index]===void 0&&Yl.hasOwnProperty("resi")&&Yl.chain==Si&&Yl.resi==_s&&(ms.push(Yl),$.push(Yl))}}}}}return $}addAtoms(f){this.molObj=null;var R,$=this.atoms.length,Q=[];for(R=0;R<f.length;R++)f[R].index===void 0&&(f[R].index=R),f[R].serial===void 0&&(f[R].serial=R),Q[f[R].index]=$+R;for(R=0;R<f.length;R++){var Ze=f[R],_e=Q[Ze.index],it=(0,C.extend)({},Ze);it.index=_e,it.bonds=[],it.bondOrder=[],it.model=this.id,it.style=it.style||(0,C.deepCopy)(ag.defaultAtomStyle),it.color===void 0&&(it.color=this.ElementColors[it.elem]||this.defaultColor);for(var lt=Ze.bonds?Ze.bonds.length:0,Ye=0;Ye<lt;Ye++){var Vt=Q[Ze.bonds[Ye]];Vt!==void 0&&(it.bonds.push(Vt),it.bondOrder.push(Ze.bondOrder?Ze.bondOrder[Ye]:1))}this.atoms.push(it)}}assignBonds(){(0,xs.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(f){this.molObj=null;var R,$=[];for(R=0;R<f.length;R++)$[f[R].index]=!0;var Q=[];for(R=0;R<this.atoms.length;R++){var Ze=this.atoms[R];$[Ze.index]||Q.push(Ze)}this.atoms=[],this.addAtoms(Q)}setStyle(f,R,$){R===void 0&&$===void 0&&(R=f,f={}),typeof R=="string"&&(R=(0,C.specStringToObject)(R));var Q=!1,Ze=this,_e=function(lt){var Ye=Ze.selectedAtoms(f,lt);for(let Vt=0;Vt<lt.length;Vt++)lt[Vt]&&(lt[Vt].capDrawn=!1);for(let Vt=0;Vt<Ye.length;Vt++){Q=!0,(Ye[Vt].clickable||Ye[Vt].hoverable)&&(Ye[Vt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),$||(Ye[Vt].style={});for(let Ct in R)R.hasOwnProperty(Ct)&&(Ye[Vt].style[Ct]=Ye[Vt].style[Ct]||{},Object.assign(Ye[Vt].style[Ct],R[Ct]))}};if(f.frame!==void 0&&f.frame<this.frames.length){let lt=f.frame;lt<0&&(lt=this.frames.length+lt),_e(this.frames[lt])}else{_e(this.atoms);for(var it=0;it<this.frames.length;it++)this.frames[it]!==this.atoms&&_e(this.frames[it])}Q&&(this.molObj=null)}setClickable(f,R,$){if(R=!!R,($=(0,C.makeFunction)($))!==null){var Q=this.selectedAtoms(f,this.atoms),Ze=Q.length;for(let _e=0;_e<Ze;_e++)Q[_e].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Q[_e].clickable=R,$&&(Q[_e].callback=$);Ze>0&&(this.molObj=null)}else console.log("Callback is not a function")}setHoverable(f,R,$,Q){if(R=!!R,$=(0,C.makeFunction)($),Q=(0,C.makeFunction)(Q),$!==null)if(Q!==null){var Ze=this.selectedAtoms(f,this.atoms),_e=Ze.length;for(let it=0;it<_e;it++)Ze[it].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Ze[it].hoverable=R,$&&(Ze[it].hover_callback=$),Q&&(Ze[it].unhover_callback=Q);_e>0&&(this.molObj=null)}else console.log("Unhover_callback is not a function");else console.log("Hover_callback is not a function")}enableContextMenu(f,R){var $;R=!!R;var Q=this.selectedAtoms(f,this.atoms),Ze=Q.length;for($=0;$<Ze;$++)Q[$].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Q[$].contextMenuEnabled=R;Ze>0&&(this.molObj=null)}setColorByElement(f,R){if(this.molObj===null||!ag.sameObj(R,this.lastColors)){this.lastColors=R;var $=this.selectedAtoms(f,$);$.length>0&&(this.molObj=null);for(var Q=0;Q<$.length;Q++){var Ze=$[Q];R[Ze.elem]!==void 0&&(Ze.color=R[Ze.elem])}}}setColorByProperty(f,R,$,Q){var Ze,_e,it=this.selectedAtoms(f,it);for(this.lastColors=null,it.length>0&&(this.molObj=null),typeof $=="string"&&A.Gradient.builtinGradients[$]!==void 0&&($=new A.Gradient.builtinGradients[$]),Q||(Q=$.range()),Q||(Q=(0,C.getPropertyRange)(it,R)),Ze=0;Ze<it.length;Ze++)_e=it[Ze],(0,C.getAtomProperty)(_e,R)!=null&&(_e.color=$.valueToHex(parseFloat(_e.properties[R]),Q))}setColorByFunction(f,R){var $=this.selectedAtoms(f,$);if(typeof R=="function"){this.lastColors=null,$.length>0&&(this.molObj=null);for(let Q=0;Q<$.length;Q++){let Ze=$[Q];Ze.color=R(Ze)}}}toCDObject(f=!1){var R={a:[],b:[]};f&&(R.s=[]);for(let Q=0;Q<this.atoms.length;Q++){let Ze={},_e=this.atoms[Q];if(Ze.x=_e.x,Ze.y=_e.y,Ze.z=_e.z,_e.elem!="C"&&(Ze.l=_e.elem),f){for(var $=0;$<R.s.length&&JSON.stringify(_e.style)!==JSON.stringify(R.s[$]);)$++;$===R.s.length&&R.s.push(_e.style),$!==0&&(Ze.s=$)}R.a.push(Ze);for(let it=0;it<_e.bonds.length;it++){let lt=Q,Ye=_e.bonds[it];if(lt>=Ye)continue;let Vt={b:lt,e:Ye},Ct=_e.bondOrder[it];Ct!=1&&(Vt.o=Ct),R.b.push(Vt)}}return R}globj(f,R){(this.molObj===null||R.regen)&&(this.molObj=this.createMolObj(this.atoms,R),this.renderedMolObj&&(f.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),f.add(this.renderedMolObj))}exportVRML(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}removegl(f){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),f.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(f,R,$){let Q=this.selectedAtoms(R),Ze=this.viewer,_e=(0,C.deepCopy)($);for(let lt=0;lt<Q.length;lt++){let Ye=Q[lt];var it=null;Ye[f]!==void 0?it=String(Ye[f]):Ye.properties[f]!==void 0&&(it=String(Ye.properties[f])),it!=null&&(_e.position=Ye,Ze.addLabel(it,_e))}}addResLabels(f,R,$=!1){let Q=this.viewer;var Ze=[],_e=function(lt,Ye){for(var Vt=lt.selectedAtoms(f,Vt),Ct={},Nl=0;Nl<Vt.length;Nl++){var ms=Vt[Nl],Si=ms.chain,_s=ms.resn+""+ms.resi;Ct[Si]||(Ct[Si]={}),Ct[Si][_s]||(Ct[Si][_s]=[]),Ct[Si][_s].push(ms)}var gs=(0,C.deepCopy)(R);for(let Dp in Ct)if(Ct.hasOwnProperty(Dp)){var Yl=Ct[Dp];for(let Op in Yl)if(Yl.hasOwnProperty(Op)){let e0=Yl[Op],Xp=new _.Vector3(0,0,0);for(let D0=0;D0<e0.length;D0++){let O0=e0[D0];Xp.x+=O0.x,Xp.y+=O0.y,Xp.z+=O0.z}Xp.divideScalar(e0.length),gs.position=Xp,gs.frame=Ye;let _0=Q.addLabel(Op,gs,void 0,!0);Ze.push(_0)}}};if($){var it=this.getNumFrames();let lt=this.atoms;for(let Ye=0;Ye<it;Ye++)this.frames[Ye]&&(this.atoms=this.frames[Ye],_e(this,Ye));this.atoms=lt}else _e(this);return Ze}setupDFS(){this.atomdfs=[];var f=this,R=new Int8Array(this.atoms.length);R.fill(0);for(var $=function(_e,it,lt){lt.push([_e,it]);var Ye=f.atoms[_e];R[_e]=1;for(var Vt=0;Vt<Ye.bonds.length;Vt++){var Ct=Ye.bonds[Vt];f.atoms[Ct]&&!R[Ct]&&$(Ct,_e,lt)}},Q=0;Q<this.atoms.length;Q++)if(this.atoms[Q]&&!R[Q]){var Ze=[];$(Q,-1,Ze),this.atomdfs.push(Ze)}}setCoordinatesFromURL(f,R){this.frames=[];var $=this;return this.box&&this.setupDFS(),f.startsWith("http")||(f="http://"+f),(0,C.get)(f+"/traj/numframes/"+R,function(Q){if(!isNaN(parseInt(Q)))return $.frames.push($.atoms),$.frames.numFrames=Q,$.frames.url=f,$.frames.path=R,$.setFrame(0)})}setCoordinates(f,R){if(!f)return[];if(/\.gz$/.test(R=R||"")){R=R.replace(/\.gz$/,"");try{f=(0,C.inflateString)(f)}catch(Vt){console.log(Vt)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""}.hasOwnProperty(R)){this.frames=[];for(var $=this.atoms.length,Q=ag.parseCrd(f,R),Ze=0;Ze<Q.length;){for(var _e=[],it=0;it<$;it++){var lt={};for(var Ye in this.atoms[it])lt[Ye]=this.atoms[it][Ye];_e[it]=lt,_e[it].x=Q[Ze++],_e[it].y=Q[Ze++],_e[it].z=Q[Ze++]}this.frames.push(_e)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(f){}static parseCrd(f,R){var $=[],Q=0;if(R=="pdb")for(var Ze=f.indexOf(`
ATOM`);Ze!=-1;){for(;f.slice(Ze,Ze+5)==`
ATOM`||f.slice(Ze,Ze+7)==`
HETATM`;)$[Q++]=parseFloat(f.slice(Ze+31,Ze+39)),$[Q++]=parseFloat(f.slice(Ze+39,Ze+47)),$[Q++]=parseFloat(f.slice(Ze+47,Ze+55)),Ze=f.indexOf(`
`,Ze+54),f.slice(Ze,Ze+4)==`
TER`&&(Ze=f.indexOf(`
`,Ze+5));Ze=f.indexOf(`
ATOM`,Ze)}else if(R=="netcdf"){var _e=new vv(f);$=[].concat.apply([],_e.getDataVariable("coordinates"))}else{if(R=="array"||Array.isArray(f))return f.flat(2);{let it=f.indexOf(`
`);R=="inpcrd"&&(it=f.indexOf(`
`,it+1)),$=(f=f.slice(it+1)).match(/\S+/g).map(parseFloat)}}return $}static parseMolData(f,R="",$){if(!f)return[];if(/\.gz$/.test(R)){R=R.replace(/\.gz$/,"");try{f=R.match(/bcif/i)?(0,C.inflateString)(f,!1):(0,C.inflateString)(f)}catch(Q){console.log(Q)}}return vm[R]===void 0&&(R=R.split(".").pop(),vm[R]===void 0&&(console.log("Unknown format: "+R),R=f instanceof Uint8Array?"bcif":f.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":f.match(/^data_/gm)&&f.match(/^loop_/gm)?"cif":f.match(/^HETATM/gm)||f.match(/^ATOM/gm)?"pdb":f.match(/ITEM: TIMESTEP/gm)?"lammpstrj":f.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":f.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+R))),(0,vm[R])(f,$)}}var _v;ag.defaultAtomStyle={line:{}},ag.defaultlineWidth=1,ag.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},ag.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"]),(function(jp){jp[jp.VDW=1]="VDW",jp[jp.MS=2]="MS",jp[jp.SAS=3]="SAS",jp[jp.SES=4]="SES"})(_v||(_v={}));var Mv=!1;function c0(jp){Mv=jp}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(Mv=!0);class F0{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(f,R,$,Q){let Ze=!!Q.fulltable,_e=Q.hasOwnProperty("origin")&&Q.origin.hasOwnProperty("x")?Q.origin:{x:0,y:0,z:0},it=!!Q.voxel,lt=Q.matrix,Ye=Q.nX||0,Vt=Q.nY||0,Ct=Q.nZ||0,Nl=Q.scale||1,ms=null;ms=Q.unitCube?Q.unitCube:{x:Nl,y:Nl,z:Nl};let Si,_s,gs=new Int32Array(Ye*Vt*Ct);for(Si=0,_s=gs.length;Si<_s;++Si)gs[Si]=-1;let Yl=function(Xp,_0,D0,O0,U0,E0){let ym={x:0,y:0,z:0},mm=U0;if(!(O0&1<<U0)&&O0&1<<E0&&(mm=E0),1&mm&&D0++,2&mm&&_0++,4&mm&&Xp++,lt){let Pm=new _.Vector3(Xp,_0,D0);Pm=Pm.applyMatrix4(lt),ym={x:Pm.x,y:Pm.y,z:Pm.z}}else ym.x=_e.x+ms.x*Xp,ym.y=_e.y+ms.y*_0,ym.z=_e.z+ms.z*D0;let Vm=(Vt*Xp+_0)*Ct+D0;return it?(R.push(ym),R.length-1):(gs[Vm]<0&&(gs[Vm]=R.length,R.push(ym)),gs[Vm])},Dp=new Int32Array(12),Op=Ze?this.edgeTable2:this.edgeTable,e0=Ze?this.triTable2:this.triTable;for(Si=0;Si<Ye-1;++Si)for(let Xp=0;Xp<Vt-1;++Xp)for(let _0=0;_0<Ct-1;++_0){let D0=0;for(let E0=0;E0<8;++E0)D0|=!!(f[(Vt*(Si+((4&E0)>>2))+Xp+((2&E0)>>1))*Ct+_0+(1&E0)]&this.ISDONE)<<E0;if(D0===0||D0===255)continue;let O0=Op[D0];if(O0===0)continue;let U0=e0[D0];1&O0&&(Dp[0]=Yl(Si,Xp,_0,D0,0,1)),2&O0&&(Dp[1]=Yl(Si,Xp,_0,D0,1,3)),4&O0&&(Dp[2]=Yl(Si,Xp,_0,D0,3,2)),8&O0&&(Dp[3]=Yl(Si,Xp,_0,D0,2,0)),16&O0&&(Dp[4]=Yl(Si,Xp,_0,D0,4,5)),32&O0&&(Dp[5]=Yl(Si,Xp,_0,D0,5,7)),64&O0&&(Dp[6]=Yl(Si,Xp,_0,D0,7,6)),128&O0&&(Dp[7]=Yl(Si,Xp,_0,D0,6,4)),256&O0&&(Dp[8]=Yl(Si,Xp,_0,D0,0,4)),512&O0&&(Dp[9]=Yl(Si,Xp,_0,D0,1,5)),1024&O0&&(Dp[10]=Yl(Si,Xp,_0,D0,3,7)),2048&O0&&(Dp[11]=Yl(Si,Xp,_0,D0,2,6));for(let E0=0;E0<U0.length;E0+=3){let ym=Dp[U0[E0]],mm=Dp[U0[E0+1]],Vm=Dp[U0[E0+2]];it&&E0>=3&&(R.push(R[ym]),ym=R.length-1,R.push(R[mm]),mm=R.length-1,R.push(R[Vm]),Vm=R.length-1),$.push(ym),$.push(mm),$.push(Vm)}}}laplacianSmooth(f,R,$){let Q,Ze,_e,it,lt,Ye=new Array(R.length);for(Q=0,Ze=R.length;Q<Ze;Q++)Ye[Q]={x:0,y:0,z:0};let Vt,Ct=new Array(20);for(Q=0;Q<20;Q++)Ct[Q]=new Array(R.length);for(Q=0,Ze=R.length;Q<Ze;Q++)Ct[0][Q]=0;for(Q=0,Ze=$.length/3;Q<Ze;Q++){let ms=3*Q,Si=3*Q+1,_s=3*Q+2;for(Vt=!0,_e=0,it=Ct[0][$[ms]];_e<it;_e++)if($[Si]==Ct[_e+1][$[ms]]){Vt=!1;break}for(Vt&&(Ct[0][$[ms]]++,Ct[Ct[0][$[ms]]][$[ms]]=$[Si]),Vt=!0,_e=0,it=Ct[0][$[ms]];_e<it;_e++)if($[_s]==Ct[_e+1][$[ms]]){Vt=!1;break}for(Vt&&(Ct[0][$[ms]]++,Ct[Ct[0][$[ms]]][$[ms]]=$[_s]),Vt=!0,_e=0,it=Ct[0][$[Si]];_e<it;_e++)if($[ms]==Ct[_e+1][$[Si]]){Vt=!1;break}for(Vt&&(Ct[0][$[Si]]++,Ct[Ct[0][$[Si]]][$[Si]]=$[ms]),Vt=!0,_e=0,it=Ct[0][$[Si]];_e<it;_e++)if($[_s]==Ct[_e+1][$[Si]]){Vt=!1;break}for(Vt&&(Ct[0][$[Si]]++,Ct[Ct[0][$[Si]]][$[Si]]=$[_s]),Vt=!0,_e=0;_e<Ct[0][$[_s]];_e++)if($[ms]==Ct[_e+1][$[_s]]){Vt=!1;break}for(Vt&&(Ct[0][$[_s]]++,Ct[Ct[0][$[_s]]][$[_s]]=$[ms]),Vt=!0,_e=0,it=Ct[0][$[_s]];_e<it;_e++)if($[Si]==Ct[_e+1][$[_s]]){Vt=!1;break}Vt&&(Ct[0][$[_s]]++,Ct[Ct[0][$[_s]]][$[_s]]=$[Si])}let Nl=.5;for(lt=0;lt<f;lt++){for(Q=0,Ze=R.length;Q<Ze;Q++)if(Ct[0][Q]<3)Ye[Q].x=R[Q].x,Ye[Q].y=R[Q].y,Ye[Q].z=R[Q].z;else if(Ct[0][Q]==3||Ct[0][Q]==4){for(Ye[Q].x=0,Ye[Q].y=0,Ye[Q].z=0,_e=0,it=Ct[0][Q];_e<it;_e++)Ye[Q].x+=R[Ct[_e+1][Q]].x,Ye[Q].y+=R[Ct[_e+1][Q]].y,Ye[Q].z+=R[Ct[_e+1][Q]].z;Ye[Q].x+=Nl*R[Q].x,Ye[Q].y+=Nl*R[Q].y,Ye[Q].z+=Nl*R[Q].z,Ye[Q].x/=Nl+Ct[0][Q],Ye[Q].y/=Nl+Ct[0][Q],Ye[Q].z/=Nl+Ct[0][Q]}else{for(Ye[Q].x=0,Ye[Q].y=0,Ye[Q].z=0,_e=0,it=Ct[0][Q];_e<it;_e++)Ye[Q].x+=R[Ct[_e+1][Q]].x,Ye[Q].y+=R[Ct[_e+1][Q]].y,Ye[Q].z+=R[Ct[_e+1][Q]].z;Ye[Q].x+=1*R[Q].x,Ye[Q].y+=1*R[Q].y,Ye[Q].z+=1*R[Q].z,Ye[Q].x/=1+Ct[0][Q],Ye[Q].y/=1+Ct[0][Q],Ye[Q].z/=1+Ct[0][Q]}for(Q=0,Ze=R.length;Q<Ze;Q++)R[Q].x=Ye[Q].x,R[Q].y=Ye[Q].y,R[Q].z=Ye[Q].z}}}let Z=new F0;class Fl{constructor(f,R,$){this.data=new Int32Array(f*R*$*3),this.width=R,this.height=$}set(f,R,$,Q){let Ze=3*((f*this.width+R)*this.height+$);this.data[Ze]=Q.ix,this.data[Ze+1]=Q.iy,this.data[Ze+2]=Q.iz}get(f,R,$){let Q=3*((f*this.width+R)*this.height+$);return{ix:this.data[Q],iy:this.data[Q+1],iz:this.data[Q+2]}}}class Wl{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],Wl.MarchingCube||(Wl.MarchingCube=new F0)}getVDWIndex(f){return f.elem&&this.vdwRadii[f.elem]!==void 0?f.elem:"X"}getFacesAndVertices(f){let R={};for(let Ze=0,_e=f.length;Ze<_e;Ze++)R[f[Ze]]=!0;let $=this.verts;for(let Ze=0,_e=$.length;Ze<_e;Ze++)$[Ze].x=$[Ze].x/this.scaleFactor-this.ptranx,$[Ze].y=$[Ze].y/this.scaleFactor-this.ptrany,$[Ze].z=$[Ze].z/this.scaleFactor-this.ptranz;let Q=[];for(let Ze=0,_e=this.faces.length;Ze<_e;Ze+=3){let it=this.faces[Ze],lt=this.faces[Ze+1],Ye=this.faces[Ze+2],Vt=$[it].atomid,Ct=$[lt].atomid,Nl=$[Ye].atomid,ms=Vt;Ct<ms&&(ms=Ct),Nl<ms&&(ms=Nl),R[ms]&&it!==lt&&lt!==Ye&&it!==Ye&&(Q.push(it),Q.push(lt),Q.push(Ye))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:$,faces:Q}}initparm(f,R,$){$>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let Q=1/this.scaleFactor*5.5;this.pminx=f[0][0],this.pmaxx=f[1][0],this.pminy=f[0][1],this.pmaxy=f[1][1],this.pminz=f[0][2],this.pmaxz=f[1][2],R?(this.pminx-=this.probeRadius+Q,this.pminy-=this.probeRadius+Q,this.pminz-=this.probeRadius+Q,this.pmaxx+=this.probeRadius+Q,this.pmaxy+=this.probeRadius+Q,this.pmaxz+=this.probeRadius+Q):(this.pminx-=Q,this.pminy-=Q,this.pminz-=Q,this.pmaxx+=Q,this.pmaxy+=Q,this.pmaxz+=Q),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(R),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(f){let R={};for(const $ in this.vdwRadii){let Q=this.vdwRadii[$];R[$]=f?(Q+this.probeRadius)*this.scaleFactor+.5:Q*this.scaleFactor+.5;let Ze=R[$]*R[$];this.widxz[$]=Math.floor(R[$])+1,this.depty[$]=new Int32Array(this.widxz[$]*this.widxz[$]);let _e=0;for(let it=0;it<this.widxz[$];it++)for(let lt=0;lt<this.widxz[$];lt++){let Ye=it*it+lt*lt;if(Ye>Ze)this.depty[$][_e]=-1;else{let Vt=Math.sqrt(Ze-Ye);this.depty[$][_e]=Math.floor(Vt)}_e++}}}fillvoxels(f,R){for(let $=0,Q=this.vpBits.length;$<Q;$++)this.vpBits[$]=0,this.vpDistance[$]=-1,this.vpAtomID[$]=-1;for(let $ in R){let Q=f[R[$]];Q!==void 0&&this.fillAtom(Q,f)}for(let $=0,Q=this.vpBits.length;$<Q;$++)this.vpBits[$]&this.INOUT&&(this.vpBits[$]|=this.ISDONE)}fillAtom(f,R){let $=Math.floor(.5+this.scaleFactor*(f.x+this.ptranx)),Q=Math.floor(.5+this.scaleFactor*(f.y+this.ptrany)),Ze=Math.floor(.5+this.scaleFactor*(f.z+this.ptranz)),_e=this.getVDWIndex(f),it=0,lt=this.pWidth*this.pHeight;for(let Ye=0,Vt=this.widxz[_e];Ye<Vt;Ye++)for(let Ct=0;Ct<Vt;Ct++){if(this.depty[_e][it]!=-1){for(let Nl=-1;Nl<2;Nl++)for(let ms=-1;ms<2;ms++)for(let Si=-1;Si<2;Si++)if(Nl!==0&&ms!==0&&Si!==0){let _s=Nl*Ye,gs=Si*Ct;for(let Yl=0;Yl<=this.depty[_e][it];Yl++){let Dp=Yl*ms,Op=$+_s,e0=Q+Dp,Xp=Ze+gs;if(Op<0||e0<0||Xp<0||Op>=this.pLength||e0>=this.pWidth||Xp>=this.pHeight)continue;let _0=Op*lt+e0*this.pHeight+Xp;if(this.vpBits[_0]&this.INOUT){let D0=R[this.vpAtomID[_0]];if(D0.serial!=f.serial){let O0=$+_s-Math.floor(.5+this.scaleFactor*(D0.x+this.ptranx)),U0=Q+Dp-Math.floor(.5+this.scaleFactor*(D0.y+this.ptrany)),E0=Ze+gs-Math.floor(.5+this.scaleFactor*(D0.z+this.ptranz));_s*_s+Dp*Dp+gs*gs<O0*O0+U0*U0+E0*E0&&(this.vpAtomID[_0]=f.serial)}}else this.vpBits[_0]|=this.INOUT,this.vpAtomID[_0]=f.serial}}}it++}}fillvoxelswaals(f,R){for(let $=0,Q=this.vpBits.length;$<Q;$++)this.vpBits[$]&=~this.ISDONE;for(let $ in R){let Q=f[R[$]];Q!==void 0&&this.fillAtomWaals(Q,f)}}fillAtomWaals(f,R){let $=0,Q=Math.floor(.5+this.scaleFactor*(f.x+this.ptranx)),Ze=Math.floor(.5+this.scaleFactor*(f.y+this.ptrany)),_e=Math.floor(.5+this.scaleFactor*(f.z+this.ptranz)),it=this.getVDWIndex(f),lt=this.pWidth*this.pHeight;for(let Ye=0,Vt=this.widxz[it];Ye<Vt;Ye++)for(let Ct=0;Ct<Vt;Ct++){if(this.depty[it][$]!=-1){for(let Nl=-1;Nl<2;Nl++)for(let ms=-1;ms<2;ms++)for(let Si=-1;Si<2;Si++)if(Nl!==0&&ms!==0&&Si!==0){let _s=Nl*Ye,gs=Si*Ct;for(let Yl=0;Yl<=this.depty[it][$];Yl++){let Dp=Yl*ms,Op=Q+_s,e0=Ze+Dp,Xp=_e+gs;if(Op<0||e0<0||Xp<0||Op>=this.pLength||e0>=this.pWidth||Xp>=this.pHeight)continue;let _0=Op*lt+e0*this.pHeight+Xp;if(this.vpBits[_0]&this.ISDONE){let D0=R[this.vpAtomID[_0]];if(D0.serial!=f.serial){let O0=Q+_s-Math.floor(.5+this.scaleFactor*(D0.x+this.ptranx)),U0=Ze+Dp-Math.floor(.5+this.scaleFactor*(D0.y+this.ptrany)),E0=_e+gs-Math.floor(.5+this.scaleFactor*(D0.z+this.ptranz));_s*_s+Dp*Dp+gs*gs<O0*O0+U0*U0+E0*E0&&(this.vpAtomID[_0]=f.serial)}}else this.vpBits[_0]|=this.ISDONE,this.vpAtomID[_0]=f.serial}}}$++}}buildboundary(){let f=this.pWidth*this.pHeight;for(let R=0;R<this.pLength;R++)for(let $=0;$<this.pHeight;$++)for(let Q=0;Q<this.pWidth;Q++){let Ze=R*f+Q*this.pHeight+$;if(this.vpBits[Ze]&this.INOUT){let _e=0;for(;_e<26;){let it=R+this.nb[_e][0],lt=$+this.nb[_e][2],Ye=Q+this.nb[_e][1];if(it>-1&&it<this.pLength&&Ye>-1&&Ye<this.pWidth&&lt>-1&&lt<this.pHeight&&!(this.vpBits[it*f+Ye*this.pHeight+lt]&this.INOUT)){this.vpBits[Ze]|=this.ISBOUND;break}_e++}}}}fastdistancemap(){let f,R=new Fl(this.pLength,this.pWidth,this.pHeight),$=this.pWidth*this.pHeight,Q=this.cutRadius*this.cutRadius,Ze=[],_e=[];for(let Ye=0;Ye<this.pLength;Ye++)for(let Vt=0;Vt<this.pWidth;Vt++)for(let Ct=0;Ct<this.pHeight;Ct++)if(f=Ye*$+Vt*this.pHeight+Ct,this.vpBits[f]&=~this.ISDONE,this.vpBits[f]&this.INOUT&&this.vpBits[f]&this.ISBOUND){let Nl={ix:Ye,iy:Vt,iz:Ct};R.set(Ye,Vt,Ct,Nl),Ze.push(Nl),this.vpDistance[f]=0,this.vpBits[f]|=this.ISDONE,this.vpBits[f]&=~this.ISBOUND}do{_e=this.fastoneshell(Ze,R),Ze=[];for(let Ye=0,Vt=_e.length;Ye<Vt;Ye++)f=$*_e[Ye].ix+this.pHeight*_e[Ye].iy+_e[Ye].iz,this.vpBits[f]&=~this.ISBOUND,this.vpDistance[f]<=1.0404*Q&&Ze.push({ix:_e[Ye].ix,iy:_e[Ye].iy,iz:_e[Ye].iz})}while(Ze.length!==0);Ze=[],_e=[],R=null;let it=this.scaleFactor-.5;it<0&&(it=0);let lt=Q-.5/(.1+it);for(let Ye=0;Ye<this.pLength;Ye++)for(let Vt=0;Vt<this.pWidth;Vt++)for(let Ct=0;Ct<this.pHeight;Ct++)f=Ye*$+Vt*this.pHeight+Ct,this.vpBits[f]&=~this.ISBOUND,this.vpBits[f]&this.INOUT&&(this.vpBits[f]&this.ISDONE&&!(this.vpBits[f]&this.ISDONE&&this.vpDistance[f]>=lt)||(this.vpBits[f]|=this.ISBOUND))}fastoneshell(f,R){let $,Q,Ze,_e,it,lt,Ye,Vt,Ct,Nl=[];if(f.length===0)return Nl;let ms={ix:-1,iy:-1,iz:-1},Si=this.pWidth*this.pHeight;for(let _s=0,gs=f.length;_s<gs;_s++){$=f[_s].ix,Q=f[_s].iy,Ze=f[_s].iz,Vt=R.get($,Q,Ze);for(let Yl=0;Yl<6;Yl++)ms.ix=$+this.nb[Yl][0],ms.iy=Q+this.nb[Yl][1],ms.iz=Ze+this.nb[Yl][2],ms.ix<this.pLength&&ms.ix>-1&&ms.iy<this.pWidth&&ms.iy>-1&&ms.iz<this.pHeight&&ms.iz>-1&&(Ct=ms.ix*Si+this.pHeight*ms.iy+ms.iz,this.vpBits[Ct]&this.INOUT&&!(this.vpBits[Ct]&this.ISDONE)?(R.set(ms.ix,ms.iy,Ze+this.nb[Yl][2],Vt),_e=ms.ix-Vt.ix,it=ms.iy-Vt.iy,lt=ms.iz-Vt.iz,Ye=_e*_e+it*it+lt*lt,this.vpDistance[Ct]=Ye,this.vpBits[Ct]|=this.ISDONE,this.vpBits[Ct]|=this.ISBOUND,Nl.push({ix:ms.ix,iy:ms.iy,iz:ms.iz})):this.vpBits[Ct]&this.INOUT&&this.vpBits[Ct]&this.ISDONE&&(_e=ms.ix-Vt.ix,it=ms.iy-Vt.iy,lt=ms.iz-Vt.iz,Ye=_e*_e+it*it+lt*lt,Ye<this.vpDistance[Ct]&&(R.set(ms.ix,ms.iy,ms.iz,Vt),this.vpDistance[Ct]=Ye,this.vpBits[Ct]&this.ISBOUND||(this.vpBits[Ct]|=this.ISBOUND,Nl.push({ix:ms.ix,iy:ms.iy,iz:ms.iz})))))}for(let _s=0,gs=f.length;_s<gs;_s++){$=f[_s].ix,Q=f[_s].iy,Ze=f[_s].iz,Vt=R.get($,Q,Ze);for(let Yl=6;Yl<18;Yl++)ms.ix=$+this.nb[Yl][0],ms.iy=Q+this.nb[Yl][1],ms.iz=Ze+this.nb[Yl][2],ms.ix<this.pLength&&ms.ix>-1&&ms.iy<this.pWidth&&ms.iy>-1&&ms.iz<this.pHeight&&ms.iz>-1&&(Ct=ms.ix*Si+this.pHeight*ms.iy+ms.iz,this.vpBits[Ct]&this.INOUT&&!(this.vpBits[Ct]&this.ISDONE)?(R.set(ms.ix,ms.iy,Ze+this.nb[Yl][2],Vt),_e=ms.ix-Vt.ix,it=ms.iy-Vt.iy,lt=ms.iz-Vt.iz,Ye=_e*_e+it*it+lt*lt,this.vpDistance[Ct]=Ye,this.vpBits[Ct]|=this.ISDONE,this.vpBits[Ct]|=this.ISBOUND,Nl.push({ix:ms.ix,iy:ms.iy,iz:ms.iz})):this.vpBits[Ct]&this.INOUT&&this.vpBits[Ct]&this.ISDONE&&(_e=ms.ix-Vt.ix,it=ms.iy-Vt.iy,lt=ms.iz-Vt.iz,Ye=_e*_e+it*it+lt*lt,Ye<this.vpDistance[Ct]&&(R.set(ms.ix,ms.iy,ms.iz,Vt),this.vpDistance[Ct]=Ye,this.vpBits[Ct]&this.ISBOUND||(this.vpBits[Ct]|=this.ISBOUND,Nl.push({ix:ms.ix,iy:ms.iy,iz:ms.iz})))))}for(let _s=0,gs=f.length;_s<gs;_s++){$=f[_s].ix,Q=f[_s].iy,Ze=f[_s].iz,Vt=R.get($,Q,Ze);for(let Yl=18;Yl<26;Yl++)ms.ix=$+this.nb[Yl][0],ms.iy=Q+this.nb[Yl][1],ms.iz=Ze+this.nb[Yl][2],ms.ix<this.pLength&&ms.ix>-1&&ms.iy<this.pWidth&&ms.iy>-1&&ms.iz<this.pHeight&&ms.iz>-1&&(Ct=ms.ix*Si+this.pHeight*ms.iy+ms.iz,this.vpBits[Ct]&this.INOUT&&!(this.vpBits[Ct]&this.ISDONE)?(R.set(ms.ix,ms.iy,Ze+this.nb[Yl][2],Vt),_e=ms.ix-Vt.ix,it=ms.iy-Vt.iy,lt=ms.iz-Vt.iz,Ye=_e*_e+it*it+lt*lt,this.vpDistance[Ct]=Ye,this.vpBits[Ct]|=this.ISDONE,this.vpBits[Ct]|=this.ISBOUND,Nl.push({ix:ms.ix,iy:ms.iy,iz:ms.iz})):this.vpBits[Ct]&this.INOUT&&this.vpBits[Ct]&this.ISDONE&&(_e=ms.ix-Vt.ix,it=ms.iy-Vt.iy,lt=ms.iz-Vt.iz,Ye=_e*_e+it*it+lt*lt,Ye<this.vpDistance[Ct]&&(R.set(ms.ix,ms.iy,ms.iz,Vt),this.vpDistance[Ct]=Ye,this.vpBits[Ct]&this.ISBOUND||(this.vpBits[Ct]|=this.ISBOUND,Nl.push({ix:ms.ix,iy:ms.iy,iz:ms.iz})))))}return Nl}marchingcubeinit(f){for(let R=0,$=this.vpBits.length;R<$;R++)f==1?this.vpBits[R]&=~this.ISBOUND:f==4?(this.vpBits[R]&=~this.ISDONE,this.vpBits[R]&this.ISBOUND&&(this.vpBits[R]|=this.ISDONE),this.vpBits[R]&=~this.ISBOUND):f==2?this.vpBits[R]&this.ISBOUND&&this.vpBits[R]&this.ISDONE?this.vpBits[R]&=~this.ISBOUND:this.vpBits[R]&this.ISBOUND&&!(this.vpBits[R]&this.ISDONE)&&(this.vpBits[R]|=this.ISDONE):f==3&&(this.vpBits[R]&=~this.ISBOUND)}marchingcube(f){this.marchingcubeinit(f),this.verts=[],this.faces=[],Wl.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let R=this.pWidth*this.pHeight;for(let $=0,Q=this.verts.length;$<Q;$++)this.verts[$].atomid=this.vpAtomID[this.verts[$].x*R+this.pHeight*this.verts[$].y+this.verts[$].z];Wl.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}Wl.MarchingCube=new F0;var x0=t(848);class S0{static finalizeGeo(f){var R=f.updateGeoGroup(0);R.vertices>0&&R.truncateArrayBuffers(!0,!0)}static updateColor(f,R){var $,Q,Ze;R=R||S.CC.color(R),f.colorsNeedUpdate=!0,R.constructor!==Array&&($=R.r,Q=R.g,Ze=R.b);for(let _e in f.geometryGroups){let it=f.geometryGroups[_e],lt=it.colorArray;for(let Ye=0,Vt=it.vertices;Ye<Vt;++Ye){if(R.constructor===Array){let Ct=R[Ye];$=Ct.r,Q=Ct.g,Ze=Ct.b}lt[3*Ye]=$,lt[3*Ye+1]=Q,lt[3*Ye+2]=Ze}}}static drawArrow(f,R,$){var Q=$.start,Ze=$.end,_e=$.radius,it=$.radiusRatio,lt=$.mid,Ye=$.midpos;if(!Q||!Ze)return;var Vt=R.updateGeoGroup(51),Ct=new _.Vector3(Ze.x,Ze.y,Ze.z).sub(Q);if(Ye){let Qv=Ct.length();lt=Ye>0?Ye/Qv:(Qv+Ye)/Qv}Ct.multiplyScalar(lt);var Nl=new _.Vector3(Q.x,Q.y,Q.z).add(Ct),ms=Ct.clone().negate();let Si=new _.Vector3(Q.x,Q.y,Q.z);f.intersectionShape.cylinder.push(new p.Cylinder(Si,Nl.clone(),_e)),f.intersectionShape.sphere.push(new p.Sphere(Si,_e));var _s=[];_s[0]=Ct.clone(),Math.abs(_s[0].x)>1e-4?_s[0].y+=1:_s[0].x+=1,_s[0].cross(Ct),_s[0].normalize(),_s[4]=_s[0].clone(),_s[4].crossVectors(_s[0],Ct),_s[4].normalize(),_s[8]=_s[0].clone().negate(),_s[12]=_s[4].clone().negate(),_s[2]=_s[0].clone().add(_s[4]).normalize(),_s[6]=_s[4].clone().add(_s[8]).normalize(),_s[10]=_s[8].clone().add(_s[12]).normalize(),_s[14]=_s[12].clone().add(_s[0]).normalize(),_s[1]=_s[0].clone().add(_s[2]).normalize(),_s[3]=_s[2].clone().add(_s[4]).normalize(),_s[5]=_s[4].clone().add(_s[6]).normalize(),_s[7]=_s[6].clone().add(_s[8]).normalize(),_s[9]=_s[8].clone().add(_s[10]).normalize(),_s[11]=_s[10].clone().add(_s[12]).normalize(),_s[13]=_s[12].clone().add(_s[14]).normalize(),_s[15]=_s[14].clone().add(_s[0]).normalize();var gs,Yl,Dp,Op,e0,Xp,_0,D0,O0,U0,E0,ym,mm,Vm,Pm,a1,h1,Hm,w1,_m,Om,D1,$m=Vt.vertices,R1=Vt.vertexArray,k1=Vt.faceArray,Jm=Vt.normalArray,I1=Vt.lineArray;for(Yl=0,Dp=_s.length;Yl<Dp;++Yl){gs=3*($m+3*Yl);var ug=_s[Yl].clone().multiplyScalar(_e).add(Q),O1=_s[Yl].clone().multiplyScalar(_e).add(Nl),s1=_s[Yl].clone().multiplyScalar(_e*it).add(Nl);if(R1[gs]=ug.x,R1[gs+1]=ug.y,R1[gs+2]=ug.z,R1[gs+3]=O1.x,R1[gs+4]=O1.y,R1[gs+5]=O1.z,R1[gs+6]=s1.x,R1[gs+7]=s1.y,R1[gs+8]=s1.z,Yl>0){var yg=R1[gs-3],Z1=R1[gs-2],pg=R1[gs-1],J1=new _.Vector3(yg,Z1,pg),wg=new _.Vector3(Ze.x,Ze.y,Ze.z),tv=Nl.clone(),Sv=new _.Vector3(s1.x,s1.y,s1.z);f.intersectionShape.triangle.push(new p.Triangle(Sv,wg,J1)),f.intersectionShape.triangle.push(new p.Triangle(J1.clone(),tv,Sv.clone()))}}Vt.vertices+=48,R1[gs=3*Vt.vertices]=Q.x,R1[gs+1]=Q.y,R1[gs+2]=Q.z,R1[gs+3]=Nl.x,R1[gs+4]=Nl.y,R1[gs+5]=Nl.z,R1[gs+6]=Ze.x,R1[gs+7]=Ze.y,R1[gs+8]=Ze.z,Vt.vertices+=3;var bv=Vt.vertices-3,Jv=Vt.vertices-2,Uv=Vt.vertices-1,lv=3*bv,Kv=3*Jv,Nv=3*Uv;for(Yl=0,Dp=_s.length-1;Yl<Dp;++Yl){var Fv=$m+3*Yl;gs=3*Fv,e0=Vt.faceidx,Xp=Vt.lineidx,mm=3*(_0=Fv),Vm=3*(D0=Fv+1),Pm=3*(O0=Fv+2),a1=3*(U0=Fv+4),h1=3*(E0=Fv+5),Hm=3*(ym=Fv+3),w1=_m=_s[Yl],Om=D1=_s[Yl+1],Jm[mm]=w1.x,Jm[Vm]=_m.x,Jm[Hm]=D1.x,Jm[mm+1]=w1.y,Jm[Vm+1]=_m.y,Jm[Hm+1]=D1.y,Jm[mm+2]=w1.z,Jm[Vm+2]=_m.z,Jm[Hm+2]=D1.z,Jm[Vm]=_m.x,Jm[a1]=Om.x,Jm[Hm]=D1.x,Jm[Vm+1]=_m.y,Jm[a1+1]=Om.y,Jm[Hm+1]=D1.y,Jm[Vm+2]=_m.z,Jm[a1+2]=Om.z,Jm[Hm+2]=D1.z,Jm[Pm]=_m.x,Jm[h1]=Om.x,Jm[Pm+1]=_m.y,Jm[h1+1]=Om.y,Jm[Pm+2]=_m.z,Jm[h1+2]=Om.z,k1[e0]=_0,k1[e0+1]=D0,k1[e0+2]=ym,k1[e0+3]=D0,k1[e0+4]=U0,k1[e0+5]=ym,k1[e0+6]=_0,k1[e0+7]=ym,k1[e0+8]=bv,k1[e0+9]=O0,k1[e0+10]=Jv,k1[e0+11]=E0,k1[e0+12]=O0,k1[e0+13]=Uv,k1[e0+14]=E0,I1[Xp]=_0,I1[Xp+1]=D0,I1[Xp+2]=_0,I1[Xp+3]=ym,I1[Xp+4]=U0,I1[Xp+5]=ym,I1[Xp+6]=_0,I1[Xp+7]=ym,I1[Xp+8]=O0,I1[Xp+9]=D0,I1[Xp+10]=O0,I1[Xp+11]=E0,I1[Xp+12]=U0,I1[Xp+13]=E0,I1[Xp+14]=O0,I1[Xp+15]=Uv,I1[Xp+16]=O0,I1[Xp+17]=E0,I1[Xp+18]=Uv,I1[Xp+19]=E0,Vt.faceidx+=15,Vt.lineidx+=20}Op=[$m+45,$m+46,$m+1,$m,$m+47,$m+2],e0=Vt.faceidx,Xp=Vt.lineidx,mm=3*(_0=Op[0]),Vm=3*(D0=Op[1]),Pm=3*(O0=Op[4]),a1=3*(U0=Op[2]),h1=3*(E0=Op[5]),Hm=3*(ym=Op[3]),w1=_m=_s[15],Om=D1=_s[0],Jm[mm]=w1.x,Jm[Vm]=_m.x,Jm[Hm]=D1.x,Jm[mm+1]=w1.y,Jm[Vm+1]=_m.y,Jm[Hm+1]=D1.y,Jm[mm+2]=w1.z,Jm[Vm+2]=_m.z,Jm[Hm+2]=D1.z,Jm[Vm]=_m.x,Jm[a1]=Om.x,Jm[Hm]=D1.x,Jm[Vm+1]=_m.y,Jm[a1+1]=Om.y,Jm[Hm+1]=D1.y,Jm[Vm+2]=_m.z,Jm[a1+2]=Om.z,Jm[Hm+2]=D1.z,Jm[Pm]=_m.x,Jm[h1]=Om.x,Jm[Pm+1]=_m.y,Jm[h1+1]=Om.y,Jm[Pm+2]=_m.z,Jm[h1+2]=Om.z,Ct.normalize(),ms.normalize(),Jm[lv]=ms.x,Jm[Kv]=Jm[Nv]=Ct.x,Jm[lv+1]=ms.y,Jm[Kv+1]=Jm[Nv+1]=Ct.y,Jm[lv+2]=ms.z,Jm[Kv+2]=Jm[Nv+2]=Ct.z,k1[e0]=_0,k1[e0+1]=D0,k1[e0+2]=ym,k1[e0+3]=D0,k1[e0+4]=U0,k1[e0+5]=ym,k1[e0+6]=_0,k1[e0+7]=ym,k1[e0+8]=bv,k1[e0+9]=O0,k1[e0+10]=Jv,k1[e0+11]=E0,k1[e0+12]=O0,k1[e0+13]=Uv,k1[e0+14]=E0,I1[Xp]=_0,I1[Xp+1]=D0,I1[Xp+2]=_0,I1[Xp+3]=ym,I1[Xp+4]=U0,I1[Xp+5]=ym,I1[Xp+6]=_0,I1[Xp+7]=ym,I1[Xp+8]=O0,I1[Xp+9]=D0,I1[Xp+10]=O0,I1[Xp+11]=E0,I1[Xp+12]=U0,I1[Xp+13]=E0,I1[Xp+14]=O0,I1[Xp+15]=Uv,I1[Xp+16]=O0,I1[Xp+17]=E0,I1[Xp+18]=Uv,I1[Xp+19]=E0,Vt.faceidx+=15,Vt.lineidx+=20}static updateBoundingFromPoints(f,R,$,Q){f.center.set(0,0,0);let Ze=1/0,_e=1/0,it=1/0,lt=-1/0,Ye=-1/0,Vt=-1/0;f.box&&(Ze=f.box.min.x,lt=f.box.max.x,_e=f.box.min.y,Ye=f.box.max.y,it=f.box.min.z,Vt=f.box.max.z);for(let Si=0,_s=Q;Si<_s;Si++){var Ct=$[3*Si],Nl=$[3*Si+1],ms=$[3*Si+2];Ct<Ze&&(Ze=Ct),Nl<_e&&(_e=Nl),ms<it&&(it=ms),Ct>lt&&(lt=Ct),Nl>Ye&&(Ye=Nl),ms>Vt&&(Vt=ms)}f.center.set((lt+Ze)/2,(Ye+_e)/2,(Vt+it)/2),f.radius=f.center.distanceTo({x:lt,y:Ye,z:Vt}),f.box={min:{x:Ze,y:_e,z:it},max:{x:lt,y:Ye,z:Vt}}}static addCustomGeo(f,R,$,Q,Ze){var _e,it,lt,Ye,Vt,Ct,Nl,ms,Si,_s=R.addGeoGroup(),gs=$.vertexArr,Yl=$.normalArr,Dp=$.faceArr;_s.vertices=gs.length,_s.faceidx=Dp.length;var Op=_s.vertexArray,e0=_s.colorArray;for(Q.constructor!==Array&&(ms=Q.r,Si=Q.g,Ye=Q.b),Ct=0,Nl=_s.vertices;Ct<Nl;++Ct)_e=3*Ct,it=gs[Ct],Op[_e]=it.x,Op[_e+1]=it.y,Op[_e+2]=it.z,Q.constructor===Array&&(ms=(Vt=Q[Ct]).r,Si=Vt.g,Ye=Vt.b),e0[_e]=ms,e0[_e+1]=Si,e0[_e+2]=Ye;if(Ze)for(Ct=0,Nl=_s.faceidx/3;Ct<Nl;++Ct){lt=Dp[_e=3*Ct],Ye=Dp[_e+1],Vt=Dp[_e+2];var Xp=new _.Vector3,_0=new _.Vector3,D0=new _.Vector3;f.intersectionShape.triangle.push(new p.Triangle(Xp.copy(gs[lt]),_0.copy(gs[Ye]),D0.copy(gs[Vt])))}if(Ze){var O0=new _.Vector3(0,0,0),U0=0;for(let mm=0;mm<R.geometryGroups.length;mm++)O0.add(R.geometryGroups[mm].getCentroid()),U0++;O0.divideScalar(U0),S0.updateBoundingFromPoints(f.boundingSphere,{centroid:O0},Op,_s.vertices)}if(_s.faceArray=new Uint16Array(Dp),_s.truncateArrayBuffers(!0,!0),Yl.length<_s.vertices)_s.setNormals();else{var E0,ym=_s.normalArray=new Float32Array(3*_s.vertices);for(Ct=0,Nl=_s.vertices;Ct<Nl;++Ct)_e=3*Ct,E0=Yl[Ct],ym[_e]=E0.x,ym[_e+1]=E0.y,ym[_e+2]=E0.z}_s.setLineIndices(),_s.lineidx=_s.lineArray.length}static updateFromStyle(f,R){R.color!==void 0?(f.color=R.color||new S.Color,R.color instanceof S.Color||(f.color=S.CC.color(R.color))):f.color=S.CC.color(0),f.wireframe=!!R.wireframe,f.opacity=R.alpha?(0,_.clamp)(R.alpha,0,1):1,R.opacity!==void 0&&(f.opacity=(0,_.clamp)(R.opacity,0,1)),f.side=R.side!==void 0?R.side:d.DoubleSide,f.linewidth=R.linewidth===void 0?1:R.linewidth,f.clickable=!!R.clickable,f.callback=(0,C.makeFunction)(R.callback),f.hoverable=!!R.hoverable,f.hover_callback=(0,C.makeFunction)(R.hover_callback),f.unhover_callback=(0,C.makeFunction)(R.unhover_callback),f.contextMenuEnabled=!!R.contextMenuEnabled,f.hidden=R.hidden,f.frame=R.frame}constructor(f){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=d.DoubleSide,this.stylespec=f||{},this.boundingSphere=new p.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},S0.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new d.Geometry(!0),this.linegeo=new d.Geometry(!0)}updateStyle(f){for(var R in f)this.stylespec[R]=f[R];if(S0.updateFromStyle(this,this.stylespec),f.voldata&&f.volscheme){(0,C.adjustVolumeStyle)(f);const $=f.volscheme,Q=f.voldata,Ze=S.CC,_e=$.range()||[-1,1];this.geo.setColors(function(it,lt,Ye){let Vt=Q.getVal(it,lt,Ye);return Ze.color($.valueToHex(Vt,_e))}),delete this.color}}addCustom(f){f.vertexArr=f.vertexArr||[],f.faceArr=f.faceArr||[],f.normalArr=f.normalArr||[],S0.drawCustom(this,this.geo,f)}addSphere(f){f.center||(f.center=new _.Vector3(0,0,0)),f.radius=f.radius?(0,_.clamp)(f.radius,0,1/0):1.5,f.color=S.CC.color(f.color),this.intersectionShape.sphere.push(new p.Sphere(f.center,f.radius)),o.drawSphere(this.geo,f.center,f.radius,f.color,f.quality),this.components.push({centroid:new _.Vector3(f.center.x,f.center.y,f.center.z)});var R=this.geo.updateGeoGroup(0);S0.updateBoundingFromPoints(this.boundingSphere,this.components,R.vertexArray,R.vertices)}addBox(f){var R,$,Q,Ze=f.dimensions||{w:1,h:1,d:1};R=typeof Ze.w=="number"?{x:Ze.w,y:0,z:0}:Ze.w,$=typeof Ze.h=="number"?{x:0,y:Ze.h,z:0}:Ze.h,Q=typeof Ze.d=="number"?{x:0,y:0,z:Ze.d}:Ze.d;var _e=f.corner;_e==null&&(_e=f.center!==void 0?{x:f.center.x-.5*(R.x+$.x+Q.x),y:f.center.y-.5*(R.y+$.y+Q.y),z:f.center.z-.5*(R.z+$.z+Q.z)}:{x:0,y:0,z:0});var it=[{x:_e.x,y:_e.y,z:_e.z},{x:_e.x+R.x,y:_e.y+R.y,z:_e.z+R.z},{x:_e.x+$.x,y:_e.y+$.y,z:_e.z+$.z},{x:_e.x+R.x+$.x,y:_e.y+R.y+$.y,z:_e.z+R.z+$.z},{x:_e.x+Q.x,y:_e.y+Q.y,z:_e.z+Q.z},{x:_e.x+R.x+Q.x,y:_e.y+R.y+Q.y,z:_e.z+R.z+Q.z},{x:_e.x+$.x+Q.x,y:_e.y+$.y+Q.y,z:_e.z+$.z+Q.z},{x:_e.x+R.x+$.x+Q.x,y:_e.y+R.y+$.y+Q.y,z:_e.z+R.z+$.z+Q.z}],lt=[],Ye=[];lt.splice(lt.length,0,it[0],it[1],it[2],it[3]),Ye.splice(Ye.length,0,0,2,1,1,2,3);var Vt=4;lt.splice(lt.length,0,it[2],it[3],it[6],it[7]),Ye.splice(Ye.length,0,Vt+0,Vt+2,Vt+1,Vt+1,Vt+2,Vt+3),Vt+=4,lt.splice(lt.length,0,it[4],it[5],it[0],it[1]),Ye.splice(Ye.length,0,Vt+0,Vt+2,Vt+1,Vt+1,Vt+2,Vt+3),Vt+=4,lt.splice(lt.length,0,it[6],it[7],it[4],it[5]),Ye.splice(Ye.length,0,Vt+0,Vt+2,Vt+1,Vt+1,Vt+2,Vt+3),Vt+=4,lt.splice(lt.length,0,it[3],it[1],it[7],it[5]),Ye.splice(Ye.length,0,Vt+0,Vt+2,Vt+1,Vt+1,Vt+2,Vt+3),Vt+=4,lt.splice(lt.length,0,it[2],it[6],it[0],it[4]),Ye.splice(Ye.length,0,Vt+0,Vt+2,Vt+1,Vt+1,Vt+2,Vt+3),Vt+=4;var Ct=(0,C.extend)({},f);Ct.vertexArr=lt,Ct.faceArr=Ye,Ct.normalArr=[],S0.drawCustom(this,this.geo,Ct);var Nl=new _.Vector3;this.components.push({centroid:Nl.addVectors(it[0],it[7]).multiplyScalar(.5)});var ms=this.geo.updateGeoGroup(0);S0.updateBoundingFromPoints(this.boundingSphere,this.components,ms.vertexArray,ms.vertices)}addCylinder(f){var R,$;R=f.start?new _.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):new _.Vector3(0,0,0),f.end?($=new _.Vector3(f.end.x,f.end.y||0,f.end.z||0)).x===void 0&&($.x=3):$=new _.Vector3(0,0,0);var Q=f.radius||.1,Ze=S.CC.color(f.color);this.intersectionShape.cylinder.push(new p.Cylinder(R,$,Q)),o.drawCylinder(this.geo,R,$,Q,Ze,f.fromCap,f.toCap);var _e=new _.Vector3;this.components.push({centroid:_e.addVectors(R,$).multiplyScalar(.5)});var it=this.geo.updateGeoGroup(0);S0.updateBoundingFromPoints(this.boundingSphere,this.components,it.vertexArray,it.vertices)}addDashedCylinder(f){var R,$;f.dashLength=f.dashLength||.25,f.gapLength=f.gapLength||.25,R=f.start?new _.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):new _.Vector3(0,0,0),f.end?($=new _.Vector3(f.end.x,f.end.y||0,f.end.z||0)).x===void 0&&($.x=3):$=new _.Vector3(3,0,0);for(var Q=f.radius||.1,Ze=S.CC.color(f.color),_e=Math.sqrt(Math.pow(R.x-$.x,2)+Math.pow(R.y-$.y,2)+Math.pow(R.z-$.z,2)),it=_e/(f.gapLength+f.dashLength),lt=new _.Vector3(f.start.x||0,f.start.y||0,f.start.z||0),Ye=new _.Vector3(f.end.x,f.end.y||0,f.end.z||0),Vt=new _.Vector3(($.x-R.x)/(_e/f.gapLength),($.y-R.y)/(_e/f.gapLength),($.z-R.z)/(_e/f.gapLength)),Ct=new _.Vector3(($.x-R.x)/(_e/f.dashLength),($.y-R.y)/(_e/f.dashLength),($.z-R.z)/(_e/f.dashLength)),Nl=0;Nl<it;Nl++)Ye=new _.Vector3(lt.x+Ct.x,lt.y+Ct.y,lt.z+Ct.z),this.intersectionShape.cylinder.push(new p.Cylinder(lt,Ye,Q)),o.drawCylinder(this.geo,lt,Ye,Q,Ze,f.fromCap,f.toCap),lt=new _.Vector3(Ye.x+Vt.x,Ye.y+Vt.y,Ye.z+Vt.z);var ms=new _.Vector3;this.components.push({centroid:ms.addVectors(R,$).multiplyScalar(.5)});var Si=this.geo.updateGeoGroup(0);S0.updateBoundingFromPoints(this.boundingSphere,this.components,Si.vertexArray,Si.vertices)}addCurve(f){f.points=f.points||[],f.smooth=f.smooth||10,f.fromCap===void 0&&(f.fromCap=2),f.toCap===void 0&&(f.toCap=2);var R=j(f.points,f.smooth);if(R.length<3)console.log("Too few points in addCurve");else{var $=f.radius||.1,Q=S.CC.color(f.color),Ze=0,_e=R.length-1,it=R[0].distanceTo(R[1]),lt=Math.ceil(2*$/it);if(f.toArrow){let Nl={start:R[_e-=lt],end:R[R.length-1],radius:$,color:Q,mid:1e-4};this.addArrow(Nl)}if(f.fromArrow){let Nl={start:R[Ze+=lt],end:R[0],radius:$,color:Q,mid:1e-4};this.addArrow(Nl)}for(var Ye=Math.ceil(R.length/2),Vt={radius:$,color:Q,fromCap:2,toCap:2},Ct=Ze;Ct<_e;Ct++)Vt.start=R[Ct],Vt.end=R[Ct+1],Vt.fromCap=2,Vt.toCap=2,Ct<Ye?(Vt.fromCap=2,Vt.toCap=0):Ct>Ye?(Vt.fromCap=0,Vt.toCap=2):(Vt.fromCap=2,Vt.toCap=2),this.addCylinder(Vt)}}addLine(f){var R,$;R=f.start?new _.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):new _.Vector3(0,0,0),f.end?($=new _.Vector3(f.end.x,f.end.y||0,f.end.z||0)).x===void 0&&($.x=3):$=new _.Vector3(3,0,0);var Q=this.geo.updateGeoGroup(2),Ze=Q.vertices,_e=3*Ze,it=Q.vertexArray;it[_e]=R.x,it[_e+1]=R.y,it[_e+2]=R.z,it[_e+3]=$.x,it[_e+4]=$.y,it[_e+5]=$.z,Q.vertices+=2;var lt=Q.lineArray,Ye=Q.lineidx;lt[Ye]=Ze,lt[Ye+1]=Ze+1,Q.lineidx+=2;var Vt=new _.Vector3;this.components.push({centroid:Vt.addVectors(R,$).multiplyScalar(.5)}),Q=this.geo.updateGeoGroup(0),S0.updateBoundingFromPoints(this.boundingSphere,this.components,Q.vertexArray,Q.vertices)}addArrow(f){if(f.start?f.start=new _.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):f.start=new _.Vector3(0,0,0),f.dir instanceof _.Vector3&&typeof f.length=="number"){var R=f.dir.clone().multiplyScalar(f.length).add(f.start);f.end=R}else f.end?(f.end=new _.Vector3(f.end.x,f.end.y||0,f.end.z||0),f.end.x===void 0&&(f.end.x=3)):f.end=new _.Vector3(3,0,0);f.radius=f.radius||.1,f.radiusRatio=f.radiusRatio||1.618034,f.mid=0<f.mid&&f.mid<1?f.mid:.618034,S0.drawArrow(this,this.geo,f);var $=new _.Vector3;this.components.push({centroid:$.addVectors(f.start,f.end).multiplyScalar(.5)});var Q=this.geo.updateGeoGroup(0);S0.updateBoundingFromPoints(this.boundingSphere,this.components,Q.vertexArray,Q.vertices)}static distance_from(f,R){return Math.sqrt(Math.pow(f.x-R.x,2)+Math.pow(f.y-R.y,2)+Math.pow(f.z-R.z,2))}static inSelectedRegion(f,R,$){for(var Q=0;Q<R.length;Q++)if(S0.distance_from(R[Q],f)<=$)return!0;return!1}addIsosurface(f,R,$,Q){var Ze,_e,it=R.isoval!==void 0&&typeof R.isoval=="number"?R.isoval:0,lt=!!R.voxel,Ye=R.smoothness===void 0?1:R.smoothness,Vt=f.size.x,Ct=f.size.y,Nl=f.size.z,ms=new Int16Array(Vt*Ct*Nl),Si=f.data;for(Ze=0,_e=ms.length;Ze<_e;++Ze)ms[Ze]=-1;var _s=new Uint8Array(Vt*Ct*Nl);for(Ze=0,_e=Si.length;Ze<_e;++Ze)(it>=0?Si[Ze]-it:it-Si[Ze])>0&&(_s[Ze]|=S0.ISDONE);var gs=[],Yl=[];Z.march(_s,gs,Yl,{fulltable:!0,voxel:lt,unitCube:f.unit,origin:f.origin,matrix:f.matrix,nX:Vt,nY:Ct,nZ:Nl}),!lt&&Ye>0&&Z.laplacianSmooth(Ye,gs,Yl);var Dp=[],Op=[],e0=[];if(R.selectedRegion&&R.coords===void 0&&(R.coords=R.selectedRegion),R.coords===void 0&&R.selection!==void 0&&(Q?R.coords=Q.selectedAtoms(R.selection):console.log("addIsosurface needs viewer is selection provided.")),R.coords!==void 0){var Xp=R.coords[0].x,_0=R.coords[0].y,D0=R.coords[0].z,O0=R.coords[0].x,U0=R.coords[0].y,E0=R.coords[0].z;for(let _m=0;_m<R.coords.length;_m++)R.coords[_m].x>Xp?Xp=R.coords[_m].x:R.coords[_m].x<O0&&(O0=R.coords[_m].x),R.coords[_m].y>_0?_0=R.coords[_m].y:R.coords[_m].y<U0&&(U0=R.coords[_m].y),R.coords[_m].z>D0?D0=R.coords[_m].z:R.coords[_m].z<E0&&(E0=R.coords[_m].z);var ym=2;R.radius!==void 0&&(ym=R.radius),R.selectedOffset!==void 0&&(ym=R.selectedOffset),R.seldist!==void 0&&(ym=R.seldist),O0-=ym,Xp+=ym,U0-=ym,_0+=ym,E0-=ym,D0+=ym;for(let _m=0;_m<gs.length;_m++)gs[_m].x>O0&&gs[_m].x<Xp&&gs[_m].y>U0&&gs[_m].y<_0&&gs[_m].z>E0&&gs[_m].z<D0&&S0.inSelectedRegion(gs[_m],R.coords,ym)?(Dp.push(Op.length),Op.push(gs[_m])):Dp.push(-1);for(let _m=0;_m+2<Yl.length;_m+=3)Dp[Yl[_m]]!==-1&&Dp[Yl[_m+1]]!==-1&&Dp[Yl[_m+2]]!==-1&&(e0.push(Yl[_m]-(Yl[_m]-Dp[Yl[_m]])),e0.push(Yl[_m+1]-(Yl[_m+1]-Dp[Yl[_m+1]])),e0.push(Yl[_m+2]-(Yl[_m+2]-Dp[Yl[_m+2]])));gs=Op,Yl=e0}S0.drawCustom(this,this.geo,{vertexArr:gs,faceArr:Yl,normalArr:[],clickable:R.clickable,hoverable:R.hoverable}),this.updateStyle(R);var mm=new _.Vector3(f.origin.x,f.origin.y,f.origin.z),Vm=new _.Vector3(f.size.x*f.unit.x,f.size.y*f.unit.y,f.size.z*f.unit.z),Pm=new _.Vector3(0,0,0),a1=mm.clone(),h1=mm.clone().add(Vm);for(let _m=0;_m<gs.length;_m++)Pm.add(gs[_m]),a1.max(gs[_m]),h1.min(gs[_m]);Pm.divideScalar(gs.length);var Hm=Pm.distanceTo(h1),w1=Pm.distanceTo(a1);this.boundingSphere.center=Pm,this.boundingSphere.radius=Math.max(Hm,w1),typeof $=="function"&&$()}addVolumetricData(f,R,$){f=new x0.VolumeData(f,R),this.addIsosurface(f,$)}finalize(){return S0.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(f){if(this.renderedShapeObj&&(f.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){S0.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),this.color!==void 0&&S0.updateColor(this.geo,this.color),this.shapeObj=new d.Object3D;var R=null;R=this.side==d.DoubleSide?new d.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:d.Coloring.VertexColors}):new d.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:d.Coloring.VertexColors});var $=new d.Mesh(this.geo,R);if(this.shapeObj.add($),this.linegeo&&this.linegeo.vertices>0){var Q=new d.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),Ze=new d.Line(this.linegeo,Q,d.LineStyle.LinePieces);this.shapeObj.add(Ze)}this.renderedShapeObj=this.shapeObj.clone(),f.add(this.renderedShapeObj)}}removegl(f){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),f.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}function Mm(jp){if(jp.vertexArr.length<64e3)return[jp];var f=[{vertexArr:[],normalArr:[],faceArr:[]}];jp.colorArr&&(f.colorArr=[]);var R=[],$=[],Q=0,Ze=jp.faceArr;for(let it=0,lt=Ze.length;it<lt;it+=3){let Ye=f[Q];for(let Vt=0;Vt<3;Vt++){var _e=Ze[it+Vt];R[_e]!==Q&&(R[_e]=Q,$[_e]=Ye.vertexArr.length,Ye.vertexArr.push(jp.vertexArr[_e]),jp.normalArr&&jp.normalArr[_e]&&Ye.normalArr.push(jp.normalArr[_e]),jp.colorArr&&jp.colorArr[_e]&&Ye.colorArr.push(jp.colorArr[_e])),Ye.faceArr.push($[_e])}Ye.vertexArr.length>=64e3&&(f.push({vertexArr:[],normalArr:[],faceArr:[]}),jp.colorArr&&(f.colorArr=[]),Q++)}return f}S0.ISDONE=2,S0.drawCustom=function(jp,f,R){var $=R,Q=$.vertexArr,Ze=$.faceArr;Q.length!==0&&Ze.length!==0||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var _e=R.color;_e===void 0&&(_e=jp.color),_e=S.CC.color(_e);for(var it=Mm($),lt=0,Ye=it.length;lt<Ye;lt++)S0.addCustomGeo(jp,f,it[lt],it[lt].colorArr?it[lt].colorArr:_e,R.clickable)};let km=0;function wm(jp,f,R){var $=R;return jp!==void 0&&(jp instanceof S.Color?$=jp.scaled():($=S.CC.color(jp)).scaled!==void 0&&($=$.scaled())),f!==void 0&&($.a=parseFloat(f)),$}class Xm{constructor(f,R){this.id=km++,this.stylespec=R||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new d.Sprite,this.text=f,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var f=this.stylespec,R=f.useScreen!==void 0&&f.useScreen,$=f.showBackground;$!=="0"&&$!=="false"||($=!1),$===void 0&&($=!0);var Q=f.font?f.font:"sans-serif",Ze=parseInt(f.fontSize)?parseInt(f.fontSize):18,_e=wm(f.fontColor,f.fontOpacity,{r:255,g:255,b:255,a:1}),it=f.padding?f.padding:4,lt=f.borderThickness?f.borderThickness:0,Ye=wm(f.backgroundColor,f.backgroundOpacity,{r:0,g:0,b:0,a:1}),Vt=wm(f.borderColor,f.borderOpacity,Ye),Ct=f.position?f.position:{x:-10,y:1,z:1},Nl=f.inFront===void 0||f.inFront;Nl!=="false"&&Nl!=="0"||(Nl=!1);var ms=f.alignment||d.SpriteAlignment.topLeft;typeof ms=="string"&&ms in d.SpriteAlignment&&(ms=d.SpriteAlignment[ms]);var Si="";f.bold&&(Si="bold "),this.context.font=Si+Ze+"px  "+Q;var _s=this.context.measureText(this.text).width;$||(lt=0);var gs=_s+2.5*lt+2*it,Yl=1.25*Ze+2*lt+2*it;if(f.backgroundImage){var Dp=f.backgroundImage,Op=f.backgroundWidth?f.backgroundWidth:Dp.width,e0=f.backgroundHeight?f.backgroundHeight:Dp.height;Op>gs&&(gs=Op),e0>Yl&&(Yl=e0)}if(this.canvas.width=gs,this.canvas.height=Yl,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),Si="",f.bold&&(Si="bold "),this.context.font=Si+Ze+"px  "+Q,this.context.fillStyle="rgba("+Ye.r+","+Ye.g+","+Ye.b+","+Ye.a+")",this.context.strokeStyle="rgba("+Vt.r+","+Vt.g+","+Vt.b+","+Vt.a+")",f.backgroundGradient){let _0=this.context.createLinearGradient(0,Yl/2,gs,Yl/2),D0=A.Gradient.getGradient(f.backgroundGradient),O0=D0.range(),U0=-1,E0=1;O0&&(U0=O0[0],E0=O0[1]);let ym=E0-U0;for(let mm=0;mm<1.01;mm+=.1){let Vm=wm(D0.valueToHex(U0+ym*mm)),Pm="rgba("+Vm.r+","+Vm.g+","+Vm.b+","+Vm.a+")";_0.addColorStop(mm,Pm)}this.context.fillStyle=_0}this.context.lineWidth=lt,$&&(function(_0,D0,O0,U0,E0,ym,mm){_0.beginPath(),_0.moveTo(D0+ym,O0),_0.lineTo(D0+U0-ym,O0),_0.quadraticCurveTo(D0+U0,O0,D0+U0,O0+ym),_0.lineTo(D0+U0,O0+E0-ym),_0.quadraticCurveTo(D0+U0,O0+E0,D0+U0-ym,O0+E0),_0.lineTo(D0+ym,O0+E0),_0.quadraticCurveTo(D0,O0+E0,D0,O0+E0-ym),_0.lineTo(D0,O0+ym),_0.quadraticCurveTo(D0,O0,D0+ym,O0),_0.closePath(),_0.fill(),mm&&_0.stroke()})(this.context,lt,lt,gs-2*lt,Yl-2*lt,6,lt>0),f.backgroundImage&&this.context.drawImage(Dp,0,0,gs,Yl),this.context.fillStyle="rgba("+_e.r+","+_e.g+","+_e.b+","+_e.a+")",this.context.fillText(this.text,lt+it,Ze+lt+it,_s);var Xp=new d.Texture(this.canvas);Xp.needsUpdate=!0,this.sprite.material=new d.SpriteMaterial({map:Xp,useScreenCoordinates:R,alignment:ms,depthTest:!Nl,screenOffset:f.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(Ct.x,Ct.y,Ct.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}class Nm{static interpolateArray(f,R){function $(Ct,Nl,ms){return Ct+(Nl-Ct)*ms}var Q=[],Ze=(f.length-1)/(R-1);Q[0]=f[0];for(var _e=1;_e<R-1;_e++){var it=_e*Ze,lt=Math.floor(it),Ye=Math.ceil(it),Vt=it-lt;Q[_e]=$(f[lt],f[Ye],Vt)}return Q[R-1]=f[f.length-1],Q}constructor(f,R,$){this.hidden=!1,this.boundingSphere=new p.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,R=R||{};var Q,Ze,_e,it,lt,Ye,Vt,Ct,Nl,ms,Si=Object.assign([],R.transferfn);this.subsamples=R.subsamples||5,Si.forEach(function(gs){gs.value=parseFloat(gs.value)}),Si.sort(function(gs,Yl){return gs.value-Yl.value}),this.min=Si[0].value,Si.length==0&&Si.push(Si[0]),this.max=Si[Si.length-1].value;for(let gs=0;gs<Si.length-1;gs++)if(_e=S.CC.color(Si[gs].color),it=S.CC.color(Si[gs+1].color),Nl=Si[gs].opacity,ms=Si[gs+1].opacity,(Q=Math.floor(256*(Si[gs].value-this.min)/(this.max-this.min)))!=(Ze=Math.floor(256*(Si[gs+1].value-this.min)/(this.max-this.min)))){lt=Nm.interpolateArray([255*_e.r,255*it.r],Ze-Q),Ye=Nm.interpolateArray([255*_e.g,255*it.g],Ze-Q),Vt=Nm.interpolateArray([255*_e.b,255*it.b],Ze-Q),Ct=Nm.interpolateArray([255*Nl,255*ms],Ze-Q);for(let Yl=0;Yl<lt.length;Yl++)this.transferfunctionbuffer.push(lt[Yl]),this.transferfunctionbuffer.push(Ye[Yl]),this.transferfunctionbuffer.push(Vt[Yl]),this.transferfunctionbuffer.push(Ct[Yl])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),f.matrix){let gs=new _.Vector3(0,0,0),Yl=new _.Vector3(f.size.x,f.size.y,f.size.z),Dp=new _.Vector3(1,1,1);gs.applyMatrix4(f.matrix),Yl.applyMatrix4(f.matrix),Dp.applyMatrix4(f.matrix).sub(gs),this.extent=[[gs.x,gs.y,gs.z],[Yl.x,Yl.y,Yl.z]];for(let _0=1;_0<7;_0++)Yl.x=1&_0?f.size.x:0,Yl.y=2&_0?f.size.y:0,Yl.z=4&_0?f.size.z:0,Yl.applyMatrix4(f.matrix),this.extent[0][0]=Math.min(this.extent[0][0],Yl.x),this.extent[0][1]=Math.min(this.extent[0][1],Yl.y),this.extent[0][2]=Math.min(this.extent[0][2],Yl.z),this.extent[1][0]=Math.max(this.extent[1][0],Yl.x),this.extent[1][1]=Math.max(this.extent[1][1],Yl.y),this.extent[1][2]=Math.max(this.extent[1][2],Yl.z);let Op=Yl.x-gs.x,e0=Yl.y-gs.y,Xp=Yl.z-gs.z;this.maxdepth=Math.sqrt(Op*Op+e0*e0+Xp*Xp),this.minunit=Math.min(Math.min(Dp.x,Dp.y),Dp.z),this.texmatrix=new _.Matrix4().identity().scale({x:f.size.x,y:f.size.y,z:f.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(f.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new _.Matrix4().identity();let gs=f.unit.x*f.size.x,Yl=f.unit.y*f.size.y,Dp=f.unit.z*f.size.z;this.texmatrix.makeTranslation(-f.origin.x/gs,-f.origin.y/Yl,-f.origin.z/Dp),this.texmatrix.scale({x:1/gs,y:1/Yl,z:1/Dp}),this.minunit=Math.min(Math.min(f.unit.x,f.unit.y),f.unit.z),this.extent=[[f.origin.x,f.origin.y,f.origin.z],[f.origin.x+gs,f.origin.y+Yl,f.origin.z+Dp]],this.maxdepth=Math.sqrt(gs*gs+Yl*Yl+Dp*Dp)}var _s=new S0({});if(_s.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=_s.finalize(),this.boundingSphere.center=new _.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,R.coords===void 0&&R.selection!==void 0&&($?R.coords=$.selectedAtoms(R.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),R.coords!==void 0&&R.seldist!==void 0){let gs=new Uint8Array(f.data.length),Yl=R.seldist,Dp=Yl*Yl;for(let Op=0,e0=R.coords.length;Op<e0;Op++){let Xp=R.coords[Op],_0=Xp.x-Yl,D0=Xp.y-Yl,O0=Xp.z-Yl,U0=Xp.x+Yl,E0=Xp.y+Yl,ym=Xp.z+Yl;if(f.getIndex(_0,D0,O0)>=0||f.getIndex(U0,E0,ym)>=0)for(let mm=_0;mm<U0;mm+=this.minunit)for(let Vm=D0;Vm<E0;Vm+=this.minunit)for(let Pm=O0;Pm<ym;Pm+=this.minunit){let a1=f.getIndex(mm,Vm,Pm);a1>=0&&!gs[a1]&&(mm-Xp.x)*(mm-Xp.x)+(Vm-Xp.y)*(Vm-Xp.y)+(Pm-Xp.z)*(Pm-Xp.z)<Dp&&(gs[a1]=1)}}for(let Op=0,e0=f.data.length;Op<e0;Op++)gs[Op]==0&&(f.data[Op]=1/0)}this.data=f}globj(f){if(this.renderedShapeObj&&(f.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new d.Object3D;var R,$=new d.Texture(this.data,!0),Q=new d.Texture(this.transferfunctionbuffer,!1);$.needsUpdate=!0,Q.needsUpdate=!0,Q.flipY=!1,R=new d.VolumetricMaterial({transferfn:Q,transfermin:this.min,transfermax:this.max,map:$,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var Ze=new d.Mesh(this.geo,R);this.shapeObj.add(Ze),this.renderedShapeObj=this.shapeObj.clone(),f.add(this.renderedShapeObj)}}removegl(f){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),f.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}const m1=16;class N1 extends Array{constructor(f){super(...f)}getSymmetries(){if(this.length==0)return[];let f=this[0];return f.symmetries===void 0&&this.setSymmetries([new _.Matrix4]),f.symmetries}setSymmetries(f){f===void 0&&(f=[new _.Matrix4]);for(let R of this)R.symmetries=f,R.finished=!1}}class H1{getWidth(){let f=this.container,R=f.offsetWidth;if(R==0&&f.style.display==="none"){let $=f.style.position,Q=f.style.visibility;f.style.display="block",f.style.visibility="hidden",f.style.position="absolute",R=f.offsetWidth,f.style.display="none",f.style.visibility=Q,f.style.position=$}return R}getHeight(){let f=this.container,R=f.offsetHeight;if(R==0&&f.style.display==="none"){let $=f.style.position,Q=f.style.visibility;f.style.display="block",f.style.visibility="hidden",f.style.position="absolute",R=f.offsetHeight,f.style.display="none",f.style.visibility=Q,f.style.position=$}return R}setupRenderer(){let f=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new d.Renderer(f),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new d.Scene,this.scene.fog=new d.Fog(this.bgColor,100,200),this.modelGroup=new d.Object3D,this.rotationGroup=new d.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new _.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var f=new d.Light(16777215);f.position=new _.Vector3(.2,.2,1).normalize(),f.intensity=1,this.scene.add(f)}_handleLostContext(f){const R=function($){const Q=$.getBoundingClientRect();return!(Q.right<0||Q.bottom<0||Q.top>(window.innerHeight||document.documentElement.clientHeight)||Q.left>(window.innerWidth||document.documentElement.clientWidth))};if(R(this.container)){let $=0;for(let Q of document.getElementsByTagName("canvas"))if(R(Q)&&Q._3dmol_viewer!=null&&(Q._3dmol_viewer.resize(),$+=1,$>=m1))break}}initContainer(f){this.container=f,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var f=0;for(let $ in this.surfaces)if(this.surfaces.hasOwnProperty($)){var R=parseInt($);isNaN(R)||R>f&&(f=R)}return f+1}setSlabAndFog(){let f=this.camera.position.z-this.rotationGroup.position.z;f<1&&(f=1),this.camera.near=f+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=f+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=f*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(f){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!f&&this.linkedViewers.length>0))for(var R=this._viewer.getView(),$=0;$<this.linkedViewers.length;$++)this.linkedViewers[$].setView(R,!0)}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let f=0,R=this.models.length;f<R;f++){let $=this.models[f];if($){let Q=$.selectedAtoms({clickable:!0}),Ze=$.selectedAtoms({hoverable:!0}),_e=$.selectedAtoms({contextMenuEnabled:!0});for(let it=0;it<Ze.length;it++)this.hoverables.push(Ze[it]);for(let it=0;it<Q.length;it++)this.clickables.push(Q[it]);for(let it=0;it<_e.length;it++)this.contextMenuEnabledObjects.push(_e[it])}}for(let f=0,R=this.shapes.length;f<R;f++){let $=this.shapes[f];$&&$.clickable&&this.clickables.push($),$&&$.hoverable&&this.hoverables.push($),$&&$.contextMenuEnabled&&this.contextMenuEnabledObjects.push($)}}handleClickSelection(f,R,$){let Q=this.targetedObjects(f,R,this.clickables);if(Q.length){var Ze=Q[0].clickable;Ze.callback!==void 0&&(typeof Ze.callback!="function"&&(Ze.callback=(0,C.makeFunction)(Ze.callback)),typeof Ze.callback=="function")&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(Ze)&&this.userContextMenuHandler||Ze.callback(Ze,this._viewer,$,this.container,Q))}}canvasOffset(){let f=this.glDOM,R=f.getBoundingClientRect(),$=f.ownerDocument,Q=$.documentElement,Ze=$.defaultView;return{top:R.top+Ze.pageYOffset-Q.clientTop,left:R.left+Ze.pageXOffset-Q.clientLeft}}setHover(f,R,$){this.current_hover!=f&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,C.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,R,this.container,$)),this.current_hover=f,f&&f.hover_callback!==void 0&&(typeof f.hover_callback!="function"&&(f.hover_callback=(0,C.makeFunction)(f.hover_callback)),typeof f.hover_callback=="function"&&f.hover_callback(f,this._viewer,R,this.container,$)))}handleHoverSelection(f,R,$){if(this.hoverables.length==0)return;let Q=this.targetedObjects(f,R,this.hoverables);if(Q.length){var Ze=Q[0].clickable;this.setHover(Ze,$,Q),this.current_hover=Ze}else this.setHover(null)}handleHoverContinue(f,R){let $=this.targetedObjects(f,R,this.hoverables);$.length!=0&&$[0]!==void 0||this.setHover(null),$[0]!==void 0&&$[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(f,{allowTolerance:R=f.targetTouches,tolerance:$=5}={}){const Q=this.getX(f),Ze=this.getY(f);if(R){const _e=Math.abs(Q-this.mouseStartX),it=Math.abs(Ze-this.mouseStartY);return _e<=$&&it<=$}return Q===this.mouseStartX&&Ze===this.mouseStartY}calcTouchDistance(f){var R=f.targetTouches[0].pageX-f.targetTouches[1].pageX,$=f.targetTouches[0].pageY-f.targetTouches[1].pageY;return Math.hypot(R,$)}getX(f){var R=f.pageX;return R==null&&(R=f.pageX),f.targetTouches&&f.targetTouches[0]?R=f.targetTouches[0].pageX:f.changedTouches&&f.changedTouches[0]&&(R=f.changedTouches[0].pageX),R}getY(f){var R=f.pageY;return R==null&&(R=f.pageY),f.targetTouches&&f.targetTouches[0]?R=f.targetTouches[0].pageY:f.changedTouches&&f.changedTouches[0]&&(R=f.changedTouches[0].pageY),R}isInViewer(f,R){if(this.viewers!=null){var $=this.WIDTH/this.cols,Q=this.HEIGHT/this.rows,Ze=this.canvasOffset(),_e=f-Ze.left,it=R-Ze.top,lt=this.rows-Math.floor(it/Q)-1,Ye=Math.floor(_e/$);if(lt!=this.row||Ye!=this.col)return!1}return!0}adjustZoomToLimits(f){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let R=this.CAMERA_Z-this.config.lowerZoomLimit;f>R&&(f=R)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let R=this.CAMERA_Z-this.config.upperZoomLimit;f<R&&(f=R)}return f>this.CAMERA_Z-1&&(f=this.CAMERA_Z-1),f}static slerp(f,R,$){if($==1)return R.clone();if($==0)return f.clone();let Q=f.x*R.x+f.y*R.y+f.z*R.z+f.w*R.w;if(Q>.9995){let Vt=new _.Quaternion(f.x+$*(R.x-f.x),f.y+$*(R.y-f.y),f.z+$*(R.z-f.z),f.w+$*(R.w-f.w));return Vt.normalize(),Vt}Q<0&&(R=R.clone().multiplyScalar(-1),Q=-Q),Q>1?Q=1:Q<-1&&(Q=-1);var Ze=Math.acos(Q)*$,_e=R.clone();_e.sub(f.clone().multiplyScalar(Q)),_e.normalize();var it=Math.cos(Ze),lt=Math.sin(Ze),Ye=new _.Quaternion(f.x*it+_e.x*lt,f.y*it+_e.y*lt,f.z*it+_e.z*lt,f.w*it+_e.w*lt);return Ye.normalize(),Ye}constructor(f,R={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new _.Quaternion(0,0,0,1),this.dq=new _.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=R,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=S.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",this.config.backgroundColor!==void 0&&(this.bgColor=S.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,this.config.camerax!==void 0&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=f,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new d.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new _.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new _.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new d.Raycaster(new _.Vector3(0,0,0),new _.Vector3(0,0,0)),this.projector=new d.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=S.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),window.ResizeObserver!==void 0&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),window.IntersectionObserver!==void 0){let $=(Q,Ze)=>{Q.forEach(_e=>{_e.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver($),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch($){console.log("error with glviewer callback: "+$)}}targetedObjects(f,R,$){var Q={x:f,y:R,z:-1};return Array.isArray($)||($=this.selectedAtoms($)),$.length==0?[]:(this.raycaster.setFromCamera(Q,this.camera),this.raycaster.intersectObjects(this.modelGroup,$))}modelToScreen(f){let R=!1;Array.isArray(f)||(f=[f],R=!0);let $=this.renderer.getXRatio(),Q=this.renderer.getYRatio(),Ze=this.col,_e=this.row,it=Ze*(this.WIDTH/$),lt=(Q-_e-1)*(this.HEIGHT/Q),Ye=[],Vt=this.canvasOffset();return f.forEach(Ct=>{let Nl=new _.Vector3(Ct.x,Ct.y,Ct.z);Nl.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Nl,this.camera);let ms=this.WIDTH/$*(Nl.x+1)/2+Vt.left+it,Si=-this.HEIGHT/Q*(Nl.y-1)/2+Vt.top+lt;Ye.push({x:ms,y:Si})}),R&&(Ye=Ye[0]),Ye}screenOffsetToModel(f,R,$){var Q=f/this.WIDTH,Ze=R/this.HEIGHT,_e=$===void 0?this.rotationGroup.position.z:$,it=this.rotationGroup.quaternion,lt=new _.Vector3(0,0,_e);return this.projector.projectVector(lt,this.camera),lt.x+=2*Q,lt.y-=2*Ze,this.projector.unprojectVector(lt,this.camera),lt.z=0,lt.applyQuaternion(it),lt}screenToModelDistance(f,R){let $=this.canvasOffset(),Q=new _.Vector3(R.x,R.y,R.z);Q.applyMatrix4(this.modelGroup.matrixWorld);let Ze=Q.clone();this.projector.projectVector(Q,this.camera);let _e=new _.Vector3(2*(f.x-$.left)/this.WIDTH-1,2*(f.y-$.top)/-this.HEIGHT+1,Q.z);return this.projector.unprojectVector(_e,this.camera),_e.distanceTo(Ze)}setViewChangeCallback(f){typeof f!="function"&&f!=null||(this.viewChangeCallback=f)}setStateChangeCallback(f){typeof f!="function"&&f!=null||(this.stateChangeCallback=f)}getConfig(){return this.config}setConfig(f){this.config=f,f.ambientOcclusion&&this.renderer.enableAmbientOcclusion(f.ambientOcclusion)}getInternalState(){var f={models:[],surfaces:[],shapes:[],labels:[]};for(let R=0;R<this.models.length;R++)this.models[R]&&(f.models[R]=this.models[R].getInternalState());return f}setInternalState(f){this.clear();var R=f.models;for(let $=0;$<R.length;$++)R[$]&&(this.models[$]=new ag($,void 0,this),this.models[$].setInternalState(R[$]));this.render()}setZoomLimits(f,R){f!==void 0&&(this.config.lowerZoomLimit=f),R&&(this.config.upperZoomLimit=R),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(f){f.fov!==void 0&&(this.fov=f.fov,this.camera.fov=this.fov),f.z!==void 0&&(this.CAMERA_Z=f.z,this.camera.z=this.CAMERA_Z),f.orthographic!==void 0&&(this.camera.ortho=f.orthographic),this.setSlabAndFog()}_handleMouseDown(f){if(f.preventDefault(),!this.scene)return;var R=this.getX(f),$=this.getY(f);if(R===void 0)return;this.isDragging=!0,this.mouseButton=f.which,this.mouseStartX=R,this.mouseStartY=$,this.touchHold=!0,this.touchDistanceStart=0,f.targetTouches&&f.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(f)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let Q=this;f.targetTouches&&f.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(Q.touchHold==1){Q.glDOM=Q.renderer.domElement;const Ze=f.targetTouches[0],_e=new PointerEvent("contextmenu",Object.assign(Object.assign({},f),{pageX:Ze.pageX,pageY:Ze.pageY,screenX:Ze.screenX,screenY:Ze.screenY,clientX:Ze.clientX,clientY:Ze.clientY}));Q.glDOM.dispatchEvent(_e)}},this.longTouchDuration))}_handleMouseUp(f){if(this.touchHold=!1,this.isDragging&&this.scene){var R=this.getX(f),$=this.getY(f);if(this.closeEnoughForClick(f)&&this.isInViewer(R,$)){let Q=this.mouseXY(R,$);this.handleClickSelection(Q.x,Q.y,f)}}this.isDragging=!1}_handleMouseScroll(f){if(f.preventDefault(),this.scene){var R=this.getX(f),$=this.getY(f);if(R!==void 0&&(this.control_all||this.isInViewer(R,$))){var Q=.85*(this.CAMERA_Z-this.rotationGroup.position.z),Ze=1;if(f.ctrlKey&&(Ze=-1),f.detail)this.rotationGroup.position.z+=Ze*Q*f.detail/10;else if(f.wheelDelta){let _e=600*f.wheelDelta/(f.wheelDelta+600);this.rotationGroup.position.z-=Ze*Q*_e/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(f){let R=this;return f=f||1,new Promise(function($){let Q=0,Ze=R.viewChangeCallback,_e=[],it=[],lt=Date.now();R.viewChangeCallback=function(){it.push(Date.now()-lt),lt=Date.now(),_e.push(new Promise(Ye=>{R.getCanvas().toBlob(function(Vt){Vt.arrayBuffer().then(Ye)},"image/png")})),Q+=1,Q==f&&(R.viewChangeCallback=Ze,Promise.all(_e).then(Ye=>{let Vt=[];for(let gs=0;gs<Ye.length;gs++){let Yl=(0,c.decode)(Ye[gs]);Vt.push((0,c.toRGBA8)(Yl)[0])}let Ct=R.getCanvas().width,Nl=R.getCanvas().height,ms=(0,c.encode)(Vt,Ct,Nl,0,it),Si=new Blob([ms],{type:"image/png"}),_s=new FileReader;_s.onload=function(gs){$(gs.target.result)},_s.readAsDataURL(Si)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(f){this.hoverDuration=f}mouseXY(f,R){let $=this.canvasOffset(),Q=this.renderer.getXRatio(),Ze=this.renderer.getYRatio(),_e=this.col,it=this.row,lt=_e*(this.WIDTH/Q),Ye=(Ze-it-1)*(this.HEIGHT/Ze);return{x:(f-$.left-lt)/(this.WIDTH/Q)*2-1,y:-(R-$.top-Ye)/(this.HEIGHT/Ze)*2+1}}_handleMouseMove(f){clearTimeout(this.hoverTimeout),f.preventDefault();let R=this.getX(f),$=this.getY(f);if(R===void 0)return;let Q=this.renderer.getXRatio(),Ze=this.renderer.getYRatio(),_e=this.mouseXY(R,$),it=this;this.current_hover!==null&&this.handleHoverContinue(_e.x,_e.y);var lt=0;if((this.control_all||this.isInViewer(R,$))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){it.handleHoverSelection(_e.x,_e.y,f)},this.hoverDuration)),this.isDragging)){f.targetTouches&&(f.targetTouches.length>1||f.targetTouches.length===1&&!this.closeEnoughForClick(f))&&clearTimeout(this.longTouchTimeout);var Ye=(R-this.mouseStartX)/this.WIDTH,Vt=($-this.mouseStartY)/this.HEIGHT;this.touchDistanceStart!=0&&f.targetTouches&&f.targetTouches.length==2?(lt=2,Vt=2*(this.calcTouchDistance(f)-this.touchDistanceStart)/(this.WIDTH+this.HEIGHT)):f.targetTouches&&f.targetTouches.length==3&&(lt=1),Ye*=Q,Vt*=Ze;var Ct,Nl=Math.hypot(Ye,Vt);if(lt==3||this.mouseButton==3&&f.ctrlKey)this.slabNear=this.cslabNear+100*Ye,this.slabFar=this.cslabFar-100*Vt;else if(lt==2||this.mouseButton==3||f.shiftKey)(Ct=.85*(this.CAMERA_Z-this.rotationGroup.position.z))<80&&(Ct=80),this.rotationGroup.position.z=this.cz+Vt*Ct,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(lt==1||this.mouseButton==2||f.ctrlKey){var ms=this.screenOffsetToModel(Q*(R-this.mouseStartX),Ze*($-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,ms)}else if((lt===0||this.mouseButton==1)&&Nl!==0){var Si=Math.sin(Nl*Math.PI)/Nl;this.dq.x=Math.cos(Nl*Math.PI),this.dq.y=0,this.dq.z=Si*Ye,this.dq.w=-Si*Vt,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(f){if(f.preventDefault(),this.closeEnoughForClick(f)){var R=this.mouseStartX,$=this.mouseStartY,Q=this.canvasOffset();let _e=this.mouseXY(R,$),it=_e.x,lt=_e.y,Ye=this.targetedObjects(it,lt,this.contextMenuEnabledObjects);var Ze=null;Ye.length&&(Ze=Ye[0].clickable),Q=this.canvasOffset(),R=this.mouseStartX-Q.left,$=this.mouseStartY-Q.top,this.userContextMenuHandler&&(this.userContextMenuHandler(Ze,R,$,Ye,f),this.isDragging=!1)}}setContainer(f){let R=(0,C.getElement)(f)||this.container;return this.initContainer(R),this}setBackgroundColor(f,R){(R===void 0||R<0||R>1)&&(R=1);var $=S.CC.color(f);return this.scene.fog.color=$,this.bgColor=$.getHex(),this.renderer.setClearColorHex($.getHex(),R),this.show(),this}setProjection(f){this.camera.ortho=f==="orthographic",this.setSlabAndFog()}setViewStyle(f){if((f=f||{}).style=f.style||"",f.style.includes("outline")?this.renderer.enableOutline(f):this.renderer.disableOutline(),f.style.includes("ambientOcclusion")){var R={};f.strength&&(R.strength=f.strength),f.radius&&(R.radius=f.radius),this.renderer.enableAmbientOcclusion(R)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(f){return this.WIDTH=f||this.WIDTH,this.updateSize(),this}setHeight(f){return this.HEIGHT=f||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let f=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let R=!1,$=this.container.querySelector("canvas");$&&$!=this.renderer.getCanvas()?this.config.canvas=$:($.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,R=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),f=!0,R&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),f){let R=this.renderer.supportedExtensions();if(R.regen=!0,this.viewers)for(let $=0,Q=this.viewers.length;$<Q;$++)for(let Ze=0,_e=this.viewers[$].length;Ze<_e;Ze++)this.viewers[$][Ze].render(null,R);this._viewer.render(null,R)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(f){return f===void 0?this.models.length==0?null:this.models[this.models.length-1]:f instanceof ag?f:f in this.models?this.models[f]:this.models.length==0?null:this.models[this.models.length-1]}spin(f,R=1,$=!1){if(clearInterval(this.spinInterval),f===void 0&&(f="y"),typeof f=="boolean"){if(!f)return;f="y"}Array.isArray(f)&&(f={x:f[0],y:f[1],z:f[2]});var Q=this;this.spinInterval=setInterval(function(){!Q.getCanvas().isConnected&&Q.renderer.isLost()&&clearInterval(Q.spinInterval),(!$||Q.container.checkVisibility&&Q.container.checkVisibility())&&Q.rotate(1*R,f)},25)}animateMotion(f,R,$,Q,Ze,_e){var it=Math.ceil(f/20);it<1&&(it=1),this.incAnim();var lt={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(R){let Ct=new Array(it);for(let _s=0;_s<it;_s++){let gs=(_s+1)/it,Yl={mpos:lt.mpos,rz:lt.rz,rot:lt.rot};Yl.mpos=$.clone().sub(lt.mpos).multiplyScalar(gs).add(lt.mpos),Yl.rz=lt.rz+gs*(Q-lt.rz),Yl.rot=H1.slerp(lt.rot,Ze,gs),Yl.cam=_e.clone().sub(lt.cam).multiplyScalar(gs).add(lt.cam),Ct[_s]=Yl}let Nl=0,ms=this,Si=function(){var _s=Ct[Nl];Nl+=1,ms.modelGroup.position=_s.mpos,ms.rotationGroup.position.z=_s.rz,ms.rotationGroup.quaternion=_s.rot,ms.camera.lookAt(_s.cam),Nl<Ct.length?setTimeout(Si,20):ms.decAnim(),ms.show()};setTimeout(Si,20)}else{var Ye={};let Ct=1/it;if($&&(Ye.mpos=$.clone().sub(lt.mpos).multiplyScalar(Ct)),Q!==void 0&&Q!=null&&(Ye.rz=Ct*(Q-lt.rz)),Ze){var Vt=H1.slerp(lt.rot,Ze,Ct);Ye.rot=lt.rot.clone().inverse().multiply(Vt)}_e&&(Ye.cam=_e.clone().sub(lt.cam).multiplyScalar(Ct));let Nl=0,ms=this,Si=function(){Nl+=1,Ye.mpos&&ms.modelGroup.position.add(Ye.mpos),Ye.rz&&(ms.rotationGroup.position.z+=Ye.rz),Ye.rot&&ms.rotationGroup.quaternion.multiply(Ye.rot),Ye.cam&&(ms.lookingAt.add(Ye.cam),ms.camera.lookAt(ms.lookingAt)),Nl<it?setTimeout(Si,20):ms.decAnim(),ms.show()};setTimeout(Si,20)}}rotate(f,R="y",$=0,Q=!1){if(R=="x"?R={x:1,y:0,z:0}:R=="y"?R={x:0,y:1,z:0}:R=="z"&&(R={x:0,y:0,z:1}),R=="vx"?R={vx:1,vy:0,vz:0}:R=="vy"?R={vx:0,vy:1,vz:0}:R=="vz"&&(R={vx:0,vy:0,vz:1}),R.vx!==void 0){var Ze=new _.Vector3(R.vx,R.vy,R.vz);Ze.applyQuaternion(this.rotationGroup.quaternion),R={x:Ze.x,y:Ze.y,z:Ze.z}}var _e=(function(lt){var Ye,Vt,Ct,Nl=Math.sin(lt/2),ms=Math.cos(lt/2);return Ye=R.x*Nl,Vt=R.y*Nl,Ct=R.z*Nl,new _.Quaternion(Ye,Vt,Ct,ms).normalize()})(Math.PI*f/180);if($){var it=new _.Quaternion().copy(this.rotationGroup.quaternion).multiply(_e);this.animateMotion($,Q,this.modelGroup.position,this.rotationGroup.position.z,it,this.lookingAt)}else this.rotationGroup.quaternion.multiply(_e),this.show();return this}surfacesFinished(){for(var f in this.surfaces)if(!this.surfaces[f][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var f=this.modelGroup.position,R=this.rotationGroup.quaternion;return[f.x,f.y,f.z,this.rotationGroup.position.z,R.x,R.y,R.z,R.w]}setView(f,R){return f!==void 0&&(f instanceof Array||f.length!==8)&&this.modelGroup&&this.rotationGroup?(this.modelGroup.position.x=f[0],this.modelGroup.position.y=f[1],this.modelGroup.position.z=f[2],this.rotationGroup.position.z=f[3],this.rotationGroup.quaternion.x=f[4],this.rotationGroup.quaternion.y=f[5],this.rotationGroup.quaternion.z=f[6],this.rotationGroup.quaternion.w=f[7],f[8]!==void 0&&(this.rotationGroup.position.x=f[8],this.rotationGroup.position.y=f[9]),this.show(R),this):this}render(f,R){this.renderer.setViewport(),this.updateClickables();var $,Q,Ze=this.getView();for(this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState()),R||(R=this.renderer.supportedExtensions()),$=0;$<this.models.length;$++)this.models[$]&&this.models[$].globj(this.modelGroup,R);for($=0;$<this.shapes.length;$++)this.shapes[$]&&(this.shapes[$].frame===void 0||this.viewer_frame<0||this.shapes[$].frame<0||this.shapes[$].frame==this.viewer_frame?this.shapes[$].globj(this.modelGroup,R):this.shapes[$].removegl(this.modelGroup));for($=0;$<this.labels.length;$++)R.regen&&(this.labels[$].dispose(),this.modelGroup.remove(this.labels[$].sprite),this.labels[$].setContext(),this.modelGroup.add(this.labels[$].sprite)),this.labels[$]&&this.labels[$].frame!==void 0&&this.labels[$].frame>=0&&(this.modelGroup.remove(this.labels[$].sprite),(this.viewer_frame<0||this.labels[$].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[$].sprite));for($ in this.surfaces)if(this.surfaces.hasOwnProperty($)){var _e=this.surfaces[$];for(Q=0;Q<_e.length;Q++)if(_e.hasOwnProperty(Q)){var it=_e[Q].geo;if(!_e[Q].finished||R.regen){it.verticesNeedUpdate=!0,it.elementsNeedUpdate=!0,it.normalsNeedUpdate=!0,it.colorsNeedUpdate=!0,it.buffersNeedUpdate=!0,_e[Q].mat.needsUpdate=!0,_e[Q].done&&(_e[Q].finished=!0),_e[Q].lastGL&&this.modelGroup.remove(_e[Q].lastGL);var lt=null;if(_e[Q].mat instanceof d.LineBasicMaterial?lt=new d.Line(it,_e[Q].mat):("wireframe"in _e.style&&_e.style.wireframe&&it.setUpWireframe(),lt=new d.Mesh(it,_e[Q].mat)),_e[Q].mat.transparent&&_e[Q].mat.opacity==0?lt.visible=!1:lt.visible=!0,_e[Q].symmetries.length>1||_e[Q].symmetries.length==1&&!_e[Q].symmetries[0].isIdentity()){var Ye,Vt=new d.Object3D;for(Ye=0;Ye<_e[Q].symmetries.length;Ye++){var Ct=lt.clone();Ct.matrix=_e[Q].symmetries[Ye],Ct.matrixAutoUpdate=!1,Vt.add(Ct)}_e[Q].lastGL=Vt,this.modelGroup.add(Vt)}else _e[Q].lastGL=lt,this.modelGroup.add(lt)}}}return this.setView(Ze),typeof f=="function"&&f(this),this}getModelList(f){let R=[];if(f===void 0||f.model===void 0)for(let Q=0;Q<this.models.length;Q++)this.models[Q]&&R.push(this.models[Q]);else{let Q=f.model;Array.isArray(Q)||(Q=[Q]);for(let Ze=0;Ze<Q.length;Ze++)if(typeof Q[Ze]=="number"){var $=Q[Ze];$<0&&($+=this.models.length),R.push(this.models[$])}else R.push(Q[Ze])}return R}getAtomsFromSel(f){var R=[];f===void 0&&(f={});var $=this.getModelList(f);for(let Q=0;Q<$.length;Q++)R=R.concat($[Q].selectedAtoms(f));return R}atomIsSelected(f,R){R===void 0&&(R={});for(var $=this.getModelList(R),Q=0;Q<$.length;Q++)if($[Q].atomIsSelected(f,R))return!0;return!1}selectedAtoms(f){return this.getAtomsFromSel(f)}getUniqueValues(f,R){R===void 0&&(R={});var $=this.getAtomsFromSel(R),Q={};for(var Ze in $)$[Ze].hasOwnProperty(f)&&(Q[$[Ze][f]]=!0);return Object.keys(Q)}pdbData(f){for(var R=this.getAtomsFromSel(f),$="",Q=0,Ze=R.length;Q<Ze;++Q)$+=R[Q].pdbline+`
`;return $}zoom(f=2,R=0,$=!1){var Q=(this.CAMERA_Z-this.rotationGroup.position.z)/f,Ze=this.CAMERA_Z-Q;return R>0?this.animateMotion(R,$,this.modelGroup.position,this.adjustZoomToLimits(Ze),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(Ze),this.show()),this}translate(f,R,$=0,Q=!1){var Ze=f/this.WIDTH,_e=R/this.HEIGHT,it=new _.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(it,this.camera),it.x-=Ze,it.y-=_e,this.projector.unprojectVector(it,this.camera),it.z=0;var lt=this.lookingAt.clone().add(it);return $>0?this.animateMotion($,Q,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,lt):(this.lookingAt=lt,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(f,R,$=0,Q=!1){var Ze=this.screenOffsetToModel(f,R),_e=this.modelGroup.position.clone().add(Ze);return $>0?this.animateMotion($,Q,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=_e,this.show()),this}fitSlab(f){f=f||{};var R=this.getAtomsFromSel(f),$=(0,C.getExtent)(R),Q=$[1][0]-$[0][0],Ze=$[1][1]-$[0][1],_e=$[1][2]-$[0][2],it=Math.hypot(Q,Ze,_e);return it<5&&(it=5),this.slabNear=-it/1.9,this.slabFar=it/2,this}center(f={},R=0,$=!1){var Q,Ze,_e=this.getAtomsFromSel(f),it=(0,C.getExtent)(_e);(0,C.isEmptyObject)(f)?(this.shapes.forEach(Yl=>{if(Yl&&Yl.boundingSphere&&Yl.boundingSphere.center){var Dp=Yl.boundingSphere.center,Op=Yl.boundingSphere.radius;Op>0?(_e.push(new _.Vector3(Dp.x+Op,Dp.y,Dp.z)),_e.push(new _.Vector3(Dp.x-Op,Dp.y,Dp.z)),_e.push(new _.Vector3(Dp.x,Dp.y+Op,Dp.z)),_e.push(new _.Vector3(Dp.x,Dp.y-Op,Dp.z)),_e.push(new _.Vector3(Dp.x,Dp.y,Dp.z+Op)),_e.push(new _.Vector3(Dp.x,Dp.y,Dp.z-Op))):_e.push(Dp)}}),it=(0,C.getExtent)(_e),Q=_e,Ze=it):(Q=this.getAtomsFromSel({}),Ze=(0,C.getExtent)(Q));var lt=new _.Vector3(it[2][0],it[2][1],it[2][2]),Ye=Ze[1][0]-Ze[0][0],Vt=Ze[1][1]-Ze[0][1],Ct=Ze[1][2]-Ze[0][2],Nl=Math.hypot(Ye,Vt,Ct);Nl<5&&(Nl=5),this.slabNear=-Nl/1.9,this.slabFar=Nl/2,Ye=it[1][0]-it[0][0],Vt=it[1][1]-it[0][1],Ct=it[1][2]-it[0][2],(Nl=Math.hypot(Ye,Vt,Ct))<5&&(Nl=5);for(var ms=25,Si=0;Si<_e.length;Si++)if(_e[Si]){var _s=lt.distanceToSquared(_e[Si]);_s>ms&&(ms=_s)}Nl=2*Math.sqrt(ms);var gs=lt.clone().multiplyScalar(-1);return R>0?this.animateMotion(R,$,gs,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=gs,this.show()),this}zoomTo(f={},R=0,$=!1){let Q=this.getAtomsFromSel(f),Ze=(0,C.getExtent)(Q),_e=Ze;if((0,C.isEmptyObject)(f)){let Dp=Q&&Q.length;if(this.shapes.forEach(Op=>{if(Op&&Op.boundingSphere){if(Op.boundingSphere.box){let _0=Op.boundingSphere.box;Q.push(new _.Vector3(_0.min.x,_0.min.y,_0.min.z)),Q.push(new _.Vector3(_0.max.x,_0.max.y,_0.max.z))}else if(Op.boundingSphere.center){var e0=Op.boundingSphere.center,Xp=Op.boundingSphere.radius;Xp>0?(Q.push(new _.Vector3(e0.x+Xp,e0.y,e0.z)),Q.push(new _.Vector3(e0.x-Xp,e0.y,e0.z)),Q.push(new _.Vector3(e0.x,e0.y+Xp,e0.z)),Q.push(new _.Vector3(e0.x,e0.y-Xp,e0.z)),Q.push(new _.Vector3(e0.x,e0.y,e0.z+Xp)),Q.push(new _.Vector3(e0.x,e0.y,e0.z-Xp))):Q.push(e0)}}}),_e=(0,C.getExtent)(Q),!Dp)for(let Op=0;Op<3;Op++)Ze[2][Op]=(_e[0][Op]+_e[1][Op])/2}else{let Dp=this.getAtomsFromSel({});_e=(0,C.getExtent)(Dp)}var it=new _.Vector3(Ze[2][0],Ze[2][1],Ze[2][2]),lt=_e[1][0]-_e[0][0],Ye=_e[1][1]-_e[0][1],Vt=_e[1][2]-_e[0][2],Ct=Math.hypot(lt,Ye,Vt);Ct<5&&(Ct=5),this.slabNear=-Ct/1.9,this.slabFar=Ct/2,Object.keys(f).length===0&&(this.slabNear=Math.min(2*-Ct,-50),this.slabFar=Math.max(2*Ct,50));var Nl=this.config.minimumZoomToDistance||5;lt=Ze[1][0]-Ze[0][0],Ye=Ze[1][1]-Ze[0][1],Vt=Ze[1][2]-Ze[0][2],(Ct=Math.hypot(lt,Ye,Vt))<Nl&&(Ct=Nl);for(var ms=Nl*Nl,Si=0;Si<Q.length;Si++)if(Q[Si]){var _s=it.distanceToSquared(Q[Si]);_s>ms&&(ms=_s)}Ct=2*Math.sqrt(ms);var gs=it.clone().multiplyScalar(-1),Yl=-(.5*Ct/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return Yl=this.adjustZoomToLimits(Yl),R>0?this.animateMotion(R,$,gs,Yl,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=gs,this.rotationGroup.position.z=Yl,this.show()),this}setSlab(f,R){this.slabNear=f,this.slabFar=R}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(f,R={},$,Q=!1){if($){var Ze=(0,C.getExtent)(this.getAtomsFromSel($));R.position={x:Ze[2][0],y:Ze[2][1],z:Ze[2][2]}}var _e=new Xm(f,R);return _e.setContext(),this.modelGroup.add(_e.sprite),this.labels.push(_e),Q||this.show(),_e}addResLabels(f,R,$=!1){let Q=this.labels.length;return this.applyToModels("addResLabels",f,R,$),this.show(),this.labels.slice(Q)}addPropertyLabels(f,R,$){return this.applyToModels("addPropertyLabels",f,R,$),this.show(),this}removeLabel(f){for(var R=0;R<this.labels.length;R++)if(this.labels[R]==f){this.labels.splice(R,1),f.dispose(),this.modelGroup.remove(f.sprite);break}return this.show(),this}removeAllLabels(){for(var f=0;f<this.labels.length;f++)this.labels[f]&&this.labels[f].sprite&&this.modelGroup.remove(this.labels[f].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var f=0;f<this.labels.length;f++)this.labels[f]&&this.labels[f].hide();return this.show(),this}showAllLabels(){for(var f=0;f<this.labels.length;f++)this.labels[f]&&this.labels[f].show();return this.show(),this}setLabelStyle(f,R){return this.modelGroup.remove(f.sprite),f.dispose(),f.stylespec=R,f.setContext(),this.modelGroup.add(f.sprite),this.show(),f}setLabelText(f,R){return this.modelGroup.remove(f.sprite),f.dispose(),f.text=R,f.setContext(),this.modelGroup.add(f.sprite),this.show(),f}addShape(f){var R=new S0(f=f||{});return R.shapePosition=this.shapes.length,this.shapes.push(R),R}removeShape(f){if(!f)return this;for(f.removegl(this.modelGroup),delete this.shapes[f.shapePosition];this.shapes.length>0&&this.shapes[this.shapes.length-1]===void 0;)this.shapes.pop();return this}removeAllShapes(){for(var f=0;f<this.shapes.length;f++){var R=this.shapes[f];R&&R.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(f){if(f.hasOwnProperty("x")&&f.hasOwnProperty("y")&&f.hasOwnProperty("z"))return f;var R=this.getAtomsFromSel(f);if(R.length==0)return{x:0,y:0,z:0};var $=(0,C.getExtent)(R);return{x:$[0][0]+($[1][0]-$[0][0])/2,y:$[0][1]+($[1][1]-$[0][1])/2,z:$[0][2]+($[1][2]-$[0][2])/2}}addSphere(f){(f=f||{}).center=this.getSelectionCenter(f.center);var R=new S0(f);return R.shapePosition=this.shapes.length,R.addSphere(f),this.shapes.push(R),R.finalize(),R}addBox(f={}){f.corner!=null&&(f.corner=this.getSelectionCenter(f.corner)),f.center!=null&&(f.center=this.getSelectionCenter(f.center));var R=new S0(f);return R.shapePosition=this.shapes.length,R.addBox(f),this.shapes.push(R),R.finalize(),R}addArrow(f={}){f.start=this.getSelectionCenter(f.start),f.end=this.getSelectionCenter(f.end);var R=new S0(f);return R.shapePosition=this.shapes.length,R.addArrow(f),this.shapes.push(R),R.finalize(),R}addCylinder(f={}){f.start=this.getSelectionCenter(f.start),f.end=this.getSelectionCenter(f.end);var R=new S0(f);return R.shapePosition=this.shapes.length,f.dashed?R.addDashedCylinder(f):R.addCylinder(f),this.shapes.push(R),R.finalize(),R}addCurve(f={}){var R=new S0(f);return R.shapePosition=this.shapes.length,R.addCurve(f),this.shapes.push(R),R.finalize(),R}addLine(f={}){f.start=this.getSelectionCenter(f.start),f.end=this.getSelectionCenter(f.end),f.wireframe=!0;var R=new S0(f);return R.shapePosition=this.shapes.length,f.dashed?R=this.addLineDashed(f,R):R.addLine(f),this.shapes.push(R),R.finalize(),R}addUnitCell(f,R){f=this.getModel(f),(R=R||{alabel:"a",blabel:"b",clabel:"c"}).box=R.box||{},R.astyle=R.astyle||{color:"red",radius:.1,midpos:-1},R.bstyle=R.bstyle||{color:"green",radius:.1,midpos:-1},R.cstyle=R.cstyle||{color:"blue",radius:.1,midpos:-1},R.alabelstyle=R.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},R.blabelstyle=R.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},R.clabelstyle=R.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},f.unitCellObjects&&this.removeUnitCell(f),f.unitCellObjects={shapes:[],labels:[]};var $=f.getCrystData(),Q=null;if($){if($.matrix)Q=$.matrix;else{var Ze,_e,it,lt=$.a,Ye=$.b,Vt=$.c,Ct=$.alpha,Nl=$.beta,ms=$.gamma;Ct=Ct*Math.PI/180,Nl=Nl*Math.PI/180,ms=ms*Math.PI/180,Ze=Math.cos(Nl),_e=(Math.cos(Ct)-Math.cos(Nl)*Math.cos(ms))/Math.sin(ms),it=Math.sqrt(Math.max(0,1-Ze*Ze-_e*_e)),Q=new _.Matrix3(lt,Ye*Math.cos(ms),Vt*Ze,0,Ye*Math.sin(ms),Vt*_e,0,0,Vt*it)}var Si=[new _.Vector3(0,0,0),new _.Vector3(1,0,0),new _.Vector3(0,1,0),new _.Vector3(0,0,1),new _.Vector3(1,1,0),new _.Vector3(0,1,1),new _.Vector3(1,0,1),new _.Vector3(1,1,1)];if($.matrix4)for(let gs=0;gs<Si.length;gs++)$.size&&Si[gs].multiplyVectors(Si[gs],$.size),Si[gs]=Si[gs].applyMatrix4($.matrix4);else for(let gs=0;gs<Si.length;gs++)Si[gs]=Si[gs].applyMatrix3(Q);if(R.box&&!R.box.hidden){R.box.wireframe=!0;var _s=new S0(R.box);_s.shapePosition=this.shapes.length,_s.addLine({start:Si[0],end:Si[1]}),_s.addLine({start:Si[0],end:Si[2]}),_s.addLine({start:Si[1],end:Si[4]}),_s.addLine({start:Si[2],end:Si[4]}),_s.addLine({start:Si[0],end:Si[3]}),_s.addLine({start:Si[3],end:Si[5]}),_s.addLine({start:Si[2],end:Si[5]}),_s.addLine({start:Si[1],end:Si[6]}),_s.addLine({start:Si[4],end:Si[7]}),_s.addLine({start:Si[6],end:Si[7]}),_s.addLine({start:Si[3],end:Si[6]}),_s.addLine({start:Si[5],end:Si[7]}),this.shapes.push(_s),f.unitCellObjects.shapes.push(_s),_s.finalize()}if(!R.astyle.hidden){R.astyle.start=Si[0],R.astyle.end=Si[1];let gs=this.addArrow(R.astyle);f.unitCellObjects.shapes.push(gs)}if(!R.bstyle.hidden){R.bstyle.start=Si[0],R.bstyle.end=Si[2];let gs=this.addArrow(R.bstyle);f.unitCellObjects.shapes.push(gs)}if(!R.cstyle.hidden){R.cstyle.start=Si[0],R.cstyle.end=Si[3];let gs=this.addArrow(R.cstyle);f.unitCellObjects.shapes.push(gs)}if(R.alabel){R.alabelstyle.position=Si[1];let gs=this.addLabel(R.alabel,R.alabelstyle);f.unitCellObjects.labels.push(gs)}if(R.blabel){R.blabelstyle.position=Si[2];let gs=this.addLabel(R.blabel,R.blabelstyle);f.unitCellObjects.labels.push(gs)}if(R.clabel){R.clabelstyle.position=Si[3];let gs=this.addLabel(R.clabel,R.clabelstyle);f.unitCellObjects.labels.push(gs)}}}removeUnitCell(f){if((f=this.getModel(f)).unitCellObjects){let R=this;f.unitCellObjects.shapes.forEach(function($){R.removeShape($)}),f.unitCellObjects.labels.forEach(function($){R.removeLabel($)})}delete f.unitCellObjects}replicateUnitCell(f=3,R=f,$=R,Q,Ze,_e){let it=(Q=this.getModel(Q)).getCrystData();if(it){const lt=Q.selectedAtoms({}),Ye=it.matrix;let Vt=function(Nl){return Nl%2==0?-Nl/2:Math.ceil(Nl/2)};f<=1&&R<=1&&$<=1&&(_e=!0,f=R=$=3);let Ct=function(Nl,ms,Si){return!1};if(_e){const Nl=new _.Matrix3().getInverse3(Ye);Ct=function(ms,Si,_s){let gs=new _.Vector3(ms,Si,_s).applyMatrix3(Nl);return!(gs.x>-1e-4&&gs.x<1.0001&&gs.y>-1e-4&&gs.y<1.0001&&gs.z>-1e-4&&gs.z<1.0001)}}for(let Nl=0;Nl<f;Nl++)for(let ms=0;ms<R;ms++)for(let Si=0;Si<$;Si++){if(Nl==0&&ms==0&&Si==0)continue;let _s=new _.Vector3(Vt(Nl),Vt(ms),Vt(Si));_s.applyMatrix3(Ye);let gs=[];for(let Yl=0;Yl<lt.length;Yl++){let Dp=lt[Yl].x+_s.x,Op=lt[Yl].y+_s.y,e0=lt[Yl].z+_s.z;if(Ct(Dp,Op,e0))continue;let Xp={};for(let _0 in lt[Yl])Xp[_0]=lt[Yl][_0];Xp.x=Dp,Xp.y=Op,Xp.z=e0,gs.push(Xp)}Q.addAtoms(gs)}Ze&&Q.assignBonds()}}addLineDashed(f,R){var $,Q;f.dashLength=f.dashLength||.5,f.gapLength=f.gapLength||.5,$=f.start?new _.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):new _.Vector3(0,0,0),Q=f.end?new _.Vector3(f.end.x,f.end.y||0,f.end.z||0):new _.Vector3(0,0,0);var Ze,_e,it,lt=new _.Vector3,Ye=new _.Vector3,Vt=new _.Vector3,Ct=$.clone(),Nl=0;for(lt.subVectors(Q,$),Ze=lt.length(),lt.normalize(),Ye=lt.clone(),Vt=lt.clone(),Ye.multiplyScalar(f.dashLength),Vt.multiplyScalar(f.gapLength),_e=Ye.length(),it=Vt.length();Nl<Ze;){if(Nl+_e>Ze){f.start=$,f.end=Q,R.addLine(f);break}Ct.addVectors($,Ye),f.start=$,f.end=Ct,R.addLine(f),$=Ct.clone(),Nl+=_e,Ct.addVectors($,Vt),$=Ct.clone(),Nl+=it}return R.finalize(),R}addCustom(f){var R=new S0(f=f||{});return R.shapePosition=this.shapes.length,R.addCustom(f),this.shapes.push(R),R.finalize(),R}addVolumetricData(f,R,$={}){var Q=new x0.VolumeData(f,R);return $.hasOwnProperty("transferfn")?this.addVolumetricRender(Q,$):this.addIsosurface(Q,$)}addIsosurface(f,R={},$){var Q=new S0(R);return Q.shapePosition=this.shapes.length,Q.addIsosurface(f,R,$,this),this.shapes.push(Q),Q}addVolumetricRender(f,R){var $=new Nm(f,R=R||{},this);return $.shapePosition=this.shapes.length,this.shapes.push($),$}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(f){if(f){this.scene.fog=new d.Fog(this.bgColor,100,200),this.config.disableFog=!1;const R=f;R.fogStart==null?this.fogStart=.4:this.fogStart=R.fogStart,R.fogEnd==null?this.fogEnd=1:this.fogEnd=R.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(f){this.viewer_frame=f;let R=this;return new Promise(function($){var Q=R.models.map(function(Ze){return Ze.setFrame(f)});Promise.all(Q).then(function(){$()})})}getFrame(){return this.viewer_frame}getNumFrames(){var f=0;for(let R=0;R<this.models.length;R++)this.models[R].getNumFrames()>f&&(f=this.models[R].getNumFrames());for(let R=0;R<this.shapes.length;R++)this.shapes[R].frame&&this.shapes[R].frame>=f&&(f=this.shapes[R].frame+1);for(let R=0;R<this.labels.length;R++)this.labels[R].frame&&this.labels[R].frame>=f&&(f=this.labels[R].frame+1);return f}getNextModelId(){return this.models.length}animate(f){this.incAnim();var R=100,$="forward",Q=1/0;(f=f||{}).interval&&(R=f.interval),f.loop&&($=f.loop),f.reps&&(Q=f.reps);var Ze=this.getNumFrames(),_e=this,it=0;f.startFrame&&(it=f.startFrame%Ze);var lt=1;f.step&&(Q/=lt=f.step);var Ye,Vt,Ct=0,Nl=Ze*Q,ms=new Date,Si=function(_s){ms=new Date,_s=="forward"?_e.setFrame(it).then(function(){it=(it+lt)%Ze,Ye()}):_s=="backward"?_e.setFrame(Ze-1-it).then(function(){it=(it+lt)%Ze,Ye()}):_e.setFrame(it).then(function(){lt*=(it+=lt)%(Ze-1)==0?-1:1,Ye()})};return Ye=function(){if(_e.render(),_e.getCanvas().isConnected)if(++Ct>=Nl||!_e.isAnimated())Vt.cancel(),_e.animationTimers.delete(Vt),_e.decAnim();else{var _s=R-(new Date().getTime()-ms.getTime());_s=_s>0?_s:0,Vt.cancel(),_e.animationTimers.delete(Vt),Vt=new C.PausableTimer(Si,_s,$),_e.animationTimers.add(Vt)}else _e.stopAnimate()},Vt=new C.PausableTimer(Si,0,$),this.animationTimers.add(Vt),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(f){f.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(f){f.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(f){f.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(f){return f&&!f.defaultcolors?(f.defaultcolors=this.defaultcolors,f.cartoonQuality=f.cartoonQuality||this.config.cartoonQuality):f===void 0&&(f={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),f}addModel(f,R="",$){$=this.getModelOpt($);var Q=new ag(this.models.length,$,this);return Q.addMolData(f,R,$),this.models.push(Q),Q}addModels(f,R,$){($=this.getModelOpt($)).multimodel=!0,$.frames=!0;for(var Q=ag.parseMolData(f,R,$),Ze=0;Ze<Q.length;Ze++){var _e=new ag(this.models.length,$,this);_e.setAtomDefaults(Q[Ze]),_e.addFrame(Q[Ze]),_e.setFrame(0),Q.modelData&&_e.setModelData(Q.modelData[Ze]),_e.setDontDuplicateAtoms(!$.duplicateAssemblyAtoms),this.models.push(_e)}return this.models}addModelsAsFrames(f,R,$){($=this.getModelOpt($)).multimodel=!0,$.frames=!0;var Q=new ag(this.models.length,$,this);return Q.addMolData(f,R,$),this.models.push(Q),Q}addAsOneMolecule(f,R,$){($=this.getModelOpt($)).multimodel=!0,$.onemol=!0;var Q=new ag(this.models.length,$,this);return Q.addMolData(f,R,$),this.models.push(Q),Q}removeModel(f){if(f=this.getModel(f)){for(f.removegl(this.modelGroup),delete this.models[f.getID()];this.models.length>0&&this.models[this.models.length-1]===void 0;)this.models.pop();return this}}removeAllModels(){for(var f=0;f<this.models.length;f++){var R=this.models[f];R&&R.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(f,R){var $={};return $.m=R===void 0?this.models.map(function(Q){return Q.toCDObject(f)}):[this.models[R].toCDObject()],JSON.stringify($)}exportVRML(){var f=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new d.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var R=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=f,R}createModelFrom(f,R=!1){for(var $=new ag(this.models.length,this.defaultcolors,this),Q=0;Q<this.models.length;Q++)if(this.models[Q]){var Ze=this.models[Q].selectedAtoms(f);$.addAtoms(Ze),R&&this.models[Q].removeAtoms(Ze)}return this.models.push($),$}applyToModels(f,R,$,Q,Ze,_e,it){for(var lt=this.getModelList(R),Ye=0;Ye<lt.length;Ye++)lt[Ye][f](R,$,Q,Ze,_e,it)}setStyle(f,R){return R===void 0&&(R=f,f={}),this.applyToModels("setStyle",f,R,!1),this}addStyle(f,R){return R===void 0&&(R=f,f={}),this.applyToModels("setStyle",f,R,!0),this}setClickable(f,R,$){return this.applyToModels("setClickable",f,R,$),this}setHoverable(f,R,$,Q){return this.applyToModels("setHoverable",f,R,$,Q),this}enableContextMenu(f,R){return this.applyToModels("enableContextMenu",f,R),this}vibrate(f,R,$,Q){return this.applyToModels("vibrate",f,R,$,Q),this}setColorByProperty(f,R,$,Q){return this.applyToModels("setColorByProperty",f,R,$,Q),this}setColorByElement(f,R){return this.applyToModels("setColorByElement",f,R),this}static getAtomsWithin(f,R){var $=[];for(let Ze=0;Ze<f.length;Ze++){var Q=f[Ze];Q!==void 0&&(Q.x<R[0][0]||Q.x>R[1][0]||Q.y<R[0][1]||Q.y>R[1][1]||Q.z<R[0][2]||Q.z>R[1][2]||$.push(Q))}return $}static volume(f){return(f[1][0]-f[0][0])*(f[1][1]-f[0][1])*(f[1][2]-f[0][2])}carveUpExtent(f,R,$){let Q=[],Ze={};for(let Vt=0,Ct=R.length;Vt<Ct;Vt++)Ze[R[Vt].index]=Vt;let _e=function(Vt){let Ct=[];for(let Nl=0,ms=Vt.length;Nl<ms;Nl++)Vt[Nl].index in Ze&&Ct.push(Ze[Vt[Nl].index]);return Ct},it=function(Vt){let Ct=[];return Ct[0]=[Vt[0][0],Vt[0][1],Vt[0][2]],Ct[1]=[Vt[1][0],Vt[1][1],Vt[1][2]],Ct},lt=function(Vt){if(H1.volume(Vt)<H1.maxVolume)return[Vt];var Ct,Nl=Vt[1][0]-Vt[0][0],ms=Vt[1][1]-Vt[0][1],Si=Vt[1][2]-Vt[0][2];Ct=Nl>ms&&Nl>Si?0:ms>Nl&&ms>Si?1:2;var _s=it(Vt),gs=it(Vt),Yl=(Vt[1][Ct]-Vt[0][Ct])/2+Vt[0][Ct];_s[1][Ct]=Yl,gs[0][Ct]=Yl;var Dp=lt(_s),Op=lt(gs);return Dp.concat(Op)},Ye=lt(f);for(let Vt=0,Ct=Ye.length;Vt<Ct;Vt++){let Nl=it(Ye[Vt]);Nl[0][0]-=6,Nl[0][1]-=6,Nl[0][2]-=6,Nl[1][0]+=6,Nl[1][1]+=6,Nl[1][2]+=6;let ms=H1.getAtomsWithin(R,Nl),Si=H1.getAtomsWithin($,Ye[Vt]);Q.push({extent:Ye[Vt],atoms:_e(ms),toshow:_e(Si)})}return Q}static generateSurfaceMesh(f,R,$){var Q=new d.Geometry(!0),Ze=Q.updateGeoGroup(0),_e=[];for(let U0=0,E0=f.length;U0<E0;U0++){var it=f[U0];it&&(it.surfaceColor!==void 0?_e[U0]=it.surfaceColor:it.color&&(_e[U0]=S.CC.color(it.color)))}var lt=Ze.vertexArray,Ye=R.vertices;for(let U0=0,E0=Ye.length;U0<E0;U0++){let ym=3*Ze.vertices;lt[ym]=Ye[U0].x,lt[ym+1]=Ye[U0].y,lt[ym+2]=Ye[U0].z,Ze.vertices++}var Vt=Ze.colorArray;let Ct=Ze.atomArray;if($.voldata&&$.volscheme){var Nl=$.volscheme,ms=$.voldata,Si=Nl.range()||[-1,1];for(let U0=0,E0=Ye.length;U0<E0;U0++){let ym=Ye[U0].atomid,mm=ms.getVal(Ye[U0].x,Ye[U0].y,Ye[U0].z),Vm=S.CC.color(Nl.valueToHex(mm,Si)),Pm=3*U0;Vt[Pm]=Vm.r,Vt[Pm+1]=Vm.g,Vt[Pm+2]=Vm.b,Ct[U0]=f[ym]}}else if(_e.length>0)for(let U0=0,E0=Ye.length;U0<E0;U0++){let ym=Ye[U0].atomid,mm=3*U0;Vt[mm]=_e[ym].r,Vt[mm+1]=_e[ym].g,Vt[mm+2]=_e[ym].b,Ct[U0]=f[ym]}var _s=R.faces;Ze.faceidx=_s.length,Q.initTypedArrays();var gs,Yl,Dp,Op,e0=Ze.vertexArray,Xp=Ze.normalArray;for(let U0=0,E0=_s.length;U0<E0;U0+=3){var _0=3*_s[U0],D0=3*_s[U0+1],O0=3*_s[U0+2];gs=new _.Vector3(e0[_0],e0[_0+1],e0[_0+2]),Yl=new _.Vector3(e0[D0],e0[D0+1],e0[D0+2]),(Dp=new _.Vector3(e0[O0],e0[O0+1],e0[O0+2])).subVectors(Dp,Yl),gs.subVectors(gs,Yl),Dp.cross(gs),(Op=Dp).normalize(),Xp[_0]+=Op.x,Xp[D0]+=Op.x,Xp[O0]+=Op.x,Xp[_0+1]+=Op.y,Xp[D0+1]+=Op.y,Xp[O0+1]+=Op.y,Xp[_0+2]+=Op.z,Xp[D0+2]+=Op.z,Xp[O0+2]+=Op.z}return Ze.faceArray=new Uint16Array(_s),new d.Mesh(Q,$)}static generateMeshSyncHelper(f,R,$,Q,Ze,_e){var it=new Wl;return it.initparm(R,f!==1,_e),it.fillvoxels(Ze,$),it.buildboundary(),f!=_v.SES&&f!=_v.MS||(it.fastdistancemap(),it.boundingatom(!1),it.fillvoxelswaals(Ze,$)),it.marchingcube(f),it.getFacesAndVertices(Q)}static getMatWithStyle(f){let R=null;for(var $ in R=f.onesided?new d.MeshLambertMaterial:new d.MeshDoubleLambertMaterial,R.vertexColors=d.Coloring.VertexColors,f)$==="color"||$==="map"||f.hasOwnProperty($)&&(R[$]=f[$]);return f.opacity!==void 0&&(f.opacity===1?R.transparent=!1:R.transparent=!0),f.wireframe!==void 0&&(R.wireframe=f.wireframe),R}addMesh(f){let R={geo:f.geometry,mat:f.material,done:!0,finished:!1};var $=this.nextSurfID();return this.surfaces[$]=new N1([R]),$}static shallowCopy(f){var R=[];let $=f.length;for(let Q=0;Q<$;Q++)R[Q]=(0,C.extend)({},f[Q]);return R}addSurface(f,R={},$={},Q,Ze,_e){let it=this.nextSurfID(),lt=null,Ye=this,Vt=_v.VDW;typeof f=="string"?H1.surfaceTypeMap[f.toUpperCase()]!==void 0?Vt=H1.surfaceTypeMap[f]:console.log("Surface type : "+f+" is not recognized"):typeof f=="number"&&(Vt=f);var Ct=null,Nl=null,ms=H1.shallowCopy(this.getAtomsFromSel($));Ct=Q?H1.shallowCopy(this.getAtomsFromSel(Q)):ms,(0,C.adjustVolumeStyle)(R);var Si,_s=!1;for(Si=0;Si<this.models.length;Si++)if(this.models[Si]){var gs=this.models[Si].getSymmetries();if(gs.length>1||gs.length==1&&!gs[0].isIdentity()){_s=!0;break}}var Yl=function(D0,O0,U0){var E0;Nl=Ze?H1.shallowCopy(Ye.getAtomsFromSel(Ze)):U0;var ym=(0,C.getExtent)(U0,!0);if(R.map&&R.map.prop){var mm=R.map.prop;let $m=(0,A.getGradient)(R.map.scheme||R.map.gradient||new A.Gradient.RWB),R1=$m.range();R1||(R1=(0,C.getPropertyRange)(U0,mm)),R.colorscheme={prop:mm,gradient:$m}}for(let $m=0,R1=O0.length;$m<R1;$m++)(E0=O0[$m]).surfaceColor=(0,C.getColorFromStyle)(E0,R);var Vm=H1.volume(ym),Pm=Ye.carveUpExtent(ym,O0,U0);if(Nl&&Nl.length&&Nl.length>0){var a1=(0,C.getExtent)(Nl,!0);Pm.sort(function($m,R1){var k1=function(Jm,I1){var ug=Jm.extent,O1=ug[1][0]-ug[0][0],s1=ug[1][1]-ug[0][1],yg=ug[1][2]-ug[0][2],Z1=O1-I1[2][0];Z1*=Z1;var pg=s1-I1[2][1];pg*=pg;var J1=yg-I1[2][2];return Z1+pg+(J1*=J1)};return k1($m,a1)-k1(R1,a1)})}var h1=[];for(let $m=0,R1=O0.length;$m<R1;$m++)E0=O0[$m],h1[$m]={x:E0.x,y:E0.y,z:E0.z,serial:$m,elem:E0.elem};var Hm=!!Mv;if(typeof $3Dmol<"u"&&$3Dmol.SurfaceWorker!==void 0||(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),Hm=!0),Hm){var w1=function($m){return new Promise(function(R1){for(var k1=H1.generateMeshSyncHelper(Vt,Pm[$m].extent,Pm[$m].atoms,Pm[$m].toshow,h1,Vm),Jm=Mm({vertexArr:k1.vertices,faceArr:k1.faces}),I1=0,ug=Jm.length;I1<ug;I1++){k1={vertices:Jm[I1].vertexArr,faces:Jm[I1].faceArr};var O1=H1.generateSurfaceMesh(O0,k1,lt);(0,C.mergeGeos)(D0.geo,O1)}Ye.render(),R1()})},_m=[];for(let $m=0;$m<Pm.length;$m++)_m.push(w1($m));return Promise.all(_m).then(function(){return D0.done=!0,Ye.render(),Promise.resolve(it)})}var Om=[];Vt<0&&(Vt=0);for(let $m=0,R1=H1.numWorkers;$m<R1;$m++){var D1=new Worker($3Dmol.SurfaceWorker);Om.push(D1),D1.postMessage({type:-1,atoms:h1,volume:Vm})}return new Promise(function($m,R1){var k1=0,Jm=function(){Om&&Om.length&&Om.forEach(function(s1){s1&&s1.terminate&&s1.terminate()})},I1=function(s1){for(var yg=Mm({vertexArr:s1.data.vertices,faceArr:s1.data.faces}),Z1=0,pg=yg.length;Z1<pg;Z1++){var J1={vertices:yg[Z1].vertexArr,faces:yg[Z1].faceArr},wg=H1.generateSurfaceMesh(O0,J1,lt);(0,C.mergeGeos)(D0.geo,wg)}Ye.render(),++k1==Pm.length&&(D0.done=!0,Jm(),$m(it))},ug=function(s1){Jm(),console.log(s1.message+" ("+s1.filename+":"+s1.lineno+")"),R1(s1)};for(let s1=0;s1<Pm.length;s1++){var O1=Om[s1%Om.length];O1.onmessage=I1,O1.onerror=ug,O1.postMessage({type:Vt,expandedExtent:Pm[s1].extent,extendedAtoms:Pm[s1].atoms,atomsToShow:Pm[s1].toshow})}})};R=R||{},lt=H1.getMatWithStyle(R);let Dp=new N1([]);Dp.style=R,Dp.atomsel=$,Dp.allsel=Q,Dp.focus=Ze;var Op=null;if(_s){var e0={},Xp={};for(Si=0;Si<this.models.length;Si++)e0[Si]=[],Xp[Si]=[];for(Si=0;Si<Ct.length;Si++)e0[Ct[Si].model].push(Ct[Si]);for(Si=0;Si<ms.length;Si++)Xp[ms[Si].model].push(ms[Si]);var _0=[];for(Si=0;Si<this.models.length;Si++)Xp[Si].length>0&&(Dp.push({geo:new d.Geometry(!0),mat:lt,done:!1,finished:!1,symmetries:this.models[Si].getSymmetries()}),_0.push(Yl(Dp[Dp.length-1],e0[Si],Xp[Si])));Op=Promise.all(_0)}else Dp.push({geo:new d.Geometry(!0),mat:lt,done:!1,finished:!1,symmetries:[new _.Matrix4]}),Op=Yl(Dp[Dp.length-1],Ct,ms);return this.surfaces[it]=Dp,Op.surfid=it,_e&&typeof _e=="function"?(Op.then(function(D0){_e(D0)}),it):Op}setSurfaceMaterialStyle(f,R){if((0,C.adjustVolumeStyle)(R),this.surfaces[f]){var $=this.surfaces[f];for(let Ze=0;Ze<$.length;Ze++){var Q=$[Ze].mat=H1.getMatWithStyle(R);if($[Ze].mat.side=d.FrontSide,R.wireframe&&$[Ze].geo.setUpWireframe(),R.color){$[Ze].mat.color=S.CC.color(R.color),$[Ze].geo.colorsNeedUpdate=!0;const _e=S.CC.color(R.color);$[Ze].geo.setColor(_e)}else if(Q.voldata&&Q.volscheme){const _e=Q.volscheme,it=Q.voldata,lt=S.CC,Ye=_e.range()||[-1,1];$[Ze].geo.setColors(function(Vt,Ct,Nl){let ms=it.getVal(Vt,Ct,Nl);return lt.color(_e.valueToHex(ms,Ye))})}else{$[Ze].geo.colorsNeedUpdate=!0;for(let _e of $[Ze].geo.geometryGroups)for(let it=0;it<_e.vertices;it++){let lt=(0,C.getColorFromStyle)(_e.atomArray[it],R),Ye=3*it;_e.colorArray[Ye]=lt.r,_e.colorArray[Ye+1]=lt.g,_e.colorArray[Ye+2]=lt.b}}$[Ze].finished=!1}}return this}getSurface(f){return this.surfaces[f]}removeSurface(f){for(var R=this.surfaces[f],$=0;$<R.length;$++)R[$]&&R[$].lastGL&&(R[$].geo!==void 0&&R[$].geo.dispose(),R[$].mat!==void 0&&R[$].mat.dispose(),this.modelGroup.remove(R[$].lastGL));return delete this.surfaces[f],this.show(),this}removeAllSurfaces(){for(var f in this.surfaces)if(this.surfaces.hasOwnProperty(f)){for(var R=this.surfaces[f],$=0;$<R.length;$++)R[$]&&R[$].lastGL&&(R[$].geo!==void 0&&R[$].geo.dispose(),R[$].mat!==void 0&&R[$].mat.dispose(),this.modelGroup.remove(R[$].lastGL));delete this.surfaces[f]}return this.show(),this}jmolMoveTo(){var f=this.modelGroup.position,R="center { "+-f.x+" "+-f.y+" "+-f.z+" }; ",$=this.rotationGroup.quaternion;return R+="moveto .5 quaternion { "+$.x+" "+$.y+" "+$.z+" "+$.w+" };"}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(f,R){R=R||{};var $=this.getAtomsFromSel(R);if(typeof f=="function")for(let _e=0,it=$.length;_e<it;_e++)f($[_e]);else for(let _e=0,it=$.length;_e<it;_e++){var Q=$[_e];for(let lt=0,Ye=f.length;lt<Ye;lt++){let Vt=f[lt];if(Vt.props)for(var Ze in Vt.props)Vt.props.hasOwnProperty(Ze)&&this.atomIsSelected(Q,Vt)&&(Q.properties||(Q.properties={}),Q.properties[Ze]=Vt.props[Ze])}}return this}linkViewer(f){return this.linkedViewers.push(f),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(f){this.rotationGroup.position.z=this.CAMERA_Z-f}setAutoEyeSeparation(f,R){var $=this.getPerceivedDistance();return R||(R=5),f||this.camera.position.x>0?this.camera.position.x=$*Math.tan(Math.PI/180*R):this.camera.position.x=-$*Math.tan(Math.PI/180*R),this.camera.lookAt(new _.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(f){this.config.cartoonQuality=f}}function Sg(jp,f){if(jp=(0,C.getElement)(jp)){f=f||{};try{return new H1(jp,f)}catch(R){throw"error creating viewer: "+R}}}function bg(jp,f={},R={}){if(jp=(0,C.getElement)(jp)){var $=[],Q=document.createElement("canvas");R.rows=f.rows,R.cols=f.cols,R.control_all=f.control_all!=null&&f.control_all,jp.appendChild(Q);try{for(var Ze=0;Ze<f.rows;Ze++){for(var _e=[],it=0;it<f.cols;it++){R.row=Ze,R.col=it,R.canvas=Q,R.viewers=$,R.control_all=f.control_all;var lt=Sg(jp,(0,C.extend)({},R));_e.push(lt)}$.unshift(_e)}}catch(Ye){throw"error creating viewer grid: "+Ye}return $}}function q1(jp){var f=this;if(jp=(0,C.getElement)(jp)){var R=bg(jp,{rows:1,cols:2,control_all:!0});this.glviewer1=R[0][0],this.glviewer2=R[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var $=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(Ze){return typeof f.glviewer1[Ze]=="function"}),Q=0;Q<$.length;Q++)this[$[Q]]=(function(Ze){return function(){return[this.glviewer1[Ze].apply(this.glviewer1,arguments),this.glviewer2[Ze].apply(this.glviewer2,arguments)]}})($[Q]);this.setCoordinates=function(Ze,_e,it){for(var lt=0;lt<Ze.length;lt++)Ze[lt].setCoordinates(_e,it)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(Ze){this.glviewer1.render(),this.glviewer2.render(),Ze&&Ze(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}H1.numWorkers=4,H1.maxVolume=64e3,H1.surfaceTypeMap={VDW:_v.VDW,MS:_v.MS,SAS:_v.SAS,SES:_v.SES};var vg=!1,Hg=!1,Q1={};function kg(jp,f){var R,$,Q;if(document.querySelector(".viewer_3Dmoljs")!=null&&(vg=!0),vg){Hg=!0,jp=jp??null;var Ze=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(_e=>{var it=[],lt=[],Ye="";_e.style.position=="static"&&(_e.style.position="relative");var Vt=null;if(Q=null,_e.dataset.pdb)it.push("https://files.rcsb.org/view/"+_e.dataset.pdb+".pdb"),lt.push("pdb");else if(_e.dataset.cid)lt.push("sdf"),it.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+_e.dataset.cid+"/SDF?record_type=3d");else if(_e.dataset.href||_e.dataset.url){if(Ye=_e.dataset.href?_e.dataset.href:_e.dataset.url,it.push(Ye),(Q=Ye.substring(Ye.lastIndexOf(".")+1))=="gz"){let $m=Ye.substring(0,Ye.lastIndexOf(".")).lastIndexOf(".");Q=Ye.substring($m+1)}lt.push(Q);var Ct=Ye.substring(Ye.lastIndexOf("/")+1,Ye.lastIndexOf("."));Ct=="/"&&(Ct=Ye.substring(Ye.lastIndexOf("/")+1)),_e.dataset[lt[lt.length-1]]=Ct}let Nl=_e.dataset;for(R in Nl)R.substring(0,3)==="pdb"&&R!=="pdb"?(it.push("https://files.rcsb.org/view/"+Nl[R]+".pdb"),lt.push("pdb")):R.substring(0,4)==="href"&&R!=="href"?(Ye=Nl[R],it.push(Ye),lt.push(Ye.substring(Ye.lastIndexOf(".")+1))):R.substring(0,3)==="cid"&&R!=="cid"&&(it.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+Nl[R]+"/SDF?record_type=3d"),lt.push("sdf"));var ms={};_e.dataset.options&&(ms=(0,C.specStringToObject)(_e.dataset.options));var Si=S.CC.color(_e.dataset.backgroundcolor),_s=_e.dataset.backgroundalpha;_s=_s==null?1:parseFloat(_s);var gs={line:{}};_e.dataset.style&&(gs=(0,C.specStringToObject)(_e.dataset.style));var Yl={};_e.dataset.select&&(Yl=(0,C.specStringToObject)(_e.dataset.select));var Dp=[],Op=[],e0=[],Xp={},_0=null,D0=_e.dataset,O0=/style(.+)/,U0=/surface(.*)/,E0=/labelres(.*)/,ym=[];for($ in D0)Object.prototype.hasOwnProperty.call(D0,$)&&ym.push($);for(ym.sort(),R=0;R<ym.length;R++){$=ym[R];var mm,Vm,Pm,a1=O0.exec($);a1&&(mm="select"+a1[1],Vm=(0,C.specStringToObject)(D0[mm]),Pm=(0,C.specStringToObject)(D0[$]),Dp.push([Vm,Pm])),(a1=U0.exec($))&&(mm="select"+a1[1],Vm=(0,C.specStringToObject)(D0[mm]),Pm=(0,C.specStringToObject)(D0[$]),Op.push([Vm,Pm])),(a1=E0.exec($))&&(mm="select"+a1[1],Vm=(0,C.specStringToObject)(D0[mm]),Pm=(0,C.specStringToObject)(D0[$]),e0.push([Vm,Pm])),$=="zoomto"&&(Xp=(0,C.specStringToObject)(D0[$])),$=="spin"&&(_0=(0,C.specStringToObject)(D0[$]))}var h1=function($m){for($m.setStyle(Yl,gs),Vt&&Vt.createSelectionAndStyle(Yl,gs),R=0;R<Dp.length;R++){let R1=Dp[R][0]||{},k1=Dp[R][1]||{line:{}};$m.setStyle(R1,k1),Vt&&Vt.createSelectionAndStyle(Yl,gs)}for(R=0;R<Op.length;R++){let R1=Op[R][0]||{},k1=Op[R][1]||{};Vt?$m.addSurface(_v.VDW,k1,R1,R1).then(Jm=>{Vt.loadSurface("VDW",R1,k1,Jm)}):$m.addSurface(_v.VDW,k1,R1,R1)}for(R=0;R<e0.length;R++){let R1=e0[R][0]||{},k1=e0[R][1]||{};$m.addResLabels(R1,k1)}$m.render(),$m.zoomTo(Xp),_0&&$m.spin(_0.axis,_0.speed)};let Hm=jp;try{var w1=(0,C.specStringToObject)(_e.dataset.config)||{};w1.backgroundColor===void 0&&(w1.backgroundColor=Si),w1.backgroundAlpha===void 0&&(w1.backgroundAlpha=_s),Hm==null?Hm=Q1[_e.id||Ze++]=Sg(_e,w1):(Hm.setBackgroundColor(Si,_s),Hm.setConfig(w1),Vt&&Vt.initiateUI()),_e.dataset.ui&&$3Dmol.StateManager&&(Vt=new $3Dmol.StateManager(Hm))}catch($m){console.log($m),_e.textContent="WebGL appears to be disabled."}if(it.length!=0){let $m=0,R1=((k1,Jm)=>function(I1){Ye=it[$m];var ug=k1.dataset.type||k1.dataset.datatype||lt[$m];if(Jm.addModel(I1,ug,ms),Vt){var O1=k1.dataset[lt[$m]];Vt.setModelTitle(O1)}$m+=1,$m<it.length?(0,C.get)(it[$m]).then(R1):(h1(Jm),k1.dataset.callback&&(0,C.makeFunction)(k1.dataset.callback)(Jm),Hg=!1,f&&f(Jm))})(_e,Hm);Q&&Q.endsWith("gz")?(0,C.getbin)(it[0]).then(R1):(0,C.get)(it[0]).then(R1)}else{if(_e.dataset.element){var _m="#"+_e.dataset.element,Om=document.querySelector(_m),D1=Om?Om.textContent:"";Q=_e.dataset.type||_e.dataset.datatype,Hm.addModel(D1,Q,ms)}h1(Hm),_e.dataset.callback&&(0,C.makeFunction)(_e.dataset.callback)(Hm),Hg=!1,f&&f(Hm)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&kg()};const eg={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function Iv(jp,f){if((!f||jp.partialCharge===void 0)&&jp.resn&&jp.atom){var R=jp.resn+":"+jp.atom;jp.properties.partialCharge=eg[R]}}window&&(window.$3Dmol=e)},40:(r,e,t)=>{t.r(e),t.d(e,{bondLength:()=>o,bondTable:()=>a,setBondLength:()=>c});let a={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function o(d){return a[d]||1.6}function c(d,p){p<0&&(p=0),a[d]=p}},71:(r,e,t)=>{var a=t(107),o=t(981),c=t(972),d=t(834),p=t(746),_=Object.prototype.toString;function S(C){if(!(this instanceof S))return new S(C);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},C||{});var j=this.options;j.raw&&j.windowBits>0?j.windowBits=-j.windowBits:j.gzip&&j.windowBits>0&&j.windowBits<16&&(j.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var V=a.deflateInit2(this.strm,j.level,j.method,j.windowBits,j.memLevel,j.strategy);if(V!==0)throw new Error(d[V]);if(j.header&&a.deflateSetHeader(this.strm,j.header),j.dictionary){var J;if(J=typeof j.dictionary=="string"?c.string2buf(j.dictionary):_.call(j.dictionary)==="[object ArrayBuffer]"?new Uint8Array(j.dictionary):j.dictionary,(V=a.deflateSetDictionary(this.strm,J))!==0)throw new Error(d[V]);this._dict_set=!0}}function A(C,j){var V=new S(j);if(V.push(C,!0),V.err)throw V.msg||d[V.err];return V.result}S.prototype.push=function(C,j){var V,J,re=this.strm,ie=this.options.chunkSize;if(this.ended)return!1;J=j===~~j?j:j===!0?4:0,typeof C=="string"?re.input=c.string2buf(C):_.call(C)==="[object ArrayBuffer]"?re.input=new Uint8Array(C):re.input=C,re.next_in=0,re.avail_in=re.input.length;do{if(re.avail_out===0&&(re.output=new o.Buf8(ie),re.next_out=0,re.avail_out=ie),(V=a.deflate(re,J))!==1&&V!==0)return this.onEnd(V),this.ended=!0,!1;re.avail_out!==0&&(re.avail_in!==0||J!==4&&J!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(o.shrinkBuf(re.output,re.next_out))):this.onData(o.shrinkBuf(re.output,re.next_out)))}while((re.avail_in>0||re.avail_out===0)&&V!==1);return J===4?(V=a.deflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===0):J!==2||(this.onEnd(0),re.avail_out=0,!0)},S.prototype.onData=function(C){this.chunks.push(C)},S.prototype.onEnd=function(C){C===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},e.Deflate=S,e.deflate=A,e.deflateRaw=function(C,j){return(j=j||{}).raw=!0,A(C,j)},e.gzip=function(C,j){return(j=j||{}).gzip=!0,A(C,j)}},75:(r,e,t)=>{function a(de){let ql=de.length;for(;--ql>=0;)de[ql]=0}t.r(e),t.d(e,{Deflate:()=>Nv,Inflate:()=>ey,constants:()=>Rv,default:()=>zv,deflate:()=>Fv,deflateRaw:()=>Qv,gzip:()=>hy,inflate:()=>yy,inflateRaw:()=>dv,ungzip:()=>Ev});const o=256,c=286,d=30,p=15,_=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),S=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),A=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j=new Array(576);a(j);const V=new Array(60);a(V);const J=new Array(512);a(J);const re=new Array(256);a(re);const ie=new Array(29);a(ie);const K=new Array(d);function Ne(de,ql,De,A0,b0){this.static_tree=de,this.extra_bits=ql,this.extra_base=De,this.elems=A0,this.max_length=b0,this.has_stree=de&&de.length}let G,se,He;function Fe(de,ql){this.dyn_tree=de,this.max_code=0,this.stat_desc=ql}a(K);const Xe=de=>de<256?J[de]:J[256+(de>>>7)],be=(de,ql)=>{de.pending_buf[de.pending++]=255&ql,de.pending_buf[de.pending++]=ql>>>8&255},ta=(de,ql,De)=>{de.bi_valid>16-De?(de.bi_buf|=ql<<de.bi_valid&65535,be(de,de.bi_buf),de.bi_buf=ql>>16-de.bi_valid,de.bi_valid+=De-16):(de.bi_buf|=ql<<de.bi_valid&65535,de.bi_valid+=De)},pn=(de,ql,De)=>{ta(de,De[2*ql],De[2*ql+1])},mr=(de,ql)=>{let De=0;do De|=1&de,de>>>=1,De<<=1;while(--ql>0);return De>>>1},bp=(de,ql,De)=>{const A0=new Array(16);let b0,v0,Cm=0;for(b0=1;b0<=p;b0++)Cm=Cm+De[b0-1]<<1,A0[b0]=Cm;for(v0=0;v0<=ql;v0++){let $0=de[2*v0+1];$0!==0&&(de[2*v0]=mr(A0[$0]++,$0))}},Sp=de=>{let ql;for(ql=0;ql<c;ql++)de.dyn_ltree[2*ql]=0;for(ql=0;ql<d;ql++)de.dyn_dtree[2*ql]=0;for(ql=0;ql<19;ql++)de.bl_tree[2*ql]=0;de.dyn_ltree[512]=1,de.opt_len=de.static_len=0,de.sym_next=de.matches=0},_r=de=>{de.bi_valid>8?be(de,de.bi_buf):de.bi_valid>0&&(de.pending_buf[de.pending++]=de.bi_buf),de.bi_buf=0,de.bi_valid=0},xs=(de,ql,De,A0)=>{const b0=2*ql,v0=2*De;return de[b0]<de[v0]||de[b0]===de[v0]&&A0[ql]<=A0[De]},ne=(de,ql,De)=>{const A0=de.heap[De];let b0=De<<1;for(;b0<=de.heap_len&&(b0<de.heap_len&&xs(ql,de.heap[b0+1],de.heap[b0],de.depth)&&b0++,!xs(ql,A0,de.heap[b0],de.depth));)de.heap[De]=de.heap[b0],De=b0,b0<<=1;de.heap[De]=A0},zl=(de,ql,De)=>{let A0,b0,v0,Cm,$0=0;if(de.sym_next!==0)do A0=255&de.pending_buf[de.sym_buf+$0++],A0+=(255&de.pending_buf[de.sym_buf+$0++])<<8,b0=de.pending_buf[de.sym_buf+$0++],A0===0?pn(de,b0,ql):(v0=re[b0],pn(de,v0+o+1,ql),Cm=_[v0],Cm!==0&&(b0-=ie[v0],ta(de,b0,Cm)),A0--,v0=Xe(A0),pn(de,v0,De),Cm=S[v0],Cm!==0&&(A0-=K[v0],ta(de,A0,Cm)));while($0<de.sym_next);pn(de,256,ql)},Hl=(de,ql)=>{const De=ql.dyn_tree,A0=ql.stat_desc.static_tree,b0=ql.stat_desc.has_stree,v0=ql.stat_desc.elems;let Cm,$0,M1,Z0=-1;for(de.heap_len=0,de.heap_max=573,Cm=0;Cm<v0;Cm++)De[2*Cm]!==0?(de.heap[++de.heap_len]=Z0=Cm,de.depth[Cm]=0):De[2*Cm+1]=0;for(;de.heap_len<2;)M1=de.heap[++de.heap_len]=Z0<2?++Z0:0,De[2*M1]=1,de.depth[M1]=0,de.opt_len--,b0&&(de.static_len-=A0[2*M1+1]);for(ql.max_code=Z0,Cm=de.heap_len>>1;Cm>=1;Cm--)ne(de,De,Cm);M1=v0;do Cm=de.heap[1],de.heap[1]=de.heap[de.heap_len--],ne(de,De,1),$0=de.heap[1],de.heap[--de.heap_max]=Cm,de.heap[--de.heap_max]=$0,De[2*M1]=De[2*Cm]+De[2*$0],de.depth[M1]=(de.depth[Cm]>=de.depth[$0]?de.depth[Cm]:de.depth[$0])+1,De[2*Cm+1]=De[2*$0+1]=M1,de.heap[1]=M1++,ne(de,De,1);while(de.heap_len>=2);de.heap[--de.heap_max]=de.heap[1],((Rm,Ag)=>{const rg=Ag.dyn_tree,C1=Ag.max_code,Gv=Ag.stat_desc.static_tree,av=Ag.stat_desc.has_stree,hg=Ag.stat_desc.extra_bits,mv=Ag.stat_desc.extra_base,Ng=Ag.stat_desc.max_length;let U1,Mg,hv,B1,Kg,zg,xg=0;for(B1=0;B1<=p;B1++)Rm.bl_count[B1]=0;for(rg[2*Rm.heap[Rm.heap_max]+1]=0,U1=Rm.heap_max+1;U1<573;U1++)Mg=Rm.heap[U1],B1=rg[2*rg[2*Mg+1]+1]+1,B1>Ng&&(B1=Ng,xg++),rg[2*Mg+1]=B1,Mg>C1||(Rm.bl_count[B1]++,Kg=0,Mg>=mv&&(Kg=hg[Mg-mv]),zg=rg[2*Mg],Rm.opt_len+=zg*(B1+Kg),av&&(Rm.static_len+=zg*(Gv[2*Mg+1]+Kg)));if(xg!==0){do{for(B1=Ng-1;Rm.bl_count[B1]===0;)B1--;Rm.bl_count[B1]--,Rm.bl_count[B1+1]+=2,Rm.bl_count[Ng]--,xg-=2}while(xg>0);for(B1=Ng;B1!==0;B1--)for(Mg=Rm.bl_count[B1];Mg!==0;)hv=Rm.heap[--U1],hv>C1||(rg[2*hv+1]!==B1&&(Rm.opt_len+=(B1-rg[2*hv+1])*rg[2*hv],rg[2*hv+1]=B1),Mg--)}})(de,ql),bp(De,Z0,de.bl_count)},pr=(de,ql,De)=>{let A0,b0,v0=-1,Cm=ql[1],$0=0,M1=7,Z0=4;for(Cm===0&&(M1=138,Z0=3),ql[2*(De+1)+1]=65535,A0=0;A0<=De;A0++)b0=Cm,Cm=ql[2*(A0+1)+1],++$0<M1&&b0===Cm||($0<Z0?de.bl_tree[2*b0]+=$0:b0!==0?(b0!==v0&&de.bl_tree[2*b0]++,de.bl_tree[32]++):$0<=10?de.bl_tree[34]++:de.bl_tree[36]++,$0=0,v0=b0,Cm===0?(M1=138,Z0=3):b0===Cm?(M1=6,Z0=3):(M1=7,Z0=4))},Hp=(de,ql,De)=>{let A0,b0,v0=-1,Cm=ql[1],$0=0,M1=7,Z0=4;for(Cm===0&&(M1=138,Z0=3),A0=0;A0<=De;A0++)if(b0=Cm,Cm=ql[2*(A0+1)+1],!(++$0<M1&&b0===Cm)){if($0<Z0)do pn(de,b0,de.bl_tree);while(--$0!==0);else b0!==0?(b0!==v0&&(pn(de,b0,de.bl_tree),$0--),pn(de,16,de.bl_tree),ta(de,$0-3,2)):$0<=10?(pn(de,17,de.bl_tree),ta(de,$0-3,3)):(pn(de,18,de.bl_tree),ta(de,$0-11,7));$0=0,v0=b0,Cm===0?(M1=138,Z0=3):b0===Cm?(M1=6,Z0=3):(M1=7,Z0=4)}};let Gl=!1;const Ip=(de,ql,De,A0)=>{ta(de,0+(A0?1:0),3),_r(de),be(de,De),be(de,~De),De&&de.pending_buf.set(de.window.subarray(ql,ql+De),de.pending),de.pending+=De};var qp=(de,ql,De,A0)=>{let b0,v0,Cm=0;de.level>0?(de.strm.data_type===2&&(de.strm.data_type=($0=>{let M1,Z0=4093624447;for(M1=0;M1<=31;M1++,Z0>>>=1)if(1&Z0&&$0.dyn_ltree[2*M1]!==0)return 0;if($0.dyn_ltree[18]!==0||$0.dyn_ltree[20]!==0||$0.dyn_ltree[26]!==0)return 1;for(M1=32;M1<o;M1++)if($0.dyn_ltree[2*M1]!==0)return 1;return 0})(de)),Hl(de,de.l_desc),Hl(de,de.d_desc),Cm=($0=>{let M1;for(pr($0,$0.dyn_ltree,$0.l_desc.max_code),pr($0,$0.dyn_dtree,$0.d_desc.max_code),Hl($0,$0.bl_desc),M1=18;M1>=3&&$0.bl_tree[2*C[M1]+1]===0;M1--);return $0.opt_len+=3*(M1+1)+5+5+4,M1})(de),b0=de.opt_len+3+7>>>3,v0=de.static_len+3+7>>>3,v0<=b0&&(b0=v0)):b0=v0=De+5,De+4<=b0&&ql!==-1?Ip(de,ql,De,A0):de.strategy===4||v0===b0?(ta(de,2+(A0?1:0),3),zl(de,j,V)):(ta(de,4+(A0?1:0),3),(($0,M1,Z0,Rm)=>{let Ag;for(ta($0,M1-257,5),ta($0,Z0-1,5),ta($0,Rm-4,4),Ag=0;Ag<Rm;Ag++)ta($0,$0.bl_tree[2*C[Ag]+1],3);Hp($0,$0.dyn_ltree,M1-1),Hp($0,$0.dyn_dtree,Z0-1)})(de,de.l_desc.max_code+1,de.d_desc.max_code+1,Cm+1),zl(de,de.dyn_ltree,de.dyn_dtree)),Sp(de),A0&&_r(de)},ci={_tr_init:de=>{Gl||((()=>{let ql,De,A0,b0,v0;const Cm=new Array(16);for(A0=0,b0=0;b0<28;b0++)for(ie[b0]=A0,ql=0;ql<1<<_[b0];ql++)re[A0++]=b0;for(re[A0-1]=b0,v0=0,b0=0;b0<16;b0++)for(K[b0]=v0,ql=0;ql<1<<S[b0];ql++)J[v0++]=b0;for(v0>>=7;b0<d;b0++)for(K[b0]=v0<<7,ql=0;ql<1<<S[b0]-7;ql++)J[256+v0++]=b0;for(De=0;De<=p;De++)Cm[De]=0;for(ql=0;ql<=143;)j[2*ql+1]=8,ql++,Cm[8]++;for(;ql<=255;)j[2*ql+1]=9,ql++,Cm[9]++;for(;ql<=279;)j[2*ql+1]=7,ql++,Cm[7]++;for(;ql<=287;)j[2*ql+1]=8,ql++,Cm[8]++;for(bp(j,287,Cm),ql=0;ql<d;ql++)V[2*ql+1]=5,V[2*ql]=mr(ql,5);G=new Ne(j,_,257,c,p),se=new Ne(V,S,0,d,p),He=new Ne(new Array(0),A,0,19,7)})(),Gl=!0),de.l_desc=new Fe(de.dyn_ltree,G),de.d_desc=new Fe(de.dyn_dtree,se),de.bl_desc=new Fe(de.bl_tree,He),de.bi_buf=0,de.bi_valid=0,Sp(de)},_tr_stored_block:Ip,_tr_flush_block:qp,_tr_tally:(de,ql,De)=>(de.pending_buf[de.sym_buf+de.sym_next++]=ql,de.pending_buf[de.sym_buf+de.sym_next++]=ql>>8,de.pending_buf[de.sym_buf+de.sym_next++]=De,ql===0?de.dyn_ltree[2*De]++:(de.matches++,ql--,de.dyn_ltree[2*(re[De]+o+1)]++,de.dyn_dtree[2*Xe(ql)]++),de.sym_next===de.sym_end),_tr_align:de=>{ta(de,2,3),pn(de,256,j),(ql=>{ql.bi_valid===16?(be(ql,ql.bi_buf),ql.bi_buf=0,ql.bi_valid=0):ql.bi_valid>=8&&(ql.pending_buf[ql.pending++]=255&ql.bi_buf,ql.bi_buf>>=8,ql.bi_valid-=8)})(de)}},Ep=(de,ql,De,A0)=>{let b0=65535&de,v0=de>>>16&65535,Cm=0;for(;De!==0;){Cm=De>2e3?2e3:De,De-=Cm;do b0=b0+ql[A0++]|0,v0=v0+b0|0;while(--Cm);b0%=65521,v0%=65521}return b0|v0<<16};const o0=new Uint32Array((()=>{let de,ql=[];for(var De=0;De<256;De++){de=De;for(var A0=0;A0<8;A0++)de=1&de?3988292384^de>>>1:de>>>1;ql[De]=de}return ql})());var w0=(de,ql,De,A0)=>{const b0=o0,v0=A0+De;de^=-1;for(let Cm=A0;Cm<v0;Cm++)de=de>>>8^b0[255&(de^ql[Cm])];return-1^de},a0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},P0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:am,_tr_stored_block:sm,_tr_flush_block:C0,_tr_tally:Fm,_tr_align:Zm}=ci,{Z_NO_FLUSH:p1,Z_PARTIAL_FLUSH:A1,Z_FULL_FLUSH:T1,Z_FINISH:Tm,Z_BLOCK:x1,Z_OK:S1,Z_STREAM_END:p0,Z_STREAM_ERROR:zp,Z_DATA_ERROR:om,Z_BUF_ERROR:bm,Z_DEFAULT_COMPRESSION:i1,Z_FILTERED:r1,Z_HUFFMAN_ONLY:Gp,Z_RLE:i0,Z_FIXED:l0,Z_DEFAULT_STRATEGY:im,Z_UNKNOWN:dm,Z_DEFLATED:pm}=P0,Dm=258,Gm=262,qm=42,vm=113,r0=666,e1=(de,ql)=>(de.msg=a0[ql],ql),_1=de=>2*de-(de>4?9:0),j1=de=>{let ql=de.length;for(;--ql>=0;)de[ql]=0},q0=de=>{let ql,De,A0,b0=de.w_size;ql=de.hash_size,A0=ql;do De=de.head[--A0],de.head[A0]=De>=b0?De-b0:0;while(--ql);ql=b0,A0=ql;do De=de.prev[--A0],de.prev[A0]=De>=b0?De-b0:0;while(--ql)};let d1=(de,ql,De)=>(ql<<de.hash_shift^De)&de.hash_mask;const tm=de=>{const ql=de.state;let De=ql.pending;De>de.avail_out&&(De=de.avail_out),De!==0&&(de.output.set(ql.pending_buf.subarray(ql.pending_out,ql.pending_out+De),de.next_out),de.next_out+=De,ql.pending_out+=De,de.total_out+=De,de.avail_out-=De,ql.pending-=De,ql.pending===0&&(ql.pending_out=0))},o1=(de,ql)=>{C0(de,de.block_start>=0?de.block_start:-1,de.strstart-de.block_start,ql),de.block_start=de.strstart,tm(de.strm)},jm=(de,ql)=>{de.pending_buf[de.pending++]=ql},l1=(de,ql)=>{de.pending_buf[de.pending++]=ql>>>8&255,de.pending_buf[de.pending++]=255&ql},gg=(de,ql,De,A0)=>{let b0=de.avail_in;return b0>A0&&(b0=A0),b0===0?0:(de.avail_in-=b0,ql.set(de.input.subarray(de.next_in,de.next_in+b0),De),de.state.wrap===1?de.adler=Ep(de.adler,ql,b0,De):de.state.wrap===2&&(de.adler=w0(de.adler,ql,b0,De)),de.next_in+=b0,de.total_in+=b0,b0)},Jg=(de,ql)=>{let De,A0,b0=de.max_chain_length,v0=de.strstart,Cm=de.prev_length,$0=de.nice_match;const M1=de.strstart>de.w_size-Gm?de.strstart-(de.w_size-Gm):0,Z0=de.window,Rm=de.w_mask,Ag=de.prev,rg=de.strstart+Dm;let C1=Z0[v0+Cm-1],Gv=Z0[v0+Cm];de.prev_length>=de.good_match&&(b0>>=2),$0>de.lookahead&&($0=de.lookahead);do if(De=ql,Z0[De+Cm]===Gv&&Z0[De+Cm-1]===C1&&Z0[De]===Z0[v0]&&Z0[++De]===Z0[v0+1]){v0+=2,De++;do;while(Z0[++v0]===Z0[++De]&&Z0[++v0]===Z0[++De]&&Z0[++v0]===Z0[++De]&&Z0[++v0]===Z0[++De]&&Z0[++v0]===Z0[++De]&&Z0[++v0]===Z0[++De]&&Z0[++v0]===Z0[++De]&&Z0[++v0]===Z0[++De]&&v0<rg);if(A0=Dm-(rg-v0),v0=rg-Dm,A0>Cm){if(de.match_start=ql,Cm=A0,A0>=$0)break;C1=Z0[v0+Cm-1],Gv=Z0[v0+Cm]}}while((ql=Ag[ql&Rm])>M1&&--b0!==0);return Cm<=de.lookahead?Cm:de.lookahead},Dg=de=>{const ql=de.w_size;let De,A0,b0;do{if(A0=de.window_size-de.lookahead-de.strstart,de.strstart>=ql+(ql-Gm)&&(de.window.set(de.window.subarray(ql,ql+ql-A0),0),de.match_start-=ql,de.strstart-=ql,de.block_start-=ql,de.insert>de.strstart&&(de.insert=de.strstart),q0(de),A0+=ql),de.strm.avail_in===0)break;if(De=gg(de.strm,de.window,de.strstart+de.lookahead,A0),de.lookahead+=De,de.lookahead+de.insert>=3)for(b0=de.strstart-de.insert,de.ins_h=de.window[b0],de.ins_h=d1(de,de.ins_h,de.window[b0+1]);de.insert&&(de.ins_h=d1(de,de.ins_h,de.window[b0+3-1]),de.prev[b0&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=b0,b0++,de.insert--,!(de.lookahead+de.insert<3)););}while(de.lookahead<Gm&&de.strm.avail_in!==0)},Eg=(de,ql)=>{let De,A0,b0,v0=de.pending_buf_size-5>de.w_size?de.w_size:de.pending_buf_size-5,Cm=0,$0=de.strm.avail_in;do{if(De=65535,b0=de.bi_valid+42>>3,de.strm.avail_out<b0||(b0=de.strm.avail_out-b0,A0=de.strstart-de.block_start,De>A0+de.strm.avail_in&&(De=A0+de.strm.avail_in),De>b0&&(De=b0),De<v0&&(De===0&&ql!==Tm||ql===p1||De!==A0+de.strm.avail_in)))break;Cm=ql===Tm&&De===A0+de.strm.avail_in?1:0,sm(de,0,0,Cm),de.pending_buf[de.pending-4]=De,de.pending_buf[de.pending-3]=De>>8,de.pending_buf[de.pending-2]=~De,de.pending_buf[de.pending-1]=~De>>8,tm(de.strm),A0&&(A0>De&&(A0=De),de.strm.output.set(de.window.subarray(de.block_start,de.block_start+A0),de.strm.next_out),de.strm.next_out+=A0,de.strm.avail_out-=A0,de.strm.total_out+=A0,de.block_start+=A0,De-=A0),De&&(gg(de.strm,de.strm.output,de.strm.next_out,De),de.strm.next_out+=De,de.strm.avail_out-=De,de.strm.total_out+=De)}while(Cm===0);return $0-=de.strm.avail_in,$0&&($0>=de.w_size?(de.matches=2,de.window.set(de.strm.input.subarray(de.strm.next_in-de.w_size,de.strm.next_in),0),de.strstart=de.w_size,de.insert=de.strstart):(de.window_size-de.strstart<=$0&&(de.strstart-=de.w_size,de.window.set(de.window.subarray(de.w_size,de.w_size+de.strstart),0),de.matches<2&&de.matches++,de.insert>de.strstart&&(de.insert=de.strstart)),de.window.set(de.strm.input.subarray(de.strm.next_in-$0,de.strm.next_in),de.strstart),de.strstart+=$0,de.insert+=$0>de.w_size-de.insert?de.w_size-de.insert:$0),de.block_start=de.strstart),de.high_water<de.strstart&&(de.high_water=de.strstart),Cm?4:ql!==p1&&ql!==Tm&&de.strm.avail_in===0&&de.strstart===de.block_start?2:(b0=de.window_size-de.strstart,de.strm.avail_in>b0&&de.block_start>=de.w_size&&(de.block_start-=de.w_size,de.strstart-=de.w_size,de.window.set(de.window.subarray(de.w_size,de.w_size+de.strstart),0),de.matches<2&&de.matches++,b0+=de.w_size,de.insert>de.strstart&&(de.insert=de.strstart)),b0>de.strm.avail_in&&(b0=de.strm.avail_in),b0&&(gg(de.strm,de.window,de.strstart,b0),de.strstart+=b0,de.insert+=b0>de.w_size-de.insert?de.w_size-de.insert:b0),de.high_water<de.strstart&&(de.high_water=de.strstart),b0=de.bi_valid+42>>3,b0=de.pending_buf_size-b0>65535?65535:de.pending_buf_size-b0,v0=b0>de.w_size?de.w_size:b0,A0=de.strstart-de.block_start,(A0>=v0||(A0||ql===Tm)&&ql!==p1&&de.strm.avail_in===0&&A0<=b0)&&(De=A0>b0?b0:A0,Cm=ql===Tm&&de.strm.avail_in===0&&De===A0?1:0,sm(de,de.block_start,De,Cm),de.block_start+=De,tm(de.strm)),Cm?3:1)},ev=(de,ql)=>{let De,A0;for(;;){if(de.lookahead<Gm){if(Dg(de),de.lookahead<Gm&&ql===p1)return 1;if(de.lookahead===0)break}if(De=0,de.lookahead>=3&&(de.ins_h=d1(de,de.ins_h,de.window[de.strstart+3-1]),De=de.prev[de.strstart&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=de.strstart),De!==0&&de.strstart-De<=de.w_size-Gm&&(de.match_length=Jg(de,De)),de.match_length>=3)if(A0=Fm(de,de.strstart-de.match_start,de.match_length-3),de.lookahead-=de.match_length,de.match_length<=de.max_lazy_match&&de.lookahead>=3){de.match_length--;do de.strstart++,de.ins_h=d1(de,de.ins_h,de.window[de.strstart+3-1]),De=de.prev[de.strstart&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=de.strstart;while(--de.match_length!==0);de.strstart++}else de.strstart+=de.match_length,de.match_length=0,de.ins_h=de.window[de.strstart],de.ins_h=d1(de,de.ins_h,de.window[de.strstart+1]);else A0=Fm(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++;if(A0&&(o1(de,!1),de.strm.avail_out===0))return 1}return de.insert=de.strstart<2?de.strstart:2,ql===Tm?(o1(de,!0),de.strm.avail_out===0?3:4):de.sym_next&&(o1(de,!1),de.strm.avail_out===0)?1:2},pv=(de,ql)=>{let De,A0,b0;for(;;){if(de.lookahead<Gm){if(Dg(de),de.lookahead<Gm&&ql===p1)return 1;if(de.lookahead===0)break}if(De=0,de.lookahead>=3&&(de.ins_h=d1(de,de.ins_h,de.window[de.strstart+3-1]),De=de.prev[de.strstart&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=de.strstart),de.prev_length=de.match_length,de.prev_match=de.match_start,de.match_length=2,De!==0&&de.prev_length<de.max_lazy_match&&de.strstart-De<=de.w_size-Gm&&(de.match_length=Jg(de,De),de.match_length<=5&&(de.strategy===r1||de.match_length===3&&de.strstart-de.match_start>4096)&&(de.match_length=2)),de.prev_length>=3&&de.match_length<=de.prev_length){b0=de.strstart+de.lookahead-3,A0=Fm(de,de.strstart-1-de.prev_match,de.prev_length-3),de.lookahead-=de.prev_length-1,de.prev_length-=2;do++de.strstart<=b0&&(de.ins_h=d1(de,de.ins_h,de.window[de.strstart+3-1]),De=de.prev[de.strstart&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=de.strstart);while(--de.prev_length!==0);if(de.match_available=0,de.match_length=2,de.strstart++,A0&&(o1(de,!1),de.strm.avail_out===0))return 1}else if(de.match_available){if(A0=Fm(de,0,de.window[de.strstart-1]),A0&&o1(de,!1),de.strstart++,de.lookahead--,de.strm.avail_out===0)return 1}else de.match_available=1,de.strstart++,de.lookahead--}return de.match_available&&(A0=Fm(de,0,de.window[de.strstart-1]),de.match_available=0),de.insert=de.strstart<2?de.strstart:2,ql===Tm?(o1(de,!0),de.strm.avail_out===0?3:4):de.sym_next&&(o1(de,!1),de.strm.avail_out===0)?1:2};function sv(de,ql,De,A0,b0){this.good_length=de,this.max_lazy=ql,this.nice_length=De,this.max_chain=A0,this.func=b0}const kv=[new sv(0,0,0,0,Eg),new sv(4,4,8,4,ev),new sv(4,5,16,8,ev),new sv(4,6,32,32,ev),new sv(4,4,16,16,pv),new sv(8,16,32,32,pv),new sv(8,16,128,128,pv),new sv(8,32,128,256,pv),new sv(32,128,258,1024,pv),new sv(32,258,258,4096,pv)];function Zv(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),j1(this.dyn_ltree),j1(this.dyn_dtree),j1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),j1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),j1(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ry=de=>{if(!de)return 1;const ql=de.state;return!ql||ql.strm!==de||ql.status!==qm&&ql.status!==57&&ql.status!==69&&ql.status!==73&&ql.status!==91&&ql.status!==103&&ql.status!==vm&&ql.status!==r0?1:0},oy=de=>{if(ry(de))return e1(de,zp);de.total_in=de.total_out=0,de.data_type=dm;const ql=de.state;return ql.pending=0,ql.pending_out=0,ql.wrap<0&&(ql.wrap=-ql.wrap),ql.status=ql.wrap===2?57:ql.wrap?qm:vm,de.adler=ql.wrap===2?0:1,ql.last_flush=-2,am(ql),S1},Hv=de=>{const ql=oy(de);var De;return ql===S1&&((De=de.state).window_size=2*De.w_size,j1(De.head),De.max_lazy_match=kv[De.level].max_lazy,De.good_match=kv[De.level].good_length,De.nice_match=kv[De.level].nice_length,De.max_chain_length=kv[De.level].max_chain,De.strstart=0,De.block_start=0,De.lookahead=0,De.insert=0,De.match_length=De.prev_length=2,De.match_available=0,De.ins_h=0),ql},vv=(de,ql,De,A0,b0,v0)=>{if(!de)return zp;let Cm=1;if(ql===i1&&(ql=6),A0<0?(Cm=0,A0=-A0):A0>15&&(Cm=2,A0-=16),b0<1||b0>9||De!==pm||A0<8||A0>15||ql<0||ql>9||v0<0||v0>l0||A0===8&&Cm!==1)return e1(de,zp);A0===8&&(A0=9);const $0=new Zv;return de.state=$0,$0.strm=de,$0.status=qm,$0.wrap=Cm,$0.gzhead=null,$0.w_bits=A0,$0.w_size=1<<$0.w_bits,$0.w_mask=$0.w_size-1,$0.hash_bits=b0+7,$0.hash_size=1<<$0.hash_bits,$0.hash_mask=$0.hash_size-1,$0.hash_shift=~~(($0.hash_bits+3-1)/3),$0.window=new Uint8Array(2*$0.w_size),$0.head=new Uint16Array($0.hash_size),$0.prev=new Uint16Array($0.w_size),$0.lit_bufsize=1<<b0+6,$0.pending_buf_size=4*$0.lit_bufsize,$0.pending_buf=new Uint8Array($0.pending_buf_size),$0.sym_buf=$0.lit_bufsize,$0.sym_end=3*($0.lit_bufsize-1),$0.level=ql,$0.strategy=v0,$0.method=De,Hv(de)};var ag={deflateInit:(de,ql)=>vv(de,ql,pm,15,8,im),deflateInit2:vv,deflateReset:Hv,deflateResetKeep:oy,deflateSetHeader:(de,ql)=>ry(de)||de.state.wrap!==2?zp:(de.state.gzhead=ql,S1),deflate:(de,ql)=>{if(ry(de)||ql>x1||ql<0)return de?e1(de,zp):zp;const De=de.state;if(!de.output||de.avail_in!==0&&!de.input||De.status===r0&&ql!==Tm)return e1(de,de.avail_out===0?bm:zp);const A0=De.last_flush;if(De.last_flush=ql,De.pending!==0){if(tm(de),de.avail_out===0)return De.last_flush=-1,S1}else if(de.avail_in===0&&_1(ql)<=_1(A0)&&ql!==Tm)return e1(de,bm);if(De.status===r0&&de.avail_in!==0)return e1(de,bm);if(De.status===qm&&De.wrap===0&&(De.status=vm),De.status===qm){let b0=pm+(De.w_bits-8<<4)<<8,v0=-1;if(v0=De.strategy>=Gp||De.level<2?0:De.level<6?1:De.level===6?2:3,b0|=v0<<6,De.strstart!==0&&(b0|=32),b0+=31-b0%31,l1(De,b0),De.strstart!==0&&(l1(De,de.adler>>>16),l1(De,65535&de.adler)),de.adler=1,De.status=vm,tm(de),De.pending!==0)return De.last_flush=-1,S1}if(De.status===57){if(de.adler=0,jm(De,31),jm(De,139),jm(De,8),De.gzhead)jm(De,(De.gzhead.text?1:0)+(De.gzhead.hcrc?2:0)+(De.gzhead.extra?4:0)+(De.gzhead.name?8:0)+(De.gzhead.comment?16:0)),jm(De,255&De.gzhead.time),jm(De,De.gzhead.time>>8&255),jm(De,De.gzhead.time>>16&255),jm(De,De.gzhead.time>>24&255),jm(De,De.level===9?2:De.strategy>=Gp||De.level<2?4:0),jm(De,255&De.gzhead.os),De.gzhead.extra&&De.gzhead.extra.length&&(jm(De,255&De.gzhead.extra.length),jm(De,De.gzhead.extra.length>>8&255)),De.gzhead.hcrc&&(de.adler=w0(de.adler,De.pending_buf,De.pending,0)),De.gzindex=0,De.status=69;else if(jm(De,0),jm(De,0),jm(De,0),jm(De,0),jm(De,0),jm(De,De.level===9?2:De.strategy>=Gp||De.level<2?4:0),jm(De,3),De.status=vm,tm(de),De.pending!==0)return De.last_flush=-1,S1}if(De.status===69){if(De.gzhead.extra){let b0=De.pending,v0=(65535&De.gzhead.extra.length)-De.gzindex;for(;De.pending+v0>De.pending_buf_size;){let $0=De.pending_buf_size-De.pending;if(De.pending_buf.set(De.gzhead.extra.subarray(De.gzindex,De.gzindex+$0),De.pending),De.pending=De.pending_buf_size,De.gzhead.hcrc&&De.pending>b0&&(de.adler=w0(de.adler,De.pending_buf,De.pending-b0,b0)),De.gzindex+=$0,tm(de),De.pending!==0)return De.last_flush=-1,S1;b0=0,v0-=$0}let Cm=new Uint8Array(De.gzhead.extra);De.pending_buf.set(Cm.subarray(De.gzindex,De.gzindex+v0),De.pending),De.pending+=v0,De.gzhead.hcrc&&De.pending>b0&&(de.adler=w0(de.adler,De.pending_buf,De.pending-b0,b0)),De.gzindex=0}De.status=73}if(De.status===73){if(De.gzhead.name){let b0,v0=De.pending;do{if(De.pending===De.pending_buf_size){if(De.gzhead.hcrc&&De.pending>v0&&(de.adler=w0(de.adler,De.pending_buf,De.pending-v0,v0)),tm(de),De.pending!==0)return De.last_flush=-1,S1;v0=0}b0=De.gzindex<De.gzhead.name.length?255&De.gzhead.name.charCodeAt(De.gzindex++):0,jm(De,b0)}while(b0!==0);De.gzhead.hcrc&&De.pending>v0&&(de.adler=w0(de.adler,De.pending_buf,De.pending-v0,v0)),De.gzindex=0}De.status=91}if(De.status===91){if(De.gzhead.comment){let b0,v0=De.pending;do{if(De.pending===De.pending_buf_size){if(De.gzhead.hcrc&&De.pending>v0&&(de.adler=w0(de.adler,De.pending_buf,De.pending-v0,v0)),tm(de),De.pending!==0)return De.last_flush=-1,S1;v0=0}b0=De.gzindex<De.gzhead.comment.length?255&De.gzhead.comment.charCodeAt(De.gzindex++):0,jm(De,b0)}while(b0!==0);De.gzhead.hcrc&&De.pending>v0&&(de.adler=w0(de.adler,De.pending_buf,De.pending-v0,v0))}De.status=103}if(De.status===103){if(De.gzhead.hcrc){if(De.pending+2>De.pending_buf_size&&(tm(de),De.pending!==0))return De.last_flush=-1,S1;jm(De,255&de.adler),jm(De,de.adler>>8&255),de.adler=0}if(De.status=vm,tm(de),De.pending!==0)return De.last_flush=-1,S1}if(de.avail_in!==0||De.lookahead!==0||ql!==p1&&De.status!==r0){let b0=De.level===0?Eg(De,ql):De.strategy===Gp?((v0,Cm)=>{let $0;for(;;){if(v0.lookahead===0&&(Dg(v0),v0.lookahead===0)){if(Cm===p1)return 1;break}if(v0.match_length=0,$0=Fm(v0,0,v0.window[v0.strstart]),v0.lookahead--,v0.strstart++,$0&&(o1(v0,!1),v0.strm.avail_out===0))return 1}return v0.insert=0,Cm===Tm?(o1(v0,!0),v0.strm.avail_out===0?3:4):v0.sym_next&&(o1(v0,!1),v0.strm.avail_out===0)?1:2})(De,ql):De.strategy===i0?((v0,Cm)=>{let $0,M1,Z0,Rm;const Ag=v0.window;for(;;){if(v0.lookahead<=Dm){if(Dg(v0),v0.lookahead<=Dm&&Cm===p1)return 1;if(v0.lookahead===0)break}if(v0.match_length=0,v0.lookahead>=3&&v0.strstart>0&&(Z0=v0.strstart-1,M1=Ag[Z0],M1===Ag[++Z0]&&M1===Ag[++Z0]&&M1===Ag[++Z0])){Rm=v0.strstart+Dm;do;while(M1===Ag[++Z0]&&M1===Ag[++Z0]&&M1===Ag[++Z0]&&M1===Ag[++Z0]&&M1===Ag[++Z0]&&M1===Ag[++Z0]&&M1===Ag[++Z0]&&M1===Ag[++Z0]&&Z0<Rm);v0.match_length=Dm-(Rm-Z0),v0.match_length>v0.lookahead&&(v0.match_length=v0.lookahead)}if(v0.match_length>=3?($0=Fm(v0,1,v0.match_length-3),v0.lookahead-=v0.match_length,v0.strstart+=v0.match_length,v0.match_length=0):($0=Fm(v0,0,v0.window[v0.strstart]),v0.lookahead--,v0.strstart++),$0&&(o1(v0,!1),v0.strm.avail_out===0))return 1}return v0.insert=0,Cm===Tm?(o1(v0,!0),v0.strm.avail_out===0?3:4):v0.sym_next&&(o1(v0,!1),v0.strm.avail_out===0)?1:2})(De,ql):kv[De.level].func(De,ql);if(b0!==3&&b0!==4||(De.status=r0),b0===1||b0===3)return de.avail_out===0&&(De.last_flush=-1),S1;if(b0===2&&(ql===A1?Zm(De):ql!==x1&&(sm(De,0,0,!1),ql===T1&&(j1(De.head),De.lookahead===0&&(De.strstart=0,De.block_start=0,De.insert=0))),tm(de),de.avail_out===0))return De.last_flush=-1,S1}return ql!==Tm?S1:De.wrap<=0?p0:(De.wrap===2?(jm(De,255&de.adler),jm(De,de.adler>>8&255),jm(De,de.adler>>16&255),jm(De,de.adler>>24&255),jm(De,255&de.total_in),jm(De,de.total_in>>8&255),jm(De,de.total_in>>16&255),jm(De,de.total_in>>24&255)):(l1(De,de.adler>>>16),l1(De,65535&de.adler)),tm(de),De.wrap>0&&(De.wrap=-De.wrap),De.pending!==0?S1:p0)},deflateEnd:de=>{if(ry(de))return zp;const ql=de.state.status;return de.state=null,ql===vm?e1(de,om):S1},deflateSetDictionary:(de,ql)=>{let De=ql.length;if(ry(de))return zp;const A0=de.state,b0=A0.wrap;if(b0===2||b0===1&&A0.status!==qm||A0.lookahead)return zp;if(b0===1&&(de.adler=Ep(de.adler,ql,De,0)),A0.wrap=0,De>=A0.w_size){b0===0&&(j1(A0.head),A0.strstart=0,A0.block_start=0,A0.insert=0);let M1=new Uint8Array(A0.w_size);M1.set(ql.subarray(De-A0.w_size,De),0),ql=M1,De=A0.w_size}const v0=de.avail_in,Cm=de.next_in,$0=de.input;for(de.avail_in=De,de.next_in=0,de.input=ql,Dg(A0);A0.lookahead>=3;){let M1=A0.strstart,Z0=A0.lookahead-2;do A0.ins_h=d1(A0,A0.ins_h,A0.window[M1+3-1]),A0.prev[M1&A0.w_mask]=A0.head[A0.ins_h],A0.head[A0.ins_h]=M1,M1++;while(--Z0);A0.strstart=M1,A0.lookahead=2,Dg(A0)}return A0.strstart+=A0.lookahead,A0.block_start=A0.strstart,A0.insert=A0.lookahead,A0.lookahead=0,A0.match_length=A0.prev_length=2,A0.match_available=0,de.next_in=Cm,de.input=$0,de.avail_in=v0,A0.wrap=b0,S1},deflateInfo:"pako deflate (from Nodeca project)"};const _v=(de,ql)=>Object.prototype.hasOwnProperty.call(de,ql);var Mv=function(de){const ql=Array.prototype.slice.call(arguments,1);for(;ql.length;){const De=ql.shift();if(De){if(typeof De!="object")throw new TypeError(De+"must be non-object");for(const A0 in De)_v(De,A0)&&(de[A0]=De[A0])}}return de},c0=de=>{let ql=0;for(let A0=0,b0=de.length;A0<b0;A0++)ql+=de[A0].length;const De=new Uint8Array(ql);for(let A0=0,b0=0,v0=de.length;A0<v0;A0++){let Cm=de[A0];De.set(Cm,b0),b0+=Cm.length}return De};let F0=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{F0=!1}const Z=new Uint8Array(256);for(let de=0;de<256;de++)Z[de]=de>=252?6:de>=248?5:de>=240?4:de>=224?3:de>=192?2:1;Z[254]=Z[254]=1;var Fl=de=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(de);let ql,De,A0,b0,v0,Cm=de.length,$0=0;for(b0=0;b0<Cm;b0++)De=de.charCodeAt(b0),(64512&De)==55296&&b0+1<Cm&&(A0=de.charCodeAt(b0+1),(64512&A0)==56320&&(De=65536+(De-55296<<10)+(A0-56320),b0++)),$0+=De<128?1:De<2048?2:De<65536?3:4;for(ql=new Uint8Array($0),v0=0,b0=0;v0<$0;b0++)De=de.charCodeAt(b0),(64512&De)==55296&&b0+1<Cm&&(A0=de.charCodeAt(b0+1),(64512&A0)==56320&&(De=65536+(De-55296<<10)+(A0-56320),b0++)),De<128?ql[v0++]=De:De<2048?(ql[v0++]=192|De>>>6,ql[v0++]=128|63&De):De<65536?(ql[v0++]=224|De>>>12,ql[v0++]=128|De>>>6&63,ql[v0++]=128|63&De):(ql[v0++]=240|De>>>18,ql[v0++]=128|De>>>12&63,ql[v0++]=128|De>>>6&63,ql[v0++]=128|63&De);return ql},Wl=(de,ql)=>{const De=ql||de.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(de.subarray(0,ql));let A0,b0;const v0=new Array(2*De);for(b0=0,A0=0;A0<De;){let Cm=de[A0++];if(Cm<128){v0[b0++]=Cm;continue}let $0=Z[Cm];if($0>4)v0[b0++]=65533,A0+=$0-1;else{for(Cm&=$0===2?31:$0===3?15:7;$0>1&&A0<De;)Cm=Cm<<6|63&de[A0++],$0--;$0>1?v0[b0++]=65533:Cm<65536?v0[b0++]=Cm:(Cm-=65536,v0[b0++]=55296|Cm>>10&1023,v0[b0++]=56320|1023&Cm)}}return((Cm,$0)=>{if($0<65534&&Cm.subarray&&F0)return String.fromCharCode.apply(null,Cm.length===$0?Cm:Cm.subarray(0,$0));let M1="";for(let Z0=0;Z0<$0;Z0++)M1+=String.fromCharCode(Cm[Z0]);return M1})(v0,b0)},x0=(de,ql)=>{(ql=ql||de.length)>de.length&&(ql=de.length);let De=ql-1;for(;De>=0&&(192&de[De])==128;)De--;return De<0||De===0?ql:De+Z[de[De]]>ql?De:ql},S0=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Mm=Object.prototype.toString,{Z_NO_FLUSH:km,Z_SYNC_FLUSH:wm,Z_FULL_FLUSH:Xm,Z_FINISH:Nm,Z_OK:m1,Z_STREAM_END:N1,Z_DEFAULT_COMPRESSION:H1,Z_DEFAULT_STRATEGY:Sg,Z_DEFLATED:bg}=P0;function q1(de){this.options=Mv({level:H1,method:bg,chunkSize:16384,windowBits:15,memLevel:8,strategy:Sg},de||{});let ql=this.options;ql.raw&&ql.windowBits>0?ql.windowBits=-ql.windowBits:ql.gzip&&ql.windowBits>0&&ql.windowBits<16&&(ql.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S0,this.strm.avail_out=0;let De=ag.deflateInit2(this.strm,ql.level,ql.method,ql.windowBits,ql.memLevel,ql.strategy);if(De!==m1)throw new Error(a0[De]);if(ql.header&&ag.deflateSetHeader(this.strm,ql.header),ql.dictionary){let A0;if(A0=typeof ql.dictionary=="string"?Fl(ql.dictionary):Mm.call(ql.dictionary)==="[object ArrayBuffer]"?new Uint8Array(ql.dictionary):ql.dictionary,De=ag.deflateSetDictionary(this.strm,A0),De!==m1)throw new Error(a0[De]);this._dict_set=!0}}function vg(de,ql){const De=new q1(ql);if(De.push(de,!0),De.err)throw De.msg||a0[De.err];return De.result}q1.prototype.push=function(de,ql){const De=this.strm,A0=this.options.chunkSize;let b0,v0;if(this.ended)return!1;for(v0=ql===~~ql?ql:ql===!0?Nm:km,typeof de=="string"?De.input=Fl(de):Mm.call(de)==="[object ArrayBuffer]"?De.input=new Uint8Array(de):De.input=de,De.next_in=0,De.avail_in=De.input.length;;)if(De.avail_out===0&&(De.output=new Uint8Array(A0),De.next_out=0,De.avail_out=A0),(v0===wm||v0===Xm)&&De.avail_out<=6)this.onData(De.output.subarray(0,De.next_out)),De.avail_out=0;else{if(b0=ag.deflate(De,v0),b0===N1)return De.next_out>0&&this.onData(De.output.subarray(0,De.next_out)),b0=ag.deflateEnd(this.strm),this.onEnd(b0),this.ended=!0,b0===m1;if(De.avail_out!==0){if(v0>0&&De.next_out>0)this.onData(De.output.subarray(0,De.next_out)),De.avail_out=0;else if(De.avail_in===0)break}else this.onData(De.output)}return!0},q1.prototype.onData=function(de){this.chunks.push(de)},q1.prototype.onEnd=function(de){de===m1&&(this.result=c0(this.chunks)),this.chunks=[],this.err=de,this.msg=this.strm.msg};var Hg={Deflate:q1,deflate:vg,deflateRaw:function(de,ql){return(ql=ql||{}).raw=!0,vg(de,ql)},gzip:function(de,ql){return(ql=ql||{}).gzip=!0,vg(de,ql)}};const Q1=16209;var kg=function(de,ql){let De,A0,b0,v0,Cm,$0,M1,Z0,Rm,Ag,rg,C1,Gv,av,hg,mv,Ng,U1,Mg,hv,B1,Kg,zg,xg;const Qg=de.state;De=de.next_in,zg=de.input,A0=De+(de.avail_in-5),b0=de.next_out,xg=de.output,v0=b0-(ql-de.avail_out),Cm=b0+(de.avail_out-257),$0=Qg.dmax,M1=Qg.wsize,Z0=Qg.whave,Rm=Qg.wnext,Ag=Qg.window,rg=Qg.hold,C1=Qg.bits,Gv=Qg.lencode,av=Qg.distcode,hg=(1<<Qg.lenbits)-1,mv=(1<<Qg.distbits)-1;e:do{C1<15&&(rg+=zg[De++]<<C1,C1+=8,rg+=zg[De++]<<C1,C1+=8),Ng=Gv[rg&hg];t:for(;;){if(U1=Ng>>>24,rg>>>=U1,C1-=U1,U1=Ng>>>16&255,U1===0)xg[b0++]=65535&Ng;else{if(!(16&U1)){if(64&U1){if(32&U1){Qg.mode=16191;break e}de.msg="invalid literal/length code",Qg.mode=Q1;break e}Ng=Gv[(65535&Ng)+(rg&(1<<U1)-1)];continue t}for(Mg=65535&Ng,U1&=15,U1&&(C1<U1&&(rg+=zg[De++]<<C1,C1+=8),Mg+=rg&(1<<U1)-1,rg>>>=U1,C1-=U1),C1<15&&(rg+=zg[De++]<<C1,C1+=8,rg+=zg[De++]<<C1,C1+=8),Ng=av[rg&mv];;){if(U1=Ng>>>24,rg>>>=U1,C1-=U1,U1=Ng>>>16&255,16&U1){if(hv=65535&Ng,U1&=15,C1<U1&&(rg+=zg[De++]<<C1,C1+=8,C1<U1&&(rg+=zg[De++]<<C1,C1+=8)),hv+=rg&(1<<U1)-1,hv>$0){de.msg="invalid distance too far back",Qg.mode=Q1;break e}if(rg>>>=U1,C1-=U1,U1=b0-v0,hv>U1){if(U1=hv-U1,U1>Z0&&Qg.sane){de.msg="invalid distance too far back",Qg.mode=Q1;break e}if(B1=0,Kg=Ag,Rm===0){if(B1+=M1-U1,U1<Mg){Mg-=U1;do xg[b0++]=Ag[B1++];while(--U1);B1=b0-hv,Kg=xg}}else if(Rm<U1){if(B1+=M1+Rm-U1,U1-=Rm,U1<Mg){Mg-=U1;do xg[b0++]=Ag[B1++];while(--U1);if(B1=0,Rm<Mg){U1=Rm,Mg-=U1;do xg[b0++]=Ag[B1++];while(--U1);B1=b0-hv,Kg=xg}}}else if(B1+=Rm-U1,U1<Mg){Mg-=U1;do xg[b0++]=Ag[B1++];while(--U1);B1=b0-hv,Kg=xg}for(;Mg>2;)xg[b0++]=Kg[B1++],xg[b0++]=Kg[B1++],xg[b0++]=Kg[B1++],Mg-=3;Mg&&(xg[b0++]=Kg[B1++],Mg>1&&(xg[b0++]=Kg[B1++]))}else{B1=b0-hv;do xg[b0++]=xg[B1++],xg[b0++]=xg[B1++],xg[b0++]=xg[B1++],Mg-=3;while(Mg>2);Mg&&(xg[b0++]=xg[B1++],Mg>1&&(xg[b0++]=xg[B1++]))}break}if(64&U1){de.msg="invalid distance code",Qg.mode=Q1;break e}Ng=av[(65535&Ng)+(rg&(1<<U1)-1)]}}break}}while(De<A0&&b0<Cm);Mg=C1>>3,De-=Mg,C1-=Mg<<3,rg&=(1<<C1)-1,de.next_in=De,de.next_out=b0,de.avail_in=De<A0?A0-De+5:5-(De-A0),de.avail_out=b0<Cm?Cm-b0+257:257-(b0-Cm),Qg.hold=rg,Qg.bits=C1};const eg=15,Iv=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),jp=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),f=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),R=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var $=(de,ql,De,A0,b0,v0,Cm,$0)=>{const M1=$0.bits;let Z0,Rm,Ag,rg,C1,Gv,av=0,hg=0,mv=0,Ng=0,U1=0,Mg=0,hv=0,B1=0,Kg=0,zg=0,xg=null;const Qg=new Uint16Array(16),fy=new Uint16Array(16);let Uy,Fy,ox,Ox=null;for(av=0;av<=eg;av++)Qg[av]=0;for(hg=0;hg<A0;hg++)Qg[ql[De+hg]]++;for(U1=M1,Ng=eg;Ng>=1&&Qg[Ng]===0;Ng--);if(U1>Ng&&(U1=Ng),Ng===0)return b0[v0++]=20971520,b0[v0++]=20971520,$0.bits=1,0;for(mv=1;mv<Ng&&Qg[mv]===0;mv++);for(U1<mv&&(U1=mv),B1=1,av=1;av<=eg;av++)if(B1<<=1,B1-=Qg[av],B1<0)return-1;if(B1>0&&(de===0||Ng!==1))return-1;for(fy[1]=0,av=1;av<eg;av++)fy[av+1]=fy[av]+Qg[av];for(hg=0;hg<A0;hg++)ql[De+hg]!==0&&(Cm[fy[ql[De+hg]]++]=hg);if(de===0?(xg=Ox=Cm,Gv=20):de===1?(xg=Iv,Ox=jp,Gv=257):(xg=f,Ox=R,Gv=0),zg=0,hg=0,av=mv,C1=v0,Mg=U1,hv=0,Ag=-1,Kg=1<<U1,rg=Kg-1,de===1&&Kg>852||de===2&&Kg>592)return 1;for(;;){Uy=av-hv,Cm[hg]+1<Gv?(Fy=0,ox=Cm[hg]):Cm[hg]>=Gv?(Fy=Ox[Cm[hg]-Gv],ox=xg[Cm[hg]-Gv]):(Fy=96,ox=0),Z0=1<<av-hv,Rm=1<<Mg,mv=Rm;do Rm-=Z0,b0[C1+(zg>>hv)+Rm]=Uy<<24|Fy<<16|ox;while(Rm!==0);for(Z0=1<<av-1;zg&Z0;)Z0>>=1;if(Z0!==0?(zg&=Z0-1,zg+=Z0):zg=0,hg++,--Qg[av]===0){if(av===Ng)break;av=ql[De+Cm[hg]]}if(av>U1&&(zg&rg)!==Ag){for(hv===0&&(hv=U1),C1+=mv,Mg=av-hv,B1=1<<Mg;Mg+hv<Ng&&(B1-=Qg[Mg+hv],!(B1<=0));)Mg++,B1<<=1;if(Kg+=1<<Mg,de===1&&Kg>852||de===2&&Kg>592)return 1;Ag=zg&rg,b0[Ag]=U1<<24|Mg<<16|C1-v0}}return zg!==0&&(b0[C1+zg]=av-hv<<24|64<<16),$0.bits=U1,0};const{Z_FINISH:Q,Z_BLOCK:Ze,Z_TREES:_e,Z_OK:it,Z_STREAM_END:lt,Z_NEED_DICT:Ye,Z_STREAM_ERROR:Vt,Z_DATA_ERROR:Ct,Z_MEM_ERROR:Nl,Z_BUF_ERROR:ms,Z_DEFLATED:Si}=P0,_s=16180,gs=16190,Yl=16191,Dp=16192,Op=16194,e0=16199,Xp=16200,_0=16206,D0=16209,O0=de=>(de>>>24&255)+(de>>>8&65280)+((65280&de)<<8)+((255&de)<<24);function U0(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const E0=de=>{if(!de)return 1;const ql=de.state;return!ql||ql.strm!==de||ql.mode<_s||ql.mode>16211?1:0},ym=de=>{if(E0(de))return Vt;const ql=de.state;return de.total_in=de.total_out=ql.total=0,de.msg="",ql.wrap&&(de.adler=1&ql.wrap),ql.mode=_s,ql.last=0,ql.havedict=0,ql.flags=-1,ql.dmax=32768,ql.head=null,ql.hold=0,ql.bits=0,ql.lencode=ql.lendyn=new Int32Array(852),ql.distcode=ql.distdyn=new Int32Array(592),ql.sane=1,ql.back=-1,it},mm=de=>{if(E0(de))return Vt;const ql=de.state;return ql.wsize=0,ql.whave=0,ql.wnext=0,ym(de)},Vm=(de,ql)=>{let De;if(E0(de))return Vt;const A0=de.state;return ql<0?(De=0,ql=-ql):(De=5+(ql>>4),ql<48&&(ql&=15)),ql&&(ql<8||ql>15)?Vt:(A0.window!==null&&A0.wbits!==ql&&(A0.window=null),A0.wrap=De,A0.wbits=ql,mm(de))},Pm=(de,ql)=>{if(!de)return Vt;const De=new U0;de.state=De,De.strm=de,De.window=null,De.mode=_s;const A0=Vm(de,ql);return A0!==it&&(de.state=null),A0};let a1,h1,Hm=!0;const w1=de=>{if(Hm){a1=new Int32Array(512),h1=new Int32Array(32);let ql=0;for(;ql<144;)de.lens[ql++]=8;for(;ql<256;)de.lens[ql++]=9;for(;ql<280;)de.lens[ql++]=7;for(;ql<288;)de.lens[ql++]=8;for($(1,de.lens,0,288,a1,0,de.work,{bits:9}),ql=0;ql<32;)de.lens[ql++]=5;$(2,de.lens,0,32,h1,0,de.work,{bits:5}),Hm=!1}de.lencode=a1,de.lenbits=9,de.distcode=h1,de.distbits=5},_m=(de,ql,De,A0)=>{let b0;const v0=de.state;return v0.window===null&&(v0.wsize=1<<v0.wbits,v0.wnext=0,v0.whave=0,v0.window=new Uint8Array(v0.wsize)),A0>=v0.wsize?(v0.window.set(ql.subarray(De-v0.wsize,De),0),v0.wnext=0,v0.whave=v0.wsize):(b0=v0.wsize-v0.wnext,b0>A0&&(b0=A0),v0.window.set(ql.subarray(De-A0,De-A0+b0),v0.wnext),(A0-=b0)?(v0.window.set(ql.subarray(De-A0,De),0),v0.wnext=A0,v0.whave=v0.wsize):(v0.wnext+=b0,v0.wnext===v0.wsize&&(v0.wnext=0),v0.whave<v0.wsize&&(v0.whave+=b0))),0};var Om={inflateReset:mm,inflateReset2:Vm,inflateResetKeep:ym,inflateInit:de=>Pm(de,15),inflateInit2:Pm,inflate:(de,ql)=>{let De,A0,b0,v0,Cm,$0,M1,Z0,Rm,Ag,rg,C1,Gv,av,hg,mv,Ng,U1,Mg,hv,B1,Kg,zg=0;const xg=new Uint8Array(4);let Qg,fy;const Uy=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(E0(de)||!de.output||!de.input&&de.avail_in!==0)return Vt;De=de.state,De.mode===Yl&&(De.mode=Dp),Cm=de.next_out,b0=de.output,M1=de.avail_out,v0=de.next_in,A0=de.input,$0=de.avail_in,Z0=De.hold,Rm=De.bits,Ag=$0,rg=M1,Kg=it;e:for(;;)switch(De.mode){case _s:if(De.wrap===0){De.mode=Dp;break}for(;Rm<16;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(2&De.wrap&&Z0===35615){De.wbits===0&&(De.wbits=15),De.check=0,xg[0]=255&Z0,xg[1]=Z0>>>8&255,De.check=w0(De.check,xg,2,0),Z0=0,Rm=0,De.mode=16181;break}if(De.head&&(De.head.done=!1),!(1&De.wrap)||(((255&Z0)<<8)+(Z0>>8))%31){de.msg="incorrect header check",De.mode=D0;break}if((15&Z0)!==Si){de.msg="unknown compression method",De.mode=D0;break}if(Z0>>>=4,Rm-=4,B1=8+(15&Z0),De.wbits===0&&(De.wbits=B1),B1>15||B1>De.wbits){de.msg="invalid window size",De.mode=D0;break}De.dmax=1<<De.wbits,De.flags=0,de.adler=De.check=1,De.mode=512&Z0?16189:Yl,Z0=0,Rm=0;break;case 16181:for(;Rm<16;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(De.flags=Z0,(255&De.flags)!==Si){de.msg="unknown compression method",De.mode=D0;break}if(57344&De.flags){de.msg="unknown header flags set",De.mode=D0;break}De.head&&(De.head.text=Z0>>8&1),512&De.flags&&4&De.wrap&&(xg[0]=255&Z0,xg[1]=Z0>>>8&255,De.check=w0(De.check,xg,2,0)),Z0=0,Rm=0,De.mode=16182;case 16182:for(;Rm<32;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}De.head&&(De.head.time=Z0),512&De.flags&&4&De.wrap&&(xg[0]=255&Z0,xg[1]=Z0>>>8&255,xg[2]=Z0>>>16&255,xg[3]=Z0>>>24&255,De.check=w0(De.check,xg,4,0)),Z0=0,Rm=0,De.mode=16183;case 16183:for(;Rm<16;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}De.head&&(De.head.xflags=255&Z0,De.head.os=Z0>>8),512&De.flags&&4&De.wrap&&(xg[0]=255&Z0,xg[1]=Z0>>>8&255,De.check=w0(De.check,xg,2,0)),Z0=0,Rm=0,De.mode=16184;case 16184:if(1024&De.flags){for(;Rm<16;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}De.length=Z0,De.head&&(De.head.extra_len=Z0),512&De.flags&&4&De.wrap&&(xg[0]=255&Z0,xg[1]=Z0>>>8&255,De.check=w0(De.check,xg,2,0)),Z0=0,Rm=0}else De.head&&(De.head.extra=null);De.mode=16185;case 16185:if(1024&De.flags&&(C1=De.length,C1>$0&&(C1=$0),C1&&(De.head&&(B1=De.head.extra_len-De.length,De.head.extra||(De.head.extra=new Uint8Array(De.head.extra_len)),De.head.extra.set(A0.subarray(v0,v0+C1),B1)),512&De.flags&&4&De.wrap&&(De.check=w0(De.check,A0,C1,v0)),$0-=C1,v0+=C1,De.length-=C1),De.length))break e;De.length=0,De.mode=16186;case 16186:if(2048&De.flags){if($0===0)break e;C1=0;do B1=A0[v0+C1++],De.head&&B1&&De.length<65536&&(De.head.name+=String.fromCharCode(B1));while(B1&&C1<$0);if(512&De.flags&&4&De.wrap&&(De.check=w0(De.check,A0,C1,v0)),$0-=C1,v0+=C1,B1)break e}else De.head&&(De.head.name=null);De.length=0,De.mode=16187;case 16187:if(4096&De.flags){if($0===0)break e;C1=0;do B1=A0[v0+C1++],De.head&&B1&&De.length<65536&&(De.head.comment+=String.fromCharCode(B1));while(B1&&C1<$0);if(512&De.flags&&4&De.wrap&&(De.check=w0(De.check,A0,C1,v0)),$0-=C1,v0+=C1,B1)break e}else De.head&&(De.head.comment=null);De.mode=16188;case 16188:if(512&De.flags){for(;Rm<16;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(4&De.wrap&&Z0!==(65535&De.check)){de.msg="header crc mismatch",De.mode=D0;break}Z0=0,Rm=0}De.head&&(De.head.hcrc=De.flags>>9&1,De.head.done=!0),de.adler=De.check=0,De.mode=Yl;break;case 16189:for(;Rm<32;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}de.adler=De.check=O0(Z0),Z0=0,Rm=0,De.mode=gs;case gs:if(De.havedict===0)return de.next_out=Cm,de.avail_out=M1,de.next_in=v0,de.avail_in=$0,De.hold=Z0,De.bits=Rm,Ye;de.adler=De.check=1,De.mode=Yl;case Yl:if(ql===Ze||ql===_e)break e;case Dp:if(De.last){Z0>>>=7&Rm,Rm-=7&Rm,De.mode=_0;break}for(;Rm<3;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}switch(De.last=1&Z0,Z0>>>=1,Rm-=1,3&Z0){case 0:De.mode=16193;break;case 1:if(w1(De),De.mode=e0,ql===_e){Z0>>>=2,Rm-=2;break e}break;case 2:De.mode=16196;break;case 3:de.msg="invalid block type",De.mode=D0}Z0>>>=2,Rm-=2;break;case 16193:for(Z0>>>=7&Rm,Rm-=7&Rm;Rm<32;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if((65535&Z0)!=(Z0>>>16^65535)){de.msg="invalid stored block lengths",De.mode=D0;break}if(De.length=65535&Z0,Z0=0,Rm=0,De.mode=Op,ql===_e)break e;case Op:De.mode=16195;case 16195:if(C1=De.length,C1){if(C1>$0&&(C1=$0),C1>M1&&(C1=M1),C1===0)break e;b0.set(A0.subarray(v0,v0+C1),Cm),$0-=C1,v0+=C1,M1-=C1,Cm+=C1,De.length-=C1;break}De.mode=Yl;break;case 16196:for(;Rm<14;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(De.nlen=257+(31&Z0),Z0>>>=5,Rm-=5,De.ndist=1+(31&Z0),Z0>>>=5,Rm-=5,De.ncode=4+(15&Z0),Z0>>>=4,Rm-=4,De.nlen>286||De.ndist>30){de.msg="too many length or distance symbols",De.mode=D0;break}De.have=0,De.mode=16197;case 16197:for(;De.have<De.ncode;){for(;Rm<3;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}De.lens[Uy[De.have++]]=7&Z0,Z0>>>=3,Rm-=3}for(;De.have<19;)De.lens[Uy[De.have++]]=0;if(De.lencode=De.lendyn,De.lenbits=7,Qg={bits:De.lenbits},Kg=$(0,De.lens,0,19,De.lencode,0,De.work,Qg),De.lenbits=Qg.bits,Kg){de.msg="invalid code lengths set",De.mode=D0;break}De.have=0,De.mode=16198;case 16198:for(;De.have<De.nlen+De.ndist;){for(;zg=De.lencode[Z0&(1<<De.lenbits)-1],hg=zg>>>24,mv=zg>>>16&255,Ng=65535&zg,!(hg<=Rm);){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(Ng<16)Z0>>>=hg,Rm-=hg,De.lens[De.have++]=Ng;else{if(Ng===16){for(fy=hg+2;Rm<fy;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(Z0>>>=hg,Rm-=hg,De.have===0){de.msg="invalid bit length repeat",De.mode=D0;break}B1=De.lens[De.have-1],C1=3+(3&Z0),Z0>>>=2,Rm-=2}else if(Ng===17){for(fy=hg+3;Rm<fy;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}Z0>>>=hg,Rm-=hg,B1=0,C1=3+(7&Z0),Z0>>>=3,Rm-=3}else{for(fy=hg+7;Rm<fy;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}Z0>>>=hg,Rm-=hg,B1=0,C1=11+(127&Z0),Z0>>>=7,Rm-=7}if(De.have+C1>De.nlen+De.ndist){de.msg="invalid bit length repeat",De.mode=D0;break}for(;C1--;)De.lens[De.have++]=B1}}if(De.mode===D0)break;if(De.lens[256]===0){de.msg="invalid code -- missing end-of-block",De.mode=D0;break}if(De.lenbits=9,Qg={bits:De.lenbits},Kg=$(1,De.lens,0,De.nlen,De.lencode,0,De.work,Qg),De.lenbits=Qg.bits,Kg){de.msg="invalid literal/lengths set",De.mode=D0;break}if(De.distbits=6,De.distcode=De.distdyn,Qg={bits:De.distbits},Kg=$(2,De.lens,De.nlen,De.ndist,De.distcode,0,De.work,Qg),De.distbits=Qg.bits,Kg){de.msg="invalid distances set",De.mode=D0;break}if(De.mode=e0,ql===_e)break e;case e0:De.mode=Xp;case Xp:if($0>=6&&M1>=258){de.next_out=Cm,de.avail_out=M1,de.next_in=v0,de.avail_in=$0,De.hold=Z0,De.bits=Rm,kg(de,rg),Cm=de.next_out,b0=de.output,M1=de.avail_out,v0=de.next_in,A0=de.input,$0=de.avail_in,Z0=De.hold,Rm=De.bits,De.mode===Yl&&(De.back=-1);break}for(De.back=0;zg=De.lencode[Z0&(1<<De.lenbits)-1],hg=zg>>>24,mv=zg>>>16&255,Ng=65535&zg,!(hg<=Rm);){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(mv&&!(240&mv)){for(U1=hg,Mg=mv,hv=Ng;zg=De.lencode[hv+((Z0&(1<<U1+Mg)-1)>>U1)],hg=zg>>>24,mv=zg>>>16&255,Ng=65535&zg,!(U1+hg<=Rm);){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}Z0>>>=U1,Rm-=U1,De.back+=U1}if(Z0>>>=hg,Rm-=hg,De.back+=hg,De.length=Ng,mv===0){De.mode=16205;break}if(32&mv){De.back=-1,De.mode=Yl;break}if(64&mv){de.msg="invalid literal/length code",De.mode=D0;break}De.extra=15&mv,De.mode=16201;case 16201:if(De.extra){for(fy=De.extra;Rm<fy;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}De.length+=Z0&(1<<De.extra)-1,Z0>>>=De.extra,Rm-=De.extra,De.back+=De.extra}De.was=De.length,De.mode=16202;case 16202:for(;zg=De.distcode[Z0&(1<<De.distbits)-1],hg=zg>>>24,mv=zg>>>16&255,Ng=65535&zg,!(hg<=Rm);){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(!(240&mv)){for(U1=hg,Mg=mv,hv=Ng;zg=De.distcode[hv+((Z0&(1<<U1+Mg)-1)>>U1)],hg=zg>>>24,mv=zg>>>16&255,Ng=65535&zg,!(U1+hg<=Rm);){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}Z0>>>=U1,Rm-=U1,De.back+=U1}if(Z0>>>=hg,Rm-=hg,De.back+=hg,64&mv){de.msg="invalid distance code",De.mode=D0;break}De.offset=Ng,De.extra=15&mv,De.mode=16203;case 16203:if(De.extra){for(fy=De.extra;Rm<fy;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}De.offset+=Z0&(1<<De.extra)-1,Z0>>>=De.extra,Rm-=De.extra,De.back+=De.extra}if(De.offset>De.dmax){de.msg="invalid distance too far back",De.mode=D0;break}De.mode=16204;case 16204:if(M1===0)break e;if(C1=rg-M1,De.offset>C1){if(C1=De.offset-C1,C1>De.whave&&De.sane){de.msg="invalid distance too far back",De.mode=D0;break}C1>De.wnext?(C1-=De.wnext,Gv=De.wsize-C1):Gv=De.wnext-C1,C1>De.length&&(C1=De.length),av=De.window}else av=b0,Gv=Cm-De.offset,C1=De.length;C1>M1&&(C1=M1),M1-=C1,De.length-=C1;do b0[Cm++]=av[Gv++];while(--C1);De.length===0&&(De.mode=Xp);break;case 16205:if(M1===0)break e;b0[Cm++]=De.length,M1--,De.mode=Xp;break;case _0:if(De.wrap){for(;Rm<32;){if($0===0)break e;$0--,Z0|=A0[v0++]<<Rm,Rm+=8}if(rg-=M1,de.total_out+=rg,De.total+=rg,4&De.wrap&&rg&&(de.adler=De.check=De.flags?w0(De.check,b0,rg,Cm-rg):Ep(De.check,b0,rg,Cm-rg)),rg=M1,4&De.wrap&&(De.flags?Z0:O0(Z0))!==De.check){de.msg="incorrect data check",De.mode=D0;break}Z0=0,Rm=0}De.mode=16207;case 16207:if(De.wrap&&De.flags){for(;Rm<32;){if($0===0)break e;$0--,Z0+=A0[v0++]<<Rm,Rm+=8}if(4&De.wrap&&Z0!==(4294967295&De.total)){de.msg="incorrect length check",De.mode=D0;break}Z0=0,Rm=0}De.mode=16208;case 16208:Kg=lt;break e;case D0:Kg=Ct;break e;case 16210:return Nl;default:return Vt}return de.next_out=Cm,de.avail_out=M1,de.next_in=v0,de.avail_in=$0,De.hold=Z0,De.bits=Rm,(De.wsize||rg!==de.avail_out&&De.mode<D0&&(De.mode<_0||ql!==Q))&&_m(de,de.output,de.next_out,rg-de.avail_out),Ag-=de.avail_in,rg-=de.avail_out,de.total_in+=Ag,de.total_out+=rg,De.total+=rg,4&De.wrap&&rg&&(de.adler=De.check=De.flags?w0(De.check,b0,rg,de.next_out-rg):Ep(De.check,b0,rg,de.next_out-rg)),de.data_type=De.bits+(De.last?64:0)+(De.mode===Yl?128:0)+(De.mode===e0||De.mode===Op?256:0),(Ag===0&&rg===0||ql===Q)&&Kg===it&&(Kg=ms),Kg},inflateEnd:de=>{if(E0(de))return Vt;let ql=de.state;return ql.window&&(ql.window=null),de.state=null,it},inflateGetHeader:(de,ql)=>{if(E0(de))return Vt;const De=de.state;return 2&De.wrap?(De.head=ql,ql.done=!1,it):Vt},inflateSetDictionary:(de,ql)=>{const De=ql.length;let A0,b0,v0;return E0(de)?Vt:(A0=de.state,A0.wrap!==0&&A0.mode!==gs?Vt:A0.mode===gs&&(b0=1,b0=Ep(b0,ql,De,0),b0!==A0.check)?Ct:(v0=_m(de,ql,De,De),v0?(A0.mode=16210,Nl):(A0.havedict=1,it)))},inflateInfo:"pako inflate (from Nodeca project)"},D1=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const $m=Object.prototype.toString,{Z_NO_FLUSH:R1,Z_FINISH:k1,Z_OK:Jm,Z_STREAM_END:I1,Z_NEED_DICT:ug,Z_STREAM_ERROR:O1,Z_DATA_ERROR:s1,Z_MEM_ERROR:yg}=P0;function Z1(de){this.options=Mv({chunkSize:65536,windowBits:15,to:""},de||{});const ql=this.options;ql.raw&&ql.windowBits>=0&&ql.windowBits<16&&(ql.windowBits=-ql.windowBits,ql.windowBits===0&&(ql.windowBits=-15)),!(ql.windowBits>=0&&ql.windowBits<16)||de&&de.windowBits||(ql.windowBits+=32),ql.windowBits>15&&ql.windowBits<48&&(15&ql.windowBits||(ql.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S0,this.strm.avail_out=0;let De=Om.inflateInit2(this.strm,ql.windowBits);if(De!==Jm)throw new Error(a0[De]);if(this.header=new D1,Om.inflateGetHeader(this.strm,this.header),ql.dictionary&&(typeof ql.dictionary=="string"?ql.dictionary=Fl(ql.dictionary):$m.call(ql.dictionary)==="[object ArrayBuffer]"&&(ql.dictionary=new Uint8Array(ql.dictionary)),ql.raw&&(De=Om.inflateSetDictionary(this.strm,ql.dictionary),De!==Jm)))throw new Error(a0[De])}function pg(de,ql){const De=new Z1(ql);if(De.push(de),De.err)throw De.msg||a0[De.err];return De.result}Z1.prototype.push=function(de,ql){const De=this.strm,A0=this.options.chunkSize,b0=this.options.dictionary;let v0,Cm,$0;if(this.ended)return!1;for(Cm=ql===~~ql?ql:ql===!0?k1:R1,$m.call(de)==="[object ArrayBuffer]"?De.input=new Uint8Array(de):De.input=de,De.next_in=0,De.avail_in=De.input.length;;){for(De.avail_out===0&&(De.output=new Uint8Array(A0),De.next_out=0,De.avail_out=A0),v0=Om.inflate(De,Cm),v0===ug&&b0&&(v0=Om.inflateSetDictionary(De,b0),v0===Jm?v0=Om.inflate(De,Cm):v0===s1&&(v0=ug));De.avail_in>0&&v0===I1&&De.state.wrap>0&&de[De.next_in]!==0;)Om.inflateReset(De),v0=Om.inflate(De,Cm);switch(v0){case O1:case s1:case ug:case yg:return this.onEnd(v0),this.ended=!0,!1}if($0=De.avail_out,De.next_out&&(De.avail_out===0||v0===I1))if(this.options.to==="string"){let M1=x0(De.output,De.next_out),Z0=De.next_out-M1,Rm=Wl(De.output,M1);De.next_out=Z0,De.avail_out=A0-Z0,Z0&&De.output.set(De.output.subarray(M1,M1+Z0),0),this.onData(Rm)}else this.onData(De.output.length===De.next_out?De.output:De.output.subarray(0,De.next_out));if(v0!==Jm||$0!==0){if(v0===I1)return v0=Om.inflateEnd(this.strm),this.onEnd(v0),this.ended=!0,!0;if(De.avail_in===0)break}}return!0},Z1.prototype.onData=function(de){this.chunks.push(de)},Z1.prototype.onEnd=function(de){de===Jm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c0(this.chunks)),this.chunks=[],this.err=de,this.msg=this.strm.msg};var J1={Inflate:Z1,inflate:pg,inflateRaw:function(de,ql){return(ql=ql||{}).raw=!0,pg(de,ql)},ungzip:pg};const{Deflate:wg,deflate:tv,deflateRaw:Sv,gzip:bv}=Hg,{Inflate:Jv,inflate:Uv,inflateRaw:lv,ungzip:Kv}=J1;var Nv=wg,Fv=tv,Qv=Sv,hy=bv,ey=Jv,yy=Uv,dv=lv,Ev=Kv,Rv=P0,zv={Deflate:wg,deflate:tv,deflateRaw:Sv,gzip:bv,Inflate:Jv,inflate:Uv,inflateRaw:lv,ungzip:Kv,constants:P0}},99:(r,e,t)=>{t.r(e),t.d(e,{Cylinder:()=>d,Sphere:()=>o,Triangle:()=>_});var a=t(529);class o{constructor(A={x:0,y:0,z:0},C=0){this.center=new a.Vector3(A.x,A.y,A.z),this.radius=C}set(A,C){return this.center.copy(A),this.radius=C,this}copy(A){return this.center.copy(A.center),this.radius=A.radius,this}applyMatrix4(A){return this.center.applyMatrix4(A),this.radius=this.radius*A.getMaxScaleOnAxis(),this}translate(A){return this.center.add(A),this}equals(A){return A.center.equals(this.center)&&A.radius===this.radius}clone(){return new o().copy(this)}}let c=new a.Vector3;class d{constructor(A=new a.Vector3,C=new a.Vector3,j=0){this.c1=A,this.c2=C,this.radius=j,this.direction=new a.Vector3().subVectors(this.c2,this.c1).normalize()}copy(A){return this.c1.copy(A.c1),this.c2.copy(A.c2),this.direction.copy(A.direction),this.radius=A.radius,this}lengthSq(){return c.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(A){return this.direction.add(this.c1).applyMatrix4(A),this.c1.applyMatrix4(A),this.c2.applyMatrix4(A),this.direction.sub(this.c1).normalize(),this.radius=this.radius*A.getMaxScaleOnAxis(),this}}const p=new a.Vector3;class _{constructor(A=new a.Vector3,C=new a.Vector3,j=new a.Vector3){this.a=A,this.b=C,this.c=j}copy(A){return this.a.copy(A.a),this.b.copy(A.b),this.c.copy(A.c),this}applyMatrix4(A){return this.a.applyMatrix4(A),this.b.applyMatrix4(A),this.c.applyMatrix4(A),this}getNormal(){var A=this.a.clone();return A.sub(this.b),p.subVectors(this.c,this.b),A.cross(p),A.normalize(),A}}},107:(r,e,t)=>{var a,o=t(981),c=t(697),d=t(701),p=t(407),_=t(834),S=-2,A=258,C=262,j=103,V=113,J=666;function re(ne,zl){return ne.msg=_[zl],zl}function ie(ne){return(ne<<1)-(ne>4?9:0)}function K(ne){for(var zl=ne.length;--zl>=0;)ne[zl]=0}function Ne(ne){var zl=ne.state,Hl=zl.pending;Hl>ne.avail_out&&(Hl=ne.avail_out),Hl!==0&&(o.arraySet(ne.output,zl.pending_buf,zl.pending_out,Hl,ne.next_out),ne.next_out+=Hl,zl.pending_out+=Hl,ne.total_out+=Hl,ne.avail_out-=Hl,zl.pending-=Hl,zl.pending===0&&(zl.pending_out=0))}function G(ne,zl){c._tr_flush_block(ne,ne.block_start>=0?ne.block_start:-1,ne.strstart-ne.block_start,zl),ne.block_start=ne.strstart,Ne(ne.strm)}function se(ne,zl){ne.pending_buf[ne.pending++]=zl}function He(ne,zl){ne.pending_buf[ne.pending++]=zl>>>8&255,ne.pending_buf[ne.pending++]=255&zl}function Fe(ne,zl,Hl,pr){var Hp=ne.avail_in;return Hp>pr&&(Hp=pr),Hp===0?0:(ne.avail_in-=Hp,o.arraySet(zl,ne.input,ne.next_in,Hp,Hl),ne.state.wrap===1?ne.adler=d(ne.adler,zl,Hp,Hl):ne.state.wrap===2&&(ne.adler=p(ne.adler,zl,Hp,Hl)),ne.next_in+=Hp,ne.total_in+=Hp,Hp)}function Xe(ne,zl){var Hl,pr,Hp=ne.max_chain_length,Gl=ne.strstart,Ip=ne.prev_length,qp=ne.nice_match,ci=ne.strstart>ne.w_size-C?ne.strstart-(ne.w_size-C):0,Ep=ne.window,o0=ne.w_mask,w0=ne.prev,a0=ne.strstart+A,P0=Ep[Gl+Ip-1],am=Ep[Gl+Ip];ne.prev_length>=ne.good_match&&(Hp>>=2),qp>ne.lookahead&&(qp=ne.lookahead);do if(Ep[(Hl=zl)+Ip]===am&&Ep[Hl+Ip-1]===P0&&Ep[Hl]===Ep[Gl]&&Ep[++Hl]===Ep[Gl+1]){Gl+=2,Hl++;do;while(Ep[++Gl]===Ep[++Hl]&&Ep[++Gl]===Ep[++Hl]&&Ep[++Gl]===Ep[++Hl]&&Ep[++Gl]===Ep[++Hl]&&Ep[++Gl]===Ep[++Hl]&&Ep[++Gl]===Ep[++Hl]&&Ep[++Gl]===Ep[++Hl]&&Ep[++Gl]===Ep[++Hl]&&Gl<a0);if(pr=A-(a0-Gl),Gl=a0-A,pr>Ip){if(ne.match_start=zl,Ip=pr,pr>=qp)break;P0=Ep[Gl+Ip-1],am=Ep[Gl+Ip]}}while((zl=w0[zl&o0])>ci&&--Hp!==0);return Ip<=ne.lookahead?Ip:ne.lookahead}function be(ne){var zl,Hl,pr,Hp,Gl,Ip=ne.w_size;do{if(Hp=ne.window_size-ne.lookahead-ne.strstart,ne.strstart>=Ip+(Ip-C)){o.arraySet(ne.window,ne.window,Ip,Ip,0),ne.match_start-=Ip,ne.strstart-=Ip,ne.block_start-=Ip,zl=Hl=ne.hash_size;do pr=ne.head[--zl],ne.head[zl]=pr>=Ip?pr-Ip:0;while(--Hl);zl=Hl=Ip;do pr=ne.prev[--zl],ne.prev[zl]=pr>=Ip?pr-Ip:0;while(--Hl);Hp+=Ip}if(ne.strm.avail_in===0)break;if(Hl=Fe(ne.strm,ne.window,ne.strstart+ne.lookahead,Hp),ne.lookahead+=Hl,ne.lookahead+ne.insert>=3)for(Gl=ne.strstart-ne.insert,ne.ins_h=ne.window[Gl],ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[Gl+1])&ne.hash_mask;ne.insert&&(ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[Gl+3-1])&ne.hash_mask,ne.prev[Gl&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=Gl,Gl++,ne.insert--,!(ne.lookahead+ne.insert<3)););}while(ne.lookahead<C&&ne.strm.avail_in!==0)}function ta(ne,zl){for(var Hl,pr;;){if(ne.lookahead<C){if(be(ne),ne.lookahead<C&&zl===0)return 1;if(ne.lookahead===0)break}if(Hl=0,ne.lookahead>=3&&(ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[ne.strstart+3-1])&ne.hash_mask,Hl=ne.prev[ne.strstart&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=ne.strstart),Hl!==0&&ne.strstart-Hl<=ne.w_size-C&&(ne.match_length=Xe(ne,Hl)),ne.match_length>=3)if(pr=c._tr_tally(ne,ne.strstart-ne.match_start,ne.match_length-3),ne.lookahead-=ne.match_length,ne.match_length<=ne.max_lazy_match&&ne.lookahead>=3){ne.match_length--;do ne.strstart++,ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[ne.strstart+3-1])&ne.hash_mask,Hl=ne.prev[ne.strstart&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=ne.strstart;while(--ne.match_length!==0);ne.strstart++}else ne.strstart+=ne.match_length,ne.match_length=0,ne.ins_h=ne.window[ne.strstart],ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[ne.strstart+1])&ne.hash_mask;else pr=c._tr_tally(ne,0,ne.window[ne.strstart]),ne.lookahead--,ne.strstart++;if(pr&&(G(ne,!1),ne.strm.avail_out===0))return 1}return ne.insert=ne.strstart<2?ne.strstart:2,zl===4?(G(ne,!0),ne.strm.avail_out===0?3:4):ne.last_lit&&(G(ne,!1),ne.strm.avail_out===0)?1:2}function pn(ne,zl){for(var Hl,pr,Hp;;){if(ne.lookahead<C){if(be(ne),ne.lookahead<C&&zl===0)return 1;if(ne.lookahead===0)break}if(Hl=0,ne.lookahead>=3&&(ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[ne.strstart+3-1])&ne.hash_mask,Hl=ne.prev[ne.strstart&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=ne.strstart),ne.prev_length=ne.match_length,ne.prev_match=ne.match_start,ne.match_length=2,Hl!==0&&ne.prev_length<ne.max_lazy_match&&ne.strstart-Hl<=ne.w_size-C&&(ne.match_length=Xe(ne,Hl),ne.match_length<=5&&(ne.strategy===1||ne.match_length===3&&ne.strstart-ne.match_start>4096)&&(ne.match_length=2)),ne.prev_length>=3&&ne.match_length<=ne.prev_length){Hp=ne.strstart+ne.lookahead-3,pr=c._tr_tally(ne,ne.strstart-1-ne.prev_match,ne.prev_length-3),ne.lookahead-=ne.prev_length-1,ne.prev_length-=2;do++ne.strstart<=Hp&&(ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[ne.strstart+3-1])&ne.hash_mask,Hl=ne.prev[ne.strstart&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=ne.strstart);while(--ne.prev_length!==0);if(ne.match_available=0,ne.match_length=2,ne.strstart++,pr&&(G(ne,!1),ne.strm.avail_out===0))return 1}else if(ne.match_available){if((pr=c._tr_tally(ne,0,ne.window[ne.strstart-1]))&&G(ne,!1),ne.strstart++,ne.lookahead--,ne.strm.avail_out===0)return 1}else ne.match_available=1,ne.strstart++,ne.lookahead--}return ne.match_available&&(pr=c._tr_tally(ne,0,ne.window[ne.strstart-1]),ne.match_available=0),ne.insert=ne.strstart<2?ne.strstart:2,zl===4?(G(ne,!0),ne.strm.avail_out===0?3:4):ne.last_lit&&(G(ne,!1),ne.strm.avail_out===0)?1:2}function mr(ne,zl,Hl,pr,Hp){this.good_length=ne,this.max_lazy=zl,this.nice_length=Hl,this.max_chain=pr,this.func=Hp}function bp(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(1146),this.dyn_dtree=new o.Buf16(122),this.bl_tree=new o.Buf16(78),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(16),this.heap=new o.Buf16(573),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(573),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Sp(ne){var zl;return ne&&ne.state?(ne.total_in=ne.total_out=0,ne.data_type=2,(zl=ne.state).pending=0,zl.pending_out=0,zl.wrap<0&&(zl.wrap=-zl.wrap),zl.status=zl.wrap?42:V,ne.adler=zl.wrap===2?0:1,zl.last_flush=0,c._tr_init(zl),0):re(ne,S)}function _r(ne){var zl,Hl=Sp(ne);return Hl===0&&((zl=ne.state).window_size=2*zl.w_size,K(zl.head),zl.max_lazy_match=a[zl.level].max_lazy,zl.good_match=a[zl.level].good_length,zl.nice_match=a[zl.level].nice_length,zl.max_chain_length=a[zl.level].max_chain,zl.strstart=0,zl.block_start=0,zl.lookahead=0,zl.insert=0,zl.match_length=zl.prev_length=2,zl.match_available=0,zl.ins_h=0),Hl}function xs(ne,zl,Hl,pr,Hp,Gl){if(!ne)return S;var Ip=1;if(zl===-1&&(zl=6),pr<0?(Ip=0,pr=-pr):pr>15&&(Ip=2,pr-=16),Hp<1||Hp>9||Hl!==8||pr<8||pr>15||zl<0||zl>9||Gl<0||Gl>4)return re(ne,S);pr===8&&(pr=9);var qp=new bp;return ne.state=qp,qp.strm=ne,qp.wrap=Ip,qp.gzhead=null,qp.w_bits=pr,qp.w_size=1<<qp.w_bits,qp.w_mask=qp.w_size-1,qp.hash_bits=Hp+7,qp.hash_size=1<<qp.hash_bits,qp.hash_mask=qp.hash_size-1,qp.hash_shift=~~((qp.hash_bits+3-1)/3),qp.window=new o.Buf8(2*qp.w_size),qp.head=new o.Buf16(qp.hash_size),qp.prev=new o.Buf16(qp.w_size),qp.lit_bufsize=1<<Hp+6,qp.pending_buf_size=4*qp.lit_bufsize,qp.pending_buf=new o.Buf8(qp.pending_buf_size),qp.d_buf=1*qp.lit_bufsize,qp.l_buf=3*qp.lit_bufsize,qp.level=zl,qp.strategy=Gl,qp.method=Hl,_r(ne)}a=[new mr(0,0,0,0,function(ne,zl){var Hl=65535;for(Hl>ne.pending_buf_size-5&&(Hl=ne.pending_buf_size-5);;){if(ne.lookahead<=1){if(be(ne),ne.lookahead===0&&zl===0)return 1;if(ne.lookahead===0)break}ne.strstart+=ne.lookahead,ne.lookahead=0;var pr=ne.block_start+Hl;if((ne.strstart===0||ne.strstart>=pr)&&(ne.lookahead=ne.strstart-pr,ne.strstart=pr,G(ne,!1),ne.strm.avail_out===0)||ne.strstart-ne.block_start>=ne.w_size-C&&(G(ne,!1),ne.strm.avail_out===0))return 1}return ne.insert=0,zl===4?(G(ne,!0),ne.strm.avail_out===0?3:4):(ne.strstart>ne.block_start&&(G(ne,!1),ne.strm.avail_out),1)}),new mr(4,4,8,4,ta),new mr(4,5,16,8,ta),new mr(4,6,32,32,ta),new mr(4,4,16,16,pn),new mr(8,16,32,32,pn),new mr(8,16,128,128,pn),new mr(8,32,128,256,pn),new mr(32,128,258,1024,pn),new mr(32,258,258,4096,pn)],e.deflateInit=function(ne,zl){return xs(ne,zl,8,15,8,0)},e.deflateInit2=xs,e.deflateReset=_r,e.deflateResetKeep=Sp,e.deflateSetHeader=function(ne,zl){return ne&&ne.state?ne.state.wrap!==2?S:(ne.state.gzhead=zl,0):S},e.deflate=function(ne,zl){var Hl,pr,Hp,Gl;if(!ne||!ne.state||zl>5||zl<0)return ne?re(ne,S):S;if(pr=ne.state,!ne.output||!ne.input&&ne.avail_in!==0||pr.status===J&&zl!==4)return re(ne,ne.avail_out===0?-5:S);if(pr.strm=ne,Hl=pr.last_flush,pr.last_flush=zl,pr.status===42)if(pr.wrap===2)ne.adler=0,se(pr,31),se(pr,139),se(pr,8),pr.gzhead?(se(pr,(pr.gzhead.text?1:0)+(pr.gzhead.hcrc?2:0)+(pr.gzhead.extra?4:0)+(pr.gzhead.name?8:0)+(pr.gzhead.comment?16:0)),se(pr,255&pr.gzhead.time),se(pr,pr.gzhead.time>>8&255),se(pr,pr.gzhead.time>>16&255),se(pr,pr.gzhead.time>>24&255),se(pr,pr.level===9?2:pr.strategy>=2||pr.level<2?4:0),se(pr,255&pr.gzhead.os),pr.gzhead.extra&&pr.gzhead.extra.length&&(se(pr,255&pr.gzhead.extra.length),se(pr,pr.gzhead.extra.length>>8&255)),pr.gzhead.hcrc&&(ne.adler=p(ne.adler,pr.pending_buf,pr.pending,0)),pr.gzindex=0,pr.status=69):(se(pr,0),se(pr,0),se(pr,0),se(pr,0),se(pr,0),se(pr,pr.level===9?2:pr.strategy>=2||pr.level<2?4:0),se(pr,3),pr.status=V);else{var Ip=8+(pr.w_bits-8<<4)<<8;Ip|=(pr.strategy>=2||pr.level<2?0:pr.level<6?1:pr.level===6?2:3)<<6,pr.strstart!==0&&(Ip|=32),Ip+=31-Ip%31,pr.status=V,He(pr,Ip),pr.strstart!==0&&(He(pr,ne.adler>>>16),He(pr,65535&ne.adler)),ne.adler=1}if(pr.status===69)if(pr.gzhead.extra){for(Hp=pr.pending;pr.gzindex<(65535&pr.gzhead.extra.length)&&(pr.pending!==pr.pending_buf_size||(pr.gzhead.hcrc&&pr.pending>Hp&&(ne.adler=p(ne.adler,pr.pending_buf,pr.pending-Hp,Hp)),Ne(ne),Hp=pr.pending,pr.pending!==pr.pending_buf_size));)se(pr,255&pr.gzhead.extra[pr.gzindex]),pr.gzindex++;pr.gzhead.hcrc&&pr.pending>Hp&&(ne.adler=p(ne.adler,pr.pending_buf,pr.pending-Hp,Hp)),pr.gzindex===pr.gzhead.extra.length&&(pr.gzindex=0,pr.status=73)}else pr.status=73;if(pr.status===73)if(pr.gzhead.name){Hp=pr.pending;do{if(pr.pending===pr.pending_buf_size&&(pr.gzhead.hcrc&&pr.pending>Hp&&(ne.adler=p(ne.adler,pr.pending_buf,pr.pending-Hp,Hp)),Ne(ne),Hp=pr.pending,pr.pending===pr.pending_buf_size)){Gl=1;break}Gl=pr.gzindex<pr.gzhead.name.length?255&pr.gzhead.name.charCodeAt(pr.gzindex++):0,se(pr,Gl)}while(Gl!==0);pr.gzhead.hcrc&&pr.pending>Hp&&(ne.adler=p(ne.adler,pr.pending_buf,pr.pending-Hp,Hp)),Gl===0&&(pr.gzindex=0,pr.status=91)}else pr.status=91;if(pr.status===91)if(pr.gzhead.comment){Hp=pr.pending;do{if(pr.pending===pr.pending_buf_size&&(pr.gzhead.hcrc&&pr.pending>Hp&&(ne.adler=p(ne.adler,pr.pending_buf,pr.pending-Hp,Hp)),Ne(ne),Hp=pr.pending,pr.pending===pr.pending_buf_size)){Gl=1;break}Gl=pr.gzindex<pr.gzhead.comment.length?255&pr.gzhead.comment.charCodeAt(pr.gzindex++):0,se(pr,Gl)}while(Gl!==0);pr.gzhead.hcrc&&pr.pending>Hp&&(ne.adler=p(ne.adler,pr.pending_buf,pr.pending-Hp,Hp)),Gl===0&&(pr.status=j)}else pr.status=j;if(pr.status===j&&(pr.gzhead.hcrc?(pr.pending+2>pr.pending_buf_size&&Ne(ne),pr.pending+2<=pr.pending_buf_size&&(se(pr,255&ne.adler),se(pr,ne.adler>>8&255),ne.adler=0,pr.status=V)):pr.status=V),pr.pending!==0){if(Ne(ne),ne.avail_out===0)return pr.last_flush=-1,0}else if(ne.avail_in===0&&ie(zl)<=ie(Hl)&&zl!==4)return re(ne,-5);if(pr.status===J&&ne.avail_in!==0)return re(ne,-5);if(ne.avail_in!==0||pr.lookahead!==0||zl!==0&&pr.status!==J){var qp=pr.strategy===2?(function(ci,Ep){for(var o0;;){if(ci.lookahead===0&&(be(ci),ci.lookahead===0)){if(Ep===0)return 1;break}if(ci.match_length=0,o0=c._tr_tally(ci,0,ci.window[ci.strstart]),ci.lookahead--,ci.strstart++,o0&&(G(ci,!1),ci.strm.avail_out===0))return 1}return ci.insert=0,Ep===4?(G(ci,!0),ci.strm.avail_out===0?3:4):ci.last_lit&&(G(ci,!1),ci.strm.avail_out===0)?1:2})(pr,zl):pr.strategy===3?(function(ci,Ep){for(var o0,w0,a0,P0,am=ci.window;;){if(ci.lookahead<=A){if(be(ci),ci.lookahead<=A&&Ep===0)return 1;if(ci.lookahead===0)break}if(ci.match_length=0,ci.lookahead>=3&&ci.strstart>0&&(w0=am[a0=ci.strstart-1])===am[++a0]&&w0===am[++a0]&&w0===am[++a0]){P0=ci.strstart+A;do;while(w0===am[++a0]&&w0===am[++a0]&&w0===am[++a0]&&w0===am[++a0]&&w0===am[++a0]&&w0===am[++a0]&&w0===am[++a0]&&w0===am[++a0]&&a0<P0);ci.match_length=A-(P0-a0),ci.match_length>ci.lookahead&&(ci.match_length=ci.lookahead)}if(ci.match_length>=3?(o0=c._tr_tally(ci,1,ci.match_length-3),ci.lookahead-=ci.match_length,ci.strstart+=ci.match_length,ci.match_length=0):(o0=c._tr_tally(ci,0,ci.window[ci.strstart]),ci.lookahead--,ci.strstart++),o0&&(G(ci,!1),ci.strm.avail_out===0))return 1}return ci.insert=0,Ep===4?(G(ci,!0),ci.strm.avail_out===0?3:4):ci.last_lit&&(G(ci,!1),ci.strm.avail_out===0)?1:2})(pr,zl):a[pr.level].func(pr,zl);if(qp!==3&&qp!==4||(pr.status=J),qp===1||qp===3)return ne.avail_out===0&&(pr.last_flush=-1),0;if(qp===2&&(zl===1?c._tr_align(pr):zl!==5&&(c._tr_stored_block(pr,0,0,!1),zl===3&&(K(pr.head),pr.lookahead===0&&(pr.strstart=0,pr.block_start=0,pr.insert=0))),Ne(ne),ne.avail_out===0))return pr.last_flush=-1,0}return zl!==4?0:pr.wrap<=0?1:(pr.wrap===2?(se(pr,255&ne.adler),se(pr,ne.adler>>8&255),se(pr,ne.adler>>16&255),se(pr,ne.adler>>24&255),se(pr,255&ne.total_in),se(pr,ne.total_in>>8&255),se(pr,ne.total_in>>16&255),se(pr,ne.total_in>>24&255)):(He(pr,ne.adler>>>16),He(pr,65535&ne.adler)),Ne(ne),pr.wrap>0&&(pr.wrap=-pr.wrap),pr.pending!==0?0:1)},e.deflateEnd=function(ne){var zl;return ne&&ne.state?(zl=ne.state.status)!==42&&zl!==69&&zl!==73&&zl!==91&&zl!==j&&zl!==V&&zl!==J?re(ne,S):(ne.state=null,zl===V?re(ne,-3):0):S},e.deflateSetDictionary=function(ne,zl){var Hl,pr,Hp,Gl,Ip,qp,ci,Ep,o0=zl.length;if(!ne||!ne.state||(Gl=(Hl=ne.state).wrap)===2||Gl===1&&Hl.status!==42||Hl.lookahead)return S;for(Gl===1&&(ne.adler=d(ne.adler,zl,o0,0)),Hl.wrap=0,o0>=Hl.w_size&&(Gl===0&&(K(Hl.head),Hl.strstart=0,Hl.block_start=0,Hl.insert=0),Ep=new o.Buf8(Hl.w_size),o.arraySet(Ep,zl,o0-Hl.w_size,Hl.w_size,0),zl=Ep,o0=Hl.w_size),Ip=ne.avail_in,qp=ne.next_in,ci=ne.input,ne.avail_in=o0,ne.next_in=0,ne.input=zl,be(Hl);Hl.lookahead>=3;){pr=Hl.strstart,Hp=Hl.lookahead-2;do Hl.ins_h=(Hl.ins_h<<Hl.hash_shift^Hl.window[pr+3-1])&Hl.hash_mask,Hl.prev[pr&Hl.w_mask]=Hl.head[Hl.ins_h],Hl.head[Hl.ins_h]=pr,pr++;while(--Hp);Hl.strstart=pr,Hl.lookahead=2,be(Hl)}return Hl.strstart+=Hl.lookahead,Hl.block_start=Hl.strstart,Hl.insert=Hl.lookahead,Hl.lookahead=0,Hl.match_length=Hl.prev_length=2,Hl.match_available=0,ne.next_in=qp,ne.input=ci,ne.avail_in=Ip,Hl.wrap=Gl,0},e.deflateInfo="pako deflate (from Nodeca project)"},111:(r,e,t)=>{var a;a={},r.exports=a,(function(o,c){o.toRGBA8=function(d){var p=d.width,_=d.height;if(d.tabs.acTL==null)return[o.toRGBA8.decodeImage(d.data,p,_,d).buffer];var S=[];d.frames[0].data==null&&(d.frames[0].data=d.data);for(var A,C=new Uint8Array(p*_*4),j=0;j<d.frames.length;j++){var V=d.frames[j],J=V.rect.x,re=V.rect.y,ie=V.rect.width,K=V.rect.height,Ne=o.toRGBA8.decodeImage(V.data,ie,K,d);if(j==0?A=Ne:V.blend==0?o._copyTile(Ne,ie,K,A,p,_,J,re,0):V.blend==1&&o._copyTile(Ne,ie,K,A,p,_,J,re,1),S.push(A.buffer),A=A.slice(0),V.dispose!=0){if(V.dispose==1)o._copyTile(C,ie,K,A,p,_,J,re,0);else if(V.dispose==2){for(var G=j-1;d.frames[G].dispose==2;)G--;A=new Uint8Array(S[G]).slice(0)}}}return S},o.toRGBA8.decodeImage=function(d,p,_,S){var A=p*_,C=o.decode._getBPP(S),j=Math.ceil(p*C/8),V=new Uint8Array(4*A),J=new Uint32Array(V.buffer),re=S.ctype,ie=S.depth,K=o._bin.readUshort;if(re==6){var Ne=A<<2;if(ie==8)for(var G=0;G<Ne;G++)V[G]=d[G];if(ie==16)for(G=0;G<Ne;G++)V[G]=d[G<<1]}else if(re==2){var se=S.tabs.tRNS,He=-1,Fe=-1,Xe=-1;if(se&&(He=se[0],Fe=se[1],Xe=se[2]),ie==8)for(G=0;G<A;G++){var be=3*G;V[xs=G<<2]=d[be],V[xs+1]=d[be+1],V[xs+2]=d[be+2],V[xs+3]=255,He!=-1&&d[be]==He&&d[be+1]==Fe&&d[be+2]==Xe&&(V[xs+3]=0)}if(ie==16)for(G=0;G<A;G++)be=6*G,V[xs=G<<2]=d[be],V[xs+1]=d[be+2],V[xs+2]=d[be+4],V[xs+3]=255,He!=-1&&K(d,be)==He&&K(d,be+2)==Fe&&K(d,be+4)==Xe&&(V[xs+3]=0)}else if(re==3){var ta=S.tabs.PLTE,pn=S.tabs.tRNS,mr=pn?pn.length:0;if(ie==1)for(var bp=0;bp<_;bp++){var Sp=bp*j,_r=bp*p;for(G=0;G<p;G++){var xs=_r+G<<2,ne=3*(zl=d[Sp+(G>>3)]>>7-(7&G)&1);V[xs]=ta[ne],V[xs+1]=ta[ne+1],V[xs+2]=ta[ne+2],V[xs+3]=zl<mr?pn[zl]:255}}if(ie==2)for(bp=0;bp<_;bp++)for(Sp=bp*j,_r=bp*p,G=0;G<p;G++)xs=_r+G<<2,ne=3*(zl=d[Sp+(G>>2)]>>6-((3&G)<<1)&3),V[xs]=ta[ne],V[xs+1]=ta[ne+1],V[xs+2]=ta[ne+2],V[xs+3]=zl<mr?pn[zl]:255;if(ie==4)for(bp=0;bp<_;bp++)for(Sp=bp*j,_r=bp*p,G=0;G<p;G++)xs=_r+G<<2,ne=3*(zl=d[Sp+(G>>1)]>>4-((1&G)<<2)&15),V[xs]=ta[ne],V[xs+1]=ta[ne+1],V[xs+2]=ta[ne+2],V[xs+3]=zl<mr?pn[zl]:255;if(ie==8)for(G=0;G<A;G++){var zl;xs=G<<2,ne=3*(zl=d[G]),V[xs]=ta[ne],V[xs+1]=ta[ne+1],V[xs+2]=ta[ne+2],V[xs+3]=zl<mr?pn[zl]:255}}else if(re==4){if(ie==8)for(G=0;G<A;G++){xs=G<<2;var Hl=d[pr=G<<1];V[xs]=Hl,V[xs+1]=Hl,V[xs+2]=Hl,V[xs+3]=d[pr+1]}if(ie==16)for(G=0;G<A;G++){var pr;xs=G<<2,Hl=d[pr=G<<2],V[xs]=Hl,V[xs+1]=Hl,V[xs+2]=Hl,V[xs+3]=d[pr+2]}}else if(re==0){if(He=S.tabs.tRNS?S.tabs.tRNS:-1,ie==1)for(G=0;G<A;G++){var Hp=(Hl=255*(d[G>>3]>>7-(7&G)&1))==255*He?0:255;J[G]=Hp<<24|Hl<<16|Hl<<8|Hl}if(ie==2)for(G=0;G<A;G++)Hp=(Hl=85*(d[G>>2]>>6-((3&G)<<1)&3))==85*He?0:255,J[G]=Hp<<24|Hl<<16|Hl<<8|Hl;if(ie==4)for(G=0;G<A;G++)Hp=(Hl=17*(d[G>>1]>>4-((1&G)<<2)&15))==17*He?0:255,J[G]=Hp<<24|Hl<<16|Hl<<8|Hl;if(ie==8)for(G=0;G<A;G++)Hp=(Hl=d[G])==He?0:255,J[G]=Hp<<24|Hl<<16|Hl<<8|Hl;if(ie==16)for(G=0;G<A;G++)Hl=d[G<<1],Hp=K(d,G<<1)==He?0:255,J[G]=Hp<<24|Hl<<16|Hl<<8|Hl}return V},o.decode=function(d){for(var p,_=new Uint8Array(d),S=8,A=o._bin,C=A.readUshort,j=A.readUint,V={tabs:{},frames:[]},J=new Uint8Array(_.length),re=0,ie=0,K=[137,80,78,71,13,10,26,10],Ne=0;Ne<8;Ne++)if(_[Ne]!=K[Ne])throw"The input is not a PNG file!";for(;S<_.length;){var G=A.readUint(_,S);S+=4;var se=A.readASCII(_,S,4);if(S+=4,se=="IHDR")o.decode._IHDR(_,S,V);else if(se=="IDAT"){for(Ne=0;Ne<G;Ne++)J[re+Ne]=_[S+Ne];re+=G}else if(se=="acTL")V.tabs[se]={num_frames:j(_,S),num_plays:j(_,S+4)},p=new Uint8Array(_.length);else if(se=="fcTL"){ie!=0&&((Sp=V.frames[V.frames.length-1]).data=o.decode._decompress(V,p.slice(0,ie),Sp.rect.width,Sp.rect.height),ie=0);var He={x:j(_,S+12),y:j(_,S+16),width:j(_,S+4),height:j(_,S+8)},Fe=C(_,S+22);Fe=C(_,S+20)/(Fe==0?100:Fe);var Xe={rect:He,delay:Math.round(1e3*Fe),dispose:_[S+24],blend:_[S+25]};V.frames.push(Xe)}else if(se=="fdAT"){for(Ne=0;Ne<G-4;Ne++)p[ie+Ne]=_[S+Ne+4];ie+=G-4}else if(se=="pHYs")V.tabs[se]=[A.readUint(_,S),A.readUint(_,S+4),_[S+8]];else if(se=="cHRM")for(V.tabs[se]=[],Ne=0;Ne<8;Ne++)V.tabs[se].push(A.readUint(_,S+4*Ne));else if(se=="tEXt"){V.tabs[se]==null&&(V.tabs[se]={});var be=A.nextZero(_,S),ta=A.readASCII(_,S,be-S),pn=A.readASCII(_,be+1,S+G-be-1);V.tabs[se][ta]=pn}else if(se=="iTXt"){V.tabs[se]==null&&(V.tabs[se]={}),be=0;var mr=S;be=A.nextZero(_,mr),ta=A.readASCII(_,mr,be-mr),_[mr=be+1],_[mr+1],mr+=2,be=A.nextZero(_,mr),A.readASCII(_,mr,be-mr),mr=be+1,be=A.nextZero(_,mr),A.readUTF8(_,mr,be-mr),mr=be+1,pn=A.readUTF8(_,mr,G-(mr-S)),V.tabs[se][ta]=pn}else if(se=="PLTE")V.tabs[se]=A.readBytes(_,S,G);else if(se=="hIST"){var bp=V.tabs.PLTE.length/3;for(V.tabs[se]=[],Ne=0;Ne<bp;Ne++)V.tabs[se].push(C(_,S+2*Ne))}else if(se=="tRNS")V.ctype==3?V.tabs[se]=A.readBytes(_,S,G):V.ctype==0?V.tabs[se]=C(_,S):V.ctype==2&&(V.tabs[se]=[C(_,S),C(_,S+2),C(_,S+4)]);else if(se=="gAMA")V.tabs[se]=A.readUint(_,S)/1e5;else if(se=="sRGB")V.tabs[se]=_[S];else if(se=="bKGD")V.ctype==0||V.ctype==4?V.tabs[se]=[C(_,S)]:V.ctype==2||V.ctype==6?V.tabs[se]=[C(_,S),C(_,S+2),C(_,S+4)]:V.ctype==3&&(V.tabs[se]=_[S]);else if(se=="IEND"){var Sp;ie!=0&&((Sp=V.frames[V.frames.length-1]).data=o.decode._decompress(V,p.slice(0,ie),Sp.rect.width,Sp.rect.height),ie=0),V.data=o.decode._decompress(V,J,V.width,V.height);break}S+=G,A.readUint(_,S),S+=4}return delete V.compress,delete V.interlace,delete V.filter,V},o.decode._decompress=function(d,p,_,S){return d.compress==0&&(p=o.decode._inflate(p)),d.interlace==0?p=o.decode._filterZero(p,d,0,_,S):d.interlace==1&&(p=o.decode._readInterlace(p,d)),p},o.decode._inflate=function(d){return c.inflate(d)},o.decode._readInterlace=function(d,p){for(var _=p.width,S=p.height,A=o.decode._getBPP(p),C=A>>3,j=Math.ceil(_*A/8),V=new Uint8Array(S*j),J=0,re=[0,0,4,0,2,0,1],ie=[0,4,0,2,0,1,0],K=[8,8,8,4,4,2,2],Ne=[8,8,4,4,2,2,1],G=0;G<7;){for(var se=K[G],He=Ne[G],Fe=0,Xe=0,be=re[G];be<S;)be+=se,Xe++;for(var ta=ie[G];ta<_;)ta+=He,Fe++;var pn=Math.ceil(Fe*A/8);o.decode._filterZero(d,p,J,Fe,Xe);for(var mr=0,bp=re[G];bp<S;){for(var Sp=ie[G],_r=J+mr*pn<<3;Sp<_;){var xs;if(A==1&&(xs=(xs=d[_r>>3])>>7-(7&_r)&1,V[bp*j+(Sp>>3)]|=xs<<7-(3&Sp)),A==2&&(xs=(xs=d[_r>>3])>>6-(7&_r)&3,V[bp*j+(Sp>>2)]|=xs<<6-((3&Sp)<<1)),A==4&&(xs=(xs=d[_r>>3])>>4-(7&_r)&15,V[bp*j+(Sp>>1)]|=xs<<4-((1&Sp)<<2)),A>=8)for(var ne=bp*j+Sp*C,zl=0;zl<C;zl++)V[ne+zl]=d[(_r>>3)+zl];_r+=A,Sp+=He}mr++,bp+=se}Fe*Xe!=0&&(J+=Xe*(1+pn)),G+=1}return V},o.decode._getBPP=function(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth},o.decode._filterZero=function(d,p,_,S,A){var C=o.decode._getBPP(p),j=Math.ceil(S*C/8),V=o.decode._paeth;C=Math.ceil(C/8);for(var J=0;J<A;J++){var re=_+J*j,ie=re+J+1,K=d[ie-1];if(K==0)for(var Ne=0;Ne<j;Ne++)d[re+Ne]=d[ie+Ne];else if(K==1){for(Ne=0;Ne<C;Ne++)d[re+Ne]=d[ie+Ne];for(Ne=C;Ne<j;Ne++)d[re+Ne]=d[ie+Ne]+d[re+Ne-C]&255}else if(J==0){for(Ne=0;Ne<C;Ne++)d[re+Ne]=d[ie+Ne];if(K==2)for(Ne=C;Ne<j;Ne++)d[re+Ne]=255&d[ie+Ne];if(K==3)for(Ne=C;Ne<j;Ne++)d[re+Ne]=d[ie+Ne]+(d[re+Ne-C]>>1)&255;if(K==4)for(Ne=C;Ne<j;Ne++)d[re+Ne]=d[ie+Ne]+V(d[re+Ne-C],0,0)&255}else{if(K==2)for(Ne=0;Ne<j;Ne++)d[re+Ne]=d[ie+Ne]+d[re+Ne-j]&255;if(K==3){for(Ne=0;Ne<C;Ne++)d[re+Ne]=d[ie+Ne]+(d[re+Ne-j]>>1)&255;for(Ne=C;Ne<j;Ne++)d[re+Ne]=d[ie+Ne]+(d[re+Ne-j]+d[re+Ne-C]>>1)&255}if(K==4){for(Ne=0;Ne<C;Ne++)d[re+Ne]=d[ie+Ne]+V(0,d[re+Ne-j],0)&255;for(Ne=C;Ne<j;Ne++)d[re+Ne]=d[ie+Ne]+V(d[re+Ne-C],d[re+Ne-j],d[re+Ne-C-j])&255}}}return d},o.decode._paeth=function(d,p,_){var S=d+p-_,A=Math.abs(S-d),C=Math.abs(S-p),j=Math.abs(S-_);return A<=C&&A<=j?d:C<=j?p:_},o.decode._IHDR=function(d,p,_){var S=o._bin;_.width=S.readUint(d,p),p+=4,_.height=S.readUint(d,p),p+=4,_.depth=d[p],p++,_.ctype=d[p],p++,_.compress=d[p],p++,_.filter=d[p],p++,_.interlace=d[p],p++},o._bin={nextZero:function(d,p){for(;d[p]!=0;)p++;return p},readUshort:function(d,p){return d[p]<<8|d[p+1]},writeUshort:function(d,p,_){d[p]=_>>8&255,d[p+1]=255&_},readUint:function(d,p){return 16777216*d[p]+(d[p+1]<<16|d[p+2]<<8|d[p+3])},writeUint:function(d,p,_){d[p]=_>>24&255,d[p+1]=_>>16&255,d[p+2]=_>>8&255,d[p+3]=255&_},readASCII:function(d,p,_){for(var S="",A=0;A<_;A++)S+=String.fromCharCode(d[p+A]);return S},writeASCII:function(d,p,_){for(var S=0;S<_.length;S++)d[p+S]=_.charCodeAt(S)},readBytes:function(d,p,_){for(var S=[],A=0;A<_;A++)S.push(d[p+A]);return S},pad:function(d){return d.length<2?"0"+d:d},readUTF8:function(d,p,_){for(var S,A="",C=0;C<_;C++)A+="%"+o._bin.pad(d[p+C].toString(16));try{S=decodeURIComponent(A)}catch{return o._bin.readASCII(d,p,_)}return S}},o._copyTile=function(d,p,_,S,A,C,j,V,J){for(var re=Math.min(p,A),ie=Math.min(_,C),K=0,Ne=0,G=0;G<ie;G++)for(var se=0;se<re;se++)if(j>=0&&V>=0?(K=G*p+se<<2,Ne=(V+G)*A+j+se<<2):(K=(-V+G)*p-j+se<<2,Ne=G*A+se<<2),J==0)S[Ne]=d[K],S[Ne+1]=d[K+1],S[Ne+2]=d[K+2],S[Ne+3]=d[K+3];else if(J==1){var He=d[K+3]*.00392156862745098,Fe=d[K]*He,Xe=d[K+1]*He,be=d[K+2]*He,ta=S[Ne+3]*(1/255),pn=S[Ne]*ta,mr=S[Ne+1]*ta,bp=S[Ne+2]*ta,Sp=1-He,_r=He+ta*Sp,xs=_r==0?0:1/_r;S[Ne+3]=255*_r,S[Ne+0]=(Fe+pn*Sp)*xs,S[Ne+1]=(Xe+mr*Sp)*xs,S[Ne+2]=(be+bp*Sp)*xs}else if(J==2)He=d[K+3],Fe=d[K],Xe=d[K+1],be=d[K+2],ta=S[Ne+3],pn=S[Ne],mr=S[Ne+1],bp=S[Ne+2],He==ta&&Fe==pn&&Xe==mr&&be==bp?(S[Ne]=0,S[Ne+1]=0,S[Ne+2]=0,S[Ne+3]=0):(S[Ne]=Fe,S[Ne+1]=Xe,S[Ne+2]=be,S[Ne+3]=He);else if(J==3){if(He=d[K+3],Fe=d[K],Xe=d[K+1],be=d[K+2],ta=S[Ne+3],pn=S[Ne],mr=S[Ne+1],bp=S[Ne+2],He==ta&&Fe==pn&&Xe==mr&&be==bp)continue;if(He<220&&ta>20)return!1}return!0},o.encode=function(d,p,_,S,A,C){S==null&&(S=0),C==null&&(C=!1);for(var j=new Uint8Array(d[0].byteLength*d.length+100),V=[137,80,78,71,13,10,26,10],J=0;J<8;J++)j[J]=V[J];var re=8,ie=o._bin,K=o.crc.crc,Ne=ie.writeUint,G=ie.writeUshort,se=ie.writeASCII,He=o.encode.compressPNG(d,p,_,S,C);Ne(j,re,13),se(j,re+=4,"IHDR"),Ne(j,re+=4,p),Ne(j,re+=4,_),j[re+=4]=He.depth,j[++re]=He.ctype,j[++re]=0,j[++re]=0,j[++re]=0,Ne(j,++re,K(j,re-17,17)),Ne(j,re+=4,1),se(j,re+=4,"sRGB"),j[re+=4]=1,Ne(j,++re,K(j,re-5,5)),re+=4;var Fe=d.length>1;if(Fe&&(Ne(j,re,8),se(j,re+=4,"acTL"),Ne(j,re+=4,d.length),Ne(j,re+=4,0),Ne(j,re+=4,K(j,re-12,12)),re+=4),He.ctype==3){for(Ne(j,re,3*(xs=He.plte.length)),se(j,re+=4,"PLTE"),re+=4,J=0;J<xs;J++){var Xe=3*J,be=He.plte[J],ta=255&be,pn=be>>8&255,mr=be>>16&255;j[re+Xe+0]=ta,j[re+Xe+1]=pn,j[re+Xe+2]=mr}if(Ne(j,re+=3*xs,K(j,re-3*xs-4,3*xs+4)),re+=4,He.gotAlpha){for(Ne(j,re,xs),se(j,re+=4,"tRNS"),re+=4,J=0;J<xs;J++)j[re+J]=He.plte[J]>>24&255;Ne(j,re+=xs,K(j,re-xs-4,xs+4)),re+=4}}for(var bp=0,Sp=0;Sp<He.frames.length;Sp++){var _r=He.frames[Sp];Fe&&(Ne(j,re,26),se(j,re+=4,"fcTL"),Ne(j,re+=4,bp++),Ne(j,re+=4,_r.rect.width),Ne(j,re+=4,_r.rect.height),Ne(j,re+=4,_r.rect.x),Ne(j,re+=4,_r.rect.y),G(j,re+=4,A[Sp]),G(j,re+=2,1e3),j[re+=2]=_r.dispose,j[++re]=_r.blend,Ne(j,++re,K(j,re-30,30)),re+=4);var xs,ne=_r.cimg;Ne(j,re,(xs=ne.length)+(Sp==0?0:4));var zl=re+=4;for(se(j,re,Sp==0?"IDAT":"fdAT"),re+=4,Sp!=0&&(Ne(j,re,bp++),re+=4),J=0;J<xs;J++)j[re+J]=ne[J];Ne(j,re+=xs,K(j,zl,re-zl)),re+=4}return Ne(j,re,0),se(j,re+=4,"IEND"),Ne(j,re+=4,K(j,re-4,4)),re+=4,j.buffer.slice(0,re)},o.encode.compressPNG=function(d,p,_,S,A){for(var C=o.encode.compress(d,p,_,S,!1,A),j=0;j<d.length;j++){var V=C.frames[j],J=(V.rect.width,V.rect.height),re=V.bpl,ie=V.bpp,K=new Uint8Array(J*re+J);V.cimg=o.encode._filterZero(V.img,J,ie,re,K)}return C},o.encode.compress=function(d,p,_,S,A,C){C==null&&(C=!1);for(var j=6,V=8,J=4,re=255,ie=0;ie<d.length;ie++)for(var K=new Uint8Array(d[ie]),Ne=K.length,G=0;G<Ne;G+=4)re&=K[G+3];var se=re!=255,He={},Fe=[];if(d.length!=0&&(He[0]=0,Fe.push(0),S!=0&&S--),S!=0){var Xe=o.quantize(d,S,A);for(d=Xe.bufs,G=0;G<Xe.plte.length;G++)He[ta=Xe.plte[G].est.rgba]==null&&(He[ta]=Fe.length,Fe.push(ta))}else for(ie=0;ie<d.length;ie++){var be=new Uint32Array(d[ie]);for(Ne=be.length,G=0;G<Ne;G++){var ta=be[G];if((G<p||ta!=be[G-1]&&ta!=be[G-p])&&He[ta]==null&&(He[ta]=Fe.length,Fe.push(ta),Fe.length>=300))break}}var pn=!!se&&A,mr=Fe.length;mr<=256&&C==0&&(V=mr<=2?1:mr<=4?2:mr<=16?4:8,A&&(V=8),se=!0);var bp=[];for(ie=0;ie<d.length;ie++){var Sp=new Uint8Array(d[ie]),_r=new Uint32Array(Sp.buffer),xs=0,ne=0,zl=p,Hl=_,pr=0;if(ie!=0&&!pn){for(var Hp=A||ie==1||bp[bp.length-2].dispose==2?1:2,Gl=0,Ip=1e9,qp=0;qp<Hp;qp++){for(var ci=new Uint8Array(d[ie-1-qp]),Ep=new Uint32Array(d[ie-1-qp]),o0=p,w0=_,a0=-1,P0=-1,am=0;am<_;am++)for(var sm=0;sm<p;sm++)_r[G=am*p+sm]!=Ep[G]&&(sm<o0&&(o0=sm),sm>a0&&(a0=sm),am<w0&&(w0=am),am>P0&&(P0=am));var C0=a0==-1?1:(a0-o0+1)*(P0-w0+1);C0<Ip&&(Ip=C0,Gl=qp,a0==-1?(xs=ne=0,zl=Hl=1):(xs=o0,ne=w0,zl=a0-o0+1,Hl=P0-w0+1))}ci=new Uint8Array(d[ie-1-Gl]),Gl==1&&(bp[bp.length-1].dispose=2);var Fm=new Uint8Array(zl*Hl*4);new Uint32Array(Fm.buffer),o._copyTile(ci,p,_,Fm,zl,Hl,-xs,-ne,0),o._copyTile(Sp,p,_,Fm,zl,Hl,-xs,-ne,3)?(o._copyTile(Sp,p,_,Fm,zl,Hl,-xs,-ne,2),pr=1):(o._copyTile(Sp,p,_,Fm,zl,Hl,-xs,-ne,0),pr=0),Sp=Fm,_r=new Uint32Array(Sp.buffer)}var Zm=4*zl;if(mr<=256&&C==0){for(Zm=Math.ceil(V*zl/8),Fm=new Uint8Array(Zm*Hl),am=0;am<Hl;am++){G=am*Zm;var p1=am*zl;if(V==8)for(sm=0;sm<zl;sm++)Fm[G+sm]=He[_r[p1+sm]];else if(V==4)for(sm=0;sm<zl;sm++)Fm[G+(sm>>1)]|=He[_r[p1+sm]]<<4-4*(1&sm);else if(V==2)for(sm=0;sm<zl;sm++)Fm[G+(sm>>2)]|=He[_r[p1+sm]]<<6-2*(3&sm);else if(V==1)for(sm=0;sm<zl;sm++)Fm[G+(sm>>3)]|=He[_r[p1+sm]]<<7-1*(7&sm)}Sp=Fm,j=3,J=1}else if(se==0&&d.length==1){Fm=new Uint8Array(zl*Hl*3);var A1=zl*Hl;for(G=0;G<A1;G++){var T1=3*G,Tm=4*G;Fm[T1]=Sp[Tm],Fm[T1+1]=Sp[Tm+1],Fm[T1+2]=Sp[Tm+2]}Sp=Fm,j=2,J=3,Zm=3*zl}bp.push({rect:{x:xs,y:ne,width:zl,height:Hl},img:Sp,bpl:Zm,bpp:J,blend:pr,dispose:pn?1:0})}return{ctype:j,depth:V,plte:Fe,gotAlpha:se,frames:bp}},o.encode._filterZero=function(d,p,_,S,A){for(var C=[],j=0;j<5;j++)if(!(p*S>5e5)||j!=2&&j!=3&&j!=4){for(var V=0;V<p;V++)o.encode._filterLine(A,d,V,S,_,j);if(C.push(c.deflate(A)),_==1)break}for(var J,re=1e9,ie=0;ie<C.length;ie++)C[ie].length<re&&(J=ie,re=C[ie].length);return C[J]},o.encode._filterLine=function(d,p,_,S,A,C){var j=_*S,V=j+_,J=o.decode._paeth;if(d[V]=C,V++,C==0)for(var re=0;re<S;re++)d[V+re]=p[j+re];else if(C==1){for(re=0;re<A;re++)d[V+re]=p[j+re];for(re=A;re<S;re++)d[V+re]=p[j+re]-p[j+re-A]+256&255}else if(_==0){for(re=0;re<A;re++)d[V+re]=p[j+re];if(C==2)for(re=A;re<S;re++)d[V+re]=p[j+re];if(C==3)for(re=A;re<S;re++)d[V+re]=p[j+re]-(p[j+re-A]>>1)+256&255;if(C==4)for(re=A;re<S;re++)d[V+re]=p[j+re]-J(p[j+re-A],0,0)+256&255}else{if(C==2)for(re=0;re<S;re++)d[V+re]=p[j+re]+256-p[j+re-S]&255;if(C==3){for(re=0;re<A;re++)d[V+re]=p[j+re]+256-(p[j+re-S]>>1)&255;for(re=A;re<S;re++)d[V+re]=p[j+re]+256-(p[j+re-S]+p[j+re-A]>>1)&255}if(C==4){for(re=0;re<A;re++)d[V+re]=p[j+re]+256-J(0,p[j+re-S],0)&255;for(re=A;re<S;re++)d[V+re]=p[j+re]+256-J(p[j+re-A],p[j+re-S],p[j+re-A-S])&255}}},o.crc={table:(function(){for(var d=new Uint32Array(256),p=0;p<256;p++){for(var _=p,S=0;S<8;S++)1&_?_=3988292384^_>>>1:_>>>=1;d[p]=_}return d})(),update:function(d,p,_,S){for(var A=0;A<S;A++)d=o.crc.table[255&(d^p[_+A])]^d>>>8;return d},crc:function(d,p,_){return 4294967295^o.crc.update(4294967295,d,p,_)}},o.quantize=function(d,p,_){for(var S=[],A=0,C=0;C<d.length;C++)S.push(o.encode.alphaMul(new Uint8Array(d[C]),_)),A+=d[C].byteLength;var j=new Uint8Array(A),V=new Uint32Array(j.buffer),J=0;for(C=0;C<S.length;C++){for(var re=S[C],ie=re.length,K=0;K<ie;K++)j[J+K]=re[K];J+=ie}var Ne={i0:0,i1:j.length,bst:null,est:null,tdst:0,left:null,right:null};Ne.bst=o.quantize.stats(j,Ne.i0,Ne.i1),Ne.est=o.quantize.estats(Ne.bst);for(var G=[Ne];G.length<p;){var se=0,He=0;for(C=0;C<G.length;C++)G[C].est.L>se&&(se=G[C].est.L,He=C);if(se<.001)break;var Fe=G[He],Xe=o.quantize.splitPixels(j,V,Fe.i0,Fe.i1,Fe.est.e,Fe.est.eMq255),be={i0:Fe.i0,i1:Xe,bst:null,est:null,tdst:0,left:null,right:null};be.bst=o.quantize.stats(j,be.i0,be.i1),be.est=o.quantize.estats(be.bst);var ta={i0:Xe,i1:Fe.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ta.bst={R:[],m:[],N:Fe.bst.N-be.bst.N},C=0;C<16;C++)ta.bst.R[C]=Fe.bst.R[C]-be.bst.R[C];for(C=0;C<4;C++)ta.bst.m[C]=Fe.bst.m[C]-be.bst.m[C];ta.est=o.quantize.estats(ta.bst),Fe.left=be,Fe.right=ta,G[He]=be,G.push(ta)}G.sort(function(Hp,Gl){return Gl.bst.N-Hp.bst.N});for(var pn=0;pn<S.length;pn++){var mr=o.quantize.planeDst,bp=new Uint8Array(S[pn].buffer),Sp=new Uint32Array(S[pn].buffer),_r=bp.length;for(C=0;C<_r;C+=4){for(var xs=bp[C]*.00392156862745098,ne=bp[C+1]*.00392156862745098,zl=bp[C+2]*.00392156862745098,Hl=bp[C+3]*.00392156862745098,pr=Ne;pr.left;)pr=mr(pr.est,xs,ne,zl,Hl)<=0?pr.left:pr.right;Sp[C>>2]=pr.est.rgba}S[pn]=Sp.buffer}return{bufs:S,plte:G}},o.quantize.getNearest=function(d,p,_,S,A){if(d.left==null)return d.tdst=o.quantize.dist(d.est.q,p,_,S,A),d;var C=o.quantize.planeDst(d.est,p,_,S,A),j=d.left,V=d.right;C>0&&(j=d.right,V=d.left);var J=o.quantize.getNearest(j,p,_,S,A);if(J.tdst<=C*C)return J;var re=o.quantize.getNearest(V,p,_,S,A);return re.tdst<J.tdst?re:J},o.quantize.planeDst=function(d,p,_,S,A){var C=d.e;return C[0]*p+C[1]*_+C[2]*S+C[3]*A-d.eMq},o.quantize.dist=function(d,p,_,S,A){var C=p-d[0],j=_-d[1],V=S-d[2],J=A-d[3];return C*C+j*j+V*V+J*J},o.quantize.splitPixels=function(d,p,_,S,A,C){var j=o.quantize.vecDot;for(S-=4;_<S;){for(;j(d,_,A)<=C;)_+=4;for(;j(d,S,A)>C;)S-=4;if(_>=S)break;var V=p[_>>2];p[_>>2]=p[S>>2],p[S>>2]=V,_+=4,S-=4}for(;j(d,_,A)>C;)_-=4;return _+4},o.quantize.vecDot=function(d,p,_){return d[p]*_[0]+d[p+1]*_[1]+d[p+2]*_[2]+d[p+3]*_[3]},o.quantize.stats=function(d,p,_){for(var S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0],C=_-p>>2,j=p;j<_;j+=4){var V=d[j]*.00392156862745098,J=d[j+1]*(1/255),re=d[j+2]*(1/255),ie=d[j+3]*(1/255);A[0]+=V,A[1]+=J,A[2]+=re,A[3]+=ie,S[0]+=V*V,S[1]+=V*J,S[2]+=V*re,S[3]+=V*ie,S[5]+=J*J,S[6]+=J*re,S[7]+=J*ie,S[10]+=re*re,S[11]+=re*ie,S[15]+=ie*ie}return S[4]=S[1],S[8]=S[2],S[12]=S[3],S[9]=S[6],S[13]=S[7],S[14]=S[11],{R:S,m:A,N:C}},o.quantize.estats=function(d){var p=d.R,_=d.m,S=d.N,A=_[0],C=_[1],j=_[2],V=_[3],J=S==0?0:1/S,re=[p[0]-A*A*J,p[1]-A*C*J,p[2]-A*j*J,p[3]-A*V*J,p[4]-C*A*J,p[5]-C*C*J,p[6]-C*j*J,p[7]-C*V*J,p[8]-j*A*J,p[9]-j*C*J,p[10]-j*j*J,p[11]-j*V*J,p[12]-V*A*J,p[13]-V*C*J,p[14]-V*j*J,p[15]-V*V*J],ie=re,K=o.M4,Ne=[.5,.5,.5,.5],G=0,se=0;if(S!=0)for(var He=0;He<10&&(Ne=K.multVec(ie,Ne),se=Math.sqrt(K.dot(Ne,Ne)),Ne=K.sml(1/se,Ne),!(Math.abs(se-G)<1e-9));He++)G=se;var Fe=[A*J,C*J,j*J,V*J],Xe=K.dot(K.sml(255,Fe),Ne),be=Fe[3]<.001?0:1/Fe[3];return{Cov:re,q:Fe,e:Ne,L:G,eMq255:Xe,eMq:K.dot(Ne,Fe),rgba:(Math.round(255*Fe[3])<<24|Math.round(255*Fe[2]*be)<<16|Math.round(255*Fe[1]*be)<<8|Math.round(255*Fe[0]*be))>>>0}},o.M4={multVec:function(d,p){return[d[0]*p[0]+d[1]*p[1]+d[2]*p[2]+d[3]*p[3],d[4]*p[0]+d[5]*p[1]+d[6]*p[2]+d[7]*p[3],d[8]*p[0]+d[9]*p[1]+d[10]*p[2]+d[11]*p[3],d[12]*p[0]+d[13]*p[1]+d[14]*p[2]+d[15]*p[3]]},dot:function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]+d[3]*p[3]},sml:function(d,p){return[d*p[0],d*p[1],d*p[2],d*p[3]]}},o.encode.alphaMul=function(d,p){for(var _=new Uint8Array(d.length),S=d.length>>2,A=0;A<S;A++){var C=A<<2,j=d[C+3];p&&(j=j<128?0:255);var V=j*(1/255);_[C+0]=d[C+0]*V,_[C+1]=d[C+1]*V,_[C+2]=d[C+2]*V,_[C+3]=j}return _}})(a,t(788))},165:r=>{r.exports=function(e,t){var a,o,c,d,p,_,S,A,C,j,V,J,re,ie,K,Ne,G,se,He,Fe,Xe,be,ta,pn,mr;a=e.state,o=e.next_in,pn=e.input,c=o+(e.avail_in-5),d=e.next_out,mr=e.output,p=d-(t-e.avail_out),_=d+(e.avail_out-257),S=a.dmax,A=a.wsize,C=a.whave,j=a.wnext,V=a.window,J=a.hold,re=a.bits,ie=a.lencode,K=a.distcode,Ne=(1<<a.lenbits)-1,G=(1<<a.distbits)-1;e:do{re<15&&(J+=pn[o++]<<re,re+=8,J+=pn[o++]<<re,re+=8),se=ie[J&Ne];t:for(;;){if(J>>>=He=se>>>24,re-=He,(He=se>>>16&255)==0)mr[d++]=65535&se;else{if(!(16&He)){if(64&He){if(32&He){a.mode=12;break e}e.msg="invalid literal/length code",a.mode=30;break e}se=ie[(65535&se)+(J&(1<<He)-1)];continue t}for(Fe=65535&se,(He&=15)&&(re<He&&(J+=pn[o++]<<re,re+=8),Fe+=J&(1<<He)-1,J>>>=He,re-=He),re<15&&(J+=pn[o++]<<re,re+=8,J+=pn[o++]<<re,re+=8),se=K[J&G];;){if(J>>>=He=se>>>24,re-=He,16&(He=se>>>16&255)){if(Xe=65535&se,re<(He&=15)&&(J+=pn[o++]<<re,(re+=8)<He&&(J+=pn[o++]<<re,re+=8)),(Xe+=J&(1<<He)-1)>S){e.msg="invalid distance too far back",a.mode=30;break e}if(J>>>=He,re-=He,Xe>(He=d-p)){if((He=Xe-He)>C&&a.sane){e.msg="invalid distance too far back",a.mode=30;break e}if(be=0,ta=V,j===0){if(be+=A-He,He<Fe){Fe-=He;do mr[d++]=V[be++];while(--He);be=d-Xe,ta=mr}}else if(j<He){if(be+=A+j-He,(He-=j)<Fe){Fe-=He;do mr[d++]=V[be++];while(--He);if(be=0,j<Fe){Fe-=He=j;do mr[d++]=V[be++];while(--He);be=d-Xe,ta=mr}}}else if(be+=j-He,He<Fe){Fe-=He;do mr[d++]=V[be++];while(--He);be=d-Xe,ta=mr}for(;Fe>2;)mr[d++]=ta[be++],mr[d++]=ta[be++],mr[d++]=ta[be++],Fe-=3;Fe&&(mr[d++]=ta[be++],Fe>1&&(mr[d++]=ta[be++]))}else{be=d-Xe;do mr[d++]=mr[be++],mr[d++]=mr[be++],mr[d++]=mr[be++],Fe-=3;while(Fe>2);Fe&&(mr[d++]=mr[be++],Fe>1&&(mr[d++]=mr[be++]))}break}if(64&He){e.msg="invalid distance code",a.mode=30;break e}se=K[(65535&se)+(J&(1<<He)-1)]}}break}}while(o<c&&d<_);o-=Fe=re>>3,J&=(1<<(re-=Fe<<3))-1,e.next_in=o,e.next_out=d,e.avail_in=o<c?c-o+5:5-(o-c),e.avail_out=d<_?_-d+257:257-(d-_),a.hold=J,a.bits=re}},185:()=>{$3Dmol.workerString=(function(){self.onmessage=function(r){var e=r.data,t=e.type;if(t<0)self.atomData=e.atoms,self.volume=e.volume,self.ps=new ProteinSurface;else{var a=self.ps;a.initparm(e.expandedExtent,t!=1,self.volume),a.fillvoxels(self.atomData,e.extendedAtoms),a.buildboundary(),t!==4&&t!==2||(a.fastdistancemap(),a.boundingatom(!1),a.fillvoxelswaals(self.atomData,e.extendedAtoms)),a.marchingcube(t);var o=a.getFacesAndVertices(e.atomsToShow);self.postMessage(o)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},222:(r,e,t)=>{t.r(e),t.d(e,{CC:()=>o,Color:()=>a,builtinColorSchemes:()=>C,chains:()=>A,elementColors:()=>_,htmlColors:()=>c,residues:()=>S,ssColors:()=>d});class a{constructor(V,J,re){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof V=="number"?(this.r=V||0,this.g=J||0,this.b=re||0,this):this.set(V||0)}set(V){return V instanceof a?V.clone():(typeof V=="number"?this.setHex(V):typeof V=="object"&&(this.r=V?.r||0,this.g=V?.g||0,this.b=V?.b||0),this)}setHex(V){return V=Math.floor(V),this.r=(V>>16&255)/255,this.g=(V>>8&255)/255,this.b=(255&V)/255,this}getHex(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)}clone(){return new a(this.r,this.g,this.b)}copy(V){return this.r=V.r,this.g=V.g,this.b=V.b,this}scaled(){var V={};return V.r=Math.round(255*this.r),V.g=Math.round(255*this.g),V.b=Math.round(255*this.b),V.a=1,V}}class o{static color(V){if(!V)return o.cache[0];if(V instanceof a)return V;if(typeof V=="number"&&o.cache[V]!==void 0)return o.cache[V];if(V&&Array.isArray(V))return V.map(o.color);let J=o.getHex(V),re=new a(J);return o.cache[J]=re,re}static getHex(V){if(Array.isArray(V))return V.map(o.getHex);if(typeof V=="string"){let J=V;if(!isNaN(parseInt(J)))return parseInt(J);if(J=J.trim(),J.length==4&&J[0]=="#"&&(J="#"+J[1]+J[1]+J[2]+J[2]+J[3]+J[3]),J.length==7&&J[0]=="#")return parseInt(J.substring(1),16);let re=o.rgbRegEx.exec(J);if(re){re[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let K=0;for(let Ne=2;Ne<5;Ne++){K*=256;let G=re[Ne].endsWith("%")?255*parseFloat(re[Ne])/100:parseFloat(re[Ne]);K+=Math.round(G)}return K}let ie=c[J.toLowerCase()];return ie!==void 0?ie:(console.error("color not found",V.toLowerCase(),c),0)}return V}}o.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,o.cache={0:new a(0)};const c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},d={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},p={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},_={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:p,defaultColors:Object.assign({},p),greenCarbon:Object.assign(Object.assign({},p),{C:65280}),cyanCarbon:Object.assign(Object.assign({},p),{C:65535}),magentaCarbon:Object.assign(Object.assign({},p),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},p),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},p),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},p),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},p),{C:8388736}),blueCarbon:Object.assign(Object.assign({},p),{C:255})},S={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},A={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},C={ssPyMol:{prop:"ss",map:d.pyMol},ssJmol:{prop:"ss",map:d.Jmol},Jmol:{prop:"elem",map:_.Jmol},amino:{prop:"resn",map:S.amino},shapely:{prop:"resn",map:S.shapely},nucleic:{prop:"resn",map:S.nucleic},chain:{prop:"chain",map:A.atom},rasmol:{prop:"elem",map:_.rasmol},default:{prop:"elem",map:_.defaultColors},greenCarbon:{prop:"elem",map:_.greenCarbon},chainHetatm:{prop:"chain",map:A.hetatm},cyanCarbon:{prop:"elem",map:_.cyanCarbon},magentaCarbon:{prop:"elem",map:_.magentaCarbon},purpleCarbon:{prop:"elem",map:_.purpleCarbon},whiteCarbon:{prop:"elem",map:_.whiteCarbon},orangeCarbon:{prop:"elem",map:_.orangeCarbon},yellowCarbon:{prop:"elem",map:_.yellowCarbon},blueCarbon:{prop:"elem",map:_.blueCarbon}}},307:r=>{typeof r.exports=="object"&&(r.exports=window.$3Dmol)},358:(r,e,t)=>{var a=t(981),o=15,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(S,A,C,j,V,J,re,ie){var K,Ne,G,se,He,Fe,Xe,be,ta,pn=ie.bits,mr=0,bp=0,Sp=0,_r=0,xs=0,ne=0,zl=0,Hl=0,pr=0,Hp=0,Gl=null,Ip=0,qp=new a.Buf16(16),ci=new a.Buf16(16),Ep=null,o0=0;for(mr=0;mr<=o;mr++)qp[mr]=0;for(bp=0;bp<j;bp++)qp[A[C+bp]]++;for(xs=pn,_r=o;_r>=1&&qp[_r]===0;_r--);if(xs>_r&&(xs=_r),_r===0)return V[J++]=20971520,V[J++]=20971520,ie.bits=1,0;for(Sp=1;Sp<_r&&qp[Sp]===0;Sp++);for(xs<Sp&&(xs=Sp),Hl=1,mr=1;mr<=o;mr++)if(Hl<<=1,(Hl-=qp[mr])<0)return-1;if(Hl>0&&(S===0||_r!==1))return-1;for(ci[1]=0,mr=1;mr<o;mr++)ci[mr+1]=ci[mr]+qp[mr];for(bp=0;bp<j;bp++)A[C+bp]!==0&&(re[ci[A[C+bp]]++]=bp);if(S===0?(Gl=Ep=re,Fe=19):S===1?(Gl=c,Ip-=257,Ep=d,o0-=257,Fe=256):(Gl=p,Ep=_,Fe=-1),Hp=0,bp=0,mr=Sp,He=J,ne=xs,zl=0,G=-1,se=(pr=1<<xs)-1,S===1&&pr>852||S===2&&pr>592)return 1;for(;;){Xe=mr-zl,re[bp]<Fe?(be=0,ta=re[bp]):re[bp]>Fe?(be=Ep[o0+re[bp]],ta=Gl[Ip+re[bp]]):(be=96,ta=0),K=1<<mr-zl,Sp=Ne=1<<ne;do V[He+(Hp>>zl)+(Ne-=K)]=Xe<<24|be<<16|ta;while(Ne!==0);for(K=1<<mr-1;Hp&K;)K>>=1;if(K!==0?(Hp&=K-1,Hp+=K):Hp=0,bp++,--qp[mr]===0){if(mr===_r)break;mr=A[C+re[bp]]}if(mr>xs&&(Hp&se)!==G){for(zl===0&&(zl=xs),He+=Sp,Hl=1<<(ne=mr-zl);ne+zl<_r&&!((Hl-=qp[ne+zl])<=0);)ne++,Hl<<=1;if(pr+=1<<ne,S===1&&pr>852||S===2&&pr>592)return 1;V[G=Hp&se]=xs<<24|ne<<16|He-J}}return Hp!==0&&(V[He+Hp]=mr-zl<<24|4194304),ie.bits=xs,0}},378:(r,e,t)=>{var a;t.r(e),t.d(e,{BackSide:()=>c,Camera:()=>oy,ClampToEdgeWrapping:()=>A,Coloring:()=>a,Cylinder:()=>pr.Cylinder,DoubleSide:()=>d,EventDispatcher:()=>se,FloatType:()=>re,Fog:()=>Hv,FrontSide:()=>o,Geometry:()=>mr,GeometryGroup:()=>pn,GeometryIDCount:()=>bp,ImposterMaterial:()=>A1,InstancedMaterial:()=>T1,Light:()=>ne,Line:()=>i0,LineBasicMaterial:()=>be,LineStyle:()=>Gp,LinearFilter:()=>C,LinearMipMapLinearFilter:()=>V,Material:()=>Fe,MaterialIdCount:()=>Xe,Matrix3:()=>_.Matrix3,Matrix4:()=>_.Matrix4,Mesh:()=>l0,MeshDoubleLambertMaterial:()=>x1,MeshLambertMaterial:()=>Tm,MeshOutlineMaterial:()=>S1,NearestFilter:()=>j,Object3D:()=>_r,Object3DIDCount:()=>Sp,Projector:()=>Hl,Quaternion:()=>_.Quaternion,R32Format:()=>Ne,RFormat:()=>K,RGBAFormat:()=>ie,Ray:()=>_.Ray,Raycaster:()=>Ip,Renderer:()=>c0,Scene:()=>xs,ShaderLib:()=>kv,ShaderUtils:()=>ry,Shading:()=>p,Sphere:()=>pr.Sphere,SphereImposterMaterial:()=>p0,SphereImposterOutlineMaterial:()=>zp,Sprite:()=>im,SpriteAlignment:()=>S,SpriteMaterial:()=>om,SpritePlugin:()=>vv,StickImposterMaterial:()=>bm,StickImposterOutlineMaterial:()=>i1,Texture:()=>Zm,TextureIdCount:()=>p1,TextureOperations:()=>G,Triangle:()=>pr.Triangle,UVMapping:()=>Fm,UnsignedByteType:()=>J,Vector2:()=>_.Vector2,Vector3:()=>_.Vector3,VolumetricMaterial:()=>r1,basic:()=>pm,clamp:()=>_.clamp,clone:()=>Zv,conversionMatrix3:()=>_.conversionMatrix3,degToRad:()=>_.degToRad,instanced:()=>Gm,intersectObject:()=>C0,lambert:()=>vm,lambertdouble:()=>e1,outline:()=>j1,screen:()=>q0,screenaa:()=>d1,sphereimposter:()=>o1,sphereimposteroutline:()=>l1,sprite:()=>gg,stickimposter:()=>Eg,stickimposteroutline:()=>ev,volumetric:()=>sv}),(function(F0){F0[F0.NoColors=0]="NoColors",F0[F0.FaceColors=1]="FaceColors",F0[F0.VertexColors=2]="VertexColors"})(a||(a={}));const o=0,c=1,d=2;var p;(function(F0){F0[F0.NoShading=0]="NoShading",F0[F0.FlatShading=1]="FlatShading",F0[F0.SmoothShading=2]="SmoothShading"})(p||(p={}));var _=t(529);const S={topLeft:new _.Vector2(1,-1),topCenter:new _.Vector2(0,-1),topRight:new _.Vector2(-1,-1),centerLeft:new _.Vector2(1,0),center:new _.Vector2(0,0),centerRight:new _.Vector2(-1,0),bottomLeft:new _.Vector2(1,1),bottomCenter:new _.Vector2(0,1),bottomRight:new _.Vector2(-1,1)},A=1001,C=1006,j=1007,V=1008,J=1009,re=1010,ie=1021,K=1022,Ne=1023;var G;(function(F0){F0[F0.MultiplyOperation=0]="MultiplyOperation",F0[F0.MixOperation=1]="MixOperation",F0[F0.AddOperation=2]="AddOperation"})(G||(G={}));class se{constructor(){this.listeners={}}dispatchEvent(Z){var Fl=this.listeners[Z.type];if(Fl!==void 0){Z.target=this;for(var Wl=0,x0=Fl.length;Wl<x0;Wl++)Fl[Wl].call(this,Z)}}removeEventListener(Z,Fl){if(Fl){var Wl=this.listeners[Z].indexOf(Fl);Wl!==-1&&this.listeners[Z].splice(Wl,1)}else this.listeners[Z]=[]}addEventListener(Z,Fl){this.listeners[Z]===void 0&&(this.listeners[Z]=[]),this.listeners[Z].indexOf(Fl)===-1&&this.listeners[Z].push(Fl)}}var He=t(222);class Fe extends se{constructor(){super(...arguments),this.id=Xe++,this.name="",this.side=o,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(Z={}){if(Z!==void 0)for(var Fl in Z){var Wl=Z[Fl];if(Wl!==void 0){if(Fl in this){var x0=this[Fl];x0 instanceof He.Color&&Wl instanceof He.Color?x0.copy(Wl):x0 instanceof He.Color?x0.set(Wl):x0 instanceof _.Vector3&&Wl instanceof _.Vector3?x0.copy(Wl):this[Fl]=Wl}}else console.warn("$3Dmol.Material: '"+Fl+"' parameter is undefined.")}}clone(Z=new Fe){return Z.name=this.name,Z.side=this.side,Z.opacity=this.opacity,Z.transparent=this.transparent,Z.depthTest=this.depthTest,Z.depthWrite=this.depthWrite,Z.polygonOffset=this.polygonOffset,Z.polygonOffsetFactor=this.polygonOffsetFactor,Z.polygonOffsetUnits=this.polygonOffsetUnits,Z.alphaTest=this.alphaTest,Z.overdraw=this.overdraw,Z.visible=this.visible,Z}makeShaded(Z){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:Z},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let Xe=0;class be extends Fe{constructor(Z){super(),this.color=new He.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(Z)}clone(Z=new be){return super.clone.call(this,Z),Z.color.copy(this.color),Z}}const ta=65535;class pn{constructor(Z=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=Z}setColor(Z){var Fl=this.vertexArray,Wl=this.colorArray;if(!Fl)throw new Error("vertex array not initialized");if(!Wl)throw new Error("color array not initialized");let x0=He.CC.color(Z);for(var S0=0;S0<Fl.length;S0+=3)Wl[S0]=x0.r,Wl[S0+1]=x0.g,Wl[S0+2]=x0.b}setColors(Z){var Fl=this.vertexArray,Wl=this.colorArray;if(!Fl)throw new Error("vertex array not initialized");if(!Wl)throw new Error("color array not initialized");if(Fl.length==Wl.length)for(var x0=0;x0<Fl.length;x0+=3){var S0=Z(Fl[x0],Fl[x0+1],Fl[x0+2]);S0 instanceof He.Color||(S0=He.CC.color(S0)),Wl[x0]=S0.r,Wl[x0+1]=S0.g,Wl[x0+2]=S0.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var Z,Fl,Wl,x0,S0=new _.Vector3,Mm=0;Mm<this.vertices;++Mm)Z=3*Mm,Fl=this.vertexArray[Z],Wl=this.vertexArray[Z+1],x0=this.vertexArray[Z+2],S0.x+=Fl,S0.y+=Wl,S0.z+=x0;return S0.divideScalar(this.vertices),S0}setNormals(){var Z=this.faceArray,Fl=this.vertexArray,Wl=this.normalArray;if(this.vertices&&this.faceidx){if(!Z)throw new Error("face array not initialized");if(!Fl)throw new Error("vertex array not initialized");if(!Wl)throw new Error("normal array not initialized");for(var x0,S0,Mm,km,wm,Xm,Nm,m1=0;m1<Z.length/3;++m1)x0=3*Z[3*m1],S0=3*Z[3*m1+1],Mm=3*Z[3*m1+2],km=new _.Vector3(Fl[x0],Fl[x0+1],Fl[x0+2]),wm=new _.Vector3(Fl[S0],Fl[S0+1],Fl[S0+2]),Xm=new _.Vector3(Fl[Mm],Fl[Mm+1],Fl[Mm+2]),km.subVectors(km,wm),Xm.subVectors(Xm,wm),Xm.cross(km),(Nm=Xm).normalize(),Wl[x0]+=Nm.x,Wl[S0]+=Nm.x,Wl[Mm]+=Nm.x,Wl[x0+1]+=Nm.y,Wl[S0+1]+=Nm.y,Wl[Mm+1]+=Nm.y,Wl[x0+2]+=Nm.z,Wl[S0+2]+=Nm.z,Wl[Mm+2]+=Nm.z}}setLineIndices(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var Z=this.faceArray,Fl=this.lineArray=new Uint16Array(2*this.faceidx);if(this.lineidx=2*this.faceidx,!Z)throw new Error("face array not initialized");for(var Wl=0;Wl<this.faceidx/3;++Wl){var x0=3*Wl,S0=2*x0,Mm=Z[x0],km=Z[x0+1],wm=Z[x0+2];Fl[S0]=Mm,Fl[S0+1]=km,Fl[S0+2]=Mm,Fl[S0+3]=wm,Fl[S0+4]=km,Fl[S0+5]=wm}}}vrml(Z,Fl){var Wl,x0,S0,Mm,km,wm,Xm,Nm,m1,N1,H1,Sg,bg,q1,vg,Hg,Q1,kg,eg="";if(eg+=Z+`Shape {
`+Z+` appearance Appearance {
`+Z+`  material Material {
`+Z+"   diffuseColor "+((Wl=Fl?.color)===null||Wl===void 0?void 0:Wl.r)+" "+((x0=Fl?.color)===null||x0===void 0?void 0:x0.g)+" "+((S0=Fl?.color)===null||S0===void 0?void 0:S0.b)+`
`,Fl.wireframe&&this.colorArray){let jp=this.colorArray;eg+=Z+"    emissiveColor "+jp[0]+" "+jp[1]+" "+jp[2]+`
`}Fl!=null&&Fl.transparent&&(eg+=Z+"   transparency "+(1-Fl.opacity)+`
`),eg+=Z+`  }
`,eg+=Z+` }
`;var Iv=Z;if(Z+=" ",Fl instanceof be||Fl.wireframe){let jp,f,R;eg+=Z+`geometry IndexedLineSet {
`+Z+` colorPerVertex TRUE
`+Z+` coord Coordinate {
`+Z+`  point [
`;for(let $=0;$<this.vertices;++$){let Q=3*$;jp=(Mm=this.vertexArray)===null||Mm===void 0?void 0:Mm[Q],f=(km=this.vertexArray)===null||km===void 0?void 0:km[Q+1],R=(wm=this.vertexArray)===null||wm===void 0?void 0:wm[Q+2],eg+=Z+"   "+jp+" "+f+" "+R+`,
`}if(eg+=Z+`  ]
`,eg+=Z+` }
`,this.colorArray&&!Fl.wireframe){eg+=Z+` color Color {
`+Z+`  color [
`;for(let $=0;$<this.vertices;++$){let Q=3*$;jp=this.colorArray[Q],f=this.colorArray[Q+1],R=this.colorArray[Q+2],eg+=Z+"   "+jp+" "+f+" "+R+`,
`}eg+=Z+`  ]
`,eg+=Z+` }
`}if(eg+=Z+` coordIndex [
`,Fl.wireframe&&this.faceArray)for(let $=0;$<this.faceidx;$+=3)jp=(Xm=this.faceArray)===null||Xm===void 0?void 0:Xm[$],f=(Nm=this.faceArray)===null||Nm===void 0?void 0:Nm[$+1],R=(m1=this.faceArray)===null||m1===void 0?void 0:m1[$+2],eg+=Z+"  "+jp+", "+f+", "+R+`, -1,
`;else for(let $=0;$<this.vertices-1;$+=2)eg+=Z+"  "+$+", "+($+1)+`, -1,
`;eg+=Z+` ]
`,eg+=Z+`}
`}else{let jp,f,R;eg+=Z+`geometry IndexedFaceSet {
`+Z+` colorPerVertex TRUE
`+Z+` normalPerVertex TRUE
`+Z+` solid FALSE
`,eg+=Z+` coord Coordinate {
`+Z+`  point [
`;for(let $=0;$<this.vertices;++$){let Q=3*$;jp=(N1=this.vertexArray)===null||N1===void 0?void 0:N1[Q],f=(H1=this.vertexArray)===null||H1===void 0?void 0:H1[Q+1],R=(Sg=this.vertexArray)===null||Sg===void 0?void 0:Sg[Q+2],eg+=Z+"   "+jp+" "+f+" "+R+`,
`}eg+=Z+`  ]
`,eg+=Z+` }
`,eg+=Z+` normal Normal {
`+Z+`  vector [
`;for(let $=0;$<this.vertices;++$){let Q=3*$;jp=(bg=this.normalArray)===null||bg===void 0?void 0:bg[Q],f=(q1=this.normalArray)===null||q1===void 0?void 0:q1[Q+1],R=(vg=this.normalArray)===null||vg===void 0?void 0:vg[Q+2],eg+=Z+"   "+jp+" "+f+" "+R+`,
`}if(eg+=Z+`  ]
`,eg+=Z+` }
`,this.colorArray){eg+=Z+` color Color {
`+Z+`  color [
`;for(let $=0;$<this.vertices;++$){let Q=3*$;jp=this.colorArray[Q],f=this.colorArray[Q+1],R=this.colorArray[Q+2],eg+=Z+"   "+jp+" "+f+" "+R+`,
`}eg+=Z+`  ]
`,eg+=Z+` }
`}eg+=Z+` coordIndex [
`;for(let $=0;$<this.faceidx;$+=3)jp=(Hg=this.faceArray)===null||Hg===void 0?void 0:Hg[$],f=(Q1=this.faceArray)===null||Q1===void 0?void 0:Q1[$+1],R=(kg=this.faceArray)===null||kg===void 0?void 0:kg[$+2],eg+=Z+"  "+jp+", "+f+", "+R+`, -1,
`;eg+=Z+` ]
`,eg+=Z+`}
`}return eg+=Iv+"}"}truncateArrayBuffers(Z=!0,Fl=!1){var Wl=this.vertexArray,x0=this.colorArray,S0=this.normalArray,Mm=this.faceArray,km=this.lineArray,wm=this.radiusArray;this.vertexArray=Wl?.subarray(0,3*this.vertices)||null,this.colorArray=x0?.subarray(0,3*this.vertices)||null,Z?(this.normalArray=S0?.subarray(0,3*this.vertices)||null,this.faceArray=Mm?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=km?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),wm&&(this.radiusArray=wm.subarray(0,this.vertices)),Fl&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class mr extends se{constructor(Z=!1,Fl=!1,Wl=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=bp++,this.mesh=Z,this.radii=Fl,this.offset=Wl}updateGeoGroup(Z=0){var Fl,Wl=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!Wl||Wl.vertices+Z>(((Fl=Wl?.vertexArray)===null||Fl===void 0?void 0:Fl.length)||0)/3)&&(Wl=this.addGeoGroup()),Wl}vrml(Z,Fl){for(var Wl="",x0=this.geometryGroups.length,S0=0;S0<x0;S0++)Wl+=this.geometryGroups[S0].vrml(Z,Fl)+`,
`;return Wl}addGeoGroup(){var Z=new pn(this.geometryGroups.length);return this.geometryGroups.push(Z),this.groups=this.geometryGroups.length,Z.vertexArray=new Float32Array(196605),Z.colorArray=new Float32Array(196605),this.mesh&&(Z.normalArray=new Float32Array(196605),Z.faceArray=new Uint16Array(393210),Z.lineArray=new Uint16Array(393210)),this.radii&&(Z.radiusArray=new Float32Array(ta)),Z.useOffset=this.offset,Z}setUpNormals(...Z){for(var Fl=0;Fl<this.groups;Fl++)this.geometryGroups[Fl].setNormals(...Z)}setColors(...Z){for(var Fl=this.geometryGroups.length,Wl=0;Wl<Fl;Wl++)this.geometryGroups[Wl].setColors(...Z)}setColor(...Z){let Fl=this.geometryGroups.length;for(var Wl=0;Wl<Fl;Wl++)this.geometryGroups[Wl].setColor(...Z)}setUpWireframe(...Z){let Fl=this.geometryGroups.length;for(var Wl=0;Wl<Fl;Wl++)this.geometryGroups[Wl].setLineIndices(...Z)}initTypedArrays(){for(var Z=0;Z<this.groups;Z++){var Fl=this.geometryGroups[Z];Fl.__inittedArrays!==!0&&Fl.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var Z=0,Fl=0;Fl<this.groups;Fl++)Z+=this.geometryGroups[Fl].vertices;return Z}}let bp=0,Sp=0;class _r{constructor(){this.id=Sp++,this.name="",this.children=[],this.position=new _.Vector3,this.rotation=new _.Vector3,this.matrix=new _.Matrix4,this.matrixWorld=new _.Matrix4,this.quaternion=new _.Quaternion,this.eulerOrder="XYZ",this.up=new _.Vector3(0,1,0),this.scale=new _.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(Z){this.matrix.lookAt(Z,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof _.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(Z){if(Z!==this){Z.parent=this,this.children.push(Z);for(var Fl=this;Fl.parent!==void 0;)Fl=Fl.parent;Fl!==void 0&&Fl instanceof xs&&Fl.__addObject(Z)}else console.error("Can't add $3Dmol.Object3D to itself")}remove(Z){var Fl=this.children.indexOf(Z);if(Fl!==-1){Z.parent=void 0,this.children.splice(Fl,1);for(var Wl=this;Wl.parent!==void 0;)Wl=Wl.parent;Wl!==void 0&&Wl instanceof xs&&Wl.__removeObject(Z)}}vrml(Z){Z||(Z=" ");var Fl=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),Wl=0,x0=0,S0=0;if(Fl!=0){let wm=Math.sin(Fl/2);Wl=this.quaternion.x/wm,x0=this.quaternion.y/wm,S0=this.quaternion.z/wm}var Mm=Z+`Transform {
`+Z+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+Z+" rotation "+Wl+" "+x0+" "+S0+" "+Fl+`
`+Z+` children [
`;this.geometry&&(Mm+=this.geometry.vrml(Z,this.material));for(var km=0;km<this.children.length;km++)Mm+=this.children[km].vrml(Z+" ")+`,
`;return Mm+=` ]
`,Mm+="}"}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof _.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),this.scale.x===1&&this.scale.y===1&&this.scale.z===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(Z){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&Z!==!0||(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var Fl=0;Fl<this.children.length;Fl++)this.children[Fl].updateMatrixWorld(!0)}clone(Z){Z===void 0&&(Z=new _r),Z.name=this.name,Z.up.copy(this.up),Z.position.copy(this.position),Z.rotation instanceof _.Vector3&&this.rotation instanceof _.Vector3?Z.rotation.copy(this.rotation):Z.rotation=this.rotation,Z.eulerOrder=this.eulerOrder,Z.scale.copy(this.scale),Z.rotationAutoUpdate=this.rotationAutoUpdate,Z.matrix.copy(this.matrix),Z.matrixWorld.copy(this.matrixWorld),Z.quaternion.copy(this.quaternion),Z.matrixAutoUpdate=this.matrixAutoUpdate,Z.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,Z.useQuaternion=this.useQuaternion,Z.visible=this.visible;for(var Fl=0;Fl<this.children.length;Fl++){var Wl=this.children[Fl];Z.add(Wl.clone())}return Z}setVisible(Z){this.visible=Z;for(var Fl=0;Fl<this.children.length;Fl++)this.children[Fl].setVisible(Z)}}class xs extends _r{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(Z){if(Z instanceof ne)this.__lights.indexOf(Z)===-1&&this.__lights.push(Z),Z.target&&Z.target.parent===void 0&&this.add(Z.target);else if(this.__objects.indexOf(Z)===-1){this.__objects.push(Z),this.__objectsAdded.push(Z);var Fl=this.__objectsRemoved.indexOf(Z);Fl!==-1&&this.__objectsRemoved.splice(Fl,1)}for(var Wl=0;Wl<Z.children.length;Wl++)this.__addObject(Z.children[Wl])}__removeObject(Z){var Fl;Z instanceof ne?(Fl=this.__lights.indexOf(Z))!==-1&&this.__lights.splice(Fl,1):(Fl=this.__objects.indexOf(Z))!==-1&&(this.__objects.splice(Fl,1),this.__objectsRemoved.push(Z),this.__objectsAdded.indexOf(Z)!==-1&&this.__objectsAdded.splice(Fl,1));for(var Wl=0;Wl<Z.children.length;Wl++)this.__removeObject(Z.children[Wl])}}class ne extends _r{constructor(Z,Fl=1){super(),this.position=new _.Vector3(0,1,0),this.target=new _r,this.castShadow=!1,this.onlyShadow=!1,this.color=new He.Color(Z),this.intensity=Fl}}const zl=new _.Matrix4;class Hl{static unprojectVector(Z,Fl){return Fl.projectionMatrixInverse.getInverse(Fl.projectionMatrix),zl.multiplyMatrices(Fl.matrixWorld,Fl.projectionMatrixInverse),Z.applyProjection(zl)}static projectVector(Z,Fl){return Fl.matrixWorldInverse.getInverse(Fl.matrixWorld),zl.multiplyMatrices(Fl.projectionMatrix,Fl.matrixWorldInverse),Z.applyProjection(zl)}projectVector(Z,Fl){return Hl.projectVector(Z,Fl)}unprojectVector(Z,Fl){return Hl.unprojectVector(Z,Fl)}}var pr=t(99);const Hp=(F0,Z)=>F0.distance-Z.distance,Gl=new _.Matrix4;class Ip{constructor(Z,Fl,Wl,x0){this.precision=1e-4,this.linePrecision=.2,this.ray=new _.Ray(Z,Fl),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=x0||0,this.far=Wl||1/0}set(Z,Fl){this.ray.set(Z,Fl)}setFromCamera(Z,Fl){Fl.ortho?(this.ray.origin.set(Z.x,Z.y,(Fl.near+Fl.far)/(Fl.near-Fl.far)).unproject(Fl),this.ray.direction.set(0,0,-1).transformDirection(Fl.matrixWorld)):(this.ray.origin.setFromMatrixPosition(Fl.matrixWorld),this.ray.direction.set(Z.x,Z.y,Z.z),Fl.projectionMatrixInverse.getInverse(Fl.projectionMatrix),Gl.multiplyMatrices(Fl.matrixWorld,Fl.projectionMatrixInverse),this.ray.direction.applyProjection(Gl),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(Z,Fl){for(var Wl=[],x0=0,S0=Fl.length;x0<S0;x0++)C0(Z,Fl[x0],this,Wl);return Wl.sort(Hp),Wl}}const qp=F0=>Math.min(Math.max(F0,-1),1);var ci=new pr.Sphere,Ep=new pr.Cylinder,o0=new pr.Triangle,w0=new _.Vector3,a0=new _.Vector3,P0=new _.Vector3,am=new _.Vector3,sm=new _.Vector3;function C0(F0,Z,Fl,Wl){if(sm.getPositionFromMatrix(F0.matrixWorld),Z.intersectionShape===void 0||Z.hidden)return Wl;var x0,S0,Mm,km,wm,Xm,Nm,m1,N1,H1,Sg,bg,q1,vg,Hg=Z.intersectionShape,Q1=Fl.linePrecision,kg=(Q1*=F0.matrixWorld.getMaxScaleOnAxis())*Q1;if(Z.boundingSphere!==void 0&&Z.boundingSphere instanceof pr.Sphere&&(ci.copy(Z.boundingSphere),ci.applyMatrix4(F0.matrixWorld),!Fl.ray.isIntersectionSphere(ci)))return Wl;for(x0=0,S0=Hg.triangle.length;x0<S0;x0++)if(Hg.triangle[x0]instanceof pr.Triangle){if(o0.copy(Hg.triangle[x0]),o0.applyMatrix4(F0.matrixWorld),Mm=o0.getNormal(),(km=Fl.ray.direction.dot(Mm))>=0||(w0.subVectors(o0.a,Fl.ray.origin),(Nm=Mm.dot(w0)/km)<0))continue;a0.copy(Fl.ray.direction).multiplyScalar(Nm).add(Fl.ray.origin),a0.sub(o0.a),P0.copy(o0.b).sub(o0.a),am.copy(o0.c).sub(o0.a);var eg=P0.dot(am),Iv=P0.lengthSq(),jp=am.lengthSq();if((bg=(Iv*a0.dot(am)-eg*a0.dot(P0))/(Iv*jp-eg*eg))<0||bg>1||(Sg=(a0.dot(P0)-bg*eg)/Iv)<0||Sg>1||Sg+bg>1)continue;Wl.push({clickable:Z,distance:Nm})}for(x0=0,S0=Hg.cylinder.length;x0<S0;x0++)if(Hg.cylinder[x0]instanceof pr.Cylinder){if(Ep.copy(Hg.cylinder[x0]),Ep.applyMatrix4(F0.matrixWorld),w0.subVectors(Ep.c1,Fl.ray.origin),wm=w0.dot(Ep.direction),Xm=w0.dot(Fl.ray.direction),(N1=1-(km=qp(Fl.ray.direction.dot(Ep.direction)))*km)==0)continue;q1=(km*Xm-wm)/N1,vg=(Xm-km*wm)/N1,a0.copy(Ep.direction).multiplyScalar(q1).add(Ep.c1),P0.copy(Fl.ray.direction).multiplyScalar(vg).add(Fl.ray.origin),m1=am.subVectors(a0,P0).lengthSq();var f=Ep.radius*Ep.radius;if(m1<=f){if((Sg=km*(bg=Nm=(H1=(km*wm-Xm)*(km*wm-Xm)-N1*(w0.lengthSq()-wm*wm-f))<=0?Math.sqrt(m1):(Xm-km*wm-Math.sqrt(H1))/N1)-wm)<0||Sg*Sg>Ep.lengthSq()||bg<0)continue;Wl.push({clickable:Z,distance:Nm})}}for(x0=0,S0=Hg.line.length;x0<S0;x0+=2){a0.copy(Hg.line[x0]),a0.applyMatrix4(F0.matrixWorld),P0.copy(Hg.line[x0+1]),P0.applyMatrix4(F0.matrixWorld),am.subVectors(P0,a0);var R=am.lengthSq();am.normalize(),w0.subVectors(a0,Fl.ray.origin);var $=w0.dot(am);Xm=w0.dot(Fl.ray.direction),(N1=1-(km=qp(Fl.ray.direction.dot(am)))*km)!=0&&(q1=(km*Xm-$)/N1,vg=(Xm-km*$)/N1,a0.add(am.multiplyScalar(q1)),P0.copy(Fl.ray.direction).multiplyScalar(vg).add(Fl.ray.origin),(m1=am.subVectors(P0,a0).lengthSq())<kg&&q1*q1<R&&Wl.push({clickable:Z,distance:vg}))}for(x0=0,S0=Hg.sphere.length;x0<S0;x0++)if(Hg.sphere[x0]instanceof pr.Sphere&&(ci.copy(Hg.sphere[x0]),ci.applyMatrix4(F0.matrixWorld),Fl.ray.isIntersectionSphere(ci))){a0.subVectors(ci.center,Fl.ray.origin);var Q=a0.dot(Fl.ray.direction);if(H1=Q*Q-(a0.lengthSq()-ci.radius*ci.radius),Q<0)return Wl;Nm=H1<=0?Q:Q-Math.sqrt(H1),Wl.push({clickable:Z,distance:Nm})}return Wl}class Fm{}class Zm extends se{constructor(Z,Fl){super(),this.id=p1++,this.name="",this.image=Z,this.mapping=new Fm,this.wrapS=A,this.wrapT=A,this.anisotropy=1,Fl?(this.format=K,this.type=re,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=j,this.minFilter=j):(this.format=ie,this.type=J,this.offset=new _.Vector2(0,0),this.repeat=new _.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=C,this.minFilter=V),this.needsUpdate=!1,this.onUpdate=null}clone(Z=new Zm){return Z.image=this.image,Z.mapping=this.mapping,Z.wrapS=this.wrapS,Z.wrapT=this.wrapT,Z.magFilter=this.magFilter,Z.minFilter=this.minFilter,Z.anisotropy=this.anisotropy,Z.format=this.format,Z.type=this.type,Z.offset.copy(this.offset),Z.repeat.copy(this.repeat),Z.premultiplyAlpha=this.premultiplyAlpha,Z.flipY=this.flipY,Z.unpackAlignment=this.unpackAlignment,Z}dispose(){this.dispatchEvent({type:"dispose"})}}let p1=0;class A1 extends Fe{constructor(Z){super(),this.color=new He.Color(16777215),this.ambient=new He.Color(1048575),this.emissive=new He.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new _.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID=null,this.vertexColors=a.NoColors,this.skinning=!1,this.setValues(Z)}clone(Z=new A1){return super.clone.call(this,Z),Z.color.copy(this.color),Z.ambient.copy(this.ambient),Z.emissive.copy(this.emissive),Z.wrapAround=this.wrapAround,Z.wrapRGB.copy(this.wrapRGB),Z.map=this.map,Z.lightMap=this.lightMap,Z.specularMap=this.specularMap,Z.envMap=this.envMap,Z.combine=this.combine,Z.reflectivity=this.reflectivity,Z.refractionRatio=this.refractionRatio,Z.fog=this.fog,Z.shading=this.shading,Z.shaderID=this.shaderID,Z.vertexColors=this.vertexColors,Z.skinning=this.skinning,Z.morphTargets=this.morphTargets,Z.morphNormals=this.morphNormals,Z}}class T1 extends Fe{constructor(Z){super(),this.color=new He.Color(16777215),this.ambient=new He.Color(1048575),this.emissive=new He.Color(0),this.wrapAround=!1,this.wrapRGB=new _.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID="instanced",this.vertexColors=a.NoColors,this.skinning=!1,this.sphere=null,this.setValues(Z)}clone(Z=new T1){return super.clone.call(this,Z),Z.color.copy(this.color),Z.ambient.copy(this.ambient),Z.emissive.copy(this.emissive),Z.wrapAround=this.wrapAround,Z.wrapRGB.copy(this.wrapRGB),Z.map=this.map,Z.lightMap=this.lightMap,Z.specularMap=this.specularMap,Z.envMap=this.envMap,Z.combine=this.combine,Z.reflectivity=this.reflectivity,Z.refractionRatio=this.refractionRatio,Z.fog=this.fog,Z.shading=this.shading,Z.shaderID=this.shaderID,Z.vertexColors=this.vertexColors,Z.skinning=this.skinning,Z.morphTargets=this.morphTargets,Z.morphNormals=this.morphNormals,Z.sphere=this.sphere,Z}}class Tm extends Fe{constructor(Z){super(),this.color=new He.Color(16777215),this.ambient=new He.Color(1048575),this.emissive=new He.Color(0),this.wrapAround=!1,this.wrapRGB=new _.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID="lambert",this.vertexColors=a.NoColors,this.skinning=!1,this.setValues(Z)}clone(Z=new Tm){return super.clone.call(this,Z),Z.color.copy(this.color),Z.ambient.copy(this.ambient),Z.emissive.copy(this.emissive),Z.wrapAround=this.wrapAround,Z.wrapRGB.copy(this.wrapRGB),Z.map=this.map,Z.lightMap=this.lightMap,Z.specularMap=this.specularMap,Z.envMap=this.envMap,Z.combine=this.combine,Z.reflectivity=this.reflectivity,Z.refractionRatio=this.refractionRatio,Z.fog=this.fog,Z.shading=this.shading,Z.shaderID=this.shaderID,Z.vertexColors=this.vertexColors,Z.skinning=this.skinning,Z.morphTargets=this.morphTargets,Z.morphNormals=this.morphNormals,Z}}class x1 extends Tm{constructor(Z){super(Z),this.shaderID="lambertdouble",this.side=d,this.outline=!1}clone(Z=new x1){return super.clone.call(this,Z),Z}}class S1 extends Fe{constructor(Z){super(),Z=Z||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=He.CC.color(Z.color||new He.Color(0,0,0)),this.outlineWidth=Z.width||.1,this.outlinePushback=Z.pushback||1,this.outlineMaxPixels=Z.maxpixels||0}clone(Z=new S1){return super.clone.call(this,Z),Z.fog=this.fog,Z.shaderID=this.shaderID,Z.wireframe=this.wireframe,Z.outlineColor=this.outlineColor,Z.outlineWidth=this.outlineWidth,Z.outlinePushback=this.outlinePushback,Z.outlineMaxPixels=this.outlineMaxPixels,Z}}class p0 extends A1{constructor(Z){super(Z),this.shaderID="sphereimposter",this.setValues(Z)}clone(Z=new p0){return super.clone.call(this,Z),Z}}class zp extends A1{constructor(Z){super(Z),Z=Z||{},this.shaderID="sphereimposteroutline",this.outlineColor=He.CC.color(Z.color||new He.Color(0,0,0)),this.outlineWidth=Z.width||.1,this.outlinePushback=Z.pushback||1,this.outlineMaxPixels=Z.maxpixels||0,this.setValues(Z)}clone(Z=new zp){return super.clone.call(this,Z),Z.outlineColor=this.outlineColor,Z.outlineWidth=this.outlineWidth,Z.outlinePushback=this.outlinePushback,Z.outlineMaxPixels=this.outlineMaxPixels,Z}}class om extends Fe{constructor(Z){super(),this.color=new He.Color(16777215),this.map=new Zm,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new _.Vector2(0,0),this.uvScale=new _.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=S.center.clone(),this.setValues(Z),(Z=Z||{}).depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),Z.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),Z.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(Z=new om){return super.clone.call(this,Z),Z.color.copy(this.color),Z.map=this.map,Z.useScreenCoordinates=this.useScreenCoordinates,Z.screenOffset=this.screenOffset,Z.sizeAttenuation=this.sizeAttenuation,Z.scaleByViewport=this.scaleByViewPort,Z.alignment.copy(this.alignment),Z.uvOffset.copy(this.uvOffset),Z}}class bm extends A1{constructor(Z){super(Z),this.shaderID="stickimposter",this.setValues(Z)}clone(Z=new bm){return super.clone.call(this,Z),Z}}class i1 extends A1{constructor(Z={}){super(Z),this.shaderID="stickimposteroutline",this.outlineColor=new He.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,Z.color&&(this.outlineColor=He.CC.color(Z.color)),Z.width&&(this.outlineWidth=Z.width),Z.pushback&&(this.outlinePushback=Z.pushback),Z.maxpixels&&(this.outlineMaxPixels=Z.maxpixels),this.setValues(Z)}clone(Z=new i1){return super.clone.call(this,Z),Z.outlineColor=this.outlineColor,Z.outlineWidth=this.outlineWidth,Z.outlinePushback=this.outlinePushback,Z.outlineMaxPixels=this.outlineMaxPixels,Z}}class r1 extends Fe{constructor(Z){super(),this.transparent=!1,this.volumetric=!0,this.color=new He.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=o,this.setValues(Z)}clone(Z=new r1){return super.clone.call(this,Z),Z.transparent=this.transparent,Z.volumetric=this.volumetric,Z.color=this.color,Z.transferfn=this.transferfn,Z.map=this.map,Z.extent=this.extent,Z.maxdepth=this.maxdepth,Z.unit=this.unit,Z.texmatrix=this.texmatrix,Z.transfermin=this.transfermin,Z.transfermax=this.transfermax,Z.subsamples=this.subsamples,Z.shaderID=this.shaderID,Z.side=this.side,Z}}var Gp;(function(F0){F0[F0.LineStrip=0]="LineStrip",F0[F0.LinePieces=1]="LinePieces"})(Gp||(Gp={}));class i0 extends _r{constructor(Z,Fl=new be({color:16777215*Math.random()}),Wl=Gp.LineStrip){super(),this.geometry=Z,this.material=Fl,this.type=Wl}clone(Z=new i0(this.geometry,this.material,this.type)){return super.clone.call(this,Z),Z}}class l0 extends _r{constructor(Z,Fl){super(),this.geometry=Z,this.material=Fl}clone(Z){return Z===void 0&&(Z=new l0(this.geometry,this.material)),super.clone.call(this,Z),Z}}class im extends _r{constructor(Z=new om){super(),this.material=Z,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),this.scale.x===1&&this.scale.y===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(Z=new im(this.material)){return _r.prototype.clone.call(this,Z),Z}}const dm={opacity:{type:"f",value:1},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}},pm={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`.replace("#define GLSLIFY 1",""),fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`.replace("#define GLSLIFY 1",""),uniforms:dm},Dm={opacity:{type:"f",value:1},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Gm={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:Dm},qm={opacity:{type:"f",value:1},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},vm={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`.replace("#define GLSLIFY 1",""),vertexShader:`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`.replace("#define GLSLIFY 1",""),uniforms:qm},r0={opacity:{type:"f",value:1},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},e1={fragmentShader:`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:r0},_1={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new He.Color(0,0,0)},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},j1={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`.replace("#define GLSLIFY 1",""),uniforms:_1},q0={fragmentShader:`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},d1={fragmentShader:`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},tm={opacity:{type:"f",value:1},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},o1={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`.replace("#define GLSLIFY 1",""),fragmentShader:`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`.replace("#define GLSLIFY 1",""),uniforms:tm},jm={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new He.Color(0,0,0)},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},l1={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`.replace("#define GLSLIFY 1",""),uniforms:jm},gg={fragmentShader:`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`.replace("#define GLSLIFY 1",""),uniforms:{}},Jg={opacity:{type:"f",value:1},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Dg=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`,Eg={fragmentShader:[Dg,`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`].join(`
`),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`,uniforms:Jg},ev={fragmentShader:Dg+`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`,vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`,uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new He.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},pv={opacity:{type:"f",value:1},fogColor:{type:"c",value:new He.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}},sv={fragmentShader:`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `.replace("#define GLSLIFY 1",""),vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`.replace("#define GLSLIFY 1",""),uniforms:pv},kv={basic:pm,blur:{fragmentShader:`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{}},instanced:Gm,lambert:vm,lambertdouble:e1,outline:j1,screen:q0,screenaa:d1,ssao:{fragmentShader:`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},sphereimposter:o1,sphereimposteroutline:l1,sprite:gg,stickimposter:Eg,stickimposteroutline:ev,volumetric:sv};function Zv(F0){let Z={};for(const Wl in F0){Z[Wl]={},Z[Wl].type=F0[Wl].type;var Fl=F0[Wl].value;Fl instanceof He.Color?Z[Wl].value=Fl.clone():typeof Fl=="number"?Z[Wl].value=Fl:Fl instanceof Array?Z[Wl].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return Z}const ry={clone:Zv};class oy extends _r{constructor(Z=50,Fl=1,Wl=.1,x0=2e3,S0=!1){super(),this.projectionMatrix=new _.Matrix4,this.projectionMatrixInverse=new _.Matrix4,this.matrixWorldInverse=new _.Matrix4,this.fov=Z,this.aspect=Fl,this.near=Wl,this.far=x0;var Mm=this.position.z;this.right=Mm*Math.tan(Math.PI/180*Z),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!S0,this.updateProjectionMatrix()}lookAt(Z){this.matrix.lookAt(this.position,Z,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof _.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}class Hv{constructor(Z,Fl=1,Wl=1e3){this.name="",this.color=new He.Color(Z),this.near=Fl,this.far=Wl}clone(){return new Hv(this.color.getHex(),this.near,this.far)}}class vv{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(Z){this.gl=Z.context,this.renderer=Z,this.precision=Z.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var Fl=0;this.sprite.vertices[Fl++]=-1,this.sprite.vertices[Fl++]=-1,this.sprite.vertices[Fl++]=0,this.sprite.vertices[Fl++]=0,this.sprite.vertices[Fl++]=1,this.sprite.vertices[Fl++]=-1,this.sprite.vertices[Fl++]=1,this.sprite.vertices[Fl++]=0,this.sprite.vertices[Fl++]=1,this.sprite.vertices[Fl++]=1,this.sprite.vertices[Fl++]=1,this.sprite.vertices[Fl++]=1,this.sprite.vertices[Fl++]=-1,this.sprite.vertices[Fl++]=1,this.sprite.vertices[Fl++]=0,this.sprite.vertices[Fl++]=1,Fl=0,this.sprite.faces[Fl++]=0,this.sprite.faces[Fl++]=1,this.sprite.faces[Fl++]=2,this.sprite.faces[Fl++]=0,this.sprite.faces[Fl++]=2,this.sprite.faces[Fl++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(kv.sprite,this.precision||1),this.sprite.attributes={};const Wl={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),Wl.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),Wl.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),Wl.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),Wl.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),Wl.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),Wl.color=this.gl.getUniformLocation(this.sprite.program,"color"),Wl.map=this.gl.getUniformLocation(this.sprite.program,"map"),Wl.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),Wl.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),Wl.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),Wl.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),Wl.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),Wl.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),Wl.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),Wl.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),Wl.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=Wl}render(Z,Fl,Wl,x0,S0){var Mm,km,wm,Xm,Nm,m1,N1,H1,Sg,bg;if(!this.gl)throw new Error("WebGLRenderer not initialized");let q1=[];(Mm=Z?.__webglSprites)===null||Mm===void 0||Mm.forEach(it=>{(S0&&it.material.depthTest==0||!S0&&it.material.depthTest)&&q1.push(it)});let vg=q1.length;if(!vg)return;const Hg=this.sprite.attributes,Q1=this.sprite.uniforms;if(!Q1)throw new Error("Uniforms not defined");var kg=.5*Wl,eg=.5*x0;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(Hg.position),this.gl.enableVertexAttribArray(Hg.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(Hg.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(Hg.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(Q1.projectionMatrix,!1,Fl.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(Q1.map,0);var Iv,jp=Z.fog;let f,R,$;jp?(this.gl.uniform3f(Q1.fogColor,jp.color.r,jp.color.g,jp.color.b),this.gl.uniform1f(Q1.fogNear,jp.near),this.gl.uniform1f(Q1.fogFar,jp.far)):(this.gl.uniform1f(Q1.fogNear,0),this.gl.uniform1f(Q1.fogFar,0));let Q=[];for(Iv=0;Iv<vg;Iv++)f=q1[Iv],R=f.material,R&&(R.depthTest!=0||S0)&&f.visible&&R.opacity!==0&&(R.useScreenCoordinates?f.z=-f.position.z:(f._modelViewMatrix.multiplyMatrices(Fl.matrixWorldInverse,f.matrixWorld),f.z=-f._modelViewMatrix.elements[14]));for(q1.sort(ag),Iv=0;Iv<vg;Iv++)if(f=q1[Iv],R=f.material,R&&f.visible&&R.opacity!==0&&R.map&&R.map.image&&R.map.image.width){this.gl.uniform1f(Q1?.alphaTest||null,R.alphaTest);var Ze=R.map.image.width,_e=R.map.image.height;Q[0]=Ze*this.renderer.devicePixelRatio/Wl,Q[1]=_e*this.renderer.devicePixelRatio/x0,R.useScreenCoordinates===!0?(this.gl.uniform1i(Q1.useScreenCoordinates,1),this.gl.uniform3f(Q1.screenPosition,(f.position.x*this.renderer.devicePixelRatio-kg)/kg,(eg-f.position.y*this.renderer.devicePixelRatio)/eg,Math.max(0,Math.min(1,f.position.z)))):(this.gl.uniform1i(Q1.useScreenCoordinates,0),this.gl.uniformMatrix4fv(Q1.modelViewMatrix,!1,f._modelViewMatrix.elements)),$=1/(R.scaleByViewport?x0:1),Q[0]*=$*f.scale.x,Q[1]*=$*f.scale.y;let it=(km=R?.alignment)===null||km===void 0?void 0:km.x,lt=(wm=R?.alignment)===null||wm===void 0?void 0:wm.y;R.screenOffset&&(it=(it||0)+2*R.screenOffset.x/Ze,lt=(lt||0)+2*R.screenOffset.y/_e),this.gl.uniform2f(Q1.uvScale,((Xm=R?.uvScale)===null||Xm===void 0?void 0:Xm.x)||1,((Nm=R?.uvScale)===null||Nm===void 0?void 0:Nm.y)||1),this.gl.uniform2f(Q1.uvOffset,((m1=R?.uvOffset)===null||m1===void 0?void 0:m1.x)||0,((N1=R?.uvOffset)===null||N1===void 0?void 0:N1.y)||0),this.gl.uniform2f(Q1.alignment,it||0,lt||0),this.gl.uniform1f(Q1.opacity,R.opacity),this.gl.uniform3f(Q1.color,((H1=R?.color)===null||H1===void 0?void 0:H1.r)||0,((Sg=R?.color)===null||Sg===void 0?void 0:Sg.g)||0,((bg=R?.color)===null||bg===void 0?void 0:bg.b)||0),this.gl.uniform1f(Q1.rotation,f.rotation),this.gl.uniform2fv(Q1.scale,Q),this.renderer.setDepthTest(R.depthTest),this.renderer.setDepthWrite(R.depthWrite),this.renderer.setTexture(R.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(Z,Fl){if(!this.gl)throw new Error("WebGL Rendering context not found");var Wl=this.gl.createProgram();if(!Wl)throw new Error("Error creating webgl program");var x0=this.gl.createShader(this.gl.FRAGMENT_SHADER),S0=this.gl.createShader(this.gl.VERTEX_SHADER);if(!x0)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!S0)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var Mm="precision "+Fl+` float;
`;if(this.gl.shaderSource(x0,Mm+Z.fragmentShader),this.gl.shaderSource(S0,Mm+Z.vertexShader),this.gl.compileShader(x0),this.gl.compileShader(S0),!this.gl.getShaderParameter(x0,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(S0,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(x0)} 
      ${this.gl.getShaderInfoLog(S0)}`);return this.gl.attachShader(Wl,x0),this.gl.attachShader(Wl,S0),this.gl.linkProgram(Wl),this.gl.getProgramParameter(Wl,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),Wl}}function ag(F0,Z){return F0.z!==Z.z?Z.z-F0.z:Z.id-F0.id}var _v=null,Mv=null;class c0{constructor(Z){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new _.Vector3,this._worldInverse=new _.Matrix4,this._projInverse=new _.Matrix4,this._textureMatrix=new _.Matrix4,this._fullProjModelMatrix=new _.Matrix4,this._fullProjModelMatrixInv=new _.Matrix4,this._direction=new _.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new vv,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,Z=Z||{},this.row=Z.row,this.col=Z.col,this.rows=Z.rows,this.cols=Z.cols,this._canvas=Z.canvas!==void 0?Z.canvas:document.createElement("canvas"),this._precision=Z.precision!==void 0?Z.precision:"highp",this._alpha=Z.alpha===void 0||Z.alpha,this._premultipliedAlpha=Z.premultipliedAlpha===void 0||Z.premultipliedAlpha,this._antialias=Z.antialias!==void 0&&Z.antialias,this._upscale=Z.upscale!==void 0?Z.upscale:this._antialias,this._preserveDrawingBuffer=Z.preserveDrawingBuffer!==void 0&&Z.preserveDrawingBuffer,this._clearColor=Z.clearColor!==void 0?new He.Color(Z.clearColor):new He.Color(0),this._clearAlpha=Z.clearAlpha!==void 0?Z.clearAlpha:0,this._outlineMaterial=new S1(Z.outline),this._outlineSphereImposterMaterial=new zp(Z.outline),this._outlineStickImposterMaterial=new i1(Z.outline),this._outlineEnabled=!!Z.outline,this._AOEnabled=!!Z.ambientOcclusion,Z.ambientOcclusion&&Z.ambientOcclusion.strength!==void 0&&(this._AOstrength=parseFloat(Z.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),Z.ambientOcclusion&&Z.ambientOcclusion.radius!==void 0&&(this._AOradius=parseFloat(Z.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=Z.id,Z.containerWidth!=0&&Z.containerHeight!=0&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(Z,Fl){this._clearColor.setHex(Z),this._clearAlpha=Fl,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(Z){this._outlineMaterial=new S1(Z),this._outlineSphereImposterMaterial=new zp(Z),this._outlineStickImposterMaterial=new i1(Z),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(Z){Z&&(Z.strength&&(this._AOstrength=Z.strength),Z.scale&&(this._AOradius=Z.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var Z=this._gl.drawingBufferWidth/this.cols,Fl=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=Z,this._viewportHeight=Fl,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(Z*this.col,Fl*this.row,Z,Fl),this._gl.viewport(Z*this.col,Fl*this.row,Z,Fl)}}setSize(Z,Fl){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=Z*this.devicePixelRatio,this._canvas.height=Fl*this.devicePixelRatio,this._canvas.style.width=Z+"px",this._canvas.style.height=Fl+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(Z,Fl,Wl){var x0=0;(Z===void 0||Z)&&(x0|=this._gl.COLOR_BUFFER_BIT),(Fl===void 0||Fl)&&(x0|=this._gl.DEPTH_BUFFER_BIT),(Wl===void 0||Wl)&&(x0|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(x0)}setMaterialFaces(Z,Fl){var Wl=Z.side===d,x0=Z.side===c;Z.imposter||(x0=Fl?!x0:x0),this._oldDoubleSided!==Wl&&(Wl?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=Wl),this._oldFlipSided!==x0&&(x0?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=x0),this._gl.cullFace(this._gl.BACK)}setDepthTest(Z){this._oldDepthTest!==Z&&(Z?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=Z)}setDepthWrite(Z){this._oldDepthWrite!==Z&&(this._gl.depthMask(Z),this._oldDepthWrite=Z)}setBlending(Z){Z?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(Z,Fl,Wl,x0){var S0,Mm;if(Z.addEventListener("dispose",this.onMaterialDispose.bind(this)),Mm=Z.shaderID){var km=kv[Mm];Z.vertexShader=km.vertexShader,Z.fragmentShader=km.fragmentShader,Z.uniforms=ry.clone(km.uniforms),Z.shaded&&Z.makeShaded(this.SHADE_TEXTURE)}S0={wireframe:Z.wireframe,fragdepth:Z.imposter,volumetric:Z.volumetric,shaded:Z.shaded},Z.program=this.buildProgram(Z.fragmentShader,Z.vertexShader,Z.uniforms,S0)}renderBuffer(Z,Fl,Wl,x0,S0,Mm){var km,wm;if(x0.visible&&(km=this.setProgram(Z,Fl,Wl,x0,Mm,this))){wm=km.attributes;var Xm,Nm,m1=!1,N1=x0.wireframe?1:0,H1=16777215*S0.id+2*km.id+N1;if(H1!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=H1,m1=!0),m1&&(this.disableAttributes(),wm.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S0.__webglVertexBuffer),this.enableAttribute(wm.position),this._gl.vertexAttribPointer(wm.position,3,this._gl.FLOAT,!1,0,0)),wm.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S0.__webglColorBuffer),this.enableAttribute(wm.color),this._gl.vertexAttribPointer(wm.color,3,this._gl.FLOAT,!1,0,0)),wm.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S0.__webglNormalBuffer),this.enableAttribute(wm.normal),this._gl.vertexAttribPointer(wm.normal,3,this._gl.FLOAT,!1,0,0)),wm.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S0.__webglOffsetBuffer),this.enableAttribute(wm.offset),this._gl.vertexAttribPointer(wm.offset,3,this._gl.FLOAT,!1,0,0)),wm.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S0.__webglRadiusBuffer),this.enableAttribute(wm.radius),this._gl.vertexAttribPointer(wm.radius,1,this._gl.FLOAT,!1,0,0))),Mm instanceof l0){if(x0.shaderID==="instanced"){var Sg=x0.sphere.geometryGroups[0];m1&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S0.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Sg.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S0.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Sg.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,S0.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Sg.faceArray,this._gl.STATIC_DRAW)),Xm=Sg.faceidx,this._extInstanced.vertexAttribDivisorANGLE(wm.offset,1),this._extInstanced.vertexAttribDivisorANGLE(wm.radius,1),this._extInstanced.vertexAttribDivisorANGLE(wm.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,Xm,this._gl.UNSIGNED_SHORT,0,S0.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(wm.offset,0),this._extInstanced.vertexAttribDivisorANGLE(wm.radius,0),this._extInstanced.vertexAttribDivisorANGLE(wm.color,0)}else x0.wireframe?(Nm=S0.lineidx,this.setLineWidth(x0.wireframeLinewidth),m1&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,S0.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Nm,this._gl.UNSIGNED_SHORT,0)):(Xm=S0.faceidx,m1&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,S0.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,Xm,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=Xm,this.info.render.faces+=Xm/3}else Mm instanceof i0&&(Nm=S0.vertices,this.setLineWidth(x0.linewidth),this._gl.drawArrays(this._gl.LINES,0,Nm),this.info.render.calls++)}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(Z,Fl,Wl){let x0=Z.__lights,S0=Z.fog,Mm=[];for(let Xm=0,Nm=Z.__webglObjects.length;Xm<Nm;Xm++){let m1=Z.__webglObjects[Xm];m1.render&&m1[Wl]&&Mm.push(m1)}if(Mm.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(Z.__webglObjects,!0,Wl+"Depth",Fl,x0,S0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let km=this._AOshader.uniforms;this._gl.uniform1f(km.total_strength,this._AOstrength),this._gl.uniform1f(km.radius,this._AOradius),this._fullProjModelMatrix=new _.Matrix4,this._fullProjModelMatrixInv=new _.Matrix4;let wm=Mm[0].object;this._fullProjModelMatrix.multiplyMatrices(Fl.projectionMatrix,wm._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(km.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(km.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(Z,Fl){if(Fl instanceof oy==0)return void console.error("Renderer.render: camera is not an instance of Camera.");var Wl,x0,S0,Mm,km,wm=Z.__lights,Xm=Z.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&Z.updateMatrixWorld(),Fl.parent===void 0&&Fl.updateMatrixWorld(),Fl.matrixWorldInverse.getInverse(Fl.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(Z),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),km=Z.__webglObjects;let Nm=!1,m1=this._AOEnabled;for(Wl=0,x0=km.length;Wl<x0;Wl++)Mm=(S0=km[Wl]).object,S0.render=!1,Mm.visible&&(this.setupMatrices(Mm,Fl),this.unrollBufferMaterial(S0),S0.render=!0,S0.volumetric&&(Nm=!0),S0.hasAO&&(m1=!0));if(this.setBlending(!1),m1&&this.setShading(Z,Fl,"opaque"),this.renderObjects(Z.__webglObjects,!0,"opaque",Fl,wm,Xm,!1),m1&&this.clearShading(),this.renderSprites(Z,Fl,!1),this.renderObjects(Z.__webglObjects,!0,"transparentDepth",Fl,wm,Xm,!0),this.renderObjects(Z.__webglObjects,!1,"transparent",Fl,wm,Xm,!0),Nm&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(Z.__webglObjects,!1,"volumetric",Fl,wm,Xm,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(Z,Fl,!0),this._bitmap){const N1=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(N1),N1.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let Z=this._viewportWidth,Fl=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,Z,Fl),this._gl.viewport(0,0,Z,Fl),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,Z,Fl,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,Z,Fl,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,Z,Fl,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,Z,Fl,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let Z=this._viewportWidth,Fl=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,Z,Fl),this._gl.viewport(0,0,Z,Fl),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var Wl=this._antialias?kv.screenaa:kv.screen;this._screenshader=this.buildProgram(Wl.fragmentShader,Wl.vertexShader,Wl.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition"),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW);let x0=kv.ssao;this._AOshader=this.buildProgram(x0.fragmentShader,x0.vertexShader,x0.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let S0=kv.blur;this._blurshader=this.buildProgram(S0.fragmentShader,S0.vertexShader,S0.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(Z){if(Z.__webglObjects||(Z.__webglObjects=[],Z.__webglObjectsImmediate=[],Z.__webglSprites=[],Z.__webglFlares=[]),Z.__objectsAdded.length){for(;Z.__objectsAdded.length;)this.addObject(Z.__objectsAdded[0],Z),Z.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;Z.__objectsRemoved.length;)this.removeObject(Z.__objectsRemoved[0],Z),Z.__objectsRemoved.splice(0,1);for(var Fl=0,Wl=Z.__webglObjects.length;Fl<Wl;Fl++)this.updateObject(Z.__webglObjects[Fl].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(Z,Fl){Z!=null&&Fl!=null||(Z=this._canvas.width,Fl=this._canvas.height);var Wl=Z/Fl;return this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&(Wl=Z/this.cols/(Fl/this.rows)),Wl}setTexture(Z,Fl,Wl){if(Z.needsUpdate){Z.__webglInit||(Z.__webglInit=!0,Z.addEventListener("dispose",this.onTextureDispose.bind(this)),Z.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+Fl);var x0=Wl?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(x0,Z.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,Z.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,Z.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,Z.unpackAlignment);var S0=this.paramToGL(Z.format),Mm=this.paramToGL(Z.type);if(Wl)this.setTextureParameters(this._gl.TEXTURE_3D,Z),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,Z.image.size.z,Z.image.size.y,Z.image.size.x,0,this._gl.RED,this._gl.FLOAT,Z.image.data);else{var km=Z.image,wm=km.width,Xm=km.height;wm===void 0&&(wm=km.length,S0==this._gl.RGBA&&(wm/=4),Xm=1),this.setTextureParameters(this._gl.TEXTURE_2D,Z),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,S0,S0,Mm,Z.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,S0,wm,Xm,0,S0,Mm,Z.image)}Z.needsUpdate=!1,Z.onUpdate&&Z.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+Fl),Wl?this._gl.bindTexture(this._gl.TEXTURE_3D,Z.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,Z.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(Z){this._enabledAttributes[Z]||(this._gl.enableVertexAttribArray(Z),this._enabledAttributes[Z]=!0)}disableAttributes(){for(let Z in this._enabledAttributes)this._enabledAttributes[Z]&&(this._gl.disableVertexAttribArray(Z),this._enabledAttributes[Z]=!1)}setPolygonOffset(Z,Fl,Wl){this._oldPolygonOffset!==Z&&(Z?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(Z){Z!==this._oldLineWidth&&(this._gl.lineWidth(Z),this._oldLineWidth=Z)}deallocateGeometry(Z){if(Z.__webglInit=void 0,Z.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(Z.__webglVertexBuffer),Z.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(Z.__webglColorBuffer),Z.geometryGroups!==void 0)for(var Fl=0,Wl=Z.groups;Fl<Wl;Fl++){var x0=Z.geometryGroups[Fl];x0.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(x0.__webglVertexBuffer),x0.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(x0.__webglColorBuffer),x0.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(x0.__webglNormalBuffer),x0.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(x0.__webglFaceBuffer),x0.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(x0.__webglLineBuffer)}}deallocateMaterial(Z){var Fl=Z.program;if(Fl!==void 0){var Wl,x0,S0;Z.program=void 0;var Mm=!1;for(Wl=0,x0=this._programs.length;Wl<x0;Wl++)if((S0=this._programs[Wl]).program===Fl){S0.usedTimes--,S0.usedTimes===0&&(Mm=!0);break}if(Mm===!0){var km=[];for(Wl=0,x0=this._programs.length;Wl<x0;Wl++)(S0=this._programs[Wl]).program!==Fl&&km.push(S0);this._programs=km,this._gl.deleteProgram(Fl),this.info.memory.programs--}}}deallocateTexture(Z){if(Z.image&&Z.image.__webglTextureCube)this._gl.deleteTexture(Z.image.__webglTextureCube);else{if(!Z.__webglInit)return;Z.__webglInit=!1,this._gl.deleteTexture(Z.__webglTexture)}}onGeometryDispose(Z){var Fl=Z.target;Fl.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(Fl),this.info.memory.geometries--}onTextureDispose(Z){var Fl=Z.target;Fl.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(Fl),this.info.memory.textures--}onMaterialDispose(Z){var Fl=Z.target;Fl.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(Fl)}getShader(Z,Fl){var Wl;return this.isWebGL1()||Fl.startsWith("#version")||(Fl=Fl.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),Fl=`#version 300 es
`+(Fl=(Fl=(Fl=(Fl=(Fl=Z=="fragment"?Fl.replace(/varying/g,"in"):Fl.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),Z==="fragment"?Wl=this._gl.createShader(this._gl.FRAGMENT_SHADER):Z==="vertex"&&(Wl=this._gl.createShader(this._gl.VERTEX_SHADER)),Wl==null?null:(this._gl.shaderSource(Wl,Fl),this._gl.compileShader(Wl),this._gl.getShaderParameter(Wl,this._gl.COMPILE_STATUS)?Wl:(console.error(this._gl.getShaderInfoLog(Wl)),console.error("could not initialize shader"),null))}buildProgram(Z,Fl,Wl,x0){var S0,Mm,km,wm,Xm=[];for(S0 in Xm.push(Z),Xm.push(Fl),x0)Xm.push(S0),Xm.push(x0[S0]);for(wm=Xm.join(),S0=0,Mm=this._programs.length;S0<Mm;S0++){var Nm=this._programs[S0];if(Nm.code===wm)return Nm.usedTimes++,Nm.program}if(this.isWebGL1()&&x0.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if((km=this._gl.createProgram())==null)return null;var m1,N1,H1,Sg="precision "+this._precision+" float;",bg=[x0.volumetric?"#version 300 es":"",Sg].join(`
`),q1=[x0.volumetric?"#version 300 es":"",x0.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",x0.shaded?"#define SHADED 1":"",x0.wireframe?"#define WIREFRAME 1":"",Sg].join(`
`),vg=this.getShader("fragment",q1+Z),Hg=this.getShader("vertex",bg+Fl);for(N1 in Hg!=null&&this._gl.attachShader(km,Hg),vg!=null&&this._gl.attachShader(km,vg),this._gl.linkProgram(km),this._gl.getProgramParameter(km,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),km.uniforms={},km.attributes={},m1=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"],Wl)m1.push(N1);for(H1=0;H1<m1.length;H1++){var Q1=m1[H1];km.uniforms[Q1]=this._gl.getUniformLocation(km,Q1)}for(m1=["position","normal","color","lineDistance","offset","radius"],H1=0;H1<m1.length;H1++){var kg=m1[H1];km.attributes[kg]=this._gl.getAttribLocation(km,kg)}return km.id=this._programs_counter++,this._programs.push({program:km,code:wm,usedTimes:1}),this.info.memory.programs=this._programs.length,km}setProgram(Z,Fl,Wl,x0,S0,Mm){if(x0.needsUpdate&&(x0.program&&this.deallocateMaterial(x0),this.initMaterial(x0,Fl,Wl,S0),x0.needsUpdate=!1),x0.program==null)return null;var km=!1,wm=x0.program,Xm=wm.uniforms,Nm=x0.uniforms;if(wm!=this._currentProgram&&(this._gl.useProgram(wm),this._currentProgram=wm,km=!0),x0.id!=this._currentMaterialId&&(this._currentMaterialId=x0.id,km=!0),Z!=this._currentCamera&&(this._currentCamera=Z,km=!0),Xm.projectionMatrix&&this._gl.uniformMatrix4fv(Xm.projectionMatrix,!1,Z.projectionMatrix.elements),Xm.modelViewMatrix&&this._gl.uniformMatrix4fv(Xm.modelViewMatrix,!1,S0._modelViewMatrix.elements),Xm.normalMatrix&&this._gl.uniformMatrix3fv(Xm.normalMatrix,!1,S0._normalMatrix.elements),Xm.projinv&&(this._projInverse.getInverse(Z.projectionMatrix),this._gl.uniformMatrix4fv(Xm.projinv,!1,this._projInverse.elements)),Xm.viewMatrix&&this._gl.uniformMatrix4fv(Xm.viewMatrix,!1,Z.matrixWorldInverse.elements),Xm.vWidth&&this._gl.uniform1f(Xm.vWidth,this._viewportWidth),Xm.vHeight&&this._gl.uniform1f(Xm.vHeight,this._viewportHeight),km){if(Nm.fogColor.value=Wl.color,Nm.fogNear.value=Wl.near,Nm.fogFar.value=Wl.far,x0.shaderID.startsWith("lambert")||x0.shaderID==="instanced"||x0.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(wm,Fl),this._lightsNeedUpdate=!1),Nm.directionalLightColor.value=this._lights.directional.colors,Nm.directionalLightDirection.value=this._lights.directional.positions;else if(x0.shaderID.endsWith("outline"))Nm.outlineColor.value=x0.outlineColor,Nm.outlineWidth.value=x0.outlineWidth,Nm.outlinePushback.value=x0.outlinePushback,Nm.outlineMaxPixels.value=x0.outlineMaxPixels*this.devicePixelRatio;else if(x0.shaderID==="volumetric"){S0._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(S0._modelViewMatrix),this._projInverse.getInverse(Z.projectionMatrix),this._textureMatrix.multiplyMatrices(S0.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(Xm.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(Xm.projinv,!1,this._projInverse.elements);let m1=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);Nm.step.value=S0.material.unit*m1,Nm.maxdepth.value=S0.material.maxdepth*m1,Nm.transfermax.value=S0.material.transfermax,Nm.transfermin.value=S0.material.transfermin,Nm.subsamples.value=S0.material.subsamples,Mm.setTexture(S0.material.transferfn,4,!1),Mm.setTexture(S0.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}Nm.opacity.value=x0.opacity,this.loadMaterialUniforms(Xm,Nm)}return Nm.shading&&(Nm.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),wm}loadMaterialUniforms(Z,Fl){var Wl,x0,S0,Mm;for(Wl in Fl)Z[Wl]&&(x0=Fl[Wl].type,S0=Fl[Wl].value,Mm=Z[Wl],x0==="f"?this._gl.uniform1f(Mm,S0):x0==="i"?this._gl.uniform1i(Mm,S0):x0==="fv"?this._gl.uniform3fv(Mm,S0):x0==="c"?this._gl.uniform3f(Mm,S0.r,S0.g,S0.b):x0==="f4"&&this._gl.uniform4f(Mm,S0[0],S0[1],S0[2],S0[3]))}addObject(Z,Fl){var Wl,x0,S0,Mm;if(!Z.__webglInit&&(Z.__webglInit=!0,Z._modelViewMatrix=new _.Matrix4,Z._normalMatrix=new _.Matrix3,Z.geometry!==void 0&&Z.geometry.__webglInit===void 0&&(Z.geometry.__webglInit=!0,Z.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),Z instanceof l0||Z instanceof i0))for(Wl=0,x0=(S0=Z.geometry).geometryGroups.length;Wl<x0;Wl++)(Mm=S0.geometryGroups[Wl]).id=this._geometryGroupCounter++,Mm.__webglVertexBuffer||(Z instanceof l0?(this.createMeshBuffers(Mm),S0.elementsNeedUpdate=!0,S0.normalsNeedUpdate=!0):Z instanceof i0&&this.createLineBuffers(Mm),S0.verticesNeedUpdate=!0,S0.colorsNeedUpdate=!0);if(!Z.__webglActive){if(Z instanceof l0||Z instanceof i0)for(Wl=0,x0=(S0=Z.geometry).geometryGroups.length;Wl<x0;Wl++)Mm=S0.geometryGroups[Wl],this.addBuffer(Fl.__webglObjects,Mm,Z);else Z instanceof im&&Fl.__webglSprites.push(Z);Z.__webglActive=!0}}updateObject(Z){var Fl,Wl=Z.geometry;if(Z instanceof l0||Z instanceof i0){for(var x0=0,S0=Wl.geometryGroups.length;x0<S0;x0++)Fl=Wl.geometryGroups[x0],(Wl.verticesNeedUpdate||Wl.elementsNeedUpdate||Wl.colorsNeedUpdate||Wl.normalsNeedUpdate)&&this.setBuffers(Fl,this._gl.STATIC_DRAW);Wl.verticesNeedUpdate=!1,Wl.elementsNeedUpdate=!1,Wl.normalsNeedUpdate=!1,Wl.colorsNeedUpdate=!1,Wl.buffersNeedUpdate=!1}}removeObject(Z,Fl){Z instanceof l0||Z instanceof i0?this.removeInstances(Fl.__webglObjects,Z):Z instanceof im&&this.removeInstancesDirect(Fl.__webglSprites,Z),Z.__webglActive=!1}removeInstances(Z,Fl){for(var Wl=Z.length-1;Wl>=0;--Wl)Z[Wl].object===Fl&&Z.splice(Wl,1)}removeInstancesDirect(Z,Fl){for(var Wl=Z.length-1;Wl>=0;--Wl)Z[Wl]===Fl&&Z.splice(Wl,1)}unrollBufferMaterial(Z){var Fl=Z.object.material;if(Fl.volumetric)Z.opaque=null,Z.transparent=null,Z.volumetric=Fl;else if(Fl.transparent){if(Z.opaque=null,Z.volumetric=null,Z.transparent=Fl,!Fl.wireframe){let Wl=Fl.clone();Wl.opacity=0,Z.transparentDepth=Wl}}else{if(Z.opaque=Fl,Z.transparent=null,Z.volumetric=null,!Fl.wireframe){let Wl=Fl.clone();Wl.opacity=0,Z.opaqueDepth=Wl}Fl.hasAO&&(Z.hasAO=!0),(this._AOEnabled||Z.hasAO)&&(Z.opaqueShaded=Fl.clone(),Z.opaqueShaded.shaded=!0)}}setBuffers(Z,Fl){var Wl=Z.vertexArray,x0=Z.colorArray;if(Z.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Z.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Wl,Fl)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Z.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Wl,Fl)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Z.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,x0,Fl),Z.normalArray&&Z.__webglNormalBuffer!==void 0){var S0=Z.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Z.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,S0,Fl)}if(Z.radiusArray&&Z.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Z.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Z.radiusArray,Fl)),Z.faceArray&&Z.__webglFaceBuffer!==void 0){var Mm=Z.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Z.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Mm,Fl)}if(Z.lineArray&&Z.__webglLineBuffer!==void 0){var km=Z.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Z.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,km,Fl)}}createMeshBuffers(Z){Z.radiusArray&&(Z.__webglRadiusBuffer=this._gl.createBuffer()),Z.useOffset&&(Z.__webglOffsetBuffer=this._gl.createBuffer()),Z.__webglVertexBuffer=this._gl.createBuffer(),Z.__webglNormalBuffer=this._gl.createBuffer(),Z.__webglColorBuffer=this._gl.createBuffer(),Z.__webglFaceBuffer=this._gl.createBuffer(),Z.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(Z){Z.__webglVertexBuffer=this._gl.createBuffer(),Z.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(Z,Fl,Wl){Z.push({buffer:Fl,object:Wl,opaque:null,transparent:null})}setupMatrices(Z,Fl){Z._modelViewMatrix.multiplyMatrices(Fl.matrixWorldInverse,Z.matrixWorld),Z._normalMatrix.getInverse(Z._modelViewMatrix),Z._normalMatrix.transpose()}filterFallback(Z){return this._gl.LINEAR}setTextureParameters(Z,Fl){Z==this._gl.TEXTURE_2D?(this._gl.texParameteri(Z,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(Z,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(Z,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(Fl.magFilter)),this._gl.texParameteri(Z,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(Fl.minFilter))):(this._gl.texParameteri(Z,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(Z,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(Z,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(Z,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(Z,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(Z,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(Z,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(Z){return Z===J?this._gl.UNSIGNED_BYTE:Z===ie?this._gl.RGBA:Z===j?this._gl.NEAREST:0}setupLights(Z,Fl){var Wl,x0,S0,Mm,km,wm=this._lights,Xm=wm.directional.colors,Nm=wm.directional.positions,m1=0,N1=0;for(Wl=0,x0=Fl.length;Wl<x0;Wl++)if(Mm=(S0=Fl[Wl]).color,km=S0.intensity,S0 instanceof ne){if(this._direction.getPositionFromMatrix(S0.matrixWorld),this._vector3.getPositionFromMatrix(S0.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Nm[N1]=this._direction.x,Nm[N1+1]=this._direction.y,Nm[N1+2]=this._direction.z,Xm[N1]=Mm.r*km,Xm[N1+1]=Mm.g*km,Xm[N1+2]=Mm.b*km,N1+=3,m1++}wm.ambient[0]=0,wm.ambient[1]=0,wm.ambient[2]=0,wm.directional.length=m1}initGL(){try{if(!OffscreenCanvas||this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context."}else(Mv==null||Mv.isContextLost())&&(_v=new OffscreenCanvas(this._canvas.width,this._canvas.height),Mv=_v.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=_v,this._gl=Mv,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});var Z=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(Z[6])}catch(Fl){console.error(Fl)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(Z,Fl,Wl,x0,S0,Mm,km){var wm,Xm,Nm,m1,N1,H1,Sg;Fl?(N1=Z.length-1,H1=-1,Sg=-1):(N1=0,H1=Z.length,Sg=1);for(var bg=N1;bg!==H1;bg+=Sg)if((wm=Z[bg]).render){if(Xm=wm.object,Nm=wm.buffer,m1=wm[Wl],(wm.hasAO||this._AOEnabled)&&wm[Wl+"Shaded"]&&(m1=wm[Wl+"Shaded"]),!m1)continue;this.setBlending(km),this.setDepthTest(m1.depthTest),this.setDepthWrite(m1.depthWrite),this.setPolygonOffset(m1.polygonOffset,m1.polygonOffsetFactor,m1.polygonOffsetUnits);var q1=Xm._modelViewMatrix.isReflected();if(this.setMaterialFaces(m1,q1),this.renderBuffer(x0,S0,Mm,m1,Nm,Xm),(this._outlineEnabled||m1.outline)&&!m1.wireframe&&m1.shaderID!=="basic"&&m1.opacity!==0){let vg=this._outlineMaterial;m1.shaderID=="sphereimposter"?vg=this._outlineSphereImposterMaterial:m1.shaderID=="stickimposter"&&(vg=this._outlineStickImposterMaterial),this.renderBuffer(x0,S0,Mm,vg,Nm,Xm)}}}renderSprites(Z,Fl,Wl){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(Z,Fl,this._currentWidth,this._currentHeight,Wl),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},392:(r,e,t)=>{t.r(e),t.d(e,{assignBonds:()=>d});var a=t(408);const o=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],c=4.95;function d(p,_){for(let C=0,j=p.length;C<j;C++)p[C].index||(p[C].index=C);const S={x:{y:{z:[]}}};for(let C=0;C<p.length;C++){const j=p[C],V=Math.floor(j.x/c),J=Math.floor(j.y/c),re=Math.floor(j.z/c);S[V]||(S[V]={}),S[V][J]||(S[V][J]={}),S[V][J][re]||(S[V][J][re]=[]),S[V][J][re].push(j)}function A(C,j){for(let V=0;V<C.length;V++){const J=C[V];for(let re=0;re<j.length;re++){const ie=j[re];if((0,a.areConnected)(J,ie,_)){const K=J.bonds.indexOf(ie.index),Ne=ie.bonds.indexOf(J.index);K===-1&&Ne===-1?(J.bonds.push(ie.index),J.bondOrder.push(1),ie.bonds.push(J.index),ie.bondOrder.push(1)):K===-1?(J.bonds.push(ie.index),J.bondOrder.push(ie.bondOrder[Ne])):Ne===-1&&(ie.bonds.push(J.index),ie.bondOrder.push(J.bondOrder[K]))}}}}for(let C in S){const j=parseInt(C);for(let V in S[j]){const J=parseInt(V);for(let re in S[j][J]){const ie=parseInt(re),K=S[j][J][ie];for(let Ne=0;Ne<K.length;Ne++){const G=K[Ne];for(let se=Ne+1;se<K.length;se++){const He=K[se];(0,a.areConnected)(G,He,_)&&G.bonds.indexOf(He.index)==-1&&(G.bonds.push(He.index),G.bondOrder.push(1),He.bonds.push(G.index),He.bondOrder.push(1))}}for(let Ne=0;Ne<o.length;Ne++){const G=o[Ne];S[j+G.x]&&S[j+G.x][J+G.y]&&S[j+G.x][J+G.y][ie+G.z]&&A(K,S[j+G.x][J+G.y][ie+G.z])}}}}}},407:r=>{var e=(function(){for(var t,a=[],o=0;o<256;o++){t=o;for(var c=0;c<8;c++)t=1&t?3988292384^t>>>1:t>>>1;a[o]=t}return a})();r.exports=function(t,a,o,c){var d=e,p=c+o;t^=-1;for(var _=c;_<p;_++)t=t>>>8^d[255&(t^a[_])];return-1^t}},408:(r,e,t)=>{t.r(e),t.d(e,{areConnected:()=>c});var a=t(40);const o=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function c(d,p,_){if(_&&_.unboundCations&&(o.has(d.elem)||o.has(p.elem)))return!1;let S=(0,a.bondLength)(d.elem)+(0,a.bondLength)(p.elem);S+=.25,S*=S;let A=d.x-p.x;if(A*=A,A>S)return!1;let C=d.y-p.y;if(C*=C,C>S)return!1;let j=d.z-p.z;if(j*=j,j>S)return!1;const V=A+C+j;return!(isNaN(V)||V<.5||V>S||d.altLoc!==p.altLoc&&d.altLoc.trim()!==""&&p.altLoc.trim()!=="")}},471:function(r,e){(function(t){function a(Gp,i0,l0){for(var im=(Gp.byteLength,0),dm=l0.length;dm>im;im++){var pm=l0.charCodeAt(im);if(128>pm)Gp.setUint8(i0++,pm>>>0&127);else if(2048>pm)Gp.setUint8(i0++,pm>>>6&31|192),Gp.setUint8(i0++,pm>>>0&63|128);else if(65536>pm)Gp.setUint8(i0++,pm>>>12&15|224),Gp.setUint8(i0++,pm>>>6&63|128),Gp.setUint8(i0++,pm>>>0&63|128);else{if(!(1114112>pm))throw new Error("bad codepoint "+pm);Gp.setUint8(i0++,pm>>>18&7|240),Gp.setUint8(i0++,pm>>>12&63|128),Gp.setUint8(i0++,pm>>>6&63|128),Gp.setUint8(i0++,pm>>>0&63|128)}}}function o(Gp){for(var i0=0,l0=0,im=Gp.length;im>l0;l0++){var dm=Gp.charCodeAt(l0);if(128>dm)i0+=1;else if(2048>dm)i0+=2;else if(65536>dm)i0+=3;else{if(!(1114112>dm))throw new Error("bad codepoint "+dm);i0+=4}}return i0}function c(Gp,i0,l0){var im=typeof Gp;if(im==="string"){if(32>(dm=o(Gp)))return i0.setUint8(l0,160|dm),a(i0,l0+1,Gp),1+dm;if(256>dm)return i0.setUint8(l0,217),i0.setUint8(l0+1,dm),a(i0,l0+2,Gp),2+dm;if(65536>dm)return i0.setUint8(l0,218),i0.setUint16(l0+1,dm),a(i0,l0+3,Gp),3+dm;if(4294967296>dm)return i0.setUint8(l0,219),i0.setUint32(l0+1,dm),a(i0,l0+5,Gp),5+dm}if(Gp instanceof Uint8Array){var dm=Gp.byteLength,pm=new Uint8Array(i0.buffer);if(256>dm)return i0.setUint8(l0,196),i0.setUint8(l0+1,dm),pm.set(Gp,l0+2),2+dm;if(65536>dm)return i0.setUint8(l0,197),i0.setUint16(l0+1,dm),pm.set(Gp,l0+3),3+dm;if(4294967296>dm)return i0.setUint8(l0,198),i0.setUint32(l0+1,dm),pm.set(Gp,l0+5),5+dm}if(im==="number"){if(!isFinite(Gp))throw new Error("Number not finite: "+Gp);if(Math.floor(Gp)!==Gp)return i0.setUint8(l0,203),i0.setFloat64(l0+1,Gp),9;if(Gp>=0){if(128>Gp)return i0.setUint8(l0,Gp),1;if(256>Gp)return i0.setUint8(l0,204),i0.setUint8(l0+1,Gp),2;if(65536>Gp)return i0.setUint8(l0,205),i0.setUint16(l0+1,Gp),3;if(4294967296>Gp)return i0.setUint8(l0,206),i0.setUint32(l0+1,Gp),5;throw new Error("Number too big 0x"+Gp.toString(16))}if(Gp>=-32)return i0.setInt8(l0,Gp),1;if(Gp>=-128)return i0.setUint8(l0,208),i0.setInt8(l0+1,Gp),2;if(Gp>=-32768)return i0.setUint8(l0,209),i0.setInt16(l0+1,Gp),3;if(Gp>=-2147483648)return i0.setUint8(l0,210),i0.setInt32(l0+1,Gp),5;throw new Error("Number too small -0x"+(-Gp).toString(16).substr(1))}if(Gp===null)return i0.setUint8(l0,192),1;if(im==="boolean")return i0.setUint8(l0,Gp?195:194),1;if(im==="object"){var Dm=0,Gm=Array.isArray(Gp);if(Gm)dm=Gp.length;else{var qm=Object.keys(Gp);dm=qm.length}if(16>dm?(i0.setUint8(l0,dm|(Gm?144:128)),Dm=1):65536>dm?(i0.setUint8(l0,Gm?220:222),i0.setUint16(l0+1,dm),Dm=3):4294967296>dm&&(i0.setUint8(l0,Gm?221:223),i0.setUint32(l0+1,dm),Dm=5),Gm)for(var vm=0;dm>vm;vm++)Dm+=c(Gp[vm],i0,l0+Dm);else for(vm=0;dm>vm;vm++){var r0=qm[vm];Dm+=c(r0,i0,l0+Dm),Dm+=c(Gp[r0],i0,l0+Dm)}return Dm}throw new Error("Unknown type "+im)}function d(Gp){var i0=typeof Gp;if(i0==="string"){if(32>(l0=o(Gp)))return 1+l0;if(256>l0)return 2+l0;if(65536>l0)return 3+l0;if(4294967296>l0)return 5+l0}if(Gp instanceof Uint8Array){if(256>(l0=Gp.byteLength))return 2+l0;if(65536>l0)return 3+l0;if(4294967296>l0)return 5+l0}if(i0==="number"){if(Math.floor(Gp)!==Gp)return 9;if(Gp>=0){if(128>Gp)return 1;if(256>Gp)return 2;if(65536>Gp)return 3;if(4294967296>Gp)return 5;throw new Error("Number too big 0x"+Gp.toString(16))}if(Gp>=-32)return 1;if(Gp>=-128)return 2;if(Gp>=-32768)return 3;if(Gp>=-2147483648)return 5;throw new Error("Number too small -0x"+Gp.toString(16).substr(1))}if(i0==="boolean"||Gp===null)return 1;if(i0==="object"){var l0,im=0;if(Array.isArray(Gp)){l0=Gp.length;for(var dm=0;l0>dm;dm++)im+=d(Gp[dm])}else{var pm=Object.keys(Gp);for(l0=pm.length,dm=0;l0>dm;dm++){var Dm=pm[dm];im+=d(Dm)+d(Gp[Dm])}}if(16>l0)return 1+im;if(65536>l0)return 3+im;if(4294967296>l0)return 5+im;throw new Error("Array or object too long 0x"+l0.toString(16))}throw new Error("Unknown type "+i0)}function p(Gp){var i0=new ArrayBuffer(d(Gp));return c(Gp,new DataView(i0),0),new Uint8Array(i0)}function _(Gp,i0,l0){return i0?new Gp(i0.buffer,i0.byteOffset,i0.byteLength/(l0||1)):void 0}function S(Gp){return _(DataView,Gp)}function A(Gp){return _(Uint8Array,Gp)}function C(Gp){return _(Int8Array,Gp)}function j(Gp){return _(Int32Array,Gp,4)}function V(Gp){return _(Float32Array,Gp,4)}function J(Gp,i0){var l0=Gp.length/2;i0||(i0=new Int16Array(l0));for(var im=0,dm=0;l0>im;++im,dm+=2)i0[im]=Gp[dm]<<8^Gp[dm+1];return i0}function re(Gp,i0){var l0=Gp.length;i0||(i0=new Uint8Array(2*l0));for(var im=S(i0),dm=0;l0>dm;++dm)im.setInt16(2*dm,Gp[dm]);return A(i0)}function ie(Gp,i0){var l0=Gp.length/4;i0||(i0=new Int32Array(l0));for(var im=0,dm=0;l0>im;++im,dm+=4)i0[im]=Gp[dm]<<24^Gp[dm+1]<<16^Gp[dm+2]<<8^Gp[dm+3];return i0}function K(Gp,i0){var l0=Gp.length;i0||(i0=new Uint8Array(4*l0));for(var im=S(i0),dm=0;l0>dm;++dm)im.setInt32(4*dm,Gp[dm]);return A(i0)}function Ne(Gp,i0){var l0=Gp.length;i0||(i0=new Float32Array(l0/4));for(var im=S(i0),dm=S(Gp),pm=0,Dm=0,Gm=l0/4;Gm>pm;++pm,Dm+=4)im.setFloat32(Dm,dm.getFloat32(Dm),!0);return i0}function G(Gp,i0,l0){var im=Gp.length,dm=1/i0;l0||(l0=new Float32Array(im));for(var pm=0;im>pm;++pm)l0[pm]=Gp[pm]*dm;return l0}function se(Gp,i0,l0){var im=Gp.length;l0||(l0=new Int32Array(im));for(var dm=0;im>dm;++dm)l0[dm]=Math.round(Gp[dm]*i0);return l0}function He(Gp,i0){var l0,im;if(!i0){var dm=0;for(l0=0,im=Gp.length;im>l0;l0+=2)dm+=Gp[l0+1];i0=new Gp.constructor(dm)}var pm=0;for(l0=0,im=Gp.length;im>l0;l0+=2)for(var Dm=Gp[l0],Gm=Gp[l0+1],qm=0;Gm>qm;++qm)i0[pm]=Dm,++pm;return i0}function Fe(Gp){if(Gp.length===0)return new Int32Array;var i0,l0,im=2;for(i0=1,l0=Gp.length;l0>i0;++i0)Gp[i0-1]!==Gp[i0]&&(im+=2);var dm=new Int32Array(im),pm=0,Dm=1;for(i0=1,l0=Gp.length;l0>i0;++i0)Gp[i0-1]!==Gp[i0]?(dm[pm]=Gp[i0-1],dm[pm+1]=Dm,Dm=1,pm+=2):++Dm;return dm[pm]=Gp[Gp.length-1],dm[pm+1]=Dm,dm}function Xe(Gp,i0){var l0=Gp.length;i0||(i0=new Gp.constructor(l0)),l0&&(i0[0]=Gp[0]);for(var im=1;l0>im;++im)i0[im]=Gp[im]+i0[im-1];return i0}function be(Gp,i0){var l0=Gp.length;i0||(i0=new Gp.constructor(l0)),i0[0]=Gp[0];for(var im=1;l0>im;++im)i0[im]=Gp[im]-Gp[im-1];return i0}function ta(Gp,i0){var l0,im,dm=Gp instanceof Int8Array?127:32767,pm=-dm-1,Dm=Gp.length;if(!i0){var Gm=0;for(l0=0;Dm>l0;++l0)Gp[l0]<dm&&Gp[l0]>pm&&++Gm;i0=new Int32Array(Gm)}for(l0=0,im=0;Dm>l0;){for(var qm=0;Gp[l0]===dm||Gp[l0]===pm;)qm+=Gp[l0],++l0;qm+=Gp[l0],++l0,i0[im]=qm,++im}return i0}function pn(Gp,i0){var l0,im=32767,dm=-im-1,pm=Gp.length,Dm=0;for(l0=0;pm>l0;++l0)(vm=Gp[l0])===0?++Dm:vm>0?(Dm+=Math.ceil(vm/im),vm%im===0&&(Dm+=1)):(Dm+=Math.ceil(vm/dm),vm%dm===0&&(Dm+=1));var Gm=new Int16Array(Dm),qm=0;for(l0=0;pm>l0;++l0){var vm;if((vm=Gp[l0])>=0)for(;vm>=im;)Gm[qm]=im,++qm,vm-=im;else for(;dm>=vm;)Gm[qm]=dm,++qm,vm-=dm;Gm[qm]=vm,++qm}return Gm}function mr(Gp,i0){return Xe(He(Gp),i0)}function bp(Gp){return Fe(be(Gp))}function Sp(Gp,i0,l0){return G(He(Gp,j(l0)),i0,l0)}function _r(Gp,i0){return Fe(se(Gp,i0))}function xs(Gp,i0,l0){return G(Xe(Gp,j(l0)),i0,l0)}function ne(Gp,i0,l0){return be(se(Gp,i0),l0)}function zl(Gp,i0,l0){return G(ta(Gp,j(l0)),i0,l0)}function Hl(Gp,i0,l0){var im=ta(Gp,j(l0));return xs(im,i0,V(im))}function pr(Gp,i0,l0){return pn(ne(Gp,i0))}function Hp(Gp){var i0=S(Gp),l0=i0.getInt32(0),im=i0.getInt32(4),dm=Gp.subarray(8,12);return[l0,Gp=Gp.subarray(12),im,dm]}function Gl(Gp,i0,l0,im){var dm=new ArrayBuffer(12+im.byteLength),pm=new Uint8Array(dm),Dm=new DataView(dm);return Dm.setInt32(0,Gp),Dm.setInt32(4,i0),l0&&pm.set(l0,8),pm.set(im,12),pm}function Ip(Gp){return Gl(2,Gp.length,void 0,A(Gp))}function qp(Gp){return Gl(4,Gp.length,void 0,K(Gp))}function ci(Gp,i0){return Gl(5,Gp.length/i0,K([i0]),A(Gp))}function Ep(Gp){return Gl(6,Gp.length,void 0,K(Fe(Gp)))}function o0(Gp){return Gl(8,Gp.length,void 0,K(bp(Gp)))}function w0(Gp,i0){return Gl(9,Gp.length,K([i0]),K(_r(Gp,i0)))}function a0(Gp,i0){return Gl(10,Gp.length,K([i0]),re(pr(Gp,i0)))}function P0(Gp){var i0={};return S1.forEach(function(l0){Gp[l0]!==void 0&&(i0[l0]=Gp[l0])}),Gp.bondAtomList&&(i0.bondAtomList=qp(Gp.bondAtomList)),Gp.bondOrderList&&(i0.bondOrderList=Ip(Gp.bondOrderList)),i0.xCoordList=a0(Gp.xCoordList,1e3),i0.yCoordList=a0(Gp.yCoordList,1e3),i0.zCoordList=a0(Gp.zCoordList,1e3),Gp.bFactorList&&(i0.bFactorList=a0(Gp.bFactorList,100)),Gp.atomIdList&&(i0.atomIdList=o0(Gp.atomIdList)),Gp.altLocList&&(i0.altLocList=Ep(Gp.altLocList)),Gp.occupancyList&&(i0.occupancyList=w0(Gp.occupancyList,100)),i0.groupIdList=o0(Gp.groupIdList),i0.groupTypeList=qp(Gp.groupTypeList),Gp.secStructList&&(i0.secStructList=Ip(Gp.secStructList)),Gp.insCodeList&&(i0.insCodeList=Ep(Gp.insCodeList)),Gp.sequenceIndexList&&(i0.sequenceIndexList=o0(Gp.sequenceIndexList)),i0.chainIdList=ci(Gp.chainIdList,4),Gp.chainNameList&&(i0.chainNameList=ci(Gp.chainNameList,4)),i0}function am(Gp){function i0(qm){for(var vm={},r0=0;qm>r0;r0++)vm[pm()]=pm();return vm}function l0(qm){var vm=Gp.subarray(Dm,Dm+qm);return Dm+=qm,vm}function im(qm){var vm=Gp.subarray(Dm,Dm+qm);Dm+=qm;var r0=65535;if(qm>r0){for(var e1=[],_1=0;_1<vm.length;_1+=r0)e1.push(String.fromCharCode.apply(null,vm.subarray(_1,_1+r0)));return e1.join("")}return String.fromCharCode.apply(null,vm)}function dm(qm){for(var vm=new Array(qm),r0=0;qm>r0;r0++)vm[r0]=pm();return vm}function pm(){var qm,vm,r0=Gp[Dm];if(!(128&r0))return Dm++,r0;if((240&r0)==128)return Dm++,i0(vm=15&r0);if((240&r0)==144)return Dm++,dm(vm=15&r0);if((224&r0)==160)return Dm++,im(vm=31&r0);if(!(224&~r0))return qm=Gm.getInt8(Dm),Dm++,qm;switch(r0){case 192:return Dm++,null;case 194:return Dm++,!1;case 195:return Dm++,!0;case 196:return vm=Gm.getUint8(Dm+1),Dm+=2,l0(vm);case 197:return vm=Gm.getUint16(Dm+1),Dm+=3,l0(vm);case 198:return vm=Gm.getUint32(Dm+1),Dm+=5,l0(vm);case 202:return qm=Gm.getFloat32(Dm+1),Dm+=5,qm;case 203:return qm=Gm.getFloat64(Dm+1),Dm+=9,qm;case 204:return qm=Gp[Dm+1],Dm+=2,qm;case 205:return qm=Gm.getUint16(Dm+1),Dm+=3,qm;case 206:return qm=Gm.getUint32(Dm+1),Dm+=5,qm;case 208:return qm=Gm.getInt8(Dm+1),Dm+=2,qm;case 209:return qm=Gm.getInt16(Dm+1),Dm+=3,qm;case 210:return qm=Gm.getInt32(Dm+1),Dm+=5,qm;case 217:return vm=Gm.getUint8(Dm+1),Dm+=2,im(vm);case 218:return vm=Gm.getUint16(Dm+1),Dm+=3,im(vm);case 219:return vm=Gm.getUint32(Dm+1),Dm+=5,im(vm);case 220:return vm=Gm.getUint16(Dm+1),Dm+=3,dm(vm);case 221:return vm=Gm.getUint32(Dm+1),Dm+=5,dm(vm);case 222:return vm=Gm.getUint16(Dm+1),Dm+=3,i0(vm);case 223:return vm=Gm.getUint32(Dm+1),Dm+=5,i0(vm)}throw new Error("Unknown type 0x"+r0.toString(16))}var Dm=0,Gm=new DataView(Gp.buffer);return pm()}function sm(Gp,i0,l0,im){switch(Gp){case 1:return Ne(i0);case 2:return C(i0);case 3:return J(i0);case 4:return ie(i0);case 5:return A(i0);case 6:return He(ie(i0),new Uint8Array(l0));case 7:return He(ie(i0));case 8:return mr(ie(i0));case 9:return Sp(ie(i0),ie(im)[0]);case 10:return Hl(J(i0),ie(im)[0]);case 11:return G(J(i0),ie(im)[0]);case 12:return zl(J(i0),ie(im)[0]);case 13:return zl(C(i0),ie(im)[0]);case 14:return ta(J(i0));case 15:return ta(C(i0))}}function C0(Gp,i0){var l0=(i0=i0||{}).ignoreFields,im={};return zp.forEach(function(dm){var pm=!!l0&&l0.indexOf(dm)!==-1,Dm=Gp[dm];pm||Dm===void 0||(Dm instanceof Uint8Array?im[dm]=sm.apply(null,Hp(Dm)):im[dm]=Dm)}),im}function Fm(Gp){return String.fromCharCode.apply(null,Gp).replace(/\0/g,"")}function Zm(Gp,i0,l0){var im,dm,pm,Dm,Gm,qm,vm=(l0=l0||{}).firstModelOnly,r0=i0.onModel,e1=i0.onChain,_1=i0.onGroup,j1=i0.onAtom,q0=i0.onBond,d1=0,tm=0,o1=0,jm=0,l1=0,gg=-1,Jg=Gp.chainNameList,Dg=Gp.secStructList,Eg=Gp.insCodeList,ev=Gp.sequenceIndexList,pv=Gp.atomIdList,sv=Gp.bFactorList,kv=Gp.altLocList,Zv=Gp.occupancyList,ry=Gp.bondAtomList,oy=Gp.bondOrderList;for(im=0,dm=Gp.chainsPerModel.length;dm>im&&!(vm&&d1>0);++im){var Hv=Gp.chainsPerModel[d1];for(r0&&r0({chainCount:Hv,modelIndex:d1}),pm=0;Hv>pm;++pm){var vv=Gp.groupsPerChain[tm];if(e1){var ag=Fm(Gp.chainIdList.subarray(4*tm,4*tm+4)),_v=null;Jg&&(_v=Fm(Jg.subarray(4*tm,4*tm+4))),e1({groupCount:vv,chainIndex:tm,modelIndex:d1,chainId:ag,chainName:_v})}for(Dm=0;vv>Dm;++Dm){var Mv=Gp.groupList[Gp.groupTypeList[o1]],c0=Mv.atomNameList.length;if(_1){var F0=null;Dg&&(F0=Dg[o1]);var Z=null;Gp.insCodeList&&(Z=String.fromCharCode(Eg[o1]));var Fl=null;ev&&(Fl=ev[o1]),_1({atomCount:c0,groupIndex:o1,chainIndex:tm,modelIndex:d1,groupId:Gp.groupIdList[o1],groupType:Gp.groupTypeList[o1],groupName:Mv.groupName,singleLetterCode:Mv.singleLetterCode,chemCompType:Mv.chemCompType,secStruct:F0,insCode:Z,sequenceIndex:Fl})}for(Gm=0;c0>Gm;++Gm){if(j1){var Wl=null;pv&&(Wl=pv[jm]);var x0=null;sv&&(x0=sv[jm]);var S0=null;kv&&(S0=String.fromCharCode(kv[jm]));var Mm=null;Zv&&(Mm=Zv[jm]),j1({atomIndex:jm,groupIndex:o1,chainIndex:tm,modelIndex:d1,atomId:Wl,element:Mv.elementList[Gm],atomName:Mv.atomNameList[Gm],formalCharge:Mv.formalChargeList[Gm],xCoord:Gp.xCoordList[jm],yCoord:Gp.yCoordList[jm],zCoord:Gp.zCoordList[jm],bFactor:x0,altLoc:S0,occupancy:Mm})}jm+=1}if(q0){var km=Mv.bondAtomList;for(Gm=0,qm=Mv.bondOrderList.length;qm>Gm;++Gm)q0({atomIndex1:jm-c0+km[2*Gm],atomIndex2:jm-c0+km[2*Gm+1],bondOrder:Mv.bondOrderList[Gm]})}o1+=1}tm+=1}if(l1=gg+1,gg=jm-1,q0&&ry)for(Gm=0,qm=ry.length;qm>Gm;Gm+=2){var wm=ry[Gm],Xm=ry[Gm+1];(wm>=l1&&gg>=wm||Xm>=l1&&gg>=Xm)&&q0({atomIndex1:wm,atomIndex2:Xm,bondOrder:oy?oy[Gm/2]:null})}d1+=1}}function p1(Gp){return p(P0(Gp))}function A1(Gp,i0){return Gp instanceof ArrayBuffer&&(Gp=new Uint8Array(Gp)),C0(Gp instanceof Uint8Array?am(Gp):Gp,i0)}function T1(Gp,i0,l0,im){function dm(){try{var Dm=A1(pm.response);l0(Dm)}catch(Gm){im(Gm)}}var pm=new XMLHttpRequest;pm.addEventListener("load",dm,!0),pm.addEventListener("error",im,!0),pm.responseType="arraybuffer",pm.open("GET",i0+Gp.toUpperCase()),pm.send()}function Tm(Gp,i0,l0){T1(Gp,i1,i0,l0)}function x1(Gp,i0,l0){T1(Gp,r1,i0,l0)}var S1=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],p0=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],zp=S1.concat(p0),om="v1.0.1",bm="//mmtf.rcsb.org/v1.0/",i1=bm+"full/",r1=bm+"reduced/";t.encode=p1,t.decode=A1,t.traverse=Zm,t.fetch=Tm,t.fetchReduced=x1,t.version=om,t.fetchUrl=i1,t.fetchReducedUrl=r1,t.encodeMsgpack=p,t.encodeMmtf=P0,t.decodeMsgpack=am,t.decodeMmtf=C0})(e)},529:(r,e,t)=>{t.r(e),t.d(e,{Matrix3:()=>re,Matrix4:()=>V,Quaternion:()=>a,Ray:()=>ie,Vector2:()=>o,Vector3:()=>J,clamp:()=>c,conversionMatrix3:()=>K,degToRad:()=>p});class a{constructor(G,se,He,Fe){this.x=G||0,this.y=se||0,this.z=He||0,this.w=Fe!==void 0?Fe:1}set(G,se,He,Fe){return this.x=G,this.y=se,this.z=He,this.w=Fe,this}copy(G){return this.x=G.x,this.y=G.y,this.z=G.z,this.w=G.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let G=this.length();return G===0?(this.x=0,this.y=0,this.z=0,this.w=1):(G=1/G,this.x*=G,this.y*=G,this.z*=G,this.w*=G),this}multiply(G){return this.multiplyQuaternions(this,G)}multiplyScalar(G){return this.x*=G,this.y*=G,this.z*=G,this.w*=G,this}multiplyQuaternions(G,se){const He=G.x,Fe=G.y,Xe=G.z,be=G.w,ta=se.x,pn=se.y,mr=se.z,bp=se.w;return this.x=He*bp+be*ta+Fe*mr-Xe*pn,this.y=Fe*bp+be*pn+Xe*ta-He*mr,this.z=Xe*bp+be*mr+He*pn-Fe*ta,this.w=be*bp-He*ta-Fe*pn-Xe*mr,this}sub(G){return this.x-=G.x,this.y-=G.y,this.z-=G.z,this.w-=G.w,this}clone(){return new a(this.x,this.y,this.z,this.w)}setFromEuler(G){const se=Math.cos(G.x/2),He=Math.cos(G.y/2),Fe=Math.cos(G.z/2),Xe=Math.sin(G.x/2),be=Math.sin(G.y/2),ta=Math.sin(G.z/2);return this.x=Xe*He*Fe+se*be*ta,this.y=se*be*Fe-Xe*He*ta,this.z=se*He*ta+Xe*be*Fe,this.w=se*He*Fe-Xe*be*ta,this}}class o{constructor(G,se){this.x=G||0,this.y=se||0}set(G,se){return this.x=G,this.y=se,this}subVectors(G,se){return this.x=G.x-se.x,this.y=G.y-se.y,this}copy(G){return this.x=G.x,this.y=G.y,this}clone(){return new o(this.x,this.y)}}function c(Ne,G,se){return Math.min(Math.max(Ne,G),se)}const d=Math.PI/180;function p(Ne){return Ne*d}var _,S,A,C,j;class V{constructor(G=1,se=0,He=0,Fe=0,Xe=0,be=1,ta=0,pn=0,mr=0,bp=0,Sp=1,_r=0,xs=0,ne=0,zl=0,Hl=1){G!==void 0&&typeof G!="number"?this.elements=new Float32Array(G):(this.elements=new Float32Array(16),this.elements[0]=G,this.elements[4]=se,this.elements[8]=He,this.elements[12]=Fe,this.elements[1]=Xe,this.elements[5]=be,this.elements[9]=ta,this.elements[13]=pn,this.elements[2]=mr,this.elements[6]=bp,this.elements[10]=Sp,this.elements[14]=_r,this.elements[3]=xs,this.elements[7]=ne,this.elements[11]=zl,this.elements[15]=Hl)}makeScale(G,se,He){throw new Error("Method not implemented.")}set(G,se,He,Fe,Xe,be,ta,pn,mr,bp,Sp,_r,xs,ne,zl,Hl){const pr=this.elements;return pr[0]=G,pr[4]=se,pr[8]=He,pr[12]=Fe,pr[1]=Xe,pr[5]=be,pr[9]=ta,pr[13]=pn,pr[2]=mr,pr[6]=bp,pr[10]=Sp,pr[14]=_r,pr[3]=xs,pr[7]=ne,pr[11]=zl,pr[15]=Hl,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(G){const se=G.elements;return this.set(se[0],se[4],se[8],se[12],se[1],se[5],se[9],se[13],se[2],se[6],se[10],se[14],se[3],se[7],se[11],se[15]),this}matrix3FromTopLeft(){const G=this.elements;return new re(G[0],G[4],G[8],G[1],G[5],G[9],G[2],G[6],G[10])}setRotationFromEuler(G,se){const He=this.elements,{x:Fe,y:Xe,z:be}=G,ta=Math.cos(Fe),pn=Math.sin(Fe),mr=Math.cos(Xe),bp=Math.sin(Xe),Sp=Math.cos(be),_r=Math.sin(be);if(se===void 0||se==="XYZ"){const xs=ta*Sp,ne=ta*_r,zl=pn*Sp,Hl=pn*_r;He[0]=mr*Sp,He[4]=-mr*_r,He[8]=bp,He[1]=ne+zl*bp,He[5]=xs-Hl*bp,He[9]=-pn*mr,He[2]=Hl-xs*bp,He[6]=zl+ne*bp,He[10]=ta*mr}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${se}`);return this}setRotationFromQuaternion(G){const se=this.elements,{x:He,y:Fe,z:Xe,w:be}=G,ta=He+He,pn=Fe+Fe,mr=Xe+Xe,bp=He*ta,Sp=He*pn,_r=He*mr,xs=Fe*pn,ne=Fe*mr,zl=Xe*mr,Hl=be*ta,pr=be*pn,Hp=be*mr;return se[0]=1-(xs+zl),se[4]=Sp-Hp,se[8]=_r+pr,se[1]=Sp+Hp,se[5]=1-(bp+zl),se[9]=ne-Hl,se[2]=_r-pr,se[6]=ne+Hl,se[10]=1-(bp+xs),this}multiplyMatrices(G,se){const He=G.elements,Fe=se.elements,Xe=this.elements,be=He[0],ta=He[4],pn=He[8],mr=He[12],bp=He[1],Sp=He[5],_r=He[9],xs=He[13],ne=He[2],zl=He[6],Hl=He[10],pr=He[14],Hp=He[3],Gl=He[7],Ip=He[11],qp=He[15],ci=Fe[0],Ep=Fe[4],o0=Fe[8],w0=Fe[12],a0=Fe[1],P0=Fe[5],am=Fe[9],sm=Fe[13],C0=Fe[2],Fm=Fe[6],Zm=Fe[10],p1=Fe[14],A1=Fe[3],T1=Fe[7],Tm=Fe[11],x1=Fe[15];return Xe[0]=be*ci+ta*a0+pn*C0+mr*A1,Xe[4]=be*Ep+ta*P0+pn*Fm+mr*T1,Xe[8]=be*o0+ta*am+pn*Zm+mr*Tm,Xe[12]=be*w0+ta*sm+pn*p1+mr*x1,Xe[1]=bp*ci+Sp*a0+_r*C0+xs*A1,Xe[5]=bp*Ep+Sp*P0+_r*Fm+xs*T1,Xe[9]=bp*o0+Sp*am+_r*Zm+xs*Tm,Xe[13]=bp*w0+Sp*sm+_r*p1+xs*x1,Xe[2]=ne*ci+zl*a0+Hl*C0+pr*A1,Xe[6]=ne*Ep+zl*P0+Hl*Fm+pr*T1,Xe[10]=ne*o0+zl*am+Hl*Zm+pr*Tm,Xe[14]=ne*w0+zl*sm+Hl*p1+pr*x1,Xe[3]=Hp*ci+Gl*a0+Ip*C0+qp*A1,Xe[7]=Hp*Ep+Gl*P0+Ip*Fm+qp*T1,Xe[11]=Hp*o0+Gl*am+Ip*Zm+qp*Tm,Xe[15]=Hp*w0+Gl*sm+Ip*p1+qp*x1,this}multiplyScalar(G){const se=this.elements;return se[0]*=G,se[4]*=G,se[8]*=G,se[12]*=G,se[1]*=G,se[5]*=G,se[9]*=G,se[13]*=G,se[2]*=G,se[6]*=G,se[10]*=G,se[14]*=G,se[3]*=G,se[7]*=G,se[11]*=G,se[15]*=G,this}makeTranslation(G,se,He){return this.set(1,0,0,G,0,1,0,se,0,0,1,He,0,0,0,1),this}snap(G){const se=Math.pow(10,4),He=this.elements;for(let Fe=0;Fe<16;Fe++){const Xe=Math.round(He[Fe]);Xe===Math.round(He[Fe]*se)/se&&(He[Fe]=Xe)}return this}transpose(){const G=this.elements;let se;return se=G[1],G[1]=G[4],G[4]=se,se=G[2],G[2]=G[8],G[8]=se,se=G[6],G[6]=G[9],G[9]=se,se=G[3],G[3]=G[12],G[12]=se,se=G[7],G[7]=G[13],G[13]=se,se=G[11],G[11]=G[14],G[14]=se,this}setPosition(G){const se=this.elements;return se[12]=G.x,se[13]=G.y,se[14]=G.z,this}translate(G){const se=this.elements;return se[12]+=G.x,se[13]+=G.y,se[14]+=G.z,this}getInverse(G,se){const He=this.elements,Fe=G.elements,Xe=Fe[0],be=Fe[4],ta=Fe[8],pn=Fe[12],mr=Fe[1],bp=Fe[5],Sp=Fe[9],_r=Fe[13],xs=Fe[2],ne=Fe[6],zl=Fe[10],Hl=Fe[14],pr=Fe[3],Hp=Fe[7],Gl=Fe[11],Ip=Fe[15];He[0]=Sp*Hl*Hp-_r*zl*Hp+_r*ne*Gl-bp*Hl*Gl-Sp*ne*Ip+bp*zl*Ip,He[4]=pn*zl*Hp-ta*Hl*Hp-pn*ne*Gl+be*Hl*Gl+ta*ne*Ip-be*zl*Ip,He[8]=ta*_r*Hp-pn*Sp*Hp+pn*bp*Gl-be*_r*Gl-ta*bp*Ip+be*Sp*Ip,He[12]=pn*Sp*ne-ta*_r*ne-pn*bp*zl+be*_r*zl+ta*bp*Hl-be*Sp*Hl,He[1]=_r*zl*pr-Sp*Hl*pr-_r*xs*Gl+mr*Hl*Gl+Sp*xs*Ip-mr*zl*Ip,He[5]=ta*Hl*pr-pn*zl*pr+pn*xs*Gl-Xe*Hl*Gl-ta*xs*Ip+Xe*zl*Ip,He[9]=pn*Sp*pr-ta*_r*pr-pn*mr*Gl+Xe*_r*Gl+ta*mr*Ip-Xe*Sp*Ip,He[13]=ta*_r*xs-pn*Sp*xs+pn*mr*zl-Xe*_r*zl-ta*mr*Hl+Xe*Sp*Hl,He[2]=bp*Hl*pr-_r*ne*pr+_r*xs*Hp-mr*Hl*Hp-bp*xs*Ip+mr*ne*Ip,He[6]=pn*ne*pr-be*Hl*pr-pn*xs*Hp+Xe*Hl*Hp+be*xs*Ip-Xe*ne*Ip,He[10]=be*_r*pr-pn*bp*pr+pn*mr*Hp-Xe*_r*Hp-be*mr*Ip+Xe*bp*Ip,He[14]=pn*bp*xs-be*_r*xs-pn*mr*ne+Xe*_r*ne+be*mr*Hl-Xe*bp*Hl,He[3]=Sp*ne*pr-bp*zl*pr-Sp*xs*Hp+mr*zl*Hp+bp*xs*Gl-mr*ne*Gl,He[7]=be*zl*pr-ta*ne*pr+ta*xs*Hp-Xe*zl*Hp-be*xs*Gl+Xe*ne*Gl,He[11]=ta*bp*pr-be*Sp*pr-ta*mr*Hp+Xe*Sp*Hp+be*mr*Gl-Xe*bp*Gl,He[15]=be*Sp*xs-ta*bp*xs+ta*mr*ne-Xe*Sp*ne-be*mr*zl+Xe*bp*zl;const qp=Xe*He[0]+mr*He[4]+xs*He[8]+pr*He[12];if(qp===0){const ci="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(se)throw new Error(ci);return console.warn(ci),this.identity(),this}return this.multiplyScalar(1/qp),this}isReflected(){const G=this.elements,se=G[0],He=G[4],Fe=G[8],Xe=G[1],be=G[5],ta=G[9],pn=G[2],mr=G[6],bp=G[10];return se*be*bp+Xe*mr*Fe+pn*He*ta-pn*be*Fe-Xe*He*bp-se*mr*ta<0}scale(G){const se=this.elements,{x:He}=G,{y:Fe}=G,{z:Xe}=G;return se[0]*=He,se[4]*=Fe,se[8]*=Xe,se[1]*=He,se[5]*=Fe,se[9]*=Xe,se[2]*=He,se[6]*=Fe,se[10]*=Xe,se[3]*=He,se[7]*=Fe,se[11]*=Xe,this}getMaxScaleOnAxis(){const G=this.elements,se=G[0]*G[0]+G[1]*G[1]+G[2]*G[2],He=G[4]*G[4]+G[5]*G[5]+G[6]*G[6],Fe=G[8]*G[8]+G[9]*G[9]+G[10]*G[10];return Math.sqrt(Math.max(se,Math.max(He,Fe)))}makeFrustum(G,se,He,Fe,Xe,be){const ta=this.elements,pn=2*Xe/(se-G),mr=2*Xe/(Fe-He),bp=(se+G)/(se-G),Sp=(Fe+He)/(Fe-He),_r=-(be+Xe)/(be-Xe),xs=-2*be*Xe/(be-Xe);return ta[0]=pn,ta[4]=0,ta[8]=bp,ta[12]=0,ta[1]=0,ta[5]=mr,ta[9]=Sp,ta[13]=0,ta[2]=0,ta[6]=0,ta[10]=_r,ta[14]=xs,ta[3]=0,ta[7]=0,ta[11]=-1,ta[15]=0,this}makePerspective(G,se,He,Fe){const Xe=He*Math.tan(p(.5*G)),be=-Xe,ta=be*se,pn=Xe*se;return this.makeFrustum(ta,pn,be,Xe,He,Fe)}makeOrthographic(G,se,He,Fe,Xe,be){const ta=this.elements,pn=1/(se-G),mr=1/(He-Fe),bp=1/(be-Xe),Sp=(se+G)*pn,_r=(He+Fe)*mr,xs=(be+Xe)*bp;return ta[0]=2*pn,ta[4]=0,ta[8]=0,ta[12]=-Sp,ta[1]=0,ta[5]=2*mr,ta[9]=0,ta[13]=-_r,ta[2]=0,ta[6]=0,ta[10]=-2*bp,ta[14]=-xs,ta[3]=0,ta[7]=0,ta[11]=0,ta[15]=1,this}isEqual(G){const se=G.elements,He=this.elements;return He[0]===se[0]&&He[4]===se[4]&&He[8]===se[8]&&He[12]===se[12]&&He[1]===se[1]&&He[5]===se[5]&&He[9]===se[9]&&He[13]===se[13]&&He[2]===se[2]&&He[6]===se[6]&&He[10]===se[10]&&He[14]===se[14]&&He[3]===se[3]&&He[7]===se[7]&&He[11]===se[11]&&He[15]===se[15]}clone(){const G=this.elements;return new V(G[0],G[4],G[8],G[12],G[1],G[5],G[9],G[13],G[2],G[6],G[10],G[14],G[3],G[7],G[11],G[15])}isIdentity(){const G=this.elements;return G[0]===1&&G[4]===0&&G[8]===0&&G[12]===0&&G[1]===0&&G[5]===1&&G[9]===0&&G[13]===0&&G[2]===0&&G[6]===0&&G[10]===1&&G[14]===0&&G[3]===0&&G[7]===0&&G[11]===0&&G[15]===1}isNearlyIdentity(G){return this.clone().snap(G).isIdentity()}getScale(G){const se=this.elements;return G=G||new J,A.set(se[0],se[1],se[2]),C.set(se[4],se[5],se[6]),j.set(se[8],se[9],se[10]),G.x=A.length(),G.y=C.length(),G.z=j.length(),G}lookAt(G,se,He){const Fe=this.elements;return j.subVectors(G,se).normalize(),j.length()===0&&(j.z=1),A.crossVectors(He,j).normalize(),A.length()===0&&(j.x+=1e-4,A.crossVectors(He,j).normalize()),C.crossVectors(j,A),Fe[0]=A.x,Fe[4]=C.x,Fe[8]=j.x,Fe[1]=A.y,Fe[5]=C.y,Fe[9]=j.y,Fe[2]=A.z,Fe[6]=C.z,Fe[10]=j.z,this}compose(G,se,He){const Fe=this.elements;return _.identity(),_.setRotationFromQuaternion(se),S.makeScale(He.x,He.y,He.z),this.multiplyMatrices(_,S),Fe[12]=G.x,Fe[13]=G.y,Fe[14]=G.z,this}}_=new V,S=new V;class J{constructor(G,se,He){this.x=G||0,this.y=se||0,this.z=He||0,this.atomid=void 0}set(G,se,He){return this.x=G,this.y=se,this.z=He,this}copy(G){return this.x=G.x,this.y=G.y,this.z=G.z,this}add(G){return this.x+=G.x,this.y+=G.y,this.z+=G.z,this}addVectors(G,se){return this.x=G.x+se.x,this.y=G.y+se.y,this.z=G.z+se.z,this}multiplyVectors(G,se){return this.x=G.x*se.x,this.y=G.y*se.y,this.z=G.z*se.z,this}sub(G){return this.x-=G.x,this.y-=G.y,this.z-=G.z,this}subVectors(G,se){return this.x=G.x-se.x,this.y=G.y-se.y,this.z=G.z-se.z,this}multiplyScalar(G){return this.x*=G,this.y*=G,this.z*=G,this}divideScalar(G){return G!==0?(this.x/=G,this.y/=G,this.z/=G):(this.x=0,this.y=0,this.z=0),this}max(G){return this.x=Math.max(this.x,G.x),this.y=Math.max(this.y,G.y),this.z=Math.max(this.z,G.z),this}min(G){return this.x=Math.min(this.x,G.x),this.y=Math.min(this.y,G.y),this.z=Math.min(this.z,G.z),this}distanceTo(G){return Math.sqrt(this.distanceToSquared(G))}distanceToSquared(G){const se=this.x-G.x,He=this.y-G.y,Fe=this.z-G.z;return se*se+He*He+Fe*Fe}applyMatrix3(G){const{x:se}=this,{y:He}=this,{z:Fe}=this,Xe=G.elements;return this.x=Xe[0]*se+Xe[3]*He+Xe[6]*Fe,this.y=Xe[1]*se+Xe[4]*He+Xe[7]*Fe,this.z=Xe[2]*se+Xe[5]*He+Xe[8]*Fe,this}applyMatrix4(G){const{x:se}=this,{y:He}=this,{z:Fe}=this,Xe=G.elements;return this.x=Xe[0]*se+Xe[4]*He+Xe[8]*Fe+Xe[12],this.y=Xe[1]*se+Xe[5]*He+Xe[9]*Fe+Xe[13],this.z=Xe[2]*se+Xe[6]*He+Xe[10]*Fe+Xe[14],this}applyProjection(G){const{x:se}=this,{y:He}=this,{z:Fe}=this,Xe=G.elements,be=Xe[3]*se+Xe[7]*He+Xe[11]*Fe+Xe[15];return this.x=(Xe[0]*se+Xe[4]*He+Xe[8]*Fe+Xe[12])/be,this.y=(Xe[1]*se+Xe[5]*He+Xe[9]*Fe+Xe[13])/be,this.z=(Xe[2]*se+Xe[6]*He+Xe[10]*Fe+Xe[14])/be,this}applyQuaternion(G){const{x:se}=this,{y:He}=this,{z:Fe}=this,Xe=G.x,be=G.y,ta=G.z,pn=G.w,mr={};mr.x=2*(He*ta-Fe*be),mr.y=2*(Fe*Xe-se*ta),mr.z=2*(se*be-He*Xe);const bp={};return bp.x=mr.y*ta-mr.z*be,bp.y=mr.z*Xe-mr.x*ta,bp.z=mr.x*be-mr.y*Xe,this.x=se+pn*mr.x+bp.x,this.y=He+pn*mr.y+bp.y,this.z=Fe+pn*mr.z+bp.z,this}negate(){return this.multiplyScalar(-1)}dot(G){return this.x*G.x+this.y*G.y+this.z*G.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(G){const{x:se}=this,{y:He}=this,{z:Fe}=this;return this.x=He*G.z-Fe*G.y,this.y=Fe*G.x-se*G.z,this.z=se*G.y-He*G.x,this}crossVectors(G,se){return this.x=G.y*se.z-G.z*se.y,this.y=G.z*se.x-G.x*se.z,this.z=G.x*se.y-G.y*se.x,this}equals(G){return this.x==G.x&&this.y==G.y&&this.z==G.z}getPositionFromMatrix(G){return this.x=G.elements[12],this.y=G.elements[13],this.z=G.elements[14],this}setEulerFromRotationMatrix(G,se){const He=G.elements,Fe=He[0],Xe=He[4],be=He[8],ta=He[5],pn=He[9],mr=He[6],bp=He[10];return se===void 0||se==="XYZ"?(this.y=Math.asin(c(be,-1,1)),Math.abs(be)<.99999?(this.x=Math.atan2(-pn,bp),this.z=Math.atan2(-Xe,Fe)):(this.x=Math.atan2(mr,ta),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${se}`),this}rotateAboutVector(G,se){G.normalize();const He=Math.cos(se),Fe=Math.sin(se),Xe=this.clone().multiplyScalar(He),be=G.clone().cross(this).multiplyScalar(Fe),ta=G.clone().multiplyScalar(G.clone().dot(this)).multiplyScalar(1-He),pn=Xe.add(be).add(ta);return this.x=pn.x,this.y=pn.y,this.z=pn.z,this}setFromMatrixPosition(G){const se=G.elements;return this.x=se[12],this.y=se[13],this.z=se[14],this}transformDirection(G){const{x:se}=this,{y:He}=this,{z:Fe}=this,Xe=G.elements;return this.x=Xe[0]*se+Xe[4]*He+Xe[8]*Fe,this.y=Xe[1]*se+Xe[5]*He+Xe[9]*Fe,this.z=Xe[2]*se+Xe[6]*He+Xe[10]*Fe,this.normalize()}clone(){return new J(this.x,this.y,this.z)}unproject(G){const se=_;return se.multiplyMatrices(G.matrixWorld,se.getInverse(G.projectionMatrix)),this.applyMatrix4(se)}}A=new J,C=new J,j=new J;class re{constructor(G=1,se=0,He=0,Fe=0,Xe=1,be=0,ta=0,pn=0,mr=1){this.elements=new Float32Array(9),this.set(G,se,He,Fe,Xe,be,ta,pn,mr)}set(G,se,He,Fe,Xe,be,ta,pn,mr){const bp=this.elements;return bp[0]=G,bp[3]=se,bp[6]=He,bp[1]=Fe,bp[4]=Xe,bp[7]=be,bp[2]=ta,bp[5]=pn,bp[8]=mr,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(G){const se=G.elements;this.set(se[0],se[3],se[6],se[1],se[4],se[7],se[2],se[5],se[8])}multiplyScalar(G){const se=this.elements;return se[0]*=G,se[3]*=G,se[6]*=G,se[1]*=G,se[4]*=G,se[7]*=G,se[2]*=G,se[5]*=G,se[8]*=G,this}getInverse3(G){const se=G.elements,He=this.elements;He[0]=se[4]*se[8]-se[5]*se[7],He[3]=se[6]*se[5]-se[3]*se[8],He[6]=se[3]*se[7]-se[6]*se[4],He[1]=se[7]*se[2]-se[1]*se[8],He[4]=se[0]*se[8]-se[6]*se[2],He[7]=se[1]*se[6]-se[0]*se[7],He[2]=se[1]*se[5]-se[2]*se[4],He[5]=se[2]*se[3]-se[0]*se[5],He[8]=se[0]*se[4]-se[1]*se[3];const Fe=se[0]*He[0]+se[3]*He[1]+se[6]*He[2];return this.multiplyScalar(1/Fe),this}getInverse(G,se){const He=G.elements,Fe=this.elements;Fe[0]=He[10]*He[5]-He[6]*He[9],Fe[1]=-He[10]*He[1]+He[2]*He[9],Fe[2]=He[6]*He[1]-He[2]*He[5],Fe[3]=-He[10]*He[4]+He[6]*He[8],Fe[4]=He[10]*He[0]-He[2]*He[8],Fe[5]=-He[6]*He[0]+He[2]*He[4],Fe[6]=He[9]*He[4]-He[5]*He[8],Fe[7]=-He[9]*He[0]+He[1]*He[8],Fe[8]=He[5]*He[0]-He[1]*He[4];const Xe=He[0]*Fe[0]+He[1]*Fe[3]+He[2]*Fe[6];if(Xe===0){const be="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(se)throw new Error(be);return console.warn(be),this.identity(),this}return this.multiplyScalar(1/Xe),this}getDeterminant(){const G=this.elements;return G[0]*G[4]*G[8]+G[1]*G[5]*G[6]+G[2]*G[3]*G[7]-G[2]*G[4]*G[6]-G[1]*G[3]*G[8]-G[0]*G[5]*G[7]}transpose(){let G;const se=this.elements;return G=se[1],se[1]=se[3],se[3]=G,G=se[2],se[2]=se[6],se[6]=G,G=se[5],se[5]=se[7],se[7]=G,this}clone(){const G=this.elements;return new re(G[0],G[3],G[6],G[1],G[4],G[7],G[2],G[5],G[8])}getMatrix4(){const G=this.elements;return new V(G[0],G[3],G[6],0,G[1],G[4],G[7],0,G[2],G[5],G[8],0)}}class ie{constructor(G,se){this.origin=G!==void 0?G:new J,this.direction=se!==void 0?se:new J}set(G,se){return this.origin.copy(G),this.direction.copy(se),this}copy(G){return this.origin.copy(G.origin),this.direction.copy(G.direction),this}at(G,se){return(se||new J).copy(this.direction).multiplyScalar(G).add(this.origin)}recast(G){const se=A;return this.origin.copy(this.at(G,se)),this}closestPointToPoint(G,se){const He=se||new J;He.subVectors(G,this.origin);const Fe=He.dot(this.direction);return He.copy(this.direction).multiplyScalar(Fe).add(this.origin)}distanceToPoint(G){const se=A,He=se.subVectors(G,this.origin).dot(this.direction);return se.copy(this.direction).multiplyScalar(He).add(this.origin),se.distanceTo(G)}isIntersectionCylinder(){}isIntersectionSphere(G){return this.distanceToPoint(G.center)<=G.radius}isIntersectionPlane(G){return G.normal.dot(this.direction)!==0||G.distanceToPoint(this.origin)===0}distanceToPlane(G){const se=G.normal.dot(this.direction);return se===0?G.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(G.normal)+G.constant)/se}intersectPlane(G,se){const He=this.distanceToPlane(G);if(He!==void 0)return this.at(He,se)}applyMatrix4(G){return this.direction.add(this.origin).applyMatrix4(G),this.origin.applyMatrix4(G),this.direction.sub(this.origin),this}clone(){return new ie().copy(this)}}function K(Ne,G,se,He,Fe,Xe){He=He*Math.PI/180,Fe=Fe*Math.PI/180,Xe=Xe*Math.PI/180;const be=Sp=>Sp*Sp,ta=Math.cos(He),pn=Math.cos(Fe),mr=Math.cos(Xe),bp=Math.sin(Xe);return new re(Ne,G*mr,se*pn,0,G*bp,se*(ta-pn*mr)/bp,0,0,se*Math.sqrt(1-be(ta)-be(pn)-be(mr)+2*ta*pn*mr)/bp)}},546:(r,e,t)=>{t.r(e),t.d(e,{CustomLinear:()=>A,Gradient:()=>j,GradientType:()=>o,ROYGB:()=>_,RWB:()=>p,Sinebow:()=>S,builtinGradients:()=>C,getGradient:()=>d,normalizeValue:()=>c});var a=t(222);class o{}function c(V,J,re){return J>=V?(re<V&&(re=V),re>J&&(re=J),{lo:V,hi:J,val:re}):(re>V&&(re=V),re<J&&(re=J),{lo:J,hi:V,val:re=V-re+J})}function d(V){if(V instanceof o)return V;if(V.gradient!==void 0&&C[V.gradient]){let J=V.min===void 0?-1:V.min,re=V.max===void 0?1:V.max;return V.mid===void 0?V.colors===void 0?new C[V.gradient](J,re):new C[V.gradient](J,re,V.colors):new C[V.gradient](J,re,V.mid)}if(typeof V.gradient=="string"&&V.gradient.startsWith("linear_")){let J=V.gradient.split("_");J.shift();let re=V.min===void 0?-1:V.min,ie=V.max===void 0?1:V.max;return new A(re,ie,J)}return V}class p extends o{constructor(J,re,ie){super(),this.gradient="RWB",this.mult=1,this.mid=ie,this.min=J,this.max=re,re===void 0&&Array.isArray(J)&&J.length>=2?(this.max=J[1],this.min=J[0]):J&&re&&!Array.isArray(J)&&(this.min=J,this.max=re)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(J,re){var ie,K;if(J=this.mult*J,re?(ie=re[0],K=re[1]):(ie=this.min,K=this.max),J===void 0)return 16777215;var Ne=c(ie,K,J);ie=Ne.lo;var G,se=((K=Ne.hi)+ie)/2;return(J=Ne.val)<(se=re&&re[2]!==void 0?re[2]:this.mid!==void 0?this.mid:(ie+K)/2)?16711680+256*(G=Math.floor(255*Math.sqrt((J-ie)/(se-ie))))+G:J>se?65536*(G=Math.floor(255*Math.sqrt(1-(J-se)/(K-se))))+256*G+255:16777215}}class _ extends o{constructor(J,re){super(),this.gradient="ROYGB",this.mult=1,this.min=J,this.max=re,re===void 0&&Array.isArray(J)&&J.length>=2?(this.max=J[1],this.min=J[0]):J&&re&&!Array.isArray(J)&&(this.min=J,this.max=re)}valueToHex(J,re){var ie,K;if(J=this.mult*J,re?(ie=re[0],K=re[1]):(ie=this.min,K=this.max),J===void 0)return 16777215;var Ne=c(ie,K,J),G=((ie=Ne.lo)+(K=Ne.hi))/2,se=(ie+G)/2,He=(G+K)/2;return(J=Ne.val)<se?16711680+256*Math.floor(255*Math.sqrt((J-ie)/(se-ie)))+0:J<G?65536*Math.floor(255*Math.sqrt(1-(J-se)/(G-se)))+65280+0:J<He?65280+1*Math.floor(255*Math.sqrt((J-G)/(He-G))):0+256*Math.floor(255*Math.sqrt(1-(J-He)/(K-He)))+255}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class S extends o{constructor(J,re){super(),this.gradient="Sinebow",this.mult=1,this.min=J,this.max=re,re===void 0&&Array.isArray(J)&&J.length>=2&&(this.max=J[1],this.min=J[0]),re<J&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(J,re){var ie,K;if(J=this.mult*J,re?(ie=re[0],K=re[1]):(ie=this.min,K=this.max),J===void 0)return 16777215;var Ne=j.normalizeValue(ie,K,J);ie=Ne.lo,K=Ne.hi;var G=((J=Ne.val)-ie)/(K-ie)*5/6+.5,se=Math.sin(Math.PI*G);se*=255*se;var He=Math.sin(Math.PI*(G+1/3));He*=255*He;var Fe=Math.sin(Math.PI*(G+2/3));return Fe*=255*Fe,65536*Math.floor(se)+256*Math.floor(Fe)+1*Math.floor(He)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class A extends o{constructor(J,re,ie){var K;if(super(),this.gradient="linear",this.colors=new Array,Array.isArray(J)&&J.length>=2?(this.max=J[1],this.min=J[0],K=re):(this.min=J,this.max=re,K=ie),K)for(let Ne of K)this.colors.push(a.CC.color(Ne));else this.colors.push(a.CC.color(0))}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(J,re){var ie,K;if(re?(ie=re[0],K=re[1]):(ie=this.min,K=this.max),J===void 0)return 16777215;var Ne=c(ie,K,J);ie=Ne.lo,K=Ne.hi,J=Ne.val;let G=this.colors.length,se=(K-ie)/G,He=Math.min(Math.floor((J-ie)/se),G-1),Fe=Math.min(He+1,G-1),Xe=(J-ie-He*se)/se,be=this.colors[He],ta=this.colors[Fe];return new a.Color(be.r+Xe*(ta.r-be.r),be.g+Xe*(ta.g-be.g),be.b+Xe*(ta.b-be.b)).getHex()}}const C={rwb:p,RWB:p,roygb:_,ROYGB:_,sinebow:S,linear:A};class j extends o{valueToHex(J,re){return 0}range(){return null}}j.RWB=p,j.ROYGB=_,j.Sinebow=S,j.CustomLinear=A,j.builtinGradients=C,j.normalizeValue=c,j.getGradient=d},663:(r,e,t)=>{var a=t(981),o=t(701),c=t(407),d=t(165),p=t(358),_=-2,S=12,A=30;function C(Fe){return(Fe>>>24&255)+(Fe>>>8&65280)+((65280&Fe)<<8)+((255&Fe)<<24)}function j(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function V(Fe){var Xe;return Fe&&Fe.state?(Xe=Fe.state,Fe.total_in=Fe.total_out=Xe.total=0,Fe.msg="",Xe.wrap&&(Fe.adler=1&Xe.wrap),Xe.mode=1,Xe.last=0,Xe.havedict=0,Xe.dmax=32768,Xe.head=null,Xe.hold=0,Xe.bits=0,Xe.lencode=Xe.lendyn=new a.Buf32(852),Xe.distcode=Xe.distdyn=new a.Buf32(592),Xe.sane=1,Xe.back=-1,0):_}function J(Fe){var Xe;return Fe&&Fe.state?((Xe=Fe.state).wsize=0,Xe.whave=0,Xe.wnext=0,V(Fe)):_}function re(Fe,Xe){var be,ta;return Fe&&Fe.state?(ta=Fe.state,Xe<0?(be=0,Xe=-Xe):(be=1+(Xe>>4),Xe<48&&(Xe&=15)),Xe&&(Xe<8||Xe>15)?_:(ta.window!==null&&ta.wbits!==Xe&&(ta.window=null),ta.wrap=be,ta.wbits=Xe,J(Fe))):_}function ie(Fe,Xe){var be,ta;return Fe?(ta=new j,Fe.state=ta,ta.window=null,(be=re(Fe,Xe))!==0&&(Fe.state=null),be):_}var K,Ne,G=!0;function se(Fe){if(G){var Xe;for(K=new a.Buf32(512),Ne=new a.Buf32(32),Xe=0;Xe<144;)Fe.lens[Xe++]=8;for(;Xe<256;)Fe.lens[Xe++]=9;for(;Xe<280;)Fe.lens[Xe++]=7;for(;Xe<288;)Fe.lens[Xe++]=8;for(p(1,Fe.lens,0,288,K,0,Fe.work,{bits:9}),Xe=0;Xe<32;)Fe.lens[Xe++]=5;p(2,Fe.lens,0,32,Ne,0,Fe.work,{bits:5}),G=!1}Fe.lencode=K,Fe.lenbits=9,Fe.distcode=Ne,Fe.distbits=5}function He(Fe,Xe,be,ta){var pn,mr=Fe.state;return mr.window===null&&(mr.wsize=1<<mr.wbits,mr.wnext=0,mr.whave=0,mr.window=new a.Buf8(mr.wsize)),ta>=mr.wsize?(a.arraySet(mr.window,Xe,be-mr.wsize,mr.wsize,0),mr.wnext=0,mr.whave=mr.wsize):((pn=mr.wsize-mr.wnext)>ta&&(pn=ta),a.arraySet(mr.window,Xe,be-ta,pn,mr.wnext),(ta-=pn)?(a.arraySet(mr.window,Xe,be-ta,ta,0),mr.wnext=ta,mr.whave=mr.wsize):(mr.wnext+=pn,mr.wnext===mr.wsize&&(mr.wnext=0),mr.whave<mr.wsize&&(mr.whave+=pn))),0}e.inflateReset=J,e.inflateReset2=re,e.inflateResetKeep=V,e.inflateInit=function(Fe){return ie(Fe,15)},e.inflateInit2=ie,e.inflate=function(Fe,Xe){var be,ta,pn,mr,bp,Sp,_r,xs,ne,zl,Hl,pr,Hp,Gl,Ip,qp,ci,Ep,o0,w0,a0,P0,am,sm,C0=0,Fm=new a.Buf8(4),Zm=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Fe||!Fe.state||!Fe.output||!Fe.input&&Fe.avail_in!==0)return _;(be=Fe.state).mode===S&&(be.mode=13),bp=Fe.next_out,pn=Fe.output,_r=Fe.avail_out,mr=Fe.next_in,ta=Fe.input,Sp=Fe.avail_in,xs=be.hold,ne=be.bits,zl=Sp,Hl=_r,P0=0;e:for(;;)switch(be.mode){case 1:if(be.wrap===0){be.mode=13;break}for(;ne<16;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(2&be.wrap&&xs===35615){be.check=0,Fm[0]=255&xs,Fm[1]=xs>>>8&255,be.check=c(be.check,Fm,2,0),xs=0,ne=0,be.mode=2;break}if(be.flags=0,be.head&&(be.head.done=!1),!(1&be.wrap)||(((255&xs)<<8)+(xs>>8))%31){Fe.msg="incorrect header check",be.mode=A;break}if((15&xs)!=8){Fe.msg="unknown compression method",be.mode=A;break}if(ne-=4,a0=8+(15&(xs>>>=4)),be.wbits===0)be.wbits=a0;else if(a0>be.wbits){Fe.msg="invalid window size",be.mode=A;break}be.dmax=1<<a0,Fe.adler=be.check=1,be.mode=512&xs?10:S,xs=0,ne=0;break;case 2:for(;ne<16;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(be.flags=xs,(255&be.flags)!=8){Fe.msg="unknown compression method",be.mode=A;break}if(57344&be.flags){Fe.msg="unknown header flags set",be.mode=A;break}be.head&&(be.head.text=xs>>8&1),512&be.flags&&(Fm[0]=255&xs,Fm[1]=xs>>>8&255,be.check=c(be.check,Fm,2,0)),xs=0,ne=0,be.mode=3;case 3:for(;ne<32;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}be.head&&(be.head.time=xs),512&be.flags&&(Fm[0]=255&xs,Fm[1]=xs>>>8&255,Fm[2]=xs>>>16&255,Fm[3]=xs>>>24&255,be.check=c(be.check,Fm,4,0)),xs=0,ne=0,be.mode=4;case 4:for(;ne<16;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}be.head&&(be.head.xflags=255&xs,be.head.os=xs>>8),512&be.flags&&(Fm[0]=255&xs,Fm[1]=xs>>>8&255,be.check=c(be.check,Fm,2,0)),xs=0,ne=0,be.mode=5;case 5:if(1024&be.flags){for(;ne<16;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}be.length=xs,be.head&&(be.head.extra_len=xs),512&be.flags&&(Fm[0]=255&xs,Fm[1]=xs>>>8&255,be.check=c(be.check,Fm,2,0)),xs=0,ne=0}else be.head&&(be.head.extra=null);be.mode=6;case 6:if(1024&be.flags&&((pr=be.length)>Sp&&(pr=Sp),pr&&(be.head&&(a0=be.head.extra_len-be.length,be.head.extra||(be.head.extra=new Array(be.head.extra_len)),a.arraySet(be.head.extra,ta,mr,pr,a0)),512&be.flags&&(be.check=c(be.check,ta,pr,mr)),Sp-=pr,mr+=pr,be.length-=pr),be.length))break e;be.length=0,be.mode=7;case 7:if(2048&be.flags){if(Sp===0)break e;pr=0;do a0=ta[mr+pr++],be.head&&a0&&be.length<65536&&(be.head.name+=String.fromCharCode(a0));while(a0&&pr<Sp);if(512&be.flags&&(be.check=c(be.check,ta,pr,mr)),Sp-=pr,mr+=pr,a0)break e}else be.head&&(be.head.name=null);be.length=0,be.mode=8;case 8:if(4096&be.flags){if(Sp===0)break e;pr=0;do a0=ta[mr+pr++],be.head&&a0&&be.length<65536&&(be.head.comment+=String.fromCharCode(a0));while(a0&&pr<Sp);if(512&be.flags&&(be.check=c(be.check,ta,pr,mr)),Sp-=pr,mr+=pr,a0)break e}else be.head&&(be.head.comment=null);be.mode=9;case 9:if(512&be.flags){for(;ne<16;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(xs!==(65535&be.check)){Fe.msg="header crc mismatch",be.mode=A;break}xs=0,ne=0}be.head&&(be.head.hcrc=be.flags>>9&1,be.head.done=!0),Fe.adler=be.check=0,be.mode=S;break;case 10:for(;ne<32;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}Fe.adler=be.check=C(xs),xs=0,ne=0,be.mode=11;case 11:if(be.havedict===0)return Fe.next_out=bp,Fe.avail_out=_r,Fe.next_in=mr,Fe.avail_in=Sp,be.hold=xs,be.bits=ne,2;Fe.adler=be.check=1,be.mode=S;case S:if(Xe===5||Xe===6)break e;case 13:if(be.last){xs>>>=7&ne,ne-=7&ne,be.mode=27;break}for(;ne<3;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}switch(be.last=1&xs,ne-=1,3&(xs>>>=1)){case 0:be.mode=14;break;case 1:if(se(be),be.mode=20,Xe===6){xs>>>=2,ne-=2;break e}break;case 2:be.mode=17;break;case 3:Fe.msg="invalid block type",be.mode=A}xs>>>=2,ne-=2;break;case 14:for(xs>>>=7&ne,ne-=7&ne;ne<32;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if((65535&xs)!=(xs>>>16^65535)){Fe.msg="invalid stored block lengths",be.mode=A;break}if(be.length=65535&xs,xs=0,ne=0,be.mode=15,Xe===6)break e;case 15:be.mode=16;case 16:if(pr=be.length){if(pr>Sp&&(pr=Sp),pr>_r&&(pr=_r),pr===0)break e;a.arraySet(pn,ta,mr,pr,bp),Sp-=pr,mr+=pr,_r-=pr,bp+=pr,be.length-=pr;break}be.mode=S;break;case 17:for(;ne<14;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(be.nlen=257+(31&xs),xs>>>=5,ne-=5,be.ndist=1+(31&xs),xs>>>=5,ne-=5,be.ncode=4+(15&xs),xs>>>=4,ne-=4,be.nlen>286||be.ndist>30){Fe.msg="too many length or distance symbols",be.mode=A;break}be.have=0,be.mode=18;case 18:for(;be.have<be.ncode;){for(;ne<3;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}be.lens[Zm[be.have++]]=7&xs,xs>>>=3,ne-=3}for(;be.have<19;)be.lens[Zm[be.have++]]=0;if(be.lencode=be.lendyn,be.lenbits=7,am={bits:be.lenbits},P0=p(0,be.lens,0,19,be.lencode,0,be.work,am),be.lenbits=am.bits,P0){Fe.msg="invalid code lengths set",be.mode=A;break}be.have=0,be.mode=19;case 19:for(;be.have<be.nlen+be.ndist;){for(;qp=(C0=be.lencode[xs&(1<<be.lenbits)-1])>>>16&255,ci=65535&C0,!((Ip=C0>>>24)<=ne);){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(ci<16)xs>>>=Ip,ne-=Ip,be.lens[be.have++]=ci;else{if(ci===16){for(sm=Ip+2;ne<sm;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(xs>>>=Ip,ne-=Ip,be.have===0){Fe.msg="invalid bit length repeat",be.mode=A;break}a0=be.lens[be.have-1],pr=3+(3&xs),xs>>>=2,ne-=2}else if(ci===17){for(sm=Ip+3;ne<sm;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}ne-=Ip,a0=0,pr=3+(7&(xs>>>=Ip)),xs>>>=3,ne-=3}else{for(sm=Ip+7;ne<sm;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}ne-=Ip,a0=0,pr=11+(127&(xs>>>=Ip)),xs>>>=7,ne-=7}if(be.have+pr>be.nlen+be.ndist){Fe.msg="invalid bit length repeat",be.mode=A;break}for(;pr--;)be.lens[be.have++]=a0}}if(be.mode===A)break;if(be.lens[256]===0){Fe.msg="invalid code -- missing end-of-block",be.mode=A;break}if(be.lenbits=9,am={bits:be.lenbits},P0=p(1,be.lens,0,be.nlen,be.lencode,0,be.work,am),be.lenbits=am.bits,P0){Fe.msg="invalid literal/lengths set",be.mode=A;break}if(be.distbits=6,be.distcode=be.distdyn,am={bits:be.distbits},P0=p(2,be.lens,be.nlen,be.ndist,be.distcode,0,be.work,am),be.distbits=am.bits,P0){Fe.msg="invalid distances set",be.mode=A;break}if(be.mode=20,Xe===6)break e;case 20:be.mode=21;case 21:if(Sp>=6&&_r>=258){Fe.next_out=bp,Fe.avail_out=_r,Fe.next_in=mr,Fe.avail_in=Sp,be.hold=xs,be.bits=ne,d(Fe,Hl),bp=Fe.next_out,pn=Fe.output,_r=Fe.avail_out,mr=Fe.next_in,ta=Fe.input,Sp=Fe.avail_in,xs=be.hold,ne=be.bits,be.mode===S&&(be.back=-1);break}for(be.back=0;qp=(C0=be.lencode[xs&(1<<be.lenbits)-1])>>>16&255,ci=65535&C0,!((Ip=C0>>>24)<=ne);){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(qp&&!(240&qp)){for(Ep=Ip,o0=qp,w0=ci;qp=(C0=be.lencode[w0+((xs&(1<<Ep+o0)-1)>>Ep)])>>>16&255,ci=65535&C0,!(Ep+(Ip=C0>>>24)<=ne);){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}xs>>>=Ep,ne-=Ep,be.back+=Ep}if(xs>>>=Ip,ne-=Ip,be.back+=Ip,be.length=ci,qp===0){be.mode=26;break}if(32&qp){be.back=-1,be.mode=S;break}if(64&qp){Fe.msg="invalid literal/length code",be.mode=A;break}be.extra=15&qp,be.mode=22;case 22:if(be.extra){for(sm=be.extra;ne<sm;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}be.length+=xs&(1<<be.extra)-1,xs>>>=be.extra,ne-=be.extra,be.back+=be.extra}be.was=be.length,be.mode=23;case 23:for(;qp=(C0=be.distcode[xs&(1<<be.distbits)-1])>>>16&255,ci=65535&C0,!((Ip=C0>>>24)<=ne);){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(!(240&qp)){for(Ep=Ip,o0=qp,w0=ci;qp=(C0=be.distcode[w0+((xs&(1<<Ep+o0)-1)>>Ep)])>>>16&255,ci=65535&C0,!(Ep+(Ip=C0>>>24)<=ne);){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}xs>>>=Ep,ne-=Ep,be.back+=Ep}if(xs>>>=Ip,ne-=Ip,be.back+=Ip,64&qp){Fe.msg="invalid distance code",be.mode=A;break}be.offset=ci,be.extra=15&qp,be.mode=24;case 24:if(be.extra){for(sm=be.extra;ne<sm;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}be.offset+=xs&(1<<be.extra)-1,xs>>>=be.extra,ne-=be.extra,be.back+=be.extra}if(be.offset>be.dmax){Fe.msg="invalid distance too far back",be.mode=A;break}be.mode=25;case 25:if(_r===0)break e;if(pr=Hl-_r,be.offset>pr){if((pr=be.offset-pr)>be.whave&&be.sane){Fe.msg="invalid distance too far back",be.mode=A;break}pr>be.wnext?(pr-=be.wnext,Hp=be.wsize-pr):Hp=be.wnext-pr,pr>be.length&&(pr=be.length),Gl=be.window}else Gl=pn,Hp=bp-be.offset,pr=be.length;pr>_r&&(pr=_r),_r-=pr,be.length-=pr;do pn[bp++]=Gl[Hp++];while(--pr);be.length===0&&(be.mode=21);break;case 26:if(_r===0)break e;pn[bp++]=be.length,_r--,be.mode=21;break;case 27:if(be.wrap){for(;ne<32;){if(Sp===0)break e;Sp--,xs|=ta[mr++]<<ne,ne+=8}if(Hl-=_r,Fe.total_out+=Hl,be.total+=Hl,Hl&&(Fe.adler=be.check=be.flags?c(be.check,pn,Hl,bp-Hl):o(be.check,pn,Hl,bp-Hl)),Hl=_r,(be.flags?xs:C(xs))!==be.check){Fe.msg="incorrect data check",be.mode=A;break}xs=0,ne=0}be.mode=28;case 28:if(be.wrap&&be.flags){for(;ne<32;){if(Sp===0)break e;Sp--,xs+=ta[mr++]<<ne,ne+=8}if(xs!==(4294967295&be.total)){Fe.msg="incorrect length check",be.mode=A;break}xs=0,ne=0}be.mode=29;case 29:P0=1;break e;case A:P0=-3;break e;case 31:return-4;default:return _}return Fe.next_out=bp,Fe.avail_out=_r,Fe.next_in=mr,Fe.avail_in=Sp,be.hold=xs,be.bits=ne,(be.wsize||Hl!==Fe.avail_out&&be.mode<A&&(be.mode<27||Xe!==4))&&He(Fe,Fe.output,Fe.next_out,Hl-Fe.avail_out)?(be.mode=31,-4):(zl-=Fe.avail_in,Hl-=Fe.avail_out,Fe.total_in+=zl,Fe.total_out+=Hl,be.total+=Hl,be.wrap&&Hl&&(Fe.adler=be.check=be.flags?c(be.check,pn,Hl,Fe.next_out-Hl):o(be.check,pn,Hl,Fe.next_out-Hl)),Fe.data_type=be.bits+(be.last?64:0)+(be.mode===S?128:0)+(be.mode===20||be.mode===15?256:0),(zl===0&&Hl===0||Xe===4)&&P0===0&&(P0=-5),P0)},e.inflateEnd=function(Fe){if(!Fe||!Fe.state)return _;var Xe=Fe.state;return Xe.window&&(Xe.window=null),Fe.state=null,0},e.inflateGetHeader=function(Fe,Xe){var be;return Fe&&Fe.state&&2&(be=Fe.state).wrap?(be.head=Xe,Xe.done=!1,0):_},e.inflateSetDictionary=function(Fe,Xe){var be,ta=Xe.length;return Fe&&Fe.state?(be=Fe.state).wrap!==0&&be.mode!==11?_:be.mode===11&&o(1,Xe,ta,0)!==be.check?-3:He(Fe,Xe,ta,ta)?(be.mode=31,-4):(be.havedict=1,0):_},e.inflateInfo="pako inflate (from Nodeca project)"},670:r=>{r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},681:r=>{r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},697:(r,e,t)=>{var a=t(981);function o(ci){for(var Ep=ci.length;--Ep>=0;)ci[Ep]=0}var c=256,d=286,p=30,_=15,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(576);o(V);var J=new Array(60);o(J);var re=new Array(512);o(re);var ie=new Array(256);o(ie);var K=new Array(29);o(K);var Ne,G,se,He=new Array(p);function Fe(ci,Ep,o0,w0,a0){this.static_tree=ci,this.extra_bits=Ep,this.extra_base=o0,this.elems=w0,this.max_length=a0,this.has_stree=ci&&ci.length}function Xe(ci,Ep){this.dyn_tree=ci,this.max_code=0,this.stat_desc=Ep}function be(ci){return ci<256?re[ci]:re[256+(ci>>>7)]}function ta(ci,Ep){ci.pending_buf[ci.pending++]=255&Ep,ci.pending_buf[ci.pending++]=Ep>>>8&255}function pn(ci,Ep,o0){ci.bi_valid>16-o0?(ci.bi_buf|=Ep<<ci.bi_valid&65535,ta(ci,ci.bi_buf),ci.bi_buf=Ep>>16-ci.bi_valid,ci.bi_valid+=o0-16):(ci.bi_buf|=Ep<<ci.bi_valid&65535,ci.bi_valid+=o0)}function mr(ci,Ep,o0){pn(ci,o0[2*Ep],o0[2*Ep+1])}function bp(ci,Ep){var o0=0;do o0|=1&ci,ci>>>=1,o0<<=1;while(--Ep>0);return o0>>>1}function Sp(ci,Ep,o0){var w0,a0,P0=new Array(16),am=0;for(w0=1;w0<=_;w0++)P0[w0]=am=am+o0[w0-1]<<1;for(a0=0;a0<=Ep;a0++){var sm=ci[2*a0+1];sm!==0&&(ci[2*a0]=bp(P0[sm]++,sm))}}function _r(ci){var Ep;for(Ep=0;Ep<d;Ep++)ci.dyn_ltree[2*Ep]=0;for(Ep=0;Ep<p;Ep++)ci.dyn_dtree[2*Ep]=0;for(Ep=0;Ep<19;Ep++)ci.bl_tree[2*Ep]=0;ci.dyn_ltree[512]=1,ci.opt_len=ci.static_len=0,ci.last_lit=ci.matches=0}function xs(ci){ci.bi_valid>8?ta(ci,ci.bi_buf):ci.bi_valid>0&&(ci.pending_buf[ci.pending++]=ci.bi_buf),ci.bi_buf=0,ci.bi_valid=0}function ne(ci,Ep,o0,w0){var a0=2*Ep,P0=2*o0;return ci[a0]<ci[P0]||ci[a0]===ci[P0]&&w0[Ep]<=w0[o0]}function zl(ci,Ep,o0){for(var w0=ci.heap[o0],a0=o0<<1;a0<=ci.heap_len&&(a0<ci.heap_len&&ne(Ep,ci.heap[a0+1],ci.heap[a0],ci.depth)&&a0++,!ne(Ep,w0,ci.heap[a0],ci.depth));)ci.heap[o0]=ci.heap[a0],o0=a0,a0<<=1;ci.heap[o0]=w0}function Hl(ci,Ep,o0){var w0,a0,P0,am,sm=0;if(ci.last_lit!==0)do w0=ci.pending_buf[ci.d_buf+2*sm]<<8|ci.pending_buf[ci.d_buf+2*sm+1],a0=ci.pending_buf[ci.l_buf+sm],sm++,w0===0?mr(ci,a0,Ep):(mr(ci,(P0=ie[a0])+c+1,Ep),(am=S[P0])!==0&&pn(ci,a0-=K[P0],am),mr(ci,P0=be(--w0),o0),(am=A[P0])!==0&&pn(ci,w0-=He[P0],am));while(sm<ci.last_lit);mr(ci,256,Ep)}function pr(ci,Ep){var o0,w0,a0,P0=Ep.dyn_tree,am=Ep.stat_desc.static_tree,sm=Ep.stat_desc.has_stree,C0=Ep.stat_desc.elems,Fm=-1;for(ci.heap_len=0,ci.heap_max=573,o0=0;o0<C0;o0++)P0[2*o0]!==0?(ci.heap[++ci.heap_len]=Fm=o0,ci.depth[o0]=0):P0[2*o0+1]=0;for(;ci.heap_len<2;)P0[2*(a0=ci.heap[++ci.heap_len]=Fm<2?++Fm:0)]=1,ci.depth[a0]=0,ci.opt_len--,sm&&(ci.static_len-=am[2*a0+1]);for(Ep.max_code=Fm,o0=ci.heap_len>>1;o0>=1;o0--)zl(ci,P0,o0);a0=C0;do o0=ci.heap[1],ci.heap[1]=ci.heap[ci.heap_len--],zl(ci,P0,1),w0=ci.heap[1],ci.heap[--ci.heap_max]=o0,ci.heap[--ci.heap_max]=w0,P0[2*a0]=P0[2*o0]+P0[2*w0],ci.depth[a0]=(ci.depth[o0]>=ci.depth[w0]?ci.depth[o0]:ci.depth[w0])+1,P0[2*o0+1]=P0[2*w0+1]=a0,ci.heap[1]=a0++,zl(ci,P0,1);while(ci.heap_len>=2);ci.heap[--ci.heap_max]=ci.heap[1],(function(Zm,p1){var A1,T1,Tm,x1,S1,p0,zp=p1.dyn_tree,om=p1.max_code,bm=p1.stat_desc.static_tree,i1=p1.stat_desc.has_stree,r1=p1.stat_desc.extra_bits,Gp=p1.stat_desc.extra_base,i0=p1.stat_desc.max_length,l0=0;for(x1=0;x1<=_;x1++)Zm.bl_count[x1]=0;for(zp[2*Zm.heap[Zm.heap_max]+1]=0,A1=Zm.heap_max+1;A1<573;A1++)(x1=zp[2*zp[2*(T1=Zm.heap[A1])+1]+1]+1)>i0&&(x1=i0,l0++),zp[2*T1+1]=x1,T1>om||(Zm.bl_count[x1]++,S1=0,T1>=Gp&&(S1=r1[T1-Gp]),p0=zp[2*T1],Zm.opt_len+=p0*(x1+S1),i1&&(Zm.static_len+=p0*(bm[2*T1+1]+S1)));if(l0!==0){do{for(x1=i0-1;Zm.bl_count[x1]===0;)x1--;Zm.bl_count[x1]--,Zm.bl_count[x1+1]+=2,Zm.bl_count[i0]--,l0-=2}while(l0>0);for(x1=i0;x1!==0;x1--)for(T1=Zm.bl_count[x1];T1!==0;)(Tm=Zm.heap[--A1])>om||(zp[2*Tm+1]!==x1&&(Zm.opt_len+=(x1-zp[2*Tm+1])*zp[2*Tm],zp[2*Tm+1]=x1),T1--)}})(ci,Ep),Sp(P0,Fm,ci.bl_count)}function Hp(ci,Ep,o0){var w0,a0,P0=-1,am=Ep[1],sm=0,C0=7,Fm=4;for(am===0&&(C0=138,Fm=3),Ep[2*(o0+1)+1]=65535,w0=0;w0<=o0;w0++)a0=am,am=Ep[2*(w0+1)+1],++sm<C0&&a0===am||(sm<Fm?ci.bl_tree[2*a0]+=sm:a0!==0?(a0!==P0&&ci.bl_tree[2*a0]++,ci.bl_tree[32]++):sm<=10?ci.bl_tree[34]++:ci.bl_tree[36]++,sm=0,P0=a0,am===0?(C0=138,Fm=3):a0===am?(C0=6,Fm=3):(C0=7,Fm=4))}function Gl(ci,Ep,o0){var w0,a0,P0=-1,am=Ep[1],sm=0,C0=7,Fm=4;for(am===0&&(C0=138,Fm=3),w0=0;w0<=o0;w0++)if(a0=am,am=Ep[2*(w0+1)+1],!(++sm<C0&&a0===am)){if(sm<Fm)do mr(ci,a0,ci.bl_tree);while(--sm!==0);else a0!==0?(a0!==P0&&(mr(ci,a0,ci.bl_tree),sm--),mr(ci,16,ci.bl_tree),pn(ci,sm-3,2)):sm<=10?(mr(ci,17,ci.bl_tree),pn(ci,sm-3,3)):(mr(ci,18,ci.bl_tree),pn(ci,sm-11,7));sm=0,P0=a0,am===0?(C0=138,Fm=3):a0===am?(C0=6,Fm=3):(C0=7,Fm=4)}}o(He);var Ip=!1;function qp(ci,Ep,o0,w0){pn(ci,0+(w0?1:0),3),(function(a0,P0,am,sm){xs(a0),ta(a0,am),ta(a0,~am),a.arraySet(a0.pending_buf,a0.window,P0,am,a0.pending),a0.pending+=am})(ci,Ep,o0)}e._tr_init=function(ci){Ip||((function(){var Ep,o0,w0,a0,P0,am=new Array(16);for(w0=0,a0=0;a0<28;a0++)for(K[a0]=w0,Ep=0;Ep<1<<S[a0];Ep++)ie[w0++]=a0;for(ie[w0-1]=a0,P0=0,a0=0;a0<16;a0++)for(He[a0]=P0,Ep=0;Ep<1<<A[a0];Ep++)re[P0++]=a0;for(P0>>=7;a0<p;a0++)for(He[a0]=P0<<7,Ep=0;Ep<1<<A[a0]-7;Ep++)re[256+P0++]=a0;for(o0=0;o0<=_;o0++)am[o0]=0;for(Ep=0;Ep<=143;)V[2*Ep+1]=8,Ep++,am[8]++;for(;Ep<=255;)V[2*Ep+1]=9,Ep++,am[9]++;for(;Ep<=279;)V[2*Ep+1]=7,Ep++,am[7]++;for(;Ep<=287;)V[2*Ep+1]=8,Ep++,am[8]++;for(Sp(V,287,am),Ep=0;Ep<p;Ep++)J[2*Ep+1]=5,J[2*Ep]=bp(Ep,5);Ne=new Fe(V,S,257,d,_),G=new Fe(J,A,0,p,_),se=new Fe(new Array(0),C,0,19,7)})(),Ip=!0),ci.l_desc=new Xe(ci.dyn_ltree,Ne),ci.d_desc=new Xe(ci.dyn_dtree,G),ci.bl_desc=new Xe(ci.bl_tree,se),ci.bi_buf=0,ci.bi_valid=0,_r(ci)},e._tr_stored_block=qp,e._tr_flush_block=function(ci,Ep,o0,w0){var a0,P0,am=0;ci.level>0?(ci.strm.data_type===2&&(ci.strm.data_type=(function(sm){var C0,Fm=4093624447;for(C0=0;C0<=31;C0++,Fm>>>=1)if(1&Fm&&sm.dyn_ltree[2*C0]!==0)return 0;if(sm.dyn_ltree[18]!==0||sm.dyn_ltree[20]!==0||sm.dyn_ltree[26]!==0)return 1;for(C0=32;C0<c;C0++)if(sm.dyn_ltree[2*C0]!==0)return 1;return 0})(ci)),pr(ci,ci.l_desc),pr(ci,ci.d_desc),am=(function(sm){var C0;for(Hp(sm,sm.dyn_ltree,sm.l_desc.max_code),Hp(sm,sm.dyn_dtree,sm.d_desc.max_code),pr(sm,sm.bl_desc),C0=18;C0>=3&&sm.bl_tree[2*j[C0]+1]===0;C0--);return sm.opt_len+=3*(C0+1)+5+5+4,C0})(ci),a0=ci.opt_len+3+7>>>3,(P0=ci.static_len+3+7>>>3)<=a0&&(a0=P0)):a0=P0=o0+5,o0+4<=a0&&Ep!==-1?qp(ci,Ep,o0,w0):ci.strategy===4||P0===a0?(pn(ci,2+(w0?1:0),3),Hl(ci,V,J)):(pn(ci,4+(w0?1:0),3),(function(sm,C0,Fm,Zm){var p1;for(pn(sm,C0-257,5),pn(sm,Fm-1,5),pn(sm,Zm-4,4),p1=0;p1<Zm;p1++)pn(sm,sm.bl_tree[2*j[p1]+1],3);Gl(sm,sm.dyn_ltree,C0-1),Gl(sm,sm.dyn_dtree,Fm-1)})(ci,ci.l_desc.max_code+1,ci.d_desc.max_code+1,am+1),Hl(ci,ci.dyn_ltree,ci.dyn_dtree)),_r(ci),w0&&xs(ci)},e._tr_tally=function(ci,Ep,o0){return ci.pending_buf[ci.d_buf+2*ci.last_lit]=Ep>>>8&255,ci.pending_buf[ci.d_buf+2*ci.last_lit+1]=255&Ep,ci.pending_buf[ci.l_buf+ci.last_lit]=255&o0,ci.last_lit++,Ep===0?ci.dyn_ltree[2*o0]++:(ci.matches++,Ep--,ci.dyn_ltree[2*(ie[o0]+c+1)]++,ci.dyn_dtree[2*be(Ep)]++),ci.last_lit===ci.lit_bufsize-1},e._tr_align=function(ci){pn(ci,2,3),mr(ci,256,V),(function(Ep){Ep.bi_valid===16?(ta(Ep,Ep.bi_buf),Ep.bi_buf=0,Ep.bi_valid=0):Ep.bi_valid>=8&&(Ep.pending_buf[Ep.pending++]=255&Ep.bi_buf,Ep.bi_buf>>=8,Ep.bi_valid-=8)})(ci)}},701:r=>{r.exports=function(e,t,a,o){for(var c=65535&e,d=e>>>16&65535,p=0;a!==0;){a-=p=a>2e3?2e3:a;do d=d+(c=c+t[o++]|0)|0;while(--p);c%=65521,d%=65521}return c|d<<16}},746:r=>{r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},788:(r,e,t)=>{var a={};(0,t(981).assign)(a,t(71),t(3),t(681)),r.exports=a},797:(r,e,t)=>{t.r(e),t.d(e,{VASP:()=>c});var a=t(378),o=t(392);function c(d,p={}){var _=[[]],S={};const A=p.assignBonds===void 0||p.assignBonds;var C=d.replace(/^\s+/,"").split(/\r?\n/);if(C.length<3)return _;if(!C[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),_;if(S.length=parseFloat(C[1]),S.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),_;S.xVec=new Float32Array(C[2].replace(/^\s+/,"").split(/\s+/)),S.yVec=new Float32Array(C[3].replace(/^\s+/,"").split(/\s+/)),S.zVec=new Float32Array(C[4].replace(/^\s+/,"").split(/\s+/));var j=new a.Matrix3(S.xVec[0],S.xVec[1],S.xVec[2],S.yVec[0],S.yVec[1],S.yVec[2],S.zVec[0],S.zVec[1],S.zVec[2]);j.multiplyScalar(S.length),_.modelData=[{symmetries:[],cryst:{matrix:j}}];var V=C[5].trim().split(/\s+/),J=new Int16Array(C[6].trim().split(/\s+/)),re=C[7].trim(),ie=!1;if(re.match(/S/)&&(ie=!0,re=C[8].trim()),re.toLowerCase()[0]=="c")re="cartesian";else{if(re.toLowerCase()[0]!="d")return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),_;re="direct"}if(V.length!=J.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(V),console.log(J),_;ie?C.splice(0,9):C.splice(0,8);for(var K=0,Ne=0,G=V.length;Ne<G;Ne++){for(var se=V[Ne],He=0,Fe=J[Ne];He<Fe;He++){var Xe=new Float32Array(C[K+He].trim().split(/\s+/)),be={};be.elem=se,re=="cartesian"?(be.x=S.length*Xe[0],be.y=S.length*Xe[1],be.z=S.length*Xe[2]):(be.x=S.length*(Xe[0]*S.xVec[0]+Xe[1]*S.yVec[0]+Xe[2]*S.zVec[0]),be.y=S.length*(Xe[0]*S.xVec[1]+Xe[1]*S.yVec[1]+Xe[2]*S.zVec[1]),be.z=S.length*(Xe[0]*S.xVec[2]+Xe[1]*S.yVec[2]+Xe[2]*S.zVec[2])),be.bonds=[],be.bondOrder=[],_[0].push(be)}K+=J[Ne]}if(A)for(let ta=0;ta<_.length;ta++)(0,o.assignBonds)(_[ta],p);return _}},834:r=>{r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},848:(r,e,t)=>{t.r(e),t.d(e,{VolumeData:()=>_});var a=t(864),o=t(529),c=t(797),d=t(865),p=t(75);class _{constructor(A,C,j){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(K){var Ne=K/(this.size.y*this.size.z),G=K%(this.size.y*this.size.z),se=K%this.size.z;return Ne*=this.unit.x,G*=this.unit.y,se*=this.unit.z,{x:Ne+=this.origin.x,y:G+=this.origin.y,z:se+=this.origin.z}},this.vasp=function(K){var Ne=K.replace(/^\s+/,"").split(/[\n\r]/),G=(0,c.VASP)(K)[0].length;if(G==0)return console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var se,He=1.889725992,Fe=parseFloat(Ne[1]);se=Ne[2].replace(/^\s+/,"").split(/\s+/);var Xe=new o.Vector3(parseFloat(se[0]),parseFloat(se[1]),parseFloat(se[2])).multiplyScalar(Fe*He);se=Ne[3].replace(/^\s+/,"").split(/\s+/);var be=new o.Vector3(parseFloat(se[0]),parseFloat(se[1]),parseFloat(se[2])).multiplyScalar(Fe*He);se=Ne[4].replace(/^\s+/,"").split(/\s+/);var ta=new o.Vector3(parseFloat(se[0]),parseFloat(se[1]),parseFloat(se[2])).multiplyScalar(Fe*He),pn=Xe.x*(be.y*ta.z-ta.y*be.z)-be.x*(Xe.y*ta.z-ta.y*Xe.z)+ta.x*(Xe.y*be.z-be.y*Xe.z),mr=1/(pn=Math.abs(pn)/Math.pow(He,3));Ne.splice(0,8+G+1);var bp=Ne[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Sp=Math.abs(parseFloat(bp[0])),_r=Math.abs(parseFloat(bp[1])),xs=Math.abs(parseFloat(bp[2])),ne=this.origin=new o.Vector3(0,0,0);this.size={x:Sp,y:_r,z:xs},this.unit=new o.Vector3(Xe.x,be.y,ta.z),Xe=Xe.multiplyScalar(1/(He*Sp)),be=be.multiplyScalar(1/(He*_r)),ta=ta.multiplyScalar(1/(He*xs)),Xe.y==0&&Xe.z==0&&be.x==0&&be.z==0&&ta.x==0&&ta.y==0||(this.matrix=new o.Matrix4(Xe.x,be.x,ta.x,0,Xe.y,be.y,ta.y,0,Xe.z,be.z,ta.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(ne.x,ne.y,ne.z)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1)),Ne.splice(0,1);var zl=Ne.join(" "),Hl=(zl=zl.replace(/^\s+/,"")).split(/[\s\r]+/);Hl.splice(Sp*_r*xs+1);for(var pr=Float32Array.from(Hl,parseFloat),Hp=0;Hp<pr.length;Hp++)pr[Hp]=pr[Hp]*mr*.036749309;this.data=pr},this.dx=function(K){var Ne,G=K.split(/[\n\r]+/),se=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,He=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,Fe=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,Xe=/data follows/,be=0;for(be=0;be<G.length;be++){var ta=G[be];if(Ne=se.exec(ta)){var pn=parseInt(Ne[1]),mr=parseInt(Ne[2]),bp=parseInt(Ne[3]);this.size={x:pn,y:mr,z:bp}}else if(Ne=Fe.exec(ta)){var Sp=parseFloat(Ne[1]);if(parseFloat(Ne[2])==0&&parseFloat(Ne[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),ta=G[be+=1],(Ne=Fe.exec(ta))==null)return void console.error("Parse error in dx delta matrix");var _r=parseFloat(Ne[2]);if(parseFloat(Ne[1])==0&&parseFloat(Ne[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),ta=G[be+=1],(Ne=Fe.exec(ta))==null)return void console.error("Parse error in dx delta matrix");var xs=parseFloat(Ne[3]);parseFloat(Ne[1])==0&&parseFloat(Ne[2])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new o.Vector3(Sp,_r,xs)}else if(Ne=He.exec(ta)){var ne=parseFloat(Ne[1]),zl=parseFloat(Ne[2]),Hl=parseFloat(Ne[3]);this.origin=new o.Vector3(ne,zl,Hl)}else if(Ne=Xe.exec(ta))break}if(be+=1,this.size&&this.origin&&this.unit&&this.size){var pr=G.splice(be).join(" ").split(/[\s\r]+/);this.data=Float32Array.from(pr,parseFloat)}else console.error("Error parsing dx format")},C=C.toLowerCase(),/\.gz$/.test(C)){C=C.replace(/\.gz$/,"");try{this[C]&&this.isbinary.has(C)?(typeof A=="string"&&(A=(0,a.base64ToArray)(A)),A=(0,p.inflate)(A)):A=new TextDecoder("utf-8").decode((0,p.inflate)(A))}catch(K){console.error(K)}}if(this[C]&&(this.isbinary.has(C)&&typeof A=="string"&&(A=(0,a.base64ToArray)(A)),this[C](A)),j){if(j.negate)for(let K=0,Ne=this.data.length;K<Ne;K++)this.data[K]=-this.data[K];if(j.normalize){var V=0;for(let K=0,Ne=this.data.length;K<Ne;K++)V+=this.data[K];var J=V/this.data.length;V=0;for(let K=0,Ne=this.data.length;K<Ne;K++){var re=this.data[K]-J;V+=re*re}var ie=V/this.data.length;for(let K=0,Ne=this.data.length;K<Ne;K++)this.data[K]=(this.data[K]-J)/ie}}}getIndex(A,C,j){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new o.Matrix4().getInverse(this.matrix));var V=new o.Vector3(A,C,j);A=(V=V.applyMatrix4(this.inversematrix)).x,C=V.y,j=V.z}else A-=this.origin.x,C-=this.origin.y,j-=this.origin.z,A/=this.unit.x,C/=this.unit.y,j/=this.unit.z;return A=Math.round(A),C=Math.round(C),j=Math.round(j),A<0||A>=this.size.x||C<0||C>=this.size.y||j<0||j>=this.size.z?-1:A*this.size.y*this.size.z+C*this.size.z+j}getVal(A,C,j){let V=this.getIndex(A,C,j);return V<0?0:this.data[V]}cube(A){var C=A.split(/\r?\n/);if(!(C.length<6)){var j=(0,d.CUBE)(A,{}).modelData[0].cryst,V=C[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),J=parseFloat(V[0]),re=Math.abs(J);this.origin=j.origin,this.size=j.size,this.unit=j.unit,this.matrix=j.matrix4;var ie=6;J<0&&ie++;var K=C.splice(re+ie).join(" "),Ne=(K=K.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=Float32Array.from(Ne,parseFloat)}}ccp4(A){var C={};A=new Int8Array(A);var j=new Int32Array(A.buffer,0,56),V=new Float32Array(A.buffer,0,56),J=new DataView(A.buffer);if(C.MAP=String.fromCharCode(J.getUint8(208),J.getUint8(209),J.getUint8(210),J.getUint8(211)),C.MACHST=[J.getUint8(212),J.getUint8(213)],C.MACHST[0]===17&&C.MACHST[1]===17)for(var re=A.byteLength,ie=0;ie<re;ie+=4)J.setFloat32(ie,J.getFloat32(ie),!0);C.NX=j[0],C.NY=j[1],C.NZ=j[2],C.MODE=j[3],C.NXSTART=j[4],C.NYSTART=j[5],C.NZSTART=j[6],C.MX=j[7],C.MY=j[8],C.MZ=j[9],C.xlen=V[10],C.ylen=V[11],C.zlen=V[12],C.alpha=V[13],C.beta=V[14],C.gamma=V[15],C.MAPC=j[16],C.MAPR=j[17],C.MAPS=j[18],C.DMIN=V[19],C.DMAX=V[20],C.DMEAN=V[21],C.ISPG=j[22],C.NSYMBT=j[23],C.LSKFLG=j[24],C.originX=V[49],C.originY=V[50],C.originZ=V[51],C.ARMS=V[54];var K=C,Ne=[K.xlen,0,0],G=[K.ylen*Math.cos(Math.PI/180*K.gamma),K.ylen*Math.sin(Math.PI/180*K.gamma),0],se=[K.zlen*Math.cos(Math.PI/180*K.beta),K.zlen*(Math.cos(Math.PI/180*K.alpha)-Math.cos(Math.PI/180*K.gamma)*Math.cos(Math.PI/180*K.beta))/Math.sin(Math.PI/180*K.gamma),0];se[2]=Math.sqrt(K.zlen*K.zlen*Math.sin(Math.PI/180*K.beta)*Math.sin(Math.PI/180*K.beta)-se[1]*se[1]);var He=[0,Ne,G,se],Fe=[0,K.MX,K.MY,K.MZ],Xe=[0,K.MAPC,K.MAPR,K.MAPS];this.matrix=new o.Matrix4,this.matrix.set(He[Xe[1]][0]/Fe[Xe[1]],He[Xe[2]][0]/Fe[Xe[2]],He[Xe[3]][0]/Fe[Xe[3]],0,He[Xe[1]][1]/Fe[Xe[1]],He[Xe[2]][1]/Fe[Xe[2]],He[Xe[3]][1]/Fe[Xe[3]],0,He[Xe[1]][2]/Fe[Xe[1]],He[Xe[2]][2]/Fe[Xe[2]],He[Xe[3]][2]/Fe[Xe[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(K.NXSTART+K.originX,K.NYSTART+K.originY,K.NZSTART+K.originZ)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1),this.size={x:C.NX,y:C.NY,z:C.NZ},this.dimensionorder=[C.MAPC,C.MAPR,C.MAPS];var be=new Float32Array(A.buffer,1024+C.NSYMBT),ta=C.NX,pn=C.NY,mr=C.NZ;this.data=new Float32Array(ta*pn*mr);for(let bp=0;bp<ta;bp++)for(let Sp=0;Sp<pn;Sp++)for(let _r=0;_r<mr;_r++)this.data[(bp*pn+Sp)*mr+_r]=be[(_r*pn+Sp)*ta+bp]}}},864:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(546),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(848),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(222),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75);function extend(r,e){for(var t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(r[t]=e[t]);return r}function deepCopy(r){let e,t,a;if(r==null)return{};if(typeof r!="object"||r===null)return r;for(a in e=Array.isArray(r)?[]:{},r)t=r[a],e[a]=deepCopy(t);return e}function isNumeric(r){var e=typeof r;return(e==="number"||e==="string")&&!isNaN(r-parseFloat(r))}function isEmptyObject(r){return Object.keys(r).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(r){r&&(!r.volformat||r.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData||(r.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(r.voldata,r.volformat)),r.volscheme&&(r.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(r.volscheme)))}function getExtent(r,e){var t,a,o,c,d,p,_,S,A,C,j=!e;if(t=a=o=9999,c=d=p=-9999,_=S=A=C=0,r.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var V=0;V<r.length;V++){var J=r[V];if(J!==void 0&&isFinite(J.x)&&isFinite(J.y)&&isFinite(J.z)&&(C++,_+=J.x,S+=J.y,A+=J.z,t=t<J.x?t:J.x,a=a<J.y?a:J.y,o=o<J.z?o:J.z,c=c>J.x?c:J.x,d=d>J.y?d:J.y,p=p>J.z?p:J.z,J.symmetries&&j))for(var re=0;re<J.symmetries.length;re++)C++,_+=J.symmetries[re].x,S+=J.symmetries[re].y,A+=J.symmetries[re].z,t=t<J.symmetries[re].x?t:J.symmetries[re].x,a=a<J.symmetries[re].y?a:J.symmetries[re].y,o=o<J.symmetries[re].z?o:J.symmetries[re].z,c=c>J.symmetries[re].x?c:J.symmetries[re].x,d=d>J.symmetries[re].y?d:J.symmetries[re].y,p=p>J.symmetries[re].z?p:J.symmetries[re].z}return[[t,a,o],[c,d,p],[_/C,S/C,A/C]]}function getPropertyRange(r,e){for(var t=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=0,c=r.length;o<c;o++){var d=getAtomProperty(r[o],e);d!=null&&(d<t&&(t=d),d>a&&(a=d))}return isFinite(t)||isFinite(a)?isFinite(t)?isFinite(a)||(a=t):t=a:t=a=0,[t,a]}class PausableTimer{constructor(e,t,a){this.total_time_run=0,this.fn=e,this.arg=a,this.countdown=t,this.start_time=new Date().getTime(),this.ident=setTimeout(e,t,a)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(r){for(var e=window.atob(r),t=e.length,a=new Uint8Array(t),o=0;o<t;o++)a[o]=e.charCodeAt(o);return a}function getAtomProperty(r,e){var t=null;return r.properties&&r.properties[e]!==void 0?t=r.properties[e]:r[e]!==void 0&&(t=r[e]),t}function mergeGeos(r,e){var t=e.geometry;t!==void 0&&r.geometryGroups.push(t.geometryGroups[0])}function specStringToObject(r){if(typeof r=="object"||r===void 0||r==null)return r;try{return JSON.parse(r)}catch{}var e=function(j){return isNumeric(j)?Math.floor(parseFloat(j))==parseInt(j)||j.indexOf(".")>=0?parseFloat(j):parseInt(j):j==="true"||j!=="false"&&j},t={};if((r=r.replace(/%7E/g,"~"))==="all")return t;for(var a=r.split(";"),o=0;o<a.length;o++){var c=a[o].split(":"),d=c[0],p={},_=c[1];if(_)if((_=_.replace(/~/g,"=")).indexOf("=")!==-1)for(var S=_.split(","),A=0;A<S.length;A++){var C=S[A].split("=",2);p[C[0]]=e(C[1])}else p=_.indexOf(",")!==-1?_.split(","):e(_);t[d]=p}return t}function checkStatus(r){if(!r.ok)throw new Error(`HTTP ${r.status} - ${r.statusText}`);return r}function get(r,e){var t=fetch(r).then(checkStatus).then(a=>a.text());return e?t.then(e):t}function getbin(r,e,t,a){var o;return o=t=="POST"?fetch(r,{method:"POST",body:a}).then(c=>checkStatus(c)).then(c=>c.arrayBuffer()):fetch(r).then(c=>checkStatus(c)).then(c=>c.arrayBuffer()),e?o.then(e):o}function download(r,e,t,a){var o="",c="",d="",p=null,_=e.addModel();if(r.indexOf(":")<0&&(r=r.length==4?"pdb:"+r:isNaN(r)?"url:"+r:"cid:"+r),r.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),r="bcif:"+r.slice(5)),r.substring(0,5)==="bcif:")r=r.substring(5).toUpperCase(),d="https://models.rcsb.org/"+r+".bcif.gz",t&&t.noComputeSecondaryStructure===void 0&&(t.noComputeSecondaryStructure=!0),p=new Promise(function(A){getbin(d).then(function(C){_.addMolData(C,"bcif.gz",t),e.zoomTo(),e.render(),A(_)},function(){console.error("fetch of "+d+" failed.")})});else{if(r.substring(0,4)==="pdb:"){if(o="bcif",t&&t.format&&(o=t.format),t&&t.noComputeSecondaryStructure===void 0&&(t.noComputeSecondaryStructure=!0),!(r=r.substring(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");o=="bcif"?d="https://models.rcsb.org/"+r.toUpperCase()+".bcif.gz":(c=t&&t.pdbUri?t.pdbUri:"https://files.rcsb.org/view/",d=c+r+"."+o)}else if(r.substring(0,4)=="cid:"){if(o="sdf",!(r=r.substring(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");d="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+r+"/SDF?record_type=3d"}else r.substring(0,4)=="url:"&&(d=r.substring(4),o=d);var S=function(A){_.addMolData(A,o,t),e.zoomTo(),e.render()};p=new Promise(function(A){o=="bcif"?getbin(d).then(function(C){S(C),A(_)}).catch(function(){c=t&&t.pdbUri?t.pdbUri:"https://files.rcsb.org/view/",d=c+r+".pdb",o="pdb",console.warn("falling back to pdb format"),get(d).then(function(C){S(C),A(_)}).catch(function(C){S(""),A(_),console.error("fetch of "+d+" failed: "+C.statusText)})}):get(d).then(function(C){S(C),A(_)}).catch(function(C){S(""),A(_),console.error("fetch of "+d+" failed: "+C.statusText)})})}return a?(p.then(function(A){a(A)}),_):p}function getColorFromStyle(r,e){let t=e.colorscheme;if(_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]!==void 0)t=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t];else if(typeof t=="string"&&t.endsWith("Carbon")){let c=t.substring(0,t.lastIndexOf("Carbon")).toLowerCase();if(_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[c]!==void 0){let d=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);d.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[c],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]={prop:"elem",map:d},t=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]}}let a=r.color;if(e.color!==void 0&&e.color!="spectrum"&&(a=e.color),t!==void 0){let c,d;if(_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[t]!==void 0)t=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[t],t[r[t.prop]]!==void 0&&(a=t.map[r[t.prop]]);else if(t[r[t.prop]]!==void 0)a=t.map[r[t.prop]];else if(t.prop!==void 0&&t.gradient!==void 0){c=t.prop;var o=t.gradient;o instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(o=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(t));let p=o.range()||[-1,1];d=getAtomProperty(r,c),d!=null&&(a=o.valueToHex(d,p))}else t.prop!==void 0&&t.map!==void 0?(c=t.prop,d=getAtomProperty(r,c),t.map[d]!==void 0&&(a=t.map[d])):e.colorscheme[r.elem]!==void 0?a=e.colorscheme[r.elem]:console.warn("Could not interpret colorscheme "+t)}else e.colorfunc!==void 0&&(a=e.colorfunc(r));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(a)}function getElement(r){let e=r;return typeof r=="string"?e=document.querySelector("#"+r):typeof r=="object"&&r.get&&(e=r.get(0)),e}function inflateString(r,e=!0){let t;return t=typeof r=="string"?new TextEncoder().encode(r):new Uint8Array(r),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(t,{to:e?"string":null})}},865:(r,e,t)=>{t.r(e),t.d(e,{CUBE:()=>d});var a=t(378),o=t(392);const c={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"};function d(p,_){_=_||{};const S=[[]];let A=p.split(/\r?\n/);const C=_.assignBonds===void 0||_.assignBonds;if(A.length<6)return S;let j=A[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const V=Math.abs(parseFloat(j[0]));let J={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const re=J.origin=new a.Vector3(parseFloat(j[1]),parseFloat(j[2]),parseFloat(j[3]));j=A[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),j=A[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const ie=j[0]>0?.529177:1;re.multiplyScalar(ie);const K=Math.abs(j[0]),Ne=new a.Vector3(parseFloat(j[1]),parseFloat(j[2]),parseFloat(j[3])).multiplyScalar(ie);j=A[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const G=Math.abs(j[0]),se=new a.Vector3(parseFloat(j[1]),parseFloat(j[2]),parseFloat(j[3])).multiplyScalar(ie);j=A[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const He=Math.abs(j[0]),Fe=new a.Vector3(parseFloat(j[1]),parseFloat(j[2]),parseFloat(j[3])).multiplyScalar(ie);if(J.size={x:K,y:G,z:He},J.unit=new a.Vector3(Ne.x,se.y,Fe.z),Ne.y!=0||Ne.z!=0||se.x!=0||se.z!=0||Fe.x!=0||Fe.y!=0){J.matrix4=new a.Matrix4(Ne.x,se.x,Fe.x,0,Ne.y,se.y,Fe.y,0,Ne.z,se.z,Fe.z,0,0,0,0,1);let bp=new a.Matrix4().makeTranslation(re.x,re.y,re.z);J.matrix4=J.matrix4.multiplyMatrices(bp,J.matrix4),J.matrix=J.matrix4.matrix3FromTopLeft(),J.origin=new a.Vector3(0,0,0),J.unit=new a.Vector3(1,1,1)}S.modelData=[{cryst:J}],A=A.splice(6,V);for(var Xe=S[S.length-1].length,be=Xe+A.length,ta=Xe;ta<be;++ta){var pn={};pn.serial=ta;var mr=A[ta-Xe].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");pn.elem=c[mr[0]],pn.x=parseFloat(mr[2])*ie,pn.y=parseFloat(mr[3])*ie,pn.z=parseFloat(mr[4])*ie,pn.hetflag=!0,pn.bonds=[],pn.bondOrder=[],pn.properties={},S[S.length-1].push(pn)}if(C)for(let bp=0;bp<S.length;bp++)(0,o.assignBonds)(S[bp],_);return S}},972:(r,e,t)=>{var a=t(981),o=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var d=new a.Buf8(256),p=0;p<256;p++)d[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;function _(S,A){if(A<65534&&(S.subarray&&c||!S.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(S,A));for(var C="",j=0;j<A;j++)C+=String.fromCharCode(S[j]);return C}d[254]=d[254]=1,e.string2buf=function(S){var A,C,j,V,J,re=S.length,ie=0;for(V=0;V<re;V++)(64512&(C=S.charCodeAt(V)))==55296&&V+1<re&&(64512&(j=S.charCodeAt(V+1)))==56320&&(C=65536+(C-55296<<10)+(j-56320),V++),ie+=C<128?1:C<2048?2:C<65536?3:4;for(A=new a.Buf8(ie),J=0,V=0;J<ie;V++)(64512&(C=S.charCodeAt(V)))==55296&&V+1<re&&(64512&(j=S.charCodeAt(V+1)))==56320&&(C=65536+(C-55296<<10)+(j-56320),V++),C<128?A[J++]=C:C<2048?(A[J++]=192|C>>>6,A[J++]=128|63&C):C<65536?(A[J++]=224|C>>>12,A[J++]=128|C>>>6&63,A[J++]=128|63&C):(A[J++]=240|C>>>18,A[J++]=128|C>>>12&63,A[J++]=128|C>>>6&63,A[J++]=128|63&C);return A},e.buf2binstring=function(S){return _(S,S.length)},e.binstring2buf=function(S){for(var A=new a.Buf8(S.length),C=0,j=A.length;C<j;C++)A[C]=S.charCodeAt(C);return A},e.buf2string=function(S,A){var C,j,V,J,re=A||S.length,ie=new Array(2*re);for(j=0,C=0;C<re;)if((V=S[C++])<128)ie[j++]=V;else if((J=d[V])>4)ie[j++]=65533,C+=J-1;else{for(V&=J===2?31:J===3?15:7;J>1&&C<re;)V=V<<6|63&S[C++],J--;J>1?ie[j++]=65533:V<65536?ie[j++]=V:(V-=65536,ie[j++]=55296|V>>10&1023,ie[j++]=56320|1023&V)}return _(ie,j)},e.utf8border=function(S,A){var C;for((A=A||S.length)>S.length&&(A=S.length),C=A-1;C>=0&&(192&S[C])==128;)C--;return C<0||C===0?A:C+d[S[C]]>A?C:A}},981:(r,e)=>{var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function a(d,p){return Object.prototype.hasOwnProperty.call(d,p)}e.assign=function(d){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var _=p.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var S in _)a(_,S)&&(d[S]=_[S])}}return d},e.shrinkBuf=function(d,p){return d.length===p?d:d.subarray?d.subarray(0,p):(d.length=p,d)};var o={arraySet:function(d,p,_,S,A){if(p.subarray&&d.subarray)d.set(p.subarray(_,_+S),A);else for(var C=0;C<S;C++)d[A+C]=p[_+C]},flattenChunks:function(d){var p,_,S,A,C,j;for(S=0,p=0,_=d.length;p<_;p++)S+=d[p].length;for(j=new Uint8Array(S),A=0,p=0,_=d.length;p<_;p++)C=d[p],j.set(C,A),A+=C.length;return j}},c={arraySet:function(d,p,_,S,A){for(var C=0;C<S;C++)d[A+C]=p[_+C]},flattenChunks:function(d){return[].concat.apply([],d)}};e.setTyped=function(d){d?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,c))},e.setTyped(t)}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(r,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},__webpack_require__(16),__webpack_require__(185);var __webpack_exports__=__webpack_require__(307);return __webpack_exports__})(),module.exports=factory()})(_3DmolMin);const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69},$3Dmol$1=window.$3Dmol;function mod(r,e){return(r%e+e)%e}function setCustomBondLengths(){function r(e,t){$3Dmol$1.setBondLength(e,t)}Object.keys(covalentRadii).forEach(e=>{r(e,1.05*covalentRadii[e])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:r,cifText:e},t)=>{const a=reactExports.useRef(null),o=reactExports.useRef(null),c=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const d=()=>{if(o.current=a.current.addModel(),e){let S=$3Dmol$1.Parsers.CIF(e),A=S[0],C=S.modelData[0].cryst;o.current.setCrystData(C.a,C.b,C.c,C.alpha,C.beta,C.gamma);let j=o.current.modelData.cryst.matrix,V=new $3Dmol$1.Matrix3().getInverse3(j),J=[],re=[];A.forEach(Ne=>{let G=new $3Dmol$1.Vector3(Ne.x,Ne.y,Ne.z);if(r.packedCell){let se=G.clone().applyMatrix3(V);G=new $3Dmol$1.Vector3(mod(se.x,1),mod(se.y,1),mod(se.z,1)).applyMatrix3(j)}re.push({elem:Ne.elem,x:G.x,y:G.y,z:G.z})});let ie=.03,K=r.supercell;for(let Ne=-1;Ne<K[0]+1;Ne++)for(let G=-1;G<K[1]+1;G++)for(let se=-1;se<K[2]+1;se++){let He=new $3Dmol$1.Vector3(Ne,G,se);if(He.applyMatrix3(j),Ne==-1||Ne==K[0]||G==-1||G==K[1]||se==-1||se==K[2])if(r.packedCell)re.forEach(Fe=>{let Xe=new $3Dmol$1.Vector3(Fe.x,Fe.y,Fe.z);Xe.add(He);let be=Xe.clone().applyMatrix3(V);be.x>-ie&&be.x<K[0]+ie&&be.y>-ie&&be.y<K[1]+ie&&be.z>-ie&&be.z<K[2]+ie&&J.push({elem:Fe.elem,x:Xe.x,y:Xe.y,z:Xe.z})});else continue;else re.forEach(Fe=>{J.push({elem:Fe.elem,x:Fe.x+He.x,y:Fe.y+He.y,z:Fe.z+He.z})})}o.current.addAtoms(J)}},p=()=>{a.current.removeAllModels(),d();let S={sphere:{scale:.3,colorscheme:"Jmol"}};r.vdwRadius&&(S.sphere.scale=1),r.bonds&&(S.stick={radius:.15,colorscheme:"Jmol"}),a.current.setStyle(S),a.current.addUnitCell(o.current),o.current.assignBonds(),a.current.removeAllLabels(),r.atomLabels&&o.current.atoms.forEach(A=>{a.current.addLabel(A.elem,{position:{x:A.x,y:A.y,z:A.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),a.current.zoomTo(),a.current.zoom(1.4),a.current.render()},_=(S,A)=>{S=="camera"&&(A=="x"&&a.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),A=="y"&&a.current.setView([0,0,0,0,.5,.5,.5,.5]),A=="z"&&a.current.setView([0,0,0,0,0,0,0,1]),a.current.zoomTo(),a.current.zoom(1.4))};return reactExports.useImperativeHandle(t,()=>({handleEvent:_})),reactExports.useEffect(()=>{let S={backgroundColor:"white",orthographic:!0};a.current=$3Dmol$1.createViewer(c.current,S),p()},[]),reactExports.useEffect(()=>{a.current&&p()},[r,e]),jsxRuntimeExports.jsx("div",{id:c.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:r,setMouseEnabledState:e,visualizerRef:t,viewerParams:a,cifText:o})=>{let c="structure-window";r||(c+=" disable-mouse");let d="Click to interact",p="mouse-disabled-note";return r&&(p="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>e(!0),children:jsxRuntimeExports.jsx("div",{className:c,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:t,viewerParams:a,cifText:o})})}),jsxRuntimeExports.jsx("div",{className:p,onClick:()=>e(!r),children:d})]})},StructureVisualizer=r=>{const[e,t]=reactExports.useState({supercell:r.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[a,o]=reactExports.useState(!1),c=reactExports.useRef(null),d=reactExports.useRef(null);reactExports.useEffect(()=>{const A=C=>{d&&!d.current.contains(C.target)&&o(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]);const p=A=>{o(A)},_=(A,C)=>{t(j=>({...j,[A]:C}))},S=(A,C)=>{c.current.handleEvent(A,C)};return jsxRuntimeExports.jsxs("div",{ref:d,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:c,viewerParams:e,cifText:r.cifText,mouseEnabled:a,setMouseEnabledState:p}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:e,onViewerParamChange:_,onViewerEvent:S})]})},defaultFormats=[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}];function StructDownloadButton(r){const e=`${r.aiida_rest_url}/nodes/${r.uuid}/download`,t=r.download_formats||defaultFormats,[a,o]=reactExports.useState(!1),c=reactExports.useRef(null);return reactExports.useEffect(()=>{function d(p){c.current&&!c.current.contains(p.target)&&o(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),jsxRuntimeExports$1.jsxs("div",{ref:c,className:"download-wrapper",children:[jsxRuntimeExports$1.jsx("button",{type:"button",className:"download-button",title:"Download",onClick:()=>o(!a),children:jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports$1.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports$1.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports$1.jsx("path",{d:"m7 10 5 5 5-5"})]})}),a&&jsxRuntimeExports$1.jsx("div",{className:"download-menu-container",children:jsxRuntimeExports$1.jsx("ul",{className:"download-menu",children:t.map(({format:d,label:p})=>jsxRuntimeExports$1.jsx("li",{children:jsxRuntimeExports$1.jsx("a",{href:`${e}?download_format=${d}`,children:p})},d))})})]})}function getVol(r,e=4){const t=(c,d)=>[c[1]*d[2]-c[2]*d[1],c[2]*d[0]-c[0]*d[2],c[0]*d[1]-c[1]*d[0]],a=r.attributes.cell,o=Math.abs(a[0].reduce((c,d,p)=>c+d*t(a[1],a[2])[p],0));return parseFloat(o.toFixed(e))}function formatLattice(r){const e=r.attributes.cell,t=Math.hypot(...e[0]),a=Math.hypot(...e[1]),o=Math.hypot(...e[2]);return{a:t,b:a,c:o}}function StructureDataVisualiser({nodeData:r,restApiUrl:e}){const t=r.downloadByFormat?.cif,[a,o]=reactExports.useState(null),[c,d]=reactExports.useState(!0),[p,_]=reactExports.useState(null),[S,A]=reactExports.useState(!1),C=reactExports.useRef(null);reactExports.useEffect(()=>{const Ne=new ResizeObserver(([G])=>{A(G.contentRect.width<600)});return C.current&&Ne.observe(C.current),()=>Ne.disconnect()},[]);const j=reactExports.useCallback(async()=>{if(!t){_("No CIF file available"),d(!1);return}d(!0),_(null);try{const Ne=await fetch(t);if(!Ne.ok)throw new Error(`HTTP error: ${Ne.status}`);const G=await Ne.text();o(G)}catch(Ne){_(Ne.message)}finally{d(!1)}},[t]);reactExports.useEffect(()=>{j()},[j]);const V=r.label==="CifData"?[{format:"cif",label:"CIF"}]:[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}],J=r.derived_properties&&Object.keys(r.derived_properties).length>0,re=r.attributes?.cell?formatLattice(r):null,ie=J?r.derived_properties.dimensionality?.value:re?getVol(r):null,K=r.attributes?.sites?.length||0;return c?jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports$1.jsx(Spinner,{})}):p?jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:p,onRetry:j})}):jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:jsxRuntimeExports$1.jsxs("div",{ref:C,className:`ae:grid ae:gap-4 ${S?"ae:grid-cols-1":"ae:grid-cols-[1fr_auto]"}`,children:[jsxRuntimeExports$1.jsxs("div",{className:"ae:w-full ae:h-[500px] ae:relative ae:bg-slate-100 ae:shadow-sm ae:overflow-hidden",children:[jsxRuntimeExports$1.jsx("div",{className:"ae:absolute ae:top-4 ae:right-4 ae:z-50",children:jsxRuntimeExports$1.jsx(StructDownloadButton,{aiida_rest_url:e,uuid:r.aiida.uuid,download_formats:V})}),jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:h-full",children:jsxRuntimeExports$1.jsx(StructureVisualizer,{cifText:a,initSupercell:[2,2,2]})})]}),jsxRuntimeExports$1.jsx("div",{className:"ae:flex ae:flex-col ae:space-y-4 ae:max-w-xs",children:J&&jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsxs(CardContainer,{children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Cell Volume:"})," ",ie?.toFixed(4)," Å³"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Formula:"})," ",r.derived_properties.formula]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Dimensionality:"})," ",r.derived_properties.dimensionality?.description||"N/A"]})]}),re&&jsxRuntimeExports$1.jsxs(CardContainer,{children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Lattice a:"})," ",re.a.toFixed(4)," Å"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Lattice b:"})," ",re.b.toFixed(4)," Å"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Lattice c:"})," ",re.c.toFixed(4)," Å"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Number of Sites:"})," ",K]})]})]})})]})})}function SimplePlot({data:r,layout:e,config:t={},style:a={width:"100%",height:"400"}}){const o=reactExports.useRef(null),c=reactExports.useMemo(()=>r,[JSON.stringify(r)]),d=reactExports.useMemo(()=>e,[JSON.stringify(e)]),p=reactExports.useMemo(()=>t,[JSON.stringify(t)]);return reactExports.useEffect(()=>{const _=o.current;if(!_)return;const S=c.length;let A=0;c.forEach(j=>{A+=(j.x?.length||0)+(j.y?.length||0)+(j.z?.length||0)}),console.debug(`Rendering ${S} traces with ~${A} data points`);const C=performance.now();Plotly.newPlot(_,c,d,{responsive:!0,...p}).then(()=>{const j=performance.now();console.log(`Plotly rendering took ${(j-C).toFixed(2)} ms for ${S} traces (~${A} points)`)})},[c,d,p]),jsxRuntimeExports$1.jsx("div",{ref:o,style:a})}function getRadialFunctionsTraces(r){return!r||!r.atomic_wave_functions||!r.radial_grid?[]:r.atomic_wave_functions.map(t=>{const a=t.label??"",o=t.angular_momentum!=null?`(ℓ=${t.angular_momentum}`:"",c=t.occupation!=null?`, occ=${t.occupation})`:t.angular_momentum!=null?")":"";return{x:r.radial_grid,y:t.radial_function,type:"scatter",mode:"lines",name:`${a} ${o}${c}`}})}function getBetaProjectorsTraces(r){return!r||!r.beta_projectors||!r.radial_grid?[]:r.beta_projectors.map(t=>{const a=t.label??"",o=t.angular_momentum!=null?`(ℓ=${t.angular_momentum}`:"",c=t.ultrasoft_cutoff_radius!=null?`, cutoff=${t.ultrasoft_cutoff_radius})`:t.angular_momentum!=null?")":"";return{x:r.radial_grid,y:t.radial_function,type:"scatter",mode:"lines",name:`${a} ${o}${c}`}})}function getChargeDensitiesTraces(r){if(!r||!r.radial_grid)return[];const e={x:r.radial_grid,y:r.total_charge_density,type:"scatter",mode:"lines",name:"Valence Pseudocharge density"};return[{x:r.radial_grid,y:r.core_charge_density,type:"scatter",mode:"lines",name:"Core Pseudocharge density"},e].filter(a=>Array.isArray(a.y)&&a.y.length>0)}function UpfDataVisualiser({nodeData:r}){const[e,t]=reactExports.useState(!0),[a,o]=reactExports.useState(null),[c,d]=reactExports.useState(null),p=r.downloadByFormat?.json,_=reactExports.useMemo(()=>getRadialFunctionsTraces(c),[c]),S=reactExports.useMemo(()=>getBetaProjectorsTraces(c),[c]),A=reactExports.useMemo(()=>getChargeDensitiesTraces(c),[c]),C=reactExports.useCallback(async()=>{if(!p){o("No JSON path available"),t(!1);return}t(!0),o(null);try{const ie=await fetch(p);if(!ie.ok)throw new Error(`HTTP ${ie.status}`);const K=await ie.json();d(K.pseudo_potential)}catch(ie){console.error("Failed to fetch UPF JSON:",ie),o(ie.message||"Failed to load UPF data")}finally{t(!1)}},[p]);if(reactExports.useEffect(()=>{C()},[C]),e)return jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports$1.jsx(Spinner,{})});if(a)return jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:a,onRetry:C})});if(!c)return null;const{header:j,radial_grid:V}=c,J={x:.97,y:.95,xanchor:"right",yanchor:"top",bordercolor:"#ccc",borderwidth:1},re={t:20,b:40,l:50,r:20};return jsxRuntimeExports$1.jsxs("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:[jsxRuntimeExports$1.jsxs(CardContainer,{header:"Metadata",children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Element:"})," ",j?.element||"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Valence Electrons:"})," ",j?.z_valence??"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Pseudopotential Type:"})," ",j?.pseudo_type||"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"ae:font-medium",children:"Functional:"})," ",j?.functional||"N/A"]})]}),jsxRuntimeExports$1.jsx(CardContainer,{header:"Orbital radial functions",className:"ae:!px-1.5 ae:!py-2",childrenClassName:"ae:!p-0",children:jsxRuntimeExports$1.jsx(SimplePlot,{data:_,layout:{autosize:!0,height:400,margin:re,xaxis:{title:{text:"Radius (Bohr)"},range:[0,20]},yaxis:{title:{text:"φ(r)"}},legend:J},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:400}})}),jsxRuntimeExports$1.jsx(CardContainer,{header:"Beta projectors",className:"ae:!px-1.5 ae:!py-2",childrenClassName:"ae:!p-0",children:jsxRuntimeExports$1.jsx(SimplePlot,{data:S,layout:{autosize:!0,height:400,margin:re,xaxis:{title:{text:"Radius (Bohr)"}},yaxis:{title:{text:"φ(r)"}},legend:J},config:{responsive:!0}})}),jsxRuntimeExports$1.jsx(CardContainer,{header:"Charge densities",className:"ae:!px-1.5 ae:!py-2",childrenClassName:"ae:!p-0",children:jsxRuntimeExports$1.jsx(SimplePlot,{data:A,layout:{autosize:!0,height:400,margin:re,xaxis:{title:{text:"Radius (Bohr)"},range:[0,5]},yaxis:{title:{text:"φ(r)"}},legend:J},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"100%"}})})]})}function FileTable({title:r,dataArray:e=[],onView:t}){if(!Array.isArray(e)||e.length===0)return null;const a=["File","Download","View"],o=e.map(c=>({File:c.name,Download:jsxRuntimeExports$1.jsx("a",{href:c.downloadUrl||"#",download:c.name||void 0,rel:"noopener noreferrer",className:"ae:text-blue-600 ae:hover:text-blue-800 ae:transition-colors ae:duration-75",children:jsxRuntimeExports$1.jsx(DownloadIcon,{size:18,className:"ae:hover:scale-105 ae:transition-all ae:duration-75"})}),View:jsxRuntimeExports$1.jsx("button",{type:"button",onClick:()=>t?.(c.name,c.downloadUrl),className:"ae:text-green-600 ae:hover:text-green-800 ae:transition-colors ae:duration-75",children:jsxRuntimeExports$1.jsx(ViewIcon,{size:18,className:"ae:hover:scale-105 ae:transition-all ae:duration-75"})})}));return jsxRuntimeExports$1.jsx("div",{children:jsxRuntimeExports$1.jsx(DataTable,{title:r,columns:a,data:o,sortableCols:["File"]})})}function CalcJobVisualiser({nodeData:r={}}){const[e,t]=reactExports.useState(null),[a,o]=reactExports.useState(null),[c,d]=reactExports.useState(null),[p,_]=reactExports.useState(!1),S=async(C,j)=>{try{const J=await(await fetch(j)).text();o(J),d(C),_(!0)}catch(V){console.error("Error loading preview:",V),o("Failed to load preview."),d(C),_(!0)}},A=jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsx(FileTable,{title:"Input Files (in this node)",dataArray:r.files?.input_files||[],onView:S}),jsxRuntimeExports$1.jsx(FileTable,{title:"Output Files (retrieved)",dataArray:r.files?.output_files||[],onView:S})]});return jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:flex-col ae:px-3 ae:py-2 ae:gap-2 ae:lg:gap-4",children:[A,jsxRuntimeExports$1.jsx(Overlay,{active:p,onClose:()=>_(!1),title:`Preview: ${c}`,children:jsxRuntimeExports$1.jsx("pre",{className:"ae:overflow-y-auto ae:whitespace-pre-wrap ae:text-sm ae:flex-1",children:a})})]})}const RICH_TYPES={StructureData:StructureDataVisualiser,CifData:StructureDataVisualiser,BandsData:BandsDataVisualiser,UpfData:UpfDataVisualiser,KpointsData:KpointsDataVisualiser,CalcJobNode:CalcJobVisualiser};function geRichVisualiser(r,e){if(!e||!e.data)return null;const{label:t,aiida:a}=e.data,o=RICH_TYPES[t];return o?jsxRuntimeExports$1.jsx(o,{nodeData:e.data,restApiUrl:r},a?.uuid):null}function VisualiserPane({restApiUrl:r,selectedNode:e,userData:t,downloadFormats:a}){let o=geRichVisualiser(r,e);const[c,d]=reactExports.useState(o?"rich":"raw");if(reactExports.useEffect(()=>{d(o?"rich":"raw")},[e]),!e)return jsxRuntimeExports$1.jsx("div",{className:"ae:w-full ae:h-full ae:p-4",children:jsxRuntimeExports$1.jsx("p",{children:"Click a node to see top level details. Double click to traverse the graph."})});const p=!o;return jsxRuntimeExports$1.jsxs("div",{className:"ae:w-full ae:h-full ae:flex ae:flex-col ae:overflow-hidden",children:[jsxRuntimeExports$1.jsx("div",{className:"ae:px-4 ae:py-3 ae:md:py-2 ae:bg-slate-50",children:jsxRuntimeExports$1.jsx(FormattedMetaData,{nodeData:e.data,userData:t})}),jsxRuntimeExports$1.jsxs("div",{className:"ae:flex ae:border-y ae:bg-slate-100",children:[jsxRuntimeExports$1.jsx("button",{disabled:p,className:`ae:px-4 ae:py-2 ${c==="rich"?"ae:border-b-2 ae:border-slate-500 ae:transition ae:font-medium":p?"ae:text-gray-400 ae:cursor-not-allowed":""}`,onClick:()=>!p&&d("rich"),children:"Rich View"}),jsxRuntimeExports$1.jsx("button",{className:`ae:px-4 ae:py-2 ${c==="raw"?"ae:border-b-2 ae:border-slate-500 ae:transition ae:font-medium":""}`,onClick:()=>d("raw"),children:"Raw View"})]}),jsxRuntimeExports$1.jsxs("div",{className:"ae:flex-1 ae:overflow-auto ae:bg-slate-50",children:[c==="rich"&&o,c==="raw"&&jsxRuntimeExports$1.jsx(RawDataVisualiser,{nodeData:e.data,downloadFormats:a})]})]})}function AiidaExplorer(r){return jsxRuntimeExports$1.jsx(AiidaExplorerInner,{...r},r.restApiUrl)}function AiidaExplorerInner({restApiUrl:r,rootNode:e,defaultRootNode:t="",onRootNodeChange:a=()=>{},debugMode:o=!1}){const[c,d]=useRootNode(e,t,a),p=reactExports.useRef(null),_=reactExports.useRef(null),S=useMediaQuery("(min-width: 1000px)"),[A,C]=reactExports.useState(!1),[j,V]=reactExports.useState(null),[J,re]=reactExports.useState(null),[ie,K]=reactExports.useState(null),[Ne,G]=reactExports.useState([]),[se,He]=reactExports.useState([]),[Fe,Xe]=reactExports.useState([]),[be,ta]=reactExports.useState(null),[pn,mr]=reactExports.useState({}),[bp,Sp]=reactExports.useState("groupsview"),_r=10,xs=reactExports.useRef(!0);reactExports.useEffect(()=>{xs.current&&!c?(xs.current=!1,Sp("groupsview")):Sp(c?null:"groupsview")},[c]),reactExports.useEffect(()=>{fetchUsers(r).then(re)},[r]),reactExports.useEffect(()=>{fetchDownloadFormats(r).then(K)},[r]),reactExports.useEffect(()=>{if(!c)return;let Hp=!0;async function Gl(){C(!0),V(null);try{const{nodes:Ip,edges:qp}=await fetchGraphByNodeId(r,c);if(!Hp)return;const ci=Ip.map(o0=>({...o0,data:{...o0.data,...pn[o0.id]||{}}}));G(ci),He(qp),requestAnimationFrame(()=>{const o0=_.current;if(!o0)return;o0.fitView({padding:1.5,duration:300});const w0=ci.find(a0=>a0.id===c);w0?.position&&setTimeout(()=>{o0.setCenter(w0.position.x+70,w0.position.y+0,{zoom:1.22,duration:500})},400)});const Ep=ci.find(o0=>o0.id===c);if(Ep){const o0=await ne(Ep);ta(o0)}Fe[Fe.length-1]?.id!==Ep?.id&&Xe(o0=>[...o0,Ep].slice(-_r))}catch(Ip){console.error("Failed to load graph:",Ip),Hp&&V(Ip.message||"Failed to load node data")}finally{Hp&&C(!1)}}return Gl(),()=>{Hp=!1}},[c,r,ie,J]);const ne=async Hp=>{const Gl=await smartFetchData(r,Hp,pn,ie);return mr(Ip=>({...Ip,[Hp.id]:{...Ip[Hp.id]||{},...Gl.data}})),Gl},zl=async Hp=>{const Gl=await ne(Hp);ta(Gl),G(Ip=>Ip.map(qp=>qp.id===Hp.id?{...qp,data:{...qp.data,...Gl.data}}:qp))},Hl=async Hp=>{if(!A){C(!0);try{d(Hp.id)}finally{C(!1)}}},pr=async(Hp,Gl)=>{Xe(Ip=>Ip.slice(0,Gl+1)),d(Hp.id)};return jsxRuntimeExports$1.jsx("div",{className:"ae:flex ae:flex-col ae:h-full",children:jsxRuntimeExports$1.jsxs(OverlayProvider,{ref:p,className:"ae:flex ae:flex-col ae:relative ae:h-full ae:min-h-[300px] ae:border ae:bg-slate-100",children:[jsxRuntimeExports$1.jsxs(Overlay,{active:bp,onClose:()=>Sp(null),title:bp==="groupsview"?"Find node":bp==="typesview"?"Node Types":bp==="helpview"?"Help":"",container:p.current,children:[bp==="groupsview"&&jsxRuntimeExports$1.jsx(GroupsViewer,{restApiUrl:r,setRootNodeId:d}),bp==="helpview"&&jsxRuntimeExports$1.jsx(HelpViewer,{})]}),jsxRuntimeExports$1.jsxs(PanelGroup,{direction:S?"horizontal":"vertical",className:"ae:flex-1 ae:min-h-0 ae:overflow-hidden",children:[jsxRuntimeExports$1.jsxs(Panel$1,{className:"ae:flex ae:flex-col ae:min-h-0 ae:relative",defaultSize:50,minSize:10,children:[A&&jsxRuntimeExports$1.jsx("div",{className:"ae:absolute ae:bottom-2 ae:right-2 ae:z-50",children:jsxRuntimeExports$1.jsx(Spinner,{})}),j&&jsxRuntimeExports$1.jsx("div",{className:"ae:absolute ae:bottom-2 ae:right-2 ae:z-50",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:`Failed to find node UUID: ${c}`})}),jsxRuntimeExports$1.jsx(TopControls,{onFindNode:()=>Sp("groupsview"),onGetLinkCounts:async()=>{if(!(A||Ne.length===0)){C(!0);try{const Hp=await fetchLinkCounts(r,Ne);G(Hp)}finally{C(!1)}}},onHelp:()=>Sp("helpview"),isLoading:A,disableGetCounts:Ne.length===0}),jsxRuntimeExports$1.jsx("div",{className:"ae:flex-1 ae:min-h-0",children:jsxRuntimeExports$1.jsx(FlowChart,{className:"ae:flex-1 ae:min-h-0",nodes:Ne,edges:se,setNodes:G,setEdges:He,selectedNode:be,onNodeSelect:zl,onNodeDoubleSelect:Hl,onInit:Hp=>{_.current=Hp}})})]}),jsxRuntimeExports$1.jsx(PanelResizeHandle,{className:`ae:group ae:flex ae:items-center ae:justify-center ae:bg-slate-200 ae:border-x ${S?"ae:w-1.5 ae:cursor-col-resize":"ae:h-1.5 ae:cursor-row-resize"}`,children:jsxRuntimeExports$1.jsx("div",{className:`ae:bg-slate-700 ae:rounded ae:group-hover:scale-125 ${S?"ae:w-0.5 ae:h-6":"ae:w-6 ae:h-0.5"}`})}),jsxRuntimeExports$1.jsxs(Panel$1,{className:"ae:flex-1 ae:flex ae:flex-col ae:min-h-0",children:[o&&jsxRuntimeExports$1.jsx("div",{className:"ae:hidden ae:md:ae:flex ae:h-1/4 ae:border-b ae:border-slate-300 ae:overflow-y-auto",children:jsxRuntimeExports$1.jsx(DebugPane,{selectedNode:be})}),jsxRuntimeExports$1.jsx("div",{className:"ae:flex-1 ae:overflow-y-auto ae:min-h-0",children:jsxRuntimeExports$1.jsx(VisualiserPane,{restApiUrl:r,selectedNode:be,userData:J,downloadFormats:ie})})]})]}),jsxRuntimeExports$1.jsx("div",{className:"ae:flex-none ae:overflow-x-auto",children:jsxRuntimeExports$1.jsx(Breadcrumbs,{trail:Fe,onClick:pr,maxItems:_r})})]})})}const DEFAULT_REST_URL="https://aiida.materialscloud.org/2dtopo/api/v4";function App(){const[r,e]=useSearchParams(),t=r.get("restApiUrl")??DEFAULT_REST_URL,a=r.get("rootNode")??"",[o,c]=reactExports.useState(t);reactExports.useEffect(()=>{c(t)},[t]);const d=reactExports.useCallback(A=>{const C=new URLSearchParams(r);A?C.set("rootNode",A):C.delete("rootNode"),e(C,{replace:!0})},[r,e]),p=()=>{const A=new URLSearchParams(r);A.set("restApiUrl",o.trim()||DEFAULT_REST_URL),A.delete("rootNode"),e(A,{replace:!0})},[_,S]=reactExports.useState("default");return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col items-center justify-center h-screen space-y-4",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex items-center space-x-2 w-[95vw]",children:[jsxRuntimeExports$1.jsx("label",{htmlFor:"aiida-rest-url",className:"text-gray-800 font-medium whitespace-nowrap",children:"AiiDA REST endpoint:"}),jsxRuntimeExports$1.jsx("input",{id:"aiida-rest-url",type:"text",value:o,onChange:A=>c(A.target.value),placeholder:"Enter AiiDA REST API URL",className:"flex-grow p-2 border border-gray-400",onKeyDown:A=>A.key==="Enter"&&p()}),jsxRuntimeExports$1.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700",children:"Load"}),jsxRuntimeExports$1.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports$1.jsx("label",{htmlFor:"theme",className:"text-gray-800 font-medium",children:"Theme:"}),jsxRuntimeExports$1.jsxs("select",{id:"theme",value:_,onChange:A=>S(A.target.value),className:"p-2 border border-gray-400 rounded bg-white cursor-pointer hover:border-blue-500 transition",children:[jsxRuntimeExports$1.jsx("option",{value:"red",children:"Red"}),jsxRuntimeExports$1.jsx("option",{value:"blue",children:"Blue"}),jsxRuntimeExports$1.jsx("option",{value:"green",children:"Green"}),jsxRuntimeExports$1.jsx("option",{value:"yellow",children:"Yellow"}),jsxRuntimeExports$1.jsx("option",{value:"amber",children:"Amber"}),jsxRuntimeExports$1.jsx("option",{value:"violet",children:"Violet"}),jsxRuntimeExports$1.jsx("option",{value:"emerald",children:"Emerald"}),jsxRuntimeExports$1.jsx("option",{value:"pink",children:"Pink"}),jsxRuntimeExports$1.jsx("option",{value:"rose",children:"Rose"}),jsxRuntimeExports$1.jsx("option",{value:"cyan",children:"Cyan"}),jsxRuntimeExports$1.jsx("option",{value:"teal",children:"Teal"}),jsxRuntimeExports$1.jsx("option",{value:"default",children:"Slate (default)"})]})]})]}),jsxRuntimeExports$1.jsx("div",{className:"w-[95vw] h-[85vh] bg-amber-600",children:jsxRuntimeExports$1.jsx(AiidaExplorer,{restApiUrl:t,rootNode:a,onRootNodeChange:d,theme:_})})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports$1.jsx(React.StrictMode,{children:jsxRuntimeExports$1.jsx(HashRouter,{children:jsxRuntimeExports$1.jsx(App,{})})}));
