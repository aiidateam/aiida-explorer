function _mergeNamespaces(t,i){for(var a=0;a<i.length;a++){const n=i[a];if(typeof n!="string"&&!Array.isArray(n)){for(const y in n)if(y!=="default"&&!(y in t)){const x=Object.getOwnPropertyDescriptor(n,y);x&&Object.defineProperty(t,y,x.get?x:{enumerable:!0,get:()=>n[y]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))n(y);new MutationObserver(y=>{for(const x of y)if(x.type==="childList")for(const k of x.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&n(k)}).observe(document,{childList:!0,subtree:!0});function a(y){const x={};return y.integrity&&(x.integrity=y.integrity),y.referrerPolicy&&(x.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?x.credentials="include":y.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function n(y){if(y.ep)return;y.ep=!0;const x=a(y);fetch(y.href,x)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime$1={exports:{}},reactJsxRuntime_production$1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production$1;function requireReactJsxRuntime_production$1(){if(hasRequiredReactJsxRuntime_production$1)return reactJsxRuntime_production$1;hasRequiredReactJsxRuntime_production$1=1;var t=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function a(n,y,x){var k=null;if(x!==void 0&&(k=""+x),y.key!==void 0&&(k=""+y.key),"key"in y){x={};for(var S in y)S!=="key"&&(x[S]=y[S])}else x=y;return y=x.ref,{$$typeof:t,type:n,key:k,ref:y!==void 0?y:null,props:x}}return reactJsxRuntime_production$1.Fragment=i,reactJsxRuntime_production$1.jsx=a,reactJsxRuntime_production$1.jsxs=a,reactJsxRuntime_production$1}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime$1.exports=requireReactJsxRuntime_production$1()),jsxRuntime$1.exports}var jsxRuntimeExports$1=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),k=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),U=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),W=Symbol.iterator;function Y(ze){return ze===null||typeof ze!="object"?null:(ze=W&&ze[W]||ze["@@iterator"],typeof ze=="function"?ze:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,l={};function f(ze,lt,bt){this.props=ze,this.context=lt,this.refs=l,this.updater=bt||Z}f.prototype.isReactComponent={},f.prototype.setState=function(ze,lt){if(typeof ze!="object"&&typeof ze!="function"&&ze!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ze,lt,"setState")},f.prototype.forceUpdate=function(ze){this.updater.enqueueForceUpdate(this,ze,"forceUpdate")};function D(){}D.prototype=f.prototype;function I(ze,lt,bt){this.props=ze,this.context=lt,this.refs=l,this.updater=bt||Z}var V=I.prototype=new D;V.constructor=I,T(V,f.prototype),V.isPureReactComponent=!0;var K=Array.isArray;function A(){}var L={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function ee(ze,lt,bt){var At=bt.ref;return{$$typeof:t,type:ze,key:lt,ref:At!==void 0?At:null,props:bt}}function ae(ze,lt){return ee(ze.type,lt,ze.props)}function Se(ze){return typeof ze=="object"&&ze!==null&&ze.$$typeof===t}function $e(ze){var lt={"=":"=0",":":"=2"};return"$"+ze.replace(/[=:]/g,function(bt){return lt[bt]})}var qe=/\/+/g;function Pe(ze,lt){return typeof ze=="object"&&ze!==null&&ze.key!=null?$e(""+ze.key):lt.toString(36)}function Ve(ze){switch(ze.status){case"fulfilled":return ze.value;case"rejected":throw ze.reason;default:switch(typeof ze.status=="string"?ze.then(A,A):(ze.status="pending",ze.then(function(lt){ze.status==="pending"&&(ze.status="fulfilled",ze.value=lt)},function(lt){ze.status==="pending"&&(ze.status="rejected",ze.reason=lt)})),ze.status){case"fulfilled":return ze.value;case"rejected":throw ze.reason}}throw ze}function Ie(ze,lt,bt,At,Vt){var Yt=typeof ze;(Yt==="undefined"||Yt==="boolean")&&(ze=null);var er=!1;if(ze===null)er=!0;else switch(Yt){case"bigint":case"string":case"number":er=!0;break;case"object":switch(ze.$$typeof){case t:case i:er=!0;break;case C:return er=ze._init,Ie(er(ze._payload),lt,bt,At,Vt)}}if(er)return Vt=Vt(ze),er=At===""?"."+Pe(ze,0):At,K(Vt)?(bt="",er!=null&&(bt=er.replace(qe,"$&/")+"/"),Ie(Vt,lt,bt,"",function($r){return $r})):Vt!=null&&(Se(Vt)&&(Vt=ae(Vt,bt+(Vt.key==null||ze&&ze.key===Vt.key?"":(""+Vt.key).replace(qe,"$&/")+"/")+er)),lt.push(Vt)),1;er=0;var lr=At===""?".":At+":";if(K(ze))for(var yr=0;yr<ze.length;yr++)At=ze[yr],Yt=lr+Pe(At,yr),er+=Ie(At,lt,bt,Yt,Vt);else if(yr=Y(ze),typeof yr=="function")for(ze=yr.call(ze),yr=0;!(At=ze.next()).done;)At=At.value,Yt=lr+Pe(At,yr++),er+=Ie(At,lt,bt,Yt,Vt);else if(Yt==="object"){if(typeof ze.then=="function")return Ie(Ve(ze),lt,bt,At,Vt);throw lt=String(ze),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(ze).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.")}return er}function Xe(ze,lt,bt){if(ze==null)return ze;var At=[],Vt=0;return Ie(ze,At,"","",function(Yt){return lt.call(bt,Yt,Vt++)}),At}function et(ze){if(ze._status===-1){var lt=ze._result;lt=lt(),lt.then(function(bt){(ze._status===0||ze._status===-1)&&(ze._status=1,ze._result=bt)},function(bt){(ze._status===0||ze._status===-1)&&(ze._status=2,ze._result=bt)}),ze._status===-1&&(ze._status=0,ze._result=lt)}if(ze._status===1)return ze._result.default;throw ze._result}var tt=typeof reportError=="function"?reportError:function(ze){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var lt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ze=="object"&&ze!==null&&typeof ze.message=="string"?String(ze.message):String(ze),error:ze});if(!window.dispatchEvent(lt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ze);return}console.error(ze)},rt={map:Xe,forEach:function(ze,lt,bt){Xe(ze,function(){lt.apply(this,arguments)},bt)},count:function(ze){var lt=0;return Xe(ze,function(){lt++}),lt},toArray:function(ze){return Xe(ze,function(lt){return lt})||[]},only:function(ze){if(!Se(ze))throw Error("React.Children.only expected to receive a single React element child.");return ze}};return react_production.Activity=B,react_production.Children=rt,react_production.Component=f,react_production.Fragment=a,react_production.Profiler=y,react_production.PureComponent=I,react_production.StrictMode=n,react_production.Suspense=E,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(ze){return L.H.useMemoCache(ze)}},react_production.cache=function(ze){return function(){return ze.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(ze,lt,bt){if(ze==null)throw Error("The argument must be a React element, but you passed "+ze+".");var At=T({},ze.props),Vt=ze.key;if(lt!=null)for(Yt in lt.key!==void 0&&(Vt=""+lt.key),lt)!G.call(lt,Yt)||Yt==="key"||Yt==="__self"||Yt==="__source"||Yt==="ref"&&lt.ref===void 0||(At[Yt]=lt[Yt]);var Yt=arguments.length-2;if(Yt===1)At.children=bt;else if(1<Yt){for(var er=Array(Yt),lr=0;lr<Yt;lr++)er[lr]=arguments[lr+2];At.children=er}return ee(ze.type,Vt,At)},react_production.createContext=function(ze){return ze={$$typeof:k,_currentValue:ze,_currentValue2:ze,_threadCount:0,Provider:null,Consumer:null},ze.Provider=ze,ze.Consumer={$$typeof:x,_context:ze},ze},react_production.createElement=function(ze,lt,bt){var At,Vt={},Yt=null;if(lt!=null)for(At in lt.key!==void 0&&(Yt=""+lt.key),lt)G.call(lt,At)&&At!=="key"&&At!=="__self"&&At!=="__source"&&(Vt[At]=lt[At]);var er=arguments.length-2;if(er===1)Vt.children=bt;else if(1<er){for(var lr=Array(er),yr=0;yr<er;yr++)lr[yr]=arguments[yr+2];Vt.children=lr}if(ze&&ze.defaultProps)for(At in er=ze.defaultProps,er)Vt[At]===void 0&&(Vt[At]=er[At]);return ee(ze,Yt,Vt)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(ze){return{$$typeof:S,render:ze}},react_production.isValidElement=Se,react_production.lazy=function(ze){return{$$typeof:C,_payload:{_status:-1,_result:ze},_init:et}},react_production.memo=function(ze,lt){return{$$typeof:U,type:ze,compare:lt===void 0?null:lt}},react_production.startTransition=function(ze){var lt=L.T,bt={};L.T=bt;try{var At=ze(),Vt=L.S;Vt!==null&&Vt(bt,At),typeof At=="object"&&At!==null&&typeof At.then=="function"&&At.then(A,tt)}catch(Yt){tt(Yt)}finally{lt!==null&&bt.types!==null&&(lt.types=bt.types),L.T=lt}},react_production.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},react_production.use=function(ze){return L.H.use(ze)},react_production.useActionState=function(ze,lt,bt){return L.H.useActionState(ze,lt,bt)},react_production.useCallback=function(ze,lt){return L.H.useCallback(ze,lt)},react_production.useContext=function(ze){return L.H.useContext(ze)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(ze,lt){return L.H.useDeferredValue(ze,lt)},react_production.useEffect=function(ze,lt){return L.H.useEffect(ze,lt)},react_production.useEffectEvent=function(ze){return L.H.useEffectEvent(ze)},react_production.useId=function(){return L.H.useId()},react_production.useImperativeHandle=function(ze,lt,bt){return L.H.useImperativeHandle(ze,lt,bt)},react_production.useInsertionEffect=function(ze,lt){return L.H.useInsertionEffect(ze,lt)},react_production.useLayoutEffect=function(ze,lt){return L.H.useLayoutEffect(ze,lt)},react_production.useMemo=function(ze,lt){return L.H.useMemo(ze,lt)},react_production.useOptimistic=function(ze,lt){return L.H.useOptimistic(ze,lt)},react_production.useReducer=function(ze,lt,bt){return L.H.useReducer(ze,lt,bt)},react_production.useRef=function(ze){return L.H.useRef(ze)},react_production.useState=function(ze){return L.H.useState(ze)},react_production.useSyncExternalStore=function(ze,lt,bt){return L.H.useSyncExternalStore(ze,lt,bt)},react_production.useTransition=function(){return L.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function i(Ie,Xe){var et=Ie.length;Ie.push(Xe);e:for(;0<et;){var tt=et-1>>>1,rt=Ie[tt];if(0<y(rt,Xe))Ie[tt]=Xe,Ie[et]=rt,et=tt;else break e}}function a(Ie){return Ie.length===0?null:Ie[0]}function n(Ie){if(Ie.length===0)return null;var Xe=Ie[0],et=Ie.pop();if(et!==Xe){Ie[0]=et;e:for(var tt=0,rt=Ie.length,ze=rt>>>1;tt<ze;){var lt=2*(tt+1)-1,bt=Ie[lt],At=lt+1,Vt=Ie[At];if(0>y(bt,et))At<rt&&0>y(Vt,bt)?(Ie[tt]=Vt,Ie[At]=et,tt=At):(Ie[tt]=bt,Ie[lt]=et,tt=lt);else if(At<rt&&0>y(Vt,et))Ie[tt]=Vt,Ie[At]=et,tt=At;else break e}}return Xe}function y(Ie,Xe){var et=Ie.sortIndex-Xe.sortIndex;return et!==0?et:Ie.id-Xe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var k=Date,S=k.now();t.unstable_now=function(){return k.now()-S}}var E=[],U=[],C=1,B=null,W=3,Y=!1,Z=!1,T=!1,l=!1,f=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function V(Ie){for(var Xe=a(U);Xe!==null;){if(Xe.callback===null)n(U);else if(Xe.startTime<=Ie)n(U),Xe.sortIndex=Xe.expirationTime,i(E,Xe);else break;Xe=a(U)}}function K(Ie){if(T=!1,V(Ie),!Z)if(a(E)!==null)Z=!0,A||(A=!0,$e());else{var Xe=a(U);Xe!==null&&Ve(K,Xe.startTime-Ie)}}var A=!1,L=-1,G=5,ee=-1;function ae(){return l?!0:!(t.unstable_now()-ee<G)}function Se(){if(l=!1,A){var Ie=t.unstable_now();ee=Ie;var Xe=!0;try{e:{Z=!1,T&&(T=!1,D(L),L=-1),Y=!0;var et=W;try{t:{for(V(Ie),B=a(E);B!==null&&!(B.expirationTime>Ie&&ae());){var tt=B.callback;if(typeof tt=="function"){B.callback=null,W=B.priorityLevel;var rt=tt(B.expirationTime<=Ie);if(Ie=t.unstable_now(),typeof rt=="function"){B.callback=rt,V(Ie),Xe=!0;break t}B===a(E)&&n(E),V(Ie)}else n(E);B=a(E)}if(B!==null)Xe=!0;else{var ze=a(U);ze!==null&&Ve(K,ze.startTime-Ie),Xe=!1}}break e}finally{B=null,W=et,Y=!1}Xe=void 0}}finally{Xe?$e():A=!1}}}var $e;if(typeof I=="function")$e=function(){I(Se)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Pe=qe.port2;qe.port1.onmessage=Se,$e=function(){Pe.postMessage(null)}}else $e=function(){f(Se,0)};function Ve(Ie,Xe){L=f(function(){Ie(t.unstable_now())},Xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ie){Ie.callback=null},t.unstable_forceFrameRate=function(Ie){0>Ie||125<Ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<Ie?Math.floor(1e3/Ie):5},t.unstable_getCurrentPriorityLevel=function(){return W},t.unstable_next=function(Ie){switch(W){case 1:case 2:case 3:var Xe=3;break;default:Xe=W}var et=W;W=Xe;try{return Ie()}finally{W=et}},t.unstable_requestPaint=function(){l=!0},t.unstable_runWithPriority=function(Ie,Xe){switch(Ie){case 1:case 2:case 3:case 4:case 5:break;default:Ie=3}var et=W;W=Ie;try{return Xe()}finally{W=et}},t.unstable_scheduleCallback=function(Ie,Xe,et){var tt=t.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?tt+et:tt):et=tt,Ie){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=et+rt,Ie={id:C++,callback:Xe,priorityLevel:Ie,startTime:et,expirationTime:rt,sortIndex:-1},et>tt?(Ie.sortIndex=et,i(U,Ie),a(E)===null&&Ie===a(U)&&(T?(D(L),L=-1):T=!0,Ve(K,et-tt))):(Ie.sortIndex=rt,i(E,Ie),Z||Y||(Z=!0,A||(A=!0,$e()))),Ie},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(Ie){var Xe=W;return function(){var et=W;W=Xe;try{return Ie.apply(this,arguments)}finally{W=et}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function i(E){var U="https://react.dev/errors/"+E;if(1<arguments.length){U+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)U+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+E+"; visit "+U+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var n={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},y=Symbol.for("react.portal");function x(E,U,C){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:B==null?null:""+B,children:E,containerInfo:U,implementation:C}}var k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(E,U){if(E==="font")return"";if(typeof U=="string")return U==="use-credentials"?U:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,reactDom_production.createPortal=function(E,U){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U||U.nodeType!==1&&U.nodeType!==9&&U.nodeType!==11)throw Error(i(299));return x(E,U,null,C)},reactDom_production.flushSync=function(E){var U=k.T,C=n.p;try{if(k.T=null,n.p=2,E)return E()}finally{k.T=U,n.p=C,n.d.f()}},reactDom_production.preconnect=function(E,U){typeof E=="string"&&(U?(U=U.crossOrigin,U=typeof U=="string"?U==="use-credentials"?U:"":void 0):U=null,n.d.C(E,U))},reactDom_production.prefetchDNS=function(E){typeof E=="string"&&n.d.D(E)},reactDom_production.preinit=function(E,U){if(typeof E=="string"&&U&&typeof U.as=="string"){var C=U.as,B=S(C,U.crossOrigin),W=typeof U.integrity=="string"?U.integrity:void 0,Y=typeof U.fetchPriority=="string"?U.fetchPriority:void 0;C==="style"?n.d.S(E,typeof U.precedence=="string"?U.precedence:void 0,{crossOrigin:B,integrity:W,fetchPriority:Y}):C==="script"&&n.d.X(E,{crossOrigin:B,integrity:W,fetchPriority:Y,nonce:typeof U.nonce=="string"?U.nonce:void 0})}},reactDom_production.preinitModule=function(E,U){if(typeof E=="string")if(typeof U=="object"&&U!==null){if(U.as==null||U.as==="script"){var C=S(U.as,U.crossOrigin);n.d.M(E,{crossOrigin:C,integrity:typeof U.integrity=="string"?U.integrity:void 0,nonce:typeof U.nonce=="string"?U.nonce:void 0})}}else U==null&&n.d.M(E)},reactDom_production.preload=function(E,U){if(typeof E=="string"&&typeof U=="object"&&U!==null&&typeof U.as=="string"){var C=U.as,B=S(C,U.crossOrigin);n.d.L(E,C,{crossOrigin:B,integrity:typeof U.integrity=="string"?U.integrity:void 0,nonce:typeof U.nonce=="string"?U.nonce:void 0,type:typeof U.type=="string"?U.type:void 0,fetchPriority:typeof U.fetchPriority=="string"?U.fetchPriority:void 0,referrerPolicy:typeof U.referrerPolicy=="string"?U.referrerPolicy:void 0,imageSrcSet:typeof U.imageSrcSet=="string"?U.imageSrcSet:void 0,imageSizes:typeof U.imageSizes=="string"?U.imageSizes:void 0,media:typeof U.media=="string"?U.media:void 0})}},reactDom_production.preloadModule=function(E,U){if(typeof E=="string")if(U){var C=S(U.as,U.crossOrigin);n.d.m(E,{as:typeof U.as=="string"&&U.as!=="script"?U.as:void 0,crossOrigin:C,integrity:typeof U.integrity=="string"?U.integrity:void 0})}else n.d.m(E)},reactDom_production.requestFormReset=function(E){n.d.r(E)},reactDom_production.unstable_batchedUpdates=function(E,U){return E(U)},reactDom_production.useFormState=function(E,U,C){return k.H.useFormState(E,U,C)},reactDom_production.useFormStatus=function(){return k.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),i=requireReact(),a=requireReactDom();function n(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function x(e){var r=e,o=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(o=r.return),e=r.return;while(e)}return r.tag===3?o:null}function k(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function S(e){if(e.tag===31){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function E(e){if(x(e)!==e)throw Error(n(188))}function U(e){var r=e.alternate;if(!r){if(r=x(e),r===null)throw Error(n(188));return r!==e?null:e}for(var o=e,M=r;;){var ie=o.return;if(ie===null)break;var xe=ie.alternate;if(xe===null){if(M=ie.return,M!==null){o=M;continue}break}if(ie.child===xe.child){for(xe=ie.child;xe;){if(xe===o)return E(ie),e;if(xe===M)return E(ie),r;xe=xe.sibling}throw Error(n(188))}if(o.return!==M.return)o=ie,M=xe;else{for(var dt=!1,St=ie.child;St;){if(St===o){dt=!0,o=ie,M=xe;break}if(St===M){dt=!0,M=ie,o=xe;break}St=St.sibling}if(!dt){for(St=xe.child;St;){if(St===o){dt=!0,o=xe,M=ie;break}if(St===M){dt=!0,M=xe,o=ie;break}St=St.sibling}if(!dt)throw Error(n(189))}}if(o.alternate!==M)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?e:r}function C(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=C(e),r!==null)return r;e=e.sibling}return null}var B=Object.assign,W=Symbol.for("react.element"),Y=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),Se=Symbol.iterator;function $e(e){return e===null||typeof e!="object"?null:(e=Se&&e[Se]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Symbol.for("react.client.reference");function Pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case f:return"Profiler";case l:return"StrictMode";case K:return"Suspense";case A:return"SuspenseList";case ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Z:return"Portal";case I:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case V:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return r=e.displayName||null,r!==null?r:Pe(e.type)||"Memo";case G:r=e._payload,e=e._init;try{return Pe(e(r))}catch{}}return null}var Ve=Array.isArray,Ie=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Xe=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},tt=[],rt=-1;function ze(e){return{current:e}}function lt(e){0>rt||(e.current=tt[rt],tt[rt]=null,rt--)}function bt(e,r){rt++,tt[rt]=e.current,e.current=r}var At=ze(null),Vt=ze(null),Yt=ze(null),er=ze(null);function lr(e,r){switch(bt(Yt,r),bt(Vt,e),bt(At,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?rd(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=rd(r),e=ad(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}lt(At),bt(At,e)}function yr(){lt(At),lt(Vt),lt(Yt)}function $r(e){e.memoizedState!==null&&bt(er,e);var r=At.current,o=ad(r,e.type);r!==o&&(bt(Vt,e),bt(At,o))}function ia(e){Vt.current===e&&(lt(At),lt(Vt)),er.current===e&&(lt(er),ou._currentValue=et)}var Sa,Xr;function fr(e){if(Sa===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Sa=r&&r[1]||"",Xr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sa+e+Xr}var Hr=!1;function ya(e,r){if(!e||Hr)return"";Hr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(r){var _a=function(){throw Error()};if(Object.defineProperty(_a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_a,[])}catch(Kr){var Mr=Kr}Reflect.construct(e,[],_a)}else{try{_a.call()}catch(Kr){Mr=Kr}e.call(_a.prototype)}}else{try{throw Error()}catch(Kr){Mr=Kr}(_a=e())&&typeof _a.catch=="function"&&_a.catch(function(){})}}catch(Kr){if(Kr&&Mr&&typeof Kr.stack=="string")return[Kr.stack,Mr.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ie=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");ie&&ie.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var xe=M.DetermineComponentFrameRoot(),dt=xe[0],St=xe[1];if(dt&&St){var br=dt.split(`
`),Zr=St.split(`
`);for(ie=M=0;M<br.length&&!br[M].includes("DetermineComponentFrameRoot");)M++;for(;ie<Zr.length&&!Zr[ie].includes("DetermineComponentFrameRoot");)ie++;if(M===br.length||ie===Zr.length)for(M=br.length-1,ie=Zr.length-1;1<=M&&0<=ie&&br[M]!==Zr[ie];)ie--;for(;1<=M&&0<=ie;M--,ie--)if(br[M]!==Zr[ie]){if(M!==1||ie!==1)do if(M--,ie--,0>ie||br[M]!==Zr[ie]){var xa=`
`+br[M].replace(" at new "," at ");return e.displayName&&xa.includes("<anonymous>")&&(xa=xa.replace("<anonymous>",e.displayName)),xa}while(1<=M&&0<=ie);break}}}finally{Hr=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?fr(o):""}function Ta(e,r){switch(e.tag){case 26:case 27:case 5:return fr(e.type);case 16:return fr("Lazy");case 13:return e.child!==r&&r!==null?fr("Suspense Fallback"):fr("Suspense");case 19:return fr("SuspenseList");case 0:case 15:return ya(e.type,!1);case 11:return ya(e.type.render,!1);case 1:return ya(e.type,!0);case 31:return fr("Activity");default:return""}}function ua(e){try{var r="",o=null;do r+=Ta(e,o),o=e,e=e.return;while(e);return r}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}var Ua=Object.prototype.hasOwnProperty,Ya=t.unstable_scheduleCallback,Ia=t.unstable_cancelCallback,Na=t.unstable_shouldYield,Ra=t.unstable_requestPaint,oa=t.unstable_now,rn=t.unstable_getCurrentPriorityLevel,Za=t.unstable_ImmediatePriority,Nt=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,ur=t.unstable_LowPriority,Qr=t.unstable_IdlePriority,Dr=t.log,Ea=t.unstable_setDisableYieldValue,da=null,Tt=null;function Lr(e){if(typeof Dr=="function"&&Ea(e),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(da,e)}catch{}}var Gr=Math.clz32?Math.clz32:ga,wa=Math.log,Rr=Math.LN2;function ga(e){return e>>>=0,e===0?32:31-(wa(e)/Rr|0)|0}var kt=256,ha=262144,Pa=4194304;function Qe(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ea(e,r,o){var M=e.pendingLanes;if(M===0)return 0;var ie=0,xe=e.suspendedLanes,dt=e.pingedLanes;e=e.warmLanes;var St=M&134217727;return St!==0?(M=St&~xe,M!==0?ie=Qe(M):(dt&=St,dt!==0?ie=Qe(dt):o||(o=St&~e,o!==0&&(ie=Qe(o))))):(St=M&~xe,St!==0?ie=Qe(St):dt!==0?ie=Qe(dt):o||(o=M&~e,o!==0&&(ie=Qe(o)))),ie===0?0:r!==0&&r!==ie&&(r&xe)===0&&(xe=ie&-ie,o=r&-r,xe>=o||xe===32&&(o&4194048)!==0)?r:ie}function Vr(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function It(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hr(){var e=Pa;return Pa<<=1,(Pa&62914560)===0&&(Pa=4194304),e}function sa(e){for(var r=[],o=0;31>o;o++)r.push(e);return r}function Qa(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function an(e,r,o,M,ie,xe){var dt=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var St=e.entanglements,br=e.expirationTimes,Zr=e.hiddenUpdates;for(o=dt&~o;0<o;){var xa=31-Gr(o),_a=1<<xa;St[xa]=0,br[xa]=-1;var Mr=Zr[xa];if(Mr!==null)for(Zr[xa]=null,xa=0;xa<Mr.length;xa++){var Kr=Mr[xa];Kr!==null&&(Kr.lane&=-536870913)}o&=~_a}M!==0&&sn(e,M,0),xe!==0&&ie===0&&e.tag!==0&&(e.suspendedLanes|=xe&~(dt&~r))}function sn(e,r,o){e.pendingLanes|=r,e.suspendedLanes&=~r;var M=31-Gr(r);e.entangledLanes|=r,e.entanglements[M]=e.entanglements[M]|1073741824|o&261930}function An(e,r){var o=e.entangledLanes|=r;for(e=e.entanglements;o;){var M=31-Gr(o),ie=1<<M;ie&r|e[M]&r&&(e[M]|=r),o&=~ie}}function Ti(e,r){var o=r&-r;return o=(o&42)!==0?1:zn(o),(o&(e.suspendedLanes|r))!==0?0:o}function zn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ln(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Hn(){var e=Xe.p;return e!==0?e:(e=window.event,e===void 0?32:p0(e.type))}function bi(e,r){var o=Xe.p;try{return Xe.p=e,r()}finally{Xe.p=o}}var li=Math.random().toString(36).slice(2),Mi="__reactFiber$"+li,Ii="__reactProps$"+li,ti="__reactContainer$"+li,pi="__reactEvents$"+li,Ri="__reactListeners$"+li,mo="__reactHandles$"+li,so="__reactResources$"+li,pa="__reactMarker$"+li;function Gs(e){delete e[Mi],delete e[Ii],delete e[pi],delete e[Ri],delete e[mo]}function qo(e){var r=e[Mi];if(r)return r;for(var o=e.parentNode;o;){if(r=o[ti]||o[Mi]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(e=dd(e);e!==null;){if(o=e[Mi])return o;e=dd(e)}return r}e=o,o=e.parentNode}return null}function Fo(e){if(e=e[Mi]||e[ti]){var r=e.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return e}return null}function ko(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(n(33))}function Ro(e){var r=e[so];return r||(r=e[so]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Bi(e){e[pa]=!0}var As=new Set,qs={};function vn(e,r){ui(e,r),ui(e+"Capture",r)}function ui(e,r){for(qs[e]=r,e=0;e<r.length;e++)As.add(r[e])}var di=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cs={},Qo={};function Ys(e){return Ua.call(Qo,e)?!0:Ua.call(cs,e)?!1:di.test(e)?Qo[e]=!0:(cs[e]=!0,!1)}function Rl(e,r,o){if(Ys(r))if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var M=r.toLowerCase().slice(0,5);if(M!=="data-"&&M!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+o)}}function Di(e,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+o)}}function go(e,r,o,M){if(M===null)e.removeAttribute(o);else{switch(typeof M){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(r,o,""+M)}}function xi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ui(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function So(e,r,o){var M=Object.getOwnPropertyDescriptor(e.constructor.prototype,r);if(!e.hasOwnProperty(r)&&typeof M<"u"&&typeof M.get=="function"&&typeof M.set=="function"){var ie=M.get,xe=M.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return ie.call(this)},set:function(dt){o=""+dt,xe.call(this,dt)}}),Object.defineProperty(e,r,{enumerable:M.enumerable}),{getValue:function(){return o},setValue:function(dt){o=""+dt},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function ro(e){if(!e._valueTracker){var r=Ui(e)?"checked":"value";e._valueTracker=So(e,r,""+e[r])}}function yo(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var o=r.getValue(),M="";return e&&(M=Ui(e)?e.checked?"true":"false":e.value),e=M,e!==o?(r.setValue(e),!0):!1}function Vo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ss=/[\n"\\]/g;function jo(e){return e.replace(Ss,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function fs(e,r,o,M,ie,xe,dt,St){e.name="",dt!=null&&typeof dt!="function"&&typeof dt!="symbol"&&typeof dt!="boolean"?e.type=dt:e.removeAttribute("type"),r!=null?dt==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+xi(r)):e.value!==""+xi(r)&&(e.value=""+xi(r)):dt!=="submit"&&dt!=="reset"||e.removeAttribute("value"),r!=null?es(e,dt,xi(r)):o!=null?es(e,dt,xi(o)):M!=null&&e.removeAttribute("value"),ie==null&&xe!=null&&(e.defaultChecked=!!xe),ie!=null&&(e.checked=ie&&typeof ie!="function"&&typeof ie!="symbol"),St!=null&&typeof St!="function"&&typeof St!="symbol"&&typeof St!="boolean"?e.name=""+xi(St):e.removeAttribute("name")}function Fu(e,r,o,M,ie,xe,dt,St){if(xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"&&(e.type=xe),r!=null||o!=null){if(!(xe!=="submit"&&xe!=="reset"||r!=null)){ro(e);return}o=o!=null?""+xi(o):"",r=r!=null?""+xi(r):o,St||r===e.value||(e.value=r),e.defaultValue=r}M=M??ie,M=typeof M!="function"&&typeof M!="symbol"&&!!M,e.checked=St?e.checked:!!M,e.defaultChecked=!!M,dt!=null&&typeof dt!="function"&&typeof dt!="symbol"&&typeof dt!="boolean"&&(e.name=dt),ro(e)}function es(e,r,o){r==="number"&&Vo(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function cl(e,r,o,M){if(e=e.options,r){r={};for(var ie=0;ie<o.length;ie++)r["$"+o[ie]]=!0;for(o=0;o<e.length;o++)ie=r.hasOwnProperty("$"+e[o].value),e[o].selected!==ie&&(e[o].selected=ie),ie&&M&&(e[o].defaultSelected=!0)}else{for(o=""+xi(o),r=null,ie=0;ie<e.length;ie++){if(e[ie].value===o){e[ie].selected=!0,M&&(e[ie].defaultSelected=!0);return}r!==null||e[ie].disabled||(r=e[ie])}r!==null&&(r.selected=!0)}}function hs(e,r,o){if(r!=null&&(r=""+xi(r),r!==e.value&&(e.value=r),o==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=o!=null?""+xi(o):""}function Gi(e,r,o,M){if(r==null){if(M!=null){if(o!=null)throw Error(n(92));if(Ve(M)){if(1<M.length)throw Error(n(93));M=M[0]}o=M}o==null&&(o=""),r=o}o=xi(r),e.defaultValue=o,M=e.textContent,M===o&&M!==""&&M!==null&&(e.value=M),ro(e)}function ao(e,r){if(r){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=r;return}}e.textContent=r}var ci=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fl(e,r,o){var M=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?M?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":M?e.setProperty(r,o):typeof o!="number"||o===0||ci.has(r)?r==="float"?e.cssFloat=o:e[r]=(""+o).trim():e[r]=o+"px"}function Ws(e,r,o){if(r!=null&&typeof r!="object")throw Error(n(62));if(e=e.style,o!=null){for(var M in o)!o.hasOwnProperty(M)||r!=null&&r.hasOwnProperty(M)||(M.indexOf("--")===0?e.setProperty(M,""):M==="float"?e.cssFloat="":e[M]="");for(var ie in r)M=r[ie],r.hasOwnProperty(ie)&&o[ie]!==M&&fl(e,ie,M)}else for(var xe in r)r.hasOwnProperty(xe)&&fl(e,xe,r[xe])}function ju(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Iu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hl(e){return Iu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Oi(){}var wc=null;function ts(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bo=null,ds=null;function ni(e){var r=Fo(e);if(r&&(e=r.stateNode)){var o=e[Ii]||null;e:switch(e=r.stateNode,r.type){case"input":if(fs(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jo(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var M=o[r];if(M!==e&&M.form===e.form){var ie=M[Ii]||null;if(!ie)throw Error(n(90));fs(M,ie.value,ie.defaultValue,ie.defaultValue,ie.checked,ie.defaultChecked,ie.type,ie.name)}}for(r=0;r<o.length;r++)M=o[r],M.form===e.form&&yo(M)}break e;case"textarea":hs(e,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&cl(e,!!o.multiple,r,!1)}}}var zl=!1;function $s(e,r,o){if(zl)return e(r,o);zl=!0;try{var M=e(r);return M}finally{if(zl=!1,(bo!==null||ds!==null)&&(qf(),bo&&(r=bo,e=ds,ds=bo=null,ni(r),e)))for(r=0;r<e.length;r++)ni(e[r])}}function dl(e,r){var o=e.stateNode;if(o===null)return null;var M=o[Ii]||null;if(M===null)return null;o=M[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(e=e.type,M=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!M;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mi=!1;if(Io)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){mi=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{mi=!1}var Ts=null,Ac=null,fu=null;function yf(){if(fu)return fu;var e,r=Ac,o=r.length,M,ie="value"in Ts?Ts.value:Ts.textContent,xe=ie.length;for(e=0;e<o&&r[e]===ie[e];e++);var dt=o-e;for(M=1;M<=dt&&r[o-M]===ie[xe-M];M++);return fu=ie.slice(e,1<M?1-M:void 0)}function Bu(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Hu(){return!0}function rs(){return!1}function Ki(e){function r(o,M,ie,xe,dt){this._reactName=o,this._targetInst=ie,this.type=M,this.nativeEvent=xe,this.target=dt,this.currentTarget=null;for(var St in e)e.hasOwnProperty(St)&&(o=e[St],this[St]=o?o(xe):xe[St]);return this.isDefaultPrevented=(xe.defaultPrevented!=null?xe.defaultPrevented:xe.returnValue===!1)?Hu:rs,this.isPropagationStopped=rs,this}return B(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hu)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hu)},persist:function(){},isPersistent:Hu}),r}var vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=Ki(vl),pl=B({},vl,{view:0,detail:0}),bf=Ki(pl),Sc,Xs,du,Nl=B({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==du&&(du&&e.type==="mousemove"?(Sc=e.screenX-du.screenX,Xs=e.screenY-du.screenY):Xs=Sc=0,du=e),Sc)},movementY:function(e){return"movementY"in e?e.movementY:Xs}}),xf=Ki(Nl),Ol=B({},Nl,{dataTransfer:0}),Tc=Ki(Ol),Pl=B({},pl,{relatedTarget:0}),Uu=Ki(Pl),Mc=B({},vl,{animationName:0,elapsedTime:0,pseudoElement:0}),yh=Ki(Mc),bh=B({},vl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fl=Ki(bh),xh=B({},vl,{data:0}),Ec=Ki(xh),_f={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ms={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=vu[e])?!!r[e]:!1}function pu(){return Cc}var jl=B({},pl,{key:function(e){if(e.key){var r=_f[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Bu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ms[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pu,charCode:function(e){return e.type==="keypress"?Bu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kc=Ki(jl),ml=B({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=Ki(ml),wf=B({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pu}),Zs=Ki(wf),Es=B({},vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Af=Ki(Es),Rc=B({},Nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dc=Ki(Rc),Sf=B({},vl,{newState:0,oldState:0}),Tf=Ki(Sf),Mf=[9,13,27,32],zc=Io&&"CompositionEvent"in window,Js=null;Io&&"documentMode"in document&&(Js=document.documentMode);var _h=Io&&"TextEvent"in window&&!Js,Lc=Io&&(!zc||Js&&8<Js&&11>=Js),Ks=" ",Il=!1;function mu(e,r){switch(e){case"keyup":return Mf.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qs=!1;function Ef(e,r){switch(e){case"compositionend":return qu(r);case"keypress":return r.which!==32?null:(Il=!0,Ks);case"textInput":return e=r.data,e===Ks&&Il?null:e;default:return null}}function wh(e,r){if(Qs)return e==="compositionend"||!zc&&mu(e,r)?(e=yf(),fu=Ac=Ts=null,Qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Lc&&r.locale!=="ko"?null:r.data;default:return null}}var Ah={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cf(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Ah[e.type]:r==="textarea"}function kf(e,r,o,M){bo?ds?ds.push(M):ds=[M]:bo=M,r=Kf(r,"onChange"),0<r.length&&(o=new hu("onChange","change",null,o,M),e.push({event:o,listeners:r}))}var Cs=null,gu=null;function Rf(e){$h(e,0)}function Bl(e){var r=ko(e);if(yo(r))return e}function Nc(e,r){if(e==="change")return r}var Df=!1;if(Io){var gl;if(Io){var Yo="oninput"in document;if(!Yo){var Hl=document.createElement("div");Hl.setAttribute("oninput","return;"),Yo=typeof Hl.oninput=="function"}gl=Yo}else gl=!1;Df=gl&&(!document.documentMode||9<document.documentMode)}function Vu(){Cs&&(Cs.detachEvent("onpropertychange",Wo),gu=Cs=null)}function Wo(e){if(e.propertyName==="value"&&Bl(gu)){var r=[];kf(r,gu,e,ts(e)),$s(Rf,r)}}function yl(e,r,o){e==="focusin"?(Vu(),Cs=r,gu=o,Cs.attachEvent("onpropertychange",Wo)):e==="focusout"&&Vu()}function Oc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bl(gu)}function Sh(e,r){if(e==="click")return Bl(r)}function zf(e,r){if(e==="input"||e==="change")return Bl(r)}function bl(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var lo=typeof Object.is=="function"?Object.is:bl;function Ul(e,r){if(lo(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var o=Object.keys(e),M=Object.keys(r);if(o.length!==M.length)return!1;for(M=0;M<o.length;M++){var ie=o[M];if(!Ua.call(r,ie)||!lo(e[ie],r[ie]))return!1}return!0}function Yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pc(e,r){var o=Yu(e);e=0;for(var M;o;){if(o.nodeType===3){if(M=e+o.textContent.length,e<=r&&M>=r)return{node:o,offset:r-e};e=M}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Yu(o)}}function Fc(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Fc(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function jc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=Vo(e.document);r instanceof e.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)e=r.contentWindow;else break;r=Vo(e.document)}return r}function yu(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var xl=Io&&"documentMode"in document&&11>=document.documentMode,ks=null,el=null,Do=null,bu=!1;function Ic(e,r,o){var M=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;bu||ks==null||ks!==Vo(M)||(M=ks,"selectionStart"in M&&yu(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Do&&Ul(Do,M)||(Do=M,M=Kf(el,"onSelect"),0<M.length&&(r=new hu("onSelect","select",null,r,o),e.push({event:r,listeners:M}),r.target=ks)))}function vs(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit"+e]="webkit"+r,o["Moz"+e]="moz"+r,o}var _l={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Wu={},$u={};Io&&($u=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function Rs(e){if(Wu[e])return Wu[e];if(!_l[e])return e;var r=_l[e],o;for(o in r)if(r.hasOwnProperty(o)&&o in $u)return Wu[e]=r[o];return e}var xu=Rs("animationend"),_u=Rs("animationiteration"),Bc=Rs("animationstart"),Lf=Rs("transitionrun"),Nf=Rs("transitionstart"),Of=Rs("transitioncancel"),Hc=Rs("transitionend"),wu=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function $o(e,r){wu.set(e,r),vn(r,[e])}var _i=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bo=[],tl=0,Zu=0;function Au(){for(var e=tl,r=Zu=tl=0;r<e;){var o=Bo[r];Bo[r++]=null;var M=Bo[r];Bo[r++]=null;var ie=Bo[r];Bo[r++]=null;var xe=Bo[r];if(Bo[r++]=null,M!==null&&ie!==null){var dt=M.pending;dt===null?ie.next=ie:(ie.next=dt.next,dt.next=ie),M.pending=ie}xe!==0&&rl(o,ie,xe)}}function Ju(e,r,o,M){Bo[tl++]=e,Bo[tl++]=r,Bo[tl++]=o,Bo[tl++]=M,Zu|=M,e.lanes|=M,e=e.alternate,e!==null&&(e.lanes|=M)}function Su(e,r,o,M){return Ju(e,r,o,M),Tu(e)}function wl(e,r){return Ju(e,null,null,r),Tu(e)}function rl(e,r,o){e.lanes|=o;var M=e.alternate;M!==null&&(M.lanes|=o);for(var ie=!1,xe=e.return;xe!==null;)xe.childLanes|=o,M=xe.alternate,M!==null&&(M.childLanes|=o),xe.tag===22&&(e=xe.stateNode,e===null||e._visibility&1||(ie=!0)),e=xe,xe=xe.return;return e.tag===3?(xe=e.stateNode,ie&&r!==null&&(ie=31-Gr(o),e=xe.hiddenUpdates,M=e[ie],M===null?e[ie]=[r]:M.push(r),r.lane=o|536870912),xe):null}function Tu(e){if(50<fc)throw fc=0,Gf=null,Error(n(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var Al={};function Uc(e,r,o,M){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zo(e,r,o,M){return new Uc(e,r,o,M)}function Ku(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ps(e,r){var o=e.alternate;return o===null?(o=zo(e.tag,r,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=r,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,r=e.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Qu(e,r){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,r=o.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Gl(e,r,o,M,ie,xe){var dt=0;if(M=e,typeof e=="function")Ku(e)&&(dt=1);else if(typeof e=="string")dt=h0(e,o,At.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ee:return e=zo(31,o,r,ie),e.elementType=ee,e.lanes=xe,e;case T:return Sl(o.children,ie,xe,r);case l:dt=8,ie|=24;break;case f:return e=zo(12,o,r,ie|2),e.elementType=f,e.lanes=xe,e;case K:return e=zo(13,o,r,ie),e.elementType=K,e.lanes=xe,e;case A:return e=zo(19,o,r,ie),e.elementType=A,e.lanes=xe,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I:dt=10;break e;case D:dt=9;break e;case V:dt=11;break e;case L:dt=14;break e;case G:dt=16,M=null;break e}dt=29,o=Error(n(130,e===null?"null":typeof e,"")),M=null}return r=zo(dt,o,r,ie),r.elementType=e,r.type=M,r.lanes=xe,r}function Sl(e,r,o,M){return e=zo(7,e,M,r),e.lanes=o,e}function ec(e,r,o){return e=zo(6,e,null,r),e.lanes=o,e}function Pf(e){var r=zo(18,null,null,0);return r.stateNode=e,r}function Gc(e,r,o){return r=zo(4,e.children!==null?e.children:[],e.key,r),r.lanes=o,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var qc=new WeakMap;function Ho(e,r){if(typeof e=="object"&&e!==null){var o=qc.get(e);return o!==void 0?o:(r={value:e,source:r,stack:ua(r)},qc.set(e,r),r)}return{value:e,source:r,stack:ua(r)}}var ql=[],Vl=0,Yl=null,Mu=0,Xo=[],Lo=0,al=null,as=1,ms="";function Ds(e,r){ql[Vl++]=Mu,ql[Vl++]=Yl,Yl=e,Mu=r}function gs(e,r,o){Xo[Lo++]=as,Xo[Lo++]=ms,Xo[Lo++]=al,al=e;var M=as;e=ms;var ie=32-Gr(M)-1;M&=~(1<<ie),o+=1;var xe=32-Gr(r)+ie;if(30<xe){var dt=ie-ie%5;xe=(M&(1<<dt)-1).toString(32),M>>=dt,ie-=dt,as=1<<32-Gr(r)+ie|o<<ie|M,ms=xe+e}else as=1<<xe|o<<ie|M,ms=e}function Vc(e){e.return!==null&&(Ds(e,1),gs(e,1,0))}function Eu(e){for(;e===Yl;)Yl=ql[--Vl],ql[Vl]=null,Mu=ql[--Vl],ql[Vl]=null;for(;e===al;)al=Xo[--Lo],Xo[Lo]=null,ms=Xo[--Lo],Xo[Lo]=null,as=Xo[--Lo],Xo[Lo]=null}function Yc(e,r){Xo[Lo++]=as,Xo[Lo++]=ms,Xo[Lo++]=al,as=r.id,ms=r.overflow,al=e}var fo=null,Pi=null,Jn=!1,ys=null,To=!1,Wc=Error(n(519));function zs(e){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cu(Ho(r,e)),Wc}function Ff(e){var r=e.stateNode,o=e.type,M=e.memoizedProps;switch(r[Mi]=e,r[Ii]=M,o){case"dialog":ai("cancel",r),ai("close",r);break;case"iframe":case"object":case"embed":ai("load",r);break;case"video":case"audio":for(o=0;o<vc.length;o++)ai(vc[o],r);break;case"source":ai("error",r);break;case"img":case"image":case"link":ai("error",r),ai("load",r);break;case"details":ai("toggle",r);break;case"input":ai("invalid",r),Fu(r,M.value,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name,!0);break;case"select":ai("invalid",r);break;case"textarea":ai("invalid",r),Gi(r,M.value,M.defaultValue,M.children)}o=M.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||M.suppressHydrationWarning===!0||Kh(r.textContent,o)?(M.popover!=null&&(ai("beforetoggle",r),ai("toggle",r)),M.onScroll!=null&&ai("scroll",r),M.onScrollEnd!=null&&ai("scrollend",r),M.onClick!=null&&(r.onclick=Oi),r=!0):r=!1,r||zs(e,!0)}function Wl(e){for(fo=e.return;fo;)switch(fo.tag){case 5:case 31:case 13:To=!1;return;case 27:case 3:To=!0;return;default:fo=fo.return}}function Ls(e){if(e!==fo)return!1;if(!Jn)return Wl(e),Jn=!0,!1;var r=e.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||ah(e.type,e.memoizedProps)),o=!o),o&&Pi&&zs(e),Wl(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));Pi=hd(e)}else if(r===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));Pi=hd(e)}else r===27?(r=Pi,nu(e.type)?(e=fd,fd=null,Pi=e):Pi=r):Pi=fo?_s(e.stateNode.nextSibling):null;return!0}function Tl(){Pi=fo=null,Jn=!1}function $c(){var e=ys;return e!==null&&(_o===null?_o=e:_o.push.apply(_o,e),ys=null),e}function Cu(e){ys===null?ys=[e]:ys.push(e)}var Xc=ze(null),Ns=null,bs=null;function nl(e,r,o){bt(Xc,r._currentValue),r._currentValue=o}function Os(e){e._currentValue=Xc.current,lt(Xc)}function Zc(e,r,o){for(;e!==null;){var M=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,M!==null&&(M.childLanes|=r)):M!==null&&(M.childLanes&r)!==r&&(M.childLanes|=r),e===o)break;e=e.return}}function Jc(e,r,o,M){var ie=e.child;for(ie!==null&&(ie.return=e);ie!==null;){var xe=ie.dependencies;if(xe!==null){var dt=ie.child;xe=xe.firstContext;e:for(;xe!==null;){var St=xe;xe=ie;for(var br=0;br<r.length;br++)if(St.context===r[br]){xe.lanes|=o,St=xe.alternate,St!==null&&(St.lanes|=o),Zc(xe.return,o,e),M||(dt=null);break e}xe=St.next}}else if(ie.tag===18){if(dt=ie.return,dt===null)throw Error(n(341));dt.lanes|=o,xe=dt.alternate,xe!==null&&(xe.lanes|=o),Zc(dt,o,e),dt=null}else dt=ie.child;if(dt!==null)dt.return=ie;else for(dt=ie;dt!==null;){if(dt===e){dt=null;break}if(ie=dt.sibling,ie!==null){ie.return=dt.return,dt=ie;break}dt=dt.return}ie=dt}}function Ps(e,r,o,M){e=null;for(var ie=r,xe=!1;ie!==null;){if(!xe){if((ie.flags&524288)!==0)xe=!0;else if((ie.flags&262144)!==0)break}if(ie.tag===10){var dt=ie.alternate;if(dt===null)throw Error(n(387));if(dt=dt.memoizedProps,dt!==null){var St=ie.type;lo(ie.pendingProps.value,dt.value)||(e!==null?e.push(St):e=[St])}}else if(ie===er.current){if(dt=ie.alternate,dt===null)throw Error(n(387));dt.memoizedState.memoizedState!==ie.memoizedState.memoizedState&&(e!==null?e.push(ou):e=[ou])}ie=ie.return}e!==null&&Jc(r,e,o,M),r.flags|=262144}function ku(e){for(e=e.firstContext;e!==null;){if(!lo(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ml(e){Ns=e,bs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ho(e){return Du(Ns,e)}function Ru(e,r){return Ns===null&&Ml(e),Du(e,r)}function Du(e,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},bs===null){if(e===null)throw Error(n(308));bs=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else bs=bs.next=r;return o}var Kc=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(o,M){e.push(M)}};this.abort=function(){r.aborted=!0,e.forEach(function(o){return o()})}},tc=t.unstable_scheduleCallback,jf=t.unstable_NormalPriority,Zi={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rc(){return{controller:new Kc,data:new Map,refCount:0}}function $l(e){e.refCount--,e.refCount===0&&tc(jf,function(){e.controller.abort()})}var Xl=null,zu=0,re=0,_t=null;function Fe(e,r){if(Xl===null){var o=Xl=[];zu=0,re=Vh(),_t={status:"pending",value:void 0,then:function(M){o.push(M)}}}return zu++,r.then(Qt,Qt),r}function Qt(){if(--zu===0&&Xl!==null){_t!==null&&(_t.status="fulfilled");var e=Xl;Xl=null,re=0,_t=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function mr(e,r){var o=[],M={status:"pending",value:null,reason:null,then:function(ie){o.push(ie)}};return e.then(function(){M.status="fulfilled",M.value=r;for(var ie=0;ie<o.length;ie++)(0,o[ie])(r)},function(ie){for(M.status="rejected",M.reason=ie,ie=0;ie<o.length;ie++)(0,o[ie])(void 0)}),M}var Tr=Ie.S;Ie.S=function(e,r){Nh=oa(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Fe(e,r),Tr!==null&&Tr(e,r)};var fa=ze(null);function aa(){var e=fa.current;return e!==null?e:Nn.pooledCache}function mn(e,r){r===null?bt(fa,fa.current):bt(fa,r.pool)}function qr(){var e=aa();return e===null?null:{parent:Zi._currentValue,pool:e}}var ca=Error(n(460)),fi=Error(n(474)),en=Error(n(542)),Wa={then:function(){}};function zi(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hi(e,r,o){switch(o=e[o],o===void 0?e.push(r):o!==r&&(r.then(Oi,Oi),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,hn(e),e;default:if(typeof r.status=="string")r.then(Oi,Oi);else{if(e=Nn,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=r,e.status="pending",e.then(function(M){if(r.status==="pending"){var ie=r;ie.status="fulfilled",ie.value=M}},function(M){if(r.status==="pending"){var ie=r;ie.status="rejected",ie.reason=M}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,hn(e),e}throw Bn=r,ca}}function Kn(e){try{var r=e._init;return r(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Bn=o,ca):o}}var Bn=null;function Vn(){if(Bn===null)throw Error(n(459));var e=Bn;return Bn=null,e}function hn(e){if(e===ca||e===en)throw Error(n(483))}var Fn=null,qi=0;function ri(e){var r=qi;return qi+=1,Fn===null&&(Fn=[]),Hi(Fn,e,r)}function Wn(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function gi(e,r){throw r.$$typeof===W?Error(n(525)):(e=Object.prototype.toString.call(r),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function kn(e){function r(Wr,Fr){if(e){var na=Wr.deletions;na===null?(Wr.deletions=[Fr],Wr.flags|=16):na.push(Fr)}}function o(Wr,Fr){if(!e)return null;for(;Fr!==null;)r(Wr,Fr),Fr=Fr.sibling;return null}function M(Wr){for(var Fr=new Map;Wr!==null;)Wr.key!==null?Fr.set(Wr.key,Wr):Fr.set(Wr.index,Wr),Wr=Wr.sibling;return Fr}function ie(Wr,Fr){return Wr=ps(Wr,Fr),Wr.index=0,Wr.sibling=null,Wr}function xe(Wr,Fr,na){return Wr.index=na,e?(na=Wr.alternate,na!==null?(na=na.index,na<Fr?(Wr.flags|=67108866,Fr):na):(Wr.flags|=67108866,Fr)):(Wr.flags|=1048576,Fr)}function dt(Wr){return e&&Wr.alternate===null&&(Wr.flags|=67108866),Wr}function St(Wr,Fr,na,ka){return Fr===null||Fr.tag!==6?(Fr=ec(na,Wr.mode,ka),Fr.return=Wr,Fr):(Fr=ie(Fr,na),Fr.return=Wr,Fr)}function br(Wr,Fr,na,ka){var gn=na.type;return gn===T?xa(Wr,Fr,na.props.children,ka,na.key):Fr!==null&&(Fr.elementType===gn||typeof gn=="object"&&gn!==null&&gn.$$typeof===G&&Kn(gn)===Fr.type)?(Fr=ie(Fr,na.props),Wn(Fr,na),Fr.return=Wr,Fr):(Fr=Gl(na.type,na.key,na.props,null,Wr.mode,ka),Wn(Fr,na),Fr.return=Wr,Fr)}function Zr(Wr,Fr,na,ka){return Fr===null||Fr.tag!==4||Fr.stateNode.containerInfo!==na.containerInfo||Fr.stateNode.implementation!==na.implementation?(Fr=Gc(na,Wr.mode,ka),Fr.return=Wr,Fr):(Fr=ie(Fr,na.children||[]),Fr.return=Wr,Fr)}function xa(Wr,Fr,na,ka,gn){return Fr===null||Fr.tag!==7?(Fr=Sl(na,Wr.mode,ka,gn),Fr.return=Wr,Fr):(Fr=ie(Fr,na),Fr.return=Wr,Fr)}function _a(Wr,Fr,na){if(typeof Fr=="string"&&Fr!==""||typeof Fr=="number"||typeof Fr=="bigint")return Fr=ec(""+Fr,Wr.mode,na),Fr.return=Wr,Fr;if(typeof Fr=="object"&&Fr!==null){switch(Fr.$$typeof){case Y:return na=Gl(Fr.type,Fr.key,Fr.props,null,Wr.mode,na),Wn(na,Fr),na.return=Wr,na;case Z:return Fr=Gc(Fr,Wr.mode,na),Fr.return=Wr,Fr;case G:return Fr=Kn(Fr),_a(Wr,Fr,na)}if(Ve(Fr)||$e(Fr))return Fr=Sl(Fr,Wr.mode,na,null),Fr.return=Wr,Fr;if(typeof Fr.then=="function")return _a(Wr,ri(Fr),na);if(Fr.$$typeof===I)return _a(Wr,Ru(Wr,Fr),na);gi(Wr,Fr)}return null}function Mr(Wr,Fr,na,ka){var gn=Fr!==null?Fr.key:null;if(typeof na=="string"&&na!==""||typeof na=="number"||typeof na=="bigint")return gn!==null?null:St(Wr,Fr,""+na,ka);if(typeof na=="object"&&na!==null){switch(na.$$typeof){case Y:return na.key===gn?br(Wr,Fr,na,ka):null;case Z:return na.key===gn?Zr(Wr,Fr,na,ka):null;case G:return na=Kn(na),Mr(Wr,Fr,na,ka)}if(Ve(na)||$e(na))return gn!==null?null:xa(Wr,Fr,na,ka,null);if(typeof na.then=="function")return Mr(Wr,Fr,ri(na),ka);if(na.$$typeof===I)return Mr(Wr,Fr,Ru(Wr,na),ka);gi(Wr,na)}return null}function Kr(Wr,Fr,na,ka,gn){if(typeof ka=="string"&&ka!==""||typeof ka=="number"||typeof ka=="bigint")return Wr=Wr.get(na)||null,St(Fr,Wr,""+ka,gn);if(typeof ka=="object"&&ka!==null){switch(ka.$$typeof){case Y:return Wr=Wr.get(ka.key===null?na:ka.key)||null,br(Fr,Wr,ka,gn);case Z:return Wr=Wr.get(ka.key===null?na:ka.key)||null,Zr(Fr,Wr,ka,gn);case G:return ka=Kn(ka),Kr(Wr,Fr,na,ka,gn)}if(Ve(ka)||$e(ka))return Wr=Wr.get(na)||null,xa(Fr,Wr,ka,gn,null);if(typeof ka.then=="function")return Kr(Wr,Fr,na,ri(ka),gn);if(ka.$$typeof===I)return Kr(Wr,Fr,na,Ru(Fr,ka),gn);gi(Fr,ka)}return null}function Ha(Wr,Fr,na,ka){for(var gn=null,qn=null,fn=Fr,Dn=Fr=0,Zn=null;fn!==null&&Dn<na.length;Dn++){fn.index>Dn?(Zn=fn,fn=null):Zn=fn.sibling;var vi=Mr(Wr,fn,na[Dn],ka);if(vi===null){fn===null&&(fn=Zn);break}e&&fn&&vi.alternate===null&&r(Wr,fn),Fr=xe(vi,Fr,Dn),qn===null?gn=vi:qn.sibling=vi,qn=vi,fn=Zn}if(Dn===na.length)return o(Wr,fn),Jn&&Ds(Wr,Dn),gn;if(fn===null){for(;Dn<na.length;Dn++)fn=_a(Wr,na[Dn],ka),fn!==null&&(Fr=xe(fn,Fr,Dn),qn===null?gn=fn:qn.sibling=fn,qn=fn);return Jn&&Ds(Wr,Dn),gn}for(fn=M(fn);Dn<na.length;Dn++)Zn=Kr(fn,Wr,Dn,na[Dn],ka),Zn!==null&&(e&&Zn.alternate!==null&&fn.delete(Zn.key===null?Dn:Zn.key),Fr=xe(Zn,Fr,Dn),qn===null?gn=Zn:qn.sibling=Zn,qn=Zn);return e&&fn.forEach(function(wo){return r(Wr,wo)}),Jn&&Ds(Wr,Dn),gn}function tn(Wr,Fr,na,ka){if(na==null)throw Error(n(151));for(var gn=null,qn=null,fn=Fr,Dn=Fr=0,Zn=null,vi=na.next();fn!==null&&!vi.done;Dn++,vi=na.next()){fn.index>Dn?(Zn=fn,fn=null):Zn=fn.sibling;var wo=Mr(Wr,fn,vi.value,ka);if(wo===null){fn===null&&(fn=Zn);break}e&&fn&&wo.alternate===null&&r(Wr,fn),Fr=xe(wo,Fr,Dn),qn===null?gn=wo:qn.sibling=wo,qn=wo,fn=Zn}if(vi.done)return o(Wr,fn),Jn&&Ds(Wr,Dn),gn;if(fn===null){for(;!vi.done;Dn++,vi=na.next())vi=_a(Wr,vi.value,ka),vi!==null&&(Fr=xe(vi,Fr,Dn),qn===null?gn=vi:qn.sibling=vi,qn=vi);return Jn&&Ds(Wr,Dn),gn}for(fn=M(fn);!vi.done;Dn++,vi=na.next())vi=Kr(fn,Wr,Dn,vi.value,ka),vi!==null&&(e&&vi.alternate!==null&&fn.delete(vi.key===null?Dn:vi.key),Fr=xe(vi,Fr,Dn),qn===null?gn=vi:qn.sibling=vi,qn=vi);return e&&fn.forEach(function(Ao){return r(Wr,Ao)}),Jn&&Ds(Wr,Dn),gn}function Pn(Wr,Fr,na,ka){if(typeof na=="object"&&na!==null&&na.type===T&&na.key===null&&(na=na.props.children),typeof na=="object"&&na!==null){switch(na.$$typeof){case Y:e:{for(var gn=na.key;Fr!==null;){if(Fr.key===gn){if(gn=na.type,gn===T){if(Fr.tag===7){o(Wr,Fr.sibling),ka=ie(Fr,na.props.children),ka.return=Wr,Wr=ka;break e}}else if(Fr.elementType===gn||typeof gn=="object"&&gn!==null&&gn.$$typeof===G&&Kn(gn)===Fr.type){o(Wr,Fr.sibling),ka=ie(Fr,na.props),Wn(ka,na),ka.return=Wr,Wr=ka;break e}o(Wr,Fr);break}else r(Wr,Fr);Fr=Fr.sibling}na.type===T?(ka=Sl(na.props.children,Wr.mode,ka,na.key),ka.return=Wr,Wr=ka):(ka=Gl(na.type,na.key,na.props,null,Wr.mode,ka),Wn(ka,na),ka.return=Wr,Wr=ka)}return dt(Wr);case Z:e:{for(gn=na.key;Fr!==null;){if(Fr.key===gn)if(Fr.tag===4&&Fr.stateNode.containerInfo===na.containerInfo&&Fr.stateNode.implementation===na.implementation){o(Wr,Fr.sibling),ka=ie(Fr,na.children||[]),ka.return=Wr,Wr=ka;break e}else{o(Wr,Fr);break}else r(Wr,Fr);Fr=Fr.sibling}ka=Gc(na,Wr.mode,ka),ka.return=Wr,Wr=ka}return dt(Wr);case G:return na=Kn(na),Pn(Wr,Fr,na,ka)}if(Ve(na))return Ha(Wr,Fr,na,ka);if($e(na)){if(gn=$e(na),typeof gn!="function")throw Error(n(150));return na=gn.call(na),tn(Wr,Fr,na,ka)}if(typeof na.then=="function")return Pn(Wr,Fr,ri(na),ka);if(na.$$typeof===I)return Pn(Wr,Fr,Ru(Wr,na),ka);gi(Wr,na)}return typeof na=="string"&&na!==""||typeof na=="number"||typeof na=="bigint"?(na=""+na,Fr!==null&&Fr.tag===6?(o(Wr,Fr.sibling),ka=ie(Fr,na),ka.return=Wr,Wr=ka):(o(Wr,Fr),ka=ec(na,Wr.mode,ka),ka.return=Wr,Wr=ka),dt(Wr)):o(Wr,Fr)}return function(Wr,Fr,na,ka){try{qi=0;var gn=Pn(Wr,Fr,na,ka);return Fn=null,gn}catch(fn){if(fn===ca||fn===en)throw fn;var qn=zo(29,fn,null,Wr.mode);return qn.lanes=ka,qn.return=Wr,qn}finally{}}}var In=kn(!0),vo=kn(!1),No=!1;function El(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zl(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Zo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Jl(e,r,o){var M=e.updateQueue;if(M===null)return null;if(M=M.shared,(Tn&2)!==0){var ie=M.pending;return ie===null?r.next=r:(r.next=ie.next,ie.next=r),M.pending=r,r=Tu(e),rl(e,null,o),r}return Ju(e,M,r,o),Tu(e)}function Kl(e,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var M=r.lanes;M&=e.pendingLanes,o|=M,r.lanes=o,An(e,o)}}function Qc(e,r){var o=e.updateQueue,M=e.alternate;if(M!==null&&(M=M.updateQueue,o===M)){var ie=null,xe=null;if(o=o.firstBaseUpdate,o!==null){do{var dt={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};xe===null?ie=xe=dt:xe=xe.next=dt,o=o.next}while(o!==null);xe===null?ie=xe=r:xe=xe.next=r}else ie=xe=r;o={baseState:M.baseState,firstBaseUpdate:ie,lastBaseUpdate:xe,shared:M.shared,callbacks:M.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=r:e.next=r,o.lastBaseUpdate=r}var ef=!1;function tf(){if(ef){var e=_t;if(e!==null)throw e}}function rf(e,r,o,M){ef=!1;var ie=e.updateQueue;No=!1;var xe=ie.firstBaseUpdate,dt=ie.lastBaseUpdate,St=ie.shared.pending;if(St!==null){ie.shared.pending=null;var br=St,Zr=br.next;br.next=null,dt===null?xe=Zr:dt.next=Zr,dt=br;var xa=e.alternate;xa!==null&&(xa=xa.updateQueue,St=xa.lastBaseUpdate,St!==dt&&(St===null?xa.firstBaseUpdate=Zr:St.next=Zr,xa.lastBaseUpdate=br))}if(xe!==null){var _a=ie.baseState;dt=0,xa=Zr=br=null,St=xe;do{var Mr=St.lane&-536870913,Kr=Mr!==St.lane;if(Kr?(yn&Mr)===Mr:(M&Mr)===Mr){Mr!==0&&Mr===re&&(ef=!0),xa!==null&&(xa=xa.next={lane:0,tag:St.tag,payload:St.payload,callback:null,next:null});e:{var Ha=e,tn=St;Mr=r;var Pn=o;switch(tn.tag){case 1:if(Ha=tn.payload,typeof Ha=="function"){_a=Ha.call(Pn,_a,Mr);break e}_a=Ha;break e;case 3:Ha.flags=Ha.flags&-65537|128;case 0:if(Ha=tn.payload,Mr=typeof Ha=="function"?Ha.call(Pn,_a,Mr):Ha,Mr==null)break e;_a=B({},_a,Mr);break e;case 2:No=!0}}Mr=St.callback,Mr!==null&&(e.flags|=64,Kr&&(e.flags|=8192),Kr=ie.callbacks,Kr===null?ie.callbacks=[Mr]:Kr.push(Mr))}else Kr={lane:Mr,tag:St.tag,payload:St.payload,callback:St.callback,next:null},xa===null?(Zr=xa=Kr,br=_a):xa=xa.next=Kr,dt|=Mr;if(St=St.next,St===null){if(St=ie.shared.pending,St===null)break;Kr=St,St=Kr.next,Kr.next=null,ie.lastBaseUpdate=Kr,ie.shared.pending=null}}while(!0);xa===null&&(br=_a),ie.baseState=br,ie.firstBaseUpdate=Zr,ie.lastBaseUpdate=xa,xe===null&&(ie.shared.lanes=0),Is|=dt,e.lanes=dt,e.memoizedState=_a}}function Md(e,r){if(typeof e!="function")throw Error(n(191,e));e.call(r)}function Ed(e,r){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)Md(o[e],r)}var ac=ze(null),If=ze(0);function Th(e,r){e=Oo,bt(If,e),bt(ac,r),Oo=e|r.baseLanes}function Mh(){bt(If,Oo),bt(ac,ac.current)}function Bf(){Oo=If.current,lt(ac),lt(If)}var ns=ze(null),is=null;function Ql(e){var r=e.alternate;bt(no,no.current&1),bt(ns,e),is===null&&(r===null||ac.current!==null||r.memoizedState!==null)&&(is=e)}function Eh(e){bt(no,no.current),bt(ns,e),is===null&&(is=e)}function Cd(e){e.tag===22?(bt(no,no.current),bt(ns,e),is===null&&(is=e)):eu()}function eu(){bt(no,no.current),bt(ns,ns.current)}function os(e){lt(ns),is===e&&(is=null),lt(no)}var no=ze(0);function po(e){for(var r=e;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||ih(o)||cd(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Wi=0,$n=null,Li=null,uo=null,Hf=!1,nc=!1,Lu=!1,Uf=0,af=0,ic=null,g0=0;function Qi(){throw Error(n(321))}function Ch(e,r){if(r===null)return!1;for(var o=0;o<r.length&&o<e.length;o++)if(!lo(e[o],r[o]))return!1;return!0}function kh(e,r,o,M,ie,xe){return Wi=xe,$n=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ie.H=e===null||e.memoizedState===null?pt:Ke,Lu=!1,xe=o(M,ie),Lu=!1,nc&&(xe=Rd(r,o,M,ie)),kd(e),xe}function kd(e){Ie.H=nt;var r=Li!==null&&Li.next!==null;if(Wi=0,uo=Li=$n=null,Hf=!1,af=0,ic=null,r)throw Error(n(300));e===null||xt||(e=e.dependencies,e!==null&&ku(e)&&(xt=!0))}function Rd(e,r,o,M){$n=e;var ie=0;do{if(nc&&(ic=null),af=0,nc=!1,25<=ie)throw Error(n(301));if(ie+=1,uo=Li=null,e.updateQueue!=null){var xe=e.updateQueue;xe.lastEffect=null,xe.events=null,xe.stores=null,xe.memoCache!=null&&(xe.memoCache.index=0)}Ie.H=gt,xe=r(o,M)}while(nc);return xe}function y0(){var e=Ie.H,r=e.useState()[0];return r=typeof r.then=="function"?u(r):r,e=e.useState()[0],(Li!==null?Li.memoizedState:null)!==e&&($n.flags|=1024),r}function Rh(){var e=Uf!==0;return Uf=0,e}function Dh(e,r,o){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~o}function zh(e){if(Hf){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}Hf=!1}Wi=0,uo=Li=$n=null,nc=!1,af=Uf=0,ic=null}function ce(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return uo===null?$n.memoizedState=uo=e:uo=uo.next=e,uo}function fe(){if(Li===null){var e=$n.alternate;e=e!==null?e.memoizedState:null}else e=Li.next;var r=uo===null?$n.memoizedState:uo.next;if(r!==null)uo=r,Li=e;else{if(e===null)throw $n.alternate===null?Error(n(467)):Error(n(310));Li=e,e={memoizedState:Li.memoizedState,baseState:Li.baseState,baseQueue:Li.baseQueue,queue:Li.queue,next:null},uo===null?$n.memoizedState=uo=e:uo=uo.next=e}return uo}function d(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function u(e){var r=af;return af+=1,ic===null&&(ic=[]),e=Hi(ic,e,r),r=$n,(uo===null?r.memoizedState:uo.next)===null&&(r=r.alternate,Ie.H=r===null||r.memoizedState===null?pt:Ke),e}function c(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return u(e);if(e.$$typeof===I)return ho(e)}throw Error(n(438,String(e)))}function m(e){var r=null,o=$n.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var M=$n.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(r={data:M.data.map(function(ie){return ie.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=d(),$n.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(e),M=0;M<e;M++)o[M]=ae;return r.index++,o}function v(e,r){return typeof r=="function"?r(e):r}function p(e){var r=fe();return g(r,Li,e)}function g(e,r,o){var M=e.queue;if(M===null)throw Error(n(311));M.lastRenderedReducer=o;var ie=e.baseQueue,xe=M.pending;if(xe!==null){if(ie!==null){var dt=ie.next;ie.next=xe.next,xe.next=dt}r.baseQueue=ie=xe,M.pending=null}if(xe=e.baseState,ie===null)e.memoizedState=xe;else{r=ie.next;var St=dt=null,br=null,Zr=r,xa=!1;do{var _a=Zr.lane&-536870913;if(_a!==Zr.lane?(yn&_a)===_a:(Wi&_a)===_a){var Mr=Zr.revertLane;if(Mr===0)br!==null&&(br=br.next={lane:0,revertLane:0,gesture:null,action:Zr.action,hasEagerState:Zr.hasEagerState,eagerState:Zr.eagerState,next:null}),_a===re&&(xa=!0);else if((Wi&Mr)===Mr){Zr=Zr.next,Mr===re&&(xa=!0);continue}else _a={lane:0,revertLane:Zr.revertLane,gesture:null,action:Zr.action,hasEagerState:Zr.hasEagerState,eagerState:Zr.eagerState,next:null},br===null?(St=br=_a,dt=xe):br=br.next=_a,$n.lanes|=Mr,Is|=Mr;_a=Zr.action,Lu&&o(xe,_a),xe=Zr.hasEagerState?Zr.eagerState:o(xe,_a)}else Mr={lane:_a,revertLane:Zr.revertLane,gesture:Zr.gesture,action:Zr.action,hasEagerState:Zr.hasEagerState,eagerState:Zr.eagerState,next:null},br===null?(St=br=Mr,dt=xe):br=br.next=Mr,$n.lanes|=_a,Is|=_a;Zr=Zr.next}while(Zr!==null&&Zr!==r);if(br===null?dt=xe:br.next=St,!lo(xe,e.memoizedState)&&(xt=!0,xa&&(o=_t,o!==null)))throw o;e.memoizedState=xe,e.baseState=dt,e.baseQueue=br,M.lastRenderedState=xe}return ie===null&&(M.lanes=0),[e.memoizedState,M.dispatch]}function w(e){var r=fe(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=e;var M=o.dispatch,ie=o.pending,xe=r.memoizedState;if(ie!==null){o.pending=null;var dt=ie=ie.next;do xe=e(xe,dt.action),dt=dt.next;while(dt!==ie);lo(xe,r.memoizedState)||(xt=!0),r.memoizedState=xe,r.baseQueue===null&&(r.baseState=xe),o.lastRenderedState=xe}return[xe,M]}function s(e,r,o){var M=$n,ie=fe(),xe=Jn;if(xe){if(o===void 0)throw Error(n(407));o=o()}else o=r();var dt=!lo((Li||ie).memoizedState,o);if(dt&&(ie.memoizedState=o,xt=!0),ie=ie.queue,le(z.bind(null,M,ie,e),[e]),ie.getSnapshot!==r||dt||uo!==null&&uo.memoizedState.tag&1){if(M.flags|=2048,me(9,{destroy:void 0},b.bind(null,M,ie,o,r),null),Nn===null)throw Error(n(349));xe||(Wi&127)!==0||j(M,r,o)}return o}function j(e,r,o){e.flags|=16384,e={getSnapshot:r,value:o},r=$n.updateQueue,r===null?(r=d(),$n.updateQueue=r,r.stores=[e]):(o=r.stores,o===null?r.stores=[e]:o.push(e))}function b(e,r,o,M){r.value=o,r.getSnapshot=M,X(r)&&N(e)}function z(e,r,o){return o(function(){X(r)&&N(e)})}function X(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!lo(e,o)}catch{return!0}}function N(e){var r=wl(e,2);r!==null&&Ko(r,e,2)}function O(e){var r=ce();if(typeof e=="function"){var o=e;if(e=o(),Lu){Lr(!0);try{o()}finally{Lr(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:e},r}function F(e,r,o,M){return e.baseState=o,g(e,Li,typeof M=="function"?M:v)}function P(e,r,o,M,ie){if(Kt(e))throw Error(n(485));if(e=r.action,e!==null){var xe={payload:ie,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(dt){xe.listeners.push(dt)}};Ie.T!==null?o(!0):xe.isTransition=!1,M(xe),o=r.pending,o===null?(xe.next=r.pending=xe,_(r,xe)):(xe.next=o.next,r.pending=o.next=xe)}}function _(e,r){var o=r.action,M=r.payload,ie=e.state;if(r.isTransition){var xe=Ie.T,dt={};Ie.T=dt;try{var St=o(ie,M),br=Ie.S;br!==null&&br(dt,St),R(e,r,St)}catch(Zr){te(e,r,Zr)}finally{xe!==null&&dt.types!==null&&(xe.types=dt.types),Ie.T=xe}}else try{xe=o(ie,M),R(e,r,xe)}catch(Zr){te(e,r,Zr)}}function R(e,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(M){H(e,r,M)},function(M){return te(e,r,M)}):H(e,r,o)}function H(e,r,o){r.status="fulfilled",r.value=o,J(r),e.state=o,r=e.pending,r!==null&&(o=r.next,o===r?e.pending=null:(o=o.next,r.next=o,_(e,o)))}function te(e,r,o){var M=e.pending;if(e.pending=null,M!==null){M=M.next;do r.status="rejected",r.reason=o,J(r),r=r.next;while(r!==M)}e.action=null}function J(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function ye(e,r){return r}function se(e,r){if(Jn){var o=Nn.formState;if(o!==null){e:{var M=$n;if(Jn){if(Pi){t:{for(var ie=Pi,xe=To;ie.nodeType!==8;){if(!xe){ie=null;break t}if(ie=_s(ie.nextSibling),ie===null){ie=null;break t}}xe=ie.data,ie=xe==="F!"||xe==="F"?ie:null}if(ie){Pi=_s(ie.nextSibling),M=ie.data==="F!";break e}}zs(M)}M=!1}M&&(r=o[0])}}return o=ce(),o.memoizedState=o.baseState=r,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ye,lastRenderedState:r},o.queue=M,o=ft.bind(null,$n,M),M.dispatch=o,M=O(!1),xe=Ct.bind(null,$n,!1,M.queue),M=ce(),ie={state:r,dispatch:null,action:e,pending:null},M.queue=ie,o=P.bind(null,$n,ie,xe,o),ie.dispatch=o,M.memoizedState=e,[r,o,!1]}function he(e){var r=fe();return pe(r,Li,e)}function pe(e,r,o){if(r=g(e,r,ye)[0],e=p(v)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var M=u(r)}catch(dt){throw dt===ca?en:dt}else M=r;r=fe();var ie=r.queue,xe=ie.dispatch;return o!==r.memoizedState&&($n.flags|=2048,me(9,{destroy:void 0},Q.bind(null,ie,o),null)),[M,xe,e]}function Q(e,r){e.action=r}function ue(e){var r=fe(),o=Li;if(o!==null)return pe(r,o,e);fe(),r=r.memoizedState,o=fe();var M=o.queue.dispatch;return o.memoizedState=e,[r,M,!1]}function me(e,r,o,M){return e={tag:e,create:o,deps:M,inst:r,next:null},r=$n.updateQueue,r===null&&(r=d(),$n.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=e.next=e:(M=o.next,o.next=e,e.next=M,r.lastEffect=e),e}function be(){return fe().memoizedState}function ve(e,r,o,M){var ie=ce();$n.flags|=e,ie.memoizedState=me(1|r,{destroy:void 0},o,M===void 0?null:M)}function Me(e,r,o,M){var ie=fe();M=M===void 0?null:M;var xe=ie.memoizedState.inst;Li!==null&&M!==null&&Ch(M,Li.memoizedState.deps)?ie.memoizedState=me(r,xe,o,M):($n.flags|=e,ie.memoizedState=me(1|r,xe,o,M))}function ke(e,r){ve(8390656,8,e,r)}function le(e,r){Me(2048,8,e,r)}function De(e){$n.flags|=4;var r=$n.updateQueue;if(r===null)r=d(),$n.updateQueue=r,r.events=[e];else{var o=r.events;o===null?r.events=[e]:o.push(e)}}function Oe(e){var r=fe().memoizedState;return De({ref:r,nextImpl:e}),function(){if((Tn&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function He(e,r){return Me(4,2,e,r)}function Be(e,r){return Me(4,4,e,r)}function Ye(e,r){if(typeof r=="function"){e=e();var o=r(e);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function st(e,r,o){o=o!=null?o.concat([e]):null,Me(4,4,Ye.bind(null,r,e),o)}function it(){}function yt(e,r){var o=fe();r=r===void 0?null:r;var M=o.memoizedState;return r!==null&&Ch(r,M[1])?M[0]:(o.memoizedState=[e,r],e)}function _e(e,r){var o=fe();r=r===void 0?null:r;var M=o.memoizedState;if(r!==null&&Ch(r,M[1]))return M[0];if(M=e(),Lu){Lr(!0);try{e()}finally{Lr(!1)}}return o.memoizedState=[M,r],M}function Ee(e,r,o){return o===void 0||(Wi&1073741824)!==0&&(yn&261930)===0?e.memoizedState=r:(e.memoizedState=o,e=zd(),$n.lanes|=e,Is|=e,o)}function de(e,r,o,M){return lo(o,r)?o:ac.current!==null?(e=Ee(e,o,M),lo(e,r)||(xt=!0),e):(Wi&42)===0||(Wi&1073741824)!==0&&(yn&261930)===0?(xt=!0,e.memoizedState=o):(e=zd(),$n.lanes|=e,Is|=e,r)}function we(e,r,o,M,ie){var xe=Xe.p;Xe.p=xe!==0&&8>xe?xe:8;var dt=Ie.T,St={};Ie.T=St,Ct(e,!1,r,o);try{var br=ie(),Zr=Ie.S;if(Zr!==null&&Zr(St,br),br!==null&&typeof br=="object"&&typeof br.then=="function"){var xa=mr(br,M);wt(e,r,xa,ls(e))}else wt(e,r,M,ls(e))}catch(_a){wt(e,r,{then:function(){},status:"rejected",reason:_a},ls())}finally{Xe.p=xe,dt!==null&&St.types!==null&&(dt.types=St.types),Ie.T=dt}}function je(){}function Ae(e,r,o,M){if(e.tag!==5)throw Error(n(476));var ie=$(e).queue;we(e,ie,r,et,o===null?je:function(){return oe(e),o(M)})}function $(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:et},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:o},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function oe(e){var r=$(e);r.next===null&&(r=e.alternate.memoizedState),wt(e,r.next.queue,{},ls())}function ge(){return ho(ou)}function Te(){return fe().memoizedState}function Ue(){return fe().memoizedState}function Ze(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var o=ls();e=Zo(o);var M=Jl(r,e,o);M!==null&&(Ko(M,r,o),Kl(M,r,o)),r={cache:rc()},e.payload=r;return}r=r.return}}function Je(e,r,o){var M=ls();o={lane:M,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Kt(e)?$t(r,o):(o=Su(e,r,o,M),o!==null&&(Ko(o,e,M),Wt(o,r,M)))}function ft(e,r,o){var M=ls();wt(e,r,o,M)}function wt(e,r,o,M){var ie={lane:M,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Kt(e))$t(r,ie);else{var xe=e.alternate;if(e.lanes===0&&(xe===null||xe.lanes===0)&&(xe=r.lastRenderedReducer,xe!==null))try{var dt=r.lastRenderedState,St=xe(dt,o);if(ie.hasEagerState=!0,ie.eagerState=St,lo(St,dt))return Ju(e,r,ie,0),Nn===null&&Au(),!1}catch{}finally{}if(o=Su(e,r,ie,M),o!==null)return Ko(o,e,M),Wt(o,r,M),!0}return!1}function Ct(e,r,o,M){if(M={lane:2,revertLane:Vh(),gesture:null,action:M,hasEagerState:!1,eagerState:null,next:null},Kt(e)){if(r)throw Error(n(479))}else r=Su(e,o,M,2),r!==null&&Ko(r,e,2)}function Kt(e){var r=e.alternate;return e===$n||r!==null&&r===$n}function $t(e,r){nc=Hf=!0;var o=e.pending;o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r}function Wt(e,r,o){if((o&4194048)!==0){var M=r.lanes;M&=e.pendingLanes,o|=M,r.lanes=o,An(e,o)}}var nt={readContext:ho,use:c,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useInsertionEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useSyncExternalStore:Qi,useId:Qi,useHostTransitionStatus:Qi,useFormState:Qi,useActionState:Qi,useOptimistic:Qi,useMemoCache:Qi,useCacheRefresh:Qi};nt.useEffectEvent=Qi;var pt={readContext:ho,use:c,useCallback:function(e,r){return ce().memoizedState=[e,r===void 0?null:r],e},useContext:ho,useEffect:ke,useImperativeHandle:function(e,r,o){o=o!=null?o.concat([e]):null,ve(4194308,4,Ye.bind(null,r,e),o)},useLayoutEffect:function(e,r){return ve(4194308,4,e,r)},useInsertionEffect:function(e,r){ve(4,2,e,r)},useMemo:function(e,r){var o=ce();r=r===void 0?null:r;var M=e();if(Lu){Lr(!0);try{e()}finally{Lr(!1)}}return o.memoizedState=[M,r],M},useReducer:function(e,r,o){var M=ce();if(o!==void 0){var ie=o(r);if(Lu){Lr(!0);try{o(r)}finally{Lr(!1)}}}else ie=r;return M.memoizedState=M.baseState=ie,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:ie},M.queue=e,e=e.dispatch=Je.bind(null,$n,e),[M.memoizedState,e]},useRef:function(e){var r=ce();return e={current:e},r.memoizedState=e},useState:function(e){e=O(e);var r=e.queue,o=ft.bind(null,$n,r);return r.dispatch=o,[e.memoizedState,o]},useDebugValue:it,useDeferredValue:function(e,r){var o=ce();return Ee(o,e,r)},useTransition:function(){var e=O(!1);return e=we.bind(null,$n,e.queue,!0,!1),ce().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,o){var M=$n,ie=ce();if(Jn){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Nn===null)throw Error(n(349));(yn&127)!==0||j(M,r,o)}ie.memoizedState=o;var xe={value:o,getSnapshot:r};return ie.queue=xe,ke(z.bind(null,M,xe,e),[e]),M.flags|=2048,me(9,{destroy:void 0},b.bind(null,M,xe,o,r),null),o},useId:function(){var e=ce(),r=Nn.identifierPrefix;if(Jn){var o=ms,M=as;o=(M&~(1<<32-Gr(M)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Uf++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=g0++,r="_"+r+"r_"+o.toString(32)+"_";return e.memoizedState=r},useHostTransitionStatus:ge,useFormState:se,useActionState:se,useOptimistic:function(e){var r=ce();r.memoizedState=r.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Ct.bind(null,$n,!0,o),o.dispatch=r,[e,r]},useMemoCache:m,useCacheRefresh:function(){return ce().memoizedState=Ze.bind(null,$n)},useEffectEvent:function(e){var r=ce(),o={impl:e};return r.memoizedState=o,function(){if((Tn&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}},Ke={readContext:ho,use:c,useCallback:yt,useContext:ho,useEffect:le,useImperativeHandle:st,useInsertionEffect:He,useLayoutEffect:Be,useMemo:_e,useReducer:p,useRef:be,useState:function(){return p(v)},useDebugValue:it,useDeferredValue:function(e,r){var o=fe();return de(o,Li.memoizedState,e,r)},useTransition:function(){var e=p(v)[0],r=fe().memoizedState;return[typeof e=="boolean"?e:u(e),r]},useSyncExternalStore:s,useId:Te,useHostTransitionStatus:ge,useFormState:he,useActionState:he,useOptimistic:function(e,r){var o=fe();return F(o,Li,e,r)},useMemoCache:m,useCacheRefresh:Ue};Ke.useEffectEvent=Oe;var gt={readContext:ho,use:c,useCallback:yt,useContext:ho,useEffect:le,useImperativeHandle:st,useInsertionEffect:He,useLayoutEffect:Be,useMemo:_e,useReducer:w,useRef:be,useState:function(){return w(v)},useDebugValue:it,useDeferredValue:function(e,r){var o=fe();return Li===null?Ee(o,e,r):de(o,Li.memoizedState,e,r)},useTransition:function(){var e=w(v)[0],r=fe().memoizedState;return[typeof e=="boolean"?e:u(e),r]},useSyncExternalStore:s,useId:Te,useHostTransitionStatus:ge,useFormState:ue,useActionState:ue,useOptimistic:function(e,r){var o=fe();return Li!==null?F(o,Li,e,r):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:m,useCacheRefresh:Ue};gt.useEffectEvent=Oe;function Ft(e,r,o,M){r=e.memoizedState,o=o(M,r),o=o==null?r:B({},r,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Xt={enqueueSetState:function(e,r,o){e=e._reactInternals;var M=ls(),ie=Zo(M);ie.payload=r,o!=null&&(ie.callback=o),r=Jl(e,ie,M),r!==null&&(Ko(r,e,M),Kl(r,e,M))},enqueueReplaceState:function(e,r,o){e=e._reactInternals;var M=ls(),ie=Zo(M);ie.tag=1,ie.payload=r,o!=null&&(ie.callback=o),r=Jl(e,ie,M),r!==null&&(Ko(r,e,M),Kl(r,e,M))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var o=ls(),M=Zo(o);M.tag=2,r!=null&&(M.callback=r),r=Jl(e,M,o),r!==null&&(Ko(r,e,o),Kl(r,e,o))}};function or(e,r,o,M,ie,xe,dt){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(M,xe,dt):r.prototype&&r.prototype.isPureReactComponent?!Ul(o,M)||!Ul(ie,xe):!0}function sr(e,r,o,M){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,M),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,M),r.state!==e&&Xt.enqueueReplaceState(r,r.state,null)}function dr(e,r){var o=r;if("ref"in r){o={};for(var M in r)M!=="ref"&&(o[M]=r[M])}if(e=e.defaultProps){o===r&&(o=B({},o));for(var ie in e)o[ie]===void 0&&(o[ie]=e[ie])}return o}function wr(e){_i(e)}function xr(e){console.error(e)}function Pr(e){_i(e)}function nr(e,r){try{var o=e.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(M){setTimeout(function(){throw M})}}function jr(e,r,o){try{var M=e.onCaughtError;M(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(ie){setTimeout(function(){throw ie})}}function ta(e,r,o){return o=Zo(o),o.tag=3,o.payload={element:null},o.callback=function(){nr(e,r)},o}function Nr(e){return e=Zo(e),e.tag=3,e}function Jr(e,r,o,M){var ie=o.type.getDerivedStateFromError;if(typeof ie=="function"){var xe=M.value;e.payload=function(){return ie(xe)},e.callback=function(){jr(r,o,M)}}var dt=o.stateNode;dt!==null&&typeof dt.componentDidCatch=="function"&&(e.callback=function(){jr(r,o,M),typeof ie!="function"&&(il===null?il=new Set([this]):il.add(this));var St=M.stack;this.componentDidCatch(M.value,{componentStack:St!==null?St:""})})}function vt(e,r,o,M,ie){if(o.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(r=o.alternate,r!==null&&Ps(r,o,ie,!0),o=ns.current,o!==null){switch(o.tag){case 31:case 13:return is===null?of():o.alternate===null&&ji===0&&(ji=3),o.flags&=-257,o.flags|=65536,o.lanes=ie,M===Wa?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([M]):r.add(M),Hh(e,M,ie)),!1;case 22:return o.flags|=65536,M===Wa?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([M])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([M]):o.add(M)),Hh(e,M,ie)),!1}throw Error(n(435,o.tag))}return Hh(e,M,ie),of(),!1}if(Jn)return r=ns.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=ie,M!==Wc&&(e=Error(n(422),{cause:M}),Cu(Ho(e,o)))):(M!==Wc&&(r=Error(n(423),{cause:M}),Cu(Ho(r,o))),e=e.current.alternate,e.flags|=65536,ie&=-ie,e.lanes|=ie,M=Ho(M,o),ie=ta(e.stateNode,M,ie),Qc(e,ie),ji!==4&&(ji=2)),!1;var xe=Error(n(520),{cause:M});if(xe=Ho(xe,o),lc===null?lc=[xe]:lc.push(xe),ji!==4&&(ji=2),r===null)return!0;M=Ho(M,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,e=ie&-ie,o.lanes|=e,e=ta(o.stateNode,M,e),Qc(o,e),!1;case 1:if(r=o.type,xe=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(il===null||!il.has(xe))))return o.flags|=65536,ie&=-ie,o.lanes|=ie,ie=Nr(ie),Jr(ie,e,o,M),Qc(o,ie),!1}o=o.return}while(o!==null);return!1}var Mt=Error(n(461)),xt=!1;function Le(e,r,o,M){r.child=e===null?vo(r,null,o,M):In(r,e.child,o,M)}function ot(e,r,o,M,ie){o=o.render;var xe=r.ref;if("ref"in M){var dt={};for(var St in M)St!=="ref"&&(dt[St]=M[St])}else dt=M;return Ml(r),M=kh(e,r,o,dt,xe,ie),St=Rh(),e!==null&&!xt?(Dh(e,r,ie),Ba(e,r,ie)):(Jn&&St&&Vc(r),r.flags|=1,Le(e,r,M,ie),r.child)}function ct(e,r,o,M,ie){if(e===null){var xe=o.type;return typeof xe=="function"&&!Ku(xe)&&xe.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=xe,ut(e,r,xe,M,ie)):(e=Gl(o.type,null,M,r,r.mode,ie),e.ref=r.ref,e.return=r,r.child=e)}if(xe=e.child,!un(e,ie)){var dt=xe.memoizedProps;if(o=o.compare,o=o!==null?o:Ul,o(dt,M)&&e.ref===r.ref)return Ba(e,r,ie)}return r.flags|=1,e=ps(xe,M),e.ref=r.ref,e.return=r,r.child=e}function ut(e,r,o,M,ie){if(e!==null){var xe=e.memoizedProps;if(Ul(xe,M)&&e.ref===r.ref)if(xt=!1,r.pendingProps=M=xe,un(e,ie))(e.flags&131072)!==0&&(xt=!0);else return r.lanes=e.lanes,Ba(e,r,ie)}return Ar(e,r,o,M,ie)}function Pt(e,r,o,M){var ie=M.children,xe=e!==null?e.memoizedState:null;if(e===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),M.mode==="hidden"){if((r.flags&128)!==0){if(xe=xe!==null?xe.baseLanes|o:o,e!==null){for(M=r.child=e.child,ie=0;M!==null;)ie=ie|M.lanes|M.childLanes,M=M.sibling;M=ie&~xe}else M=0,r.child=null;return qt(e,r,xe,o,M)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&mn(r,xe!==null?xe.cachePool:null),xe!==null?Th(r,xe):Mh(),Cd(r);else return M=r.lanes=536870912,qt(e,r,xe!==null?xe.baseLanes|o:o,o,M)}else xe!==null?(mn(r,xe.cachePool),Th(r,xe),eu(),r.memoizedState=null):(e!==null&&mn(r,null),Mh(),eu());return Le(e,r,ie,o),r.child}function Ot(e,r){return e!==null&&e.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function qt(e,r,o,M,ie){var xe=aa();return xe=xe===null?null:{parent:Zi._currentValue,pool:xe},r.memoizedState={baseLanes:o,cachePool:xe},e!==null&&mn(r,null),Mh(),Cd(r),e!==null&&Ps(e,r,M,!0),r.childLanes=ie,null}function ir(e,r){return r=Va({mode:r.mode,children:r.children},e.mode),r.ref=e.ref,e.child=r,r.return=e,r}function _r(e,r,o){return In(r,e.child,null,o),e=ir(r,r.pendingProps),e.flags|=2,os(r),r.memoizedState=null,e}function Bt(e,r,o){var M=r.pendingProps,ie=(r.flags&128)!==0;if(r.flags&=-129,e===null){if(Jn){if(M.mode==="hidden")return e=ir(r,M),r.lanes=536870912,Ot(null,e);if(Eh(r),(e=Pi)?(e=ud(e,To),e=e!==null&&e.data==="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:al!==null?{id:as,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},o=Pf(e),o.return=r,r.child=o,fo=r,Pi=null)):e=null,e===null)throw zs(r);return r.lanes=536870912,null}return ir(r,M)}var xe=e.memoizedState;if(xe!==null){var dt=xe.dehydrated;if(Eh(r),ie)if(r.flags&256)r.flags&=-257,r=_r(e,r,o);else if(r.memoizedState!==null)r.child=e.child,r.flags|=128,r=null;else throw Error(n(558));else if(xt||Ps(e,r,o,!1),ie=(o&e.childLanes)!==0,xt||ie){if(M=Nn,M!==null&&(dt=Ti(M,o),dt!==0&&dt!==xe.retryLane))throw xe.retryLane=dt,wl(e,dt),Ko(M,e,dt),Mt;of(),r=_r(e,r,o)}else e=xe.treeContext,Pi=_s(dt.nextSibling),fo=r,Jn=!0,ys=null,To=!1,e!==null&&Yc(r,e),r=ir(r,M),r.flags|=4096;return r}return e=ps(e.child,{mode:M.mode,children:M.children}),e.ref=r.ref,r.child=e,e.return=r,e}function gr(e,r){var o=r.ref;if(o===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(e===null||e.ref!==o)&&(r.flags|=4194816)}}function Ar(e,r,o,M,ie){return Ml(r),o=kh(e,r,o,M,void 0,ie),M=Rh(),e!==null&&!xt?(Dh(e,r,ie),Ba(e,r,ie)):(Jn&&M&&Vc(r),r.flags|=1,Le(e,r,o,ie),r.child)}function Er(e,r,o,M,ie,xe){return Ml(r),r.updateQueue=null,o=Rd(r,M,o,ie),kd(e),M=Rh(),e!==null&&!xt?(Dh(e,r,xe),Ba(e,r,xe)):(Jn&&M&&Vc(r),r.flags|=1,Le(e,r,o,xe),r.child)}function ba(e,r,o,M,ie){if(Ml(r),r.stateNode===null){var xe=Al,dt=o.contextType;typeof dt=="object"&&dt!==null&&(xe=ho(dt)),xe=new o(M,xe),r.memoizedState=xe.state!==null&&xe.state!==void 0?xe.state:null,xe.updater=Xt,r.stateNode=xe,xe._reactInternals=r,xe=r.stateNode,xe.props=M,xe.state=r.memoizedState,xe.refs={},El(r),dt=o.contextType,xe.context=typeof dt=="object"&&dt!==null?ho(dt):Al,xe.state=r.memoizedState,dt=o.getDerivedStateFromProps,typeof dt=="function"&&(Ft(r,o,dt,M),xe.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof xe.getSnapshotBeforeUpdate=="function"||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(dt=xe.state,typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount(),dt!==xe.state&&Xt.enqueueReplaceState(xe,xe.state,null),rf(r,M,xe,ie),tf(),xe.state=r.memoizedState),typeof xe.componentDidMount=="function"&&(r.flags|=4194308),M=!0}else if(e===null){xe=r.stateNode;var St=r.memoizedProps,br=dr(o,St);xe.props=br;var Zr=xe.context,xa=o.contextType;dt=Al,typeof xa=="object"&&xa!==null&&(dt=ho(xa));var _a=o.getDerivedStateFromProps;xa=typeof _a=="function"||typeof xe.getSnapshotBeforeUpdate=="function",St=r.pendingProps!==St,xa||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(St||Zr!==dt)&&sr(r,xe,M,dt),No=!1;var Mr=r.memoizedState;xe.state=Mr,rf(r,M,xe,ie),tf(),Zr=r.memoizedState,St||Mr!==Zr||No?(typeof _a=="function"&&(Ft(r,o,_a,M),Zr=r.memoizedState),(br=No||or(r,o,br,M,Mr,Zr,dt))?(xa||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(r.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=M,r.memoizedState=Zr),xe.props=M,xe.state=Zr,xe.context=dt,M=br):(typeof xe.componentDidMount=="function"&&(r.flags|=4194308),M=!1)}else{xe=r.stateNode,Zl(e,r),dt=r.memoizedProps,xa=dr(o,dt),xe.props=xa,_a=r.pendingProps,Mr=xe.context,Zr=o.contextType,br=Al,typeof Zr=="object"&&Zr!==null&&(br=ho(Zr)),St=o.getDerivedStateFromProps,(Zr=typeof St=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(dt!==_a||Mr!==br)&&sr(r,xe,M,br),No=!1,Mr=r.memoizedState,xe.state=Mr,rf(r,M,xe,ie),tf();var Kr=r.memoizedState;dt!==_a||Mr!==Kr||No||e!==null&&e.dependencies!==null&&ku(e.dependencies)?(typeof St=="function"&&(Ft(r,o,St,M),Kr=r.memoizedState),(xa=No||or(r,o,xa,M,Mr,Kr,br)||e!==null&&e.dependencies!==null&&ku(e.dependencies))?(Zr||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(M,Kr,br),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(M,Kr,br)),typeof xe.componentDidUpdate=="function"&&(r.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof xe.componentDidUpdate!="function"||dt===e.memoizedProps&&Mr===e.memoizedState||(r.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||dt===e.memoizedProps&&Mr===e.memoizedState||(r.flags|=1024),r.memoizedProps=M,r.memoizedState=Kr),xe.props=M,xe.state=Kr,xe.context=br,M=xa):(typeof xe.componentDidUpdate!="function"||dt===e.memoizedProps&&Mr===e.memoizedState||(r.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||dt===e.memoizedProps&&Mr===e.memoizedState||(r.flags|=1024),M=!1)}return xe=M,gr(e,r),M=(r.flags&128)!==0,xe||M?(xe=r.stateNode,o=M&&typeof o.getDerivedStateFromError!="function"?null:xe.render(),r.flags|=1,e!==null&&M?(r.child=In(r,e.child,null,ie),r.child=In(r,null,o,ie)):Le(e,r,o,ie),r.memoizedState=xe.state,e=r.child):e=Ba(e,r,ie),e}function Ga(e,r,o,M){return Tl(),r.flags|=256,Le(e,r,o,M),r.child}var Xa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Aa(e){return{baseLanes:e,cachePool:qr()}}function Oa(e,r,o){return e=e!==null?e.childLanes&~o:0,r&&(e|=Po),e}function va(e,r,o){var M=r.pendingProps,ie=!1,xe=(r.flags&128)!==0,dt;if((dt=xe)||(dt=e!==null&&e.memoizedState===null?!1:(no.current&2)!==0),dt&&(ie=!0,r.flags&=-129),dt=(r.flags&32)!==0,r.flags&=-33,e===null){if(Jn){if(ie?Ql(r):eu(),(e=Pi)?(e=ud(e,To),e=e!==null&&e.data!=="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:al!==null?{id:as,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},o=Pf(e),o.return=r,r.child=o,fo=r,Pi=null)):e=null,e===null)throw zs(r);return cd(e)?r.lanes=32:r.lanes=536870912,null}var St=M.children;return M=M.fallback,ie?(eu(),ie=r.mode,St=Va({mode:"hidden",children:St},ie),M=Sl(M,ie,o,null),St.return=r,M.return=r,St.sibling=M,r.child=St,M=r.child,M.memoizedState=Aa(o),M.childLanes=Oa(e,dt,o),r.memoizedState=Xa,Ot(null,M)):(Ql(r),ma(r,St))}var br=e.memoizedState;if(br!==null&&(St=br.dehydrated,St!==null)){if(xe)r.flags&256?(Ql(r),r.flags&=-257,r=ja(e,r,o)):r.memoizedState!==null?(eu(),r.child=e.child,r.flags|=128,r=null):(eu(),St=M.fallback,ie=r.mode,M=Va({mode:"visible",children:M.children},ie),St=Sl(St,ie,o,null),St.flags|=2,M.return=r,St.return=r,M.sibling=St,r.child=M,In(r,e.child,null,o),M=r.child,M.memoizedState=Aa(o),M.childLanes=Oa(e,dt,o),r.memoizedState=Xa,r=Ot(null,M));else if(Ql(r),cd(St)){if(dt=St.nextSibling&&St.nextSibling.dataset,dt)var Zr=dt.dgst;dt=Zr,M=Error(n(419)),M.stack="",M.digest=dt,Cu({value:M,source:null,stack:null}),r=ja(e,r,o)}else if(xt||Ps(e,r,o,!1),dt=(o&e.childLanes)!==0,xt||dt){if(dt=Nn,dt!==null&&(M=Ti(dt,o),M!==0&&M!==br.retryLane))throw br.retryLane=M,wl(e,M),Ko(dt,e,M),Mt;ih(St)||of(),r=ja(e,r,o)}else ih(St)?(r.flags|=192,r.child=e.child,r=null):(e=br.treeContext,Pi=_s(St.nextSibling),fo=r,Jn=!0,ys=null,To=!1,e!==null&&Yc(r,e),r=ma(r,M.children),r.flags|=4096);return r}return ie?(eu(),St=M.fallback,ie=r.mode,br=e.child,Zr=br.sibling,M=ps(br,{mode:"hidden",children:M.children}),M.subtreeFlags=br.subtreeFlags&65011712,Zr!==null?St=ps(Zr,St):(St=Sl(St,ie,o,null),St.flags|=2),St.return=r,M.return=r,M.sibling=St,r.child=M,Ot(null,M),M=r.child,St=e.child.memoizedState,St===null?St=Aa(o):(ie=St.cachePool,ie!==null?(br=Zi._currentValue,ie=ie.parent!==br?{parent:br,pool:br}:ie):ie=qr(),St={baseLanes:St.baseLanes|o,cachePool:ie}),M.memoizedState=St,M.childLanes=Oa(e,dt,o),r.memoizedState=Xa,Ot(e.child,M)):(Ql(r),o=e.child,e=o.sibling,o=ps(o,{mode:"visible",children:M.children}),o.return=r,o.sibling=null,e!==null&&(dt=r.deletions,dt===null?(r.deletions=[e],r.flags|=16):dt.push(e)),r.child=o,r.memoizedState=null,o)}function ma(e,r){return r=Va({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function Va(e,r){return e=zo(22,e,null,r),e.lanes=0,e}function ja(e,r,o){return In(r,e.child,null,o),e=ma(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function $a(e,r,o){e.lanes|=r;var M=e.alternate;M!==null&&(M.lanes|=r),Zc(e.return,r,o)}function La(e,r,o,M,ie,xe){var dt=e.memoizedState;dt===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:M,tail:o,tailMode:ie,treeForkCount:xe}:(dt.isBackwards=r,dt.rendering=null,dt.renderingStartTime=0,dt.last=M,dt.tail=o,dt.tailMode=ie,dt.treeForkCount=xe)}function la(e,r,o){var M=r.pendingProps,ie=M.revealOrder,xe=M.tail;M=M.children;var dt=no.current,St=(dt&2)!==0;if(St?(dt=dt&1|2,r.flags|=128):dt&=1,bt(no,dt),Le(e,r,M,o),M=Jn?Mu:0,!St&&e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$a(e,o,r);else if(e.tag===19)$a(e,o,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(ie){case"forwards":for(o=r.child,ie=null;o!==null;)e=o.alternate,e!==null&&po(e)===null&&(ie=o),o=o.sibling;o=ie,o===null?(ie=r.child,r.child=null):(ie=o.sibling,o.sibling=null),La(r,!1,ie,o,xe,M);break;case"backwards":case"unstable_legacy-backwards":for(o=null,ie=r.child,r.child=null;ie!==null;){if(e=ie.alternate,e!==null&&po(e)===null){r.child=ie;break}e=ie.sibling,ie.sibling=o,o=ie,ie=e}La(r,!0,o,null,xe,M);break;case"together":La(r,!1,null,null,void 0,M);break;default:r.memoizedState=null}return r.child}function Ba(e,r,o){if(e!==null&&(r.dependencies=e.dependencies),Is|=r.lanes,(o&r.childLanes)===0)if(e!==null){if(Ps(e,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(n(153));if(r.child!==null){for(e=r.child,o=ps(e,e.pendingProps),r.child=o,o.return=r;e.sibling!==null;)e=e.sibling,o=o.sibling=ps(e,e.pendingProps),o.return=r;o.sibling=null}return r.child}function un(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&ku(e)))}function pn(e,r,o){switch(r.tag){case 3:lr(r,r.stateNode.containerInfo),nl(r,Zi,e.memoizedState.cache),Tl();break;case 27:case 5:$r(r);break;case 4:lr(r,r.stateNode.containerInfo);break;case 10:nl(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Eh(r),null;break;case 13:var M=r.memoizedState;if(M!==null)return M.dehydrated!==null?(Ql(r),r.flags|=128,null):(o&r.child.childLanes)!==0?va(e,r,o):(Ql(r),e=Ba(e,r,o),e!==null?e.sibling:null);Ql(r);break;case 19:var ie=(e.flags&128)!==0;if(M=(o&r.childLanes)!==0,M||(Ps(e,r,o,!1),M=(o&r.childLanes)!==0),ie){if(M)return la(e,r,o);r.flags|=128}if(ie=r.memoizedState,ie!==null&&(ie.rendering=null,ie.tail=null,ie.lastEffect=null),bt(no,no.current),M)break;return null;case 22:return r.lanes=0,Pt(e,r,o,r.pendingProps);case 24:nl(r,Zi,e.memoizedState.cache)}return Ba(e,r,o)}function qa(e,r,o){if(e!==null)if(e.memoizedProps!==r.pendingProps)xt=!0;else{if(!un(e,o)&&(r.flags&128)===0)return xt=!1,pn(e,r,o);xt=(e.flags&131072)!==0}else xt=!1,Jn&&(r.flags&1048576)!==0&&gs(r,Mu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var M=r.pendingProps;if(e=Kn(r.elementType),r.type=e,typeof e=="function")Ku(e)?(M=dr(e,M),r.tag=1,r=ba(null,r,e,M,o)):(r.tag=0,r=Ar(null,r,e,M,o));else{if(e!=null){var ie=e.$$typeof;if(ie===V){r.tag=11,r=ot(null,r,e,M,o);break e}else if(ie===L){r.tag=14,r=ct(null,r,e,M,o);break e}}throw r=Pe(e)||e,Error(n(306,r,""))}}return r;case 0:return Ar(e,r,r.type,r.pendingProps,o);case 1:return M=r.type,ie=dr(M,r.pendingProps),ba(e,r,M,ie,o);case 3:e:{if(lr(r,r.stateNode.containerInfo),e===null)throw Error(n(387));M=r.pendingProps;var xe=r.memoizedState;ie=xe.element,Zl(e,r),rf(r,M,null,o);var dt=r.memoizedState;if(M=dt.cache,nl(r,Zi,M),M!==xe.cache&&Jc(r,[Zi],o,!0),tf(),M=dt.element,xe.isDehydrated)if(xe={element:M,isDehydrated:!1,cache:dt.cache},r.updateQueue.baseState=xe,r.memoizedState=xe,r.flags&256){r=Ga(e,r,M,o);break e}else if(M!==ie){ie=Ho(Error(n(424)),r),Cu(ie),r=Ga(e,r,M,o);break e}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Pi=_s(e.firstChild),fo=r,Jn=!0,ys=null,To=!0,o=vo(r,null,M,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Tl(),M===ie){r=Ba(e,r,o);break e}Le(e,r,M,o)}r=r.child}return r;case 26:return gr(e,r),e===null?(o=c0(r.type,null,r.pendingProps,null))?r.memoizedState=o:Jn||(o=r.type,e=r.pendingProps,M=rh(Yt.current).createElement(o),M[Mi]=r,M[Ii]=e,co(M,o,e),Bi(M),r.stateNode=M):r.memoizedState=c0(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return $r(r),e===null&&Jn&&(M=r.stateNode=s0(r.type,r.pendingProps,Yt.current),fo=r,To=!0,ie=Pi,nu(r.type)?(fd=ie,Pi=_s(M.firstChild)):Pi=ie),Le(e,r,r.pendingProps.children,o),gr(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&Jn&&((ie=M=Pi)&&(M=i0(M,r.type,r.pendingProps,To),M!==null?(r.stateNode=M,fo=r,Pi=_s(M.firstChild),To=!1,ie=!0):ie=!1),ie||zs(r)),$r(r),ie=r.type,xe=r.pendingProps,dt=e!==null?e.memoizedProps:null,M=xe.children,ah(ie,xe)?M=null:dt!==null&&ah(ie,dt)&&(r.flags|=32),r.memoizedState!==null&&(ie=kh(e,r,y0,null,null,o),ou._currentValue=ie),gr(e,r),Le(e,r,M,o),r.child;case 6:return e===null&&Jn&&((e=o=Pi)&&(o=o0(o,r.pendingProps,To),o!==null?(r.stateNode=o,fo=r,Pi=null,e=!0):e=!1),e||zs(r)),null;case 13:return va(e,r,o);case 4:return lr(r,r.stateNode.containerInfo),M=r.pendingProps,e===null?r.child=In(r,null,M,o):Le(e,r,M,o),r.child;case 11:return ot(e,r,r.type,r.pendingProps,o);case 7:return Le(e,r,r.pendingProps,o),r.child;case 8:return Le(e,r,r.pendingProps.children,o),r.child;case 12:return Le(e,r,r.pendingProps.children,o),r.child;case 10:return M=r.pendingProps,nl(r,r.type,M.value),Le(e,r,M.children,o),r.child;case 9:return ie=r.type._context,M=r.pendingProps.children,Ml(r),ie=ho(ie),M=M(ie),r.flags|=1,Le(e,r,M,o),r.child;case 14:return ct(e,r,r.type,r.pendingProps,o);case 15:return ut(e,r,r.type,r.pendingProps,o);case 19:return la(e,r,o);case 31:return Bt(e,r,o);case 22:return Pt(e,r,o,r.pendingProps);case 24:return Ml(r),M=ho(Zi),e===null?(ie=aa(),ie===null&&(ie=Nn,xe=rc(),ie.pooledCache=xe,xe.refCount++,xe!==null&&(ie.pooledCacheLanes|=o),ie=xe),r.memoizedState={parent:M,cache:ie},El(r),nl(r,Zi,ie)):((e.lanes&o)!==0&&(Zl(e,r),rf(r,null,null,o),tf()),ie=e.memoizedState,xe=r.memoizedState,ie.parent!==M?(ie={parent:M,cache:M},r.memoizedState=ie,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=ie),nl(r,Zi,M)):(M=xe.cache,nl(r,Zi,M),M!==ie.cache&&Jc(r,[Zi],o,!0))),Le(e,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function nn(e){e.flags|=4}function cn(e,r,o,M,ie){if((r=(e.mode&32)!==0)&&(r=!1),r){if(e.flags|=16777216,(ie&335544128)===ie)if(e.stateNode.complete)e.flags|=8192;else if(Pd())e.flags|=8192;else throw Bn=Wa,fi}else e.flags&=-16777217}function Cn(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_d(r))if(Pd())e.flags|=8192;else throw Bn=Wa,fi}function Ja(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?hr():536870912,e.lanes|=r,sc|=r)}function xn(e,r){if(!Jn)switch(e.tailMode){case"hidden":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var M=null;o!==null;)o.alternate!==null&&(M=o),o=o.sibling;M===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:M.sibling=null}}function We(e){var r=e.alternate!==null&&e.alternate.child===e.child,o=0,M=0;if(r)for(var ie=e.child;ie!==null;)o|=ie.lanes|ie.childLanes,M|=ie.subtreeFlags&65011712,M|=ie.flags&65011712,ie.return=e,ie=ie.sibling;else for(ie=e.child;ie!==null;)o|=ie.lanes|ie.childLanes,M|=ie.subtreeFlags,M|=ie.flags,ie.return=e,ie=ie.sibling;return e.subtreeFlags|=M,e.childLanes=o,r}function Re(e,r,o){var M=r.pendingProps;switch(Eu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(r),null;case 1:return We(r),null;case 3:return o=r.stateNode,M=null,e!==null&&(M=e.memoizedState.cache),r.memoizedState.cache!==M&&(r.flags|=2048),Os(Zi),yr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ls(r)?nn(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,$c())),We(r),null;case 26:var ie=r.type,xe=r.memoizedState;return e===null?(nn(r),xe!==null?(We(r),Cn(r,xe)):(We(r),cn(r,ie,null,M,o))):xe?xe!==e.memoizedState?(nn(r),We(r),Cn(r,xe)):(We(r),r.flags&=-16777217):(e=e.memoizedProps,e!==M&&nn(r),We(r),cn(r,ie,e,M,o)),null;case 27:if(ia(r),o=Yt.current,ie=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==M&&nn(r);else{if(!M){if(r.stateNode===null)throw Error(n(166));return We(r),null}e=At.current,Ls(r)?Ff(r):(e=s0(ie,M,o),r.stateNode=e,nn(r))}return We(r),null;case 5:if(ia(r),ie=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==M&&nn(r);else{if(!M){if(r.stateNode===null)throw Error(n(166));return We(r),null}if(xe=At.current,Ls(r))Ff(r);else{var dt=rh(Yt.current);switch(xe){case 1:xe=dt.createElementNS("http://www.w3.org/2000/svg",ie);break;case 2:xe=dt.createElementNS("http://www.w3.org/1998/Math/MathML",ie);break;default:switch(ie){case"svg":xe=dt.createElementNS("http://www.w3.org/2000/svg",ie);break;case"math":xe=dt.createElementNS("http://www.w3.org/1998/Math/MathML",ie);break;case"script":xe=dt.createElement("div"),xe.innerHTML="<script><\/script>",xe=xe.removeChild(xe.firstChild);break;case"select":xe=typeof M.is=="string"?dt.createElement("select",{is:M.is}):dt.createElement("select"),M.multiple?xe.multiple=!0:M.size&&(xe.size=M.size);break;default:xe=typeof M.is=="string"?dt.createElement(ie,{is:M.is}):dt.createElement(ie)}}xe[Mi]=r,xe[Ii]=M;e:for(dt=r.child;dt!==null;){if(dt.tag===5||dt.tag===6)xe.appendChild(dt.stateNode);else if(dt.tag!==4&&dt.tag!==27&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===r)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===r)break e;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}r.stateNode=xe;e:switch(co(xe,ie,M),ie){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}M&&nn(r)}}return We(r),cn(r,r.type,e===null?null:e.memoizedProps,r.pendingProps,o),null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==M&&nn(r);else{if(typeof M!="string"&&r.stateNode===null)throw Error(n(166));if(e=Yt.current,Ls(r)){if(e=r.stateNode,o=r.memoizedProps,M=null,ie=fo,ie!==null)switch(ie.tag){case 27:case 5:M=ie.memoizedProps}e[Mi]=r,e=!!(e.nodeValue===o||M!==null&&M.suppressHydrationWarning===!0||Kh(e.nodeValue,o)),e||zs(r,!0)}else e=rh(e).createTextNode(M),e[Mi]=r,r.stateNode=e}return We(r),null;case 31:if(o=r.memoizedState,e===null||e.memoizedState!==null){if(M=Ls(r),o!==null){if(e===null){if(!M)throw Error(n(318));if(e=r.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(557));e[Mi]=r}else Tl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;We(r),e=!1}else o=$c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return r.flags&256?(os(r),r):(os(r),null);if((r.flags&128)!==0)throw Error(n(558))}return We(r),null;case 13:if(M=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ie=Ls(r),M!==null&&M.dehydrated!==null){if(e===null){if(!ie)throw Error(n(318));if(ie=r.memoizedState,ie=ie!==null?ie.dehydrated:null,!ie)throw Error(n(317));ie[Mi]=r}else Tl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;We(r),ie=!1}else ie=$c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=ie),ie=!0;if(!ie)return r.flags&256?(os(r),r):(os(r),null)}return os(r),(r.flags&128)!==0?(r.lanes=o,r):(o=M!==null,e=e!==null&&e.memoizedState!==null,o&&(M=r.child,ie=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(ie=M.alternate.memoizedState.cachePool.pool),xe=null,M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(xe=M.memoizedState.cachePool.pool),xe!==ie&&(M.flags|=2048)),o!==e&&o&&(r.child.flags|=8192),Ja(r,r.updateQueue),We(r),null);case 4:return yr(),e===null&&Jf(r.stateNode.containerInfo),We(r),null;case 10:return Os(r.type),We(r),null;case 19:if(lt(no),M=r.memoizedState,M===null)return We(r),null;if(ie=(r.flags&128)!==0,xe=M.rendering,xe===null)if(ie)xn(M,!1);else{if(ji!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(xe=po(e),xe!==null){for(r.flags|=128,xn(M,!1),e=xe.updateQueue,r.updateQueue=e,Ja(r,e),r.subtreeFlags=0,e=o,o=r.child;o!==null;)Qu(o,e),o=o.sibling;return bt(no,no.current&1|2),Jn&&Ds(r,M.treeForkCount),r.child}e=e.sibling}M.tail!==null&&oa()>xs&&(r.flags|=128,ie=!0,xn(M,!1),r.lanes=4194304)}else{if(!ie)if(e=po(xe),e!==null){if(r.flags|=128,ie=!0,e=e.updateQueue,r.updateQueue=e,Ja(r,e),xn(M,!0),M.tail===null&&M.tailMode==="hidden"&&!xe.alternate&&!Jn)return We(r),null}else 2*oa()-M.renderingStartTime>xs&&o!==536870912&&(r.flags|=128,ie=!0,xn(M,!1),r.lanes=4194304);M.isBackwards?(xe.sibling=r.child,r.child=xe):(e=M.last,e!==null?e.sibling=xe:r.child=xe,M.last=xe)}return M.tail!==null?(e=M.tail,M.rendering=e,M.tail=e.sibling,M.renderingStartTime=oa(),e.sibling=null,o=no.current,bt(no,ie?o&1|2:o&1),Jn&&Ds(r,M.treeForkCount),e):(We(r),null);case 22:case 23:return os(r),Bf(),M=r.memoizedState!==null,e!==null?e.memoizedState!==null!==M&&(r.flags|=8192):M&&(r.flags|=8192),M?(o&536870912)!==0&&(r.flags&128)===0&&(We(r),r.subtreeFlags&6&&(r.flags|=8192)):We(r),o=r.updateQueue,o!==null&&Ja(r,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),M=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(M=r.memoizedState.cachePool.pool),M!==o&&(r.flags|=2048),e!==null&&lt(fa),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Os(Zi),We(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function Zt(e,r){switch(Eu(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Os(Zi),yr(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return ia(r),null;case 31:if(r.memoizedState!==null){if(os(r),r.alternate===null)throw Error(n(340));Tl()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 13:if(os(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Tl()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return lt(no),null;case 4:return yr(),null;case 10:return Os(r.type),null;case 22:case 23:return os(r),Bf(),e!==null&&lt(fa),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return Os(Zi),null;case 25:return null;default:return null}}function Ht(e,r){switch(Eu(r),r.tag){case 3:Os(Zi),yr();break;case 26:case 27:case 5:ia(r);break;case 4:yr();break;case 31:r.memoizedState!==null&&os(r);break;case 13:os(r);break;case 19:lt(no);break;case 10:Os(r.type);break;case 22:case 23:os(r),Bf(),e!==null&&lt(fa);break;case 24:Os(Zi)}}function Rt(e,r){try{var o=r.updateQueue,M=o!==null?o.lastEffect:null;if(M!==null){var ie=M.next;o=ie;do{if((o.tag&e)===e){M=void 0;var xe=o.create,dt=o.inst;M=xe(),dt.destroy=M}o=o.next}while(o!==ie)}}catch(St){ki(r,r.return,St)}}function Dt(e,r,o){try{var M=r.updateQueue,ie=M!==null?M.lastEffect:null;if(ie!==null){var xe=ie.next;M=xe;do{if((M.tag&e)===e){var dt=M.inst,St=dt.destroy;if(St!==void 0){dt.destroy=void 0,ie=r;var br=o,Zr=St;try{Zr()}catch(xa){ki(ie,br,xa)}}}M=M.next}while(M!==xe)}}catch(xa){ki(r,r.return,xa)}}function Ut(e){var r=e.updateQueue;if(r!==null){var o=e.stateNode;try{Ed(r,o)}catch(M){ki(e,e.return,M)}}}function pr(e,r,o){o.props=dr(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(M){ki(e,r,M)}}function jt(e,r){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var M=e.stateNode;break;case 30:M=e.stateNode;break;default:M=e.stateNode}typeof o=="function"?e.refCleanup=o(M):o.current=M}}catch(ie){ki(e,r,ie)}}function Jt(e,r){var o=e.ref,M=e.refCleanup;if(o!==null)if(typeof M=="function")try{M()}catch(ie){ki(e,r,ie)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(ie){ki(e,r,ie)}else o.current=null}function cr(e){var r=e.type,o=e.memoizedProps,M=e.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&M.focus();break e;case"img":o.src?M.src=o.src:o.srcSet&&(M.srcset=o.srcSet)}}catch(ie){ki(e,e.return,ie)}}function rr(e,r,o){try{var M=e.stateNode;eh(M,e.type,o,r),M[Ii]=r}catch(ie){ki(e,e.return,ie)}}function Or(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&nu(e.type)||e.tag===4}function Br(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Or(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&nu(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ra(e,r,o){var M=e.tag;if(M===5||M===6)e=e.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(e),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Oi));else if(M!==4&&(M===27&&nu(e.type)&&(o=e.stateNode,r=null),e=e.child,e!==null))for(ra(e,r,o),e=e.sibling;e!==null;)ra(e,r,o),e=e.sibling}function Ca(e,r,o){var M=e.tag;if(M===5||M===6)e=e.stateNode,r?o.insertBefore(e,r):o.appendChild(e);else if(M!==4&&(M===27&&nu(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Ca(e,r,o),e=e.sibling;e!==null;)Ca(e,r,o),e=e.sibling}function Ma(e){var r=e.stateNode,o=e.memoizedProps;try{for(var M=e.type,ie=r.attributes;ie.length;)r.removeAttributeNode(ie[0]);co(r,M,o),r[Mi]=e,r[Ii]=o}catch(xe){ki(e,e.return,xe)}}var za=!1,Fa=!1,Da=!1,Ka=typeof WeakSet=="function"?WeakSet:Set,on=null;function Sn(e,r){if(e=e.containerInfo,th=bc,e=jc(e),yu(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var M=o.getSelection&&o.getSelection();if(M&&M.rangeCount!==0){o=M.anchorNode;var ie=M.anchorOffset,xe=M.focusNode;M=M.focusOffset;try{o.nodeType,xe.nodeType}catch{o=null;break e}var dt=0,St=-1,br=-1,Zr=0,xa=0,_a=e,Mr=null;t:for(;;){for(var Kr;_a!==o||ie!==0&&_a.nodeType!==3||(St=dt+ie),_a!==xe||M!==0&&_a.nodeType!==3||(br=dt+M),_a.nodeType===3&&(dt+=_a.nodeValue.length),(Kr=_a.firstChild)!==null;)Mr=_a,_a=Kr;for(;;){if(_a===e)break t;if(Mr===o&&++Zr===ie&&(St=dt),Mr===xe&&++xa===M&&(br=dt),(Kr=_a.nextSibling)!==null)break;_a=Mr,Mr=_a.parentNode}_a=Kr}o=St===-1||br===-1?null:{start:St,end:br}}else o=null}o=o||{start:0,end:0}}else o=null;for(ed={focusedElem:e,selectionRange:o},bc=!1,on=r;on!==null;)if(r=on,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,on=e;else for(;on!==null;){switch(r=on,xe=r.alternate,e=r.flags,r.tag){case 0:if((e&4)!==0&&(e=r.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)ie=e[o],ie.ref.impl=ie.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&xe!==null){e=void 0,o=r,ie=xe.memoizedProps,xe=xe.memoizedState,M=o.stateNode;try{var Ha=dr(o.type,ie);e=M.getSnapshotBeforeUpdate(Ha,xe),M.__reactInternalSnapshotBeforeUpdate=e}catch(tn){ki(o,o.return,tn)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,o=e.nodeType,o===9)ld(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ld(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=r.sibling,e!==null){e.return=r.return,on=e;break}on=r.return}}function On(e,r,o){var M=o.flags;switch(o.tag){case 0:case 11:case 15:Gn(e,o),M&4&&Rt(5,o);break;case 1:if(Gn(e,o),M&4)if(e=o.stateNode,r===null)try{e.componentDidMount()}catch(dt){ki(o,o.return,dt)}else{var ie=dr(o.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(ie,r,e.__reactInternalSnapshotBeforeUpdate)}catch(dt){ki(o,o.return,dt)}}M&64&&Ut(o),M&512&&jt(o,o.return);break;case 3:if(Gn(e,o),M&64&&(e=o.updateQueue,e!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Ed(e,r)}catch(dt){ki(o,o.return,dt)}}break;case 27:r===null&&M&4&&Ma(o);case 26:case 5:Gn(e,o),r===null&&M&4&&cr(o),M&512&&jt(o,o.return);break;case 12:Gn(e,o);break;case 31:Gn(e,o),M&4&&ln(e,o);break;case 13:Gn(e,o),M&4&&Mn(e,o),M&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=w0.bind(null,o),oh(e,o))));break;case 22:if(M=o.memoizedState!==null||za,!M){r=r!==null&&r.memoizedState!==null||Fa,ie=za;var xe=Fa;za=M,(Fa=r)&&!xe?ii(e,o,(o.subtreeFlags&8772)!==0):Gn(e,o),za=ie,Fa=xe}break;case 30:break;default:Gn(e,o)}}function jn(e){var r=e.alternate;r!==null&&(e.alternate=null,jn(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&Gs(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dn=null,Rn=!1;function oi(e,r,o){for(o=o.child;o!==null;)$i(e,r,o),o=o.sibling}function $i(e,r,o){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(da,o)}catch{}switch(o.tag){case 26:Fa||Jt(o,r),oi(e,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Fa||Jt(o,r);var M=dn,ie=Rn;nu(o.type)&&(dn=o.stateNode,Rn=!1),oi(e,r,o),iu(o.stateNode),dn=M,Rn=ie;break;case 5:Fa||Jt(o,r);case 6:if(M=dn,ie=Rn,dn=null,oi(e,r,o),dn=M,Rn=ie,dn!==null)if(Rn)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(o.stateNode)}catch(xe){ki(o,r,xe)}else try{dn.removeChild(o.stateNode)}catch(xe){ki(o,r,xe)}break;case 18:dn!==null&&(Rn?(e=dn,a0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),Ir(e)):a0(dn,o.stateNode));break;case 4:M=dn,ie=Rn,dn=o.stateNode.containerInfo,Rn=!0,oi(e,r,o),dn=M,Rn=ie;break;case 0:case 11:case 14:case 15:Dt(2,o,r),Fa||Dt(4,o,r),oi(e,r,o);break;case 1:Fa||(Jt(o,r),M=o.stateNode,typeof M.componentWillUnmount=="function"&&pr(o,r,M)),oi(e,r,o);break;case 21:oi(e,r,o);break;case 22:Fa=(M=Fa)||o.memoizedState!==null,oi(e,r,o),Fa=M;break;default:oi(e,r,o)}}function ln(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ir(e)}catch(o){ki(r,r.return,o)}}}function Mn(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ir(e)}catch(o){ki(r,r.return,o)}}function Xn(e){switch(e.tag){case 31:case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new Ka),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new Ka),r;default:throw Error(n(435,e.tag))}}function wi(e,r){var o=Xn(e);r.forEach(function(M){if(!o.has(M)){o.add(M);var ie=A0.bind(null,e,M);M.then(ie,ie)}})}function hi(e,r){var o=r.deletions;if(o!==null)for(var M=0;M<o.length;M++){var ie=o[M],xe=e,dt=r,St=dt;e:for(;St!==null;){switch(St.tag){case 27:if(nu(St.type)){dn=St.stateNode,Rn=!1;break e}break;case 5:dn=St.stateNode,Rn=!1;break e;case 3:case 4:dn=St.stateNode.containerInfo,Rn=!0;break e}St=St.return}if(dn===null)throw Error(n(160));$i(xe,dt,ie),dn=null,Rn=!1,xe=ie.alternate,xe!==null&&(xe.return=null),ie.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)bn(r,e),r=r.sibling}var Un=null;function bn(e,r){var o=e.alternate,M=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hi(r,e),_n(e),M&4&&(Dt(3,e,e.return),Rt(3,e),Dt(5,e,e.return));break;case 1:hi(r,e),_n(e),M&512&&(Fa||o===null||Jt(o,o.return)),M&64&&za&&(e=e.updateQueue,e!==null&&(M=e.callbacks,M!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?M:o.concat(M))));break;case 26:var ie=Un;if(hi(r,e),_n(e),M&512&&(Fa||o===null||Jt(o,o.return)),M&4){var xe=o!==null?o.memoizedState:null;if(M=e.memoizedState,o===null)if(M===null)if(e.stateNode===null){e:{M=e.type,o=e.memoizedProps,ie=ie.ownerDocument||ie;t:switch(M){case"title":xe=ie.getElementsByTagName("title")[0],(!xe||xe[pa]||xe[Mi]||xe.namespaceURI==="http://www.w3.org/2000/svg"||xe.hasAttribute("itemprop"))&&(xe=ie.createElement(M),ie.head.insertBefore(xe,ie.querySelector("head > title"))),co(xe,M,o),xe[Mi]=e,Bi(xe),M=xe;break e;case"link":var dt=bd("link","href",ie).get(M+(o.href||""));if(dt){for(var St=0;St<dt.length;St++)if(xe=dt[St],xe.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&xe.getAttribute("rel")===(o.rel==null?null:o.rel)&&xe.getAttribute("title")===(o.title==null?null:o.title)&&xe.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){dt.splice(St,1);break t}}xe=ie.createElement(M),co(xe,M,o),ie.head.appendChild(xe);break;case"meta":if(dt=bd("meta","content",ie).get(M+(o.content||""))){for(St=0;St<dt.length;St++)if(xe=dt[St],xe.getAttribute("content")===(o.content==null?null:""+o.content)&&xe.getAttribute("name")===(o.name==null?null:o.name)&&xe.getAttribute("property")===(o.property==null?null:o.property)&&xe.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&xe.getAttribute("charset")===(o.charSet==null?null:o.charSet)){dt.splice(St,1);break t}}xe=ie.createElement(M),co(xe,M,o),ie.head.appendChild(xe);break;default:throw Error(n(468,M))}xe[Mi]=e,Bi(xe),M=xe}e.stateNode=M}else xd(ie,e.type,e.stateNode);else e.stateNode=uh(ie,M,e.memoizedProps);else xe!==M?(xe===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):xe.count--,M===null?xd(ie,e.type,e.stateNode):uh(ie,M,e.memoizedProps)):M===null&&e.stateNode!==null&&rr(e,e.memoizedProps,o.memoizedProps)}break;case 27:hi(r,e),_n(e),M&512&&(Fa||o===null||Jt(o,o.return)),o!==null&&M&4&&rr(e,e.memoizedProps,o.memoizedProps);break;case 5:if(hi(r,e),_n(e),M&512&&(Fa||o===null||Jt(o,o.return)),e.flags&32){ie=e.stateNode;try{ao(ie,"")}catch(Ha){ki(e,e.return,Ha)}}M&4&&e.stateNode!=null&&(ie=e.memoizedProps,rr(e,ie,o!==null?o.memoizedProps:ie)),M&1024&&(Da=!0);break;case 6:if(hi(r,e),_n(e),M&4){if(e.stateNode===null)throw Error(n(162));M=e.memoizedProps,o=e.stateNode;try{o.nodeValue=M}catch(Ha){ki(e,e.return,Ha)}}break;case 3:if(ch=null,ie=Un,Un=hf(r.containerInfo),hi(r,e),Un=ie,_n(e),M&4&&o!==null&&o.memoizedState.isDehydrated)try{Ir(r.containerInfo)}catch(Ha){ki(e,e.return,Ha)}Da&&(Da=!1,Yn(e));break;case 4:M=Un,Un=hf(e.stateNode.containerInfo),hi(r,e),_n(e),Un=M;break;case 12:hi(r,e),_n(e);break;case 31:hi(r,e),_n(e),M&4&&(M=e.updateQueue,M!==null&&(e.updateQueue=null,wi(e,M)));break;case 13:hi(r,e),_n(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(uc=oa()),M&4&&(M=e.updateQueue,M!==null&&(e.updateQueue=null,wi(e,M)));break;case 22:ie=e.memoizedState!==null;var br=o!==null&&o.memoizedState!==null,Zr=za,xa=Fa;if(za=Zr||ie,Fa=xa||br,hi(r,e),Fa=xa,za=Zr,_n(e),M&8192)e:for(r=e.stateNode,r._visibility=ie?r._visibility&-2:r._visibility|1,ie&&(o===null||br||za||Fa||Qn(e)),o=null,r=e;;){if(r.tag===5||r.tag===26){if(o===null){br=o=r;try{if(xe=br.stateNode,ie)dt=xe.style,typeof dt.setProperty=="function"?dt.setProperty("display","none","important"):dt.display="none";else{St=br.stateNode;var _a=br.memoizedProps.style,Mr=_a!=null&&_a.hasOwnProperty("display")?_a.display:null;St.style.display=Mr==null||typeof Mr=="boolean"?"":(""+Mr).trim()}}catch(Ha){ki(br,br.return,Ha)}}}else if(r.tag===6){if(o===null){br=r;try{br.stateNode.nodeValue=ie?"":br.memoizedProps}catch(Ha){ki(br,br.return,Ha)}}}else if(r.tag===18){if(o===null){br=r;try{var Kr=br.stateNode;ie?n0(Kr,!0):n0(br.stateNode,!1)}catch(Ha){ki(br,br.return,Ha)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}M&4&&(M=e.updateQueue,M!==null&&(o=M.retryQueue,o!==null&&(M.retryQueue=null,wi(e,o))));break;case 19:hi(r,e),_n(e),M&4&&(M=e.updateQueue,M!==null&&(e.updateQueue=null,wi(e,M)));break;case 30:break;case 21:break;default:hi(r,e),_n(e)}}function _n(e){var r=e.flags;if(r&2){try{for(var o,M=e.return;M!==null;){if(Or(M)){o=M;break}M=M.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var ie=o.stateNode,xe=Br(e);Ca(e,xe,ie);break;case 5:var dt=o.stateNode;o.flags&32&&(ao(dt,""),o.flags&=-33);var St=Br(e);Ca(e,St,dt);break;case 3:case 4:var br=o.stateNode.containerInfo,Zr=Br(e);ra(e,Zr,br);break;default:throw Error(n(161))}}catch(xa){ki(e,e.return,xa)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Yn(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;Yn(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function Gn(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)On(e,r.alternate,r),r=r.sibling}function Qn(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:Dt(4,r,r.return),Qn(r);break;case 1:Jt(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&pr(r,r.return,o),Qn(r);break;case 27:iu(r.stateNode);case 26:case 5:Jt(r,r.return),Qn(r);break;case 22:r.memoizedState===null&&Qn(r);break;case 30:Qn(r);break;default:Qn(r)}e=e.sibling}}function ii(e,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var M=r.alternate,ie=e,xe=r,dt=xe.flags;switch(xe.tag){case 0:case 11:case 15:ii(ie,xe,o),Rt(4,xe);break;case 1:if(ii(ie,xe,o),M=xe,ie=M.stateNode,typeof ie.componentDidMount=="function")try{ie.componentDidMount()}catch(Zr){ki(M,M.return,Zr)}if(M=xe,ie=M.updateQueue,ie!==null){var St=M.stateNode;try{var br=ie.shared.hiddenCallbacks;if(br!==null)for(ie.shared.hiddenCallbacks=null,ie=0;ie<br.length;ie++)Md(br[ie],St)}catch(Zr){ki(M,M.return,Zr)}}o&&dt&64&&Ut(xe),jt(xe,xe.return);break;case 27:Ma(xe);case 26:case 5:ii(ie,xe,o),o&&M===null&&dt&4&&cr(xe),jt(xe,xe.return);break;case 12:ii(ie,xe,o);break;case 31:ii(ie,xe,o),o&&dt&4&&ln(ie,xe);break;case 13:ii(ie,xe,o),o&&dt&4&&Mn(ie,xe);break;case 22:xe.memoizedState===null&&ii(ie,xe,o),jt(xe,xe.return);break;case 30:break;default:ii(ie,xe,o)}r=r.sibling}}function si(e,r){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&$l(o))}function Ei(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&$l(e))}function yi(e,r,o,M){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Fi(e,r,o,M),r=r.sibling}function Fi(e,r,o,M){var ie=r.flags;switch(r.tag){case 0:case 11:case 15:yi(e,r,o,M),ie&2048&&Rt(9,r);break;case 1:yi(e,r,o,M);break;case 3:yi(e,r,o,M),ie&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&$l(e)));break;case 12:if(ie&2048){yi(e,r,o,M),e=r.stateNode;try{var xe=r.memoizedProps,dt=xe.id,St=xe.onPostCommit;typeof St=="function"&&St(dt,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(br){ki(r,r.return,br)}}else yi(e,r,o,M);break;case 31:yi(e,r,o,M);break;case 13:yi(e,r,o,M);break;case 23:break;case 22:xe=r.stateNode,dt=r.alternate,r.memoizedState!==null?xe._visibility&2?yi(e,r,o,M):ei(e,r):xe._visibility&2?yi(e,r,o,M):(xe._visibility|=2,Ai(e,r,o,M,(r.subtreeFlags&10256)!==0||!1)),ie&2048&&si(dt,r);break;case 24:yi(e,r,o,M),ie&2048&&Ei(r.alternate,r);break;default:yi(e,r,o,M)}}function Ai(e,r,o,M,ie){for(ie=ie&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var xe=e,dt=r,St=o,br=M,Zr=dt.flags;switch(dt.tag){case 0:case 11:case 15:Ai(xe,dt,St,br,ie),Rt(8,dt);break;case 23:break;case 22:var xa=dt.stateNode;dt.memoizedState!==null?xa._visibility&2?Ai(xe,dt,St,br,ie):ei(xe,dt):(xa._visibility|=2,Ai(xe,dt,St,br,ie)),ie&&Zr&2048&&si(dt.alternate,dt);break;case 24:Ai(xe,dt,St,br,ie),ie&&Zr&2048&&Ei(dt.alternate,dt);break;default:Ai(xe,dt,St,br,ie)}r=r.sibling}}function ei(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=e,M=r,ie=M.flags;switch(M.tag){case 22:ei(o,M),ie&2048&&si(M.alternate,M);break;case 24:ei(o,M),ie&2048&&Ei(M.alternate,M);break;default:ei(o,M)}r=r.sibling}}var Vi=8192;function Yi(e,r,o){if(e.subtreeFlags&Vi)for(e=e.child;e!==null;)Mo(e,r,o),e=e.sibling}function Mo(e,r,o){switch(e.tag){case 26:Yi(e,r,o),e.flags&Vi&&e.memoizedState!==null&&N0(o,Un,e.memoizedState,e.memoizedProps);break;case 5:Yi(e,r,o);break;case 3:case 4:var M=Un;Un=hf(e.stateNode.containerInfo),Yi(e,r,o),Un=M;break;case 22:e.memoizedState===null&&(M=e.alternate,M!==null&&M.memoizedState!==null?(M=Vi,Vi=16777216,Yi(e,r,o),Vi=M):Yi(e,r,o));break;default:Yi(e,r,o)}}function eo(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function xo(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var M=r[o];on=M,io(M,e)}eo(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ji(e),e=e.sibling}function Ji(e){switch(e.tag){case 0:case 11:case 15:xo(e),e.flags&2048&&Dt(9,e,e.return);break;case 3:xo(e);break;case 12:xo(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,Ni(e)):xo(e);break;default:xo(e)}}function Ni(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var M=r[o];on=M,io(M,e)}eo(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:Dt(8,r,r.return),Ni(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Ni(r));break;default:Ni(r)}e=e.sibling}}function io(e,r){for(;on!==null;){var o=on;switch(o.tag){case 0:case 11:case 15:Dt(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var M=o.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:$l(o.memoizedState.cache)}if(M=o.child,M!==null)M.return=o,on=M;else e:for(o=e;on!==null;){M=on;var ie=M.sibling,xe=M.return;if(jn(M),M===o){on=null;break e}if(ie!==null){ie.return=xe,on=ie;break e}on=xe}}}var Cl={getCacheForType:function(e){var r=ho(Zi),o=r.data.get(e);return o===void 0&&(o=e(),r.data.set(e,o)),o},cacheSignal:function(){return ho(Zi).controller.signal}},Xi=typeof WeakMap=="function"?WeakMap:Map,Tn=0,Nn=null,En=null,yn=0,wn=0,Ci=null,Eo=!1,Co=!1,Fs=!1,Oo=0,ji=0,Is=0,ss=0,oc=0,Po=0,sc=0,lc=null,_o=null,Lh=!1,uc=0,Nh=0,xs=1/0,nf=null,il=null,oo=0,Jo=null,kl=null,ol=0,Oh=0,Ph=null,Dd=null,fc=0,Gf=null;function ls(){return(Tn&2)!==0&&yn!==0?yn&-yn:Ie.T!==null?Vh():Hn()}function zd(){if(Po===0)if((yn&536870912)===0||Jn){var e=ha;ha<<=1,(ha&3932160)===0&&(ha=262144),Po=e}else Po=536870912;return e=ns.current,e!==null&&(e.flags|=32),Po}function Ko(e,r,o){(e===Nn&&(wn===2||wn===9)||e.cancelPendingCommit!==null)&&(hc(e,0),tu(e,yn,Po,!1)),Qa(e,o),((Tn&2)===0||e!==Nn)&&(e===Nn&&((Tn&2)===0&&(ss|=o),ji===4&&tu(e,yn,Po,!1)),Bs(e))}function Ld(e,r,o){if((Tn&6)!==0)throw Error(n(327));var M=!o&&(r&127)===0&&(r&e.expiredLanes)===0||Vr(e,r),ie=M?x0(e,r):Vf(e,r,!0),xe=M;do{if(ie===0){Co&&!M&&tu(e,r,0,!1);break}else{if(o=e.current.alternate,xe&&!b0(o)){ie=Vf(e,r,!1),xe=!1;continue}if(ie===2){if(xe=r,e.errorRecoveryDisabledLanes&xe)var dt=0;else dt=e.pendingLanes&-536870913,dt=dt!==0?dt:dt&536870912?536870912:0;if(dt!==0){r=dt;e:{var St=e;ie=lc;var br=St.current.memoizedState.isDehydrated;if(br&&(hc(St,dt).flags|=256),dt=Vf(St,dt,!1),dt!==2){if(Fs&&!br){St.errorRecoveryDisabledLanes|=xe,ss|=xe,ie=4;break e}xe=_o,_o=ie,xe!==null&&(_o===null?_o=xe:_o.push.apply(_o,xe))}ie=dt}if(xe=!1,ie!==2)continue}}if(ie===1){hc(e,0),tu(e,r,0,!0);break}e:{switch(M=e,xe=ie,xe){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:tu(M,r,Po,!Eo);break e;case 2:_o=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(ie=uc+300-oa(),10<ie)){if(tu(M,r,Po,!Eo),ea(M,0,!0)!==0)break e;ol=r,M.timeoutHandle=od(Nd.bind(null,M,o,_o,nf,Lh,r,Po,ss,sc,Eo,xe,"Throttled",-0,0),ie);break e}Nd(M,o,_o,nf,Lh,r,Po,ss,sc,Eo,xe,null,-0,0)}}break}while(!0);Bs(e)}function Nd(e,r,o,M,ie,xe,dt,St,br,Zr,xa,_a,Mr,Kr){if(e.timeoutHandle=-1,_a=r.subtreeFlags,_a&8192||(_a&16785408)===16785408){_a={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oi},Mo(r,xe,_a);var Ha=(xe&62914560)===xe?uc-oa():(xe&4194048)===xe?Nh-oa():0;if(Ha=O0(_a,Ha),Ha!==null){ol=xe,e.cancelPendingCommit=Ha(Ih.bind(null,e,r,xe,o,M,ie,dt,St,br,xa,_a,null,Mr,Kr)),tu(e,xe,dt,!Zr);return}}Ih(e,r,xe,o,M,ie,dt,St,br)}function b0(e){for(var r=e;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var M=0;M<o.length;M++){var ie=o[M],xe=ie.getSnapshot;ie=ie.value;try{if(!lo(xe(),ie))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function tu(e,r,o,M){r&=~oc,r&=~ss,e.suspendedLanes|=r,e.pingedLanes&=~r,M&&(e.warmLanes|=r),M=e.expirationTimes;for(var ie=r;0<ie;){var xe=31-Gr(ie),dt=1<<xe;M[xe]=-1,ie&=~dt}o!==0&&sn(e,o,r)}function qf(){return(Tn&6)===0?(lf(0),!1):!0}function Fh(){if(En!==null){if(wn===0)var e=En.return;else e=En,bs=Ns=null,zh(e),Fn=null,qi=0,e=En;for(;e!==null;)Ht(e.alternate,e),e=e.return;En=null}}function hc(e,r){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,R0(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),ol=0,Fh(),Nn=e,En=o=ps(e.current,null),yn=r,wn=0,Ci=null,Eo=!1,Co=Vr(e,r),Fs=!1,sc=Po=oc=ss=Is=ji=0,_o=lc=null,Lh=!1,(r&8)!==0&&(r|=r&32);var M=e.entangledLanes;if(M!==0)for(e=e.entanglements,M&=r;0<M;){var ie=31-Gr(M),xe=1<<ie;r|=e[ie],M&=~xe}return Oo=r,Au(),o}function Od(e,r){$n=null,Ie.H=nt,r===ca||r===en?(r=Vn(),wn=3):r===fi?(r=Vn(),wn=4):wn=r===Mt?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ci=r,En===null&&(ji=1,nr(e,Ho(r,e.current)))}function Pd(){var e=ns.current;return e===null?!0:(yn&4194048)===yn?is===null:(yn&62914560)===yn||(yn&536870912)!==0?e===is:!1}function Fd(){var e=Ie.H;return Ie.H=nt,e===null?nt:e}function jh(){var e=Ie.A;return Ie.A=Cl,e}function of(){ji=4,Eo||(yn&4194048)!==yn&&ns.current!==null||(Co=!0),(Is&134217727)===0&&(ss&134217727)===0||Nn===null||tu(Nn,yn,Po,!1)}function Vf(e,r,o){var M=Tn;Tn|=2;var ie=Fd(),xe=jh();(Nn!==e||yn!==r)&&(nf=null,hc(e,r)),r=!1;var dt=ji;e:do try{if(wn!==0&&En!==null){var St=En,br=Ci;switch(wn){case 8:Fh(),dt=6;break e;case 3:case 2:case 9:case 6:ns.current===null&&(r=!0);var Zr=wn;if(wn=0,Ci=null,dc(e,St,br,Zr),o&&Co){dt=0;break e}break;default:Zr=wn,wn=0,Ci=null,dc(e,St,br,Zr)}}jd(),dt=ji;break}catch(xa){Od(e,xa)}while(!0);return r&&e.shellSuspendCounter++,bs=Ns=null,Tn=M,Ie.H=ie,Ie.A=xe,En===null&&(Nn=null,yn=0,Au()),dt}function jd(){for(;En!==null;)Nu(En)}function x0(e,r){var o=Tn;Tn|=2;var M=Fd(),ie=jh();Nn!==e||yn!==r?(nf=null,xs=oa()+500,hc(e,r)):Co=Vr(e,r);e:do try{if(wn!==0&&En!==null){r=En;var xe=Ci;t:switch(wn){case 1:wn=0,Ci=null,dc(e,r,xe,1);break;case 2:case 9:if(zi(xe)){wn=0,Ci=null,Id(r);break}r=function(){wn!==2&&wn!==9||Nn!==e||(wn=7),Bs(e)},xe.then(r,r);break e;case 3:wn=7;break e;case 4:wn=5;break e;case 7:zi(xe)?(wn=0,Ci=null,Id(r)):(wn=0,Ci=null,dc(e,r,xe,7));break;case 5:var dt=null;switch(En.tag){case 26:dt=En.memoizedState;case 5:case 27:var St=En;if(dt?_d(dt):St.stateNode.complete){wn=0,Ci=null;var br=St.sibling;if(br!==null)En=br;else{var Zr=St.return;Zr!==null?(En=Zr,Yf(Zr)):En=null}break t}}wn=0,Ci=null,dc(e,r,xe,5);break;case 6:wn=0,Ci=null,dc(e,r,xe,6);break;case 8:Fh(),ji=6;break e;default:throw Error(n(462))}}_0();break}catch(xa){Od(e,xa)}while(!0);return bs=Ns=null,Ie.H=M,Ie.A=ie,Tn=o,En!==null?0:(Nn=null,yn=0,Au(),ji)}function _0(){for(;En!==null&&!Na();)Nu(En)}function Nu(e){var r=qa(e.alternate,e,Oo);e.memoizedProps=e.pendingProps,r===null?Yf(e):En=r}function Id(e){var r=e,o=r.alternate;switch(r.tag){case 15:case 0:r=Er(o,r,r.pendingProps,r.type,void 0,yn);break;case 11:r=Er(o,r,r.pendingProps,r.type.render,r.ref,yn);break;case 5:zh(r);default:Ht(o,r),r=En=Qu(r,Oo),r=qa(o,r,Oo)}e.memoizedProps=e.pendingProps,r===null?Yf(e):En=r}function dc(e,r,o,M){bs=Ns=null,zh(r),Fn=null,qi=0;var ie=r.return;try{if(vt(e,ie,r,o,yn)){ji=1,nr(e,Ho(o,e.current)),En=null;return}}catch(xe){if(ie!==null)throw En=ie,xe;ji=1,nr(e,Ho(o,e.current)),En=null;return}r.flags&32768?(Jn||M===1?e=!0:Co||(yn&536870912)!==0?e=!1:(Eo=e=!0,(M===2||M===9||M===3||M===6)&&(M=ns.current,M!==null&&M.tag===13&&(M.flags|=16384))),Bd(r,e)):Yf(r)}function Yf(e){var r=e;do{if((r.flags&32768)!==0){Bd(r,Eo);return}e=r.return;var o=Re(r.alternate,r,Oo);if(o!==null){En=o;return}if(r=r.sibling,r!==null){En=r;return}En=r=e}while(r!==null);ji===0&&(ji=5)}function Bd(e,r){do{var o=Zt(e.alternate,e);if(o!==null){o.flags&=32767,En=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(e=e.sibling,e!==null)){En=e;return}En=e=o}while(e!==null);ji=6,En=null}function Ih(e,r,o,M,ie,xe,dt,St,br){e.cancelPendingCommit=null;do Wf();while(oo!==0);if((Tn&6)!==0)throw Error(n(327));if(r!==null){if(r===e.current)throw Error(n(177));if(xe=r.lanes|r.childLanes,xe|=Zu,an(e,o,xe,dt,St,br),e===Nn&&(En=Nn=null,yn=0),kl=r,Jo=e,ol=o,Oh=xe,Ph=ie,Dd=M,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sf(Gt,function(){return qd(),null})):(e.callbackNode=null,e.callbackPriority=0),M=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||M){M=Ie.T,Ie.T=null,ie=Xe.p,Xe.p=2,dt=Tn,Tn|=4;try{Sn(e,r,o)}finally{Tn=dt,Xe.p=ie,Ie.T=M}}oo=1,Hd(),Ud(),Gd()}}function Hd(){if(oo===1){oo=0;var e=Jo,r=kl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Ie.T,Ie.T=null;var M=Xe.p;Xe.p=2;var ie=Tn;Tn|=4;try{bn(r,e);var xe=ed,dt=jc(e.containerInfo),St=xe.focusedElem,br=xe.selectionRange;if(dt!==St&&St&&St.ownerDocument&&Fc(St.ownerDocument.documentElement,St)){if(br!==null&&yu(St)){var Zr=br.start,xa=br.end;if(xa===void 0&&(xa=Zr),"selectionStart"in St)St.selectionStart=Zr,St.selectionEnd=Math.min(xa,St.value.length);else{var _a=St.ownerDocument||document,Mr=_a&&_a.defaultView||window;if(Mr.getSelection){var Kr=Mr.getSelection(),Ha=St.textContent.length,tn=Math.min(br.start,Ha),Pn=br.end===void 0?tn:Math.min(br.end,Ha);!Kr.extend&&tn>Pn&&(dt=Pn,Pn=tn,tn=dt);var Wr=Pc(St,tn),Fr=Pc(St,Pn);if(Wr&&Fr&&(Kr.rangeCount!==1||Kr.anchorNode!==Wr.node||Kr.anchorOffset!==Wr.offset||Kr.focusNode!==Fr.node||Kr.focusOffset!==Fr.offset)){var na=_a.createRange();na.setStart(Wr.node,Wr.offset),Kr.removeAllRanges(),tn>Pn?(Kr.addRange(na),Kr.extend(Fr.node,Fr.offset)):(na.setEnd(Fr.node,Fr.offset),Kr.addRange(na))}}}}for(_a=[],Kr=St;Kr=Kr.parentNode;)Kr.nodeType===1&&_a.push({element:Kr,left:Kr.scrollLeft,top:Kr.scrollTop});for(typeof St.focus=="function"&&St.focus(),St=0;St<_a.length;St++){var ka=_a[St];ka.element.scrollLeft=ka.left,ka.element.scrollTop=ka.top}}bc=!!th,ed=th=null}finally{Tn=ie,Xe.p=M,Ie.T=o}}e.current=r,oo=2}}function Ud(){if(oo===2){oo=0;var e=Jo,r=kl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Ie.T,Ie.T=null;var M=Xe.p;Xe.p=2;var ie=Tn;Tn|=4;try{On(e,r.alternate,r)}finally{Tn=ie,Xe.p=M,Ie.T=o}}oo=3}}function Gd(){if(oo===4||oo===3){oo=0,Ra();var e=Jo,r=kl,o=ol,M=Dd;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?oo=5:(oo=0,kl=Jo=null,Bh(e,e.pendingLanes));var ie=e.pendingLanes;if(ie===0&&(il=null),Ln(o),r=r.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(da,r,void 0,(r.current.flags&128)===128)}catch{}if(M!==null){r=Ie.T,ie=Xe.p,Xe.p=2,Ie.T=null;try{for(var xe=e.onRecoverableError,dt=0;dt<M.length;dt++){var St=M[dt];xe(St.value,{componentStack:St.stack})}}finally{Ie.T=r,Xe.p=ie}}(ol&3)!==0&&Wf(),Bs(e),ie=e.pendingLanes,(o&261930)!==0&&(ie&42)!==0?e===Gf?fc++:(fc=0,Gf=e):fc=0,lf(0)}}function Bh(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,$l(r)))}function Wf(){return Hd(),Ud(),Gd(),qd()}function qd(){if(oo!==5)return!1;var e=Jo,r=Oh;Oh=0;var o=Ln(ol),M=Ie.T,ie=Xe.p;try{Xe.p=32>o?32:o,Ie.T=null,o=Ph,Ph=null;var xe=Jo,dt=ol;if(oo=0,kl=Jo=null,ol=0,(Tn&6)!==0)throw Error(n(331));var St=Tn;if(Tn|=4,Ji(xe.current),Fi(xe,xe.current,dt,o),Tn=St,lf(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(da,xe)}catch{}return!0}finally{Xe.p=ie,Ie.T=M,Bh(e,r)}}function Vd(e,r,o){r=Ho(o,r),r=ta(e.stateNode,r,2),e=Jl(e,r,2),e!==null&&(Qa(e,2),Bs(e))}function ki(e,r,o){if(e.tag===3)Vd(e,e,o);else for(;r!==null;){if(r.tag===3){Vd(r,e,o);break}else if(r.tag===1){var M=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(il===null||!il.has(M))){e=Ho(o,e),o=Nr(2),M=Jl(r,o,2),M!==null&&(Jr(o,M,r,e),Qa(M,2),Bs(M));break}}r=r.return}}function Hh(e,r,o){var M=e.pingCache;if(M===null){M=e.pingCache=new Xi;var ie=new Set;M.set(r,ie)}else ie=M.get(r),ie===void 0&&(ie=new Set,M.set(r,ie));ie.has(o)||(Fs=!0,ie.add(o),e=Yd.bind(null,e,r,o),r.then(e,e))}function Yd(e,r,o){var M=e.pingCache;M!==null&&M.delete(r),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Nn===e&&(yn&o)===o&&(ji===4||ji===3&&(yn&62914560)===yn&&300>oa()-uc?(Tn&2)===0&&hc(e,0):oc|=o,sc===yn&&(sc=0)),Bs(e)}function Wd(e,r){r===0&&(r=hr()),e=wl(e,r),e!==null&&(Qa(e,r),Bs(e))}function w0(e){var r=e.memoizedState,o=0;r!==null&&(o=r.retryLane),Wd(e,o)}function A0(e,r){var o=0;switch(e.tag){case 31:case 13:var M=e.stateNode,ie=e.memoizedState;ie!==null&&(o=ie.retryLane);break;case 19:M=e.stateNode;break;case 22:M=e.stateNode._retryCache;break;default:throw Error(n(314))}M!==null&&M.delete(r),Wd(e,o)}function sf(e,r){return Ya(e,r)}var ru=null,Uo=null,Uh=!1,$f=!1,Gh=!1,au=0;function Bs(e){e!==Uo&&e.next===null&&(Uo===null?ru=Uo=e:Uo=Uo.next=e),$f=!0,Uh||(Uh=!0,qh())}function lf(e,r){if(!Gh&&$f){Gh=!0;do for(var o=!1,M=ru;M!==null;){if(e!==0){var ie=M.pendingLanes;if(ie===0)var xe=0;else{var dt=M.suspendedLanes,St=M.pingedLanes;xe=(1<<31-Gr(42|e)+1)-1,xe&=ie&~(dt&~St),xe=xe&201326741?xe&201326741|1:xe?xe|2:0}xe!==0&&(o=!0,Xf(M,xe))}else xe=yn,xe=ea(M,M===Nn?xe:0,M.cancelPendingCommit!==null||M.timeoutHandle!==-1),(xe&3)===0||Vr(M,xe)||(o=!0,Xf(M,xe));M=M.next}while(o);Gh=!1}}function S0(){$d()}function $d(){$f=Uh=!1;var e=0;au!==0&&nd()&&(e=au);for(var r=oa(),o=null,M=ru;M!==null;){var ie=M.next,xe=Xd(M,r);xe===0?(M.next=null,o===null?ru=ie:o.next=ie,ie===null&&(Uo=o)):(o=M,(e!==0||(xe&3)!==0)&&($f=!0)),M=ie}oo!==0&&oo!==5||lf(e),au!==0&&(au=0)}function Xd(e,r){for(var o=e.suspendedLanes,M=e.pingedLanes,ie=e.expirationTimes,xe=e.pendingLanes&-62914561;0<xe;){var dt=31-Gr(xe),St=1<<dt,br=ie[dt];br===-1?((St&o)===0||(St&M)!==0)&&(ie[dt]=It(St,r)):br<=r&&(e.expiredLanes|=St),xe&=~St}if(r=Nn,o=yn,o=ea(e,e===r?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),M=e.callbackNode,o===0||e===r&&(wn===2||wn===9)||e.cancelPendingCommit!==null)return M!==null&&M!==null&&Ia(M),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Vr(e,o)){if(r=o&-o,r===e.callbackPriority)return r;switch(M!==null&&Ia(M),Ln(o)){case 2:case 8:o=Nt;break;case 32:o=Gt;break;case 268435456:o=Qr;break;default:o=Gt}return M=Zd.bind(null,e),o=Ya(o,M),e.callbackPriority=r,e.callbackNode=o,r}return M!==null&&M!==null&&Ia(M),e.callbackPriority=2,e.callbackNode=null,2}function Zd(e,r){if(oo!==0&&oo!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Wf()&&e.callbackNode!==o)return null;var M=yn;return M=ea(e,e===Nn?M:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),M===0?null:(Ld(e,M,r),Xd(e,oa()),e.callbackNode!=null&&e.callbackNode===o?Zd.bind(null,e):null)}function Xf(e,r){if(Wf())return null;Ld(e,r,!0)}function qh(){nh(function(){(Tn&6)!==0?Ya(Za,S0):$d()})}function Vh(){if(au===0){var e=re;e===0&&(e=kt,kt<<=1,(kt&261888)===0&&(kt=256)),au=e}return au}function Jd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:hl(""+e)}function Kd(e,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,e.id&&o.setAttribute("form",e.id),r.parentNode.insertBefore(o,r),e=new FormData(e),o.parentNode.removeChild(o),e}function T0(e,r,o,M,ie){if(r==="submit"&&o&&o.stateNode===ie){var xe=Jd((ie[Ii]||null).action),dt=M.submitter;dt&&(r=(r=dt[Ii]||null)?Jd(r.formAction):dt.getAttribute("formAction"),r!==null&&(xe=r,dt=null));var St=new hu("action","action",null,M,ie);e.push({event:St,listeners:[{instance:null,listener:function(){if(M.defaultPrevented){if(au!==0){var br=dt?Kd(ie,dt):new FormData(ie);Ae(o,{pending:!0,data:br,method:ie.method,action:xe},null,br)}}else typeof xe=="function"&&(St.preventDefault(),br=dt?Kd(ie,dt):new FormData(ie),Ae(o,{pending:!0,data:br,method:ie.method,action:xe},xe,br))},currentTarget:ie}]})}}for(var Zf=0;Zf<Xu.length;Zf++){var Yh=Xu[Zf],M0=Yh.toLowerCase(),Wh=Yh[0].toUpperCase()+Yh.slice(1);$o(M0,"on"+Wh)}$o(xu,"onAnimationEnd"),$o(_u,"onAnimationIteration"),$o(Bc,"onAnimationStart"),$o("dblclick","onDoubleClick"),$o("focusin","onFocus"),$o("focusout","onBlur"),$o(Lf,"onTransitionRun"),$o(Nf,"onTransitionStart"),$o(Of,"onTransitionCancel"),$o(Hc,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vc));function $h(e,r){r=(r&4)!==0;for(var o=0;o<e.length;o++){var M=e[o],ie=M.event;M=M.listeners;e:{var xe=void 0;if(r)for(var dt=M.length-1;0<=dt;dt--){var St=M[dt],br=St.instance,Zr=St.currentTarget;if(St=St.listener,br!==xe&&ie.isPropagationStopped())break e;xe=St,ie.currentTarget=Zr;try{xe(ie)}catch(xa){_i(xa)}ie.currentTarget=null,xe=br}else for(dt=0;dt<M.length;dt++){if(St=M[dt],br=St.instance,Zr=St.currentTarget,St=St.listener,br!==xe&&ie.isPropagationStopped())break e;xe=St,ie.currentTarget=Zr;try{xe(ie)}catch(xa){_i(xa)}ie.currentTarget=null,xe=br}}}}function ai(e,r){var o=r[pi];o===void 0&&(o=r[pi]=new Set);var M=e+"__bubble";o.has(M)||(Zh(r,e,2,!1),o.add(M))}function Xh(e,r,o){var M=0;r&&(M|=4),Zh(o,e,M,r)}var uf="_reactListening"+Math.random().toString(36).slice(2);function Jf(e){if(!e[uf]){e[uf]=!0,As.forEach(function(o){o!=="selectionchange"&&(Qd.has(o)||Xh(o,!1,e),Xh(o,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[uf]||(r[uf]=!0,Xh("selectionchange",!1,r))}}function Zh(e,r,o,M){switch(p0(r)){case 2:var ie=P0;break;case 8:ie=Ad;break;default:ie=xc}o=ie.bind(null,r,o,e),ie=void 0,!mi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(ie=!0),M?ie!==void 0?e.addEventListener(r,o,{capture:!0,passive:ie}):e.addEventListener(r,o,!0):ie!==void 0?e.addEventListener(r,o,{passive:ie}):e.addEventListener(r,o,!1)}function cf(e,r,o,M,ie){var xe=M;if((r&1)===0&&(r&2)===0&&M!==null)e:for(;;){if(M===null)return;var dt=M.tag;if(dt===3||dt===4){var St=M.stateNode.containerInfo;if(St===ie)break;if(dt===4)for(dt=M.return;dt!==null;){var br=dt.tag;if((br===3||br===4)&&dt.stateNode.containerInfo===ie)return;dt=dt.return}for(;St!==null;){if(dt=qo(St),dt===null)return;if(br=dt.tag,br===5||br===6||br===26||br===27){M=xe=dt;continue e}St=St.parentNode}}M=M.return}$s(function(){var Zr=xe,xa=ts(o),_a=[];e:{var Mr=wu.get(e);if(Mr!==void 0){var Kr=hu,Ha=e;switch(e){case"keypress":if(Bu(o)===0)break e;case"keydown":case"keyup":Kr=kc;break;case"focusin":Ha="focus",Kr=Uu;break;case"focusout":Ha="blur",Kr=Uu;break;case"beforeblur":case"afterblur":Kr=Uu;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Kr=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Kr=Tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Kr=Zs;break;case xu:case _u:case Bc:Kr=yh;break;case Hc:Kr=Af;break;case"scroll":case"scrollend":Kr=bf;break;case"wheel":Kr=Dc;break;case"copy":case"cut":case"paste":Kr=Fl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Kr=Gu;break;case"toggle":case"beforetoggle":Kr=Tf}var tn=(r&4)!==0,Pn=!tn&&(e==="scroll"||e==="scrollend"),Wr=tn?Mr!==null?Mr+"Capture":null:Mr;tn=[];for(var Fr=Zr,na;Fr!==null;){var ka=Fr;if(na=ka.stateNode,ka=ka.tag,ka!==5&&ka!==26&&ka!==27||na===null||Wr===null||(ka=dl(Fr,Wr),ka!=null&&tn.push(Ou(Fr,ka,na))),Pn)break;Fr=Fr.return}0<tn.length&&(Mr=new Kr(Mr,Ha,null,o,xa),_a.push({event:Mr,listeners:tn}))}}if((r&7)===0){e:{if(Mr=e==="mouseover"||e==="pointerover",Kr=e==="mouseout"||e==="pointerout",Mr&&o!==wc&&(Ha=o.relatedTarget||o.fromElement)&&(qo(Ha)||Ha[ti]))break e;if((Kr||Mr)&&(Mr=xa.window===xa?xa:(Mr=xa.ownerDocument)?Mr.defaultView||Mr.parentWindow:window,Kr?(Ha=o.relatedTarget||o.toElement,Kr=Zr,Ha=Ha?qo(Ha):null,Ha!==null&&(Pn=x(Ha),tn=Ha.tag,Ha!==Pn||tn!==5&&tn!==27&&tn!==6)&&(Ha=null)):(Kr=null,Ha=Zr),Kr!==Ha)){if(tn=xf,ka="onMouseLeave",Wr="onMouseEnter",Fr="mouse",(e==="pointerout"||e==="pointerover")&&(tn=Gu,ka="onPointerLeave",Wr="onPointerEnter",Fr="pointer"),Pn=Kr==null?Mr:ko(Kr),na=Ha==null?Mr:ko(Ha),Mr=new tn(ka,Fr+"leave",Kr,o,xa),Mr.target=Pn,Mr.relatedTarget=na,ka=null,qo(xa)===Zr&&(tn=new tn(Wr,Fr+"enter",Ha,o,xa),tn.target=na,tn.relatedTarget=Pn,ka=tn),Pn=ka,Kr&&Ha)t:{for(tn=E0,Wr=Kr,Fr=Ha,na=0,ka=Wr;ka;ka=tn(ka))na++;ka=0;for(var gn=Fr;gn;gn=tn(gn))ka++;for(;0<na-ka;)Wr=tn(Wr),na--;for(;0<ka-na;)Fr=tn(Fr),ka--;for(;na--;){if(Wr===Fr||Fr!==null&&Wr===Fr.alternate){tn=Wr;break t}Wr=tn(Wr),Fr=tn(Fr)}tn=null}else tn=null;Kr!==null&&e0(_a,Mr,Kr,tn,!1),Ha!==null&&Pn!==null&&e0(_a,Pn,Ha,tn,!0)}}e:{if(Mr=Zr?ko(Zr):window,Kr=Mr.nodeName&&Mr.nodeName.toLowerCase(),Kr==="select"||Kr==="input"&&Mr.type==="file")var qn=Nc;else if(Cf(Mr))if(Df)qn=zf;else{qn=Oc;var fn=yl}else Kr=Mr.nodeName,!Kr||Kr.toLowerCase()!=="input"||Mr.type!=="checkbox"&&Mr.type!=="radio"?Zr&&ju(Zr.elementType)&&(qn=Nc):qn=Sh;if(qn&&(qn=qn(e,Zr))){kf(_a,qn,o,xa);break e}fn&&fn(e,Mr,Zr),e==="focusout"&&Zr&&Mr.type==="number"&&Zr.memoizedProps.value!=null&&es(Mr,"number",Mr.value)}switch(fn=Zr?ko(Zr):window,e){case"focusin":(Cf(fn)||fn.contentEditable==="true")&&(ks=fn,el=Zr,Do=null);break;case"focusout":Do=el=ks=null;break;case"mousedown":bu=!0;break;case"contextmenu":case"mouseup":case"dragend":bu=!1,Ic(_a,o,xa);break;case"selectionchange":if(xl)break;case"keydown":case"keyup":Ic(_a,o,xa)}var Dn;if(zc)e:{switch(e){case"compositionstart":var Zn="onCompositionStart";break e;case"compositionend":Zn="onCompositionEnd";break e;case"compositionupdate":Zn="onCompositionUpdate";break e}Zn=void 0}else Qs?mu(e,o)&&(Zn="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Zn="onCompositionStart");Zn&&(Lc&&o.locale!=="ko"&&(Qs||Zn!=="onCompositionStart"?Zn==="onCompositionEnd"&&Qs&&(Dn=yf()):(Ts=xa,Ac="value"in Ts?Ts.value:Ts.textContent,Qs=!0)),fn=Kf(Zr,Zn),0<fn.length&&(Zn=new Ec(Zn,e,null,o,xa),_a.push({event:Zn,listeners:fn}),Dn?Zn.data=Dn:(Dn=qu(o),Dn!==null&&(Zn.data=Dn)))),(Dn=_h?Ef(e,o):wh(e,o))&&(Zn=Kf(Zr,"onBeforeInput"),0<Zn.length&&(fn=new Ec("onBeforeInput","beforeinput",null,o,xa),_a.push({event:fn,listeners:Zn}),fn.data=Dn)),T0(_a,e,Zr,o,xa)}$h(_a,r)})}function Ou(e,r,o){return{instance:e,listener:r,currentTarget:o}}function Kf(e,r){for(var o=r+"Capture",M=[];e!==null;){var ie=e,xe=ie.stateNode;if(ie=ie.tag,ie!==5&&ie!==26&&ie!==27||xe===null||(ie=dl(e,o),ie!=null&&M.unshift(Ou(e,ie,xe)),ie=dl(e,r),ie!=null&&M.push(Ou(e,ie,xe))),e.tag===3)return M;e=e.return}return[]}function E0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function e0(e,r,o,M,ie){for(var xe=r._reactName,dt=[];o!==null&&o!==M;){var St=o,br=St.alternate,Zr=St.stateNode;if(St=St.tag,br!==null&&br===M)break;St!==5&&St!==26&&St!==27||Zr===null||(br=Zr,ie?(Zr=dl(o,xe),Zr!=null&&dt.unshift(Ou(o,Zr,br))):ie||(Zr=dl(o,xe),Zr!=null&&dt.push(Ou(o,Zr,br)))),o=o.return}dt.length!==0&&e.push({event:r,listeners:dt})}var C0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function Jh(e){return(typeof e=="string"?e:""+e).replace(C0,`
`).replace(k0,"")}function Kh(e,r){return r=Jh(r),Jh(e)===r}function Si(e,r,o,M,ie,xe){switch(o){case"children":typeof M=="string"?r==="body"||r==="textarea"&&M===""||ao(e,M):(typeof M=="number"||typeof M=="bigint")&&r!=="body"&&ao(e,""+M);break;case"className":Di(e,"class",M);break;case"tabIndex":Di(e,"tabindex",M);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(e,o,M);break;case"style":Ws(e,M,xe);break;case"data":if(r!=="object"){Di(e,"data",M);break}case"src":case"href":if(M===""&&(r!=="a"||o!=="href")){e.removeAttribute(o);break}if(M==null||typeof M=="function"||typeof M=="symbol"||typeof M=="boolean"){e.removeAttribute(o);break}M=hl(""+M),e.setAttribute(o,M);break;case"action":case"formAction":if(typeof M=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof xe=="function"&&(o==="formAction"?(r!=="input"&&Si(e,r,"name",ie.name,ie,null),Si(e,r,"formEncType",ie.formEncType,ie,null),Si(e,r,"formMethod",ie.formMethod,ie,null),Si(e,r,"formTarget",ie.formTarget,ie,null)):(Si(e,r,"encType",ie.encType,ie,null),Si(e,r,"method",ie.method,ie,null),Si(e,r,"target",ie.target,ie,null)));if(M==null||typeof M=="symbol"||typeof M=="boolean"){e.removeAttribute(o);break}M=hl(""+M),e.setAttribute(o,M);break;case"onClick":M!=null&&(e.onclick=Oi);break;case"onScroll":M!=null&&ai("scroll",e);break;case"onScrollEnd":M!=null&&ai("scrollend",e);break;case"dangerouslySetInnerHTML":if(M!=null){if(typeof M!="object"||!("__html"in M))throw Error(n(61));if(o=M.__html,o!=null){if(ie.children!=null)throw Error(n(60));e.innerHTML=o}}break;case"multiple":e.multiple=M&&typeof M!="function"&&typeof M!="symbol";break;case"muted":e.muted=M&&typeof M!="function"&&typeof M!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(M==null||typeof M=="function"||typeof M=="boolean"||typeof M=="symbol"){e.removeAttribute("xlink:href");break}o=hl(""+M),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":M!=null&&typeof M!="function"&&typeof M!="symbol"?e.setAttribute(o,""+M):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":M&&typeof M!="function"&&typeof M!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":M===!0?e.setAttribute(o,""):M!==!1&&M!=null&&typeof M!="function"&&typeof M!="symbol"?e.setAttribute(o,M):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":M!=null&&typeof M!="function"&&typeof M!="symbol"&&!isNaN(M)&&1<=M?e.setAttribute(o,M):e.removeAttribute(o);break;case"rowSpan":case"start":M==null||typeof M=="function"||typeof M=="symbol"||isNaN(M)?e.removeAttribute(o):e.setAttribute(o,M);break;case"popover":ai("beforetoggle",e),ai("toggle",e),Rl(e,"popover",M);break;case"xlinkActuate":go(e,"http://www.w3.org/1999/xlink","xlink:actuate",M);break;case"xlinkArcrole":go(e,"http://www.w3.org/1999/xlink","xlink:arcrole",M);break;case"xlinkRole":go(e,"http://www.w3.org/1999/xlink","xlink:role",M);break;case"xlinkShow":go(e,"http://www.w3.org/1999/xlink","xlink:show",M);break;case"xlinkTitle":go(e,"http://www.w3.org/1999/xlink","xlink:title",M);break;case"xlinkType":go(e,"http://www.w3.org/1999/xlink","xlink:type",M);break;case"xmlBase":go(e,"http://www.w3.org/XML/1998/namespace","xml:base",M);break;case"xmlLang":go(e,"http://www.w3.org/XML/1998/namespace","xml:lang",M);break;case"xmlSpace":go(e,"http://www.w3.org/XML/1998/namespace","xml:space",M);break;case"is":Rl(e,"is",M);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Dl.get(o)||o,Rl(e,o,M))}}function Qf(e,r,o,M,ie,xe){switch(o){case"style":Ws(e,M,xe);break;case"dangerouslySetInnerHTML":if(M!=null){if(typeof M!="object"||!("__html"in M))throw Error(n(61));if(o=M.__html,o!=null){if(ie.children!=null)throw Error(n(60));e.innerHTML=o}}break;case"children":typeof M=="string"?ao(e,M):(typeof M=="number"||typeof M=="bigint")&&ao(e,""+M);break;case"onScroll":M!=null&&ai("scroll",e);break;case"onScrollEnd":M!=null&&ai("scrollend",e);break;case"onClick":M!=null&&(e.onclick=Oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qs.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(ie=o.endsWith("Capture"),r=o.slice(2,ie?o.length-7:void 0),xe=e[Ii]||null,xe=xe!=null?xe[o]:null,typeof xe=="function"&&e.removeEventListener(r,xe,ie),typeof M=="function")){typeof xe!="function"&&xe!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(r,M,ie);break e}o in e?e[o]=M:M===!0?e.setAttribute(o,""):Rl(e,o,M)}}}function co(e,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ai("error",e),ai("load",e);var M=!1,ie=!1,xe;for(xe in o)if(o.hasOwnProperty(xe)){var dt=o[xe];if(dt!=null)switch(xe){case"src":M=!0;break;case"srcSet":ie=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:Si(e,r,xe,dt,o,null)}}ie&&Si(e,r,"srcSet",o.srcSet,o,null),M&&Si(e,r,"src",o.src,o,null);return;case"input":ai("invalid",e);var St=xe=dt=ie=null,br=null,Zr=null;for(M in o)if(o.hasOwnProperty(M)){var xa=o[M];if(xa!=null)switch(M){case"name":ie=xa;break;case"type":dt=xa;break;case"checked":br=xa;break;case"defaultChecked":Zr=xa;break;case"value":xe=xa;break;case"defaultValue":St=xa;break;case"children":case"dangerouslySetInnerHTML":if(xa!=null)throw Error(n(137,r));break;default:Si(e,r,M,xa,o,null)}}Fu(e,xe,St,br,Zr,dt,ie,!1);return;case"select":ai("invalid",e),M=dt=xe=null;for(ie in o)if(o.hasOwnProperty(ie)&&(St=o[ie],St!=null))switch(ie){case"value":xe=St;break;case"defaultValue":dt=St;break;case"multiple":M=St;default:Si(e,r,ie,St,o,null)}r=xe,o=dt,e.multiple=!!M,r!=null?cl(e,!!M,r,!1):o!=null&&cl(e,!!M,o,!0);return;case"textarea":ai("invalid",e),xe=ie=M=null;for(dt in o)if(o.hasOwnProperty(dt)&&(St=o[dt],St!=null))switch(dt){case"value":M=St;break;case"defaultValue":ie=St;break;case"children":xe=St;break;case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(91));break;default:Si(e,r,dt,St,o,null)}Gi(e,M,ie,xe);return;case"option":for(br in o)if(o.hasOwnProperty(br)&&(M=o[br],M!=null))switch(br){case"selected":e.selected=M&&typeof M!="function"&&typeof M!="symbol";break;default:Si(e,r,br,M,o,null)}return;case"dialog":ai("beforetoggle",e),ai("toggle",e),ai("cancel",e),ai("close",e);break;case"iframe":case"object":ai("load",e);break;case"video":case"audio":for(M=0;M<vc.length;M++)ai(vc[M],e);break;case"image":ai("error",e),ai("load",e);break;case"details":ai("toggle",e);break;case"embed":case"source":case"link":ai("error",e),ai("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Zr in o)if(o.hasOwnProperty(Zr)&&(M=o[Zr],M!=null))switch(Zr){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:Si(e,r,Zr,M,o,null)}return;default:if(ju(r)){for(xa in o)o.hasOwnProperty(xa)&&(M=o[xa],M!==void 0&&Qf(e,r,xa,M,o,void 0));return}}for(St in o)o.hasOwnProperty(St)&&(M=o[St],M!=null&&Si(e,r,St,M,o,null))}function eh(e,r,o,M){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var ie=null,xe=null,dt=null,St=null,br=null,Zr=null,xa=null;for(Kr in o){var _a=o[Kr];if(o.hasOwnProperty(Kr)&&_a!=null)switch(Kr){case"checked":break;case"value":break;case"defaultValue":br=_a;default:M.hasOwnProperty(Kr)||Si(e,r,Kr,null,M,_a)}}for(var Mr in M){var Kr=M[Mr];if(_a=o[Mr],M.hasOwnProperty(Mr)&&(Kr!=null||_a!=null))switch(Mr){case"type":xe=Kr;break;case"name":ie=Kr;break;case"checked":Zr=Kr;break;case"defaultChecked":xa=Kr;break;case"value":dt=Kr;break;case"defaultValue":St=Kr;break;case"children":case"dangerouslySetInnerHTML":if(Kr!=null)throw Error(n(137,r));break;default:Kr!==_a&&Si(e,r,Mr,Kr,M,_a)}}fs(e,dt,St,br,Zr,xa,xe,ie);return;case"select":Kr=dt=St=Mr=null;for(xe in o)if(br=o[xe],o.hasOwnProperty(xe)&&br!=null)switch(xe){case"value":break;case"multiple":Kr=br;default:M.hasOwnProperty(xe)||Si(e,r,xe,null,M,br)}for(ie in M)if(xe=M[ie],br=o[ie],M.hasOwnProperty(ie)&&(xe!=null||br!=null))switch(ie){case"value":Mr=xe;break;case"defaultValue":St=xe;break;case"multiple":dt=xe;default:xe!==br&&Si(e,r,ie,xe,M,br)}r=St,o=dt,M=Kr,Mr!=null?cl(e,!!o,Mr,!1):!!M!=!!o&&(r!=null?cl(e,!!o,r,!0):cl(e,!!o,o?[]:"",!1));return;case"textarea":Kr=Mr=null;for(St in o)if(ie=o[St],o.hasOwnProperty(St)&&ie!=null&&!M.hasOwnProperty(St))switch(St){case"value":break;case"children":break;default:Si(e,r,St,null,M,ie)}for(dt in M)if(ie=M[dt],xe=o[dt],M.hasOwnProperty(dt)&&(ie!=null||xe!=null))switch(dt){case"value":Mr=ie;break;case"defaultValue":Kr=ie;break;case"children":break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(n(91));break;default:ie!==xe&&Si(e,r,dt,ie,M,xe)}hs(e,Mr,Kr);return;case"option":for(var Ha in o)if(Mr=o[Ha],o.hasOwnProperty(Ha)&&Mr!=null&&!M.hasOwnProperty(Ha))switch(Ha){case"selected":e.selected=!1;break;default:Si(e,r,Ha,null,M,Mr)}for(br in M)if(Mr=M[br],Kr=o[br],M.hasOwnProperty(br)&&Mr!==Kr&&(Mr!=null||Kr!=null))switch(br){case"selected":e.selected=Mr&&typeof Mr!="function"&&typeof Mr!="symbol";break;default:Si(e,r,br,Mr,M,Kr)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tn in o)Mr=o[tn],o.hasOwnProperty(tn)&&Mr!=null&&!M.hasOwnProperty(tn)&&Si(e,r,tn,null,M,Mr);for(Zr in M)if(Mr=M[Zr],Kr=o[Zr],M.hasOwnProperty(Zr)&&Mr!==Kr&&(Mr!=null||Kr!=null))switch(Zr){case"children":case"dangerouslySetInnerHTML":if(Mr!=null)throw Error(n(137,r));break;default:Si(e,r,Zr,Mr,M,Kr)}return;default:if(ju(r)){for(var Pn in o)Mr=o[Pn],o.hasOwnProperty(Pn)&&Mr!==void 0&&!M.hasOwnProperty(Pn)&&Qf(e,r,Pn,void 0,M,Mr);for(xa in M)Mr=M[xa],Kr=o[xa],!M.hasOwnProperty(xa)||Mr===Kr||Mr===void 0&&Kr===void 0||Qf(e,r,xa,Mr,M,Kr);return}}for(var Wr in o)Mr=o[Wr],o.hasOwnProperty(Wr)&&Mr!=null&&!M.hasOwnProperty(Wr)&&Si(e,r,Wr,null,M,Mr);for(_a in M)Mr=M[_a],Kr=o[_a],!M.hasOwnProperty(_a)||Mr===Kr||Mr==null&&Kr==null||Si(e,r,_a,Mr,M,Kr)}function t0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,r=0,o=performance.getEntriesByType("resource"),M=0;M<o.length;M++){var ie=o[M],xe=ie.transferSize,dt=ie.initiatorType,St=ie.duration;if(xe&&St&&t0(dt)){for(dt=0,St=ie.responseEnd,M+=1;M<o.length;M++){var br=o[M],Zr=br.startTime;if(Zr>St)break;var xa=br.transferSize,_a=br.initiatorType;xa&&t0(_a)&&(br=br.responseEnd,dt+=xa*(br<St?1:(St-Zr)/(br-Zr)))}if(--M,r+=8*(xe+dt)/(ie.duration/1e3),e++,10<e)break}}if(0<e)return r/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var th=null,ed=null;function rh(e){return e.nodeType===9?e:e.ownerDocument}function rd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function ah(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ff=null;function nd(){var e=window.event;return e&&e.type==="popstate"?e===ff?!1:(ff=e,!0):(ff=null,!1)}var od=typeof setTimeout=="function"?setTimeout:void 0,R0=typeof clearTimeout=="function"?clearTimeout:void 0,sd=typeof Promise=="function"?Promise:void 0,nh=typeof queueMicrotask=="function"?queueMicrotask:typeof sd<"u"?function(e){return sd.resolve(null).then(e).catch(r0)}:od;function r0(e){setTimeout(function(){throw e})}function nu(e){return e==="head"}function a0(e,r){var o=r,M=0;do{var ie=o.nextSibling;if(e.removeChild(o),ie&&ie.nodeType===8)if(o=ie.data,o==="/$"||o==="/&"){if(M===0){e.removeChild(ie),Ir(r);return}M--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")M++;else if(o==="html")iu(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,iu(o);for(var xe=o.firstChild;xe;){var dt=xe.nextSibling,St=xe.nodeName;xe[pa]||St==="SCRIPT"||St==="STYLE"||St==="LINK"&&xe.rel.toLowerCase()==="stylesheet"||o.removeChild(xe),xe=dt}}else o==="body"&&iu(e.ownerDocument.body);o=ie}while(o);Ir(r)}function n0(e,r){var o=e;e=0;do{var M=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),M&&M.nodeType===8)if(o=M.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=M}while(o)}function ld(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ld(o),Gs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function i0(e,r,o,M){for(;e.nodeType===1;){var ie=o;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!M&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(M){if(!e[pa])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(xe=e.getAttribute("rel"),xe==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(xe!==ie.rel||e.getAttribute("href")!==(ie.href==null||ie.href===""?null:ie.href)||e.getAttribute("crossorigin")!==(ie.crossOrigin==null?null:ie.crossOrigin)||e.getAttribute("title")!==(ie.title==null?null:ie.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(xe=e.getAttribute("src"),(xe!==(ie.src==null?null:ie.src)||e.getAttribute("type")!==(ie.type==null?null:ie.type)||e.getAttribute("crossorigin")!==(ie.crossOrigin==null?null:ie.crossOrigin))&&xe&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var xe=ie.name==null?null:""+ie.name;if(ie.type==="hidden"&&e.getAttribute("name")===xe)return e}else return e;if(e=_s(e.nextSibling),e===null)break}return null}function o0(e,r,o){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=_s(e.nextSibling),e===null))return null;return e}function ud(e,r){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=_s(e.nextSibling),e===null))return null;return e}function ih(e){return e.data==="$?"||e.data==="$~"}function cd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function oh(e,r){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=r;else if(e.data!=="$?"||o.readyState!=="loading")r();else{var M=function(){r(),o.removeEventListener("DOMContentLoaded",M)};o.addEventListener("DOMContentLoaded",M),e._reactRetry=M}}function _s(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return e}var fd=null;function hd(e){e=e.nextSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(r===0)return _s(e.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}e=e.nextSibling}return null}function dd(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return e;r--}else o!=="/$"&&o!=="/&"||r++}e=e.previousSibling}return null}function s0(e,r,o){switch(r=rh(o),e){case"html":if(e=r.documentElement,!e)throw Error(n(452));return e;case"head":if(e=r.head,!e)throw Error(n(453));return e;case"body":if(e=r.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function iu(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Gs(e)}var Go=new Map,vd=new Set;function hf(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hs=Xe.d;Xe.d={f:Us,r:l0,D:pd,C:D0,L:z0,m:L0,X:md,S:lh,M:u0};function Us(){var e=Hs.f(),r=qf();return e||r}function l0(e){var r=Fo(e);r!==null&&r.tag===5&&r.type==="form"?oe(r):Hs.r(e)}var pc=typeof document>"u"?null:document;function sh(e,r,o){var M=pc;if(M&&typeof r=="string"&&r){var ie=jo(r);ie='link[rel="'+e+'"][href="'+ie+'"]',typeof o=="string"&&(ie+='[crossorigin="'+o+'"]'),vd.has(ie)||(vd.add(ie),e={rel:e,crossOrigin:o,href:r},M.querySelector(ie)===null&&(r=M.createElement("link"),co(r,"link",e),Bi(r),M.head.appendChild(r)))}}function pd(e){Hs.D(e),sh("dns-prefetch",e,null)}function D0(e,r){Hs.C(e,r),sh("preconnect",e,r)}function z0(e,r,o){Hs.L(e,r,o);var M=pc;if(M&&e&&r){var ie='link[rel="preload"][as="'+jo(r)+'"]';r==="image"&&o&&o.imageSrcSet?(ie+='[imagesrcset="'+jo(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(ie+='[imagesizes="'+jo(o.imageSizes)+'"]')):ie+='[href="'+jo(e)+'"]';var xe=ie;switch(r){case"style":xe=mc(e);break;case"script":xe=Pu(e)}Go.has(xe)||(e=B({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:e,as:r},o),Go.set(xe,e),M.querySelector(ie)!==null||r==="style"&&M.querySelector(df(xe))||r==="script"&&M.querySelector(ws(xe))||(r=M.createElement("link"),co(r,"link",e),Bi(r),M.head.appendChild(r)))}}function L0(e,r){Hs.m(e,r);var o=pc;if(o&&e){var M=r&&typeof r.as=="string"?r.as:"script",ie='link[rel="modulepreload"][as="'+jo(M)+'"][href="'+jo(e)+'"]',xe=ie;switch(M){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":xe=Pu(e)}if(!Go.has(xe)&&(e=B({rel:"modulepreload",href:e},r),Go.set(xe,e),o.querySelector(ie)===null)){switch(M){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ws(xe)))return}M=o.createElement("link"),co(M,"link",e),Bi(M),o.head.appendChild(M)}}}function lh(e,r,o){Hs.S(e,r,o);var M=pc;if(M&&e){var ie=Ro(M).hoistableStyles,xe=mc(e);r=r||"default";var dt=ie.get(xe);if(!dt){var St={loading:0,preload:null};if(dt=M.querySelector(df(xe)))St.loading=5;else{e=B({rel:"stylesheet",href:e,"data-precedence":r},o),(o=Go.get(xe))&&gd(e,o);var br=dt=M.createElement("link");Bi(br),co(br,"link",e),br._p=new Promise(function(Zr,xa){br.onload=Zr,br.onerror=xa}),br.addEventListener("load",function(){St.loading|=1}),br.addEventListener("error",function(){St.loading|=2}),St.loading|=4,gc(dt,r,M)}dt={type:"stylesheet",instance:dt,count:1,state:St},ie.set(xe,dt)}}}function md(e,r){Hs.X(e,r);var o=pc;if(o&&e){var M=Ro(o).hoistableScripts,ie=Pu(e),xe=M.get(ie);xe||(xe=o.querySelector(ws(ie)),xe||(e=B({src:e,async:!0},r),(r=Go.get(ie))&&yd(e,r),xe=o.createElement("script"),Bi(xe),co(xe,"link",e),o.head.appendChild(xe)),xe={type:"script",instance:xe,count:1,state:null},M.set(ie,xe))}}function u0(e,r){Hs.M(e,r);var o=pc;if(o&&e){var M=Ro(o).hoistableScripts,ie=Pu(e),xe=M.get(ie);xe||(xe=o.querySelector(ws(ie)),xe||(e=B({src:e,async:!0,type:"module"},r),(r=Go.get(ie))&&yd(e,r),xe=o.createElement("script"),Bi(xe),co(xe,"link",e),o.head.appendChild(xe)),xe={type:"script",instance:xe,count:1,state:null},M.set(ie,xe))}}function c0(e,r,o,M){var ie=(ie=Yt.current)?hf(ie):null;if(!ie)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=mc(o.href),o=Ro(ie).hoistableStyles,M=o.get(r),M||(M={type:"style",instance:null,count:0,state:null},o.set(r,M)),M):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=mc(o.href);var xe=Ro(ie).hoistableStyles,dt=xe.get(e);if(dt||(ie=ie.ownerDocument||ie,dt={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},xe.set(e,dt),(xe=ie.querySelector(df(e)))&&!xe._p&&(dt.instance=xe,dt.state.loading=5),Go.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Go.set(e,o),xe||f0(ie,e,o,dt.state))),r&&M===null)throw Error(n(528,""));return dt}if(r&&M!==null)throw Error(n(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Pu(o),o=Ro(ie).hoistableScripts,M=o.get(r),M||(M={type:"script",instance:null,count:0,state:null},o.set(r,M)),M):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function mc(e){return'href="'+jo(e)+'"'}function df(e){return'link[rel="stylesheet"]['+e+"]"}function us(e){return B({},e,{"data-precedence":e.precedence,precedence:null})}function f0(e,r,o,M){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?M.loading=1:(r=e.createElement("link"),M.preload=r,r.addEventListener("load",function(){return M.loading|=1}),r.addEventListener("error",function(){return M.loading|=2}),co(r,"link",o),Bi(r),e.head.appendChild(r))}function Pu(e){return'[src="'+jo(e)+'"]'}function ws(e){return"script[async]"+e}function uh(e,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var M=e.querySelector('style[data-href~="'+jo(o.href)+'"]');if(M)return r.instance=M,Bi(M),M;var ie=B({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return M=(e.ownerDocument||e).createElement("style"),Bi(M),co(M,"style",ie),gc(M,o.precedence,e),r.instance=M;case"stylesheet":ie=mc(o.href);var xe=e.querySelector(df(ie));if(xe)return r.state.loading|=4,r.instance=xe,Bi(xe),xe;M=us(o),(ie=Go.get(ie))&&gd(M,ie),xe=(e.ownerDocument||e).createElement("link"),Bi(xe);var dt=xe;return dt._p=new Promise(function(St,br){dt.onload=St,dt.onerror=br}),co(xe,"link",M),r.state.loading|=4,gc(xe,o.precedence,e),r.instance=xe;case"script":return xe=Pu(o.src),(ie=e.querySelector(ws(xe)))?(r.instance=ie,Bi(ie),ie):(M=o,(ie=Go.get(xe))&&(M=B({},o),yd(M,ie)),e=e.ownerDocument||e,ie=e.createElement("script"),Bi(ie),co(ie,"link",M),e.head.appendChild(ie),r.instance=ie);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(M=r.instance,r.state.loading|=4,gc(M,o.precedence,e));return r.instance}function gc(e,r,o){for(var M=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),ie=M.length?M[M.length-1]:null,xe=ie,dt=0;dt<M.length;dt++){var St=M[dt];if(St.dataset.precedence===r)xe=St;else if(xe!==ie)break}xe?xe.parentNode.insertBefore(e,xe.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(e,r.firstChild))}function gd(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function yd(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var ch=null;function bd(e,r,o){if(ch===null){var M=new Map,ie=ch=new Map;ie.set(o,M)}else ie=ch,M=ie.get(o),M||(M=new Map,ie.set(o,M));if(M.has(e))return M;for(M.set(e,null),o=o.getElementsByTagName(e),ie=0;ie<o.length;ie++){var xe=o[ie];if(!(xe[pa]||xe[Mi]||e==="link"&&xe.getAttribute("rel")==="stylesheet")&&xe.namespaceURI!=="http://www.w3.org/2000/svg"){var dt=xe.getAttribute(r)||"";dt=e+dt;var St=M.get(dt);St?St.push(xe):M.set(dt,[xe])}}return M}function xd(e,r,o){e=e.ownerDocument||e,e.head.insertBefore(o,r==="title"?e.querySelector("head > title"):null)}function h0(e,r,o){if(o===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function _d(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function N0(e,r,o,M){if(o.type==="stylesheet"&&(typeof M.media!="string"||matchMedia(M.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var ie=mc(M.href),xe=r.querySelector(df(ie));if(xe){r=xe._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(e.count++,e=hh.bind(e),r.then(e,e)),o.state.loading|=4,o.instance=xe,Bi(xe);return}xe=r.ownerDocument||r,M=us(M),(ie=Go.get(ie))&&gd(M,ie),xe=xe.createElement("link"),Bi(xe);var dt=xe;dt._p=new Promise(function(St,br){dt.onload=St,dt.onerror=br}),co(xe,"link",M),o.instance=xe}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=hh.bind(e),r.addEventListener("load",o),r.addEventListener("error",o))}}var fh=0;function O0(e,r){return e.stylesheets&&e.count===0&&vf(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var M=setTimeout(function(){if(e.stylesheets&&vf(e,e.stylesheets),e.unsuspend){var xe=e.unsuspend;e.unsuspend=null,xe()}},6e4+r);0<e.imgBytes&&fh===0&&(fh=62500*Qh());var ie=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&vf(e,e.stylesheets),e.unsuspend)){var xe=e.unsuspend;e.unsuspend=null,xe()}},(e.imgBytes>fh?50:800)+r);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(M),clearTimeout(ie)}}:null}function hh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dh=null;function vf(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dh=new Map,r.forEach(d0,e),dh=null,hh.call(e))}function d0(e,r){if(!(r.state.loading&4)){var o=dh.get(e);if(o)var M=o.get(null);else{o=new Map,dh.set(e,o);for(var ie=e.querySelectorAll("link[data-precedence],style[data-precedence]"),xe=0;xe<ie.length;xe++){var dt=ie[xe];(dt.nodeName==="LINK"||dt.getAttribute("media")!=="not all")&&(o.set(dt.dataset.precedence,dt),M=dt)}M&&o.set(null,M)}ie=r.instance,dt=ie.getAttribute("data-precedence"),xe=o.get(dt)||M,xe===M&&o.set(null,ie),o.set(dt,ie),this.count++,M=hh.bind(this),ie.addEventListener("load",M),ie.addEventListener("error",M),xe?xe.parentNode.insertBefore(ie,xe.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(ie,e.firstChild)),r.state.loading|=4}}var ou={$$typeof:I,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function v0(e,r,o,M,ie,xe,dt,St,br){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.hiddenUpdates=sa(null),this.identifierPrefix=M,this.onUncaughtError=ie,this.onCaughtError=xe,this.onRecoverableError=dt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=br,this.incompleteTransitions=new Map}function pf(e,r,o,M,ie,xe,dt,St,br,Zr,xa,_a){return e=new v0(e,r,o,dt,br,Zr,xa,_a,St),r=1,xe===!0&&(r|=24),xe=zo(3,null,null,r),e.current=xe,xe.stateNode=e,r=rc(),r.refCount++,e.pooledCache=r,r.refCount++,xe.memoizedState={element:M,isDehydrated:o,cache:r},El(xe),e}function wd(e){return e?(e=Al,e):Al}function yc(e,r,o,M,ie,xe){ie=wd(ie),M.context===null?M.context=ie:M.pendingContext=ie,M=Zo(r),M.payload={element:o},xe=xe===void 0?null:xe,xe!==null&&(M.callback=xe),o=Jl(e,M,r),o!==null&&(Ko(o,e,r),Kl(o,e,r))}function to(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<r?o:r}}function vh(e,r){to(e,r),(e=e.alternate)&&to(e,r)}function su(e){if(e.tag===13||e.tag===31){var r=wl(e,67108864);r!==null&&Ko(r,e,67108864),vh(e,67108864)}}function mf(e){if(e.tag===13||e.tag===31){var r=ls();r=zn(r);var o=wl(e,r);o!==null&&Ko(o,e,r),vh(e,r)}}var bc=!0;function P0(e,r,o,M){var ie=Ie.T;Ie.T=null;var xe=Xe.p;try{Xe.p=2,xc(e,r,o,M)}finally{Xe.p=xe,Ie.T=ie}}function Ad(e,r,o,M){var ie=Ie.T;Ie.T=null;var xe=Xe.p;try{Xe.p=8,xc(e,r,o,M)}finally{Xe.p=xe,Ie.T=ie}}function xc(e,r,o,M){if(bc){var ie=ph(M);if(ie===null)cf(e,r,M,mh,o),Ne(e,M);else if(ht(ie,e,r,o,M))M.stopPropagation();else if(Ne(e,M),r&4&&-1<Ce.indexOf(e)){for(;ie!==null;){var xe=Fo(ie);if(xe!==null)switch(xe.tag){case 3:if(xe=xe.stateNode,xe.current.memoizedState.isDehydrated){var dt=Qe(xe.pendingLanes);if(dt!==0){var St=xe;for(St.pendingLanes|=2,St.entangledLanes|=2;dt;){var br=1<<31-Gr(dt);St.entanglements[1]|=br,dt&=~br}Bs(xe),(Tn&6)===0&&(xs=oa()+500,lf(0))}}break;case 31:case 13:St=wl(xe,2),St!==null&&Ko(St,xe,2),qf(),vh(xe,2)}if(xe=ph(M),xe===null&&cf(e,r,M,mh,o),xe===ie)break;ie=xe}ie!==null&&M.stopPropagation()}else cf(e,r,M,null,o)}}function ph(e){return e=ts(e),Sd(e)}var mh=null;function Sd(e){if(mh=null,e=qo(e),e!==null){var r=x(e);if(r===null)e=null;else{var o=r.tag;if(o===13){if(e=k(r),e!==null)return e;e=null}else if(o===31){if(e=S(r),e!==null)return e;e=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return mh=e,null}function p0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rn()){case Za:return 2;case Nt:return 8;case Gt:case ur:return 32;case Qr:return 268435456;default:return 32}default:return 32}}var Td=!1,sl=null,lu=null,uu=null,h=new Map,q=new Map,ne=[],Ce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ne(e,r){switch(e){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":lu=null;break;case"mouseover":case"mouseout":uu=null;break;case"pointerover":case"pointerout":h.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":q.delete(r.pointerId)}}function Ge(e,r,o,M,ie,xe){return e===null||e.nativeEvent!==xe?(e={blockedOn:r,domEventName:o,eventSystemFlags:M,nativeEvent:xe,targetContainers:[ie]},r!==null&&(r=Fo(r),r!==null&&su(r)),e):(e.eventSystemFlags|=M,r=e.targetContainers,ie!==null&&r.indexOf(ie)===-1&&r.push(ie),e)}function ht(e,r,o,M,ie){switch(r){case"focusin":return sl=Ge(sl,e,r,o,M,ie),!0;case"dragenter":return lu=Ge(lu,e,r,o,M,ie),!0;case"mouseover":return uu=Ge(uu,e,r,o,M,ie),!0;case"pointerover":var xe=ie.pointerId;return h.set(xe,Ge(h.get(xe)||null,e,r,o,M,ie)),!0;case"gotpointercapture":return xe=ie.pointerId,q.set(xe,Ge(q.get(xe)||null,e,r,o,M,ie)),!0}return!1}function at(e){var r=qo(e.target);if(r!==null){var o=x(r);if(o!==null){if(r=o.tag,r===13){if(r=k(o),r!==null){e.blockedOn=r,bi(e.priority,function(){mf(o)});return}}else if(r===31){if(r=S(o),r!==null){e.blockedOn=r,bi(e.priority,function(){mf(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mt(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var o=ph(e.nativeEvent);if(o===null){o=e.nativeEvent;var M=new o.constructor(o.type,o);wc=M,o.target.dispatchEvent(M),wc=null}else return r=Fo(o),r!==null&&su(r),e.blockedOn=o,!1;r.shift()}return!0}function Et(e,r,o){mt(e)&&o.delete(r)}function zt(){Td=!1,sl!==null&&mt(sl)&&(sl=null),lu!==null&&mt(lu)&&(lu=null),uu!==null&&mt(uu)&&(uu=null),h.forEach(Et),q.forEach(Et)}function tr(e,r){e.blockedOn===r&&(e.blockedOn=null,Td||(Td=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zt)))}var ar=null;function zr(e){ar!==e&&(ar=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ar===e&&(ar=null);for(var r=0;r<e.length;r+=3){var o=e[r],M=e[r+1],ie=e[r+2];if(typeof M!="function"){if(Sd(M||o)===null)continue;break}var xe=Fo(o);xe!==null&&(e.splice(r,3),r-=3,Ae(xe,{pending:!0,data:ie,method:o.method,action:M},M,ie))}}))}function Ir(e){function r(br){return tr(br,e)}sl!==null&&tr(sl,e),lu!==null&&tr(lu,e),uu!==null&&tr(uu,e),h.forEach(r),q.forEach(r);for(var o=0;o<ne.length;o++){var M=ne[o];M.blockedOn===e&&(M.blockedOn=null)}for(;0<ne.length&&(o=ne[0],o.blockedOn===null);)at(o),o.blockedOn===null&&ne.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(M=0;M<o.length;M+=3){var ie=o[M],xe=o[M+1],dt=ie[Ii]||null;if(typeof xe=="function")dt||zr(o);else if(dt){var St=null;if(xe&&xe.hasAttribute("formAction")){if(ie=xe,dt=xe[Ii]||null)St=dt.formAction;else if(Sd(ie)!==null)continue}else St=dt.action;typeof St=="function"?o[M+1]=St:(o.splice(M,3),M-=3),zr(o)}}}function vr(){function e(xe){xe.canIntercept&&xe.info==="react-transition"&&xe.intercept({handler:function(){return new Promise(function(dt){return ie=dt})},focusReset:"manual",scroll:"manual"})}function r(){ie!==null&&(ie(),ie=null),M||setTimeout(o,20)}function o(){if(!M&&!navigation.transition){var xe=navigation.currentEntry;xe&&xe.url!=null&&navigation.navigate(xe.url,{state:xe.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var M=!1,ie=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){M=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),ie!==null&&(ie(),ie=null)}}}function Sr(e){this._internalRoot=e}Cr.prototype.render=Sr.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(n(409));var o=r.current,M=ls();yc(o,M,e,r,null,null)},Cr.prototype.unmount=Sr.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;yc(e.current,2,null,e,null,null),qf(),r[ti]=null}};function Cr(e){this._internalRoot=e}Cr.prototype.unstable_scheduleHydration=function(e){if(e){var r=Hn();e={blockedOn:null,target:e,priority:r};for(var o=0;o<ne.length&&r!==0&&r<ne[o].priority;o++);ne.splice(o,0,e),o===0&&at(e)}};var Ur=i.version;if(Ur!=="19.2.0")throw Error(n(527,Ur,"19.2.0"));Xe.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=U(r),e=e!==null?C(e):null,e=e===null?null:e.stateNode,e};var Yr={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kr.isDisabled&&kr.supportsFiber)try{da=kr.inject(Yr),Tt=kr}catch{}}return reactDomClient_production.createRoot=function(e,r){if(!y(e))throw Error(n(299));var o=!1,M="",ie=wr,xe=xr,dt=Pr;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(M=r.identifierPrefix),r.onUncaughtError!==void 0&&(ie=r.onUncaughtError),r.onCaughtError!==void 0&&(xe=r.onCaughtError),r.onRecoverableError!==void 0&&(dt=r.onRecoverableError)),r=pf(e,1,!1,null,null,o,M,null,ie,xe,dt,vr),e[ti]=r.current,Jf(e),new Sr(r)},reactDomClient_production.hydrateRoot=function(e,r,o){if(!y(e))throw Error(n(299));var M=!1,ie="",xe=wr,dt=xr,St=Pr,br=null;return o!=null&&(o.unstable_strictMode===!0&&(M=!0),o.identifierPrefix!==void 0&&(ie=o.identifierPrefix),o.onUncaughtError!==void 0&&(xe=o.onUncaughtError),o.onCaughtError!==void 0&&(dt=o.onCaughtError),o.onRecoverableError!==void 0&&(St=o.onRecoverableError),o.formState!==void 0&&(br=o.formState)),r=pf(e,1,!0,r,o??null,M,ie,br,xe,dt,St,vr),r.context=wd(null),o=r.current,M=ls(),M=zn(M),ie=Zo(M),ie.callback=null,Jl(o,ie,M),o=M,r.current.lanes=o,Qa(r,o),Bs(r),e[ti]=r.current,Jf(e),new Cr(r)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createHashHistory(t={}){function i(y,x){let{pathname:k="/",search:S="",hash:E=""}=parsePath(y.location.hash.substring(1));return!k.startsWith("/")&&!k.startsWith(".")&&(k="/"+k),createLocation("",{pathname:k,search:S,hash:E},x.state&&x.state.usr||null,x.state&&x.state.key||"default")}function a(y,x){let k=y.document.querySelector("base"),S="";if(k&&k.getAttribute("href")){let E=y.location.href,U=E.indexOf("#");S=U===-1?E:E.slice(0,U)}return S+"#"+(typeof x=="string"?x:createPath(x))}function n(y,x){warning(y.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(x)})`)}return getUrlBasedHistory(i,a,n,t)}function invariant(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function warning(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,i){return{usr:t.state,key:t.key,idx:i}}function createLocation(t,i,a=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof i=="string"?parsePath(i):i,state:a,key:i&&i.key||n||createKey()}}function createPath({pathname:t="/",search:i="",hash:a=""}){return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function parsePath(t){let i={};if(t){let a=t.indexOf("#");a>=0&&(i.hash=t.substring(a),t=t.substring(0,a));let n=t.indexOf("?");n>=0&&(i.search=t.substring(n),t=t.substring(0,n)),t&&(i.pathname=t)}return i}function getUrlBasedHistory(t,i,a,n={}){let{window:y=document.defaultView,v5Compat:x=!1}=n,k=y.history,S="POP",E=null,U=C();U==null&&(U=0,k.replaceState({...k.state,idx:U},""));function C(){return(k.state||{idx:null}).idx}function B(){S="POP";let l=C(),f=l==null?null:l-U;U=l,E&&E({action:S,location:T.location,delta:f})}function W(l,f){S="PUSH";let D=createLocation(T.location,l,f);a&&a(D,l),U=C()+1;let I=getHistoryState(D,U),V=T.createHref(D);try{k.pushState(I,"",V)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;y.location.assign(V)}x&&E&&E({action:S,location:T.location,delta:1})}function Y(l,f){S="REPLACE";let D=createLocation(T.location,l,f);a&&a(D,l),U=C();let I=getHistoryState(D,U),V=T.createHref(D);k.replaceState(I,"",V),x&&E&&E({action:S,location:T.location,delta:0})}function Z(l){return createBrowserURLImpl(l)}let T={get action(){return S},get location(){return t(y,k)},listen(l){if(E)throw new Error("A history only accepts one active listener");return y.addEventListener(PopStateEventType,B),E=l,()=>{y.removeEventListener(PopStateEventType,B),E=null}},createHref(l){return i(y,l)},createURL:Z,encodeLocation(l){let f=Z(l);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:W,replace:Y,go(l){return k.go(l)}};return T}function createBrowserURLImpl(t,i=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(a,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:createPath(t);return n=n.replace(/ $/,"%20"),!i&&n.startsWith("//")&&(n=a+n),new URL(n,a)}function matchRoutes(t,i,a="/"){return matchRoutesImpl(t,i,a,!1)}function matchRoutesImpl(t,i,a,n){let y=typeof i=="string"?parsePath(i):i,x=stripBasename(y.pathname||"/",a);if(x==null)return null;let k=flattenRoutes(t);rankRouteBranches(k);let S=null;for(let E=0;S==null&&E<k.length;++E){let U=decodePath(x);S=matchRouteBranch(k[E],U,n)}return S}function flattenRoutes(t,i=[],a=[],n="",y=!1){let x=(k,S,E=y,U)=>{let C={relativePath:U===void 0?k.path||"":U,caseSensitive:k.caseSensitive===!0,childrenIndex:S,route:k};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(n)&&E)return;invariant(C.relativePath.startsWith(n),`Absolute route path "${C.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(n.length)}let B=joinPaths([n,C.relativePath]),W=a.concat(C);k.children&&k.children.length>0&&(invariant(k.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${B}".`),flattenRoutes(k.children,i,W,B,E)),!(k.path==null&&!k.index)&&i.push({path:B,score:computeScore(B,k.index),routesMeta:W})};return t.forEach((k,S)=>{if(k.path===""||!k.path?.includes("?"))x(k,S);else for(let E of explodeOptionalSegments(k.path))x(k,S,!0,E)}),i}function explodeOptionalSegments(t){let i=t.split("/");if(i.length===0)return[];let[a,...n]=i,y=a.endsWith("?"),x=a.replace(/\?$/,"");if(n.length===0)return y?[x,""]:[x];let k=explodeOptionalSegments(n.join("/")),S=[];return S.push(...k.map(E=>E===""?x:[x,E].join("/"))),y&&S.push(...k),S.map(E=>t.startsWith("/")&&E===""?"/":E)}function rankRouteBranches(t){t.sort((i,a)=>i.score!==a.score?a.score-i.score:compareIndexes(i.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,i){let a=t.split("/"),n=a.length;return a.some(isSplat)&&(n+=splatPenalty),i&&(n+=indexRouteValue),a.filter(y=>!isSplat(y)).reduce((y,x)=>y+(paramRe.test(x)?dynamicSegmentValue:x===""?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(t,i){return t.length===i.length&&t.slice(0,-1).every((n,y)=>n===i[y])?t[t.length-1]-i[i.length-1]:0}function matchRouteBranch(t,i,a=!1){let{routesMeta:n}=t,y={},x="/",k=[];for(let S=0;S<n.length;++S){let E=n[S],U=S===n.length-1,C=x==="/"?i:i.slice(x.length)||"/",B=matchPath({path:E.relativePath,caseSensitive:E.caseSensitive,end:U},C),W=E.route;if(!B&&U&&a&&!n[n.length-1].route.index&&(B=matchPath({path:E.relativePath,caseSensitive:E.caseSensitive,end:!1},C)),!B)return null;Object.assign(y,B.params),k.push({params:y,pathname:joinPaths([x,B.pathname]),pathnameBase:normalizePathname(joinPaths([x,B.pathnameBase])),route:W}),B.pathnameBase!=="/"&&(x=joinPaths([x,B.pathnameBase]))}return k}function matchPath(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,n]=compilePath(t.path,t.caseSensitive,t.end),y=i.match(a);if(!y)return null;let x=y[0],k=x.replace(/(.)\/+$/,"$1"),S=y.slice(1);return{params:n.reduce((U,{paramName:C,isOptional:B},W)=>{if(C==="*"){let Z=S[W]||"";k=x.slice(0,x.length-Z.length).replace(/(.)\/+$/,"$1")}const Y=S[W];return B&&!Y?U[C]=void 0:U[C]=(Y||"").replace(/%2F/g,"/"),U},{}),pathname:x,pathnameBase:k,pattern:t}}function compilePath(t,i=!1,a=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],y="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(k,S,E)=>(n.push({paramName:S,isOptional:E!=null}),E?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),y+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?y+="\\/*$":t!==""&&t!=="/"&&(y+="(?:(?=\\/|$))"),[new RegExp(y,i?void 0:"i"),n]}function decodePath(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),t}}function stripBasename(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let a=i.endsWith("/")?i.length-1:i.length,n=t.charAt(a);return n&&n!=="/"?null:t.slice(a)||"/"}function resolvePath(t,i="/"){let{pathname:a,search:n="",hash:y=""}=typeof t=="string"?parsePath(t):t;return{pathname:a?a.startsWith("/")?a:resolvePathname(a,i):i,search:normalizeSearch(n),hash:normalizeHash(y)}}function resolvePathname(t,i){let a=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(y=>{y===".."?a.length>1&&a.pop():y!=="."&&a.push(y)}),a.length>1?a.join("/"):"/"}function getInvalidPathError(t,i,a,n){return`Cannot include a '${t}' character in a manually specified \`to.${i}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((i,a)=>a===0||i.route.path&&i.route.path.length>0)}function getResolveToMatches(t){let i=getPathContributingMatches(t);return i.map((a,n)=>n===i.length-1?a.pathname:a.pathnameBase)}function resolveTo(t,i,a,n=!1){let y;typeof t=="string"?y=parsePath(t):(y={...t},invariant(!y.pathname||!y.pathname.includes("?"),getInvalidPathError("?","pathname","search",y)),invariant(!y.pathname||!y.pathname.includes("#"),getInvalidPathError("#","pathname","hash",y)),invariant(!y.search||!y.search.includes("#"),getInvalidPathError("#","search","hash",y)));let x=t===""||y.pathname==="",k=x?"/":y.pathname,S;if(k==null)S=a;else{let B=i.length-1;if(!n&&k.startsWith("..")){let W=k.split("/");for(;W[0]==="..";)W.shift(),B-=1;y.pathname=W.join("/")}S=B>=0?i[B]:"/"}let E=resolvePath(y,S),U=k&&k!=="/"&&k.endsWith("/"),C=(x||k===".")&&a.endsWith("/");return!E.pathname.endsWith("/")&&(U||C)&&(E.pathname+="/"),E}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:i}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=reactExports.useContext(NavigationContext),{hash:y,pathname:x,search:k}=useResolvedPath(t,{relative:i}),S=x;return a!=="/"&&(S=x==="/"?a:joinPaths([a,x])),n.createHref({pathname:S,search:k,hash:y})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:i,navigator:a}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:y}=useLocation(),x=JSON.stringify(getResolveToMatches(n)),k=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{k.current=!0}),reactExports.useCallback((E,U={})=>{if(warning(k.current,navigateEffectWarning),!k.current)return;if(typeof E=="number"){a.go(E);return}let C=resolveTo(E,JSON.parse(x),y,U.relative==="path");t==null&&i!=="/"&&(C.pathname=C.pathname==="/"?i:joinPaths([i,C.pathname])),(U.replace?a.replace:a.push)(C,U.state,U)},[i,a,x,y,t])}reactExports.createContext(null);function useResolvedPath(t,{relative:i}={}){let{matches:a}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),y=JSON.stringify(getResolveToMatches(a));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(y),n,i==="path"),[t,y,n,i])}function useRoutesImpl(t,i,a,n,y){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:x}=reactExports.useContext(NavigationContext),{matches:k}=reactExports.useContext(RouteContext),S=k[k.length-1],E=S?S.params:{},U=S?S.pathname:"/",C=S?S.pathnameBase:"/",B=S&&S.route;{let D=B&&B.path||"";warningOnce(U,!B||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${U}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let W=useLocation(),Y;Y=W;let Z=Y.pathname||"/",T=Z;if(C!=="/"){let D=C.replace(/^\//,"").split("/");T="/"+Z.replace(/^\//,"").split("/").slice(D.length).join("/")}let l=matchRoutes(t,{pathname:T});return warning(B||l!=null,`No routes matched location "${Y.pathname}${Y.search}${Y.hash}" `),warning(l==null||l[l.length-1].route.element!==void 0||l[l.length-1].route.Component!==void 0||l[l.length-1].route.lazy!==void 0,`Matched leaf route at location "${Y.pathname}${Y.search}${Y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(l&&l.map(D=>Object.assign({},D,{params:Object.assign({},E,D.params),pathname:joinPaths([C,x.encodeLocation?x.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?C:joinPaths([C,x.encodeLocation?x.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),k,a,n,y)}function DefaultErrorComponent(){let t=useRouteError(),i=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",y={padding:"0.5rem",backgroundColor:n},x={padding:"2px 4px",backgroundColor:n},k=null;return console.error("Error handled by React Router default ErrorBoundary:",t),k=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:x},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:x},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),a?reactExports.createElement("pre",{style:y},a):null,k)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){this.props.unstable_onError?this.props.unstable_onError(t,i):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:i,children:a}){let n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),reactExports.createElement(RouteContext.Provider,{value:t},a)}function _renderMatches(t,i=[],a=null,n=null,y=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(i.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let x=t,k=a?.errors;if(k!=null){let U=x.findIndex(C=>C.route.id&&k?.[C.route.id]!==void 0);invariant(U>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(k).join(",")}`),x=x.slice(0,Math.min(x.length,U+1))}let S=!1,E=-1;if(a)for(let U=0;U<x.length;U++){let C=x[U];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(E=U),C.route.id){let{loaderData:B,errors:W}=a,Y=C.route.loader&&!B.hasOwnProperty(C.route.id)&&(!W||W[C.route.id]===void 0);if(C.route.lazy||Y){S=!0,E>=0?x=x.slice(0,E+1):x=[x[0]];break}}}return x.reduceRight((U,C,B)=>{let W,Y=!1,Z=null,T=null;a&&(W=k&&C.route.id?k[C.route.id]:void 0,Z=C.route.errorElement||defaultErrorElement,S&&(E<0&&B===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Y=!0,T=null):E===B&&(Y=!0,T=C.route.hydrateFallbackElement||null)));let l=i.concat(x.slice(0,B+1)),f=()=>{let D;return W?D=Z:Y?D=T:C.route.Component?D=reactExports.createElement(C.route.Component,null):C.route.element?D=C.route.element:D=U,reactExports.createElement(RenderedRoute,{match:C,routeContext:{outlet:U,matches:l,isDataRoute:a!=null},children:D})};return a&&(C.route.ErrorBoundary||C.route.errorElement||B===0)?reactExports.createElement(RenderErrorBoundary,{location:a.location,revalidation:a.revalidation,component:Z,error:W,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0},unstable_onError:n}):f()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let i=reactExports.useContext(DataRouterContext);return invariant(i,getDataRouterConsoleError(t)),i}function useDataRouterState(t){let i=reactExports.useContext(DataRouterStateContext);return invariant(i,getDataRouterConsoleError(t)),i}function useRouteContext(t){let i=reactExports.useContext(RouteContext);return invariant(i,getDataRouterConsoleError(t)),i}function useCurrentRouteId(t){let i=useRouteContext(t),a=i.matches[i.matches.length-1];return invariant(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),i=useDataRouterState("useRouteError"),a=useCurrentRouteId("useRouteError");return t!==void 0?t:i.errors?.[a]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),i=useCurrentRouteId("useNavigate"),a=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{a.current=!0}),reactExports.useCallback(async(y,x={})=>{warning(a.current,navigateEffectWarning),a.current&&(typeof y=="number"?t.navigate(y):await t.navigate(y,{fromRouteId:i,...x}))},[t,i])}var alreadyWarned={};function warningOnce(t,i,a){!i&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,a))}reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:i,state:a,unstable_onError:n}){return useRoutesImpl(t,void 0,a,n,i)}function Router({basename:t="/",children:i=null,location:a,navigationType:n="POP",navigator:y,static:x=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let k=t.replace(/^\/*/,"/"),S=reactExports.useMemo(()=>({basename:k,navigator:y,static:x,future:{}}),[k,y,x]);typeof a=="string"&&(a=parsePath(a));let{pathname:E="/",search:U="",hash:C="",state:B=null,key:W="default"}=a,Y=reactExports.useMemo(()=>{let Z=stripBasename(E,k);return Z==null?null:{location:{pathname:Z,search:U,hash:C,state:B,key:W},navigationType:n}},[k,E,U,C,B,W,n]);return warning(Y!=null,`<Router basename="${k}"> is not able to match the URL "${E}${U}${C}" because it does not start with the basename, so the <Router> won't render anything.`),Y==null?null:reactExports.createElement(NavigationContext.Provider,{value:S},reactExports.createElement(LocationContext.Provider,{children:i,value:Y}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,i){return t.button===0&&(!i||i==="_self")&&!isModifiedEvent(t)}function createSearchParams(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,a)=>{let n=t[a];return i.concat(Array.isArray(n)?n.map(y=>[a,y]):[[a,n]])},[]))}function getSearchParamsForLocation(t,i){let a=createSearchParams(t);return i&&i.forEach((n,y)=>{a.has(y)||i.getAll(y).forEach(x=>{a.append(y,x)})}),a}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,i){let a,n,y,x,k;if(isFormElement(t)){let S=t.getAttribute("action");n=S?stripBasename(S,i):null,a=t.getAttribute("method")||defaultMethod,y=getFormEncType(t.getAttribute("enctype"))||defaultEncType,x=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let S=t.form;if(S==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let E=t.getAttribute("formaction")||S.getAttribute("action");if(n=E?stripBasename(E,i):null,a=t.getAttribute("formmethod")||S.getAttribute("method")||defaultMethod,y=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(S.getAttribute("enctype"))||defaultEncType,x=new FormData(S,t),!isFormDataSubmitterSupported()){let{name:U,type:C,value:B}=t;if(C==="image"){let W=U?`${U}.`:"";x.append(`${W}x`,"0"),x.append(`${W}y`,"0")}else U&&x.append(U,B)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=defaultMethod,n=null,y=defaultEncType,k=t}return x&&y==="text/plain"&&(k=x,x=void 0),{action:n,method:a.toLowerCase(),encType:y,formData:x,body:k}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function singleFetchUrl(t,i,a){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${a}`:i&&stripBasename(n.pathname,i)==="/"?n.pathname=`${i.replace(/\/$/,"")}/_root.${a}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${a}`,n}async function loadRouteModule(t,i){if(t.id in i)return i[t.id];try{let a=await import(t.module);return i[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,i,a){let n=await Promise.all(t.map(async y=>{let x=i.routes[y.route.id];if(x){let k=await loadRouteModule(x,a);return k.links?k.links():[]}return[]}));return dedupeLinkDescriptors(n.flat(1).filter(isHtmlLinkDescriptor).filter(y=>y.rel==="stylesheet"||y.rel==="preload").map(y=>y.rel==="stylesheet"?{...y,rel:"prefetch",as:"style"}:{...y,rel:"prefetch"}))}function getNewMatchesForLinks(t,i,a,n,y,x){let k=(E,U)=>a[U]?E.route.id!==a[U].route.id:!0,S=(E,U)=>a[U].pathname!==E.pathname||a[U].route.path?.endsWith("*")&&a[U].params["*"]!==E.params["*"];return x==="assets"?i.filter((E,U)=>k(E,U)||S(E,U)):x==="data"?i.filter((E,U)=>{let C=n.routes[E.route.id];if(!C||!C.hasLoader)return!1;if(k(E,U)||S(E,U))return!0;if(E.route.shouldRevalidate){let B=E.route.shouldRevalidate({currentUrl:new URL(y.pathname+y.search+y.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:E.params,defaultShouldRevalidate:!0});if(typeof B=="boolean")return B}return!0}):[]}function getModuleLinkHrefs(t,i,{includeHydrateFallback:a}={}){return dedupeHrefs(t.map(n=>{let y=i.routes[n.route.id];if(!y)return[];let x=[y.module];return y.clientActionModule&&(x=x.concat(y.clientActionModule)),y.clientLoaderModule&&(x=x.concat(y.clientLoaderModule)),a&&y.hydrateFallbackModule&&(x=x.concat(y.hydrateFallbackModule)),y.imports&&(x=x.concat(y.imports)),x}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let i={},a=Object.keys(t).sort();for(let n of a)i[n]=t[n];return i}function dedupeLinkDescriptors(t,i){let a=new Set;return new Set(i),t.reduce((n,y)=>{let x=JSON.stringify(sortKeys(y));return a.has(x)||(a.add(x),n.push({key:x,link:y})),n},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,i){let a=reactExports.useContext(FrameworkContext),[n,y]=reactExports.useState(!1),[x,k]=reactExports.useState(!1),{onFocus:S,onBlur:E,onMouseEnter:U,onMouseLeave:C,onTouchStart:B}=i,W=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&k(!0),t==="viewport"){let T=f=>{f.forEach(D=>{k(D.isIntersecting)})},l=new IntersectionObserver(T,{threshold:.5});return W.current&&l.observe(W.current),()=>{l.disconnect()}}},[t]),reactExports.useEffect(()=>{if(n){let T=setTimeout(()=>{k(!0)},100);return()=>{clearTimeout(T)}}},[n]);let Y=()=>{y(!0)},Z=()=>{y(!1),k(!1)};return a?t!=="intent"?[x,W,{}]:[x,W,{onFocus:composeEventHandlers(S,Y),onBlur:composeEventHandlers(E,Z),onMouseEnter:composeEventHandlers(U,Y),onMouseLeave:composeEventHandlers(C,Z),onTouchStart:composeEventHandlers(B,Y)}]:[!1,W,{}]}function composeEventHandlers(t,i){return a=>{t&&t(a),a.defaultPrevented||i(a)}}function PrefetchPageLinks({page:t,...i}){let{router:a}=useDataRouterContext2(),n=reactExports.useMemo(()=>matchRoutes(a.routes,t,a.basename),[a.routes,t,a.basename]);return n?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:n,...i}):null}function useKeyedPrefetchLinks(t){let{manifest:i,routeModules:a}=useFrameworkContext(),[n,y]=reactExports.useState([]);return reactExports.useEffect(()=>{let x=!1;return getKeyedPrefetchLinks(t,i,a).then(k=>{x||y(k)}),()=>{x=!0}},[t,i,a]),n}function PrefetchPageLinksImpl({page:t,matches:i,...a}){let n=useLocation(),{manifest:y,routeModules:x}=useFrameworkContext(),{basename:k}=useDataRouterContext2(),{loaderData:S,matches:E}=useDataRouterStateContext(),U=reactExports.useMemo(()=>getNewMatchesForLinks(t,i,E,y,n,"data"),[t,i,E,y,n]),C=reactExports.useMemo(()=>getNewMatchesForLinks(t,i,E,y,n,"assets"),[t,i,E,y,n]),B=reactExports.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let Z=new Set,T=!1;if(i.forEach(f=>{let D=y.routes[f.route.id];!D||!D.hasLoader||(!U.some(I=>I.route.id===f.route.id)&&f.route.id in S&&x[f.route.id]?.shouldRevalidate||D.hasClientLoader?T=!0:Z.add(f.route.id))}),Z.size===0)return[];let l=singleFetchUrl(t,k,"data");return T&&Z.size>0&&l.searchParams.set("_routes",i.filter(f=>Z.has(f.route.id)).map(f=>f.route.id).join(",")),[l.pathname+l.search]},[k,S,n,y,U,i,t,x]),W=reactExports.useMemo(()=>getModuleLinkHrefs(C,y),[C,y]),Y=useKeyedPrefetchLinks(C);return reactExports.createElement(reactExports.Fragment,null,B.map(Z=>reactExports.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...a})),W.map(Z=>reactExports.createElement("link",{key:Z,rel:"modulepreload",href:Z,...a})),Y.map(({key:Z,link:T})=>reactExports.createElement("link",{key:Z,nonce:a.nonce,...T})))}function mergeRefs(...t){return i=>{t.forEach(a=>{typeof a=="function"?a(i):a!=null&&(a.current=i)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.4")}catch{}function HashRouter({basename:t,children:i,window:a}){let n=reactExports.useRef();n.current==null&&(n.current=createHashHistory({window:a,v5Compat:!0}));let y=n.current,[x,k]=reactExports.useState({action:y.action,location:y.location}),S=reactExports.useCallback(E=>{reactExports.startTransition(()=>k(E))},[k]);return reactExports.useLayoutEffect(()=>y.listen(S),[y,S]),reactExports.createElement(Router,{basename:t,children:i,location:x.location,navigationType:x.action,navigator:y})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:i,discover:a="render",prefetch:n="none",relative:y,reloadDocument:x,replace:k,state:S,target:E,to:U,preventScrollReset:C,viewTransition:B,...W},Y){let{basename:Z}=reactExports.useContext(NavigationContext),T=typeof U=="string"&&ABSOLUTE_URL_REGEX2.test(U),l,f=!1;if(typeof U=="string"&&T&&(l=U,isBrowser))try{let ee=new URL(window.location.href),ae=U.startsWith("//")?new URL(ee.protocol+U):new URL(U),Se=stripBasename(ae.pathname,Z);ae.origin===ee.origin&&Se!=null?U=Se+ae.search+ae.hash:f=!0}catch{warning(!1,`<Link to="${U}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=useHref(U,{relative:y}),[I,V,K]=usePrefetchBehavior(n,W),A=useLinkClickHandler(U,{replace:k,state:S,target:E,preventScrollReset:C,relative:y,viewTransition:B});function L(ee){i&&i(ee),ee.defaultPrevented||A(ee)}let G=reactExports.createElement("a",{...W,...K,href:l||D,onClick:f||x?i:L,ref:mergeRefs(Y,V),target:E,"data-discover":!T&&a==="render"?"true":void 0});return I&&!T?reactExports.createElement(reactExports.Fragment,null,G,reactExports.createElement(PrefetchPageLinks,{page:D})):G});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":i="page",caseSensitive:a=!1,className:n="",end:y=!1,style:x,to:k,viewTransition:S,children:E,...U},C){let B=useResolvedPath(k,{relative:U.relative}),W=useLocation(),Y=reactExports.useContext(DataRouterStateContext),{navigator:Z,basename:T}=reactExports.useContext(NavigationContext),l=Y!=null&&useViewTransitionState(B)&&S===!0,f=Z.encodeLocation?Z.encodeLocation(B).pathname:B.pathname,D=W.pathname,I=Y&&Y.navigation&&Y.navigation.location?Y.navigation.location.pathname:null;a||(D=D.toLowerCase(),I=I?I.toLowerCase():null,f=f.toLowerCase()),I&&T&&(I=stripBasename(I,T)||I);const V=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let K=D===f||!y&&D.startsWith(f)&&D.charAt(V)==="/",A=I!=null&&(I===f||!y&&I.startsWith(f)&&I.charAt(f.length)==="/"),L={isActive:K,isPending:A,isTransitioning:l},G=K?i:void 0,ee;typeof n=="function"?ee=n(L):ee=[n,K?"active":null,A?"pending":null,l?"transitioning":null].filter(Boolean).join(" ");let ae=typeof x=="function"?x(L):x;return reactExports.createElement(Link,{...U,"aria-current":G,className:ee,ref:C,style:ae,to:k,viewTransition:S},typeof E=="function"?E(L):E)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:i,navigate:a,reloadDocument:n,replace:y,state:x,method:k=defaultMethod,action:S,onSubmit:E,relative:U,preventScrollReset:C,viewTransition:B,...W},Y)=>{let Z=useSubmit(),T=useFormAction(S,{relative:U}),l=k.toLowerCase()==="get"?"get":"post",f=typeof S=="string"&&ABSOLUTE_URL_REGEX2.test(S),D=I=>{if(E&&E(I),I.defaultPrevented)return;I.preventDefault();let V=I.nativeEvent.submitter,K=V?.getAttribute("formmethod")||k;Z(V||I.currentTarget,{fetcherKey:i,method:K,navigate:a,replace:y,state:x,relative:U,preventScrollReset:C,viewTransition:B})};return reactExports.createElement("form",{ref:Y,method:l,action:T,onSubmit:n?E:D,...W,"data-discover":!f&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let i=reactExports.useContext(DataRouterContext);return invariant(i,getDataRouterConsoleError2(t)),i}function useLinkClickHandler(t,{target:i,replace:a,state:n,preventScrollReset:y,relative:x,viewTransition:k}={}){let S=useNavigate(),E=useLocation(),U=useResolvedPath(t,{relative:x});return reactExports.useCallback(C=>{if(shouldProcessLinkClick(C,i)){C.preventDefault();let B=a!==void 0?a:createPath(E)===createPath(U);S(t,{replace:B,state:n,preventScrollReset:y,relative:x,viewTransition:k})}},[E,S,U,a,n,i,t,y,x,k])}function useSearchParams(t){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=reactExports.useRef(createSearchParams(t)),a=reactExports.useRef(!1),n=useLocation(),y=reactExports.useMemo(()=>getSearchParamsForLocation(n.search,a.current?null:i.current),[n.search]),x=useNavigate(),k=reactExports.useCallback((S,E)=>{const U=createSearchParams(typeof S=="function"?S(new URLSearchParams(y)):S);a.current=!0,x("?"+U,E)},[x,y]);return[y,k]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:i}=reactExports.useContext(NavigationContext),a=useRouteId();return reactExports.useCallback(async(n,y={})=>{let{action:x,method:k,encType:S,formData:E,body:U}=getFormSubmissionInfo(n,i);if(y.navigate===!1){let C=y.fetcherKey||getUniqueFetcherId();await t.fetch(C,a,y.action||x,{preventScrollReset:y.preventScrollReset,formData:E,body:U,formMethod:y.method||k,formEncType:y.encType||S,flushSync:y.flushSync})}else await t.navigate(y.action||x,{preventScrollReset:y.preventScrollReset,formData:E,body:U,formMethod:y.method||k,formEncType:y.encType||S,replace:y.replace,state:y.state,fromRouteId:a,flushSync:y.flushSync,viewTransition:y.viewTransition})},[t,i,a])}function useFormAction(t,{relative:i}={}){let{basename:a}=reactExports.useContext(NavigationContext),n=reactExports.useContext(RouteContext);invariant(n,"useFormAction must be used inside a RouteContext");let[y]=n.matches.slice(-1),x={...useResolvedPath(t||".",{relative:i})},k=useLocation();if(t==null){x.search=k.search;let S=new URLSearchParams(x.search),E=S.getAll("index");if(E.some(C=>C==="")){S.delete("index"),E.filter(B=>B).forEach(B=>S.append("index",B));let C=S.toString();x.search=C?`?${C}`:""}}return(!t||t===".")&&y.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(x.pathname=x.pathname==="/"?a:joinPaths([a,x.pathname])),createPath(x)}function useViewTransitionState(t,{relative:i}={}){let a=reactExports.useContext(ViewTransitionContext);invariant(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=useDataRouterContext3("useViewTransitionState"),y=useResolvedPath(t,{relative:i});if(!a.isTransitioning)return!1;let x=stripBasename(a.currentLocation.pathname,n)||a.currentLocation.pathname,k=stripBasename(a.nextLocation.pathname,n)||a.nextLocation.pathname;return matchPath(y.pathname,k)!=null||matchPath(y.pathname,x)!=null}var reactDomExports=requireReactDom();const PanelGroupContext=reactExports.createContext(null);PanelGroupContext.displayName="PanelGroupContext";const DATA_ATTRIBUTES={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},PRECISION=10,useIsomorphicLayoutEffect=reactExports.useLayoutEffect,useId=React$1.useId,wrappedUseId=typeof useId=="function"?useId:()=>null;let counter=0;function useUniqueId(t=null){const i=wrappedUseId(),a=reactExports.useRef(t||i||null);return a.current===null&&(a.current=""+counter++),t??a.current}function PanelWithForwardedRef({children:t,className:i="",collapsedSize:a,collapsible:n,defaultSize:y,forwardedRef:x,id:k,maxSize:S,minSize:E,onCollapse:U,onExpand:C,onResize:B,order:W,style:Y,tagName:Z="div",...T}){const l=reactExports.useContext(PanelGroupContext);if(l===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:f,expandPanel:D,getPanelSize:I,getPanelStyle:V,groupId:K,isPanelCollapsed:A,reevaluatePanelConstraints:L,registerPanel:G,resizePanel:ee,unregisterPanel:ae}=l,Se=useUniqueId(k),$e=reactExports.useRef({callbacks:{onCollapse:U,onExpand:C,onResize:B},constraints:{collapsedSize:a,collapsible:n,defaultSize:y,maxSize:S,minSize:E},id:Se,idIsFromProps:k!==void 0,order:W});reactExports.useRef({didLogMissingDefaultSizeWarning:!1}),useIsomorphicLayoutEffect(()=>{const{callbacks:Pe,constraints:Ve}=$e.current,Ie={...Ve};$e.current.id=Se,$e.current.idIsFromProps=k!==void 0,$e.current.order=W,Pe.onCollapse=U,Pe.onExpand=C,Pe.onResize=B,Ve.collapsedSize=a,Ve.collapsible=n,Ve.defaultSize=y,Ve.maxSize=S,Ve.minSize=E,(Ie.collapsedSize!==Ve.collapsedSize||Ie.collapsible!==Ve.collapsible||Ie.maxSize!==Ve.maxSize||Ie.minSize!==Ve.minSize)&&L($e.current,Ie)}),useIsomorphicLayoutEffect(()=>{const Pe=$e.current;return G(Pe),()=>{ae(Pe)}},[W,Se,G,ae]),reactExports.useImperativeHandle(x,()=>({collapse:()=>{f($e.current)},expand:Pe=>{D($e.current,Pe)},getId(){return Se},getSize(){return I($e.current)},isCollapsed(){return A($e.current)},isExpanded(){return!A($e.current)},resize:Pe=>{ee($e.current,Pe)}}),[f,D,I,A,Se,ee]);const qe=V($e.current,y);return reactExports.createElement(Z,{...T,children:t,className:i,id:Se,style:{...qe,...Y},[DATA_ATTRIBUTES.groupId]:K,[DATA_ATTRIBUTES.panel]:"",[DATA_ATTRIBUTES.panelCollapsible]:n||void 0,[DATA_ATTRIBUTES.panelId]:Se,[DATA_ATTRIBUTES.panelSize]:parseFloat(""+qe.flexGrow).toFixed(1)})}const Panel$1=reactExports.forwardRef((t,i)=>reactExports.createElement(PanelWithForwardedRef,{...t,forwardedRef:i}));PanelWithForwardedRef.displayName="Panel";Panel$1.displayName="forwardRef(Panel)";let currentCursorStyle=null,prevRuleIndex=-1,styleElement=null;function getCursorStyle(t,i,a){const n=(i&EXCEEDED_HORIZONTAL_MIN)!==0,y=(i&EXCEEDED_HORIZONTAL_MAX)!==0,x=(i&EXCEEDED_VERTICAL_MIN)!==0,k=(i&EXCEEDED_VERTICAL_MAX)!==0;if(i){if(n)return x?"se-resize":k?"ne-resize":"e-resize";if(y)return x?"sw-resize":k?"nw-resize":"w-resize";if(x)return"s-resize";if(k)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function resetGlobalCursorStyle(){styleElement!==null&&(document.head.removeChild(styleElement),currentCursorStyle=null,styleElement=null,prevRuleIndex=-1)}function setGlobalCursorStyle(t,i,a){var n,y;const x=getCursorStyle(t,i);if(currentCursorStyle!==x){if(currentCursorStyle=x,styleElement===null&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),prevRuleIndex>=0){var k;(k=styleElement.sheet)===null||k===void 0||k.removeRule(prevRuleIndex)}prevRuleIndex=(n=(y=styleElement.sheet)===null||y===void 0?void 0:y.insertRule(`*{cursor: ${x} !important;}`))!==null&&n!==void 0?n:-1}}function isKeyDown(t){return t.type==="keydown"}function isPointerEvent(t){return t.type.startsWith("pointer")}function isMouseEvent$1(t){return t.type.startsWith("mouse")}function getResizeEventCoordinates(t){if(isPointerEvent(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(isMouseEvent$1(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function getInputType(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function intersects(t,i,a){return t.x<i.x+i.width&&t.x+t.width>i.x&&t.y<i.y+i.height&&t.y+t.height>i.y}function compare(t,i){if(t===i)throw new Error("Cannot compare node with itself");const a={a:get_ancestors(t),b:get_ancestors(i)};let n;for(;a.a.at(-1)===a.b.at(-1);)t=a.a.pop(),i=a.b.pop(),n=t;assert(n,"Stacking order can only be calculated for elements with a common ancestor");const y={a:get_z_index(find_stacking_context(a.a)),b:get_z_index(find_stacking_context(a.b))};if(y.a===y.b){const x=n.childNodes,k={a:a.a.at(-1),b:a.b.at(-1)};let S=x.length;for(;S--;){const E=x[S];if(E===k.a)return 1;if(E===k.b)return-1}}return Math.sign(y.a-y.b)}const props=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function is_flex_item(t){var i;const a=getComputedStyle((i=get_parent(t))!==null&&i!==void 0?i:t).display;return a==="flex"||a==="inline-flex"}function creates_stacking_context(t){const i=getComputedStyle(t);return!!(i.position==="fixed"||i.zIndex!=="auto"&&(i.position!=="static"||is_flex_item(t))||+i.opacity<1||"transform"in i&&i.transform!=="none"||"webkitTransform"in i&&i.webkitTransform!=="none"||"mixBlendMode"in i&&i.mixBlendMode!=="normal"||"filter"in i&&i.filter!=="none"||"webkitFilter"in i&&i.webkitFilter!=="none"||"isolation"in i&&i.isolation==="isolate"||props.test(i.willChange)||i.webkitOverflowScrolling==="touch")}function find_stacking_context(t){let i=t.length;for(;i--;){const a=t[i];if(assert(a,"Missing node"),creates_stacking_context(a))return a}return null}function get_z_index(t){return t&&Number(getComputedStyle(t).zIndex)||0}function get_ancestors(t){const i=[];for(;t;)i.push(t),t=get_parent(t);return i}function get_parent(t){const{parentNode:i}=t;return i&&i instanceof ShadowRoot?i.host:i}const EXCEEDED_HORIZONTAL_MIN=1,EXCEEDED_HORIZONTAL_MAX=2,EXCEEDED_VERTICAL_MIN=4,EXCEEDED_VERTICAL_MAX=8,isCoarsePointer=getInputType()==="coarse";let intersectingHandles=[],isPointerDown=!1,ownerDocumentCounts=new Map,panelConstraintFlags=new Map;const registeredResizeHandlers=new Set;function registerResizeHandle(t,i,a,n,y){var x;const{ownerDocument:k}=i,S={direction:a,element:i,hitAreaMargins:n,setResizeHandlerState:y},E=(x=ownerDocumentCounts.get(k))!==null&&x!==void 0?x:0;return ownerDocumentCounts.set(k,E+1),registeredResizeHandlers.add(S),updateListeners(),function(){var C;panelConstraintFlags.delete(t),registeredResizeHandlers.delete(S);const B=(C=ownerDocumentCounts.get(k))!==null&&C!==void 0?C:1;if(ownerDocumentCounts.set(k,B-1),updateListeners(),B===1&&ownerDocumentCounts.delete(k),intersectingHandles.includes(S)){const W=intersectingHandles.indexOf(S);W>=0&&intersectingHandles.splice(W,1),updateCursor(),y("up",!0,null)}}}function handlePointerDown$1(t){const{target:i}=t,{x:a,y:n}=getResizeEventCoordinates(t);isPointerDown=!0,recalculateIntersectingHandles({target:i,x:a,y:n}),updateListeners(),intersectingHandles.length>0&&(updateResizeHandlerStates("down",t),updateCursor(),t.preventDefault(),isWithinResizeHandle(i)||t.stopImmediatePropagation())}function handlePointerMove(t){const{x:i,y:a}=getResizeEventCoordinates(t);if(isPointerDown&&t.type!=="pointerleave"&&t.buttons===0&&(isPointerDown=!1,updateResizeHandlerStates("up",t)),!isPointerDown){const{target:n}=t;recalculateIntersectingHandles({target:n,x:i,y:a})}updateResizeHandlerStates("move",t),updateCursor(),intersectingHandles.length>0&&t.preventDefault()}function handlePointerUp(t){const{target:i}=t,{x:a,y:n}=getResizeEventCoordinates(t);panelConstraintFlags.clear(),isPointerDown=!1,intersectingHandles.length>0&&(t.preventDefault(),isWithinResizeHandle(i)||t.stopImmediatePropagation()),updateResizeHandlerStates("up",t),recalculateIntersectingHandles({target:i,x:a,y:n}),updateCursor(),updateListeners()}function isWithinResizeHandle(t){let i=t;for(;i;){if(i.hasAttribute(DATA_ATTRIBUTES.resizeHandle))return!0;i=i.parentElement}return!1}function recalculateIntersectingHandles({target:t,x:i,y:a}){intersectingHandles.splice(0);let n=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(n=t),registeredResizeHandlers.forEach(y=>{const{element:x,hitAreaMargins:k}=y,S=x.getBoundingClientRect(),{bottom:E,left:U,right:C,top:B}=S,W=isCoarsePointer?k.coarse:k.fine;if(i>=U-W&&i<=C+W&&a>=B-W&&a<=E+W){if(n!==null&&document.contains(n)&&x!==n&&!x.contains(n)&&!n.contains(x)&&compare(n,x)>0){let Z=n,T=!1;for(;Z&&!Z.contains(x);){if(intersects(Z.getBoundingClientRect(),S)){T=!0;break}Z=Z.parentElement}if(T)return}intersectingHandles.push(y)}})}function reportConstraintsViolation(t,i){panelConstraintFlags.set(t,i)}function updateCursor(){let t=!1,i=!1;intersectingHandles.forEach(n=>{const{direction:y}=n;y==="horizontal"?t=!0:i=!0});let a=0;panelConstraintFlags.forEach(n=>{a|=n}),t&&i?setGlobalCursorStyle("intersection",a):t?setGlobalCursorStyle("horizontal",a):i?setGlobalCursorStyle("vertical",a):resetGlobalCursorStyle()}let listenersAbortController;function updateListeners(){var t;(t=listenersAbortController)===null||t===void 0||t.abort(),listenersAbortController=new AbortController;const i={capture:!0,signal:listenersAbortController.signal};registeredResizeHandlers.size&&(isPointerDown?(intersectingHandles.length>0&&ownerDocumentCounts.forEach((a,n)=>{const{body:y}=n;a>0&&(y.addEventListener("contextmenu",handlePointerUp,i),y.addEventListener("pointerleave",handlePointerMove,i),y.addEventListener("pointermove",handlePointerMove,i))}),ownerDocumentCounts.forEach((a,n)=>{const{body:y}=n;y.addEventListener("pointerup",handlePointerUp,i),y.addEventListener("pointercancel",handlePointerUp,i)})):ownerDocumentCounts.forEach((a,n)=>{const{body:y}=n;a>0&&(y.addEventListener("pointerdown",handlePointerDown$1,i),y.addEventListener("pointermove",handlePointerMove,i))}))}function updateResizeHandlerStates(t,i){registeredResizeHandlers.forEach(a=>{const{setResizeHandlerState:n}=a,y=intersectingHandles.includes(a);n(t,y,i)})}function useForceUpdate(){const[t,i]=reactExports.useState(0);return reactExports.useCallback(()=>i(a=>a+1),[])}function assert(t,i){if(!t)throw console.error(i),Error(i)}function fuzzyCompareNumbers(t,i,a=PRECISION){return t.toFixed(a)===i.toFixed(a)?0:t>i?1:-1}function fuzzyNumbersEqual$1(t,i,a=PRECISION){return fuzzyCompareNumbers(t,i,a)===0}function fuzzyNumbersEqual(t,i,a){return fuzzyCompareNumbers(t,i,a)===0}function fuzzyLayoutsEqual(t,i,a){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){const y=t[n],x=i[n];if(!fuzzyNumbersEqual(y,x,a))return!1}return!0}function resizePanel({panelConstraints:t,panelIndex:i,size:a}){const n=t[i];assert(n!=null,`Panel constraints not found for index ${i}`);let{collapsedSize:y=0,collapsible:x,maxSize:k=100,minSize:S=0}=n;if(fuzzyCompareNumbers(a,S)<0)if(x){const E=(y+S)/2;fuzzyCompareNumbers(a,E)<0?a=y:a=S}else a=S;return a=Math.min(k,a),a=parseFloat(a.toFixed(PRECISION)),a}function adjustLayoutByDelta({delta:t,initialLayout:i,panelConstraints:a,pivotIndices:n,prevLayout:y,trigger:x}){if(fuzzyNumbersEqual(t,0))return i;const k=[...i],[S,E]=n;assert(S!=null,"Invalid first pivot index"),assert(E!=null,"Invalid second pivot index");let U=0;if(x==="keyboard"){{const B=t<0?E:S,W=a[B];assert(W,`Panel constraints not found for index ${B}`);const{collapsedSize:Y=0,collapsible:Z,minSize:T=0}=W;if(Z){const l=i[B];if(assert(l!=null,`Previous layout not found for panel index ${B}`),fuzzyNumbersEqual(l,Y)){const f=T-l;fuzzyCompareNumbers(f,Math.abs(t))>0&&(t=t<0?0-f:f)}}}{const B=t<0?S:E,W=a[B];assert(W,`No panel constraints found for index ${B}`);const{collapsedSize:Y=0,collapsible:Z,minSize:T=0}=W;if(Z){const l=i[B];if(assert(l!=null,`Previous layout not found for panel index ${B}`),fuzzyNumbersEqual(l,T)){const f=l-Y;fuzzyCompareNumbers(f,Math.abs(t))>0&&(t=t<0?0-f:f)}}}}{const B=t<0?1:-1;let W=t<0?E:S,Y=0;for(;;){const T=i[W];assert(T!=null,`Previous layout not found for panel index ${W}`);const f=resizePanel({panelConstraints:a,panelIndex:W,size:100})-T;if(Y+=f,W+=B,W<0||W>=a.length)break}const Z=Math.min(Math.abs(t),Math.abs(Y));t=t<0?0-Z:Z}{let W=t<0?S:E;for(;W>=0&&W<a.length;){const Y=Math.abs(t)-Math.abs(U),Z=i[W];assert(Z!=null,`Previous layout not found for panel index ${W}`);const T=Z-Y,l=resizePanel({panelConstraints:a,panelIndex:W,size:T});if(!fuzzyNumbersEqual(Z,l)&&(U+=Z-l,k[W]=l,U.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?W--:W++}}if(fuzzyLayoutsEqual(y,k))return y;{const B=t<0?E:S,W=i[B];assert(W!=null,`Previous layout not found for panel index ${B}`);const Y=W+U,Z=resizePanel({panelConstraints:a,panelIndex:B,size:Y});if(k[B]=Z,!fuzzyNumbersEqual(Z,Y)){let T=Y-Z,f=t<0?E:S;for(;f>=0&&f<a.length;){const D=k[f];assert(D!=null,`Previous layout not found for panel index ${f}`);const I=D+T,V=resizePanel({panelConstraints:a,panelIndex:f,size:I});if(fuzzyNumbersEqual(D,V)||(T-=V-D,k[f]=V),fuzzyNumbersEqual(T,0))break;t>0?f--:f++}}}const C=k.reduce((B,W)=>W+B,0);return fuzzyNumbersEqual(C,100)?k:y}function calculateAriaValues({layout:t,panelsArray:i,pivotIndices:a}){let n=0,y=100,x=0,k=0;const S=a[0];assert(S!=null,"No pivot index found"),i.forEach((B,W)=>{const{constraints:Y}=B,{maxSize:Z=100,minSize:T=0}=Y;W===S?(n=T,y=Z):(x+=T,k+=Z)});const E=Math.min(y,100-x),U=Math.max(n,100-k),C=t[S];return{valueMax:E,valueMin:U,valueNow:C}}function getResizeHandleElementsForGroup(t,i=document){return Array.from(i.querySelectorAll(`[${DATA_ATTRIBUTES.resizeHandleId}][data-panel-group-id="${t}"]`))}function getResizeHandleElementIndex(t,i,a=document){const y=getResizeHandleElementsForGroup(t,a).findIndex(x=>x.getAttribute(DATA_ATTRIBUTES.resizeHandleId)===i);return y??null}function determinePivotIndices(t,i,a){const n=getResizeHandleElementIndex(t,i,a);return n!=null?[n,n+1]:[-1,-1]}function isHTMLElement(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function getPanelGroupElement(t,i=document){if(isHTMLElement(i)&&i.dataset.panelGroupId==t)return i;const a=i.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return a||null}function getResizeHandleElement(t,i=document){const a=i.querySelector(`[${DATA_ATTRIBUTES.resizeHandleId}="${t}"]`);return a||null}function getResizeHandlePanelIds(t,i,a,n=document){var y,x,k,S;const E=getResizeHandleElement(i,n),U=getResizeHandleElementsForGroup(t,n),C=E?U.indexOf(E):-1,B=(y=(x=a[C])===null||x===void 0?void 0:x.id)!==null&&y!==void 0?y:null,W=(k=(S=a[C+1])===null||S===void 0?void 0:S.id)!==null&&k!==void 0?k:null;return[B,W]}function useWindowSplitterPanelGroupBehavior({committedValuesRef:t,eagerValuesRef:i,groupId:a,layout:n,panelDataArray:y,panelGroupElement:x,setLayout:k}){reactExports.useRef({didWarnAboutMissingResizeHandle:!1}),useIsomorphicLayoutEffect(()=>{if(!x)return;const S=getResizeHandleElementsForGroup(a,x);for(let E=0;E<y.length-1;E++){const{valueMax:U,valueMin:C,valueNow:B}=calculateAriaValues({layout:n,panelsArray:y,pivotIndices:[E,E+1]}),W=S[E];if(W!=null){const Y=y[E];assert(Y,`No panel data found for index "${E}"`),W.setAttribute("aria-controls",Y.id),W.setAttribute("aria-valuemax",""+Math.round(U)),W.setAttribute("aria-valuemin",""+Math.round(C)),W.setAttribute("aria-valuenow",B!=null?""+Math.round(B):"")}}return()=>{S.forEach((E,U)=>{E.removeAttribute("aria-controls"),E.removeAttribute("aria-valuemax"),E.removeAttribute("aria-valuemin"),E.removeAttribute("aria-valuenow")})}},[a,n,y,x]),reactExports.useEffect(()=>{if(!x)return;const S=i.current;assert(S,"Eager values not found");const{panelDataArray:E}=S,U=getPanelGroupElement(a,x);assert(U!=null,`No group found for id "${a}"`);const C=getResizeHandleElementsForGroup(a,x);assert(C,`No resize handles found for group id "${a}"`);const B=C.map(W=>{const Y=W.getAttribute(DATA_ATTRIBUTES.resizeHandleId);assert(Y,"Resize handle element has no handle id attribute");const[Z,T]=getResizeHandlePanelIds(a,Y,E,x);if(Z==null||T==null)return()=>{};const l=f=>{if(!f.defaultPrevented)switch(f.key){case"Enter":{f.preventDefault();const D=E.findIndex(I=>I.id===Z);if(D>=0){const I=E[D];assert(I,`No panel data found for index ${D}`);const V=n[D],{collapsedSize:K=0,collapsible:A,minSize:L=0}=I.constraints;if(V!=null&&A){const G=adjustLayoutByDelta({delta:fuzzyNumbersEqual(V,K)?L-K:K-V,initialLayout:n,panelConstraints:E.map(ee=>ee.constraints),pivotIndices:determinePivotIndices(a,Y,x),prevLayout:n,trigger:"keyboard"});n!==G&&k(G)}}break}}};return W.addEventListener("keydown",l),()=>{W.removeEventListener("keydown",l)}});return()=>{B.forEach(W=>W())}},[x,t,i,a,n,y,k])}function areEqual$1(t,i){if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==i[a])return!1;return!0}function getResizeEventCursorPosition(t,i){const a=t==="horizontal",{x:n,y}=getResizeEventCoordinates(i);return a?n:y}function calculateDragOffsetPercentage(t,i,a,n,y){const x=a==="horizontal",k=getResizeHandleElement(i,y);assert(k,`No resize handle element found for id "${i}"`);const S=k.getAttribute(DATA_ATTRIBUTES.groupId);assert(S,"Resize handle element has no group id attribute");let{initialCursorPosition:E}=n;const U=getResizeEventCursorPosition(a,t),C=getPanelGroupElement(S,y);assert(C,`No group element found for id "${S}"`);const B=C.getBoundingClientRect(),W=x?B.width:B.height;return(U-E)/W*100}function calculateDeltaPercentage(t,i,a,n,y,x){if(isKeyDown(t)){const k=a==="horizontal";let S=0;t.shiftKey?S=100:y!=null?S=y:S=10;let E=0;switch(t.key){case"ArrowDown":E=k?0:S;break;case"ArrowLeft":E=k?-S:0;break;case"ArrowRight":E=k?S:0;break;case"ArrowUp":E=k?0:-S;break;case"End":E=100;break;case"Home":E=-100;break}return E}else return n==null?0:calculateDragOffsetPercentage(t,i,a,n,x)}function calculateUnsafeDefaultLayout({panelDataArray:t}){const i=Array(t.length),a=t.map(x=>x.constraints);let n=0,y=100;for(let x=0;x<t.length;x++){const k=a[x];assert(k,`Panel constraints not found for index ${x}`);const{defaultSize:S}=k;S!=null&&(n++,i[x]=S,y-=S)}for(let x=0;x<t.length;x++){const k=a[x];assert(k,`Panel constraints not found for index ${x}`);const{defaultSize:S}=k;if(S!=null)continue;const E=t.length-n,U=y/E;n++,i[x]=U,y-=U}return i}function callPanelCallbacks(t,i,a){i.forEach((n,y)=>{const x=t[y];assert(x,`Panel data not found for index ${y}`);const{callbacks:k,constraints:S,id:E}=x,{collapsedSize:U=0,collapsible:C}=S,B=a[E];if(B==null||n!==B){a[E]=n;const{onCollapse:W,onExpand:Y,onResize:Z}=k;Z&&Z(n,B),C&&(W||Y)&&(Y&&(B==null||fuzzyNumbersEqual$1(B,U))&&!fuzzyNumbersEqual$1(n,U)&&Y(),W&&(B==null||!fuzzyNumbersEqual$1(B,U))&&fuzzyNumbersEqual$1(n,U)&&W())}})}function compareLayouts(t,i){if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!=i[a])return!1;return!0}function computePanelFlexBoxStyle({defaultSize:t,dragState:i,layout:a,panelData:n,panelIndex:y,precision:x=3}){const k=a[y];let S;return k==null?S=t!=null?t.toFixed(x):"1":n.length===1?S="1":S=k.toFixed(x),{flexBasis:0,flexGrow:S,flexShrink:1,overflow:"hidden",pointerEvents:i!==null?"none":void 0}}function debounce(t,i=10){let a=null;return(...y)=>{a!==null&&clearTimeout(a),a=setTimeout(()=>{t(...y)},i)}}function initializeDefaultStorage(t){try{if(typeof localStorage<"u")t.getItem=i=>localStorage.getItem(i),t.setItem=(i,a)=>{localStorage.setItem(i,a)};else throw new Error("localStorage not supported in this environment")}catch(i){console.error(i),t.getItem=()=>null,t.setItem=()=>{}}}function getPanelGroupKey(t){return`react-resizable-panels:${t}`}function getPanelKey(t){return t.map(i=>{const{constraints:a,id:n,idIsFromProps:y,order:x}=i;return y?n:x?`${x}:${JSON.stringify(a)}`:JSON.stringify(a)}).sort((i,a)=>i.localeCompare(a)).join(",")}function loadSerializedPanelGroupState(t,i){try{const a=getPanelGroupKey(t),n=i.getItem(a);if(n){const y=JSON.parse(n);if(typeof y=="object"&&y!=null)return y}}catch{}return null}function loadPanelGroupState(t,i,a){var n,y;const x=(n=loadSerializedPanelGroupState(t,a))!==null&&n!==void 0?n:{},k=getPanelKey(i);return(y=x[k])!==null&&y!==void 0?y:null}function savePanelGroupState(t,i,a,n,y){var x;const k=getPanelGroupKey(t),S=getPanelKey(i),E=(x=loadSerializedPanelGroupState(t,y))!==null&&x!==void 0?x:{};E[S]={expandToSizes:Object.fromEntries(a.entries()),layout:n};try{y.setItem(k,JSON.stringify(E))}catch(U){console.error(U)}}function validatePanelGroupLayout({layout:t,panelConstraints:i}){const a=[...t],n=a.reduce((x,k)=>x+k,0);if(a.length!==i.length)throw Error(`Invalid ${i.length} panel layout: ${a.map(x=>`${x}%`).join(", ")}`);if(!fuzzyNumbersEqual(n,100)&&a.length>0)for(let x=0;x<i.length;x++){const k=a[x];assert(k!=null,`No layout data found for index ${x}`);const S=100/n*k;a[x]=S}let y=0;for(let x=0;x<i.length;x++){const k=a[x];assert(k!=null,`No layout data found for index ${x}`);const S=resizePanel({panelConstraints:i,panelIndex:x,size:k});k!=S&&(y+=k-S,a[x]=S)}if(!fuzzyNumbersEqual(y,0))for(let x=0;x<i.length;x++){const k=a[x];assert(k!=null,`No layout data found for index ${x}`);const S=k+y,E=resizePanel({panelConstraints:i,panelIndex:x,size:S});if(k!==E&&(y-=E-k,a[x]=E,fuzzyNumbersEqual(y,0)))break}return a}const LOCAL_STORAGE_DEBOUNCE_INTERVAL=100,defaultStorage={getItem:t=>(initializeDefaultStorage(defaultStorage),defaultStorage.getItem(t)),setItem:(t,i)=>{initializeDefaultStorage(defaultStorage),defaultStorage.setItem(t,i)}},debounceMap={};function PanelGroupWithForwardedRef({autoSaveId:t=null,children:i,className:a="",direction:n,forwardedRef:y,id:x=null,onLayout:k=null,keyboardResizeBy:S=null,storage:E=defaultStorage,style:U,tagName:C="div",...B}){const W=useUniqueId(x),Y=reactExports.useRef(null),[Z,T]=reactExports.useState(null),[l,f]=reactExports.useState([]),D=useForceUpdate(),I=reactExports.useRef({}),V=reactExports.useRef(new Map),K=reactExports.useRef(0),A=reactExports.useRef({autoSaveId:t,direction:n,dragState:Z,id:W,keyboardResizeBy:S,onLayout:k,storage:E}),L=reactExports.useRef({layout:l,panelDataArray:[],panelDataArrayChanged:!1});reactExports.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),reactExports.useImperativeHandle(y,()=>({getId:()=>A.current.id,getLayout:()=>{const{layout:bt}=L.current;return bt},setLayout:bt=>{const{onLayout:At}=A.current,{layout:Vt,panelDataArray:Yt}=L.current,er=validatePanelGroupLayout({layout:bt,panelConstraints:Yt.map(lr=>lr.constraints)});areEqual$1(Vt,er)||(f(er),L.current.layout=er,At&&At(er),callPanelCallbacks(Yt,er,I.current))}}),[]),useIsomorphicLayoutEffect(()=>{A.current.autoSaveId=t,A.current.direction=n,A.current.dragState=Z,A.current.id=W,A.current.onLayout=k,A.current.storage=E}),useWindowSplitterPanelGroupBehavior({committedValuesRef:A,eagerValuesRef:L,groupId:W,layout:l,panelDataArray:L.current.panelDataArray,setLayout:f,panelGroupElement:Y.current}),reactExports.useEffect(()=>{const{panelDataArray:bt}=L.current;if(t){if(l.length===0||l.length!==bt.length)return;let At=debounceMap[t];At==null&&(At=debounce(savePanelGroupState,LOCAL_STORAGE_DEBOUNCE_INTERVAL),debounceMap[t]=At);const Vt=[...bt],Yt=new Map(V.current);At(t,Vt,Yt,l,E)}},[t,l,E]),reactExports.useEffect(()=>{});const G=reactExports.useCallback(bt=>{const{onLayout:At}=A.current,{layout:Vt,panelDataArray:Yt}=L.current;if(bt.constraints.collapsible){const er=Yt.map(ia=>ia.constraints),{collapsedSize:lr=0,panelSize:yr,pivotIndices:$r}=panelDataHelper(Yt,bt,Vt);if(assert(yr!=null,`Panel size not found for panel "${bt.id}"`),!fuzzyNumbersEqual$1(yr,lr)){V.current.set(bt.id,yr);const Sa=findPanelDataIndex(Yt,bt)===Yt.length-1?yr-lr:lr-yr,Xr=adjustLayoutByDelta({delta:Sa,initialLayout:Vt,panelConstraints:er,pivotIndices:$r,prevLayout:Vt,trigger:"imperative-api"});compareLayouts(Vt,Xr)||(f(Xr),L.current.layout=Xr,At&&At(Xr),callPanelCallbacks(Yt,Xr,I.current))}}},[]),ee=reactExports.useCallback((bt,At)=>{const{onLayout:Vt}=A.current,{layout:Yt,panelDataArray:er}=L.current;if(bt.constraints.collapsible){const lr=er.map(fr=>fr.constraints),{collapsedSize:yr=0,panelSize:$r=0,minSize:ia=0,pivotIndices:Sa}=panelDataHelper(er,bt,Yt),Xr=At??ia;if(fuzzyNumbersEqual$1($r,yr)){const fr=V.current.get(bt.id),Hr=fr!=null&&fr>=Xr?fr:Xr,Ta=findPanelDataIndex(er,bt)===er.length-1?$r-Hr:Hr-$r,ua=adjustLayoutByDelta({delta:Ta,initialLayout:Yt,panelConstraints:lr,pivotIndices:Sa,prevLayout:Yt,trigger:"imperative-api"});compareLayouts(Yt,ua)||(f(ua),L.current.layout=ua,Vt&&Vt(ua),callPanelCallbacks(er,ua,I.current))}}},[]),ae=reactExports.useCallback(bt=>{const{layout:At,panelDataArray:Vt}=L.current,{panelSize:Yt}=panelDataHelper(Vt,bt,At);return assert(Yt!=null,`Panel size not found for panel "${bt.id}"`),Yt},[]),Se=reactExports.useCallback((bt,At)=>{const{panelDataArray:Vt}=L.current,Yt=findPanelDataIndex(Vt,bt);return computePanelFlexBoxStyle({defaultSize:At,dragState:Z,layout:l,panelData:Vt,panelIndex:Yt})},[Z,l]),$e=reactExports.useCallback(bt=>{const{layout:At,panelDataArray:Vt}=L.current,{collapsedSize:Yt=0,collapsible:er,panelSize:lr}=panelDataHelper(Vt,bt,At);return assert(lr!=null,`Panel size not found for panel "${bt.id}"`),er===!0&&fuzzyNumbersEqual$1(lr,Yt)},[]),qe=reactExports.useCallback(bt=>{const{layout:At,panelDataArray:Vt}=L.current,{collapsedSize:Yt=0,collapsible:er,panelSize:lr}=panelDataHelper(Vt,bt,At);return assert(lr!=null,`Panel size not found for panel "${bt.id}"`),!er||fuzzyCompareNumbers(lr,Yt)>0},[]),Pe=reactExports.useCallback(bt=>{const{panelDataArray:At}=L.current;At.push(bt),At.sort((Vt,Yt)=>{const er=Vt.order,lr=Yt.order;return er==null&&lr==null?0:er==null?-1:lr==null?1:er-lr}),L.current.panelDataArrayChanged=!0,D()},[D]);useIsomorphicLayoutEffect(()=>{if(L.current.panelDataArrayChanged){L.current.panelDataArrayChanged=!1;const{autoSaveId:bt,onLayout:At,storage:Vt}=A.current,{layout:Yt,panelDataArray:er}=L.current;let lr=null;if(bt){const $r=loadPanelGroupState(bt,er,Vt);$r&&(V.current=new Map(Object.entries($r.expandToSizes)),lr=$r.layout)}lr==null&&(lr=calculateUnsafeDefaultLayout({panelDataArray:er}));const yr=validatePanelGroupLayout({layout:lr,panelConstraints:er.map($r=>$r.constraints)});areEqual$1(Yt,yr)||(f(yr),L.current.layout=yr,At&&At(yr),callPanelCallbacks(er,yr,I.current))}}),useIsomorphicLayoutEffect(()=>{const bt=L.current;return()=>{bt.layout=[]}},[]);const Ve=reactExports.useCallback(bt=>{let At=!1;const Vt=Y.current;return Vt&&window.getComputedStyle(Vt,null).getPropertyValue("direction")==="rtl"&&(At=!0),function(er){er.preventDefault();const lr=Y.current;if(!lr)return()=>null;const{direction:yr,dragState:$r,id:ia,keyboardResizeBy:Sa,onLayout:Xr}=A.current,{layout:fr,panelDataArray:Hr}=L.current,{initialLayout:ya}=$r??{},Ta=determinePivotIndices(ia,bt,lr);let ua=calculateDeltaPercentage(er,bt,yr,$r,Sa,lr);const Ua=yr==="horizontal";Ua&&At&&(ua=-ua);const Ya=Hr.map(Ra=>Ra.constraints),Ia=adjustLayoutByDelta({delta:ua,initialLayout:ya??fr,panelConstraints:Ya,pivotIndices:Ta,prevLayout:fr,trigger:isKeyDown(er)?"keyboard":"mouse-or-touch"}),Na=!compareLayouts(fr,Ia);(isPointerEvent(er)||isMouseEvent$1(er))&&K.current!=ua&&(K.current=ua,!Na&&ua!==0?Ua?reportConstraintsViolation(bt,ua<0?EXCEEDED_HORIZONTAL_MIN:EXCEEDED_HORIZONTAL_MAX):reportConstraintsViolation(bt,ua<0?EXCEEDED_VERTICAL_MIN:EXCEEDED_VERTICAL_MAX):reportConstraintsViolation(bt,0)),Na&&(f(Ia),L.current.layout=Ia,Xr&&Xr(Ia),callPanelCallbacks(Hr,Ia,I.current))}},[]),Ie=reactExports.useCallback((bt,At)=>{const{onLayout:Vt}=A.current,{layout:Yt,panelDataArray:er}=L.current,lr=er.map(fr=>fr.constraints),{panelSize:yr,pivotIndices:$r}=panelDataHelper(er,bt,Yt);assert(yr!=null,`Panel size not found for panel "${bt.id}"`);const Sa=findPanelDataIndex(er,bt)===er.length-1?yr-At:At-yr,Xr=adjustLayoutByDelta({delta:Sa,initialLayout:Yt,panelConstraints:lr,pivotIndices:$r,prevLayout:Yt,trigger:"imperative-api"});compareLayouts(Yt,Xr)||(f(Xr),L.current.layout=Xr,Vt&&Vt(Xr),callPanelCallbacks(er,Xr,I.current))},[]),Xe=reactExports.useCallback((bt,At)=>{const{layout:Vt,panelDataArray:Yt}=L.current,{collapsedSize:er=0,collapsible:lr}=At,{collapsedSize:yr=0,collapsible:$r,maxSize:ia=100,minSize:Sa=0}=bt.constraints,{panelSize:Xr}=panelDataHelper(Yt,bt,Vt);Xr!=null&&(lr&&$r&&fuzzyNumbersEqual$1(Xr,er)?fuzzyNumbersEqual$1(er,yr)||Ie(bt,yr):Xr<Sa?Ie(bt,Sa):Xr>ia&&Ie(bt,ia))},[Ie]),et=reactExports.useCallback((bt,At)=>{const{direction:Vt}=A.current,{layout:Yt}=L.current;if(!Y.current)return;const er=getResizeHandleElement(bt,Y.current);assert(er,`Drag handle element not found for id "${bt}"`);const lr=getResizeEventCursorPosition(Vt,At);T({dragHandleId:bt,dragHandleRect:er.getBoundingClientRect(),initialCursorPosition:lr,initialLayout:Yt})},[]),tt=reactExports.useCallback(()=>{T(null)},[]),rt=reactExports.useCallback(bt=>{const{panelDataArray:At}=L.current,Vt=findPanelDataIndex(At,bt);Vt>=0&&(At.splice(Vt,1),delete I.current[bt.id],L.current.panelDataArrayChanged=!0,D())},[D]),ze=reactExports.useMemo(()=>({collapsePanel:G,direction:n,dragState:Z,expandPanel:ee,getPanelSize:ae,getPanelStyle:Se,groupId:W,isPanelCollapsed:$e,isPanelExpanded:qe,reevaluatePanelConstraints:Xe,registerPanel:Pe,registerResizeHandle:Ve,resizePanel:Ie,startDragging:et,stopDragging:tt,unregisterPanel:rt,panelGroupElement:Y.current}),[G,Z,n,ee,ae,Se,W,$e,qe,Xe,Pe,Ve,Ie,et,tt,rt]),lt={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement(PanelGroupContext.Provider,{value:ze},reactExports.createElement(C,{...B,children:i,className:a,id:x,ref:Y,style:{...lt,...U},[DATA_ATTRIBUTES.group]:"",[DATA_ATTRIBUTES.groupDirection]:n,[DATA_ATTRIBUTES.groupId]:W}))}const PanelGroup=reactExports.forwardRef((t,i)=>reactExports.createElement(PanelGroupWithForwardedRef,{...t,forwardedRef:i}));PanelGroupWithForwardedRef.displayName="PanelGroup";PanelGroup.displayName="forwardRef(PanelGroup)";function findPanelDataIndex(t,i){return t.findIndex(a=>a===i||a.id===i.id)}function panelDataHelper(t,i,a){const n=findPanelDataIndex(t,i),x=n===t.length-1?[n-1,n]:[n,n+1],k=a[n];return{...i.constraints,panelSize:k,pivotIndices:x}}function useWindowSplitterResizeHandlerBehavior({disabled:t,handleId:i,resizeHandler:a,panelGroupElement:n}){reactExports.useEffect(()=>{if(t||a==null||n==null)return;const y=getResizeHandleElement(i,n);if(y==null)return;const x=k=>{if(!k.defaultPrevented)switch(k.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{k.preventDefault(),a(k);break}case"F6":{k.preventDefault();const S=y.getAttribute(DATA_ATTRIBUTES.groupId);assert(S,`No group element found for id "${S}"`);const E=getResizeHandleElementsForGroup(S,n),U=getResizeHandleElementIndex(S,i,n);assert(U!==null,`No resize element found for id "${i}"`);const C=k.shiftKey?U>0?U-1:E.length-1:U+1<E.length?U+1:0;E[C].focus();break}}};return y.addEventListener("keydown",x),()=>{y.removeEventListener("keydown",x)}},[n,t,i,a])}function PanelResizeHandle({children:t=null,className:i="",disabled:a=!1,hitAreaMargins:n,id:y,onBlur:x,onClick:k,onDragging:S,onFocus:E,onPointerDown:U,onPointerUp:C,style:B={},tabIndex:W=0,tagName:Y="div",...Z}){var T,l;const f=reactExports.useRef(null),D=reactExports.useRef({onClick:k,onDragging:S,onPointerDown:U,onPointerUp:C});reactExports.useEffect(()=>{D.current.onClick=k,D.current.onDragging=S,D.current.onPointerDown=U,D.current.onPointerUp=C});const I=reactExports.useContext(PanelGroupContext);if(I===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:V,groupId:K,registerResizeHandle:A,startDragging:L,stopDragging:G,panelGroupElement:ee}=I,ae=useUniqueId(y),[Se,$e]=reactExports.useState("inactive"),[qe,Pe]=reactExports.useState(!1),[Ve,Ie]=reactExports.useState(null),Xe=reactExports.useRef({state:Se});useIsomorphicLayoutEffect(()=>{Xe.current.state=Se}),reactExports.useEffect(()=>{if(a)Ie(null);else{const ze=A(ae);Ie(()=>ze)}},[a,ae,A]);const et=(T=n?.coarse)!==null&&T!==void 0?T:15,tt=(l=n?.fine)!==null&&l!==void 0?l:5;reactExports.useEffect(()=>{if(a||Ve==null)return;const ze=f.current;assert(ze,"Element ref not attached");let lt=!1;return registerResizeHandle(ae,ze,V,{coarse:et,fine:tt},(At,Vt,Yt)=>{if(!Vt){$e("inactive");return}switch(At){case"down":{$e("drag"),lt=!1,assert(Yt,'Expected event to be defined for "down" action'),L(ae,Yt);const{onDragging:er,onPointerDown:lr}=D.current;er?.(!0),lr?.();break}case"move":{const{state:er}=Xe.current;lt=!0,er!=="drag"&&$e("hover"),assert(Yt,'Expected event to be defined for "move" action'),Ve(Yt);break}case"up":{$e("hover"),G();const{onClick:er,onDragging:lr,onPointerUp:yr}=D.current;lr?.(!1),yr?.(),lt||er?.();break}}})},[et,V,a,tt,A,ae,Ve,L,G]),useWindowSplitterResizeHandlerBehavior({disabled:a,handleId:ae,resizeHandler:Ve,panelGroupElement:ee});const rt={touchAction:"none",userSelect:"none"};return reactExports.createElement(Y,{...Z,children:t,className:i,id:y,onBlur:()=>{Pe(!1),x?.()},onFocus:()=>{Pe(!0),E?.()},ref:f,role:"separator",style:{...rt,...B},tabIndex:W,[DATA_ATTRIBUTES.groupDirection]:V,[DATA_ATTRIBUTES.groupId]:K,[DATA_ATTRIBUTES.resizeHandle]:"",[DATA_ATTRIBUTES.resizeHandleActive]:Se==="drag"?"pointer":qe?"keyboard":void 0,[DATA_ATTRIBUTES.resizeHandleEnabled]:!a,[DATA_ATTRIBUTES.resizeHandleId]:ae,[DATA_ATTRIBUTES.resizeHandleState]:Se})}PanelResizeHandle.displayName="PanelResizeHandle";function cc(t){if(typeof t=="string"||typeof t=="number")return""+t;let i="";if(Array.isArray(t))for(let a=0,n;a<t.length;a++)(n=cc(t[a]))!==""&&(i+=(i&&" ")+n);else for(let a in t)t[a]&&(i+=(i&&" ")+a);return i}var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var t=requireReact();function i(B,W){return B===W&&(B!==0||1/B===1/W)||B!==B&&W!==W}var a=typeof Object.is=="function"?Object.is:i,n=t.useState,y=t.useEffect,x=t.useLayoutEffect,k=t.useDebugValue;function S(B,W){var Y=W(),Z=n({inst:{value:Y,getSnapshot:W}}),T=Z[0].inst,l=Z[1];return x(function(){T.value=Y,T.getSnapshot=W,E(T)&&l({inst:T})},[B,Y,W]),y(function(){return E(T)&&l({inst:T}),B(function(){E(T)&&l({inst:T})})},[B]),k(Y),Y}function E(B){var W=B.getSnapshot;B=B.value;try{var Y=W();return!a(B,Y)}catch{return!0}}function U(B,W){return W()}var C=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?U:S;return useSyncExternalStoreShim_production.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:C,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var t=requireReact(),i=requireShim();function a(U,C){return U===C&&(U!==0||1/U===1/C)||U!==U&&C!==C}var n=typeof Object.is=="function"?Object.is:a,y=i.useSyncExternalStore,x=t.useRef,k=t.useEffect,S=t.useMemo,E=t.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(U,C,B,W,Y){var Z=x(null);if(Z.current===null){var T={hasValue:!1,value:null};Z.current=T}else T=Z.current;Z=S(function(){function f(A){if(!D){if(D=!0,I=A,A=W(A),Y!==void 0&&T.hasValue){var L=T.value;if(Y(L,A))return V=L}return V=A}if(L=V,n(I,A))return L;var G=W(A);return Y!==void 0&&Y(L,G)?(I=A,L):(I=A,V=G)}var D=!1,I,V,K=B===void 0?null:B;return[function(){return f(C())},K===null?void 0:function(){return f(K())}]},[C,B,W,Y]);var l=y(U,Z[0],Z[1]);return k(function(){T.hasValue=!0,T.value=l},[l]),E(l),l},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),__vite_import_meta_env__={},createStoreImpl=t=>{let i;const a=new Set,n=(C,B)=>{const W=typeof C=="function"?C(i):C;if(!Object.is(W,i)){const Y=i;i=B??(typeof W!="object"||W===null)?W:Object.assign({},i,W),a.forEach(Z=>Z(i,Y))}},y=()=>i,E={setState:n,getState:y,getInitialState:()=>U,subscribe:C=>(a.add(C),()=>a.delete(C)),destroy:()=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},U=i=t(n,y,E);return E},createStore=t=>t?createStoreImpl(t):createStoreImpl,{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$2=t=>t;function useStoreWithEqualityFn(t,i=identity$2,a){const n=useSyncExternalStoreWithSelector(t.subscribe,t.getState,t.getServerState||t.getInitialState,i,a);return useDebugValue(n),n}const createWithEqualityFnImpl=(t,i)=>{const a=createStore(t),n=(y,x=i)=>useStoreWithEqualityFn(a,y,x);return Object.assign(n,a),n},createWithEqualityFn=(t,i)=>t?createWithEqualityFnImpl(t,i):createWithEqualityFnImpl;function shallow$1(t,i){if(Object.is(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;if(t instanceof Map&&i instanceof Map){if(t.size!==i.size)return!1;for(const[n,y]of t)if(!Object.is(y,i.get(n)))return!1;return!0}if(t instanceof Set&&i instanceof Set){if(t.size!==i.size)return!1;for(const n of t)if(!i.has(n))return!1;return!0}const a=Object.keys(t);if(a.length!==Object.keys(i).length)return!1;for(const n of a)if(!Object.prototype.hasOwnProperty.call(i,n)||!Object.is(t[n],i[n]))return!1;return!0}var noop$1={value:()=>{}};function dispatch(){for(var t=0,i=arguments.length,a={},n;t<i;++t){if(!(n=arguments[t]+"")||n in a||/[\s.]/.test(n))throw new Error("illegal type: "+n);a[n]=[]}return new Dispatch(a)}function Dispatch(t){this._=t}function parseTypenames$1(t,i){return t.trim().split(/^|\s+/).map(function(a){var n="",y=a.indexOf(".");if(y>=0&&(n=a.slice(y+1),a=a.slice(0,y)),a&&!i.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:n}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(t,i){var a=this._,n=parseTypenames$1(t+"",a),y,x=-1,k=n.length;if(arguments.length<2){for(;++x<k;)if((y=(t=n[x]).type)&&(y=get$1(a[y],t.name)))return y;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++x<k;)if(y=(t=n[x]).type)a[y]=set$1(a[y],t.name,i);else if(i==null)for(y in a)a[y]=set$1(a[y],t.name,null);return this},copy:function(){var t={},i=this._;for(var a in i)t[a]=i[a].slice();return new Dispatch(t)},call:function(t,i){if((y=arguments.length-2)>0)for(var a=new Array(y),n=0,y,x;n<y;++n)a[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(x=this._[t],n=0,y=x.length;n<y;++n)x[n].value.apply(i,a)},apply:function(t,i,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],y=0,x=n.length;y<x;++y)n[y].value.apply(i,a)}};function get$1(t,i){for(var a=0,n=t.length,y;a<n;++a)if((y=t[a]).name===i)return y.value}function set$1(t,i,a){for(var n=0,y=t.length;n<y;++n)if(t[n].name===i){t[n]=noop$1,t=t.slice(0,n).concat(t.slice(n+1));break}return a!=null&&t.push({name:i,value:a}),t}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var i=t+="",a=i.indexOf(":");return a>=0&&(i=t.slice(0,a))!=="xmlns"&&(t=t.slice(a+1)),namespaces.hasOwnProperty(i)?{space:namespaces[i],local:t}:t}function creatorInherit(t){return function(){var i=this.ownerDocument,a=this.namespaceURI;return a===xhtml&&i.documentElement.namespaceURI===xhtml?i.createElement(t):i.createElementNS(a,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var i=namespace(t);return(i.local?creatorFixed:creatorInherit)(i)}function none(){}function selector$h(t){return t==null?none:function(){return this.querySelector(t)}}function selection_select(t){typeof t!="function"&&(t=selector$h(t));for(var i=this._groups,a=i.length,n=new Array(a),y=0;y<a;++y)for(var x=i[y],k=x.length,S=n[y]=new Array(k),E,U,C=0;C<k;++C)(E=x[C])&&(U=t.call(E,E.__data__,C,x))&&("__data__"in E&&(U.__data__=E.__data__),S[C]=U);return new Selection$1(n,this._parents)}function array(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function empty(){return[]}function selectorAll(t){return t==null?empty:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array(t.apply(this,arguments))}}function selection_selectAll(t){typeof t=="function"?t=arrayAll(t):t=selectorAll(t);for(var i=this._groups,a=i.length,n=[],y=[],x=0;x<a;++x)for(var k=i[x],S=k.length,E,U=0;U<S;++U)(E=k[U])&&(n.push(t.call(E,E.__data__,U,k)),y.push(E));return new Selection$1(n,y)}function matcher(t){return function(){return this.matches(t)}}function childMatcher(t){return function(i){return i.matches(t)}}var find=Array.prototype.find;function childFind(t){return function(){return find.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(t==null?childFirst:childFind(typeof t=="function"?t:childMatcher(t)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(t==null?children:childrenFilter(typeof t=="function"?t:childMatcher(t)))}function selection_filter(t){typeof t!="function"&&(t=matcher(t));for(var i=this._groups,a=i.length,n=new Array(a),y=0;y<a;++y)for(var x=i[y],k=x.length,S=n[y]=[],E,U=0;U<k;++U)(E=x[U])&&t.call(E,E.__data__,U,x)&&S.push(E);return new Selection$1(n,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function constant$3(t){return function(){return t}}function bindIndex(t,i,a,n,y,x){for(var k=0,S,E=i.length,U=x.length;k<U;++k)(S=i[k])?(S.__data__=x[k],n[k]=S):a[k]=new EnterNode(t,x[k]);for(;k<E;++k)(S=i[k])&&(y[k]=S)}function bindKey(t,i,a,n,y,x,k){var S,E,U=new Map,C=i.length,B=x.length,W=new Array(C),Y;for(S=0;S<C;++S)(E=i[S])&&(W[S]=Y=k.call(E,E.__data__,S,i)+"",U.has(Y)?y[S]=E:U.set(Y,E));for(S=0;S<B;++S)Y=k.call(t,x[S],S,x)+"",(E=U.get(Y))?(n[S]=E,E.__data__=x[S],U.delete(Y)):a[S]=new EnterNode(t,x[S]);for(S=0;S<C;++S)(E=i[S])&&U.get(W[S])===E&&(y[S]=E)}function datum(t){return t.__data__}function selection_data(t,i){if(!arguments.length)return Array.from(this,datum);var a=i?bindKey:bindIndex,n=this._parents,y=this._groups;typeof t!="function"&&(t=constant$3(t));for(var x=y.length,k=new Array(x),S=new Array(x),E=new Array(x),U=0;U<x;++U){var C=n[U],B=y[U],W=B.length,Y=arraylike(t.call(C,C&&C.__data__,U,n)),Z=Y.length,T=S[U]=new Array(Z),l=k[U]=new Array(Z),f=E[U]=new Array(W);a(C,B,T,l,f,Y,i);for(var D=0,I=0,V,K;D<Z;++D)if(V=T[D]){for(D>=I&&(I=D+1);!(K=l[I])&&++I<Z;);V._next=K||null}}return k=new Selection$1(k,n),k._enter=S,k._exit=E,k}function arraylike(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,i,a){var n=this.enter(),y=this,x=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),i!=null&&(y=i(y),y&&(y=y.selection())),a==null?x.remove():a(x),n&&y?n.merge(y).order():y}function selection_merge(t){for(var i=t.selection?t.selection():t,a=this._groups,n=i._groups,y=a.length,x=n.length,k=Math.min(y,x),S=new Array(y),E=0;E<k;++E)for(var U=a[E],C=n[E],B=U.length,W=S[E]=new Array(B),Y,Z=0;Z<B;++Z)(Y=U[Z]||C[Z])&&(W[Z]=Y);for(;E<y;++E)S[E]=a[E];return new Selection$1(S,this._parents)}function selection_order(){for(var t=this._groups,i=-1,a=t.length;++i<a;)for(var n=t[i],y=n.length-1,x=n[y],k;--y>=0;)(k=n[y])&&(x&&k.compareDocumentPosition(x)^4&&x.parentNode.insertBefore(k,x),x=k);return this}function selection_sort(t){t||(t=ascending);function i(B,W){return B&&W?t(B.__data__,W.__data__):!B-!W}for(var a=this._groups,n=a.length,y=new Array(n),x=0;x<n;++x){for(var k=a[x],S=k.length,E=y[x]=new Array(S),U,C=0;C<S;++C)(U=k[C])&&(E[C]=U);E.sort(i)}return new Selection$1(y,this._parents).order()}function ascending(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var t=this._groups,i=0,a=t.length;i<a;++i)for(var n=t[i],y=0,x=n.length;y<x;++y){var k=n[y];if(k)return k}return null}function selection_size(){let t=0;for(const i of this)++t;return t}function selection_empty(){return!this.node()}function selection_each(t){for(var i=this._groups,a=0,n=i.length;a<n;++a)for(var y=i[a],x=0,k=y.length,S;x<k;++x)(S=y[x])&&t.call(S,S.__data__,x,y);return this}function attrRemove$1(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$1(t,i){return function(){this.setAttribute(t,i)}}function attrConstantNS$1(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function attrFunction$1(t,i){return function(){var a=i.apply(this,arguments);a==null?this.removeAttribute(t):this.setAttribute(t,a)}}function attrFunctionNS$1(t,i){return function(){var a=i.apply(this,arguments);a==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function selection_attr(t,i){var a=namespace(t);if(arguments.length<2){var n=this.node();return a.local?n.getAttributeNS(a.space,a.local):n.getAttribute(a)}return this.each((i==null?a.local?attrRemoveNS$1:attrRemove$1:typeof i=="function"?a.local?attrFunctionNS$1:attrFunction$1:a.local?attrConstantNS$1:attrConstant$1)(a,i))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove$1(t){return function(){this.style.removeProperty(t)}}function styleConstant$1(t,i,a){return function(){this.style.setProperty(t,i,a)}}function styleFunction$1(t,i,a){return function(){var n=i.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,a)}}function selection_style(t,i,a){return arguments.length>1?this.each((i==null?styleRemove$1:typeof i=="function"?styleFunction$1:styleConstant$1)(t,i,a??"")):styleValue(this.node(),t)}function styleValue(t,i){return t.style.getPropertyValue(i)||defaultView(t).getComputedStyle(t,null).getPropertyValue(i)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,i){return function(){this[t]=i}}function propertyFunction(t,i){return function(){var a=i.apply(this,arguments);a==null?delete this[t]:this[t]=a}}function selection_property(t,i){return arguments.length>1?this.each((i==null?propertyRemove:typeof i=="function"?propertyFunction:propertyConstant)(t,i)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}ClassList.prototype={add:function(t){var i=this._names.indexOf(t);i<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function classedAdd(t,i){for(var a=classList(t),n=-1,y=i.length;++n<y;)a.add(i[n])}function classedRemove(t,i){for(var a=classList(t),n=-1,y=i.length;++n<y;)a.remove(i[n])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,i){return function(){(i.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,i){var a=classArray(t+"");if(arguments.length<2){for(var n=classList(this.node()),y=-1,x=a.length;++y<x;)if(!n.contains(a[y]))return!1;return!0}return this.each((typeof i=="function"?classedFunction:i?classedTrue:classedFalse)(a,i))}function textRemove(){this.textContent=""}function textConstant$1(t){return function(){this.textContent=t}}function textFunction$1(t){return function(){var i=t.apply(this,arguments);this.textContent=i??""}}function selection_text(t){return arguments.length?this.each(t==null?textRemove:(typeof t=="function"?textFunction$1:textConstant$1)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var i=t.apply(this,arguments);this.innerHTML=i??""}}function selection_html(t){return arguments.length?this.each(t==null?htmlRemove:(typeof t=="function"?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var i=typeof t=="function"?t:creator(t);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function constantNull(){return null}function selection_insert(t,i){var a=typeof t=="function"?t:creator(t),n=i==null?constantNull:typeof i=="function"?i:selector$h(i);return this.select(function(){return this.insertBefore(a.apply(this,arguments),n.apply(this,arguments)||null)})}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener(t){return function(i){t.call(this,i,this.__data__)}}function parseTypenames(t){return t.trim().split(/^|\s+/).map(function(i){var a="",n=i.indexOf(".");return n>=0&&(a=i.slice(n+1),i=i.slice(0,n)),{type:i,name:a}})}function onRemove(t){return function(){var i=this.__on;if(i){for(var a=0,n=-1,y=i.length,x;a<y;++a)x=i[a],(!t.type||x.type===t.type)&&x.name===t.name?this.removeEventListener(x.type,x.listener,x.options):i[++n]=x;++n?i.length=n:delete this.__on}}}function onAdd(t,i,a){return function(){var n=this.__on,y,x=contextListener(i);if(n){for(var k=0,S=n.length;k<S;++k)if((y=n[k]).type===t.type&&y.name===t.name){this.removeEventListener(y.type,y.listener,y.options),this.addEventListener(y.type,y.listener=x,y.options=a),y.value=i;return}}this.addEventListener(t.type,x,a),y={type:t.type,name:t.name,value:i,listener:x,options:a},n?n.push(y):this.__on=[y]}}function selection_on(t,i,a){var n=parseTypenames(t+""),y,x=n.length,k;if(arguments.length<2){var S=this.node().__on;if(S){for(var E=0,U=S.length,C;E<U;++E)for(y=0,C=S[E];y<x;++y)if((k=n[y]).type===C.type&&k.name===C.name)return C.value}return}for(S=i?onAdd:onRemove,y=0;y<x;++y)this.each(S(n[y],i,a));return this}function dispatchEvent(t,i,a){var n=defaultView(t),y=n.CustomEvent;typeof y=="function"?y=new y(i,a):(y=n.document.createEvent("Event"),a?(y.initEvent(i,a.bubbles,a.cancelable),y.detail=a.detail):y.initEvent(i,!1,!1)),t.dispatchEvent(y)}function dispatchConstant(t,i){return function(){return dispatchEvent(this,t,i)}}function dispatchFunction(t,i){return function(){return dispatchEvent(this,t,i.apply(this,arguments))}}function selection_dispatch(t,i){return this.each((typeof i=="function"?dispatchFunction:dispatchConstant)(t,i))}function*selection_iterator(){for(var t=this._groups,i=0,a=t.length;i<a;++i)for(var n=t[i],y=0,x=n.length,k;y<x;++y)(k=n[y])&&(yield k)}var root=[null];function Selection$1(t,i){this._groups=t,this._parents=i}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(t){return typeof t=="string"?new Selection$1([[document.querySelector(t)]],[document.documentElement]):new Selection$1([[t]],root)}function sourceEvent(t){let i;for(;i=t.sourceEvent;)t=i;return t}function pointer(t,i){if(t=sourceEvent(t),i===void 0&&(i=t.currentTarget),i){var a=i.ownerSVGElement||i;if(a.createSVGPoint){var n=a.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(i.getScreenCTM().inverse()),[n.x,n.y]}if(i.getBoundingClientRect){var y=i.getBoundingClientRect();return[t.clientX-y.left-i.clientLeft,t.clientY-y.top-i.clientTop]}}return[t.pageX,t.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(t){t.stopImmediatePropagation()}function noevent$1(t){t.preventDefault(),t.stopImmediatePropagation()}function dragDisable(t){var i=t.document.documentElement,a=select(t).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in i?a.on("selectstart.drag",noevent$1,nonpassivecapture):(i.__noselect=i.style.MozUserSelect,i.style.MozUserSelect="none")}function yesdrag(t,i){var a=t.document.documentElement,n=select(t).on("dragstart.drag",null);i&&(n.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in a?n.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const constant$2=t=>()=>t;function DragEvent(t,{sourceEvent:i,subject:a,target:n,identifier:y,active:x,x:k,y:S,dx:E,dy:U,dispatch:C}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:y,enumerable:!0,configurable:!0},active:{value:x,enumerable:!0,configurable:!0},x:{value:k,enumerable:!0,configurable:!0},y:{value:S,enumerable:!0,configurable:!0},dx:{value:E,enumerable:!0,configurable:!0},dy:{value:U,enumerable:!0,configurable:!0},_:{value:C}})}DragEvent.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function defaultFilter$1(t){return!t.ctrlKey&&!t.button}function defaultContainer(){return this.parentNode}function defaultSubject(t,i){return i??{x:t.x,y:t.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var t=defaultFilter$1,i=defaultContainer,a=defaultSubject,n=defaultTouchable$1,y={},x=dispatch("start","drag","end"),k=0,S,E,U,C,B=0;function W(V){V.on("mousedown.drag",Y).filter(n).on("touchstart.drag",l).on("touchmove.drag",f,nonpassive).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Y(V,K){if(!(C||!t.call(this,V,K))){var A=I(this,i.call(this,V,K),V,K,"mouse");A&&(select(V.view).on("mousemove.drag",Z,nonpassivecapture).on("mouseup.drag",T,nonpassivecapture),dragDisable(V.view),nopropagation$1(V),U=!1,S=V.clientX,E=V.clientY,A("start",V))}}function Z(V){if(noevent$1(V),!U){var K=V.clientX-S,A=V.clientY-E;U=K*K+A*A>B}y.mouse("drag",V)}function T(V){select(V.view).on("mousemove.drag mouseup.drag",null),yesdrag(V.view,U),noevent$1(V),y.mouse("end",V)}function l(V,K){if(t.call(this,V,K)){var A=V.changedTouches,L=i.call(this,V,K),G=A.length,ee,ae;for(ee=0;ee<G;++ee)(ae=I(this,L,V,K,A[ee].identifier,A[ee]))&&(nopropagation$1(V),ae("start",V,A[ee]))}}function f(V){var K=V.changedTouches,A=K.length,L,G;for(L=0;L<A;++L)(G=y[K[L].identifier])&&(noevent$1(V),G("drag",V,K[L]))}function D(V){var K=V.changedTouches,A=K.length,L,G;for(C&&clearTimeout(C),C=setTimeout(function(){C=null},500),L=0;L<A;++L)(G=y[K[L].identifier])&&(nopropagation$1(V),G("end",V,K[L]))}function I(V,K,A,L,G,ee){var ae=x.copy(),Se=pointer(ee||A,K),$e,qe,Pe;if((Pe=a.call(V,new DragEvent("beforestart",{sourceEvent:A,target:W,identifier:G,active:k,x:Se[0],y:Se[1],dx:0,dy:0,dispatch:ae}),L))!=null)return $e=Pe.x-Se[0]||0,qe=Pe.y-Se[1]||0,function Ve(Ie,Xe,et){var tt=Se,rt;switch(Ie){case"start":y[G]=Ve,rt=k++;break;case"end":delete y[G],--k;case"drag":Se=pointer(et||Xe,K),rt=k;break}ae.call(Ie,V,new DragEvent(Ie,{sourceEvent:Xe,subject:Pe,target:W,identifier:G,active:rt,x:Se[0]+$e,y:Se[1]+qe,dx:Se[0]-tt[0],dy:Se[1]-tt[1],dispatch:ae}),L)}}return W.filter=function(V){return arguments.length?(t=typeof V=="function"?V:constant$2(!!V),W):t},W.container=function(V){return arguments.length?(i=typeof V=="function"?V:constant$2(V),W):i},W.subject=function(V){return arguments.length?(a=typeof V=="function"?V:constant$2(V),W):a},W.touchable=function(V){return arguments.length?(n=typeof V=="function"?V:constant$2(!!V),W):n},W.on=function(){var V=x.on.apply(x,arguments);return V===x?W:V},W.clickDistance=function(V){return arguments.length?(B=(V=+V)*V,W):Math.sqrt(B)},W}function define(t,i,a){t.prototype=i.prototype=a,a.constructor=t}function extend(t,i){var a=Object.create(t.prototype);for(var n in i)a[n]=i[n];return a}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(t){var i,a;return t=(t+"").trim().toLowerCase(),(i=reHex.exec(t))?(a=i[1].length,i=parseInt(i[1],16),a===6?rgbn(i):a===3?new Rgb(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):a===8?rgba(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):a===4?rgba(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=reRgbInteger.exec(t))?new Rgb(i[1],i[2],i[3],1):(i=reRgbPercent.exec(t))?new Rgb(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=reRgbaInteger.exec(t))?rgba(i[1],i[2],i[3],i[4]):(i=reRgbaPercent.exec(t))?rgba(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=reHslPercent.exec(t))?hsla(i[1],i[2]/100,i[3]/100,1):(i=reHslaPercent.exec(t))?hsla(i[1],i[2]/100,i[3]/100,i[4]):named.hasOwnProperty(t)?rgbn(named[t]):t==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,t&255,1)}function rgba(t,i,a,n){return n<=0&&(t=i=a=NaN),new Rgb(t,i,a,n)}function rgbConvert(t){return t instanceof Color||(t=color(t)),t?(t=t.rgb(),new Rgb(t.r,t.g,t.b,t.opacity)):new Rgb}function rgb(t,i,a,n){return arguments.length===1?rgbConvert(t):new Rgb(t,i,a,n??1)}function Rgb(t,i,a,n){this.r=+t,this.g=+i,this.b=+a,this.opacity=+n}define(Rgb,rgb,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const t=clampa(this.opacity);return`${t===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${t===1?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex(t){return t=clampi(t),(t<16?"0":"")+t.toString(16)}function hsla(t,i,a,n){return n<=0?t=i=a=NaN:a<=0||a>=1?t=i=NaN:i<=0&&(t=NaN),new Hsl(t,i,a,n)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color(t)),!t)return new Hsl;if(t instanceof Hsl)return t;t=t.rgb();var i=t.r/255,a=t.g/255,n=t.b/255,y=Math.min(i,a,n),x=Math.max(i,a,n),k=NaN,S=x-y,E=(x+y)/2;return S?(i===x?k=(a-n)/S+(a<n)*6:a===x?k=(n-i)/S+2:k=(i-a)/S+4,S/=E<.5?x+y:2-x-y,k*=60):S=E>0&&E<1?0:k,new Hsl(k,S,E,t.opacity)}function hsl(t,i,a,n){return arguments.length===1?hslConvert(t):new Hsl(t,i,a,n??1)}function Hsl(t,i,a,n){this.h=+t,this.s=+i,this.l=+a,this.opacity=+n}define(Hsl,hsl,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,i=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,n=a+(a<.5?a:1-a)*i,y=2*a-n;return new Rgb(hsl2rgb(t>=240?t-240:t+120,y,n),hsl2rgb(t,y,n),hsl2rgb(t<120?t+240:t-120,y,n),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${t===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function clamph(t){return t=(t||0)%360,t<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb(t,i,a){return(t<60?i+(a-i)*t/60:t<180?a:t<240?i+(a-i)*(240-t)/60:i)*255}const constant$1=t=>()=>t;function linear(t,i){return function(a){return t+a*i}}function exponential(t,i,a){return t=Math.pow(t,a),i=Math.pow(i,a)-t,a=1/a,function(n){return Math.pow(t+n*i,a)}}function gamma(t){return(t=+t)==1?nogamma:function(i,a){return a-i?exponential(i,a,t):constant$1(isNaN(i)?a:i)}}function nogamma(t,i){var a=i-t;return a?linear(t,a):constant$1(isNaN(t)?i:t)}const interpolateRgb=(function t(i){var a=gamma(i);function n(y,x){var k=a((y=rgb(y)).r,(x=rgb(x)).r),S=a(y.g,x.g),E=a(y.b,x.b),U=nogamma(y.opacity,x.opacity);return function(C){return y.r=k(C),y.g=S(C),y.b=E(C),y.opacity=U(C),y+""}}return n.gamma=t,n})(1);function interpolateNumber(t,i){return t=+t,i=+i,function(a){return t*(1-a)+i*a}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(i){return t(i)+""}}function interpolateString(t,i){var a=reA.lastIndex=reB.lastIndex=0,n,y,x,k=-1,S=[],E=[];for(t=t+"",i=i+"";(n=reA.exec(t))&&(y=reB.exec(i));)(x=y.index)>a&&(x=i.slice(a,x),S[k]?S[k]+=x:S[++k]=x),(n=n[0])===(y=y[0])?S[k]?S[k]+=y:S[++k]=y:(S[++k]=null,E.push({i:k,x:interpolateNumber(n,y)})),a=reB.lastIndex;return a<i.length&&(x=i.slice(a),S[k]?S[k]+=x:S[++k]=x),S.length<2?E[0]?one(E[0].x):zero(i):(i=E.length,function(U){for(var C=0,B;C<i;++C)S[(B=E[C]).i]=B.x(U);return S.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(t,i,a,n,y,x){var k,S,E;return(k=Math.sqrt(t*t+i*i))&&(t/=k,i/=k),(E=t*a+i*n)&&(a-=t*E,n-=i*E),(S=Math.sqrt(a*a+n*n))&&(a/=S,n/=S,E/=S),t*n<i*a&&(t=-t,i=-i,E=-E,k=-k),{translateX:y,translateY:x,rotate:Math.atan2(i,t)*degrees,skewX:Math.atan(E)*degrees,scaleX:k,scaleY:S}}var svgNode;function parseCss(t){const i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return i.isIdentity?identity$1:decompose(i.a,i.b,i.c,i.d,i.e,i.f)}function parseSvg(t){return t==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",t),!(t=svgNode.transform.baseVal.consolidate()))?identity$1:(t=t.matrix,decompose(t.a,t.b,t.c,t.d,t.e,t.f))}function interpolateTransform(t,i,a,n){function y(U){return U.length?U.pop()+" ":""}function x(U,C,B,W,Y,Z){if(U!==B||C!==W){var T=Y.push("translate(",null,i,null,a);Z.push({i:T-4,x:interpolateNumber(U,B)},{i:T-2,x:interpolateNumber(C,W)})}else(B||W)&&Y.push("translate("+B+i+W+a)}function k(U,C,B,W){U!==C?(U-C>180?C+=360:C-U>180&&(U+=360),W.push({i:B.push(y(B)+"rotate(",null,n)-2,x:interpolateNumber(U,C)})):C&&B.push(y(B)+"rotate("+C+n)}function S(U,C,B,W){U!==C?W.push({i:B.push(y(B)+"skewX(",null,n)-2,x:interpolateNumber(U,C)}):C&&B.push(y(B)+"skewX("+C+n)}function E(U,C,B,W,Y,Z){if(U!==B||C!==W){var T=Y.push(y(Y)+"scale(",null,",",null,")");Z.push({i:T-4,x:interpolateNumber(U,B)},{i:T-2,x:interpolateNumber(C,W)})}else(B!==1||W!==1)&&Y.push(y(Y)+"scale("+B+","+W+")")}return function(U,C){var B=[],W=[];return U=t(U),C=t(C),x(U.translateX,U.translateY,C.translateX,C.translateY,B,W),k(U.rotate,C.rotate,B,W),S(U.skewX,C.skewX,B,W),E(U.scaleX,U.scaleY,C.scaleX,C.scaleY,B,W),U=C=null,function(Y){for(var Z=-1,T=W.length,l;++Z<T;)B[(l=W[Z]).i]=l.x(Y);return B.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(t){return((t=Math.exp(t))+1/t)/2}function sinh(t){return((t=Math.exp(t))-1/t)/2}function tanh(t){return((t=Math.exp(2*t))-1)/(t+1)}const interpolateZoom=(function t(i,a,n){function y(x,k){var S=x[0],E=x[1],U=x[2],C=k[0],B=k[1],W=k[2],Y=C-S,Z=B-E,T=Y*Y+Z*Z,l,f;if(T<epsilon2)f=Math.log(W/U)/i,l=function(L){return[S+L*Y,E+L*Z,U*Math.exp(i*L*f)]};else{var D=Math.sqrt(T),I=(W*W-U*U+n*T)/(2*U*a*D),V=(W*W-U*U-n*T)/(2*W*a*D),K=Math.log(Math.sqrt(I*I+1)-I),A=Math.log(Math.sqrt(V*V+1)-V);f=(A-K)/i,l=function(L){var G=L*f,ee=cosh(K),ae=U/(a*D)*(ee*tanh(i*G+K)-sinh(K));return[S+ae*Y,E+ae*Z,U*ee/cosh(i*G+K)]}}return l.duration=f*1e3*i/Math.SQRT2,l}return y.rho=function(x){var k=Math.max(.001,+x),S=k*k,E=S*S;return t(k,S,E)},y})(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(t,i,a){if(typeof t!="function")throw new TypeError("callback is not a function");a=(a==null?now():+a)+(i==null?0:+i),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=t,this._time=a,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(t,i,a){var n=new Timer;return n.restart(t,i,a),n}function timerFlush(){now(),++frame;for(var t=taskHead,i;t;)(i=clockNow-t._time)>=0&&t._call.call(void 0,i),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var t=clock.now(),i=t-clockLast;i>pokeDelay&&(clockSkew-=i,clockLast=t)}function nap(){for(var t,i=taskHead,a,n=1/0;i;)i._call?(n>i._time&&(n=i._time),t=i,i=i._next):(a=i._next,i._next=null,i=t?t._next=a:taskHead=a);taskTail=t,sleep(n)}function sleep(t){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var i=t-clockNow;i>24?(t<1/0&&(timeout$1=setTimeout(wake,t-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(t,i,a){var n=new Timer;return i=i==null?0:+i,n.restart(y=>{n.stop(),t(y+i)},i,a),n}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(t,i,a,n,y,x){var k=t.__transition;if(!k)t.__transition={};else if(a in k)return;create(t,a,{name:i,index:n,group:y,on:emptyOn,tween:emptyTween,time:x.time,delay:x.delay,duration:x.duration,ease:x.ease,timer:null,state:CREATED})}function init(t,i){var a=get(t,i);if(a.state>CREATED)throw new Error("too late; already scheduled");return a}function set(t,i){var a=get(t,i);if(a.state>STARTED)throw new Error("too late; already running");return a}function get(t,i){var a=t.__transition;if(!a||!(a=a[i]))throw new Error("transition not found");return a}function create(t,i,a){var n=t.__transition,y;n[i]=a,a.timer=timer(x,0,a.time);function x(U){a.state=SCHEDULED,a.timer.restart(k,a.delay,a.time),a.delay<=U&&k(U-a.delay)}function k(U){var C,B,W,Y;if(a.state!==SCHEDULED)return E();for(C in n)if(Y=n[C],Y.name===a.name){if(Y.state===STARTED)return timeout(k);Y.state===RUNNING?(Y.state=ENDED,Y.timer.stop(),Y.on.call("interrupt",t,t.__data__,Y.index,Y.group),delete n[C]):+C<i&&(Y.state=ENDED,Y.timer.stop(),Y.on.call("cancel",t,t.__data__,Y.index,Y.group),delete n[C])}if(timeout(function(){a.state===STARTED&&(a.state=RUNNING,a.timer.restart(S,a.delay,a.time),S(U))}),a.state=STARTING,a.on.call("start",t,t.__data__,a.index,a.group),a.state===STARTING){for(a.state=STARTED,y=new Array(W=a.tween.length),C=0,B=-1;C<W;++C)(Y=a.tween[C].value.call(t,t.__data__,a.index,a.group))&&(y[++B]=Y);y.length=B+1}}function S(U){for(var C=U<a.duration?a.ease.call(null,U/a.duration):(a.timer.restart(E),a.state=ENDING,1),B=-1,W=y.length;++B<W;)y[B].call(t,C);a.state===ENDING&&(a.on.call("end",t,t.__data__,a.index,a.group),E())}function E(){a.state=ENDED,a.timer.stop(),delete n[i];for(var U in n)return;delete t.__transition}}function interrupt(t,i){var a=t.__transition,n,y,x=!0,k;if(a){i=i==null?null:i+"";for(k in a){if((n=a[k]).name!==i){x=!1;continue}y=n.state>STARTING&&n.state<ENDING,n.state=ENDED,n.timer.stop(),n.on.call(y?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[k]}x&&delete t.__transition}}function selection_interrupt(t){return this.each(function(){interrupt(this,t)})}function tweenRemove(t,i){var a,n;return function(){var y=set(this,t),x=y.tween;if(x!==a){n=a=x;for(var k=0,S=n.length;k<S;++k)if(n[k].name===i){n=n.slice(),n.splice(k,1);break}}y.tween=n}}function tweenFunction(t,i,a){var n,y;if(typeof a!="function")throw new Error;return function(){var x=set(this,t),k=x.tween;if(k!==n){y=(n=k).slice();for(var S={name:i,value:a},E=0,U=y.length;E<U;++E)if(y[E].name===i){y[E]=S;break}E===U&&y.push(S)}x.tween=y}}function transition_tween(t,i){var a=this._id;if(t+="",arguments.length<2){for(var n=get(this.node(),a).tween,y=0,x=n.length,k;y<x;++y)if((k=n[y]).name===t)return k.value;return null}return this.each((i==null?tweenRemove:tweenFunction)(a,t,i))}function tweenValue(t,i,a){var n=t._id;return t.each(function(){var y=set(this,n);(y.value||(y.value={}))[i]=a.apply(this,arguments)}),function(y){return get(y,n).value[i]}}function interpolate(t,i){var a;return(typeof i=="number"?interpolateNumber:i instanceof color?interpolateRgb:(a=color(i))?(i=a,interpolateRgb):interpolateString)(t,i)}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,i,a){var n,y=a+"",x;return function(){var k=this.getAttribute(t);return k===y?null:k===n?x:x=i(n=k,a)}}function attrConstantNS(t,i,a){var n,y=a+"",x;return function(){var k=this.getAttributeNS(t.space,t.local);return k===y?null:k===n?x:x=i(n=k,a)}}function attrFunction(t,i,a){var n,y,x;return function(){var k,S=a(this),E;return S==null?void this.removeAttribute(t):(k=this.getAttribute(t),E=S+"",k===E?null:k===n&&E===y?x:(y=E,x=i(n=k,S)))}}function attrFunctionNS(t,i,a){var n,y,x;return function(){var k,S=a(this),E;return S==null?void this.removeAttributeNS(t.space,t.local):(k=this.getAttributeNS(t.space,t.local),E=S+"",k===E?null:k===n&&E===y?x:(y=E,x=i(n=k,S)))}}function transition_attr(t,i){var a=namespace(t),n=a==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(t,typeof i=="function"?(a.local?attrFunctionNS:attrFunction)(a,n,tweenValue(this,"attr."+t,i)):i==null?(a.local?attrRemoveNS:attrRemove)(a):(a.local?attrConstantNS:attrConstant)(a,n,i))}function attrInterpolate(t,i){return function(a){this.setAttribute(t,i.call(this,a))}}function attrInterpolateNS(t,i){return function(a){this.setAttributeNS(t.space,t.local,i.call(this,a))}}function attrTweenNS(t,i){var a,n;function y(){var x=i.apply(this,arguments);return x!==n&&(a=(n=x)&&attrInterpolateNS(t,x)),a}return y._value=i,y}function attrTween(t,i){var a,n;function y(){var x=i.apply(this,arguments);return x!==n&&(a=(n=x)&&attrInterpolate(t,x)),a}return y._value=i,y}function transition_attrTween(t,i){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(i==null)return this.tween(a,null);if(typeof i!="function")throw new Error;var n=namespace(t);return this.tween(a,(n.local?attrTweenNS:attrTween)(n,i))}function delayFunction(t,i){return function(){init(this,t).delay=+i.apply(this,arguments)}}function delayConstant(t,i){return i=+i,function(){init(this,t).delay=i}}function transition_delay(t){var i=this._id;return arguments.length?this.each((typeof t=="function"?delayFunction:delayConstant)(i,t)):get(this.node(),i).delay}function durationFunction(t,i){return function(){set(this,t).duration=+i.apply(this,arguments)}}function durationConstant(t,i){return i=+i,function(){set(this,t).duration=i}}function transition_duration(t){var i=this._id;return arguments.length?this.each((typeof t=="function"?durationFunction:durationConstant)(i,t)):get(this.node(),i).duration}function easeConstant(t,i){if(typeof i!="function")throw new Error;return function(){set(this,t).ease=i}}function transition_ease(t){var i=this._id;return arguments.length?this.each(easeConstant(i,t)):get(this.node(),i).ease}function easeVarying(t,i){return function(){var a=i.apply(this,arguments);if(typeof a!="function")throw new Error;set(this,t).ease=a}}function transition_easeVarying(t){if(typeof t!="function")throw new Error;return this.each(easeVarying(this._id,t))}function transition_filter(t){typeof t!="function"&&(t=matcher(t));for(var i=this._groups,a=i.length,n=new Array(a),y=0;y<a;++y)for(var x=i[y],k=x.length,S=n[y]=[],E,U=0;U<k;++U)(E=x[U])&&t.call(E,E.__data__,U,x)&&S.push(E);return new Transition(n,this._parents,this._name,this._id)}function transition_merge(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,a=t._groups,n=i.length,y=a.length,x=Math.min(n,y),k=new Array(n),S=0;S<x;++S)for(var E=i[S],U=a[S],C=E.length,B=k[S]=new Array(C),W,Y=0;Y<C;++Y)(W=E[Y]||U[Y])&&(B[Y]=W);for(;S<n;++S)k[S]=i[S];return new Transition(k,this._parents,this._name,this._id)}function start(t){return(t+"").trim().split(/^|\s+/).every(function(i){var a=i.indexOf(".");return a>=0&&(i=i.slice(0,a)),!i||i==="start"})}function onFunction(t,i,a){var n,y,x=start(i)?init:set;return function(){var k=x(this,t),S=k.on;S!==n&&(y=(n=S).copy()).on(i,a),k.on=y}}function transition_on(t,i){var a=this._id;return arguments.length<2?get(this.node(),a).on.on(t):this.each(onFunction(a,t,i))}function removeFunction(t){return function(){var i=this.parentNode;for(var a in this.__transition)if(+a!==t)return;i&&i.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(t){var i=this._name,a=this._id;typeof t!="function"&&(t=selector$h(t));for(var n=this._groups,y=n.length,x=new Array(y),k=0;k<y;++k)for(var S=n[k],E=S.length,U=x[k]=new Array(E),C,B,W=0;W<E;++W)(C=S[W])&&(B=t.call(C,C.__data__,W,S))&&("__data__"in C&&(B.__data__=C.__data__),U[W]=B,schedule(U[W],i,a,W,U,get(C,a)));return new Transition(x,this._parents,i,a)}function transition_selectAll(t){var i=this._name,a=this._id;typeof t!="function"&&(t=selectorAll(t));for(var n=this._groups,y=n.length,x=[],k=[],S=0;S<y;++S)for(var E=n[S],U=E.length,C,B=0;B<U;++B)if(C=E[B]){for(var W=t.call(C,C.__data__,B,E),Y,Z=get(C,a),T=0,l=W.length;T<l;++T)(Y=W[T])&&schedule(Y,i,a,T,W,Z);x.push(W),k.push(C)}return new Transition(x,k,i,a)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(t,i){var a,n,y;return function(){var x=styleValue(this,t),k=(this.style.removeProperty(t),styleValue(this,t));return x===k?null:x===a&&k===n?y:y=i(a=x,n=k)}}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,i,a){var n,y=a+"",x;return function(){var k=styleValue(this,t);return k===y?null:k===n?x:x=i(n=k,a)}}function styleFunction(t,i,a){var n,y,x;return function(){var k=styleValue(this,t),S=a(this),E=S+"";return S==null&&(E=S=(this.style.removeProperty(t),styleValue(this,t))),k===E?null:k===n&&E===y?x:(y=E,x=i(n=k,S))}}function styleMaybeRemove(t,i){var a,n,y,x="style."+i,k="end."+x,S;return function(){var E=set(this,t),U=E.on,C=E.value[x]==null?S||(S=styleRemove(i)):void 0;(U!==a||y!==C)&&(n=(a=U).copy()).on(k,y=C),E.on=n}}function transition_style(t,i,a){var n=(t+="")=="transform"?interpolateTransformCss:interpolate;return i==null?this.styleTween(t,styleNull(t,n)).on("end.style."+t,styleRemove(t)):typeof i=="function"?this.styleTween(t,styleFunction(t,n,tweenValue(this,"style."+t,i))).each(styleMaybeRemove(this._id,t)):this.styleTween(t,styleConstant(t,n,i),a).on("end.style."+t,null)}function styleInterpolate(t,i,a){return function(n){this.style.setProperty(t,i.call(this,n),a)}}function styleTween(t,i,a){var n,y;function x(){var k=i.apply(this,arguments);return k!==y&&(n=(y=k)&&styleInterpolate(t,k,a)),n}return x._value=i,x}function transition_styleTween(t,i,a){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(i==null)return this.tween(n,null);if(typeof i!="function")throw new Error;return this.tween(n,styleTween(t,i,a??""))}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var i=t(this);this.textContent=i??""}}function transition_text(t){return this.tween("text",typeof t=="function"?textFunction(tweenValue(this,"text",t)):textConstant(t==null?"":t+""))}function textInterpolate(t){return function(i){this.textContent=t.call(this,i)}}function textTween(t){var i,a;function n(){var y=t.apply(this,arguments);return y!==a&&(i=(a=y)&&textInterpolate(y)),i}return n._value=t,n}function transition_textTween(t){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,textTween(t))}function transition_transition(){for(var t=this._name,i=this._id,a=newId(),n=this._groups,y=n.length,x=0;x<y;++x)for(var k=n[x],S=k.length,E,U=0;U<S;++U)if(E=k[U]){var C=get(E,i);schedule(E,t,a,U,k,{time:C.time+C.delay+C.duration,delay:0,duration:C.duration,ease:C.ease})}return new Transition(n,this._parents,t,a)}function transition_end(){var t,i,a=this,n=a._id,y=a.size();return new Promise(function(x,k){var S={value:k},E={value:function(){--y===0&&x()}};a.each(function(){var U=set(this,n),C=U.on;C!==t&&(i=(t=C).copy(),i._.cancel.push(S),i._.interrupt.push(S),i._.end.push(E)),U.on=i}),y===0&&x()})}var id=0;function Transition(t,i,a,n){this._groups=t,this._parents=i,this._name=a,this._id=n}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(t,i){for(var a;!(a=t.__transition)||!(a=a[i]);)if(!(t=t.parentNode))throw new Error(`transition ${i} not found`);return a}function selection_transition(t){var i,a;t instanceof Transition?(i=t._id,t=t._name):(i=newId(),(a=defaultTiming).time=now(),t=t==null?null:t+"");for(var n=this._groups,y=n.length,x=0;x<y;++x)for(var k=n[x],S=k.length,E,U=0;U<S;++U)(E=k[U])&&schedule(E,t,i,U,k,a||inherit(E,i));return new Transition(n,this._parents,t,i)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant=t=>()=>t;function ZoomEvent(t,{sourceEvent:i,target:a,transform:n,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:y}})}function Transform(t,i,a){this.k=t,this.x=i,this.y=a}Transform.prototype={constructor:Transform,scale:function(t){return t===1?this:new Transform(this.k*t,this.x,this.y)},translate:function(t,i){return t===0&i===0?this:new Transform(this.k,this.x+this.k*t,this.y+this.k*i)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(t){t.stopImmediatePropagation()}function noevent(t){t.preventDefault(),t.stopImmediatePropagation()}function defaultFilter(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function defaultExtent(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(t,i,a){var n=t.invertX(i[0][0])-a[0][0],y=t.invertX(i[1][0])-a[1][0],x=t.invertY(i[0][1])-a[0][1],k=t.invertY(i[1][1])-a[1][1];return t.translate(y>n?(n+y)/2:Math.min(0,n)||Math.max(0,y),k>x?(x+k)/2:Math.min(0,x)||Math.max(0,k))}function zoom(){var t=defaultFilter,i=defaultExtent,a=defaultConstrain,n=defaultWheelDelta,y=defaultTouchable,x=[0,1/0],k=[[-1/0,-1/0],[1/0,1/0]],S=250,E=interpolateZoom,U=dispatch("start","zoom","end"),C,B,W,Y=500,Z=150,T=0,l=10;function f(Pe){Pe.property("__zoom",defaultTransform).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",ee).on("dblclick.zoom",ae).filter(y).on("touchstart.zoom",Se).on("touchmove.zoom",$e).on("touchend.zoom touchcancel.zoom",qe).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}f.transform=function(Pe,Ve,Ie,Xe){var et=Pe.selection?Pe.selection():Pe;et.property("__zoom",defaultTransform),Pe!==et?K(Pe,Ve,Ie,Xe):et.interrupt().each(function(){A(this,arguments).event(Xe).start().zoom(null,typeof Ve=="function"?Ve.apply(this,arguments):Ve).end()})},f.scaleBy=function(Pe,Ve,Ie,Xe){f.scaleTo(Pe,function(){var et=this.__zoom.k,tt=typeof Ve=="function"?Ve.apply(this,arguments):Ve;return et*tt},Ie,Xe)},f.scaleTo=function(Pe,Ve,Ie,Xe){f.transform(Pe,function(){var et=i.apply(this,arguments),tt=this.__zoom,rt=Ie==null?V(et):typeof Ie=="function"?Ie.apply(this,arguments):Ie,ze=tt.invert(rt),lt=typeof Ve=="function"?Ve.apply(this,arguments):Ve;return a(I(D(tt,lt),rt,ze),et,k)},Ie,Xe)},f.translateBy=function(Pe,Ve,Ie,Xe){f.transform(Pe,function(){return a(this.__zoom.translate(typeof Ve=="function"?Ve.apply(this,arguments):Ve,typeof Ie=="function"?Ie.apply(this,arguments):Ie),i.apply(this,arguments),k)},null,Xe)},f.translateTo=function(Pe,Ve,Ie,Xe,et){f.transform(Pe,function(){var tt=i.apply(this,arguments),rt=this.__zoom,ze=Xe==null?V(tt):typeof Xe=="function"?Xe.apply(this,arguments):Xe;return a(identity.translate(ze[0],ze[1]).scale(rt.k).translate(typeof Ve=="function"?-Ve.apply(this,arguments):-Ve,typeof Ie=="function"?-Ie.apply(this,arguments):-Ie),tt,k)},Xe,et)};function D(Pe,Ve){return Ve=Math.max(x[0],Math.min(x[1],Ve)),Ve===Pe.k?Pe:new Transform(Ve,Pe.x,Pe.y)}function I(Pe,Ve,Ie){var Xe=Ve[0]-Ie[0]*Pe.k,et=Ve[1]-Ie[1]*Pe.k;return Xe===Pe.x&&et===Pe.y?Pe:new Transform(Pe.k,Xe,et)}function V(Pe){return[(+Pe[0][0]+ +Pe[1][0])/2,(+Pe[0][1]+ +Pe[1][1])/2]}function K(Pe,Ve,Ie,Xe){Pe.on("start.zoom",function(){A(this,arguments).event(Xe).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(Xe).end()}).tween("zoom",function(){var et=this,tt=arguments,rt=A(et,tt).event(Xe),ze=i.apply(et,tt),lt=Ie==null?V(ze):typeof Ie=="function"?Ie.apply(et,tt):Ie,bt=Math.max(ze[1][0]-ze[0][0],ze[1][1]-ze[0][1]),At=et.__zoom,Vt=typeof Ve=="function"?Ve.apply(et,tt):Ve,Yt=E(At.invert(lt).concat(bt/At.k),Vt.invert(lt).concat(bt/Vt.k));return function(er){if(er===1)er=Vt;else{var lr=Yt(er),yr=bt/lr[2];er=new Transform(yr,lt[0]-lr[0]*yr,lt[1]-lr[1]*yr)}rt.zoom(null,er)}})}function A(Pe,Ve,Ie){return!Ie&&Pe.__zooming||new L(Pe,Ve)}function L(Pe,Ve){this.that=Pe,this.args=Ve,this.active=0,this.sourceEvent=null,this.extent=i.apply(Pe,Ve),this.taps=0}L.prototype={event:function(Pe){return Pe&&(this.sourceEvent=Pe),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Pe,Ve){return this.mouse&&Pe!=="mouse"&&(this.mouse[1]=Ve.invert(this.mouse[0])),this.touch0&&Pe!=="touch"&&(this.touch0[1]=Ve.invert(this.touch0[0])),this.touch1&&Pe!=="touch"&&(this.touch1[1]=Ve.invert(this.touch1[0])),this.that.__zoom=Ve,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Pe){var Ve=select(this.that).datum();U.call(Pe,this.that,new ZoomEvent(Pe,{sourceEvent:this.sourceEvent,target:f,transform:this.that.__zoom,dispatch:U}),Ve)}};function G(Pe,...Ve){if(!t.apply(this,arguments))return;var Ie=A(this,Ve).event(Pe),Xe=this.__zoom,et=Math.max(x[0],Math.min(x[1],Xe.k*Math.pow(2,n.apply(this,arguments)))),tt=pointer(Pe);if(Ie.wheel)(Ie.mouse[0][0]!==tt[0]||Ie.mouse[0][1]!==tt[1])&&(Ie.mouse[1]=Xe.invert(Ie.mouse[0]=tt)),clearTimeout(Ie.wheel);else{if(Xe.k===et)return;Ie.mouse=[tt,Xe.invert(tt)],interrupt(this),Ie.start()}noevent(Pe),Ie.wheel=setTimeout(rt,Z),Ie.zoom("mouse",a(I(D(Xe,et),Ie.mouse[0],Ie.mouse[1]),Ie.extent,k));function rt(){Ie.wheel=null,Ie.end()}}function ee(Pe,...Ve){if(W||!t.apply(this,arguments))return;var Ie=Pe.currentTarget,Xe=A(this,Ve,!0).event(Pe),et=select(Pe.view).on("mousemove.zoom",lt,!0).on("mouseup.zoom",bt,!0),tt=pointer(Pe,Ie),rt=Pe.clientX,ze=Pe.clientY;dragDisable(Pe.view),nopropagation(Pe),Xe.mouse=[tt,this.__zoom.invert(tt)],interrupt(this),Xe.start();function lt(At){if(noevent(At),!Xe.moved){var Vt=At.clientX-rt,Yt=At.clientY-ze;Xe.moved=Vt*Vt+Yt*Yt>T}Xe.event(At).zoom("mouse",a(I(Xe.that.__zoom,Xe.mouse[0]=pointer(At,Ie),Xe.mouse[1]),Xe.extent,k))}function bt(At){et.on("mousemove.zoom mouseup.zoom",null),yesdrag(At.view,Xe.moved),noevent(At),Xe.event(At).end()}}function ae(Pe,...Ve){if(t.apply(this,arguments)){var Ie=this.__zoom,Xe=pointer(Pe.changedTouches?Pe.changedTouches[0]:Pe,this),et=Ie.invert(Xe),tt=Ie.k*(Pe.shiftKey?.5:2),rt=a(I(D(Ie,tt),Xe,et),i.apply(this,Ve),k);noevent(Pe),S>0?select(this).transition().duration(S).call(K,rt,Xe,Pe):select(this).call(f.transform,rt,Xe,Pe)}}function Se(Pe,...Ve){if(t.apply(this,arguments)){var Ie=Pe.touches,Xe=Ie.length,et=A(this,Ve,Pe.changedTouches.length===Xe).event(Pe),tt,rt,ze,lt;for(nopropagation(Pe),rt=0;rt<Xe;++rt)ze=Ie[rt],lt=pointer(ze,this),lt=[lt,this.__zoom.invert(lt),ze.identifier],et.touch0?!et.touch1&&et.touch0[2]!==lt[2]&&(et.touch1=lt,et.taps=0):(et.touch0=lt,tt=!0,et.taps=1+!!C);C&&(C=clearTimeout(C)),tt&&(et.taps<2&&(B=lt[0],C=setTimeout(function(){C=null},Y)),interrupt(this),et.start())}}function $e(Pe,...Ve){if(this.__zooming){var Ie=A(this,Ve).event(Pe),Xe=Pe.changedTouches,et=Xe.length,tt,rt,ze,lt;for(noevent(Pe),tt=0;tt<et;++tt)rt=Xe[tt],ze=pointer(rt,this),Ie.touch0&&Ie.touch0[2]===rt.identifier?Ie.touch0[0]=ze:Ie.touch1&&Ie.touch1[2]===rt.identifier&&(Ie.touch1[0]=ze);if(rt=Ie.that.__zoom,Ie.touch1){var bt=Ie.touch0[0],At=Ie.touch0[1],Vt=Ie.touch1[0],Yt=Ie.touch1[1],er=(er=Vt[0]-bt[0])*er+(er=Vt[1]-bt[1])*er,lr=(lr=Yt[0]-At[0])*lr+(lr=Yt[1]-At[1])*lr;rt=D(rt,Math.sqrt(er/lr)),ze=[(bt[0]+Vt[0])/2,(bt[1]+Vt[1])/2],lt=[(At[0]+Yt[0])/2,(At[1]+Yt[1])/2]}else if(Ie.touch0)ze=Ie.touch0[0],lt=Ie.touch0[1];else return;Ie.zoom("touch",a(I(rt,ze,lt),Ie.extent,k))}}function qe(Pe,...Ve){if(this.__zooming){var Ie=A(this,Ve).event(Pe),Xe=Pe.changedTouches,et=Xe.length,tt,rt;for(nopropagation(Pe),W&&clearTimeout(W),W=setTimeout(function(){W=null},Y),tt=0;tt<et;++tt)rt=Xe[tt],Ie.touch0&&Ie.touch0[2]===rt.identifier?delete Ie.touch0:Ie.touch1&&Ie.touch1[2]===rt.identifier&&delete Ie.touch1;if(Ie.touch1&&!Ie.touch0&&(Ie.touch0=Ie.touch1,delete Ie.touch1),Ie.touch0)Ie.touch0[1]=this.__zoom.invert(Ie.touch0[0]);else if(Ie.end(),Ie.taps===2&&(rt=pointer(rt,this),Math.hypot(B[0]-rt[0],B[1]-rt[1])<l)){var ze=select(this).on("dblclick.zoom");ze&&ze.apply(this,arguments)}}}return f.wheelDelta=function(Pe){return arguments.length?(n=typeof Pe=="function"?Pe:constant(+Pe),f):n},f.filter=function(Pe){return arguments.length?(t=typeof Pe=="function"?Pe:constant(!!Pe),f):t},f.touchable=function(Pe){return arguments.length?(y=typeof Pe=="function"?Pe:constant(!!Pe),f):y},f.extent=function(Pe){return arguments.length?(i=typeof Pe=="function"?Pe:constant([[+Pe[0][0],+Pe[0][1]],[+Pe[1][0],+Pe[1][1]]]),f):i},f.scaleExtent=function(Pe){return arguments.length?(x[0]=+Pe[0],x[1]=+Pe[1],f):[x[0],x[1]]},f.translateExtent=function(Pe){return arguments.length?(k[0][0]=+Pe[0][0],k[1][0]=+Pe[1][0],k[0][1]=+Pe[0][1],k[1][1]=+Pe[1][1],f):[[k[0][0],k[0][1]],[k[1][0],k[1][1]]]},f.constrain=function(Pe){return arguments.length?(a=Pe,f):a},f.duration=function(Pe){return arguments.length?(S=+Pe,f):S},f.interpolate=function(Pe){return arguments.length?(E=Pe,f):E},f.on=function(){var Pe=U.on.apply(U,arguments);return Pe===U?f:Pe},f.clickDistance=function(Pe){return arguments.length?(T=(Pe=+Pe)*Pe,f):Math.sqrt(T)},f.tapDistance=function(Pe){return arguments.length?(l=+Pe,f):l},f}const StoreContext=reactExports.createContext(null),Provider$1=StoreContext.Provider,errorMessages={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,i)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?i.targetHandle:i.sourceHandle}", edge id: ${i.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},zustandErrorMessage=errorMessages.error001();function useStore(t,i){const a=reactExports.useContext(StoreContext);if(a===null)throw new Error(zustandErrorMessage);return useStoreWithEqualityFn(a,t,i)}const useStoreApi=()=>{const t=reactExports.useContext(StoreContext);if(t===null)throw new Error(zustandErrorMessage);return reactExports.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},selector$g=t=>t.userSelectionActive?"none":"all";function Panel({position:t,children:i,className:a,style:n,...y}){const x=useStore(selector$g),k=`${t}`.split("-");return React.createElement("div",{className:cc(["react-flow__panel",a,...k]),style:{...n,pointerEvents:x},...y},i)}function Attribution({proOptions:t,position:i="bottom-right"}){return t?.hideAttribution?null:React.createElement(Panel,{position:i,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},React.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EdgeText=({x:t,y:i,label:a,labelStyle:n={},labelShowBg:y=!0,labelBgStyle:x={},labelBgPadding:k=[2,4],labelBgBorderRadius:S=2,children:E,className:U,...C})=>{const B=reactExports.useRef(null),[W,Y]=reactExports.useState({x:0,y:0,width:0,height:0}),Z=cc(["react-flow__edge-textwrapper",U]);return reactExports.useEffect(()=>{if(B.current){const T=B.current.getBBox();Y({x:T.x,y:T.y,width:T.width,height:T.height})}},[a]),typeof a>"u"||!a?null:React.createElement("g",{transform:`translate(${t-W.width/2} ${i-W.height/2})`,className:Z,visibility:W.width?"visible":"hidden",...C},y&&React.createElement("rect",{width:W.width+2*k[0],x:-k[0],y:-k[1],height:W.height+2*k[1],className:"react-flow__edge-textbg",style:x,rx:S,ry:S}),React.createElement("text",{className:"react-flow__edge-text",y:W.height/2,dy:"0.3em",ref:B,style:n},a),E)};var EdgeText$1=reactExports.memo(EdgeText);const getDimensions=t=>({width:t.offsetWidth,height:t.offsetHeight}),clamp=(t,i=0,a=1)=>Math.min(Math.max(t,i),a),clampPosition=(t={x:0,y:0},i)=>({x:clamp(t.x,i[0][0],i[1][0]),y:clamp(t.y,i[0][1],i[1][1])}),calcAutoPanVelocity=(t,i,a)=>t<i?clamp(Math.abs(t-i),1,50)/50:t>a?-clamp(Math.abs(t-a),1,50)/50:0,calcAutoPan=(t,i)=>{const a=calcAutoPanVelocity(t.x,35,i.width-35)*20,n=calcAutoPanVelocity(t.y,35,i.height-35)*20;return[a,n]},getHostForElement=t=>t.getRootNode?.()||window?.document,getBoundsOfBoxes=(t,i)=>({x:Math.min(t.x,i.x),y:Math.min(t.y,i.y),x2:Math.max(t.x2,i.x2),y2:Math.max(t.y2,i.y2)}),rectToBox=({x:t,y:i,width:a,height:n})=>({x:t,y:i,x2:t+a,y2:i+n}),boxToRect=({x:t,y:i,x2:a,y2:n})=>({x:t,y:i,width:a-t,height:n-i}),nodeToRect=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),getOverlappingArea=(t,i)=>{const a=Math.max(0,Math.min(t.x+t.width,i.x+i.width)-Math.max(t.x,i.x)),n=Math.max(0,Math.min(t.y+t.height,i.y+i.height)-Math.max(t.y,i.y));return Math.ceil(a*n)},isRectObject=t=>isNumeric(t.width)&&isNumeric(t.height)&&isNumeric(t.x)&&isNumeric(t.y),isNumeric=t=>!isNaN(t)&&isFinite(t),internalsSymbol=Symbol.for("internals"),elementSelectionKeys=["Enter"," ","Escape"],devWarn=(t,i)=>{},isReactKeyboardEvent=t=>"nativeEvent"in t;function isInputDOMNode(t){const a=(isReactKeyboardEvent(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(a?.nodeName)||a?.hasAttribute("contenteditable")||!!a?.closest(".nokey")}const isMouseEvent=t=>"clientX"in t,getEventPosition=(t,i)=>{const a=isMouseEvent(t),n=a?t.clientX:t.touches?.[0].clientX,y=a?t.clientY:t.touches?.[0].clientY;return{x:n-(i?.left??0),y:y-(i?.top??0)}},isMacOs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,BaseEdge=({id:t,path:i,labelX:a,labelY:n,label:y,labelStyle:x,labelShowBg:k,labelBgStyle:S,labelBgPadding:E,labelBgBorderRadius:U,style:C,markerEnd:B,markerStart:W,interactionWidth:Y=20})=>React.createElement(React.Fragment,null,React.createElement("path",{id:t,style:C,d:i,fill:"none",className:"react-flow__edge-path",markerEnd:B,markerStart:W}),Y&&React.createElement("path",{d:i,fill:"none",strokeOpacity:0,strokeWidth:Y,className:"react-flow__edge-interaction"}),y&&isNumeric(a)&&isNumeric(n)?React.createElement(EdgeText$1,{x:a,y:n,label:y,labelStyle:x,labelShowBg:k,labelBgStyle:S,labelBgPadding:E,labelBgBorderRadius:U}):null);BaseEdge.displayName="BaseEdge";function getMouseHandler$1(t,i,a){return a===void 0?a:n=>{const y=i().edges.find(x=>x.id===t);y&&a(n,{...y})}}function getEdgeCenter({sourceX:t,sourceY:i,targetX:a,targetY:n}){const y=Math.abs(a-t)/2,x=a<t?a+y:a-y,k=Math.abs(n-i)/2,S=n<i?n+k:n-k;return[x,S,y,k]}function getBezierEdgeCenter({sourceX:t,sourceY:i,targetX:a,targetY:n,sourceControlX:y,sourceControlY:x,targetControlX:k,targetControlY:S}){const E=t*.125+y*.375+k*.375+a*.125,U=i*.125+x*.375+S*.375+n*.125,C=Math.abs(E-t),B=Math.abs(U-i);return[E,U,C,B]}var ConnectionMode;(function(t){t.Strict="strict",t.Loose="loose"})(ConnectionMode||(ConnectionMode={}));var PanOnScrollMode;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(PanOnScrollMode||(PanOnScrollMode={}));var SelectionMode;(function(t){t.Partial="partial",t.Full="full"})(SelectionMode||(SelectionMode={}));var ConnectionLineType;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ConnectionLineType||(ConnectionLineType={}));var MarkerType;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(MarkerType||(MarkerType={}));var Position;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Position||(Position={}));function getControl({pos:t,x1:i,y1:a,x2:n,y2:y}){return t===Position.Left||t===Position.Right?[.5*(i+n),a]:[i,.5*(a+y)]}function getSimpleBezierPath({sourceX:t,sourceY:i,sourcePosition:a=Position.Bottom,targetX:n,targetY:y,targetPosition:x=Position.Top}){const[k,S]=getControl({pos:a,x1:t,y1:i,x2:n,y2:y}),[E,U]=getControl({pos:x,x1:n,y1:y,x2:t,y2:i}),[C,B,W,Y]=getBezierEdgeCenter({sourceX:t,sourceY:i,targetX:n,targetY:y,sourceControlX:k,sourceControlY:S,targetControlX:E,targetControlY:U});return[`M${t},${i} C${k},${S} ${E},${U} ${n},${y}`,C,B,W,Y]}const SimpleBezierEdge=reactExports.memo(({sourceX:t,sourceY:i,targetX:a,targetY:n,sourcePosition:y=Position.Bottom,targetPosition:x=Position.Top,label:k,labelStyle:S,labelShowBg:E,labelBgStyle:U,labelBgPadding:C,labelBgBorderRadius:B,style:W,markerEnd:Y,markerStart:Z,interactionWidth:T})=>{const[l,f,D]=getSimpleBezierPath({sourceX:t,sourceY:i,sourcePosition:y,targetX:a,targetY:n,targetPosition:x});return React.createElement(BaseEdge,{path:l,labelX:f,labelY:D,label:k,labelStyle:S,labelShowBg:E,labelBgStyle:U,labelBgPadding:C,labelBgBorderRadius:B,style:W,markerEnd:Y,markerStart:Z,interactionWidth:T})});SimpleBezierEdge.displayName="SimpleBezierEdge";const handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source:t,sourcePosition:i=Position.Bottom,target:a})=>i===Position.Left||i===Position.Right?t.x<a.x?{x:1,y:0}:{x:-1,y:0}:t.y<a.y?{x:0,y:1}:{x:0,y:-1},distance=(t,i)=>Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2));function getPoints({source:t,sourcePosition:i=Position.Bottom,target:a,targetPosition:n=Position.Top,center:y,offset:x}){const k=handleDirections[i],S=handleDirections[n],E={x:t.x+k.x*x,y:t.y+k.y*x},U={x:a.x+S.x*x,y:a.y+S.y*x},C=getDirection({source:E,sourcePosition:i,target:U}),B=C.x!==0?"x":"y",W=C[B];let Y=[],Z,T;const l={x:0,y:0},f={x:0,y:0},[D,I,V,K]=getEdgeCenter({sourceX:t.x,sourceY:t.y,targetX:a.x,targetY:a.y});if(k[B]*S[B]===-1){Z=y.x??D,T=y.y??I;const L=[{x:Z,y:E.y},{x:Z,y:U.y}],G=[{x:E.x,y:T},{x:U.x,y:T}];k[B]===W?Y=B==="x"?L:G:Y=B==="x"?G:L}else{const L=[{x:E.x,y:U.y}],G=[{x:U.x,y:E.y}];if(B==="x"?Y=k.x===W?G:L:Y=k.y===W?L:G,i===n){const qe=Math.abs(t[B]-a[B]);if(qe<=x){const Pe=Math.min(x-1,x-qe);k[B]===W?l[B]=(E[B]>t[B]?-1:1)*Pe:f[B]=(U[B]>a[B]?-1:1)*Pe}}if(i!==n){const qe=B==="x"?"y":"x",Pe=k[B]===S[qe],Ve=E[qe]>U[qe],Ie=E[qe]<U[qe];(k[B]===1&&(!Pe&&Ve||Pe&&Ie)||k[B]!==1&&(!Pe&&Ie||Pe&&Ve))&&(Y=B==="x"?L:G)}const ee={x:E.x+l.x,y:E.y+l.y},ae={x:U.x+f.x,y:U.y+f.y},Se=Math.max(Math.abs(ee.x-Y[0].x),Math.abs(ae.x-Y[0].x)),$e=Math.max(Math.abs(ee.y-Y[0].y),Math.abs(ae.y-Y[0].y));Se>=$e?(Z=(ee.x+ae.x)/2,T=Y[0].y):(Z=Y[0].x,T=(ee.y+ae.y)/2)}return[[t,{x:E.x+l.x,y:E.y+l.y},...Y,{x:U.x+f.x,y:U.y+f.y},a],Z,T,V,K]}function getBend(t,i,a,n){const y=Math.min(distance(t,i)/2,distance(i,a)/2,n),{x,y:k}=i;if(t.x===x&&x===a.x||t.y===k&&k===a.y)return`L${x} ${k}`;if(t.y===k){const U=t.x<a.x?-1:1,C=t.y<a.y?1:-1;return`L ${x+y*U},${k}Q ${x},${k} ${x},${k+y*C}`}const S=t.x<a.x?1:-1,E=t.y<a.y?-1:1;return`L ${x},${k+y*E}Q ${x},${k} ${x+y*S},${k}`}function getSmoothStepPath({sourceX:t,sourceY:i,sourcePosition:a=Position.Bottom,targetX:n,targetY:y,targetPosition:x=Position.Top,borderRadius:k=5,centerX:S,centerY:E,offset:U=20}){const[C,B,W,Y,Z]=getPoints({source:{x:t,y:i},sourcePosition:a,target:{x:n,y},targetPosition:x,center:{x:S,y:E},offset:U});return[C.reduce((l,f,D)=>{let I="";return D>0&&D<C.length-1?I=getBend(C[D-1],f,C[D+1],k):I=`${D===0?"M":"L"}${f.x} ${f.y}`,l+=I,l},""),B,W,Y,Z]}const SmoothStepEdge=reactExports.memo(({sourceX:t,sourceY:i,targetX:a,targetY:n,label:y,labelStyle:x,labelShowBg:k,labelBgStyle:S,labelBgPadding:E,labelBgBorderRadius:U,style:C,sourcePosition:B=Position.Bottom,targetPosition:W=Position.Top,markerEnd:Y,markerStart:Z,pathOptions:T,interactionWidth:l})=>{const[f,D,I]=getSmoothStepPath({sourceX:t,sourceY:i,sourcePosition:B,targetX:a,targetY:n,targetPosition:W,borderRadius:T?.borderRadius,offset:T?.offset});return React.createElement(BaseEdge,{path:f,labelX:D,labelY:I,label:y,labelStyle:x,labelShowBg:k,labelBgStyle:S,labelBgPadding:E,labelBgBorderRadius:U,style:C,markerEnd:Y,markerStart:Z,interactionWidth:l})});SmoothStepEdge.displayName="SmoothStepEdge";const StepEdge=reactExports.memo(t=>React.createElement(SmoothStepEdge,{...t,pathOptions:reactExports.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));StepEdge.displayName="StepEdge";function getStraightPath({sourceX:t,sourceY:i,targetX:a,targetY:n}){const[y,x,k,S]=getEdgeCenter({sourceX:t,sourceY:i,targetX:a,targetY:n});return[`M ${t},${i}L ${a},${n}`,y,x,k,S]}const StraightEdge=reactExports.memo(({sourceX:t,sourceY:i,targetX:a,targetY:n,label:y,labelStyle:x,labelShowBg:k,labelBgStyle:S,labelBgPadding:E,labelBgBorderRadius:U,style:C,markerEnd:B,markerStart:W,interactionWidth:Y})=>{const[Z,T,l]=getStraightPath({sourceX:t,sourceY:i,targetX:a,targetY:n});return React.createElement(BaseEdge,{path:Z,labelX:T,labelY:l,label:y,labelStyle:x,labelShowBg:k,labelBgStyle:S,labelBgPadding:E,labelBgBorderRadius:U,style:C,markerEnd:B,markerStart:W,interactionWidth:Y})});StraightEdge.displayName="StraightEdge";function calculateControlOffset(t,i){return t>=0?.5*t:i*25*Math.sqrt(-t)}function getControlWithCurvature({pos:t,x1:i,y1:a,x2:n,y2:y,c:x}){switch(t){case Position.Left:return[i-calculateControlOffset(i-n,x),a];case Position.Right:return[i+calculateControlOffset(n-i,x),a];case Position.Top:return[i,a-calculateControlOffset(a-y,x)];case Position.Bottom:return[i,a+calculateControlOffset(y-a,x)]}}function getBezierPath({sourceX:t,sourceY:i,sourcePosition:a=Position.Bottom,targetX:n,targetY:y,targetPosition:x=Position.Top,curvature:k=.25}){const[S,E]=getControlWithCurvature({pos:a,x1:t,y1:i,x2:n,y2:y,c:k}),[U,C]=getControlWithCurvature({pos:x,x1:n,y1:y,x2:t,y2:i,c:k}),[B,W,Y,Z]=getBezierEdgeCenter({sourceX:t,sourceY:i,targetX:n,targetY:y,sourceControlX:S,sourceControlY:E,targetControlX:U,targetControlY:C});return[`M${t},${i} C${S},${E} ${U},${C} ${n},${y}`,B,W,Y,Z]}const BezierEdge=reactExports.memo(({sourceX:t,sourceY:i,targetX:a,targetY:n,sourcePosition:y=Position.Bottom,targetPosition:x=Position.Top,label:k,labelStyle:S,labelShowBg:E,labelBgStyle:U,labelBgPadding:C,labelBgBorderRadius:B,style:W,markerEnd:Y,markerStart:Z,pathOptions:T,interactionWidth:l})=>{const[f,D,I]=getBezierPath({sourceX:t,sourceY:i,sourcePosition:y,targetX:a,targetY:n,targetPosition:x,curvature:T?.curvature});return React.createElement(BaseEdge,{path:f,labelX:D,labelY:I,label:k,labelStyle:S,labelShowBg:E,labelBgStyle:U,labelBgPadding:C,labelBgBorderRadius:B,style:W,markerEnd:Y,markerStart:Z,interactionWidth:l})});BezierEdge.displayName="BezierEdge";const NodeIdContext=reactExports.createContext(null),Provider=NodeIdContext.Provider;NodeIdContext.Consumer;const useNodeId=()=>reactExports.useContext(NodeIdContext),isEdge=t=>"id"in t&&"source"in t&&"target"in t,getEdgeId=({source:t,sourceHandle:i,target:a,targetHandle:n})=>`reactflow__edge-${t}${i||""}-${a}${n||""}`,getMarkerId=(t,i)=>typeof t>"u"?"":typeof t=="string"?t:`${i?`${i}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,connectionExists=(t,i)=>i.some(a=>a.source===t.source&&a.target===t.target&&(a.sourceHandle===t.sourceHandle||!a.sourceHandle&&!t.sourceHandle)&&(a.targetHandle===t.targetHandle||!a.targetHandle&&!t.targetHandle)),addEdge=(t,i)=>{if(!t.source||!t.target)return i;let a;return isEdge(t)?a={...t}:a={...t,id:getEdgeId(t)},connectionExists(a,i)?i:i.concat(a)},pointToRendererPoint=({x:t,y:i},[a,n,y],x,[k,S])=>{const E={x:(t-a)/y,y:(i-n)/y};return x?{x:k*Math.round(E.x/k),y:S*Math.round(E.y/S)}:E},rendererPointToPoint=({x:t,y:i},[a,n,y])=>({x:t*y+a,y:i*y+n}),getNodePositionWithOrigin=(t,i=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const a=(t.width??0)*i[0],n=(t.height??0)*i[1],y={x:t.position.x-a,y:t.position.y-n};return{...y,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-a,y:t.positionAbsolute.y-n}:y}},getNodesBounds=(t,i=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const a=t.reduce((n,y)=>{const{x,y:k}=getNodePositionWithOrigin(y,i).positionAbsolute;return getBoundsOfBoxes(n,rectToBox({x,y:k,width:y.width||0,height:y.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return boxToRect(a)},getNodesInside=(t,i,[a,n,y]=[0,0,1],x=!1,k=!1,S=[0,0])=>{const E={x:(i.x-a)/y,y:(i.y-n)/y,width:i.width/y,height:i.height/y},U=[];return t.forEach(C=>{const{width:B,height:W,selectable:Y=!0,hidden:Z=!1}=C;if(k&&!Y||Z)return!1;const{positionAbsolute:T}=getNodePositionWithOrigin(C,S),l={x:T.x,y:T.y,width:B||0,height:W||0},f=getOverlappingArea(E,l),D=typeof B>"u"||typeof W>"u"||B===null||W===null,I=x&&f>0,V=(B||0)*(W||0);(D||I||f>=V||C.dragging)&&U.push(C)}),U},getConnectedEdges=(t,i)=>{const a=t.map(n=>n.id);return i.filter(n=>a.includes(n.source)||a.includes(n.target))},getViewportForBounds=(t,i,a,n,y,x=.1)=>{const k=i/(t.width*(1+x)),S=a/(t.height*(1+x)),E=Math.min(k,S),U=clamp(E,n,y),C=t.x+t.width/2,B=t.y+t.height/2,W=i/2-C*U,Y=a/2-B*U;return{x:W,y:Y,zoom:U}},getD3Transition=(t,i=0)=>t.transition().duration(i);function getHandles(t,i,a,n){return(i[a]||[]).reduce((y,x)=>(`${t.id}-${x.id}-${a}`!==n&&y.push({id:x.id||null,type:a,nodeId:t.id,x:(t.positionAbsolute?.x??0)+x.x+x.width/2,y:(t.positionAbsolute?.y??0)+x.y+x.height/2}),y),[])}function getClosestHandle(t,i,a,n,y,x){const{x:k,y:S}=getEventPosition(t),U=i.elementsFromPoint(k,S).find(Z=>Z.classList.contains("react-flow__handle"));if(U){const Z=U.getAttribute("data-nodeid");if(Z){const T=getHandleType(void 0,U),l=U.getAttribute("data-handleid"),f=x({nodeId:Z,id:l,type:T});if(f){const D=y.find(I=>I.nodeId===Z&&I.type===T&&I.id===l);return{handle:{id:l,type:T,nodeId:Z,x:D?.x||a.x,y:D?.y||a.y},validHandleResult:f}}}}let C=[],B=1/0;if(y.forEach(Z=>{const T=Math.sqrt((Z.x-a.x)**2+(Z.y-a.y)**2);if(T<=n){const l=x(Z);T<=B&&(T<B?C=[{handle:Z,validHandleResult:l}]:T===B&&C.push({handle:Z,validHandleResult:l}),B=T)}}),!C.length)return{handle:null,validHandleResult:defaultResult()};if(C.length===1)return C[0];const W=C.some(({validHandleResult:Z})=>Z.isValid),Y=C.some(({handle:Z})=>Z.type==="target");return C.find(({handle:Z,validHandleResult:T})=>Y?Z.type==="target":W?T.isValid:!0)||C[0]}const nullConnection={source:null,target:null,sourceHandle:null,targetHandle:null},defaultResult=()=>({handleDomNode:null,isValid:!1,connection:nullConnection,endHandle:null});function isValidHandle(t,i,a,n,y,x,k){const S=y==="target",E=k.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),U={...defaultResult(),handleDomNode:E};if(E){const C=getHandleType(void 0,E),B=E.getAttribute("data-nodeid"),W=E.getAttribute("data-handleid"),Y=E.classList.contains("connectable"),Z=E.classList.contains("connectableend"),T={source:S?B:a,sourceHandle:S?W:n,target:S?a:B,targetHandle:S?n:W};U.connection=T,Y&&Z&&(i===ConnectionMode.Strict?S&&C==="source"||!S&&C==="target":B!==a||W!==n)&&(U.endHandle={nodeId:B,handleId:W,type:C},U.isValid=x(T))}return U}function getHandleLookup({nodes:t,nodeId:i,handleId:a,handleType:n}){return t.reduce((y,x)=>{if(x[internalsSymbol]){const{handleBounds:k}=x[internalsSymbol];let S=[],E=[];k&&(S=getHandles(x,k,"source",`${i}-${a}-${n}`),E=getHandles(x,k,"target",`${i}-${a}-${n}`)),y.push(...S,...E)}return y},[])}function getHandleType(t,i){return t||(i?.classList.contains("target")?"target":i?.classList.contains("source")?"source":null)}function resetRecentHandle(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function getConnectionStatus(t,i){let a=null;return i?a="valid":t&&!i&&(a="invalid"),a}function handlePointerDown({event:t,handleId:i,nodeId:a,onConnect:n,isTarget:y,getState:x,setState:k,isValidConnection:S,edgeUpdaterType:E,onReconnectEnd:U}){const C=getHostForElement(t.target),{connectionMode:B,domNode:W,autoPanOnConnect:Y,connectionRadius:Z,onConnectStart:T,panBy:l,getNodes:f,cancelConnection:D}=x();let I=0,V;const{x:K,y:A}=getEventPosition(t),L=C?.elementFromPoint(K,A),G=getHandleType(E,L),ee=W?.getBoundingClientRect();if(!ee||!G)return;let ae,Se=getEventPosition(t,ee),$e=!1,qe=null,Pe=!1,Ve=null;const Ie=getHandleLookup({nodes:f(),nodeId:a,handleId:i,handleType:G}),Xe=()=>{if(!Y)return;const[rt,ze]=calcAutoPan(Se,ee);l({x:rt,y:ze}),I=requestAnimationFrame(Xe)};k({connectionPosition:Se,connectionStatus:null,connectionNodeId:a,connectionHandleId:i,connectionHandleType:G,connectionStartHandle:{nodeId:a,handleId:i,type:G},connectionEndHandle:null}),T?.(t,{nodeId:a,handleId:i,handleType:G});function et(rt){const{transform:ze}=x();Se=getEventPosition(rt,ee);const{handle:lt,validHandleResult:bt}=getClosestHandle(rt,C,pointToRendererPoint(Se,ze,!1,[1,1]),Z,Ie,At=>isValidHandle(At,B,a,i,y?"target":"source",S,C));if(V=lt,$e||(Xe(),$e=!0),Ve=bt.handleDomNode,qe=bt.connection,Pe=bt.isValid,k({connectionPosition:V&&Pe?rendererPointToPoint({x:V.x,y:V.y},ze):Se,connectionStatus:getConnectionStatus(!!V,Pe),connectionEndHandle:bt.endHandle}),!V&&!Pe&&!Ve)return resetRecentHandle(ae);qe.source!==qe.target&&Ve&&(resetRecentHandle(ae),ae=Ve,Ve.classList.add("connecting","react-flow__handle-connecting"),Ve.classList.toggle("valid",Pe),Ve.classList.toggle("react-flow__handle-valid",Pe))}function tt(rt){(V||Ve)&&qe&&Pe&&n?.(qe),x().onConnectEnd?.(rt),E&&U?.(rt),resetRecentHandle(ae),D(),cancelAnimationFrame(I),$e=!1,Pe=!1,qe=null,Ve=null,C.removeEventListener("mousemove",et),C.removeEventListener("mouseup",tt),C.removeEventListener("touchmove",et),C.removeEventListener("touchend",tt)}C.addEventListener("mousemove",et),C.addEventListener("mouseup",tt),C.addEventListener("touchmove",et),C.addEventListener("touchend",tt)}const alwaysValid=()=>!0,selector$f=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),connectingSelector=(t,i,a)=>n=>{const{connectionStartHandle:y,connectionEndHandle:x,connectionClickStartHandle:k}=n;return{connecting:y?.nodeId===t&&y?.handleId===i&&y?.type===a||x?.nodeId===t&&x?.handleId===i&&x?.type===a,clickConnecting:k?.nodeId===t&&k?.handleId===i&&k?.type===a}},Handle=reactExports.forwardRef(({type:t="source",position:i=Position.Top,isValidConnection:a,isConnectable:n=!0,isConnectableStart:y=!0,isConnectableEnd:x=!0,id:k,onConnect:S,children:E,className:U,onMouseDown:C,onTouchStart:B,...W},Y)=>{const Z=k||null,T=t==="target",l=useStoreApi(),f=useNodeId(),{connectOnClick:D,noPanClassName:I}=useStore(selector$f,shallow$1),{connecting:V,clickConnecting:K}=useStore(connectingSelector(f,Z,t),shallow$1);f||l.getState().onError?.("010",errorMessages.error010());const A=ee=>{const{defaultEdgeOptions:ae,onConnect:Se,hasDefaultEdges:$e}=l.getState(),qe={...ae,...ee};if($e){const{edges:Pe,setEdges:Ve}=l.getState();Ve(addEdge(qe,Pe))}Se?.(qe),S?.(qe)},L=ee=>{if(!f)return;const ae=isMouseEvent(ee);y&&(ae&&ee.button===0||!ae)&&handlePointerDown({event:ee,handleId:Z,nodeId:f,onConnect:A,isTarget:T,getState:l.getState,setState:l.setState,isValidConnection:a||l.getState().isValidConnection||alwaysValid}),ae?C?.(ee):B?.(ee)},G=ee=>{const{onClickConnectStart:ae,onClickConnectEnd:Se,connectionClickStartHandle:$e,connectionMode:qe,isValidConnection:Pe}=l.getState();if(!f||!$e&&!y)return;if(!$e){ae?.(ee,{nodeId:f,handleId:Z,handleType:t}),l.setState({connectionClickStartHandle:{nodeId:f,type:t,handleId:Z}});return}const Ve=getHostForElement(ee.target),Ie=a||Pe||alwaysValid,{connection:Xe,isValid:et}=isValidHandle({nodeId:f,id:Z,type:t},qe,$e.nodeId,$e.handleId||null,$e.type,Ie,Ve);et&&A(Xe),Se?.(ee),l.setState({connectionClickStartHandle:null})};return React.createElement("div",{"data-handleid":Z,"data-nodeid":f,"data-handlepos":i,"data-id":`${f}-${Z}-${t}`,className:cc(["react-flow__handle",`react-flow__handle-${i}`,"nodrag",I,U,{source:!T,target:T,connectable:n,connectablestart:y,connectableend:x,connecting:K,connectionindicator:n&&(y&&!V||x&&V)}]),onMouseDown:L,onTouchStart:L,onClick:D?G:void 0,ref:Y,...W},E)});Handle.displayName="Handle";var Handle$1=reactExports.memo(Handle);const DefaultNode=({data:t,isConnectable:i,targetPosition:a=Position.Top,sourcePosition:n=Position.Bottom})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:a,isConnectable:i}),t?.label,React.createElement(Handle$1,{type:"source",position:n,isConnectable:i}));DefaultNode.displayName="DefaultNode";var DefaultNode$1=reactExports.memo(DefaultNode);const InputNode=({data:t,isConnectable:i,sourcePosition:a=Position.Bottom})=>React.createElement(React.Fragment,null,t?.label,React.createElement(Handle$1,{type:"source",position:a,isConnectable:i}));InputNode.displayName="InputNode";var InputNode$1=reactExports.memo(InputNode);const OutputNode=({data:t,isConnectable:i,targetPosition:a=Position.Top})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:a,isConnectable:i}),t?.label);OutputNode.displayName="OutputNode";var OutputNode$1=reactExports.memo(OutputNode);const GroupNode=()=>null;GroupNode.displayName="GroupNode";const selector$e=t=>({selectedNodes:t.getNodes().filter(i=>i.selected),selectedEdges:t.edges.filter(i=>i.selected).map(i=>({...i}))}),selectId=t=>t.id;function areEqual(t,i){return shallow$1(t.selectedNodes.map(selectId),i.selectedNodes.map(selectId))&&shallow$1(t.selectedEdges.map(selectId),i.selectedEdges.map(selectId))}const SelectionListener=reactExports.memo(({onSelectionChange:t})=>{const i=useStoreApi(),{selectedNodes:a,selectedEdges:n}=useStore(selector$e,areEqual);return reactExports.useEffect(()=>{const y={nodes:a,edges:n};t?.(y),i.getState().onSelectionChange.forEach(x=>x(y))},[a,n,t]),null});SelectionListener.displayName="SelectionListener";const changeSelector=t=>!!t.onSelectionChange;function Wrapper$1({onSelectionChange:t}){const i=useStore(changeSelector);return t||i?React.createElement(SelectionListener,{onSelectionChange:t}):null}const selector$d=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function useStoreUpdater(t,i){reactExports.useEffect(()=>{typeof t<"u"&&i(t)},[t])}function useDirectStoreUpdater(t,i,a){reactExports.useEffect(()=>{typeof i<"u"&&a({[t]:i})},[i])}const StoreUpdater=({nodes:t,edges:i,defaultNodes:a,defaultEdges:n,onConnect:y,onConnectStart:x,onConnectEnd:k,onClickConnectStart:S,onClickConnectEnd:E,nodesDraggable:U,nodesConnectable:C,nodesFocusable:B,edgesFocusable:W,edgesUpdatable:Y,elevateNodesOnSelect:Z,minZoom:T,maxZoom:l,nodeExtent:f,onNodesChange:D,onEdgesChange:I,elementsSelectable:V,connectionMode:K,snapGrid:A,snapToGrid:L,translateExtent:G,connectOnClick:ee,defaultEdgeOptions:ae,fitView:Se,fitViewOptions:$e,onNodesDelete:qe,onEdgesDelete:Pe,onNodeDrag:Ve,onNodeDragStart:Ie,onNodeDragStop:Xe,onSelectionDrag:et,onSelectionDragStart:tt,onSelectionDragStop:rt,noPanClassName:ze,nodeOrigin:lt,rfId:bt,autoPanOnConnect:At,autoPanOnNodeDrag:Vt,onError:Yt,connectionRadius:er,isValidConnection:lr,nodeDragThreshold:yr})=>{const{setNodes:$r,setEdges:ia,setDefaultNodesAndEdges:Sa,setMinZoom:Xr,setMaxZoom:fr,setTranslateExtent:Hr,setNodeExtent:ya,reset:Ta}=useStore(selector$d,shallow$1),ua=useStoreApi();return reactExports.useEffect(()=>{const Ua=n?.map(Ya=>({...Ya,...ae}));return Sa(a,Ua),()=>{Ta()}},[]),useDirectStoreUpdater("defaultEdgeOptions",ae,ua.setState),useDirectStoreUpdater("connectionMode",K,ua.setState),useDirectStoreUpdater("onConnect",y,ua.setState),useDirectStoreUpdater("onConnectStart",x,ua.setState),useDirectStoreUpdater("onConnectEnd",k,ua.setState),useDirectStoreUpdater("onClickConnectStart",S,ua.setState),useDirectStoreUpdater("onClickConnectEnd",E,ua.setState),useDirectStoreUpdater("nodesDraggable",U,ua.setState),useDirectStoreUpdater("nodesConnectable",C,ua.setState),useDirectStoreUpdater("nodesFocusable",B,ua.setState),useDirectStoreUpdater("edgesFocusable",W,ua.setState),useDirectStoreUpdater("edgesUpdatable",Y,ua.setState),useDirectStoreUpdater("elementsSelectable",V,ua.setState),useDirectStoreUpdater("elevateNodesOnSelect",Z,ua.setState),useDirectStoreUpdater("snapToGrid",L,ua.setState),useDirectStoreUpdater("snapGrid",A,ua.setState),useDirectStoreUpdater("onNodesChange",D,ua.setState),useDirectStoreUpdater("onEdgesChange",I,ua.setState),useDirectStoreUpdater("connectOnClick",ee,ua.setState),useDirectStoreUpdater("fitViewOnInit",Se,ua.setState),useDirectStoreUpdater("fitViewOnInitOptions",$e,ua.setState),useDirectStoreUpdater("onNodesDelete",qe,ua.setState),useDirectStoreUpdater("onEdgesDelete",Pe,ua.setState),useDirectStoreUpdater("onNodeDrag",Ve,ua.setState),useDirectStoreUpdater("onNodeDragStart",Ie,ua.setState),useDirectStoreUpdater("onNodeDragStop",Xe,ua.setState),useDirectStoreUpdater("onSelectionDrag",et,ua.setState),useDirectStoreUpdater("onSelectionDragStart",tt,ua.setState),useDirectStoreUpdater("onSelectionDragStop",rt,ua.setState),useDirectStoreUpdater("noPanClassName",ze,ua.setState),useDirectStoreUpdater("nodeOrigin",lt,ua.setState),useDirectStoreUpdater("rfId",bt,ua.setState),useDirectStoreUpdater("autoPanOnConnect",At,ua.setState),useDirectStoreUpdater("autoPanOnNodeDrag",Vt,ua.setState),useDirectStoreUpdater("onError",Yt,ua.setState),useDirectStoreUpdater("connectionRadius",er,ua.setState),useDirectStoreUpdater("isValidConnection",lr,ua.setState),useDirectStoreUpdater("nodeDragThreshold",yr,ua.setState),useStoreUpdater(t,$r),useStoreUpdater(i,ia),useStoreUpdater(T,Xr),useStoreUpdater(l,fr),useStoreUpdater(G,Hr),useStoreUpdater(f,ya),null},style={display:"none"},ariaLiveStyle={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ARIA_NODE_DESC_KEY="react-flow__node-desc",ARIA_EDGE_DESC_KEY="react-flow__edge-desc",ARIA_LIVE_MESSAGE="react-flow__aria-live",selector$c=t=>t.ariaLiveMessage;function AriaLiveMessage({rfId:t}){const i=useStore(selector$c);return React.createElement("div",{id:`${ARIA_LIVE_MESSAGE}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:ariaLiveStyle},i)}function A11yDescriptions({rfId:t,disableKeyboardA11y:i}){return React.createElement(React.Fragment,null,React.createElement("div",{id:`${ARIA_NODE_DESC_KEY}-${t}`,style},"Press enter or space to select a node.",!i&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),React.createElement("div",{id:`${ARIA_EDGE_DESC_KEY}-${t}`,style},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!i&&React.createElement(AriaLiveMessage,{rfId:t}))}var useKeyPress=(t=null,i={actInsideInputWithModifier:!0})=>{const[a,n]=reactExports.useState(!1),y=reactExports.useRef(!1),x=reactExports.useRef(new Set([])),[k,S]=reactExports.useMemo(()=>{if(t!==null){const U=(Array.isArray(t)?t:[t]).filter(B=>typeof B=="string").map(B=>B.split("+")),C=U.reduce((B,W)=>B.concat(...W),[]);return[U,C]}return[[],[]]},[t]);return reactExports.useEffect(()=>{const E=typeof document<"u"?document:null,U=i?.target||E;if(t!==null){const C=Y=>{if(y.current=Y.ctrlKey||Y.metaKey||Y.shiftKey,(!y.current||y.current&&!i.actInsideInputWithModifier)&&isInputDOMNode(Y))return!1;const T=useKeyOrCode(Y.code,S);x.current.add(Y[T]),isMatchingKey(k,x.current,!1)&&(Y.preventDefault(),n(!0))},B=Y=>{if((!y.current||y.current&&!i.actInsideInputWithModifier)&&isInputDOMNode(Y))return!1;const T=useKeyOrCode(Y.code,S);isMatchingKey(k,x.current,!0)?(n(!1),x.current.clear()):x.current.delete(Y[T]),Y.key==="Meta"&&x.current.clear(),y.current=!1},W=()=>{x.current.clear(),n(!1)};return U?.addEventListener("keydown",C),U?.addEventListener("keyup",B),window.addEventListener("blur",W),()=>{U?.removeEventListener("keydown",C),U?.removeEventListener("keyup",B),window.removeEventListener("blur",W)}}},[t,n]),a};function isMatchingKey(t,i,a){return t.filter(n=>a||n.length===i.size).some(n=>n.every(y=>i.has(y)))}function useKeyOrCode(t,i){return i.includes(t)?"code":"key"}function calculateXYZPosition(t,i,a,n){const y=t.parentNode||t.parentId;if(!y)return a;const x=i.get(y),k=getNodePositionWithOrigin(x,n);return calculateXYZPosition(x,i,{x:(a.x??0)+k.x,y:(a.y??0)+k.y,z:(x[internalsSymbol]?.z??0)>(a.z??0)?x[internalsSymbol]?.z??0:a.z??0},n)}function updateAbsoluteNodePositions(t,i,a){t.forEach(n=>{const y=n.parentNode||n.parentId;if(y&&!t.has(y))throw new Error(`Parent node ${y} not found`);if(y||a?.[n.id]){const{x,y:k,z:S}=calculateXYZPosition(n,t,{...n.position,z:n[internalsSymbol]?.z??0},i);n.positionAbsolute={x,y:k},n[internalsSymbol].z=S,a?.[n.id]&&(n[internalsSymbol].isParent=!0)}})}function createNodeInternals(t,i,a,n){const y=new Map,x={},k=n?1e3:0;return t.forEach(S=>{const E=(isNumeric(S.zIndex)?S.zIndex:0)+(S.selected?k:0),U=i.get(S.id),C={...S,positionAbsolute:{x:S.position.x,y:S.position.y}},B=S.parentNode||S.parentId;B&&(x[B]=!0);const W=U?.type&&U?.type!==S.type;Object.defineProperty(C,internalsSymbol,{enumerable:!1,value:{handleBounds:W?void 0:U?.[internalsSymbol]?.handleBounds,z:E}}),y.set(S.id,C)}),updateAbsoluteNodePositions(y,a,x),y}function fitView(t,i={}){const{getNodes:a,width:n,height:y,minZoom:x,maxZoom:k,d3Zoom:S,d3Selection:E,fitViewOnInitDone:U,fitViewOnInit:C,nodeOrigin:B}=t(),W=i.initial&&!U&&C;if(S&&E&&(W||!i.initial)){const Z=a().filter(l=>{const f=i.includeHiddenNodes?l.width&&l.height:!l.hidden;return i.nodes?.length?f&&i.nodes.some(D=>D.id===l.id):f}),T=Z.every(l=>l.width&&l.height);if(Z.length>0&&T){const l=getNodesBounds(Z,B),{x:f,y:D,zoom:I}=getViewportForBounds(l,n,y,i.minZoom??x,i.maxZoom??k,i.padding??.1),V=identity.translate(f,D).scale(I);return typeof i.duration=="number"&&i.duration>0?S.transform(getD3Transition(E,i.duration),V):S.transform(E,V),!0}}return!1}function handleControlledNodeSelectionChange(t,i){return t.forEach(a=>{const n=i.get(a.id);n&&i.set(n.id,{...n,[internalsSymbol]:n[internalsSymbol],selected:a.selected})}),new Map(i)}function handleControlledEdgeSelectionChange(t,i){return i.map(a=>{const n=t.find(y=>y.id===a.id);return n&&(a.selected=n.selected),a})}function updateNodesAndEdgesSelections({changedNodes:t,changedEdges:i,get:a,set:n}){const{nodeInternals:y,edges:x,onNodesChange:k,onEdgesChange:S,hasDefaultNodes:E,hasDefaultEdges:U}=a();t?.length&&(E&&n({nodeInternals:handleControlledNodeSelectionChange(t,y)}),k?.(t)),i?.length&&(U&&n({edges:handleControlledEdgeSelectionChange(i,x)}),S?.(i))}const noop=()=>{},initialViewportHelper={zoomIn:noop,zoomOut:noop,zoomTo:noop,getZoom:()=>1,setViewport:noop,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:noop,fitBounds:noop,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},selector$b=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),useViewportHelper=()=>{const t=useStoreApi(),{d3Zoom:i,d3Selection:a}=useStore(selector$b,shallow$1);return reactExports.useMemo(()=>a&&i?{zoomIn:y=>i.scaleBy(getD3Transition(a,y?.duration),1.2),zoomOut:y=>i.scaleBy(getD3Transition(a,y?.duration),1/1.2),zoomTo:(y,x)=>i.scaleTo(getD3Transition(a,x?.duration),y),getZoom:()=>t.getState().transform[2],setViewport:(y,x)=>{const[k,S,E]=t.getState().transform,U=identity.translate(y.x??k,y.y??S).scale(y.zoom??E);i.transform(getD3Transition(a,x?.duration),U)},getViewport:()=>{const[y,x,k]=t.getState().transform;return{x:y,y:x,zoom:k}},fitView:y=>fitView(t.getState,y),setCenter:(y,x,k)=>{const{width:S,height:E,maxZoom:U}=t.getState(),C=typeof k?.zoom<"u"?k.zoom:U,B=S/2-y*C,W=E/2-x*C,Y=identity.translate(B,W).scale(C);i.transform(getD3Transition(a,k?.duration),Y)},fitBounds:(y,x)=>{const{width:k,height:S,minZoom:E,maxZoom:U}=t.getState(),{x:C,y:B,zoom:W}=getViewportForBounds(y,k,S,E,U,x?.padding??.1),Y=identity.translate(C,B).scale(W);i.transform(getD3Transition(a,x?.duration),Y)},project:y=>{const{transform:x,snapToGrid:k,snapGrid:S}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pointToRendererPoint(y,x,k,S)},screenToFlowPosition:y=>{const{transform:x,snapToGrid:k,snapGrid:S,domNode:E}=t.getState();if(!E)return y;const{x:U,y:C}=E.getBoundingClientRect(),B={x:y.x-U,y:y.y-C};return pointToRendererPoint(B,x,k,S)},flowToScreenPosition:y=>{const{transform:x,domNode:k}=t.getState();if(!k)return y;const{x:S,y:E}=k.getBoundingClientRect(),U=rendererPointToPoint(y,x);return{x:U.x+S,y:U.y+E}},viewportInitialized:!0}:initialViewportHelper,[i,a])};function useReactFlow(){const t=useViewportHelper(),i=useStoreApi(),a=reactExports.useCallback(()=>i.getState().getNodes().map(T=>({...T})),[]),n=reactExports.useCallback(T=>i.getState().nodeInternals.get(T),[]),y=reactExports.useCallback(()=>{const{edges:T=[]}=i.getState();return T.map(l=>({...l}))},[]),x=reactExports.useCallback(T=>{const{edges:l=[]}=i.getState();return l.find(f=>f.id===T)},[]),k=reactExports.useCallback(T=>{const{getNodes:l,setNodes:f,hasDefaultNodes:D,onNodesChange:I}=i.getState(),V=l(),K=typeof T=="function"?T(V):T;if(D)f(K);else if(I){const A=K.length===0?V.map(L=>({type:"remove",id:L.id})):K.map(L=>({item:L,type:"reset"}));I(A)}},[]),S=reactExports.useCallback(T=>{const{edges:l=[],setEdges:f,hasDefaultEdges:D,onEdgesChange:I}=i.getState(),V=typeof T=="function"?T(l):T;if(D)f(V);else if(I){const K=V.length===0?l.map(A=>({type:"remove",id:A.id})):V.map(A=>({item:A,type:"reset"}));I(K)}},[]),E=reactExports.useCallback(T=>{const l=Array.isArray(T)?T:[T],{getNodes:f,setNodes:D,hasDefaultNodes:I,onNodesChange:V}=i.getState();if(I){const A=[...f(),...l];D(A)}else if(V){const K=l.map(A=>({item:A,type:"add"}));V(K)}},[]),U=reactExports.useCallback(T=>{const l=Array.isArray(T)?T:[T],{edges:f=[],setEdges:D,hasDefaultEdges:I,onEdgesChange:V}=i.getState();if(I)D([...f,...l]);else if(V){const K=l.map(A=>({item:A,type:"add"}));V(K)}},[]),C=reactExports.useCallback(()=>{const{getNodes:T,edges:l=[],transform:f}=i.getState(),[D,I,V]=f;return{nodes:T().map(K=>({...K})),edges:l.map(K=>({...K})),viewport:{x:D,y:I,zoom:V}}},[]),B=reactExports.useCallback(({nodes:T,edges:l})=>{const{nodeInternals:f,getNodes:D,edges:I,hasDefaultNodes:V,hasDefaultEdges:K,onNodesDelete:A,onEdgesDelete:L,onNodesChange:G,onEdgesChange:ee}=i.getState(),ae=(T||[]).map(Ve=>Ve.id),Se=(l||[]).map(Ve=>Ve.id),$e=D().reduce((Ve,Ie)=>{const Xe=Ie.parentNode||Ie.parentId,et=!ae.includes(Ie.id)&&Xe&&Ve.find(rt=>rt.id===Xe);return(typeof Ie.deletable=="boolean"?Ie.deletable:!0)&&(ae.includes(Ie.id)||et)&&Ve.push(Ie),Ve},[]),qe=I.filter(Ve=>typeof Ve.deletable=="boolean"?Ve.deletable:!0),Pe=qe.filter(Ve=>Se.includes(Ve.id));if($e||Pe){const Ve=getConnectedEdges($e,qe),Ie=[...Pe,...Ve],Xe=Ie.reduce((et,tt)=>(et.includes(tt.id)||et.push(tt.id),et),[]);if((K||V)&&(K&&i.setState({edges:I.filter(et=>!Xe.includes(et.id))}),V&&($e.forEach(et=>{f.delete(et.id)}),i.setState({nodeInternals:new Map(f)}))),Xe.length>0&&(L?.(Ie),ee&&ee(Xe.map(et=>({id:et,type:"remove"})))),$e.length>0&&(A?.($e),G)){const et=$e.map(tt=>({id:tt.id,type:"remove"}));G(et)}}},[]),W=reactExports.useCallback(T=>{const l=isRectObject(T),f=l?null:i.getState().nodeInternals.get(T.id);return!l&&!f?[null,null,l]:[l?T:nodeToRect(f),f,l]},[]),Y=reactExports.useCallback((T,l=!0,f)=>{const[D,I,V]=W(T);return D?(f||i.getState().getNodes()).filter(K=>{if(!V&&(K.id===I.id||!K.positionAbsolute))return!1;const A=nodeToRect(K),L=getOverlappingArea(A,D);return l&&L>0||L>=D.width*D.height}):[]},[]),Z=reactExports.useCallback((T,l,f=!0)=>{const[D]=W(T);if(!D)return!1;const I=getOverlappingArea(D,l);return f&&I>0||I>=D.width*D.height},[]);return reactExports.useMemo(()=>({...t,getNodes:a,getNode:n,getEdges:y,getEdge:x,setNodes:k,setEdges:S,addNodes:E,addEdges:U,toObject:C,deleteElements:B,getIntersectingNodes:Y,isNodeIntersecting:Z}),[t,a,n,y,x,k,S,E,U,C,B,Y,Z])}const deleteKeyOptions={actInsideInputWithModifier:!1};var useGlobalKeyHandler=({deleteKeyCode:t,multiSelectionKeyCode:i})=>{const a=useStoreApi(),{deleteElements:n}=useReactFlow(),y=useKeyPress(t,deleteKeyOptions),x=useKeyPress(i);reactExports.useEffect(()=>{if(y){const{edges:k,getNodes:S}=a.getState(),E=S().filter(C=>C.selected),U=k.filter(C=>C.selected);n({nodes:E,edges:U}),a.setState({nodesSelectionActive:!1})}},[y]),reactExports.useEffect(()=>{a.setState({multiSelectionActive:x})},[x])};function useResizeHandler(t){const i=useStoreApi();reactExports.useEffect(()=>{let a;const n=()=>{if(!t.current)return;const y=getDimensions(t.current);(y.height===0||y.width===0)&&i.getState().onError?.("004",errorMessages.error004()),i.setState({width:y.width||500,height:y.height||500})};return n(),window.addEventListener("resize",n),t.current&&(a=new ResizeObserver(()=>n()),a.observe(t.current)),()=>{window.removeEventListener("resize",n),a&&t.current&&a.unobserve(t.current)}},[])}const containerStyle={position:"absolute",width:"100%",height:"100%",top:0,left:0},viewChanged=(t,i)=>t.x!==i.x||t.y!==i.y||t.zoom!==i.k,eventToFlowTransform=t=>({x:t.x,y:t.y,zoom:t.k}),isWrappedWithClass=(t,i)=>t.target.closest(`.${i}`),isRightClickPan=(t,i)=>i===2&&Array.isArray(t)&&t.includes(2),wheelDelta=t=>{const i=t.ctrlKey&&isMacOs()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*i},selector$a=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),ZoomPane=({onMove:t,onMoveStart:i,onMoveEnd:a,onPaneContextMenu:n,zoomOnScroll:y=!0,zoomOnPinch:x=!0,panOnScroll:k=!1,panOnScrollSpeed:S=.5,panOnScrollMode:E=PanOnScrollMode.Free,zoomOnDoubleClick:U=!0,elementsSelectable:C,panOnDrag:B=!0,defaultViewport:W,translateExtent:Y,minZoom:Z,maxZoom:T,zoomActivationKeyCode:l,preventScrolling:f=!0,children:D,noWheelClassName:I,noPanClassName:V})=>{const K=reactExports.useRef(),A=useStoreApi(),L=reactExports.useRef(!1),G=reactExports.useRef(!1),ee=reactExports.useRef(null),ae=reactExports.useRef({x:0,y:0,zoom:0}),{d3Zoom:Se,d3Selection:$e,d3ZoomHandler:qe,userSelectionActive:Pe}=useStore(selector$a,shallow$1),Ve=useKeyPress(l),Ie=reactExports.useRef(0),Xe=reactExports.useRef(!1),et=reactExports.useRef();return useResizeHandler(ee),reactExports.useEffect(()=>{if(ee.current){const tt=ee.current.getBoundingClientRect(),rt=zoom().scaleExtent([Z,T]).translateExtent(Y),ze=select(ee.current).call(rt),lt=identity.translate(W.x,W.y).scale(clamp(W.zoom,Z,T)),bt=[[0,0],[tt.width,tt.height]],At=rt.constrain()(lt,bt,Y);rt.transform(ze,At),rt.wheelDelta(wheelDelta),A.setState({d3Zoom:rt,d3Selection:ze,d3ZoomHandler:ze.on("wheel.zoom"),transform:[At.x,At.y,At.k],domNode:ee.current.closest(".react-flow")})}},[]),reactExports.useEffect(()=>{$e&&Se&&(k&&!Ve&&!Pe?$e.on("wheel.zoom",tt=>{if(isWrappedWithClass(tt,I))return!1;tt.preventDefault(),tt.stopImmediatePropagation();const rt=$e.property("__zoom").k||1;if(tt.ctrlKey&&x){const lr=pointer(tt),yr=wheelDelta(tt),$r=rt*Math.pow(2,yr);Se.scaleTo($e,$r,lr,tt);return}const ze=tt.deltaMode===1?20:1;let lt=E===PanOnScrollMode.Vertical?0:tt.deltaX*ze,bt=E===PanOnScrollMode.Horizontal?0:tt.deltaY*ze;!isMacOs()&&tt.shiftKey&&E!==PanOnScrollMode.Vertical&&(lt=tt.deltaY*ze,bt=0),Se.translateBy($e,-(lt/rt)*S,-(bt/rt)*S,{internal:!0});const At=eventToFlowTransform($e.property("__zoom")),{onViewportChangeStart:Vt,onViewportChange:Yt,onViewportChangeEnd:er}=A.getState();clearTimeout(et.current),Xe.current||(Xe.current=!0,i?.(tt,At),Vt?.(At)),Xe.current&&(t?.(tt,At),Yt?.(At),et.current=setTimeout(()=>{a?.(tt,At),er?.(At),Xe.current=!1},150))},{passive:!1}):typeof qe<"u"&&$e.on("wheel.zoom",function(tt,rt){if(!f&&tt.type==="wheel"&&!tt.ctrlKey||isWrappedWithClass(tt,I))return null;tt.preventDefault(),qe.call(this,tt,rt)},{passive:!1}))},[Pe,k,E,$e,Se,qe,Ve,x,f,I,i,t,a]),reactExports.useEffect(()=>{Se&&Se.on("start",tt=>{if(!tt.sourceEvent||tt.sourceEvent.internal)return null;Ie.current=tt.sourceEvent?.button;const{onViewportChangeStart:rt}=A.getState(),ze=eventToFlowTransform(tt.transform);L.current=!0,ae.current=ze,tt.sourceEvent?.type==="mousedown"&&A.setState({paneDragging:!0}),rt?.(ze),i?.(tt.sourceEvent,ze)})},[Se,i]),reactExports.useEffect(()=>{Se&&(Pe&&!L.current?Se.on("zoom",null):Pe||Se.on("zoom",tt=>{const{onViewportChange:rt}=A.getState();if(A.setState({transform:[tt.transform.x,tt.transform.y,tt.transform.k]}),G.current=!!(n&&isRightClickPan(B,Ie.current??0)),(t||rt)&&!tt.sourceEvent?.internal){const ze=eventToFlowTransform(tt.transform);rt?.(ze),t?.(tt.sourceEvent,ze)}}))},[Pe,Se,t,B,n]),reactExports.useEffect(()=>{Se&&Se.on("end",tt=>{if(!tt.sourceEvent||tt.sourceEvent.internal)return null;const{onViewportChangeEnd:rt}=A.getState();if(L.current=!1,A.setState({paneDragging:!1}),n&&isRightClickPan(B,Ie.current??0)&&!G.current&&n(tt.sourceEvent),G.current=!1,(a||rt)&&viewChanged(ae.current,tt.transform)){const ze=eventToFlowTransform(tt.transform);ae.current=ze,clearTimeout(K.current),K.current=setTimeout(()=>{rt?.(ze),a?.(tt.sourceEvent,ze)},k?150:0)}})},[Se,k,B,a,n]),reactExports.useEffect(()=>{Se&&Se.filter(tt=>{const rt=Ve||y,ze=x&&tt.ctrlKey;if((B===!0||Array.isArray(B)&&B.includes(1))&&tt.button===1&&tt.type==="mousedown"&&(isWrappedWithClass(tt,"react-flow__node")||isWrappedWithClass(tt,"react-flow__edge")))return!0;if(!B&&!rt&&!k&&!U&&!x||Pe||!U&&tt.type==="dblclick"||isWrappedWithClass(tt,I)&&tt.type==="wheel"||isWrappedWithClass(tt,V)&&(tt.type!=="wheel"||k&&tt.type==="wheel"&&!Ve)||!x&&tt.ctrlKey&&tt.type==="wheel"||!rt&&!k&&!ze&&tt.type==="wheel"||!B&&(tt.type==="mousedown"||tt.type==="touchstart")||Array.isArray(B)&&!B.includes(tt.button)&&tt.type==="mousedown")return!1;const lt=Array.isArray(B)&&B.includes(tt.button)||!tt.button||tt.button<=1;return(!tt.ctrlKey||tt.type==="wheel")&&lt})},[Pe,Se,y,x,k,U,B,C,Ve]),React.createElement("div",{className:"react-flow__renderer",ref:ee,style:containerStyle},D)},selector$9=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function UserSelection(){const{userSelectionActive:t,userSelectionRect:i}=useStore(selector$9,shallow$1);return t&&i?React.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:i.width,height:i.height,transform:`translate(${i.x}px, ${i.y}px)`}}):null}function handleParentExpand(t,i){const a=i.parentNode||i.parentId,n=t.find(y=>y.id===a);if(n){const y=i.position.x+i.width-n.width,x=i.position.y+i.height-n.height;if(y>0||x>0||i.position.x<0||i.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,y>0&&(n.style.width+=y),x>0&&(n.style.height+=x),i.position.x<0){const k=Math.abs(i.position.x);n.position.x=n.position.x-k,n.style.width+=k,i.position.x=0}if(i.position.y<0){const k=Math.abs(i.position.y);n.position.y=n.position.y-k,n.style.height+=k,i.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function applyChanges(t,i){if(t.some(n=>n.type==="reset"))return t.filter(n=>n.type==="reset").map(n=>n.item);const a=t.filter(n=>n.type==="add").map(n=>n.item);return i.reduce((n,y)=>{const x=t.filter(S=>S.id===y.id);if(x.length===0)return n.push(y),n;const k={...y};for(const S of x)if(S)switch(S.type){case"select":{k.selected=S.selected;break}case"position":{typeof S.position<"u"&&(k.position=S.position),typeof S.positionAbsolute<"u"&&(k.positionAbsolute=S.positionAbsolute),typeof S.dragging<"u"&&(k.dragging=S.dragging),k.expandParent&&handleParentExpand(n,k);break}case"dimensions":{typeof S.dimensions<"u"&&(k.width=S.dimensions.width,k.height=S.dimensions.height),typeof S.updateStyle<"u"&&(k.style={...k.style||{},...S.dimensions}),typeof S.resizing=="boolean"&&(k.resizing=S.resizing),k.expandParent&&handleParentExpand(n,k);break}case"remove":return n}return n.push(k),n},a)}function applyNodeChanges(t,i){return applyChanges(t,i)}function applyEdgeChanges(t,i){return applyChanges(t,i)}const createSelectionChange=(t,i)=>({id:t,type:"select",selected:i});function getSelectionChanges(t,i){return t.reduce((a,n)=>{const y=i.includes(n.id);return!n.selected&&y?(n.selected=!0,a.push(createSelectionChange(n.id,!0))):n.selected&&!y&&(n.selected=!1,a.push(createSelectionChange(n.id,!1))),a},[])}const wrapHandler=(t,i)=>a=>{a.target===i.current&&t?.(a)},selector$8=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Pane=reactExports.memo(({isSelecting:t,selectionMode:i=SelectionMode.Full,panOnDrag:a,onSelectionStart:n,onSelectionEnd:y,onPaneClick:x,onPaneContextMenu:k,onPaneScroll:S,onPaneMouseEnter:E,onPaneMouseMove:U,onPaneMouseLeave:C,children:B})=>{const W=reactExports.useRef(null),Y=useStoreApi(),Z=reactExports.useRef(0),T=reactExports.useRef(0),l=reactExports.useRef(),{userSelectionActive:f,elementsSelectable:D,dragging:I}=useStore(selector$8,shallow$1),V=()=>{Y.setState({userSelectionActive:!1,userSelectionRect:null}),Z.current=0,T.current=0},K=qe=>{x?.(qe),Y.getState().resetSelectedElements(),Y.setState({nodesSelectionActive:!1})},A=qe=>{if(Array.isArray(a)&&a?.includes(2)){qe.preventDefault();return}k?.(qe)},L=S?qe=>S(qe):void 0,G=qe=>{const{resetSelectedElements:Pe,domNode:Ve}=Y.getState();if(l.current=Ve?.getBoundingClientRect(),!D||!t||qe.button!==0||qe.target!==W.current||!l.current)return;const{x:Ie,y:Xe}=getEventPosition(qe,l.current);Pe(),Y.setState({userSelectionRect:{width:0,height:0,startX:Ie,startY:Xe,x:Ie,y:Xe}}),n?.(qe)},ee=qe=>{const{userSelectionRect:Pe,nodeInternals:Ve,edges:Ie,transform:Xe,onNodesChange:et,onEdgesChange:tt,nodeOrigin:rt,getNodes:ze}=Y.getState();if(!t||!l.current||!Pe)return;Y.setState({userSelectionActive:!0,nodesSelectionActive:!1});const lt=getEventPosition(qe,l.current),bt=Pe.startX??0,At=Pe.startY??0,Vt={...Pe,x:lt.x<bt?lt.x:bt,y:lt.y<At?lt.y:At,width:Math.abs(lt.x-bt),height:Math.abs(lt.y-At)},Yt=ze(),er=getNodesInside(Ve,Vt,Xe,i===SelectionMode.Partial,!0,rt),lr=getConnectedEdges(er,Ie).map($r=>$r.id),yr=er.map($r=>$r.id);if(Z.current!==yr.length){Z.current=yr.length;const $r=getSelectionChanges(Yt,yr);$r.length&&et?.($r)}if(T.current!==lr.length){T.current=lr.length;const $r=getSelectionChanges(Ie,lr);$r.length&&tt?.($r)}Y.setState({userSelectionRect:Vt})},ae=qe=>{if(qe.button!==0)return;const{userSelectionRect:Pe}=Y.getState();!f&&Pe&&qe.target===W.current&&K?.(qe),Y.setState({nodesSelectionActive:Z.current>0}),V(),y?.(qe)},Se=qe=>{f&&(Y.setState({nodesSelectionActive:Z.current>0}),y?.(qe)),V()},$e=D&&(t||f);return React.createElement("div",{className:cc(["react-flow__pane",{dragging:I,selection:t}]),onClick:$e?void 0:wrapHandler(K,W),onContextMenu:wrapHandler(A,W),onWheel:wrapHandler(L,W),onMouseEnter:$e?void 0:E,onMouseDown:$e?G:void 0,onMouseMove:$e?ee:U,onMouseUp:$e?ae:void 0,onMouseLeave:$e?Se:C,ref:W,style:containerStyle},B,React.createElement(UserSelection,null))});Pane.displayName="Pane";function isParentSelected(t,i){const a=t.parentNode||t.parentId;if(!a)return!1;const n=i.get(a);return n?n.selected?!0:isParentSelected(n,i):!1}function hasSelector(t,i,a){let n=t;do{if(n?.matches(i))return!0;if(n===a.current)return!1;n=n.parentElement}while(n);return!1}function getDragItems(t,i,a,n){return Array.from(t.values()).filter(y=>(y.selected||y.id===n)&&(!y.parentNode||y.parentId||!isParentSelected(y,t))&&(y.draggable||i&&typeof y.draggable>"u")).map(y=>({id:y.id,position:y.position||{x:0,y:0},positionAbsolute:y.positionAbsolute||{x:0,y:0},distance:{x:a.x-(y.positionAbsolute?.x??0),y:a.y-(y.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:y.extent,parentNode:y.parentNode||y.parentId,parentId:y.parentNode||y.parentId,width:y.width,height:y.height,expandParent:y.expandParent}))}function clampNodeExtent(t,i){return!i||i==="parent"?i:[i[0],[i[1][0]-(t.width||0),i[1][1]-(t.height||0)]]}function calcNextPosition(t,i,a,n,y=[0,0],x){const k=clampNodeExtent(t,t.extent||n);let S=k;const E=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(E&&t.width&&t.height){const B=a.get(E),{x:W,y:Y}=getNodePositionWithOrigin(B,y).positionAbsolute;S=B&&isNumeric(W)&&isNumeric(Y)&&isNumeric(B.width)&&isNumeric(B.height)?[[W+t.width*y[0],Y+t.height*y[1]],[W+B.width-t.width+t.width*y[0],Y+B.height-t.height+t.height*y[1]]]:S}else x?.("005",errorMessages.error005()),S=k;else if(t.extent&&E&&t.extent!=="parent"){const B=a.get(E),{x:W,y:Y}=getNodePositionWithOrigin(B,y).positionAbsolute;S=[[t.extent[0][0]+W,t.extent[0][1]+Y],[t.extent[1][0]+W,t.extent[1][1]+Y]]}let U={x:0,y:0};if(E){const B=a.get(E);U=getNodePositionWithOrigin(B,y).positionAbsolute}const C=S&&S!=="parent"?clampPosition(i,S):i;return{position:{x:C.x-U.x,y:C.y-U.y},positionAbsolute:C}}function getEventHandlerParams({nodeId:t,dragItems:i,nodeInternals:a}){const n=i.map(y=>({...a.get(y.id),position:y.position,positionAbsolute:y.positionAbsolute}));return[t?n.find(y=>y.id===t):n[0],n]}const getHandleBounds=(t,i,a,n)=>{const y=i.querySelectorAll(t);if(!y||!y.length)return null;const x=Array.from(y),k=i.getBoundingClientRect(),S={x:k.width*n[0],y:k.height*n[1]};return x.map(E=>{const U=E.getBoundingClientRect();return{id:E.getAttribute("data-handleid"),position:E.getAttribute("data-handlepos"),x:(U.left-k.left-S.x)/a,y:(U.top-k.top-S.y)/a,...getDimensions(E)}})};function getMouseHandler(t,i,a){return a===void 0?a:n=>{const y=i().nodeInternals.get(t);y&&a(n,{...y})}}function handleNodeClick({id:t,store:i,unselect:a=!1,nodeRef:n}){const{addSelectedNodes:y,unselectNodesAndEdges:x,multiSelectionActive:k,nodeInternals:S,onError:E}=i.getState(),U=S.get(t);if(!U){E?.("012",errorMessages.error012(t));return}i.setState({nodesSelectionActive:!1}),U.selected?(a||U.selected&&k)&&(x({nodes:[U],edges:[]}),requestAnimationFrame(()=>n?.current?.blur())):y([t])}function useGetPointerPosition(){const t=useStoreApi();return reactExports.useCallback(({sourceEvent:a})=>{const{transform:n,snapGrid:y,snapToGrid:x}=t.getState(),k=a.touches?a.touches[0].clientX:a.clientX,S=a.touches?a.touches[0].clientY:a.clientY,E={x:(k-n[0])/n[2],y:(S-n[1])/n[2]};return{xSnapped:x?y[0]*Math.round(E.x/y[0]):E.x,ySnapped:x?y[1]*Math.round(E.y/y[1]):E.y,...E}},[])}function wrapSelectionDragFunc(t){return(i,a,n)=>t?.(i,n)}function useDrag({nodeRef:t,disabled:i=!1,noDragClassName:a,handleSelector:n,nodeId:y,isSelectable:x,selectNodesOnDrag:k}){const S=useStoreApi(),[E,U]=reactExports.useState(!1),C=reactExports.useRef([]),B=reactExports.useRef({x:null,y:null}),W=reactExports.useRef(0),Y=reactExports.useRef(null),Z=reactExports.useRef({x:0,y:0}),T=reactExports.useRef(null),l=reactExports.useRef(!1),f=reactExports.useRef(!1),D=reactExports.useRef(!1),I=useGetPointerPosition();return reactExports.useEffect(()=>{if(t?.current){const V=select(t.current),K=({x:G,y:ee})=>{const{nodeInternals:ae,onNodeDrag:Se,onSelectionDrag:$e,updateNodePositions:qe,nodeExtent:Pe,snapGrid:Ve,snapToGrid:Ie,nodeOrigin:Xe,onError:et}=S.getState();B.current={x:G,y:ee};let tt=!1,rt={x:0,y:0,x2:0,y2:0};if(C.current.length>1&&Pe){const lt=getNodesBounds(C.current,Xe);rt=rectToBox(lt)}if(C.current=C.current.map(lt=>{const bt={x:G-lt.distance.x,y:ee-lt.distance.y};Ie&&(bt.x=Ve[0]*Math.round(bt.x/Ve[0]),bt.y=Ve[1]*Math.round(bt.y/Ve[1]));const At=[[Pe[0][0],Pe[0][1]],[Pe[1][0],Pe[1][1]]];C.current.length>1&&Pe&&!lt.extent&&(At[0][0]=lt.positionAbsolute.x-rt.x+Pe[0][0],At[1][0]=lt.positionAbsolute.x+(lt.width??0)-rt.x2+Pe[1][0],At[0][1]=lt.positionAbsolute.y-rt.y+Pe[0][1],At[1][1]=lt.positionAbsolute.y+(lt.height??0)-rt.y2+Pe[1][1]);const Vt=calcNextPosition(lt,bt,ae,At,Xe,et);return tt=tt||lt.position.x!==Vt.position.x||lt.position.y!==Vt.position.y,lt.position=Vt.position,lt.positionAbsolute=Vt.positionAbsolute,lt}),!tt)return;qe(C.current,!0,!0),U(!0);const ze=y?Se:wrapSelectionDragFunc($e);if(ze&&T.current){const[lt,bt]=getEventHandlerParams({nodeId:y,dragItems:C.current,nodeInternals:ae});ze(T.current,lt,bt)}},A=()=>{if(!Y.current)return;const[G,ee]=calcAutoPan(Z.current,Y.current);if(G!==0||ee!==0){const{transform:ae,panBy:Se}=S.getState();B.current.x=(B.current.x??0)-G/ae[2],B.current.y=(B.current.y??0)-ee/ae[2],Se({x:G,y:ee})&&K(B.current)}W.current=requestAnimationFrame(A)},L=G=>{const{nodeInternals:ee,multiSelectionActive:ae,nodesDraggable:Se,unselectNodesAndEdges:$e,onNodeDragStart:qe,onSelectionDragStart:Pe}=S.getState();f.current=!0;const Ve=y?qe:wrapSelectionDragFunc(Pe);(!k||!x)&&!ae&&y&&(ee.get(y)?.selected||$e()),y&&x&&k&&handleNodeClick({id:y,store:S,nodeRef:t});const Ie=I(G);if(B.current=Ie,C.current=getDragItems(ee,Se,Ie,y),Ve&&C.current){const[Xe,et]=getEventHandlerParams({nodeId:y,dragItems:C.current,nodeInternals:ee});Ve(G.sourceEvent,Xe,et)}};if(i)V.on(".drag",null);else{const G=drag().on("start",ee=>{const{domNode:ae,nodeDragThreshold:Se}=S.getState();Se===0&&L(ee),D.current=!1;const $e=I(ee);B.current=$e,Y.current=ae?.getBoundingClientRect()||null,Z.current=getEventPosition(ee.sourceEvent,Y.current)}).on("drag",ee=>{const ae=I(ee),{autoPanOnNodeDrag:Se,nodeDragThreshold:$e}=S.getState();if(ee.sourceEvent.type==="touchmove"&&ee.sourceEvent.touches.length>1&&(D.current=!0),!D.current){if(!l.current&&f.current&&Se&&(l.current=!0,A()),!f.current){const qe=ae.xSnapped-(B?.current?.x??0),Pe=ae.ySnapped-(B?.current?.y??0);Math.sqrt(qe*qe+Pe*Pe)>$e&&L(ee)}(B.current.x!==ae.xSnapped||B.current.y!==ae.ySnapped)&&C.current&&f.current&&(T.current=ee.sourceEvent,Z.current=getEventPosition(ee.sourceEvent,Y.current),K(ae))}}).on("end",ee=>{if(!(!f.current||D.current)&&(U(!1),l.current=!1,f.current=!1,cancelAnimationFrame(W.current),C.current)){const{updateNodePositions:ae,nodeInternals:Se,onNodeDragStop:$e,onSelectionDragStop:qe}=S.getState(),Pe=y?$e:wrapSelectionDragFunc(qe);if(ae(C.current,!1,!1),Pe){const[Ve,Ie]=getEventHandlerParams({nodeId:y,dragItems:C.current,nodeInternals:Se});Pe(ee.sourceEvent,Ve,Ie)}}}).filter(ee=>{const ae=ee.target;return!ee.button&&(!a||!hasSelector(ae,`.${a}`,t))&&(!n||hasSelector(ae,n,t))});return V.call(G),()=>{V.on(".drag",null)}}}},[t,i,a,n,x,S,y,k,I]),E}function useUpdateNodePositions(){const t=useStoreApi();return reactExports.useCallback(a=>{const{nodeInternals:n,nodeExtent:y,updateNodePositions:x,getNodes:k,snapToGrid:S,snapGrid:E,onError:U,nodesDraggable:C}=t.getState(),B=k().filter(D=>D.selected&&(D.draggable||C&&typeof D.draggable>"u")),W=S?E[0]:5,Y=S?E[1]:5,Z=a.isShiftPressed?4:1,T=a.x*W*Z,l=a.y*Y*Z,f=B.map(D=>{if(D.positionAbsolute){const I={x:D.positionAbsolute.x+T,y:D.positionAbsolute.y+l};S&&(I.x=E[0]*Math.round(I.x/E[0]),I.y=E[1]*Math.round(I.y/E[1]));const{positionAbsolute:V,position:K}=calcNextPosition(D,I,n,y,void 0,U);D.position=K,D.positionAbsolute=V}return D});x(f,!0,!1)},[])}const arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wrapNode=t=>{const i=({id:a,type:n,data:y,xPos:x,yPos:k,xPosOrigin:S,yPosOrigin:E,selected:U,onClick:C,onMouseEnter:B,onMouseMove:W,onMouseLeave:Y,onContextMenu:Z,onDoubleClick:T,style:l,className:f,isDraggable:D,isSelectable:I,isConnectable:V,isFocusable:K,selectNodesOnDrag:A,sourcePosition:L,targetPosition:G,hidden:ee,resizeObserver:ae,dragHandle:Se,zIndex:$e,isParent:qe,noDragClassName:Pe,noPanClassName:Ve,initialized:Ie,disableKeyboardA11y:Xe,ariaLabel:et,rfId:tt,hasHandleBounds:rt})=>{const ze=useStoreApi(),lt=reactExports.useRef(null),bt=reactExports.useRef(null),At=reactExports.useRef(L),Vt=reactExports.useRef(G),Yt=reactExports.useRef(n),er=I||D||C||B||W||Y,lr=useUpdateNodePositions(),yr=getMouseHandler(a,ze.getState,B),$r=getMouseHandler(a,ze.getState,W),ia=getMouseHandler(a,ze.getState,Y),Sa=getMouseHandler(a,ze.getState,Z),Xr=getMouseHandler(a,ze.getState,T),fr=Ta=>{const{nodeDragThreshold:ua}=ze.getState();if(I&&(!A||!D||ua>0)&&handleNodeClick({id:a,store:ze,nodeRef:lt}),C){const Ua=ze.getState().nodeInternals.get(a);Ua&&C(Ta,{...Ua})}},Hr=Ta=>{if(!isInputDOMNode(Ta)&&!Xe)if(elementSelectionKeys.includes(Ta.key)&&I){const ua=Ta.key==="Escape";handleNodeClick({id:a,store:ze,unselect:ua,nodeRef:lt})}else D&&U&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,Ta.key)&&(ze.setState({ariaLiveMessage:`Moved selected node ${Ta.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~x}, y: ${~~k}`}),lr({x:arrowKeyDiffs[Ta.key].x,y:arrowKeyDiffs[Ta.key].y,isShiftPressed:Ta.shiftKey}))};reactExports.useEffect(()=>()=>{bt.current&&(ae?.unobserve(bt.current),bt.current=null)},[]),reactExports.useEffect(()=>{if(lt.current&&!ee){const Ta=lt.current;(!Ie||!rt||bt.current!==Ta)&&(bt.current&&ae?.unobserve(bt.current),ae?.observe(Ta),bt.current=Ta)}},[ee,Ie,rt]),reactExports.useEffect(()=>{const Ta=Yt.current!==n,ua=At.current!==L,Ua=Vt.current!==G;lt.current&&(Ta||ua||Ua)&&(Ta&&(Yt.current=n),ua&&(At.current=L),Ua&&(Vt.current=G),ze.getState().updateNodeDimensions([{id:a,nodeElement:lt.current,forceUpdate:!0}]))},[a,n,L,G]);const ya=useDrag({nodeRef:lt,disabled:ee||!D,noDragClassName:Pe,handleSelector:Se,nodeId:a,isSelectable:I,selectNodesOnDrag:A});return ee?null:React.createElement("div",{className:cc(["react-flow__node",`react-flow__node-${n}`,{[Ve]:D},f,{selected:U,selectable:I,parent:qe,dragging:ya}]),ref:lt,style:{zIndex:$e,transform:`translate(${S}px,${E}px)`,pointerEvents:er?"all":"none",visibility:Ie?"visible":"hidden",...l},"data-id":a,"data-testid":`rf__node-${a}`,onMouseEnter:yr,onMouseMove:$r,onMouseLeave:ia,onContextMenu:Sa,onClick:fr,onDoubleClick:Xr,onKeyDown:K?Hr:void 0,tabIndex:K?0:void 0,role:K?"button":void 0,"aria-describedby":Xe?void 0:`${ARIA_NODE_DESC_KEY}-${tt}`,"aria-label":et},React.createElement(Provider,{value:a},React.createElement(t,{id:a,data:y,type:n,xPos:x,yPos:k,selected:U,isConnectable:V,sourcePosition:L,targetPosition:G,dragging:ya,dragHandle:Se,zIndex:$e})))};return i.displayName="NodeWrapper",reactExports.memo(i)};const selector$7=t=>{const i=t.getNodes().filter(a=>a.selected);return{...getNodesBounds(i,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function NodesSelection({onSelectionContextMenu:t,noPanClassName:i,disableKeyboardA11y:a}){const n=useStoreApi(),{width:y,height:x,x:k,y:S,transformString:E,userSelectionActive:U}=useStore(selector$7,shallow$1),C=useUpdateNodePositions(),B=reactExports.useRef(null);if(reactExports.useEffect(()=>{a||B.current?.focus({preventScroll:!0})},[a]),useDrag({nodeRef:B}),U||!y||!x)return null;const W=t?Z=>{const T=n.getState().getNodes().filter(l=>l.selected);t(Z,T)}:void 0,Y=Z=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,Z.key)&&C({x:arrowKeyDiffs[Z.key].x,y:arrowKeyDiffs[Z.key].y,isShiftPressed:Z.shiftKey})};return React.createElement("div",{className:cc(["react-flow__nodesselection","react-flow__container",i]),style:{transform:E}},React.createElement("div",{ref:B,className:"react-flow__nodesselection-rect",onContextMenu:W,tabIndex:a?void 0:-1,onKeyDown:a?void 0:Y,style:{width:y,height:x,top:S,left:k}}))}var NodesSelection$1=reactExports.memo(NodesSelection);const selector$6=t=>t.nodesSelectionActive,FlowRenderer=({children:t,onPaneClick:i,onPaneMouseEnter:a,onPaneMouseMove:n,onPaneMouseLeave:y,onPaneContextMenu:x,onPaneScroll:k,deleteKeyCode:S,onMove:E,onMoveStart:U,onMoveEnd:C,selectionKeyCode:B,selectionOnDrag:W,selectionMode:Y,onSelectionStart:Z,onSelectionEnd:T,multiSelectionKeyCode:l,panActivationKeyCode:f,zoomActivationKeyCode:D,elementsSelectable:I,zoomOnScroll:V,zoomOnPinch:K,panOnScroll:A,panOnScrollSpeed:L,panOnScrollMode:G,zoomOnDoubleClick:ee,panOnDrag:ae,defaultViewport:Se,translateExtent:$e,minZoom:qe,maxZoom:Pe,preventScrolling:Ve,onSelectionContextMenu:Ie,noWheelClassName:Xe,noPanClassName:et,disableKeyboardA11y:tt})=>{const rt=useStore(selector$6),ze=useKeyPress(B),lt=useKeyPress(f),bt=lt||ae,At=lt||A,Vt=ze||W&&bt!==!0;return useGlobalKeyHandler({deleteKeyCode:S,multiSelectionKeyCode:l}),React.createElement(ZoomPane,{onMove:E,onMoveStart:U,onMoveEnd:C,onPaneContextMenu:x,elementsSelectable:I,zoomOnScroll:V,zoomOnPinch:K,panOnScroll:At,panOnScrollSpeed:L,panOnScrollMode:G,zoomOnDoubleClick:ee,panOnDrag:!ze&&bt,defaultViewport:Se,translateExtent:$e,minZoom:qe,maxZoom:Pe,zoomActivationKeyCode:D,preventScrolling:Ve,noWheelClassName:Xe,noPanClassName:et},React.createElement(Pane,{onSelectionStart:Z,onSelectionEnd:T,onPaneClick:i,onPaneMouseEnter:a,onPaneMouseMove:n,onPaneMouseLeave:y,onPaneContextMenu:x,onPaneScroll:k,panOnDrag:bt,isSelecting:!!Vt,selectionMode:Y},t,rt&&React.createElement(NodesSelection$1,{onSelectionContextMenu:Ie,noPanClassName:et,disableKeyboardA11y:tt})))};FlowRenderer.displayName="FlowRenderer";var FlowRenderer$1=reactExports.memo(FlowRenderer);function useVisibleNodes(t){return useStore(reactExports.useCallback(a=>t?getNodesInside(a.nodeInternals,{x:0,y:0,width:a.width,height:a.height},a.transform,!0):a.getNodes(),[t]))}function createNodeTypes(t){const i={input:wrapNode(t.input||InputNode$1),default:wrapNode(t.default||DefaultNode$1),output:wrapNode(t.output||OutputNode$1),group:wrapNode(t.group||GroupNode)},a={},n=Object.keys(t).filter(y=>!["input","default","output","group"].includes(y)).reduce((y,x)=>(y[x]=wrapNode(t[x]||DefaultNode$1),y),a);return{...i,...n}}const getPositionWithOrigin=({x:t,y:i,width:a,height:n,origin:y})=>!a||!n?{x:t,y:i}:y[0]<0||y[1]<0||y[0]>1||y[1]>1?{x:t,y:i}:{x:t-a*y[0],y:i-n*y[1]},selector$5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),NodeRenderer=t=>{const{nodesDraggable:i,nodesConnectable:a,nodesFocusable:n,elementsSelectable:y,updateNodeDimensions:x,onError:k}=useStore(selector$5,shallow$1),S=useVisibleNodes(t.onlyRenderVisibleElements),E=reactExports.useRef(),U=reactExports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const C=new ResizeObserver(B=>{const W=B.map(Y=>({id:Y.target.getAttribute("data-id"),nodeElement:Y.target,forceUpdate:!0}));x(W)});return E.current=C,C},[]);return reactExports.useEffect(()=>()=>{E?.current?.disconnect()},[]),React.createElement("div",{className:"react-flow__nodes",style:containerStyle},S.map(C=>{let B=C.type||"default";t.nodeTypes[B]||(k?.("003",errorMessages.error003(B)),B="default");const W=t.nodeTypes[B]||t.nodeTypes.default,Y=!!(C.draggable||i&&typeof C.draggable>"u"),Z=!!(C.selectable||y&&typeof C.selectable>"u"),T=!!(C.connectable||a&&typeof C.connectable>"u"),l=!!(C.focusable||n&&typeof C.focusable>"u"),f=t.nodeExtent?clampPosition(C.positionAbsolute,t.nodeExtent):C.positionAbsolute,D=f?.x??0,I=f?.y??0,V=getPositionWithOrigin({x:D,y:I,width:C.width??0,height:C.height??0,origin:t.nodeOrigin});return React.createElement(W,{key:C.id,id:C.id,className:C.className,style:C.style,type:B,data:C.data,sourcePosition:C.sourcePosition||Position.Bottom,targetPosition:C.targetPosition||Position.Top,hidden:C.hidden,xPos:D,yPos:I,xPosOrigin:V.x,yPosOrigin:V.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!C.selected,isDraggable:Y,isSelectable:Z,isConnectable:T,isFocusable:l,resizeObserver:U,dragHandle:C.dragHandle,zIndex:C[internalsSymbol]?.z??0,isParent:!!C[internalsSymbol]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!C.width&&!!C.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:C.ariaLabel,hasHandleBounds:!!C[internalsSymbol]?.handleBounds})}))};NodeRenderer.displayName="NodeRenderer";var NodeRenderer$1=reactExports.memo(NodeRenderer);const shiftX=(t,i,a)=>a===Position.Left?t-i:a===Position.Right?t+i:t,shiftY=(t,i,a)=>a===Position.Top?t-i:a===Position.Bottom?t+i:t,EdgeUpdaterClassName="react-flow__edgeupdater",EdgeAnchor=({position:t,centerX:i,centerY:a,radius:n=10,onMouseDown:y,onMouseEnter:x,onMouseOut:k,type:S})=>React.createElement("circle",{onMouseDown:y,onMouseEnter:x,onMouseOut:k,className:cc([EdgeUpdaterClassName,`${EdgeUpdaterClassName}-${S}`]),cx:shiftX(i,n,t),cy:shiftY(a,n,t),r:n,stroke:"transparent",fill:"transparent"}),alwaysValidConnection=()=>!0;var wrapEdge=t=>{const i=({id:a,className:n,type:y,data:x,onClick:k,onEdgeDoubleClick:S,selected:E,animated:U,label:C,labelStyle:B,labelShowBg:W,labelBgStyle:Y,labelBgPadding:Z,labelBgBorderRadius:T,style:l,source:f,target:D,sourceX:I,sourceY:V,targetX:K,targetY:A,sourcePosition:L,targetPosition:G,elementsSelectable:ee,hidden:ae,sourceHandleId:Se,targetHandleId:$e,onContextMenu:qe,onMouseEnter:Pe,onMouseMove:Ve,onMouseLeave:Ie,reconnectRadius:Xe,onReconnect:et,onReconnectStart:tt,onReconnectEnd:rt,markerEnd:ze,markerStart:lt,rfId:bt,ariaLabel:At,isFocusable:Vt,isReconnectable:Yt,pathOptions:er,interactionWidth:lr,disableKeyboardA11y:yr})=>{const $r=reactExports.useRef(null),[ia,Sa]=reactExports.useState(!1),[Xr,fr]=reactExports.useState(!1),Hr=useStoreApi(),ya=reactExports.useMemo(()=>`url('#${getMarkerId(lt,bt)}')`,[lt,bt]),Ta=reactExports.useMemo(()=>`url('#${getMarkerId(ze,bt)}')`,[ze,bt]);if(ae)return null;const ua=Dr=>{const{edges:Ea,addSelectedEdges:da,unselectNodesAndEdges:Tt,multiSelectionActive:Lr}=Hr.getState(),Gr=Ea.find(wa=>wa.id===a);Gr&&(ee&&(Hr.setState({nodesSelectionActive:!1}),Gr.selected&&Lr?(Tt({nodes:[],edges:[Gr]}),$r.current?.blur()):da([a])),k&&k(Dr,Gr))},Ua=getMouseHandler$1(a,Hr.getState,S),Ya=getMouseHandler$1(a,Hr.getState,qe),Ia=getMouseHandler$1(a,Hr.getState,Pe),Na=getMouseHandler$1(a,Hr.getState,Ve),Ra=getMouseHandler$1(a,Hr.getState,Ie),oa=(Dr,Ea)=>{if(Dr.button!==0)return;const{edges:da,isValidConnection:Tt}=Hr.getState(),Lr=Ea?D:f,Gr=(Ea?$e:Se)||null,wa=Ea?"target":"source",Rr=Tt||alwaysValidConnection,ga=Ea,kt=da.find(Qe=>Qe.id===a);fr(!0),tt?.(Dr,kt,wa);const ha=Qe=>{fr(!1),rt?.(Qe,kt,wa)};handlePointerDown({event:Dr,handleId:Gr,nodeId:Lr,onConnect:Qe=>et?.(kt,Qe),isTarget:ga,getState:Hr.getState,setState:Hr.setState,isValidConnection:Rr,edgeUpdaterType:wa,onReconnectEnd:ha})},rn=Dr=>oa(Dr,!0),Za=Dr=>oa(Dr,!1),Nt=()=>Sa(!0),Gt=()=>Sa(!1),ur=!ee&&!k,Qr=Dr=>{if(!yr&&elementSelectionKeys.includes(Dr.key)&&ee){const{unselectNodesAndEdges:Ea,addSelectedEdges:da,edges:Tt}=Hr.getState();Dr.key==="Escape"?($r.current?.blur(),Ea({edges:[Tt.find(Gr=>Gr.id===a)]})):da([a])}};return React.createElement("g",{className:cc(["react-flow__edge",`react-flow__edge-${y}`,n,{selected:E,animated:U,inactive:ur,updating:ia}]),onClick:ua,onDoubleClick:Ua,onContextMenu:Ya,onMouseEnter:Ia,onMouseMove:Na,onMouseLeave:Ra,onKeyDown:Vt?Qr:void 0,tabIndex:Vt?0:void 0,role:Vt?"button":"img","data-testid":`rf__edge-${a}`,"aria-label":At===null?void 0:At||`Edge from ${f} to ${D}`,"aria-describedby":Vt?`${ARIA_EDGE_DESC_KEY}-${bt}`:void 0,ref:$r},!Xr&&React.createElement(t,{id:a,source:f,target:D,selected:E,animated:U,label:C,labelStyle:B,labelShowBg:W,labelBgStyle:Y,labelBgPadding:Z,labelBgBorderRadius:T,data:x,style:l,sourceX:I,sourceY:V,targetX:K,targetY:A,sourcePosition:L,targetPosition:G,sourceHandleId:Se,targetHandleId:$e,markerStart:ya,markerEnd:Ta,pathOptions:er,interactionWidth:lr}),Yt&&React.createElement(React.Fragment,null,(Yt==="source"||Yt===!0)&&React.createElement(EdgeAnchor,{position:L,centerX:I,centerY:V,radius:Xe,onMouseDown:rn,onMouseEnter:Nt,onMouseOut:Gt,type:"source"}),(Yt==="target"||Yt===!0)&&React.createElement(EdgeAnchor,{position:G,centerX:K,centerY:A,radius:Xe,onMouseDown:Za,onMouseEnter:Nt,onMouseOut:Gt,type:"target"})))};return i.displayName="EdgeWrapper",reactExports.memo(i)};function createEdgeTypes(t){const i={default:wrapEdge(t.default||BezierEdge),straight:wrapEdge(t.bezier||StraightEdge),step:wrapEdge(t.step||StepEdge),smoothstep:wrapEdge(t.step||SmoothStepEdge),simplebezier:wrapEdge(t.simplebezier||SimpleBezierEdge)},a={},n=Object.keys(t).filter(y=>!["default","bezier"].includes(y)).reduce((y,x)=>(y[x]=wrapEdge(t[x]||BezierEdge),y),a);return{...i,...n}}function getHandlePosition(t,i,a=null){const n=(a?.x||0)+i.x,y=(a?.y||0)+i.y,x=a?.width||i.width,k=a?.height||i.height;switch(t){case Position.Top:return{x:n+x/2,y};case Position.Right:return{x:n+x,y:y+k/2};case Position.Bottom:return{x:n+x/2,y:y+k};case Position.Left:return{x:n,y:y+k/2}}}function getHandle(t,i){return t?t.length===1||!i?t[0]:i&&t.find(a=>a.id===i)||null:null}const getEdgePositions=(t,i,a,n,y,x)=>{const k=getHandlePosition(a,t,i),S=getHandlePosition(x,n,y);return{sourceX:k.x,sourceY:k.y,targetX:S.x,targetY:S.y}};function isEdgeVisible({sourcePos:t,targetPos:i,sourceWidth:a,sourceHeight:n,targetWidth:y,targetHeight:x,width:k,height:S,transform:E}){const U={x:Math.min(t.x,i.x),y:Math.min(t.y,i.y),x2:Math.max(t.x+a,i.x+y),y2:Math.max(t.y+n,i.y+x)};U.x===U.x2&&(U.x2+=1),U.y===U.y2&&(U.y2+=1);const C=rectToBox({x:(0-E[0])/E[2],y:(0-E[1])/E[2],width:k/E[2],height:S/E[2]}),B=Math.max(0,Math.min(C.x2,U.x2)-Math.max(C.x,U.x)),W=Math.max(0,Math.min(C.y2,U.y2)-Math.max(C.y,U.y));return Math.ceil(B*W)>0}function getNodeData(t){const i=t?.[internalsSymbol]?.handleBounds||null,a=i&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},i,!!a]}const defaultEdgeTree=[{level:0,isMaxLevel:!0,edges:[]}];function groupEdgesByZLevel(t,i,a=!1){let n=-1;const y=t.reduce((k,S)=>{const E=isNumeric(S.zIndex);let U=E?S.zIndex:0;if(a){const C=i.get(S.target),B=i.get(S.source),W=S.selected||C?.selected||B?.selected,Y=Math.max(B?.[internalsSymbol]?.z||0,C?.[internalsSymbol]?.z||0,1e3);U=(E?S.zIndex:0)+(W?Y:0)}return k[U]?k[U].push(S):k[U]=[S],n=U>n?U:n,k},{}),x=Object.entries(y).map(([k,S])=>{const E=+k;return{edges:S,level:E,isMaxLevel:E===n}});return x.length===0?defaultEdgeTree:x}function useVisibleEdges(t,i,a){const n=useStore(reactExports.useCallback(y=>t?y.edges.filter(x=>{const k=i.get(x.source),S=i.get(x.target);return k?.width&&k?.height&&S?.width&&S?.height&&isEdgeVisible({sourcePos:k.positionAbsolute||{x:0,y:0},targetPos:S.positionAbsolute||{x:0,y:0},sourceWidth:k.width,sourceHeight:k.height,targetWidth:S.width,targetHeight:S.height,width:y.width,height:y.height,transform:y.transform})}):y.edges,[t,i]));return groupEdgesByZLevel(n,i,a)}const ArrowSymbol=({color:t="none",strokeWidth:i=1})=>React.createElement("polyline",{style:{stroke:t,strokeWidth:i},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ArrowClosedSymbol=({color:t="none",strokeWidth:i=1})=>React.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:i},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),MarkerSymbols={[MarkerType.Arrow]:ArrowSymbol,[MarkerType.ArrowClosed]:ArrowClosedSymbol};function useMarkerSymbol(t){const i=useStoreApi();return reactExports.useMemo(()=>Object.prototype.hasOwnProperty.call(MarkerSymbols,t)?MarkerSymbols[t]:(i.getState().onError?.("009",errorMessages.error009(t)),null),[t])}const Marker=({id:t,type:i,color:a,width:n=12.5,height:y=12.5,markerUnits:x="strokeWidth",strokeWidth:k,orient:S="auto-start-reverse"})=>{const E=useMarkerSymbol(i);return E?React.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${n}`,markerHeight:`${y}`,viewBox:"-10 -10 20 20",markerUnits:x,orient:S,refX:"0",refY:"0"},React.createElement(E,{color:a,strokeWidth:k})):null},markerSelector=({defaultColor:t,rfId:i})=>a=>{const n=[];return a.edges.reduce((y,x)=>([x.markerStart,x.markerEnd].forEach(k=>{if(k&&typeof k=="object"){const S=getMarkerId(k,i);n.includes(S)||(y.push({id:S,color:k.color||t,...k}),n.push(S))}}),y),[]).sort((y,x)=>y.id.localeCompare(x.id))},MarkerDefinitions=({defaultColor:t,rfId:i})=>{const a=useStore(reactExports.useCallback(markerSelector({defaultColor:t,rfId:i}),[t,i]),(n,y)=>!(n.length!==y.length||n.some((x,k)=>x.id!==y[k].id)));return React.createElement("defs",null,a.map(n=>React.createElement(Marker,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};MarkerDefinitions.displayName="MarkerDefinitions";var MarkerDefinitions$1=reactExports.memo(MarkerDefinitions);const selector$4=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),EdgeRenderer=({defaultMarkerColor:t,onlyRenderVisibleElements:i,elevateEdgesOnSelect:a,rfId:n,edgeTypes:y,noPanClassName:x,onEdgeContextMenu:k,onEdgeMouseEnter:S,onEdgeMouseMove:E,onEdgeMouseLeave:U,onEdgeClick:C,onEdgeDoubleClick:B,onReconnect:W,onReconnectStart:Y,onReconnectEnd:Z,reconnectRadius:T,children:l,disableKeyboardA11y:f})=>{const{edgesFocusable:D,edgesUpdatable:I,elementsSelectable:V,width:K,height:A,connectionMode:L,nodeInternals:G,onError:ee}=useStore(selector$4,shallow$1),ae=useVisibleEdges(i,G,a);return K?React.createElement(React.Fragment,null,ae.map(({level:Se,edges:$e,isMaxLevel:qe})=>React.createElement("svg",{key:Se,style:{zIndex:Se},width:K,height:A,className:"react-flow__edges react-flow__container"},qe&&React.createElement(MarkerDefinitions$1,{defaultColor:t,rfId:n}),React.createElement("g",null,$e.map(Pe=>{const[Ve,Ie,Xe]=getNodeData(G.get(Pe.source)),[et,tt,rt]=getNodeData(G.get(Pe.target));if(!Xe||!rt)return null;let ze=Pe.type||"default";y[ze]||(ee?.("011",errorMessages.error011(ze)),ze="default");const lt=y[ze]||y.default,bt=L===ConnectionMode.Strict?tt.target:(tt.target??[]).concat(tt.source??[]),At=getHandle(Ie.source,Pe.sourceHandle),Vt=getHandle(bt,Pe.targetHandle),Yt=At?.position||Position.Bottom,er=Vt?.position||Position.Top,lr=!!(Pe.focusable||D&&typeof Pe.focusable>"u"),yr=Pe.reconnectable||Pe.updatable,$r=typeof W<"u"&&(yr||I&&typeof yr>"u");if(!At||!Vt)return ee?.("008",errorMessages.error008(At,Pe)),null;const{sourceX:ia,sourceY:Sa,targetX:Xr,targetY:fr}=getEdgePositions(Ve,At,Yt,et,Vt,er);return React.createElement(lt,{key:Pe.id,id:Pe.id,className:cc([Pe.className,x]),type:ze,data:Pe.data,selected:!!Pe.selected,animated:!!Pe.animated,hidden:!!Pe.hidden,label:Pe.label,labelStyle:Pe.labelStyle,labelShowBg:Pe.labelShowBg,labelBgStyle:Pe.labelBgStyle,labelBgPadding:Pe.labelBgPadding,labelBgBorderRadius:Pe.labelBgBorderRadius,style:Pe.style,source:Pe.source,target:Pe.target,sourceHandleId:Pe.sourceHandle,targetHandleId:Pe.targetHandle,markerEnd:Pe.markerEnd,markerStart:Pe.markerStart,sourceX:ia,sourceY:Sa,targetX:Xr,targetY:fr,sourcePosition:Yt,targetPosition:er,elementsSelectable:V,onContextMenu:k,onMouseEnter:S,onMouseMove:E,onMouseLeave:U,onClick:C,onEdgeDoubleClick:B,onReconnect:W,onReconnectStart:Y,onReconnectEnd:Z,reconnectRadius:T,rfId:n,ariaLabel:Pe.ariaLabel,isFocusable:lr,isReconnectable:$r,pathOptions:"pathOptions"in Pe?Pe.pathOptions:void 0,interactionWidth:Pe.interactionWidth,disableKeyboardA11y:f})})))),l):null};EdgeRenderer.displayName="EdgeRenderer";var EdgeRenderer$1=reactExports.memo(EdgeRenderer);const selector$3=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Viewport({children:t}){const i=useStore(selector$3);return React.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:i}},t)}function useOnInitHandler(t){const i=useReactFlow(),a=reactExports.useRef(!1);reactExports.useEffect(()=>{!a.current&&i.viewportInitialized&&t&&(setTimeout(()=>t(i),1),a.current=!0)},[t,i.viewportInitialized])}const oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top},ConnectionLine=({nodeId:t,handleType:i,style:a,type:n=ConnectionLineType.Bezier,CustomComponent:y,connectionStatus:x})=>{const{fromNode:k,handleId:S,toX:E,toY:U,connectionMode:C}=useStore(reactExports.useCallback(A=>({fromNode:A.nodeInternals.get(t),handleId:A.connectionHandleId,toX:(A.connectionPosition.x-A.transform[0])/A.transform[2],toY:(A.connectionPosition.y-A.transform[1])/A.transform[2],connectionMode:A.connectionMode}),[t]),shallow$1),B=k?.[internalsSymbol]?.handleBounds;let W=B?.[i];if(C===ConnectionMode.Loose&&(W=W||B?.[i==="source"?"target":"source"]),!k||!W)return null;const Y=S?W.find(A=>A.id===S):W[0],Z=Y?Y.x+Y.width/2:(k.width??0)/2,T=Y?Y.y+Y.height/2:k.height??0,l=(k.positionAbsolute?.x??0)+Z,f=(k.positionAbsolute?.y??0)+T,D=Y?.position,I=D?oppositePosition[D]:null;if(!D||!I)return null;if(y)return React.createElement(y,{connectionLineType:n,connectionLineStyle:a,fromNode:k,fromHandle:Y,fromX:l,fromY:f,toX:E,toY:U,fromPosition:D,toPosition:I,connectionStatus:x});let V="";const K={sourceX:l,sourceY:f,sourcePosition:D,targetX:E,targetY:U,targetPosition:I};return n===ConnectionLineType.Bezier?[V]=getBezierPath(K):n===ConnectionLineType.Step?[V]=getSmoothStepPath({...K,borderRadius:0}):n===ConnectionLineType.SmoothStep?[V]=getSmoothStepPath(K):n===ConnectionLineType.SimpleBezier?[V]=getSimpleBezierPath(K):V=`M${l},${f} ${E},${U}`,React.createElement("path",{d:V,fill:"none",className:"react-flow__connection-path",style:a})};ConnectionLine.displayName="ConnectionLine";const selector$2=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function ConnectionLineWrapper({containerStyle:t,style:i,type:a,component:n}){const{nodeId:y,handleType:x,nodesConnectable:k,width:S,height:E,connectionStatus:U}=useStore(selector$2,shallow$1);return!(y&&x&&S&&k)?null:React.createElement("svg",{style:t,width:S,height:E,className:"react-flow__edges react-flow__connectionline react-flow__container"},React.createElement("g",{className:cc(["react-flow__connection",U])},React.createElement(ConnectionLine,{nodeId:y,handleType:x,style:i,type:a,CustomComponent:n,connectionStatus:U})))}function useNodeOrEdgeTypes(t,i){return reactExports.useRef(null),useStoreApi(),reactExports.useMemo(()=>i(t),[t])}const GraphView=({nodeTypes:t,edgeTypes:i,onMove:a,onMoveStart:n,onMoveEnd:y,onInit:x,onNodeClick:k,onEdgeClick:S,onNodeDoubleClick:E,onEdgeDoubleClick:U,onNodeMouseEnter:C,onNodeMouseMove:B,onNodeMouseLeave:W,onNodeContextMenu:Y,onSelectionContextMenu:Z,onSelectionStart:T,onSelectionEnd:l,connectionLineType:f,connectionLineStyle:D,connectionLineComponent:I,connectionLineContainerStyle:V,selectionKeyCode:K,selectionOnDrag:A,selectionMode:L,multiSelectionKeyCode:G,panActivationKeyCode:ee,zoomActivationKeyCode:ae,deleteKeyCode:Se,onlyRenderVisibleElements:$e,elementsSelectable:qe,selectNodesOnDrag:Pe,defaultViewport:Ve,translateExtent:Ie,minZoom:Xe,maxZoom:et,preventScrolling:tt,defaultMarkerColor:rt,zoomOnScroll:ze,zoomOnPinch:lt,panOnScroll:bt,panOnScrollSpeed:At,panOnScrollMode:Vt,zoomOnDoubleClick:Yt,panOnDrag:er,onPaneClick:lr,onPaneMouseEnter:yr,onPaneMouseMove:$r,onPaneMouseLeave:ia,onPaneScroll:Sa,onPaneContextMenu:Xr,onEdgeContextMenu:fr,onEdgeMouseEnter:Hr,onEdgeMouseMove:ya,onEdgeMouseLeave:Ta,onReconnect:ua,onReconnectStart:Ua,onReconnectEnd:Ya,reconnectRadius:Ia,noDragClassName:Na,noWheelClassName:Ra,noPanClassName:oa,elevateEdgesOnSelect:rn,disableKeyboardA11y:Za,nodeOrigin:Nt,nodeExtent:Gt,rfId:ur})=>{const Qr=useNodeOrEdgeTypes(t,createNodeTypes),Dr=useNodeOrEdgeTypes(i,createEdgeTypes);return useOnInitHandler(x),React.createElement(FlowRenderer$1,{onPaneClick:lr,onPaneMouseEnter:yr,onPaneMouseMove:$r,onPaneMouseLeave:ia,onPaneContextMenu:Xr,onPaneScroll:Sa,deleteKeyCode:Se,selectionKeyCode:K,selectionOnDrag:A,selectionMode:L,onSelectionStart:T,onSelectionEnd:l,multiSelectionKeyCode:G,panActivationKeyCode:ee,zoomActivationKeyCode:ae,elementsSelectable:qe,onMove:a,onMoveStart:n,onMoveEnd:y,zoomOnScroll:ze,zoomOnPinch:lt,zoomOnDoubleClick:Yt,panOnScroll:bt,panOnScrollSpeed:At,panOnScrollMode:Vt,panOnDrag:er,defaultViewport:Ve,translateExtent:Ie,minZoom:Xe,maxZoom:et,onSelectionContextMenu:Z,preventScrolling:tt,noDragClassName:Na,noWheelClassName:Ra,noPanClassName:oa,disableKeyboardA11y:Za},React.createElement(Viewport,null,React.createElement(EdgeRenderer$1,{edgeTypes:Dr,onEdgeClick:S,onEdgeDoubleClick:U,onlyRenderVisibleElements:$e,onEdgeContextMenu:fr,onEdgeMouseEnter:Hr,onEdgeMouseMove:ya,onEdgeMouseLeave:Ta,onReconnect:ua,onReconnectStart:Ua,onReconnectEnd:Ya,reconnectRadius:Ia,defaultMarkerColor:rt,noPanClassName:oa,elevateEdgesOnSelect:!!rn,disableKeyboardA11y:Za,rfId:ur},React.createElement(ConnectionLineWrapper,{style:D,type:f,component:I,containerStyle:V})),React.createElement("div",{className:"react-flow__edgelabel-renderer"}),React.createElement(NodeRenderer$1,{nodeTypes:Qr,onNodeClick:k,onNodeDoubleClick:E,onNodeMouseEnter:C,onNodeMouseMove:B,onNodeMouseLeave:W,onNodeContextMenu:Y,selectNodesOnDrag:Pe,onlyRenderVisibleElements:$e,noPanClassName:oa,noDragClassName:Na,disableKeyboardA11y:Za,nodeOrigin:Nt,nodeExtent:Gt,rfId:ur})))};GraphView.displayName="GraphView";var GraphView$1=reactExports.memo(GraphView);const infiniteExtent=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],initialState={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:infiniteExtent,nodeExtent:infiniteExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ConnectionMode.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:devWarn,isValidConnection:void 0},createRFStore=()=>createWithEqualityFn((t,i)=>({...initialState,setNodes:a=>{const{nodeInternals:n,nodeOrigin:y,elevateNodesOnSelect:x}=i();t({nodeInternals:createNodeInternals(a,n,y,x)})},getNodes:()=>Array.from(i().nodeInternals.values()),setEdges:a=>{const{defaultEdgeOptions:n={}}=i();t({edges:a.map(y=>({...n,...y}))})},setDefaultNodesAndEdges:(a,n)=>{const y=typeof a<"u",x=typeof n<"u",k=y?createNodeInternals(a,new Map,i().nodeOrigin,i().elevateNodesOnSelect):new Map;t({nodeInternals:k,edges:x?n:[],hasDefaultNodes:y,hasDefaultEdges:x})},updateNodeDimensions:a=>{const{onNodesChange:n,nodeInternals:y,fitViewOnInit:x,fitViewOnInitDone:k,fitViewOnInitOptions:S,domNode:E,nodeOrigin:U}=i(),C=E?.querySelector(".react-flow__viewport");if(!C)return;const B=window.getComputedStyle(C),{m22:W}=new window.DOMMatrixReadOnly(B.transform),Y=a.reduce((T,l)=>{const f=y.get(l.id);if(f?.hidden)y.set(f.id,{...f,[internalsSymbol]:{...f[internalsSymbol],handleBounds:void 0}});else if(f){const D=getDimensions(l.nodeElement);!!(D.width&&D.height&&(f.width!==D.width||f.height!==D.height||l.forceUpdate))&&(y.set(f.id,{...f,[internalsSymbol]:{...f[internalsSymbol],handleBounds:{source:getHandleBounds(".source",l.nodeElement,W,U),target:getHandleBounds(".target",l.nodeElement,W,U)}},...D}),T.push({id:f.id,type:"dimensions",dimensions:D}))}return T},[]);updateAbsoluteNodePositions(y,U);const Z=k||x&&!k&&fitView(i,{initial:!0,...S});t({nodeInternals:new Map(y),fitViewOnInitDone:Z}),Y?.length>0&&n?.(Y)},updateNodePositions:(a,n=!0,y=!1)=>{const{triggerNodeChanges:x}=i(),k=a.map(S=>{const E={id:S.id,type:"position",dragging:y};return n&&(E.positionAbsolute=S.positionAbsolute,E.position=S.position),E});x(k)},triggerNodeChanges:a=>{const{onNodesChange:n,nodeInternals:y,hasDefaultNodes:x,nodeOrigin:k,getNodes:S,elevateNodesOnSelect:E}=i();if(a?.length){if(x){const U=applyNodeChanges(a,S()),C=createNodeInternals(U,y,k,E);t({nodeInternals:C})}n?.(a)}},addSelectedNodes:a=>{const{multiSelectionActive:n,edges:y,getNodes:x}=i();let k,S=null;n?k=a.map(E=>createSelectionChange(E,!0)):(k=getSelectionChanges(x(),a),S=getSelectionChanges(y,[])),updateNodesAndEdgesSelections({changedNodes:k,changedEdges:S,get:i,set:t})},addSelectedEdges:a=>{const{multiSelectionActive:n,edges:y,getNodes:x}=i();let k,S=null;n?k=a.map(E=>createSelectionChange(E,!0)):(k=getSelectionChanges(y,a),S=getSelectionChanges(x(),[])),updateNodesAndEdgesSelections({changedNodes:S,changedEdges:k,get:i,set:t})},unselectNodesAndEdges:({nodes:a,edges:n}={})=>{const{edges:y,getNodes:x}=i(),k=a||x(),S=n||y,E=k.map(C=>(C.selected=!1,createSelectionChange(C.id,!1))),U=S.map(C=>createSelectionChange(C.id,!1));updateNodesAndEdgesSelections({changedNodes:E,changedEdges:U,get:i,set:t})},setMinZoom:a=>{const{d3Zoom:n,maxZoom:y}=i();n?.scaleExtent([a,y]),t({minZoom:a})},setMaxZoom:a=>{const{d3Zoom:n,minZoom:y}=i();n?.scaleExtent([y,a]),t({maxZoom:a})},setTranslateExtent:a=>{i().d3Zoom?.translateExtent(a),t({translateExtent:a})},resetSelectedElements:()=>{const{edges:a,getNodes:n}=i(),x=n().filter(S=>S.selected).map(S=>createSelectionChange(S.id,!1)),k=a.filter(S=>S.selected).map(S=>createSelectionChange(S.id,!1));updateNodesAndEdgesSelections({changedNodes:x,changedEdges:k,get:i,set:t})},setNodeExtent:a=>{const{nodeInternals:n}=i();n.forEach(y=>{y.positionAbsolute=clampPosition(y.position,a)}),t({nodeExtent:a,nodeInternals:new Map(n)})},panBy:a=>{const{transform:n,width:y,height:x,d3Zoom:k,d3Selection:S,translateExtent:E}=i();if(!k||!S||!a.x&&!a.y)return!1;const U=identity.translate(n[0]+a.x,n[1]+a.y).scale(n[2]),C=[[0,0],[y,x]],B=k?.constrain()(U,C,E);return k.transform(S,B),n[0]!==B.x||n[1]!==B.y||n[2]!==B.k},cancelConnection:()=>t({connectionNodeId:initialState.connectionNodeId,connectionHandleId:initialState.connectionHandleId,connectionHandleType:initialState.connectionHandleType,connectionStatus:initialState.connectionStatus,connectionStartHandle:initialState.connectionStartHandle,connectionEndHandle:initialState.connectionEndHandle}),reset:()=>t({...initialState})}),Object.is),ReactFlowProvider=({children:t})=>{const i=reactExports.useRef(null);return i.current||(i.current=createRFStore()),React.createElement(Provider$1,{value:i.current},t)};ReactFlowProvider.displayName="ReactFlowProvider";const Wrapper=({children:t})=>reactExports.useContext(StoreContext)?React.createElement(React.Fragment,null,t):React.createElement(ReactFlowProvider,null,t);Wrapper.displayName="ReactFlowWrapper";const defaultNodeTypes={input:InputNode$1,default:DefaultNode$1,output:OutputNode$1,group:GroupNode},defaultEdgeTypes={default:BezierEdge,straight:StraightEdge,step:StepEdge,smoothstep:SmoothStepEdge,simplebezier:SimpleBezierEdge},initNodeOrigin=[0,0],initSnapGrid=[15,15],initDefaultViewport={x:0,y:0,zoom:1},wrapperStyle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ReactFlow=reactExports.forwardRef(({nodes:t,edges:i,defaultNodes:a,defaultEdges:n,className:y,nodeTypes:x=defaultNodeTypes,edgeTypes:k=defaultEdgeTypes,onNodeClick:S,onEdgeClick:E,onInit:U,onMove:C,onMoveStart:B,onMoveEnd:W,onConnect:Y,onConnectStart:Z,onConnectEnd:T,onClickConnectStart:l,onClickConnectEnd:f,onNodeMouseEnter:D,onNodeMouseMove:I,onNodeMouseLeave:V,onNodeContextMenu:K,onNodeDoubleClick:A,onNodeDragStart:L,onNodeDrag:G,onNodeDragStop:ee,onNodesDelete:ae,onEdgesDelete:Se,onSelectionChange:$e,onSelectionDragStart:qe,onSelectionDrag:Pe,onSelectionDragStop:Ve,onSelectionContextMenu:Ie,onSelectionStart:Xe,onSelectionEnd:et,connectionMode:tt=ConnectionMode.Strict,connectionLineType:rt=ConnectionLineType.Bezier,connectionLineStyle:ze,connectionLineComponent:lt,connectionLineContainerStyle:bt,deleteKeyCode:At="Backspace",selectionKeyCode:Vt="Shift",selectionOnDrag:Yt=!1,selectionMode:er=SelectionMode.Full,panActivationKeyCode:lr="Space",multiSelectionKeyCode:yr=isMacOs()?"Meta":"Control",zoomActivationKeyCode:$r=isMacOs()?"Meta":"Control",snapToGrid:ia=!1,snapGrid:Sa=initSnapGrid,onlyRenderVisibleElements:Xr=!1,selectNodesOnDrag:fr=!0,nodesDraggable:Hr,nodesConnectable:ya,nodesFocusable:Ta,nodeOrigin:ua=initNodeOrigin,edgesFocusable:Ua,edgesUpdatable:Ya,elementsSelectable:Ia,defaultViewport:Na=initDefaultViewport,minZoom:Ra=.5,maxZoom:oa=2,translateExtent:rn=infiniteExtent,preventScrolling:Za=!0,nodeExtent:Nt,defaultMarkerColor:Gt="#b1b1b7",zoomOnScroll:ur=!0,zoomOnPinch:Qr=!0,panOnScroll:Dr=!1,panOnScrollSpeed:Ea=.5,panOnScrollMode:da=PanOnScrollMode.Free,zoomOnDoubleClick:Tt=!0,panOnDrag:Lr=!0,onPaneClick:Gr,onPaneMouseEnter:wa,onPaneMouseMove:Rr,onPaneMouseLeave:ga,onPaneScroll:kt,onPaneContextMenu:ha,children:Pa,onEdgeContextMenu:Qe,onEdgeDoubleClick:ea,onEdgeMouseEnter:Vr,onEdgeMouseMove:It,onEdgeMouseLeave:hr,onEdgeUpdate:sa,onEdgeUpdateStart:Qa,onEdgeUpdateEnd:an,onReconnect:sn,onReconnectStart:An,onReconnectEnd:Ti,reconnectRadius:zn=10,edgeUpdaterRadius:Ln=10,onNodesChange:Hn,onEdgesChange:bi,noDragClassName:li="nodrag",noWheelClassName:Mi="nowheel",noPanClassName:Ii="nopan",fitView:ti=!1,fitViewOptions:pi,connectOnClick:Ri=!0,attributionPosition:mo,proOptions:so,defaultEdgeOptions:pa,elevateNodesOnSelect:Gs=!0,elevateEdgesOnSelect:qo=!1,disableKeyboardA11y:Fo=!1,autoPanOnConnect:ko=!0,autoPanOnNodeDrag:Ro=!0,connectionRadius:Bi=20,isValidConnection:As,onError:qs,style:vn,id:ui,nodeDragThreshold:di,...cs},Qo)=>{const Ys=ui||"1";return React.createElement("div",{...cs,style:{...vn,...wrapperStyle},ref:Qo,className:cc(["react-flow",y]),"data-testid":"rf__wrapper",id:ui},React.createElement(Wrapper,null,React.createElement(GraphView$1,{onInit:U,onMove:C,onMoveStart:B,onMoveEnd:W,onNodeClick:S,onEdgeClick:E,onNodeMouseEnter:D,onNodeMouseMove:I,onNodeMouseLeave:V,onNodeContextMenu:K,onNodeDoubleClick:A,nodeTypes:x,edgeTypes:k,connectionLineType:rt,connectionLineStyle:ze,connectionLineComponent:lt,connectionLineContainerStyle:bt,selectionKeyCode:Vt,selectionOnDrag:Yt,selectionMode:er,deleteKeyCode:At,multiSelectionKeyCode:yr,panActivationKeyCode:lr,zoomActivationKeyCode:$r,onlyRenderVisibleElements:Xr,selectNodesOnDrag:fr,defaultViewport:Na,translateExtent:rn,minZoom:Ra,maxZoom:oa,preventScrolling:Za,zoomOnScroll:ur,zoomOnPinch:Qr,zoomOnDoubleClick:Tt,panOnScroll:Dr,panOnScrollSpeed:Ea,panOnScrollMode:da,panOnDrag:Lr,onPaneClick:Gr,onPaneMouseEnter:wa,onPaneMouseMove:Rr,onPaneMouseLeave:ga,onPaneScroll:kt,onPaneContextMenu:ha,onSelectionContextMenu:Ie,onSelectionStart:Xe,onSelectionEnd:et,onEdgeContextMenu:Qe,onEdgeDoubleClick:ea,onEdgeMouseEnter:Vr,onEdgeMouseMove:It,onEdgeMouseLeave:hr,onReconnect:sn??sa,onReconnectStart:An??Qa,onReconnectEnd:Ti??an,reconnectRadius:zn??Ln,defaultMarkerColor:Gt,noDragClassName:li,noWheelClassName:Mi,noPanClassName:Ii,elevateEdgesOnSelect:qo,rfId:Ys,disableKeyboardA11y:Fo,nodeOrigin:ua,nodeExtent:Nt}),React.createElement(StoreUpdater,{nodes:t,edges:i,defaultNodes:a,defaultEdges:n,onConnect:Y,onConnectStart:Z,onConnectEnd:T,onClickConnectStart:l,onClickConnectEnd:f,nodesDraggable:Hr,nodesConnectable:ya,nodesFocusable:Ta,edgesFocusable:Ua,edgesUpdatable:Ya,elementsSelectable:Ia,elevateNodesOnSelect:Gs,minZoom:Ra,maxZoom:oa,nodeExtent:Nt,onNodesChange:Hn,onEdgesChange:bi,snapToGrid:ia,snapGrid:Sa,connectionMode:tt,translateExtent:rn,connectOnClick:Ri,defaultEdgeOptions:pa,fitView:ti,fitViewOptions:pi,onNodesDelete:ae,onEdgesDelete:Se,onNodeDragStart:L,onNodeDrag:G,onNodeDragStop:ee,onSelectionDrag:Pe,onSelectionDragStart:qe,onSelectionDragStop:Ve,noPanClassName:Ii,nodeOrigin:ua,rfId:Ys,autoPanOnConnect:ko,autoPanOnNodeDrag:Ro,onError:qs,connectionRadius:Bi,isValidConnection:As,nodeDragThreshold:di}),React.createElement(Wrapper$1,{onSelectionChange:$e}),Pa,React.createElement(Attribution,{proOptions:so,position:mo}),React.createElement(A11yDescriptions,{rfId:Ys,disableKeyboardA11y:Fo})))});ReactFlow.displayName="ReactFlow";const selector$1$1=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function EdgeLabelRenderer({children:t}){const i=useStore(selector$1$1);return i?reactDomExports.createPortal(t,i):null}const viewportSelector=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2]});function useViewport(){return useStore(viewportSelector,shallow$1)}function PlusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},React.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function MinusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},React.createElement("path",{d:"M0 0h32v4.2H0z"}))}function FitViewIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},React.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function LockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function UnlockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ControlButton=({children:t,className:i,...a})=>React.createElement("button",{type:"button",className:cc(["react-flow__controls-button",i]),...a},t);ControlButton.displayName="ControlButton";const selector$1=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Controls=({style:t,showZoom:i=!0,showFitView:a=!0,showInteractive:n=!0,fitViewOptions:y,onZoomIn:x,onZoomOut:k,onFitView:S,onInteractiveChange:E,className:U,children:C,position:B="bottom-left"})=>{const W=useStoreApi(),[Y,Z]=reactExports.useState(!1),{isInteractive:T,minZoomReached:l,maxZoomReached:f}=useStore(selector$1,shallow$1),{zoomIn:D,zoomOut:I,fitView:V}=useReactFlow();if(reactExports.useEffect(()=>{Z(!0)},[]),!Y)return null;const K=()=>{D(),x?.()},A=()=>{I(),k?.()},L=()=>{V(y),S?.()},G=()=>{W.setState({nodesDraggable:!T,nodesConnectable:!T,elementsSelectable:!T}),E?.(!T)};return React.createElement(Panel,{className:cc(["react-flow__controls",U]),position:B,style:t,"data-testid":"rf__controls"},i&&React.createElement(React.Fragment,null,React.createElement(ControlButton,{onClick:K,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:f},React.createElement(PlusIcon,null)),React.createElement(ControlButton,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:l},React.createElement(MinusIcon,null))),a&&React.createElement(ControlButton,{className:"react-flow__controls-fitview",onClick:L,title:"fit view","aria-label":"fit view"},React.createElement(FitViewIcon,null)),n&&React.createElement(ControlButton,{className:"react-flow__controls-interactive",onClick:G,title:"toggle interactivity","aria-label":"toggle interactivity"},T?React.createElement(UnlockIcon,null):React.createElement(LockIcon,null)),C)};Controls.displayName="Controls";var Controls$1=reactExports.memo(Controls),BackgroundVariant;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(BackgroundVariant||(BackgroundVariant={}));function LinePattern({color:t,dimensions:i,lineWidth:a}){return React.createElement("path",{stroke:t,strokeWidth:a,d:`M${i[0]/2} 0 V${i[1]} M0 ${i[1]/2} H${i[0]}`})}function DotPattern({color:t,radius:i}){return React.createElement("circle",{cx:i,cy:i,r:i,fill:t})}const defaultColor={[BackgroundVariant.Dots]:"#91919a",[BackgroundVariant.Lines]:"#eee",[BackgroundVariant.Cross]:"#e2e2e2"},defaultSize={[BackgroundVariant.Dots]:1,[BackgroundVariant.Lines]:1,[BackgroundVariant.Cross]:6},selector=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Background({id:t,variant:i=BackgroundVariant.Dots,gap:a=20,size:n,lineWidth:y=1,offset:x=2,color:k,style:S,className:E}){const U=reactExports.useRef(null),{transform:C,patternId:B}=useStore(selector,shallow$1),W=k||defaultColor[i],Y=n||defaultSize[i],Z=i===BackgroundVariant.Dots,T=i===BackgroundVariant.Cross,l=Array.isArray(a)?a:[a,a],f=[l[0]*C[2]||1,l[1]*C[2]||1],D=Y*C[2],I=T?[D,D]:f,V=Z?[D/x,D/x]:[I[0]/x,I[1]/x];return React.createElement("svg",{className:cc(["react-flow__background",E]),style:{...S,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:U,"data-testid":"rf__background"},React.createElement("pattern",{id:B+t,x:C[0]%f[0],y:C[1]%f[1],width:f[0],height:f[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${V[0]},-${V[1]})`},Z?React.createElement(DotPattern,{color:W,radius:D/x}):React.createElement(LinePattern,{dimensions:I,color:W,lineWidth:y})),React.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${B+t})`}))}Background.displayName="Background";var Background$1=reactExports.memo(Background);function sortByCtimeDescending(t,i){const a=new Date(t?.data?.aiida?.ctime||0);return new Date(i?.data?.aiida?.ctime||0)-a}function sortByLabel(t,i){return(t?.data?.label||"").localeCompare(i?.data?.label||"")}function categorizeNodes(t){const i=t.filter(y=>y.data?.node_type.includes("calculation")).sort(sortByCtimeDescending),a=t.filter(y=>y.data?.node_type.includes("workflow")).sort(sortByCtimeDescending),n=t.filter(y=>y.data?.node_type.includes("data")).sort(sortByLabel);return{calculations:i,workflow:a,data:n}}function layoutGraphDefault(t,i,a,n={}){const{spacingX:y=280,spacingY:x=70,groupGapY:k=90,centerX:S=window.innerWidth/2,centerY:E=window.innerHeight/2,smallThreshold:U=20}=n,C=[],B=[],W=categorizeNodes(i),Y=categorizeNodes(a),Z={data:["calculations","workflows","data"],calculation:["data","calculation","workflow"],workflow:["data","calculation","workflow"]},T=t.data?.node_type.split(".")[1],l=Z[T]||Z.data;C.push({...t,position:{x:S,y:E}});const D=l.flatMap(V=>[...W[V]||[],...Y[V]||[]]).length<=U,I=(V,K,A,L=!0)=>{(V||[]).forEach((G,ee)=>{const ae=L?K+ee*x:K-ee*x,Se=S+y*A;G.position={x:Se,y:ae},C.push(G);let $e="";if(G?.data?.aiida?.link_label){const Ve=G.data.aiida.link_label;$e=Ve.length>21?`${Ve.slice(0,18)}...`:Ve}const qe={},Pe=G.data?.node_type||"";(Pe.includes("workflow")||Pe.includes("process"))&&(qe.strokeDasharray="5,5"),B.push({id:`e-${A<0?G.id+"->":t.id+"->"}${A<0?t.id:G.id}`,source:A<0?G.id:t.id,target:A<0?t.id:G.id,sourcePosition:A<0?"right":"left",targetPosition:A<0?"left":"right",type:"custom",style:qe,data:{label:$e,labelPosition:A<0?"start":"end"}})})};if(D){const V=l.flatMap(G=>W[G]||[]).reverse(),K=l.flatMap(G=>Y[G]||[]).reverse(),A=E-(V.length-1)/2*x,L=E-(K.length-1)/2*x;V.forEach((G,ee)=>I([G],A+ee*x,-1,!0)),K.forEach((G,ee)=>I([G],L+ee*x,1,!0))}else{const V=W[l[0]]||[],K=Y[l[0]]||[],A=l.slice(1,3),L=A.flatMap(Se=>W[Se]||[]),G=A.flatMap(Se=>Y[Se]||[]),ee=E-175;I(V,ee,-1,!0),I(K,ee,1,!0);const ae=ee-k;I(L,ae,-1,!1),I(G,ae,1,!1)}return{nodes:C,edges:B}}async function fetchUsers(t){try{const i=await fetch(`${t}/users/`);if(!i.ok)return null;const n=(await i.json()).data;return console.log("users",n),n}catch(i){return console.error("Error fetching node:",i),null}}async function fetchDownloadFormats(t){try{const i=await fetch(`${t}/nodes/download_formats/`);return i.ok?(await i.json()).data:null}catch(i){return console.error("Error fetching node:",i),null}}async function fetchNodeById(t,i){if(!i)return null;try{const a=await fetch(`${t}/nodes/${encodeURIComponent(i)}`);return a.ok?a.json():null}catch(a){return console.error("Error fetching node:",a),null}}async function fetchNodeContents(t,i){if(!i)return null;const a=["attributes","comments","extras","derived_properties"],n={};for(const y of a)try{const x=await fetch(`${t}/nodes/${encodeURIComponent(i)}/contents/${y}`);if(!x.ok){x.status!==404&&console.warn(`Endpoint ${y} failed for node ${i}:`,x.status);continue}const k=await x.json();n[y]=k?.data?.[y]??k??{}}catch(x){console.error(`Error fetching ${y} for node ${i}:`,x)}return n}async function fetchNodeRepoList(t,i){if(!i)return[];try{const a=await fetch(`${t}/nodes/${encodeURIComponent(i)}/repo/list`);return a.ok?(await a.json()).data.repo_list.filter(x=>x.type==="FILE").map(x=>({name:x.name,downloadUrl:`${t}/nodes/${encodeURIComponent(i)}/repo/contents?filename="${encodeURIComponent(x.name)}"`})):[]}catch(a){return console.error("Error fetching node repo list:",a),[]}}async function fetchRetrievedUUID(t,i){if(!i)return null;try{const a=await fetch(`${t}/nodes/${encodeURIComponent(i)}/links/outgoing/`);return a.ok&&((await a.json())?.data?.outgoing||[]).find(k=>k.link_label==="retrieved")?.uuid||null}catch(a){return console.error("Error fetching node:",a),null}}async function fetchFiles(t,i,a){if(!i)return null;const n=["input_files","output_files"],y={};for(const x of n)try{const k=`${t}/calcjobs/${encodeURIComponent(i)}/${x}`,S=await fetch(k);if(!S.ok){S.status!==404&&console.warn(`Endpoint ${x} failed for node ${i}:`,S.status);continue}const E=await S.json(),U=Array.isArray(E.data?.[x])?E.data[x]:Array.isArray(E.data)?E.data:[];console.log(i);const C=x==="input_files"?i:a,B=U.filter(W=>W.type==="FILE").map(W=>({...W,downloadUrl:`${t}/nodes/${encodeURIComponent(C)}/repo/contents?filename="${encodeURIComponent(W.name)}"`}));y[x]=B}catch(k){console.error(`Error fetching ${x} for node ${i}:`,k)}return y}async function fetchJson(t,i){if(!i)return{incoming:[],outgoing:[]};try{const a=await fetch(`${t}/nodes/${encodeURIComponent(i)}/download?download_format=json`);return a.ok?a.json():null}catch(a){return console.error("Error fetching node:",a),null}}async function fetchCif(t,i){if(!i)return{cifText:null};try{const a=await fetch(`${t}/nodes/${encodeURIComponent(i)}/download?download_format=cif&download=false`);return a.ok?{cifText:(await a.json()).data.download.data||null}:{cifText:null}}catch(a){return console.error("Error fetching node:",a),{cifText:null}}}async function fetchSourceFile(t,i){if(!i)return{sourceFile:null};try{const a=await fetch(`${t}/nodes/${encodeURIComponent(i)}/repo/contents?filename=source_file`);return a.ok?{sourceFile:await a.text()}:{sourceFile:null}}catch(a){return console.error("Error fetching node:",a),{sourceFile:null}}}async function fetchGroups(t){try{const i=await fetch(`${t}/groups`);return i.ok?(await i.json())?.data?.groups||[]:null}catch(i){return console.error("Error fetching groups:",i),[]}}async function fetchFromQueryBuilder(t,i){try{const a=await fetch(`${t}/querybuilder/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});return a.ok?(await a.json())?.data||[]:(console.error("QueryBuilder request failed:",a.status,a.statusText),[])}catch(a){return console.error("Error fetching from QueryBuilder:",a),[]}}async function fetchLinks(t,i){if(!i)return{incoming:[],outgoing:[]};try{const[a,n]=await Promise.all([fetch(`${t}/nodes/${encodeURIComponent(i)}/links/incoming`),fetch(`${t}/nodes/${encodeURIComponent(i)}/links/outgoing`)]),y=a.ok?await a.json():[],x=n.ok?await n.json():[];return{incoming:y,outgoing:x}}catch(a){return console.error("Error fetching links:",a),{incoming:[],outgoing:[]}}}async function fetchLinkCounts(t,i=[]){if(!i.length)return i;try{return await Promise.all(i.map(async n=>{if(typeof n?.data?.parentCount=="number"&&typeof n?.data?.childCount=="number")return n;const{incoming:y,outgoing:x}=await fetchLinks(t,n.id),k=(y?.data?.incoming||[]).length,S=(x?.data?.outgoing||[]).length;return{...n,data:{...n.data,parentCount:k,childCount:S}}}))}catch(a){return console.error("Error fetching next level nodes:",a),i}}async function smartFetchData(t,i,a={},n=null){const y=a[i.id];if(y)return console.log(`${i.id} data is already cached`),{...i,data:{...i.data,...y}};let x={...i.data};const k={StructureData:fetchCif,CifData:fetchCif,ArrayData:fetchJson,CalcFunctionNode:fetchSourceFile},S=async()=>fetchNodeRepoList(t,i.id),E=await fetchNodeContents(t,i.id);x={...x,...E};const U=k[i.data.label]?k[i.data.label](t,i.id):null,C=S();let B=null;i.data.label==="CalcJobNode"&&(B=(async()=>{let T=x.retrievedUUID;T||(T=await fetchRetrievedUUID(t,i.id));const l=await fetchFiles(t,i.id,T);return{retrievedUUID:T,files:l}})());const[W,Y,Z]=await Promise.all([U,C,B]);if(W&&(x.download=W),Y&&(x.repo_list=Y),Z&&(x={...x,...Z}),n&&i.data.node_type){const T=i.data.node_type.endsWith("|")?i.data.node_type:`${i.data.node_type}|`,l=n[T]||[];x.downloadByFormat=l.reduce((f,D)=>(f[D]=`${t}/nodes/${encodeURIComponent(i.id)}/download?download_format=${encodeURIComponent(D)}`,f),{})}return{...i,data:x}}async function fetchGraphByNodeId(t,i){const n=(await fetchNodeById(t,i)).data.nodes[0];if(!n)return{nodes:[],edges:[]};const{incoming:y,outgoing:x}=await fetchLinks(t,i),k=y?.data?.incoming||[],S=x?.data?.outgoing||[],E=[{id:n.uuid,data:{label:n.node_type.split(".").filter(Boolean).pop(),node_type:n.node_type,pos:0,aiida:n,parentCount:k.length,childCount:S.length}},...k.map(Y=>({id:Y.uuid,data:{label:Y.node_type.split(".").filter(Boolean).pop(),node_type:Y.node_type,pos:1,link_label:Y.link_label,aiida:Y}})),...S.map(Y=>({id:Y.uuid,data:{label:Y.node_type.split(".").filter(Boolean).pop(),node_type:Y.node_type,pos:-1,link_label:Y.link_label,aiida:Y}}))],U=new Map;for(const Y of E)U.has(Y.id)||U.set(Y.id,Y);const C=Array.from(U.values()),{nodes:B,edges:W}=layoutGraphDefault(C.find(Y=>Y.data.pos===0),C.filter(Y=>Y.data.pos===1),C.filter(Y=>Y.data.pos===-1));return{nodes:B,edges:W}}function Breadcrumbs({trail:t,onClick:i,maxItems:a=10}){const n=t.slice(-a);return jsxRuntimeExports$1.jsxs("div",{className:"w-full flex gap-2 flex-wrap overflow-x-auto items-center bg-slate-100 border-t p-2 ",children:[jsxRuntimeExports$1.jsx("span",{className:"",children:"History:"}),n.map((y,x)=>jsxRuntimeExports$1.jsxs(React.Fragment,{children:[jsxRuntimeExports$1.jsxs("button",{className:"bg-gray-200 hover:bg-gray-300 text-sm px-2 py-1 rounded",onClick:()=>i(y,x),children:[y.data.label," (",y.data.aiida.uuid.split("-")[0],")"]}),x<n.length-1&&jsxRuntimeExports$1.jsx("span",{className:"mx-1",children:""})]},`${y.id}-${x}`))]})}function GroupIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"})]})}function DownloadIcon({data:t=null,downloadUrl:i=null,filename:a="data.json",size:n=14,className:y=""}){const x=()=>{if(i){const k=document.createElement("a");k.href=i,k.download=a,k.target="_blank",k.rel="noopener noreferrer",k.click();return}if(t){const k=JSON.stringify(t,null,2),S=new Blob([k],{type:"application/json"}),E=URL.createObjectURL(S),U=document.createElement("a");U.href=E,U.download=a,U.click(),URL.revokeObjectURL(E)}};return jsxRuntimeExports$1.jsx("button",{type:"button",onClick:x,title:"Download",className:"p-1",children:jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:y,children:[jsxRuntimeExports$1.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports$1.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports$1.jsx("path",{d:"m7 10 5 5 5-5"})]})})}function ClipBoardIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports$1.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function ClipboardCopyIcon({size:t=18,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("path",{d:"m12 15 2 2 4-4"}),jsxRuntimeExports$1.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports$1.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function RightDropDownIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:jsxRuntimeExports$1.jsx("path",{d:"m9 18 6-6-6-6"})})}function DownDropDownIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:jsxRuntimeExports$1.jsx("path",{d:"m6 9 6 6 6-6"})})}function ViewIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}),jsxRuntimeExports$1.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function LinksIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),jsxRuntimeExports$1.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}function QuestionIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports$1.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),jsxRuntimeExports$1.jsx("path",{d:"M12 17h.01"})]})}function ClickIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"}),jsxRuntimeExports$1.jsx("path",{d:"M5 3a2 2 0 0 0-2 2"}),jsxRuntimeExports$1.jsx("path",{d:"M19 3a2 2 0 0 1 2 2"}),jsxRuntimeExports$1.jsx("path",{d:"M5 21a2 2 0 0 1-2-2"}),jsxRuntimeExports$1.jsx("path",{d:"M9 3h1"}),jsxRuntimeExports$1.jsx("path",{d:"M9 21h2"}),jsxRuntimeExports$1.jsx("path",{d:"M14 3h1"}),jsxRuntimeExports$1.jsx("path",{d:"M3 9v1"}),jsxRuntimeExports$1.jsx("path",{d:"M21 9v2"}),jsxRuntimeExports$1.jsx("path",{d:"M3 14v1"})]})}function ClickIcon2({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:jsxRuntimeExports$1.jsx("path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z"})})}function DoubleClickIcon({size:t=24,className:i}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("path",{d:"M14 4.1 12 6"}),jsxRuntimeExports$1.jsx("path",{d:"m5.1 8-2.9-.8"}),jsxRuntimeExports$1.jsx("path",{d:"m6 12-1.9 2"}),jsxRuntimeExports$1.jsx("path",{d:"M7.2 2.2 8 5.1"}),jsxRuntimeExports$1.jsx("path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"})]})}function BreadcrumbsIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("path",{d:"M16 14v2.2l1.6 1"}),jsxRuntimeExports$1.jsx("path",{d:"M7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2"}),jsxRuntimeExports$1.jsx("circle",{cx:"16",cy:"16",r:"6"})]})}function GraphIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),jsxRuntimeExports$1.jsx("path",{d:"M12 12V8"})]})}function GithubIcon({size:t=14,className:i=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports$1.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),jsxRuntimeExports$1.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]})}const OverlayContext=reactExports.createContext(null);function useOverlayContainer(){const t=reactExports.useContext(OverlayContext);if(!t)throw new Error("useOverlayContainer must be used inside <OverlayProvider>");return t}function OverlayProvider({children:t,className:i=""}){const a=reactExports.useRef(null);return jsxRuntimeExports$1.jsx(OverlayContext.Provider,{value:a,children:jsxRuntimeExports$1.jsx("div",{ref:a,className:i,children:t})})}function Overlay({children:t,active:i,onClose:a,title:n,maxWidth:y=""}){const x=useOverlayContainer();return reactExports.useEffect(()=>{if(!i)return;const k=S=>{S.key==="Escape"&&(S.stopPropagation(),a?.())};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[i,a]),!i||!x.current?null:reactDomExports.createPortal(jsxRuntimeExports$1.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/30",onClick:a,children:jsxRuntimeExports$1.jsxs("div",{className:"bg-white w-full mx-4 h-5/6 rounded-xl overflow-auto transform transition-all duration-800 ease-in-out",style:{maxWidth:y,width:"100%"},onClick:k=>k.stopPropagation(),children:[jsxRuntimeExports$1.jsxs("div",{className:"flex justify-between items-center border-b px-3 py-1",children:[n&&jsxRuntimeExports$1.jsx("h2",{className:"text-lg font-semibold",children:n}),jsxRuntimeExports$1.jsx("button",{onClick:a,className:"text-gray-600 hover:text-black p-1 rounded",children:""})]}),jsxRuntimeExports$1.jsx("div",{className:"px-8 py-4",children:t})]})}),x.current)}function Spinner({size:t=100,message:i="Loading..."}){return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[jsxRuntimeExports$1.jsx("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:t,height:t*(376/400),viewBox:"0 0 400 376",children:jsxRuntimeExports$1.jsxs("g",{className:"origin-center",children:[jsxRuntimeExports$1.jsx("path",{fill:"#0096DE",d:"M232 222c-8 11-11 18-14 32h56v-23l63 39-63 36v-23h-56c3 14 5 20 14 31s14 15 24 22c10 6 16 8 27 10 16 1 25 0 40-5 13-6 20-10 29-21 10-9 11-14 17-27 3-9 4-14 3-23 1-10-1-15-3-25-5-12-9-19-17-29-9-9-16-14-29-20-15-5-23-6-40-4-14 3-20 5-27 9-10 6-15 11-24 21Z"}),jsxRuntimeExports$1.jsx("path",{fill:"#30B808",d:"M178 238c-6-12-11-19-21-28l-28 48 20 11-65 36v-73l20 11 27-48c-13-4-20-5-34-3-13 2-19 4-30 10-10 6-15 9-22 18-9 14-13 22-16 37-1 15-1 22 3 36 4 13 7 17 16 28 6 7 10 10 18 15s14 6 23 9c13 2 21 2 34 0 13-3 20-7 32-15 11-11 16-18 23-33 5-14 6-20 6-28 0-12-2-18-6-31Z"}),jsxRuntimeExports$1.jsx("path",{fill:"#FF7D17",d:"M191 183c14 2 21 1 35-3l-28-48-20 11 2-74 63 37-20 11 28 48c10-9 15-15 20-28 5-12 6-19 7-31 0-12-1-18-5-28-7-15-12-23-24-33-12-8-19-12-33-15-12-3-18-2-31 0-10 1-15 3-23 8s-12 9-19 15v1c-9 10-12 16-17 28-3 13-4 21-3 36 4 15 7 23 17 37 10 10 14 14 21 18 10 6 17 8 30 10Z"})]})}),jsxRuntimeExports$1.jsx("span",{className:"text-md md:text-xl text-gray-500 animate-pulse",children:i})]})}function ErrorDisplay({message:t,onRetry:i}){return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col items-center text-red-500 p-4",children:[jsxRuntimeExports$1.jsx("div",{className:"text-5xl mb-2",children:""}),jsxRuntimeExports$1.jsx("span",{className:"text-sm font-semibold",children:"Failed to load data"}),t&&jsxRuntimeExports$1.jsx("span",{className:"text-xs text-gray-400 mt-1",children:t}),i&&jsxRuntimeExports$1.jsx("button",{onClick:i,className:"mt-3 px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600 transition",children:"Retry"})]})}function DebugPane({selectedNode:t}){return jsxRuntimeExports$1.jsxs("div",{className:"w-full h-full p-4",children:[jsxRuntimeExports$1.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Node Info"}),t?jsxRuntimeExports$1.jsxs("pre",{className:"bg-gray-100 p-2 rounded overflow-x-auto",children:[" ",JSON.stringify(t.data,null,2)]}):jsxRuntimeExports$1.jsx("p",{children:"Click a node to see top level details. Double click fetch the node and get all the details."})]})}function getNodeDisplay(t){switch(t.label){case"AbstractCode":return"";case"ArrayData":return"";case"BandsData":{const n=t.attributes?.["array|bands"];return n?.[1]!==void 0?`Num. bands: ${n[1]}`:""}case"Bool":return t.attributes?.value!==void 0?`Value: ${t.attributes.value}`:"";case"CalcFunctionNode":{const n=t?.aiida?.process_type?.split(".").at(-1);return n||""}case"CalcJobNode":{const n=t?.aiida?.process_type?.split(":")[1];return n||""}case"Code":{const n=t?.attributes?.input_plugin;return n||""}case"Dict":return t?.attributes?`Num. keys: ${Object.keys(t.attributes).length}`:"";case"EnumData":return"";case"Float":case"Int":return t.attributes?.value!==void 0?`Value: ${t.attributes.value}`:"";case"JsonableData":return"";case"List":return t.attributes?.value!==void 0?`Length: ${t.attributes.list.length}`:"";case"Str":return"";case"KpointsData":if(t.attributes?.mesh){const[n,y,x]=t.attributes.mesh;return`Grid: ${n}  ${y}  ${x}`}return t.attributes?.labels&&t.attributes?.label_numbers?`Path: ${t.attributes.labels.join("  ")}`:"";case"StructureData":{let n=function(y,x=22){const k={0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""},S=y.replace(/\d/g,E=>k[E]||E);return S.length>x?S.slice(0,x-3)+"...":S};var a=n;return t.extras?.formula_hill?`${n(t.extras.formula_hill)}`:t.derived_properties?.formula?`${n(t.derived_properties?.formula)}`:""}case"UpfData":{const n=t.attributes?.filename;return n?`${n}`:""}case"XyData":return"";case"SinglefileData":return"";case"FolderData":{const n=t?.repo_list?.length||0;return n?`Num. Files: ${n}`:""}case"RemoteData":return"";case"InstalledCode":return"";case"PortableCode":return"";case"ContainerizedCode":return"";case"WorkChainNode":{const n=t?.aiida?.process_type?.split(":")[1];return n||""}default:return""}}function getNodeColorClasses(t,i=!1){let a="bg-gray-200",n="text-black",y="transition-all";return t?.startsWith("process.workflow")?(a="bg-orange-300",y="border-orange-400 shadow-md"):t?.startsWith("process")?(a="bg-red-300",y="border-red-400 shadow-md"):t?.startsWith("data")&&(a="bg-green-300",y="border-green-400 shadow-md"),i&&(y="border-blue-600 shadow-md rounded transition duration-700",a="bg-blue-100 glow-4",n="text-black font-semibold"),{bgClass:a,textClass:n,borderStyle:y}}function HorizontalNode({data:t,selected:i}){const{zoom:a}=useViewport(),n="min-w-[150px] text-center py-1.5 rounded border-3",y=a>1.2,k=`
  absolute
  top-1/3
  bottom-1/3
  flex
  items-center
  ${y?"text-[8px]":"text-[10px]"}
  text-slate-600
  font-light
  ${y?"":"hidden"}
`,S=`${k} left-0 ml-0.5 pr-1 pl-0.5 bg-gray-400/50 rounded-r-sm`,E=`${k} right-0 mr-0.5 pl-1 pr-0.5 bg-gray-400/50 rounded-l-sm`,{bgClass:U,textClass:C,borderStyle:B}=getNodeColorClasses(t.node_type,i,t.pos),W=t.aiida.uuid.split("-")[0],Y=getNodeDisplay(t),Z=a>1.2?"text-[12px]":"text-[14px]",T=jsxRuntimeExports$1.jsxs("div",{className:`${Z}`,children:[t.label,a>1.2&&jsxRuntimeExports$1.jsx("br",{}),a>1.2&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("div",{className:"text-[8px] opacity-80",children:`uuid: ${W}`}),jsxRuntimeExports$1.jsx("div",{className:"text-[8px] opacity-80 ",children:`${Y}`})]})]});return jsxRuntimeExports$1.jsxs("div",{className:`${n} ${U} ${C} ${B}`,children:[jsxRuntimeExports$1.jsx("div",{className:S,children:t.parentCount>99?"99+":t.parentCount??""}),jsxRuntimeExports$1.jsx("div",{className:E,children:t.childCount>99?"99+":t.childCount??""}),T,jsxRuntimeExports$1.jsx(Handle$1,{type:"target",position:Position.Left,style:{pointerEvents:"none",opacity:0,marginLeft:"4px"}}),jsxRuntimeExports$1.jsx(Handle$1,{type:"source",position:Position.Right,style:{pointerEvents:"none",opacity:0,marginRight:"4px"}})]})}const HorizontalNode$1=reactExports.memo(HorizontalNode);function CustomEdge({id:t,sourceX:i,sourceY:a,targetX:n,targetY:y,sourcePosition:x,targetPosition:k,data:S={},style:E={}}){const[U]=getSmoothStepPath({sourceX:i,sourceY:a,sourcePosition:x,targetX:n,targetY:y,targetPosition:k}),{zoom:C}=useViewport(),W={...{stroke:"grey",strokeWidth:1},...E||{}};if(!S.label)return jsxRuntimeExports$1.jsx(BaseEdge,{id:t,path:U});let Y=.5,Z="translate(-50%, -50%)";S.labelPosition==="start"?(Y=.02,Z="translate(0%, -50%)"):S.labelPosition==="end"&&(Y=.98,Z="translate(-100%, -50%)");const T=i+(n-i)*Y,l=a+(y-a)*Y,f=C>1.1?"text-xs":"text-sm";return jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsx(BaseEdge,{id:t,path:U,interactionWidth:0,style:W}),jsxRuntimeExports$1.jsx(EdgeLabelRenderer,{children:jsxRuntimeExports$1.jsx("div",{className:`absolute bg-slate-200 border border-gray-300 rounded-sm px-1 py-0.5 text-gray-700 font-light ${f} pointer-events-drag z-50`,style:{left:`${T}px`,top:`${l}px`,transform:Z},children:S.label.length>21?`${S.label.slice(0,18)}...`:S.label})})]})}const nodeTypes={custom:HorizontalNode$1},edgeTypes={custom:CustomEdge};function FlowChart({nodes:t,edges:i,setNodes:a,setEdges:n,selectedNode:y,onNodeSelect:x,onNodeDoubleSelect:k,onInit:S}){const E=reactExports.useCallback((B,W)=>{x&&x(W)},[x]),U=reactExports.useCallback((B,W)=>{k&&k(W)},[k]),C=t.map(B=>({...B,type:"custom",selected:y?.id===B.id}));return jsxRuntimeExports$1.jsx("div",{className:"w-full h-full",children:jsxRuntimeExports$1.jsxs(ReactFlow,{className:"bg-slate-50",nodes:C,edges:i,nodeTypes,onNodesChange:B=>a(W=>applyNodeChanges(B,W)),onEdgesChange:B=>n(W=>applyEdgeChanges(B,W)),edgeTypes,edgesFocusable:!1,onNodeClick:E,onNodeDoubleClick:U,fitView:!0,nodesDraggable:!0,nodesConnectable:!1,onInit:S,children:[jsxRuntimeExports$1.jsx(Controls$1,{}),jsxRuntimeExports$1.jsx(Background$1,{variant:"dots",gap:12,size:1})]})})}function buildQuery({groups:t=[],nodeTypes:i=[],limit:a=50,offset:n=0}={}){const y=[{entity_type:"",orm_base:"node",tag:"node",joining_keyword:null,joining_value:null,edge_tag:null,outerjoin:!1}],x={node:{}},k={node:["id","uuid","node_type","label","ctime","mtime"]};if(i.length===1?x.node.node_type={like:i[0]}:i.length>1&&(x.node={or:i.map(S=>({node_type:{like:S}}))}),t.length>0){const S="core_1",E="node--core_1";y.push({entity_type:"group.core",orm_base:"group",tag:S,joining_keyword:"with_node",joining_value:"node",edge_tag:E,outerjoin:!1}),x[S]={type_string:{like:"%"},or:t.map(U=>({label:U}))},x[E]={},k[S]=[],k[E]=[]}return{path:y,filters:x,project:k,project_map:{},order_by:[],limit:a,offset:n,distinct:!0}}const aiidaTypes=[{label:"Data",type:"data",children:[{label:"Int",type:"data.core.int.%"},{label:"Float",type:"data.core.float.%"},{label:"ArrayData",type:"data.core.array.%",children:[{label:"BandsData",type:"data.core.array.bands.%"},{label:"XyData",type:"data.core.array.xy.%"},{label:"TrajectoryData",type:"data.core.array.trajectory.%"},{label:"KpointsData",type:"data.core.array.kpoints.%"}]},{label:"Str",type:"data.core.str.%"},{label:"Bool",type:"data.core.bool.%"},{label:"List",type:"data.core.list.%"},{label:"Dict",type:"data.core.dict.%"},{label:"StructureData",type:"data.core.structure.%"},{label:"RemoteData",type:"data.core.remote.%"},{label:"FolderData",type:"data.core.folder.%"},{label:"SinglefileData",type:"data.core.singlefile.%"},{label:"UpfData",type:"data.core.upf.%"},{label:"Code",type:"data.core.code.%"}]},{label:"Process",type:"process.%",children:[{label:"CalcJob",type:"process.calculation.calcjob.%"},{label:"CalcFunction",type:"process.calculation.calcfunction.%"},{label:"WorkFunction",type:"process.workflow.workfunction.%"},{label:"Workgraph",type:"process.workflow.workgraph.%"},{label:"Workchain",type:"process.workflow.workchain.%"}]}];function getFlattenedNodeTypes(t,i){const a=[],n=y=>{y.forEach(x=>{t.includes(x.label)&&a.push(x.type),x.children&&n(x.children)})};return n(i),a}function TypeCheckboxTree({types:t,selectedTypes:i,setSelectedTypes:a,level:n=0}){const[y,x]=reactExports.useState({}),k=U=>U.every(C=>i.includes(C.label)),S=U=>U.some(C=>i.includes(C.label))&&!k(U),E=(U,C)=>{if(!C||C.length===0){a(W=>W.includes(U)?W.filter(Y=>Y!==U):[...W,U]);return}a(W=>{const Y=new Set(W),Z=(l,f)=>{l.forEach(D=>{f?Y.add(D.label):Y.delete(D.label),D.children&&Z(D.children,f)})};return Y.has(U)&&k(C)?(Y.delete(U),Z(C,!1)):(Y.add(U),Z(C,!0)),[...Y]});const B=W=>{const Y={};return W.forEach(Z=>{Z.children&&(Y[Z.label]=!0,Object.assign(Y,B(Z.children)))}),Y};x(W=>({...W,[U]:!0,...B(C)}))};return jsxRuntimeExports$1.jsx("div",{className:"flex flex-col",children:t.map(({label:U,children:C})=>{const B=i.includes(U),W=C&&S(C);return jsxRuntimeExports$1.jsxs("div",{style:{marginLeft:`${n*8}px`},children:[jsxRuntimeExports$1.jsxs("div",{className:"flex items-center gap-1 cursor-pointer",onClick:()=>E(U,C),children:[jsxRuntimeExports$1.jsx("input",{type:"checkbox",checked:B,ref:Y=>{Y&&(Y.indeterminate=W)},onChange:Y=>Y.stopPropagation()}),C&&C.length>0&&jsxRuntimeExports$1.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),x(Z=>({...Z,[U]:!Z[U]}))},className:"p-0.5 focus:outline-none",children:y[U]?jsxRuntimeExports$1.jsx(DownDropDownIcon,{size:14}):jsxRuntimeExports$1.jsx(RightDropDownIcon,{size:14})}),jsxRuntimeExports$1.jsx("span",{children:U})]}),C&&C.length>0&&y[U]&&jsxRuntimeExports$1.jsx(TypeCheckboxTree,{types:C,selectedTypes:i,setSelectedTypes:a,level:n+1})]},U)})})}function SortIcon({direction:t="asc",size:i=14,className:a=""}){return jsxRuntimeExports$1.jsx("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:`${a} transform ${t==="asc"?"rotate-180":""}`,children:jsxRuntimeExports$1.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function DataTable({title:t,columns:i,data:a=[],maxWidth:n="2000px",sortableCols:y=!0,breakableCols:x=!1,renderIfMissing:k=!1}){const[S,E]=reactExports.useState({key:null,direction:"asc"}),U=reactExports.useMemo(()=>{if(!a)return[];if(!S.key)return a;const C=[...a].sort((B,W)=>{const Y=B[S.key],Z=W[S.key];return!isNaN(Y)&&!isNaN(Z)?Y-Z:String(Y).localeCompare(String(Z))});return S.direction==="asc"?C:C.reverse()},[a,S]);return!k&&(!a||a.length===0)?null:jsxRuntimeExports$1.jsxs("div",{className:"p-2",style:{maxWidth:n},children:[jsxRuntimeExports$1.jsx("h2",{className:"text-md md:text-lg font-semibold mb-2",children:t}),jsxRuntimeExports$1.jsx("div",{className:"overflow-x-auto shadow-md md:shadow bg-white",children:jsxRuntimeExports$1.jsxs("table",{className:"min-w-full text-xs md:text-sm text-left",children:[jsxRuntimeExports$1.jsx("thead",{className:"bg-gray-100 text-gray-700",children:jsxRuntimeExports$1.jsx("tr",{children:i.map(C=>{const B=Array.isArray(y)?y.includes(C):y;return jsxRuntimeExports$1.jsx("th",{className:`px-3 md:px-4 py-0.5 md:py-1 font-medium ${B?"cursor-pointer select-none":""}`,onClick:()=>B&&E(W=>({key:C,direction:W.key===C&&W.direction==="asc"?"desc":"asc"})),children:jsxRuntimeExports$1.jsxs("div",{className:"flex items-center gap-1",children:[C,B&&S.key===C&&jsxRuntimeExports$1.jsx(SortIcon,{direction:S.direction,size:14,className:"ml-1 text-gray-500"})]})},C)})})}),jsxRuntimeExports$1.jsx("tbody",{children:U.map((C,B)=>jsxRuntimeExports$1.jsx("tr",{className:B%2===0?"bg-white":"bg-gray-50",children:i.map(W=>{const Z=["px-3 md:px-4 py-0.5 md:py-2 text-gray-800",(Array.isArray(x)?x.includes(W):x)?"whitespace-normal break-all":"whitespace-nowrap"].join(" ");return jsxRuntimeExports$1.jsx("td",{className:Z,children:C[W]},W)})},C.id||B))})]})})]})}function useMediaQuery(t){const[i,a]=reactExports.useState(()=>typeof window<"u"?window.matchMedia(t).matches:!1);return reactExports.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia(t),y=x=>{a(x.matches),console.log("media query fired")};return n.addEventListener("change",y),a(n.matches),()=>n.removeEventListener("change",y)},[t]),i}const columnLabels={uuid:"Unique ID",label:"Label",full_type:"Type",ctime:"Created",mtime:"Modified",id:"ID"},columnOrder=["Unique ID","Label","Type","Created","Modified",""];function formatValue(t,i,a=!1){if(i==null)return"";switch(t){case"Type":return typeof i!="string"?i:a&&i.replace(/\|$/,"").split(".").at(-2)||i;case"Created":case"Modified":const n=new Date(i);return a?n.toISOString().split("T")[0]:n.toLocaleString();case"Unique ID":return a&&typeof i=="string"?i.split("-")[0]:i;default:return i}}function formatTableData(t,i,a=!1){return t.map(n=>{const y={};return columnOrder.forEach(x=>{const k=Object.keys(columnLabels).find(S=>columnLabels[S]===x);k&&n[k]!==void 0&&(y[x]=formatValue(x,n[k],a))}),y[""]=jsxRuntimeExports$1.jsx("button",{onClick:()=>i(n.uuid),className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 transition",children:"View"}),y})}function sortGroups(t){return[...t].sort((i,a)=>{const n=/^\d/.test(i.label),y=/^\d/.test(a.label);return n&&!y?1:!n&&y?-1:i.label.localeCompare(a.label,void 0,{numeric:!0})})}function GroupsViewer({restApiUrl:t,setRootNodeId:i}){const[a,n]=reactExports.useState([]),[y,x]=reactExports.useState([]),[k,S]=reactExports.useState([]),[E,U]=reactExports.useState([]),[C,B]=reactExports.useState(0),[W,Y]=reactExports.useState(!1),[Z,T]=reactExports.useState(null),[l,f]=reactExports.useState(""),D=200,I=useMediaQuery("(max-width: 900px)"),V=I?columnOrder.filter(G=>G!=="Created"):columnOrder;reactExports.useEffect(()=>{fetchGroups(t).then(n).catch(console.error)},[t]);const K=reactExports.useCallback(async(G=0,ee=D)=>{Y(!0),T(null);try{const ae=getFlattenedNodeTypes(k,aiidaTypes),Se=buildQuery({groups:y,nodeTypes:ae,limit:ee,offset:G}),qe=(await fetchFromQueryBuilder(t,Se)).node||[];U(Pe=>G===0?qe:[...Pe,...qe]),B(G+qe.length)}catch(ae){console.error(ae),T(ae.message||"Failed to fetch nodes")}finally{Y(!1)}},[t,y,k]);reactExports.useEffect(()=>{a.length>0&&E.length===0&&K(0,1e3)},[a,E.length,K]);const A=reactExports.useMemo(()=>formatTableData(E,i,I),[E,I,i]),L=()=>{l.trim()!==""&&(i(l.trim()),f(""))};return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col md:flex-row gap-4 overflow-auto w-full items-start",children:[jsxRuntimeExports$1.jsxs("div",{className:"min-w-[250px] max-w-[400px] flex-shrink-0 bg-slate-50 p-2 px-3 rounded",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports$1.jsx("h4",{className:"font-medium mt-2",children:"Filter by Node Types"}),jsxRuntimeExports$1.jsx("button",{onClick:()=>K(0),className:"px-3 py-1 rounded bg-indigo-700 text-white hover:bg-indigo-800 transition",children:"Apply"})]}),jsxRuntimeExports$1.jsx(TypeCheckboxTree,{types:aiidaTypes,selectedTypes:k,setSelectedTypes:S}),jsxRuntimeExports$1.jsx("h4",{className:"font-medium my-2 mt-4",children:"Filter by Defined Groups"}),sortGroups(a).map(G=>jsxRuntimeExports$1.jsxs("label",{className:"flex items-start gap-2 mb-1",children:[jsxRuntimeExports$1.jsx("input",{type:"checkbox",className:"mt-1",checked:y.includes(G.label),onChange:ee=>x(ae=>ee.target.checked?[...ae,G.label]:ae.filter(Se=>Se!==G.label))}),jsxRuntimeExports$1.jsx("span",{className:"truncate block",title:G.label,children:G.label})]},G.label))]}),jsxRuntimeExports$1.jsxs("div",{className:"flex-1 bg-white rounded",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col md:flex-row",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex-1 flex items-center gap-2 py-2 md:py-0",children:[jsxRuntimeExports$1.jsxs("h4",{className:"text-xl font-semibold",children:[A.length," nodes loaded"]}),A.length>0&&jsxRuntimeExports$1.jsx("button",{onClick:()=>K(C),className:"px-3 py-1 rounded bg-gray-700 text-white hover:bg-gray-800 transition",children:"Load next 200"})]}),jsxRuntimeExports$1.jsxs("div",{className:"flex md:flex-row gap-2 py-0.5",children:[jsxRuntimeExports$1.jsx("input",{type:"text",value:l,onChange:G=>f(G.target.value),placeholder:"Navigate to a UUID",className:"border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-700 rounded px-1 py-1"}),jsxRuntimeExports$1.jsx("button",{onClick:L,className:"px-1 py-0.5 md:px-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 transition",children:"Go"})]})]}),W&&jsxRuntimeExports$1.jsx("div",{className:"w-full h-[400px] flex items-center justify-center",children:jsxRuntimeExports$1.jsx(Spinner,{})}),Z&&!W&&jsxRuntimeExports$1.jsx("div",{className:"w-full h-[400px] flex flex-col items-center justify-center",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:Z,onRetry:()=>K(C)})}),!W&&!Z&&jsxRuntimeExports$1.jsx(DataTable,{columns:V,data:A,sortableCols:V,renderIfMissing:!0,breakableCols:["Unique ID","Label","Type","Created","Modified"]})]})]})}function HelpViewer(){return jsxRuntimeExports$1.jsxs("div",{className:"p-2 w-full h-full overflow-y-auto bg-white",children:[jsxRuntimeExports$1.jsxs("section",{className:"mb-4",children:[jsxRuntimeExports$1.jsx("h3",{className:"text-lg  mb-3 flex items-center gap-2",children:"Overview"}),jsxRuntimeExports$1.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Aiida Explorer is an interactive tool for visualizing AiiDA workflows and calculations. You can navigate nodes, inspect their details, and explore relationships between workflows, calculations, and data nodes. This tool leverages the"," ",jsxRuntimeExports$1.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/stable/internals/rest_api.html",className:"text-blue-400 hover:underline hover:text-blue-700",target:"_blank",children:"AiiDA REST API"})," ","and presents data retrieved from it in a curated manner."]})]}),jsxRuntimeExports$1.jsxs("section",{className:"mb-4",children:[jsxRuntimeExports$1.jsxs("h3",{className:"text-lg  mb-3 flex items-center gap-2",children:[jsxRuntimeExports$1.jsx(GraphIcon,{size:24})," Provenance"]}),jsxRuntimeExports$1.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Using AiiDA for high-throughput workflows comes with the benefit of AiiDA provenence. This provenence stores how calculations were performed and the results from them. Every node is part of a directed acyclic graph (DAG) that records the inputs, outputs, and intermediate steps. Understanding provenance helps reproducability and facilitates sharing. Learn more in the"," ",jsxRuntimeExports$1.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/latest/",className:"text-blue-400 hover:underline hover:text-blue-700",target:"_blank",children:"official docs."})," ","This tool uses the the 'API endpoint /links' to build up a local view of each node."]})]}),jsxRuntimeExports$1.jsxs("section",{className:"mb-4",children:[jsxRuntimeExports$1.jsxs("h3",{className:"text-lg  mb-3 flex items-center gap-2",children:[jsxRuntimeExports$1.jsx(ClickIcon,{size:24})," Inspecting Nodes"]}),jsxRuntimeExports$1.jsxs("ul",{className:"pl-4 list-inside text-gray-700 space-y-1",children:[jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(ClickIcon2,{size:22})," Click a node:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:"Highlights the node and displays detailed information in the side panel."})]}),jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(DoubleClickIcon,{size:22})," Double-click a node:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:jsxRuntimeExports$1.jsx("li",{children:"Sets the node as the central focus, building the links and centering the graph."})})]}),jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(BreadcrumbsIcon,{size:22})," Breadcrumbs:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:jsxRuntimeExports$1.jsx("li",{children:"Quickly navigate back to previously explored nodes. A history of the last 10 visited nodes is retained."})})]})]})]}),jsxRuntimeExports$1.jsxs("section",{className:"mb-4",children:[jsxRuntimeExports$1.jsxs("h3",{className:"text-lg  mb-3 flex items-center gap-2",children:[jsxRuntimeExports$1.jsx(GraphIcon,{size:26})," Buttons & Controls"]}),jsxRuntimeExports$1.jsxs("ul",{className:"pl-4 list-inside text-gray-700 space-y-1 ",children:[jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(GroupIcon,{size:22})," Find node:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:"Provides a graphical interface for simple AiiDA queries using the querybuilder endpoint."})]}),jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(LinksIcon,{size:20})," Get Counts:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:"Fetches the parent/child counts for all nodes currently visible in the graph."})]}),jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(QuestionIcon,{size:20})," Help:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:"Opens this help overlay."})]}),jsxRuntimeExports$1.jsx("li",{})]})]}),jsxRuntimeExports$1.jsxs("p",{className:"text-gray-500 text-sm mt-6",children:["This tool is currently in beta testing stage. Report unexpected behaviour, bugs or general suggestions on"," ",jsxRuntimeExports$1.jsxs("a",{href:"https://github.com/aiidateam/aiida-explorer/issues/new",className:"group inline-flex items-center gap-0.5 text-blue-400",target:"_blank",children:[jsxRuntimeExports$1.jsx("span",{className:"transition-colors group-hover:text-blue-700",children:"GitHub."}),jsxRuntimeExports$1.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-blue-400 group-hover:bg-blue-700 transition-colors",children:jsxRuntimeExports$1.jsx(GithubIcon,{className:"w-[18-px] h-[18px] text-white"})})]})]})]})}function FormattedMetaData({nodeData:t,userData:i}){const a=i?.users||[],n=t?.aiida,[y,x]=reactExports.useState(!1);if(!n)return jsxRuntimeExports$1.jsx("div",{className:"p-4 text-gray-500 italic",children:"No metadata available"});const k=Array.isArray(a)?a.find(S=>S.id===n.user_id):null;return jsxRuntimeExports$1.jsxs("div",{className:"",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex gap-2 items-center cursor-pointer sm:cursor-default",onClick:()=>x(!y),children:[jsxRuntimeExports$1.jsx("h2",{className:"text-md md:text-lg font-semibold",children:t.label||""}),jsxRuntimeExports$1.jsx("span",{className:"md:hidden transition-transform duration-200",children:y?"":""})]}),jsxRuntimeExports$1.jsx("div",{className:`${y?"block":"hidden"} mt-1 md:block md:mt-2`,children:jsxRuntimeExports$1.jsxs("div",{className:"space-y-1 px-1 text-xs md:text-sm",children:[n.uuid&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"UUID:"})," ",n.uuid]}),n.ctime&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Created:"})," ",n.ctime]}),n.mtime&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Modified:"})," ",n.mtime]}),n.node_type&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Node Type:"})," ",n.node_type]}),k&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Owner:"})," ",k.first_name," ",k.last_name||"",k.institution&&jsxRuntimeExports$1.jsxs("span",{className:"text-gray-500",children:[" (",k.institution,")"]})]})]})})]})}const isBoolean=t=>typeof t=="boolean"||t instanceof Boolean,isNumber=t=>typeof t=="number"||t instanceof Number,isBigInt=t=>typeof t=="bigint"||t instanceof BigInt,isDate=t=>!!t&&t instanceof Date,isString=t=>typeof t=="string"||t instanceof String,isArray=t=>Array.isArray(t),isObject=t=>typeof t=="object"&&t!==null,isFunction=t=>!!t&&t instanceof Object&&typeof t=="function";function quoteString(t,i){return i===void 0&&(i=!1),!t||i?`"${t}"`:t}function quoteStringValue(t,i,a){return a?JSON.stringify(t):i?`"${t}"`:t}function ExpandableObject(t){let{field:i,value:a,data:n,lastElement:y,openBracket:x,closeBracket:k,level:S,style:E,shouldExpandNode:U,clickToExpandNode:C,outerRef:B,beforeExpandChange:W}=t;const Y=reactExports.useRef(!1),[Z,T]=reactExports.useState(()=>U(S,a,i)),l=reactExports.useRef(null);reactExports.useEffect(()=>{Y.current?T(U(S,a,i)):Y.current=!0},[U]);const f=reactExports.useId();if(n.length===0)return EmptyObject({field:i,openBracket:x,closeBracket:k,lastElement:y,style:E});const D=Z?E.collapseIcon:E.expandIcon,I=Z?E.ariaLables.collapseJson:E.ariaLables.expandJson,V=S+1,K=n.length-1,A=ee=>{Z!==ee&&(!W||W({level:S,value:a,field:i,newExpandValue:ee}))&&T(ee)},L=ee=>{if(ee.key==="ArrowRight"||ee.key==="ArrowLeft")ee.preventDefault(),A(ee.key==="ArrowRight");else if(ee.key==="ArrowUp"||ee.key==="ArrowDown"){ee.preventDefault();const ae=ee.key==="ArrowUp"?-1:1;if(!B.current)return;const Se=B.current.querySelectorAll("[role=button]");let $e=-1;for(let Pe=0;Pe<Se.length;Pe++)if(Se[Pe].tabIndex===0){$e=Pe;break}if($e<0)return;const qe=($e+ae+Se.length)%Se.length;Se[$e].tabIndex=-1,Se[qe].tabIndex=0,Se[qe].focus()}},G=()=>{var ee;A(!Z);const ae=l.current;if(!ae)return;const Se=(ee=B.current)===null||ee===void 0?void 0:ee.querySelector('[role=button][tabindex="0"]');Se&&(Se.tabIndex=-1),ae.tabIndex=0,ae.focus()};return reactExports.createElement("div",{className:E.basicChildStyle,role:"treeitem","aria-expanded":Z,"aria-selected":void 0},reactExports.createElement("span",{className:D,onClick:G,onKeyDown:L,role:"button","aria-label":I,"aria-expanded":Z,"aria-controls":Z?f:void 0,ref:l,tabIndex:S===0?0:-1}),(i||i==="")&&(C?reactExports.createElement("span",{className:E.clickableLabel,onClick:G,onKeyDown:L},quoteString(i,E.quotesForFieldNames),":"):reactExports.createElement("span",{className:E.label},quoteString(i,E.quotesForFieldNames),":")),reactExports.createElement("span",{className:E.punctuation},x),Z?reactExports.createElement("ul",{id:f,role:"group",className:E.childFieldsContainer},n.map((ee,ae)=>reactExports.createElement(DataRender,{key:ee[0]||ae,field:ee[0],value:ee[1],style:E,lastElement:ae===K,level:V,shouldExpandNode:U,clickToExpandNode:C,beforeExpandChange:W,outerRef:B}))):reactExports.createElement("span",{className:E.collapsedContent,onClick:G,onKeyDown:L}),reactExports.createElement("span",{className:E.punctuation},k),!y&&reactExports.createElement("span",{className:E.punctuation},","))}function EmptyObject(t){let{field:i,openBracket:a,closeBracket:n,lastElement:y,style:x}=t;return reactExports.createElement("div",{className:x.basicChildStyle,role:"treeitem","aria-selected":void 0},(i||i==="")&&reactExports.createElement("span",{className:x.label},quoteString(i,x.quotesForFieldNames),":"),reactExports.createElement("span",{className:x.punctuation},a),reactExports.createElement("span",{className:x.punctuation},n),!y&&reactExports.createElement("span",{className:x.punctuation},","))}function JsonObject(t){let{field:i,value:a,style:n,lastElement:y,shouldExpandNode:x,clickToExpandNode:k,level:S,outerRef:E,beforeExpandChange:U}=t;return ExpandableObject({field:i,value:a,lastElement:y||!1,level:S,openBracket:"{",closeBracket:"}",style:n,shouldExpandNode:x,clickToExpandNode:k,data:Object.keys(a).map(C=>[C,a[C]]),outerRef:E,beforeExpandChange:U})}function JsonArray(t){let{field:i,value:a,style:n,lastElement:y,level:x,shouldExpandNode:k,clickToExpandNode:S,outerRef:E,beforeExpandChange:U}=t;return ExpandableObject({field:i,value:a,lastElement:y||!1,level:x,openBracket:"[",closeBracket:"]",style:n,shouldExpandNode:k,clickToExpandNode:S,data:a.map(C=>[void 0,C]),outerRef:E,beforeExpandChange:U})}function JsonPrimitiveValue(t){let{field:i,value:a,style:n,lastElement:y}=t,x,k=n.otherValue;return a===null?(x="null",k=n.nullValue):a===void 0?(x="undefined",k=n.undefinedValue):isString(a)?(x=quoteStringValue(a,!n.noQuotesForStringValues,n.stringifyStringValues),k=n.stringValue):isBoolean(a)?(x=a?"true":"false",k=n.booleanValue):isNumber(a)?(x=a.toString(),k=n.numberValue):isBigInt(a)?(x=`${a.toString()}n`,k=n.numberValue):isDate(a)?x=a.toISOString():isFunction(a)?x="function() { }":x=a.toString(),reactExports.createElement("div",{className:n.basicChildStyle,role:"treeitem","aria-selected":void 0},(i||i==="")&&reactExports.createElement("span",{className:n.label},quoteString(i,n.quotesForFieldNames),":"),reactExports.createElement("span",{className:k},x),!y&&reactExports.createElement("span",{className:n.punctuation},","))}function DataRender(t){const i=t.value;return isArray(i)?reactExports.createElement(JsonArray,Object.assign({},t)):isObject(i)&&!isDate(i)&&!isFunction(i)?reactExports.createElement(JsonObject,Object.assign({},t)):reactExports.createElement(JsonPrimitiveValue,Object.assign({},t))}var styles={"container-light":"_2IvMF _GzYRV","basic-element-style":"_2bkNM","child-fields-container":"_1BXBN","label-light":"_1MGIk","clickable-label-light":"_2YKJg _1MGIk _1MFti","punctuation-light":"_3uHL6 _3eOF8","value-null-light":"_2T6PJ","value-undefined-light":"_1Gho6","value-string-light":"_vGjyY","value-number-light":"_1bQdo","value-boolean-light":"_3zQKs","value-other-light":"_1xvuR","collapse-icon-light":"_oLqym _f10Tu _1MFti _1LId0","expand-icon-light":"_2AXVT _f10Tu _1MFti _1UmXx","collapsed-content-light":"_2KJWg _1pNG9 _1MFti"};const defaultAriaLables={collapseJson:"collapse JSON",expandJson:"expand JSON"},defaultStyles={container:styles["container-light"],basicChildStyle:styles["basic-element-style"],childFieldsContainer:styles["child-fields-container"],label:styles["label-light"],clickableLabel:styles["clickable-label-light"],nullValue:styles["value-null-light"],undefinedValue:styles["value-undefined-light"],stringValue:styles["value-string-light"],booleanValue:styles["value-boolean-light"],numberValue:styles["value-number-light"],otherValue:styles["value-other-light"],punctuation:styles["punctuation-light"],collapseIcon:styles["collapse-icon-light"],expandIcon:styles["expand-icon-light"],collapsedContent:styles["collapsed-content-light"],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:defaultAriaLables,stringifyStringValues:!1},allExpanded=()=>!0,JsonView=t=>{let{data:i,style:a=defaultStyles,shouldExpandNode:n=allExpanded,clickToExpandNode:y=!1,beforeExpandChange:x,compactTopLevel:k,...S}=t;const E=reactExports.useRef(null);return reactExports.createElement("div",Object.assign({"aria-label":"JSON view"},S,{className:a.container,ref:E,role:"tree"}),k&&isObject(i)?Object.entries(i).map(U=>{let[C,B]=U;return reactExports.createElement(DataRender,{key:C,field:C,value:B,style:{...defaultStyles,...a},lastElement:!0,level:1,shouldExpandNode:n,clickToExpandNode:y,beforeExpandChange:x,outerRef:E})}):reactExports.createElement(DataRender,{value:i,style:{...defaultStyles,...a},lastElement:!0,level:0,shouldExpandNode:n,clickToExpandNode:y,outerRef:E,beforeExpandChange:x}))};function FileTable({title:t,dataArray:i=[],onView:a}){if(!Array.isArray(i)||i.length===0)return null;const n=["File","Download","View"],y=i.map(x=>({File:x.name,Download:jsxRuntimeExports$1.jsx("a",{href:x.downloadUrl||"#",download:x.name||void 0,rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors duration-75",children:jsxRuntimeExports$1.jsx(DownloadIcon,{size:18,className:"hover:scale-105 transition-all duration-75"})}),View:jsxRuntimeExports$1.jsx("button",{type:"button",onClick:()=>a?.(x.name,x.downloadUrl),className:"text-green-600 hover:text-green-800 transition-colors duration-75",children:jsxRuntimeExports$1.jsx(ViewIcon,{size:18,className:"hover:scale-105 transition-all duration-75"})})}));return jsxRuntimeExports$1.jsx("div",{children:jsxRuntimeExports$1.jsx(DataTable,{title:t,columns:n,data:y,sortableCols:["File"]})})}function RawDataVisualiser({nodeData:t={}}){const[i,a]=reactExports.useState(null),[n,y]=reactExports.useState(null),[x,k]=reactExports.useState(null),[S,E]=reactExports.useState(!1),U=(Y,Z)=>{navigator.clipboard.writeText(JSON.stringify(Y,null,2)),a(Z),setTimeout(()=>a(null),700)},C=async(Y,Z)=>{try{const l=await(await fetch(Z)).text();y(l),k(Y),E(!0)}catch(T){console.error("Error loading preview:",T),y("Failed to load preview."),k(Y),E(!0)}},B=[{title:"Attributes",data:t.attributes},{title:"Derived Properties",data:t.derived_properties},{title:"Extras",data:t.extras},{title:"Full AIIDA Metadata",data:t.aiida,collapseLevel:0}],W=jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsx(FileTable,{title:"Download By format",dataArray:t.downloadByFormat?Object.entries(t.downloadByFormat).map(([Y,Z])=>({name:Y,downloadUrl:Z})):[],onView:C}),jsxRuntimeExports$1.jsx(FileTable,{title:"Input Files (in this node)",dataArray:t.files?.input_files||[],onView:C}),jsxRuntimeExports$1.jsx(FileTable,{title:"Output Files (retrieved)",dataArray:t.files?.output_files||[],onView:C}),jsxRuntimeExports$1.jsx(FileTable,{title:"Raw Files",dataArray:t.repo_list||[],onView:C})]});return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col px-3 py-2 gap-2 md:gap-4",children:[W,B.map((Y,Z)=>{const T=Y.data||{};return Object.keys(T).length===0?null:jsxRuntimeExports$1.jsxs("div",{className:"py-1",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports$1.jsx("h3",{className:"text-md md:text-lg ml-2 font-semibold",children:Y.title}),jsxRuntimeExports$1.jsxs("button",{className:"relative flex items-center gap-1 hover:text-blue-500",onClick:()=>U(T,Z),children:[jsxRuntimeExports$1.jsx(ClipBoardIcon,{size:22}),jsxRuntimeExports$1.jsxs("div",{className:`absolute left-full ml-2 top-1/2 -translate-y-1/2 flex items-center gap-1 text-green-400 text-sm transition-all duration-400 transform ${i===Z?"opacity-100 translate-x-0":"opacity-0 -translate-x-2"}`,children:[jsxRuntimeExports$1.jsx(ClipboardCopyIcon,{size:16}),jsxRuntimeExports$1.jsx("span",{children:"Copied"})]})]})]}),jsxRuntimeExports$1.jsx("div",{className:"max-h-32 md:max-h-96 overflow-auto border border-gray-200 rounded p-2 bg-gray-50",children:jsxRuntimeExports$1.jsx(JsonView,{data:T,shouldExpandNode:l=>l<(Y.collapseLevel??1)})})]},Z)}),jsxRuntimeExports$1.jsx(Overlay,{active:S,onClose:()=>E(!1),title:`Preview: ${x}`,children:jsxRuntimeExports$1.jsx("pre",{className:"overflow-y-auto whitespace-pre-wrap text-sm flex-1",children:n})})]})}function transpose(t){const i=t.length,a=t[0].length,n=new Array(a);for(let y=0;y<a;y++){n[y]=new Array(i);for(let x=0;x<i;x++)n[y][x]=t[x][y]}return n}const baseColors=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function getColor(t){return t<baseColors.length?baseColors[t]:`hsl(${t*47%360}, 70%, 50%)`}function mergeLegendTracesByName(t){const i=new Set;return t.map(n=>{const y=n.name||"",x=!i.has(y);return x&&i.add(y),{...n,legendgroup:y,showlegend:x}})}function getXYData(t){const i=[],a=[];let n=null;return t.paths.forEach((y,x)=>{const k=y.x,S=y.values;x>0&&(i.push(null),a.forEach(E=>E.push(null))),k.forEach((E,U)=>{E===n&&(i.push(null),a.forEach(C=>C.push(null))),i.push(E),n=E,S.forEach((C,B)=>{a[B]||(a[B]=[]),a[B].push(C[U])})})}),{xs:i,ys:a}}function prettifyLabels(t){const i={GAMMA:"",DELTA:"",SIGMA:"",LAMBDA:""};Object.keys(i).forEach(n=>{const y=new RegExp(n,"gi");t=t.replace(y,i[n])}),t=t.replace(/\bG\b/g,""),t=t.replace(/-/g,"");const a={0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};return t=t.replace(/_(.)/g,(n,y)=>a[y]||n),t}function getXLabelPos(t=td.paths){const i=[0];for(const a of t)a.x.length<3||i.push(a.x[a.x.length-1]);return i}function getXLabelsfromkpath(t){const i=t.flat(),a=[];a.push(i[0]);for(let n=1;n<i.length-1;n++)i[n]===i[n+1]?(a.push(i[n]),n++):(a.push(i[n]+"|"+i[n+1]),n++);return a.push(i[i.length-1]),a}function getXYRangeForAxis(t,i="x",a="y"){let n=1/0,y=-1/0,x=1/0,k=-1/0;for(const S of t){const E=S.xaxis===i||!S.xaxis&&i==="x",U=S.yaxis===a||!S.yaxis&&a==="y";if(!(!E||!U)){for(const C of S.x??[])typeof C=="number"&&(n=Math.min(n,C),y=Math.max(y,C));for(const C of S.y??[])typeof C=="number"&&(x=Math.min(x,C),k=Math.max(k,C))}}return{x:n===1/0?null:[n,y],y:x===1/0?null:[x,k]}}function createFermiLine(t,i,a,n={}){return{x:t,y:i,mode:"lines",type:"scatter",name:`Fermi [${a}eV]`,legendgroup:`fermi-${a}`,showlegend:n.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...n}}function addfermiLines(t,i,a,n){const y=[...i];if(a&&!n){const{y:x}=getXYRangeForAxis(i);for(const k of t)y.push(createFermiLine([k,k],[x[0],x[1]],k))}else if(n&&!a){const{x}=getXYRangeForAxis(i);for(const k of t)y.push(createFermiLine([x[0],x[1]],[k,k],k))}else if(n&&a){const{x}=getXYRangeForAxis(i,"x2","y"),{x:k}=getXYRangeForAxis(i,"x","y");for(const S of t)y.push(createFermiLine([k[0],k[1]],[S,S],S)),y.push(createFermiLine([x[0],x[1]],[S,S],S,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return y}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var t=function(D){return i(D)&&!a(D)};function i(f){return!!f&&typeof f=="object"}function a(f){var D=Object.prototype.toString.call(f);return D==="[object RegExp]"||D==="[object Date]"||x(f)}var n=typeof Symbol=="function"&&Symbol.for,y=n?Symbol.for("react.element"):60103;function x(f){return f.$$typeof===y}function k(f){return Array.isArray(f)?[]:{}}function S(f,D){return D.clone!==!1&&D.isMergeableObject(f)?T(k(f),f,D):f}function E(f,D,I){return f.concat(D).map(function(V){return S(V,I)})}function U(f,D){if(!D.customMerge)return T;var I=D.customMerge(f);return typeof I=="function"?I:T}function C(f){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(f).filter(function(D){return Object.propertyIsEnumerable.call(f,D)}):[]}function B(f){return Object.keys(f).concat(C(f))}function W(f,D){try{return D in f}catch{return!1}}function Y(f,D){return W(f,D)&&!(Object.hasOwnProperty.call(f,D)&&Object.propertyIsEnumerable.call(f,D))}function Z(f,D,I){var V={};return I.isMergeableObject(f)&&B(f).forEach(function(K){V[K]=S(f[K],I)}),B(D).forEach(function(K){Y(f,K)||(W(f,K)&&I.isMergeableObject(D[K])?V[K]=U(K,I)(f[K],D[K],I):V[K]=S(D[K],I))}),V}function T(f,D,I){I=I||{},I.arrayMerge=I.arrayMerge||E,I.isMergeableObject=I.isMergeableObject||t,I.cloneUnlessOtherwiseSpecified=S;var V=Array.isArray(D),K=Array.isArray(f),A=V===K;return A?V?I.arrayMerge(f,D,I):Z(f,D,I):S(D,I)}T.all=function(D,I){if(!Array.isArray(D))throw new Error("first argument should be an array");return D.reduce(function(V,K){return T(V,K,I)},{})};var l=T;return cjs=l,cjs}var cjsExports=requireCjs();const deepmerge=getDefaultExportFromCjs(cjsExports),plotLayoutDefault={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},plotBandLayout=deepmerge(plotLayoutDefault,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),plotDOSLayout=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotDOSLayoutF=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotCombinedLayout={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},traceDefaultBands={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},traceDefaultDos={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};var plotlyBasic$1={exports:{}},plotlyBasic=plotlyBasic$1.exports,hasRequiredPlotlyBasic;function requirePlotlyBasic(){return hasRequiredPlotlyBasic||(hasRequiredPlotlyBasic=1,(function(t){(function(i,a){t.exports?t.exports=a():i.moduleName=a()})(typeof self<"u"?self:plotlyBasic,()=>{var i=(()=>{var a=Object.getOwnPropertyNames,n=(ce,fe)=>function(){return fe||(0,ce[a(ce)[0]])((fe={exports:{}}).exports,fe),fe.exports},y=n({"src/version.js"(ce){ce.version="3.1.1"}}),x=n({"node_modules/native-promise-only/lib/npo.src.js"(ce,fe){(function(u,c,m){c[u]=c[u]||m(),typeof fe<"u"&&fe.exports&&(fe.exports=c[u])})("Promise",typeof window<"u"?window:ce,function(){var u,c,m,v=Object.prototype.toString,p=typeof setImmediate<"u"?function(R){return setImmediate(R)}:setTimeout;try{Object.defineProperty({},"x",{}),u=function(R,H,te,J){return Object.defineProperty(R,H,{value:te,writable:!0,configurable:J!==!1})}}catch{u=function(H,te,J){return H[te]=J,H}}m=(function(){var R,H,te;function J(ye,se){this.fn=ye,this.self=se,this.next=void 0}return{add:function(se,he){te=new J(se,he),H?H.next=te:R=te,H=te,te=void 0},drain:function(){var se=R;for(R=H=c=void 0;se;)se.fn.call(se.self),se=se.next}}})();function g(_,R){m.add(_,R),c||(c=p(m.drain))}function w(_){var R,H=typeof _;return _!=null&&(H=="object"||H=="function")&&(R=_.then),typeof R=="function"?R:!1}function s(){for(var _=0;_<this.chain.length;_++)j(this,this.state===1?this.chain[_].success:this.chain[_].failure,this.chain[_]);this.chain.length=0}function j(_,R,H){var te,J;try{R===!1?H.reject(_.msg):(R===!0?te=_.msg:te=R.call(void 0,_.msg),te===H.promise?H.reject(TypeError("Promise-chain cycle")):(J=w(te))?J.call(te,H.resolve,H.reject):H.resolve(te))}catch(ye){H.reject(ye)}}function b(_){var R,H=this;if(!H.triggered){H.triggered=!0,H.def&&(H=H.def);try{(R=w(_))?g(function(){var te=new N(H);try{R.call(_,function(){b.apply(te,arguments)},function(){z.apply(te,arguments)})}catch(J){z.call(te,J)}}):(H.msg=_,H.state=1,H.chain.length>0&&g(s,H))}catch(te){z.call(new N(H),te)}}}function z(_){var R=this;R.triggered||(R.triggered=!0,R.def&&(R=R.def),R.msg=_,R.state=2,R.chain.length>0&&g(s,R))}function X(_,R,H,te){for(var J=0;J<R.length;J++)(function(se){_.resolve(R[se]).then(function(pe){H(se,pe)},te)})(J)}function N(_){this.def=_,this.triggered=!1}function O(_){this.promise=_,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function F(_){if(typeof _!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var R=new O(this);this.then=function(te,J){var ye={success:typeof te=="function"?te:!0,failure:typeof J=="function"?J:!1};return ye.promise=new this.constructor(function(he,pe){if(typeof he!="function"||typeof pe!="function")throw TypeError("Not a function");ye.resolve=he,ye.reject=pe}),R.chain.push(ye),R.state!==0&&g(s,R),ye.promise},this.catch=function(te){return this.then(void 0,te)};try{_.call(void 0,function(te){b.call(R,te)},function(te){z.call(R,te)})}catch(H){z.call(R,H)}}var P=u({},"constructor",F,!1);return F.prototype=P,u(P,"__NPO__",0,!1),u(F,"resolve",function(R){var H=this;return R&&typeof R=="object"&&R.__NPO__===1?R:new H(function(J,ye){if(typeof J!="function"||typeof ye!="function")throw TypeError("Not a function");J(R)})}),u(F,"reject",function(R){return new this(function(te,J){if(typeof te!="function"||typeof J!="function")throw TypeError("Not a function");J(R)})}),u(F,"all",function(R){var H=this;return v.call(R)!="[object Array]"?H.reject(TypeError("Not an array")):R.length===0?H.resolve([]):new H(function(J,ye){if(typeof J!="function"||typeof ye!="function")throw TypeError("Not a function");var se=R.length,he=Array(se),pe=0;X(H,R,function(ue,me){he[ue]=me,++pe===se&&J(he)},ye)})}),u(F,"race",function(R){var H=this;return v.call(R)!="[object Array]"?H.reject(TypeError("Not an array")):new H(function(J,ye){if(typeof J!="function"||typeof ye!="function")throw TypeError("Not a function");X(H,R,function(he,pe){J(pe)},ye)})}),F})}}),k=n({"node_modules/@plotly/d3/d3.js"(ce,fe){(function(){var d={version:"3.8.2"},u=[].slice,c=function(h){return u.call(h)},m=self.document;function v(h){return h&&(h.ownerDocument||h.document||h).documentElement}function p(h){return h&&(h.ownerDocument&&h.ownerDocument.defaultView||h.document&&h||h.defaultView)}if(m)try{c(m.documentElement.childNodes)[0].nodeType}catch{c=function(q){for(var ne=q.length,Ce=new Array(ne);ne--;)Ce[ne]=q[ne];return Ce}}if(Date.now||(Date.now=function(){return+new Date}),m)try{m.createElement("DIV").style.setProperty("opacity",0,"")}catch{var g=this.Element.prototype,w=g.setAttribute,s=g.setAttributeNS,j=this.CSSStyleDeclaration.prototype,b=j.setProperty;g.setAttribute=function(q,ne){w.call(this,q,ne+"")},g.setAttributeNS=function(q,ne,Ce){s.call(this,q,ne,Ce+"")},j.setProperty=function(q,ne,Ce){b.call(this,q,ne+"",Ce)}}d.ascending=z;function z(h,q){return h<q?-1:h>q?1:h>=q?0:NaN}d.descending=function(h,q){return q<h?-1:q>h?1:q>=h?0:NaN},d.min=function(h,q){var ne=-1,Ce=h.length,Ne,Ge;if(arguments.length===1){for(;++ne<Ce;)if((Ge=h[ne])!=null&&Ge>=Ge){Ne=Ge;break}for(;++ne<Ce;)(Ge=h[ne])!=null&&Ne>Ge&&(Ne=Ge)}else{for(;++ne<Ce;)if((Ge=q.call(h,h[ne],ne))!=null&&Ge>=Ge){Ne=Ge;break}for(;++ne<Ce;)(Ge=q.call(h,h[ne],ne))!=null&&Ne>Ge&&(Ne=Ge)}return Ne},d.max=function(h,q){var ne=-1,Ce=h.length,Ne,Ge;if(arguments.length===1){for(;++ne<Ce;)if((Ge=h[ne])!=null&&Ge>=Ge){Ne=Ge;break}for(;++ne<Ce;)(Ge=h[ne])!=null&&Ge>Ne&&(Ne=Ge)}else{for(;++ne<Ce;)if((Ge=q.call(h,h[ne],ne))!=null&&Ge>=Ge){Ne=Ge;break}for(;++ne<Ce;)(Ge=q.call(h,h[ne],ne))!=null&&Ge>Ne&&(Ne=Ge)}return Ne},d.extent=function(h,q){var ne=-1,Ce=h.length,Ne,Ge,ht;if(arguments.length===1){for(;++ne<Ce;)if((Ge=h[ne])!=null&&Ge>=Ge){Ne=ht=Ge;break}for(;++ne<Ce;)(Ge=h[ne])!=null&&(Ne>Ge&&(Ne=Ge),ht<Ge&&(ht=Ge))}else{for(;++ne<Ce;)if((Ge=q.call(h,h[ne],ne))!=null&&Ge>=Ge){Ne=ht=Ge;break}for(;++ne<Ce;)(Ge=q.call(h,h[ne],ne))!=null&&(Ne>Ge&&(Ne=Ge),ht<Ge&&(ht=Ge))}return[Ne,ht]};function X(h){return h===null?NaN:+h}function N(h){return!isNaN(h)}d.sum=function(h,q){var ne=0,Ce=h.length,Ne,Ge=-1;if(arguments.length===1)for(;++Ge<Ce;)N(Ne=+h[Ge])&&(ne+=Ne);else for(;++Ge<Ce;)N(Ne=+q.call(h,h[Ge],Ge))&&(ne+=Ne);return ne},d.mean=function(h,q){var ne=0,Ce=h.length,Ne,Ge=-1,ht=Ce;if(arguments.length===1)for(;++Ge<Ce;)N(Ne=X(h[Ge]))?ne+=Ne:--ht;else for(;++Ge<Ce;)N(Ne=X(q.call(h,h[Ge],Ge)))?ne+=Ne:--ht;if(ht)return ne/ht},d.quantile=function(h,q){var ne=(h.length-1)*q+1,Ce=Math.floor(ne),Ne=+h[Ce-1],Ge=ne-Ce;return Ge?Ne+Ge*(h[Ce]-Ne):Ne},d.median=function(h,q){var ne=[],Ce=h.length,Ne,Ge=-1;if(arguments.length===1)for(;++Ge<Ce;)N(Ne=X(h[Ge]))&&ne.push(Ne);else for(;++Ge<Ce;)N(Ne=X(q.call(h,h[Ge],Ge)))&&ne.push(Ne);if(ne.length)return d.quantile(ne.sort(z),.5)},d.variance=function(h,q){var ne=h.length,Ce=0,Ne,Ge,ht=0,at=-1,mt=0;if(arguments.length===1)for(;++at<ne;)N(Ne=X(h[at]))&&(Ge=Ne-Ce,Ce+=Ge/++mt,ht+=Ge*(Ne-Ce));else for(;++at<ne;)N(Ne=X(q.call(h,h[at],at)))&&(Ge=Ne-Ce,Ce+=Ge/++mt,ht+=Ge*(Ne-Ce));if(mt>1)return ht/(mt-1)},d.deviation=function(){var h=d.variance.apply(this,arguments);return h&&Math.sqrt(h)};function O(h){return{left:function(q,ne,Ce,Ne){for(arguments.length<3&&(Ce=0),arguments.length<4&&(Ne=q.length);Ce<Ne;){var Ge=Ce+Ne>>>1;h(q[Ge],ne)<0?Ce=Ge+1:Ne=Ge}return Ce},right:function(q,ne,Ce,Ne){for(arguments.length<3&&(Ce=0),arguments.length<4&&(Ne=q.length);Ce<Ne;){var Ge=Ce+Ne>>>1;h(q[Ge],ne)>0?Ne=Ge:Ce=Ge+1}return Ce}}}var F=O(z);d.bisectLeft=F.left,d.bisect=d.bisectRight=F.right,d.bisector=function(h){return O(h.length===1?function(q,ne){return z(h(q),ne)}:h)},d.shuffle=function(h,q,ne){(Ce=arguments.length)<3&&(ne=h.length,Ce<2&&(q=0));for(var Ce=ne-q,Ne,Ge;Ce;)Ge=Math.random()*Ce--|0,Ne=h[Ce+q],h[Ce+q]=h[Ge+q],h[Ge+q]=Ne;return h},d.permute=function(h,q){for(var ne=q.length,Ce=new Array(ne);ne--;)Ce[ne]=h[q[ne]];return Ce},d.pairs=function(h){for(var q=0,ne=h.length-1,Ce=h[0],Ne=new Array(ne<0?0:ne);q<ne;)Ne[q]=[Ce,Ce=h[++q]];return Ne},d.transpose=function(h){if(!(Ge=h.length))return[];for(var q=-1,ne=d.min(h,P),Ce=new Array(ne);++q<ne;)for(var Ne=-1,Ge,ht=Ce[q]=new Array(Ge);++Ne<Ge;)ht[Ne]=h[Ne][q];return Ce};function P(h){return h.length}d.zip=function(){return d.transpose(arguments)},d.keys=function(h){var q=[];for(var ne in h)q.push(ne);return q},d.values=function(h){var q=[];for(var ne in h)q.push(h[ne]);return q},d.entries=function(h){var q=[];for(var ne in h)q.push({key:ne,value:h[ne]});return q},d.merge=function(h){for(var q=h.length,ne,Ce=-1,Ne=0,Ge,ht;++Ce<q;)Ne+=h[Ce].length;for(Ge=new Array(Ne);--q>=0;)for(ht=h[q],ne=ht.length;--ne>=0;)Ge[--Ne]=ht[ne];return Ge};var _=Math.abs;d.range=function(h,q,ne){if(arguments.length<3&&(ne=1,arguments.length<2&&(q=h,h=0)),(q-h)/ne===1/0)throw new Error("infinite range");var Ce=[],Ne=R(_(ne)),Ge=-1,ht;if(h*=Ne,q*=Ne,ne*=Ne,ne<0)for(;(ht=h+ne*++Ge)>q;)Ce.push(ht/Ne);else for(;(ht=h+ne*++Ge)<q;)Ce.push(ht/Ne);return Ce};function R(h){for(var q=1;h*q%1;)q*=10;return q}function H(h,q){for(var ne in q)Object.defineProperty(h.prototype,ne,{value:q[ne],enumerable:!1})}d.map=function(h,q){var ne=new te;if(h instanceof te)h.forEach(function(at,mt){ne.set(at,mt)});else if(Array.isArray(h)){var Ce=-1,Ne=h.length,Ge;if(arguments.length===1)for(;++Ce<Ne;)ne.set(Ce,h[Ce]);else for(;++Ce<Ne;)ne.set(q.call(h,Ge=h[Ce],Ce),Ge)}else for(var ht in h)ne.set(ht,h[ht]);return ne};function te(){this._=Object.create(null)}var J="__proto__",ye="\0";H(te,{has:pe,get:function(h){return this._[se(h)]},set:function(h,q){return this._[se(h)]=q},remove:Q,keys:ue,values:function(){var h=[];for(var q in this._)h.push(this._[q]);return h},entries:function(){var h=[];for(var q in this._)h.push({key:he(q),value:this._[q]});return h},size:me,empty:be,forEach:function(h){for(var q in this._)h.call(this,he(q),this._[q])}});function se(h){return(h+="")===J||h[0]===ye?ye+h:h}function he(h){return(h+="")[0]===ye?h.slice(1):h}function pe(h){return se(h)in this._}function Q(h){return(h=se(h))in this._&&delete this._[h]}function ue(){var h=[];for(var q in this._)h.push(he(q));return h}function me(){var h=0;for(var q in this._)++h;return h}function be(){for(var h in this._)return!1;return!0}d.nest=function(){var h={},q=[],ne=[],Ce,Ne;function Ge(at,mt,Et){if(Et>=q.length)return Ne?Ne.call(h,mt):Ce?mt.sort(Ce):mt;for(var zt=-1,tr=mt.length,ar=q[Et++],zr,Ir,vr,Sr=new te,Cr;++zt<tr;)(Cr=Sr.get(zr=ar(Ir=mt[zt])))?Cr.push(Ir):Sr.set(zr,[Ir]);return at?(Ir=at(),vr=function(Ur,Yr){Ir.set(Ur,Ge(at,Yr,Et))}):(Ir={},vr=function(Ur,Yr){Ir[Ur]=Ge(at,Yr,Et)}),Sr.forEach(vr),Ir}function ht(at,mt){if(mt>=q.length)return at;var Et=[],zt=ne[mt++];return at.forEach(function(tr,ar){Et.push({key:tr,values:ht(ar,mt)})}),zt?Et.sort(function(tr,ar){return zt(tr.key,ar.key)}):Et}return h.map=function(at,mt){return Ge(mt,at,0)},h.entries=function(at){return ht(Ge(d.map,at,0),0)},h.key=function(at){return q.push(at),h},h.sortKeys=function(at){return ne[q.length-1]=at,h},h.sortValues=function(at){return Ce=at,h},h.rollup=function(at){return Ne=at,h},h},d.set=function(h){var q=new ve;if(h)for(var ne=0,Ce=h.length;ne<Ce;++ne)q.add(h[ne]);return q};function ve(){this._=Object.create(null)}H(ve,{has:pe,add:function(h){return this._[se(h+="")]=!0,h},remove:Q,values:ue,size:me,empty:be,forEach:function(h){for(var q in this._)h.call(this,he(q))}}),d.behavior={};function Me(h){return h}d.rebind=function(h,q){for(var ne=1,Ce=arguments.length,Ne;++ne<Ce;)h[Ne=arguments[ne]]=ke(h,q,q[Ne]);return h};function ke(h,q,ne){return function(){var Ce=ne.apply(q,arguments);return Ce===q?h:Ce}}function le(h,q){if(q in h)return q;q=q.charAt(0).toUpperCase()+q.slice(1);for(var ne=0,Ce=De.length;ne<Ce;++ne){var Ne=De[ne]+q;if(Ne in h)return Ne}}var De=["webkit","ms","moz","Moz","o","O"];function Oe(){}d.dispatch=function(){for(var h=new He,q=-1,ne=arguments.length;++q<ne;)h[arguments[q]]=Be(h);return h};function He(){}He.prototype.on=function(h,q){var ne=h.indexOf("."),Ce="";if(ne>=0&&(Ce=h.slice(ne+1),h=h.slice(0,ne)),h)return arguments.length<2?this[h].on(Ce):this[h].on(Ce,q);if(arguments.length===2){if(q==null)for(h in this)this.hasOwnProperty(h)&&this[h].on(Ce,null);return this}};function Be(h){var q=[],ne=new te;function Ce(){for(var Ne=q,Ge=-1,ht=Ne.length,at;++Ge<ht;)(at=Ne[Ge].on)&&at.apply(this,arguments);return h}return Ce.on=function(Ne,Ge){var ht=ne.get(Ne),at;return arguments.length<2?ht&&ht.on:(ht&&(ht.on=null,q=q.slice(0,at=q.indexOf(ht)).concat(q.slice(at+1)),ne.remove(Ne)),Ge&&q.push(ne.set(Ne,{on:Ge})),h)},Ce}d.event=null;function Ye(){d.event.preventDefault()}function st(){for(var h=d.event,q;q=h.sourceEvent;)h=q;return h}function it(h){for(var q=new He,ne=0,Ce=arguments.length;++ne<Ce;)q[arguments[ne]]=Be(q);return q.of=function(Ne,Ge){return function(ht){try{var at=ht.sourceEvent=d.event;ht.target=h,d.event=ht,q[ht.type].apply(Ne,Ge)}finally{d.event=at}}},q}d.requote=function(h){return h.replace(yt,"\\$&")};var yt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,_e={}.__proto__?function(h,q){h.__proto__=q}:function(h,q){for(var ne in q)h[ne]=q[ne]};function Ee(h){return _e(h,Ae),h}var de=function(h,q){return q.querySelector(h)},we=function(h,q){return q.querySelectorAll(h)},je=function(h,q){var ne=h.matches||h[le(h,"matchesSelector")];return je=function(Ce,Ne){return ne.call(Ce,Ne)},je(h,q)};typeof Sizzle=="function"&&(de=function(h,q){return Sizzle(h,q)[0]||null},we=Sizzle,je=Sizzle.matchesSelector),d.selection=function(){return d.select(m.documentElement)};var Ae=d.selection.prototype=[];Ae.select=function(h){var q=[],ne,Ce,Ne,Ge;h=$(h);for(var ht=-1,at=this.length;++ht<at;){q.push(ne=[]),ne.parentNode=(Ne=this[ht]).parentNode;for(var mt=-1,Et=Ne.length;++mt<Et;)(Ge=Ne[mt])?(ne.push(Ce=h.call(Ge,Ge.__data__,mt,ht)),Ce&&"__data__"in Ge&&(Ce.__data__=Ge.__data__)):ne.push(null)}return Ee(q)};function $(h){return typeof h=="function"?h:function(){return de(h,this)}}Ae.selectAll=function(h){var q=[],ne,Ce;h=oe(h);for(var Ne=-1,Ge=this.length;++Ne<Ge;)for(var ht=this[Ne],at=-1,mt=ht.length;++at<mt;)(Ce=ht[at])&&(q.push(ne=c(h.call(Ce,Ce.__data__,at,Ne))),ne.parentNode=Ce);return Ee(q)};function oe(h){return typeof h=="function"?h:function(){return we(h,this)}}var ge="http://www.w3.org/1999/xhtml",Te={svg:"http://www.w3.org/2000/svg",xhtml:ge,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d.ns={prefix:Te,qualify:function(h){var q=h.indexOf(":"),ne=h;return q>=0&&(ne=h.slice(0,q))!=="xmlns"&&(h=h.slice(q+1)),Te.hasOwnProperty(ne)?{space:Te[ne],local:h}:h}},Ae.attr=function(h,q){if(arguments.length<2){if(typeof h=="string"){var ne=this.node();return h=d.ns.qualify(h),h.local?ne.getAttributeNS(h.space,h.local):ne.getAttribute(h)}for(q in h)this.each(Ue(q,h[q]));return this}return this.each(Ue(h,q))};function Ue(h,q){h=d.ns.qualify(h);function ne(){this.removeAttribute(h)}function Ce(){this.removeAttributeNS(h.space,h.local)}function Ne(){this.setAttribute(h,q)}function Ge(){this.setAttributeNS(h.space,h.local,q)}function ht(){var mt=q.apply(this,arguments);mt==null?this.removeAttribute(h):this.setAttribute(h,mt)}function at(){var mt=q.apply(this,arguments);mt==null?this.removeAttributeNS(h.space,h.local):this.setAttributeNS(h.space,h.local,mt)}return q==null?h.local?Ce:ne:typeof q=="function"?h.local?at:ht:h.local?Ge:Ne}function Ze(h){return h.trim().replace(/\s+/g," ")}Ae.classed=function(h,q){if(arguments.length<2){if(typeof h=="string"){var ne=this.node(),Ce=(h=ft(h)).length,Ne=-1;if(q=ne.classList){for(;++Ne<Ce;)if(!q.contains(h[Ne]))return!1}else for(q=ne.getAttribute("class");++Ne<Ce;)if(!Je(h[Ne]).test(q))return!1;return!0}for(q in h)this.each(wt(q,h[q]));return this}return this.each(wt(h,q))};function Je(h){return new RegExp("(?:^|\\s+)"+d.requote(h)+"(?:\\s+|$)","g")}function ft(h){return(h+"").trim().split(/^|\s+/)}function wt(h,q){h=ft(h).map(Ct);var ne=h.length;function Ce(){for(var Ge=-1;++Ge<ne;)h[Ge](this,q)}function Ne(){for(var Ge=-1,ht=q.apply(this,arguments);++Ge<ne;)h[Ge](this,ht)}return typeof q=="function"?Ne:Ce}function Ct(h){var q=Je(h);return function(ne,Ce){if(Ne=ne.classList)return Ce?Ne.add(h):Ne.remove(h);var Ne=ne.getAttribute("class")||"";Ce?(q.lastIndex=0,q.test(Ne)||ne.setAttribute("class",Ze(Ne+" "+h))):ne.setAttribute("class",Ze(Ne.replace(q," ")))}}Ae.style=function(h,q,ne){var Ce=arguments.length;if(Ce<3){if(typeof h!="string"){Ce<2&&(q="");for(ne in h)this.each(Kt(ne,h[ne],q));return this}if(Ce<2){var Ne=this.node();return p(Ne).getComputedStyle(Ne,null).getPropertyValue(h)}ne=""}return this.each(Kt(h,q,ne))};function Kt(h,q,ne){function Ce(){this.style.removeProperty(h)}function Ne(){this.style.setProperty(h,q,ne)}function Ge(){var ht=q.apply(this,arguments);ht==null?this.style.removeProperty(h):this.style.setProperty(h,ht,ne)}return q==null?Ce:typeof q=="function"?Ge:Ne}Ae.property=function(h,q){if(arguments.length<2){if(typeof h=="string")return this.node()[h];for(q in h)this.each($t(q,h[q]));return this}return this.each($t(h,q))};function $t(h,q){function ne(){delete this[h]}function Ce(){this[h]=q}function Ne(){var Ge=q.apply(this,arguments);Ge==null?delete this[h]:this[h]=Ge}return q==null?ne:typeof q=="function"?Ne:Ce}Ae.text=function(h){return arguments.length?this.each(typeof h=="function"?function(){var q=h.apply(this,arguments);this.textContent=q??""}:h==null?function(){this.textContent=""}:function(){this.textContent=h}):this.node().textContent},Ae.html=function(h){return arguments.length?this.each(typeof h=="function"?function(){var q=h.apply(this,arguments);this.innerHTML=q??""}:h==null?function(){this.innerHTML=""}:function(){this.innerHTML=h}):this.node().innerHTML},Ae.append=function(h){return h=Wt(h),this.select(function(){return this.appendChild(h.apply(this,arguments))})};function Wt(h){function q(){var Ce=this.ownerDocument,Ne=this.namespaceURI;return Ne===ge&&Ce.documentElement.namespaceURI===ge?Ce.createElement(h):Ce.createElementNS(Ne,h)}function ne(){return this.ownerDocument.createElementNS(h.space,h.local)}return typeof h=="function"?h:(h=d.ns.qualify(h)).local?ne:q}Ae.insert=function(h,q){return h=Wt(h),q=$(q),this.select(function(){return this.insertBefore(h.apply(this,arguments),q.apply(this,arguments)||null)})},Ae.remove=function(){return this.each(nt)};function nt(){var h=this.parentNode;h&&h.removeChild(this)}Ae.data=function(h,q){var ne=-1,Ce=this.length,Ne,Ge;if(!arguments.length){for(h=new Array(Ce=(Ne=this[0]).length);++ne<Ce;)(Ge=Ne[ne])&&(h[ne]=Ge.__data__);return h}function ht(zt,tr){var ar,zr=zt.length,Ir=tr.length,vr=Math.min(zr,Ir),Sr=new Array(Ir),Cr=new Array(Ir),Ur=new Array(zr),Yr,kr;if(q){var e=new te,r=new Array(zr),o;for(ar=-1;++ar<zr;)(Yr=zt[ar])&&(e.has(o=q.call(Yr,Yr.__data__,ar))?Ur[ar]=Yr:e.set(o,Yr),r[ar]=o);for(ar=-1;++ar<Ir;)(Yr=e.get(o=q.call(tr,kr=tr[ar],ar)))?Yr!==!0&&(Sr[ar]=Yr,Yr.__data__=kr):Cr[ar]=pt(kr),e.set(o,!0);for(ar=-1;++ar<zr;)ar in r&&e.get(r[ar])!==!0&&(Ur[ar]=zt[ar])}else{for(ar=-1;++ar<vr;)Yr=zt[ar],kr=tr[ar],Yr?(Yr.__data__=kr,Sr[ar]=Yr):Cr[ar]=pt(kr);for(;ar<Ir;++ar)Cr[ar]=pt(tr[ar]);for(;ar<zr;++ar)Ur[ar]=zt[ar]}Cr.update=Sr,Cr.parentNode=Sr.parentNode=Ur.parentNode=zt.parentNode,at.push(Cr),mt.push(Sr),Et.push(Ur)}var at=Xt([]),mt=Ee([]),Et=Ee([]);if(typeof h=="function")for(;++ne<Ce;)ht(Ne=this[ne],h.call(Ne,Ne.parentNode.__data__,ne));else for(;++ne<Ce;)ht(Ne=this[ne],h);return mt.enter=function(){return at},mt.exit=function(){return Et},mt};function pt(h){return{__data__:h}}Ae.datum=function(h){return arguments.length?this.property("__data__",h):this.property("__data__")},Ae.filter=function(h){var q=[],ne,Ce,Ne;typeof h!="function"&&(h=Ke(h));for(var Ge=0,ht=this.length;Ge<ht;Ge++){q.push(ne=[]),ne.parentNode=(Ce=this[Ge]).parentNode;for(var at=0,mt=Ce.length;at<mt;at++)(Ne=Ce[at])&&h.call(Ne,Ne.__data__,at,Ge)&&ne.push(Ne)}return Ee(q)};function Ke(h){return function(){return je(this,h)}}Ae.order=function(){for(var h=-1,q=this.length;++h<q;)for(var ne=this[h],Ce=ne.length-1,Ne=ne[Ce],Ge;--Ce>=0;)(Ge=ne[Ce])&&(Ne&&Ne!==Ge.nextSibling&&Ne.parentNode.insertBefore(Ge,Ne),Ne=Ge);return this},Ae.sort=function(h){h=gt.apply(this,arguments);for(var q=-1,ne=this.length;++q<ne;)this[q].sort(h);return this.order()};function gt(h){return arguments.length||(h=z),function(q,ne){return q&&ne?h(q.__data__,ne.__data__):!q-!ne}}Ae.each=function(h){return Ft(this,function(q,ne,Ce){h.call(q,q.__data__,ne,Ce)})};function Ft(h,q){for(var ne=0,Ce=h.length;ne<Ce;ne++)for(var Ne=h[ne],Ge=0,ht=Ne.length,at;Ge<ht;Ge++)(at=Ne[Ge])&&q(at,Ge,ne);return h}Ae.call=function(h){var q=c(arguments);return h.apply(q[0]=this,q),this},Ae.empty=function(){return!this.node()},Ae.node=function(){for(var h=0,q=this.length;h<q;h++)for(var ne=this[h],Ce=0,Ne=ne.length;Ce<Ne;Ce++){var Ge=ne[Ce];if(Ge)return Ge}return null},Ae.size=function(){var h=0;return Ft(this,function(){++h}),h};function Xt(h){return _e(h,or),h}var or=[];d.selection.enter=Xt,d.selection.enter.prototype=or,or.append=Ae.append,or.empty=Ae.empty,or.node=Ae.node,or.call=Ae.call,or.size=Ae.size,or.select=function(h){for(var q=[],ne,Ce,Ne,Ge,ht,at=-1,mt=this.length;++at<mt;){Ne=(Ge=this[at]).update,q.push(ne=[]),ne.parentNode=Ge.parentNode;for(var Et=-1,zt=Ge.length;++Et<zt;)(ht=Ge[Et])?(ne.push(Ne[Et]=Ce=h.call(Ge.parentNode,ht.__data__,Et,at)),Ce.__data__=ht.__data__):ne.push(null)}return Ee(q)},or.insert=function(h,q){return arguments.length<2&&(q=sr(this)),Ae.insert.call(this,h,q)};function sr(h){var q,ne;return function(Ce,Ne,Ge){var ht=h[Ge].update,at=ht.length,mt;for(Ge!=ne&&(ne=Ge,q=0),Ne>=q&&(q=Ne+1);!(mt=ht[q])&&++q<at;);return mt}}d.select=function(h){var q;return typeof h=="string"?(q=[de(h,m)],q.parentNode=m.documentElement):(q=[h],q.parentNode=v(h)),Ee([q])},d.selectAll=function(h){var q;return typeof h=="string"?(q=c(we(h,m)),q.parentNode=m.documentElement):(q=c(h),q.parentNode=null),Ee([q])},Ae.on=function(h,q,ne){var Ce=arguments.length;if(Ce<3){if(typeof h!="string"){Ce<2&&(q=!1);for(ne in h)this.each(dr(ne,h[ne],q));return this}if(Ce<2)return(Ce=this.node()["__on"+h])&&Ce._;ne=!1}return this.each(dr(h,q,ne))};function dr(h,q,ne){var Ce="__on"+h,Ne=h.indexOf("."),Ge=xr;Ne>0&&(h=h.slice(0,Ne));var ht=wr.get(h);ht&&(h=ht,Ge=Pr);function at(){var zt=this[Ce];zt&&(this.removeEventListener(h,zt,zt.$),delete this[Ce])}function mt(){var zt=Ge(q,c(arguments));at.call(this),this.addEventListener(h,this[Ce]=zt,zt.$=ne),zt._=q}function Et(){var zt=new RegExp("^__on([^.]+)"+d.requote(h)+"$"),tr;for(var ar in this)if(tr=ar.match(zt)){var zr=this[ar];this.removeEventListener(tr[1],zr,zr.$),delete this[ar]}}return Ne?q?mt:at:q?Oe:Et}var wr=d.map({mouseenter:"mouseover",mouseleave:"mouseout"});m&&wr.forEach(function(h){"on"+h in m&&wr.remove(h)});function xr(h,q){return function(ne){var Ce=d.event;d.event=ne,q[0]=this.__data__;try{h.apply(this,q)}finally{d.event=Ce}}}function Pr(h,q){var ne=xr(h,q);return function(Ce){var Ne=this,Ge=Ce.relatedTarget;(!Ge||Ge!==Ne&&!(Ge.compareDocumentPosition(Ne)&8))&&ne.call(Ne,Ce)}}var nr,jr=0;function ta(h){var q=".dragsuppress-"+ ++jr,ne="click"+q,Ce=d.select(p(h)).on("touchmove"+q,Ye).on("dragstart"+q,Ye).on("selectstart"+q,Ye);if(nr==null&&(nr="onselectstart"in h?!1:le(h.style,"userSelect")),nr){var Ne=v(h).style,Ge=Ne[nr];Ne[nr]="none"}return function(ht){if(Ce.on(q,null),nr&&(Ne[nr]=Ge),ht){var at=function(){Ce.on(ne,null)};Ce.on(ne,function(){Ye(),at()},!0),setTimeout(at,0)}}}d.mouse=function(h){return Jr(h,st())};var Nr=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Jr(h,q){q.changedTouches&&(q=q.changedTouches[0]);var ne=h.ownerSVGElement||h;if(ne.createSVGPoint){var Ce=ne.createSVGPoint();if(Nr<0){var Ne=p(h);if(Ne.scrollX||Ne.scrollY){ne=d.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ge=ne[0][0].getScreenCTM();Nr=!(Ge.f||Ge.e),ne.remove()}}return Nr?(Ce.x=q.pageX,Ce.y=q.pageY):(Ce.x=q.clientX,Ce.y=q.clientY),Ce=Ce.matrixTransform(h.getScreenCTM().inverse()),[Ce.x,Ce.y]}var ht=h.getBoundingClientRect();return[q.clientX-ht.left-h.clientLeft,q.clientY-ht.top-h.clientTop]}d.touch=function(h,q,ne){if(arguments.length<3&&(ne=q,q=st().changedTouches),q){for(var Ce=0,Ne=q.length,Ge;Ce<Ne;++Ce)if((Ge=q[Ce]).identifier===ne)return Jr(h,Ge)}},d.behavior.drag=function(){var h=it(Ne,"drag","dragstart","dragend"),q=null,ne=Ge(Oe,d.mouse,p,"mousemove","mouseup"),Ce=Ge(vt,d.touch,Me,"touchmove","touchend");function Ne(){this.on("mousedown.drag",ne).on("touchstart.drag",Ce)}function Ge(ht,at,mt,Et,zt){return function(){var tr=this,ar=d.event.target.correspondingElement||d.event.target,zr=tr.parentNode,Ir=h.of(tr,arguments),vr=0,Sr=ht(),Cr=".drag"+(Sr==null?"":"-"+Sr),Ur,Yr=d.select(mt(ar)).on(Et+Cr,r).on(zt+Cr,o),kr=ta(ar),e=at(zr,Sr);q?(Ur=q.apply(tr,arguments),Ur=[Ur.x-e[0],Ur.y-e[1]]):Ur=[0,0],Ir({type:"dragstart"});function r(){var M=at(zr,Sr),ie,xe;M&&(ie=M[0]-e[0],xe=M[1]-e[1],vr|=ie|xe,e=M,Ir({type:"drag",x:M[0]+Ur[0],y:M[1]+Ur[1],dx:ie,dy:xe}))}function o(){at(zr,Sr)&&(Yr.on(Et+Cr,null).on(zt+Cr,null),kr(vr),Ir({type:"dragend"}))}}}return Ne.origin=function(ht){return arguments.length?(q=ht,Ne):q},d.rebind(Ne,h,"on")};function vt(){return d.event.changedTouches[0].identifier}d.touches=function(h,q){return arguments.length<2&&(q=st().touches),q?c(q).map(function(ne){var Ce=Jr(h,ne);return Ce.identifier=ne.identifier,Ce}):[]};var Mt=1e-6,xt=Mt*Mt,Le=Math.PI,ot=2*Le,ct=ot-Mt,ut=Le/2,Pt=Le/180,Ot=180/Le;function qt(h,q,ne){return(q[0]-h[0])*(ne[1]-h[1])-(q[1]-h[1])*(ne[0]-h[0])}function ir(h){return h>1?ut:h<-1?-ut:Math.asin(h)}function _r(h){return((h=Math.exp(h))-1/h)/2}function Bt(h){return((h=Math.exp(h))+1/h)/2}function gr(h){return((h=Math.exp(2*h))-1)/(h+1)}var Ar=Math.SQRT2,Er=2,ba=4;d.interpolateZoom=function(h,q){var ne=h[0],Ce=h[1],Ne=h[2],Ge=q[0],ht=q[1],at=q[2],mt=Ge-ne,Et=ht-Ce,zt=mt*mt+Et*Et,tr,ar;if(zt<xt)ar=Math.log(at/Ne)/Ar,tr=function(Ur){return[ne+Ur*mt,Ce+Ur*Et,Ne*Math.exp(Ar*Ur*ar)]};else{var zr=Math.sqrt(zt),Ir=(at*at-Ne*Ne+ba*zt)/(2*Ne*Er*zr),vr=(at*at-Ne*Ne-ba*zt)/(2*at*Er*zr),Sr=Math.log(Math.sqrt(Ir*Ir+1)-Ir),Cr=Math.log(Math.sqrt(vr*vr+1)-vr);ar=(Cr-Sr)/Ar,tr=function(Ur){var Yr=Ur*ar,kr=Bt(Sr),e=Ne/(Er*zr)*(kr*gr(Ar*Yr+Sr)-_r(Sr));return[ne+e*mt,Ce+e*Et,Ne*kr/Bt(Ar*Yr+Sr)]}}return tr.duration=ar*1e3,tr},d.behavior.zoom=function(){var h={x:0,y:0,k:1},q,ne,Ce,Ne=[960,500],Ge=Ga,ht=250,at=0,mt="mousedown.zoom",Et="mousemove.zoom",zt="mouseup.zoom",tr,ar="touchstart.zoom",zr,Ir=it(Yr,"zoomstart","zoom","zoomend"),vr,Sr,Cr,Ur;Aa||(Aa="onwheel"in m?(Xa=function(){return-d.event.deltaY*(d.event.deltaMode?120:1)},"wheel"):"onmousewheel"in m?(Xa=function(){return d.event.wheelDelta},"mousewheel"):(Xa=function(){return-d.event.detail},"MozMousePixelScroll"));function Yr(Mr){Mr.on(mt,br).on(Aa+".zoom",xa).on("dblclick.zoom",_a).on(ar,Zr)}Yr.event=function(Mr){Mr.each(function(){var Kr=Ir.of(this,arguments),Ha=h;su?d.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},xe(Kr)}).tween("zoom:zoom",function(){var tn=Ne[0],Pn=Ne[1],Wr=ne?ne[0]:tn/2,Fr=ne?ne[1]:Pn/2,na=d.interpolateZoom([(Wr-h.x)/h.k,(Fr-h.y)/h.k,tn/h.k],[(Wr-Ha.x)/Ha.k,(Fr-Ha.y)/Ha.k,tn/Ha.k]);return function(ka){var gn=na(ka),qn=tn/gn[2];this.__chart__=h={x:Wr-gn[0]*qn,y:Fr-gn[1]*qn,k:qn},dt(Kr)}}).each("interrupt.zoom",function(){St(Kr)}).each("end.zoom",function(){St(Kr)}):(this.__chart__=h,xe(Kr),dt(Kr),St(Kr))})},Yr.translate=function(Mr){return arguments.length?(h={x:+Mr[0],y:+Mr[1],k:h.k},ie(),Yr):[h.x,h.y]},Yr.scale=function(Mr){return arguments.length?(h={x:h.x,y:h.y,k:null},r(+Mr),ie(),Yr):h.k},Yr.scaleExtent=function(Mr){return arguments.length?(Ge=Mr==null?Ga:[+Mr[0],+Mr[1]],Yr):Ge},Yr.center=function(Mr){return arguments.length?(Ce=Mr&&[+Mr[0],+Mr[1]],Yr):Ce},Yr.size=function(Mr){return arguments.length?(Ne=Mr&&[+Mr[0],+Mr[1]],Yr):Ne},Yr.duration=function(Mr){return arguments.length?(ht=+Mr,Yr):ht},Yr.x=function(Mr){return arguments.length?(Sr=Mr,vr=Mr.copy(),h={x:0,y:0,k:1},Yr):Sr},Yr.y=function(Mr){return arguments.length?(Ur=Mr,Cr=Mr.copy(),h={x:0,y:0,k:1},Yr):Ur};function kr(Mr){return[(Mr[0]-h.x)/h.k,(Mr[1]-h.y)/h.k]}function e(Mr){return[Mr[0]*h.k+h.x,Mr[1]*h.k+h.y]}function r(Mr){h.k=Math.max(Ge[0],Math.min(Ge[1],Mr))}function o(Mr,Kr){Kr=e(Kr),h.x+=Mr[0]-Kr[0],h.y+=Mr[1]-Kr[1]}function M(Mr,Kr,Ha,tn){Mr.__chart__={x:h.x,y:h.y,k:h.k},r(Math.pow(2,tn)),o(ne=Kr,Ha),Mr=d.select(Mr),ht>0&&(Mr=Mr.transition().duration(ht)),Mr.call(Yr.event)}function ie(){Sr&&Sr.domain(vr.range().map(function(Mr){return(Mr-h.x)/h.k}).map(vr.invert)),Ur&&Ur.domain(Cr.range().map(function(Mr){return(Mr-h.y)/h.k}).map(Cr.invert))}function xe(Mr){at++||Mr({type:"zoomstart"})}function dt(Mr){ie(),Mr({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function St(Mr){--at||(Mr({type:"zoomend"}),ne=null)}function br(){var Mr=this,Kr=Ir.of(Mr,arguments),Ha=0,tn=d.select(p(Mr)).on(Et,Fr).on(zt,na),Pn=kr(d.mouse(Mr)),Wr=ta(Mr);pf.call(Mr),xe(Kr);function Fr(){Ha=1,o(d.mouse(Mr),Pn),dt(Kr)}function na(){tn.on(Et,null).on(zt,null),Wr(Ha),St(Kr)}}function Zr(){var Mr=this,Kr=Ir.of(Mr,arguments),Ha={},tn=0,Pn,Wr=".zoom-"+d.event.changedTouches[0].identifier,Fr="touchmove"+Wr,na="touchend"+Wr,ka=[],gn=d.select(Mr),qn=ta(Mr);Dn(),xe(Kr),gn.on(mt,null).on(ar,Dn);function fn(){var wo=d.touches(Mr);return Pn=h.k,wo.forEach(function(Ao){Ao.identifier in Ha&&(Ha[Ao.identifier]=kr(Ao))}),wo}function Dn(){var wo=d.event.target;d.select(wo).on(Fr,Zn).on(na,vi),ka.push(wo);for(var Ao=d.event.changedTouches,ll=0,cu=Ao.length;ll<cu;++ll)Ha[Ao[ll].identifier]=null;var ul=fn(),gh=Date.now();if(ul.length===1){if(gh-zr<500){var gf=ul[0];M(Mr,gf,Ha[gf.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),Ye()}zr=gh}else if(ul.length>1){var gf=ul[0],_c=ul[1],m0=gf[0]-_c[0],F0=gf[1]-_c[1];tn=m0*m0+F0*F0}}function Zn(){var wo=d.touches(Mr),Ao,ll,cu,ul;pf.call(Mr);for(var gh=0,gf=wo.length;gh<gf;++gh,ul=null)if(cu=wo[gh],ul=Ha[cu.identifier]){if(ll)break;Ao=cu,ll=ul}if(ul){var _c=(_c=cu[0]-Ao[0])*_c+(_c=cu[1]-Ao[1])*_c,m0=tn&&Math.sqrt(_c/tn);Ao=[(Ao[0]+cu[0])/2,(Ao[1]+cu[1])/2],ll=[(ll[0]+ul[0])/2,(ll[1]+ul[1])/2],r(m0*Pn)}zr=null,o(Ao,ll),dt(Kr)}function vi(){if(d.event.touches.length){for(var wo=d.event.changedTouches,Ao=0,ll=wo.length;Ao<ll;++Ao)delete Ha[wo[Ao].identifier];for(var cu in Ha)return void fn()}d.selectAll(ka).on(Wr,null),gn.on(mt,br).on(ar,Zr),qn(),St(Kr)}}function xa(){var Mr=Ir.of(this,arguments);tr?clearTimeout(tr):(pf.call(this),q=kr(ne=Ce||d.mouse(this)),xe(Mr)),tr=setTimeout(function(){tr=null,St(Mr)},50),Ye(),r(Math.pow(2,Xa()*.002)*h.k),o(ne,q),dt(Mr)}function _a(){var Mr=d.mouse(this),Kr=Math.log(h.k)/Math.LN2;M(this,Mr,kr(Mr),d.event.shiftKey?Math.ceil(Kr)-1:Math.floor(Kr)+1)}return d.rebind(Yr,Ir,"on")};var Ga=[0,1/0],Xa,Aa;d.color=Oa;function Oa(){}Oa.prototype.toString=function(){return this.rgb()+""},d.hsl=va;function va(h,q,ne){return this instanceof va?(this.h=+h,this.s=+q,void(this.l=+ne)):arguments.length<2?h instanceof va?new va(h.h,h.s,h.l):Ut(""+h,pr,va):new va(h,q,ne)}var ma=va.prototype=new Oa;ma.brighter=function(h){return h=Math.pow(.7,arguments.length?h:1),new va(this.h,this.s,this.l/h)},ma.darker=function(h){return h=Math.pow(.7,arguments.length?h:1),new va(this.h,this.s,h*this.l)},ma.rgb=function(){return Va(this.h,this.s,this.l)};function Va(h,q,ne){var Ce,Ne;h=isNaN(h)?0:(h%=360)<0?h+360:h,q=isNaN(q)||q<0?0:q>1?1:q,ne=ne<0?0:ne>1?1:ne,Ne=ne<=.5?ne*(1+q):ne+q-ne*q,Ce=2*ne-Ne;function Ge(at){return at>360?at-=360:at<0&&(at+=360),at<60?Ce+(Ne-Ce)*at/60:at<180?Ne:at<240?Ce+(Ne-Ce)*(240-at)/60:Ce}function ht(at){return Math.round(Ge(at)*255)}return new Re(ht(h+120),ht(h),ht(h-120))}d.hcl=ja;function ja(h,q,ne){return this instanceof ja?(this.h=+h,this.c=+q,void(this.l=+ne)):arguments.length<2?h instanceof ja?new ja(h.h,h.c,h.l):h instanceof la?Cn(h.l,h.a,h.b):Cn((h=jt((h=d.rgb(h)).r,h.g,h.b)).l,h.a,h.b):new ja(h,q,ne)}var $a=ja.prototype=new Oa;$a.brighter=function(h){return new ja(this.h,this.c,Math.min(100,this.l+Ba*(arguments.length?h:1)))},$a.darker=function(h){return new ja(this.h,this.c,Math.max(0,this.l-Ba*(arguments.length?h:1)))},$a.rgb=function(){return La(this.h,this.c,this.l).rgb()};function La(h,q,ne){return isNaN(h)&&(h=0),isNaN(q)&&(q=0),new la(ne,Math.cos(h*=Pt)*q,Math.sin(h)*q)}d.lab=la;function la(h,q,ne){return this instanceof la?(this.l=+h,this.a=+q,void(this.b=+ne)):arguments.length<2?h instanceof la?new la(h.l,h.a,h.b):h instanceof ja?La(h.h,h.c,h.l):jt((h=Re(h)).r,h.g,h.b):new la(h,q,ne)}var Ba=18,un=.95047,pn=1,qa=1.08883,nn=la.prototype=new Oa;nn.brighter=function(h){return new la(Math.min(100,this.l+Ba*(arguments.length?h:1)),this.a,this.b)},nn.darker=function(h){return new la(Math.max(0,this.l-Ba*(arguments.length?h:1)),this.a,this.b)},nn.rgb=function(){return cn(this.l,this.a,this.b)};function cn(h,q,ne){var Ce=(h+16)/116,Ne=Ce+q/500,Ge=Ce-ne/200;return Ne=Ja(Ne)*un,Ce=Ja(Ce)*pn,Ge=Ja(Ge)*qa,new Re(We(3.2404542*Ne-1.5371385*Ce-.4985314*Ge),We(-.969266*Ne+1.8760108*Ce+.041556*Ge),We(.0556434*Ne-.2040259*Ce+1.0572252*Ge))}function Cn(h,q,ne){return h>0?new ja(Math.atan2(ne,q)*Ot,Math.sqrt(q*q+ne*ne),h):new ja(NaN,NaN,h)}function Ja(h){return h>.206893034?h*h*h:(h-4/29)/7.787037}function xn(h){return h>.008856?Math.pow(h,1/3):7.787037*h+4/29}function We(h){return Math.round(255*(h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055))}d.rgb=Re;function Re(h,q,ne){return this instanceof Re?(this.r=~~h,this.g=~~q,void(this.b=~~ne)):arguments.length<2?h instanceof Re?new Re(h.r,h.g,h.b):Ut(""+h,Re,Va):new Re(h,q,ne)}function Zt(h){return new Re(h>>16,h>>8&255,h&255)}function Ht(h){return Zt(h)+""}var Rt=Re.prototype=new Oa;Rt.brighter=function(h){h=Math.pow(.7,arguments.length?h:1);var q=this.r,ne=this.g,Ce=this.b,Ne=30;return!q&&!ne&&!Ce?new Re(Ne,Ne,Ne):(q&&q<Ne&&(q=Ne),ne&&ne<Ne&&(ne=Ne),Ce&&Ce<Ne&&(Ce=Ne),new Re(Math.min(255,q/h),Math.min(255,ne/h),Math.min(255,Ce/h)))},Rt.darker=function(h){return h=Math.pow(.7,arguments.length?h:1),new Re(h*this.r,h*this.g,h*this.b)},Rt.hsl=function(){return pr(this.r,this.g,this.b)},Rt.toString=function(){return"#"+Dt(this.r)+Dt(this.g)+Dt(this.b)};function Dt(h){return h<16?"0"+Math.max(0,h).toString(16):Math.min(255,h).toString(16)}function Ut(h,q,ne){var Ce=0,Ne=0,Ge=0,ht,at,mt;if(ht=/([a-z]+)\((.*)\)/.exec(h=h.toLowerCase()),ht)switch(at=ht[2].split(","),ht[1]){case"hsl":return ne(parseFloat(at[0]),parseFloat(at[1])/100,parseFloat(at[2])/100);case"rgb":return q(cr(at[0]),cr(at[1]),cr(at[2]))}return(mt=rr.get(h))?q(mt.r,mt.g,mt.b):(h!=null&&h.charAt(0)==="#"&&!isNaN(mt=parseInt(h.slice(1),16))&&(h.length===4?(Ce=(mt&3840)>>4,Ce=Ce>>4|Ce,Ne=mt&240,Ne=Ne>>4|Ne,Ge=mt&15,Ge=Ge<<4|Ge):h.length===7&&(Ce=(mt&16711680)>>16,Ne=(mt&65280)>>8,Ge=mt&255)),q(Ce,Ne,Ge))}function pr(h,q,ne){var Ce=Math.min(h/=255,q/=255,ne/=255),Ne=Math.max(h,q,ne),Ge=Ne-Ce,ht,at,mt=(Ne+Ce)/2;return Ge?(at=mt<.5?Ge/(Ne+Ce):Ge/(2-Ne-Ce),h==Ne?ht=(q-ne)/Ge+(q<ne?6:0):q==Ne?ht=(ne-h)/Ge+2:ht=(h-q)/Ge+4,ht*=60):(ht=NaN,at=mt>0&&mt<1?0:ht),new va(ht,at,mt)}function jt(h,q,ne){h=Jt(h),q=Jt(q),ne=Jt(ne);var Ce=xn((.4124564*h+.3575761*q+.1804375*ne)/un),Ne=xn((.2126729*h+.7151522*q+.072175*ne)/pn),Ge=xn((.0193339*h+.119192*q+.9503041*ne)/qa);return la(116*Ne-16,500*(Ce-Ne),200*(Ne-Ge))}function Jt(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function cr(h){var q=parseFloat(h);return h.charAt(h.length-1)==="%"?Math.round(q*2.55):q}var rr=d.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});rr.forEach(function(h,q){rr.set(h,Zt(q))});function Or(h){return typeof h=="function"?h:function(){return h}}d.functor=Or,d.xhr=Br(Me);function Br(h){return function(q,ne,Ce){return arguments.length===2&&typeof ne=="function"&&(Ce=ne,ne=null),ra(q,ne,h,Ce)}}function ra(h,q,ne,Ce){var Ne={},Ge=d.dispatch("beforesend","progress","load","error"),ht={},at=new XMLHttpRequest,mt=null;self.XDomainRequest&&!("withCredentials"in at)&&/^(http(s)?:)?\/\//.test(h)&&(at=new XDomainRequest),"onload"in at?at.onload=at.onerror=Et:at.onreadystatechange=function(){at.readyState>3&&Et()};function Et(){var zt=at.status,tr;if(!zt&&Ma(at)||zt>=200&&zt<300||zt===304){try{tr=ne.call(Ne,at)}catch(ar){Ge.error.call(Ne,ar);return}Ge.load.call(Ne,tr)}else Ge.error.call(Ne,at)}return at.onprogress=function(zt){var tr=d.event;d.event=zt;try{Ge.progress.call(Ne,at)}finally{d.event=tr}},Ne.header=function(zt,tr){return zt=(zt+"").toLowerCase(),arguments.length<2?ht[zt]:(tr==null?delete ht[zt]:ht[zt]=tr+"",Ne)},Ne.mimeType=function(zt){return arguments.length?(q=zt==null?null:zt+"",Ne):q},Ne.responseType=function(zt){return arguments.length?(mt=zt,Ne):mt},Ne.response=function(zt){return ne=zt,Ne},["get","post"].forEach(function(zt){Ne[zt]=function(){return Ne.send.apply(Ne,[zt].concat(c(arguments)))}}),Ne.send=function(zt,tr,ar){if(arguments.length===2&&typeof tr=="function"&&(ar=tr,tr=null),at.open(zt,h,!0),q!=null&&!("accept"in ht)&&(ht.accept=q+",*/*"),at.setRequestHeader)for(var zr in ht)at.setRequestHeader(zr,ht[zr]);return q!=null&&at.overrideMimeType&&at.overrideMimeType(q),mt!=null&&(at.responseType=mt),ar!=null&&Ne.on("error",ar).on("load",function(Ir){ar(null,Ir)}),Ge.beforesend.call(Ne,at),at.send(tr??null),Ne},Ne.abort=function(){return at.abort(),Ne},d.rebind(Ne,Ge,"on"),Ce==null?Ne:Ne.get(Ca(Ce))}function Ca(h){return h.length===1?function(q,ne){h(q==null?ne:null)}:h}function Ma(h){var q=h.responseType;return q&&q!=="text"?h.response:h.responseText}d.dsv=function(h,q){var ne=new RegExp('["'+h+`
]`),Ce=h.charCodeAt(0);function Ne(Et,zt,tr){arguments.length<3&&(tr=zt,zt=null);var ar=ra(Et,q,zt==null?Ge:ht(zt),tr);return ar.row=function(zr){return arguments.length?ar.response((zt=zr)==null?Ge:ht(zr)):zt},ar}function Ge(Et){return Ne.parse(Et.responseText)}function ht(Et){return function(zt){return Ne.parse(zt.responseText,Et)}}Ne.parse=function(Et,zt){var tr;return Ne.parseRows(Et,function(ar,zr){if(tr)return tr(ar,zr-1);var Ir=function(vr){for(var Sr={},Cr=ar.length,Ur=0;Ur<Cr;++Ur)Sr[ar[Ur]]=vr[Ur];return Sr};tr=zt?function(vr,Sr){return zt(Ir(vr),Sr)}:Ir})},Ne.parseRows=function(Et,zt){var tr={},ar={},zr=[],Ir=Et.length,vr=0,Sr=0,Cr,Ur;function Yr(){if(vr>=Ir)return ar;if(Ur)return Ur=!1,tr;var e=vr;if(Et.charCodeAt(e)===34){for(var r=e;r++<Ir;)if(Et.charCodeAt(r)===34){if(Et.charCodeAt(r+1)!==34)break;++r}vr=r+2;var o=Et.charCodeAt(r+1);return o===13?(Ur=!0,Et.charCodeAt(r+2)===10&&++vr):o===10&&(Ur=!0),Et.slice(e+1,r).replace(/""/g,'"')}for(;vr<Ir;){var o=Et.charCodeAt(vr++),M=1;if(o===10)Ur=!0;else if(o===13)Ur=!0,Et.charCodeAt(vr)===10&&(++vr,++M);else if(o!==Ce)continue;return Et.slice(e,vr-M)}return Et.slice(e)}for(;(Cr=Yr())!==ar;){for(var kr=[];Cr!==tr&&Cr!==ar;)kr.push(Cr),Cr=Yr();zt&&(kr=zt(kr,Sr++))==null||zr.push(kr)}return zr},Ne.format=function(Et){if(Array.isArray(Et[0]))return Ne.formatRows(Et);var zt=new ve,tr=[];return Et.forEach(function(ar){for(var zr in ar)zt.has(zr)||tr.push(zt.add(zr))}),[tr.map(mt).join(h)].concat(Et.map(function(ar){return tr.map(function(zr){return mt(ar[zr])}).join(h)})).join(`
`)},Ne.formatRows=function(Et){return Et.map(at).join(`
`)};function at(Et){return Et.map(mt).join(h)}function mt(Et){return ne.test(Et)?'"'+Et.replace(/\"/g,'""')+'"':Et}return Ne},d.csv=d.dsv(",","text/csv"),d.tsv=d.dsv("	","text/tab-separated-values");var za,Fa,Da,Ka,on=this[le(this,"requestAnimationFrame")]||function(h){setTimeout(h,17)};d.timer=function(){Sn.apply(this,arguments)};function Sn(h,q,ne){var Ce=arguments.length;Ce<2&&(q=0),Ce<3&&(ne=Date.now());var Ne=ne+q,Ge={c:h,t:Ne,n:null};return Fa?Fa.n=Ge:za=Ge,Fa=Ge,Da||(Ka=clearTimeout(Ka),Da=1,on(On)),Ge}function On(){var h=jn(),q=dn()-h;q>24?(isFinite(q)&&(clearTimeout(Ka),Ka=setTimeout(On,q)),Da=0):(Da=1,on(On))}d.timer.flush=function(){jn(),dn()};function jn(){for(var h=Date.now(),q=za;q;)h>=q.t&&q.c(h-q.t)&&(q.c=null),q=q.n;return h}function dn(){for(var h,q=za,ne=1/0;q;)q.c?(q.t<ne&&(ne=q.t),q=(h=q).n):q=h?h.n=q.n:za=q.n;return Fa=h,ne}d.round=function(h,q){return q?Math.round(h*(q=Math.pow(10,q)))/q:Math.round(h)},d.geom={};function Rn(h){return h[0]}function oi(h){return h[1]}d.geom.hull=function(h){var q=Rn,ne=oi;if(arguments.length)return Ce(h);function Ce(Ne){if(Ne.length<3)return[];var Ge=Or(q),ht=Or(ne),at,mt=Ne.length,Et=[],zt=[];for(at=0;at<mt;at++)Et.push([+Ge.call(this,Ne[at],at),+ht.call(this,Ne[at],at),at]);for(Et.sort(ln),at=0;at<mt;at++)zt.push([Et[at][0],-Et[at][1]]);var tr=$i(Et),ar=$i(zt),zr=ar[0]===tr[0],Ir=ar[ar.length-1]===tr[tr.length-1],vr=[];for(at=tr.length-1;at>=0;--at)vr.push(Ne[Et[tr[at]][2]]);for(at=+zr;at<ar.length-Ir;++at)vr.push(Ne[Et[ar[at]][2]]);return vr}return Ce.x=function(Ne){return arguments.length?(q=Ne,Ce):q},Ce.y=function(Ne){return arguments.length?(ne=Ne,Ce):ne},Ce};function $i(h){for(var q=h.length,ne=[0,1],Ce=2,Ne=2;Ne<q;Ne++){for(;Ce>1&&qt(h[ne[Ce-2]],h[ne[Ce-1]],h[Ne])<=0;)--Ce;ne[Ce++]=Ne}return ne.slice(0,Ce)}function ln(h,q){return h[0]-q[0]||h[1]-q[1]}d.geom.polygon=function(h){return _e(h,Mn),h};var Mn=d.geom.polygon.prototype=[];Mn.area=function(){for(var h=-1,q=this.length,ne,Ce=this[q-1],Ne=0;++h<q;)ne=Ce,Ce=this[h],Ne+=ne[1]*Ce[0]-ne[0]*Ce[1];return Ne*.5},Mn.centroid=function(h){var q=-1,ne=this.length,Ce=0,Ne=0,Ge,ht=this[ne-1],at;for(arguments.length||(h=-1/(6*this.area()));++q<ne;)Ge=ht,ht=this[q],at=Ge[0]*ht[1]-ht[0]*Ge[1],Ce+=(Ge[0]+ht[0])*at,Ne+=(Ge[1]+ht[1])*at;return[Ce*h,Ne*h]},Mn.clip=function(h){for(var q,ne=hi(h),Ce=-1,Ne=this.length-hi(this),Ge,ht,at=this[Ne-1],mt,Et,zt;++Ce<Ne;){for(q=h.slice(),h.length=0,mt=this[Ce],Et=q[(ht=q.length-ne)-1],Ge=-1;++Ge<ht;)zt=q[Ge],Xn(zt,at,mt)?(Xn(Et,at,mt)||h.push(wi(Et,zt,at,mt)),h.push(zt)):Xn(Et,at,mt)&&h.push(wi(Et,zt,at,mt)),Et=zt;ne&&h.push(h[0]),at=mt}return h};function Xn(h,q,ne){return(ne[0]-q[0])*(h[1]-q[1])<(ne[1]-q[1])*(h[0]-q[0])}function wi(h,q,ne,Ce){var Ne=h[0],Ge=ne[0],ht=q[0]-Ne,at=Ce[0]-Ge,mt=h[1],Et=ne[1],zt=q[1]-mt,tr=Ce[1]-Et,ar=(at*(mt-Et)-tr*(Ne-Ge))/(tr*ht-at*zt);return[Ne+ar*ht,mt+ar*zt]}function hi(h){var q=h[0],ne=h[h.length-1];return!(q[0]-ne[0]||q[1]-ne[1])}var Un,bn,_n,Yn=[],Gn,Qn,ii=[];function si(){Eo(this),this.edge=this.site=this.circle=null}function Ei(h){var q=Yn.pop()||new si;return q.site=h,q}function yi(h){Ni(h),_n.remove(h),Yn.push(h),Eo(h)}function Fi(h){var q=h.circle,ne=q.x,Ce=q.cy,Ne={x:ne,y:Ce},Ge=h.P,ht=h.N,at=[h];yi(h);for(var mt=Ge;mt.circle&&_(ne-mt.circle.x)<Mt&&_(Ce-mt.circle.cy)<Mt;)Ge=mt.P,at.unshift(mt),yi(mt),mt=Ge;at.unshift(mt),Ni(mt);for(var Et=ht;Et.circle&&_(ne-Et.circle.x)<Mt&&_(Ce-Et.circle.cy)<Mt;)ht=Et.N,at.push(Et),yi(Et),Et=ht;at.push(Et),Ni(Et);var zt=at.length,tr;for(tr=1;tr<zt;++tr)Et=at[tr],mt=at[tr-1],yn(Et.edge,mt.site,Et.site,Ne);mt=at[0],Et=at[zt-1],Et.edge=Nn(mt.site,Et.site,null,Ne),Ji(mt),Ji(Et)}function Ai(h){for(var q=h.x,ne=h.y,Ce,Ne,Ge,ht,at=_n._;at;)if(Ge=ei(at,ne)-q,Ge>Mt)at=at.L;else if(ht=q-Vi(at,ne),ht>Mt){if(!at.R){Ce=at;break}at=at.R}else{Ge>-Mt?(Ce=at.P,Ne=at):ht>-Mt?(Ce=at,Ne=at.N):Ce=Ne=at;break}var mt=Ei(h);if(_n.insert(Ce,mt),!(!Ce&&!Ne)){if(Ce===Ne){Ni(Ce),Ne=Ei(Ce.site),_n.insert(mt,Ne),mt.edge=Ne.edge=Nn(Ce.site,mt.site),Ji(Ce),Ji(Ne);return}if(!Ne){mt.edge=Nn(Ce.site,mt.site);return}Ni(Ce),Ni(Ne);var Et=Ce.site,zt=Et.x,tr=Et.y,ar=h.x-zt,zr=h.y-tr,Ir=Ne.site,vr=Ir.x-zt,Sr=Ir.y-tr,Cr=2*(ar*Sr-zr*vr),Ur=ar*ar+zr*zr,Yr=vr*vr+Sr*Sr,kr={x:(Sr*Ur-zr*Yr)/Cr+zt,y:(ar*Yr-vr*Ur)/Cr+tr};yn(Ne.edge,Et,Ir,kr),mt.edge=Nn(Et,h,null,kr),Ne.edge=Nn(h,Ir,null,kr),Ji(Ce),Ji(Ne)}}function ei(h,q){var ne=h.site,Ce=ne.x,Ne=ne.y,Ge=Ne-q;if(!Ge)return Ce;var ht=h.P;if(!ht)return-1/0;ne=ht.site;var at=ne.x,mt=ne.y,Et=mt-q;if(!Et)return at;var zt=at-Ce,tr=1/Ge-1/Et,ar=zt/Et;return tr?(-ar+Math.sqrt(ar*ar-2*tr*(zt*zt/(-2*Et)-mt+Et/2+Ne-Ge/2)))/tr+Ce:(Ce+at)/2}function Vi(h,q){var ne=h.N;if(ne)return ei(ne,q);var Ce=h.site;return Ce.y===q?Ce.x:1/0}function Yi(h){this.site=h,this.edges=[]}Yi.prototype.prepare=function(){for(var h=this.edges,q=h.length,ne;q--;)ne=h[q].edge,(!ne.b||!ne.a)&&h.splice(q,1);return h.sort(eo),h.length};function Mo(h){for(var q=h[0][0],ne=h[1][0],Ce=h[0][1],Ne=h[1][1],Ge,ht,at,mt,Et=bn,zt=Et.length,tr,ar,zr,Ir,vr,Sr;zt--;)if(tr=Et[zt],!(!tr||!tr.prepare()))for(zr=tr.edges,Ir=zr.length,ar=0;ar<Ir;)Sr=zr[ar].end(),at=Sr.x,mt=Sr.y,vr=zr[++ar%Ir].start(),Ge=vr.x,ht=vr.y,(_(at-Ge)>Mt||_(mt-ht)>Mt)&&(zr.splice(ar,0,new wn(En(tr.site,Sr,_(at-q)<Mt&&Ne-mt>Mt?{x:q,y:_(Ge-q)<Mt?ht:Ne}:_(mt-Ne)<Mt&&ne-at>Mt?{x:_(ht-Ne)<Mt?Ge:ne,y:Ne}:_(at-ne)<Mt&&mt-Ce>Mt?{x:ne,y:_(Ge-ne)<Mt?ht:Ce}:_(mt-Ce)<Mt&&at-q>Mt?{x:_(ht-Ce)<Mt?Ge:q,y:Ce}:null),tr.site,null)),++Ir)}function eo(h,q){return q.angle-h.angle}function xo(){Eo(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ji(h){var q=h.P,ne=h.N;if(!(!q||!ne)){var Ce=q.site,Ne=h.site,Ge=ne.site;if(Ce!==Ge){var ht=Ne.x,at=Ne.y,mt=Ce.x-ht,Et=Ce.y-at,zt=Ge.x-ht,Sr=Ge.y-at,tr=2*(mt*Sr-Et*zt);if(!(tr>=-xt)){var ar=mt*mt+Et*Et,zr=zt*zt+Sr*Sr,Ir=(Sr*ar-Et*zr)/tr,vr=(mt*zr-zt*ar)/tr,Sr=vr+at,Cr=ii.pop()||new xo;Cr.arc=h,Cr.site=Ne,Cr.x=Ir+ht,Cr.y=Sr+Math.sqrt(Ir*Ir+vr*vr),Cr.cy=Sr,h.circle=Cr;for(var Ur=null,Yr=Qn._;Yr;)if(Cr.y<Yr.y||Cr.y===Yr.y&&Cr.x<=Yr.x)if(Yr.L)Yr=Yr.L;else{Ur=Yr.P;break}else if(Yr.R)Yr=Yr.R;else{Ur=Yr;break}Qn.insert(Ur,Cr),Ur||(Gn=Cr)}}}}function Ni(h){var q=h.circle;q&&(q.P||(Gn=q.N),Qn.remove(q),ii.push(q),Eo(q),h.circle=null)}function io(h,q,ne,Ce){return function(Ne){var Ge=Ne.a,ht=Ne.b,at=Ge.x,mt=Ge.y,Et=ht.x,zt=ht.y,tr=0,ar=1,zr=Et-at,Ir=zt-mt,vr;if(vr=h-at,!(!zr&&vr>0)){if(vr/=zr,zr<0){if(vr<tr)return;vr<ar&&(ar=vr)}else if(zr>0){if(vr>ar)return;vr>tr&&(tr=vr)}if(vr=ne-at,!(!zr&&vr<0)){if(vr/=zr,zr<0){if(vr>ar)return;vr>tr&&(tr=vr)}else if(zr>0){if(vr<tr)return;vr<ar&&(ar=vr)}if(vr=q-mt,!(!Ir&&vr>0)){if(vr/=Ir,Ir<0){if(vr<tr)return;vr<ar&&(ar=vr)}else if(Ir>0){if(vr>ar)return;vr>tr&&(tr=vr)}if(vr=Ce-mt,!(!Ir&&vr<0)){if(vr/=Ir,Ir<0){if(vr>ar)return;vr>tr&&(tr=vr)}else if(Ir>0){if(vr<tr)return;vr<ar&&(ar=vr)}return tr>0&&(Ne.a={x:at+tr*zr,y:mt+tr*Ir}),ar<1&&(Ne.b={x:at+ar*zr,y:mt+ar*Ir}),Ne}}}}}}function Cl(h){for(var q=Un,ne=io(h[0][0],h[0][1],h[1][0],h[1][1]),Ce=q.length,Ne;Ce--;)Ne=q[Ce],(!Xi(Ne,h)||!ne(Ne)||_(Ne.a.x-Ne.b.x)<Mt&&_(Ne.a.y-Ne.b.y)<Mt)&&(Ne.a=Ne.b=null,q.splice(Ce,1))}function Xi(h,q){var ne=h.b;if(ne)return!0;var Ce=h.a,Ne=q[0][0],Ge=q[1][0],ht=q[0][1],at=q[1][1],mt=h.l,Et=h.r,zt=mt.x,tr=mt.y,ar=Et.x,zr=Et.y,Ir=(zt+ar)/2,vr=(tr+zr)/2,Sr,Cr;if(zr===tr){if(Ir<Ne||Ir>=Ge)return;if(zt>ar){if(!Ce)Ce={x:Ir,y:ht};else if(Ce.y>=at)return;ne={x:Ir,y:at}}else{if(!Ce)Ce={x:Ir,y:at};else if(Ce.y<ht)return;ne={x:Ir,y:ht}}}else if(Sr=(zt-ar)/(zr-tr),Cr=vr-Sr*Ir,Sr<-1||Sr>1)if(zt>ar){if(!Ce)Ce={x:(ht-Cr)/Sr,y:ht};else if(Ce.y>=at)return;ne={x:(at-Cr)/Sr,y:at}}else{if(!Ce)Ce={x:(at-Cr)/Sr,y:at};else if(Ce.y<ht)return;ne={x:(ht-Cr)/Sr,y:ht}}else if(tr<zr){if(!Ce)Ce={x:Ne,y:Sr*Ne+Cr};else if(Ce.x>=Ge)return;ne={x:Ge,y:Sr*Ge+Cr}}else{if(!Ce)Ce={x:Ge,y:Sr*Ge+Cr};else if(Ce.x<Ne)return;ne={x:Ne,y:Sr*Ne+Cr}}return h.a=Ce,h.b=ne,!0}function Tn(h,q){this.l=h,this.r=q,this.a=this.b=null}function Nn(h,q,ne,Ce){var Ne=new Tn(h,q);return Un.push(Ne),ne&&yn(Ne,h,q,ne),Ce&&yn(Ne,q,h,Ce),bn[h.i].edges.push(new wn(Ne,h,q)),bn[q.i].edges.push(new wn(Ne,q,h)),Ne}function En(h,q,ne){var Ce=new Tn(h,null);return Ce.a=q,Ce.b=ne,Un.push(Ce),Ce}function yn(h,q,ne,Ce){!h.a&&!h.b?(h.a=Ce,h.l=q,h.r=ne):h.l===ne?h.b=Ce:h.a=Ce}function wn(h,q,ne){var Ce=h.a,Ne=h.b;this.edge=h,this.site=q,this.angle=ne?Math.atan2(ne.y-q.y,ne.x-q.x):h.l===q?Math.atan2(Ne.x-Ce.x,Ce.y-Ne.y):Math.atan2(Ce.x-Ne.x,Ne.y-Ce.y)}wn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Ci(){this._=null}function Eo(h){h.U=h.C=h.L=h.R=h.P=h.N=null}Ci.prototype={insert:function(h,q){var ne,Ce,Ne;if(h){if(q.P=h,q.N=h.N,h.N&&(h.N.P=q),h.N=q,h.R){for(h=h.R;h.L;)h=h.L;h.L=q}else h.R=q;ne=h}else this._?(h=Oo(this._),q.P=null,q.N=h,h.P=h.L=q,ne=h):(q.P=q.N=null,this._=q,ne=null);for(q.L=q.R=null,q.U=ne,q.C=!0,h=q;ne&&ne.C;)Ce=ne.U,ne===Ce.L?(Ne=Ce.R,Ne&&Ne.C?(ne.C=Ne.C=!1,Ce.C=!0,h=Ce):(h===ne.R&&(Co(this,ne),h=ne,ne=h.U),ne.C=!1,Ce.C=!0,Fs(this,Ce))):(Ne=Ce.L,Ne&&Ne.C?(ne.C=Ne.C=!1,Ce.C=!0,h=Ce):(h===ne.L&&(Fs(this,ne),h=ne,ne=h.U),ne.C=!1,Ce.C=!0,Co(this,Ce))),ne=h.U;this._.C=!1},remove:function(h){h.N&&(h.N.P=h.P),h.P&&(h.P.N=h.N),h.N=h.P=null;var q=h.U,ne,Ce=h.L,Ne=h.R,Ge,ht;if(Ce?Ne?Ge=Oo(Ne):Ge=Ce:Ge=Ne,q?q.L===h?q.L=Ge:q.R=Ge:this._=Ge,Ce&&Ne?(ht=Ge.C,Ge.C=h.C,Ge.L=Ce,Ce.U=Ge,Ge!==Ne?(q=Ge.U,Ge.U=h.U,h=Ge.R,q.L=h,Ge.R=Ne,Ne.U=Ge):(Ge.U=q,q=Ge,h=Ge.R)):(ht=h.C,h=Ge),h&&(h.U=q),!ht){if(h&&h.C){h.C=!1;return}do{if(h===this._)break;if(h===q.L){if(ne=q.R,ne.C&&(ne.C=!1,q.C=!0,Co(this,q),ne=q.R),ne.L&&ne.L.C||ne.R&&ne.R.C){(!ne.R||!ne.R.C)&&(ne.L.C=!1,ne.C=!0,Fs(this,ne),ne=q.R),ne.C=q.C,q.C=ne.R.C=!1,Co(this,q),h=this._;break}}else if(ne=q.L,ne.C&&(ne.C=!1,q.C=!0,Fs(this,q),ne=q.L),ne.L&&ne.L.C||ne.R&&ne.R.C){(!ne.L||!ne.L.C)&&(ne.R.C=!1,ne.C=!0,Co(this,ne),ne=q.L),ne.C=q.C,q.C=ne.L.C=!1,Fs(this,q),h=this._;break}ne.C=!0,h=q,q=q.U}while(!h.C);h&&(h.C=!1)}}};function Co(h,q){var ne=q,Ce=q.R,Ne=ne.U;Ne?Ne.L===ne?Ne.L=Ce:Ne.R=Ce:h._=Ce,Ce.U=Ne,ne.U=Ce,ne.R=Ce.L,ne.R&&(ne.R.U=ne),Ce.L=ne}function Fs(h,q){var ne=q,Ce=q.L,Ne=ne.U;Ne?Ne.L===ne?Ne.L=Ce:Ne.R=Ce:h._=Ce,Ce.U=Ne,ne.U=Ce,ne.L=Ce.R,ne.L&&(ne.L.U=ne),Ce.R=ne}function Oo(h){for(;h.L;)h=h.L;return h}function ji(h,q){var ne=h.sort(Is).pop(),Ce,Ne,Ge;for(Un=[],bn=new Array(h.length),_n=new Ci,Qn=new Ci;;)if(Ge=Gn,ne&&(!Ge||ne.y<Ge.y||ne.y===Ge.y&&ne.x<Ge.x))(ne.x!==Ce||ne.y!==Ne)&&(bn[ne.i]=new Yi(ne),Ai(ne),Ce=ne.x,Ne=ne.y),ne=h.pop();else if(Ge)Fi(Ge.arc);else break;q&&(Cl(q),Mo(q));var ht={cells:bn,edges:Un};return _n=Qn=Un=bn=null,ht}function Is(h,q){return q.y-h.y||q.x-h.x}d.geom.voronoi=function(h){var q=Rn,ne=oi,Ce=q,Ne=ne,Ge=ss;if(h)return ht(h);function ht(mt){var Et=new Array(mt.length),zt=Ge[0][0],tr=Ge[0][1],ar=Ge[1][0],zr=Ge[1][1];return ji(at(mt),Ge).cells.forEach(function(Ir,vr){var Sr=Ir.edges,Cr=Ir.site,Ur=Et[vr]=Sr.length?Sr.map(function(Yr){var kr=Yr.start();return[kr.x,kr.y]}):Cr.x>=zt&&Cr.x<=ar&&Cr.y>=tr&&Cr.y<=zr?[[zt,zr],[ar,zr],[ar,tr],[zt,tr]]:[];Ur.point=mt[vr]}),Et}function at(mt){return mt.map(function(Et,zt){return{x:Math.round(Ce(Et,zt)/Mt)*Mt,y:Math.round(Ne(Et,zt)/Mt)*Mt,i:zt}})}return ht.links=function(mt){return ji(at(mt)).edges.filter(function(Et){return Et.l&&Et.r}).map(function(Et){return{source:mt[Et.l.i],target:mt[Et.r.i]}})},ht.triangles=function(mt){var Et=[];return ji(at(mt)).cells.forEach(function(zt,tr){for(var ar=zt.site,zr=zt.edges.sort(eo),Ir=-1,vr=zr.length,Sr,Cr=zr[vr-1].edge,Ur=Cr.l===ar?Cr.r:Cr.l;++Ir<vr;)Sr=Ur,Cr=zr[Ir].edge,Ur=Cr.l===ar?Cr.r:Cr.l,tr<Sr.i&&tr<Ur.i&&oc(ar,Sr,Ur)<0&&Et.push([mt[tr],mt[Sr.i],mt[Ur.i]])}),Et},ht.x=function(mt){return arguments.length?(Ce=Or(q=mt),ht):q},ht.y=function(mt){return arguments.length?(Ne=Or(ne=mt),ht):ne},ht.clipExtent=function(mt){return arguments.length?(Ge=mt??ss,ht):Ge===ss?null:Ge},ht.size=function(mt){return arguments.length?ht.clipExtent(mt&&[[0,0],mt]):Ge===ss?null:Ge&&Ge[1]},ht};var ss=[[-1e6,-1e6],[1e6,1e6]];function oc(h,q,ne){return(h.x-ne.x)*(q.y-h.y)-(h.x-q.x)*(ne.y-h.y)}d.geom.delaunay=function(h){return d.geom.voronoi().triangles(h)},d.geom.quadtree=function(h,q,ne,Ce,Ne){var Ge=Rn,ht=oi,at;if(at=arguments.length)return Ge=Po,ht=sc,at===3&&(Ne=ne,Ce=q,ne=q=0),mt(h);function mt(Et){var zt,tr=Or(Ge),ar=Or(ht),zr,Ir,vr,Sr,Cr,Ur,Yr,kr;if(q!=null)Cr=q,Ur=ne,Yr=Ce,kr=Ne;else if(Yr=kr=-(Cr=Ur=1/0),zr=[],Ir=[],Sr=Et.length,at)for(vr=0;vr<Sr;++vr)zt=Et[vr],zt.x<Cr&&(Cr=zt.x),zt.y<Ur&&(Ur=zt.y),zt.x>Yr&&(Yr=zt.x),zt.y>kr&&(kr=zt.y),zr.push(zt.x),Ir.push(zt.y);else for(vr=0;vr<Sr;++vr){var e=+tr(zt=Et[vr],vr),r=+ar(zt,vr);e<Cr&&(Cr=e),r<Ur&&(Ur=r),e>Yr&&(Yr=e),r>kr&&(kr=r),zr.push(e),Ir.push(r)}var o=Yr-Cr,M=kr-Ur;o>M?kr=Ur+o:Yr=Cr+M;function ie(St,br,Zr,xa,_a,Mr,Kr,Ha){if(!(isNaN(Zr)||isNaN(xa)))if(St.leaf){var tn=St.x,Pn=St.y;if(tn!=null)if(_(tn-Zr)+_(Pn-xa)<.01)xe(St,br,Zr,xa,_a,Mr,Kr,Ha);else{var Wr=St.point;St.x=St.y=St.point=null,xe(St,Wr,tn,Pn,_a,Mr,Kr,Ha),xe(St,br,Zr,xa,_a,Mr,Kr,Ha)}else St.x=Zr,St.y=xa,St.point=br}else xe(St,br,Zr,xa,_a,Mr,Kr,Ha)}function xe(St,br,Zr,xa,_a,Mr,Kr,Ha){var tn=(_a+Kr)*.5,Pn=(Mr+Ha)*.5,Wr=Zr>=tn,Fr=xa>=Pn,na=Fr<<1|Wr;St.leaf=!1,St=St.nodes[na]||(St.nodes[na]=lc()),Wr?_a=tn:Kr=tn,Fr?Mr=Pn:Ha=Pn,ie(St,br,Zr,xa,_a,Mr,Kr,Ha)}var dt=lc();if(dt.add=function(St){ie(dt,St,+tr(St,++vr),+ar(St,vr),Cr,Ur,Yr,kr)},dt.visit=function(St){_o(St,dt,Cr,Ur,Yr,kr)},dt.find=function(St){return Lh(dt,St[0],St[1],Cr,Ur,Yr,kr)},vr=-1,q==null){for(;++vr<Sr;)ie(dt,Et[vr],zr[vr],Ir[vr],Cr,Ur,Yr,kr);--vr}else Et.forEach(dt.add);return zr=Ir=Et=zt=null,dt}return mt.x=function(Et){return arguments.length?(Ge=Et,mt):Ge},mt.y=function(Et){return arguments.length?(ht=Et,mt):ht},mt.extent=function(Et){return arguments.length?(Et==null?q=ne=Ce=Ne=null:(q=+Et[0][0],ne=+Et[0][1],Ce=+Et[1][0],Ne=+Et[1][1]),mt):q==null?null:[[q,ne],[Ce,Ne]]},mt.size=function(Et){return arguments.length?(Et==null?q=ne=Ce=Ne=null:(q=ne=0,Ce=+Et[0],Ne=+Et[1]),mt):q==null?null:[Ce-q,Ne-ne]},mt};function Po(h){return h.x}function sc(h){return h.y}function lc(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function _o(h,q,ne,Ce,Ne,Ge){if(!h(q,ne,Ce,Ne,Ge)){var ht=(ne+Ne)*.5,at=(Ce+Ge)*.5,mt=q.nodes;mt[0]&&_o(h,mt[0],ne,Ce,ht,at),mt[1]&&_o(h,mt[1],ht,Ce,Ne,at),mt[2]&&_o(h,mt[2],ne,at,ht,Ge),mt[3]&&_o(h,mt[3],ht,at,Ne,Ge)}}function Lh(h,q,ne,Ce,Ne,Ge,ht){var at=1/0,mt;return(function Et(zt,tr,ar,zr,Ir){if(!(tr>Ge||ar>ht||zr<Ce||Ir<Ne)){if(vr=zt.point){var vr,Sr=q-zt.x,Cr=ne-zt.y,Ur=Sr*Sr+Cr*Cr;if(Ur<at){var Yr=Math.sqrt(at=Ur);Ce=q-Yr,Ne=ne-Yr,Ge=q+Yr,ht=ne+Yr,mt=vr}}for(var kr=zt.nodes,e=(tr+zr)*.5,r=(ar+Ir)*.5,o=q>=e,M=ne>=r,ie=M<<1|o,xe=ie+4;ie<xe;++ie)if(zt=kr[ie&3])switch(ie&3){case 0:Et(zt,tr,ar,e,r);break;case 1:Et(zt,e,ar,zr,r);break;case 2:Et(zt,tr,r,e,Ir);break;case 3:Et(zt,e,r,zr,Ir);break}}})(h,Ce,Ne,Ge,ht),mt}d.interpolateRgb=uc;function uc(h,q){h=d.rgb(h),q=d.rgb(q);var ne=h.r,Ce=h.g,Ne=h.b,Ge=q.r-ne,ht=q.g-Ce,at=q.b-Ne;return function(mt){return"#"+Dt(Math.round(ne+Ge*mt))+Dt(Math.round(Ce+ht*mt))+Dt(Math.round(Ne+at*mt))}}d.interpolateObject=Nh;function Nh(h,q){var ne={},Ce={},Ne;for(Ne in h)Ne in q?ne[Ne]=Jo(h[Ne],q[Ne]):Ce[Ne]=h[Ne];for(Ne in q)Ne in h||(Ce[Ne]=q[Ne]);return function(Ge){for(Ne in ne)Ce[Ne]=ne[Ne](Ge);return Ce}}d.interpolateNumber=xs;function xs(h,q){return h=+h,q=+q,function(ne){return h*(1-ne)+q*ne}}d.interpolateString=nf;function nf(h,q){var ne=il.lastIndex=oo.lastIndex=0,Ce,Ne,Ge,ht=-1,at=[],mt=[];for(h=h+"",q=q+"";(Ce=il.exec(h))&&(Ne=oo.exec(q));)(Ge=Ne.index)>ne&&(Ge=q.slice(ne,Ge),at[ht]?at[ht]+=Ge:at[++ht]=Ge),(Ce=Ce[0])===(Ne=Ne[0])?at[ht]?at[ht]+=Ne:at[++ht]=Ne:(at[++ht]=null,mt.push({i:ht,x:xs(Ce,Ne)})),ne=oo.lastIndex;return ne<q.length&&(Ge=q.slice(ne),at[ht]?at[ht]+=Ge:at[++ht]=Ge),at.length<2?mt[0]?(q=mt[0].x,function(Et){return q(Et)+""}):function(){return q}:(q=mt.length,function(Et){for(var zt=0,tr;zt<q;++zt)at[(tr=mt[zt]).i]=tr.x(Et);return at.join("")})}var il=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oo=new RegExp(il.source,"g");d.interpolate=Jo;function Jo(h,q){for(var ne=d.interpolators.length,Ce;--ne>=0&&!(Ce=d.interpolators[ne](h,q)););return Ce}d.interpolators=[function(h,q){var ne=typeof q;return(ne==="string"?rr.has(q.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(q)?uc:nf:q instanceof Oa?uc:Array.isArray(q)?kl:ne==="object"&&isNaN(q)?Nh:xs)(h,q)}],d.interpolateArray=kl;function kl(h,q){var ne=[],Ce=[],Ne=h.length,Ge=q.length,ht=Math.min(h.length,q.length),at;for(at=0;at<ht;++at)ne.push(Jo(h[at],q[at]));for(;at<Ne;++at)Ce[at]=h[at];for(;at<Ge;++at)Ce[at]=q[at];return function(mt){for(at=0;at<ht;++at)Ce[at]=ne[at](mt);return Ce}}var ol=function(){return Me},Oh=d.map({linear:ol,poly:Ld,quad:function(){return ls},cubic:function(){return zd},sin:function(){return Nd},exp:function(){return b0},circle:function(){return tu},elastic:qf,back:Fh,bounce:function(){return hc}}),Ph=d.map({in:Me,out:fc,"in-out":Gf,"out-in":function(h){return Gf(fc(h))}});d.ease=function(h){var q=h.indexOf("-"),ne=q>=0?h.slice(0,q):h,Ce=q>=0?h.slice(q+1):"in";return ne=Oh.get(ne)||ol,Ce=Ph.get(Ce)||Me,Dd(Ce(ne.apply(null,u.call(arguments,1))))};function Dd(h){return function(q){return q<=0?0:q>=1?1:h(q)}}function fc(h){return function(q){return 1-h(1-q)}}function Gf(h){return function(q){return .5*(q<.5?h(2*q):2-h(2-2*q))}}function ls(h){return h*h}function zd(h){return h*h*h}function Ko(h){if(h<=0)return 0;if(h>=1)return 1;var q=h*h,ne=q*h;return 4*(h<.5?ne:3*(h-q)+ne-.75)}function Ld(h){return function(q){return Math.pow(q,h)}}function Nd(h){return 1-Math.cos(h*ut)}function b0(h){return Math.pow(2,10*(h-1))}function tu(h){return 1-Math.sqrt(1-h*h)}function qf(h,q){var ne;return arguments.length<2&&(q=.45),arguments.length?ne=q/ot*Math.asin(1/h):(h=1,ne=q/4),function(Ce){return 1+h*Math.pow(2,-10*Ce)*Math.sin((Ce-ne)*ot/q)}}function Fh(h){return h||(h=1.70158),function(q){return q*q*((h+1)*q-h)}}function hc(h){return h<1/2.75?7.5625*h*h:h<2/2.75?7.5625*(h-=1.5/2.75)*h+.75:h<2.5/2.75?7.5625*(h-=2.25/2.75)*h+.9375:7.5625*(h-=2.625/2.75)*h+.984375}d.interpolateHcl=Od;function Od(h,q){h=d.hcl(h),q=d.hcl(q);var ne=h.h,Ce=h.c,Ne=h.l,Ge=q.h-ne,ht=q.c-Ce,at=q.l-Ne;return isNaN(ht)&&(ht=0,Ce=isNaN(Ce)?q.c:Ce),isNaN(Ge)?(Ge=0,ne=isNaN(ne)?q.h:ne):Ge>180?Ge-=360:Ge<-180&&(Ge+=360),function(mt){return La(ne+Ge*mt,Ce+ht*mt,Ne+at*mt)+""}}d.interpolateHsl=Pd;function Pd(h,q){h=d.hsl(h),q=d.hsl(q);var ne=h.h,Ce=h.s,Ne=h.l,Ge=q.h-ne,ht=q.s-Ce,at=q.l-Ne;return isNaN(ht)&&(ht=0,Ce=isNaN(Ce)?q.s:Ce),isNaN(Ge)?(Ge=0,ne=isNaN(ne)?q.h:ne):Ge>180?Ge-=360:Ge<-180&&(Ge+=360),function(mt){return Va(ne+Ge*mt,Ce+ht*mt,Ne+at*mt)+""}}d.interpolateLab=Fd;function Fd(h,q){h=d.lab(h),q=d.lab(q);var ne=h.l,Ce=h.a,Ne=h.b,Ge=q.l-ne,ht=q.a-Ce,at=q.b-Ne;return function(mt){return cn(ne+Ge*mt,Ce+ht*mt,Ne+at*mt)+""}}d.interpolateRound=jh;function jh(h,q){return q-=h,function(ne){return Math.round(h+q*ne)}}d.transform=function(h){var q=m.createElementNS(d.ns.prefix.svg,"g");return(d.transform=function(ne){if(ne!=null){q.setAttribute("transform",ne);var Ce=q.transform.baseVal.consolidate()}return new of(Ce?Ce.matrix:_0)})(h)};function of(h){var q=[h.a,h.b],ne=[h.c,h.d],Ce=jd(q),Ne=Vf(q,ne),Ge=jd(x0(ne,q,-Ne))||0;q[0]*ne[1]<ne[0]*q[1]&&(q[0]*=-1,q[1]*=-1,Ce*=-1,Ne*=-1),this.rotate=(Ce?Math.atan2(q[1],q[0]):Math.atan2(-ne[0],ne[1]))*Ot,this.translate=[h.e,h.f],this.scale=[Ce,Ge],this.skew=Ge?Math.atan2(Ne,Ge)*Ot:0}of.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Vf(h,q){return h[0]*q[0]+h[1]*q[1]}function jd(h){var q=Math.sqrt(Vf(h,h));return q&&(h[0]/=q,h[1]/=q),q}function x0(h,q,ne){return h[0]+=ne*q[0],h[1]+=ne*q[1],h}var _0={a:1,b:0,c:0,d:1,e:0,f:0};d.interpolateTransform=Ih;function Nu(h){return h.length?h.pop()+",":""}function Id(h,q,ne,Ce){if(h[0]!==q[0]||h[1]!==q[1]){var Ne=ne.push("translate(",null,",",null,")");Ce.push({i:Ne-4,x:xs(h[0],q[0])},{i:Ne-2,x:xs(h[1],q[1])})}else(q[0]||q[1])&&ne.push("translate("+q+")")}function dc(h,q,ne,Ce){h!==q?(h-q>180?q+=360:q-h>180&&(h+=360),Ce.push({i:ne.push(Nu(ne)+"rotate(",null,")")-2,x:xs(h,q)})):q&&ne.push(Nu(ne)+"rotate("+q+")")}function Yf(h,q,ne,Ce){h!==q?Ce.push({i:ne.push(Nu(ne)+"skewX(",null,")")-2,x:xs(h,q)}):q&&ne.push(Nu(ne)+"skewX("+q+")")}function Bd(h,q,ne,Ce){if(h[0]!==q[0]||h[1]!==q[1]){var Ne=ne.push(Nu(ne)+"scale(",null,",",null,")");Ce.push({i:Ne-4,x:xs(h[0],q[0])},{i:Ne-2,x:xs(h[1],q[1])})}else(q[0]!==1||q[1]!==1)&&ne.push(Nu(ne)+"scale("+q+")")}function Ih(h,q){var ne=[],Ce=[];return h=d.transform(h),q=d.transform(q),Id(h.translate,q.translate,ne,Ce),dc(h.rotate,q.rotate,ne,Ce),Yf(h.skew,q.skew,ne,Ce),Bd(h.scale,q.scale,ne,Ce),h=q=null,function(Ne){for(var Ge=-1,ht=Ce.length,at;++Ge<ht;)ne[(at=Ce[Ge]).i]=at.x(Ne);return ne.join("")}}function Hd(h,q){return q=(q-=h=+h)||1/q,function(ne){return(ne-h)/q}}function Ud(h,q){return q=(q-=h=+h)||1/q,function(ne){return Math.max(0,Math.min(1,(ne-h)/q))}}d.layout={},d.layout.bundle=function(){return function(h){for(var q=[],ne=-1,Ce=h.length;++ne<Ce;)q.push(Gd(h[ne]));return q}};function Gd(h){for(var q=h.source,ne=h.target,Ce=Wf(q,ne),Ne=[q];q!==Ce;)q=q.parent,Ne.push(q);for(var Ge=Ne.length;ne!==Ce;)Ne.splice(Ge,0,ne),ne=ne.parent;return Ne}function Bh(h){for(var q=[],ne=h.parent;ne!=null;)q.push(h),h=ne,ne=ne.parent;return q.push(h),q}function Wf(h,q){if(h===q)return h;for(var ne=Bh(h),Ce=Bh(q),Ne=ne.pop(),Ge=Ce.pop(),ht=null;Ne===Ge;)ht=Ne,Ne=ne.pop(),Ge=Ce.pop();return ht}d.layout.chord=function(){var h={},q,ne,Ce,Ne,Ge=0,ht,at,mt;function Et(){var tr={},ar=[],zr=d.range(Ne),Ir=[],vr,Sr,Cr,Ur,Yr;for(q=[],ne=[],vr=0,Ur=-1;++Ur<Ne;){for(Sr=0,Yr=-1;++Yr<Ne;)Sr+=Ce[Ur][Yr];ar.push(Sr),Ir.push(d.range(Ne)),vr+=Sr}for(ht&&zr.sort(function(dt,St){return ht(ar[dt],ar[St])}),at&&Ir.forEach(function(dt,St){dt.sort(function(br,Zr){return at(Ce[St][br],Ce[St][Zr])})}),vr=(ot-Ge*Ne)/vr,Sr=0,Ur=-1;++Ur<Ne;){for(Cr=Sr,Yr=-1;++Yr<Ne;){var kr=zr[Ur],e=Ir[kr][Yr],r=Ce[kr][e],o=Sr,M=Sr+=r*vr;tr[kr+"-"+e]={index:kr,subindex:e,startAngle:o,endAngle:M,value:r}}ne[kr]={index:kr,startAngle:Cr,endAngle:Sr,value:ar[kr]},Sr+=Ge}for(Ur=-1;++Ur<Ne;)for(Yr=Ur-1;++Yr<Ne;){var ie=tr[Ur+"-"+Yr],xe=tr[Yr+"-"+Ur];(ie.value||xe.value)&&q.push(ie.value<xe.value?{source:xe,target:ie}:{source:ie,target:xe})}mt&&zt()}function zt(){q.sort(function(tr,ar){return mt((tr.source.value+tr.target.value)/2,(ar.source.value+ar.target.value)/2)})}return h.matrix=function(tr){return arguments.length?(Ne=(Ce=tr)&&Ce.length,q=ne=null,h):Ce},h.padding=function(tr){return arguments.length?(Ge=tr,q=ne=null,h):Ge},h.sortGroups=function(tr){return arguments.length?(ht=tr,q=ne=null,h):ht},h.sortSubgroups=function(tr){return arguments.length?(at=tr,q=null,h):at},h.sortChords=function(tr){return arguments.length?(mt=tr,q&&zt(),h):mt},h.chords=function(){return q||Et(),q},h.groups=function(){return ne||Et(),ne},h},d.layout.force=function(){var h={},q=d.dispatch("start","tick","end"),ne,Ce=[1,1],Ne,Ge,ht=.9,at=Wd,mt=w0,Et=-30,zt=A0,tr=.1,ar=.64,zr=[],Ir=[],vr,Sr,Cr;function Ur(kr){return function(e,r,o,M){if(e.point!==kr){var ie=e.cx-kr.x,xe=e.cy-kr.y,dt=M-r,St=ie*ie+xe*xe;if(dt*dt/ar<St){if(St<zt){var br=e.charge/St;kr.px-=ie*br,kr.py-=xe*br}return!0}if(e.point&&St&&St<zt){var br=e.pointCharge/St;kr.px-=ie*br,kr.py-=xe*br}}return!e.charge}}h.tick=function(){if((Ge*=.99)<.005)return ne=null,q.end({type:"end",alpha:Ge=0}),!0;var kr=zr.length,e=Ir.length,r,o,M,ie,xe,dt,St,br,Zr;for(o=0;o<e;++o)M=Ir[o],ie=M.source,xe=M.target,br=xe.x-ie.x,Zr=xe.y-ie.y,(dt=br*br+Zr*Zr)&&(dt=Ge*Sr[o]*((dt=Math.sqrt(dt))-vr[o])/dt,br*=dt,Zr*=dt,xe.x-=br*(St=ie.weight+xe.weight?ie.weight/(ie.weight+xe.weight):.5),xe.y-=Zr*St,ie.x+=br*(St=1-St),ie.y+=Zr*St);if((St=Ge*tr)&&(br=Ce[0]/2,Zr=Ce[1]/2,o=-1,St))for(;++o<kr;)M=zr[o],M.x+=(br-M.x)*St,M.y+=(Zr-M.y)*St;if(Et)for(Yd(r=d.geom.quadtree(zr),Ge,Cr),o=-1;++o<kr;)(M=zr[o]).fixed||r.visit(Ur(M));for(o=-1;++o<kr;)M=zr[o],M.fixed?(M.x=M.px,M.y=M.py):(M.x-=(M.px-(M.px=M.x))*ht,M.y-=(M.py-(M.py=M.y))*ht);q.tick({type:"tick",alpha:Ge})},h.nodes=function(kr){return arguments.length?(zr=kr,h):zr},h.links=function(kr){return arguments.length?(Ir=kr,h):Ir},h.size=function(kr){return arguments.length?(Ce=kr,h):Ce},h.linkDistance=function(kr){return arguments.length?(at=typeof kr=="function"?kr:+kr,h):at},h.distance=h.linkDistance,h.linkStrength=function(kr){return arguments.length?(mt=typeof kr=="function"?kr:+kr,h):mt},h.friction=function(kr){return arguments.length?(ht=+kr,h):ht},h.charge=function(kr){return arguments.length?(Et=typeof kr=="function"?kr:+kr,h):Et},h.chargeDistance=function(kr){return arguments.length?(zt=kr*kr,h):Math.sqrt(zt)},h.gravity=function(kr){return arguments.length?(tr=+kr,h):tr},h.theta=function(kr){return arguments.length?(ar=kr*kr,h):Math.sqrt(ar)},h.alpha=function(kr){return arguments.length?(kr=+kr,Ge?kr>0?Ge=kr:(ne.c=null,ne.t=NaN,ne=null,q.end({type:"end",alpha:Ge=0})):kr>0&&(q.start({type:"start",alpha:Ge=kr}),ne=Sn(h.tick)),h):Ge},h.start=function(){var kr,e=zr.length,r=Ir.length,o=Ce[0],M=Ce[1],ie,xe;for(kr=0;kr<e;++kr)(xe=zr[kr]).index=kr,xe.weight=0;for(kr=0;kr<r;++kr)xe=Ir[kr],typeof xe.source=="number"&&(xe.source=zr[xe.source]),typeof xe.target=="number"&&(xe.target=zr[xe.target]),++xe.source.weight,++xe.target.weight;for(kr=0;kr<e;++kr)xe=zr[kr],isNaN(xe.x)&&(xe.x=dt("x",o)),isNaN(xe.y)&&(xe.y=dt("y",M)),isNaN(xe.px)&&(xe.px=xe.x),isNaN(xe.py)&&(xe.py=xe.y);if(vr=[],typeof at=="function")for(kr=0;kr<r;++kr)vr[kr]=+at.call(this,Ir[kr],kr);else for(kr=0;kr<r;++kr)vr[kr]=at;if(Sr=[],typeof mt=="function")for(kr=0;kr<r;++kr)Sr[kr]=+mt.call(this,Ir[kr],kr);else for(kr=0;kr<r;++kr)Sr[kr]=mt;if(Cr=[],typeof Et=="function")for(kr=0;kr<e;++kr)Cr[kr]=+Et.call(this,zr[kr],kr);else for(kr=0;kr<e;++kr)Cr[kr]=Et;function dt(St,br){if(!ie){for(ie=new Array(e),_a=0;_a<e;++_a)ie[_a]=[];for(_a=0;_a<r;++_a){var Zr=Ir[_a];ie[Zr.source.index].push(Zr.target),ie[Zr.target.index].push(Zr.source)}}for(var xa=ie[kr],_a=-1,Mr=xa.length,Kr;++_a<Mr;)if(!isNaN(Kr=xa[_a][St]))return Kr;return Math.random()*br}return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){if(Ne||(Ne=d.behavior.drag().origin(Me).on("dragstart.force",qd).on("drag.force",Yr).on("dragend.force",Vd)),!arguments.length)return Ne;this.on("mouseover.force",ki).on("mouseout.force",Hh).call(Ne)};function Yr(kr){kr.px=d.event.x,kr.py=d.event.y,h.resume()}return d.rebind(h,q,"on")};function qd(h){h.fixed|=2}function Vd(h){h.fixed&=-7}function ki(h){h.fixed|=4,h.px=h.x,h.py=h.y}function Hh(h){h.fixed&=-5}function Yd(h,q,ne){var Ce=0,Ne=0;if(h.charge=0,!h.leaf)for(var Ge=h.nodes,ht=Ge.length,at=-1,mt;++at<ht;)mt=Ge[at],mt!=null&&(Yd(mt,q,ne),h.charge+=mt.charge,Ce+=mt.charge*mt.cx,Ne+=mt.charge*mt.cy);if(h.point){h.leaf||(h.point.x+=Math.random()-.5,h.point.y+=Math.random()-.5);var Et=q*ne[h.point.index];h.charge+=h.pointCharge=Et,Ce+=Et*h.point.x,Ne+=Et*h.point.y}h.cx=Ce/h.charge,h.cy=Ne/h.charge}var Wd=20,w0=1,A0=1/0;d.layout.hierarchy=function(){var h=Gh,q=Uh,ne=$f;function Ce(Ne){var Ge=[Ne],ht=[],at;for(Ne.depth=0;(at=Ge.pop())!=null;)if(ht.push(at),(Et=q.call(Ce,at,at.depth))&&(mt=Et.length)){for(var mt,Et,zt;--mt>=0;)Ge.push(zt=Et[mt]),zt.parent=at,zt.depth=at.depth+1;ne&&(at.value=0),at.children=Et}else ne&&(at.value=+ne.call(Ce,at,at.depth)||0),delete at.children;return Uo(Ne,function(tr){var ar,zr;h&&(ar=tr.children)&&ar.sort(h),ne&&(zr=tr.parent)&&(zr.value+=tr.value)}),ht}return Ce.sort=function(Ne){return arguments.length?(h=Ne,Ce):h},Ce.children=function(Ne){return arguments.length?(q=Ne,Ce):q},Ce.value=function(Ne){return arguments.length?(ne=Ne,Ce):ne},Ce.revalue=function(Ne){return ne&&(ru(Ne,function(Ge){Ge.children&&(Ge.value=0)}),Uo(Ne,function(Ge){var ht;Ge.children||(Ge.value=+ne.call(Ce,Ge,Ge.depth)||0),(ht=Ge.parent)&&(ht.value+=Ge.value)})),Ne},Ce};function sf(h,q){return d.rebind(h,q,"sort","children","value"),h.nodes=h,h.links=au,h}function ru(h,q){for(var ne=[h];(h=ne.pop())!=null;)if(q(h),(Ne=h.children)&&(Ce=Ne.length))for(var Ce,Ne;--Ce>=0;)ne.push(Ne[Ce])}function Uo(h,q){for(var ne=[h],Ce=[];(h=ne.pop())!=null;)if(Ce.push(h),(ht=h.children)&&(Ge=ht.length))for(var Ne=-1,Ge,ht;++Ne<Ge;)ne.push(ht[Ne]);for(;(h=Ce.pop())!=null;)q(h)}function Uh(h){return h.children}function $f(h){return h.value}function Gh(h,q){return q.value-h.value}function au(h){return d.merge(h.map(function(q){return(q.children||[]).map(function(ne){return{source:q,target:ne}})}))}d.layout.partition=function(){var h=d.layout.hierarchy(),q=[1,1];function ne(Ge,ht,at,mt){var Et=Ge.children;if(Ge.x=ht,Ge.y=Ge.depth*mt,Ge.dx=at,Ge.dy=mt,Et&&(tr=Et.length)){var zt=-1,tr,ar,zr;for(at=Ge.value?at/Ge.value:0;++zt<tr;)ne(ar=Et[zt],ht,zr=ar.value*at,mt),ht+=zr}}function Ce(Ge){var ht=Ge.children,at=0;if(ht&&(Et=ht.length))for(var mt=-1,Et;++mt<Et;)at=Math.max(at,Ce(ht[mt]));return 1+at}function Ne(Ge,ht){var at=h.call(this,Ge,ht);return ne(at[0],0,q[0],q[1]/Ce(at[0])),at}return Ne.size=function(Ge){return arguments.length?(q=Ge,Ne):q},sf(Ne,h)},d.layout.pie=function(){var h=Number,q=Bs,ne=0,Ce=ot,Ne=0;function Ge(ht){var at=ht.length,mt=ht.map(function(Ur,Yr){return+h.call(Ge,Ur,Yr)}),Et=+(typeof ne=="function"?ne.apply(this,arguments):ne),zt=(typeof Ce=="function"?Ce.apply(this,arguments):Ce)-Et,tr=Math.min(Math.abs(zt)/at,+(typeof Ne=="function"?Ne.apply(this,arguments):Ne)),ar=tr*(zt<0?-1:1),zr=d.sum(mt),Ir=zr?(zt-at*ar)/zr:0,vr=d.range(at),Sr=[],Cr;return q!=null&&vr.sort(q===Bs?function(Ur,Yr){return mt[Yr]-mt[Ur]}:function(Ur,Yr){return q(ht[Ur],ht[Yr])}),vr.forEach(function(Ur){Sr[Ur]={data:ht[Ur],value:Cr=mt[Ur],startAngle:Et,endAngle:Et+=Cr*Ir+ar,padAngle:tr}}),Sr}return Ge.value=function(ht){return arguments.length?(h=ht,Ge):h},Ge.sort=function(ht){return arguments.length?(q=ht,Ge):q},Ge.startAngle=function(ht){return arguments.length?(ne=ht,Ge):ne},Ge.endAngle=function(ht){return arguments.length?(Ce=ht,Ge):Ce},Ge.padAngle=function(ht){return arguments.length?(Ne=ht,Ge):Ne},Ge};var Bs={};d.layout.stack=function(){var h=Me,q=Xf,ne=qh,Ce=$d,Ne=lf,Ge=S0;function ht(at,mt){if(!(Ir=at.length))return at;var Et=at.map(function(Ur,Yr){return h.call(ht,Ur,Yr)}),zt=Et.map(function(Ur){return Ur.map(function(Yr,kr){return[Ne.call(ht,Yr,kr),Ge.call(ht,Yr,kr)]})}),tr=q.call(ht,zt,mt);Et=d.permute(Et,tr),zt=d.permute(zt,tr);var ar=ne.call(ht,zt,mt),zr=Et[0].length,Ir,vr,Sr,Cr;for(Sr=0;Sr<zr;++Sr)for(Ce.call(ht,Et[0][Sr],Cr=ar[Sr],zt[0][Sr][1]),vr=1;vr<Ir;++vr)Ce.call(ht,Et[vr][Sr],Cr+=zt[vr-1][Sr][1],zt[vr][Sr][1]);return at}return ht.values=function(at){return arguments.length?(h=at,ht):h},ht.order=function(at){return arguments.length?(q=typeof at=="function"?at:Xd.get(at)||Xf,ht):q},ht.offset=function(at){return arguments.length?(ne=typeof at=="function"?at:Zd.get(at)||qh,ht):ne},ht.x=function(at){return arguments.length?(Ne=at,ht):Ne},ht.y=function(at){return arguments.length?(Ge=at,ht):Ge},ht.out=function(at){return arguments.length?(Ce=at,ht):Ce},ht};function lf(h){return h.x}function S0(h){return h.y}function $d(h,q,ne){h.y0=q,h.y=ne}var Xd=d.map({"inside-out":function(h){var q=h.length,ne,Ce,Ne=h.map(Vh),Ge=h.map(Jd),ht=d.range(q).sort(function(tr,ar){return Ne[tr]-Ne[ar]}),at=0,mt=0,Et=[],zt=[];for(ne=0;ne<q;++ne)Ce=ht[ne],at<mt?(at+=Ge[Ce],Et.push(Ce)):(mt+=Ge[Ce],zt.push(Ce));return zt.reverse().concat(Et)},reverse:function(h){return d.range(h.length).reverse()},default:Xf}),Zd=d.map({silhouette:function(h){var q=h.length,ne=h[0].length,Ce=[],Ne=0,Ge,ht,at,mt=[];for(ht=0;ht<ne;++ht){for(Ge=0,at=0;Ge<q;Ge++)at+=h[Ge][ht][1];at>Ne&&(Ne=at),Ce.push(at)}for(ht=0;ht<ne;++ht)mt[ht]=(Ne-Ce[ht])/2;return mt},wiggle:function(h){var q=h.length,ne=h[0],Ce=ne.length,Ne,Ge,ht,at,mt,Et,zt,tr,ar,zr=[];for(zr[0]=tr=ar=0,Ge=1;Ge<Ce;++Ge){for(Ne=0,at=0;Ne<q;++Ne)at+=h[Ne][Ge][1];for(Ne=0,mt=0,zt=ne[Ge][0]-ne[Ge-1][0];Ne<q;++Ne){for(ht=0,Et=(h[Ne][Ge][1]-h[Ne][Ge-1][1])/(2*zt);ht<Ne;++ht)Et+=(h[ht][Ge][1]-h[ht][Ge-1][1])/zt;mt+=Et*h[Ne][Ge][1]}zr[Ge]=tr-=at?mt/at*zt:0,tr<ar&&(ar=tr)}for(Ge=0;Ge<Ce;++Ge)zr[Ge]-=ar;return zr},expand:function(h){var q=h.length,ne=h[0].length,Ce=1/q,Ne,Ge,ht,at=[];for(Ge=0;Ge<ne;++Ge){for(Ne=0,ht=0;Ne<q;Ne++)ht+=h[Ne][Ge][1];if(ht)for(Ne=0;Ne<q;Ne++)h[Ne][Ge][1]/=ht;else for(Ne=0;Ne<q;Ne++)h[Ne][Ge][1]=Ce}for(Ge=0;Ge<ne;++Ge)at[Ge]=0;return at},zero:qh});function Xf(h){return d.range(h.length)}function qh(h){for(var q=-1,ne=h[0].length,Ce=[];++q<ne;)Ce[q]=0;return Ce}function Vh(h){for(var q=1,ne=0,Ce=h[0][1],Ne,Ge=h.length;q<Ge;++q)(Ne=h[q][1])>Ce&&(ne=q,Ce=Ne);return ne}function Jd(h){return h.reduce(Kd,0)}function Kd(h,q){return h+q[1]}d.layout.histogram=function(){var h=!0,q=Number,ne=Yh,Ce=T0;function Ne(Ge,ar){for(var at=[],mt=Ge.map(q,this),Et=ne.call(this,mt,ar),zt=Ce.call(this,Et,mt,ar),tr,ar=-1,zr=mt.length,Ir=zt.length-1,vr=h?1:1/zr,Sr;++ar<Ir;)tr=at[ar]=[],tr.dx=zt[ar+1]-(tr.x=zt[ar]),tr.y=0;if(Ir>0)for(ar=-1;++ar<zr;)Sr=mt[ar],Sr>=Et[0]&&Sr<=Et[1]&&(tr=at[d.bisect(zt,Sr,1,Ir)-1],tr.y+=vr,tr.push(Ge[ar]));return at}return Ne.value=function(Ge){return arguments.length?(q=Ge,Ne):q},Ne.range=function(Ge){return arguments.length?(ne=Or(Ge),Ne):ne},Ne.bins=function(Ge){return arguments.length?(Ce=typeof Ge=="number"?function(ht){return Zf(ht,Ge)}:Or(Ge),Ne):Ce},Ne.frequency=function(Ge){return arguments.length?(h=!!Ge,Ne):h},Ne};function T0(h,q){return Zf(h,Math.ceil(Math.log(q.length)/Math.LN2+1))}function Zf(h,q){for(var ne=-1,Ce=+h[0],Ne=(h[1]-Ce)/q,Ge=[];++ne<=q;)Ge[ne]=Ne*ne+Ce;return Ge}function Yh(h){return[d.min(h),d.max(h)]}d.layout.pack=function(){var h=d.layout.hierarchy().sort(M0),q=0,ne=[1,1],Ce;function Ne(Ge,ht){var at=h.call(this,Ge,ht),mt=at[0],Et=ne[0],zt=ne[1],tr=Ce==null?Math.sqrt:typeof Ce=="function"?Ce:function(){return Ce};if(mt.x=mt.y=0,Uo(mt,function(zr){zr.r=+tr(zr.value)}),Uo(mt,$h),q){var ar=q*(Ce?1:Math.max(2*mt.r/Et,2*mt.r/zt))/2;Uo(mt,function(zr){zr.r+=ar}),Uo(mt,$h),Uo(mt,function(zr){zr.r-=ar})}return uf(mt,Et/2,zt/2,Ce?1:1/Math.max(2*mt.r/Et,2*mt.r/zt)),at}return Ne.size=function(Ge){return arguments.length?(ne=Ge,Ne):ne},Ne.radius=function(Ge){return arguments.length?(Ce=Ge==null||typeof Ge=="function"?Ge:+Ge,Ne):Ce},Ne.padding=function(Ge){return arguments.length?(q=+Ge,Ne):q},sf(Ne,h)};function M0(h,q){return h.value-q.value}function Wh(h,q){var ne=h._pack_next;h._pack_next=q,q._pack_prev=h,q._pack_next=ne,ne._pack_prev=q}function vc(h,q){h._pack_next=q,q._pack_prev=h}function Qd(h,q){var ne=q.x-h.x,Ce=q.y-h.y,Ne=h.r+q.r;return .999*Ne*Ne>ne*ne+Ce*Ce}function $h(h){if(!(q=h.children)||!(ar=q.length))return;var q,ne=1/0,Ce=-1/0,Ne=1/0,Ge=-1/0,ht,at,mt,Et,zt,tr,ar;function zr(kr){ne=Math.min(kr.x-kr.r,ne),Ce=Math.max(kr.x+kr.r,Ce),Ne=Math.min(kr.y-kr.r,Ne),Ge=Math.max(kr.y+kr.r,Ge)}if(q.forEach(ai),ht=q[0],ht.x=-ht.r,ht.y=0,zr(ht),ar>1&&(at=q[1],at.x=at.r,at.y=0,zr(at),ar>2))for(mt=q[2],Jf(ht,at,mt),zr(mt),Wh(ht,mt),ht._pack_prev=mt,Wh(mt,at),at=ht._pack_next,Et=3;Et<ar;Et++){Jf(ht,at,mt=q[Et]);var Ir=0,vr=1,Sr=1;for(zt=at._pack_next;zt!==at;zt=zt._pack_next,vr++)if(Qd(zt,mt)){Ir=1;break}if(Ir==1)for(tr=ht._pack_prev;tr!==zt._pack_prev&&!Qd(tr,mt);tr=tr._pack_prev,Sr++);Ir?(vr<Sr||vr==Sr&&at.r<ht.r?vc(ht,at=zt):vc(ht=tr,at),Et--):(Wh(ht,mt),at=mt,zr(mt))}var Cr=(ne+Ce)/2,Ur=(Ne+Ge)/2,Yr=0;for(Et=0;Et<ar;Et++)mt=q[Et],mt.x-=Cr,mt.y-=Ur,Yr=Math.max(Yr,mt.r+Math.sqrt(mt.x*mt.x+mt.y*mt.y));h.r=Yr,q.forEach(Xh)}function ai(h){h._pack_next=h._pack_prev=h}function Xh(h){delete h._pack_next,delete h._pack_prev}function uf(h,q,ne,Ce){var Ne=h.children;if(h.x=q+=Ce*h.x,h.y=ne+=Ce*h.y,h.r*=Ce,Ne)for(var Ge=-1,ht=Ne.length;++Ge<ht;)uf(Ne[Ge],q,ne,Ce)}function Jf(h,q,ne){var Ce=h.r+ne.r,Ne=q.x-h.x,Ge=q.y-h.y;if(Ce&&(Ne||Ge)){var ht=q.r+ne.r,at=Ne*Ne+Ge*Ge;ht*=ht,Ce*=Ce;var mt=.5+(Ce-ht)/(2*at),Et=Math.sqrt(Math.max(0,2*ht*(Ce+at)-(Ce-=at)*Ce-ht*ht))/(2*at);ne.x=h.x+mt*Ne+Et*Ge,ne.y=h.y+mt*Ge-Et*Ne}else ne.x=h.x+Ce,ne.y=h.y}d.layout.tree=function(){var h=d.layout.hierarchy().sort(null).value(null),q=Zh,ne=[1,1],Ce=null;function Ne(zt,tr){var ar=h.call(this,zt,tr),zr=ar[0],Ir=Ge(zr);if(Uo(Ir,ht),Ir.parent.m=-Ir.z,ru(Ir,at),Ce)ru(zr,Et);else{var vr=zr,Sr=zr,Cr=zr;ru(zr,function(e){e.x<vr.x&&(vr=e),e.x>Sr.x&&(Sr=e),e.depth>Cr.depth&&(Cr=e)});var Ur=q(vr,Sr)/2-vr.x,Yr=ne[0]/(Sr.x+q(Sr,vr)/2+Ur),kr=ne[1]/(Cr.depth||1);ru(zr,function(e){e.x=(e.x+Ur)*Yr,e.y=e.depth*kr})}return ar}function Ge(zt){for(var tr={A:null,children:[zt]},ar=[tr],zr;(zr=ar.pop())!=null;)for(var Ir=zr.children,vr,Sr=0,Cr=Ir.length;Sr<Cr;++Sr)ar.push((Ir[Sr]=vr={_:Ir[Sr],parent:zr,children:(vr=Ir[Sr].children)&&vr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Sr}).a=vr);return tr.children[0]}function ht(zt){var tr=zt.children,ar=zt.parent.children,zr=zt.i?ar[zt.i-1]:null;if(tr.length){E0(zt);var Ir=(tr[0].z+tr[tr.length-1].z)/2;zr?(zt.z=zr.z+q(zt._,zr._),zt.m=zt.z-Ir):zt.z=Ir}else zr&&(zt.z=zr.z+q(zt._,zr._));zt.parent.A=mt(zt,zr,zt.parent.A||ar[0])}function at(zt){zt._.x=zt.z+zt.parent.m,zt.m+=zt.parent.m}function mt(zt,tr,ar){if(tr){for(var zr=zt,Ir=zt,vr=tr,Sr=zr.parent.children[0],Cr=zr.m,Ur=Ir.m,Yr=vr.m,kr=Sr.m,e;vr=Ou(vr),zr=cf(zr),vr&&zr;)Sr=cf(Sr),Ir=Ou(Ir),Ir.a=zt,e=vr.z+Yr-zr.z-Cr+q(vr._,zr._),e>0&&(Kf(e0(vr,zt,ar),zt,e),Cr+=e,Ur+=e),Yr+=vr.m,Cr+=zr.m,kr+=Sr.m,Ur+=Ir.m;vr&&!Ou(Ir)&&(Ir.t=vr,Ir.m+=Yr-Ur),zr&&!cf(Sr)&&(Sr.t=zr,Sr.m+=Cr-kr,ar=zt)}return ar}function Et(zt){zt.x*=ne[0],zt.y=zt.depth*ne[1]}return Ne.separation=function(zt){return arguments.length?(q=zt,Ne):q},Ne.size=function(zt){return arguments.length?(Ce=(ne=zt)==null?Et:null,Ne):Ce?null:ne},Ne.nodeSize=function(zt){return arguments.length?(Ce=(ne=zt)==null?null:Et,Ne):Ce?ne:null},sf(Ne,h)};function Zh(h,q){return h.parent==q.parent?1:2}function cf(h){var q=h.children;return q.length?q[0]:h.t}function Ou(h){var q=h.children,ne;return(ne=q.length)?q[ne-1]:h.t}function Kf(h,q,ne){var Ce=ne/(q.i-h.i);q.c-=Ce,q.s+=ne,h.c+=Ce,q.z+=ne,q.m+=ne}function E0(h){for(var q=0,ne=0,Ce=h.children,Ne=Ce.length,Ge;--Ne>=0;)Ge=Ce[Ne],Ge.z+=q,Ge.m+=q,q+=Ge.s+(ne+=Ge.c)}function e0(h,q,ne){return h.a.parent===q.parent?h.a:ne}d.layout.cluster=function(){var h=d.layout.hierarchy().sort(null).value(null),q=Zh,ne=[1,1],Ce=!1;function Ne(Ge,ht){var at=h.call(this,Ge,ht),mt=at[0],Et,zt=0;Uo(mt,function(vr){var Sr=vr.children;Sr&&Sr.length?(vr.x=k0(Sr),vr.y=C0(Sr)):(vr.x=Et?zt+=q(vr,Et):0,vr.y=0,Et=vr)});var tr=Jh(mt),ar=Kh(mt),zr=tr.x-q(tr,ar)/2,Ir=ar.x+q(ar,tr)/2;return Uo(mt,Ce?function(vr){vr.x=(vr.x-mt.x)*ne[0],vr.y=(mt.y-vr.y)*ne[1]}:function(vr){vr.x=(vr.x-zr)/(Ir-zr)*ne[0],vr.y=(1-(mt.y?vr.y/mt.y:1))*ne[1]}),at}return Ne.separation=function(Ge){return arguments.length?(q=Ge,Ne):q},Ne.size=function(Ge){return arguments.length?(Ce=(ne=Ge)==null,Ne):Ce?null:ne},Ne.nodeSize=function(Ge){return arguments.length?(Ce=(ne=Ge)!=null,Ne):Ce?ne:null},sf(Ne,h)};function C0(h){return 1+d.max(h,function(q){return q.y})}function k0(h){return h.reduce(function(q,ne){return q+ne.x},0)/h.length}function Jh(h){var q=h.children;return q&&q.length?Jh(q[0]):h}function Kh(h){var q=h.children,ne;return q&&(ne=q.length)?Kh(q[ne-1]):h}d.layout.treemap=function(){var h=d.layout.hierarchy(),q=Math.round,ne=[1,1],Ce=null,Ne=Si,Ge=!1,ht,at="squarify",mt=.5*(1+Math.sqrt(5));function Et(vr,Sr){for(var Cr=-1,Ur=vr.length,Yr,kr;++Cr<Ur;)kr=(Yr=vr[Cr]).value*(Sr<0?0:Sr),Yr.area=isNaN(kr)||kr<=0?0:kr}function zt(vr){var Sr=vr.children;if(Sr&&Sr.length){var Cr=Ne(vr),Ur=[],Yr=Sr.slice(),kr,e=1/0,r,o=at==="slice"?Cr.dx:at==="dice"?Cr.dy:at==="slice-dice"?vr.depth&1?Cr.dy:Cr.dx:Math.min(Cr.dx,Cr.dy),M;for(Et(Yr,Cr.dx*Cr.dy/vr.value),Ur.area=0;(M=Yr.length)>0;)Ur.push(kr=Yr[M-1]),Ur.area+=kr.area,at!=="squarify"||(r=ar(Ur,o))<=e?(Yr.pop(),e=r):(Ur.area-=Ur.pop().area,zr(Ur,o,Cr,!1),o=Math.min(Cr.dx,Cr.dy),Ur.length=Ur.area=0,e=1/0);Ur.length&&(zr(Ur,o,Cr,!0),Ur.length=Ur.area=0),Sr.forEach(zt)}}function tr(vr){var Sr=vr.children;if(Sr&&Sr.length){var Cr=Ne(vr),Ur=Sr.slice(),Yr,kr=[];for(Et(Ur,Cr.dx*Cr.dy/vr.value),kr.area=0;Yr=Ur.pop();)kr.push(Yr),kr.area+=Yr.area,Yr.z!=null&&(zr(kr,Yr.z?Cr.dx:Cr.dy,Cr,!Ur.length),kr.length=kr.area=0);Sr.forEach(tr)}}function ar(vr,Sr){for(var Cr=vr.area,Ur,Yr=0,kr=1/0,e=-1,r=vr.length;++e<r;)(Ur=vr[e].area)&&(Ur<kr&&(kr=Ur),Ur>Yr&&(Yr=Ur));return Cr*=Cr,Sr*=Sr,Cr?Math.max(Sr*Yr*mt/Cr,Cr/(Sr*kr*mt)):1/0}function zr(vr,Sr,Cr,Ur){var Yr=-1,kr=vr.length,e=Cr.x,r=Cr.y,o=Sr?q(vr.area/Sr):0,M;if(Sr==Cr.dx){for((Ur||o>Cr.dy)&&(o=Cr.dy);++Yr<kr;)M=vr[Yr],M.x=e,M.y=r,M.dy=o,e+=M.dx=Math.min(Cr.x+Cr.dx-e,o?q(M.area/o):0);M.z=!0,M.dx+=Cr.x+Cr.dx-e,Cr.y+=o,Cr.dy-=o}else{for((Ur||o>Cr.dx)&&(o=Cr.dx);++Yr<kr;)M=vr[Yr],M.x=e,M.y=r,M.dx=o,r+=M.dy=Math.min(Cr.y+Cr.dy-r,o?q(M.area/o):0);M.z=!1,M.dy+=Cr.y+Cr.dy-r,Cr.x+=o,Cr.dx-=o}}function Ir(vr){var Sr=ht||h(vr),Cr=Sr[0];return Cr.x=Cr.y=0,Cr.value?(Cr.dx=ne[0],Cr.dy=ne[1]):Cr.dx=Cr.dy=0,ht&&h.revalue(Cr),Et([Cr],Cr.dx*Cr.dy/Cr.value),(ht?tr:zt)(Cr),Ge&&(ht=Sr),Sr}return Ir.size=function(vr){return arguments.length?(ne=vr,Ir):ne},Ir.padding=function(vr){if(!arguments.length)return Ce;function Sr(Yr){var kr=vr.call(Ir,Yr,Yr.depth);return kr==null?Si(Yr):Qf(Yr,typeof kr=="number"?[kr,kr,kr,kr]:kr)}function Cr(Yr){return Qf(Yr,vr)}var Ur;return Ne=(Ce=vr)==null?Si:(Ur=typeof vr)=="function"?Sr:(Ur==="number"&&(vr=[vr,vr,vr,vr]),Cr),Ir},Ir.round=function(vr){return arguments.length?(q=vr?Math.round:Number,Ir):q!=Number},Ir.sticky=function(vr){return arguments.length?(Ge=vr,ht=null,Ir):Ge},Ir.ratio=function(vr){return arguments.length?(mt=vr,Ir):mt},Ir.mode=function(vr){return arguments.length?(at=vr+"",Ir):at},sf(Ir,h)};function Si(h){return{x:h.x,y:h.y,dx:h.dx,dy:h.dy}}function Qf(h,q){var ne=h.x+q[3],Ce=h.y+q[0],Ne=h.dx-q[1]-q[3],Ge=h.dy-q[0]-q[2];return Ne<0&&(ne+=Ne/2,Ne=0),Ge<0&&(Ce+=Ge/2,Ge=0),{x:ne,y:Ce,dx:Ne,dy:Ge}}d.random={normal:function(h,q){var ne=arguments.length;return ne<2&&(q=1),ne<1&&(h=0),function(){var Ce,Ne,Ge;do Ce=Math.random()*2-1,Ne=Math.random()*2-1,Ge=Ce*Ce+Ne*Ne;while(!Ge||Ge>1);return h+q*Ce*Math.sqrt(-2*Math.log(Ge)/Ge)}},logNormal:function(){var h=d.random.normal.apply(d,arguments);return function(){return Math.exp(h())}},bates:function(h){var q=d.random.irwinHall(h);return function(){return q()/h}},irwinHall:function(h){return function(){for(var q=0,ne=0;ne<h;ne++)q+=Math.random();return q}}},d.scale={};function co(h){var q=h[0],ne=h[h.length-1];return q<ne?[q,ne]:[ne,q]}function eh(h){return h.rangeExtent?h.rangeExtent():co(h.range())}function t0(h,q,ne,Ce){var Ne=ne(h[0],h[1]),Ge=Ce(q[0],q[1]);return function(ht){return Ge(Ne(ht))}}function Qh(h,q){var ne=0,Ce=h.length-1,Ne=h[ne],Ge=h[Ce],ht;return Ge<Ne&&(ht=ne,ne=Ce,Ce=ht,ht=Ne,Ne=Ge,Ge=ht),h[ne]=q.floor(Ne),h[Ce]=q.ceil(Ge),h}function th(h){return h?{floor:function(q){return Math.floor(q/h)*h},ceil:function(q){return Math.ceil(q/h)*h}}:ed}var ed={floor:Me,ceil:Me};function rh(h,q,ne,Ce){var Ne=[],Ge=[],ht=0,at=Math.min(h.length,q.length)-1;for(h[at]<h[0]&&(h=h.slice().reverse(),q=q.slice().reverse());++ht<=at;)Ne.push(ne(h[ht-1],h[ht])),Ge.push(Ce(q[ht-1],q[ht]));return function(mt){var Et=d.bisect(h,mt,1,at)-1;return Ge[Et](Ne[Et](mt))}}d.scale.linear=function(){return rd([0,1],[0,1],Jo,!1)};function rd(h,q,ne,Ce){var Ne,Ge;function ht(){var mt=Math.min(h.length,q.length)>2?rh:t0,Et=Ce?Ud:Hd;return Ne=mt(h,q,Et,ne),Ge=mt(q,h,Et,Jo),at}function at(mt){return Ne(mt)}return at.invert=function(mt){return Ge(mt)},at.domain=function(mt){return arguments.length?(h=mt.map(Number),ht()):h},at.range=function(mt){return arguments.length?(q=mt,ht()):q},at.rangeRound=function(mt){return at.range(mt).interpolate(jh)},at.clamp=function(mt){return arguments.length?(Ce=mt,ht()):Ce},at.interpolate=function(mt){return arguments.length?(ne=mt,ht()):ne},at.ticks=function(mt){return nd(h,mt)},at.tickFormat=function(mt,Et){return d3_scale_linearTickFormat(h,mt,Et)},at.nice=function(mt){return ah(h,mt),ht()},at.copy=function(){return rd(h,q,ne,Ce)},ht()}function ad(h,q){return d.rebind(h,q,"range","rangeRound","interpolate","clamp")}function ah(h,q){return Qh(h,th(ff(h,q)[2])),Qh(h,th(ff(h,q)[2])),h}function ff(h,q){q==null&&(q=10);var ne=co(h),Ce=ne[1]-ne[0],Ne=Math.pow(10,Math.floor(Math.log(Ce/q)/Math.LN10)),Ge=q/Ce*Ne;return Ge<=.15?Ne*=10:Ge<=.35?Ne*=5:Ge<=.75&&(Ne*=2),ne[0]=Math.ceil(ne[0]/Ne)*Ne,ne[1]=Math.floor(ne[1]/Ne)*Ne+Ne*.5,ne[2]=Ne,ne}function nd(h,q){return d.range.apply(d,ff(h,q))}d.scale.log=function(){return od(d.scale.linear().domain([0,1]),10,!0,[1,10])};function od(h,q,ne,Ce){function Ne(at){return(ne?Math.log(at<0?0:at):-Math.log(at>0?0:-at))/Math.log(q)}function Ge(at){return ne?Math.pow(q,at):-Math.pow(q,-at)}function ht(at){return h(Ne(at))}return ht.invert=function(at){return Ge(h.invert(at))},ht.domain=function(at){return arguments.length?(ne=at[0]>=0,h.domain((Ce=at.map(Number)).map(Ne)),ht):Ce},ht.base=function(at){return arguments.length?(q=+at,h.domain(Ce.map(Ne)),ht):q},ht.nice=function(){var at=Qh(Ce.map(Ne),ne?Math:R0);return h.domain(at),Ce=at.map(Ge),ht},ht.ticks=function(){var at=co(Ce),mt=[],Et=at[0],zt=at[1],tr=Math.floor(Ne(Et)),ar=Math.ceil(Ne(zt)),zr=q%1?2:q;if(isFinite(ar-tr)){if(ne){for(;tr<ar;tr++)for(var Ir=1;Ir<zr;Ir++)mt.push(Ge(tr)*Ir);mt.push(Ge(tr))}else for(mt.push(Ge(tr));tr++<ar;)for(var Ir=zr-1;Ir>0;Ir--)mt.push(Ge(tr)*Ir);for(tr=0;mt[tr]<Et;tr++);for(ar=mt.length;mt[ar-1]>zt;ar--);mt=mt.slice(tr,ar)}return mt},ht.copy=function(){return od(h.copy(),q,ne,Ce)},ad(ht,h)}var R0={floor:function(h){return-Math.ceil(-h)},ceil:function(h){return-Math.floor(-h)}};d.scale.pow=function(){return sd(d.scale.linear(),1,[0,1])};function sd(h,q,ne){var Ce=nh(q),Ne=nh(1/q);function Ge(ht){return h(Ce(ht))}return Ge.invert=function(ht){return Ne(h.invert(ht))},Ge.domain=function(ht){return arguments.length?(h.domain((ne=ht.map(Number)).map(Ce)),Ge):ne},Ge.ticks=function(ht){return nd(ne,ht)},Ge.tickFormat=function(ht,at){return d3_scale_linearTickFormat(ne,ht,at)},Ge.nice=function(ht){return Ge.domain(ah(ne,ht))},Ge.exponent=function(ht){return arguments.length?(Ce=nh(q=ht),Ne=nh(1/q),h.domain(ne.map(Ce)),Ge):q},Ge.copy=function(){return sd(h.copy(),q,ne)},ad(Ge,h)}function nh(h){return function(q){return q<0?-Math.pow(-q,h):Math.pow(q,h)}}d.scale.sqrt=function(){return d.scale.pow().exponent(.5)},d.scale.ordinal=function(){return r0([],{t:"range",a:[[]]})};function r0(h,q){var ne,Ce,Ne;function Ge(at){return Ce[((ne.get(at)||(q.t==="range"?ne.set(at,h.push(at)):NaN))-1)%Ce.length]}function ht(at,mt){return d.range(h.length).map(function(Et){return at+mt*Et})}return Ge.domain=function(at){if(!arguments.length)return h;h=[],ne=new te;for(var mt=-1,Et=at.length,zt;++mt<Et;)ne.has(zt=at[mt])||ne.set(zt,h.push(zt));return Ge[q.t].apply(Ge,q.a)},Ge.range=function(at){return arguments.length?(Ce=at,Ne=0,q={t:"range",a:arguments},Ge):Ce},Ge.rangePoints=function(at,mt){arguments.length<2&&(mt=0);var Et=at[0],zt=at[1],tr=h.length<2?(Et=(Et+zt)/2,0):(zt-Et)/(h.length-1+mt);return Ce=ht(Et+tr*mt/2,tr),Ne=0,q={t:"rangePoints",a:arguments},Ge},Ge.rangeRoundPoints=function(at,mt){arguments.length<2&&(mt=0);var Et=at[0],zt=at[1],tr=h.length<2?(Et=zt=Math.round((Et+zt)/2),0):(zt-Et)/(h.length-1+mt)|0;return Ce=ht(Et+Math.round(tr*mt/2+(zt-Et-(h.length-1+mt)*tr)/2),tr),Ne=0,q={t:"rangeRoundPoints",a:arguments},Ge},Ge.rangeBands=function(at,mt,Et){arguments.length<2&&(mt=0),arguments.length<3&&(Et=mt);var zt=at[1]<at[0],tr=at[zt-0],ar=at[1-zt],zr=(ar-tr)/(h.length-mt+2*Et);return Ce=ht(tr+zr*Et,zr),zt&&Ce.reverse(),Ne=zr*(1-mt),q={t:"rangeBands",a:arguments},Ge},Ge.rangeRoundBands=function(at,mt,Et){arguments.length<2&&(mt=0),arguments.length<3&&(Et=mt);var zt=at[1]<at[0],tr=at[zt-0],ar=at[1-zt],zr=Math.floor((ar-tr)/(h.length-mt+2*Et));return Ce=ht(tr+Math.round((ar-tr-(h.length-mt)*zr)/2),zr),zt&&Ce.reverse(),Ne=Math.round(zr*(1-mt)),q={t:"rangeRoundBands",a:arguments},Ge},Ge.rangeBand=function(){return Ne},Ge.rangeExtent=function(){return co(q.a[0])},Ge.copy=function(){return r0(h,q)},Ge.domain(h)}d.scale.category10=function(){return d.scale.ordinal().range(nu)},d.scale.category20=function(){return d.scale.ordinal().range(a0)},d.scale.category20b=function(){return d.scale.ordinal().range(n0)},d.scale.category20c=function(){return d.scale.ordinal().range(ld)};var nu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ht),a0=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ht),n0=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ht),ld=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ht);d.scale.quantile=function(){return i0([],[])};function i0(h,q){var ne;function Ce(){var Ge=0,ht=q.length;for(ne=[];++Ge<ht;)ne[Ge-1]=d.quantile(h,Ge/ht);return Ne}function Ne(Ge){if(!isNaN(Ge=+Ge))return q[d.bisect(ne,Ge)]}return Ne.domain=function(Ge){return arguments.length?(h=Ge.map(X).filter(N).sort(z),Ce()):h},Ne.range=function(Ge){return arguments.length?(q=Ge,Ce()):q},Ne.quantiles=function(){return ne},Ne.invertExtent=function(Ge){return Ge=q.indexOf(Ge),Ge<0?[NaN,NaN]:[Ge>0?ne[Ge-1]:h[0],Ge<ne.length?ne[Ge]:h[h.length-1]]},Ne.copy=function(){return i0(h,q)},Ce()}d.scale.quantize=function(){return o0(0,1,[0,1])};function o0(h,q,ne){var Ce,Ne;function Ge(at){return ne[Math.max(0,Math.min(Ne,Math.floor(Ce*(at-h))))]}function ht(){return Ce=ne.length/(q-h),Ne=ne.length-1,Ge}return Ge.domain=function(at){return arguments.length?(h=+at[0],q=+at[at.length-1],ht()):[h,q]},Ge.range=function(at){return arguments.length?(ne=at,ht()):ne},Ge.invertExtent=function(at){return at=ne.indexOf(at),at=at<0?NaN:at/Ce+h,[at,at+1/Ce]},Ge.copy=function(){return o0(h,q,ne)},ht()}d.scale.threshold=function(){return ud([.5],[0,1])};function ud(h,q){function ne(Ce){if(Ce<=Ce)return q[d.bisect(h,Ce)]}return ne.domain=function(Ce){return arguments.length?(h=Ce,ne):h},ne.range=function(Ce){return arguments.length?(q=Ce,ne):q},ne.invertExtent=function(Ce){return Ce=q.indexOf(Ce),[h[Ce-1],h[Ce]]},ne.copy=function(){return ud(h,q)},ne}d.scale.identity=function(){return ih([0,1])};function ih(h){function q(ne){return+ne}return q.invert=q,q.domain=q.range=function(ne){return arguments.length?(h=ne.map(q),q):h},q.ticks=function(ne){return nd(h,ne)},q.tickFormat=function(ne,Ce){return d3_scale_linearTickFormat(h,ne,Ce)},q.copy=function(){return ih(h)},q}d.svg={};function cd(){return 0}d.svg.arc=function(){var h=_s,q=fd,ne=cd,Ce=oh,Ne=hd,Ge=dd,ht=s0;function at(){var Et=Math.max(0,+h.apply(this,arguments)),zt=Math.max(0,+q.apply(this,arguments)),tr=Ne.apply(this,arguments)-ut,ar=Ge.apply(this,arguments)-ut,zr=Math.abs(ar-tr),Ir=tr>ar?0:1;if(zt<Et&&(vr=zt,zt=Et,Et=vr),zr>=ct)return mt(zt,Ir)+(Et?mt(Et,1-Ir):"")+"Z";var vr,Sr,Cr,Ur,Yr=0,kr=0,e,r,o,M,ie,xe,dt,St,br=[];if((Ur=(+ht.apply(this,arguments)||0)/2)&&(Cr=Ce===oh?Math.sqrt(Et*Et+zt*zt):+Ce.apply(this,arguments),Ir||(kr*=-1),zt&&(kr=ir(Cr/zt*Math.sin(Ur))),Et&&(Yr=ir(Cr/Et*Math.sin(Ur)))),zt){e=zt*Math.cos(tr+kr),r=zt*Math.sin(tr+kr),o=zt*Math.cos(ar-kr),M=zt*Math.sin(ar-kr);var Zr=Math.abs(ar-tr-2*kr)<=Le?0:1;if(kr&&iu(e,r,o,M)===Ir^Zr){var xa=(tr+ar)/2;e=zt*Math.cos(xa),r=zt*Math.sin(xa),o=M=null}}else e=r=0;if(Et){ie=Et*Math.cos(ar-Yr),xe=Et*Math.sin(ar-Yr),dt=Et*Math.cos(tr+Yr),St=Et*Math.sin(tr+Yr);var _a=Math.abs(tr-ar+2*Yr)<=Le?0:1;if(Yr&&iu(ie,xe,dt,St)===1-Ir^_a){var Mr=(tr+ar)/2;ie=Et*Math.cos(Mr),xe=Et*Math.sin(Mr),dt=St=null}}else ie=xe=0;if(zr>Mt&&(vr=Math.min(Math.abs(zt-Et)/2,+ne.apply(this,arguments)))>.001){Sr=Et<zt^Ir?0:1;var Kr=vr,Ha=vr;if(zr<Le){var tn=dt==null?[ie,xe]:o==null?[e,r]:wi([e,r],[dt,St],[o,M],[ie,xe]),Pn=e-tn[0],Wr=r-tn[1],Fr=o-tn[0],na=M-tn[1],ka=1/Math.sin(Math.acos((Pn*Fr+Wr*na)/(Math.sqrt(Pn*Pn+Wr*Wr)*Math.sqrt(Fr*Fr+na*na)))/2),gn=Math.sqrt(tn[0]*tn[0]+tn[1]*tn[1]);Ha=Math.min(vr,(Et-gn)/(ka-1)),Kr=Math.min(vr,(zt-gn)/(ka+1))}if(o!=null){var qn=Go(dt==null?[ie,xe]:[dt,St],[e,r],zt,Kr,Ir),fn=Go([o,M],[ie,xe],zt,Kr,Ir);vr===Kr?br.push("M",qn[0],"A",Kr,",",Kr," 0 0,",Sr," ",qn[1],"A",zt,",",zt," 0 ",1-Ir^iu(qn[1][0],qn[1][1],fn[1][0],fn[1][1]),",",Ir," ",fn[1],"A",Kr,",",Kr," 0 0,",Sr," ",fn[0]):br.push("M",qn[0],"A",Kr,",",Kr," 0 1,",Sr," ",fn[0])}else br.push("M",e,",",r);if(dt!=null){var Dn=Go([e,r],[dt,St],Et,-Ha,Ir),Zn=Go([ie,xe],o==null?[e,r]:[o,M],Et,-Ha,Ir);vr===Ha?br.push("L",Zn[0],"A",Ha,",",Ha," 0 0,",Sr," ",Zn[1],"A",Et,",",Et," 0 ",Ir^iu(Zn[1][0],Zn[1][1],Dn[1][0],Dn[1][1]),",",1-Ir," ",Dn[1],"A",Ha,",",Ha," 0 0,",Sr," ",Dn[0]):br.push("L",Zn[0],"A",Ha,",",Ha," 0 0,",Sr," ",Dn[0])}else br.push("L",ie,",",xe)}else br.push("M",e,",",r),o!=null&&br.push("A",zt,",",zt," 0 ",Zr,",",Ir," ",o,",",M),br.push("L",ie,",",xe),dt!=null&&br.push("A",Et,",",Et," 0 ",_a,",",1-Ir," ",dt,",",St);return br.push("Z"),br.join("")}function mt(Et,zt){return"M0,"+Et+"A"+Et+","+Et+" 0 1,"+zt+" 0,"+-Et+"A"+Et+","+Et+" 0 1,"+zt+" 0,"+Et}return at.innerRadius=function(Et){return arguments.length?(h=Or(Et),at):h},at.outerRadius=function(Et){return arguments.length?(q=Or(Et),at):q},at.cornerRadius=function(Et){return arguments.length?(ne=Or(Et),at):ne},at.padRadius=function(Et){return arguments.length?(Ce=Et==oh?oh:Or(Et),at):Ce},at.startAngle=function(Et){return arguments.length?(Ne=Or(Et),at):Ne},at.endAngle=function(Et){return arguments.length?(Ge=Or(Et),at):Ge},at.padAngle=function(Et){return arguments.length?(ht=Or(Et),at):ht},at.centroid=function(){var Et=(+h.apply(this,arguments)+ +q.apply(this,arguments))/2,zt=(+Ne.apply(this,arguments)+ +Ge.apply(this,arguments))/2-ut;return[Math.cos(zt)*Et,Math.sin(zt)*Et]},at};var oh="auto";function _s(h){return h.innerRadius}function fd(h){return h.outerRadius}function hd(h){return h.startAngle}function dd(h){return h.endAngle}function s0(h){return h&&h.padAngle}function iu(h,q,ne,Ce){return(h-ne)*q-(q-Ce)*h>0?0:1}function Go(h,q,ne,Ce,Ne){var Ge=h[0]-q[0],ht=h[1]-q[1],at=(Ne?Ce:-Ce)/Math.sqrt(Ge*Ge+ht*ht),mt=at*ht,Et=-at*Ge,zt=h[0]+mt,tr=h[1]+Et,ar=q[0]+mt,zr=q[1]+Et,Ir=(zt+ar)/2,vr=(tr+zr)/2,Sr=ar-zt,Cr=zr-tr,Ur=Sr*Sr+Cr*Cr,Yr=ne-Ce,kr=zt*zr-ar*tr,e=(Cr<0?-1:1)*Math.sqrt(Math.max(0,Yr*Yr*Ur-kr*kr)),r=(kr*Cr-Sr*e)/Ur,o=(-kr*Sr-Cr*e)/Ur,M=(kr*Cr+Sr*e)/Ur,ie=(-kr*Sr+Cr*e)/Ur,xe=r-Ir,dt=o-vr,St=M-Ir,br=ie-vr;return xe*xe+dt*dt>St*St+br*br&&(r=M,o=ie),[[r-mt,o-Et],[r*ne/Yr,o*ne/Yr]]}function vd(){return!0}function hf(h){var q=Rn,ne=oi,Ce=vd,Ne=Us,Ge=Ne.key,ht=.7;function at(mt){var Et=[],zt=[],tr=-1,ar=mt.length,zr,Ir=Or(q),vr=Or(ne);function Sr(){Et.push("M",Ne(h(zt),ht))}for(;++tr<ar;)Ce.call(this,zr=mt[tr],tr)?zt.push([+Ir.call(this,zr,tr),+vr.call(this,zr,tr)]):zt.length&&(Sr(),zt=[]);return zt.length&&Sr(),Et.length?Et.join(""):null}return at.x=function(mt){return arguments.length?(q=mt,at):q},at.y=function(mt){return arguments.length?(ne=mt,at):ne},at.defined=function(mt){return arguments.length?(Ce=mt,at):Ce},at.interpolate=function(mt){return arguments.length?(typeof mt=="function"?Ge=Ne=mt:Ge=(Ne=Hs.get(mt)||Us).key,at):Ge},at.tension=function(mt){return arguments.length?(ht=mt,at):ht},at}d.svg.line=function(){return hf(Me)};var Hs=d.map({linear:Us,"linear-closed":l0,step:pc,"step-before":sh,"step-after":pd,basis:u0,"basis-open":c0,"basis-closed":mc,bundle:df,cardinal:L0,"cardinal-open":D0,"cardinal-closed":z0,monotone:ch});Hs.forEach(function(h,q){q.key=h,q.closed=/-closed$/.test(h)});function Us(h){return h.length>1?h.join("L"):h+"Z"}function l0(h){return h.join("L")+"Z"}function pc(h){for(var q=0,ne=h.length,Ce=h[0],Ne=[Ce[0],",",Ce[1]];++q<ne;)Ne.push("H",(Ce[0]+(Ce=h[q])[0])/2,"V",Ce[1]);return ne>1&&Ne.push("H",Ce[0]),Ne.join("")}function sh(h){for(var q=0,ne=h.length,Ce=h[0],Ne=[Ce[0],",",Ce[1]];++q<ne;)Ne.push("V",(Ce=h[q])[1],"H",Ce[0]);return Ne.join("")}function pd(h){for(var q=0,ne=h.length,Ce=h[0],Ne=[Ce[0],",",Ce[1]];++q<ne;)Ne.push("H",(Ce=h[q])[0],"V",Ce[1]);return Ne.join("")}function D0(h,q){return h.length<4?Us(h):h[1]+lh(h.slice(1,-1),md(h,q))}function z0(h,q){return h.length<3?l0(h):h[0]+lh((h.push(h[0]),h),md([h[h.length-2]].concat(h,[h[1]]),q))}function L0(h,q){return h.length<3?Us(h):h[0]+lh(h,md(h,q))}function lh(h,q){if(q.length<1||h.length!=q.length&&h.length!=q.length+2)return Us(h);var ne=h.length!=q.length,Ce="",Ne=h[0],Ge=h[1],ht=q[0],at=ht,mt=1;if(ne&&(Ce+="Q"+(Ge[0]-ht[0]*2/3)+","+(Ge[1]-ht[1]*2/3)+","+Ge[0]+","+Ge[1],Ne=h[1],mt=2),q.length>1){at=q[1],Ge=h[mt],mt++,Ce+="C"+(Ne[0]+ht[0])+","+(Ne[1]+ht[1])+","+(Ge[0]-at[0])+","+(Ge[1]-at[1])+","+Ge[0]+","+Ge[1];for(var Et=2;Et<q.length;Et++,mt++)Ge=h[mt],at=q[Et],Ce+="S"+(Ge[0]-at[0])+","+(Ge[1]-at[1])+","+Ge[0]+","+Ge[1]}if(ne){var zt=h[mt];Ce+="Q"+(Ge[0]+at[0]*2/3)+","+(Ge[1]+at[1]*2/3)+","+zt[0]+","+zt[1]}return Ce}function md(h,q){for(var ne=[],Ce=(1-q)/2,Ne,Ge=h[0],ht=h[1],at=1,mt=h.length;++at<mt;)Ne=Ge,Ge=ht,ht=h[at],ne.push([Ce*(ht[0]-Ne[0]),Ce*(ht[1]-Ne[1])]);return ne}function u0(h){if(h.length<3)return Us(h);var q=1,ne=h.length,Ce=h[0],Ne=Ce[0],Ge=Ce[1],ht=[Ne,Ne,Ne,(Ce=h[1])[0]],at=[Ge,Ge,Ge,Ce[1]],mt=[Ne,",",Ge,"L",us(ws,ht),",",us(ws,at)];for(h.push(h[ne-1]);++q<=ne;)Ce=h[q],ht.shift(),ht.push(Ce[0]),at.shift(),at.push(Ce[1]),uh(mt,ht,at);return h.pop(),mt.push("L",Ce),mt.join("")}function c0(h){if(h.length<4)return Us(h);for(var q=[],ne=-1,Ce=h.length,Ne,Ge=[0],ht=[0];++ne<3;)Ne=h[ne],Ge.push(Ne[0]),ht.push(Ne[1]);for(q.push(us(ws,Ge)+","+us(ws,ht)),--ne;++ne<Ce;)Ne=h[ne],Ge.shift(),Ge.push(Ne[0]),ht.shift(),ht.push(Ne[1]),uh(q,Ge,ht);return q.join("")}function mc(h){for(var q,ne=-1,Ce=h.length,Ne=Ce+4,Ge,ht=[],at=[];++ne<4;)Ge=h[ne%Ce],ht.push(Ge[0]),at.push(Ge[1]);for(q=[us(ws,ht),",",us(ws,at)],--ne;++ne<Ne;)Ge=h[ne%Ce],ht.shift(),ht.push(Ge[0]),at.shift(),at.push(Ge[1]),uh(q,ht,at);return q.join("")}function df(h,q){var ne=h.length-1;if(ne)for(var Ce=h[0][0],Ne=h[0][1],Ge=h[ne][0]-Ce,ht=h[ne][1]-Ne,at=-1,mt,Et;++at<=ne;)mt=h[at],Et=at/ne,mt[0]=q*mt[0]+(1-q)*(Ce+Et*Ge),mt[1]=q*mt[1]+(1-q)*(Ne+Et*ht);return u0(h)}function us(h,q){return h[0]*q[0]+h[1]*q[1]+h[2]*q[2]+h[3]*q[3]}var f0=[0,2/3,1/3,0],Pu=[0,1/3,2/3,0],ws=[0,1/6,2/3,1/6];function uh(h,q,ne){h.push("C",us(f0,q),",",us(f0,ne),",",us(Pu,q),",",us(Pu,ne),",",us(ws,q),",",us(ws,ne))}function gc(h,q){return(q[1]-h[1])/(q[0]-h[0])}function gd(h){for(var q=0,ne=h.length-1,Ce=[],Ne=h[0],Ge=h[1],ht=Ce[0]=gc(Ne,Ge);++q<ne;)Ce[q]=(ht+(ht=gc(Ne=Ge,Ge=h[q+1])))/2;return Ce[q]=ht,Ce}function yd(h){for(var q=[],ne,Ce,Ne,Ge,ht=gd(h),at=-1,mt=h.length-1;++at<mt;)ne=gc(h[at],h[at+1]),_(ne)<Mt?ht[at]=ht[at+1]=0:(Ce=ht[at]/ne,Ne=ht[at+1]/ne,Ge=Ce*Ce+Ne*Ne,Ge>9&&(Ge=ne*3/Math.sqrt(Ge),ht[at]=Ge*Ce,ht[at+1]=Ge*Ne));for(at=-1;++at<=mt;)Ge=(h[Math.min(mt,at+1)][0]-h[Math.max(0,at-1)][0])/(6*(1+ht[at]*ht[at])),q.push([Ge||0,ht[at]*Ge||0]);return q}function ch(h){return h.length<3?Us(h):h[0]+lh(h,yd(h))}d.svg.line.radial=function(){var h=hf(bd);return h.radius=h.x,delete h.x,h.angle=h.y,delete h.y,h};function bd(h){for(var q,ne=-1,Ce=h.length,Ne,Ge;++ne<Ce;)q=h[ne],Ne=q[0],Ge=q[1]-ut,q[0]=Ne*Math.cos(Ge),q[1]=Ne*Math.sin(Ge);return h}function xd(h){var q=Rn,ne=Rn,Ce=0,Ne=oi,Ge=vd,ht=Us,at=ht.key,mt=ht,Et="L",zt=.7;function tr(ar){var zr=[],Ir=[],vr=[],Sr=-1,Cr=ar.length,Ur,Yr=Or(q),kr=Or(Ce),e=q===ne?function(){return o}:Or(ne),r=Ce===Ne?function(){return M}:Or(Ne),o,M;function ie(){zr.push("M",ht(h(vr),zt),Et,mt(h(Ir.reverse()),zt),"Z")}for(;++Sr<Cr;)Ge.call(this,Ur=ar[Sr],Sr)?(Ir.push([o=+Yr.call(this,Ur,Sr),M=+kr.call(this,Ur,Sr)]),vr.push([+e.call(this,Ur,Sr),+r.call(this,Ur,Sr)])):Ir.length&&(ie(),Ir=[],vr=[]);return Ir.length&&ie(),zr.length?zr.join(""):null}return tr.x=function(ar){return arguments.length?(q=ne=ar,tr):ne},tr.x0=function(ar){return arguments.length?(q=ar,tr):q},tr.x1=function(ar){return arguments.length?(ne=ar,tr):ne},tr.y=function(ar){return arguments.length?(Ce=Ne=ar,tr):Ne},tr.y0=function(ar){return arguments.length?(Ce=ar,tr):Ce},tr.y1=function(ar){return arguments.length?(Ne=ar,tr):Ne},tr.defined=function(ar){return arguments.length?(Ge=ar,tr):Ge},tr.interpolate=function(ar){return arguments.length?(typeof ar=="function"?at=ht=ar:at=(ht=Hs.get(ar)||Us).key,mt=ht.reverse||ht,Et=ht.closed?"M":"L",tr):at},tr.tension=function(ar){return arguments.length?(zt=ar,tr):zt},tr}sh.reverse=pd,pd.reverse=sh,d.svg.area=function(){return xd(Me)},d.svg.area.radial=function(){var h=xd(bd);return h.radius=h.x,delete h.x,h.innerRadius=h.x0,delete h.x0,h.outerRadius=h.x1,delete h.x1,h.angle=h.y,delete h.y,h.startAngle=h.y0,delete h.y0,h.endAngle=h.y1,delete h.y1,h};function h0(h){return h.source}function _d(h){return h.target}d.svg.chord=function(){var h=h0,q=_d,ne=N0,Ce=hd,Ne=dd;function Ge(zt,tr){var ar=ht(this,h,zt,tr),zr=ht(this,q,zt,tr);return"M"+ar.p0+mt(ar.r,ar.p1,ar.a1-ar.a0)+(at(ar,zr)?Et(ar.r,ar.p1,ar.r,ar.p0):Et(ar.r,ar.p1,zr.r,zr.p0)+mt(zr.r,zr.p1,zr.a1-zr.a0)+Et(zr.r,zr.p1,ar.r,ar.p0))+"Z"}function ht(zt,tr,ar,zr){var Ir=tr.call(zt,ar,zr),vr=ne.call(zt,Ir,zr),Sr=Ce.call(zt,Ir,zr)-ut,Cr=Ne.call(zt,Ir,zr)-ut;return{r:vr,a0:Sr,a1:Cr,p0:[vr*Math.cos(Sr),vr*Math.sin(Sr)],p1:[vr*Math.cos(Cr),vr*Math.sin(Cr)]}}function at(zt,tr){return zt.a0==tr.a0&&zt.a1==tr.a1}function mt(zt,tr,ar){return"A"+zt+","+zt+" 0 "+ +(ar>Le)+",1 "+tr}function Et(zt,tr,ar,zr){return"Q 0,0 "+zr}return Ge.radius=function(zt){return arguments.length?(ne=Or(zt),Ge):ne},Ge.source=function(zt){return arguments.length?(h=Or(zt),Ge):h},Ge.target=function(zt){return arguments.length?(q=Or(zt),Ge):q},Ge.startAngle=function(zt){return arguments.length?(Ce=Or(zt),Ge):Ce},Ge.endAngle=function(zt){return arguments.length?(Ne=Or(zt),Ge):Ne},Ge};function N0(h){return h.radius}d.svg.diagonal=function(){var h=h0,q=_d,ne=fh;function Ce(Ne,Ge){var ht=h.call(this,Ne,Ge),at=q.call(this,Ne,Ge),mt=(ht.y+at.y)/2,Et=[ht,{x:ht.x,y:mt},{x:at.x,y:mt},at];return Et=Et.map(ne),"M"+Et[0]+"C"+Et[1]+" "+Et[2]+" "+Et[3]}return Ce.source=function(Ne){return arguments.length?(h=Or(Ne),Ce):h},Ce.target=function(Ne){return arguments.length?(q=Or(Ne),Ce):q},Ce.projection=function(Ne){return arguments.length?(ne=Ne,Ce):ne},Ce};function fh(h){return[h.x,h.y]}d.svg.diagonal.radial=function(){var h=d.svg.diagonal(),q=fh,ne=h.projection;return h.projection=function(Ce){return arguments.length?ne(O0(q=Ce)):q},h};function O0(h){return function(){var q=h.apply(this,arguments),ne=q[0],Ce=q[1]-ut;return[ne*Math.cos(Ce),ne*Math.sin(Ce)]}}d.svg.symbol=function(){var h=dh,q=hh;function ne(Ce,Ne){return(d0.get(h.call(this,Ce,Ne))||vf)(q.call(this,Ce,Ne))}return ne.type=function(Ce){return arguments.length?(h=Or(Ce),ne):h},ne.size=function(Ce){return arguments.length?(q=Or(Ce),ne):q},ne};function hh(){return 64}function dh(){return"circle"}function vf(h){var q=Math.sqrt(h/Le);return"M0,"+q+"A"+q+","+q+" 0 1,1 0,"+-q+"A"+q+","+q+" 0 1,1 0,"+q+"Z"}var d0=d.map({circle:vf,cross:function(h){var q=Math.sqrt(h/5)/2;return"M"+-3*q+","+-q+"H"+-q+"V"+-3*q+"H"+q+"V"+-q+"H"+3*q+"V"+q+"H"+q+"V"+3*q+"H"+-q+"V"+q+"H"+-3*q+"Z"},diamond:function(h){var q=Math.sqrt(h/(2*v0)),ne=q*v0;return"M0,"+-q+"L"+ne+",0 0,"+q+" "+-ne+",0Z"},square:function(h){var q=Math.sqrt(h)/2;return"M"+-q+","+-q+"L"+q+","+-q+" "+q+","+q+" "+-q+","+q+"Z"},"triangle-down":function(h){var q=Math.sqrt(h/ou),ne=q*ou/2;return"M0,"+ne+"L"+q+","+-ne+" "+-q+","+-ne+"Z"},"triangle-up":function(h){var q=Math.sqrt(h/ou),ne=q*ou/2;return"M0,"+-ne+"L"+q+","+ne+" "+-q+","+ne+"Z"}});d.svg.symbolTypes=d0.keys();var ou=Math.sqrt(3),v0=Math.tan(30*Pt);Ae.transition=function(h){for(var q=su||++vh,ne=Ad(h),Ce=[],Ne,Ge,ht=mf||{time:Date.now(),ease:Ko,delay:0,duration:250},at=-1,mt=this.length;++at<mt;){Ce.push(Ne=[]);for(var Et=this[at],zt=-1,tr=Et.length;++zt<tr;)(Ge=Et[zt])&&xc(Ge,zt,ne,q,ht),Ne.push(Ge)}return yc(Ce,ne,q)},Ae.interrupt=function(h){return this.each(h==null?pf:wd(Ad(h)))};var pf=wd(Ad());function wd(h){return function(){var q,ne,Ce;(q=this[h])&&(Ce=q[ne=q.active])&&(Ce.timer.c=null,Ce.timer.t=NaN,--q.count?delete q[ne]:delete this[h],q.active+=.5,Ce.event&&Ce.event.interrupt.call(this,this.__data__,Ce.index))}}function yc(h,q,ne){return _e(h,to),h.namespace=q,h.id=ne,h}var to=[],vh=0,su,mf;to.call=Ae.call,to.empty=Ae.empty,to.node=Ae.node,to.size=Ae.size,d.transition=function(h,q){return h&&h.transition?su?h.transition(q):h:d.selection().transition(h)},d.transition.prototype=to,to.select=function(h){var q=this.id,ne=this.namespace,Ce=[],Ne,Ge,ht;h=$(h);for(var at=-1,mt=this.length;++at<mt;){Ce.push(Ne=[]);for(var Et=this[at],zt=-1,tr=Et.length;++zt<tr;)(ht=Et[zt])&&(Ge=h.call(ht,ht.__data__,zt,at))?("__data__"in ht&&(Ge.__data__=ht.__data__),xc(Ge,zt,ne,q,ht[ne][q]),Ne.push(Ge)):Ne.push(null)}return yc(Ce,ne,q)},to.selectAll=function(h){var q=this.id,ne=this.namespace,Ce=[],Ne,Ge,ht,at,mt;h=oe(h);for(var Et=-1,zt=this.length;++Et<zt;)for(var tr=this[Et],ar=-1,zr=tr.length;++ar<zr;)if(ht=tr[ar]){mt=ht[ne][q],Ge=h.call(ht,ht.__data__,ar,Et),Ce.push(Ne=[]);for(var Ir=-1,vr=Ge.length;++Ir<vr;)(at=Ge[Ir])&&xc(at,Ir,ne,q,mt),Ne.push(at)}return yc(Ce,ne,q)},to.filter=function(h){var q=[],ne,Ce,Ne;typeof h!="function"&&(h=Ke(h));for(var Ge=0,ht=this.length;Ge<ht;Ge++){q.push(ne=[]);for(var Ce=this[Ge],at=0,mt=Ce.length;at<mt;at++)(Ne=Ce[at])&&h.call(Ne,Ne.__data__,at,Ge)&&ne.push(Ne)}return yc(q,this.namespace,this.id)},to.tween=function(h,q){var ne=this.id,Ce=this.namespace;return arguments.length<2?this.node()[Ce][ne].tween.get(h):Ft(this,q==null?function(Ne){Ne[Ce][ne].tween.remove(h)}:function(Ne){Ne[Ce][ne].tween.set(h,q)})};function bc(h,q,ne,Ce){var Ne=h.id,Ge=h.namespace;return Ft(h,typeof ne=="function"?function(ht,at,mt){ht[Ge][Ne].tween.set(q,Ce(ne.call(ht,ht.__data__,at,mt)))}:(ne=Ce(ne),function(ht){ht[Ge][Ne].tween.set(q,ne)}))}to.attr=function(h,q){if(arguments.length<2){for(q in h)this.attr(q,h[q]);return this}var ne=h=="transform"?Ih:Jo,Ce=d.ns.qualify(h);function Ne(){this.removeAttribute(Ce)}function Ge(){this.removeAttributeNS(Ce.space,Ce.local)}function ht(mt){return mt==null?Ne:(mt+="",function(){var Et=this.getAttribute(Ce),zt;return Et!==mt&&(zt=ne(Et,mt),function(tr){this.setAttribute(Ce,zt(tr))})})}function at(mt){return mt==null?Ge:(mt+="",function(){var Et=this.getAttributeNS(Ce.space,Ce.local),zt;return Et!==mt&&(zt=ne(Et,mt),function(tr){this.setAttributeNS(Ce.space,Ce.local,zt(tr))})})}return bc(this,"attr."+h,q,Ce.local?at:ht)},to.attrTween=function(h,q){var ne=d.ns.qualify(h);function Ce(Ge,ht){var at=q.call(this,Ge,ht,this.getAttribute(ne));return at&&function(mt){this.setAttribute(ne,at(mt))}}function Ne(Ge,ht){var at=q.call(this,Ge,ht,this.getAttributeNS(ne.space,ne.local));return at&&function(mt){this.setAttributeNS(ne.space,ne.local,at(mt))}}return this.tween("attr."+h,ne.local?Ne:Ce)},to.style=function(h,q,ne){var Ce=arguments.length;if(Ce<3){if(typeof h!="string"){Ce<2&&(q="");for(ne in h)this.style(ne,h[ne],q);return this}ne=""}function Ne(){this.style.removeProperty(h)}function Ge(ht){return ht==null?Ne:(ht+="",function(){var at=p(this).getComputedStyle(this,null).getPropertyValue(h),mt;return at!==ht&&(mt=Jo(at,ht),function(Et){this.style.setProperty(h,mt(Et),ne)})})}return bc(this,"style."+h,q,Ge)},to.styleTween=function(h,q,ne){arguments.length<3&&(ne="");function Ce(Ne,Ge){var ht=q.call(this,Ne,Ge,p(this).getComputedStyle(this,null).getPropertyValue(h));return ht&&function(at){this.style.setProperty(h,ht(at),ne)}}return this.tween("style."+h,Ce)},to.text=function(h){return bc(this,"text",h,P0)};function P0(h){return h==null&&(h=""),function(){this.textContent=h}}to.remove=function(){var h=this.namespace;return this.each("end.transition",function(){var q;this[h].count<2&&(q=this.parentNode)&&q.removeChild(this)})},to.ease=function(h){var q=this.id,ne=this.namespace;return arguments.length<1?this.node()[ne][q].ease:(typeof h!="function"&&(h=d.ease.apply(d,arguments)),Ft(this,function(Ce){Ce[ne][q].ease=h}))},to.delay=function(h){var q=this.id,ne=this.namespace;return arguments.length<1?this.node()[ne][q].delay:Ft(this,typeof h=="function"?function(Ce,Ne,Ge){Ce[ne][q].delay=+h.call(Ce,Ce.__data__,Ne,Ge)}:(h=+h,function(Ce){Ce[ne][q].delay=h}))},to.duration=function(h){var q=this.id,ne=this.namespace;return arguments.length<1?this.node()[ne][q].duration:Ft(this,typeof h=="function"?function(Ce,Ne,Ge){Ce[ne][q].duration=Math.max(1,h.call(Ce,Ce.__data__,Ne,Ge))}:(h=Math.max(1,h),function(Ce){Ce[ne][q].duration=h}))},to.each=function(h,q){var ne=this.id,Ce=this.namespace;if(arguments.length<2){var Ne=mf,Ge=su;try{su=ne,Ft(this,function(ht,at,mt){mf=ht[Ce][ne],h.call(ht,ht.__data__,at,mt)})}finally{mf=Ne,su=Ge}}else Ft(this,function(ht){var at=ht[Ce][ne];(at.event||(at.event=d.dispatch("start","end","interrupt"))).on(h,q)});return this},to.transition=function(){for(var h=this.id,q=++vh,ne=this.namespace,Ce=[],Ne,Ge,ht,at,mt=0,Et=this.length;mt<Et;mt++){Ce.push(Ne=[]);for(var Ge=this[mt],zt=0,tr=Ge.length;zt<tr;zt++)(ht=Ge[zt])&&(at=ht[ne][h],xc(ht,zt,ne,q,{time:at.time,ease:at.ease,delay:at.delay+at.duration,duration:at.duration})),Ne.push(ht)}return yc(Ce,ne,q)};function Ad(h){return h==null?"__transition__":"__transition_"+h+"__"}function xc(h,q,ne,Ce,Ne){var Ge=h[ne]||(h[ne]={active:0,count:0}),ht=Ge[Ce],at,mt,Et,zt,tr;function ar(vr){var Sr=ht.delay;if(mt.t=Sr+at,Sr<=vr)return zr(vr-Sr);mt.c=zr}function zr(vr){var Sr=Ge.active,Cr=Ge[Sr];Cr&&(Cr.timer.c=null,Cr.timer.t=NaN,--Ge.count,delete Ge[Sr],Cr.event&&Cr.event.interrupt.call(h,h.__data__,Cr.index));for(var Ur in Ge)if(+Ur<Ce){var Yr=Ge[Ur];Yr.timer.c=null,Yr.timer.t=NaN,--Ge.count,delete Ge[Ur]}mt.c=Ir,Sn(function(){return mt.c&&Ir(vr||1)&&(mt.c=null,mt.t=NaN),1},0,at),Ge.active=Ce,ht.event&&ht.event.start.call(h,h.__data__,q),tr=[],ht.tween.forEach(function(kr,e){(e=e.call(h,h.__data__,q))&&tr.push(e)}),zt=ht.ease,Et=ht.duration}function Ir(vr){for(var Sr=vr/Et,Cr=zt(Sr),Ur=tr.length;Ur>0;)tr[--Ur].call(h,Cr);if(Sr>=1)return ht.event&&ht.event.end.call(h,h.__data__,q),--Ge.count?delete Ge[Ce]:delete h[ne],1}ht||(at=Ne.time,mt=Sn(ar,0,at),ht=Ge[Ce]={tween:new te,time:at,timer:mt,delay:Ne.delay,duration:Ne.duration,ease:Ne.ease,index:q},Ne=null,++Ge.count)}d.svg.axis=function(){var h=d.scale.linear(),q=ph,ne=6,Ce=6,Ne=3,Ge=[10],ht=null,at;function mt(Et){Et.each(function(){var zt=d.select(this),tr=this.__chart__||h,ar=this.__chart__=h.copy(),zr=ht??(ar.ticks?ar.ticks.apply(ar,Ge):ar.domain()),Ir=at??(ar.tickFormat?ar.tickFormat.apply(ar,Ge):Me),vr=zt.selectAll(".tick").data(zr,ar),Sr=vr.enter().insert("g",".domain").attr("class","tick").style("opacity",Mt),Cr=d.transition(vr.exit()).style("opacity",Mt).remove(),Ur=d.transition(vr.order()).style("opacity",1),Yr=Math.max(ne,0)+Ne,kr,e=eh(ar),r=zt.selectAll(".domain").data([0]),o=(r.enter().append("path").attr("class","domain"),d.transition(r));Sr.append("line"),Sr.append("text");var M=Sr.select("line"),ie=Ur.select("line"),xe=vr.select("text").text(Ir),dt=Sr.select("text"),St=Ur.select("text"),br=q==="top"||q==="left"?-1:1,Zr,xa,_a,Mr;if(q==="bottom"||q==="top"?(kr=Sd,Zr="x",_a="y",xa="x2",Mr="y2",xe.attr("dy",br<0?"0em":".71em").style("text-anchor","middle"),o.attr("d","M"+e[0]+","+br*Ce+"V0H"+e[1]+"V"+br*Ce)):(kr=p0,Zr="y",_a="x",xa="y2",Mr="x2",xe.attr("dy",".32em").style("text-anchor",br<0?"end":"start"),o.attr("d","M"+br*Ce+","+e[0]+"H0V"+e[1]+"H"+br*Ce)),M.attr(Mr,br*ne),dt.attr(_a,br*Yr),ie.attr(xa,0).attr(Mr,br*ne),St.attr(Zr,0).attr(_a,br*Yr),ar.rangeBand){var Kr=ar,Ha=Kr.rangeBand()/2;tr=ar=function(tn){return Kr(tn)+Ha}}else tr.rangeBand?tr=ar:Cr.call(kr,ar,tr);Sr.call(kr,tr,ar),Ur.call(kr,ar,ar)})}return mt.scale=function(Et){return arguments.length?(h=Et,mt):h},mt.orient=function(Et){return arguments.length?(q=Et in mh?Et+"":ph,mt):q},mt.ticks=function(){return arguments.length?(Ge=c(arguments),mt):Ge},mt.tickValues=function(Et){return arguments.length?(ht=Et,mt):ht},mt.tickFormat=function(Et){return arguments.length?(at=Et,mt):at},mt.tickSize=function(Et){var zt=arguments.length;return zt?(ne=+Et,Ce=+arguments[zt-1],mt):ne},mt.innerTickSize=function(Et){return arguments.length?(ne=+Et,mt):ne},mt.outerTickSize=function(Et){return arguments.length?(Ce=+Et,mt):Ce},mt.tickPadding=function(Et){return arguments.length?(Ne=+Et,mt):Ne},mt.tickSubdivide=function(){return arguments.length&&mt},mt};var ph="bottom",mh={top:1,right:1,bottom:1,left:1};function Sd(h,q,ne){h.attr("transform",function(Ce){var Ne=q(Ce);return"translate("+(isFinite(Ne)?Ne:ne(Ce))+",0)"})}function p0(h,q,ne){h.attr("transform",function(Ce){var Ne=q(Ce);return"translate(0,"+(isFinite(Ne)?Ne:ne(Ce))+")"})}d.svg.brush=function(){var h=it(zt,"brushstart","brush","brushend"),q=null,ne=null,Ce=[0,0],Ne=[0,0],Ge,ht,at=!0,mt=!0,Et=sl[0];function zt(vr){vr.each(function(){var Sr=d.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ir).on("touchstart.brush",Ir),Cr=Sr.selectAll(".background").data([0]);Cr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Sr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Ur=Sr.selectAll(".resize").data(Et,Me);Ur.exit().remove(),Ur.enter().append("g").attr("class",function(r){return"resize "+r}).style("cursor",function(r){return Td[r]}).append("rect").attr("x",function(r){return/[ew]$/.test(r)?-3:null}).attr("y",function(r){return/^[ns]/.test(r)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Ur.style("display",zt.empty()?"none":null);var Yr=d.transition(Sr),kr=d.transition(Cr),e;q&&(e=eh(q),kr.attr("x",e[0]).attr("width",e[1]-e[0]),ar(Yr)),ne&&(e=eh(ne),kr.attr("y",e[0]).attr("height",e[1]-e[0]),zr(Yr)),tr(Yr)})}zt.event=function(vr){vr.each(function(){var Sr=h.of(this,arguments),Cr={x:Ce,y:Ne,i:Ge,j:ht},Ur=this.__chart__||Cr;this.__chart__=Cr,su?d.select(this).transition().each("start.brush",function(){Ge=Ur.i,ht=Ur.j,Ce=Ur.x,Ne=Ur.y,Sr({type:"brushstart"})}).tween("brush:brush",function(){var Yr=kl(Ce,Cr.x),kr=kl(Ne,Cr.y);return Ge=ht=null,function(e){Ce=Cr.x=Yr(e),Ne=Cr.y=kr(e),Sr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ge=Cr.i,ht=Cr.j,Sr({type:"brush",mode:"resize"}),Sr({type:"brushend"})}):(Sr({type:"brushstart"}),Sr({type:"brush",mode:"resize"}),Sr({type:"brushend"}))})};function tr(vr){vr.selectAll(".resize").attr("transform",function(Sr){return"translate("+Ce[+/e$/.test(Sr)]+","+Ne[+/^s/.test(Sr)]+")"})}function ar(vr){vr.select(".extent").attr("x",Ce[0]),vr.selectAll(".extent,.n>rect,.s>rect").attr("width",Ce[1]-Ce[0])}function zr(vr){vr.select(".extent").attr("y",Ne[0]),vr.selectAll(".extent,.e>rect,.w>rect").attr("height",Ne[1]-Ne[0])}function Ir(){var vr=this,Sr=d.select(d.event.target),Cr=h.of(vr,arguments),Ur=d.select(vr),Yr=Sr.datum(),kr=!/^(n|s)$/.test(Yr)&&q,e=!/^(e|w)$/.test(Yr)&&ne,r=Sr.classed("extent"),o=ta(vr),M,ie=d.mouse(vr),xe,dt=d.select(p(vr)).on("keydown.brush",Zr).on("keyup.brush",xa);if(d.event.changedTouches?dt.on("touchmove.brush",_a).on("touchend.brush",Kr):dt.on("mousemove.brush",_a).on("mouseup.brush",Kr),Ur.interrupt().selectAll("*").interrupt(),r)ie[0]=Ce[0]-ie[0],ie[1]=Ne[0]-ie[1];else if(Yr){var St=+/w$/.test(Yr),br=+/^n/.test(Yr);xe=[Ce[1-St]-ie[0],Ne[1-br]-ie[1]],ie[0]=Ce[St],ie[1]=Ne[br]}else d.event.altKey&&(M=ie.slice());Ur.style("pointer-events","none").selectAll(".resize").style("display",null),d.select("body").style("cursor",Sr.style("cursor")),Cr({type:"brushstart"}),_a();function Zr(){d.event.keyCode==32&&(r||(M=null,ie[0]-=Ce[1],ie[1]-=Ne[1],r=2),Ye())}function xa(){d.event.keyCode==32&&r==2&&(ie[0]+=Ce[1],ie[1]+=Ne[1],r=0,Ye())}function _a(){var Ha=d.mouse(vr),tn=!1;xe&&(Ha[0]+=xe[0],Ha[1]+=xe[1]),r||(d.event.altKey?(M||(M=[(Ce[0]+Ce[1])/2,(Ne[0]+Ne[1])/2]),ie[0]=Ce[+(Ha[0]<M[0])],ie[1]=Ne[+(Ha[1]<M[1])]):M=null),kr&&Mr(Ha,q,0)&&(ar(Ur),tn=!0),e&&Mr(Ha,ne,1)&&(zr(Ur),tn=!0),tn&&(tr(Ur),Cr({type:"brush",mode:r?"move":"resize"}))}function Mr(Ha,tn,Pn){var Wr=eh(tn),Fr=Wr[0],na=Wr[1],ka=ie[Pn],gn=Pn?Ne:Ce,qn=gn[1]-gn[0],fn,Dn;if(r&&(Fr-=ka,na-=qn+ka),fn=(Pn?mt:at)?Math.max(Fr,Math.min(na,Ha[Pn])):Ha[Pn],r?Dn=(fn+=ka)+qn:(M&&(ka=Math.max(Fr,Math.min(na,2*M[Pn]-fn))),ka<fn?(Dn=fn,fn=ka):Dn=ka),gn[0]!=fn||gn[1]!=Dn)return Pn?ht=null:Ge=null,gn[0]=fn,gn[1]=Dn,!0}function Kr(){_a(),Ur.style("pointer-events","all").selectAll(".resize").style("display",zt.empty()?"none":null),d.select("body").style("cursor",null),dt.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),o(),Cr({type:"brushend"})}}return zt.x=function(vr){return arguments.length?(q=vr,Et=sl[!q<<1|!ne],zt):q},zt.y=function(vr){return arguments.length?(ne=vr,Et=sl[!q<<1|!ne],zt):ne},zt.clamp=function(vr){return arguments.length?(q&&ne?(at=!!vr[0],mt=!!vr[1]):q?at=!!vr:ne&&(mt=!!vr),zt):q&&ne?[at,mt]:q?at:ne?mt:null},zt.extent=function(vr){var Sr,Cr,Ur,Yr,kr;return arguments.length?(q&&(Sr=vr[0],Cr=vr[1],ne&&(Sr=Sr[0],Cr=Cr[0]),Ge=[Sr,Cr],q.invert&&(Sr=q(Sr),Cr=q(Cr)),Cr<Sr&&(kr=Sr,Sr=Cr,Cr=kr),(Sr!=Ce[0]||Cr!=Ce[1])&&(Ce=[Sr,Cr])),ne&&(Ur=vr[0],Yr=vr[1],q&&(Ur=Ur[1],Yr=Yr[1]),ht=[Ur,Yr],ne.invert&&(Ur=ne(Ur),Yr=ne(Yr)),Yr<Ur&&(kr=Ur,Ur=Yr,Yr=kr),(Ur!=Ne[0]||Yr!=Ne[1])&&(Ne=[Ur,Yr])),zt):(q&&(Ge?(Sr=Ge[0],Cr=Ge[1]):(Sr=Ce[0],Cr=Ce[1],q.invert&&(Sr=q.invert(Sr),Cr=q.invert(Cr)),Cr<Sr&&(kr=Sr,Sr=Cr,Cr=kr))),ne&&(ht?(Ur=ht[0],Yr=ht[1]):(Ur=Ne[0],Yr=Ne[1],ne.invert&&(Ur=ne.invert(Ur),Yr=ne.invert(Yr)),Yr<Ur&&(kr=Ur,Ur=Yr,Yr=kr))),q&&ne?[[Sr,Ur],[Cr,Yr]]:q?[Sr,Cr]:ne&&[Ur,Yr])},zt.clear=function(){return zt.empty()||(Ce=[0,0],Ne=[0,0],Ge=ht=null),zt},zt.empty=function(){return!!q&&Ce[0]==Ce[1]||!!ne&&Ne[0]==Ne[1]},d.rebind(zt,h,"on")};var Td={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},sl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d.text=Br(function(h){return h.responseText}),d.json=function(h,q){return ra(h,"application/json",lu,q)};function lu(h){return JSON.parse(h.responseText)}d.html=function(h,q){return ra(h,"text/html",uu,q)};function uu(h){var q=m.createRange();return q.selectNode(m.body),q.createContextualFragment(h.responseText)}d.xml=Br(function(h){return h.responseXML}),typeof fe=="object"&&fe.exports?fe.exports=d:this.d3=d}).apply(self)}}),S=n({"node_modules/d3-time/dist/d3-time.js"(ce,fe){(function(d,u){typeof ce=="object"&&typeof fe<"u"?u(ce):(d=d||self,u(d.d3=d.d3||{}))})(ce,function(d){var u=new Date,c=new Date;function m(Ke,gt,Ft,Xt){function or(sr){return Ke(sr=arguments.length===0?new Date:new Date(+sr)),sr}return or.floor=function(sr){return Ke(sr=new Date(+sr)),sr},or.ceil=function(sr){return Ke(sr=new Date(sr-1)),gt(sr,1),Ke(sr),sr},or.round=function(sr){var dr=or(sr),wr=or.ceil(sr);return sr-dr<wr-sr?dr:wr},or.offset=function(sr,dr){return gt(sr=new Date(+sr),dr==null?1:Math.floor(dr)),sr},or.range=function(sr,dr,wr){var xr=[],Pr;if(sr=or.ceil(sr),wr=wr==null?1:Math.floor(wr),!(sr<dr)||!(wr>0))return xr;do xr.push(Pr=new Date(+sr)),gt(sr,wr),Ke(sr);while(Pr<sr&&sr<dr);return xr},or.filter=function(sr){return m(function(dr){if(dr>=dr)for(;Ke(dr),!sr(dr);)dr.setTime(dr-1)},function(dr,wr){if(dr>=dr)if(wr<0)for(;++wr<=0;)for(;gt(dr,-1),!sr(dr););else for(;--wr>=0;)for(;gt(dr,1),!sr(dr););})},Ft&&(or.count=function(sr,dr){return u.setTime(+sr),c.setTime(+dr),Ke(u),Ke(c),Math.floor(Ft(u,c))},or.every=function(sr){return sr=Math.floor(sr),!isFinite(sr)||!(sr>0)?null:sr>1?or.filter(Xt?function(dr){return Xt(dr)%sr===0}:function(dr){return or.count(0,dr)%sr===0}):or}),or}var v=m(function(){},function(Ke,gt){Ke.setTime(+Ke+gt)},function(Ke,gt){return gt-Ke});v.every=function(Ke){return Ke=Math.floor(Ke),!isFinite(Ke)||!(Ke>0)?null:Ke>1?m(function(gt){gt.setTime(Math.floor(gt/Ke)*Ke)},function(gt,Ft){gt.setTime(+gt+Ft*Ke)},function(gt,Ft){return(Ft-gt)/Ke}):v};var p=v.range,g=1e3,w=6e4,s=36e5,j=864e5,b=6048e5,z=m(function(Ke){Ke.setTime(Ke-Ke.getMilliseconds())},function(Ke,gt){Ke.setTime(+Ke+gt*g)},function(Ke,gt){return(gt-Ke)/g},function(Ke){return Ke.getUTCSeconds()}),X=z.range,N=m(function(Ke){Ke.setTime(Ke-Ke.getMilliseconds()-Ke.getSeconds()*g)},function(Ke,gt){Ke.setTime(+Ke+gt*w)},function(Ke,gt){return(gt-Ke)/w},function(Ke){return Ke.getMinutes()}),O=N.range,F=m(function(Ke){Ke.setTime(Ke-Ke.getMilliseconds()-Ke.getSeconds()*g-Ke.getMinutes()*w)},function(Ke,gt){Ke.setTime(+Ke+gt*s)},function(Ke,gt){return(gt-Ke)/s},function(Ke){return Ke.getHours()}),P=F.range,_=m(function(Ke){Ke.setHours(0,0,0,0)},function(Ke,gt){Ke.setDate(Ke.getDate()+gt)},function(Ke,gt){return(gt-Ke-(gt.getTimezoneOffset()-Ke.getTimezoneOffset())*w)/j},function(Ke){return Ke.getDate()-1}),R=_.range;function H(Ke){return m(function(gt){gt.setDate(gt.getDate()-(gt.getDay()+7-Ke)%7),gt.setHours(0,0,0,0)},function(gt,Ft){gt.setDate(gt.getDate()+Ft*7)},function(gt,Ft){return(Ft-gt-(Ft.getTimezoneOffset()-gt.getTimezoneOffset())*w)/b})}var te=H(0),J=H(1),ye=H(2),se=H(3),he=H(4),pe=H(5),Q=H(6),ue=te.range,me=J.range,be=ye.range,ve=se.range,Me=he.range,ke=pe.range,le=Q.range,De=m(function(Ke){Ke.setDate(1),Ke.setHours(0,0,0,0)},function(Ke,gt){Ke.setMonth(Ke.getMonth()+gt)},function(Ke,gt){return gt.getMonth()-Ke.getMonth()+(gt.getFullYear()-Ke.getFullYear())*12},function(Ke){return Ke.getMonth()}),Oe=De.range,He=m(function(Ke){Ke.setMonth(0,1),Ke.setHours(0,0,0,0)},function(Ke,gt){Ke.setFullYear(Ke.getFullYear()+gt)},function(Ke,gt){return gt.getFullYear()-Ke.getFullYear()},function(Ke){return Ke.getFullYear()});He.every=function(Ke){return!isFinite(Ke=Math.floor(Ke))||!(Ke>0)?null:m(function(gt){gt.setFullYear(Math.floor(gt.getFullYear()/Ke)*Ke),gt.setMonth(0,1),gt.setHours(0,0,0,0)},function(gt,Ft){gt.setFullYear(gt.getFullYear()+Ft*Ke)})};var Be=He.range,Ye=m(function(Ke){Ke.setUTCSeconds(0,0)},function(Ke,gt){Ke.setTime(+Ke+gt*w)},function(Ke,gt){return(gt-Ke)/w},function(Ke){return Ke.getUTCMinutes()}),st=Ye.range,it=m(function(Ke){Ke.setUTCMinutes(0,0,0)},function(Ke,gt){Ke.setTime(+Ke+gt*s)},function(Ke,gt){return(gt-Ke)/s},function(Ke){return Ke.getUTCHours()}),yt=it.range,_e=m(function(Ke){Ke.setUTCHours(0,0,0,0)},function(Ke,gt){Ke.setUTCDate(Ke.getUTCDate()+gt)},function(Ke,gt){return(gt-Ke)/j},function(Ke){return Ke.getUTCDate()-1}),Ee=_e.range;function de(Ke){return m(function(gt){gt.setUTCDate(gt.getUTCDate()-(gt.getUTCDay()+7-Ke)%7),gt.setUTCHours(0,0,0,0)},function(gt,Ft){gt.setUTCDate(gt.getUTCDate()+Ft*7)},function(gt,Ft){return(Ft-gt)/b})}var we=de(0),je=de(1),Ae=de(2),$=de(3),oe=de(4),ge=de(5),Te=de(6),Ue=we.range,Ze=je.range,Je=Ae.range,ft=$.range,wt=oe.range,Ct=ge.range,Kt=Te.range,$t=m(function(Ke){Ke.setUTCDate(1),Ke.setUTCHours(0,0,0,0)},function(Ke,gt){Ke.setUTCMonth(Ke.getUTCMonth()+gt)},function(Ke,gt){return gt.getUTCMonth()-Ke.getUTCMonth()+(gt.getUTCFullYear()-Ke.getUTCFullYear())*12},function(Ke){return Ke.getUTCMonth()}),Wt=$t.range,nt=m(function(Ke){Ke.setUTCMonth(0,1),Ke.setUTCHours(0,0,0,0)},function(Ke,gt){Ke.setUTCFullYear(Ke.getUTCFullYear()+gt)},function(Ke,gt){return gt.getUTCFullYear()-Ke.getUTCFullYear()},function(Ke){return Ke.getUTCFullYear()});nt.every=function(Ke){return!isFinite(Ke=Math.floor(Ke))||!(Ke>0)?null:m(function(gt){gt.setUTCFullYear(Math.floor(gt.getUTCFullYear()/Ke)*Ke),gt.setUTCMonth(0,1),gt.setUTCHours(0,0,0,0)},function(gt,Ft){gt.setUTCFullYear(gt.getUTCFullYear()+Ft*Ke)})};var pt=nt.range;d.timeDay=_,d.timeDays=R,d.timeFriday=pe,d.timeFridays=ke,d.timeHour=F,d.timeHours=P,d.timeInterval=m,d.timeMillisecond=v,d.timeMilliseconds=p,d.timeMinute=N,d.timeMinutes=O,d.timeMonday=J,d.timeMondays=me,d.timeMonth=De,d.timeMonths=Oe,d.timeSaturday=Q,d.timeSaturdays=le,d.timeSecond=z,d.timeSeconds=X,d.timeSunday=te,d.timeSundays=ue,d.timeThursday=he,d.timeThursdays=Me,d.timeTuesday=ye,d.timeTuesdays=be,d.timeWednesday=se,d.timeWednesdays=ve,d.timeWeek=te,d.timeWeeks=ue,d.timeYear=He,d.timeYears=Be,d.utcDay=_e,d.utcDays=Ee,d.utcFriday=ge,d.utcFridays=Ct,d.utcHour=it,d.utcHours=yt,d.utcMillisecond=v,d.utcMilliseconds=p,d.utcMinute=Ye,d.utcMinutes=st,d.utcMonday=je,d.utcMondays=Ze,d.utcMonth=$t,d.utcMonths=Wt,d.utcSaturday=Te,d.utcSaturdays=Kt,d.utcSecond=z,d.utcSeconds=X,d.utcSunday=we,d.utcSundays=Ue,d.utcThursday=oe,d.utcThursdays=wt,d.utcTuesday=Ae,d.utcTuesdays=Je,d.utcWednesday=$,d.utcWednesdays=ft,d.utcWeek=we,d.utcWeeks=Ue,d.utcYear=nt,d.utcYears=pt,Object.defineProperty(d,"__esModule",{value:!0})})}}),E=n({"node_modules/d3-time-format/dist/d3-time-format.js"(ce,fe){(function(d,u){typeof ce=="object"&&typeof fe<"u"?u(ce,S()):(d=d||self,u(d.d3=d.d3||{},d.d3))})(ce,function(d,u){function c(vt){if(0<=vt.y&&vt.y<100){var Mt=new Date(-1,vt.m,vt.d,vt.H,vt.M,vt.S,vt.L);return Mt.setFullYear(vt.y),Mt}return new Date(vt.y,vt.m,vt.d,vt.H,vt.M,vt.S,vt.L)}function m(vt){if(0<=vt.y&&vt.y<100){var Mt=new Date(Date.UTC(-1,vt.m,vt.d,vt.H,vt.M,vt.S,vt.L));return Mt.setUTCFullYear(vt.y),Mt}return new Date(Date.UTC(vt.y,vt.m,vt.d,vt.H,vt.M,vt.S,vt.L))}function v(vt,Mt,xt){return{y:vt,m:Mt,d:xt,H:0,M:0,S:0,L:0}}function p(vt){var Mt=vt.dateTime,xt=vt.date,Le=vt.time,ot=vt.periods,ct=vt.days,ut=vt.shortDays,Pt=vt.months,Ot=vt.shortMonths,qt=X(ot),ir=N(ot),_r=X(ct),Bt=N(ct),gr=X(ut),Ar=N(ut),Er=X(Pt),ba=N(Pt),Ga=X(Ot),Xa=N(Ot),Aa={a:cn,A:Cn,b:Ja,B:xn,c:null,d:De,e:De,f:st,H:Oe,I:He,j:Be,L:Ye,m:it,M:yt,p:We,q:Re,Q:dr,s:wr,S:_e,u:Ee,U:de,V:we,w:je,W:Ae,x:null,X:null,y:$,Y:oe,Z:ge,"%":sr},Oa={a:Zt,A:Ht,b:Rt,B:Dt,c:null,d:Te,e:Te,f:wt,H:Ue,I:Ze,j:Je,L:ft,m:Ct,M:Kt,p:Ut,q:pr,Q:dr,s:wr,S:$t,u:Wt,U:nt,V:pt,w:Ke,W:gt,x:null,X:null,y:Ft,Y:Xt,Z:or,"%":sr},va={a:La,A:la,b:Ba,B:un,c:pn,d:he,e:he,f:ve,H:Q,I:Q,j:pe,L:be,m:se,M:ue,p:$a,q:ye,Q:ke,s:le,S:me,u:F,U:P,V:_,w:O,W:R,x:qa,X:nn,y:te,Y:H,Z:J,"%":Me};Aa.x=ma(xt,Aa),Aa.X=ma(Le,Aa),Aa.c=ma(Mt,Aa),Oa.x=ma(xt,Oa),Oa.X=ma(Le,Oa),Oa.c=ma(Mt,Oa);function ma(jt,Jt){return function(cr){var rr=[],Or=-1,Br=0,ra=jt.length,Ca,Ma,za;for(cr instanceof Date||(cr=new Date(+cr));++Or<ra;)jt.charCodeAt(Or)===37&&(rr.push(jt.slice(Br,Or)),(Ma=g[Ca=jt.charAt(++Or)])!=null?Ca=jt.charAt(++Or):Ma=Ca==="e"?" ":"0",(za=Jt[Ca])&&(Ca=za(cr,Ma)),rr.push(Ca),Br=Or+1);return rr.push(jt.slice(Br,Or)),rr.join("")}}function Va(jt,Jt){return function(cr){var rr=v(1900,void 0,1),Or=ja(rr,jt,cr+="",0),Br,ra;if(Or!=cr.length)return null;if("Q"in rr)return new Date(rr.Q);if("s"in rr)return new Date(rr.s*1e3+("L"in rr?rr.L:0));if(Jt&&!("Z"in rr)&&(rr.Z=0),"p"in rr&&(rr.H=rr.H%12+rr.p*12),rr.m===void 0&&(rr.m="q"in rr?rr.q:0),"V"in rr){if(rr.V<1||rr.V>53)return null;"w"in rr||(rr.w=1),"Z"in rr?(Br=m(v(rr.y,0,1)),ra=Br.getUTCDay(),Br=ra>4||ra===0?u.utcMonday.ceil(Br):u.utcMonday(Br),Br=u.utcDay.offset(Br,(rr.V-1)*7),rr.y=Br.getUTCFullYear(),rr.m=Br.getUTCMonth(),rr.d=Br.getUTCDate()+(rr.w+6)%7):(Br=c(v(rr.y,0,1)),ra=Br.getDay(),Br=ra>4||ra===0?u.timeMonday.ceil(Br):u.timeMonday(Br),Br=u.timeDay.offset(Br,(rr.V-1)*7),rr.y=Br.getFullYear(),rr.m=Br.getMonth(),rr.d=Br.getDate()+(rr.w+6)%7)}else("W"in rr||"U"in rr)&&("w"in rr||(rr.w="u"in rr?rr.u%7:"W"in rr?1:0),ra="Z"in rr?m(v(rr.y,0,1)).getUTCDay():c(v(rr.y,0,1)).getDay(),rr.m=0,rr.d="W"in rr?(rr.w+6)%7+rr.W*7-(ra+5)%7:rr.w+rr.U*7-(ra+6)%7);return"Z"in rr?(rr.H+=rr.Z/100|0,rr.M+=rr.Z%100,m(rr)):c(rr)}}function ja(jt,Jt,cr,rr){for(var Or=0,Br=Jt.length,ra=cr.length,Ca,Ma;Or<Br;){if(rr>=ra)return-1;if(Ca=Jt.charCodeAt(Or++),Ca===37){if(Ca=Jt.charAt(Or++),Ma=va[Ca in g?Jt.charAt(Or++):Ca],!Ma||(rr=Ma(jt,cr,rr))<0)return-1}else if(Ca!=cr.charCodeAt(rr++))return-1}return rr}function $a(jt,Jt,cr){var rr=qt.exec(Jt.slice(cr));return rr?(jt.p=ir[rr[0].toLowerCase()],cr+rr[0].length):-1}function La(jt,Jt,cr){var rr=gr.exec(Jt.slice(cr));return rr?(jt.w=Ar[rr[0].toLowerCase()],cr+rr[0].length):-1}function la(jt,Jt,cr){var rr=_r.exec(Jt.slice(cr));return rr?(jt.w=Bt[rr[0].toLowerCase()],cr+rr[0].length):-1}function Ba(jt,Jt,cr){var rr=Ga.exec(Jt.slice(cr));return rr?(jt.m=Xa[rr[0].toLowerCase()],cr+rr[0].length):-1}function un(jt,Jt,cr){var rr=Er.exec(Jt.slice(cr));return rr?(jt.m=ba[rr[0].toLowerCase()],cr+rr[0].length):-1}function pn(jt,Jt,cr){return ja(jt,Mt,Jt,cr)}function qa(jt,Jt,cr){return ja(jt,xt,Jt,cr)}function nn(jt,Jt,cr){return ja(jt,Le,Jt,cr)}function cn(jt){return ut[jt.getDay()]}function Cn(jt){return ct[jt.getDay()]}function Ja(jt){return Ot[jt.getMonth()]}function xn(jt){return Pt[jt.getMonth()]}function We(jt){return ot[+(jt.getHours()>=12)]}function Re(jt){return 1+~~(jt.getMonth()/3)}function Zt(jt){return ut[jt.getUTCDay()]}function Ht(jt){return ct[jt.getUTCDay()]}function Rt(jt){return Ot[jt.getUTCMonth()]}function Dt(jt){return Pt[jt.getUTCMonth()]}function Ut(jt){return ot[+(jt.getUTCHours()>=12)]}function pr(jt){return 1+~~(jt.getUTCMonth()/3)}return{format:function(jt){var Jt=ma(jt+="",Aa);return Jt.toString=function(){return jt},Jt},parse:function(jt){var Jt=Va(jt+="",!1);return Jt.toString=function(){return jt},Jt},utcFormat:function(jt){var Jt=ma(jt+="",Oa);return Jt.toString=function(){return jt},Jt},utcParse:function(jt){var Jt=Va(jt+="",!0);return Jt.toString=function(){return jt},Jt}}}var g={"-":"",_:" ",0:"0"},w=/^\s*\d+/,s=/^%/,j=/[\\^$*+?|[\]().{}]/g;function b(vt,Mt,xt){var Le=vt<0?"-":"",ot=(Le?-vt:vt)+"",ct=ot.length;return Le+(ct<xt?new Array(xt-ct+1).join(Mt)+ot:ot)}function z(vt){return vt.replace(j,"\\$&")}function X(vt){return new RegExp("^(?:"+vt.map(z).join("|")+")","i")}function N(vt){for(var Mt={},xt=-1,Le=vt.length;++xt<Le;)Mt[vt[xt].toLowerCase()]=xt;return Mt}function O(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+1));return Le?(vt.w=+Le[0],xt+Le[0].length):-1}function F(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+1));return Le?(vt.u=+Le[0],xt+Le[0].length):-1}function P(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.U=+Le[0],xt+Le[0].length):-1}function _(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.V=+Le[0],xt+Le[0].length):-1}function R(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.W=+Le[0],xt+Le[0].length):-1}function H(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+4));return Le?(vt.y=+Le[0],xt+Le[0].length):-1}function te(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.y=+Le[0]+(+Le[0]>68?1900:2e3),xt+Le[0].length):-1}function J(vt,Mt,xt){var Le=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Mt.slice(xt,xt+6));return Le?(vt.Z=Le[1]?0:-(Le[2]+(Le[3]||"00")),xt+Le[0].length):-1}function ye(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+1));return Le?(vt.q=Le[0]*3-3,xt+Le[0].length):-1}function se(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.m=Le[0]-1,xt+Le[0].length):-1}function he(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.d=+Le[0],xt+Le[0].length):-1}function pe(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+3));return Le?(vt.m=0,vt.d=+Le[0],xt+Le[0].length):-1}function Q(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.H=+Le[0],xt+Le[0].length):-1}function ue(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.M=+Le[0],xt+Le[0].length):-1}function me(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+2));return Le?(vt.S=+Le[0],xt+Le[0].length):-1}function be(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+3));return Le?(vt.L=+Le[0],xt+Le[0].length):-1}function ve(vt,Mt,xt){var Le=w.exec(Mt.slice(xt,xt+6));return Le?(vt.L=Math.floor(Le[0]/1e3),xt+Le[0].length):-1}function Me(vt,Mt,xt){var Le=s.exec(Mt.slice(xt,xt+1));return Le?xt+Le[0].length:-1}function ke(vt,Mt,xt){var Le=w.exec(Mt.slice(xt));return Le?(vt.Q=+Le[0],xt+Le[0].length):-1}function le(vt,Mt,xt){var Le=w.exec(Mt.slice(xt));return Le?(vt.s=+Le[0],xt+Le[0].length):-1}function De(vt,Mt){return b(vt.getDate(),Mt,2)}function Oe(vt,Mt){return b(vt.getHours(),Mt,2)}function He(vt,Mt){return b(vt.getHours()%12||12,Mt,2)}function Be(vt,Mt){return b(1+u.timeDay.count(u.timeYear(vt),vt),Mt,3)}function Ye(vt,Mt){return b(vt.getMilliseconds(),Mt,3)}function st(vt,Mt){return Ye(vt,Mt)+"000"}function it(vt,Mt){return b(vt.getMonth()+1,Mt,2)}function yt(vt,Mt){return b(vt.getMinutes(),Mt,2)}function _e(vt,Mt){return b(vt.getSeconds(),Mt,2)}function Ee(vt){var Mt=vt.getDay();return Mt===0?7:Mt}function de(vt,Mt){return b(u.timeSunday.count(u.timeYear(vt)-1,vt),Mt,2)}function we(vt,Mt){var xt=vt.getDay();return vt=xt>=4||xt===0?u.timeThursday(vt):u.timeThursday.ceil(vt),b(u.timeThursday.count(u.timeYear(vt),vt)+(u.timeYear(vt).getDay()===4),Mt,2)}function je(vt){return vt.getDay()}function Ae(vt,Mt){return b(u.timeMonday.count(u.timeYear(vt)-1,vt),Mt,2)}function $(vt,Mt){return b(vt.getFullYear()%100,Mt,2)}function oe(vt,Mt){return b(vt.getFullYear()%1e4,Mt,4)}function ge(vt){var Mt=vt.getTimezoneOffset();return(Mt>0?"-":(Mt*=-1,"+"))+b(Mt/60|0,"0",2)+b(Mt%60,"0",2)}function Te(vt,Mt){return b(vt.getUTCDate(),Mt,2)}function Ue(vt,Mt){return b(vt.getUTCHours(),Mt,2)}function Ze(vt,Mt){return b(vt.getUTCHours()%12||12,Mt,2)}function Je(vt,Mt){return b(1+u.utcDay.count(u.utcYear(vt),vt),Mt,3)}function ft(vt,Mt){return b(vt.getUTCMilliseconds(),Mt,3)}function wt(vt,Mt){return ft(vt,Mt)+"000"}function Ct(vt,Mt){return b(vt.getUTCMonth()+1,Mt,2)}function Kt(vt,Mt){return b(vt.getUTCMinutes(),Mt,2)}function $t(vt,Mt){return b(vt.getUTCSeconds(),Mt,2)}function Wt(vt){var Mt=vt.getUTCDay();return Mt===0?7:Mt}function nt(vt,Mt){return b(u.utcSunday.count(u.utcYear(vt)-1,vt),Mt,2)}function pt(vt,Mt){var xt=vt.getUTCDay();return vt=xt>=4||xt===0?u.utcThursday(vt):u.utcThursday.ceil(vt),b(u.utcThursday.count(u.utcYear(vt),vt)+(u.utcYear(vt).getUTCDay()===4),Mt,2)}function Ke(vt){return vt.getUTCDay()}function gt(vt,Mt){return b(u.utcMonday.count(u.utcYear(vt)-1,vt),Mt,2)}function Ft(vt,Mt){return b(vt.getUTCFullYear()%100,Mt,2)}function Xt(vt,Mt){return b(vt.getUTCFullYear()%1e4,Mt,4)}function or(){return"+0000"}function sr(){return"%"}function dr(vt){return+vt}function wr(vt){return Math.floor(+vt/1e3)}var xr;Pr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Pr(vt){return xr=p(vt),d.timeFormat=xr.format,d.timeParse=xr.parse,d.utcFormat=xr.utcFormat,d.utcParse=xr.utcParse,xr}var nr="%Y-%m-%dT%H:%M:%S.%LZ";function jr(vt){return vt.toISOString()}var ta=Date.prototype.toISOString?jr:d.utcFormat(nr);function Nr(vt){var Mt=new Date(vt);return isNaN(Mt)?null:Mt}var Jr=+new Date("2000-01-01T00:00:00.000Z")?Nr:d.utcParse(nr);d.isoFormat=ta,d.isoParse=Jr,d.timeFormatDefaultLocale=Pr,d.timeFormatLocale=p,Object.defineProperty(d,"__esModule",{value:!0})})}}),U=n({"node_modules/d3-format/dist/d3-format.js"(ce,fe){(function(d,u){typeof ce=="object"&&typeof fe<"u"?u(ce):(d=typeof globalThis<"u"?globalThis:d||self,u(d.d3=d.d3||{}))})(ce,function(d){function u(se){return Math.abs(se=Math.round(se))>=1e21?se.toLocaleString("en").replace(/,/g,""):se.toString(10)}function c(se,he){if((pe=(se=he?se.toExponential(he-1):se.toExponential()).indexOf("e"))<0)return null;var pe,Q=se.slice(0,pe);return[Q.length>1?Q[0]+Q.slice(2):Q,+se.slice(pe+1)]}function m(se){return se=c(Math.abs(se)),se?se[1]:NaN}function v(se,he){return function(pe,Q){for(var ue=pe.length,me=[],be=0,ve=se[0],Me=0;ue>0&&ve>0&&(Me+ve+1>Q&&(ve=Math.max(1,Q-Me)),me.push(pe.substring(ue-=ve,ue+ve)),!((Me+=ve+1)>Q));)ve=se[be=(be+1)%se.length];return me.reverse().join(he)}}function p(se){return function(he){return he.replace(/[0-9]/g,function(pe){return se[+pe]})}}var g=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w(se){if(!(he=g.exec(se)))throw new Error("invalid format: "+se);var he;return new s({fill:he[1],align:he[2],sign:he[3],symbol:he[4],zero:he[5],width:he[6],comma:he[7],precision:he[8]&&he[8].slice(1),trim:he[9],type:he[10]})}w.prototype=s.prototype;function s(se){this.fill=se.fill===void 0?" ":se.fill+"",this.align=se.align===void 0?">":se.align+"",this.sign=se.sign===void 0?"-":se.sign+"",this.symbol=se.symbol===void 0?"":se.symbol+"",this.zero=!!se.zero,this.width=se.width===void 0?void 0:+se.width,this.comma=!!se.comma,this.precision=se.precision===void 0?void 0:+se.precision,this.trim=!!se.trim,this.type=se.type===void 0?"":se.type+""}s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function j(se){e:for(var he=se.length,pe=1,Q=-1,ue;pe<he;++pe)switch(se[pe]){case".":Q=ue=pe;break;case"0":Q===0&&(Q=pe),ue=pe;break;default:if(!+se[pe])break e;Q>0&&(Q=0);break}return Q>0?se.slice(0,Q)+se.slice(ue+1):se}var b;function z(se,he){var pe=c(se,he);if(!pe)return se+"";var Q=pe[0],ue=pe[1],me=ue-(b=Math.max(-8,Math.min(8,Math.floor(ue/3)))*3)+1,be=Q.length;return me===be?Q:me>be?Q+new Array(me-be+1).join("0"):me>0?Q.slice(0,me)+"."+Q.slice(me):"0."+new Array(1-me).join("0")+c(se,Math.max(0,he+me-1))[0]}function X(se,he){var pe=c(se,he);if(!pe)return se+"";var Q=pe[0],ue=pe[1];return ue<0?"0."+new Array(-ue).join("0")+Q:Q.length>ue+1?Q.slice(0,ue+1)+"."+Q.slice(ue+1):Q+new Array(ue-Q.length+2).join("0")}var N={"%":function(se,he){return(se*100).toFixed(he)},b:function(se){return Math.round(se).toString(2)},c:function(se){return se+""},d:u,e:function(se,he){return se.toExponential(he)},f:function(se,he){return se.toFixed(he)},g:function(se,he){return se.toPrecision(he)},o:function(se){return Math.round(se).toString(8)},p:function(se,he){return X(se*100,he)},r:X,s:z,X:function(se){return Math.round(se).toString(16).toUpperCase()},x:function(se){return Math.round(se).toString(16)}};function O(se){return se}var F=Array.prototype.map,P=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _(se){var he=se.grouping===void 0||se.thousands===void 0?O:v(F.call(se.grouping,Number),se.thousands+""),pe=se.currency===void 0?"":se.currency[0]+"",Q=se.currency===void 0?"":se.currency[1]+"",ue=se.decimal===void 0?".":se.decimal+"",me=se.numerals===void 0?O:p(F.call(se.numerals,String)),be=se.percent===void 0?"%":se.percent+"",ve=se.minus===void 0?"-":se.minus+"",Me=se.nan===void 0?"NaN":se.nan+"";function ke(De){De=w(De);var Oe=De.fill,He=De.align,Be=De.sign,Ye=De.symbol,st=De.zero,it=De.width,yt=De.comma,_e=De.precision,Ee=De.trim,de=De.type;de==="n"?(yt=!0,de="g"):N[de]||(_e===void 0&&(_e=12),Ee=!0,de="g"),(st||Oe==="0"&&He==="=")&&(st=!0,Oe="0",He="=");var we=Ye==="$"?pe:Ye==="#"&&/[boxX]/.test(de)?"0"+de.toLowerCase():"",je=Ye==="$"?Q:/[%p]/.test(de)?be:"",Ae=N[de],$=/[defgprs%]/.test(de);_e=_e===void 0?6:/[gprs]/.test(de)?Math.max(1,Math.min(21,_e)):Math.max(0,Math.min(20,_e));function oe(ge){var Te=we,Ue=je,Ze,Je,ft;if(de==="c")Ue=Ae(ge)+Ue,ge="";else{ge=+ge;var wt=ge<0||1/ge<0;if(ge=isNaN(ge)?Me:Ae(Math.abs(ge),_e),Ee&&(ge=j(ge)),wt&&+ge==0&&Be!=="+"&&(wt=!1),Te=(wt?Be==="("?Be:ve:Be==="-"||Be==="("?"":Be)+Te,Ue=(de==="s"?P[8+b/3]:"")+Ue+(wt&&Be==="("?")":""),$){for(Ze=-1,Je=ge.length;++Ze<Je;)if(ft=ge.charCodeAt(Ze),48>ft||ft>57){Ue=(ft===46?ue+ge.slice(Ze+1):ge.slice(Ze))+Ue,ge=ge.slice(0,Ze);break}}}yt&&!st&&(ge=he(ge,1/0));var Ct=Te.length+ge.length+Ue.length,Kt=Ct<it?new Array(it-Ct+1).join(Oe):"";switch(yt&&st&&(ge=he(Kt+ge,Kt.length?it-Ue.length:1/0),Kt=""),He){case"<":ge=Te+ge+Ue+Kt;break;case"=":ge=Te+Kt+ge+Ue;break;case"^":ge=Kt.slice(0,Ct=Kt.length>>1)+Te+ge+Ue+Kt.slice(Ct);break;default:ge=Kt+Te+ge+Ue;break}return me(ge)}return oe.toString=function(){return De+""},oe}function le(De,Oe){var He=ke((De=w(De),De.type="f",De)),Be=Math.max(-8,Math.min(8,Math.floor(m(Oe)/3)))*3,Ye=Math.pow(10,-Be),st=P[8+Be/3];return function(it){return He(Ye*it)+st}}return{format:ke,formatPrefix:le}}var R;H({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function H(se){return R=_(se),d.format=R.format,d.formatPrefix=R.formatPrefix,R}function te(se){return Math.max(0,-m(Math.abs(se)))}function J(se,he){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(m(he)/3)))*3-m(Math.abs(se)))}function ye(se,he){return se=Math.abs(se),he=Math.abs(he)-se,Math.max(0,m(he)-m(se))+1}d.FormatSpecifier=s,d.formatDefaultLocale=H,d.formatLocale=_,d.formatSpecifier=w,d.precisionFixed=te,d.precisionPrefix=J,d.precisionRound=ye,Object.defineProperty(d,"__esModule",{value:!0})})}}),C=n({"node_modules/is-string-blank/index.js"(ce,fe){fe.exports=function(d){for(var u=d.length,c,m=0;m<u;m++)if(c=d.charCodeAt(m),(c<9||c>13)&&c!==32&&c!==133&&c!==160&&c!==5760&&c!==6158&&(c<8192||c>8205)&&c!==8232&&c!==8233&&c!==8239&&c!==8287&&c!==8288&&c!==12288&&c!==65279)return!1;return!0}}}),B=n({"node_modules/fast-isnumeric/index.js"(ce,fe){var d=C();fe.exports=function(u){var c=typeof u;if(c==="string"){var m=u;if(u=+u,u===0&&d(m))return!1}else if(c!=="number")return!1;return u-u<1}}}),W=n({"src/constants/numerical.js"(ce,fe){fe.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}}}),Y=n({"node_modules/base64-arraybuffer/dist/base64-arraybuffer.umd.js"(ce,fe){(function(d,u){typeof ce=="object"&&typeof fe<"u"?u(ce):(d=typeof globalThis<"u"?globalThis:d||self,u(d["base64-arraybuffer"]={}))})(ce,function(d){for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=typeof Uint8Array>"u"?[]:new Uint8Array(256),m=0;m<u.length;m++)c[u.charCodeAt(m)]=m;var v=function(g){var w=new Uint8Array(g),s,j=w.length,b="";for(s=0;s<j;s+=3)b+=u[w[s]>>2],b+=u[(w[s]&3)<<4|w[s+1]>>4],b+=u[(w[s+1]&15)<<2|w[s+2]>>6],b+=u[w[s+2]&63];return j%3===2?b=b.substring(0,b.length-1)+"=":j%3===1&&(b=b.substring(0,b.length-2)+"=="),b},p=function(g){var w=g.length*.75,s=g.length,j,b=0,z,X,N,O;g[g.length-1]==="="&&(w--,g[g.length-2]==="="&&w--);var F=new ArrayBuffer(w),P=new Uint8Array(F);for(j=0;j<s;j+=4)z=c[g.charCodeAt(j)],X=c[g.charCodeAt(j+1)],N=c[g.charCodeAt(j+2)],O=c[g.charCodeAt(j+3)],P[b++]=z<<2|X>>4,P[b++]=(X&15)<<4|N>>2,P[b++]=(N&3)<<6|O&63;return F};d.decode=p,d.encode=v,Object.defineProperty(d,"__esModule",{value:!0})})}}),Z=n({"src/lib/is_plain_object.js"(ce,fe){fe.exports=function(u){return window&&window.process&&window.process.versions?Object.prototype.toString.call(u)==="[object Object]":Object.prototype.toString.call(u)==="[object Object]"&&Object.getPrototypeOf(u).hasOwnProperty("hasOwnProperty")}}}),T=n({"src/lib/array.js"(ce){var fe=Y().decode,d=Z(),u=Array.isArray,c=ArrayBuffer,m=DataView;function v(z){return c.isView(z)&&!(z instanceof m)}ce.isTypedArray=v;function p(z){return u(z)||v(z)}ce.isArrayOrTypedArray=p;function g(z){return!p(z[0])}ce.isArray1D=g,ce.ensureArray=function(z,X){return u(z)||(z=[]),z.length=X,z};var w={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};w.uint8c=w.u1c,w.uint8=w.u1,w.int8=w.i1,w.uint16=w.u2,w.int16=w.i2,w.uint32=w.u4,w.int32=w.i4,w.float32=w.f4,w.float64=w.f8;function s(z){return z.constructor===ArrayBuffer}ce.isArrayBuffer=s,ce.decodeTypedArraySpec=function(z){var X=[],N=j(z),O=N.dtype,F=w[O];if(!F)throw new Error('Error in dtype: "'+O+'"');var P=F.BYTES_PER_ELEMENT,_=N.bdata;s(_)||(_=fe(_));var R=N.shape===void 0?[_.byteLength/P]:(""+N.shape).split(",");R.reverse();var H=R.length,te,J,ye=+R[0],se=P*ye,he=0;if(H===1)X=new F(_);else if(H===2)for(te=+R[1],J=0;J<te;J++)X[J]=new F(_,he,ye),he+=se;else if(H===3){te=+R[1];for(var pe=+R[2],Q=0;Q<pe;Q++)for(X[Q]=[],J=0;J<te;J++)X[Q][J]=new F(_,he,ye),he+=se}else throw new Error("ndim: "+H+'is not supported with the shape:"'+N.shape+'"');return X.bdata=N.bdata,X.dtype=N.dtype,X.shape=R.reverse().join(","),z._inputArray=X,X},ce.isTypedArraySpec=function(z){return d(z)&&z.hasOwnProperty("dtype")&&typeof z.dtype=="string"&&z.hasOwnProperty("bdata")&&(typeof z.bdata=="string"||s(z.bdata))&&(z.shape===void 0||z.hasOwnProperty("shape")&&(typeof z.shape=="string"||typeof z.shape=="number"))};function j(z){return{bdata:z.bdata,dtype:z.dtype,shape:z.shape}}ce.concat=function(){var z=[],X=!0,N=0,O,F,P,_,R,H,te,J;for(P=0;P<arguments.length;P++)_=arguments[P],H=_.length,H&&(F?z.push(_):(F=_,R=H),u(_)?O=!1:(X=!1,N?O!==_.constructor&&(O=!1):O=_.constructor),N+=H);if(!N)return[];if(!z.length)return F;if(X)return F.concat.apply(F,z);if(O){for(te=new O(N),te.set(F),P=0;P<z.length;P++)_=z[P],te.set(_,R),R+=_.length;return te}for(te=new Array(N),J=0;J<F.length;J++)te[J]=F[J];for(P=0;P<z.length;P++){for(_=z[P],J=0;J<_.length;J++)te[R+J]=_[J];R+=J}return te},ce.maxRowLength=function(z){return b(z,Math.max,0)},ce.minRowLength=function(z){return b(z,Math.min,1/0)};function b(z,X,N){if(p(z))if(p(z[0])){for(var O=N,F=0;F<z.length;F++)O=X(O,z[F].length);return O}else return z.length;return 0}}}),l=n({"src/lib/nested_property.js"(ce,fe){var d=B(),u=T().isArrayOrTypedArray;fe.exports=function(z,X){if(d(X))X=String(X);else if(typeof X!="string"||X.substr(X.length-4)==="[-1]")throw"bad property string";var N=X.split("."),O,F,P,_;for(_=0;_<N.length;_++)if(String(N[_]).slice(0,2)==="__")throw"bad property string";for(_=0;_<N.length;){if(O=String(N[_]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),O){if(O[1])N[_]=O[1];else if(_===0)N.splice(0,1);else throw"bad property string";for(F=O[2].substr(1,O[2].length-2).split("]["),P=0;P<F.length;P++)_++,N.splice(_,0,Number(F[P]))}_++}return typeof z!="object"?j(z,X,N):{set:p(z,N,X),get:c(z,N),astr:X,parts:N,obj:z}};function c(b,z){return function(X){var N=b,O,F,P,_,R;for(_=0;_<z.length-1;_++){if(O=z[_],O===-1){for(F=!0,P=[],R=0;R<N.length;R++)P[R]=c(N[R],z.slice(_+1))(X),P[R]!==P[0]&&(F=!1);return F?P[0]:P}if(typeof O=="number"&&!u(N)||(N=N[O],typeof N!="object"||N===null))return}if(!(typeof N!="object"||N===null)&&(P=N[z[_]],!(!X&&P===null)))return P}}var m=/(^|\.)args\[/;function v(b,z){return b===void 0||b===null&&!z.match(m)}function p(b,z,X){return function(N){var O=b,F="",P=v(N,X),_,R;for(R=0;R<z.length-1;R++){if(_=z[R],typeof _=="number"&&!u(O))throw"array index but container is not an array";if(_===-1){if(P=!w(O,z.slice(R+1),N,X),P)break;return}if(!s(O,_,z[R+1],P))break;if(O=O[_],typeof O!="object"||O===null)throw"container is not an object";F=g(F,_)}if(P){if(R===z.length-1&&(delete O[z[R]],Array.isArray(O)&&+z[R]===O.length-1))for(;O.length&&O[O.length-1]===void 0;)O.pop()}else O[z[R]]=N}}function g(b,z){var X=z;return d(z)?X="["+z+"]":b&&(X="."+z),b+X}function w(b,z,X,N){var O=u(X),F=!0,P=X,_=N.replace("-1",0),R=O?!1:v(X,_),H=z[0],te;for(te=0;te<b.length;te++)_=N.replace("-1",te),O&&(P=X[te%X.length],R=v(P,_)),R&&(F=!1),s(b,te,H,R)&&p(b[te],z,N.replace("-1",te))(P);return F}function s(b,z,X,N){if(b[z]===void 0){if(N)return!1;typeof X=="number"?b[z]=[]:b[z]={}}return!0}function j(b,z,X){return{set:function(){throw"bad container"},get:function(){},astr:z,parts:X,obj:b}}}}),f=n({"src/lib/keyed_container.js"(ce,fe){var d=l(),u=/^\w*$/,c=0,m=1,v=2,p=3,g=4;fe.exports=function(s,j,b,z){b=b||"name",z=z||"value";var X,N,O,F={};j&&j.length?(O=d(s,j),N=O.get()):N=s,j=j||"";var P={};if(N)for(X=0;X<N.length;X++)P[N[X][b]]=X;var _=u.test(z),R={set:function(H,te){var J=te===null?g:c;if(!N){if(!O||J===g)return;N=[],O.set(N)}var ye=P[H];if(ye===void 0){if(J===g)return;J=J|p,ye=N.length,P[H]=ye}else te!==(_?N[ye][z]:d(N[ye],z).get())&&(J=J|v);var se=N[ye]=N[ye]||{};return se[b]=H,_?se[z]=te:d(se,z).set(te),te!==null&&(J=J&~g),F[ye]=F[ye]|J,R},get:function(H){if(N){var te=P[H];if(te!==void 0)return _?N[te][z]:d(N[te],z).get()}},rename:function(H,te){var J=P[H];return J===void 0||(F[J]=F[J]|m,P[te]=J,delete P[H],N[J][b]=te),R},remove:function(H){var te=P[H];if(te===void 0)return R;var J=N[te];if(Object.keys(J).length>2)return F[te]=F[te]|v,R.set(H,null);if(_){for(X=te;X<N.length;X++)F[X]=F[X]|p;for(X=te;X<N.length;X++)P[N[X][b]]--;N.splice(te,1),delete P[H]}else d(J,z).set(null),F[te]=F[te]|v|g;return R},constructUpdate:function(){for(var H,te,J={},ye=Object.keys(F),se=0;se<ye.length;se++)te=ye[se],H=j+"["+te+"]",N[te]?(F[te]&m&&(J[H+"."+b]=N[te][b]),F[te]&v&&(_?J[H+"."+z]=F[te]&g?null:N[te][z]:J[H+"."+z]=F[te]&g?null:d(N[te],z).get())):J[H]=null;return J}};return R}}}),D=n({"src/lib/relative_attr.js"(ce,fe){var d=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,u=/^[^\.\[\]]+$/;fe.exports=function(c,m){for(;m;){var v=c.match(d);if(v)c=v[1];else if(c.match(u))c="";else throw new Error("bad relativeAttr call:"+[c,m]);if(m.charAt(0)==="^")m=m.slice(1);else break}return c&&m.charAt(0)!=="["?c+"."+m:c+m}}}),I=n({"src/lib/to_log_range.js"(ce,fe){var d=B();fe.exports=function(c,m){if(c>0)return Math.log(c)/Math.LN10;var v=Math.log(Math.min(m[0],m[1]))/Math.LN10;return d(v)||(v=Math.log(Math.max(m[0],m[1]))/Math.LN10-6),v}}}),V=n({"src/lib/relink_private.js"(ce,fe){var d=T().isArrayOrTypedArray,u=Z();fe.exports=function c(m,v){for(var p in v){var g=v[p],w=m[p];if(w!==g)if(p.charAt(0)==="_"||typeof g=="function"){if(p in m)continue;m[p]=g}else if(d(g)&&d(w)&&u(g[0])){if(p==="customdata"||p==="ids")continue;for(var s=Math.min(g.length,w.length),j=0;j<s;j++)w[j]!==g[j]&&u(g[j])&&u(w[j])&&c(w[j],g[j])}else u(g)&&u(w)&&(c(w,g),Object.keys(w).length||delete m[p])}}}}),K=n({"src/lib/mod.js"(ce,fe){function d(c,m){var v=c%m;return v<0?v+m:v}function u(c,m){return Math.abs(c)>m/2?c-Math.round(c/m)*m:c}fe.exports={mod:d,modHalf:u}}}),A=n({"node_modules/tinycolor2/tinycolor.js"(ce,fe){(function(d){var u=/^\s+/,c=/\s+$/,m=0,v=d.round,p=d.min,g=d.max,w=d.random;function s($,oe){if($=$||"",oe=oe||{},$ instanceof s)return $;if(!(this instanceof s))return new s($,oe);var ge=j($);this._originalInput=$,this._r=ge.r,this._g=ge.g,this._b=ge.b,this._a=ge.a,this._roundA=v(100*this._a)/100,this._format=oe.format||ge.format,this._gradientType=oe.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=ge.ok,this._tc_id=m++}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var $=this.toRgb();return($.r*299+$.g*587+$.b*114)/1e3},getLuminance:function(){var $=this.toRgb(),oe,ge,Te,Ue,Ze,Je;return oe=$.r/255,ge=$.g/255,Te=$.b/255,oe<=.03928?Ue=oe/12.92:Ue=d.pow((oe+.055)/1.055,2.4),ge<=.03928?Ze=ge/12.92:Ze=d.pow((ge+.055)/1.055,2.4),Te<=.03928?Je=Te/12.92:Je=d.pow((Te+.055)/1.055,2.4),.2126*Ue+.7152*Ze+.0722*Je},setAlpha:function($){return this._a=De($),this._roundA=v(100*this._a)/100,this},toHsv:function(){var $=N(this._r,this._g,this._b);return{h:$.h*360,s:$.s,v:$.v,a:this._a}},toHsvString:function(){var $=N(this._r,this._g,this._b),oe=v($.h*360),ge=v($.s*100),Te=v($.v*100);return this._a==1?"hsv("+oe+", "+ge+"%, "+Te+"%)":"hsva("+oe+", "+ge+"%, "+Te+"%, "+this._roundA+")"},toHsl:function(){var $=z(this._r,this._g,this._b);return{h:$.h*360,s:$.s,l:$.l,a:this._a}},toHslString:function(){var $=z(this._r,this._g,this._b),oe=v($.h*360),ge=v($.s*100),Te=v($.l*100);return this._a==1?"hsl("+oe+", "+ge+"%, "+Te+"%)":"hsla("+oe+", "+ge+"%, "+Te+"%, "+this._roundA+")"},toHex:function($){return F(this._r,this._g,this._b,$)},toHexString:function($){return"#"+this.toHex($)},toHex8:function($){return P(this._r,this._g,this._b,this._a,$)},toHex8String:function($){return"#"+this.toHex8($)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(Oe(this._r,255)*100)+"%",g:v(Oe(this._g,255)*100)+"%",b:v(Oe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(Oe(this._r,255)*100)+"%, "+v(Oe(this._g,255)*100)+"%, "+v(Oe(this._b,255)*100)+"%)":"rgba("+v(Oe(this._r,255)*100)+"%, "+v(Oe(this._g,255)*100)+"%, "+v(Oe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ke[F(this._r,this._g,this._b,!0)]||!1},toFilter:function($){var oe="#"+_(this._r,this._g,this._b,this._a),ge=oe,Te=this._gradientType?"GradientType = 1, ":"";if($){var Ue=s($);ge="#"+_(Ue._r,Ue._g,Ue._b,Ue._a)}return"progid:DXImageTransform.Microsoft.gradient("+Te+"startColorstr="+oe+",endColorstr="+ge+")"},toString:function($){var oe=!!$;$=$||this._format;var ge=!1,Te=this._a<1&&this._a>=0,Ue=!oe&&Te&&($==="hex"||$==="hex6"||$==="hex3"||$==="hex4"||$==="hex8"||$==="name");return Ue?$==="name"&&this._a===0?this.toName():this.toRgbString():($==="rgb"&&(ge=this.toRgbString()),$==="prgb"&&(ge=this.toPercentageRgbString()),($==="hex"||$==="hex6")&&(ge=this.toHexString()),$==="hex3"&&(ge=this.toHexString(!0)),$==="hex4"&&(ge=this.toHex8String(!0)),$==="hex8"&&(ge=this.toHex8String()),$==="name"&&(ge=this.toName()),$==="hsl"&&(ge=this.toHslString()),$==="hsv"&&(ge=this.toHsvString()),ge||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function($,oe){var ge=$.apply(null,[this].concat([].slice.call(oe)));return this._r=ge._r,this._g=ge._g,this._b=ge._b,this.setAlpha(ge._a),this},lighten:function(){return this._applyModification(J,arguments)},brighten:function(){return this._applyModification(ye,arguments)},darken:function(){return this._applyModification(se,arguments)},desaturate:function(){return this._applyModification(R,arguments)},saturate:function(){return this._applyModification(H,arguments)},greyscale:function(){return this._applyModification(te,arguments)},spin:function(){return this._applyModification(he,arguments)},_applyCombination:function($,oe){return $.apply(null,[this].concat([].slice.call(oe)))},analogous:function(){return this._applyCombination(be,arguments)},complement:function(){return this._applyCombination(pe,arguments)},monochromatic:function(){return this._applyCombination(ve,arguments)},splitcomplement:function(){return this._applyCombination(me,arguments)},triad:function(){return this._applyCombination(Q,arguments)},tetrad:function(){return this._applyCombination(ue,arguments)}},s.fromRatio=function($,oe){if(typeof $=="object"){var ge={};for(var Te in $)$.hasOwnProperty(Te)&&(Te==="a"?ge[Te]=$[Te]:ge[Te]=yt($[Te]));$=ge}return s($,oe)};function j($){var oe={r:0,g:0,b:0},ge=1,Te=null,Ue=null,Ze=null,Je=!1,ft=!1;return typeof $=="string"&&($=je($)),typeof $=="object"&&(we($.r)&&we($.g)&&we($.b)?(oe=b($.r,$.g,$.b),Je=!0,ft=String($.r).substr(-1)==="%"?"prgb":"rgb"):we($.h)&&we($.s)&&we($.v)?(Te=yt($.s),Ue=yt($.v),oe=O($.h,Te,Ue),Je=!0,ft="hsv"):we($.h)&&we($.s)&&we($.l)&&(Te=yt($.s),Ze=yt($.l),oe=X($.h,Te,Ze),Je=!0,ft="hsl"),$.hasOwnProperty("a")&&(ge=$.a)),ge=De(ge),{ok:Je,format:$.format||ft,r:p(255,g(oe.r,0)),g:p(255,g(oe.g,0)),b:p(255,g(oe.b,0)),a:ge}}function b($,oe,ge){return{r:Oe($,255)*255,g:Oe(oe,255)*255,b:Oe(ge,255)*255}}function z($,oe,ge){$=Oe($,255),oe=Oe(oe,255),ge=Oe(ge,255);var Te=g($,oe,ge),Ue=p($,oe,ge),Ze,Je,ft=(Te+Ue)/2;if(Te==Ue)Ze=Je=0;else{var wt=Te-Ue;switch(Je=ft>.5?wt/(2-Te-Ue):wt/(Te+Ue),Te){case $:Ze=(oe-ge)/wt+(oe<ge?6:0);break;case oe:Ze=(ge-$)/wt+2;break;case ge:Ze=($-oe)/wt+4;break}Ze/=6}return{h:Ze,s:Je,l:ft}}function X($,oe,ge){var Te,Ue,Ze;$=Oe($,360),oe=Oe(oe,100),ge=Oe(ge,100);function Je(Ct,Kt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?Ct+(Kt-Ct)*6*$t:$t<1/2?Kt:$t<2/3?Ct+(Kt-Ct)*(2/3-$t)*6:Ct}if(oe===0)Te=Ue=Ze=ge;else{var ft=ge<.5?ge*(1+oe):ge+oe-ge*oe,wt=2*ge-ft;Te=Je(wt,ft,$+1/3),Ue=Je(wt,ft,$),Ze=Je(wt,ft,$-1/3)}return{r:Te*255,g:Ue*255,b:Ze*255}}function N($,oe,ge){$=Oe($,255),oe=Oe(oe,255),ge=Oe(ge,255);var Te=g($,oe,ge),Ue=p($,oe,ge),Ze,Je,ft=Te,wt=Te-Ue;if(Je=Te===0?0:wt/Te,Te==Ue)Ze=0;else{switch(Te){case $:Ze=(oe-ge)/wt+(oe<ge?6:0);break;case oe:Ze=(ge-$)/wt+2;break;case ge:Ze=($-oe)/wt+4;break}Ze/=6}return{h:Ze,s:Je,v:ft}}function O($,oe,ge){$=Oe($,360)*6,oe=Oe(oe,100),ge=Oe(ge,100);var Te=d.floor($),Ue=$-Te,Ze=ge*(1-oe),Je=ge*(1-Ue*oe),ft=ge*(1-(1-Ue)*oe),wt=Te%6,Ct=[ge,Je,Ze,Ze,ft,ge][wt],Kt=[ft,ge,ge,Je,Ze,Ze][wt],$t=[Ze,Ze,ft,ge,ge,Je][wt];return{r:Ct*255,g:Kt*255,b:$t*255}}function F($,oe,ge,Te){var Ue=[it(v($).toString(16)),it(v(oe).toString(16)),it(v(ge).toString(16))];return Te&&Ue[0].charAt(0)==Ue[0].charAt(1)&&Ue[1].charAt(0)==Ue[1].charAt(1)&&Ue[2].charAt(0)==Ue[2].charAt(1)?Ue[0].charAt(0)+Ue[1].charAt(0)+Ue[2].charAt(0):Ue.join("")}function P($,oe,ge,Te,Ue){var Ze=[it(v($).toString(16)),it(v(oe).toString(16)),it(v(ge).toString(16)),it(_e(Te))];return Ue&&Ze[0].charAt(0)==Ze[0].charAt(1)&&Ze[1].charAt(0)==Ze[1].charAt(1)&&Ze[2].charAt(0)==Ze[2].charAt(1)&&Ze[3].charAt(0)==Ze[3].charAt(1)?Ze[0].charAt(0)+Ze[1].charAt(0)+Ze[2].charAt(0)+Ze[3].charAt(0):Ze.join("")}function _($,oe,ge,Te){var Ue=[it(_e(Te)),it(v($).toString(16)),it(v(oe).toString(16)),it(v(ge).toString(16))];return Ue.join("")}s.equals=function($,oe){return!$||!oe?!1:s($).toRgbString()==s(oe).toRgbString()},s.random=function(){return s.fromRatio({r:w(),g:w(),b:w()})};function R($,oe){oe=oe===0?0:oe||10;var ge=s($).toHsl();return ge.s-=oe/100,ge.s=He(ge.s),s(ge)}function H($,oe){oe=oe===0?0:oe||10;var ge=s($).toHsl();return ge.s+=oe/100,ge.s=He(ge.s),s(ge)}function te($){return s($).desaturate(100)}function J($,oe){oe=oe===0?0:oe||10;var ge=s($).toHsl();return ge.l+=oe/100,ge.l=He(ge.l),s(ge)}function ye($,oe){oe=oe===0?0:oe||10;var ge=s($).toRgb();return ge.r=g(0,p(255,ge.r-v(255*-(oe/100)))),ge.g=g(0,p(255,ge.g-v(255*-(oe/100)))),ge.b=g(0,p(255,ge.b-v(255*-(oe/100)))),s(ge)}function se($,oe){oe=oe===0?0:oe||10;var ge=s($).toHsl();return ge.l-=oe/100,ge.l=He(ge.l),s(ge)}function he($,oe){var ge=s($).toHsl(),Te=(ge.h+oe)%360;return ge.h=Te<0?360+Te:Te,s(ge)}function pe($){var oe=s($).toHsl();return oe.h=(oe.h+180)%360,s(oe)}function Q($){var oe=s($).toHsl(),ge=oe.h;return[s($),s({h:(ge+120)%360,s:oe.s,l:oe.l}),s({h:(ge+240)%360,s:oe.s,l:oe.l})]}function ue($){var oe=s($).toHsl(),ge=oe.h;return[s($),s({h:(ge+90)%360,s:oe.s,l:oe.l}),s({h:(ge+180)%360,s:oe.s,l:oe.l}),s({h:(ge+270)%360,s:oe.s,l:oe.l})]}function me($){var oe=s($).toHsl(),ge=oe.h;return[s($),s({h:(ge+72)%360,s:oe.s,l:oe.l}),s({h:(ge+216)%360,s:oe.s,l:oe.l})]}function be($,oe,ge){oe=oe||6,ge=ge||30;var Te=s($).toHsl(),Ue=360/ge,Ze=[s($)];for(Te.h=(Te.h-(Ue*oe>>1)+720)%360;--oe;)Te.h=(Te.h+Ue)%360,Ze.push(s(Te));return Ze}function ve($,oe){oe=oe||6;for(var ge=s($).toHsv(),Te=ge.h,Ue=ge.s,Ze=ge.v,Je=[],ft=1/oe;oe--;)Je.push(s({h:Te,s:Ue,v:Ze})),Ze=(Ze+ft)%1;return Je}s.mix=function($,oe,ge){ge=ge===0?0:ge||50;var Te=s($).toRgb(),Ue=s(oe).toRgb(),Ze=ge/100,Je={r:(Ue.r-Te.r)*Ze+Te.r,g:(Ue.g-Te.g)*Ze+Te.g,b:(Ue.b-Te.b)*Ze+Te.b,a:(Ue.a-Te.a)*Ze+Te.a};return s(Je)},s.readability=function($,oe){var ge=s($),Te=s(oe);return(d.max(ge.getLuminance(),Te.getLuminance())+.05)/(d.min(ge.getLuminance(),Te.getLuminance())+.05)},s.isReadable=function($,oe,ge){var Te=s.readability($,oe),Ue,Ze;switch(Ze=!1,Ue=Ae(ge),Ue.level+Ue.size){case"AAsmall":case"AAAlarge":Ze=Te>=4.5;break;case"AAlarge":Ze=Te>=3;break;case"AAAsmall":Ze=Te>=7;break}return Ze},s.mostReadable=function($,oe,ge){var Te=null,Ue=0,Ze,Je,ft,wt;ge=ge||{},Je=ge.includeFallbackColors,ft=ge.level,wt=ge.size;for(var Ct=0;Ct<oe.length;Ct++)Ze=s.readability($,oe[Ct]),Ze>Ue&&(Ue=Ze,Te=s(oe[Ct]));return s.isReadable($,Te,{level:ft,size:wt})||!Je?Te:(ge.includeFallbackColors=!1,s.mostReadable($,["#fff","#000"],ge))};var Me=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ke=s.hexNames=le(Me);function le($){var oe={};for(var ge in $)$.hasOwnProperty(ge)&&(oe[$[ge]]=ge);return oe}function De($){return $=parseFloat($),(isNaN($)||$<0||$>1)&&($=1),$}function Oe($,oe){Ye($)&&($="100%");var ge=st($);return $=p(oe,g(0,parseFloat($))),ge&&($=parseInt($*oe,10)/100),d.abs($-oe)<1e-6?1:$%oe/parseFloat(oe)}function He($){return p(1,g(0,$))}function Be($){return parseInt($,16)}function Ye($){return typeof $=="string"&&$.indexOf(".")!=-1&&parseFloat($)===1}function st($){return typeof $=="string"&&$.indexOf("%")!=-1}function it($){return $.length==1?"0"+$:""+$}function yt($){return $<=1&&($=$*100+"%"),$}function _e($){return d.round(parseFloat($)*255).toString(16)}function Ee($){return Be($)/255}var de=(function(){var $="[-\\+]?\\d+%?",oe="[-\\+]?\\d*\\.\\d+%?",ge="(?:"+oe+")|(?:"+$+")",Te="[\\s|\\(]+("+ge+")[,|\\s]+("+ge+")[,|\\s]+("+ge+")\\s*\\)?",Ue="[\\s|\\(]+("+ge+")[,|\\s]+("+ge+")[,|\\s]+("+ge+")[,|\\s]+("+ge+")\\s*\\)?";return{CSS_UNIT:new RegExp(ge),rgb:new RegExp("rgb"+Te),rgba:new RegExp("rgba"+Ue),hsl:new RegExp("hsl"+Te),hsla:new RegExp("hsla"+Ue),hsv:new RegExp("hsv"+Te),hsva:new RegExp("hsva"+Ue),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function we($){return!!de.CSS_UNIT.exec($)}function je($){$=$.replace(u,"").replace(c,"").toLowerCase();var oe=!1;if(Me[$])$=Me[$],oe=!0;else if($=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ge;return(ge=de.rgb.exec($))?{r:ge[1],g:ge[2],b:ge[3]}:(ge=de.rgba.exec($))?{r:ge[1],g:ge[2],b:ge[3],a:ge[4]}:(ge=de.hsl.exec($))?{h:ge[1],s:ge[2],l:ge[3]}:(ge=de.hsla.exec($))?{h:ge[1],s:ge[2],l:ge[3],a:ge[4]}:(ge=de.hsv.exec($))?{h:ge[1],s:ge[2],v:ge[3]}:(ge=de.hsva.exec($))?{h:ge[1],s:ge[2],v:ge[3],a:ge[4]}:(ge=de.hex8.exec($))?{r:Be(ge[1]),g:Be(ge[2]),b:Be(ge[3]),a:Ee(ge[4]),format:oe?"name":"hex8"}:(ge=de.hex6.exec($))?{r:Be(ge[1]),g:Be(ge[2]),b:Be(ge[3]),format:oe?"name":"hex"}:(ge=de.hex4.exec($))?{r:Be(ge[1]+""+ge[1]),g:Be(ge[2]+""+ge[2]),b:Be(ge[3]+""+ge[3]),a:Ee(ge[4]+""+ge[4]),format:oe?"name":"hex8"}:(ge=de.hex3.exec($))?{r:Be(ge[1]+""+ge[1]),g:Be(ge[2]+""+ge[2]),b:Be(ge[3]+""+ge[3]),format:oe?"name":"hex"}:!1}function Ae($){var oe,ge;return $=$||{level:"AA",size:"small"},oe=($.level||"AA").toUpperCase(),ge=($.size||"small").toLowerCase(),oe!=="AA"&&oe!=="AAA"&&(oe="AA"),ge!=="small"&&ge!=="large"&&(ge="small"),{level:oe,size:ge}}typeof fe<"u"&&fe.exports?fe.exports=s:window.tinycolor=s})(Math)}}),L=n({"src/lib/extend.js"(ce){var fe=Z(),d=Array.isArray;function u(m,v){var p,g;for(p=0;p<m.length;p++){if(g=m[p],g!==null&&typeof g=="object")return!1;g!==void 0&&(v[p]=g)}return!0}ce.extendFlat=function(){return c(arguments,!1,!1,!1)},ce.extendDeep=function(){return c(arguments,!0,!1,!1)},ce.extendDeepAll=function(){return c(arguments,!0,!0,!1)},ce.extendDeepNoArrays=function(){return c(arguments,!0,!1,!0)};function c(m,v,p,g){var w=m[0],s=m.length,j,b,z,X,N,O,F;if(s===2&&d(w)&&d(m[1])&&w.length===0){if(F=u(m[1],w),F)return w;w.splice(0,w.length)}for(var P=1;P<s;P++){j=m[P];for(b in j)z=w[b],X=j[b],g&&d(X)?w[b]=X:v&&X&&(fe(X)||(N=d(X)))?(N?(N=!1,O=z&&d(z)?z:[]):O=z&&fe(z)?z:{},w[b]=c([O,X],v,p,g)):(typeof X<"u"||p)&&(w[b]=X)}return w}}}),G=n({"src/plots/font_attributes.js"(ce,fe){fe.exports=function(d){var u=d.variantValues,c=d.editType,m=d.colorEditType;m===void 0&&(m=c);var v={editType:c,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};d.noNumericWeightValues&&(v.valType="enumerated",v.values=v.extras,v.extras=void 0,v.min=void 0,v.max=void 0);var p={family:{valType:"string",noBlank:!0,strict:!0,editType:c},size:{valType:"number",min:1,editType:c},color:{valType:"color",editType:m},weight:v,style:{editType:c,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:d.noFontVariant?void 0:{editType:c,valType:"enumerated",values:u||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:d.noFontTextcase?void 0:{editType:c,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:d.noFontLineposition?void 0:{editType:c,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:d.noFontShadow?void 0:{editType:c,valType:"string",dflt:d.autoShadowDflt?"auto":"none"},editType:c};return d.autoSize&&(p.size.dflt="auto"),d.autoColor&&(p.color.dflt="auto"),d.arrayOk&&(p.family.arrayOk=!0,p.weight.arrayOk=!0,p.style.arrayOk=!0,d.noFontVariant||(p.variant.arrayOk=!0),d.noFontTextcase||(p.textcase.arrayOk=!0),d.noFontLineposition||(p.lineposition.arrayOk=!0),d.noFontShadow||(p.shadow.arrayOk=!0),p.size.arrayOk=!0,p.color.arrayOk=!0),p}}}),ee=n({"src/components/fx/constants.js"(ce,fe){fe.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}}}),ae=n({"src/components/fx/layout_attributes.js"(ce,fe){var d=ee(),u=G(),c=u({editType:"none"});c.family.dflt=d.HOVERFONT,c.size.dflt=d.HOVERFONTSIZE,fe.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:c,grouptitlefont:u({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},showarrow:{valType:"boolean",dflt:!0,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}}}),Se=n({"src/components/fx/attributes.js"(ce,fe){var d=G(),u=ae().hoverlabel,c=L().extendFlat;fe.exports={hoverlabel:{bgcolor:c({},u.bgcolor,{arrayOk:!0}),bordercolor:c({},u.bordercolor,{arrayOk:!0}),font:d({arrayOk:!0,editType:"none"}),align:c({},u.align,{arrayOk:!0}),namelength:c({},u.namelength,{arrayOk:!0}),showarrow:c({},u.showarrow),editType:"none"}}}}),$e=n({"src/plots/attributes.js"(ce,fe){var d=G(),u=Se();fe.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:d({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:u.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}}}),qe=n({"src/components/colorscale/scales.js"(ce,fe){var d=A(),u={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},c=u.RdBu;function m(g,w){if(w||(w=c),!g)return w;function s(){try{g=u[g]||JSON.parse(g)}catch{g=w}}return typeof g=="string"&&(s(),typeof g=="string"&&s()),v(g)?g:w}function v(g){var w=0;if(!Array.isArray(g)||g.length<2||!g[0]||!g[g.length-1]||+g[0][0]!=0||+g[g.length-1][0]!=1)return!1;for(var s=0;s<g.length;s++){var j=g[s];if(j.length!==2||+j[0]<w||!d(j[1]).isValid())return!1;w=+j[0]}return!0}function p(g){return u[g]!==void 0?!0:v(g)}fe.exports={scales:u,defaultScale:c,get:m,isValid:p}}}),Pe=n({"src/components/color/attributes.js"(ce){ce.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ce.defaultLine="#444",ce.lightLine="#eee",ce.background="#fff",ce.borderLine="#BEC8D9",ce.lightFraction=1e3/11}}),Ve=n({"src/components/color/index.js"(ce,fe){var d=A(),u=B(),c=T().isTypedArray,m=fe.exports={},v=Pe();m.defaults=v.defaults;var p=m.defaultLine=v.defaultLine;m.lightLine=v.lightLine;var g=m.background=v.background;m.tinyRGB=function(s){var j=s.toRgb();return"rgb("+Math.round(j.r)+", "+Math.round(j.g)+", "+Math.round(j.b)+")"},m.rgb=function(s){return m.tinyRGB(d(s))},m.opacity=function(s){return s?d(s).getAlpha():0},m.addOpacity=function(s,j){var b=d(s).toRgb();return"rgba("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+", "+j+")"},m.combine=function(s,j){var b=d(s).toRgb();if(b.a===1)return d(s).toRgbString();var z=d(j||g).toRgb(),X=z.a===1?z:{r:255*(1-z.a)+z.r*z.a,g:255*(1-z.a)+z.g*z.a,b:255*(1-z.a)+z.b*z.a},N={r:X.r*(1-b.a)+b.r*b.a,g:X.g*(1-b.a)+b.g*b.a,b:X.b*(1-b.a)+b.b*b.a};return d(N).toRgbString()},m.interpolate=function(s,j,b){var z=d(s).toRgb(),X=d(j).toRgb(),N={r:b*z.r+(1-b)*X.r,g:b*z.g+(1-b)*X.g,b:b*z.b+(1-b)*X.b};return d(N).toRgbString()},m.contrast=function(s,j,b){var z=d(s);z.getAlpha()!==1&&(z=d(m.combine(s,g)));var X=z.isDark()?j?z.lighten(j):g:b?z.darken(b):p;return X.toString()},m.stroke=function(s,j){var b=d(j);s.style({stroke:m.tinyRGB(b),"stroke-opacity":b.getAlpha()})},m.fill=function(s,j){var b=d(j);s.style({fill:m.tinyRGB(b),"fill-opacity":b.getAlpha()})},m.clean=function(s){if(!(!s||typeof s!="object")){var j=Object.keys(s),b,z,X,N;for(b=0;b<j.length;b++)if(X=j[b],N=s[X],X.substr(X.length-5)==="color")if(Array.isArray(N))for(z=0;z<N.length;z++)N[z]=w(N[z]);else s[X]=w(N);else if(X.substr(X.length-10)==="colorscale"&&Array.isArray(N))for(z=0;z<N.length;z++)Array.isArray(N[z])&&(N[z][1]=w(N[z][1]));else if(Array.isArray(N)){var O=N[0];if(!Array.isArray(O)&&O&&typeof O=="object")for(z=0;z<N.length;z++)m.clean(N[z])}else N&&typeof N=="object"&&!c(N)&&m.clean(N)}};function w(s){if(u(s)||typeof s!="string")return s;var j=s.trim();if(j.substr(0,3)!=="rgb")return s;var b=j.match(/^rgba?\s*\(([^()]*)\)$/);if(!b)return s;var z=b[1].trim().split(/\s*[\s,]\s*/),X=j.charAt(3)==="a"&&z.length===4;if(!X&&z.length!==3)return s;for(var N=0;N<z.length;N++){if(!z[N].length||(z[N]=Number(z[N]),!(z[N]>=0)))return s;if(N===3)z[N]>1&&(z[N]=1);else if(z[N]>=1)return s}var O=Math.round(z[0]*255)+", "+Math.round(z[1]*255)+", "+Math.round(z[2]*255);return X?"rgba("+O+", "+z[3]+")":"rgb("+O+")"}}}),Ie=n({"src/constants/interactions.js"(ce,fe){fe.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}}}),Xe=n({"src/lib/regex.js"(ce){ce.counter=function(fe,d,u,c){var m=(d||"")+(u?"":"$"),v=c===!1?"":"^";return fe==="xy"?new RegExp(v+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+m):new RegExp(v+fe+"([2-9]|[1-9][0-9]+)?"+m)}}}),et=n({"src/lib/coerce.js"(ce){var fe=B(),d=A(),u=L().extendFlat,c=$e(),m=qe(),v=Ve(),p=Ie().DESELECTDIM,g=l(),w=Xe().counter,s=K().modHalf,j=T().isArrayOrTypedArray,b=T().isTypedArraySpec,z=T().decodeTypedArraySpec;ce.valObjectMeta={data_array:{coerceFunction:function(N,O,F){O.set(j(N)?N:b(N)?z(N):F)}},enumerated:{coerceFunction:function(N,O,F,P){P.coerceNumber&&(N=+N),P.values.indexOf(N)===-1?O.set(F):O.set(N)},validateFunction:function(N,O){O.coerceNumber&&(N=+N);for(var F=O.values,P=0;P<F.length;P++){var _=String(F[P]);if(_.charAt(0)==="/"&&_.charAt(_.length-1)==="/"){var R=new RegExp(_.substr(1,_.length-2));if(R.test(N))return!0}else if(N===F[P])return!0}return!1}},boolean:{coerceFunction:function(N,O,F){N===!0||N===!1?O.set(N):O.set(F)}},number:{coerceFunction:function(N,O,F,P){b(N)&&(N=z(N)),!fe(N)||P.min!==void 0&&N<P.min||P.max!==void 0&&N>P.max?O.set(F):O.set(+N)}},integer:{coerceFunction:function(N,O,F,P){if((P.extras||[]).indexOf(N)!==-1){O.set(N);return}b(N)&&(N=z(N)),N%1||!fe(N)||P.min!==void 0&&N<P.min||P.max!==void 0&&N>P.max?O.set(F):O.set(+N)}},string:{coerceFunction:function(N,O,F,P){if(typeof N!="string"){var _=typeof N=="number";P.strict===!0||!_?O.set(F):O.set(String(N))}else P.noBlank&&!N?O.set(F):O.set(N)}},color:{coerceFunction:function(N,O,F){b(N)&&(N=z(N)),d(N).isValid()?O.set(N):O.set(F)}},colorlist:{coerceFunction:function(N,O,F){function P(_){return d(_).isValid()}!Array.isArray(N)||!N.length?O.set(F):N.every(P)?O.set(N):O.set(F)}},colorscale:{coerceFunction:function(N,O,F){O.set(m.get(N,F))}},angle:{coerceFunction:function(N,O,F){b(N)&&(N=z(N)),N==="auto"?O.set("auto"):fe(N)?O.set(s(+N,360)):O.set(F)}},subplotid:{coerceFunction:function(N,O,F,P){var _=P.regex||w(F);if(typeof N=="string"&&_.test(N)){O.set(N);return}O.set(F)},validateFunction:function(N,O){var F=O.dflt;return N===F?!0:typeof N!="string"?!1:!!w(F).test(N)}},flaglist:{coerceFunction:function(N,O,F,P){if((P.extras||[]).indexOf(N)!==-1){O.set(N);return}if(typeof N!="string"){O.set(F);return}for(var _=N.split("+"),R=0;R<_.length;){var H=_[R];P.flags.indexOf(H)===-1||_.indexOf(H)<R?_.splice(R,1):R++}_.length?O.set(_.join("+")):O.set(F)}},any:{coerceFunction:function(N,O,F){N===void 0?O.set(F):O.set(b(N)?z(N):N)}},info_array:{coerceFunction:function(N,O,F,P){function _(Me,ke,le){var De,Oe={set:function(He){De=He}};return le===void 0&&(le=ke.dflt),ce.valObjectMeta[ke.valType].coerceFunction(Me,Oe,le,ke),De}if(b(N)&&(N=z(N)),!j(N)){O.set(F);return}var R=P.dimensions===2||P.dimensions==="1-2"&&Array.isArray(N)&&j(N[0]),H=P.items,te=[],J=Array.isArray(H),ye=J&&R&&j(H[0]),se=R&&J&&!ye,he=J&&!se?H.length:N.length,pe,Q,ue,me,be,ve;if(F=Array.isArray(F)?F:[],R)for(pe=0;pe<he;pe++)for(te[pe]=[],ue=j(N[pe])?N[pe]:[],se?be=H.length:J?be=H[pe].length:be=ue.length,Q=0;Q<be;Q++)se?me=H[Q]:J?me=H[pe][Q]:me=H,ve=_(ue[Q],me,(F[pe]||[])[Q]),ve!==void 0&&(te[pe][Q]=ve);else for(pe=0;pe<he;pe++)ve=_(N[pe],J?H[pe]:H,F[pe]),ve!==void 0&&(te[pe]=ve);O.set(te)},validateFunction:function(N,O){if(!j(N))return!1;var F=O.items,P=Array.isArray(F),_=O.dimensions===2;if(!O.freeLength&&N.length!==F.length)return!1;for(var R=0;R<N.length;R++)if(_){if(!j(N[R])||!O.freeLength&&N[R].length!==F[R].length)return!1;for(var H=0;H<N[R].length;H++)if(!X(N[R][H],P?F[R][H]:F))return!1}else if(!X(N[R],P?F[R]:F))return!1;return!0}}},ce.coerce=function(N,O,F,P,_){var R=g(F,P).get(),H=g(N,P),te=g(O,P),J=H.get(),ye=O._template;if(J===void 0&&ye&&(J=g(ye,P).get(),ye=0),_===void 0&&(_=R.dflt),R.arrayOk){if(j(J))return te.set(J),J;if(b(J))return J=z(J),te.set(J),J}var se=ce.valObjectMeta[R.valType].coerceFunction;se(J,te,_,R);var he=te.get();return ye&&he===_&&!X(J,R)&&(J=g(ye,P).get(),se(J,te,_,R),he=te.get()),he},ce.coerce2=function(N,O,F,P,_){var R=g(N,P),H=ce.coerce(N,O,F,P,_),te=R.get();return te!=null?H:!1},ce.coerceFont=function(N,O,F,P){P||(P={}),F=u({},F),F=u(F,P.overrideDflt||{});var _={family:N(O+".family",F.family),size:N(O+".size",F.size),color:N(O+".color",F.color),weight:N(O+".weight",F.weight),style:N(O+".style",F.style)};if(P.noFontVariant||(_.variant=N(O+".variant",F.variant)),P.noFontLineposition||(_.lineposition=N(O+".lineposition",F.lineposition)),P.noFontTextcase||(_.textcase=N(O+".textcase",F.textcase)),!P.noFontShadow){var R=F.shadow;R==="none"&&P.autoShadowDflt&&(R="auto"),_.shadow=N(O+".shadow",R)}return _},ce.coercePattern=function(N,O,F,P){var _=N(O+".shape"),R;if(_||(R=N(O+".path")),_||R){_&&N(O+".solidity"),N(O+".size");var H=N(O+".fillmode"),te=H==="overlay";if(!P){var J=N(O+".bgcolor",te?F:void 0);N(O+".fgcolor",te?v.contrast(J):F)}N(O+".fgopacity",te?.5:1)}},ce.coerceHoverinfo=function(N,O,F){var P=O._module.attributes,_=P.hoverinfo?P:c,R=_.hoverinfo,H;if(F._dataLength===1){var te=R.dflt==="all"?R.flags.slice():R.dflt.split("+");te.splice(te.indexOf("name"),1),H=te.join("+")}return ce.coerce(N,O,_,"hoverinfo",H)},ce.coerceSelectionMarkerOpacity=function(N,O){if(N.marker){var F=N.marker.opacity;if(F!==void 0){var P,_;!j(F)&&!N.selected&&!N.unselected&&(P=F,_=p*F),O("selected.marker.opacity",P),O("unselected.marker.opacity",_)}}};function X(N,O){var F=ce.valObjectMeta[O.valType];if(O.arrayOk&&j(N))return!0;if(F.validateFunction)return F.validateFunction(N,O);var P={},_=P,R={set:function(H){_=H}};return F.coerceFunction(N,R,P,O),_!==P}ce.validate=X}}),tt=n({"src/plot_api/plot_config.js"(ce,fe){var d={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/un/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},u={};function c(m,v){for(var p in m){var g=m[p];g.valType?v[p]=g.dflt:(v[p]||(v[p]={}),c(g,v[p]))}}c(d,u),fe.exports={configAttributes:d,dfltConfig:u}}}),rt=n({"src/lib/notifier.js"(ce,fe){var d=k(),u=B(),c=[];fe.exports=function(m,v){if(c.indexOf(m)!==-1)return;c.push(m);var p=1e3;u(v)?p=v:v==="long"&&(p=3e3);var g=d.select("body").selectAll(".plotly-notifier").data([0]);g.enter().append("div").classed("plotly-notifier",!0);var w=g.selectAll(".notifier-note").data(c);function s(j){j.duration(700).style("opacity",0).each("end",function(b){var z=c.indexOf(b);z!==-1&&c.splice(z,1),d.select(this).remove()})}w.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(j){var b=d.select(this);b.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){b.transition().call(s)});for(var z=b.append("p"),X=j.split(/<br\s*\/?>/g),N=0;N<X.length;N++)N&&z.append("br"),z.append("span").text(X[N]);v==="stick"?b.transition().duration(350).style("opacity",1):b.transition().duration(700).style("opacity",1).transition().delay(p).call(s)})}}}),ze=n({"src/lib/loggers.js"(ce,fe){var d=tt().dfltConfig,u=rt(),c=fe.exports={};c.log=function(){var m;if(d.logging>1){var v=["LOG:"];for(m=0;m<arguments.length;m++)v.push(arguments[m]);console.trace.apply(console,v)}if(d.notifyOnLogging>1){var p=[];for(m=0;m<arguments.length;m++)p.push(arguments[m]);u(p.join("<br>"),"long")}},c.warn=function(){var m;if(d.logging>0){var v=["WARN:"];for(m=0;m<arguments.length;m++)v.push(arguments[m]);console.trace.apply(console,v)}if(d.notifyOnLogging>0){var p=[];for(m=0;m<arguments.length;m++)p.push(arguments[m]);u(p.join("<br>"),"stick")}},c.error=function(){var m;if(d.logging>0){var v=["ERROR:"];for(m=0;m<arguments.length;m++)v.push(arguments[m]);console.error.apply(console,v)}if(d.notifyOnLogging>0){var p=[];for(m=0;m<arguments.length;m++)p.push(arguments[m]);u(p.join("<br>"),"stick")}}}}),lt=n({"src/lib/noop.js"(ce,fe){fe.exports=function(){}}}),bt=n({"src/lib/push_unique.js"(ce,fe){fe.exports=function(u,c){if(c instanceof RegExp){for(var m=c.toString(),v=0;v<u.length;v++)if(u[v]instanceof RegExp&&u[v].toString()===m)return u;u.push(c)}else(c||c===0)&&u.indexOf(c)===-1&&u.push(c);return u}}}),At=n({"node_modules/gl-mat4/create.js"(ce,fe){fe.exports=d;function d(){var u=new Float32Array(16);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}}}),Vt=n({"node_modules/gl-mat4/clone.js"(ce,fe){fe.exports=d;function d(u){var c=new Float32Array(16);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c}}}),Yt=n({"node_modules/gl-mat4/copy.js"(ce,fe){fe.exports=d;function d(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u}}}),er=n({"node_modules/gl-mat4/identity.js"(ce,fe){fe.exports=d;function d(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}}}),lr=n({"node_modules/gl-mat4/transpose.js"(ce,fe){fe.exports=d;function d(u,c){if(u===c){var m=c[1],v=c[2],p=c[3],g=c[6],w=c[7],s=c[11];u[1]=c[4],u[2]=c[8],u[3]=c[12],u[4]=m,u[6]=c[9],u[7]=c[13],u[8]=v,u[9]=g,u[11]=c[14],u[12]=p,u[13]=w,u[14]=s}else u[0]=c[0],u[1]=c[4],u[2]=c[8],u[3]=c[12],u[4]=c[1],u[5]=c[5],u[6]=c[9],u[7]=c[13],u[8]=c[2],u[9]=c[6],u[10]=c[10],u[11]=c[14],u[12]=c[3],u[13]=c[7],u[14]=c[11],u[15]=c[15];return u}}}),yr=n({"node_modules/gl-mat4/invert.js"(ce,fe){fe.exports=d;function d(u,c){var m=c[0],v=c[1],p=c[2],g=c[3],w=c[4],s=c[5],j=c[6],b=c[7],z=c[8],X=c[9],N=c[10],O=c[11],F=c[12],P=c[13],_=c[14],R=c[15],H=m*s-v*w,te=m*j-p*w,J=m*b-g*w,ye=v*j-p*s,se=v*b-g*s,he=p*b-g*j,pe=z*P-X*F,Q=z*_-N*F,ue=z*R-O*F,me=X*_-N*P,be=X*R-O*P,ve=N*R-O*_,Me=H*ve-te*be+J*me+ye*ue-se*Q+he*pe;return Me?(Me=1/Me,u[0]=(s*ve-j*be+b*me)*Me,u[1]=(p*be-v*ve-g*me)*Me,u[2]=(P*he-_*se+R*ye)*Me,u[3]=(N*se-X*he-O*ye)*Me,u[4]=(j*ue-w*ve-b*Q)*Me,u[5]=(m*ve-p*ue+g*Q)*Me,u[6]=(_*J-F*he-R*te)*Me,u[7]=(z*he-N*J+O*te)*Me,u[8]=(w*be-s*ue+b*pe)*Me,u[9]=(v*ue-m*be-g*pe)*Me,u[10]=(F*se-P*J+R*H)*Me,u[11]=(X*J-z*se-O*H)*Me,u[12]=(s*Q-w*me-j*pe)*Me,u[13]=(m*me-v*Q+p*pe)*Me,u[14]=(P*te-F*ye-_*H)*Me,u[15]=(z*ye-X*te+N*H)*Me,u):null}}}),$r=n({"node_modules/gl-mat4/adjoint.js"(ce,fe){fe.exports=d;function d(u,c){var m=c[0],v=c[1],p=c[2],g=c[3],w=c[4],s=c[5],j=c[6],b=c[7],z=c[8],X=c[9],N=c[10],O=c[11],F=c[12],P=c[13],_=c[14],R=c[15];return u[0]=s*(N*R-O*_)-X*(j*R-b*_)+P*(j*O-b*N),u[1]=-(v*(N*R-O*_)-X*(p*R-g*_)+P*(p*O-g*N)),u[2]=v*(j*R-b*_)-s*(p*R-g*_)+P*(p*b-g*j),u[3]=-(v*(j*O-b*N)-s*(p*O-g*N)+X*(p*b-g*j)),u[4]=-(w*(N*R-O*_)-z*(j*R-b*_)+F*(j*O-b*N)),u[5]=m*(N*R-O*_)-z*(p*R-g*_)+F*(p*O-g*N),u[6]=-(m*(j*R-b*_)-w*(p*R-g*_)+F*(p*b-g*j)),u[7]=m*(j*O-b*N)-w*(p*O-g*N)+z*(p*b-g*j),u[8]=w*(X*R-O*P)-z*(s*R-b*P)+F*(s*O-b*X),u[9]=-(m*(X*R-O*P)-z*(v*R-g*P)+F*(v*O-g*X)),u[10]=m*(s*R-b*P)-w*(v*R-g*P)+F*(v*b-g*s),u[11]=-(m*(s*O-b*X)-w*(v*O-g*X)+z*(v*b-g*s)),u[12]=-(w*(X*_-N*P)-z*(s*_-j*P)+F*(s*N-j*X)),u[13]=m*(X*_-N*P)-z*(v*_-p*P)+F*(v*N-p*X),u[14]=-(m*(s*_-j*P)-w*(v*_-p*P)+F*(v*j-p*s)),u[15]=m*(s*N-j*X)-w*(v*N-p*X)+z*(v*j-p*s),u}}}),ia=n({"node_modules/gl-mat4/determinant.js"(ce,fe){fe.exports=d;function d(u){var c=u[0],m=u[1],v=u[2],p=u[3],g=u[4],w=u[5],s=u[6],j=u[7],b=u[8],z=u[9],X=u[10],N=u[11],O=u[12],F=u[13],P=u[14],_=u[15],R=c*w-m*g,H=c*s-v*g,te=c*j-p*g,J=m*s-v*w,ye=m*j-p*w,se=v*j-p*s,he=b*F-z*O,pe=b*P-X*O,Q=b*_-N*O,ue=z*P-X*F,me=z*_-N*F,be=X*_-N*P;return R*be-H*me+te*ue+J*Q-ye*pe+se*he}}}),Sa=n({"node_modules/gl-mat4/multiply.js"(ce,fe){fe.exports=d;function d(u,c,m){var v=c[0],p=c[1],g=c[2],w=c[3],s=c[4],j=c[5],b=c[6],z=c[7],X=c[8],N=c[9],O=c[10],F=c[11],P=c[12],_=c[13],R=c[14],H=c[15],te=m[0],J=m[1],ye=m[2],se=m[3];return u[0]=te*v+J*s+ye*X+se*P,u[1]=te*p+J*j+ye*N+se*_,u[2]=te*g+J*b+ye*O+se*R,u[3]=te*w+J*z+ye*F+se*H,te=m[4],J=m[5],ye=m[6],se=m[7],u[4]=te*v+J*s+ye*X+se*P,u[5]=te*p+J*j+ye*N+se*_,u[6]=te*g+J*b+ye*O+se*R,u[7]=te*w+J*z+ye*F+se*H,te=m[8],J=m[9],ye=m[10],se=m[11],u[8]=te*v+J*s+ye*X+se*P,u[9]=te*p+J*j+ye*N+se*_,u[10]=te*g+J*b+ye*O+se*R,u[11]=te*w+J*z+ye*F+se*H,te=m[12],J=m[13],ye=m[14],se=m[15],u[12]=te*v+J*s+ye*X+se*P,u[13]=te*p+J*j+ye*N+se*_,u[14]=te*g+J*b+ye*O+se*R,u[15]=te*w+J*z+ye*F+se*H,u}}}),Xr=n({"node_modules/gl-mat4/translate.js"(ce,fe){fe.exports=d;function d(u,c,m){var v=m[0],p=m[1],g=m[2],w,s,j,b,z,X,N,O,F,P,_,R;return c===u?(u[12]=c[0]*v+c[4]*p+c[8]*g+c[12],u[13]=c[1]*v+c[5]*p+c[9]*g+c[13],u[14]=c[2]*v+c[6]*p+c[10]*g+c[14],u[15]=c[3]*v+c[7]*p+c[11]*g+c[15]):(w=c[0],s=c[1],j=c[2],b=c[3],z=c[4],X=c[5],N=c[6],O=c[7],F=c[8],P=c[9],_=c[10],R=c[11],u[0]=w,u[1]=s,u[2]=j,u[3]=b,u[4]=z,u[5]=X,u[6]=N,u[7]=O,u[8]=F,u[9]=P,u[10]=_,u[11]=R,u[12]=w*v+z*p+F*g+c[12],u[13]=s*v+X*p+P*g+c[13],u[14]=j*v+N*p+_*g+c[14],u[15]=b*v+O*p+R*g+c[15]),u}}}),fr=n({"node_modules/gl-mat4/scale.js"(ce,fe){fe.exports=d;function d(u,c,m){var v=m[0],p=m[1],g=m[2];return u[0]=c[0]*v,u[1]=c[1]*v,u[2]=c[2]*v,u[3]=c[3]*v,u[4]=c[4]*p,u[5]=c[5]*p,u[6]=c[6]*p,u[7]=c[7]*p,u[8]=c[8]*g,u[9]=c[9]*g,u[10]=c[10]*g,u[11]=c[11]*g,u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u}}}),Hr=n({"node_modules/gl-mat4/rotate.js"(ce,fe){fe.exports=d;function d(u,c,m,v){var p=v[0],g=v[1],w=v[2],s=Math.sqrt(p*p+g*g+w*w),j,b,z,X,N,O,F,P,_,R,H,te,J,ye,se,he,pe,Q,ue,me,be,ve,Me,ke;return Math.abs(s)<1e-6?null:(s=1/s,p*=s,g*=s,w*=s,j=Math.sin(m),b=Math.cos(m),z=1-b,X=c[0],N=c[1],O=c[2],F=c[3],P=c[4],_=c[5],R=c[6],H=c[7],te=c[8],J=c[9],ye=c[10],se=c[11],he=p*p*z+b,pe=g*p*z+w*j,Q=w*p*z-g*j,ue=p*g*z-w*j,me=g*g*z+b,be=w*g*z+p*j,ve=p*w*z+g*j,Me=g*w*z-p*j,ke=w*w*z+b,u[0]=X*he+P*pe+te*Q,u[1]=N*he+_*pe+J*Q,u[2]=O*he+R*pe+ye*Q,u[3]=F*he+H*pe+se*Q,u[4]=X*ue+P*me+te*be,u[5]=N*ue+_*me+J*be,u[6]=O*ue+R*me+ye*be,u[7]=F*ue+H*me+se*be,u[8]=X*ve+P*Me+te*ke,u[9]=N*ve+_*Me+J*ke,u[10]=O*ve+R*Me+ye*ke,u[11]=F*ve+H*Me+se*ke,c!==u&&(u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u)}}}),ya=n({"node_modules/gl-mat4/rotateX.js"(ce,fe){fe.exports=d;function d(u,c,m){var v=Math.sin(m),p=Math.cos(m),g=c[4],w=c[5],s=c[6],j=c[7],b=c[8],z=c[9],X=c[10],N=c[11];return c!==u&&(u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[4]=g*p+b*v,u[5]=w*p+z*v,u[6]=s*p+X*v,u[7]=j*p+N*v,u[8]=b*p-g*v,u[9]=z*p-w*v,u[10]=X*p-s*v,u[11]=N*p-j*v,u}}}),Ta=n({"node_modules/gl-mat4/rotateY.js"(ce,fe){fe.exports=d;function d(u,c,m){var v=Math.sin(m),p=Math.cos(m),g=c[0],w=c[1],s=c[2],j=c[3],b=c[8],z=c[9],X=c[10],N=c[11];return c!==u&&(u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[0]=g*p-b*v,u[1]=w*p-z*v,u[2]=s*p-X*v,u[3]=j*p-N*v,u[8]=g*v+b*p,u[9]=w*v+z*p,u[10]=s*v+X*p,u[11]=j*v+N*p,u}}}),ua=n({"node_modules/gl-mat4/rotateZ.js"(ce,fe){fe.exports=d;function d(u,c,m){var v=Math.sin(m),p=Math.cos(m),g=c[0],w=c[1],s=c[2],j=c[3],b=c[4],z=c[5],X=c[6],N=c[7];return c!==u&&(u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[0]=g*p+b*v,u[1]=w*p+z*v,u[2]=s*p+X*v,u[3]=j*p+N*v,u[4]=b*p-g*v,u[5]=z*p-w*v,u[6]=X*p-s*v,u[7]=N*p-j*v,u}}}),Ua=n({"node_modules/gl-mat4/fromRotation.js"(ce,fe){fe.exports=d;function d(u,c,m){var v,p,g,w=m[0],s=m[1],j=m[2],b=Math.sqrt(w*w+s*s+j*j);return Math.abs(b)<1e-6?null:(b=1/b,w*=b,s*=b,j*=b,v=Math.sin(c),p=Math.cos(c),g=1-p,u[0]=w*w*g+p,u[1]=s*w*g+j*v,u[2]=j*w*g-s*v,u[3]=0,u[4]=w*s*g-j*v,u[5]=s*s*g+p,u[6]=j*s*g+w*v,u[7]=0,u[8]=w*j*g+s*v,u[9]=s*j*g-w*v,u[10]=j*j*g+p,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u)}}}),Ya=n({"node_modules/gl-mat4/fromRotationTranslation.js"(ce,fe){fe.exports=d;function d(u,c,m){var v=c[0],p=c[1],g=c[2],w=c[3],s=v+v,j=p+p,b=g+g,z=v*s,X=v*j,N=v*b,O=p*j,F=p*b,P=g*b,_=w*s,R=w*j,H=w*b;return u[0]=1-(O+P),u[1]=X+H,u[2]=N-R,u[3]=0,u[4]=X-H,u[5]=1-(z+P),u[6]=F+_,u[7]=0,u[8]=N+R,u[9]=F-_,u[10]=1-(z+O),u[11]=0,u[12]=m[0],u[13]=m[1],u[14]=m[2],u[15]=1,u}}}),Ia=n({"node_modules/gl-mat4/fromScaling.js"(ce,fe){fe.exports=d;function d(u,c){return u[0]=c[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=c[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=c[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}}}),Na=n({"node_modules/gl-mat4/fromTranslation.js"(ce,fe){fe.exports=d;function d(u,c){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=c[0],u[13]=c[1],u[14]=c[2],u[15]=1,u}}}),Ra=n({"node_modules/gl-mat4/fromXRotation.js"(ce,fe){fe.exports=d;function d(u,c){var m=Math.sin(c),v=Math.cos(c);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=v,u[6]=m,u[7]=0,u[8]=0,u[9]=-m,u[10]=v,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}}}),oa=n({"node_modules/gl-mat4/fromYRotation.js"(ce,fe){fe.exports=d;function d(u,c){var m=Math.sin(c),v=Math.cos(c);return u[0]=v,u[1]=0,u[2]=-m,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=m,u[9]=0,u[10]=v,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}}}),rn=n({"node_modules/gl-mat4/fromZRotation.js"(ce,fe){fe.exports=d;function d(u,c){var m=Math.sin(c),v=Math.cos(c);return u[0]=v,u[1]=m,u[2]=0,u[3]=0,u[4]=-m,u[5]=v,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}}}),Za=n({"node_modules/gl-mat4/fromQuat.js"(ce,fe){fe.exports=d;function d(u,c){var m=c[0],v=c[1],p=c[2],g=c[3],w=m+m,s=v+v,j=p+p,b=m*w,z=v*w,X=v*s,N=p*w,O=p*s,F=p*j,P=g*w,_=g*s,R=g*j;return u[0]=1-X-F,u[1]=z+R,u[2]=N-_,u[3]=0,u[4]=z-R,u[5]=1-b-F,u[6]=O+P,u[7]=0,u[8]=N+_,u[9]=O-P,u[10]=1-b-X,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}}}),Nt=n({"node_modules/gl-mat4/frustum.js"(ce,fe){fe.exports=d;function d(u,c,m,v,p,g,w){var s=1/(m-c),j=1/(p-v),b=1/(g-w);return u[0]=g*2*s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=g*2*j,u[6]=0,u[7]=0,u[8]=(m+c)*s,u[9]=(p+v)*j,u[10]=(w+g)*b,u[11]=-1,u[12]=0,u[13]=0,u[14]=w*g*2*b,u[15]=0,u}}}),Gt=n({"node_modules/gl-mat4/perspective.js"(ce,fe){fe.exports=d;function d(u,c,m,v,p){var g=1/Math.tan(c/2),w=1/(v-p);return u[0]=g/m,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=g,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=(p+v)*w,u[11]=-1,u[12]=0,u[13]=0,u[14]=2*p*v*w,u[15]=0,u}}}),ur=n({"node_modules/gl-mat4/perspectiveFromFieldOfView.js"(ce,fe){fe.exports=d;function d(u,c,m,v){var p=Math.tan(c.upDegrees*Math.PI/180),g=Math.tan(c.downDegrees*Math.PI/180),w=Math.tan(c.leftDegrees*Math.PI/180),s=Math.tan(c.rightDegrees*Math.PI/180),j=2/(w+s),b=2/(p+g);return u[0]=j,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=b,u[6]=0,u[7]=0,u[8]=-((w-s)*j*.5),u[9]=(p-g)*b*.5,u[10]=v/(m-v),u[11]=-1,u[12]=0,u[13]=0,u[14]=v*m/(m-v),u[15]=0,u}}}),Qr=n({"node_modules/gl-mat4/ortho.js"(ce,fe){fe.exports=d;function d(u,c,m,v,p,g,w){var s=1/(c-m),j=1/(v-p),b=1/(g-w);return u[0]=-2*s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*j,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*b,u[11]=0,u[12]=(c+m)*s,u[13]=(p+v)*j,u[14]=(w+g)*b,u[15]=1,u}}}),Dr=n({"node_modules/gl-mat4/lookAt.js"(ce,fe){var d=er();fe.exports=u;function u(c,m,v,p){var g,w,s,j,b,z,X,N,O,F,P=m[0],_=m[1],R=m[2],H=p[0],te=p[1],J=p[2],ye=v[0],se=v[1],he=v[2];return Math.abs(P-ye)<1e-6&&Math.abs(_-se)<1e-6&&Math.abs(R-he)<1e-6?d(c):(X=P-ye,N=_-se,O=R-he,F=1/Math.sqrt(X*X+N*N+O*O),X*=F,N*=F,O*=F,g=te*O-J*N,w=J*X-H*O,s=H*N-te*X,F=Math.sqrt(g*g+w*w+s*s),F?(F=1/F,g*=F,w*=F,s*=F):(g=0,w=0,s=0),j=N*s-O*w,b=O*g-X*s,z=X*w-N*g,F=Math.sqrt(j*j+b*b+z*z),F?(F=1/F,j*=F,b*=F,z*=F):(j=0,b=0,z=0),c[0]=g,c[1]=j,c[2]=X,c[3]=0,c[4]=w,c[5]=b,c[6]=N,c[7]=0,c[8]=s,c[9]=z,c[10]=O,c[11]=0,c[12]=-(g*P+w*_+s*R),c[13]=-(j*P+b*_+z*R),c[14]=-(X*P+N*_+O*R),c[15]=1,c)}}}),Ea=n({"node_modules/gl-mat4/str.js"(ce,fe){fe.exports=d;function d(u){return"mat4("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+", "+u[6]+", "+u[7]+", "+u[8]+", "+u[9]+", "+u[10]+", "+u[11]+", "+u[12]+", "+u[13]+", "+u[14]+", "+u[15]+")"}}}),da=n({"node_modules/gl-mat4/index.js"(ce,fe){fe.exports={create:At(),clone:Vt(),copy:Yt(),identity:er(),transpose:lr(),invert:yr(),adjoint:$r(),determinant:ia(),multiply:Sa(),translate:Xr(),scale:fr(),rotate:Hr(),rotateX:ya(),rotateY:Ta(),rotateZ:ua(),fromRotation:Ua(),fromRotationTranslation:Ya(),fromScaling:Ia(),fromTranslation:Na(),fromXRotation:Ra(),fromYRotation:oa(),fromZRotation:rn(),fromQuat:Za(),frustum:Nt(),perspective:Gt(),perspectiveFromFieldOfView:ur(),ortho:Qr(),lookAt:Dr(),str:Ea()}}}),Tt=n({"src/lib/matrix.js"(ce){var fe=da();ce.init2dArray=function(d,u){for(var c=new Array(d),m=0;m<d;m++)c[m]=new Array(u);return c},ce.transposeRagged=function(d){var u=0,c=d.length,m,v;for(m=0;m<c;m++)u=Math.max(u,d[m].length);var p=new Array(u);for(m=0;m<u;m++)for(p[m]=new Array(c),v=0;v<c;v++)p[m][v]=d[v][m];return p},ce.dot=function(d,u){if(!(d.length&&u.length)||d.length!==u.length)return null;var c=d.length,m,v;if(d[0].length)for(m=new Array(c),v=0;v<c;v++)m[v]=ce.dot(d[v],u);else if(u[0].length){var p=ce.transposeRagged(u);for(m=new Array(p.length),v=0;v<p.length;v++)m[v]=ce.dot(d,p[v])}else for(m=0,v=0;v<c;v++)m+=d[v]*u[v];return m},ce.translationMatrix=function(d,u){return[[1,0,d],[0,1,u],[0,0,1]]},ce.rotationMatrix=function(d){var u=d*Math.PI/180;return[[Math.cos(u),-Math.sin(u),0],[Math.sin(u),Math.cos(u),0],[0,0,1]]},ce.rotationXYMatrix=function(d,u,c){return ce.dot(ce.dot(ce.translationMatrix(u,c),ce.rotationMatrix(d)),ce.translationMatrix(-u,-c))},ce.apply3DTransform=function(d){return function(){var u=arguments,c=arguments.length===1?u[0]:[u[0],u[1],u[2]||0];return ce.dot(d,[c[0],c[1],c[2],1]).slice(0,3)}},ce.apply2DTransform=function(d){return function(){var u=arguments;u.length===3&&(u=u[0]);var c=arguments.length===1?u[0]:[u[0],u[1]];return ce.dot(d,[c[0],c[1],1]).slice(0,2)}},ce.apply2DTransform2=function(d){var u=ce.apply2DTransform(d);return function(c){return u(c.slice(0,2)).concat(u(c.slice(2,4)))}},ce.convertCssMatrix=function(d){if(d){var u=d.length;if(u===16)return d;if(u===6)return[d[0],d[1],0,0,d[2],d[3],0,0,0,0,1,0,d[4],d[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ce.inverseTransformMatrix=function(d){var u=[];return fe.invert(u,d),[[u[0],u[1],u[2],u[3]],[u[4],u[5],u[6],u[7]],[u[8],u[9],u[10],u[11]],[u[12],u[13],u[14],u[15]]]}}}),Lr=n({"src/lib/dom.js"(ce,fe){var d=k(),u=ze(),c=Tt(),m=da();function v(P){var _;if(typeof P=="string"){if(_=document.getElementById(P),_===null)throw new Error("No DOM element with id '"+P+"' exists on the page.");return _}else if(P==null)throw new Error("DOM element provided is null or undefined");return P}function p(P){var _=d.select(P);return _.node()instanceof HTMLElement&&_.size()&&_.classed("js-plotly-plot")}function g(P){var _=P&&P.parentNode;_&&_.removeChild(P)}function w(P,_){s("global",P,_)}function s(P,_,R){var H="plotly.js-style-"+P,te=document.getElementById(H);if(!(te&&te.matches(".no-inline-styles"))){te||(te=document.createElement("style"),te.setAttribute("id",H),te.appendChild(document.createTextNode("")),document.head.appendChild(te));var J=te.sheet;J?J.insertRule?J.insertRule(_+"{"+R+"}",0):J.addRule?J.addRule(_,R,0):u.warn("addStyleRule failed"):u.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function j(P){var _="plotly.js-style-"+P,R=document.getElementById(_);R&&g(R)}function b(P,_,R,H,te,J){var ye=H.split(":"),se=te.split(":"),he="data-btn-style-event-added";J||(J=document),J.querySelectorAll(P).forEach(function(pe){pe.getAttribute(he)||(pe.addEventListener("mouseenter",function(){var Q=this.querySelector(R);Q&&(Q.style[ye[0]]=ye[1])}),pe.addEventListener("mouseleave",function(){var Q=this.querySelector(R);Q&&(_&&this.matches(_)?Q.style[ye[0]]=ye[1]:Q.style[se[0]]=se[1])}),pe.setAttribute(he,!0))})}function z(P){var _=N(P),R=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return _.forEach(function(H){var te=X(H);if(te){var J=c.convertCssMatrix(te);R=m.multiply(R,R,J)}}),R}function X(P){var _=window.getComputedStyle(P,null),R=_.getPropertyValue("-webkit-transform")||_.getPropertyValue("-moz-transform")||_.getPropertyValue("-ms-transform")||_.getPropertyValue("-o-transform")||_.getPropertyValue("transform");return R==="none"?null:R.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(H){return+H})}function N(P){for(var _=[];O(P);)_.push(P),P=P.parentNode,typeof ShadowRoot=="function"&&P instanceof ShadowRoot&&(P=P.host);return _}function O(P){return P&&(P instanceof Element||P instanceof HTMLElement)}function F(P,_){return P&&_&&P.top===_.top&&P.left===_.left&&P.right===_.right&&P.bottom===_.bottom}fe.exports={getGraphDiv:v,isPlotDiv:p,removeElement:g,addStyleRule:w,addRelatedStyleRule:s,deleteRelatedStyleRule:j,setStyleOnHover:b,getFullTransformMatrix:z,getElementTransformMatrix:X,getElementAndAncestors:N,equalDomRects:F}}}),Gr=n({"src/plots/animation_attributes.js"(ce,fe){fe.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}}}),wa=n({"src/plot_api/edit_types.js"(ce,fe){var d=L().extendFlat,u=Z(),c={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},m={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},v=c.flags.slice().concat(["fullReplot"]),p=m.flags.slice().concat("layoutReplot");fe.exports={traces:c,layout:m,traceFlags:function(){return g(v)},layoutFlags:function(){return g(p)},update:function(j,b){var z=b.editType;if(z&&z!=="none")for(var X=z.split("+"),N=0;N<X.length;N++)j[X[N]]=!0},overrideAll:w};function g(j){for(var b={},z=0;z<j.length;z++)b[j[z]]=!1;return b}function w(j,b,z){var X=d({},j);for(var N in X){var O=X[N];u(O)&&(X[N]=s(O,b,z,N))}return z==="from-root"&&(X.editType=b),X}function s(j,b,z,X){if(j.valType){var N=d({},j);if(N.editType=b,Array.isArray(j.items)){N.items=new Array(j.items.length);for(var O=0;O<j.items.length;O++)N.items[O]=s(j.items[O],b)}return N}else return w(j,b,X.charAt(0)==="_"?"nested":"from-root")}}}),Rr=n({"src/components/drawing/attributes.js"(ce){ce.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ce.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},path:{valType:"string",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}}}),ga=n({"src/constants/docs.js"(ce,fe){fe.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}}}),kt=n({"src/plots/template_attributes.js"(ce){var fe=ga(),d=fe.FORMAT_LINK,u=fe.DATE_FORMAT_LINK;function c(v){var p=v&&v.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(p?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,d,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,u,"for details on the date formatting syntax."].join(" ")}ce.templateFormatStringDescription=c;function m(v){var p=v.description?" "+v.description:"",g=v.keys||[];if(g.length>0){for(var w=[],s=0;s<g.length;s++)w[s]="`"+g[s]+"`";p=p+"Finally, the template string has access to ",g.length===1?p=p+"variable "+w[0]:p=p+"variables "+w.slice(0,-1).join(", ")+" and "+w.slice(-1)+"."}return p}ce.hovertemplateAttrs=function(v,p){v=v||{},p=p||{},m(p);var g={valType:"string",dflt:"",editType:v.editType||"none"};return v.arrayOk!==!1&&(g.arrayOk=!0),g},ce.texttemplateAttrs=function(v,p){v=v||{},p=p||{},m(p);var g={valType:"string",dflt:"",editType:v.editType||"calc"};return v.arrayOk!==!1&&(g.arrayOk=!0),g},ce.shapeTexttemplateAttrs=function(v,p){v=v||{},p=p||{},v.newshape,m(p);var g={valType:"string",dflt:"",editType:v.editType||"arraydraw"};return g}}}),ha=n({"src/components/shapes/label_texttemplate.js"(ce,fe){function d(R,H){return H?H.d2l(R):R}function u(R,H){return H?H.l2d(R):R}function c(R){return R.x0}function m(R){return R.x1}function v(R){return R.y0}function p(R){return R.y1}function g(R){return R.x0shift||0}function w(R){return R.x1shift||0}function s(R){return R.y0shift||0}function j(R){return R.y1shift||0}function b(R,H){return d(R.x1,H)+w(R)-d(R.x0,H)-g(R)}function z(R,H,te){return d(R.y1,te)+j(R)-d(R.y0,te)-s(R)}function X(R,H){return Math.abs(b(R,H))}function N(R,H,te){return Math.abs(z(R,H,te))}function O(R,H,te){return R.type!=="line"?void 0:Math.sqrt(Math.pow(b(R,H),2)+Math.pow(z(R,H,te),2))}function F(R,H){return u((d(R.x1,H)+w(R)+d(R.x0,H)+g(R))/2,H)}function P(R,H,te){return u((d(R.y1,te)+j(R)+d(R.y0,te)+s(R))/2,te)}function _(R,H,te){return R.type!=="line"?void 0:z(R,H,te)/b(R,H)}fe.exports={x0:c,x1:m,y0:v,y1:p,slope:_,dx:b,dy:z,width:X,height:N,length:O,xcenter:F,ycenter:P}}}),Pa=n({"src/components/shapes/draw_newshape/attributes.js"(ce,fe){var d=wa().overrideAll,u=$e(),c=G(),m=Rr().dash,v=L().extendFlat,p=kt().shapeTexttemplateAttrs,g=ha();fe.exports=d({newshape:{visible:v({},u.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:v({},u.legend,{}),legendgroup:v({},u.legendgroup,{}),legendgrouptitle:{text:v({},u.legendgrouptitle.text,{}),font:c({})},legendrank:v({},u.legendrank,{}),legendwidth:v({},u.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:v({},m,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:v({},u.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:p({newshape:!0},{keys:Object.keys(g)}),font:c({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")}}),Qe=n({"src/components/selections/draw_newselection/attributes.js"(ce,fe){var d=Rr().dash,u=L().extendFlat;fe.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:u({},d,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}}}),ea=n({"src/plots/pad_attributes.js"(ce,fe){fe.exports=function(d){var u=d.editType;return{t:{valType:"number",dflt:0,editType:u},r:{valType:"number",dflt:0,editType:u},b:{valType:"number",dflt:0,editType:u},l:{valType:"number",dflt:0,editType:u},editType:u}}}}),Vr=n({"src/plots/layout_attributes.js"(ce,fe){var d=G(),u=Gr(),c=Pe(),m=Pa(),v=Qe(),p=ea(),g=L().extendFlat,w=d({editType:"calc"});w.family.dflt='"Open Sans", verdana, arial, sans-serif',w.size.dflt=12,w.color.dflt=c.defaultLine,fe.exports={font:w,title:{text:{valType:"string",editType:"layoutstyle"},font:d({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:d({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:g(p({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:c.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:c.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:c.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:m.newshape,activeshape:m.activeshape,newselection:v.newselection,activeselection:v.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:g({},u.transition,{editType:"none"})}}}),It=n({"node_modules/maplibre-gl/dist/maplibre-gl.css"(){(function(){if(!document.getElementById("8431bff7cc77ea8693f8122c6e0981316b936a0a4930625e08b1512d134062bc")){var ce=document.createElement("style");ce.id="8431bff7cc77ea8693f8122c6e0981316b936a0a4930625e08b1512d134062bc",ce.textContent=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,document.head.appendChild(ce)}})()}}),hr=n({"src/registry.js"(ce){var fe=ze(),d=lt(),u=bt(),c=Z(),m=Lr().addStyleRule,v=L(),p=$e(),g=Vr(),w=v.extendFlat,s=v.extendDeepAll;ce.modules={},ce.allCategories={},ce.allTypes=[],ce.subplotsRegistry={},ce.componentsRegistry={},ce.layoutArrayContainers=[],ce.layoutArrayRegexes=[],ce.traceLayoutAttributes={},ce.localeRegistry={},ce.apiMethodRegistry={},ce.collectableSubplotTypes=null,ce.register=function(H){if(ce.collectableSubplotTypes=null,H)H&&!Array.isArray(H)&&(H=[H]);else throw new Error("No argument passed to Plotly.register.");for(var te=0;te<H.length;te++){var J=H[te];if(!J)throw new Error("Invalid module was attempted to be registered!");switch(J.moduleType){case"trace":j(J);break;case"transform":X(J);break;case"component":z(J);break;case"locale":N(J);break;case"apiMethod":var ye=J.name;ce.apiMethodRegistry[ye]=J.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ce.getModule=function(R){var H=ce.modules[_(R)];return H?H._module:!1},ce.traceIs=function(R,H){if(R=_(R),R==="various")return!1;var te=ce.modules[R];return te||(R&&fe.log("Unrecognized trace type "+R+"."),te=ce.modules[p.type.dflt]),!!te.categories[H]},ce.getComponentMethod=function(R,H){var te=ce.componentsRegistry[R];return te&&te[H]||d},ce.call=function(){var R=arguments[0],H=[].slice.call(arguments,1);return ce.apiMethodRegistry[R].apply(null,H)};function j(R){var H=R.name,te=R.categories,J=R.meta;if(ce.modules[H]){fe.log("Type "+H+" already registered");return}ce.subplotsRegistry[R.basePlotModule.name]||b(R.basePlotModule);for(var ye={},se=0;se<te.length;se++)ye[te[se]]=!0,ce.allCategories[te[se]]=!0;ce.modules[H]={_module:R,categories:ye},J&&Object.keys(J).length&&(ce.modules[H].meta=J),ce.allTypes.push(H);for(var he in ce.componentsRegistry)F(he,H);R.layoutAttributes&&w(ce.traceLayoutAttributes,R.layoutAttributes);var pe=R.basePlotModule,Q=pe.name;if(Q==="mapbox"){var ue=pe.constants.styleRules;for(var me in ue)m(".js-plotly-plot .plotly .mapboxgl-"+me,ue[me])}Q==="map"&&It(),(Q==="geo"||Q==="mapbox"||Q==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function b(R){var H=R.name;if(ce.subplotsRegistry[H]){fe.log("Plot type "+H+" already registered.");return}O(R),ce.subplotsRegistry[H]=R;for(var te in ce.componentsRegistry)P(te,R.name)}function z(R){if(typeof R.name!="string")throw new Error("Component module *name* must be a string.");var H=R.name;ce.componentsRegistry[H]=R,R.layoutAttributes&&(R.layoutAttributes._isLinkedToArray&&u(ce.layoutArrayContainers,H),O(R));for(var te in ce.modules)F(H,te);for(var J in ce.subplotsRegistry)P(H,J);R.schema&&R.schema.layout&&s(g,R.schema.layout)}function X(R){if(typeof R.name!="string")throw new Error("Transform module *name* must be a string.");var H="Transform module "+R.name,te=typeof R.transform=="function",J=typeof R.calcTransform=="function";if(!te&&!J)throw new Error(H+" is missing a *transform* or *calcTransform* method.");te&&J&&fe.log([H+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),c(R.attributes)||fe.log(H+" registered without an *attributes* object."),typeof R.supplyDefaults!="function"&&fe.log(H+" registered without a *supplyDefaults* method.")}function N(R){var H=R.name,te=H.split("-")[0],J=R.dictionary,ye=R.format,se=J&&Object.keys(J).length,he=ye&&Object.keys(ye).length,pe=ce.localeRegistry,Q=pe[H];if(Q||(pe[H]=Q={}),te!==H){var ue=pe[te];ue||(pe[te]=ue={}),se&&ue.dictionary===Q.dictionary&&(ue.dictionary=J),he&&ue.format===Q.format&&(ue.format=ye)}se&&(Q.dictionary=J),he&&(Q.format=ye)}function O(R){if(R.layoutAttributes){var H=R.layoutAttributes._arrayAttrRegexps;if(H)for(var te=0;te<H.length;te++)u(ce.layoutArrayRegexes,H[te])}}function F(R,H){var te=ce.componentsRegistry[R].schema;if(!(!te||!te.traces)){var J=te.traces[H];J&&s(ce.modules[H]._module.attributes,J)}}function P(R,H){var te=ce.componentsRegistry[R].schema;if(!(!te||!te.subplots)){var J=ce.subplotsRegistry[H],ye=J.layoutAttributes,se=J.attr==="subplot"?J.name:J.attr;Array.isArray(se)&&(se=se[0]);var he=te.subplots[se];ye&&he&&s(ye,he)}}function _(R){return typeof R=="object"&&(R=R.type),R}}}),sa=n({"src/lib/dates.js"(ce){var fe=E().timeFormat,d=B(),u=ze(),c=K().mod,m=W(),v=m.BADNUM,p=m.ONEDAY,g=m.ONEHOUR,w=m.ONEMIN,s=m.ONESEC,j=m.EPOCHJD,b=hr(),z=E().utcFormat,X=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,N=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,O=new Date().getFullYear()-70;function F(Me){return Me&&b.componentsRegistry.calendars&&typeof Me=="string"&&Me!=="gregorian"}ce.dateTick0=function(Me,ke){var le=P(Me,!!ke);if(ke<2)return le;var De=ce.dateTime2ms(le,Me);return De+=p*(ke-1),ce.ms2DateTime(De,0,Me)};function P(Me,ke){return F(Me)?ke?b.getComponentMethod("calendars","CANONICAL_SUNDAY")[Me]:b.getComponentMethod("calendars","CANONICAL_TICK")[Me]:ke?"2000-01-02":"2000-01-01"}ce.dfltRange=function(Me){return F(Me)?b.getComponentMethod("calendars","DFLTRANGE")[Me]:["2000-01-01","2001-01-01"]},ce.isJSDate=function(Me){return typeof Me=="object"&&Me!==null&&typeof Me.getTime=="function"};var _,R;ce.dateTime2ms=function(Me,ke){if(ce.isJSDate(Me)){var le=Me.getTimezoneOffset()*w,De=(Me.getUTCMinutes()-Me.getMinutes())*w+(Me.getUTCSeconds()-Me.getSeconds())*s+(Me.getUTCMilliseconds()-Me.getMilliseconds());if(De){var Oe=3*w;le=le-Oe/2+c(De-le+Oe/2,Oe)}return Me=Number(Me)-le,Me>=_&&Me<=R?Me:v}if(typeof Me!="string"&&typeof Me!="number")return v;Me=String(Me);var He=F(ke),Be=Me.charAt(0);He&&(Be==="G"||Be==="g")&&(Me=Me.substr(1),ke="");var Ye=He&&ke.substr(0,7)==="chinese",st=Me.match(Ye?N:X);if(!st)return v;var it=st[1],yt=st[3]||"1",_e=Number(st[5]||1),Ee=Number(st[7]||0),de=Number(st[9]||0),we=Number(st[11]||0);if(He){if(it.length===2)return v;it=Number(it);var je;try{var Ae=b.getComponentMethod("calendars","getCal")(ke);if(Ye){var $=yt.charAt(yt.length-1)==="i";yt=parseInt(yt,10),je=Ae.newDate(it,Ae.toMonthIndex(it,yt,$),_e)}else je=Ae.newDate(it,Number(yt),_e)}catch{return v}return je?(je.toJD()-j)*p+Ee*g+de*w+we*s:v}it.length===2?it=(Number(it)+2e3-O)%100+O:it=Number(it),yt-=1;var oe=new Date(Date.UTC(2e3,yt,_e,Ee,de));return oe.setUTCFullYear(it),oe.getUTCMonth()!==yt||oe.getUTCDate()!==_e?v:oe.getTime()+we*s},_=ce.MIN_MS=ce.dateTime2ms("-9999"),R=ce.MAX_MS=ce.dateTime2ms("9999-12-31 23:59:59.9999"),ce.isDateTime=function(Me,ke){return ce.dateTime2ms(Me,ke)!==v};function H(Me,ke){return String(Me+Math.pow(10,ke)).substr(1)}var te=90*p,J=3*g,ye=5*w;ce.ms2DateTime=function(Me,ke,le){if(typeof Me!="number"||!(Me>=_&&Me<=R))return v;ke||(ke=0);var De=Math.floor(c(Me+.05,1)*10),Oe=Math.round(Me-De/10),He,Be,Ye,st,it,yt;if(F(le)){var _e=Math.floor(Oe/p)+j,Ee=Math.floor(c(Me,p));try{He=b.getComponentMethod("calendars","getCal")(le).fromJD(_e).formatDate("yyyy-mm-dd")}catch{He=z("G%Y-%m-%d")(new Date(Oe))}if(He.charAt(0)==="-")for(;He.length<11;)He="-0"+He.substr(1);else for(;He.length<10;)He="0"+He;Be=ke<te?Math.floor(Ee/g):0,Ye=ke<te?Math.floor(Ee%g/w):0,st=ke<J?Math.floor(Ee%w/s):0,it=ke<ye?Ee%s*10+De:0}else yt=new Date(Oe),He=z("%Y-%m-%d")(yt),Be=ke<te?yt.getUTCHours():0,Ye=ke<te?yt.getUTCMinutes():0,st=ke<J?yt.getUTCSeconds():0,it=ke<ye?yt.getUTCMilliseconds()*10+De:0;return se(He,Be,Ye,st,it)},ce.ms2DateTimeLocal=function(Me){if(!(Me>=_+p&&Me<=R-p))return v;var ke=Math.floor(c(Me+.05,1)*10),le=new Date(Math.round(Me-ke/10)),De=fe("%Y-%m-%d")(le),Oe=le.getHours(),He=le.getMinutes(),Be=le.getSeconds(),Ye=le.getUTCMilliseconds()*10+ke;return se(De,Oe,He,Be,Ye)};function se(Me,ke,le,De,Oe){if((ke||le||De||Oe)&&(Me+=" "+H(ke,2)+":"+H(le,2),(De||Oe)&&(Me+=":"+H(De,2),Oe))){for(var He=4;Oe%10===0;)He-=1,Oe/=10;Me+="."+H(Oe,He)}return Me}ce.cleanDate=function(Me,ke,le){if(Me===v)return ke;if(ce.isJSDate(Me)||typeof Me=="number"&&isFinite(Me)){if(F(le))return u.error("JS Dates and milliseconds are incompatible with world calendars",Me),ke;if(Me=ce.ms2DateTimeLocal(+Me),!Me&&ke!==void 0)return ke}else if(!ce.isDateTime(Me,le))return u.error("unrecognized date",Me),ke;return Me};var he=/%\d?f/g,pe=/%h/g,Q={1:"1",2:"1",3:"2",4:"2"};function ue(Me,ke,le,De){Me=Me.replace(he,function(He){var Be=Math.min(+He.charAt(1)||6,6),Ye=(ke/1e3%1+2).toFixed(Be).substr(2).replace(/0+$/,"")||"0";return Ye});var Oe=new Date(Math.floor(ke+.05));if(Me=Me.replace(pe,function(){return Q[le("%q")(Oe)]}),F(De))try{Me=b.getComponentMethod("calendars","worldCalFmt")(Me,ke,De)}catch{return"Invalid"}return le(Me)(Oe)}var me=[59,59.9,59.99,59.999,59.9999];function be(Me,ke){var le=c(Me+.05,p),De=H(Math.floor(le/g),2)+":"+H(c(Math.floor(le/w),60),2);if(ke!=="M"){d(ke)||(ke=0);var Oe=Math.min(c(Me/s,60),me[ke]),He=(100+Oe).toFixed(ke).substr(1);ke>0&&(He=He.replace(/0+$/,"").replace(/[\.]$/,"")),De+=":"+He}return De}ce.formatDate=function(Me,ke,le,De,Oe,He){if(Oe=F(Oe)&&Oe,!ke)if(le==="y")ke=He.year;else if(le==="m")ke=He.month;else if(le==="d")ke=He.dayMonth+`
`+He.year;else return be(Me,le)+`
`+ue(He.dayMonthYear,Me,De,Oe);return ue(ke,Me,De,Oe)};var ve=3*p;ce.incrementMonth=function(Me,ke,le){le=F(le)&&le;var De=c(Me,p);if(Me=Math.round(Me-De),le)try{var Oe=Math.round(Me/p)+j,He=b.getComponentMethod("calendars","getCal")(le),Be=He.fromJD(Oe);return ke%12?He.add(Be,ke,"m"):He.add(Be,ke/12,"y"),(Be.toJD()-j)*p+De}catch{u.error("invalid ms "+Me+" in calendar "+le)}var Ye=new Date(Me+ve);return Ye.setUTCMonth(Ye.getUTCMonth()+ke)+De-ve},ce.findExactDates=function(Me,ke){for(var le=0,De=0,Oe=0,He=0,Be,Ye,st=F(ke)&&b.getComponentMethod("calendars","getCal")(ke),it=0;it<Me.length;it++){if(Ye=Me[it],!d(Ye)){He++;continue}if(!(Ye%p))if(st)try{Be=st.fromJD(Ye/p+j),Be.day()===1?Be.month()===1?le++:De++:Oe++}catch{}else Be=new Date(Ye),Be.getUTCDate()===1?Be.getUTCMonth()===0?le++:De++:Oe++}De+=le,Oe+=De;var yt=Me.length-He;return{exactYears:le/yt,exactMonths:De/yt,exactDays:Oe/yt}}}}),Qa=n({"src/lib/identity.js"(ce,fe){fe.exports=function(u){return u}}}),an=n({"src/lib/search.js"(ce){var fe=B(),d=ze(),u=Qa(),c=W().BADNUM,m=1e-9;ce.findBin=function(s,j,b){if(fe(j.start))return b?Math.ceil((s-j.start)/j.size-m)-1:Math.floor((s-j.start)/j.size+m);var z=0,X=j.length,N=0,O=X>1?(j[X-1]-j[0])/(X-1):1,F,P;for(O>=0?P=b?v:p:P=b?w:g,s+=O*m*(b?-1:1)*(O>=0?1:-1);z<X&&N++<100;)F=Math.floor((z+X)/2),P(j[F],s)?z=F+1:X=F;return N>90&&d.log("Long binary search..."),z-1};function v(s,j){return s<j}function p(s,j){return s<=j}function g(s,j){return s>j}function w(s,j){return s>=j}ce.sorterAsc=function(s,j){return s-j},ce.sorterDes=function(s,j){return j-s},ce.distinctVals=function(s){var j=s.slice();j.sort(ce.sorterAsc);var b;for(b=j.length-1;b>-1&&j[b]===c;b--);for(var z=j[b]-j[0]||1,X=z/(b||1)/1e4,N=[],O,F=0;F<=b;F++){var P=j[F],_=P-O;O===void 0?(N.push(P),O=P):_>X&&(z=Math.min(z,_),N.push(P),O=P)}return{vals:N,minDiff:z}},ce.roundUp=function(s,j,b){for(var z=0,X=j.length-1,N,O=0,F=b?0:1,P=b?1:0,_=b?Math.ceil:Math.floor;z<X&&O++<100;)N=_((z+X)/2),j[N]<=s?z=N+F:X=N-P;return j[z]},ce.sort=function(s,j){for(var b=0,z=0,X=1;X<s.length;X++){var N=j(s[X],s[X-1]);if(N<0?b=1:N>0&&(z=1),b&&z)return s.sort(j)}return z?s:s.reverse()},ce.findIndexOfMin=function(s,j){j=j||u;for(var b=1/0,z,X=0;X<s.length;X++){var N=j(s[X]);N<b&&(b=N,z=X)}return z}}}),sn=n({"src/lib/sort_object_keys.js"(ce,fe){fe.exports=function(u){return Object.keys(u).sort()}}}),An=n({"src/lib/stats.js"(ce){var fe=B(),d=T().isArrayOrTypedArray;ce.aggNums=function(u,c,m,v){var p,g;if((!v||v>m.length)&&(v=m.length),fe(c)||(c=!1),d(m[0])){for(g=new Array(v),p=0;p<v;p++)g[p]=ce.aggNums(u,c,m[p]);m=g}for(p=0;p<v;p++)fe(c)?fe(m[p])&&(c=u(+c,+m[p])):c=m[p];return c},ce.len=function(u){return ce.aggNums(function(c){return c+1},0,u)},ce.mean=function(u,c){return c||(c=ce.len(u)),ce.aggNums(function(m,v){return m+v},0,u)/c},ce.geometricMean=function(u,c){return c||(c=ce.len(u)),Math.pow(ce.aggNums(function(m,v){return m*v},1,u),1/c)},ce.midRange=function(u){if(!(u===void 0||u.length===0))return(ce.aggNums(Math.max,null,u)+ce.aggNums(Math.min,null,u))/2},ce.variance=function(u,c,m){return c||(c=ce.len(u)),fe(m)||(m=ce.mean(u,c)),ce.aggNums(function(v,p){return v+Math.pow(p-m,2)},0,u)/c},ce.stdev=function(u,c,m){return Math.sqrt(ce.variance(u,c,m))},ce.median=function(u){var c=u.slice().sort();return ce.interp(c,.5)},ce.interp=function(u,c){if(!fe(c))throw"n should be a finite number";if(c=c*u.length-.5,c<0)return u[0];if(c>u.length-1)return u[u.length-1];var m=c%1;return m*u[Math.ceil(c)]+(1-m)*u[Math.floor(c)]}}}),Ti=n({"src/lib/angles.js"(ce,fe){var d=K(),u=d.mod,c=d.modHalf,m=Math.PI,v=2*m;function p(P){return P/180*m}function g(P){return P/m*180}function w(P){return Math.abs(P[1]-P[0])>v-1e-14}function s(P,_){return c(_-P,v)}function j(P,_){return Math.abs(s(P,_))}function b(P,_){if(w(_))return!0;var R,H;_[0]<_[1]?(R=_[0],H=_[1]):(R=_[1],H=_[0]),R=u(R,v),H=u(H,v),R>H&&(H+=v);var te=u(P,v),J=te+v;return te>=R&&te<=H||J>=R&&J<=H}function z(P,_,R,H){if(!b(_,H))return!1;var te,J;return R[0]<R[1]?(te=R[0],J=R[1]):(te=R[1],J=R[0]),P>=te&&P<=J}function X(P,_,R,H,te,J,ye){te=te||0,J=J||0;var se=w([R,H]),he,pe,Q,ue,me;se?(he=0,pe=m,Q=v):R<H?(he=R,Q=H):(he=H,Q=R),P<_?(ue=P,me=_):(ue=_,me=P);function be(le,De){return[le*Math.cos(De)+te,J-le*Math.sin(De)]}var ve=Math.abs(Q-he)<=m?0:1;function Me(le,De,Oe){return"A"+[le,le]+" "+[0,ve,Oe]+" "+be(le,De)}var ke;return se?ue===null?ke="M"+be(me,he)+Me(me,pe,0)+Me(me,Q,0)+"Z":ke="M"+be(ue,he)+Me(ue,pe,0)+Me(ue,Q,0)+"ZM"+be(me,he)+Me(me,pe,1)+Me(me,Q,1)+"Z":ue===null?(ke="M"+be(me,he)+Me(me,Q,0),ye&&(ke+="L0,0Z")):ke="M"+be(ue,he)+"L"+be(me,he)+Me(me,Q,0)+"L"+be(ue,Q)+Me(ue,he,1)+"Z",ke}function N(P,_,R,H,te){return X(null,P,_,R,H,te,0)}function O(P,_,R,H,te){return X(null,P,_,R,H,te,1)}function F(P,_,R,H,te,J){return X(P,_,R,H,te,J,1)}fe.exports={deg2rad:p,rad2deg:g,angleDelta:s,angleDist:j,isFullCircle:w,isAngleInsideSector:b,isPtInsideSector:z,pathArc:N,pathSector:O,pathAnnulus:F}}}),zn=n({"src/lib/anchor_utils.js"(ce){ce.isLeftAnchor=function(d){return d.xanchor==="left"||d.xanchor==="auto"&&d.x<=1/3},ce.isCenterAnchor=function(d){return d.xanchor==="center"||d.xanchor==="auto"&&d.x>1/3&&d.x<2/3},ce.isRightAnchor=function(d){return d.xanchor==="right"||d.xanchor==="auto"&&d.x>=2/3},ce.isTopAnchor=function(d){return d.yanchor==="top"||d.yanchor==="auto"&&d.y>=2/3},ce.isMiddleAnchor=function(d){return d.yanchor==="middle"||d.yanchor==="auto"&&d.y>1/3&&d.y<2/3},ce.isBottomAnchor=function(d){return d.yanchor==="bottom"||d.yanchor==="auto"&&d.y<=1/3}}}),Ln=n({"src/lib/geometry2d.js"(ce){var fe=K().mod;ce.segmentsIntersect=d;function d(p,g,w,s,j,b,z,X){var N=w-p,O=j-p,F=z-j,P=s-g,_=b-g,R=X-b,H=N*R-F*P;if(H===0)return null;var te=(O*R-F*_)/H,J=(O*P-N*_)/H;return J<0||J>1||te<0||te>1?null:{x:p+N*te,y:g+P*te}}ce.segmentDistance=function(g,w,s,j,b,z,X,N){if(d(g,w,s,j,b,z,X,N))return 0;var O=s-g,F=j-w,P=X-b,_=N-z,R=O*O+F*F,H=P*P+_*_,te=Math.min(u(O,F,R,b-g,z-w),u(O,F,R,X-g,N-w),u(P,_,H,g-b,w-z),u(P,_,H,s-b,j-z));return Math.sqrt(te)};function u(p,g,w,s,j){var b=s*p+j*g;if(b<0)return s*s+j*j;if(b>w){var z=s-p,X=j-g;return z*z+X*X}else{var N=s*g-j*p;return N*N/w}}var c,m,v;ce.getTextLocation=function(g,w,s,j){if((g!==m||j!==v)&&(c={},m=g,v=j),c[s])return c[s];var b=g.getPointAtLength(fe(s-j/2,w)),z=g.getPointAtLength(fe(s+j/2,w)),X=Math.atan((z.y-b.y)/(z.x-b.x)),N=g.getPointAtLength(fe(s,w)),O=(N.x*4+b.x+z.x)/6,F=(N.y*4+b.y+z.y)/6,P={x:O,y:F,theta:X};return c[s]=P,P},ce.clearLocationCache=function(){m=null},ce.getVisibleSegment=function(g,w,s){var j=w.left,b=w.right,z=w.top,X=w.bottom,N=0,O=g.getTotalLength(),F=O,P,_;function R(te){var J=g.getPointAtLength(te);te===0?P=J:te===O&&(_=J);var ye=J.x<j?j-J.x:J.x>b?J.x-b:0,se=J.y<z?z-J.y:J.y>X?J.y-X:0;return Math.sqrt(ye*ye+se*se)}for(var H=R(N);H;){if(N+=H+s,N>F)return;H=R(N)}for(H=R(F);H;){if(F-=H+s,N>F)return;H=R(F)}return{min:N,max:F,len:F-N,total:O,isClosed:N===0&&F===O&&Math.abs(P.x-_.x)<.1&&Math.abs(P.y-_.y)<.1}},ce.findPointOnPath=function(g,w,s,j){j=j||{};for(var b=j.pathLength||g.getTotalLength(),z=j.tolerance||.001,X=j.iterationLimit||30,N=g.getPointAtLength(0)[s]>g.getPointAtLength(b)[s]?-1:1,O=0,F=0,P=b,_,R,H;O<X;){if(_=(F+P)/2,R=g.getPointAtLength(_),H=R[s]-w,Math.abs(H)<z)return R;N*H>0?P=_:F=_,O++}return R}}}),Hn=n({"src/lib/throttle.js"(ce){var fe={};ce.throttle=function(c,m,v){var p=fe[c],g=Date.now();if(!p){for(var w in fe)fe[w].ts<g-6e4&&delete fe[w];p=fe[c]={ts:0,timer:null}}d(p);function s(){v(),p.ts=Date.now(),p.onDone&&(p.onDone(),p.onDone=null)}if(g>p.ts+m){s();return}p.timer=setTimeout(function(){s(),p.timer=null},m)},ce.done=function(u){var c=fe[u];return!c||!c.timer?Promise.resolve():new Promise(function(m){var v=c.onDone;c.onDone=function(){v&&v(),m(),c.onDone=null}})},ce.clear=function(u){if(u)d(fe[u]),delete fe[u];else for(var c in fe)ce.clear(c)};function d(u){u&&u.timer!==null&&(clearTimeout(u.timer),u.timer=null)}}}),bi=n({"src/lib/clear_responsive.js"(ce,fe){fe.exports=function(u){u._responsiveChartHandler&&(window.removeEventListener("resize",u._responsiveChartHandler),delete u._responsiveChartHandler)}}}),li=n({"node_modules/is-mobile/index.js"(ce,fe){fe.exports=m,fe.exports.isMobile=m,fe.exports.default=m;var d=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,u=/CrOS/,c=/android|ipad|playbook|silk/i;function m(v){v||(v={});let p=v.ua;if(!p&&typeof navigator<"u"&&(p=navigator.userAgent),p&&p.headers&&typeof p.headers["user-agent"]=="string"&&(p=p.headers["user-agent"]),typeof p!="string")return!1;let g=d.test(p)&&!u.test(p)||!!v.tablet&&c.test(p);return!g&&v.tablet&&v.featureDetect&&navigator&&navigator.maxTouchPoints>1&&p.indexOf("Macintosh")!==-1&&p.indexOf("Safari")!==-1&&(g=!0),g}}}),Mi=n({"src/lib/preserve_drawing_buffer.js"(ce,fe){var d=B(),u=li();fe.exports=function(v){var p;if(v&&v.hasOwnProperty("userAgent")?p=v.userAgent:p=c(),typeof p!="string")return!0;var g=u({ua:{headers:{"user-agent":p}},tablet:!0,featureDetect:!1});if(!g)for(var w=p.split(" "),s=1;s<w.length;s++){var j=w[s];if(j.indexOf("Safari")!==-1)for(var b=s-1;b>-1;b--){var z=w[b];if(z.substr(0,8)==="Version/"){var X=z.substr(8).split(".")[0];if(d(X)&&(X=+X),X>=13)return!0}}}return g};function c(){var m;return typeof navigator<"u"&&(m=navigator.userAgent),m&&m.headers&&typeof m.headers["user-agent"]=="string"&&(m=m.headers["user-agent"]),m}}}),Ii=n({"src/lib/make_trace_groups.js"(ce,fe){var d=k();fe.exports=function(c,m,v){var p=c.selectAll("g."+v.replace(/\s/g,".")).data(m,function(w){return w[0].trace.uid});p.exit().remove(),p.enter().append("g").attr("class",v),p.order();var g=c.classed("rangeplot")?"nodeRangePlot3":"node3";return p.each(function(w){w[0][g]=d.select(this)}),p}}}),ti=n({"src/lib/localize.js"(ce,fe){var d=hr();fe.exports=function(c,m){for(var v=c._context.locale,p=0;p<2;p++){for(var g=c._context.locales,w=0;w<2;w++){var s=(g[v]||{}).dictionary;if(s){var j=s[m];if(j)return j}g=d.localeRegistry}var b=v.split("-")[0];if(b===v)break;v=b}return m}}}),pi=n({"src/lib/filter_unique.js"(ce,fe){fe.exports=function(u){for(var c={},m=[],v=0,p=0;p<u.length;p++){var g=u[p];c[g]!==1&&(c[g]=1,m[v++]=g)}return m}}}),Ri=n({"src/lib/filter_visible.js"(ce,fe){fe.exports=function(v){for(var p=c(v)?u:d,g=[],w=0;w<v.length;w++){var s=v[w];p(s)&&g.push(s)}return g};function d(m){return m.visible===!0}function u(m){var v=m[0].trace;return v.visible===!0&&v._length!==0}function c(m){return Array.isArray(m)&&Array.isArray(m[0])&&m[0][0]&&m[0][0].trace}}}),mo=n({"src/lib/increment.js"(ce,fe){fe.exports=function(u,c){if(!c)return u;var m=1/Math.abs(c),v=m>1?(m*u+m*c)/m:u+c,p=String(v).length;if(p>16){var g=String(c).length,w=String(u).length;if(p>=w+g){var s=parseFloat(v).toPrecision(12);s.indexOf("e+")===-1&&(v=+s)}}return v}}}),so=n({"src/lib/clean_number.js"(ce,fe){var d=B(),u=W().BADNUM,c=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;fe.exports=function(v){return typeof v=="string"&&(v=v.replace(c,"")),d(v)?Number(v):u}}}),pa=n({"src/lib/index.js"(ce,fe){var d=k(),u=E().utcFormat,c=U().format,m=B(),v=W(),p=v.FP_SAFE,g=-p,w=v.BADNUM,s=fe.exports={};s.adjustFormat=function($){return!$||/^\d[.]\df/.test($)||/[.]\d%/.test($)?$:$==="0.f"?"~f":/^\d%/.test($)?"~%":/^\ds/.test($)?"~s":!/^[~,.0$]/.test($)&&/[&fps]/.test($)?"~"+$:$};var j={};s.warnBadFormat=function(Ae){var $=String(Ae);j[$]||(j[$]=1,s.warn('encountered bad format: "'+$+'"'))},s.noFormat=function(Ae){return String(Ae)},s.numberFormat=function(Ae){var $;try{$=c(s.adjustFormat(Ae))}catch{return s.warnBadFormat(Ae),s.noFormat}return $},s.nestedProperty=l(),s.keyedContainer=f(),s.relativeAttr=D(),s.isPlainObject=Z(),s.toLogRange=I(),s.relinkPrivateKeys=V();var b=T();s.isArrayBuffer=b.isArrayBuffer,s.isTypedArray=b.isTypedArray,s.isArrayOrTypedArray=b.isArrayOrTypedArray,s.isArray1D=b.isArray1D,s.ensureArray=b.ensureArray,s.concat=b.concat,s.maxRowLength=b.maxRowLength,s.minRowLength=b.minRowLength;var z=K();s.mod=z.mod,s.modHalf=z.modHalf;var X=et();s.valObjectMeta=X.valObjectMeta,s.coerce=X.coerce,s.coerce2=X.coerce2,s.coerceFont=X.coerceFont,s.coercePattern=X.coercePattern,s.coerceHoverinfo=X.coerceHoverinfo,s.coerceSelectionMarkerOpacity=X.coerceSelectionMarkerOpacity,s.validate=X.validate;var N=sa();s.dateTime2ms=N.dateTime2ms,s.isDateTime=N.isDateTime,s.ms2DateTime=N.ms2DateTime,s.ms2DateTimeLocal=N.ms2DateTimeLocal,s.cleanDate=N.cleanDate,s.isJSDate=N.isJSDate,s.formatDate=N.formatDate,s.incrementMonth=N.incrementMonth,s.dateTick0=N.dateTick0,s.dfltRange=N.dfltRange,s.findExactDates=N.findExactDates,s.MIN_MS=N.MIN_MS,s.MAX_MS=N.MAX_MS;var O=an();s.findBin=O.findBin,s.sorterAsc=O.sorterAsc,s.sorterDes=O.sorterDes,s.distinctVals=O.distinctVals,s.roundUp=O.roundUp,s.sort=O.sort,s.findIndexOfMin=O.findIndexOfMin,s.sortObjectKeys=sn();var F=An();s.aggNums=F.aggNums,s.len=F.len,s.mean=F.mean,s.geometricMean=F.geometricMean,s.median=F.median,s.midRange=F.midRange,s.variance=F.variance,s.stdev=F.stdev,s.interp=F.interp;var P=Tt();s.init2dArray=P.init2dArray,s.transposeRagged=P.transposeRagged,s.dot=P.dot,s.translationMatrix=P.translationMatrix,s.rotationMatrix=P.rotationMatrix,s.rotationXYMatrix=P.rotationXYMatrix,s.apply3DTransform=P.apply3DTransform,s.apply2DTransform=P.apply2DTransform,s.apply2DTransform2=P.apply2DTransform2,s.convertCssMatrix=P.convertCssMatrix,s.inverseTransformMatrix=P.inverseTransformMatrix;var _=Ti();s.deg2rad=_.deg2rad,s.rad2deg=_.rad2deg,s.angleDelta=_.angleDelta,s.angleDist=_.angleDist,s.isFullCircle=_.isFullCircle,s.isAngleInsideSector=_.isAngleInsideSector,s.isPtInsideSector=_.isPtInsideSector,s.pathArc=_.pathArc,s.pathSector=_.pathSector,s.pathAnnulus=_.pathAnnulus;var R=zn();s.isLeftAnchor=R.isLeftAnchor,s.isCenterAnchor=R.isCenterAnchor,s.isRightAnchor=R.isRightAnchor,s.isTopAnchor=R.isTopAnchor,s.isMiddleAnchor=R.isMiddleAnchor,s.isBottomAnchor=R.isBottomAnchor;var H=Ln();s.segmentsIntersect=H.segmentsIntersect,s.segmentDistance=H.segmentDistance,s.getTextLocation=H.getTextLocation,s.clearLocationCache=H.clearLocationCache,s.getVisibleSegment=H.getVisibleSegment,s.findPointOnPath=H.findPointOnPath;var te=L();s.extendFlat=te.extendFlat,s.extendDeep=te.extendDeep,s.extendDeepAll=te.extendDeepAll,s.extendDeepNoArrays=te.extendDeepNoArrays;var J=ze();s.log=J.log,s.warn=J.warn,s.error=J.error;var ye=Xe();s.counterRegex=ye.counter;var se=Hn();s.throttle=se.throttle,s.throttleDone=se.done,s.clearThrottle=se.clear;var he=Lr();s.getGraphDiv=he.getGraphDiv,s.isPlotDiv=he.isPlotDiv,s.removeElement=he.removeElement,s.addStyleRule=he.addStyleRule,s.addRelatedStyleRule=he.addRelatedStyleRule,s.deleteRelatedStyleRule=he.deleteRelatedStyleRule,s.setStyleOnHover=he.setStyleOnHover,s.getFullTransformMatrix=he.getFullTransformMatrix,s.getElementTransformMatrix=he.getElementTransformMatrix,s.getElementAndAncestors=he.getElementAndAncestors,s.equalDomRects=he.equalDomRects,s.clearResponsive=bi(),s.preserveDrawingBuffer=Mi(),s.makeTraceGroups=Ii(),s._=ti(),s.notifier=rt(),s.filterUnique=pi(),s.filterVisible=Ri(),s.pushUnique=bt(),s.increment=mo(),s.cleanNumber=so(),s.ensureNumber=function($){return m($)?($=Number($),$>p||$<g?w:$):w},s.isIndex=function(Ae,$){return $!==void 0&&Ae>=$?!1:m(Ae)&&Ae>=0&&Ae%1===0},s.noop=lt(),s.identity=Qa(),s.repeat=function(Ae,$){for(var oe=new Array($),ge=0;ge<$;ge++)oe[ge]=Ae;return oe},s.swapAttrs=function(Ae,$,oe,ge){oe||(oe="x"),ge||(ge="y");for(var Te=0;Te<$.length;Te++){var Ue=$[Te],Ze=s.nestedProperty(Ae,Ue.replace("?",oe)),Je=s.nestedProperty(Ae,Ue.replace("?",ge)),ft=Ze.get();Ze.set(Je.get()),Je.set(ft)}},s.raiseToTop=function($){$.parentNode.appendChild($)},s.cancelTransition=function(Ae){return Ae.transition().duration(0)},s.constrain=function(Ae,$,oe){return $>oe?Math.max(oe,Math.min($,Ae)):Math.max($,Math.min(oe,Ae))},s.bBoxIntersect=function(Ae,$,oe){return oe=oe||0,Ae.left<=$.right+oe&&$.left<=Ae.right+oe&&Ae.top<=$.bottom+oe&&$.top<=Ae.bottom+oe},s.simpleMap=function(Ae,$,oe,ge,Te){for(var Ue=Ae.length,Ze=new Array(Ue),Je=0;Je<Ue;Je++)Ze[Je]=$(Ae[Je],oe,ge,Te);return Ze},s.randstr=function Ae($,oe,ge,Te){if(ge||(ge=16),oe===void 0&&(oe=24),oe<=0)return"0";var Ue=Math.log(Math.pow(2,oe))/Math.log(ge),Ze="",Je,ft,wt;for(Je=2;Ue===1/0;Je*=2)Ue=Math.log(Math.pow(2,oe/Je))/Math.log(ge)*Je;var Ct=Ue-Math.floor(Ue);for(Je=0;Je<Math.floor(Ue);Je++)wt=Math.floor(Math.random()*ge).toString(ge),Ze=wt+Ze;Ct&&(ft=Math.pow(ge,Ct),wt=Math.floor(Math.random()*ft).toString(ge),Ze=wt+Ze);var Kt=parseInt(Ze,ge);return $&&$[Ze]||Kt!==1/0&&Kt>=Math.pow(2,oe)?Te>10?(s.warn("randstr failed uniqueness"),Ze):Ae($,oe,ge,(Te||0)+1):Ze},s.OptionControl=function(Ae,$){Ae||(Ae={}),$||($="opt");var oe={};return oe.optionList=[],oe._newoption=function(ge){ge[$]=Ae,oe[ge.name]=ge,oe.optionList.push(ge)},oe["_"+$]=Ae,oe},s.smooth=function(Ae,$){if($=Math.round($)||0,$<2)return Ae;var oe=Ae.length,ge=2*oe,Te=2*$-1,Ue=new Array(Te),Ze=new Array(oe),Je,ft,wt,Ct;for(Je=0;Je<Te;Je++)Ue[Je]=(1-Math.cos(Math.PI*(Je+1)/$))/(2*$);for(Je=0;Je<oe;Je++){for(Ct=0,ft=0;ft<Te;ft++)wt=Je+ft+1-$,wt<-oe?wt-=ge*Math.round(wt/ge):wt>=ge&&(wt-=ge*Math.floor(wt/ge)),wt<0?wt=-1-wt:wt>=oe&&(wt=ge-1-wt),Ct+=Ae[wt]*Ue[ft];Ze[Je]=Ct}return Ze},s.syncOrAsync=function(Ae,$,oe){var ge,Te;function Ue(){return s.syncOrAsync(Ae,$,oe)}for(;Ae.length;)if(Te=Ae.splice(0,1)[0],ge=Te($),ge&&ge.then)return ge.then(Ue);return oe&&oe($)},s.stripTrailingSlash=function(Ae){return Ae.substr(-1)==="/"?Ae.substr(0,Ae.length-1):Ae},s.noneOrAll=function(Ae,$,oe){if(Ae){var ge=!1,Te=!0,Ue,Ze;for(Ue=0;Ue<oe.length;Ue++)Ze=Ae[oe[Ue]],Ze!=null?ge=!0:Te=!1;if(ge&&!Te)for(Ue=0;Ue<oe.length;Ue++)Ae[oe[Ue]]=$[oe[Ue]]}},s.mergeArray=function(Ae,$,oe,ge){var Te=typeof ge=="function";if(s.isArrayOrTypedArray(Ae))for(var Ue=Math.min(Ae.length,$.length),Ze=0;Ze<Ue;Ze++){var Je=Ae[Ze];$[Ze][oe]=Te?ge(Je):Je}},s.mergeArrayCastPositive=function(Ae,$,oe){return s.mergeArray(Ae,$,oe,function(ge){var Te=+ge;return isFinite(Te)&&Te>0?Te:0})},s.fillArray=function(Ae,$,oe,ge){if(ge=ge||s.identity,s.isArrayOrTypedArray(Ae))for(var Te=0;Te<$.length;Te++)$[Te][oe]=ge(Ae[Te])},s.castOption=function(Ae,$,oe,ge){ge=ge||s.identity;var Te=s.nestedProperty(Ae,oe).get();return s.isArrayOrTypedArray(Te)?Array.isArray($)&&s.isArrayOrTypedArray(Te[$[0]])?ge(Te[$[0]][$[1]]):ge(Te[$]):Te},s.extractOption=function(Ae,$,oe,ge){if(oe in Ae)return Ae[oe];var Te=s.nestedProperty($,ge).get();if(!Array.isArray(Te))return Te};function pe(Ae){var $={};for(var oe in Ae)for(var ge=Ae[oe],Te=0;Te<ge.length;Te++)$[ge[Te]]=+oe;return $}s.tagSelected=function(Ae,$,oe){var ge=$.selectedpoints,Te=$._indexToPoints,Ue;Te&&(Ue=pe(Te));function Ze(Kt){return Kt!==void 0&&Kt<Ae.length}for(var Je=0;Je<ge.length;Je++){var ft=ge[Je];if(s.isIndex(ft)||s.isArrayOrTypedArray(ft)&&s.isIndex(ft[0])&&s.isIndex(ft[1])){var wt=Ue?Ue[ft]:ft,Ct=oe?oe[wt]:wt;Ze(Ct)&&(Ae[Ct].selected=1)}}},s.selIndices2selPoints=function(Ae){var $=Ae.selectedpoints,oe=Ae._indexToPoints;if(oe){for(var ge=pe(oe),Te=[],Ue=0;Ue<$.length;Ue++){var Ze=$[Ue];if(s.isIndex(Ze)){var Je=ge[Ze];s.isIndex(Je)&&Te.push(Je)}}return Te}else return $},s.getTargetArray=function(Ae,$){var oe=$.target;if(typeof oe=="string"&&oe){var ge=s.nestedProperty(Ae,oe).get();return s.isArrayOrTypedArray(ge)?ge:!1}else if(s.isArrayOrTypedArray(oe))return oe;return!1};function Q(Ae,$,oe){var ge={};typeof $!="object"&&($={});var Te=oe==="pieLike"?-1:3,Ue=Object.keys(Ae),Ze,Je,ft;for(Ze=0;Ze<Ue.length;Ze++)Je=Ue[Ze],ft=Ae[Je],!(Je.charAt(0)==="_"||typeof ft=="function")&&(Je==="module"?ge[Je]=ft:Array.isArray(ft)?Je==="colorscale"||Te===-1?ge[Je]=ft.slice():ge[Je]=ft.slice(0,Te):s.isTypedArray(ft)?Te===-1?ge[Je]=ft.subarray():ge[Je]=ft.subarray(0,Te):ft&&typeof ft=="object"?ge[Je]=Q(Ae[Je],$[Je],oe):ge[Je]=ft);for(Ue=Object.keys($),Ze=0;Ze<Ue.length;Ze++)Je=Ue[Ze],ft=$[Je],(typeof ft!="object"||!(Je in ge)||typeof ge[Je]!="object")&&(ge[Je]=ft);return ge}s.minExtend=Q,s.titleCase=function(Ae){return Ae.charAt(0).toUpperCase()+Ae.substr(1)},s.containsAny=function(Ae,$){for(var oe=0;oe<$.length;oe++)if(Ae.indexOf($[oe])!==-1)return!0;return!1};var ue=/Version\/[\d\.]+.*Safari/;s.isSafari=function(){return ue.test(window.navigator.userAgent)};var me=/iPad|iPhone|iPod/;s.isIOS=function(){return me.test(window.navigator.userAgent)};var be=/Macintosh.+AppleWebKit.+Gecko\)$/;s.isMacWKWebView=()=>be.test(window.navigator.userAgent);var ve=/Firefox\/(\d+)\.\d+/;s.getFirefoxVersion=function(){var Ae=ve.exec(window.navigator.userAgent);if(Ae&&Ae.length===2){var $=parseInt(Ae[1]);if(!isNaN($))return $}return null},s.isD3Selection=function(Ae){return Ae instanceof d.selection},s.ensureSingle=function(Ae,$,oe,ge){var Te=Ae.select($+(oe?"."+oe:""));if(Te.size())return Te;var Ue=Ae.append($);return oe&&Ue.classed(oe,!0),ge&&Ue.call(ge),Ue},s.ensureSingleById=function(Ae,$,oe,ge){var Te=Ae.select($+"#"+oe);if(Te.size())return Te;var Ue=Ae.append($).attr("id",oe);return ge&&Ue.call(ge),Ue},s.objectFromPath=function(Ae,$){for(var oe=Ae.split("."),ge,Te=ge={},Ue=0;Ue<oe.length;Ue++){var Ze=oe[Ue],Je=null,ft=oe[Ue].match(/(.*)\[([0-9]+)\]/);ft?(Ze=ft[1],Je=ft[2],ge=ge[Ze]=[],Ue===oe.length-1?ge[Je]=$:ge[Je]={},ge=ge[Je]):(Ue===oe.length-1?ge[Ze]=$:ge[Ze]={},ge=ge[Ze])}return Te};var Me=/^([^\[\.]+)\.(.+)?/,ke=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function le(Ae){return Ae.slice(0,2)==="__"}s.expandObjectPaths=function(Ae){var $,oe,ge,Te,Ue,Ze,Je;if(typeof Ae=="object"&&!Array.isArray(Ae)){for(oe in Ae)if(Ae.hasOwnProperty(oe))if($=oe.match(Me)){if(Te=Ae[oe],ge=$[1],le(ge))continue;delete Ae[oe],Ae[ge]=s.extendDeepNoArrays(Ae[ge]||{},s.objectFromPath(oe,s.expandObjectPaths(Te))[ge])}else if($=oe.match(ke)){if(Te=Ae[oe],ge=$[1],le(ge))continue;if(Ue=parseInt($[2]),delete Ae[oe],Ae[ge]=Ae[ge]||[],$[3]===".")Je=$[4],Ze=Ae[ge][Ue]=Ae[ge][Ue]||{},s.extendDeepNoArrays(Ze,s.objectFromPath(Je,s.expandObjectPaths(Te)));else{if(le(ge))continue;Ae[ge][Ue]=s.expandObjectPaths(Te)}}else{if(le(oe))continue;Ae[oe]=s.expandObjectPaths(Ae[oe])}}return Ae},s.numSeparate=function(Ae,$,oe){if(oe||(oe=!1),typeof $!="string"||$.length===0)throw new Error("Separator string required for formatting!");typeof Ae=="number"&&(Ae=String(Ae));var ge=/(\d+)(\d{3})/,Te=$.charAt(0),Ue=$.charAt(1),Ze=Ae.split("."),Je=Ze[0],ft=Ze.length>1?Te+Ze[1]:"";if(Ue&&(Ze.length>1||Je.length>4||oe))for(;ge.test(Je);)Je=Je.replace(ge,"$1"+Ue+"$2");return Je+ft},s.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var De=/^\w*$/;s.templateString=function(Ae,$){var oe={};return Ae.replace(s.TEMPLATE_STRING_REGEX,function(ge,Te){var Ue;return De.test(Te)?Ue=$[Te]:(oe[Te]=oe[Te]||s.nestedProperty($,Te).get,Ue=oe[Te](!0)),Ue!==void 0?Ue:""})};var Oe={max:10,count:0,name:"hovertemplate"};s.hovertemplateString=function(){return yt.apply(Oe,arguments)};var He={max:10,count:0,name:"texttemplate"};s.texttemplateString=function(){return yt.apply(He,arguments)};var Be=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function Ye(Ae){var $=Ae.match(Be);return $?{key:$[1],op:$[2],number:Number($[3])}:{key:Ae,op:null,number:null}}var st={max:10,count:0,name:"texttemplate",parseMultDiv:!0};s.texttemplateStringForShapes=function(){return yt.apply(st,arguments)};var it=/^[:|\|]/;function yt(Ae,$,oe){var ge=this,Te=arguments;return $||($={}),Ae.replace(s.TEMPLATE_STRING_REGEX,function(Ue,Ze,Je){var ft=Ze==="xother"||Ze==="yother",wt=Ze==="_xother"||Ze==="_yother",Ct=Ze==="_xother_"||Ze==="_yother_",Kt=Ze==="xother_"||Ze==="yother_",$t=ft||wt||Kt||Ct,Wt=Ze;(wt||Ct)&&(Wt=Wt.substring(1)),(Kt||Ct)&&(Wt=Wt.substring(0,Wt.length-1));var nt=null,pt=null;if(ge.parseMultDiv){var Ke=Ye(Wt);Wt=Ke.key,nt=Ke.op,pt=Ke.number}var gt;if($t){if(gt=$[Wt],gt===void 0)return""}else{var Ft,Xt;for(Xt=3;Xt<Te.length;Xt++)if(Ft=Te[Xt],!!Ft){if(Ft.hasOwnProperty(Wt)){gt=Ft[Wt];break}if(De.test(Wt)||(gt=s.nestedProperty(Ft,Wt).get(!0)),gt!==void 0)break}}if(gt!==void 0&&(nt==="*"&&(gt*=pt),nt==="/"&&(gt/=pt)),gt===void 0&&ge)return ge.count<ge.max&&(s.warn("Variable '"+Wt+"' in "+ge.name+" could not be found!"),gt=Ue),ge.count===ge.max&&s.warn("Too many "+ge.name+" warnings - additional warnings will be suppressed"),ge.count++,Ue;if(Je){var or;if(Je[0]===":"&&(or=oe?oe.numberFormat:s.numberFormat,gt!==""&&(gt=or(Je.replace(it,""))(gt))),Je[0]==="|"){or=oe?oe.timeFormat:u;var sr=s.dateTime2ms(gt);gt=s.formatDate(sr,Je.replace(it,""),!1,or)}}else{var dr=Wt+"Label";$.hasOwnProperty(dr)&&(gt=$[dr])}return $t&&(gt="("+gt+")",(wt||Ct)&&(gt=" "+gt),(Kt||Ct)&&(gt=gt+" ")),gt})}var _e=48,Ee=57;s.subplotSort=function(Ae,$){for(var oe=Math.min(Ae.length,$.length)+1,ge=0,Te=0,Ue=0;Ue<oe;Ue++){var Ze=Ae.charCodeAt(Ue)||0,Je=$.charCodeAt(Ue)||0,ft=Ze>=_e&&Ze<=Ee,wt=Je>=_e&&Je<=Ee;if(ft&&(ge=10*ge+Ze-_e),wt&&(Te=10*Te+Je-_e),!ft||!wt){if(ge!==Te)return ge-Te;if(Ze!==Je)return Ze-Je}}return Te-ge};var de=2e9;s.seedPseudoRandom=function(){de=2e9},s.pseudoRandom=function(){var Ae=de;return de=(69069*de+1)%4294967296,Math.abs(de-Ae)<429496729?s.pseudoRandom():de/4294967296},s.fillText=function(Ae,$,oe){var ge=Array.isArray(oe)?function(Ze){oe.push(Ze)}:function(Ze){oe.text=Ze},Te=s.extractOption(Ae,$,"htx","hovertext");if(s.isValidTextValue(Te))return ge(Te);var Ue=s.extractOption(Ae,$,"tx","text");if(s.isValidTextValue(Ue))return ge(Ue)},s.isValidTextValue=function(Ae){return Ae||Ae===0},s.formatPercent=function(Ae,$){$=$||0;for(var oe=(Math.round(100*Ae*Math.pow(10,$))*Math.pow(.1,$)).toFixed($)+"%",ge=0;ge<$;ge++)oe.indexOf(".")!==-1&&(oe=oe.replace("0%","%"),oe=oe.replace(".%","%"));return oe},s.isHidden=function(Ae){var $=window.getComputedStyle(Ae).display;return!$||$==="none"},s.strTranslate=function(Ae,$){return Ae||$?"translate("+Ae+","+$+")":""},s.strRotate=function(Ae){return Ae?"rotate("+Ae+")":""},s.strScale=function(Ae){return Ae!==1?"scale("+Ae+")":""},s.getTextTransform=function(Ae){var $=Ae.noCenter,oe=Ae.textX,ge=Ae.textY,Te=Ae.targetX,Ue=Ae.targetY,Ze=Ae.anchorX||0,Je=Ae.anchorY||0,ft=Ae.rotate,wt=Ae.scale;return wt?wt>1&&(wt=1):wt=0,s.strTranslate(Te-wt*(oe+Ze),Ue-wt*(ge+Je))+s.strScale(wt)+(ft?"rotate("+ft+($?"":" "+oe+" "+ge)+")":"")},s.setTransormAndDisplay=function(Ae,$){Ae.attr("transform",s.getTextTransform($)),Ae.style("display",$.scale?null:"none")},s.ensureUniformFontSize=function(Ae,$){var oe=s.extendFlat({},$);return oe.size=Math.max($.size,Ae._fullLayout.uniformtext.minsize||0),oe},s.join2=function(Ae,$,oe){var ge=Ae.length;return ge>1?Ae.slice(0,-1).join($)+oe+Ae[ge-1]:Ae.join($)},s.bigFont=function(Ae){return Math.round(1.2*Ae)};var we=s.getFirefoxVersion(),je=we!==null&&we<86;s.getPositionFromD3Event=function(){return je?[d.event.layerX,d.event.layerY]:[d.event.offsetX,d.event.offsetY]}}}),Gs=n({"build/plotcss.js"(){var ce=pa(),fe={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X:focus-within .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group a":"display:grid;place-content:center;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;border:none;background:rgba(0,0,0,0);","X .modebar-btn svg":"position:relative;","X .modebar-btn:focus-visible":"outline:1px solid #000;outline-offset:1px;border-radius:3px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(u in fe)d=u.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),ce.addStyleRule(d,fe[u]);var d,u}}),qo=n({"node_modules/is-browser/client.js"(ce,fe){fe.exports=!0}}),Fo=n({"node_modules/has-hover/index.js"(ce,fe){var d=qo(),u;typeof window.matchMedia=="function"?u=!window.matchMedia("(hover: none)").matches:u=d,fe.exports=u}}),ko=n({"node_modules/events/events.js"(ce,fe){var d=typeof Reflect=="object"?Reflect:null,u=d&&typeof d.apply=="function"?d.apply:function(J,ye,se){return Function.prototype.apply.call(J,ye,se)},c;d&&typeof d.ownKeys=="function"?c=d.ownKeys:Object.getOwnPropertySymbols?c=function(J){return Object.getOwnPropertyNames(J).concat(Object.getOwnPropertySymbols(J))}:c=function(J){return Object.getOwnPropertyNames(J)};function m(te){console&&console.warn&&console.warn(te)}var v=Number.isNaN||function(J){return J!==J};function p(){p.init.call(this)}fe.exports=p,fe.exports.once=_,p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var g=10;function w(te){if(typeof te!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof te)}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(te){if(typeof te!="number"||te<0||v(te))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+te+".");g=te}}),p.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(J){if(typeof J!="number"||J<0||v(J))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+J+".");return this._maxListeners=J,this};function s(te){return te._maxListeners===void 0?p.defaultMaxListeners:te._maxListeners}p.prototype.getMaxListeners=function(){return s(this)},p.prototype.emit=function(J){for(var ye=[],se=1;se<arguments.length;se++)ye.push(arguments[se]);var he=J==="error",pe=this._events;if(pe!==void 0)he=he&&pe.error===void 0;else if(!he)return!1;if(he){var Q;if(ye.length>0&&(Q=ye[0]),Q instanceof Error)throw Q;var ue=new Error("Unhandled error."+(Q?" ("+Q.message+")":""));throw ue.context=Q,ue}var me=pe[J];if(me===void 0)return!1;if(typeof me=="function")u(me,this,ye);else for(var be=me.length,ve=O(me,be),se=0;se<be;++se)u(ve[se],this,ye);return!0};function j(te,J,ye,se){var he,pe,Q;if(w(ye),pe=te._events,pe===void 0?(pe=te._events=Object.create(null),te._eventsCount=0):(pe.newListener!==void 0&&(te.emit("newListener",J,ye.listener?ye.listener:ye),pe=te._events),Q=pe[J]),Q===void 0)Q=pe[J]=ye,++te._eventsCount;else if(typeof Q=="function"?Q=pe[J]=se?[ye,Q]:[Q,ye]:se?Q.unshift(ye):Q.push(ye),he=s(te),he>0&&Q.length>he&&!Q.warned){Q.warned=!0;var ue=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(J)+" listeners added. Use emitter.setMaxListeners() to increase limit");ue.name="MaxListenersExceededWarning",ue.emitter=te,ue.type=J,ue.count=Q.length,m(ue)}return te}p.prototype.addListener=function(J,ye){return j(this,J,ye,!1)},p.prototype.on=p.prototype.addListener,p.prototype.prependListener=function(J,ye){return j(this,J,ye,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function z(te,J,ye){var se={fired:!1,wrapFn:void 0,target:te,type:J,listener:ye},he=b.bind(se);return he.listener=ye,se.wrapFn=he,he}p.prototype.once=function(J,ye){return w(ye),this.on(J,z(this,J,ye)),this},p.prototype.prependOnceListener=function(J,ye){return w(ye),this.prependListener(J,z(this,J,ye)),this},p.prototype.removeListener=function(J,ye){var se,he,pe,Q,ue;if(w(ye),he=this._events,he===void 0)return this;if(se=he[J],se===void 0)return this;if(se===ye||se.listener===ye)--this._eventsCount===0?this._events=Object.create(null):(delete he[J],he.removeListener&&this.emit("removeListener",J,se.listener||ye));else if(typeof se!="function"){for(pe=-1,Q=se.length-1;Q>=0;Q--)if(se[Q]===ye||se[Q].listener===ye){ue=se[Q].listener,pe=Q;break}if(pe<0)return this;pe===0?se.shift():F(se,pe),se.length===1&&(he[J]=se[0]),he.removeListener!==void 0&&this.emit("removeListener",J,ue||ye)}return this},p.prototype.off=p.prototype.removeListener,p.prototype.removeAllListeners=function(J){var ye,se,he;if(se=this._events,se===void 0)return this;if(se.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):se[J]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete se[J]),this;if(arguments.length===0){var pe=Object.keys(se),Q;for(he=0;he<pe.length;++he)Q=pe[he],Q!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ye=se[J],typeof ye=="function")this.removeListener(J,ye);else if(ye!==void 0)for(he=ye.length-1;he>=0;he--)this.removeListener(J,ye[he]);return this};function X(te,J,ye){var se=te._events;if(se===void 0)return[];var he=se[J];return he===void 0?[]:typeof he=="function"?ye?[he.listener||he]:[he]:ye?P(he):O(he,he.length)}p.prototype.listeners=function(J){return X(this,J,!0)},p.prototype.rawListeners=function(J){return X(this,J,!1)},p.listenerCount=function(te,J){return typeof te.listenerCount=="function"?te.listenerCount(J):N.call(te,J)},p.prototype.listenerCount=N;function N(te){var J=this._events;if(J!==void 0){var ye=J[te];if(typeof ye=="function")return 1;if(ye!==void 0)return ye.length}return 0}p.prototype.eventNames=function(){return this._eventsCount>0?c(this._events):[]};function O(te,J){for(var ye=new Array(J),se=0;se<J;++se)ye[se]=te[se];return ye}function F(te,J){for(;J+1<te.length;J++)te[J]=te[J+1];te.pop()}function P(te){for(var J=new Array(te.length),ye=0;ye<J.length;++ye)J[ye]=te[ye].listener||te[ye];return J}function _(te,J){return new Promise(function(ye,se){function he(Q){te.removeListener(J,pe),se(Q)}function pe(){typeof te.removeListener=="function"&&te.removeListener("error",he),ye([].slice.call(arguments))}H(te,J,pe,{once:!0}),J!=="error"&&R(te,he,{once:!0})})}function R(te,J,ye){typeof te.on=="function"&&H(te,"error",J,ye)}function H(te,J,ye,se){if(typeof te.on=="function")se.once?te.once(J,ye):te.on(J,ye);else if(typeof te.addEventListener=="function")te.addEventListener(J,function he(pe){se.once&&te.removeEventListener(J,he),ye(pe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof te)}}}),Ro=n({"src/lib/events.js"(ce,fe){var d=ko().EventEmitter,u={init:function(c){if(c._ev instanceof d)return c;var m=new d,v=new d;return c._ev=m,c._internalEv=v,c.on=m.on.bind(m),c.once=m.once.bind(m),c.removeListener=m.removeListener.bind(m),c.removeAllListeners=m.removeAllListeners.bind(m),c._internalOn=v.on.bind(v),c._internalOnce=v.once.bind(v),c._removeInternalListener=v.removeListener.bind(v),c._removeAllInternalListeners=v.removeAllListeners.bind(v),c.emit=function(p,g){m.emit(p,g),v.emit(p,g)},typeof c.addEventListener=="function"&&c.addEventListener("wheel",()=>{},{passive:!0}),c},triggerHandler:function(c,m,v){var p,g=c._ev;if(!g)return;var w=g._events[m];if(!w)return;function s(b){if(b.listener){if(g.removeListener(m,b.listener),!b.fired)return b.fired=!0,b.listener.apply(g,[v])}else return b.apply(g,[v])}w=Array.isArray(w)?w:[w];var j;for(j=0;j<w.length-1;j++)s(w[j]);return p=s(w[j]),p},purge:function(c){return delete c._ev,delete c.on,delete c.once,delete c.removeListener,delete c.removeAllListeners,delete c.emit,delete c._ev,delete c._internalEv,delete c._internalOn,delete c._internalOnce,delete c._removeInternalListener,delete c._removeAllInternalListeners,c}};fe.exports=u}}),Bi=n({"src/lib/queue.js"(ce,fe){var d=pa(),u=tt().dfltConfig;function c(v,p){for(var g=[],w,s=0;s<p.length;s++)w=p[s],w===v?g[s]=w:typeof w=="object"?g[s]=Array.isArray(w)?d.extendDeep([],w):d.extendDeepAll({},w):g[s]=w;return g}var m={};m.add=function(v,p,g,w,s){var j,b;if(v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},b=v.undoQueue.index,v.autoplay){v.undoQueue.inSequence||(v.autoplay=!1);return}!v.undoQueue.sequence||v.undoQueue.beginSequence?(j={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},v.undoQueue.queue.splice(b,v.undoQueue.queue.length-b,j),v.undoQueue.index+=1):j=v.undoQueue.queue[b-1],v.undoQueue.beginSequence=!1,j&&(j.undo.calls.unshift(p),j.undo.args.unshift(g),j.redo.calls.push(w),j.redo.args.push(s)),v.undoQueue.queue.length>u.queueLength&&(v.undoQueue.queue.shift(),v.undoQueue.index--)},m.startSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!0,v.undoQueue.beginSequence=!0},m.stopSequence=function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!1,v.undoQueue.beginSequence=!1},m.undo=function(p){var g,w;if(!(p.undoQueue===void 0||isNaN(p.undoQueue.index)||p.undoQueue.index<=0)){for(p.undoQueue.index--,g=p.undoQueue.queue[p.undoQueue.index],p.undoQueue.inSequence=!0,w=0;w<g.undo.calls.length;w++)m.plotDo(p,g.undo.calls[w],g.undo.args[w]);p.undoQueue.inSequence=!1,p.autoplay=!1}},m.redo=function(p){var g,w;if(!(p.undoQueue===void 0||isNaN(p.undoQueue.index)||p.undoQueue.index>=p.undoQueue.queue.length)){for(g=p.undoQueue.queue[p.undoQueue.index],p.undoQueue.inSequence=!0,w=0;w<g.redo.calls.length;w++)m.plotDo(p,g.redo.calls[w],g.redo.args[w]);p.undoQueue.inSequence=!1,p.autoplay=!1,p.undoQueue.index++}},m.plotDo=function(v,p,g){v.autoplay=!0,g=c(v,g),p.apply(null,g)},fe.exports=m}}),As=n({"src/plots/frame_attributes.js"(ce,fe){fe.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}}}),qs=n({"src/plot_api/plot_schema.js"(ce){var fe=hr(),d=pa(),u=$e(),c=Vr(),m=As(),v=Gr(),p=tt().configAttributes,g=wa(),w=d.extendDeepAll,s=d.isPlainObject,j=d.isArrayOrTypedArray,b=d.nestedProperty,z=d.valObjectMeta,X="_isSubplotObj",N="_isLinkedToArray",O="_arrayAttrRegexps",F="_deprecated",P=[X,N,O,F];ce.IS_SUBPLOT_OBJ=X,ce.IS_LINKED_TO_ARRAY=N,ce.DEPRECATED=F,ce.UNDERSCORE_ATTRS=P,ce.get=function(){var be={};return fe.allTypes.forEach(function(ve){be[ve]=te(ve)}),{defs:{valObjects:z,metaKeys:P.concat(["description","role","editType","impliedEdits"]),editType:{traces:g.traces,layout:g.layout},impliedEdits:{}},traces:be,layout:J(),frames:ye(),animation:se(v),config:se(p)}},ce.crawl=function(be,ve,Me,ke){var le=Me||0;ke=ke||"",Object.keys(be).forEach(function(De){var Oe=be[De];if(P.indexOf(De)===-1){var He=(ke?ke+".":"")+De;ve(Oe,De,be,le,He),!ce.isValObject(Oe)&&s(Oe)&&De!=="impliedEdits"&&ce.crawl(Oe,ve,le+1,He)}})},ce.isValObject=function(be){return be&&be.valType!==void 0},ce.findArrayAttributes=function(be){var ve=[],Me=[],ke=[],le,De;function Oe(Be,Ye,st,it){Me=Me.slice(0,it).concat([Ye]),ke=ke.slice(0,it).concat([Be&&Be._isLinkedToArray]);var yt=Be&&(Be.valType==="data_array"||Be.arrayOk===!0)&&!(Me[it-1]==="colorbar"&&(Ye==="ticktext"||Ye==="tickvals"));yt&&He(le,0,"")}function He(Be,Ye,st){var it=Be[Me[Ye]],yt=st+Me[Ye];if(Ye===Me.length-1)j(it)&&ve.push(De+yt);else if(ke[Ye]){if(Array.isArray(it))for(var _e=0;_e<it.length;_e++)s(it[_e])&&He(it[_e],Ye+1,yt+"["+_e+"].")}else s(it)&&He(it,Ye+1,yt+".")}return le=be,De="",ce.crawl(u,Oe),be._module&&be._module.attributes&&ce.crawl(be._module.attributes,Oe),ve},ce.getTraceValObject=function(be,ve){var Me=ve[0],ke=1,le,De,Oe=be._module;if(Oe||(Oe=(fe.modules[be.type||u.type.dflt]||{})._module),!Oe)return!1;if(le=Oe.attributes,De=le&&le[Me],!De){var He=Oe.basePlotModule;He&&He.attributes&&(De=He.attributes[Me])}return De||(De=u[Me]),R(De,ve,ke)},ce.getLayoutValObject=function(be,ve){var Me=_(be,ve[0]);return R(Me,ve,1)};function _(be,ve){var Me,ke,le,De,Oe=be._basePlotModules;if(Oe){var He;for(Me=0;Me<Oe.length;Me++){if(le=Oe[Me],le.attrRegex&&le.attrRegex.test(ve)){if(le.layoutAttrOverrides)return le.layoutAttrOverrides;!He&&le.layoutAttributes&&(He=le.layoutAttributes)}var Be=le.baseLayoutAttrOverrides;if(Be&&ve in Be)return Be[ve]}if(He)return He}var Ye=be._modules;if(Ye){for(Me=0;Me<Ye.length;Me++)if(De=Ye[Me].layoutAttributes,De&&ve in De)return De[ve]}for(ke in fe.componentsRegistry){if(le=fe.componentsRegistry[ke],le.name==="colorscale"&&ve.indexOf("coloraxis")===0)return le.layoutAttributes[ve];if(!le.schema&&ve===le.name)return le.layoutAttributes}return ve in c?c[ve]:!1}function R(be,ve,Me){if(!be)return!1;if(be._isLinkedToArray){if(H(ve[Me]))Me++;else if(Me<ve.length)return!1}for(;Me<ve.length;Me++){var ke=be[ve[Me]];if(s(ke))be=ke;else break;if(Me===ve.length-1)break;if(be._isLinkedToArray){if(Me++,!H(ve[Me]))return!1}else if(be.valType==="info_array"){Me++;var le=ve[Me];if(!H(le))return!1;var De=be.items;if(Array.isArray(De)){if(le>=De.length)return!1;if(be.dimensions===2){if(Me++,ve.length===Me)return be;var Oe=ve[Me];if(!H(Oe))return!1;be=De[le][Oe]}else be=De[le]}else be=De}}return be}function H(be){return be===Math.round(be)&&be>=0}function te(be){var ve,Me;ve=fe.modules[be]._module,Me=ve.basePlotModule;var ke={};ke.type=null;var le=w({},u),De=w({},ve.attributes);ce.crawl(De,function(Be,Ye,st,it,yt){b(le,yt).set(void 0),Be===void 0&&b(De,yt).set(void 0)}),w(ke,le),fe.traceIs(be,"noOpacity")&&delete ke.opacity,fe.traceIs(be,"showLegend")||(delete ke.showlegend,delete ke.legendgroup),fe.traceIs(be,"noHover")&&(delete ke.hoverinfo,delete ke.hoverlabel),ve.selectPoints||delete ke.selectedpoints,w(ke,De),Me.attributes&&w(ke,Me.attributes),ke.type=be;var Oe={meta:ve.meta||{},categories:ve.categories||{},animatable:!!ve.animatable,type:be,attributes:se(ke)};if(ve.layoutAttributes){var He={};w(He,ve.layoutAttributes),Oe.layoutAttributes=se(He)}return ve.animatable||ce.crawl(Oe,function(Be){ce.isValObject(Be)&&"anim"in Be&&delete Be.anim}),Oe}function J(){var be={},ve,Me;w(be,c);for(ve in fe.subplotsRegistry)if(Me=fe.subplotsRegistry[ve],!!Me.layoutAttributes)if(Array.isArray(Me.attr))for(var ke=0;ke<Me.attr.length;ke++)ue(be,Me,Me.attr[ke]);else{var le=Me.attr==="subplot"?Me.name:Me.attr;ue(be,Me,le)}for(ve in fe.componentsRegistry){Me=fe.componentsRegistry[ve];var De=Me.schema;if(De&&(De.subplots||De.layout)){var Oe=De.subplots;if(Oe&&Oe.xaxis&&!Oe.yaxis)for(var He in Oe.xaxis)delete be.yaxis[He];delete be.xaxis.shift,delete be.xaxis.autoshift}else Me.name==="colorscale"?w(be,Me.layoutAttributes):Me.layoutAttributes&&me(be,Me.layoutAttributes,Me.name)}return{layoutAttributes:se(be)}}function ye(){var be={frames:w({},m)};return se(be),be.frames}function se(be){return he(be),pe(be),Q(be),be}function he(be){function ve(ke){return{valType:"string",editType:"none"}}function Me(ke,le,De){ce.isValObject(ke)?(ke.arrayOk===!0||ke.valType==="data_array")&&(De[le+"src"]=ve()):s(ke)&&(ke.role="object")}ce.crawl(be,Me)}function pe(be){function ve(Me,ke,le){if(Me){var De=Me[N];De&&(delete Me[N],le[ke]={items:{}},le[ke].items[De]=Me,le[ke].role="object")}}ce.crawl(be,ve)}function Q(be){function ve(Me){for(var ke in Me)if(s(Me[ke]))ve(Me[ke]);else if(Array.isArray(Me[ke]))for(var le=0;le<Me[ke].length;le++)ve(Me[ke][le]);else Me[ke]instanceof RegExp&&(Me[ke]=Me[ke].toString())}ve(be)}function ue(be,ve,Me){var ke=b(be,Me),le=w({},ve.layoutAttributes);le[X]=!0,ke.set(le)}function me(be,ve,Me){var ke=b(be,Me);ke.set(w(ke.get()||{},ve))}}}),vn=n({"src/plot_api/plot_template.js"(ce){var fe=pa(),d=$e(),u="templateitemname",c={name:{valType:"string",editType:"none"}};c[u]={valType:"string",editType:"calc"},ce.templatedArray=function(p,g){return g._isLinkedToArray=p,g.name=c.name,g[u]=c[u],g},ce.traceTemplater=function(p){var g={},w,s;for(w in p)s=p[w],Array.isArray(s)&&s.length&&(g[w]=0);function j(b){w=fe.coerce(b,{},d,"type");var z={type:w,_template:null};if(w in g){s=p[w];var X=g[w]%s.length;g[w]++,z._template=s[X]}return z}return{newTrace:j}},ce.newContainer=function(p,g,w){var s=p._template,j=s&&(s[g]||w&&s[w]);fe.isPlainObject(j)||(j=null);var b=p[g]={_template:j};return b},ce.arrayTemplater=function(p,g,w){var s=p._template,j=s&&s[v(g)],b=s&&s[g];(!Array.isArray(b)||!b.length)&&(b=[]);var z={};function X(O){var F={name:O.name,_input:O},P=F[u]=O[u];if(!m(P))return F._template=j,F;for(var _=0;_<b.length;_++){var R=b[_];if(R.name===P)return z[P]=1,F._template=R,F}return F[w]=O[w]||!1,F._template=!1,F}function N(){for(var O=[],F=0;F<b.length;F++){var P=b[F],_=P.name;if(m(_)&&!z[_]){var R={_template:P,name:_,_input:{_templateitemname:_}};R[u]=P[u],O.push(R),z[_]=1}}return O}return{newItem:X,defaultItems:N}};function m(p){return p&&typeof p=="string"}function v(p){var g=p.length-1;return p.charAt(g)!=="s"&&fe.warn("bad argument to arrayDefaultKey: "+p),p.substr(0,p.length-1)+"defaults"}ce.arrayDefaultKey=v,ce.arrayEditor=function(p,g,w){var s=(fe.nestedProperty(p,g).get()||[]).length,j=w._index,b=j>=s&&(w._input||{})._templateitemname;b&&(j=s);var z=g+"["+j+"]",X;function N(){X={},b&&(X[z]={},X[z][u]=b)}N();function O(R,H){X[R]=H}function F(R,H){b?fe.nestedProperty(X[z],R).set(H):X[z+"."+R]=H}function P(){var R=X;return N(),R}function _(R,H){R&&F(R,H);var te=P();for(var J in te)fe.nestedProperty(p,J).set(te[J])}return{modifyBase:O,modifyItem:F,getUpdateObj:P,applyUpdate:_}}}}),ui=n({"src/plots/cartesian/constants.js"(ce,fe){var d=Xe().counter;fe.exports={idRegex:{x:d("x","( domain)?"),y:d("y","( domain)?")},attrRegex:d("[xy]axis"),xAxisMatch:d("xaxis"),yAxisMatch:d("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}}}),di=n({"src/plots/cartesian/axis_ids.js"(ce){var fe=hr(),d=ui();ce.id2name=function(m){if(!(typeof m!="string"||!m.match(d.AX_ID_PATTERN))){var v=m.split(" ")[0].substr(1);return v==="1"&&(v=""),m.charAt(0)+"axis"+v}},ce.name2id=function(m){if(m.match(d.AX_NAME_PATTERN)){var v=m.substr(5);return v==="1"&&(v=""),m.charAt(0)+v}},ce.cleanId=function(m,v,p){var g=/( domain)$/.test(m);if(!(typeof m!="string"||!m.match(d.AX_ID_PATTERN))&&!(v&&m.charAt(0)!==v)&&!(g&&!p)){var w=m.split(" ")[0].substr(1).replace(/^0+/,"");return w==="1"&&(w=""),m.charAt(0)+w+(g&&p?" domain":"")}},ce.list=function(c,m,v){var p=c._fullLayout;if(!p)return[];var g=ce.listIds(c,m),w=new Array(g.length),s;for(s=0;s<g.length;s++){var j=g[s];w[s]=p[j.charAt(0)+"axis"+j.substr(1)]}if(!v){var b=p._subplots.gl3d||[];for(s=0;s<b.length;s++){var z=p[b[s]];m?w.push(z[m+"axis"]):w.push(z.xaxis,z.yaxis,z.zaxis)}}return w},ce.listIds=function(c,m){var v=c._fullLayout;if(!v)return[];var p=v._subplots;return m?p[m+"axis"]:p.xaxis.concat(p.yaxis)},ce.getFromId=function(c,m,v){var p=c._fullLayout;return m=m===void 0||typeof m!="string"?m:m.replace(" domain",""),v==="x"?m=m.replace(/y[0-9]*/,""):v==="y"&&(m=m.replace(/x[0-9]*/,"")),p[ce.id2name(m)]},ce.getFromTrace=function(c,m,v){var p=c._fullLayout,g=null;if(fe.traceIs(m,"gl3d")){var w=m.scene;w.substr(0,5)==="scene"&&(g=p[w][v+"axis"])}else g=ce.getFromId(c,m[v+"axis"]||v);return g},ce.idSort=function(c,m){var v=c.charAt(0),p=m.charAt(0);return v!==p?v>p?1:-1:+(c.substr(1)||1)-+(m.substr(1)||1)},ce.ref2id=function(c){return/^[xyz]/.test(c)?c.split(" ")[0]:!1};function u(c,m){if(m&&m.length){for(var v=0;v<m.length;v++)if(m[v][c])return!0}return!1}ce.isLinked=function(c,m){return u(m,c._axisMatchGroups)||u(m,c._axisConstraintGroups)}}}),cs=n({"src/components/shapes/handle_outline.js"(ce,fe){function d(c){var m=c._fullLayout._zoomlayer;m&&m.selectAll(".outline-controllers").remove()}function u(c){var m=c._fullLayout._zoomlayer;m&&m.selectAll(".select-outline").remove(),c._fullLayout._outlining=!1}fe.exports={clearOutlineControllers:d,clearOutline:u}}}),Qo=n({"src/traces/scatter/layout_attributes.js"(ce,fe){fe.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}}}),Ys=n({"src/plots/get_data.js"(ce){var fe=hr();ui().SUBPLOT_PATTERN,ce.getSubplotCalcData=function(d,u,c){var m=fe.subplotsRegistry[u];if(!m)return[];for(var v=m.attr,p=[],g=0;g<d.length;g++){var w=d[g],s=w[0].trace;s[v]===c&&p.push(w)}return p},ce.getModuleCalcData=function(d,u,c){var m=[],v=[],p;if(typeof u=="string"?p=fe.getModule(u).plot:typeof u=="function"?p=u:p=u.plot,!p)return[m,d];for(var g=c,w=0;w<d.length;w++){var s=d[w],j=s[0].trace,b=j.zorder!==void 0;j.visible!==!0||j._length===0||(j._module&&j._module.plot===p&&(!b||j.zorder===g)?m.push(s):v.push(s))}return[m,v]},ce.getSubplotData=function(u,c,m){if(!fe.subplotsRegistry[c])return[];for(var v=fe.subplotsRegistry[c].attr,p=[],g,w=0;w<u.length;w++)g=u[w],g[v]===m&&p.push(g);return p}}}),Rl=n({"src/plots/command.js"(ce){var fe=hr(),d=pa();ce.manageCommandObserver=function(g,w,s,j){var b={},z=!0;w&&w._commandObserver&&(b=w._commandObserver),b.cache||(b.cache={}),b.lookupTable={};var X=ce.hasSimpleAPICommandBindings(g,s,b.lookupTable);if(w&&w._commandObserver){if(X)return b;if(w._commandObserver.remove)return w._commandObserver.remove(),w._commandObserver=null,b}if(X){u(g,X,b.cache),b.check=function(){if(z){var P=u(g,X,b.cache);return P.changed&&j&&b.lookupTable[P.value]!==void 0&&(b.disable(),Promise.resolve(j({value:P.value,type:X.type,prop:X.prop,traces:X.traces,index:b.lookupTable[P.value]})).then(b.enable,b.enable)),P.changed}};for(var N=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],O=0;O<N.length;O++)g._internalOn(N[O],b.check);b.remove=function(){for(var F=0;F<N.length;F++)g._removeInternalListener(N[F],b.check)}}else d.log("Unable to automatically bind plot updates to API command"),b.lookupTable={},b.remove=function(){};return b.disable=function(){z=!1},b.enable=function(){z=!0},w&&(w._commandObserver=b),b},ce.hasSimpleAPICommandBindings=function(g,w,s){var j,b=w.length,z;for(j=0;j<b;j++){var X,N=w[j],O=N.method,F=N.args;if(Array.isArray(F)||(F=[]),!O)return!1;var P=ce.computeAPICommandBindings(g,O,F);if(P.length!==1)return!1;if(!z)z=P[0],Array.isArray(z.traces)&&z.traces.sort();else{if(X=P[0],X.type!==z.type||X.prop!==z.prop)return!1;if(Array.isArray(z.traces))if(Array.isArray(X.traces)){X.traces.sort();for(var _=0;_<z.traces.length;_++)if(z.traces[_]!==X.traces[_])return!1}else return!1;else if(X.prop!==z.prop)return!1}X=P[0];var R=X.value;if(Array.isArray(R))if(R.length===1)R=R[0];else return!1;s&&(s[R]=j)}return z};function u(g,w,s){var j,b,z,X=!1;if(w.type==="data")j=g._fullData[w.traces!==null?w.traces[0]:0];else if(w.type==="layout")j=g._fullLayout;else return!1;return b=d.nestedProperty(j,w.prop).get(),z=s[w.type]=s[w.type]||{},z.hasOwnProperty(w.prop)&&z[w.prop]!==b&&(X=!0),z[w.prop]=b,{changed:X,value:b}}ce.executeAPICommand=function(g,w,s){if(w==="skip")return Promise.resolve();var j=fe.apiMethodRegistry[w],b=[g];Array.isArray(s)||(s=[]);for(var z=0;z<s.length;z++)b.push(s[z]);return j.apply(null,b).catch(function(X){return d.warn("API call to Plotly."+w+" rejected.",X),Promise.reject(X)})},ce.computeAPICommandBindings=function(g,w,s){var j;switch(Array.isArray(s)||(s=[]),w){case"restyle":j=v(g,s);break;case"relayout":j=m(g,s);break;case"update":j=v(g,[s[0],s[2]]).concat(m(g,[s[1]]));break;case"animate":j=c(g,s);break;default:j=[]}return j};function c(g,w){return Array.isArray(w[0])&&w[0].length===1&&["string","number"].indexOf(typeof w[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:w[0][0].toString()}]:[]}function m(g,w){var s=[],j=w[0],b={};if(typeof j=="string")b[j]=w[1];else if(d.isPlainObject(j))b=j;else return s;return p(b,function(z,X,N){s.push({type:"layout",prop:z,value:N})},"",0),s}function v(g,w){var s,j,b,z,X=[];if(j=w[0],b=w[1],s=w[2],z={},typeof j=="string")z[j]=b;else if(d.isPlainObject(j))z=j,s===void 0&&(s=b);else return X;return s===void 0&&(s=null),p(z,function(N,O,F){var P,_;if(Array.isArray(F)){_=F.slice();var R=Math.min(_.length,g.data.length);s&&(R=Math.min(R,s.length)),P=[];for(var H=0;H<R;H++)P[H]=s?s[H]:H}else _=F,P=s?s.slice():null;if(P===null)Array.isArray(_)&&(_=_[0]);else if(Array.isArray(P)){if(!Array.isArray(_)){var te=_;_=[];for(var J=0;J<P.length;J++)_[J]=te}_.length=Math.min(P.length,_.length)}X.push({type:"data",prop:N,traces:P,value:_})},"",0),X}function p(g,w,s,j){Object.keys(g).forEach(function(b){var z=g[b];if(b[0]!=="_"){var X=s+(j>0?".":"")+b;d.isPlainObject(z)?p(z,w,X,j+1):w(X,b,z)}})}}}),Di=n({"src/plots/plots.js"(ce,fe){var d=k(),u=E().timeFormatLocale,c=U().formatLocale,m=B(),v=Y(),p=hr(),g=qs(),w=vn(),s=pa(),j=Ve(),b=W().BADNUM,z=di(),X=cs().clearOutline,N=Qo(),O=Gr(),F=As(),P=Ys().getModuleCalcData,_=s.relinkPrivateKeys,R=s._,H=fe.exports={};s.extendFlat(H,p),H.attributes=$e(),H.attributes.type.values=H.allTypes,H.fontAttrs=G(),H.layoutAttributes=Vr();var te=Rl();H.executeAPICommand=te.executeAPICommand,H.computeAPICommandBindings=te.computeAPICommandBindings,H.manageCommandObserver=te.manageCommandObserver,H.hasSimpleAPICommandBindings=te.hasSimpleAPICommandBindings,H.redrawText=function(_e){return _e=s.getGraphDiv(_e),new Promise(function(Ee){setTimeout(function(){_e._fullLayout&&(p.getComponentMethod("annotations","draw")(_e),p.getComponentMethod("legend","draw")(_e),p.getComponentMethod("colorbar","draw")(_e),Ee(H.previousPromises(_e)))},300)})},H.resize=function(_e){_e=s.getGraphDiv(_e);var Ee,de=new Promise(function(we,je){(!_e||s.isHidden(_e))&&je(new Error("Resize must be passed a displayed plot div element.")),_e._redrawTimer&&clearTimeout(_e._redrawTimer),_e._resolveResize&&(Ee=_e._resolveResize),_e._resolveResize=we,_e._redrawTimer=setTimeout(function(){if(!_e.layout||_e.layout.width&&_e.layout.height||s.isHidden(_e)){we(_e);return}delete _e.layout.width,delete _e.layout.height;var Ae=_e.changed;_e.autoplay=!0,p.call("relayout",_e,{autosize:!0}).then(function(){_e.changed=Ae,_e._resolveResize===we&&(delete _e._resolveResize,we(_e))})},100)});return Ee&&Ee(de),de},H.previousPromises=function(_e){if((_e._promises||[]).length)return Promise.all(_e._promises).then(function(){_e._promises=[]})},H.addLinks=function(_e){if(!(!_e._context.showLink&&!_e._context.showSources)){var Ee=_e._fullLayout,de=s.ensureSingle(Ee._paper,"text","js-plot-link-container",function(ge){ge.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:j.defaultLine,"pointer-events":"all"}).each(function(){var Te=d.select(this);Te.append("tspan").classed("js-link-to-tool",!0),Te.append("tspan").classed("js-link-spacer",!0),Te.append("tspan").classed("js-sourcelinks",!0)})}),we=de.node(),je={y:Ee._paper.attr("height")-9};document.body.contains(we)&&we.getComputedTextLength()>=Ee.width-20?(je["text-anchor"]="start",je.x=5):(je["text-anchor"]="end",je.x=Ee._paper.attr("width")-7),de.attr(je);var Ae=de.select(".js-link-to-tool"),$=de.select(".js-link-spacer"),oe=de.select(".js-sourcelinks");_e._context.showSources&&_e._context.showSources(_e),_e._context.showLink&&J(_e,Ae),$.text(Ae.text()&&oe.text()?" - ":"")}};function J(_e,Ee){Ee.text("");var de=Ee.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(_e._context.linkText+" ");if(_e._context.sendData)de.on("click",function(){H.sendDataToCloud(_e)});else{var we=window.location.pathname.split("/"),je=window.location.search;de.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+we[2].split(".")[0]+"/"+we[1]+je})}}H.sendDataToCloud=function(_e){var Ee=(window.PLOTLYENV||{}).BASE_URL||_e._context.plotlyServerURL;if(Ee){_e.emit("plotly_beforeexport");var de=d.select(_e).append("div").attr("id","hiddenform").style("display","none"),we=de.append("form").attr({action:Ee+"/external",method:"post",target:"_blank"}),je=we.append("input").attr({type:"text",name:"data"});return je.node().value=H.graphJson(_e,!1,"keepdata"),we.node().submit(),de.remove(),_e.emit("plotly_afterexport"),!1}};var ye=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],se=["year","month","dayMonth","dayMonthYear"];H.supplyDefaults=function(_e,Ee){var de=Ee&&Ee.skipUpdateCalc,we=_e._fullLayout||{};if(we._skipDefaults){delete we._skipDefaults;return}var je=_e._fullLayout={},Ae=_e.layout||{},$=_e._fullData||[],oe=_e._fullData=[],ge=_e.data||[],Te=_e.calcdata||[],Ue=_e._context||{},Ze;_e._transitionData||H.createTransitionData(_e),je._dfltTitle={plot:R(_e,"Click to enter Plot title"),subtitle:R(_e,"Click to enter Plot subtitle"),x:R(_e,"Click to enter X axis title"),y:R(_e,"Click to enter Y axis title"),colorbar:R(_e,"Click to enter Colorscale title"),annotation:R(_e,"new text")},je._traceWord=R(_e,"trace");var Je=Q(_e,ye);if(je._mapboxAccessToken=Ue.mapboxAccessToken,we._initialAutoSizeIsDone){var ft=we.width,wt=we.height;H.supplyLayoutGlobalDefaults(Ae,je,Je),Ae.width||(je.width=ft),Ae.height||(je.height=wt),H.sanitizeMargins(je)}else{H.supplyLayoutGlobalDefaults(Ae,je,Je);var Ct=!Ae.width||!Ae.height,Kt=je.autosize,$t=Ue.autosizable,Wt=Ct&&(Kt||$t);Wt?H.plotAutoSize(_e,Ae,je):Ct&&H.sanitizeMargins(je),!Kt&&Ct&&(Ae.width=je.width,Ae.height=je.height)}je._d3locale=ue(Je,je.separators),je._extraFormat=Q(_e,se),je._initialAutoSizeIsDone=!0,je._dataLength=ge.length,je._modules=[],je._visibleModules=[],je._basePlotModules=[];var nt=je._subplots=pe(),pt=je._splomAxes={x:{},y:{}},Ke=je._splomSubplots={};je._splomGridDflt={},je._scatterStackOpts={},je._firstScatter={},je._alignmentOpts={},je._colorAxes={},je._requestRangeslider={},je._traceUids=he($,ge),H.supplyDataDefaults(ge,oe,Ae,je);var gt=Object.keys(pt.x),Ft=Object.keys(pt.y);if(gt.length>1&&Ft.length>1){for(p.getComponentMethod("grid","sizeDefaults")(Ae,je),Ze=0;Ze<gt.length;Ze++)s.pushUnique(nt.xaxis,gt[Ze]);for(Ze=0;Ze<Ft.length;Ze++)s.pushUnique(nt.yaxis,Ft[Ze]);for(var Xt in Ke)s.pushUnique(nt.cartesian,Xt)}if(je._has=H._hasPlotType.bind(je),$.length===oe.length)for(Ze=0;Ze<oe.length;Ze++)_(oe[Ze],$[Ze]);H.supplyLayoutModuleDefaults(Ae,je,oe,_e._transitionData);var or=je._visibleModules,sr=[];for(Ze=0;Ze<or.length;Ze++){var dr=or[Ze].crossTraceDefaults;dr&&s.pushUnique(sr,dr)}for(Ze=0;Ze<sr.length;Ze++)sr[Ze](oe,je);je._hasOnlyLargeSploms=je._basePlotModules.length===1&&je._basePlotModules[0].name==="splom"&&gt.length>15&&Ft.length>15&&je.shapes.length===0&&je.images.length===0,H.linkSubplots(oe,je,$,we),H.cleanPlot(oe,je,$,we);var wr=!!(we._has&&we._has("cartesian")),xr=!!(je._has&&je._has("cartesian")),Pr=wr,nr=xr;Pr&&!nr?we._bgLayer.remove():nr&&!Pr&&(je._shouldCreateBgLayer=!0),we._zoomlayer&&!_e._dragging&&X({_fullLayout:we}),me(oe,je),_(je,we),p.getComponentMethod("colorscale","crossTraceDefaults")(oe,je),je._preGUI||(je._preGUI={}),je._tracePreGUI||(je._tracePreGUI={});var jr=je._tracePreGUI,ta={},Nr;for(Nr in jr)ta[Nr]="old";for(Ze=0;Ze<oe.length;Ze++)Nr=oe[Ze]._fullInput.uid,ta[Nr]||(jr[Nr]={}),ta[Nr]="new";for(Nr in ta)ta[Nr]==="old"&&delete jr[Nr];Me(je),p.getComponentMethod("rangeslider","makeData")(je),!de&&Te.length===oe.length&&H.supplyDefaultsUpdateCalc(Te,oe)},H.supplyDefaultsUpdateCalc=function(_e,Ee){for(var de=0;de<Ee.length;de++){var we=Ee[de],je=(_e[de]||[])[0];if(je&&je.trace){var Ae=je.trace;if(Ae._hasCalcTransform){var $=Ae._arrayAttrs,oe,ge,Te;for(oe=0;oe<$.length;oe++)ge=$[oe],Te=s.nestedProperty(Ae,ge).get().slice(),s.nestedProperty(we,ge).set(Te)}je.trace=we}}};function he(_e,Ee){var de=Ee.length,we=[],je,Ae;for(je=0;je<_e.length;je++){var $=_e[je]._fullInput;$!==Ae&&we.push($),Ae=$}var oe=we.length,ge=new Array(de),Te={};function Ue(ft,wt){ge[wt]=ft,Te[ft]=1}function Ze(ft,wt){if(ft&&typeof ft=="string"&&!Te[ft])return Ue(ft,wt),!0}for(je=0;je<de;je++){var Je=Ee[je].uid;typeof Je=="number"&&(Je=String(Je)),!Ze(Je,je)&&(je<oe&&Ze(we[je].uid,je)||Ue(s.randstr(Te),je))}return ge}function pe(){var _e=p.collectableSubplotTypes,Ee={},de,we;if(!_e){_e=[];var je=p.subplotsRegistry;for(var Ae in je){var $=je[Ae],oe=$.attr;if(oe&&(_e.push(Ae),Array.isArray(oe)))for(we=0;we<oe.length;we++)s.pushUnique(_e,oe[we])}}for(de=0;de<_e.length;de++)Ee[_e[de]]=[];return Ee}function Q(_e,Ee){var de=_e._context.locale;de||(de="en-US");var we=!1,je={};function Ae(Ze){for(var Je=!0,ft=0;ft<Ee.length;ft++){var wt=Ee[ft];je[wt]||(Ze[wt]?je[wt]=Ze[wt]:Je=!1)}Je&&(we=!0)}for(var $=0;$<2;$++){for(var oe=_e._context.locales,ge=0;ge<2;ge++){var Te=(oe[de]||{}).format;if(Te&&(Ae(Te),we))break;oe=p.localeRegistry}var Ue=de.split("-")[0];if(we||Ue===de)break;de=Ue}return we||Ae(p.localeRegistry.en.format),je}function ue(_e,Ee){return _e.decimal=Ee.charAt(0),_e.thousands=Ee.charAt(1),{numberFormat:function(de){try{de=c(_e).format(s.adjustFormat(de))}catch{return s.warnBadFormat(de),s.noFormat}return de},timeFormat:u(_e).utcFormat}}function me(_e,Ee){var de,we=[];Ee.meta&&(de=Ee._meta={meta:Ee.meta,layout:{meta:Ee.meta}});for(var je=0;je<_e.length;je++){var Ae=_e[je];Ae.meta?we[Ae.index]=Ae._meta={meta:Ae.meta}:Ee.meta&&(Ae._meta={meta:Ee.meta}),Ee.meta&&(Ae._meta.layout={meta:Ee.meta})}we.length&&(de||(de=Ee._meta={}),de.data=we)}H.createTransitionData=function(_e){_e._transitionData||(_e._transitionData={}),_e._transitionData._frames||(_e._transitionData._frames=[]),_e._transitionData._frameHash||(_e._transitionData._frameHash={}),_e._transitionData._counter||(_e._transitionData._counter=0),_e._transitionData._interruptCallbacks||(_e._transitionData._interruptCallbacks=[])},H._hasPlotType=function(_e){var Ee,de=this._basePlotModules||[];for(Ee=0;Ee<de.length;Ee++)if(de[Ee].name===_e)return!0;var we=this._modules||[];for(Ee=0;Ee<we.length;Ee++){var je=we[Ee].name;if(je===_e)return!0;var Ae=p.modules[je];if(Ae&&Ae.categories[_e])return!0}return!1},H.cleanPlot=function(_e,Ee,de,we){var je,Ae,$=we._basePlotModules||[];for(je=0;je<$.length;je++){var oe=$[je];oe.clean&&oe.clean(_e,Ee,de,we)}var ge=we._has&&we._has("gl"),Te=Ee._has&&Ee._has("gl");ge&&!Te&&we._glcontainer!==void 0&&(we._glcontainer.selectAll(".gl-canvas").remove(),we._glcontainer.selectAll(".no-webgl").remove(),we._glcanvas=null);var Ue=!!we._infolayer;e:for(je=0;je<de.length;je++){var Ze=de[je],Je=Ze.uid;for(Ae=0;Ae<_e.length;Ae++){var ft=_e[Ae];if(Je===ft.uid)continue e}Ue&&we._infolayer.select(".cb"+Je).remove()}},H.linkSubplots=function(_e,Ee,de,we){var je,Ae,$=we._plots||{},oe=Ee._plots={},ge=Ee._subplots,Te={_fullData:_e,_fullLayout:Ee},Ue=ge.cartesian||[];for(je=0;je<Ue.length;je++){var Ze=Ue[je],Je=$[Ze],ft=z.getFromId(Te,Ze,"x"),wt=z.getFromId(Te,Ze,"y"),Ct;for(Je?Ct=oe[Ze]=Je:(Ct=oe[Ze]={},Ct.id=Ze),ft._counterAxes.push(wt._id),wt._counterAxes.push(ft._id),ft._subplotsWith.push(Ze),wt._subplotsWith.push(Ze),Ct.xaxis=ft,Ct.yaxis=wt,Ct._hasClipOnAxisFalse=!1,Ae=0;Ae<_e.length;Ae++){var Kt=_e[Ae];if(Kt.xaxis===Ct.xaxis._id&&Kt.yaxis===Ct.yaxis._id&&Kt.cliponaxis===!1){Ct._hasClipOnAxisFalse=!0;break}}}var $t=z.list(Te,null,!0),Wt;for(je=0;je<$t.length;je++){Wt=$t[je];var nt=null;Wt.overlaying&&(nt=z.getFromId(Te,Wt.overlaying),nt&&nt.overlaying&&(Wt.overlaying=!1,nt=null)),Wt._mainAxis=nt||Wt,nt&&(Wt.domain=nt.domain.slice()),Wt._anchorAxis=Wt.anchor==="free"?null:z.getFromId(Te,Wt.anchor)}for(je=0;je<$t.length;je++)if(Wt=$t[je],Wt._counterAxes.sort(z.idSort),Wt._subplotsWith.sort(s.subplotSort),Wt._mainSubplot=be(Wt,Ee),Wt._counterAxes.length&&(Wt.spikemode&&Wt.spikemode.indexOf("across")!==-1||Wt.automargin&&Wt.mirror&&Wt.anchor!=="free"||p.getComponentMethod("rangeslider","isVisible")(Wt))){var pt=1,Ke=0;for(Ae=0;Ae<Wt._counterAxes.length;Ae++){var gt=z.getFromId(Te,Wt._counterAxes[Ae]);pt=Math.min(pt,gt.domain[0]),Ke=Math.max(Ke,gt.domain[1])}pt<Ke&&(Wt._counterDomainMin=pt,Wt._counterDomainMax=Ke)}};function be(_e,Ee){var de={_fullLayout:Ee},we=_e._id.charAt(0)==="x",je=_e._mainAxis._anchorAxis,Ae="",$="",oe="";if(je&&(oe=je._mainAxis._id,Ae=we?_e._id+oe:oe+_e._id),!Ae||!Ee._plots[Ae]){Ae="";for(var ge=_e._counterAxes,Te=0;Te<ge.length;Te++){var Ue=ge[Te],Ze=we?_e._id+Ue:Ue+_e._id;$||($=Ze);var Je=z.getFromId(de,Ue);if(oe&&Je.overlaying===oe){Ae=Ze;break}}}return Ae||$}H.clearExpandedTraceDefaultColors=function(_e){var Ee,de,we;function je($,oe,ge,Te){de[Te]=oe,de.length=Te+1,$.valType==="color"&&$.dflt===void 0&&Ee.push(de.join("."))}for(de=[],Ee=_e._module._colorAttrs,Ee||(_e._module._colorAttrs=Ee=[],g.crawl(_e._module.attributes,je)),we=0;we<Ee.length;we++){var Ae=s.nestedProperty(_e,"_input."+Ee[we]);Ae.get()||s.nestedProperty(_e,Ee[we]).set(null)}},H.supplyDataDefaults=function(_e,Ee,de,we){var je=we._modules,Ae=we._visibleModules,$=we._basePlotModules,oe=0,ge,Te,Ue;we._transformModules=[];function Ze($t){Ee.push($t);var Wt=$t._module;Wt&&(s.pushUnique(je,Wt),$t.visible===!0&&s.pushUnique(Ae,Wt),s.pushUnique($,$t._module.basePlotModule),$t._input.visible!==!1&&oe++)}var Je={},ft=[],wt=(de.template||{}).data||{},Ct=w.traceTemplater(wt);for(ge=0;ge<_e.length;ge++)Ue=_e[ge],Te=Ct.newTrace(Ue),Te.uid=we._traceUids[ge],H.supplyTraceDefaults(Ue,Te,oe,we,ge),Te.index=ge,Te._input=Ue,Te._fullInput=Te,Ze(Te),p.traceIs(Te,"carpetAxis")&&(Je[Te.carpet]=Te),p.traceIs(Te,"carpetDependent")&&ft.push(ge);for(ge=0;ge<ft.length;ge++)if(Te=Ee[ft[ge]],!!Te.visible){var Kt=Je[Te.carpet];if(Te._carpet=Kt,!Kt||!Kt.visible){Te.visible=!1;continue}Te.xaxis=Kt.xaxis,Te.yaxis=Kt.yaxis}},H.supplyAnimationDefaults=function(_e){_e=_e||{};var Ee,de={};function we(je,Ae){return s.coerce(_e||{},de,O,je,Ae)}if(we("mode"),we("direction"),we("fromcurrent"),Array.isArray(_e.frame))for(de.frame=[],Ee=0;Ee<_e.frame.length;Ee++)de.frame[Ee]=H.supplyAnimationFrameDefaults(_e.frame[Ee]||{});else de.frame=H.supplyAnimationFrameDefaults(_e.frame||{});if(Array.isArray(_e.transition))for(de.transition=[],Ee=0;Ee<_e.transition.length;Ee++)de.transition[Ee]=H.supplyAnimationTransitionDefaults(_e.transition[Ee]||{});else de.transition=H.supplyAnimationTransitionDefaults(_e.transition||{});return de},H.supplyAnimationFrameDefaults=function(_e){var Ee={};function de(we,je){return s.coerce(_e||{},Ee,O.frame,we,je)}return de("duration"),de("redraw"),Ee},H.supplyAnimationTransitionDefaults=function(_e){var Ee={};function de(we,je){return s.coerce(_e||{},Ee,O.transition,we,je)}return de("duration"),de("easing"),Ee},H.supplyFrameDefaults=function(_e){var Ee={};function de(we,je){return s.coerce(_e,Ee,F,we,je)}return de("group"),de("name"),de("traces"),de("baseframe"),de("data"),de("layout"),Ee},H.supplyTraceDefaults=function(_e,Ee,de,we,je){var Ae=we.colorway||j.defaults,$=Ae[de%Ae.length],oe;function ge(nt,pt){return s.coerce(_e,Ee,H.attributes,nt,pt)}var Te=ge("visible");ge("type"),ge("name",we._traceWord+" "+je),ge("uirevision",we.uirevision);var Ue=H.getModule(Ee);if(Ee._module=Ue,Ue){var Ze=Ue.basePlotModule,Je=Ze.attr,ft=Ze.attributes;if(Je&&ft){var wt=we._subplots,Ct="";if(Array.isArray(Je))for(oe=0;oe<Je.length;oe++){var Kt=Je[oe],$t=s.coerce(_e,Ee,ft,Kt);wt[Kt]&&s.pushUnique(wt[Kt],$t),Ct+=$t}else Ct=s.coerce(_e,Ee,ft,Je);wt[Ze.name]&&s.pushUnique(wt[Ze.name],Ct)}}if(Te&&(ge("customdata"),ge("ids"),ge("meta"),p.traceIs(Ee,"showLegend")?(s.coerce(_e,Ee,Ue.attributes.showlegend?Ue.attributes:H.attributes,"showlegend"),ge("legend"),ge("legendwidth"),ge("legendgroup"),ge("legendgrouptitle.text"),ge("legendrank"),Ee._dfltShowLegend=!0):Ee._dfltShowLegend=!1,Ue&&Ue.supplyDefaults(_e,Ee,$,we),p.traceIs(Ee,"noOpacity")||ge("opacity"),p.traceIs(Ee,"notLegendIsolatable")&&(Ee.visible=!!Ee.visible),p.traceIs(Ee,"noHover")||(Ee.hovertemplate||s.coerceHoverinfo(_e,Ee,we),Ee.type!=="parcats"&&p.getComponentMethod("fx","supplyDefaults")(_e,Ee,$,we)),Ue&&Ue.selectPoints)){var Wt=ge("selectedpoints");s.isTypedArray(Wt)&&(Ee.selectedpoints=Array.from(Wt))}return Ee},H.supplyLayoutGlobalDefaults=function(_e,Ee,de){function we(Ze,Je){return s.coerce(_e,Ee,H.layoutAttributes,Ze,Je)}var je=_e.template;s.isPlainObject(je)&&(Ee.template=je,Ee._template=je.layout,Ee._dataTemplate=je.data),we("autotypenumbers");var Ae=s.coerceFont(we,"font"),$=Ae.size;s.coerceFont(we,"title.font",Ae,{overrideDflt:{size:Math.round($*1.4)}}),we("title.text",Ee._dfltTitle.plot),we("title.xref");var oe=we("title.yref");we("title.pad.t"),we("title.pad.r"),we("title.pad.b"),we("title.pad.l");var ge=we("title.automargin");we("title.x"),we("title.xanchor"),we("title.y"),we("title.yanchor"),we("title.subtitle.text",Ee._dfltTitle.subtitle),s.coerceFont(we,"title.subtitle.font",Ae,{overrideDflt:{size:Math.round(Ee.title.font.size*.7)}}),ge&&(oe==="paper"&&(Ee.title.y!==0&&(Ee.title.y=1),Ee.title.yanchor==="auto"&&(Ee.title.yanchor=Ee.title.y===0?"top":"bottom")),oe==="container"&&(Ee.title.y==="auto"&&(Ee.title.y=1),Ee.title.yanchor==="auto"&&(Ee.title.yanchor=Ee.title.y<.5?"bottom":"top")));var Te=we("uniformtext.mode");Te&&we("uniformtext.minsize"),we("autosize",!(_e.width&&_e.height)),we("width"),we("height"),we("minreducedwidth"),we("minreducedheight"),we("margin.l"),we("margin.r"),we("margin.t"),we("margin.b"),we("margin.pad"),we("margin.autoexpand"),_e.width&&_e.height&&H.sanitizeMargins(Ee),p.getComponentMethod("grid","sizeDefaults")(_e,Ee),we("paper_bgcolor"),we("separators",de.decimal+de.thousands),we("hidesources"),we("colorway"),we("datarevision");var Ue=we("uirevision");we("editrevision",Ue),we("selectionrevision",Ue),p.getComponentMethod("modebar","supplyLayoutDefaults")(_e,Ee),p.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(_e,Ee,we),p.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(_e,Ee,we),we("meta"),s.isPlainObject(_e.transition)&&(we("transition.duration"),we("transition.easing"),we("transition.ordering")),p.getComponentMethod("calendars","handleDefaults")(_e,Ee,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(_e,Ee,we),s.coerce(_e,Ee,N,"scattermode")};function ve(_e){return typeof _e=="string"&&_e.substr(_e.length-2)==="px"&&parseFloat(_e)}H.plotAutoSize=function(Ee,de,we){var je=Ee._context||{},Ae=je.frameMargins,$,oe,ge=s.isPlotDiv(Ee);if(ge&&Ee.emit("plotly_autosize"),je.fillFrame)$=window.innerWidth,oe=window.innerHeight,document.body.style.overflow="hidden";else{var Te=ge?window.getComputedStyle(Ee):{};if($=ve(Te.width)||ve(Te.maxWidth)||we.width,oe=ve(Te.height)||ve(Te.maxHeight)||we.height,m(Ae)&&Ae>0){var Ue=1-2*Ae;$=Math.round(Ue*$),oe=Math.round(Ue*oe)}}var Ze=H.layoutAttributes.width.min,Je=H.layoutAttributes.height.min;$<Ze&&($=Ze),oe<Je&&(oe=Je);var ft=!de.width&&Math.abs(we.width-$)>1,wt=!de.height&&Math.abs(we.height-oe)>1;(wt||ft)&&(ft&&(we.width=$),wt&&(we.height=oe)),Ee._initialAutoSize||(Ee._initialAutoSize={width:$,height:oe}),H.sanitizeMargins(we)},H.supplyLayoutModuleDefaults=function(_e,Ee,de,we){var je=p.componentsRegistry,Ae=Ee._basePlotModules,$,oe,ge,Te=p.subplotsRegistry.cartesian;for($ in je)ge=je[$],ge.includeBasePlot&&ge.includeBasePlot(_e,Ee);Ae.length||Ae.push(Te),Ee._has("cartesian")&&(p.getComponentMethod("grid","contentDefaults")(_e,Ee),Te.finalizeSubplots(_e,Ee));for(var Ue in Ee._subplots)Ee._subplots[Ue].sort(s.subplotSort);for(oe=0;oe<Ae.length;oe++)ge=Ae[oe],ge.supplyLayoutDefaults&&ge.supplyLayoutDefaults(_e,Ee,de);var Ze=Ee._modules;for(oe=0;oe<Ze.length;oe++)ge=Ze[oe],ge.supplyLayoutDefaults&&ge.supplyLayoutDefaults(_e,Ee,de);var Je=Ee._transformModules;for(oe=0;oe<Je.length;oe++)ge=Je[oe],ge.supplyLayoutDefaults&&ge.supplyLayoutDefaults(_e,Ee,de,we);for($ in je)ge=je[$],ge.supplyLayoutDefaults&&ge.supplyLayoutDefaults(_e,Ee,de)},H.purge=function(_e){var Ee=_e._fullLayout||{};Ee._glcontainer!==void 0&&(Ee._glcontainer.selectAll(".gl-canvas").remove(),Ee._glcontainer.remove(),Ee._glcanvas=null),Ee._modeBar&&Ee._modeBar.destroy(),_e._transitionData&&(_e._transitionData._interruptCallbacks&&(_e._transitionData._interruptCallbacks.length=0),_e._transitionData._animationRaf&&window.cancelAnimationFrame(_e._transitionData._animationRaf)),s.clearThrottle(),s.clearResponsive(_e),delete _e.data,delete _e.layout,delete _e._fullData,delete _e._fullLayout,delete _e.calcdata,delete _e.empty,delete _e.fid,delete _e.undoqueue,delete _e.undonum,delete _e.autoplay,delete _e.changed,delete _e._promises,delete _e._redrawTimer,delete _e._hmlumcount,delete _e._hmpixcount,delete _e._transitionData,delete _e._transitioning,delete _e._initialAutoSize,delete _e._transitioningWithDuration,delete _e._dragging,delete _e._dragged,delete _e._dragdata,delete _e._hoverdata,delete _e._snapshotInProgress,delete _e._editing,delete _e._mouseDownTime,delete _e._legendMouseDownTime,_e.removeAllListeners&&_e.removeAllListeners()},H.style=function(_e){var Ee=_e._fullLayout._visibleModules,de=[],we;for(we=0;we<Ee.length;we++){var je=Ee[we];je.style&&s.pushUnique(de,je.style)}for(we=0;we<de.length;we++)de[we](_e)},H.sanitizeMargins=function(_e){if(!(!_e||!_e.margin)){var Ee=_e.width,de=_e.height,we=_e.margin,je=Ee-(we.l+we.r),Ae=de-(we.t+we.b),$;je<0&&($=(Ee-1)/(we.l+we.r),we.l=Math.floor($*we.l),we.r=Math.floor($*we.r)),Ae<0&&($=(de-1)/(we.t+we.b),we.t=Math.floor($*we.t),we.b=Math.floor($*we.b))}},H.clearAutoMarginIds=function(_e){_e._fullLayout._pushmarginIds={}},H.allowAutoMargin=function(_e,Ee){_e._fullLayout._pushmarginIds[Ee]=1};function Me(_e){var Ee=_e.margin;if(!_e._size){var de=_e._size={l:Math.round(Ee.l),r:Math.round(Ee.r),t:Math.round(Ee.t),b:Math.round(Ee.b),p:Math.round(Ee.pad)};de.w=Math.round(_e.width)-de.l-de.r,de.h=Math.round(_e.height)-de.t-de.b}_e._pushmargin||(_e._pushmargin={}),_e._pushmarginIds||(_e._pushmarginIds={}),_e._reservedMargin||(_e._reservedMargin={})}var ke=2,le=2;H.autoMargin=function(_e,Ee,de){var we=_e._fullLayout,je=we.width,Ae=we.height,$=we.margin,oe=we.minreducedwidth,ge=we.minreducedheight,Te=s.constrain(je-$.l-$.r,ke,oe),Ue=s.constrain(Ae-$.t-$.b,le,ge),Ze=Math.max(0,je-Te),Je=Math.max(0,Ae-Ue),ft=we._pushmargin,wt=we._pushmarginIds;if($.autoexpand!==!1){if(!de)delete ft[Ee],delete wt[Ee];else{var Ct=de.pad;if(Ct===void 0&&(Ct=Math.min(12,$.l,$.r,$.t,$.b)),Ze){var Kt=(de.l+de.r)/Ze;Kt>1&&(de.l/=Kt,de.r/=Kt)}if(Je){var $t=(de.t+de.b)/Je;$t>1&&(de.t/=$t,de.b/=$t)}var Wt=de.xl!==void 0?de.xl:de.x,nt=de.xr!==void 0?de.xr:de.x,pt=de.yt!==void 0?de.yt:de.y,Ke=de.yb!==void 0?de.yb:de.y;ft[Ee]={l:{val:Wt,size:de.l+Ct},r:{val:nt,size:de.r+Ct},b:{val:Ke,size:de.b+Ct},t:{val:pt,size:de.t+Ct}},wt[Ee]=1}if(!we._replotting)return H.doAutoMargin(_e)}};function De(_e){if("_redrawFromAutoMarginCount"in _e._fullLayout)return!1;var Ee=z.list(_e,"",!0);for(var de in Ee)if(Ee[de].autoshift||Ee[de].shift)return!0;return!1}H.doAutoMargin=function(_e){var Ee=_e._fullLayout,de=Ee.width,we=Ee.height;Ee._size||(Ee._size={}),Me(Ee);var je=Ee._size,Ae=Ee.margin,$={t:0,b:0,l:0,r:0},oe=s.extendFlat({},je),ge=Ae.l,Te=Ae.r,Ue=Ae.t,Ze=Ae.b,Je=Ee._pushmargin,ft=Ee._pushmarginIds,wt=Ee.minreducedwidth,Ct=Ee.minreducedheight;if(Ae.autoexpand!==!1){for(var Kt in Je)ft[Kt]||delete Je[Kt];var $t=_e._fullLayout._reservedMargin;for(var Wt in $t)for(var nt in $t[Wt]){var pt=$t[Wt][nt];$[nt]=Math.max($[nt],pt)}Je.base={l:{val:0,size:ge},r:{val:1,size:Te},t:{val:1,size:Ue},b:{val:0,size:Ze}};for(var Ke in $){var gt=0;for(var Ft in Je)Ft!=="base"&&m(Je[Ft][Ke].size)&&(gt=Je[Ft][Ke].size>gt?Je[Ft][Ke].size:gt);var Xt=Math.max(0,Ae[Ke]-gt);$[Ke]=Math.max(0,$[Ke]-Xt)}for(var or in Je){var sr=Je[or].l||{},dr=Je[or].b||{},wr=sr.val,xr=sr.size,Pr=dr.val,nr=dr.size,jr=de-$.r-$.l,ta=we-$.t-$.b;for(var Nr in Je){if(m(xr)&&Je[Nr].r){var Jr=Je[Nr].r.val,vt=Je[Nr].r.size;if(Jr>wr){var Mt=(xr*Jr+(vt-jr)*wr)/(Jr-wr),xt=(vt*(1-wr)+(xr-jr)*(1-Jr))/(Jr-wr);Mt+xt>ge+Te&&(ge=Mt,Te=xt)}}if(m(nr)&&Je[Nr].t){var Le=Je[Nr].t.val,ot=Je[Nr].t.size;if(Le>Pr){var ct=(nr*Le+(ot-ta)*Pr)/(Le-Pr),ut=(ot*(1-Pr)+(nr-ta)*(1-Le))/(Le-Pr);ct+ut>Ze+Ue&&(Ze=ct,Ue=ut)}}}}}var Pt=s.constrain(de-Ae.l-Ae.r,ke,wt),Ot=s.constrain(we-Ae.t-Ae.b,le,Ct),qt=Math.max(0,de-Pt),ir=Math.max(0,we-Ot);if(qt){var _r=(ge+Te)/qt;_r>1&&(ge/=_r,Te/=_r)}if(ir){var Bt=(Ze+Ue)/ir;Bt>1&&(Ze/=Bt,Ue/=Bt)}if(je.l=Math.round(ge)+$.l,je.r=Math.round(Te)+$.r,je.t=Math.round(Ue)+$.t,je.b=Math.round(Ze)+$.b,je.p=Math.round(Ae.pad),je.w=Math.round(de)-je.l-je.r,je.h=Math.round(we)-je.t-je.b,!Ee._replotting&&(H.didMarginChange(oe,je)||De(_e))){"_redrawFromAutoMarginCount"in Ee?Ee._redrawFromAutoMarginCount++:Ee._redrawFromAutoMarginCount=1;var gr=3*(1+Object.keys(ft).length);if(Ee._redrawFromAutoMarginCount<gr)return p.call("_doPlot",_e);Ee._size=oe,s.warn("Too many auto-margin redraws.")}Oe(_e)};function Oe(_e){var Ee=z.list(_e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(de){for(var we=0;we<Ee.length;we++){var je=Ee[we][de];je&&je()}})}var He=["l","r","t","b","p","w","h"];H.didMarginChange=function(_e,Ee){for(var de=0;de<He.length;de++){var we=He[de],je=_e[we],Ae=Ee[we];if(!m(je)||Math.abs(Ae-je)>1)return!0}return!1},H.graphJson=function(_e,Ee,de,we,je,Ae){(je&&Ee&&!_e._fullData||je&&!Ee&&!_e._fullLayout)&&H.supplyDefaults(_e);var $=je?_e._fullData:_e.data,oe=je?_e._fullLayout:_e.layout,ge=(_e._transitionData||{})._frames;function Te(Je,ft){if(typeof Je=="function")return ft?"_function_":null;if(s.isPlainObject(Je)){var wt={},Ct;return Object.keys(Je).sort().forEach(function(nt){if(["_","["].indexOf(nt.charAt(0))===-1){if(typeof Je[nt]=="function"){ft&&(wt[nt]="_function");return}if(de==="keepdata"){if(nt.substr(nt.length-3)==="src")return}else if(de==="keepstream"){if(Ct=Je[nt+"src"],typeof Ct=="string"&&Ct.indexOf(":")>0&&!s.isPlainObject(Je.stream))return}else if(de!=="keepall"&&(Ct=Je[nt+"src"],typeof Ct=="string"&&Ct.indexOf(":")>0))return;wt[nt]=Te(Je[nt],ft)}}),wt}var Kt=Array.isArray(Je),$t=s.isTypedArray(Je);if((Kt||$t)&&Je.dtype&&Je.shape){var Wt=Je.bdata;return Te({dtype:Je.dtype,shape:Je.shape,bdata:s.isArrayBuffer(Wt)?v.encode(Wt):Wt},ft)}return Kt?Je.map(function(nt){return Te(nt,ft)}):$t?s.simpleMap(Je,s.identity):s.isJSDate(Je)?s.ms2DateTimeLocal(+Je):Je}var Ue={data:($||[]).map(function(Je){var ft=Te(Je);return Ee&&delete ft.fit,ft})};if(!Ee&&(Ue.layout=Te(oe),je)){var Ze=oe._size;Ue.layout.computed={margin:{b:Ze.b,l:Ze.l,r:Ze.r,t:Ze.t}}}return ge&&(Ue.frames=Te(ge)),Ae&&(Ue.config=Te(_e._context,!0)),we==="object"?Ue:JSON.stringify(Ue)},H.modifyFrames=function(_e,Ee){var de,we,je,Ae=_e._transitionData._frames,$=_e._transitionData._frameHash;for(de=0;de<Ee.length;de++)switch(we=Ee[de],we.type){case"replace":je=we.value;var oe=(Ae[we.index]||{}).name,ge=je.name;Ae[we.index]=$[ge]=je,ge!==oe&&(delete $[oe],$[ge]=je);break;case"insert":je=we.value,$[je.name]=je,Ae.splice(we.index,0,je);break;case"delete":je=Ae[we.index],delete $[je.name],Ae.splice(we.index,1);break}return Promise.resolve()},H.computeFrame=function(_e,Ee){var de=_e._transitionData._frameHash,we,je,Ae,$;if(!Ee)throw new Error("computeFrame must be given a string frame name");var oe=de[Ee.toString()];if(!oe)return!1;for(var ge=[oe],Te=[oe.name];oe.baseframe&&(oe=de[oe.baseframe.toString()])&&Te.indexOf(oe.name)===-1;)ge.push(oe),Te.push(oe.name);for(var Ue={};oe=ge.pop();)if(oe.layout&&(Ue.layout=H.extendLayout(Ue.layout,oe.layout)),oe.data){if(Ue.data||(Ue.data=[]),je=oe.traces,!je)for(je=[],we=0;we<oe.data.length;we++)je[we]=we;for(Ue.traces||(Ue.traces=[]),we=0;we<oe.data.length;we++)Ae=je[we],Ae!=null&&($=Ue.traces.indexOf(Ae),$===-1&&($=Ue.data.length,Ue.traces[$]=Ae),Ue.data[$]=H.extendTrace(Ue.data[$],oe.data[we]))}return Ue},H.recomputeFrameHash=function(_e){for(var Ee=_e._transitionData._frameHash={},de=_e._transitionData._frames,we=0;we<de.length;we++){var je=de[we];je&&je.name&&(Ee[je.name]=je)}},H.extendObjectWithContainers=function(_e,Ee,de){var we,je,Ae,$,oe,ge,Te,Ue,Ze=s.extendDeepNoArrays({},Ee||{}),Je=s.expandObjectPaths(Ze),ft={};if(de&&de.length)for(Ae=0;Ae<de.length;Ae++)we=s.nestedProperty(Je,de[Ae]),je=we.get(),je===void 0?s.nestedProperty(ft,de[Ae]).set(null):(we.set(null),s.nestedProperty(ft,de[Ae]).set(je));if(_e=s.extendDeepNoArrays(_e||{},Je),de&&de.length){for(Ae=0;Ae<de.length;Ae++)if(oe=s.nestedProperty(ft,de[Ae]),Te=oe.get(),!!Te){for(ge=s.nestedProperty(_e,de[Ae]),Ue=ge.get(),Array.isArray(Ue)||(Ue=[],ge.set(Ue)),$=0;$<Te.length;$++){var wt=Te[$];wt===null?Ue[$]=null:Ue[$]=H.extendObjectWithContainers(Ue[$],wt)}ge.set(Ue)}}return _e},H.dataArrayContainers=["transforms","dimensions"],H.layoutArrayContainers=p.layoutArrayContainers,H.extendTrace=function(_e,Ee){return H.extendObjectWithContainers(_e,Ee,H.dataArrayContainers)},H.extendLayout=function(_e,Ee){return H.extendObjectWithContainers(_e,Ee,H.layoutArrayContainers)},H.transition=function(_e,Ee,de,we,je,Ae){var $={redraw:je.redraw},oe={},ge=[];return $.prepareFn=function(){for(var Te=Array.isArray(Ee)?Ee.length:0,Ue=we.slice(0,Te),Ze=0;Ze<Ue.length;Ze++){var Je=Ue[Ze],ft=_e._fullData[Je],wt=ft._module;if(wt){if(wt.animatable){var Ct=wt.basePlotModule.name;oe[Ct]||(oe[Ct]=[]),oe[Ct].push(Je)}_e.data[Ue[Ze]]=H.extendTrace(_e.data[Ue[Ze]],Ee[Ze])}}var Kt=s.expandObjectPaths(s.extendDeepNoArrays({},de)),$t=/^[xy]axis[0-9]*$/;for(var Wt in Kt)$t.test(Wt)&&delete Kt[Wt].range;H.extendLayout(_e.layout,Kt),delete _e.calcdata,H.supplyDefaults(_e),H.doCalcdata(_e);var nt=s.expandObjectPaths(de);if(nt){var pt=_e._fullLayout._plots;for(var Ke in pt){var gt=pt[Ke],Ft=gt.xaxis,Xt=gt.yaxis,or=Ft.range.slice(),sr=Xt.range.slice(),dr=null,wr=null,xr=null,Pr=null;Array.isArray(nt[Ft._name+".range"])?dr=nt[Ft._name+".range"].slice():Array.isArray((nt[Ft._name]||{}).range)&&(dr=nt[Ft._name].range.slice()),Array.isArray(nt[Xt._name+".range"])?wr=nt[Xt._name+".range"].slice():Array.isArray((nt[Xt._name]||{}).range)&&(wr=nt[Xt._name].range.slice()),or&&dr&&(Ft.r2l(or[0])!==Ft.r2l(dr[0])||Ft.r2l(or[1])!==Ft.r2l(dr[1]))&&(xr={xr0:or,xr1:dr}),sr&&wr&&(Xt.r2l(sr[0])!==Xt.r2l(wr[0])||Xt.r2l(sr[1])!==Xt.r2l(wr[1]))&&(Pr={yr0:sr,yr1:wr}),(xr||Pr)&&ge.push(s.extendFlat({plotinfo:gt},xr,Pr))}}return Promise.resolve()},$.runFn=function(Te){var Ue,Ze=_e._fullLayout._basePlotModules,Je=ge.length,ft;if(de)for(ft=0;ft<Ze.length;ft++)Ze[ft].transitionAxes&&Ze[ft].transitionAxes(_e,ge,Ae,Te);Je?(Ue=s.extendFlat({},Ae),Ue.duration=0,delete oe.cartesian):Ue=Ae;for(var wt in oe){var Ct=oe[wt],Kt=_e._fullData[Ct[0]]._module;Kt.basePlotModule.plot(_e,Ct,Ue,Te)}},Be(_e,Ae,$)},H.transitionFromReact=function(_e,Ee,de,we){var je=_e._fullLayout,Ae=je.transition,$={},oe=[];return $.prepareFn=function(){var ge=je._plots;$.redraw=!1,Ee.anim==="some"&&($.redraw=!0),de.anim==="some"&&($.redraw=!0);for(var Te in ge){var Ue=ge[Te],Ze=Ue.xaxis,Je=Ue.yaxis,ft=we[Ze._name].range.slice(),wt=we[Je._name].range.slice(),Ct=Ze.range.slice(),Kt=Je.range.slice();Ze.setScale(),Je.setScale();var $t=null,Wt=null;(Ze.r2l(ft[0])!==Ze.r2l(Ct[0])||Ze.r2l(ft[1])!==Ze.r2l(Ct[1]))&&($t={xr0:ft,xr1:Ct}),(Je.r2l(wt[0])!==Je.r2l(Kt[0])||Je.r2l(wt[1])!==Je.r2l(Kt[1]))&&(Wt={yr0:wt,yr1:Kt}),($t||Wt)&&oe.push(s.extendFlat({plotinfo:Ue},$t,Wt))}return Promise.resolve()},$.runFn=function(ge){for(var Te=_e._fullData,Ue=_e._fullLayout,Ze=Ue._basePlotModules,Je,ft,wt,Ct=[],Kt=0;Kt<Te.length;Kt++)Ct.push(Kt);function $t(){if(_e._fullLayout)for(var nt=0;nt<Ze.length;nt++)Ze[nt].transitionAxes&&Ze[nt].transitionAxes(_e,oe,Je,ge)}function Wt(){if(_e._fullLayout)for(var nt=0;nt<Ze.length;nt++)Ze[nt].plot(_e,wt,ft,ge)}oe.length&&Ee.anim?Ae.ordering==="traces first"?(Je=s.extendFlat({},Ae,{duration:0}),wt=Ct,ft=Ae,setTimeout($t,Ae.duration),Wt()):(Je=Ae,wt=null,ft=s.extendFlat({},Ae,{duration:0}),setTimeout(Wt,Je.duration),$t()):oe.length?(Je=Ae,$t()):Ee.anim&&(wt=Ct,ft=Ae,Wt())},Be(_e,Ae,$)};function Be(_e,Ee,de){var we=!1;function je(Ze){var Je=Promise.resolve();if(!Ze)return Je;for(;Ze.length;)Je=Je.then(Ze.shift());return Je}function Ae(Ze){if(Ze)for(;Ze.length;)Ze.shift()}function $(){return _e.emit("plotly_transitioning",[]),new Promise(function(Ze){_e._transitioning=!0,Ee.duration>0&&(_e._transitioningWithDuration=!0),_e._transitionData._interruptCallbacks.push(function(){we=!0}),de.redraw&&_e._transitionData._interruptCallbacks.push(function(){return p.call("redraw",_e)}),_e._transitionData._interruptCallbacks.push(function(){_e.emit("plotly_transitioninterrupted",[])});var Je=0,ft=0;function wt(){return Je++,function(){ft++,!we&&ft===Je&&oe(Ze)}}de.runFn(wt),setTimeout(wt())})}function oe(Ze){if(_e._transitionData)return Ae(_e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(de.redraw)return p.call("redraw",_e)}).then(function(){_e._transitioning=!1,_e._transitioningWithDuration=!1,_e.emit("plotly_transitioned",[])}).then(Ze)}function ge(){if(_e._transitionData)return _e._transitioning=!1,je(_e._transitionData._interruptCallbacks)}var Te=[H.previousPromises,ge,de.prepareFn,H.rehover,H.reselect,$],Ue=s.syncOrAsync(Te,_e);return(!Ue||!Ue.then)&&(Ue=Promise.resolve()),Ue.then(function(){return _e})}H.doCalcdata=function(_e,Ee){var de=z.list(_e),we=_e._fullData,je=_e._fullLayout,Ae,$,oe,ge,Te=new Array(we.length),Ue=(_e.calcdata||[]).slice();for(_e.calcdata=Te,je._numBoxes=0,je._numViolins=0,je._violinScaleGroupStats={},_e._hmpixcount=0,_e._hmlumcount=0,je._piecolormap={},je._sunburstcolormap={},je._treemapcolormap={},je._iciclecolormap={},je._funnelareacolormap={},oe=0;oe<we.length;oe++)if(Array.isArray(Ee)&&Ee.indexOf(oe)===-1){Te[oe]=Ue[oe];continue}for(oe=0;oe<we.length;oe++)Ae=we[oe],Ae._arrayAttrs=g.findArrayAttributes(Ae),Ae._extremes={};var Ze=je._subplots.polar||[];for(oe=0;oe<Ze.length;oe++)de.push(je[Ze[oe]].radialaxis,je[Ze[oe]].angularaxis);for(var Je in je._colorAxes){var ft=je[Je];ft.cauto!==!1&&(delete ft.cmin,delete ft.cmax)}var wt=!1;function Ct(Wt){if(Ae=we[Wt],$=Ae._module,Ae.visible===!0&&Ae.transforms){if($&&$.calc){var nt=$.calc(_e,Ae);nt[0]&&nt[0].t&&nt[0].t._scene&&delete nt[0].t._scene.dirty}for(ge=0;ge<Ae.transforms.length;ge++){var pt=Ae.transforms[ge];$=transformsRegistry[pt.type],$&&$.calcTransform&&(Ae._hasCalcTransform=!0,wt=!0,$.calcTransform(_e,Ae,pt))}}}function Kt(Wt,nt){if(Ae=we[Wt],$=Ae._module,!!$.isContainer===nt){var pt=[];if(Ae.visible===!0&&Ae._length!==0){delete Ae._indexToPoints;var Ke=Ae.transforms||[];for(ge=Ke.length-1;ge>=0;ge--)if(Ke[ge].enabled){Ae._indexToPoints=Ke[ge]._indexToPoints;break}$&&$.calc&&(pt=$.calc(_e,Ae))}(!Array.isArray(pt)||!pt[0])&&(pt=[{x:b,y:b}]),pt[0].t||(pt[0].t={}),pt[0].trace=Ae,Te[Wt]=pt}}for(it(de,we,je),oe=0;oe<we.length;oe++)Kt(oe,!0);for(oe=0;oe<we.length;oe++)Ct(oe);for(wt&&it(de,we,je),oe=0;oe<we.length;oe++)Kt(oe,!0);for(oe=0;oe<we.length;oe++)Kt(oe,!1);yt(_e);var $t=st(de,_e);if($t.length){for(je._numBoxes=0,je._numViolins=0,oe=0;oe<$t.length;oe++)Kt($t[oe],!0);for(oe=0;oe<$t.length;oe++)Kt($t[oe],!1);yt(_e)}p.getComponentMethod("fx","calc")(_e),p.getComponentMethod("errorbars","calc")(_e)};var Ye=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function st(_e,Ee){var de=[],we,je,Ae,$,oe;function ge(Nr,Jr,vt){var Mt=Jr._id.charAt(0);if(Nr==="histogram2dcontour"){var xt=Jr._counterAxes[0],Le=z.getFromId(Ee,xt),ot=Mt==="x"||xt==="x"&&Le.type==="category",ct=Mt==="y"||xt==="y"&&Le.type==="category";return function(ut,Pt){return ut===0||Pt===0||ot&&ut===vt[Pt].length-1||ct&&Pt===vt.length-1?-1:(Mt==="y"?Pt:ut)-1}}else return function(ut,Pt){return Mt==="y"?Pt:ut}}var Te={min:function(Nr){return s.aggNums(Math.min,null,Nr)},max:function(Nr){return s.aggNums(Math.max,null,Nr)},sum:function(Nr){return s.aggNums(function(Jr,vt){return Jr+vt},null,Nr)},total:function(Nr){return s.aggNums(function(Jr,vt){return Jr+vt},null,Nr)},mean:function(Nr){return s.mean(Nr)},"geometric mean":function(Nr){return s.geometricMean(Nr)},median:function(Nr){return s.median(Nr)}};function Ue(Nr,Jr){return Nr[1]-Jr[1]}function Ze(Nr,Jr){return Jr[1]-Nr[1]}for(we=0;we<_e.length;we++){var Je=_e[we];if(Je.type==="category"){var ft=Je.categoryorder.match(Ye);if(ft){var wt=ft[1],Ct=ft[2],Kt=Je._id.charAt(0),$t=Kt==="x",Wt=[];for(je=0;je<Je._categories.length;je++)Wt.push([Je._categories[je],[]]);for(je=0;je<Je._traceIndices.length;je++){var nt=Je._traceIndices[je],pt=Ee._fullData[nt];if(pt.visible===!0){var Ke=pt.type;p.traceIs(pt,"histogram")&&(delete pt._xautoBinFinished,delete pt._yautoBinFinished);var gt=Ke==="splom",Ft=Ke==="scattergl",Xt=Ee.calcdata[nt];for(Ae=0;Ae<Xt.length;Ae++){var or=Xt[Ae],sr,dr;if(gt){var wr=pt._axesDim[Je._id];if(!$t){var xr=pt._diag[wr][0];xr&&(Je=Ee._fullLayout[z.id2name(xr)])}var Pr=or.trace.dimensions[wr].values;for($=0;$<Pr.length;$++)for(sr=Je._categoriesMap[Pr[$]],oe=0;oe<or.trace.dimensions.length;oe++)if(oe!==wr){var nr=or.trace.dimensions[oe];Wt[sr][1].push(nr.values[$])}}else if(Ft){for($=0;$<or.t.x.length;$++)$t?(sr=or.t.x[$],dr=or.t.y[$]):(sr=or.t.y[$],dr=or.t.x[$]),Wt[sr][1].push(dr);or.t&&or.t._scene&&delete or.t._scene.dirty}else if(or.hasOwnProperty("z")){dr=or.z;var jr=ge(pt.type,Je,dr);for($=0;$<dr.length;$++)for(oe=0;oe<dr[$].length;oe++)sr=jr(oe,$),sr+1&&Wt[sr][1].push(dr[$][oe])}else for(sr=or.p,sr===void 0&&(sr=or[Kt]),dr=or.s,dr===void 0&&(dr=or.v),dr===void 0&&(dr=$t?or.y:or.x),Array.isArray(dr)||(dr===void 0?dr=[]:dr=[dr]),$=0;$<dr.length;$++)Wt[sr][1].push(dr[$])}}}Je._categoriesValue=Wt;var ta=[];for(je=0;je<Wt.length;je++)ta.push([Wt[je][0],Te[wt](Wt[je][1])]);ta.sort(Ct==="descending"?Ze:Ue),Je._categoriesAggregatedValue=ta,Je._initialCategories=ta.map(function(Nr){return Nr[0]}),de=de.concat(Je.sortByInitialCategories())}}}return de}function it(_e,Ee,de){var we={};function je(ge){ge.clearCalc(),ge.type==="multicategory"&&ge.setupMultiCategory(Ee),we[ge._id]=1}s.simpleMap(_e,je);for(var Ae=de._axisMatchGroups||[],$=0;$<Ae.length;$++)for(var oe in Ae[$])we[oe]||je(de[z.id2name(oe)])}function yt(_e){var Ee=_e._fullLayout,de=Ee._visibleModules,we={},je,Ae,$;for(Ae=0;Ae<de.length;Ae++){var oe=de[Ae],ge=oe.crossTraceCalc;if(ge){var Te=oe.basePlotModule.name;we[Te]?s.pushUnique(we[Te],ge):we[Te]=[ge]}}for($ in we){var Ue=we[$],Ze=Ee._subplots[$];if(Array.isArray(Ze))for(je=0;je<Ze.length;je++){var Je=Ze[je],ft=$==="cartesian"?Ee._plots[Je]:Ee[Je];for(Ae=0;Ae<Ue.length;Ae++)Ue[Ae](_e,ft,Je)}else for(Ae=0;Ae<Ue.length;Ae++)Ue[Ae](_e)}}H.rehover=function(_e){_e._fullLayout._rehover&&_e._fullLayout._rehover()},H.redrag=function(_e){_e._fullLayout._redrag&&_e._fullLayout._redrag()},H.reselect=function(_e){var Ee=_e._fullLayout,de=(_e.layout||{}).selections,we=Ee._previousSelections;Ee._previousSelections=de;var je=Ee._reselect||JSON.stringify(de)!==JSON.stringify(we);p.getComponentMethod("selections","reselect")(_e,je)},H.generalUpdatePerTraceModule=function(_e,Ee,de,we){var je=Ee.traceHash,Ae={},$;for($=0;$<de.length;$++){var oe=de[$],ge=oe[0].trace;ge.visible&&(Ae[ge.type]=Ae[ge.type]||[],Ae[ge.type].push(oe))}for(var Te in je)if(!Ae[Te]){var Ue=je[Te][0],Ze=Ue[0].trace;Ze.visible=!1,Ae[Te]=[Ue]}for(var Je in Ae){var ft=Ae[Je],wt=ft[0][0].trace._module;wt.plot(_e,Ee,s.filterVisible(ft),we)}Ee.traceHash=Ae},H.plotBasePlot=function(_e,Ee,de,we,je){var Ae=p.getModule(_e),$=P(Ee.calcdata,Ae)[0];Ae.plot(Ee,$,we,je)},H.cleanBasePlot=function(_e,Ee,de,we,je){var Ae=je._has&&je._has(_e),$=de._has&&de._has(_e);Ae&&!$&&je["_"+_e+"layer"].selectAll("g.trace").remove()}}}),go=n({"src/constants/xmlns_namespaces.js"(ce){ce.xmlns="http://www.w3.org/2000/xmlns/",ce.svg="http://www.w3.org/2000/svg",ce.xlink="http://www.w3.org/1999/xlink",ce.svgAttrs={xmlns:ce.svg,"xmlns:xlink":ce.xlink}}}),xi=n({"src/constants/alignment.js"(ce,fe){fe.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}}}),Ui=n({"src/lib/svg_text_utils.js"(ce){var fe=k(),d=pa(),u=d.strTranslate,c=go(),m=xi().LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ce.convertToTspans=function(le,De,Oe){var He=le.text(),Be=!le.attr("data-notex")&&De&&De._context.typesetMath&&typeof MathJax<"u"&&He.match(v),Ye=fe.select(le.node().parentNode);if(Ye.empty())return;var st=le.attr("class")?le.attr("class").split(" ")[0]:"text";st+="-math",Ye.selectAll("svg."+st).remove(),Ye.selectAll("g."+st+"-group").remove(),le.style("display",null).attr({"data-unformatted":He,"data-math":"N"});function it(){Ye.empty()||(st=le.attr("class")+"-math",Ye.select("svg."+st).remove()),le.text("").style("white-space","pre");var yt=be(le.node(),He);yt&&le.style("pointer-events","all"),ce.positionText(le),Oe&&Oe.call(le)}return Be?(De&&De._promises||[]).push(new Promise(function(yt){le.style("display","none");var _e=parseInt(le.node().style.fontSize,10),Ee={fontSize:_e};j(Be[2],Ee,function(de,we,je){Ye.selectAll("svg."+st).remove(),Ye.selectAll("g."+st+"-group").remove();var Ae=de&&de.select("svg");if(!Ae||!Ae.node()){it(),yt();return}var $=Ye.append("g").classed(st+"-group",!0).attr({"pointer-events":"none","data-unformatted":He,"data-math":"Y"});$.node().appendChild(Ae.node()),we&&we.node()&&Ae.node().insertBefore(we.node().cloneNode(!0),Ae.node().firstChild);var oe=je.width,ge=je.height;Ae.attr({class:st,height:ge,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var Te=le.node().style.fill||"black",Ue=Ae.select("g");Ue.attr({fill:Te,stroke:Te});var Ze=Ue.node().getBoundingClientRect(),Je=Ze.width,ft=Ze.height;(Je>oe||ft>ge)&&(Ae.style("overflow","hidden"),Ze=Ae.node().getBoundingClientRect(),Je=Ze.width,ft=Ze.height);var wt=+le.attr("x"),Ct=+le.attr("y"),Kt=_e||le.node().getBoundingClientRect().height,$t=-Kt/4;if(st[0]==="y")$.attr({transform:"rotate("+[-90,wt,Ct]+")"+u(-Je/2,$t-ft/2)});else if(st[0]==="l")Ct=$t-ft/2;else if(st[0]==="a"&&st.indexOf("atitle")!==0)wt=0,Ct=$t;else{var Wt=le.attr("text-anchor");wt=wt-Je*(Wt==="middle"?.5:Wt==="end"?1:0),Ct=Ct+$t-ft/2}Ae.attr({x:wt,y:Ct}),Oe&&Oe.call(le,$),yt($)})})):it(),le};var p=/(<|&lt;|&#60;)/g,g=/(>|&gt;|&#62;)/g;function w(le){return le.replace(p,"\\lt ").replace(g,"\\gt ")}var s=[["$","$"],["\\(","\\)"]];function j(le,De,Oe){var He=parseInt((MathJax.version||"").split(".")[0]);if(He!==2&&He!==3){d.warn("No MathJax version:",MathJax.version);return}var Be,Ye,st,it,yt=function(){return Ye=d.extendDeepAll({},MathJax.Hub.config),st=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:s},displayAlign:"left"})},_e=function(){Ye=d.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=s},Ee=function(){if(Be=MathJax.Hub.config.menuSettings.renderer,Be!=="SVG")return MathJax.Hub.setRenderer("SVG")},de=function(){Be=MathJax.config.startup.output,Be!=="svg"&&(MathJax.config.startup.output="svg")},we=function(){var Te="math-output-"+d.randstr({},64);it=fe.select("body").append("div").attr({id:Te}).style({visibility:"hidden",position:"absolute","font-size":De.fontSize+"px"}).text(w(le));var Ue=it.node();return He===2?MathJax.Hub.Typeset(Ue):MathJax.typeset([Ue])},je=function(){var Te=it.select(He===2?".MathJax_SVG":".MathJax"),Ue=!Te.empty()&&it.select("svg").node();if(!Ue)d.log("There was an error in the tex syntax.",le),Oe();else{var Ze=Ue.getBoundingClientRect(),Je;He===2?Je=fe.select("body").select("#MathJax_SVG_glyphs"):Je=Te.select("defs"),Oe(Te,Je,Ze)}it.remove()},Ae=function(){if(Be!=="SVG")return MathJax.Hub.setRenderer(Be)},$=function(){Be!=="svg"&&(MathJax.config.startup.output=Be)},oe=function(){return st!==void 0&&(MathJax.Hub.processSectionDelay=st),MathJax.Hub.Config(Ye)},ge=function(){MathJax.config=Ye};He===2?MathJax.Hub.Queue(yt,Ee,we,je,Ae,oe):He===3&&(_e(),de(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){we(),je(),$(),ge()}))}var b={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},z={sub:"0.3em",sup:"-0.6em"},X={sub:"-0.21em",sup:"0.42em"},N="",O=["http:","https:","mailto:","",void 0,":"],F=ce.NEWLINES=/(\r\n?|\n)/g,P=/(<[^<>]*>)/,_=/<(\/?)([^ >]*)(\s+(.*))?>/i,R=/<br(\s+.*)?>/i;ce.BR_TAG_ALL=/<br(\s+.*)?>/gi;var H=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,te=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,J=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,ye=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function se(le,De){if(!le)return null;var Oe=le.match(De),He=Oe&&(Oe[3]||Oe[4]);return He&&ue(He)}var he=/(^|;)\s*color:/;ce.plainText=function(le,De){De=De||{};for(var Oe=De.len!==void 0&&De.len!==-1?De.len:1/0,He=De.allowedTags!==void 0?De.allowedTags:["br"],Be="...",Ye=Be.length,st=le.split(P),it=[],yt="",_e=0,Ee=0;Ee<st.length;Ee++){var de=st[Ee],we=de.match(_),je=we&&we[2].toLowerCase();if(je)He.indexOf(je)!==-1&&(it.push(de),yt=je);else{var Ae=de.length;if(_e+Ae<Oe)it.push(de),_e+=Ae;else if(_e<Oe){var $=Oe-_e;yt&&(yt!=="br"||$<=Ye||Ae<=Ye)&&it.pop(),Oe>Ye?it.push(de.substr(0,$-Ye)+Be):it.push(de.substr(0,$));break}yt=""}}return it.join("")};var pe={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},Q=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function ue(le){return le.replace(Q,function(De,Oe){var He;return Oe.charAt(0)==="#"?He=me(Oe.charAt(1)==="x"?parseInt(Oe.substr(2),16):parseInt(Oe.substr(1),10)):He=pe[Oe],He||De})}ce.convertEntities=ue;function me(le){if(!(le>1114111)){var De=String.fromCodePoint;if(De)return De(le);var Oe=String.fromCharCode;return le<=65535?Oe(le):Oe((le>>10)+55232,le%1024+56320)}}function be(le,De){De=De.replace(F," ");var Oe=!1,He=[],Be,Ye=-1;function st(){Ye++;var ft=document.createElementNS(c.svg,"tspan");fe.select(ft).attr({class:"line",dy:Ye*m+"em"}),le.appendChild(ft),Be=ft;var wt=He;if(He=[{node:ft}],wt.length>1)for(var Ct=1;Ct<wt.length;Ct++)it(wt[Ct])}function it(ft){var wt=ft.type,Ct={},Kt;if(wt==="a"){Kt="a";var $t=ft.target,Wt=ft.href,nt=ft.popup;Wt&&(Ct={"xlink:xlink:show":$t==="_blank"||$t.charAt(0)!=="_"?"new":"replace",target:$t,"xlink:xlink:href":Wt},nt&&(Ct.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+nt+'");return false;'))}else Kt="tspan";ft.style&&(Ct.style=ft.style);var pt=document.createElementNS(c.svg,Kt);if(wt==="sup"||wt==="sub"){yt(Be,N),Be.appendChild(pt);var Ke=document.createElementNS(c.svg,"tspan");yt(Ke,N),fe.select(Ke).attr("dy",X[wt]),Ct.dy=z[wt],Be.appendChild(pt),Be.appendChild(Ke)}else Be.appendChild(pt);fe.select(pt).attr(Ct),Be=ft.node=pt,He.push(ft)}function yt(ft,wt){ft.appendChild(document.createTextNode(wt))}function _e(ft){if(He.length===1){d.log("Ignoring unexpected end tag </"+ft+">.",De);return}var wt=He.pop();ft!==wt.type&&d.log("Start tag <"+wt.type+"> doesnt match end tag <"+ft+">. Pretending it did match.",De),Be=He[He.length-1].node}var Ee=R.test(De);Ee?st():(Be=le,He=[{node:le}]);for(var de=De.split(P),we=0;we<de.length;we++){var je=de[we],Ae=je.match(_),$=Ae&&Ae[2].toLowerCase(),oe=b[$];if($==="br")st();else if(oe===void 0)yt(Be,ue(je));else if(Ae[1])_e($);else{var ge=Ae[4],Te={type:$},Ue=se(ge,H);if(Ue?(Ue=Ue.replace(he,"$1 fill:"),oe&&(Ue+=";"+oe)):oe&&(Ue=oe),Ue&&(Te.style=Ue),$==="a"){Oe=!0;var Ze=se(ge,te);if(Ze){var Je=ve(Ze);Je&&(Te.href=Je,Te.target=se(ge,J)||"_blank",Te.popup=se(ge,ye))}}it(Te)}}return Oe}function ve(le){var De=encodeURI(decodeURI(le)),Oe=document.createElement("a"),He=document.createElement("a");Oe.href=le,He.href=De;var Be=Oe.protocol,Ye=He.protocol;return O.indexOf(Be)!==-1&&O.indexOf(Ye)!==-1?De:""}ce.sanitizeHTML=function(De){De=De.replace(F," ");for(var Oe=document.createElement("p"),He=Oe,Be=[],Ye=De.split(P),st=0;st<Ye.length;st++){var it=Ye[st],yt=it.match(_),_e=yt&&yt[2].toLowerCase();if(_e in b)if(yt[1])Be.length&&(He=Be.pop());else{var Ee=yt[4],de=se(Ee,H),we=de?{style:de}:{};if(_e==="a"){var je=se(Ee,te);if(je){var Ae=ve(je);if(Ae){we.href=Ae;var $=se(Ee,J);$&&(we.target=$)}}}var oe=document.createElement(_e);He.appendChild(oe),fe.select(oe).attr(we),He=oe,Be.push(oe)}else He.appendChild(document.createTextNode(ue(it)))}var ge="innerHTML";return Oe[ge]},ce.lineCount=function(De){return De.selectAll("tspan.line").size()||1},ce.positionText=function(De,Oe,He){return De.each(function(){var Be=fe.select(this);function Ye(yt,_e){return _e===void 0?(_e=Be.attr(yt),_e===null&&(Be.attr(yt,0),_e=0)):Be.attr(yt,_e),_e}var st=Ye("x",Oe),it=Ye("y",He);this.nodeName==="text"&&Be.selectAll("tspan.line").attr({x:st,y:it})})};function Me(le,De,Oe){var He=Oe.horizontalAlign,Be=Oe.verticalAlign||"top",Ye=le.node().getBoundingClientRect(),st=De.node().getBoundingClientRect(),it,yt,_e;return Be==="bottom"?yt=function(){return Ye.bottom-it.height}:Be==="middle"?yt=function(){return Ye.top+(Ye.height-it.height)/2}:yt=function(){return Ye.top},He==="right"?_e=function(){return Ye.right-it.width}:He==="center"?_e=function(){return Ye.left+(Ye.width-it.width)/2}:_e=function(){return Ye.left},function(){it=this.node().getBoundingClientRect();var Ee=_e()-st.left,de=yt()-st.top,we=Oe.gd||{};if(Oe.gd){we._fullLayout._calcInverseTransform(we);var je=d.apply3DTransform(we._fullLayout._invTransform)(Ee,de);Ee=je[0],de=je[1]}return this.style({top:de+"px",left:Ee+"px","z-index":1e3}),this}}var ke="1px ";ce.makeTextShadow=function(le){var De=ke,Oe=ke,He=ke;return De+Oe+He+le+", -"+De+"-"+Oe+He+le+", "+De+"-"+Oe+He+le+", -"+De+Oe+He+le},ce.makeEditable=function(le,De){var Oe=De.gd,He=De.delegate,Be=fe.dispatch("edit","input","cancel"),Ye=He||le;if(le.style({"pointer-events":He?"none":"all"}),le.size()!==1)throw new Error("boo");function st(){yt(),le.style({opacity:0});var _e=Ye.attr("class"),Ee;_e?Ee="."+_e.split(" ")[0]+"-math-group":Ee="[class*=-math-group]",Ee&&fe.select(le.node().parentNode).select(Ee).style({opacity:0})}function it(_e){var Ee=_e.node(),de=document.createRange();de.selectNodeContents(Ee);var we=window.getSelection();we.removeAllRanges(),we.addRange(de),Ee.focus()}function yt(){var _e=fe.select(Oe),Ee=_e.select(".svg-container"),de=Ee.append("div"),we=le.node().style,je=parseFloat(we.fontSize||12),Ae=De.text;Ae===void 0&&(Ae=le.attr("data-unformatted")),de.classed("plugin-editable editable",!0).style({position:"absolute","font-family":we.fontFamily||"Arial","font-size":je,color:De.fill||we.fill||"black",opacity:1,"background-color":De.background||"transparent",outline:"#ffffff33 1px solid",margin:[-je/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Ae).call(Me(le,Ee,De)).on("blur",function(){Oe._editing=!1,le.text(this.textContent).style({opacity:1});var $=fe.select(this).attr("class"),oe;$?oe="."+$.split(" ")[0]+"-math-group":oe="[class*=-math-group]",oe&&fe.select(le.node().parentNode).select(oe).style({opacity:0});var ge=this.textContent;fe.select(this).transition().duration(0).remove(),fe.select(document).on("mouseup",null),Be.edit.call(le,ge)}).on("focus",function(){var $=this;Oe._editing=!0,fe.select(document).on("mouseup",function(){if(fe.event.target===$)return!1;document.activeElement===de.node()&&de.node().blur()})}).on("keyup",function(){fe.event.which===27?(Oe._editing=!1,le.style({opacity:1}),fe.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Be.cancel.call(le,this.textContent)):(Be.input.call(le,this.textContent),fe.select(this).call(Me(le,Ee,De)))}).on("keydown",function(){fe.event.which===13&&this.blur()}).call(it)}return De.immediate?st():Ye.on("click",st),fe.rebind(le,Be,"on")}}}),So=n({"src/components/colorscale/helpers.js"(ce,fe){var d=k(),u=A(),c=B(),m=pa(),v=Ve(),p=qe().isValid;function g(F,P,_){var R=P?m.nestedProperty(F,P).get()||{}:F,H=R[_||"color"];H&&H._inputArray&&(H=H._inputArray);var te=!1;if(m.isArrayOrTypedArray(H)){for(var J=0;J<H.length;J++)if(c(H[J])){te=!0;break}}return m.isPlainObject(R)&&(te||R.showscale===!0||c(R.cmin)&&c(R.cmax)||p(R.colorscale)||m.isPlainObject(R.colorbar))}var w=["showscale","autocolorscale","colorscale","reversescale","colorbar"],s=["min","max","mid","auto"];function j(F){var P=F._colorAx,_=P||F,R={},H,te,J;for(te=0;te<w.length;te++)J=w[te],R[J]=_[J];if(P)for(H="c",te=0;te<s.length;te++)J=s[te],R[J]=_["c"+J];else{var ye;for(te=0;te<s.length;te++){if(J=s[te],ye="c"+J,ye in _){R[J]=_[ye];continue}ye="z"+J,ye in _&&(R[J]=_[ye])}H=ye.charAt(0)}return R._sync=function(se,he){var pe=s.indexOf(se)!==-1?H+se:se;_[pe]=_["_"+pe]=he},R}function b(F){for(var P=j(F),_=P.min,R=P.max,H=P.reversescale?z(P.colorscale):P.colorscale,te=H.length,J=new Array(te),ye=new Array(te),se=0;se<te;se++){var he=H[se];J[se]=_+he[0]*(R-_),ye[se]=he[1]}return{domain:J,range:ye}}function z(F){for(var P=F.length,_=new Array(P),R=P-1,H=0;R>=0;R--,H++){var te=F[R];_[H]=[1-te[0],te[1]]}return _}function X(F,P){P=P||{};for(var _=F.domain,R=F.range,H=R.length,te=new Array(H),J=0;J<H;J++){var ye=u(R[J]).toRgb();te[J]=[ye.r,ye.g,ye.b,ye.a]}var se=d.scale.linear().domain(_).range(te).clamp(!0),he=P.noNumericCheck,pe=P.returnArray,Q;return he&&pe?Q=se:he?Q=function(ue){return O(se(ue))}:pe?Q=function(ue){return c(ue)?se(ue):u(ue).isValid()?ue:v.defaultLine}:Q=function(ue){return c(ue)?O(se(ue)):u(ue).isValid()?ue:v.defaultLine},Q.domain=se.domain,Q.range=function(){return R},Q}function N(F,P){return X(b(F),P)}function O(F){var P={r:F[0],g:F[1],b:F[2],a:F[3]};return u(P).toRgbString()}fe.exports={hasColorscale:g,extractOpts:j,extractScale:b,flipScale:z,makeColorScaleFunc:X,makeColorScaleFuncFromTrace:N}}}),ro=n({"src/plots/cartesian/axis_format_attributes.js"(ce,fe){var d=ga(),u=d.FORMAT_LINK,c=d.DATE_FORMAT_LINK;function m(g,w){return{valType:"string",dflt:"",editType:"none",description:(w?v:p)("hover text",g)+["By default the values are formatted using "+(w?"generic number format":"`"+g+"axis.hoverformat`")+"."].join(" ")}}function v(g,w){return["Sets the "+g+" formatting rule"+(w?"for `"+w+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+u+"."].join(" ")}function p(g,w){return v(g,w)+[" And for dates see: "+c+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}fe.exports={axisHoverFormat:m,descriptionOnlyNumbers:v,descriptionWithDates:p}}}),yo=n({"src/plots/cartesian/layout_attributes.js"(ce,fe){var d=G(),u=Pe(),c=Rr().dash,m=L().extendFlat,v=vn().templatedArray;kt().templateFormatStringDescription;var p=ro().descriptionWithDates,g=W().ONEDAY,w=ui(),s=w.HOUR_PATTERN,j=w.WEEKDAY_PATTERN,b={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},z=m({},b,{values:b.values.slice().concat(["sync"])});function X(he){return{valType:"integer",min:0,dflt:he?5:0,editType:"ticks"}}var N={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},O={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},F={valType:"data_array",editType:"ticks"},P={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function _(he){var pe={valType:"number",min:0,editType:"ticks"};return he||(pe.dflt=5),pe}function R(he){var pe={valType:"number",min:0,editType:"ticks"};return he||(pe.dflt=1),pe}var H={valType:"color",dflt:u.defaultLine,editType:"ticks"},te={valType:"color",dflt:u.lightLine,editType:"ticks"};function J(he){var pe={valType:"number",min:0,editType:"ticks"};return he||(pe.dflt=1),pe}var ye=m({},c,{editType:"ticks"}),se={valType:"boolean",editType:"ticks"};fe.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:u.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:d({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},modebardisable:{valType:"flaglist",flags:["autoscale","zoominout"],extras:["none"],dflt:"none",editType:"modebar"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[w.idRegex.x.toString(),w.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"calc"},rangebreaks:v("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[j,s,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:g},editType:"calc"}),tickmode:z,nticks:X(),tick0:N,dtick:O,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:F,ticktext:{valType:"data_array",editType:"ticks"},ticks:P,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:_(),tickwidth:R(),tickcolor:H,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:m({},c,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:d({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:p("tick label")},tickformatstops:v("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:p("hover text")},unifiedhovertitle:{text:{valType:"string",dflt:"",editType:"none"},editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:u.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:se,gridcolor:te,gridwidth:J(),griddash:ye,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:u.defaultLine,editType:"ticks"},zerolinelayer:{valType:"enumerated",values:["above traces","below traces"],dflt:"below traces",editType:"plot"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:u.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",w.idRegex.x.toString(),w.idRegex.y.toString()],editType:"plot"},minor:{tickmode:b,nticks:X("minor"),tick0:N,dtick:O,tickvals:F,ticks:P,ticklen:_("minor"),tickwidth:R("minor"),tickcolor:H,gridcolor:te,gridwidth:J("minor"),griddash:ye,showgrid:se,editType:"ticks"},minorloglabels:{valType:"enumerated",values:["small digits","complete","none"],dflt:"small digits",editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}}}),Vo=n({"src/components/colorbar/attributes.js"(ce,fe){var d=yo(),u=G(),c=L().extendFlat,m=wa().overrideAll;fe.exports=m({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.minor.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:c({},d.ticks,{dflt:""}),ticklabeloverflow:c({},d.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,ticklabelstep:d.ticklabelstep,showticklabels:d.showticklabels,labelalias:d.labelalias,tickfont:u({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,minexponent:d.minexponent,showexponent:d.showexponent,title:{text:{valType:"string"},font:u({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")}}),Ss=n({"src/components/colorscale/attributes.js"(ce,fe){var d=Vo(),u=Xe().counter,c=sn(),m=qe().scales;c(m),fe.exports=function(p,g){p=p||"",g=g||{};var w=g.cLetter||"c";"onlyIfNumerical"in g&&g.onlyIfNumerical;var s="noScale"in g?g.noScale:p==="marker.line",j="showScaleDflt"in g?g.showScaleDflt:w==="z",b=typeof g.colorscaleDflt=="string"?m[g.colorscaleDflt]:null,z=g.editTypeOverride||"",X;"colorAttr"in g?(X=g.colorAttr,g.colorAttr):X={z:"z",c:"color"}[w];var N=w+"auto",O=w+"min",F=w+"max",P=w+"mid",_={};_[O]=_[F]=void 0;var R={};R[N]=!1;var H={};return X==="color"&&(H.color={valType:"color",arrayOk:!0,editType:z||"style"},g.anim&&(H.color.anim=!0)),H[N]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:_},H[O]={valType:"number",dflt:null,editType:z||"plot",impliedEdits:R},H[F]={valType:"number",dflt:null,editType:z||"plot",impliedEdits:R},H[P]={valType:"number",dflt:null,editType:"calc",impliedEdits:_},H.colorscale={valType:"colorscale",editType:"calc",dflt:b,impliedEdits:{autocolorscale:!1}},H.autocolorscale={valType:"boolean",dflt:g.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},H.reversescale={valType:"boolean",dflt:!1,editType:"plot"},s||(H.showscale={valType:"boolean",dflt:j,editType:"calc"},H.colorbar=d),g.noColorAxis||(H.coloraxis={valType:"subplotid",regex:u("coloraxis"),dflt:null,editType:"calc"}),H}}}),jo=n({"src/components/colorscale/layout_attributes.js"(ce,fe){var d=L().extendFlat,u=Ss(),c=qe().scales;fe.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:c.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:c.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:c.RdBu,editType:"calc"}},coloraxis:d({_isSubplotObj:!0,editType:"calc"},u("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}}}),fs=n({"src/components/colorbar/has_colorbar.js"(ce,fe){var d=pa();fe.exports=function(c){return d.isPlainObject(c.colorbar)}}}),Fu=n({"src/plots/cartesian/clean_ticks.js"(ce){var fe=B(),d=pa(),u=W(),c=u.ONEDAY,m=u.ONEWEEK;ce.dtick=function(v,p){var g=p==="log",w=p==="date",s=p==="category",j=w?c:1;if(!v)return j;if(fe(v))return v=Number(v),v<=0?j:s?Math.max(1,Math.round(v)):w?Math.max(.1,v):v;if(typeof v!="string"||!(w||g))return j;var b=v.charAt(0),z=v.substr(1);return z=fe(z)?Number(z):0,z<=0||!(w&&b==="M"&&z===Math.round(z)||g&&b==="L"||g&&b==="D"&&(z===1||z===2))?j:v},ce.tick0=function(v,p,g,w){if(p==="date")return d.cleanDate(v,d.dateTick0(g,w%m===0?1:0));if(!(w==="D1"||w==="D2"))return fe(v)?Number(v):0}}}),es=n({"src/plots/cartesian/tick_value_defaults.js"(ce,fe){var d=Fu(),u=pa().isArrayOrTypedArray,c=T().isTypedArraySpec,m=T().decodeTypedArraySpec;fe.exports=function(p,g,w,s,j){j||(j={});var b=j.isMinor,z=b?p.minor||{}:p,X=b?g.minor:g,N=b?"minor.":"";function O(ye){var se=z[ye];return c(se)&&(se=m(se)),se!==void 0?se:(X._template||{})[ye]}var F=O("tick0"),P=O("dtick"),_=O("tickvals"),R=u(_)?"array":P?"linear":"auto",H=w(N+"tickmode",R);if(H==="auto"||H==="sync")w(N+"nticks");else if(H==="linear"){var te=X.dtick=d.dtick(P,s);X.tick0=d.tick0(F,s,g.calendar,te)}else if(s!=="multicategory"){var J=w(N+"tickvals");J===void 0?X.tickmode="auto":b||w("ticktext")}}}}),cl=n({"src/plots/cartesian/tick_mark_defaults.js"(ce,fe){var d=pa(),u=yo();fe.exports=function(m,v,p,g){var w=g.isMinor,s=w?m.minor||{}:m,j=w?v.minor:v,b=w?u.minor:u,z=w?"minor.":"",X=d.coerce2(s,j,b,"ticklen",w?(v.ticklen||5)*.6:void 0),N=d.coerce2(s,j,b,"tickwidth",w?v.tickwidth||1:void 0),O=d.coerce2(s,j,b,"tickcolor",(w?v.tickcolor:void 0)||j.color),F=p(z+"ticks",!w&&g.outerTicks||X||N||O?"outside":"");F||(delete j.ticklen,delete j.tickwidth,delete j.tickcolor)}}}),hs=n({"src/plots/cartesian/show_dflt.js"(ce,fe){fe.exports=function(u){var c=["showexponent","showtickprefix","showticksuffix"],m=c.filter(function(p){return u[p]!==void 0}),v=function(p){return u[p]===u[m[0]]};if(m.every(v)||m.length===1)return u[m[0]]}}}),Gi=n({"src/plots/array_container_defaults.js"(ce,fe){var d=pa(),u=vn();fe.exports=function(m,v,p){var g=p.name,w=p.inclusionAttr||"visible",s=v[g],j=d.isArrayOrTypedArray(m[g])?m[g]:[],b=v[g]=[],z=u.arrayTemplater(v,g,w),X,N;for(X=0;X<j.length;X++){var O=j[X];d.isPlainObject(O)?N=z.newItem(O):(N=z.newItem({}),N[w]=!1),N._index=X,N[w]!==!1&&p.handleItemDefaults(O,N,v,p),b.push(N)}var F=z.defaultItems();for(X=0;X<F.length;X++)N=F[X],N._index=b.length,p.handleItemDefaults({},N,v,p,{}),b.push(N);if(d.isArrayOrTypedArray(s)){var P=Math.min(s.length,b.length);for(X=0;X<P;X++)d.relinkPrivateKeys(b[X],s[X])}return b}}}),ao=n({"src/plots/cartesian/tick_label_defaults.js"(ce,fe){var d=pa(),u=Ve().contrast,c=yo(),m=hs(),v=Gi();fe.exports=function(w,s,j,b,z){z||(z={});var X=j("labelalias");d.isPlainObject(X)||delete s.labelalias;var N=m(w),O=j("showticklabels");if(O){z.noTicklabelshift||j("ticklabelshift"),z.noTicklabelstandoff||j("ticklabelstandoff");var F=z.font||{},P=s.color,_=s.ticklabelposition||"",R=_.indexOf("inside")!==-1?u(z.bgColor):P&&P!==c.color.dflt?P:F.color;if(d.coerceFont(j,"tickfont",F,{overrideDflt:{color:R}}),!z.noTicklabelstep&&b!=="multicategory"&&b!=="log"&&j("ticklabelstep"),!z.noAng){var H=j("tickangle");!z.noAutotickangles&&H==="auto"&&j("autotickangles")}if(b!=="category"){var te=j("tickformat");v(w,s,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),s.tickformatstops.length||delete s.tickformatstops,!z.noExp&&!te&&b!=="date"&&(j("showexponent",N),j("exponentformat"),j("minexponent"),j("separatethousands"))}!z.noMinorloglabels&&b==="log"&&j("minorloglabels")}};function p(g,w){function s(b,z){return d.coerce(g,w,c.tickformatstops,b,z)}var j=s("enabled");j&&(s("dtickrange"),s("value"))}}}),ci=n({"src/plots/cartesian/prefix_suffix_defaults.js"(ce,fe){var d=hs();fe.exports=function(c,m,v,p,g){g||(g={});var w=g.tickSuffixDflt,s=d(c),j=v("tickprefix");j&&v("showtickprefix",s);var b=v("ticksuffix",w);b&&v("showticksuffix",s)}}}),fl=n({"src/components/colorbar/defaults.js"(ce,fe){var d=pa(),u=vn(),c=es(),m=cl(),v=ao(),p=ci(),g=Vo();fe.exports=function(s,j,b){var z=u.newContainer(j,"colorbar"),X=s.colorbar||{};function N(De,Oe){return d.coerce(X,z,g,De,Oe)}var O=b.margin||{t:0,b:0,l:0,r:0},F=b.width-O.l-O.r,P=b.height-O.t-O.b,_=N("orientation"),R=_==="v",H=N("thicknessmode");N("thickness",H==="fraction"?30/(R?F:P):30);var te=N("lenmode");N("len",te==="fraction"?1:R?P:F);var J=N("yref"),ye=N("xref"),se=J==="paper",he=ye==="paper",pe,Q,ue,me="left";R?(ue="middle",me=he?"left":"right",pe=he?1.02:1,Q=.5):(ue=se?"bottom":"top",me="center",pe=.5,Q=se?1.02:1),d.coerce(X,z,{x:{valType:"number",min:he?-2:0,max:he?3:1,dflt:pe}},"x"),d.coerce(X,z,{y:{valType:"number",min:se?-2:0,max:se?3:1,dflt:Q}},"y"),N("xanchor",me),N("xpad"),N("yanchor",ue),N("ypad"),d.noneOrAll(X,z,["x","y"]),N("outlinecolor"),N("outlinewidth"),N("bordercolor"),N("borderwidth"),N("bgcolor");var be=d.coerce(X,z,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:R?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");N("ticklabeloverflow",be.indexOf("inside")!==-1?"hide past domain":"hide past div"),c(X,z,N,"linear");var ve=b.font,Me={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:ve};be.indexOf("inside")!==-1&&(Me.bgColor="black"),p(X,z,N,"linear",Me),v(X,z,N,"linear",Me),m(X,z,N,"linear",Me),N("title.text",b._dfltTitle.colorbar);var ke=z.showticklabels?z.tickfont:ve,le=d.extendFlat({},ve,{family:ke.family,size:d.bigFont(ke.size)});d.coerceFont(N,"title.font",le),N("title.side",R?"top":"right")}}}),Ws=n({"src/components/colorscale/defaults.js"(ce,fe){var d=B(),u=pa(),c=fs(),m=fl(),v=qe().isValid,p=hr().traceIs;function g(w,s){var j=s.slice(0,s.length-1);return s?u.nestedProperty(w,j).get()||{}:w}fe.exports=function w(s,j,b,z,X){var N=X.prefix,O=X.cLetter,F="_module"in j,P=g(s,N),_=g(j,N),R=g(j._template||{},N)||{},H=function(){return delete s.coloraxis,delete j.coloraxis,w(s,j,b,z,X)};if(F){var te=b._colorAxes||{},J=z(N+"coloraxis");if(J){var ye=p(j,"contour")&&u.nestedProperty(j,"contours.coloring").get()||"heatmap",se=te[J];se?(se[2].push(H),se[0]!==ye&&(se[0]=!1,u.warn(["Ignoring coloraxis:",J,"setting","as it is linked to incompatible colorscales."].join(" ")))):te[J]=[ye,j,[H]];return}}var he=P[O+"min"],pe=P[O+"max"],Q=d(he)&&d(pe)&&he<pe,ue=z(N+O+"auto",!Q);ue?z(N+O+"mid"):(z(N+O+"min"),z(N+O+"max"));var me=P.colorscale,be=R.colorscale,ve;if(me!==void 0&&(ve=!v(me)),be!==void 0&&(ve=!v(be)),z(N+"autocolorscale",ve),z(N+"colorscale"),z(N+"reversescale"),N!=="marker.line."){var Me;N&&F&&(Me=c(P));var ke=z(N+"showscale",Me);ke&&(N&&R&&(_._template=R),m(P,_,b))}}}}),ju=n({"src/components/colorscale/layout_defaults.js"(ce,fe){var d=pa(),u=vn(),c=jo(),m=Ws();fe.exports=function(p,g){function w(F,P){return d.coerce(p,g,c,F,P)}w("colorscale.sequential"),w("colorscale.sequentialminus"),w("colorscale.diverging");var s=g._colorAxes,j,b;function z(F,P){return d.coerce(j,b,c.coloraxis,F,P)}for(var X in s){var N=s[X];if(N[0])j=p[X]||{},b=u.newContainer(g,X,"coloraxis"),b._name=X,m(j,b,g,z,{prefix:"",cLetter:"c"});else{for(var O=0;O<N[2].length;O++)N[2][O]();delete g._colorAxes[X]}}}}}),Dl=n({"src/components/colorscale/cross_trace_defaults.js"(ce,fe){var d=pa(),u=So().hasColorscale,c=So().extractOpts;fe.exports=function(v,p){function g(N,O){var F=N["_"+O];F!==void 0&&(N[O]=F)}function w(N,O){var F=O.container?d.nestedProperty(N,O.container).get():N;if(F)if(F.coloraxis)F._colorAx=p[F.coloraxis];else{var P=c(F),_=P.auto;(_||P.min===void 0)&&g(F,O.min),(_||P.max===void 0)&&g(F,O.max),P.autocolorscale&&g(F,"colorscale")}}for(var s=0;s<v.length;s++){var j=v[s],b=j._module.colorbar;if(b)if(Array.isArray(b))for(var z=0;z<b.length;z++)w(j,b[z]);else w(j,b);u(j,"marker.line")&&w(j,{container:"marker.line",min:"cmin",max:"cmax"})}for(var X in p._colorAxes)w(p[X],{min:"cmin",max:"cmax"})}}}),Iu=n({"src/components/colorscale/calc.js"(ce,fe){var d=B(),u=pa(),c=So().extractOpts;fe.exports=function(v,p,g){var w=v._fullLayout,s=g.vals,j=g.containerStr,b=j?u.nestedProperty(p,j).get():p,z=c(b),X=z.auto!==!1,N=z.min,O=z.max,F=z.mid,P=function(){return u.aggNums(Math.min,null,s)},_=function(){return u.aggNums(Math.max,null,s)};if(N===void 0?N=P():X&&(b._colorAx&&d(N)?N=Math.min(N,P()):N=P()),O===void 0?O=_():X&&(b._colorAx&&d(O)?O=Math.max(O,_()):O=_()),X&&F!==void 0&&(O-F>F-N?N=F-(O-F):O-F<F-N&&(O=F+(F-N))),N===O&&(N-=.5,O+=.5),z._sync("min",N),z._sync("max",O),z.autocolorscale){var R;N*O<0?R=w.colorscale.diverging:N>=0?R=w.colorscale.sequential:R=w.colorscale.sequentialminus,z._sync("colorscale",R)}}}}),hl=n({"src/components/colorscale/index.js"(ce,fe){var d=qe(),u=So();fe.exports={moduleType:"component",name:"colorscale",attributes:Ss(),layoutAttributes:jo(),supplyLayoutDefaults:ju(),handleDefaults:Ws(),crossTraceDefaults:Dl(),calc:Iu(),scales:d.scales,defaultScale:d.defaultScale,getScale:d.get,isValidScale:d.isValid,hasColorscale:u.hasColorscale,extractOpts:u.extractOpts,extractScale:u.extractScale,flipScale:u.flipScale,makeColorScaleFunc:u.makeColorScaleFunc,makeColorScaleFuncFromTrace:u.makeColorScaleFuncFromTrace}}}),Oi=n({"src/traces/scatter/subtypes.js"(ce,fe){var d=pa(),u=T().isTypedArraySpec;fe.exports={hasLines:function(c){return c.visible&&c.mode&&c.mode.indexOf("lines")!==-1},hasMarkers:function(c){return c.visible&&(c.mode&&c.mode.indexOf("markers")!==-1||c.type==="splom")},hasText:function(c){return c.visible&&c.mode&&c.mode.indexOf("text")!==-1},isBubble:function(c){var m=c.marker;return d.isPlainObject(m)&&(d.isArrayOrTypedArray(m.size)||u(m.size))}}}}),wc=n({"src/traces/scatter/make_bubble_size_func.js"(ce,fe){var d=B();fe.exports=function(c,m){m||(m=2);var v=c.marker,p=v.sizeref||1,g=v.sizemin||0,w=v.sizemode==="area"?function(s){return Math.sqrt(s/p)}:function(s){return s/p};return function(s){var j=w(s/m);return d(j)&&j>0?Math.max(j,g):0}}}}),ts=n({"src/components/fx/helpers.js"(ce){var fe=pa();ce.getSubplot=function(p){return p.subplot||p.xaxis+p.yaxis||p.geo},ce.isTraceInSubplots=function(p,g){if(p.type==="splom"){for(var w=p.xaxes||[],s=p.yaxes||[],j=0;j<w.length;j++)for(var b=0;b<s.length;b++)if(g.indexOf(w[j]+s[b])!==-1)return!0;return!1}return g.indexOf(ce.getSubplot(p))!==-1},ce.flat=function(p,g){for(var w=new Array(p.length),s=0;s<p.length;s++)w[s]=g;return w},ce.p2c=function(p,g){for(var w=new Array(p.length),s=0;s<p.length;s++)w[s]=p[s].p2c(g);return w},ce.getDistanceFunction=function(p,g,w,s){return p==="closest"?s||ce.quadrature(g,w):p.charAt(0)==="x"?g:w},ce.getClosest=function(p,g,w){if(w.index!==!1)w.index>=0&&w.index<p.length?w.distance=0:w.index=!1;else for(var s=1/0,j=p.length,b=0;b<j;b++)s=g(p[b]),s<=w.distance&&(w.index=b,w.distance=s);return w},ce.inbox=function(p,g,w){return p*g<0||p===0?w:1/0},ce.quadrature=function(p,g){return function(w){var s=p(w),j=g(w);return Math.sqrt(s*s+j*j)}},ce.makeEventData=function(p,g,w){var s="index"in p?p.index:p.pointNumber,j={data:g._input,fullData:g,curveNumber:g.index,pointNumber:s};if(g._indexToPoints){var b=g._indexToPoints[s];b.length===1?j.pointIndex=b[0]:j.pointIndices=b}else j.pointIndex=s;return g._module.eventData?j=g._module.eventData(j,p,g,w,s):("xVal"in p?j.x=p.xVal:"x"in p&&(j.x=p.x),"yVal"in p?j.y=p.yVal:"y"in p&&(j.y=p.y),p.xa&&(j.xaxis=p.xa),p.ya&&(j.yaxis=p.ya),p.zLabelVal!==void 0&&(j.z=p.zLabelVal)),ce.appendArrayPointValue(j,g,s),j},ce.appendArrayPointValue=function(p,g,w){var s=g._arrayAttrs;if(s)for(var j=0;j<s.length;j++){var b=s[j],z=u(b);if(p[z]===void 0){var X=fe.nestedProperty(g,b).get(),N=c(X,w);N!==void 0&&(p[z]=N)}}},ce.appendArrayMultiPointValues=function(p,g,w){var s=g._arrayAttrs;if(s)for(var j=0;j<s.length;j++){var b=s[j],z=u(b);if(p[z]===void 0){for(var X=fe.nestedProperty(g,b).get(),N=new Array(w.length),O=0;O<w.length;O++)N[O]=c(X,w[O]);p[z]=N}}};var d={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function u(p){return d[p]||p}function c(p,g){if(Array.isArray(g)){if(Array.isArray(p)&&Array.isArray(p[g[0]]))return p[g[0]][g[1]]}else return p[g]}var m={x:!0,y:!0},v={"x unified":!0,"y unified":!0};ce.isUnifiedHover=function(p){return typeof p!="string"?!1:!!v[p]},ce.isXYhover=function(p){return typeof p!="string"?!1:!!m[p]}}}),bo=n({"node_modules/parse-svg-path/index.js"(ce,fe){fe.exports=c;var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},u=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function c(p){var g=[];return p.replace(u,function(w,s,j){var b=s.toLowerCase();for(j=v(j),b=="m"&&j.length>2&&(g.push([s].concat(j.splice(0,2))),b="l",s=s=="m"?"l":"L");;){if(j.length==d[b])return j.unshift(s),g.push(j);if(j.length<d[b])throw new Error("malformed path data");g.push([s].concat(j.splice(0,d[b])))}}),g}var m=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function v(p){var g=p.match(m);return g?g.map(Number):[]}}}),ds=n({"src/components/drawing/symbol_defs.js"(ce,fe){var d=bo(),u=(function(O,F){return F?Math.round(O*(F=Math.pow(10,F)))/F:Math.round(O)}),c="M0,0Z",m=Math.sqrt(2),v=Math.sqrt(3),p=Math.PI,g=Math.cos,w=Math.sin;fe.exports={circle:{n:0,f:function(O,F,P){if(s(F))return c;var _=u(O,2),R="M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z";return P?N(F,P,R):R}},square:{n:1,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z")}},diamond:{n:2,f:function(O,F,P){if(s(F))return c;var _=u(O*1.3,2);return N(F,P,"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"Z")}},cross:{n:3,f:function(O,F,P){if(s(F))return c;var _=u(O*.4,2),R=u(O*1.2,2);return N(F,P,"M"+R+","+_+"H"+_+"V"+R+"H-"+_+"V"+_+"H-"+R+"V-"+_+"H-"+_+"V-"+R+"H"+_+"V-"+_+"H"+R+"Z")}},x:{n:4,f:function(O,F,P){if(s(F))return c;var _=u(O*.8/m,2),R="l"+_+","+_,H="l"+_+",-"+_,te="l-"+_+",-"+_,J="l-"+_+","+_;return N(F,P,"M0,"+_+R+H+te+H+te+J+te+J+R+J+R+"Z")}},"triangle-up":{n:5,f:function(O,F,P){if(s(F))return c;var _=u(O*2/v,2),R=u(O/2,2),H=u(O,2);return N(F,P,"M-"+_+","+R+"H"+_+"L0,-"+H+"Z")}},"triangle-down":{n:6,f:function(O,F,P){if(s(F))return c;var _=u(O*2/v,2),R=u(O/2,2),H=u(O,2);return N(F,P,"M-"+_+",-"+R+"H"+_+"L0,"+H+"Z")}},"triangle-left":{n:7,f:function(O,F,P){if(s(F))return c;var _=u(O*2/v,2),R=u(O/2,2),H=u(O,2);return N(F,P,"M"+R+",-"+_+"V"+_+"L-"+H+",0Z")}},"triangle-right":{n:8,f:function(O,F,P){if(s(F))return c;var _=u(O*2/v,2),R=u(O/2,2),H=u(O,2);return N(F,P,"M-"+R+",-"+_+"V"+_+"L"+H+",0Z")}},"triangle-ne":{n:9,f:function(O,F,P){if(s(F))return c;var _=u(O*.6,2),R=u(O*1.2,2);return N(F,P,"M-"+R+",-"+_+"H"+_+"V"+R+"Z")}},"triangle-se":{n:10,f:function(O,F,P){if(s(F))return c;var _=u(O*.6,2),R=u(O*1.2,2);return N(F,P,"M"+_+",-"+R+"V"+_+"H-"+R+"Z")}},"triangle-sw":{n:11,f:function(O,F,P){if(s(F))return c;var _=u(O*.6,2),R=u(O*1.2,2);return N(F,P,"M"+R+","+_+"H-"+_+"V-"+R+"Z")}},"triangle-nw":{n:12,f:function(O,F,P){if(s(F))return c;var _=u(O*.6,2),R=u(O*1.2,2);return N(F,P,"M-"+_+","+R+"V-"+_+"H"+R+"Z")}},pentagon:{n:13,f:function(O,F,P){if(s(F))return c;var _=u(O*.951,2),R=u(O*.588,2),H=u(-O,2),te=u(O*-.309,2),J=u(O*.809,2);return N(F,P,"M"+_+","+te+"L"+R+","+J+"H-"+R+"L-"+_+","+te+"L0,"+H+"Z")}},hexagon:{n:14,f:function(O,F,P){if(s(F))return c;var _=u(O,2),R=u(O/2,2),H=u(O*v/2,2);return N(F,P,"M"+H+",-"+R+"V"+R+"L0,"+_+"L-"+H+","+R+"V-"+R+"L0,-"+_+"Z")}},hexagon2:{n:15,f:function(O,F,P){if(s(F))return c;var _=u(O,2),R=u(O/2,2),H=u(O*v/2,2);return N(F,P,"M-"+R+","+H+"H"+R+"L"+_+",0L"+R+",-"+H+"H-"+R+"L-"+_+",0Z")}},octagon:{n:16,f:function(O,F,P){if(s(F))return c;var _=u(O*.924,2),R=u(O*.383,2);return N(F,P,"M-"+R+",-"+_+"H"+R+"L"+_+",-"+R+"V"+R+"L"+R+","+_+"H-"+R+"L-"+_+","+R+"V-"+R+"Z")}},star:{n:17,f:function(O,F,P){if(s(F))return c;var _=O*1.4,R=u(_*.225,2),H=u(_*.951,2),te=u(_*.363,2),J=u(_*.588,2),ye=u(-_,2),se=u(_*-.309,2),he=u(_*.118,2),pe=u(_*.809,2),Q=u(_*.382,2);return N(F,P,"M"+R+","+se+"H"+H+"L"+te+","+he+"L"+J+","+pe+"L0,"+Q+"L-"+J+","+pe+"L-"+te+","+he+"L-"+H+","+se+"H-"+R+"L0,"+ye+"Z")}},hexagram:{n:18,f:function(O,F,P){if(s(F))return c;var _=u(O*.66,2),R=u(O*.38,2),H=u(O*.76,2);return N(F,P,"M-"+H+",0l-"+R+",-"+_+"h"+H+"l"+R+",-"+_+"l"+R+","+_+"h"+H+"l-"+R+","+_+"l"+R+","+_+"h-"+H+"l-"+R+","+_+"l-"+R+",-"+_+"h-"+H+"Z")}},"star-triangle-up":{n:19,f:function(O,F,P){if(s(F))return c;var _=u(O*v*.8,2),R=u(O*.8,2),H=u(O*1.6,2),te=u(O*4,2),J="A "+te+","+te+" 0 0 1 ";return N(F,P,"M-"+_+","+R+J+_+","+R+J+"0,-"+H+J+"-"+_+","+R+"Z")}},"star-triangle-down":{n:20,f:function(O,F,P){if(s(F))return c;var _=u(O*v*.8,2),R=u(O*.8,2),H=u(O*1.6,2),te=u(O*4,2),J="A "+te+","+te+" 0 0 1 ";return N(F,P,"M"+_+",-"+R+J+"-"+_+",-"+R+J+"0,"+H+J+_+",-"+R+"Z")}},"star-square":{n:21,f:function(O,F,P){if(s(F))return c;var _=u(O*1.1,2),R=u(O*2,2),H="A "+R+","+R+" 0 0 1 ";return N(F,P,"M-"+_+",-"+_+H+"-"+_+","+_+H+_+","+_+H+_+",-"+_+H+"-"+_+",-"+_+"Z")}},"star-diamond":{n:22,f:function(O,F,P){if(s(F))return c;var _=u(O*1.4,2),R=u(O*1.9,2),H="A "+R+","+R+" 0 0 1 ";return N(F,P,"M-"+_+",0"+H+"0,"+_+H+_+",0"+H+"0,-"+_+H+"-"+_+",0Z")}},"diamond-tall":{n:23,f:function(O,F,P){if(s(F))return c;var _=u(O*.7,2),R=u(O*1.4,2);return N(F,P,"M0,"+R+"L"+_+",0L0,-"+R+"L-"+_+",0Z")}},"diamond-wide":{n:24,f:function(O,F,P){if(s(F))return c;var _=u(O*1.4,2),R=u(O*.7,2);return N(F,P,"M0,"+R+"L"+_+",0L0,-"+R+"L-"+_+",0Z")}},hourglass:{n:25,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M"+_+","+_+"H-"+_+"L"+_+",-"+_+"H-"+_+"Z")},noDot:!0},bowtie:{n:26,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M"+_+","+_+"V-"+_+"L-"+_+","+_+"V-"+_+"Z")},noDot:!0},"circle-cross":{n:27,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(O,F,P){if(s(F))return c;var _=u(O,2),R=u(O/m,2);return N(F,P,"M"+R+","+R+"L-"+R+",-"+R+"M"+R+",-"+R+"L-"+R+","+R+"M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_+"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(O,F,P){if(s(F))return c;var _=u(O*1.3,2);return N(F,P,"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"ZM0,-"+_+"V"+_+"M-"+_+",0H"+_)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(O,F,P){if(s(F))return c;var _=u(O*1.3,2),R=u(O*.65,2);return N(F,P,"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"ZM-"+R+",-"+R+"L"+R+","+R+"M-"+R+","+R+"L"+R+",-"+R)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(O,F,P){if(s(F))return c;var _=u(O*1.4,2);return N(F,P,"M0,"+_+"V-"+_+"M"+_+",0H-"+_)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(O,F,P){if(s(F))return c;var _=u(O*1.2,2),R=u(O*.85,2);return N(F,P,"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+R+","+R+"L-"+R+",-"+R+"M"+R+",-"+R+"L-"+R+","+R)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(O,F,P){if(s(F))return c;var _=u(O/2,2),R=u(O,2);return N(F,P,"M"+_+","+R+"V-"+R+"M"+(_-R)+",-"+R+"V"+R+"M"+R+","+_+"H-"+R+"M-"+R+","+(_-R)+"H"+R)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(O,F,P){if(s(F))return c;var _=u(O*1.2,2),R=u(O*1.6,2),H=u(O*.8,2);return N(F,P,"M-"+_+","+H+"L0,0M"+_+","+H+"L0,0M0,-"+R+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(O,F,P){if(s(F))return c;var _=u(O*1.2,2),R=u(O*1.6,2),H=u(O*.8,2);return N(F,P,"M-"+_+",-"+H+"L0,0M"+_+",-"+H+"L0,0M0,"+R+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(O,F,P){if(s(F))return c;var _=u(O*1.2,2),R=u(O*1.6,2),H=u(O*.8,2);return N(F,P,"M"+H+","+_+"L0,0M"+H+",-"+_+"L0,0M-"+R+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(O,F,P){if(s(F))return c;var _=u(O*1.2,2),R=u(O*1.6,2),H=u(O*.8,2);return N(F,P,"M-"+H+","+_+"L0,0M-"+H+",-"+_+"L0,0M"+R+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(O,F,P){if(s(F))return c;var _=u(O*1.4,2);return N(F,P,"M"+_+",0H-"+_)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(O,F,P){if(s(F))return c;var _=u(O*1.4,2);return N(F,P,"M0,"+_+"V-"+_)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M"+_+",-"+_+"L-"+_+","+_)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(O,F,P){if(s(F))return c;var _=u(O,2);return N(F,P,"M"+_+","+_+"L-"+_+",-"+_)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(O,F,P){if(s(F))return c;var _=u(O,2),R=u(O*2,2);return N(F,P,"M0,0L-"+_+","+R+"H"+_+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(O,F,P){if(s(F))return c;var _=u(O,2),R=u(O*2,2);return N(F,P,"M0,0L-"+_+",-"+R+"H"+_+"Z")},noDot:!0},"arrow-left":{n:47,f:function(O,F,P){if(s(F))return c;var _=u(O*2,2),R=u(O,2);return N(F,P,"M0,0L"+_+",-"+R+"V"+R+"Z")},noDot:!0},"arrow-right":{n:48,f:function(O,F,P){if(s(F))return c;var _=u(O*2,2),R=u(O,2);return N(F,P,"M0,0L-"+_+",-"+R+"V"+R+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(O,F,P){if(s(F))return c;var _=u(O,2),R=u(O*2,2);return N(F,P,"M-"+_+",0H"+_+"M0,0L-"+_+","+R+"H"+_+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(O,F,P){if(s(F))return c;var _=u(O,2),R=u(O*2,2);return N(F,P,"M-"+_+",0H"+_+"M0,0L-"+_+",-"+R+"H"+_+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(O,F,P){if(s(F))return c;var _=u(O*2,2),R=u(O,2);return N(F,P,"M0,-"+R+"V"+R+"M0,0L"+_+",-"+R+"V"+R+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(O,F,P){if(s(F))return c;var _=u(O*2,2),R=u(O,2);return N(F,P,"M0,-"+R+"V"+R+"M0,0L-"+_+",-"+R+"V"+R+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(O,F,P){if(s(F))return c;var _=p/2.5,R=2*O*g(_),H=2*O*w(_);return N(F,P,"M0,0L"+-R+","+H+"L"+R+","+H+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(O,F,P){if(s(F))return c;var _=p/4,R=2*O*g(_),H=2*O*w(_);return N(F,P,"M0,0L"+-R+","+H+"A "+2*O+","+2*O+" 0 0 1 "+R+","+H+"Z")},backoff:.4,noDot:!0}};function s(O){return O===null}var j,b,z,X;function N(O,F,P){if((!O||O%360===0)&&!F)return P;if(z===O&&X===F&&j===P)return b;z=O,X=F,j=P;function _(ve,Me){var ke=g(ve),le=w(ve),De=Me[0],Oe=Me[1]+(F||0);return[De*ke-Oe*le,De*le+Oe*ke]}for(var R=O/180*p,H=0,te=0,J=d(P),ye="",se=0;se<J.length;se++){var he=J[se],pe=he[0],Q=H,ue=te;if(pe==="M"||pe==="L")H=+he[1],te=+he[2];else if(pe==="m"||pe==="l")H+=+he[1],te+=+he[2];else if(pe==="H")H=+he[1];else if(pe==="h")H+=+he[1];else if(pe==="V")te=+he[1];else if(pe==="v")te+=+he[1];else if(pe==="A"){H=+he[1],te=+he[2];var me=_(R,[+he[6],+he[7]]);he[6]=me[0],he[7]=me[1],he[3]=+he[3]+O}(pe==="H"||pe==="V")&&(pe="L"),(pe==="h"||pe==="v")&&(pe="l"),(pe==="m"||pe==="l")&&(H-=Q,te-=ue);var be=_(R,[H,te]);(pe==="H"||pe==="V")&&(pe="L"),(pe==="M"||pe==="L"||pe==="m"||pe==="l")&&(he[1]=be[0],he[2]=be[1]),he[0]=pe,ye+=he[0]+he.slice(1).join(",")}return b=ye,ye}}}),ni=n({"src/components/drawing/index.js"(ce,fe){var d=k(),u=pa(),c=u.numberFormat,m=B(),v=A(),p=hr(),g=Ve(),w=hl(),s=u.strTranslate,j=Ui(),b=go(),z=xi(),X=z.LINE_SPACING,N=Ie().DESELECTDIM,O=Oi(),F=wc(),P=ts().appendArrayPointValue,_=fe.exports={};_.font=function(nt,pt){var Ke=pt.variant,gt=pt.style,Ft=pt.weight,Xt=pt.color,or=pt.size,sr=pt.family,dr=pt.shadow,wr=pt.lineposition,xr=pt.textcase;sr&&nt.style("font-family",sr),or+1&&nt.style("font-size",or+"px"),Xt&&nt.call(g.fill,Xt),Ft&&nt.style("font-weight",Ft),gt&&nt.style("font-style",gt),Ke&&nt.style("font-variant",Ke),xr&&nt.style("text-transform",R(te(xr))),dr&&nt.style("text-shadow",dr==="auto"?j.makeTextShadow(g.contrast(Xt)):R(dr)),wr&&nt.style("text-decoration-line",R(J(wr)))};function R(nt){return nt==="none"?void 0:nt}var H={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function te(nt){return H[nt]}function J(nt){return nt.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}_.setPosition=function(nt,pt,Ke){nt.attr("x",pt).attr("y",Ke)},_.setSize=function(nt,pt,Ke){nt.attr("width",pt).attr("height",Ke)},_.setRect=function(nt,pt,Ke,gt,Ft){nt.call(_.setPosition,pt,Ke).call(_.setSize,gt,Ft)},_.translatePoint=function(nt,pt,Ke,gt){var Ft=Ke.c2p(nt.x),Xt=gt.c2p(nt.y);if(m(Ft)&&m(Xt)&&pt.node())pt.node().nodeName==="text"?pt.attr("x",Ft).attr("y",Xt):pt.attr("transform",s(Ft,Xt));else return!1;return!0},_.translatePoints=function(nt,pt,Ke){nt.each(function(gt){var Ft=d.select(this);_.translatePoint(gt,Ft,pt,Ke)})},_.hideOutsideRangePoint=function(nt,pt,Ke,gt,Ft,Xt){pt.attr("display",Ke.isPtWithinRange(nt,Ft)&&gt.isPtWithinRange(nt,Xt)?null:"none")},_.hideOutsideRangePoints=function(nt,pt){if(pt._hasClipOnAxisFalse){var Ke=pt.xaxis,gt=pt.yaxis;nt.each(function(Ft){var Xt=Ft[0].trace,or=Xt.xcalendar,sr=Xt.ycalendar,dr=p.traceIs(Xt,"bar-like")?".bartext":".point,.textpoint";nt.selectAll(dr).each(function(wr){_.hideOutsideRangePoint(wr,d.select(this),Ke,gt,or,sr)})})}},_.crispRound=function(nt,pt,Ke){return!pt||!m(pt)?Ke||0:nt._context.staticPlot?pt:pt<1?1:Math.round(pt)},_.singleLineStyle=function(nt,pt,Ke,gt,Ft){pt.style("fill","none");var Xt=(((nt||[])[0]||{}).trace||{}).line||{},or=Ke||Xt.width||0,sr=Ft||Xt.dash||"";g.stroke(pt,gt||Xt.color),_.dashLine(pt,sr,or)},_.lineGroupStyle=function(nt,pt,Ke,gt){nt.style("fill","none").each(function(Ft){var Xt=(((Ft||[])[0]||{}).trace||{}).line||{},or=pt||Xt.width||0,sr=gt||Xt.dash||"";d.select(this).call(g.stroke,Ke||Xt.color).call(_.dashLine,sr,or)})},_.dashLine=function(nt,pt,Ke){Ke=+Ke||0,pt=_.dashStyle(pt,Ke),nt.style({"stroke-dasharray":pt,"stroke-width":Ke+"px"})},_.dashStyle=function(nt,pt){pt=+pt||1;var Ke=Math.max(pt,3);return nt==="solid"?nt="":nt==="dot"?nt=Ke+"px,"+Ke+"px":nt==="dash"?nt=3*Ke+"px,"+3*Ke+"px":nt==="longdash"?nt=5*Ke+"px,"+5*Ke+"px":nt==="dashdot"?nt=3*Ke+"px,"+Ke+"px,"+Ke+"px,"+Ke+"px":nt==="longdashdot"&&(nt=5*Ke+"px,"+2*Ke+"px,"+Ke+"px,"+2*Ke+"px"),nt};function ye(nt,pt,Ke,gt){var Ft=pt.fillpattern,Xt=pt.fillgradient,or=_.getPatternAttr,sr=Ft&&(or(Ft.shape,0,"")||or(Ft.path,0,""));if(sr){var dr=or(Ft.bgcolor,0,null),wr=or(Ft.fgcolor,0,null),xr=Ft.fgopacity,Pr=or(Ft.size,0,8),nr=or(Ft.solidity,0,.3),jr=pt.uid;_.pattern(nt,"point",Ke,jr,sr,Pr,nr,void 0,Ft.fillmode,dr,wr,xr)}else if(Xt&&Xt.type!=="none"){var ta=Xt.type,Nr="scatterfill-"+pt.uid;if(gt&&(Nr="legendfill-"+pt.uid),!gt&&(Xt.start!==void 0||Xt.stop!==void 0)){var Jr,vt;ta==="horizontal"?(Jr={x:Xt.start,y:0},vt={x:Xt.stop,y:0}):ta==="vertical"&&(Jr={x:0,y:Xt.start},vt={x:0,y:Xt.stop}),Jr.x=pt._xA.c2p(Jr.x===void 0?pt._extremes.x.min[0].val:Jr.x,!0),Jr.y=pt._yA.c2p(Jr.y===void 0?pt._extremes.y.min[0].val:Jr.y,!0),vt.x=pt._xA.c2p(vt.x===void 0?pt._extremes.x.max[0].val:vt.x,!0),vt.y=pt._yA.c2p(vt.y===void 0?pt._extremes.y.max[0].val:vt.y,!0),nt.call(be,Ke,Nr,"linear",Xt.colorscale,"fill",Jr,vt,!0,!1)}else ta==="horizontal"&&(ta=ta+"reversed"),nt.call(_.gradient,Ke,Nr,ta,Xt.colorscale,"fill")}else pt.fillcolor&&nt.call(g.fill,pt.fillcolor)}_.singleFillStyle=function(nt,pt){var Ke=d.select(nt.node()),gt=Ke.data(),Ft=((gt[0]||[])[0]||{}).trace||{};ye(nt,Ft,pt,!1)},_.fillGroupStyle=function(nt,pt,Ke){nt.style("stroke-width",0).each(function(gt){var Ft=d.select(this);gt[0].trace&&ye(Ft,gt[0].trace,pt,Ke)})};var se=ds();_.symbolNames=[],_.symbolFuncs=[],_.symbolBackOffs=[],_.symbolNeedLines={},_.symbolNoDot={},_.symbolNoFill={},_.symbolList=[],Object.keys(se).forEach(function(nt){var pt=se[nt],Ke=pt.n;_.symbolList.push(Ke,String(Ke),nt,Ke+100,String(Ke+100),nt+"-open"),_.symbolNames[Ke]=nt,_.symbolFuncs[Ke]=pt.f,_.symbolBackOffs[Ke]=pt.backoff||0,pt.needLine&&(_.symbolNeedLines[Ke]=!0),pt.noDot?_.symbolNoDot[Ke]=!0:_.symbolList.push(Ke+200,String(Ke+200),nt+"-dot",Ke+300,String(Ke+300),nt+"-open-dot"),pt.noFill&&(_.symbolNoFill[Ke]=!0)});var he=_.symbolNames.length,pe="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";_.symbolNumber=function(nt){if(m(nt))nt=+nt;else if(typeof nt=="string"){var pt=0;nt.indexOf("-open")>0&&(pt=100,nt=nt.replace("-open","")),nt.indexOf("-dot")>0&&(pt+=200,nt=nt.replace("-dot","")),nt=_.symbolNames.indexOf(nt),nt>=0&&(nt+=pt)}return nt%100>=he||nt>=400?0:Math.floor(Math.max(nt,0))};function Q(nt,pt,Ke,gt){var Ft=nt%100;return _.symbolFuncs[Ft](pt,Ke,gt)+(nt>=200?pe:"")}var ue=c("~f"),me={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};_.gradient=function(nt,pt,Ke,gt,Ft,Xt){var or=me[gt];return be(nt,pt,Ke,or.type,Ft,Xt,or.start,or.stop,!1,or.reversed)};function be(nt,pt,Ke,gt,Ft,Xt,or,sr,dr,wr){var xr=Ft.length,Pr;gt==="linear"?Pr={node:"linearGradient",attrs:{x1:or.x,y1:or.y,x2:sr.x,y2:sr.y,gradientUnits:dr?"userSpaceOnUse":"objectBoundingBox"},reversed:wr}:gt==="radial"&&(Pr={node:"radialGradient",reversed:wr});for(var nr=new Array(xr),jr=0;jr<xr;jr++)Pr.reversed?nr[xr-1-jr]=[ue((1-Ft[jr][0])*100),Ft[jr][1]]:nr[jr]=[ue(Ft[jr][0]*100),Ft[jr][1]];var ta=pt._fullLayout,Nr="g"+ta._uid+"-"+Ke,Jr=ta._defs.select(".gradients").selectAll("#"+Nr).data([gt+nr.join(";")],u.identity);Jr.exit().remove(),Jr.enter().append(Pr.node).each(function(){var vt=d.select(this);Pr.attrs&&vt.attr(Pr.attrs),vt.attr("id",Nr);var Mt=vt.selectAll("stop").data(nr);Mt.exit().remove(),Mt.enter().append("stop"),Mt.each(function(xt){var Le=v(xt[1]);d.select(this).attr({offset:xt[0]+"%","stop-color":g.tinyRGB(Le),"stop-opacity":Le.getAlpha()})})}),nt.style(Xt,je(Nr,pt)).style(Xt+"-opacity",null),nt.classed("gradient_filled",!0)}_.pattern=function(nt,pt,Ke,gt,Ft,Xt,or,sr,dr,wr,xr,Pr){var nr=pt==="legend";sr&&(dr==="overlay"?(wr=sr,xr=g.contrast(wr)):(wr=void 0,xr=sr));var jr=Ke._fullLayout,ta="p"+jr._uid+"-"+gt,Nr,Jr,vt=function(Bt,gr,Ar,Er,ba){return Er+(ba-Er)*(Bt-gr)/(Ar-gr)},Mt,xt,Le,ot,ct={},ut=v(xr),Pt=g.tinyRGB(ut),Ot=ut.getAlpha(),qt=Pr*Ot;switch(Ft){case"/":Nr=Xt*Math.sqrt(2),Jr=Xt*Math.sqrt(2),Mt="M-"+Nr/4+","+Jr/4+"l"+Nr/2+",-"+Jr/2+"M0,"+Jr+"L"+Nr+",0M"+Nr/4*3+","+Jr/4*5+"l"+Nr/2+",-"+Jr/2,xt=or*Xt,ot="path",ct={d:Mt,opacity:qt,stroke:Pt,"stroke-width":xt+"px"};break;case"\\":Nr=Xt*Math.sqrt(2),Jr=Xt*Math.sqrt(2),Mt="M"+Nr/4*3+",-"+Jr/4+"l"+Nr/2+","+Jr/2+"M0,0L"+Nr+","+Jr+"M-"+Nr/4+","+Jr/4*3+"l"+Nr/2+","+Jr/2,xt=or*Xt,ot="path",ct={d:Mt,opacity:qt,stroke:Pt,"stroke-width":xt+"px"};break;case"x":Nr=Xt*Math.sqrt(2),Jr=Xt*Math.sqrt(2),Mt="M-"+Nr/4+","+Jr/4+"l"+Nr/2+",-"+Jr/2+"M0,"+Jr+"L"+Nr+",0M"+Nr/4*3+","+Jr/4*5+"l"+Nr/2+",-"+Jr/2+"M"+Nr/4*3+",-"+Jr/4+"l"+Nr/2+","+Jr/2+"M0,0L"+Nr+","+Jr+"M-"+Nr/4+","+Jr/4*3+"l"+Nr/2+","+Jr/2,xt=Xt-Xt*Math.sqrt(1-or),ot="path",ct={d:Mt,opacity:qt,stroke:Pt,"stroke-width":xt+"px"};break;case"|":Nr=Xt,Jr=Xt,ot="path",Mt="M"+Nr/2+",0L"+Nr/2+","+Jr,xt=or*Xt,ot="path",ct={d:Mt,opacity:qt,stroke:Pt,"stroke-width":xt+"px"};break;case"-":Nr=Xt,Jr=Xt,ot="path",Mt="M0,"+Jr/2+"L"+Nr+","+Jr/2,xt=or*Xt,ot="path",ct={d:Mt,opacity:qt,stroke:Pt,"stroke-width":xt+"px"};break;case"+":Nr=Xt,Jr=Xt,ot="path",Mt="M"+Nr/2+",0L"+Nr/2+","+Jr+"M0,"+Jr/2+"L"+Nr+","+Jr/2,xt=Xt-Xt*Math.sqrt(1-or),ot="path",ct={d:Mt,opacity:qt,stroke:Pt,"stroke-width":xt+"px"};break;case".":Nr=Xt,Jr=Xt,or<Math.PI/4?Le=Math.sqrt(or*Xt*Xt/Math.PI):Le=vt(or,Math.PI/4,1,Xt/2,Xt/Math.sqrt(2)),ot="circle",ct={cx:Nr/2,cy:Jr/2,r:Le,opacity:qt,fill:Pt};break;default:Nr=Xt,Jr=Xt,ot="path",ct={d:Ft,opacity:qt,fill:Pt};break}var ir=[Ft||"noSh",wr||"noBg",xr||"noFg",Xt,or].join(";"),_r=jr._defs.select(".patterns").selectAll("#"+ta).data([ir],u.identity);_r.exit().remove(),_r.enter().append("pattern").each(function(){var Bt=d.select(this);if(Bt.attr({id:ta,width:Nr+"px",height:Jr+"px",patternUnits:"userSpaceOnUse",patternTransform:nr?"scale(0.8)":""}),wr){var gr=v(wr),Ar=g.tinyRGB(gr),Er=gr.getAlpha(),ba=Bt.selectAll("rect").data([0]);ba.exit().remove(),ba.enter().append("rect").attr({width:Nr+"px",height:Jr+"px",fill:Ar,"fill-opacity":Er})}var Ga=Bt.selectAll(ot).data([0]);Ga.exit().remove(),Ga.enter().append(ot).attr(ct)}),nt.style("fill",je(ta,Ke)).style("fill-opacity",null),nt.classed("pattern_filled",!0)},_.initGradients=function(nt){var pt=nt._fullLayout,Ke=u.ensureSingle(pt._defs,"g","gradients");Ke.selectAll("linearGradient,radialGradient").remove(),d.select(nt).selectAll(".gradient_filled").classed("gradient_filled",!1)},_.initPatterns=function(nt){var pt=nt._fullLayout,Ke=u.ensureSingle(pt._defs,"g","patterns");Ke.selectAll("pattern").remove(),d.select(nt).selectAll(".pattern_filled").classed("pattern_filled",!1)},_.getPatternAttr=function(nt,pt,Ke){return nt&&u.isArrayOrTypedArray(nt)?pt<nt.length?nt[pt]:Ke:nt},_.pointStyle=function(nt,pt,Ke,gt){if(nt.size()){var Ft=_.makePointStyleFns(pt);nt.each(function(Xt){_.singlePointStyle(Xt,d.select(this),pt,Ft,Ke,gt)})}},_.singlePointStyle=function(nt,pt,Ke,gt,Ft,Xt){var or=Ke.marker,sr=or.line;if(Xt&&Xt.i>=0&&nt.i===void 0&&(nt.i=Xt.i),pt.style("opacity",gt.selectedOpacityFn?gt.selectedOpacityFn(nt):nt.mo===void 0?or.opacity:nt.mo),gt.ms2mrc){var dr;nt.ms==="various"||or.size==="various"?dr=3:dr=gt.ms2mrc(nt.ms),nt.mrc=dr,gt.selectedSizeFn&&(dr=nt.mrc=gt.selectedSizeFn(nt));var wr=_.symbolNumber(nt.mx||or.symbol)||0;nt.om=wr%200>=100;var xr=Wt(nt,Ke),Pr=oe(nt,Ke);pt.attr("d",Q(wr,dr,xr,Pr))}var nr=!1,jr,ta,Nr;if(nt.so)Nr=sr.outlierwidth,ta=sr.outliercolor,jr=or.outliercolor;else{var Jr=(sr||{}).width;Nr=(nt.mlw+1||Jr+1||(nt.trace?(nt.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in nt?ta=nt.mlcc=gt.lineScale(nt.mlc):u.isArrayOrTypedArray(sr.color)?ta=g.defaultLine:ta=sr.color,u.isArrayOrTypedArray(or.color)&&(jr=g.defaultLine,nr=!0),"mc"in nt?jr=nt.mcc=gt.markerScale(nt.mc):jr=or.color||or.colors||"rgba(0,0,0,0)",gt.selectedColorFn&&(jr=gt.selectedColorFn(nt))}if(nt.om)pt.call(g.stroke,jr).style({"stroke-width":(Nr||1)+"px",fill:"none"});else{pt.style("stroke-width",(nt.isBlank?0:Nr)+"px");var vt=or.gradient,Mt=nt.mgt;Mt?nr=!0:Mt=vt&&vt.type,u.isArrayOrTypedArray(Mt)&&(Mt=Mt[0],me[Mt]||(Mt=0));var xt=or.pattern,Le=_.getPatternAttr,ot=xt&&(Le(xt.shape,nt.i,"")||Le(xt.path,nt.i,""));if(Mt&&Mt!=="none"){var ct=nt.mgc;ct?nr=!0:ct=vt.color;var ut=Ke.uid;nr&&(ut+="-"+nt.i),_.gradient(pt,Ft,ut,Mt,[[0,ct],[1,jr]],"fill")}else if(ot){var Pt=!1,Ot=xt.fgcolor;!Ot&&Xt&&Xt.color&&(Ot=Xt.color,Pt=!0);var qt=Le(Ot,nt.i,Xt&&Xt.color||null),ir=Le(xt.bgcolor,nt.i,null),_r=xt.fgopacity,Bt=Le(xt.size,nt.i,8),gr=Le(xt.solidity,nt.i,.3);Pt=Pt||nt.mcc||u.isArrayOrTypedArray(xt.shape)||u.isArrayOrTypedArray(xt.path)||u.isArrayOrTypedArray(xt.bgcolor)||u.isArrayOrTypedArray(xt.fgcolor)||u.isArrayOrTypedArray(xt.size)||u.isArrayOrTypedArray(xt.solidity);var Ar=Ke.uid;Pt&&(Ar+="-"+nt.i),_.pattern(pt,"point",Ft,Ar,ot,Bt,gr,nt.mcc,xt.fillmode,ir,qt,_r)}else u.isArrayOrTypedArray(jr)?g.fill(pt,jr[nt.i]):g.fill(pt,jr);Nr&&g.stroke(pt,ta)}},_.makePointStyleFns=function(nt){var pt={},Ke=nt.marker;return pt.markerScale=_.tryColorscale(Ke,""),pt.lineScale=_.tryColorscale(Ke,"line"),p.traceIs(nt,"symbols")&&(pt.ms2mrc=O.isBubble(nt)?F(nt):function(){return(Ke.size||6)/2}),nt.selectedpoints&&u.extendFlat(pt,_.makeSelectedPointStyleFns(nt)),pt},_.makeSelectedPointStyleFns=function(nt){var pt={},Ke=nt.selected||{},gt=nt.unselected||{},Ft=nt.marker||{},Xt=Ke.marker||{},or=gt.marker||{},sr=Ft.opacity,dr=Xt.opacity,wr=or.opacity,xr=dr!==void 0,Pr=wr!==void 0;(u.isArrayOrTypedArray(sr)||xr||Pr)&&(pt.selectedOpacityFn=function(Le){var ot=Le.mo===void 0?Ft.opacity:Le.mo;return Le.selected?xr?dr:ot:Pr?wr:N*ot});var nr=Ft.color,jr=Xt.color,ta=or.color;(jr||ta)&&(pt.selectedColorFn=function(Le){var ot=Le.mcc||nr;return Le.selected?jr||ot:ta||ot});var Nr=Ft.size,Jr=Xt.size,vt=or.size,Mt=Jr!==void 0,xt=vt!==void 0;return p.traceIs(nt,"symbols")&&(Mt||xt)&&(pt.selectedSizeFn=function(Le){var ot=Le.mrc||Nr/2;return Le.selected?Mt?Jr/2:ot:xt?vt/2:ot}),pt},_.makeSelectedTextStyleFns=function(nt){var pt={},Ke=nt.selected||{},gt=nt.unselected||{},Ft=nt.textfont||{},Xt=Ke.textfont||{},or=gt.textfont||{},sr=Ft.color,dr=Xt.color,wr=or.color;return pt.selectedTextColorFn=function(xr){var Pr=xr.tc||sr;return xr.selected?dr||Pr:wr||(dr?Pr:g.addOpacity(Pr,N))},pt},_.selectedPointStyle=function(nt,pt){if(!(!nt.size()||!pt.selectedpoints)){var Ke=_.makeSelectedPointStyleFns(pt),gt=pt.marker||{},Ft=[];Ke.selectedOpacityFn&&Ft.push(function(Xt,or){Xt.style("opacity",Ke.selectedOpacityFn(or))}),Ke.selectedColorFn&&Ft.push(function(Xt,or){g.fill(Xt,Ke.selectedColorFn(or))}),Ke.selectedSizeFn&&Ft.push(function(Xt,or){var sr=or.mx||gt.symbol||0,dr=Ke.selectedSizeFn(or);Xt.attr("d",Q(_.symbolNumber(sr),dr,Wt(or,pt),oe(or,pt))),or.mrc2=dr}),Ft.length&&nt.each(function(Xt){for(var or=d.select(this),sr=0;sr<Ft.length;sr++)Ft[sr](or,Xt)})}},_.tryColorscale=function(nt,pt){var Ke=pt?u.nestedProperty(nt,pt).get():nt;if(Ke){var gt=Ke.color;if((Ke.colorscale||Ke._colorAx)&&u.isArrayOrTypedArray(gt))return w.makeColorScaleFuncFromTrace(Ke)}return u.identity};var ve={start:1,end:-1,middle:0,bottom:1,top:-1};function Me(nt,pt,Ke,gt,Ft){var Xt=d.select(nt.node().parentNode),or=pt.indexOf("top")!==-1?"top":pt.indexOf("bottom")!==-1?"bottom":"middle",sr=pt.indexOf("left")!==-1?"end":pt.indexOf("right")!==-1?"start":"middle",dr=gt?gt/.8+1:0,wr=(j.lineCount(nt)-1)*X+1,xr=ve[sr]*dr,Pr=Ke*.75+ve[or]*dr+(ve[or]-1)*wr*Ke/2;nt.attr("text-anchor",sr),Ft||Xt.attr("transform",s(xr,Pr))}function ke(nt,pt){var Ke=nt.ts||pt.textfont.size;return m(Ke)&&Ke>0?Ke:0}_.textPointStyle=function(nt,pt,Ke){if(nt.size()){var gt;if(pt.selectedpoints){var Ft=_.makeSelectedTextStyleFns(pt);gt=Ft.selectedTextColorFn}var Xt=pt.texttemplate,or=Ke._fullLayout;nt.each(function(sr){var dr=d.select(this),wr=Xt?u.extractOption(sr,pt,"txt","texttemplate"):u.extractOption(sr,pt,"tx","text");if(!wr&&wr!==0){dr.remove();return}if(Xt){var xr=pt._module.formatLabels,Pr=xr?xr(sr,pt,or):{},nr={};P(nr,pt,sr.i);var jr=pt._meta||{};wr=u.texttemplateString(wr,Pr,or._d3locale,nr,sr,jr)}var ta=sr.tp||pt.textposition,Nr=ke(sr,pt),Jr=gt?gt(sr):sr.tc||pt.textfont.color;dr.call(_.font,{family:sr.tf||pt.textfont.family,weight:sr.tw||pt.textfont.weight,style:sr.ty||pt.textfont.style,variant:sr.tv||pt.textfont.variant,textcase:sr.tC||pt.textfont.textcase,lineposition:sr.tE||pt.textfont.lineposition,shadow:sr.tS||pt.textfont.shadow,size:Nr,color:Jr}).text(wr).call(j.convertToTspans,Ke).call(Me,ta,Nr,sr.mrc)})}},_.selectedTextStyle=function(nt,pt){if(!(!nt.size()||!pt.selectedpoints)){var Ke=_.makeSelectedTextStyleFns(pt);nt.each(function(gt){var Ft=d.select(this),Xt=Ke.selectedTextColorFn(gt),or=gt.tp||pt.textposition,sr=ke(gt,pt);g.fill(Ft,Xt);var dr=p.traceIs(pt,"bar-like");Me(Ft,or,sr,gt.mrc2||gt.mrc,dr)})}};var le=.5;_.smoothopen=function(nt,pt){if(nt.length<3)return"M"+nt.join("L");var Ke="M"+nt[0],gt=[],Ft;for(Ft=1;Ft<nt.length-1;Ft++)gt.push(st(nt[Ft-1],nt[Ft],nt[Ft+1],pt));for(Ke+="Q"+gt[0][0]+" "+nt[1],Ft=2;Ft<nt.length-1;Ft++)Ke+="C"+gt[Ft-2][1]+" "+gt[Ft-1][0]+" "+nt[Ft];return Ke+="Q"+gt[nt.length-3][1]+" "+nt[nt.length-1],Ke},_.smoothclosed=function(nt,pt){if(nt.length<3)return"M"+nt.join("L")+"Z";var Ke="M"+nt[0],gt=nt.length-1,Ft=[st(nt[gt],nt[0],nt[1],pt)],Xt;for(Xt=1;Xt<gt;Xt++)Ft.push(st(nt[Xt-1],nt[Xt],nt[Xt+1],pt));for(Ft.push(st(nt[gt-1],nt[gt],nt[0],pt)),Xt=1;Xt<=gt;Xt++)Ke+="C"+Ft[Xt-1][1]+" "+Ft[Xt][0]+" "+nt[Xt];return Ke+="C"+Ft[gt][1]+" "+Ft[0][0]+" "+nt[0]+"Z",Ke};var De,Oe;function He(nt,pt,Ke){return Ke&&(nt=_e(nt)),pt?Ye(nt[1]):Be(nt[0])}function Be(nt){var pt=d.round(nt,2);return De=pt,pt}function Ye(nt){var pt=d.round(nt,2);return Oe=pt,pt}function st(nt,pt,Ke,gt){var Ft=nt[0]-pt[0],Xt=nt[1]-pt[1],or=Ke[0]-pt[0],sr=Ke[1]-pt[1],dr=Math.pow(Ft*Ft+Xt*Xt,le/2),wr=Math.pow(or*or+sr*sr,le/2),xr=(wr*wr*Ft-dr*dr*or)*gt,Pr=(wr*wr*Xt-dr*dr*sr)*gt,nr=3*wr*(dr+wr),jr=3*dr*(dr+wr);return[[Be(pt[0]+(nr&&xr/nr)),Ye(pt[1]+(nr&&Pr/nr))],[Be(pt[0]-(jr&&xr/jr)),Ye(pt[1]-(jr&&Pr/jr))]]}var it={hv:function(nt,pt,Ke){return"H"+Be(pt[0])+"V"+He(pt,1,Ke)},vh:function(nt,pt,Ke){return"V"+Ye(pt[1])+"H"+He(pt,0,Ke)},hvh:function(nt,pt,Ke){return"H"+Be((nt[0]+pt[0])/2)+"V"+Ye(pt[1])+"H"+He(pt,0,Ke)},vhv:function(nt,pt,Ke){return"V"+Ye((nt[1]+pt[1])/2)+"H"+Be(pt[0])+"V"+He(pt,1,Ke)}},yt=function(nt,pt,Ke){return"L"+He(pt,0,Ke)+","+He(pt,1,Ke)};_.steps=function(nt){var pt=it[nt]||yt;return function(Ke){for(var gt="M"+Be(Ke[0][0])+","+Ye(Ke[0][1]),Ft=Ke.length,Xt=1;Xt<Ft;Xt++)gt+=pt(Ke[Xt-1],Ke[Xt],Xt===Ft-1);return gt}};function _e(nt,pt){var Ke=nt.backoff,gt=nt.trace,Ft=nt.d,Xt=nt.i;if(Ke&&gt&&gt.marker&&gt.marker.angle%360===0&&gt.line&&gt.line.shape!=="spline"){var or=u.isArrayOrTypedArray(Ke),sr=nt,dr=pt?pt[0]:De||0,wr=pt?pt[1]:Oe||0,xr=sr[0],Pr=sr[1],nr=xr-dr,jr=Pr-wr,ta=Math.atan2(jr,nr),Nr=or?Ke[Xt]:Ke;if(Nr==="auto"){var Jr=sr.i;gt.type==="scatter"&&Jr--;var vt=sr.marker,Mt=vt.symbol;u.isArrayOrTypedArray(Mt)&&(Mt=Mt[Jr]);var xt=vt.size;u.isArrayOrTypedArray(xt)&&(xt=xt[Jr]),Nr=vt?_.symbolBackOffs[_.symbolNumber(Mt)]*xt:0,Nr+=_.getMarkerStandoff(Ft[Jr],gt)||0}var Le=xr-Nr*Math.cos(ta),ot=Pr-Nr*Math.sin(ta);(Le<=xr&&Le>=dr||Le>=xr&&Le<=dr)&&(ot<=Pr&&ot>=wr||ot>=Pr&&ot<=wr)&&(nt=[Le,ot])}return nt}_.applyBackoff=_e,_.makeTester=function(){var nt=u.ensureSingleById(d.select("body"),"svg","js-plotly-tester",function(Ke){Ke.attr(b.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),pt=u.ensureSingle(nt,"path","js-reference-point",function(Ke){Ke.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});_.tester=nt,_.testref=pt},_.savedBBoxes={};var Ee=0,de=1e4;_.bBox=function(nt,pt,Ke){Ke||(Ke=we(nt));var gt;if(Ke){if(gt=_.savedBBoxes[Ke],gt)return u.extendFlat({},gt)}else if(nt.childNodes.length===1){var Ft=nt.childNodes[0];if(Ke=we(Ft),Ke){var Xt=+Ft.getAttribute("x")||0,or=+Ft.getAttribute("y")||0,sr=Ft.getAttribute("transform");if(!sr){var dr=_.bBox(Ft,!1,Ke);return Xt&&(dr.left+=Xt,dr.right+=Xt),or&&(dr.top+=or,dr.bottom+=or),dr}if(Ke+="~"+Xt+"~"+or+"~"+sr,gt=_.savedBBoxes[Ke],gt)return u.extendFlat({},gt)}}var wr,xr;pt?wr=nt:(xr=_.tester.node(),wr=nt.cloneNode(!0),xr.appendChild(wr)),d.select(wr).attr("transform",null).call(j.positionText,0,0);var Pr=wr.getBoundingClientRect(),nr=_.testref.node().getBoundingClientRect();pt||xr.removeChild(wr);var jr={height:Pr.height,width:Pr.width,left:Pr.left-nr.left,top:Pr.top-nr.top,right:Pr.right-nr.left,bottom:Pr.bottom-nr.top};return Ee>=de&&(_.savedBBoxes={},Ee=0),Ke&&(_.savedBBoxes[Ke]=jr),Ee++,u.extendFlat({},jr)};function we(nt){var pt=nt.getAttribute("data-unformatted");if(pt!==null)return pt+nt.getAttribute("data-math")+nt.getAttribute("text-anchor")+nt.getAttribute("style")}_.setClipUrl=function(nt,pt,Ke){nt.attr("clip-path",je(pt,Ke))};function je(nt,pt){if(!nt)return null;var Ke=pt._context,gt=Ke._exportedPlot?"":Ke._baseUrl||"";return gt?"url('"+gt+"#"+nt+"')":"url(#"+nt+")"}_.getTranslate=function(nt){var pt=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Ke=nt.attr?"attr":"getAttribute",gt=nt[Ke]("transform")||"",Ft=gt.replace(pt,function(Xt,or,sr){return[or,sr].join(" ")}).split(" ");return{x:+Ft[0]||0,y:+Ft[1]||0}},_.setTranslate=function(nt,pt,Ke){var gt=/(\btranslate\(.*?\);?)/,Ft=nt.attr?"attr":"getAttribute",Xt=nt.attr?"attr":"setAttribute",or=nt[Ft]("transform")||"";return pt=pt||0,Ke=Ke||0,or=or.replace(gt,"").trim(),or+=s(pt,Ke),or=or.trim(),nt[Xt]("transform",or),or},_.getScale=function(nt){var pt=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Ke=nt.attr?"attr":"getAttribute",gt=nt[Ke]("transform")||"",Ft=gt.replace(pt,function(Xt,or,sr){return[or,sr].join(" ")}).split(" ");return{x:+Ft[0]||1,y:+Ft[1]||1}},_.setScale=function(nt,pt,Ke){var gt=/(\bscale\(.*?\);?)/,Ft=nt.attr?"attr":"getAttribute",Xt=nt.attr?"attr":"setAttribute",or=nt[Ft]("transform")||"";return pt=pt||1,Ke=Ke||1,or=or.replace(gt,"").trim(),or+="scale("+pt+","+Ke+")",or=or.trim(),nt[Xt]("transform",or),or};var Ae=/\s*sc.*/;_.setPointGroupScale=function(nt,pt,Ke){if(pt=pt||1,Ke=Ke||1,!!nt){var gt=pt===1&&Ke===1?"":"scale("+pt+","+Ke+")";nt.each(function(){var Ft=(this.getAttribute("transform")||"").replace(Ae,"");Ft+=gt,Ft=Ft.trim(),this.setAttribute("transform",Ft)})}};var $=/translate\([^)]*\)\s*$/;_.setTextPointsScale=function(nt,pt,Ke){nt&&nt.each(function(){var gt,Ft=d.select(this),Xt=Ft.select("text");if(Xt.node()){var or=parseFloat(Xt.attr("x")||0),sr=parseFloat(Xt.attr("y")||0),dr=(Ft.attr("transform")||"").match($);pt===1&&Ke===1?gt=[]:gt=[s(or,sr),"scale("+pt+","+Ke+")",s(-or,-sr)],dr&&gt.push(dr),Ft.attr("transform",gt.join(""))}})};function oe(nt,pt){var Ke;return nt&&(Ke=nt.mf),Ke===void 0&&(Ke=pt.marker&&pt.marker.standoff||0),!pt._geo&&!pt._xA?-Ke:Ke}_.getMarkerStandoff=oe;var ge=Math.atan2,Te=Math.cos,Ue=Math.sin;function Ze(nt,pt){var Ke=pt[0],gt=pt[1];return[Ke*Te(nt)-gt*Ue(nt),Ke*Ue(nt)+gt*Te(nt)]}var Je,ft,wt,Ct,Kt,$t;function Wt(nt,pt){var Ke=nt.ma;Ke===void 0&&(Ke=pt.marker.angle,(!Ke||u.isArrayOrTypedArray(Ke))&&(Ke=0));var gt,Ft,Xt=pt.marker.angleref;if(Xt==="previous"||Xt==="north"){if(pt._geo){var or=pt._geo.project(nt.lonlat);gt=or[0],Ft=or[1]}else{var sr=pt._xA,dr=pt._yA;if(sr&&dr)gt=sr.c2p(nt.x),Ft=dr.c2p(nt.y);else return 90}if(pt._geo){var wr=nt.lonlat[0],xr=nt.lonlat[1],Pr=pt._geo.project([wr,xr+1e-5]),nr=pt._geo.project([wr+1e-5,xr]),jr=ge(nr[1]-Ft,nr[0]-gt),ta=ge(Pr[1]-Ft,Pr[0]-gt),Nr;if(Xt==="north")Nr=Ke/180*Math.PI;else if(Xt==="previous"){var Jr=wr/180*Math.PI,vt=xr/180*Math.PI,Mt=Je/180*Math.PI,xt=ft/180*Math.PI,Le=Mt-Jr,ot=Te(xt)*Ue(Le),ct=Ue(xt)*Te(vt)-Te(xt)*Ue(vt)*Te(Le);Nr=-ge(ot,ct)-Math.PI,Je=wr,ft=xr}var ut=Ze(jr,[Te(Nr),0]),Pt=Ze(ta,[Ue(Nr),0]);Ke=ge(ut[1]+Pt[1],ut[0]+Pt[0])/Math.PI*180,Xt==="previous"&&!($t===pt.uid&&nt.i===Kt+1)&&(Ke=null)}if(Xt==="previous"&&!pt._geo)if($t===pt.uid&&nt.i===Kt+1&&m(gt)&&m(Ft)){var Ot=gt-wt,qt=Ft-Ct,ir=pt.line&&pt.line.shape||"",_r=ir.slice(ir.length-1);_r==="h"&&(qt=0),_r==="v"&&(Ot=0),Ke+=ge(qt,Ot)/Math.PI*180+90}else Ke=null}return wt=gt,Ct=Ft,Kt=nt.i,$t=pt.uid,Ke}_.getMarkerAngle=Wt}}),zl=n({"src/components/titles/index.js"(ce,fe){var d=k(),u=B(),c=Di(),m=hr(),v=pa(),p=v.strTranslate,g=ni(),w=Ve(),s=Ui(),j=Ie(),b=xi().OPPOSITE_SIDE,z=/ [XY][0-9]* /,X=1.6,N=1.6;function O(F,P,_){var R=F._fullLayout,H=_.propContainer,te=_.propName,J=_.placeholder,ye=_.traceIndex,se=_.avoid||{},he=_.attributes,pe=_.transform,Q=_.containerGroup,ue=1,me=H.title,be=(me&&me.text?me.text:"").trim(),ve=!1,Me=me&&me.font?me.font:{},ke=Me.family,le=Me.size,De=Me.color,Oe=Me.weight,He=Me.style,Be=Me.variant,Ye=Me.textcase,st=Me.lineposition,it=Me.shadow,yt=_.subtitlePropName,_e=!!yt,Ee=_.subtitlePlaceholder,de=(H.title||{}).subtitle||{text:"",font:{}},we=de.text.trim(),je=!1,Ae=1,$=de.font,oe=$.family,ge=$.size,Te=$.color,Ue=$.weight,Ze=$.style,Je=$.variant,ft=$.textcase,wt=$.lineposition,Ct=$.shadow,Kt;te==="title.text"?Kt="titleText":te.indexOf("axis")!==-1?Kt="axisTitleText":te.indexOf("colorbar")!==-1&&(Kt="colorbarTitleText");var $t=F._context.edits[Kt];function Wt(nr,jr){return nr===void 0||jr===void 0?!1:nr.replace(z," % ")===jr.replace(z," % ")}be===""?ue=0:Wt(be,J)&&($t||(be=""),ue=.2,ve=!0),_e&&(we===""?Ae=0:Wt(we,Ee)&&($t||(we=""),Ae=.2,je=!0)),_._meta?be=v.templateString(be,_._meta):R._meta&&(be=v.templateString(be,R._meta));var nt=be||we||$t,pt;Q||(Q=v.ensureSingle(R._infolayer,"g","g-"+P),pt=R._hColorbarMoveTitle);var Ke=Q.selectAll("text."+P).data(nt?[0]:[]);Ke.enter().append("text"),Ke.text(be).attr("class",P),Ke.exit().remove();var gt=null,Ft=P+"-subtitle",Xt=we||$t;if(_e&&Xt&&(gt=Q.selectAll("text."+Ft).data(Xt?[0]:[]),gt.enter().append("text"),gt.text(we).attr("class",Ft),gt.exit().remove()),!nt)return Q;function or(nr,jr){v.syncOrAsync([sr,dr],{title:nr,subtitle:jr})}function sr(nr){var jr=nr.title,ta=nr.subtitle,Nr;!pe&&pt&&(pe={}),pe?(Nr="",pe.rotate&&(Nr+="rotate("+[pe.rotate,he.x,he.y]+")"),(pe.offset||pt)&&(Nr+=p(0,(pe.offset||0)-(pt||0)))):Nr=null,jr.attr("transform",Nr);function Jr(ct){if(ct){var ut=d.select(ct.node().parentNode).select("."+Ft);if(!ut.empty()){var Pt=ct.node().getBBox();if(Pt.height){var Ot=Pt.y+Pt.height+X*ge;ut.attr("y",Ot)}}}}if(jr.style("opacity",ue*w.opacity(De)).call(g.font,{color:w.rgb(De),size:d.round(le,2),family:ke,weight:Oe,style:He,variant:Be,textcase:Ye,shadow:it,lineposition:st}).attr(he).call(s.convertToTspans,F,Jr),ta){var vt=Q.select("."+P+"-math-group"),Mt=jr.node().getBBox(),xt=vt.node()?vt.node().getBBox():void 0,Le=xt?xt.y+xt.height+X*ge:Mt.y+Mt.height+N*ge,ot=v.extendFlat({},he,{y:Le});ta.attr("transform",Nr),ta.style("opacity",Ae*w.opacity(Te)).call(g.font,{color:w.rgb(Te),size:d.round(ge,2),family:oe,weight:Ue,style:Ze,variant:Je,textcase:ft,shadow:Ct,lineposition:wt}).attr(ot).call(s.convertToTspans,F)}return c.previousPromises(F)}function dr(nr){var jr=nr.title,ta=d.select(jr.node().parentNode);if(se&&se.selection&&se.side&&be){ta.attr("transform",null);var Nr=b[se.side],Jr=se.side==="left"||se.side==="top"?-1:1,vt=u(se.pad)?se.pad:2,Mt=g.bBox(ta.node()),xt={t:0,b:0,l:0,r:0},Le=F._fullLayout._reservedMargin;for(var ot in Le)for(var ct in Le[ot]){var ut=Le[ot][ct];xt[ct]=Math.max(xt[ct],ut)}var Pt={left:xt.l,top:xt.t,right:R.width-xt.r,bottom:R.height-xt.b},Ot=se.maxShift||Jr*(Pt[se.side]-Mt[se.side]),qt=0;if(Ot<0)qt=Ot;else{var ir=se.offsetLeft||0,_r=se.offsetTop||0;Mt.left-=ir,Mt.right-=ir,Mt.top-=_r,Mt.bottom-=_r,se.selection.each(function(){var gr=g.bBox(this);v.bBoxIntersect(Mt,gr,vt)&&(qt=Math.max(qt,Jr*(gr[se.side]-Mt[Nr])+vt))}),qt=Math.min(Ot,qt),H._titleScoot=Math.abs(qt)}if(qt>0||Ot<0){var Bt={left:[-qt,0],right:[qt,0],top:[0,-qt],bottom:[0,qt]}[se.side];ta.attr("transform",p(Bt[0],Bt[1]))}}}Ke.call(or,gt);function wr(nr,jr){nr.text(jr).on("mouseover.opacity",function(){d.select(this).transition().duration(j.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){d.select(this).transition().duration(j.HIDE_PLACEHOLDER).style("opacity",0)})}if($t&&(be?Ke.on(".opacity",null):(wr(Ke,J),ve=!0),Ke.call(s.makeEditable,{gd:F}).on("edit",function(nr){ye!==void 0?m.call("_guiRestyle",F,te,nr,ye):m.call("_guiRelayout",F,te,nr)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(or)}).on("input",function(nr){this.text(nr||" ").call(s.positionText,he.x,he.y)}),_e)){if(_e&&!be){var xr=Ke.node().getBBox(),Pr=xr.y+xr.height+N*ge;gt.attr("y",Pr)}we?gt.on(".opacity",null):(wr(gt,Ee),je=!0),gt.call(s.makeEditable,{gd:F}).on("edit",function(nr){m.call("_guiRelayout",F,"title.subtitle.text",nr)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(or)}).on("input",function(nr){this.text(nr||" ").call(s.positionText,gt.attr("x"),gt.attr("y"))})}return Ke.classed("js-placeholder",ve),gt&&gt.classed("js-placeholder",je),Q}fe.exports={draw:O,SUBTITLE_PADDING_EM:N,SUBTITLE_PADDING_MATHJAX_EM:X}}}),$s=n({"src/plots/cartesian/set_convert.js"(ce,fe){var d=k(),u=E().utcFormat,c=pa(),m=c.numberFormat,v=B(),p=c.cleanNumber,g=c.ms2DateTime,w=c.dateTime2ms,s=c.ensureNumber,j=c.isArrayOrTypedArray,b=W(),z=b.FP_SAFE,X=b.BADNUM,N=b.LOG_CLIP,O=b.ONEWEEK,F=b.ONEDAY,P=b.ONEHOUR,_=b.ONEMIN,R=b.ONESEC,H=di(),te=ui(),J=te.HOUR_PATTERN,ye=te.WEEKDAY_PATTERN;function se(pe){return Math.pow(10,pe)}function he(pe){return pe!=null}fe.exports=function(Q,ue){ue=ue||{};var me=Q._id||"x",be=me.charAt(0);function ve(we,je){if(we>0)return Math.log(we)/Math.LN10;if(we<=0&&je&&Q.range&&Q.range.length===2){var Ae=Q.range[0],$=Q.range[1];return .5*(Ae+$-2*N*Math.abs(Ae-$))}else return X}function Me(we,je,Ae,$){if(($||{}).msUTC&&v(we))return+we;var oe=w(we,Ae||Q.calendar);if(oe===X)if(v(we)){we=+we;var ge=Math.floor(c.mod(we+.05,1)*10),Te=Math.round(we-ge/10);oe=w(new Date(Te))+ge/10}else return X;return oe}function ke(we,je,Ae){return g(we,je,Ae||Q.calendar)}function le(we){return Q._categories[Math.round(we)]}function De(we){if(he(we)){if(Q._categoriesMap===void 0&&(Q._categoriesMap={}),Q._categoriesMap[we]!==void 0)return Q._categoriesMap[we];Q._categories.push(typeof we=="number"?String(we):we);var je=Q._categories.length-1;return Q._categoriesMap[we]=je,je}return X}function Oe(we,je){for(var Ae=new Array(je),$=0;$<je;$++){var oe=(we[0]||[])[$],ge=(we[1]||[])[$];Ae[$]=He([oe,ge])}return Ae}function He(we){if(Q._categoriesMap)return Q._categoriesMap[we]}function Be(we){var je=He(we);if(je!==void 0)return je;if(v(we))return+we}function Ye(we){return v(we)?+we:He(we)}function st(we,je,Ae){return d.round(Ae+je*we,2)}function it(we,je,Ae){return(we-Ae)/je}var yt=function(je){return v(je)?st(je,Q._m,Q._b):X},_e=function(we){return it(we,Q._m,Q._b)};if(Q.rangebreaks){var Ee=be==="y";yt=function(we){if(!v(we))return X;var je=Q._rangebreaks.length;if(!je)return st(we,Q._m,Q._b);var Ae=Ee;Q.range[0]>Q.range[1]&&(Ae=!Ae);for(var $=Ae?-1:1,oe=$*we,ge=0,Te=0;Te<je;Te++){var Ue=$*Q._rangebreaks[Te].min,Ze=$*Q._rangebreaks[Te].max;if(oe<Ue)break;if(oe>Ze)ge=Te+1;else{ge=oe<(Ue+Ze)/2?Te:Te+1;break}}var Je=Q._B[ge]||0;return isFinite(Je)?st(we,Q._m2,Je):0},_e=function(we){var je=Q._rangebreaks.length;if(!je)return it(we,Q._m,Q._b);for(var Ae=0,$=0;$<je&&!(we<Q._rangebreaks[$].pmin);$++)we>Q._rangebreaks[$].pmax&&(Ae=$+1);return it(we,Q._m2,Q._B[Ae])}}Q.c2l=Q.type==="log"?ve:s,Q.l2c=Q.type==="log"?se:s,Q.l2p=yt,Q.p2l=_e,Q.c2p=Q.type==="log"?function(we,je){return yt(ve(we,je))}:yt,Q.p2c=Q.type==="log"?function(we){return se(_e(we))}:_e,["linear","-"].indexOf(Q.type)!==-1?(Q.d2r=Q.r2d=Q.d2c=Q.r2c=Q.d2l=Q.r2l=p,Q.c2d=Q.c2r=Q.l2d=Q.l2r=s,Q.d2p=Q.r2p=function(we){return Q.l2p(p(we))},Q.p2d=Q.p2r=_e,Q.cleanPos=s):Q.type==="log"?(Q.d2r=Q.d2l=function(we,je){return ve(p(we),je)},Q.r2d=Q.r2c=function(we){return se(p(we))},Q.d2c=Q.r2l=p,Q.c2d=Q.l2r=s,Q.c2r=ve,Q.l2d=se,Q.d2p=function(we,je){return Q.l2p(Q.d2r(we,je))},Q.p2d=function(we){return se(_e(we))},Q.r2p=function(we){return Q.l2p(p(we))},Q.p2r=_e,Q.cleanPos=s):Q.type==="date"?(Q.d2r=Q.r2d=c.identity,Q.d2c=Q.r2c=Q.d2l=Q.r2l=Me,Q.c2d=Q.c2r=Q.l2d=Q.l2r=ke,Q.d2p=Q.r2p=function(we,je,Ae){return Q.l2p(Me(we,0,Ae))},Q.p2d=Q.p2r=function(we,je,Ae){return ke(_e(we),je,Ae)},Q.cleanPos=function(we){return c.cleanDate(we,X,Q.calendar)}):Q.type==="category"?(Q.d2c=Q.d2l=De,Q.r2d=Q.c2d=Q.l2d=le,Q.d2r=Q.d2l_noadd=Be,Q.r2c=function(we){var je=Ye(we);return je!==void 0?je:Q.fraction2r(.5)},Q.l2r=Q.c2r=s,Q.r2l=Ye,Q.d2p=function(we){return Q.l2p(Q.r2c(we))},Q.p2d=function(we){return le(_e(we))},Q.r2p=Q.d2p,Q.p2r=_e,Q.cleanPos=function(we){return typeof we=="string"&&we!==""?we:s(we)}):Q.type==="multicategory"&&(Q.r2d=Q.c2d=Q.l2d=le,Q.d2r=Q.d2l_noadd=Be,Q.r2c=function(we){var je=Be(we);return je!==void 0?je:Q.fraction2r(.5)},Q.r2c_just_indices=He,Q.l2r=Q.c2r=s,Q.r2l=Be,Q.d2p=function(we){return Q.l2p(Q.r2c(we))},Q.p2d=function(we){return le(_e(we))},Q.r2p=Q.d2p,Q.p2r=_e,Q.cleanPos=function(we){return Array.isArray(we)||typeof we=="string"&&we!==""?we:s(we)},Q.setupMultiCategory=function(we){var je=Q._traceIndices,Ae,$,oe=Q._matchGroup;if(oe&&Q._categories.length===0){for(var ge in oe)if(ge!==me){var Te=ue[H.id2name(ge)];je=je.concat(Te._traceIndices)}}var Ue=[[0,{}],[0,{}]],Ze=[];for(Ae=0;Ae<je.length;Ae++){var Je=we[je[Ae]];if(be in Je){var ft=Je[be],wt=Je._length||c.minRowLength(ft);if(j(ft[0])&&j(ft[1]))for($=0;$<wt;$++){var Ct=ft[0][$],Kt=ft[1][$];he(Ct)&&he(Kt)&&(Ze.push([Ct,Kt]),Ct in Ue[0][1]||(Ue[0][1][Ct]=Ue[0][0]++),Kt in Ue[1][1]||(Ue[1][1][Kt]=Ue[1][0]++))}}}for(Ze.sort(function($t,Wt){var nt=Ue[0][1],pt=nt[$t[0]]-nt[Wt[0]];if(pt)return pt;var Ke=Ue[1][1];return Ke[$t[1]]-Ke[Wt[1]]}),Ae=0;Ae<Ze.length;Ae++)De(Ze[Ae])}),Q.fraction2r=function(we){var je=Q.r2l(Q.range[0]),Ae=Q.r2l(Q.range[1]);return Q.l2r(je+we*(Ae-je))},Q.r2fraction=function(we){var je=Q.r2l(Q.range[0]),Ae=Q.r2l(Q.range[1]);return(Q.r2l(we)-je)/(Ae-je)},Q.limitRange=function(we){var je=Q.minallowed,Ae=Q.maxallowed;if(!(je===void 0&&Ae===void 0)){we||(we="range");var $=c.nestedProperty(Q,we).get(),oe=c.simpleMap($,Q.r2l),ge=oe[1]<oe[0];ge&&oe.reverse();var Te=c.simpleMap([je,Ae],Q.r2l);if(je!==void 0&&oe[0]<Te[0]&&($[ge?1:0]=je),Ae!==void 0&&oe[1]>Te[1]&&($[ge?0:1]=Ae),$[0]===$[1]){var Ue=Q.l2r(je),Ze=Q.l2r(Ae);if(je!==void 0){var Je=Ue+1;Ae!==void 0&&(Je=Math.min(Je,Ze)),$[ge?1:0]=Je}if(Ae!==void 0){var ft=Ze+1;je!==void 0&&(ft=Math.max(ft,Ue)),$[ge?0:1]=ft}}}},Q.cleanRange=function(we,je){Q._cleanRange(we,je),Q.limitRange(we)},Q._cleanRange=function(we,je){je||(je={}),we||(we="range");var Ae=c.nestedProperty(Q,we).get(),$,oe;if(Q.type==="date"?oe=c.dfltRange(Q.calendar):be==="y"?oe=te.DFLTRANGEY:Q._name==="realaxis"?oe=[0,1]:oe=je.dfltRange||te.DFLTRANGEX,oe=oe.slice(),(Q.rangemode==="tozero"||Q.rangemode==="nonnegative")&&(oe[0]=0),!Ae||Ae.length!==2){c.nestedProperty(Q,we).set(oe);return}var ge=Ae[0]===null,Te=Ae[1]===null;for(Q.type==="date"&&!Q.autorange&&(Ae[0]=c.cleanDate(Ae[0],X,Q.calendar),Ae[1]=c.cleanDate(Ae[1],X,Q.calendar)),$=0;$<2;$++)if(Q.type==="date"){if(!c.isDateTime(Ae[$],Q.calendar)){Q[we]=oe;break}if(Q.r2l(Ae[0])===Q.r2l(Ae[1])){var Ue=c.constrain(Q.r2l(Ae[0]),c.MIN_MS+1e3,c.MAX_MS-1e3);Ae[0]=Q.l2r(Ue-1e3),Ae[1]=Q.l2r(Ue+1e3);break}}else{if(!v(Ae[$]))if(!(ge||Te)&&v(Ae[1-$]))Ae[$]=Ae[1-$]*($?10:.1);else{Q[we]=oe;break}if(Ae[$]<-z?Ae[$]=-z:Ae[$]>z&&(Ae[$]=z),Ae[0]===Ae[1]){var Ze=Math.max(1,Math.abs(Ae[0]*1e-6));Ae[0]-=Ze,Ae[1]+=Ze}}},Q.setScale=function(we){var je=ue._size;if(Q.overlaying){var Ae=H.getFromId({_fullLayout:ue},Q.overlaying);Q.domain=Ae.domain}var $=we&&Q._r?"_r":"range",oe=Q.calendar;Q.cleanRange($);var ge=Q.r2l(Q[$][0],oe),Te=Q.r2l(Q[$][1],oe),Ue=be==="y";if(Ue?(Q._offset=je.t+(1-Q.domain[1])*je.h,Q._length=je.h*(Q.domain[1]-Q.domain[0]),Q._m=Q._length/(ge-Te),Q._b=-Q._m*Te):(Q._offset=je.l+Q.domain[0]*je.w,Q._length=je.w*(Q.domain[1]-Q.domain[0]),Q._m=Q._length/(Te-ge),Q._b=-Q._m*ge),Q._rangebreaks=[],Q._lBreaks=0,Q._m2=0,Q._B=[],Q.rangebreaks){var Ze,Je;if(Q._rangebreaks=Q.locateBreaks(Math.min(ge,Te),Math.max(ge,Te)),Q._rangebreaks.length){for(Ze=0;Ze<Q._rangebreaks.length;Ze++)Je=Q._rangebreaks[Ze],Q._lBreaks+=Math.abs(Je.max-Je.min);var ft=Ue;ge>Te&&(ft=!ft),ft&&Q._rangebreaks.reverse();var wt=ft?-1:1;for(Q._m2=wt*Q._length/(Math.abs(Te-ge)-Q._lBreaks),Q._B.push(-Q._m2*(Ue?Te:ge)),Ze=0;Ze<Q._rangebreaks.length;Ze++)Je=Q._rangebreaks[Ze],Q._B.push(Q._B[Q._B.length-1]-wt*Q._m2*(Je.max-Je.min));for(Ze=0;Ze<Q._rangebreaks.length;Ze++)Je=Q._rangebreaks[Ze],Je.pmin=yt(Je.min),Je.pmax=yt(Je.max)}}if(!isFinite(Q._m)||!isFinite(Q._b)||Q._length<0)throw ue._replotting=!1,new Error("Something went wrong with axis scaling")},Q.maskBreaks=function(we){var je=Q.rangebreaks||[],Ae,$,oe,ge,Te;je._cachedPatterns||(je._cachedPatterns=je.map(function(nt){return nt.enabled&&nt.bounds?c.simpleMap(nt.bounds,nt.pattern?p:Q.d2c):null})),je._cachedValues||(je._cachedValues=je.map(function(nt){return nt.enabled&&nt.values?c.simpleMap(nt.values,Q.d2c).sort(c.sorterAsc):null}));for(var Ue=0;Ue<je.length;Ue++){var Ze=je[Ue];if(Ze.enabled){if(Ze.bounds){var Je=Ze.pattern;switch(Ae=je._cachedPatterns[Ue],$=Ae[0],oe=Ae[1],Je){case ye:Te=new Date(we),ge=Te.getUTCDay(),$>oe&&(oe+=7,ge<$&&(ge+=7));break;case J:Te=new Date(we);var ft=Te.getUTCHours(),wt=Te.getUTCMinutes(),Ct=Te.getUTCSeconds(),Kt=Te.getUTCMilliseconds();ge=ft+(wt/60+Ct/3600+Kt/36e5),$>oe&&(oe+=24,ge<$&&(ge+=24));break;case"":ge=we;break}if(ge>=$&&ge<oe)return X}else for(var $t=je._cachedValues[Ue],Wt=0;Wt<$t.length;Wt++)if($=$t[Wt],oe=$+Ze.dvalue,we>=$&&we<oe)return X}}return we},Q.locateBreaks=function(we,je){var Ae,$,oe,ge,Te=[];if(!Q.rangebreaks)return Te;var Ue=Q.rangebreaks.slice().sort(function(Ke,gt){return Ke.pattern===ye&&gt.pattern===J?-1:gt.pattern===ye&&Ke.pattern===J?1:0}),Ze=function(Ke,gt){if(Ke=c.constrain(Ke,we,je),gt=c.constrain(gt,we,je),Ke!==gt){for(var Ft=!0,Xt=0;Xt<Te.length;Xt++){var or=Te[Xt];Ke<or.max&&gt>=or.min&&(Ke<or.min&&(or.min=Ke),gt>or.max&&(or.max=gt),Ft=!1)}Ft&&Te.push({min:Ke,max:gt})}};for(Ae=0;Ae<Ue.length;Ae++){var Je=Ue[Ae];if(Je.enabled)if(Je.bounds){var ft=we,wt=je;Je.pattern&&(ft=Math.floor(ft)),$=c.simpleMap(Je.bounds,Je.pattern?p:Q.r2l),oe=$[0],ge=$[1];var Ct=new Date(ft),Kt,$t;switch(Je.pattern){case ye:$t=O,Kt=((ge<oe?7:0)+(ge-oe))*F,ft+=oe*F-(Ct.getUTCDay()*F+Ct.getUTCHours()*P+Ct.getUTCMinutes()*_+Ct.getUTCSeconds()*R+Ct.getUTCMilliseconds());break;case J:$t=F,Kt=((ge<oe?24:0)+(ge-oe))*P,ft+=oe*P-(Ct.getUTCHours()*P+Ct.getUTCMinutes()*_+Ct.getUTCSeconds()*R+Ct.getUTCMilliseconds());break;default:ft=Math.min($[0],$[1]),wt=Math.max($[0],$[1]),$t=wt-ft,Kt=$t}for(var Wt=ft;Wt<wt;Wt+=$t)Ze(Wt,Wt+Kt)}else for(var nt=c.simpleMap(Je.values,Q.d2c),pt=0;pt<nt.length;pt++)oe=nt[pt],ge=oe+Je.dvalue,Ze(oe,ge)}return Te.sort(function(Ke,gt){return Ke.min-gt.min}),Te},Q.makeCalcdata=function(we,je,Ae){var $,oe,ge,Te,Ue=Q.type,Ze=Ue==="date"&&we[je+"calendar"];if(je in we){if($=we[je],Te=we._length||c.minRowLength($),c.isTypedArray($)&&(Ue==="linear"||Ue==="log")){if(Te===$.length)return $;if($.subarray)return $.subarray(0,Te)}if(Ue==="multicategory")return Oe($,Te);for(oe=new Array(Te),ge=0;ge<Te;ge++)oe[ge]=Q.d2c($[ge],0,Ze,Ae)}else{var Je=je+"0"in we?Q.d2c(we[je+"0"],0,Ze):0,ft=we["d"+je]?Number(we["d"+je]):1;for($=we[{x:"y",y:"x"}[je]],Te=we._length||$.length,oe=new Array(Te),ge=0;ge<Te;ge++)oe[ge]=Je+ge*ft}if(Q.rangebreaks)for(ge=0;ge<Te;ge++)oe[ge]=Q.maskBreaks(oe[ge]);return oe},Q.isValidRange=function(we,je){return Array.isArray(we)&&we.length===2&&(je&&we[0]===null||v(Q.r2l(we[0])))&&(je&&we[1]===null||v(Q.r2l(we[1])))},Q.getAutorangeDflt=function(we,je){var Ae=!Q.isValidRange(we,"nullOk");return Ae&&je&&je.reverseDflt?Ae="reversed":we&&(we[0]===null&&we[1]===null?Ae=!0:we[0]===null&&we[1]!==null?Ae="min":we[0]!==null&&we[1]===null&&(Ae="max")),Ae},Q.isReversed=function(){var we=Q.autorange;return we==="reversed"||we==="min reversed"||we==="max reversed"},Q.isPtWithinRange=function(we,je){var Ae=Q.c2l(we[be],null,je),$=Q.r2l(Q.range[0]),oe=Q.r2l(Q.range[1]);return $<oe?$<=Ae&&Ae<=oe:oe<=Ae&&Ae<=$},Q._emptyCategories=function(){Q._categories=[],Q._categoriesMap={}},Q.clearCalc=function(){var we=Q._matchGroup;if(we){var je=null,Ae=null;for(var $ in we){var oe=ue[H.id2name($)];if(oe._categories){je=oe._categories,Ae=oe._categoriesMap;break}}je&&Ae?(Q._categories=je,Q._categoriesMap=Ae):Q._emptyCategories()}else Q._emptyCategories();if(Q._initialCategories)for(var ge=0;ge<Q._initialCategories.length;ge++)De(Q._initialCategories[ge])},Q.sortByInitialCategories=function(){var we=[];if(Q._emptyCategories(),Q._initialCategories)for(var je=0;je<Q._initialCategories.length;je++)De(Q._initialCategories[je]);we=we.concat(Q._traceIndices);var Ae=Q._matchGroup;for(var $ in Ae)if(me!==$){var oe=ue[H.id2name($)];oe._categories=Q._categories,oe._categoriesMap=Q._categoriesMap,we=we.concat(oe._traceIndices)}return we};var de=ue._d3locale;Q.type==="date"&&(Q._dateFormat=de?de.timeFormat:u,Q._extraFormat=ue._extraFormat),Q._separators=ue.separators,Q._numFormat=de?de.numberFormat:m,delete Q._minDtick,delete Q._forceTick0}}}),dl=n({"src/plots/cartesian/axis_autotype.js"(ce,fe){var d=B(),u=pa(),c=W().BADNUM,m=u.isArrayOrTypedArray,v=u.isDateTime,p=u.cleanNumber,g=Math.round;fe.exports=function(O,F,P){var _=O,R=P.noMultiCategory;if(m(_)&&!_.length)return"-";if(!R&&X(_))return"multicategory";if(R&&Array.isArray(_[0])){for(var H=[],te=0;te<_.length;te++)if(m(_[te]))for(var J=0;J<_[te].length;J++)H.push(_[te][J]);_=H}if(j(_,F))return"date";var ye=P.autotypenumbers!=="strict";return z(_,ye)?"category":s(_,ye)?"linear":"-"};function w(N,O){return O?d(N):typeof N=="number"}function s(N,O){for(var F=N.length,P=0;P<F;P++)if(w(N[P],O))return!0;return!1}function j(N,O){for(var F=N.length,P=b(F),_=0,R=0,H={},te=0;te<F;te+=P){var J=g(te),ye=N[J],se=String(ye);H[se]||(H[se]=1,v(ye,O)&&_++,d(ye)&&R++)}return _>R*2}function b(N){return Math.max(1,(N-1)/1e3)}function z(N,O){for(var F=N.length,P=b(F),_=0,R=0,H={},te=0;te<F;te+=P){var J=g(te),ye=N[J],se=String(ye);if(!H[se]){H[se]=1;var he=typeof ye;he==="boolean"?R++:(O?p(ye)!==c:he==="number")?_++:he==="string"&&R++}}return R>_*2}function X(N){return m(N[0])&&m(N[1])}}}),Io=n({"src/plots/cartesian/autorange.js"(ce,fe){var d=k(),u=B(),c=pa(),m=W().FP_SAFE,v=hr(),p=ni(),g=di(),w=g.getFromId,s=g.isLinked;fe.exports={applyAutorangeOptions:Q,getAutoRange:j,makePadFn:z,doAutoRange:F,findExtremes:P,concatExtremes:O};function j(ue,me){var be,ve,Me=[],ke=ue._fullLayout,le=z(ke,me,0),De=z(ke,me,1),Oe=O(ue,me),He=Oe.min,Be=Oe.max;if(He.length===0||Be.length===0)return c.simpleMap(me.range,me.r2l);var Ye=He[0].val,st=Be[0].val;for(be=1;be<He.length&&Ye===st;be++)Ye=Math.min(Ye,He[be].val);for(be=1;be<Be.length&&Ye===st;be++)st=Math.max(st,Be[be].val);var it=me.autorange,yt=it==="reversed"||it==="min reversed"||it==="max reversed";if(!yt&&me.range){var _e=c.simpleMap(me.range,me.r2l);yt=_e[1]<_e[0]}me.autorange==="reversed"&&(me.autorange=!0);var Ee=me.rangemode,de=Ee==="tozero",we=Ee==="nonnegative",je=me._length,Ae=je/10,$=0,oe,ge,Te,Ue,Ze,Je;for(be=0;be<He.length;be++)for(oe=He[be],ve=0;ve<Be.length;ve++)ge=Be[ve],Je=ge.val-oe.val-b(me,oe.val,ge.val),Je>0&&(Ze=je-le(oe)-De(ge),Ze>Ae?Je/Ze>$&&(Te=oe,Ue=ge,$=Je/Ze):Je/je>$&&(Te={val:oe.val,nopad:1},Ue={val:ge.val,nopad:1},$=Je/je));function ft(Wt,nt){return Math.max(Wt,De(nt))}if(Ye===st){var wt=Ye-1,Ct=Ye+1;if(de)if(Ye===0)Me=[0,1];else{var Kt=(Ye>0?Be:He).reduce(ft,0),$t=Ye/(1-Math.min(.5,Kt/je));Me=Ye>0?[0,$t]:[$t,0]}else we?Me=[Math.max(0,wt),Math.max(1,Ct)]:Me=[wt,Ct]}else de?(Te.val>=0&&(Te={val:0,nopad:1}),Ue.val<=0&&(Ue={val:0,nopad:1})):we&&(Te.val-$*le(Te)<0&&(Te={val:0,nopad:1}),Ue.val<=0&&(Ue={val:1,nopad:1})),$=(Ue.val-Te.val-b(me,oe.val,ge.val))/(je-le(Te)-De(Ue)),Me=[Te.val-$*le(Te),Ue.val+$*De(Ue)];return Me=Q(Me,me),me.limitRange&&me.limitRange(),yt&&Me.reverse(),c.simpleMap(Me,me.l2r||Number)}function b(ue,me,be){var ve=0;if(ue.rangebreaks)for(var Me=ue.locateBreaks(me,be),ke=0;ke<Me.length;ke++){var le=Me[ke];ve+=le.max-le.min}return ve}function z(ue,me,be){var ve=.05*me._length,Me=me._anchorAxis||{};if((me.ticklabelposition||"").indexOf("inside")!==-1||(Me.ticklabelposition||"").indexOf("inside")!==-1){var ke=me.isReversed();if(!ke){var le=c.simpleMap(me.range,me.r2l);ke=le[1]<le[0]}ke&&(be=!be)}var De=0;return s(ue,me._id)||(De=N(ue,me,be)),ve=Math.max(De,ve),me.constrain==="domain"&&me._inputDomain&&(ve*=(me._inputDomain[1]-me._inputDomain[0])/(me.domain[1]-me.domain[0])),function(He){return He.nopad?0:He.pad+(He.extrapad?ve:De)}}var X=3;function N(ue,me,be){var ve=0,Me=me._id.charAt(0)==="x";for(var ke in ue._plots){var le=ue._plots[ke];if(!(me._id!==le.xaxis._id&&me._id!==le.yaxis._id)){var De=(Me?le.yaxis:le.xaxis)||{};if((De.ticklabelposition||"").indexOf("inside")!==-1&&(!be&&(De.side==="left"||De.side==="bottom")||be&&(De.side==="top"||De.side==="right"))){if(De._vals){var Oe=c.deg2rad(De._tickAngles[De._id+"tick"]||0),He=Math.abs(Math.cos(Oe)),Be=Math.abs(Math.sin(Oe));if(!De._vals[0].bb){var Ye=De._id+"tick",st=De._selections[Ye];st.each(function(we){var je=d.select(this),Ae=je.select(".text-math-group");Ae.empty()&&(we.bb=p.bBox(je.node()))})}for(var it=0;it<De._vals.length;it++){var yt=De._vals[it],_e=yt.bb;if(_e){var Ee=2*X+_e.width,de=2*X+_e.height;ve=Math.max(ve,Me?Math.max(Ee*He,de*Be):Math.max(de*He,Ee*Be))}}}De.ticks==="inside"&&De.ticklabelposition==="inside"&&(ve+=De.ticklen||0)}}}return ve}function O(ue,me,be){var ve=me._id,Me=ue._fullData,ke=ue._fullLayout,le=[],De=[],Oe,He,Be;function Ye(Ee,de){for(Oe=0;Oe<de.length;Oe++){var we=Ee[de[Oe]],je=(we._extremes||{})[ve];if(we.visible===!0&&je){for(He=0;He<je.min.length;He++)Be=je.min[He],_(le,Be.val,Be.pad,{extrapad:Be.extrapad});for(He=0;He<je.max.length;He++)Be=je.max[He],R(De,Be.val,Be.pad,{extrapad:Be.extrapad})}}}if(Ye(Me,me._traceIndices),Ye(ke.annotations||[],me._annIndices||[]),Ye(ke.shapes||[],me._shapeIndices||[]),me._matchGroup&&!be){for(var st in me._matchGroup)if(st!==me._id){var it=w(ue,st),yt=O(ue,it,!0),_e=me._length/it._length;for(He=0;He<yt.min.length;He++)Be=yt.min[He],_(le,Be.val,Be.pad*_e,{extrapad:Be.extrapad});for(He=0;He<yt.max.length;He++)Be=yt.max[He],R(De,Be.val,Be.pad*_e,{extrapad:Be.extrapad})}}return{min:le,max:De}}function F(ue,me,be){if(me.setScale(),me.autorange){me.range=be?be.slice():j(ue,me),me._r=me.range.slice(),me._rl=c.simpleMap(me._r,me.r2l);var ve=me._input,Me={};Me[me._attr+".range"]=me.range,Me[me._attr+".autorange"]=me.autorange,v.call("_storeDirectGUIEdit",ue.layout,ue._fullLayout._preGUI,Me),ve.range=me.range.slice(),ve.autorange=me.autorange}var ke=me._anchorAxis;if(ke&&ke.rangeslider){var le=ke.rangeslider[me._name];le&&le.rangemode==="auto"&&(le.range=j(ue,me)),ke._input.rangeslider[me._name]=c.extendFlat({},le)}}function P(ue,me,be){be||(be={}),ue._m||ue.setScale();var ve=[],Me=[],ke=me.length,le=be.padded||!1,De=be.tozero&&(ue.type==="linear"||ue.type==="-"),Oe=ue.type==="log",He=!1,Be=be.vpadLinearized||!1,Ye,st,it,yt,_e,Ee,de,we,je;function Ae(ft){if(Array.isArray(ft))return He=!0,function(Ct){return Math.max(Number(ft[Ct]||0),0)};var wt=Math.max(Number(ft||0),0);return function(){return wt}}var $=Ae((ue._m>0?be.ppadplus:be.ppadminus)||be.ppad||0),oe=Ae((ue._m>0?be.ppadminus:be.ppadplus)||be.ppad||0),ge=Ae(be.vpadplus||be.vpad),Te=Ae(be.vpadminus||be.vpad);if(!He){if(we=1/0,je=-1/0,Oe)for(Ye=0;Ye<ke;Ye++)st=me[Ye],st<we&&st>0&&(we=st),st>je&&st<m&&(je=st);else for(Ye=0;Ye<ke;Ye++)st=me[Ye],st<we&&st>-m&&(we=st),st>je&&st<m&&(je=st);me=[we,je],ke=2}var Ue={tozero:De,extrapad:le};function Ze(ft){it=me[ft],u(it)&&(Ee=$(ft),de=oe(ft),Be?(yt=ue.c2l(it)-Te(ft),_e=ue.c2l(it)+ge(ft)):(we=it-Te(ft),je=it+ge(ft),Oe&&we<je/10&&(we=je/10),yt=ue.c2l(we),_e=ue.c2l(je)),De&&(yt=Math.min(0,yt),_e=Math.max(0,_e)),te(yt)&&_(ve,yt,de,Ue),te(_e)&&R(Me,_e,Ee,Ue))}var Je=Math.min(6,ke);for(Ye=0;Ye<Je;Ye++)Ze(Ye);for(Ye=ke-1;Ye>=Je;Ye--)Ze(Ye);return{min:ve,max:Me,opts:be}}function _(ue,me,be,ve){H(ue,me,be,ve,J)}function R(ue,me,be,ve){H(ue,me,be,ve,ye)}function H(ue,me,be,ve,Me){for(var ke=ve.tozero,le=ve.extrapad,De=!0,Oe=0;Oe<ue.length&&De;Oe++){var He=ue[Oe];if(Me(He.val,me)&&He.pad>=be&&(He.extrapad||!le)){De=!1;break}else Me(me,He.val)&&He.pad<=be&&(le||!He.extrapad)&&(ue.splice(Oe,1),Oe--)}if(De){var Be=ke&&me===0;ue.push({val:me,pad:Be?0:be,extrapad:Be?!1:le})}}function te(ue){return u(ue)&&Math.abs(ue)<m}function J(ue,me){return ue<=me}function ye(ue,me){return ue>=me}function se(ue,me){var be=me.autorangeoptions;return be&&be.minallowed!==void 0&&pe(me,be.minallowed,be.maxallowed)?be.minallowed:be&&be.clipmin!==void 0&&pe(me,be.clipmin,be.clipmax)?Math.max(ue,me.d2l(be.clipmin)):ue}function he(ue,me){var be=me.autorangeoptions;return be&&be.maxallowed!==void 0&&pe(me,be.minallowed,be.maxallowed)?be.maxallowed:be&&be.clipmax!==void 0&&pe(me,be.clipmin,be.clipmax)?Math.min(ue,me.d2l(be.clipmax)):ue}function pe(ue,me,be){return me!==void 0&&be!==void 0?(me=ue.d2l(me),be=ue.d2l(be),me<be):!0}function Q(ue,me){if(!me||!me.autorangeoptions)return ue;var be=ue[0],ve=ue[1],Me=me.autorangeoptions.include;if(Me!==void 0){var ke=me.d2l(be),le=me.d2l(ve);c.isArrayOrTypedArray(Me)||(Me=[Me]);for(var De=0;De<Me.length;De++){var Oe=me.d2l(Me[De]);ke>=Oe&&(ke=Oe,be=Oe),le<=Oe&&(le=Oe,ve=Oe)}}return be=se(be,me),ve=he(ve,me),[be,ve]}}}),mi=n({"src/plots/cartesian/axes.js"(ce,fe){var d=k(),u=B(),c=Di(),m=hr(),v=pa(),p=v.strTranslate,g=Ui(),w=zl(),s=Ve(),j=ni(),b=yo(),z=Fu(),X=W(),N=X.ONEMAXYEAR,O=X.ONEAVGYEAR,F=X.ONEMINYEAR,P=X.ONEMAXQUARTER,_=X.ONEAVGQUARTER,R=X.ONEMINQUARTER,H=X.ONEMAXMONTH,te=X.ONEAVGMONTH,J=X.ONEMINMONTH,ye=X.ONEWEEK,se=X.ONEDAY,he=se/2,pe=X.ONEHOUR,Q=X.ONEMIN,ue=X.ONESEC,me=X.ONEMILLI,be=X.ONEMICROSEC,ve=X.MINUS_SIGN,Me=X.BADNUM,ke={K:"zeroline"},le={K:"gridline",L:"path"},De={K:"minor-gridline",L:"path"},Oe={K:"tick",L:"path"},He={K:"tick",L:"text"},Be={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},Ye=xi(),st=Ye.MID_SHIFT,it=Ye.CAP_SHIFT,yt=Ye.LINE_SPACING,_e=Ye.OPPOSITE_SIDE,Ee=3,de=fe.exports={};de.setConvert=$s();var we=dl(),je=di(),Ae=je.idSort,$=je.isLinked;de.id2name=je.id2name,de.name2id=je.name2id,de.cleanId=je.cleanId,de.list=je.list,de.listIds=je.listIds,de.getFromId=je.getFromId,de.getFromTrace=je.getFromTrace;var oe=Io();de.getAutoRange=oe.getAutoRange,de.findExtremes=oe.findExtremes;var ge=1e-4;function Te(We){var Re=(We[1]-We[0])*ge;return[We[0]-Re,We[1]+Re]}de.coerceRef=function(We,Re,Zt,Ht,Rt,Dt){var Ut=Ht.charAt(Ht.length-1),pr=Zt._fullLayout._subplots[Ut+"axis"],jt=Ht+"ref",Jt={};return Rt||(Rt=pr[0]||(typeof Dt=="string"?Dt:Dt[0])),Dt||(Dt=Rt),pr=pr.concat(pr.map(function(cr){return cr+" domain"})),Jt[jt]={valType:"enumerated",values:pr.concat(Dt?typeof Dt=="string"?[Dt]:Dt:[]),dflt:Rt},v.coerce(We,Re,Jt,jt)},de.getRefType=function(We){return We===void 0?We:We==="paper"?"paper":We==="pixel"?"pixel":/( domain)$/.test(We)?"domain":"range"},de.coercePosition=function(We,Re,Zt,Ht,Rt,Dt){var Ut,pr,jt=de.getRefType(Ht);if(jt!=="range")Ut=v.ensureNumber,pr=Zt(Rt,Dt);else{var Jt=de.getFromId(Re,Ht);Dt=Jt.fraction2r(Dt),pr=Zt(Rt,Dt),Ut=Jt.cleanPos}We[Rt]=Ut(pr)},de.cleanPosition=function(We,Re,Zt){var Ht=Zt==="paper"||Zt==="pixel"?v.ensureNumber:de.getFromId(Re,Zt).cleanPos;return Ht(We)},de.redrawComponents=function(We,Re){Re=Re||de.listIds(We);var Zt=We._fullLayout;function Ht(Rt,Dt,Ut,pr){for(var jt=m.getComponentMethod(Rt,Dt),Jt={},cr=0;cr<Re.length;cr++)for(var rr=Zt[de.id2name(Re[cr])],Or=rr[Ut],Br=0;Br<Or.length;Br++){var ra=Or[Br];if(!Jt[ra]&&(jt(We,ra),Jt[ra]=1,pr))return}}Ht("annotations","drawOne","_annIndices"),Ht("shapes","drawOne","_shapeIndices"),Ht("images","draw","_imgIndices",!0),Ht("selections","drawOne","_selectionIndices")};var Ue=de.getDataConversions=function(We,Re,Zt,Ht){var Rt,Dt=Zt==="x"||Zt==="y"||Zt==="z"?Zt:Ht;if(v.isArrayOrTypedArray(Dt)){if(Rt={type:we(Ht,void 0,{autotypenumbers:We._fullLayout.autotypenumbers}),_categories:[]},de.setConvert(Rt),Rt.type==="category")for(var Ut=0;Ut<Ht.length;Ut++)Rt.d2c(Ht[Ut])}else Rt=de.getFromTrace(We,Re,Dt);return Rt?{d2c:Rt.d2c,c2d:Rt.c2d}:Dt==="ids"?{d2c:Je,c2d:Je}:{d2c:Ze,c2d:Ze}};function Ze(We){return+We}function Je(We){return String(We)}de.getDataToCoordFunc=function(We,Re,Zt,Ht){return Ue(We,Re,Zt,Ht).d2c},de.counterLetter=function(We){var Re=We.charAt(0);if(Re==="x")return"y";if(Re==="y")return"x"},de.minDtick=function(We,Re,Zt,Ht){["log","category","multicategory"].indexOf(We.type)!==-1||!Ht?We._minDtick=0:We._minDtick===void 0?(We._minDtick=Re,We._forceTick0=Zt):We._minDtick&&((We._minDtick/Re+1e-6)%1<2e-6&&((Zt-We._forceTick0)/Re%1+1.000001)%1<2e-6?(We._minDtick=Re,We._forceTick0=Zt):((Re/We._minDtick+1e-6)%1>2e-6||((Zt-We._forceTick0)/We._minDtick%1+1.000001)%1>2e-6)&&(We._minDtick=0))},de.saveRangeInitial=function(We,Re){for(var Zt=de.list(We,"",!0),Ht=!1,Rt=0;Rt<Zt.length;Rt++){var Dt=Zt[Rt],Ut=Dt._rangeInitial0===void 0&&Dt._rangeInitial1===void 0,pr=Ut||Dt.range[0]!==Dt._rangeInitial0||Dt.range[1]!==Dt._rangeInitial1,jt=Dt.autorange;(Ut&&jt!==!0||Re&&pr)&&(Dt._rangeInitial0=jt==="min"||jt==="max reversed"?void 0:Dt.range[0],Dt._rangeInitial1=jt==="max"||jt==="min reversed"?void 0:Dt.range[1],Dt._autorangeInitial=jt,Ht=!0)}return Ht},de.saveShowSpikeInitial=function(We,Re){for(var Zt=de.list(We,"",!0),Ht=!1,Rt="on",Dt=0;Dt<Zt.length;Dt++){var Ut=Zt[Dt],pr=Ut._showSpikeInitial===void 0,jt=pr||Ut.showspikes!==Ut._showspikes;(pr||Re&&jt)&&(Ut._showSpikeInitial=Ut.showspikes,Ht=!0),Rt==="on"&&!Ut.showspikes&&(Rt="off")}return We._fullLayout._cartesianSpikesEnabled=Rt,Ht},de.autoBin=function(We,Re,Zt,Ht,Rt,Dt){var Ut=v.aggNums(Math.min,null,We),pr=v.aggNums(Math.max,null,We);if(Re.type==="category"||Re.type==="multicategory")return{start:Ut-.5,end:pr+.5,size:Math.max(1,Math.round(Dt)||1),_dataSpan:pr-Ut};Rt||(Rt=Re.calendar);var jt;if(Re.type==="log"?jt={type:"linear",range:[Ut,pr]}:jt={type:Re.type,range:v.simpleMap([Ut,pr],Re.c2r,0,Rt),calendar:Rt},de.setConvert(jt),Dt=Dt&&z.dtick(Dt,jt.type),Dt)jt.dtick=Dt,jt.tick0=z.tick0(void 0,jt.type,Rt);else{var Jt;if(Zt)Jt=(pr-Ut)/Zt;else{var cr=v.distinctVals(We),rr=Math.pow(10,Math.floor(Math.log(cr.minDiff)/Math.LN10)),Or=rr*v.roundUp(cr.minDiff/rr,[.9,1.9,4.9,9.9],!0);Jt=Math.max(Or,2*v.stdev(We)/Math.pow(We.length,Ht?.25:.4)),u(Jt)||(Jt=1)}de.autoTicks(jt,Jt)}var Br=jt.dtick,ra=de.tickIncrement(de.tickFirst(jt),Br,"reverse",Rt),Ca,Ma;if(typeof Br=="number")ra=ft(ra,We,jt,Ut,pr),Ma=1+Math.floor((pr-ra)/Br),Ca=ra+Ma*Br;else for(jt.dtick.charAt(0)==="M"&&(ra=wt(ra,We,Br,Ut,Rt)),Ca=ra,Ma=0;Ca<=pr;)Ca=de.tickIncrement(Ca,Br,!1,Rt),Ma++;return{start:Re.c2r(ra,0,Rt),end:Re.c2r(Ca,0,Rt),size:Br,_dataSpan:pr-Ut}};function ft(We,Re,Zt,Ht,Rt){var Dt=0,Ut=0,pr=0,jt=0;function Jt(Br){return(1+(Br-We)*100/Zt.dtick)%100<2}for(var cr=0;cr<Re.length;cr++)Re[cr]%1===0?pr++:u(Re[cr])||jt++,Jt(Re[cr])&&Dt++,Jt(Re[cr]+Zt.dtick/2)&&Ut++;var rr=Re.length-jt;if(pr===rr&&Zt.type!=="date")Zt.dtick<1?We=Ht-.5*Zt.dtick:(We-=.5,We+Zt.dtick<Ht&&(We+=Zt.dtick));else if(Ut<rr*.1&&(Dt>rr*.3||Jt(Ht)||Jt(Rt))){var Or=Zt.dtick/2;We+=We+Or<Ht?Or:-Or}return We}function wt(We,Re,Zt,Ht,Rt){var Dt=v.findExactDates(Re,Rt),Ut=.8;if(Dt.exactDays>Ut){var pr=Number(Zt.substr(1));Dt.exactYears>Ut&&pr%12===0?We=de.tickIncrement(We,"M6","reverse")+se*1.5:Dt.exactMonths>Ut?We=de.tickIncrement(We,"M1","reverse")+se*15.5:We-=he;var jt=de.tickIncrement(We,Zt);if(jt<=Ht)return jt}return We}de.prepMinorTicks=function(We,Re,Zt){if(!Re.minor.dtick){delete We.dtick;var Ht=Re.dtick&&u(Re._tmin),Rt;if(Ht){var Dt=de.tickIncrement(Re._tmin,Re.dtick,!0);Rt=[Re._tmin,Dt*.99+Re._tmin*.01]}else{var Ut=v.simpleMap(Re.range,Re.r2l);Rt=[Ut[0],.8*Ut[0]+.2*Ut[1]]}if(We.range=v.simpleMap(Rt,Re.l2r),We._isMinor=!0,de.prepTicks(We,Zt),Ht){var pr=u(Re.dtick),jt=u(We.dtick),Jt=pr?Re.dtick:+Re.dtick.substring(1),cr=jt?We.dtick:+We.dtick.substring(1);pr&&jt?Ct(Jt,cr)?Jt===2*ye&&cr===2*se&&(We.dtick=ye):Jt===2*ye&&cr===3*se?We.dtick=ye:Jt===ye&&!(Re._input.minor||{}).nticks?We.dtick=se:Kt(Jt/cr,2.5)?We.dtick=Jt/2:We.dtick=Jt:String(Re.dtick).charAt(0)==="M"?jt?We.dtick="M1":Ct(Jt,cr)?Jt>=12&&cr===2&&(We.dtick="M3"):We.dtick=Re.dtick:String(We.dtick).charAt(0)==="L"?String(Re.dtick).charAt(0)==="L"?Ct(Jt,cr)||(We.dtick=Kt(Jt/cr,2.5)?Re.dtick/2:Re.dtick):We.dtick="D1":We.dtick==="D2"&&+Re.dtick>1&&(We.dtick=1)}We.range=Re.range}Re.minor._tick0Init===void 0&&(We.tick0=Re.tick0)};function Ct(We,Re){return Math.abs((We/Re+.5)%1-.5)<.001}function Kt(We,Re){return Math.abs(We/Re-1)<.001}de.prepTicks=function(We,Re){var Zt=v.simpleMap(We.range,We.r2l,void 0,void 0,Re);if(We.tickmode==="auto"||!We.dtick){var Ht=We.nticks,Rt;Ht||(We.type==="category"||We.type==="multicategory"?(Rt=We.tickfont?v.bigFont(We.tickfont.size||12):15,Ht=We._length/Rt):(Rt=We._id.charAt(0)==="y"?40:80,Ht=v.constrain(We._length/Rt,4,9)+1),We._name==="radialaxis"&&(Ht*=2)),We.minor&&We.minor.tickmode!=="array"||We.tickmode==="array"&&(Ht*=100),We._roughDTick=Math.abs(Zt[1]-Zt[0])/Ht,de.autoTicks(We,We._roughDTick),We._minDtick>0&&We.dtick<We._minDtick*2&&(We.dtick=We._minDtick,We.tick0=We.l2r(We._forceTick0))}We.ticklabelmode==="period"&&Wt(We),We.tick0||(We.tick0=We.type==="date"?"2000-01-01":0),We.type==="date"&&We.dtick<.1&&(We.dtick=.1),nr(We)};function $t(We){return+We.substring(1)}function Wt(We){var Re;function Zt(){return!(u(We.dtick)||We.dtick.charAt(0)!=="M")}var Ht=Zt(),Rt=de.getTickFormat(We);if(Rt){var Dt=We._dtickInit!==We.dtick;/%[fLQsSMX]/.test(Rt)||(/%[HI]/.test(Rt)?(Re=pe,Dt&&!Ht&&We.dtick<pe&&(We.dtick=pe)):/%p/.test(Rt)?(Re=he,Dt&&!Ht&&We.dtick<he&&(We.dtick=he)):/%[Aadejuwx]/.test(Rt)?(Re=se,Dt&&!Ht&&We.dtick<se&&(We.dtick=se)):/%[UVW]/.test(Rt)?(Re=ye,Dt&&!Ht&&We.dtick<ye&&(We.dtick=ye)):/%[Bbm]/.test(Rt)?(Re=te,Dt&&(Ht?$t(We.dtick)<1:We.dtick<J)&&(We.dtick="M1")):/%[q]/.test(Rt)?(Re=_,Dt&&(Ht?$t(We.dtick)<3:We.dtick<R)&&(We.dtick="M3")):/%[Yy]/.test(Rt)&&(Re=O,Dt&&(Ht?$t(We.dtick)<12:We.dtick<F)&&(We.dtick="M12")))}Ht=Zt(),Ht&&We.tick0===We._dowTick0&&(We.tick0=We._rawTick0),We._definedDelta=Re}function nt(We,Re,Zt){for(var Ht=0;Ht<We.length;Ht++){var Rt=We[Ht].value,Dt=Ht,Ut=Ht+1;Ht<We.length-1?(Dt=Ht,Ut=Ht+1):Ht>0?(Dt=Ht-1,Ut=Ht):(Dt=Ht,Ut=Ht);var pr=We[Dt].value,jt=We[Ut].value,Jt=Math.abs(jt-pr),cr=Zt||Jt,rr=0;cr>=F?Jt>=F&&Jt<=N?rr=Jt:rr=O:Zt===_&&cr>=R?Jt>=R&&Jt<=P?rr=Jt:rr=_:cr>=J?Jt>=J&&Jt<=H?rr=Jt:rr=te:Zt===ye&&cr>=ye?rr=ye:cr>=se?rr=se:Zt===he&&cr>=he?rr=he:Zt===pe&&cr>=pe&&(rr=pe);var Or;rr>=Jt&&(rr=Jt,Or=!0);var Br=Rt+rr;if(Re.rangebreaks&&rr>0){for(var ra=84,Ca=0,Ma=0;Ma<ra;Ma++){var za=(Ma+.5)/ra;Re.maskBreaks(Rt*(1-za)+za*Br)!==Me&&Ca++}rr*=Ca/ra,rr||(We[Ht].drop=!0),Or&&Jt>ye&&(rr=Jt)}(rr>0||Ht===0)&&(We[Ht].periodX=Rt+rr/2)}}de.calcTicks=function(Re,Zt){for(var Ht=Re.type,Rt=Re.calendar,Dt=Re.ticklabelstep,Ut=Re.ticklabelmode==="period",pr=Re.range[0]>Re.range[1],jt=!Re.ticklabelindex||v.isArrayOrTypedArray(Re.ticklabelindex)?Re.ticklabelindex:[Re.ticklabelindex],Jt=v.simpleMap(Re.range,Re.r2l,void 0,void 0,Zt),cr=Jt[1]<Jt[0],rr=Math.min(Jt[0],Jt[1]),Or=Math.max(Jt[0],Jt[1]),Br=Math.max(1e3,Re._length||0),ra=[],Ca=[],Ma=[],za=[],Fa=[],Da=Re.minor&&(Re.minor.ticks||Re.minor.showgrid),Ka=1;Ka>=(Da?0:1);Ka--){var on=!Ka;Ka?(Re._dtickInit=Re.dtick,Re._tick0Init=Re.tick0):(Re.minor._dtickInit=Re.minor.dtick,Re.minor._tick0Init=Re.minor.tick0);var Sn=Ka?Re:v.extendFlat({},Re,Re.minor);if(on?de.prepMinorTicks(Sn,Re,Zt):de.prepTicks(Sn,Zt),Sn.tickmode==="array"){Ka?(Ma=[],ra=gt(Re,!on)):(za=[],Ca=gt(Re,!on));continue}if(Sn.tickmode==="sync"){Ma=[],ra=Ke(Re);continue}var On=Te(Jt),jn=On[0],dn=On[1],Rn=u(Sn.dtick),oi=Ht==="log"&&!(Rn||Sn.dtick.charAt(0)==="L"),$i=de.tickFirst(Sn,Zt);if(Ka){if(Re._tmin=$i,$i<jn!==cr)break;(Ht==="category"||Ht==="multicategory")&&(dn=cr?Math.max(-.5,dn):Math.min(Re._categories.length-.5,dn))}var ln=null,Mn=$i,Xn;if(Ka){var wi;Rn?wi=Re.dtick:Ht==="date"?typeof Re.dtick=="string"&&Re.dtick.charAt(0)==="M"&&(wi=te*Re.dtick.substring(1)):wi=Re._roughDTick,Xn=Math.round((Re.r2l(Mn)-Re.r2l(Re.tick0))/wi)-1}var hi=Sn.dtick;for(Sn.rangebreaks&&Sn._tick0Init!==Sn.tick0&&(Mn=qa(Mn,Re),cr||(Mn=de.tickIncrement(Mn,hi,!cr,Rt))),Ka&&Ut&&(Mn=de.tickIncrement(Mn,hi,!cr,Rt),Xn--);cr?Mn>=dn:Mn<=dn;Mn=de.tickIncrement(Mn,hi,cr,Rt)){if(Ka&&Xn++,Sn.rangebreaks&&!cr){if(Mn<jn)continue;if(Sn.maskBreaks(Mn)===Me&&qa(Mn,Sn)>=Or)break}if(Ma.length>Br||Mn===ln)break;ln=Mn;var Un={value:Mn};Ka?(oi&&Mn!==(Mn|0)&&(Un.simpleLabel=!0),Dt>1&&Xn%Dt&&(Un.skipLabel=!0),Ma.push(Un)):(Un.minor=!0,za.push(Un))}}if(!za||za.length<2)jt=!1;else{var bn=(za[1].value-za[0].value)*(pr?-1:1);xn(bn,Re.tickformat)||(jt=!1)}if(!jt)Fa=Ma;else{var _n=Ma.concat(za);Ut&&Ma.length&&(_n=_n.slice(1)),_n=_n.sort(function(Tn,Nn){return Tn.value-Nn.value}).filter(function(Tn,Nn,En){return Nn===0||Tn.value!==En[Nn-1].value});var Yn=_n.map(function(Tn,Nn){return Tn.minor===void 0&&!Tn.skipLabel?Nn:null}).filter(function(Tn){return Tn!==null});Yn.forEach(function(Tn){jt.map(function(Nn){var En=Tn+Nn;En>=0&&En<_n.length&&v.pushUnique(Fa,_n[En])})})}if(Da){var Gn=Re.minor.ticks==="inside"&&Re.ticks==="outside"||Re.minor.ticks==="outside"&&Re.ticks==="inside";if(!Gn){for(var Qn=Ma.map(function(Tn){return Tn.value}),ii=[],si=0;si<za.length;si++){var Ei=za[si],yi=Ei.value;if(Qn.indexOf(yi)===-1){for(var Fi=!1,Ai=0;!Fi&&Ai<Ma.length;Ai++)1e7+Ma[Ai].value===1e7+yi&&(Fi=!0);Fi||ii.push(Ei)}}za=ii}}Ut&&nt(Fa,Re,Re._definedDelta);var ei;if(Re.rangebreaks){var Vi=Re._id.charAt(0)==="y",Yi=1;Re.tickmode==="auto"&&(Yi=Re.tickfont?Re.tickfont.size:12);var Mo=NaN;for(ei=Ma.length-1;ei>-1;ei--){if(Ma[ei].drop){Ma.splice(ei,1);continue}Ma[ei].value=qa(Ma[ei].value,Re);var eo=Re.c2p(Ma[ei].value);(Vi?Mo>eo-Yi:Mo<eo+Yi)?Ma.splice(cr?ei+1:ei,1):Mo=eo}}pn(Re)&&Math.abs(Jt[1]-Jt[0])===360&&Ma.pop(),Re._tmax=(Ma[Ma.length-1]||{}).value,Re._prevDateHead="",Re._inCalcTicks=!0;var xo,Ji=function(Tn){Tn.text="",Re._prevDateHead=xo};Ma=Ma.concat(za);function Ni(Tn,Nn){var En=de.tickText(Tn,Nn.value,!1,Nn.simpleLabel),yn=Nn.periodX;return yn!==void 0&&(En.periodX=yn,(yn>Or||yn<rr)&&(yn>Or&&(En.periodX=Or),yn<rr&&(En.periodX=rr),Ji(En))),En}var io;for(ei=0;ei<Ma.length;ei++){var Cl=Ma[ei].minor,Xi=Ma[ei].value;Cl?(jt&&Fa.indexOf(Ma[ei])!==-1?io=Ni(Re,Ma[ei]):io={x:Xi},io.minor=!0,Ca.push(io)):(xo=Re._prevDateHead,io=Ni(Re,Ma[ei]),(Ma[ei].skipLabel||jt&&Fa.indexOf(Ma[ei])===-1)&&Ji(io),ra.push(io))}return ra=ra.concat(Ca),Re._inCalcTicks=!1,Ut&&ra.length&&(ra[0].noTick=!0),ra};function pt(We,Re){return We.rangebreaks&&(Re=Re.filter(function(Zt){return We.maskBreaks(Zt.x)!==Me})),Re}function Ke(We){var Re=We._mainAxis,Zt=[];if(Re._vals){for(var Ht=0;Ht<Re._vals.length;Ht++)if(!Re._vals[Ht].noTick){var Rt=Re.l2p(Re._vals[Ht].x),Dt=We.p2l(Rt),Ut=de.tickText(We,Dt);Re._vals[Ht].minor&&(Ut.minor=!0,Ut.text=""),Zt.push(Ut)}}return Zt=pt(We,Zt),Zt}function gt(We,Re){var Zt=v.simpleMap(We.range,We.r2l),Ht=Te(Zt),Rt=Math.min(Ht[0],Ht[1]),Dt=Math.max(Ht[0],Ht[1]),Ut=We.type==="category"?We.d2l_noadd:We.d2l;We.type==="log"&&String(We.dtick).charAt(0)!=="L"&&(We.dtick="L"+Math.pow(10,Math.floor(Math.min(We.range[0],We.range[1]))-1));for(var pr=[],jt=0;jt<=1;jt++)if(!(Re!==void 0&&(Re&&jt||Re===!1&&!jt))&&!(jt&&!We.minor)){var Jt=jt?We.minor.tickvals:We.tickvals,cr=jt?[]:We.ticktext;if(Jt){v.isArrayOrTypedArray(cr)||(cr=[]);for(var rr=0;rr<Jt.length;rr++){var Or=Ut(Jt[rr]);if(Or>Rt&&Or<Dt){var Br=de.tickText(We,Or,!1,String(cr[rr]));jt&&(Br.minor=!0,Br.text=""),pr.push(Br)}}}}return pr=pt(We,pr),pr}var Ft=[2,5,10],Xt=[1,2,3,6,12],or=[1,2,5,10,15,30],sr=[1,2,3,7,14],dr=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],wr=[-.301,0,.301,.699,1],xr=[15,30,45,90,180];function Pr(We,Re,Zt){return Re*v.roundUp(We/Re,Zt)}de.autoTicks=function(We,Re,Zt){var Ht;function Rt(rr){return Math.pow(rr,Math.floor(Math.log(Re)/Math.LN10))}if(We.type==="date"){We.tick0=v.dateTick0(We.calendar,0);var Dt=2*Re;if(Dt>O)Re/=O,Ht=Rt(10),We.dtick="M"+12*Pr(Re,Ht,Ft);else if(Dt>te)Re/=te,We.dtick="M"+Pr(Re,1,Xt);else if(Dt>se){if(We.dtick=Pr(Re,se,We._hasDayOfWeekBreaks?[1,2,7,14]:sr),!Zt){var Ut=de.getTickFormat(We),pr=We.ticklabelmode==="period";pr&&(We._rawTick0=We.tick0),/%[uVW]/.test(Ut)?We.tick0=v.dateTick0(We.calendar,2):We.tick0=v.dateTick0(We.calendar,1),pr&&(We._dowTick0=We.tick0)}}else Dt>pe?We.dtick=Pr(Re,pe,Xt):Dt>Q?We.dtick=Pr(Re,Q,or):Dt>ue?We.dtick=Pr(Re,ue,or):(Ht=Rt(10),We.dtick=Pr(Re,Ht,Ft))}else if(We.type==="log"){We.tick0=0;var jt=v.simpleMap(We.range,We.r2l);if(We._isMinor&&(Re*=1.5),Re>.7)We.dtick=Math.ceil(Re);else if(Math.abs(jt[1]-jt[0])<1){var Jt=1.5*Math.abs((jt[1]-jt[0])/Re);Re=Math.abs(Math.pow(10,jt[1])-Math.pow(10,jt[0]))/Jt,Ht=Rt(10),We.dtick="L"+Pr(Re,Ht,Ft)}else We.dtick=Re>.3?"D2":"D1"}else We.type==="category"||We.type==="multicategory"?(We.tick0=0,We.dtick=Math.ceil(Math.max(Re,1))):pn(We)?(We.tick0=0,Ht=1,We.dtick=Pr(Re,Ht,xr)):(We.tick0=0,Ht=Rt(10),We.dtick=Pr(Re,Ht,Ft));if(We.dtick===0&&(We.dtick=1),!u(We.dtick)&&typeof We.dtick!="string"){var cr=We.dtick;throw We.dtick=1,"ax.dtick error: "+String(cr)}};function nr(We){var Re=We.dtick;if(We._tickexponent=0,!u(Re)&&typeof Re!="string"&&(Re=1),(We.type==="category"||We.type==="multicategory")&&(We._tickround=null),We.type==="date"){var Zt=We.r2l(We.tick0),Ht=We.l2r(Zt).replace(/(^-|i)/g,""),Rt=Ht.length;if(String(Re).charAt(0)==="M")Rt>10||Ht.substr(5)!=="01-01"?We._tickround="d":We._tickround=+Re.substr(1)%12===0?"y":"m";else if(Re>=se&&Rt<=10||Re>=se*15)We._tickround="d";else if(Re>=Q&&Rt<=16||Re>=pe)We._tickround="M";else if(Re>=ue&&Rt<=19||Re>=Q)We._tickround="S";else{var Dt=We.l2r(Zt+Re).replace(/^-/,"").length;We._tickround=Math.max(Rt,Dt)-20,We._tickround<0&&(We._tickround=4)}}else if(u(Re)||Re.charAt(0)==="L"){var Ut=We.range.map(We.r2d||Number);u(Re)||(Re=Number(Re.substr(1))),We._tickround=2-Math.floor(Math.log(Re)/Math.LN10+.01);var pr=Math.max(Math.abs(Ut[0]),Math.abs(Ut[1])),jt=Math.floor(Math.log(pr)/Math.LN10+.01),Jt=We.minexponent===void 0?3:We.minexponent;Math.abs(jt)>Jt&&(ct(We.exponentformat)&&!ut(jt)?We._tickexponent=3*Math.round((jt-1)/3):We._tickexponent=jt)}else We._tickround=null}de.tickIncrement=function(We,Re,Zt,Ht){var Rt=Zt?-1:1;if(u(Re))return v.increment(We,Rt*Re);var Dt=Re.charAt(0),Ut=Rt*Number(Re.substr(1));if(Dt==="M")return v.incrementMonth(We,Ut,Ht);if(Dt==="L")return Math.log(Math.pow(10,We)+Ut)/Math.LN10;if(Dt==="D"){var pr=Re==="D2"?wr:dr,jt=We+Rt*.01,Jt=v.roundUp(v.mod(jt,1),pr,Zt);return Math.floor(jt)+Math.log(d.round(Math.pow(10,Jt),1))/Math.LN10}throw"unrecognized dtick "+String(Re)},de.tickFirst=function(We,Re){var Zt=We.r2l||Number,Ht=v.simpleMap(We.range,Zt,void 0,void 0,Re),Rt=Ht[1]<Ht[0],Dt=Rt?Math.floor:Math.ceil,Ut=Te(Ht)[0],pr=We.dtick,jt=Zt(We.tick0);if(u(pr)){var Jt=Dt((Ut-jt)/pr)*pr+jt;return(We.type==="category"||We.type==="multicategory")&&(Jt=v.constrain(Jt,0,We._categories.length-1)),Jt}var cr=pr.charAt(0),rr=Number(pr.substr(1));if(cr==="M"){for(var Or=0,Br=jt,ra,Ca,Ma;Or<10;){if(ra=de.tickIncrement(Br,pr,Rt,We.calendar),(ra-Ut)*(Br-Ut)<=0)return Rt?Math.min(Br,ra):Math.max(Br,ra);Ca=(Ut-(Br+ra)/2)/(ra-Br),Ma=cr+(Math.abs(Math.round(Ca))||1)*rr,Br=de.tickIncrement(Br,Ma,Ca<0?!Rt:Rt,We.calendar),Or++}return v.error("tickFirst did not converge",We),Br}else{if(cr==="L")return Math.log(Dt((Math.pow(10,Ut)-jt)/rr)*rr+jt)/Math.LN10;if(cr==="D"){var za=pr==="D2"?wr:dr,Fa=v.roundUp(v.mod(Ut,1),za,Rt);return Math.floor(Ut)+Math.log(d.round(Math.pow(10,Fa),1))/Math.LN10}else throw"unrecognized dtick "+String(pr)}},de.tickText=function(We,Re,Zt,Ht){var Rt=jr(We,Re),Dt=We.tickmode==="array",Ut=Zt||Dt,pr=We.type,jt=pr==="category"?We.d2l_noadd:We.d2l,Jt,cr=function(Ma){var za=We.l2p(Ma);return za>=0&&za<=We._length?Ma:null};if(Dt&&v.isArrayOrTypedArray(We.ticktext)){var rr=v.simpleMap(We.range,We.r2l),Or=(Math.abs(rr[1]-rr[0])-(We._lBreaks||0))/1e4;for(Jt=0;Jt<We.ticktext.length&&!(Math.abs(Re-jt(We.tickvals[Jt]))<Or);Jt++);if(Jt<We.ticktext.length)return Rt.text=String(We.ticktext[Jt]),Rt.xbnd=[cr(Rt.x-.5),cr(Rt.x+We.dtick-.5)],Rt}function Br(Ma){if(Ma===void 0)return!0;if(Zt)return Ma==="none";var za={first:We._tmin,last:We._tmax}[Ma];return Ma!=="all"&&Re!==za}var ra=Zt?"never":We.exponentformat!=="none"&&Br(We.showexponent)?"hide":"";if(pr==="date"?ta(We,Rt,Zt,Ut):pr==="log"?Nr(We,Rt,Zt,Ut,ra):pr==="category"?Jr(We,Rt):pr==="multicategory"?vt(We,Rt,Zt):pn(We)?xt(We,Rt,Zt,Ut,ra):Mt(We,Rt,Zt,Ut,ra),Ht||(We.tickprefix&&!Br(We.showtickprefix)&&(Rt.text=We.tickprefix+Rt.text),We.ticksuffix&&!Br(We.showticksuffix)&&(Rt.text+=We.ticksuffix)),We.labelalias&&We.labelalias.hasOwnProperty(Rt.text)){var Ca=We.labelalias[Rt.text];typeof Ca=="string"&&(Rt.text=Ca)}return(We.tickson==="boundaries"||We.showdividers)&&(Rt.xbnd=[cr(Rt.x-.5),cr(Rt.x+We.dtick-.5)]),Rt},de.hoverLabelText=function(We,Re,Zt){Zt&&(We=v.extendFlat({},We,{hoverformat:Zt}));var Ht=v.isArrayOrTypedArray(Re)?Re[0]:Re,Rt=v.isArrayOrTypedArray(Re)?Re[1]:void 0;if(Rt!==void 0&&Rt!==Ht)return de.hoverLabelText(We,Ht,Zt)+" - "+de.hoverLabelText(We,Rt,Zt);var Dt=We.type==="log"&&Ht<=0,Ut=de.tickText(We,We.c2l(Dt?-Ht:Ht),"hover").text;return Dt?Ht===0?"0":ve+Ut:Ut};function jr(We,Re,Zt){var Ht=We.tickfont||{};return{x:Re,dx:0,dy:0,text:Zt||"",fontSize:Ht.size,font:Ht.family,fontWeight:Ht.weight,fontStyle:Ht.style,fontVariant:Ht.variant,fontTextcase:Ht.textcase,fontLineposition:Ht.lineposition,fontShadow:Ht.shadow,fontColor:Ht.color}}function ta(We,Re,Zt,Ht){var Rt=We._tickround,Dt=Zt&&We.hoverformat||de.getTickFormat(We);Ht=!Dt&&Ht,Ht&&(u(Rt)?Rt=4:Rt={y:"m",m:"d",d:"M",M:"S",S:4}[Rt]);var Ut=v.formatDate(Re.x,Dt,Rt,We._dateFormat,We.calendar,We._extraFormat),pr,jt=Ut.indexOf(`
`);if(jt!==-1&&(pr=Ut.substr(jt+1),Ut=Ut.substr(0,jt)),Ht&&(pr!==void 0&&(Ut==="00:00:00"||Ut==="00:00")?(Ut=pr,pr=""):Ut.length===8&&(Ut=Ut.replace(/:00$/,""))),pr)if(Zt)Rt==="d"?Ut+=", "+pr:Ut=pr+(Ut?", "+Ut:"");else if(!We._inCalcTicks||We._prevDateHead!==pr)We._prevDateHead=pr,Ut+="<br>"+pr;else{var Jt=nn(We),cr=We._trueSide||We.side;(!Jt&&cr==="top"||Jt&&cr==="bottom")&&(Ut+="<br> ")}Re.text=Ut}function Nr(We,Re,Zt,Ht,Rt){var Dt=We.dtick,Ut=Re.x,pr=We.tickformat,jt=typeof Dt=="string"&&Dt.charAt(0);if(Rt==="never"&&(Rt=""),Ht&&jt!=="L"&&(Dt="L3",jt="L"),pr||jt==="L")Re.text=Pt(Math.pow(10,Ut),We,Rt,Ht);else if(u(Dt)||jt==="D"&&(We.minorloglabels==="complete"||v.mod(Ut+.01,1)<.1)){We.minorloglabels==="complete"&&!(v.mod(Ut+.01,1)<.1)&&(Re.fontSize*=.75);var Jt=Math.pow(10,Ut).toExponential(0),cr=Jt.split("e"),rr=+cr[1],Or=Math.abs(rr),Br=We.exponentformat;Br==="power"||ct(Br)&&ut(rr)?(Re.text=cr[0],Or>0&&(Re.text+="x10"),Re.text==="1x10"&&(Re.text="10"),rr!==0&&rr!==1&&(Re.text+="<sup>"+(rr>0?"":ve)+Or+"</sup>"),Re.fontSize*=1.25):(Br==="e"||Br==="E")&&Or>2?Re.text=cr[0]+Br+(rr>0?"+":ve)+Or:(Re.text=Pt(Math.pow(10,Ut),We,"","fakehover"),Dt==="D1"&&We._id.charAt(0)==="y"&&(Re.dy-=Re.fontSize/6))}else if(jt==="D")Re.text=We.minorloglabels==="none"?"":String(Math.round(Math.pow(10,v.mod(Ut,1)))),Re.fontSize*=.75;else throw"unrecognized dtick "+String(Dt);if(We.dtick==="D1"){var ra=String(Re.text).charAt(0);(ra==="0"||ra==="1")&&(We._id.charAt(0)==="y"?Re.dx-=Re.fontSize/4:(Re.dy+=Re.fontSize/2,Re.dx+=(We.range[1]>We.range[0]?1:-1)*Re.fontSize*(Ut<0?.5:.25)))}}function Jr(We,Re){var Zt=We._categories[Math.round(Re.x)];Zt===void 0&&(Zt=""),Re.text=String(Zt)}function vt(We,Re,Zt){var Ht=Math.round(Re.x),Rt=We._categories[Ht]||[],Dt=Rt[1]===void 0?"":String(Rt[1]),Ut=Rt[0]===void 0?"":String(Rt[0]);Zt?Re.text=Ut+" - "+Dt:(Re.text=Dt,Re.text2=Ut)}function Mt(We,Re,Zt,Ht,Rt){Rt==="never"?Rt="":We.showexponent==="all"&&Math.abs(Re.x/We.dtick)<1e-6&&(Rt="hide"),Re.text=Pt(Re.x,We,Rt,Ht)}function xt(We,Re,Zt,Ht,Rt){if(We.thetaunit==="radians"&&!Zt){var Dt=Re.x/180;if(Dt===0)Re.text="0";else{var Ut=Le(Dt);if(Ut[1]>=100)Re.text=Pt(v.deg2rad(Re.x),We,Rt,Ht);else{var pr=Re.x<0;Ut[1]===1?Ut[0]===1?Re.text="":Re.text=Ut[0]+"":Re.text=["<sup>",Ut[0],"</sup>","","<sub>",Ut[1],"</sub>",""].join(""),pr&&(Re.text=ve+Re.text)}}}else Re.text=Pt(Re.x,We,Rt,Ht)}function Le(We){function Re(pr,jt){return Math.abs(pr-jt)<=1e-6}function Zt(pr,jt){return Re(jt,0)?pr:Zt(jt,pr%jt)}function Ht(pr){for(var jt=1;!Re(Math.round(pr*jt)/jt,pr);)jt*=10;return jt}var Rt=Ht(We),Dt=We*Rt,Ut=Math.abs(Zt(Dt,Rt));return[Math.round(Dt/Ut),Math.round(Rt/Ut)]}var ot=["f","p","n","","m","","k","M","G","T"];function ct(We){return We==="SI"||We==="B"}function ut(We){return We>14||We<-15}function Pt(We,Re,Zt,Ht){var Rt=We<0,Dt=Re._tickround,Ut=Zt||Re.exponentformat||"B",pr=Re._tickexponent,jt=de.getTickFormat(Re),Jt=Re.separatethousands;if(Ht){var cr={exponentformat:Ut,minexponent:Re.minexponent,dtick:Re.showexponent==="none"?Re.dtick:u(We)&&Math.abs(We)||1,range:Re.showexponent==="none"?Re.range.map(Re.r2d):[0,We||1]};nr(cr),Dt=(Number(cr._tickround)||0)+4,pr=cr._tickexponent,Re.hoverformat&&(jt=Re.hoverformat)}if(jt)return Re._numFormat(jt)(We).replace(/-/g,ve);var rr=Math.pow(10,-Dt)/2;if(Ut==="none"&&(pr=0),We=Math.abs(We),We<rr)We="0",Rt=!1;else{if(We+=rr,pr&&(We*=Math.pow(10,-pr),Dt+=pr),Dt===0)We=String(Math.floor(We));else if(Dt<0){We=String(Math.round(We)),We=We.substr(0,We.length+Dt);for(var Or=Dt;Or<0;Or++)We+="0"}else{We=String(We);var Br=We.indexOf(".")+1;Br&&(We=We.substr(0,Br+Dt).replace(/\.?0+$/,""))}We=v.numSeparate(We,Re._separators,Jt)}if(pr&&Ut!=="hide"){ct(Ut)&&ut(pr)&&(Ut="power");var ra;pr<0?ra=ve+-pr:Ut!=="power"?ra="+"+pr:ra=String(pr),Ut==="e"||Ut==="E"?We+=Ut+ra:Ut==="power"?We+="10<sup>"+ra+"</sup>":Ut==="B"&&pr===9?We+="B":ct(Ut)&&(We+=ot[pr/3+5])}return Rt?ve+We:We}de.getTickFormat=function(We){var Re;function Zt(jt){return typeof jt!="string"?jt:Number(jt.replace("M",""))*te}function Ht(jt,Jt){var cr=["L","D"];if(typeof jt==typeof Jt){if(typeof jt=="number")return jt-Jt;var rr=cr.indexOf(jt.charAt(0)),Or=cr.indexOf(Jt.charAt(0));return rr===Or?Number(jt.replace(/(L|D)/g,""))-Number(Jt.replace(/(L|D)/g,"")):rr-Or}else return typeof jt=="number"?1:-1}function Rt(jt,Jt,cr){var rr=cr||function(ra){return ra},Or=Jt[0],Br=Jt[1];return(!Or&&typeof Or!="number"||rr(Or)<=rr(jt))&&(!Br&&typeof Br!="number"||rr(Br)>=rr(jt))}function Dt(jt,Jt){var cr=Jt[0]===null,rr=Jt[1]===null,Or=Ht(jt,Jt[0])>=0,Br=Ht(jt,Jt[1])<=0;return(cr||Or)&&(rr||Br)}var Ut,pr;if(We.tickformatstops&&We.tickformatstops.length>0)switch(We.type){case"date":case"linear":{for(Re=0;Re<We.tickformatstops.length;Re++)if(pr=We.tickformatstops[Re],pr.enabled&&Rt(We.dtick,pr.dtickrange,Zt)){Ut=pr;break}break}case"log":{for(Re=0;Re<We.tickformatstops.length;Re++)if(pr=We.tickformatstops[Re],pr.enabled&&Dt(We.dtick,pr.dtickrange)){Ut=pr;break}break}}return Ut?Ut.value:We.tickformat},de.getSubplots=function(We,Re){var Zt=We._fullLayout._subplots,Ht=Zt.cartesian.concat(Zt.gl2d||[]),Rt=Re?de.findSubplotsWithAxis(Ht,Re):Ht;return Rt.sort(function(Dt,Ut){var pr=Dt.substr(1).split("y"),jt=Ut.substr(1).split("y");return pr[0]===jt[0]?+pr[1]-+jt[1]:+pr[0]-+jt[0]}),Rt},de.findSubplotsWithAxis=function(We,Re){for(var Zt=new RegExp(Re._id.charAt(0)==="x"?"^"+Re._id+"y":Re._id+"$"),Ht=[],Rt=0;Rt<We.length;Rt++){var Dt=We[Rt];Zt.test(Dt)&&Ht.push(Dt)}return Ht},de.makeClipPaths=function(We){var Re=We._fullLayout;if(!Re._hasOnlyLargeSploms){var Zt={_offset:0,_length:Re.width,_id:""},Ht={_offset:0,_length:Re.height,_id:""},Rt=de.list(We,"x",!0),Dt=de.list(We,"y",!0),Ut=[],pr,jt;for(pr=0;pr<Rt.length;pr++)for(Ut.push({x:Rt[pr],y:Ht}),jt=0;jt<Dt.length;jt++)pr===0&&Ut.push({x:Zt,y:Dt[jt]}),Ut.push({x:Rt[pr],y:Dt[jt]});var Jt=Re._clips.selectAll(".axesclip").data(Ut,function(cr){return cr.x._id+cr.y._id});Jt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(cr){return"clip"+Re._uid+cr.x._id+cr.y._id}).append("rect"),Jt.exit().remove(),Jt.each(function(cr){d.select(this).select("rect").attr({x:cr.x._offset||0,y:cr.y._offset||0,width:cr.x._length||1,height:cr.y._length||1})})}},de.draw=function(We,Re,Zt){var Ht=We._fullLayout;Re==="redraw"&&Ht._paper.selectAll("g.subplot").each(function(jt){var Jt=jt[0],cr=Ht._plots[Jt];if(cr){var rr=cr.xaxis,Or=cr.yaxis;cr.xaxislayer.selectAll("."+rr._id+"tick").remove(),cr.yaxislayer.selectAll("."+Or._id+"tick").remove(),cr.xaxislayer.selectAll("."+rr._id+"tick2").remove(),cr.yaxislayer.selectAll("."+Or._id+"tick2").remove(),cr.xaxislayer.selectAll("."+rr._id+"divider").remove(),cr.yaxislayer.selectAll("."+Or._id+"divider").remove(),cr.minorGridlayer&&cr.minorGridlayer.selectAll("path").remove(),cr.gridlayer&&cr.gridlayer.selectAll("path").remove(),cr.zerolinelayer&&cr.zerolinelayer.selectAll("path").remove(),cr.zerolinelayerAbove&&cr.zerolinelayerAbove.selectAll("path").remove(),Ht._infolayer.select(".g-"+rr._id+"title").remove(),Ht._infolayer.select(".g-"+Or._id+"title").remove()}});var Rt=!Re||Re==="redraw"?de.listIds(We):Re,Dt=de.list(We),Ut=Dt.filter(function(jt){return jt.autoshift}).map(function(jt){return jt.overlaying});Rt.map(function(jt){var Jt=de.getFromId(We,jt);if(Jt.tickmode==="sync"&&Jt.overlaying){var cr=Rt.findIndex(function(rr){return rr===Jt.overlaying});cr>=0&&Rt.unshift(Rt.splice(cr,1).shift())}});var pr={false:{left:0,right:0}};return v.syncOrAsync(Rt.map(function(jt){return function(){if(jt){var Jt=de.getFromId(We,jt);Zt||(Zt={}),Zt.axShifts=pr,Zt.overlayingShiftedAx=Ut;var cr=de.drawOne(We,Jt,Zt);return Jt._shiftPusher&&Cn(Jt,Jt._fullDepth||0,pr,!0),Jt._r=Jt.range.slice(),Jt._rl=v.simpleMap(Jt._r,Jt.r2l),cr}}}))},de.drawOne=function(We,Re,Zt){Zt=Zt||{};var Ht=Zt.axShifts||{},Rt=Zt.overlayingShiftedAx||[],Dt,Ut,pr;Re.setScale();var jt=We._fullLayout,Jt=Re._id,cr=Jt.charAt(0),rr=de.counterLetter(Jt),Or=jt._plots[Re._mainSubplot],Br=Re.zerolinelayer==="above traces";if(!Or)return;if(Re._shiftPusher=Re.autoshift||Rt.indexOf(Re._id)!==-1||Rt.indexOf(Re.overlaying)!==-1,Re._shiftPusher&Re.anchor==="free"){var ra=Re.linewidth/2||0;Re.ticks==="inside"&&(ra+=Re.ticklen),Cn(Re,ra,Ht,!0),Cn(Re,Re.shift||0,Ht,!1)}(Zt.skipTitle!==!0||Re._shift===void 0)&&(Re._shift=Ja(Re,Ht));var Ca=Or[cr+"axislayer"],Ma=Re._mainLinePosition,za=Ma+=Re._shift,Fa=Re._mainMirrorPosition,Da=Re._vals=de.calcTicks(Re),Ka=[Re.mirror,za,Fa].join("_");for(Dt=0;Dt<Da.length;Dt++)Da[Dt].axInfo=Ka;Re._selections={},Re._tickAngles&&(Re._prevTickAngles=Re._tickAngles),Re._tickAngles={},Re._depth=null;var on={};function Sn(Xi){var Tn=Jt+(Xi||"tick");return on[Tn]||(on[Tn]=Bt(Re,Tn,za)),on[Tn]}if(Re.visible){var On=de.makeTransTickFn(Re),jn=de.makeTransTickLabelFn(Re),dn,Rn,oi=Re.ticks==="inside",$i=Re.ticks==="outside";if(Re.tickson==="boundaries"){var ln=qt(Re,Da);Rn=de.clipEnds(Re,ln),dn=oi?Rn:ln}else Rn=de.clipEnds(Re,Da),dn=oi&&Re.ticklabelmode!=="period"?Rn:Da;var Mn=Re._gridVals=Rn,Xn=_r(Re,Da);if(!jt._hasOnlyLargeSploms){var wi=Re._subplotsWith,hi={};for(Dt=0;Dt<wi.length;Dt++){Ut=wi[Dt],pr=jt._plots[Ut];var Un=pr[rr+"axis"],bn=Un._mainAxis._id;if(!hi[bn]){hi[bn]=1;var _n=cr==="x"?"M0,"+Un._offset+"v"+Un._length:"M"+Un._offset+",0h"+Un._length;de.drawGrid(We,Re,{vals:Mn,counterAxis:Un,layer:pr.gridlayer.select("."+Jt),minorLayer:pr.minorGridlayer.select("."+Jt),path:_n,transFn:On}),de.drawZeroLine(We,Re,{counterAxis:Un,layer:Br?pr.zerolinelayerAbove:pr.zerolinelayer,path:_n,transFn:On})}}}var Yn,Gn=de.getTickSigns(Re),Qn=de.getTickSigns(Re,"minor");if(Re.ticks||Re.minor&&Re.minor.ticks){var ii=de.makeTickPath(Re,za,Gn[2]),si=de.makeTickPath(Re,za,Qn[2],{minor:!0}),Ei,yi,Fi,Ai;if(Re._anchorAxis&&Re.mirror&&Re.mirror!==!0?(Ei=de.makeTickPath(Re,Fa,Gn[3]),yi=de.makeTickPath(Re,Fa,Qn[3],{minor:!0}),Fi=ii+Ei,Ai=si+yi):(Ei="",yi="",Fi=ii,Ai=si),Re.showdividers&&$i&&Re.tickson==="boundaries"){var ei={};for(Dt=0;Dt<Xn.length;Dt++)ei[Xn[Dt].x]=1;Yn=function(Xi){return ei[Xi.x]?Ei:Fi}}else Yn=function(Xi){return Xi.minor?Ai:Fi}}if(de.drawTicks(We,Re,{vals:dn,layer:Ca,path:Yn,transFn:On}),Re.mirror==="allticks"){var Vi=Object.keys(Re._linepositions||{});for(Dt=0;Dt<Vi.length;Dt++){Ut=Vi[Dt],pr=jt._plots[Ut];var Yi=Re._linepositions[Ut]||[],Mo=Yi[0],eo=Yi[1],xo=Yi[2],Ji=de.makeTickPath(Re,Mo,xo?Gn[0]:Qn[0],{minor:xo})+de.makeTickPath(Re,eo,xo?Gn[1]:Qn[1],{minor:xo});de.drawTicks(We,Re,{vals:dn,layer:pr[cr+"axislayer"],path:Ji,transFn:On})}}var Ni=[];if(Ni.push(function(){return de.drawLabels(We,Re,{vals:Da,layer:Ca,plotinfo:pr,transFn:jn,labelFns:de.makeLabelFns(Re,za)})}),Re.type==="multicategory"){var io={x:2,y:10}[cr];Ni.push(function(){var Xi={x:"height",y:"width"}[cr],Tn=Sn()[Xi]+io+(Re._tickAngles[Jt+"tick"]?Re.tickfont.size*yt:0);return de.drawLabels(We,Re,{vals:ir(Re,Da),layer:Ca,cls:Jt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:On,labelFns:de.makeLabelFns(Re,za+Tn*Gn[4])})}),Ni.push(function(){return Re._depth=Gn[4]*(Sn("tick2")[Re.side]-za),ba(We,Re,{vals:Xn,layer:Ca,path:de.makeTickPath(Re,za,Gn[4],{len:Re._depth}),transFn:On})})}else Re.title.hasOwnProperty("standoff")&&Ni.push(function(){Re._depth=Gn[4]*(Sn()[Re.side]-za)});var Cl=m.getComponentMethod("rangeslider","isVisible")(Re);return!Zt.skipTitle&&!(Cl&&Re.side==="bottom")&&Ni.push(function(){return Xa(We,Re)}),Ni.push(function(){var Xi=Re.side.charAt(0),Tn=_e[Re.side].charAt(0),Nn=de.getPxPosition(We,Re),En=$i?Re.ticklen:0,yn,wn,Ci,Eo;(Re.automargin||Cl||Re._shiftPusher)&&(Re.type==="multicategory"?yn=Sn("tick2"):(yn=Sn(),cr==="x"&&Xi==="b"&&(Re._depth=Math.max(yn.width>0?yn.bottom-Nn:0,En))));var Co=0,Fs=0;if(Re._shiftPusher&&(Co=Math.max(En,yn.height>0?Xi==="l"?Nn-yn.left:yn.right-Nn:0),Re.title.text!==jt._dfltTitle[cr]&&(Fs=(Re._titleStandoff||0)+(Re._titleScoot||0),Xi==="l"&&(Fs+=Ga(Re))),Re._fullDepth=Math.max(Co,Fs)),Re.automargin){wn={x:0,y:0,r:0,l:0,t:0,b:0};var Oo=[0,1],ji=typeof Re._shift=="number"?Re._shift:0;if(cr==="x"){if(Xi==="b"?wn[Xi]=Re._depth:(wn[Xi]=Re._depth=Math.max(yn.width>0?Nn-yn.top:0,En),Oo.reverse()),yn.width>0){var Is=yn.right-(Re._offset+Re._length);Is>0&&(wn.xr=1,wn.r=Is);var ss=Re._offset-yn.left;ss>0&&(wn.xl=0,wn.l=ss)}}else if(Xi==="l"?(Re._depth=Math.max(yn.height>0?Nn-yn.left:0,En),wn[Xi]=Re._depth-ji):(Re._depth=Math.max(yn.height>0?yn.right-Nn:0,En),wn[Xi]=Re._depth+ji,Oo.reverse()),yn.height>0){var oc=yn.bottom-(Re._offset+Re._length);oc>0&&(wn.yb=0,wn.b=oc);var Po=Re._offset-yn.top;Po>0&&(wn.yt=1,wn.t=Po)}wn[rr]=Re.anchor==="free"?Re.position:Re._anchorAxis.domain[Oo[0]],Re.title.text!==jt._dfltTitle[cr]&&(wn[Xi]+=Ga(Re)+(Re.title.standoff||0)),Re.mirror&&Re.anchor!=="free"&&(Ci={x:0,y:0,r:0,l:0,t:0,b:0},Ci[Tn]=Re.linewidth,Re.mirror&&Re.mirror!==!0&&(Ci[Tn]+=En),Re.mirror===!0||Re.mirror==="ticks"?Ci[rr]=Re._anchorAxis.domain[Oo[1]]:(Re.mirror==="all"||Re.mirror==="allticks")&&(Ci[rr]=[Re._counterDomainMin,Re._counterDomainMax][Oo[1]]))}Cl&&(Eo=m.getComponentMethod("rangeslider","autoMarginOpts")(We,Re)),typeof Re.automargin=="string"&&(Ot(wn,Re.automargin),Ot(Ci,Re.automargin)),c.autoMargin(We,Va(Re),wn),c.autoMargin(We,ja(Re),Ci),c.autoMargin(We,$a(Re),Eo)}),v.syncOrAsync(Ni)}};function Ot(We,Re){if(We){var Zt=Object.keys(Be).reduce(function(Ht,Rt){return Re.indexOf(Rt)!==-1&&Be[Rt].forEach(function(Dt){Ht[Dt]=1}),Ht},{});Object.keys(We).forEach(function(Ht){Zt[Ht]||(Ht.length===1?We[Ht]=0:delete We[Ht])})}}function qt(We,Re){var Zt=[],Ht,Rt=function(Dt,Ut){var pr=Dt.xbnd[Ut];pr!==null&&Zt.push(v.extendFlat({},Dt,{x:pr}))};if(Re.length){for(Ht=0;Ht<Re.length;Ht++)Rt(Re[Ht],0);Rt(Re[Ht-1],1)}return Zt}function ir(We,Re){for(var Zt=[],Ht={},Rt=0;Rt<Re.length;Rt++){var Dt=Re[Rt];Ht[Dt.text2]?Ht[Dt.text2].push(Dt.x):Ht[Dt.text2]=[Dt.x]}for(var Ut in Ht)Zt.push(jr(We,v.interp(Ht[Ut],.5),Ut));return Zt}function _r(We,Re){var Zt=[],Ht,Rt,Dt=Re.length&&Re[Re.length-1].x<Re[0].x,Ut=function(jt,Jt){var cr=jt.xbnd[Jt];cr!==null&&Zt.push(v.extendFlat({},jt,{x:cr}))};if(We.showdividers&&Re.length){for(Ht=0;Ht<Re.length;Ht++){var pr=Re[Ht];pr.text2!==Rt&&Ut(pr,Dt?1:0),Rt=pr.text2}Ut(Re[Ht-1],Dt?0:1)}return Zt}function Bt(We,Re,Zt){var Ht,Rt,Dt,Ut;if(We._selections[Re].size())Ht=1/0,Rt=-1/0,Dt=1/0,Ut=-1/0,We._selections[Re].each(function(){var jt=ma(this);if(jt.node().style.display!=="none"){var Jt=j.bBox(jt.node().parentNode);Ht=Math.min(Ht,Jt.top),Rt=Math.max(Rt,Jt.bottom),Dt=Math.min(Dt,Jt.left),Ut=Math.max(Ut,Jt.right)}});else{var pr=de.makeLabelFns(We,Zt);Ht=Rt=pr.yFn({dx:0,dy:0,fontSize:0}),Dt=Ut=pr.xFn({dx:0,dy:0,fontSize:0})}return{top:Ht,bottom:Rt,left:Dt,right:Ut,height:Rt-Ht,width:Ut-Dt}}de.getTickSigns=function(We,Re){var Zt=We._id.charAt(0),Ht={x:"top",y:"right"}[Zt],Rt=We.side===Ht?1:-1,Dt=[-1,1,Rt,-Rt],Ut=Re?(We.minor||{}).ticks:We.ticks;return Ut!=="inside"==(Zt==="x")&&(Dt=Dt.map(function(pr){return-pr})),We.side&&Dt.push({l:-1,t:-1,r:1,b:1}[We.side.charAt(0)]),Dt},de.makeTransTickFn=function(We){return We._id.charAt(0)==="x"?function(Re){return p(We._offset+We.l2p(Re.x),0)}:function(Re){return p(0,We._offset+We.l2p(Re.x))}},de.makeTransTickLabelFn=function(We){var Re=Ar(We),Zt=We.ticklabelshift||0,Ht=We.ticklabelstandoff||0,Rt=Re[0],Dt=Re[1],Ut=We.range[0]>We.range[1],pr=We.ticklabelposition&&We.ticklabelposition.indexOf("inside")!==-1,jt=!pr;if(Zt){var Jt=Ut?-1:1;Zt=Zt*Jt}if(Ht){var cr=We.side,rr=pr&&(cr==="top"||cr==="left")||jt&&(cr==="bottom"||cr==="right")?1:-1;Ht=Ht*rr}return We._id.charAt(0)==="x"?function(Or){return p(Rt+We._offset+We.l2p(gr(Or))+Zt,Dt+Ht)}:function(Or){return p(Dt+Ht,Rt+We._offset+We.l2p(gr(Or))+Zt)}};function gr(We){return We.periodX!==void 0?We.periodX:We.x}function Ar(We){var Re=We.ticklabelposition||"",Zt=We.tickson||"",Ht=function(ra){return Re.indexOf(ra)!==-1},Rt=Ht("top"),Dt=Ht("left"),Ut=Ht("right"),pr=Ht("bottom"),jt=Ht("inside"),Jt=Zt!=="boundaries"&&(pr||Dt||Rt||Ut);if(!Jt&&!jt)return[0,0];var cr=We.side,rr=Jt?(We.tickwidth||0)/2:0,Or=Ee,Br=We.tickfont?We.tickfont.size:12;return(pr||Rt)&&(rr+=Br*it,Or+=(We.linewidth||0)/2),(Dt||Ut)&&(rr+=(We.linewidth||0)/2,Or+=Ee),jt&&cr==="top"&&(Or-=Br*(1-it)),(Dt||Rt)&&(rr=-rr),(cr==="bottom"||cr==="right")&&(Or=-Or),[Jt?rr:0,jt?Or:0]}de.makeTickPath=function(We,Re,Zt,Ht){Ht||(Ht={});var Rt=Ht.minor;if(Rt&&!We.minor)return"";var Dt=Ht.len!==void 0?Ht.len:Rt?We.minor.ticklen:We.ticklen,Ut=We._id.charAt(0),pr=(We.linewidth||1)/2;return Ut==="x"?"M0,"+(Re+pr*Zt)+"v"+Dt*Zt:"M"+(Re+pr*Zt)+",0h"+Dt*Zt},de.makeLabelFns=function(We,Re,Zt){var Ht=We.ticklabelposition||"",Rt=We.tickson||"",Dt=function(ln){return Ht.indexOf(ln)!==-1},Ut=Dt("top"),pr=Dt("left"),jt=Dt("right"),Jt=Dt("bottom"),cr=Rt!=="boundaries"&&(Jt||pr||Ut||jt),rr=Dt("inside"),Or=Ht==="inside"&&We.ticks==="inside"||!rr&&We.ticks==="outside"&&Rt!=="boundaries",Br=0,ra=0,Ca=Or?We.ticklen:0;if(rr?Ca*=-1:cr&&(Ca=0),Or&&(Br+=Ca,Zt)){var Ma=v.deg2rad(Zt);Br=Ca*Math.cos(Ma)+1,ra=Ca*Math.sin(Ma)}We.showticklabels&&(Or||We.showline)&&(Br+=.2*We.tickfont.size),Br+=(We.linewidth||1)/2*(rr?-1:1);var za={labelStandoff:Br,labelShift:ra},Fa,Da,Ka,on,Sn=0,On=We.side,jn=We._id.charAt(0),dn=We.tickangle,Rn;if(jn==="x")Rn=!rr&&On==="bottom"||rr&&On==="top",on=Rn?1:-1,rr&&(on*=-1),Fa=ra*on,Da=Re+Br*on,Ka=Rn?1:-.2,Math.abs(dn)===90&&(rr?Ka+=st:dn===-90&&On==="bottom"?Ka=it:dn===90&&On==="top"?Ka=st:Ka=.5,Sn=st/2*(dn/90)),za.xFn=function(ln){return ln.dx+Fa+Sn*ln.fontSize},za.yFn=function(ln){return ln.dy+Da+ln.fontSize*Ka},za.anchorFn=function(ln,Mn){if(cr){if(pr)return"end";if(jt)return"start"}return!u(Mn)||Mn===0||Mn===180?"middle":Mn*on<0!==rr?"end":"start"},za.heightFn=function(ln,Mn,Xn){return Mn<-60||Mn>60?-.5*Xn:We.side==="top"!==rr?-Xn:0};else if(jn==="y"){if(Rn=!rr&&On==="left"||rr&&On==="right",on=Rn?1:-1,rr&&(on*=-1),Fa=Br,Da=ra*on,Ka=0,!rr&&Math.abs(dn)===90&&(dn===-90&&On==="left"||dn===90&&On==="right"?Ka=it:Ka=.5),rr){var oi=u(dn)?+dn:0;if(oi!==0){var $i=v.deg2rad(oi);Sn=Math.abs(Math.sin($i))*it*on,Ka=0}}za.xFn=function(ln){return ln.dx+Re-(Fa+ln.fontSize*Ka)*on+Sn*ln.fontSize},za.yFn=function(ln){return ln.dy+Da+ln.fontSize*st},za.anchorFn=function(ln,Mn){return u(Mn)&&Math.abs(Mn)===90?"middle":Rn?"end":"start"},za.heightFn=function(ln,Mn,Xn){return We.side==="right"&&(Mn*=-1),Mn<-30?-Xn:Mn<30?-.5*Xn:0}}return za};function Er(We){return[We.text,We.x,We.axInfo,We.font,We.fontSize,We.fontColor].join("_")}de.drawTicks=function(We,Re,Zt){Zt=Zt||{};var Ht=Re._id+"tick",Rt=[].concat(Re.minor&&Re.minor.ticks?Zt.vals.filter(function(Ut){return Ut.minor&&!Ut.noTick}):[]).concat(Re.ticks?Zt.vals.filter(function(Ut){return!Ut.minor&&!Ut.noTick}):[]),Dt=Zt.layer.selectAll("path."+Ht).data(Rt,Er);Dt.exit().remove(),Dt.enter().append("path").classed(Ht,1).classed("ticks",1).classed("crisp",Zt.crisp!==!1).each(function(Ut){return s.stroke(d.select(this),Ut.minor?Re.minor.tickcolor:Re.tickcolor)}).style("stroke-width",function(Ut){return j.crispRound(We,Ut.minor?Re.minor.tickwidth:Re.tickwidth,1)+"px"}).attr("d",Zt.path).style("display",null),cn(Re,[Oe]),Dt.attr("transform",Zt.transFn)},de.drawGrid=function(We,Re,Zt){if(Zt=Zt||{},Re.tickmode!=="sync"){var Ht=Re._id+"grid",Rt=Re.minor&&Re.minor.showgrid,Dt=Rt?Zt.vals.filter(function(za){return za.minor}):[],Ut=Re.showgrid?Zt.vals.filter(function(za){return!za.minor}):[],pr=Zt.counterAxis;if(pr&&de.shouldShowZeroLine(We,Re,pr))for(var jt=Re.tickmode==="array",Jt=0;Jt<Ut.length;Jt++){var cr=Ut[Jt].x;if(jt?!cr:Math.abs(cr)<Re.dtick/100)if(Ut=Ut.slice(0,Jt).concat(Ut.slice(Jt+1)),jt)Jt--;else break}Re._gw=j.crispRound(We,Re.gridwidth,1);for(var rr=Rt?j.crispRound(We,Re.minor.gridwidth,1):0,Or=Zt.layer,Br=Zt.minorLayer,ra=1;ra>=0;ra--){var Ca=ra?Or:Br;if(Ca){var Ma=Ca.selectAll("path."+Ht).data(ra?Ut:Dt,Er);Ma.exit().remove(),Ma.enter().append("path").classed(Ht,1).classed("crisp",Zt.crisp!==!1),Ma.attr("transform",Zt.transFn).attr("d",Zt.path).each(function(za){return s.stroke(d.select(this),za.minor?Re.minor.gridcolor:Re.gridcolor||"#ddd")}).style("stroke-dasharray",function(za){return j.dashStyle(za.minor?Re.minor.griddash:Re.griddash,za.minor?Re.minor.gridwidth:Re.gridwidth)}).style("stroke-width",function(za){return(za.minor?rr:Re._gw)+"px"}).style("display",null),typeof Zt.path=="function"&&Ma.attr("d",Zt.path)}}cn(Re,[le,De])}},de.drawZeroLine=function(We,Re,Zt){Zt=Zt||Zt;var Ht=Re._id+"zl",Rt=de.shouldShowZeroLine(We,Re,Zt.counterAxis),Dt=Zt.layer.selectAll("path."+Ht).data(Rt?[{x:0,id:Re._id}]:[]);Dt.exit().remove(),Dt.enter().append("path").classed(Ht,1).classed("zl",1).classed("crisp",Zt.crisp!==!1).each(function(){Zt.layer.selectAll("path").sort(function(Ut,pr){return Ae(Ut.id,pr.id)})}),Dt.attr("transform",Zt.transFn).attr("d",Zt.path).call(s.stroke,Re.zerolinecolor||s.defaultLine).style("stroke-width",j.crispRound(We,Re.zerolinewidth,Re._gw||1)+"px").style("display",null),cn(Re,[ke])},de.drawLabels=function(We,Re,Zt){Zt=Zt||{};var Ht=We._fullLayout,Rt=Re._id,Dt=Re.zerolinelayer==="above traces",Ut=Zt.cls||Rt+"tick",pr=Zt.vals.filter(function(bn){return bn.text}),jt=Zt.labelFns,Jt=Zt.secondary?0:Re.tickangle,cr=(Re._prevTickAngles||{})[Ut],rr=Zt.layer.selectAll("g."+Ut).data(Re.showticklabels?pr:[],Er),Or=[];rr.enter().append("g").classed(Ut,1).append("text").attr("text-anchor","middle").each(function(bn){var _n=d.select(this),Yn=We._promises.length;_n.call(g.positionText,jt.xFn(bn),jt.yFn(bn)).call(j.font,{family:bn.font,size:bn.fontSize,color:bn.fontColor,weight:bn.fontWeight,style:bn.fontStyle,variant:bn.fontVariant,textcase:bn.fontTextcase,lineposition:bn.fontLineposition,shadow:bn.fontShadow}).text(bn.text).call(g.convertToTspans,We),We._promises[Yn]?Or.push(We._promises.pop().then(function(){Br(_n,Jt)})):Br(_n,Jt)}),cn(Re,[He]),rr.exit().remove(),Zt.repositionOnUpdate&&rr.each(function(bn){d.select(this).select("text").call(g.positionText,jt.xFn(bn),jt.yFn(bn))});function Br(bn,_n){bn.each(function(Yn){var Gn=d.select(this),Qn=Gn.select(".text-math-group"),ii=jt.anchorFn(Yn,_n),si=Zt.transFn.call(Gn.node(),Yn)+(u(_n)&&+_n!=0?" rotate("+_n+","+jt.xFn(Yn)+","+(jt.yFn(Yn)-Yn.fontSize/2)+")":""),Ei=g.lineCount(Gn),yi=yt*Yn.fontSize,Fi=jt.heightFn(Yn,u(_n)?+_n:0,(Ei-1)*yi);if(Fi&&(si+=p(0,Fi)),Qn.empty()){var Ai=Gn.select("text");Ai.attr({transform:si,"text-anchor":ii}),Ai.style("display",null),Re._adjustTickLabelsOverflow&&Re._adjustTickLabelsOverflow()}else{var ei=j.bBox(Qn.node()).width,Vi=ei*{end:-.5,start:.5}[ii];Qn.attr("transform",si+p(Vi,0))}})}Re._adjustTickLabelsOverflow=function(){var bn=Re.ticklabeloverflow;if(!(!bn||bn==="allow")){var _n=bn.indexOf("hide")!==-1,Yn=Re._id.charAt(0)==="x",Gn=0,Qn=Yn?We._fullLayout.width:We._fullLayout.height;if(bn.indexOf("domain")!==-1){var ii=v.simpleMap(Re.range,Re.r2l);Gn=Re.l2p(ii[0])+Re._offset,Qn=Re.l2p(ii[1])+Re._offset}var si=Math.min(Gn,Qn),Ei=Math.max(Gn,Qn),yi=Re.side,Fi=1/0,Ai=-1/0;rr.each(function(Mo){var eo=d.select(this),xo=eo.select(".text-math-group");if(xo.empty()){var Ji=j.bBox(eo.node()),Ni=0;Yn?(Ji.right>Ei||Ji.left<si)&&(Ni=1):(Ji.bottom>Ei||Ji.top+(Re.tickangle?0:Mo.fontSize/4)<si)&&(Ni=1);var io=eo.select("text");Ni?_n&&io.style("display","none"):io.node().style.display!=="none"&&(io.style("display",null),yi==="bottom"||yi==="right"?Fi=Math.min(Fi,Yn?Ji.top:Ji.left):Fi=-1/0,yi==="top"||yi==="left"?Ai=Math.max(Ai,Yn?Ji.bottom:Ji.right):Ai=1/0)}});for(var ei in Ht._plots){var Vi=Ht._plots[ei];if(!(Re._id!==Vi.xaxis._id&&Re._id!==Vi.yaxis._id)){var Yi=Yn?Vi.yaxis:Vi.xaxis;Yi&&(Yi["_visibleLabelMin_"+Re._id]=Fi,Yi["_visibleLabelMax_"+Re._id]=Ai)}}}},Re._hideCounterAxisInsideTickLabels=function(bn){var _n=Re._id.charAt(0)==="x",Yn=[];for(var Gn in Ht._plots){var Qn=Ht._plots[Gn];Re._id!==Qn.xaxis._id&&Re._id!==Qn.yaxis._id||Yn.push(_n?Qn.yaxis:Qn.xaxis)}Yn.forEach(function(ii,si){ii&&nn(ii)&&(bn||[ke,De,le,Oe,He]).forEach(function(Ei){var yi=Ei.K==="tick"&&Ei.L==="text"&&Re.ticklabelmode==="period",Fi=Ht._plots[Re._mainSubplot],Ai;if(Ei.K===ke.K){var ei=Dt?Fi.zerolinelayerAbove:Fi.zerolinelayer;Ai=ei.selectAll("."+Re._id+"zl")}else Ei.K===De.K?Ai=Fi.minorGridlayer.selectAll("."+Re._id):Ei.K===le.K?Ai=Fi.gridlayer.selectAll("."+Re._id):Ai=Fi[Re._id.charAt(0)+"axislayer"];Ai.each(function(){var Vi=d.select(this);Ei.L&&(Vi=Vi.selectAll(Ei.L)),Vi.each(function(Yi){var Mo=Re.l2p(yi?gr(Yi):Yi.x)+Re._offset,eo=d.select(this);Mo<Re["_visibleLabelMax_"+ii._id]&&Mo>Re["_visibleLabelMin_"+ii._id]?eo.style("display","none"):Ei.K==="tick"&&!si&&eo.node().style.display!=="none"&&eo.style("display",null)})})})})},Br(rr,cr+1?cr:Jt);function ra(){return Or.length&&Promise.all(Or)}var Ca=null;function Ma(){if(Br(rr,Jt),pr.length&&Re.autotickangles&&(Re.type!=="log"||String(Re.dtick).charAt(0)!=="D")){Ca=Re.autotickangles[0];var bn=0,_n=[],Yn,Gn=1;rr.each(function(wn){bn=Math.max(bn,wn.fontSize);var Ci=Re.l2p(wn.x),Eo=ma(this),Co=j.bBox(Eo.node());Gn=Math.max(Gn,g.lineCount(Eo)),_n.push({top:0,bottom:10,height:10,left:Ci-Co.width/2,right:Ci+Co.width/2+2,width:Co.width+2})});var Qn=(Re.tickson==="boundaries"||Re.showdividers)&&!Zt.secondary,ii=pr.length,si=Math.abs((pr[ii-1].x-pr[0].x)*Re._m)/(ii-1),Ei=Qn?si/2:si,yi=Qn?Re.ticklen:bn*1.25*Gn,Fi=Math.sqrt(Math.pow(Ei,2)+Math.pow(yi,2)),Ai=Ei/Fi,ei=Re.autotickangles.map(function(wn){return wn*Math.PI/180}),Vi=ei.find(function(wn){return Math.abs(Math.cos(wn))<=Ai});Vi===void 0&&(Vi=ei.reduce(function(wn,Ci){return Math.abs(Math.cos(wn))<Math.abs(Math.cos(Ci))?wn:Ci},ei[0]));var Yi=Vi*(180/Math.PI);if(Qn){var Mo=2;for(Re.ticks&&(Mo+=Re.tickwidth/2),Yn=0;Yn<_n.length;Yn++){var eo=pr[Yn].xbnd,xo=_n[Yn];if(eo[0]!==null&&xo.left-Re.l2p(eo[0])<Mo||eo[1]!==null&&Re.l2p(eo[1])-xo.right<Mo){Ca=Yi;break}}}else{var Ji=Re.ticklabelposition||"",Ni=Re.tickson||"",io=function(wn){return Ji.indexOf(wn)!==-1},Cl=io("top"),Xi=io("left"),Tn=io("right"),Nn=io("bottom"),En=Ni!=="boundaries"&&(Nn||Xi||Cl||Tn),yn=En?(Re.tickwidth||0)+2*Ee:0;for(Yn=0;Yn<_n.length-1;Yn++)if(v.bBoxIntersect(_n[Yn],_n[Yn+1],yn)){Ca=Yi;break}}Ca&&Br(rr,Ca)}}Re._selections&&(Re._selections[Ut]=rr);var za=[ra];Re.automargin&&Ht._redrawFromAutoMarginCount&&cr===90?(Ca=cr,za.push(function(){Br(rr,cr)})):za.push(Ma),Re._tickAngles&&za.push(function(){Re._tickAngles[Ut]=Ca===null?u(Jt)?Jt:0:Ca});var Fa=function(){var bn=0,_n=0;return rr.each(function(Yn,Gn){var Qn=ma(this),ii=Qn.select(".text-math-group");if(ii.empty()){var si;Re._vals[Gn]&&(si=Re._vals[Gn].bb||j.bBox(Qn.node()),Re._vals[Gn].bb=si),bn=Math.max(bn,si.width),_n=Math.max(_n,si.height)}}),{labelsMaxW:bn,labelsMaxH:_n}},Da=Re._anchorAxis;if(Da&&(Da.autorange||Da.insiderange)&&nn(Re)&&!$(Ht,Re._id)&&(Ht._insideTickLabelsUpdaterange||(Ht._insideTickLabelsUpdaterange={}),Da.autorange&&(Ht._insideTickLabelsUpdaterange[Da._name+".autorange"]=Da.autorange,za.push(Fa)),Da.insiderange)){var Ka=Fa(),on=Re._id.charAt(0)==="y"?Ka.labelsMaxW:Ka.labelsMaxH;on+=2*Ee,Re.ticklabelposition==="inside"&&(on+=Re.ticklen||0);var Sn=Re.side==="right"||Re.side==="top"?1:-1,On=Sn===1?1:0,jn=Sn===1?0:1,dn=[];dn[jn]=Da.range[jn];var Rn=Da.range,oi=Da.r2p(Rn[On]),$i=Da.r2p(Rn[jn]),ln=Ht._insideTickLabelsUpdaterange[Da._name+".range"];if(ln){var Mn=Da.r2p(ln[On]),Xn=Da.r2p(ln[jn]),wi=Sn*(Re._id.charAt(0)==="y"?1:-1);wi*oi<wi*Mn&&(oi=Mn,dn[On]=Rn[On]=ln[On]),wi*$i>wi*Xn&&($i=Xn,dn[jn]=Rn[jn]=ln[jn])}var hi=Math.abs($i-oi);hi-on>0?(hi-=on,on*=1+on/hi):on=0,Re._id.charAt(0)!=="y"&&(on=-on),dn[On]=Da.p2r(Da.r2p(Rn[On])+Sn*on),Da.autorange==="min"||Da.autorange==="max reversed"?(dn[0]=null,Da._rangeInitial0=void 0,Da._rangeInitial1=void 0):(Da.autorange==="max"||Da.autorange==="min reversed")&&(dn[1]=null,Da._rangeInitial0=void 0,Da._rangeInitial1=void 0),Ht._insideTickLabelsUpdaterange[Da._name+".range"]=dn}var Un=v.syncOrAsync(za);return Un&&Un.then&&We._promises.push(Un),Un};function ba(We,Re,Zt){var Ht=Re._id+"divider",Rt=Zt.vals,Dt=Zt.layer.selectAll("path."+Ht).data(Rt,Er);Dt.exit().remove(),Dt.enter().insert("path",":first-child").classed(Ht,1).classed("crisp",1).call(s.stroke,Re.dividercolor).style("stroke-width",j.crispRound(We,Re.dividerwidth,1)+"px"),Dt.attr("transform",Zt.transFn).attr("d",Zt.path)}de.getPxPosition=function(We,Re){var Zt=We._fullLayout._size,Ht=Re._id.charAt(0),Rt=Re.side,Dt;if(Re.anchor!=="free"?Dt=Re._anchorAxis:Ht==="x"?Dt={_offset:Zt.t+(1-(Re.position||0))*Zt.h,_length:0}:Ht==="y"&&(Dt={_offset:Zt.l+(Re.position||0)*Zt.w+Re._shift,_length:0}),Rt==="top"||Rt==="left")return Dt._offset;if(Rt==="bottom"||Rt==="right")return Dt._offset+Dt._length};function Ga(We){var Re=We.title.font.size,Zt=(We.title.text.match(g.BR_TAG_ALL)||[]).length;return We.title.hasOwnProperty("standoff")?Re*(it+Zt*yt):Zt?Re*(Zt+1)*yt:Re}function Xa(We,Re){var Zt=We._fullLayout,Ht=Re._id,Rt=Ht.charAt(0),Dt=Re.title.font.size,Ut,pr=(Re.title.text.match(g.BR_TAG_ALL)||[]).length;if(Re.title.hasOwnProperty("standoff"))Re.side==="bottom"||Re.side==="right"?Ut=Re._depth+Re.title.standoff+Dt*it:(Re.side==="top"||Re.side==="left")&&(Ut=Re._depth+Re.title.standoff+Dt*(st+pr*yt));else{var jt=nn(Re);if(Re.type==="multicategory")Ut=Re._depth;else{var Jt=1.5*Dt;jt&&(Jt=.5*Dt,Re.ticks==="outside"&&(Jt+=Re.ticklen)),Ut=10+Jt+(Re.linewidth?Re.linewidth-1:0)}jt||(Rt==="x"?Ut+=Re.side==="top"?Dt*(Re.showticklabels?1:0):Dt*(Re.showticklabels?1.5:.5):Ut+=Re.side==="right"?Dt*(Re.showticklabels?1:.5):Dt*(Re.showticklabels?.5:0))}var cr=de.getPxPosition(We,Re),rr,Or,Br;Rt==="x"?(Or=Re._offset+Re._length/2,Br=Re.side==="top"?cr-Ut:cr+Ut):(Br=Re._offset+Re._length/2,Or=Re.side==="right"?cr+Ut:cr-Ut,rr={rotate:"-90",offset:0});var ra;if(Re.type!=="multicategory"){var Ca=Re._selections[Re._id+"tick"];if(ra={selection:Ca,side:Re.side},Ca&&Ca.node()&&Ca.node().parentNode){var Ma=j.getTranslate(Ca.node().parentNode);ra.offsetLeft=Ma.x,ra.offsetTop=Ma.y}Re.title.hasOwnProperty("standoff")&&(ra.pad=0)}return Re._titleStandoff=Ut,w.draw(We,Ht+"title",{propContainer:Re,propName:Re._name+".title.text",placeholder:Zt._dfltTitle[Rt],avoid:ra,transform:rr,attributes:{x:Or,y:Br,"text-anchor":"middle"}})}de.shouldShowZeroLine=function(We,Re,Zt){var Ht=v.simpleMap(Re.range,Re.r2l);return Ht[0]*Ht[1]<=0&&Re.zeroline&&(Re.type==="linear"||Re.type==="-")&&!(Re.rangebreaks&&Re.maskBreaks(0)===Me)&&(Aa(Re,0)||!Oa(We,Re,Zt,Ht)||va(We,Re))},de.clipEnds=function(We,Re){return Re.filter(function(Zt){return Aa(We,Zt.x)})};function Aa(We,Re){var Zt=We.l2p(Re);return Zt>1&&Zt<We._length-1}function Oa(We,Re,Zt,Ht){var Rt=Zt._mainAxis;if(!Rt)return;var Dt=We._fullLayout,Ut=Re._id.charAt(0),pr=de.counterLetter(Re._id),jt=Re._offset+(Math.abs(Ht[0])<Math.abs(Ht[1])==(Ut==="x")?0:Re._length);function Jt(ra){if(!ra.showline||!ra.linewidth)return!1;var Ca=Math.max((ra.linewidth+Re.zerolinewidth)/2,1);function Ma(Da){return typeof Da=="number"&&Math.abs(Da-jt)<Ca}if(Ma(ra._mainLinePosition)||Ma(ra._mainMirrorPosition))return!0;var za=ra._linepositions||{};for(var Fa in za)if(Ma(za[Fa][0])||Ma(za[Fa][1]))return!0}var cr=Dt._plots[Zt._mainSubplot];if(!(cr.mainplotinfo||cr).overlays.length)return Jt(Zt);for(var rr=de.list(We,pr),Or=0;Or<rr.length;Or++){var Br=rr[Or];if(Br._mainAxis===Rt&&Jt(Br))return!0}}function va(We,Re){for(var Zt=We._fullData,Ht=Re._mainSubplot,Rt=Re._id.charAt(0),Dt=0;Dt<Zt.length;Dt++){var Ut=Zt[Dt];if(Ut.visible===!0&&Ut.xaxis+Ut.yaxis===Ht&&(m.traceIs(Ut,"bar-like")&&Ut.orientation==={x:"h",y:"v"}[Rt]||Ut.fill&&Ut.fill.charAt(Ut.fill.length-1)===Rt))return!0}return!1}function ma(We){var Re=d.select(We),Zt=Re.select(".text-math-group");return Zt.empty()?Re.select("text"):Zt}de.allowAutoMargin=function(We){for(var Re=de.list(We,"",!0),Zt=0;Zt<Re.length;Zt++){var Ht=Re[Zt];Ht.automargin&&(c.allowAutoMargin(We,Va(Ht)),Ht.mirror&&c.allowAutoMargin(We,ja(Ht))),m.getComponentMethod("rangeslider","isVisible")(Ht)&&c.allowAutoMargin(We,$a(Ht))}};function Va(We){return We._id+".automargin"}function ja(We){return Va(We)+".mirror"}function $a(We){return We._id+".rangeslider"}de.swap=function(We,Re){for(var Zt=La(We,Re),Ht=0;Ht<Zt.length;Ht++)Ba(We,Zt[Ht].x,Zt[Ht].y)};function La(We,Re){var Zt=[],Ht,Rt;for(Ht=0;Ht<Re.length;Ht++){var Dt=[],Ut=We._fullData[Re[Ht]].xaxis,pr=We._fullData[Re[Ht]].yaxis;if(!(!Ut||!pr)){for(Rt=0;Rt<Zt.length;Rt++)(Zt[Rt].x.indexOf(Ut)!==-1||Zt[Rt].y.indexOf(pr)!==-1)&&Dt.push(Rt);if(!Dt.length){Zt.push({x:[Ut],y:[pr]});continue}var jt=Zt[Dt[0]],Jt;if(Dt.length>1)for(Rt=1;Rt<Dt.length;Rt++)Jt=Zt[Dt[Rt]],la(jt.x,Jt.x),la(jt.y,Jt.y);la(jt.x,[Ut]),la(jt.y,[pr])}}return Zt}function la(We,Re){for(var Zt=0;Zt<Re.length;Zt++)We.indexOf(Re[Zt])===-1&&We.push(Re[Zt])}function Ba(We,Re,Zt){var Ht=[],Rt=[],Dt=We.layout,Ut,pr;for(Ut=0;Ut<Re.length;Ut++)Ht.push(de.getFromId(We,Re[Ut]));for(Ut=0;Ut<Zt.length;Ut++)Rt.push(de.getFromId(We,Zt[Ut]));var jt=Object.keys(b),Jt=["anchor","domain","overlaying","position","side","tickangle","editType"],cr=["linear","log"];for(Ut=0;Ut<jt.length;Ut++){var rr=jt[Ut],Or=Ht[0][rr],Br=Rt[0][rr],ra=!0,Ca=!1,Ma=!1;if(!(rr.charAt(0)==="_"||typeof Or=="function"||Jt.indexOf(rr)!==-1)){for(pr=1;pr<Ht.length&&ra;pr++){var za=Ht[pr][rr];rr==="type"&&cr.indexOf(Or)!==-1&&cr.indexOf(za)!==-1&&Or!==za?Ca=!0:za!==Or&&(ra=!1)}for(pr=1;pr<Rt.length&&ra;pr++){var Fa=Rt[pr][rr];rr==="type"&&cr.indexOf(Br)!==-1&&cr.indexOf(Fa)!==-1&&Br!==Fa?Ma=!0:Rt[pr][rr]!==Br&&(ra=!1)}ra&&(Ca&&(Dt[Ht[0]._name].type="linear"),Ma&&(Dt[Rt[0]._name].type="linear"),un(Dt,rr,Ht,Rt,We._fullLayout._dfltTitle))}}for(Ut=0;Ut<We._fullLayout.annotations.length;Ut++){var Da=We._fullLayout.annotations[Ut];Re.indexOf(Da.xref)!==-1&&Zt.indexOf(Da.yref)!==-1&&v.swapAttrs(Dt.annotations[Ut],["?"])}}function un(We,Re,Zt,Ht,Rt){var Dt=v.nestedProperty,Ut=Dt(We[Zt[0]._name],Re).get(),pr=Dt(We[Ht[0]._name],Re).get(),jt;for(Re==="title"&&(Ut&&Ut.text===Rt.x&&(Ut.text=Rt.y),pr&&pr.text===Rt.y&&(pr.text=Rt.x)),jt=0;jt<Zt.length;jt++)Dt(We,Zt[jt]._name+"."+Re).set(pr);for(jt=0;jt<Ht.length;jt++)Dt(We,Ht[jt]._name+"."+Re).set(Ut)}function pn(We){return We._id==="angularaxis"}function qa(We,Re){for(var Zt=Re._rangebreaks.length,Ht=0;Ht<Zt;Ht++){var Rt=Re._rangebreaks[Ht];if(We>=Rt.min&&We<Rt.max)return Rt.max}return We}function nn(We){return(We.ticklabelposition||"").indexOf("inside")!==-1}function cn(We,Re){nn(We._anchorAxis||{})&&We._hideCounterAxisInsideTickLabels&&We._hideCounterAxisInsideTickLabels(Re)}function Cn(We,Re,Zt,Ht){var Rt=We.anchor!=="free"&&(We.overlaying===void 0||We.overlaying===!1)?We._id:We.overlaying,Dt;Ht?Dt=We.side==="right"?Re:-Re:Dt=Re,Rt in Zt||(Zt[Rt]={}),We.side in Zt[Rt]||(Zt[Rt][We.side]=0),Zt[Rt][We.side]+=Dt}function Ja(We,Re){return We.autoshift?Re[We.overlaying][We.side]:We.shift||0}function xn(We,Re){return/%f/.test(Re)?We>=be:/%L/.test(Re)?We>=me:/%[SX]/.test(Re)?We>=ue:/%M/.test(Re)?We>=Q:/%[HI]/.test(Re)?We>=pe:/%p/.test(Re)?We>=he:/%[Aadejuwx]/.test(Re)?We>=se:/%[UVW]/.test(Re)?We>=ye:/%[Bbm]/.test(Re)?We>=J:/%[q]/.test(Re)?We>=R:/%[Yy]/.test(Re)?We>=F:!0}}}),Ll=n({"src/plots/cartesian/autorange_options_defaults.js"(ce,fe){fe.exports=function(u,c,m){var v,p;if(m){var g=c==="reversed"||c==="min reversed"||c==="max reversed";v=m[g?1:0],p=m[g?0:1]}var w=u("autorangeoptions.minallowed",p===null?v:void 0),s=u("autorangeoptions.maxallowed",v===null?p:void 0);w===void 0&&u("autorangeoptions.clipmin"),s===void 0&&u("autorangeoptions.clipmax"),u("autorangeoptions.include")}}}),Ts=n({"src/plots/cartesian/range_defaults.js"(ce,fe){var d=Ll();fe.exports=function(c,m,v,p){var g=m._template||{},w=m.type||g.type||"-";v("minallowed"),v("maxallowed");var s=v("range");if(!s){var j;!p.noInsiderange&&w!=="log"&&(j=v("insiderange"),j&&(j[0]===null||j[1]===null)&&(m.insiderange=!1,j=void 0),j&&(s=v("range",j)))}var b=m.getAutorangeDflt(s,p),z=v("autorange",b),X;s&&(s[0]===null&&s[1]===null||(s[0]===null||s[1]===null)&&(z==="reversed"||z===!0)||s[0]!==null&&(z==="min"||z==="max reversed")||s[1]!==null&&(z==="max"||z==="min reversed"))&&(s=void 0,delete m.range,m.autorange=!0,X=!0),X||(b=m.getAutorangeDflt(s,p),z=v("autorange",b)),z&&(d(v,z,s),(w==="linear"||w==="-")&&v("rangemode")),m.cleanRange()}}}),Ac=n({"node_modules/mouse-event-offset/index.js"(ce,fe){var d={left:0,top:0};fe.exports=u;function u(m,v,p){v=v||m.currentTarget||m.srcElement,Array.isArray(p)||(p=[0,0]);var g=m.clientX||0,w=m.clientY||0,s=c(v);return p[0]=g-s.left,p[1]=w-s.top,p}function c(m){return m===window||m===document||m===document.body?d:m.getBoundingClientRect()}}}),fu=n({"node_modules/has-passive-events/index.js"(ce,fe){var d=qo();function u(){var c=!1;try{var m=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("test",null,m),window.removeEventListener("test",null,m)}catch{c=!1}return c}fe.exports=d&&u()}}),yf=n({"src/components/dragelement/align.js"(ce,fe){fe.exports=function(u,c,m,v,p){var g=(u-m)/(v-m),w=g+c/(v-m),s=(g+w)/2;return p==="left"||p==="bottom"?g:p==="center"||p==="middle"?s:p==="right"||p==="top"?w:g<2/3-s?g:w>4/3-s?w:s}}}),Bu=n({"src/components/dragelement/cursor.js"(ce,fe){var d=pa(),u=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];fe.exports=function(m,v,p,g){return p==="left"?m=0:p==="center"?m=1:p==="right"?m=2:m=d.constrain(Math.floor(m*3),0,2),g==="bottom"?v=0:g==="middle"?v=1:g==="top"?v=2:v=d.constrain(Math.floor(v*3),0,2),u[v][m]}}}),Hu=n({"src/components/dragelement/unhover.js"(ce,fe){var d=Ro(),u=Hn(),c=Lr().getGraphDiv,m=ee(),v=fe.exports={};v.wrapped=function(p,g,w){p=c(p),p._fullLayout&&u.clear(p._fullLayout._uid+m.HOVERID),v.raw(p,g,w)},v.raw=function(g,w){var s=g._fullLayout,j=g._hoverdata;w||(w={}),!(w.target&&!g._dragged&&d.triggerHandler(g,"plotly_beforehover",w)===!1)&&(s._hoverlayer.selectAll("g").remove(),s._hoverlayer.selectAll("line").remove(),s._hoverlayer.selectAll("circle").remove(),g._hoverdata=void 0,w.target&&j&&g.emit("plotly_unhover",{event:w,points:j}))}}}),rs=n({"src/components/dragelement/index.js"(ce,fe){var d=Ac(),u=Fo(),c=fu(),m=pa().removeElement,v=ui(),p=fe.exports={};p.align=yf(),p.getCursor=Bu();var g=Hu();p.unhover=g.wrapped,p.unhoverRaw=g.raw,p.init=function(b){var z=b.gd,X=1,N=z._context.doubleClickDelay,O=b.element,F,P,_,R,H,te,J,ye;z._mouseDownTime||(z._mouseDownTime=0),O.style.pointerEvents="all",O.onmousedown=pe,c?(O._ontouchstart&&O.removeEventListener("touchstart",O._ontouchstart),O._ontouchstart=pe,O.addEventListener("touchstart",pe,{passive:!1})):O.ontouchstart=pe;function se(me,be,ve){return Math.abs(me)<ve&&(me=0),Math.abs(be)<ve&&(be=0),[me,be]}var he=b.clampFn||se;function pe(me){z._dragged=!1,z._dragging=!0;var be=s(me);F=be[0],P=be[1],J=me.target,te=me,ye=me.buttons===2||me.ctrlKey,typeof me.clientX>"u"&&typeof me.clientY>"u"&&(me.clientX=F,me.clientY=P),_=new Date().getTime(),_-z._mouseDownTime<N?X+=1:(X=1,z._mouseDownTime=_),b.prepFn&&b.prepFn(me,F,P),u&&!ye?(H=w(),H.style.cursor=window.getComputedStyle(O).cursor):u||(H=document,R=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(O).cursor),document.addEventListener("mouseup",ue),document.addEventListener("touchend",ue),b.dragmode!==!1&&(me.preventDefault(),document.addEventListener("mousemove",Q),document.addEventListener("touchmove",Q,{passive:!1}))}function Q(me){me.preventDefault();var be=s(me),ve=b.minDrag||v.MINDRAG,Me=he(be[0]-F,be[1]-P,ve),ke=Me[0],le=Me[1];(ke||le)&&(z._dragged=!0,p.unhover(z,me)),z._dragged&&b.moveFn&&!ye&&(z._dragdata={element:O,dx:ke,dy:le},b.moveFn(ke,le))}function ue(me){if(delete z._dragdata,b.dragmode!==!1&&(me.preventDefault(),document.removeEventListener("mousemove",Q),document.removeEventListener("touchmove",Q)),document.removeEventListener("mouseup",ue),document.removeEventListener("touchend",ue),u?m(H):R&&(H.documentElement.style.cursor=R,R=null),!z._dragging){z._dragged=!1;return}if(z._dragging=!1,new Date().getTime()-z._mouseDownTime>N&&(X=Math.max(X-1,1)),z._dragged)b.doneFn&&b.doneFn();else{var be;te.target===J?be=te:(be={target:J,srcElement:J,toElement:J},Object.keys(te).concat(Object.keys(te.__proto__)).forEach(ve=>{var Me=te[ve];!be[ve]&&typeof Me!="function"&&(be[ve]=Me)})),b.clickFn&&b.clickFn(X,be),ye||J.dispatchEvent(new MouseEvent("click",me))}z._dragging=!1,z._dragged=!1}};function w(){var j=document.createElement("div");j.className="dragcover";var b=j.style;return b.position="fixed",b.left=0,b.right=0,b.top=0,b.bottom=0,b.zIndex=999999999,b.background="none",document.body.appendChild(j),j}p.coverSlip=w;function s(j){return d(j.changedTouches?j.changedTouches[0]:j,document.body)}}}),Ki=n({"src/lib/setcursor.js"(ce,fe){fe.exports=function(u,c){(u.attr("class")||"").split(" ").forEach(function(m){m.indexOf("cursor-")===0&&u.classed(m,!1)}),c&&u.classed("cursor-"+c,!0)}}}),vl=n({"src/lib/override_cursor.js"(ce,fe){var d=Ki(),u="data-savedcursor",c="!!";fe.exports=function(v,p){var g=v.attr(u);if(p){if(!g){for(var w=(v.attr("class")||"").split(" "),s=0;s<w.length;s++){var j=w[s];j.indexOf("cursor-")===0&&v.attr(u,j.substr(7)).classed(j,!1)}v.attr(u)||v.attr(u,c)}d(v,p)}else g&&(v.attr(u,null),g===c?d(v):d(v,g))}}}),hu=n({"src/components/legend/attributes.js"(ce,fe){var d=G(),u=Pe();fe.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:u.defaultLine,editType:"legend"},maxheight:{valType:"number",min:0,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:d({editType:"legend"}),grouptitlefont:d({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:d({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}}}),pl=n({"src/components/legend/helpers.js"(ce){ce.isGrouped=function(d){return(d.traceorder||"").indexOf("grouped")!==-1},ce.isVertical=function(d){return d.orientation!=="h"},ce.isReversed=function(d){return(d.traceorder||"").indexOf("reversed")!==-1}}}),bf=n({"src/components/legend/defaults.js"(ce,fe){var d=hr(),u=pa(),c=vn(),m=$e(),v=hu(),p=Vr(),g=pl();function w(s,j,b,z){var X=j[s]||{},N=c.newContainer(b,s);function O(yt,_e){return u.coerce(X,N,v,yt,_e)}var F=u.coerceFont(O,"font",b.font);O("bgcolor",b.paper_bgcolor),O("bordercolor");var P=O("visible");if(P){for(var _,R=function(yt,_e){var Ee=_._input,de=_;return u.coerce(Ee,de,m,yt,_e)},H=b.font||{},te=u.coerceFont(O,"grouptitlefont",H,{overrideDflt:{size:Math.round(H.size*1.1)}}),J=0,ye=!1,se="normal",he=(b.shapes||[]).filter(function(yt){return yt.showlegend}),pe=z.concat(he).filter(function(yt){return s===(yt.legend||"legend")}),Q=0;Q<pe.length;Q++)if(_=pe[Q],!!_.visible){var ue=_._isShape;(_.showlegend||_._dfltShowLegend&&!(_._module&&_._module.attributes&&_._module.attributes.showlegend&&_._module.attributes.showlegend.dflt===!1))&&(J++,_.showlegend&&(ye=!0,(!ue&&d.traceIs(_,"pie-like")||_._input.showlegend===!0)&&J++),u.coerceFont(R,"legendgrouptitle.font",te)),(!ue&&d.traceIs(_,"bar")&&b.barmode==="stack"||["tonextx","tonexty"].indexOf(_.fill)!==-1)&&(se=g.isGrouped({traceorder:se})?"grouped+reversed":"reversed"),_.legendgroup!==void 0&&_.legendgroup!==""&&(se=g.isReversed({traceorder:se})?"reversed+grouped":"grouped")}var me=u.coerce(j,b,p,"showlegend",ye&&J>(s==="legend"?1:0));if(me===!1&&(b[s]=void 0),!(me===!1&&!X.uirevision)&&(O("uirevision",b.uirevision),me!==!1)){O("borderwidth");var be=O("orientation"),ve=O("yref"),Me=O("xref"),ke=be==="h",le=ve==="paper",De=Me==="paper",Oe,He,Be,Ye="left";ke?(Oe=0,d.getComponentMethod("rangeslider","isVisible")(j.xaxis)?le?(He=1.1,Be="bottom"):(He=1,Be="top"):le?(He=-.1,Be="top"):(He=0,Be="bottom")):(He=1,Be="auto",De?Oe=1.02:(Oe=1,Ye="right")),u.coerce(X,N,{x:{valType:"number",editType:"legend",min:De?-2:0,max:De?3:1,dflt:Oe}},"x"),u.coerce(X,N,{y:{valType:"number",editType:"legend",min:le?-2:0,max:le?3:1,dflt:He}},"y"),O("traceorder",se),g.isGrouped(b[s])&&O("tracegroupgap"),O("entrywidth"),O("entrywidthmode"),O("indentation"),O("itemsizing"),O("itemwidth"),O("itemclick"),O("itemdoubleclick"),O("groupclick"),O("xanchor",Ye),O("yanchor",Be),O("maxheight"),O("valign"),u.noneOrAll(X,N,["x","y"]);var st=O("title.text");if(st){O("title.side",ke?"left":"top");var it=u.extendFlat({},F,{size:u.bigFont(F.size)});u.coerceFont(O,"title.font",it)}}}}fe.exports=function(j,b,z){var X,N=z.slice(),O=b.shapes;if(O)for(X=0;X<O.length;X++){var F=O[X];if(F.showlegend){var P={_input:F._input,visible:F.visible,showlegend:F.showlegend,legend:F.legend};N.push(P)}}var _=["legend"];for(X=0;X<N.length;X++)u.pushUnique(_,N[X].legend);for(b._legends=[],X=0;X<_.length;X++){var R=_[X];w(R,j,b,N),b[R]&&b[R].visible&&(b[R]._id=R),b._legends.push(R)}}}}),Sc=n({"src/components/legend/handle_click.js"(ce,fe){var d=hr(),u=pa(),c=u.pushUnique,m=!0;fe.exports=function(p,g,w){var s=g._fullLayout;if(g._dragged||g._editing)return;var j=s.legend.itemclick,b=s.legend.itemdoubleclick,z=s.legend.groupclick;w===1&&j==="toggle"&&b==="toggleothers"&&m&&g.data&&g._context.showTips&&u.notifier(u._(g,"Double-click on legend to isolate one trace"),"long"),m=!1;var X;if(w===1?X=j:w===2&&(X=b),!X)return;var N=z==="togglegroup",O=s.hiddenlabels?s.hiddenlabels.slice():[],F=p.data()[0][0];if(F.groupTitle&&F.noClick)return;var P=g._fullData,_=(s.shapes||[]).filter(function(nt){return nt.showlegend}),R=P.concat(_),H=F.trace;H._isShape&&(H=H._fullInput);var te=H.legendgroup,J,ye,se,he,pe,Q,ue={},me=[],be=[],ve=[];function Me(nt,pt){var Ke=me.indexOf(nt),gt=ue.visible;return gt||(gt=ue.visible=[]),me.indexOf(nt)===-1&&(me.push(nt),Ke=me.length-1),gt[Ke]=pt,Ke}var ke=(s.shapes||[]).map(function(nt){return nt._input}),le=!1;function De(nt,pt){ke[nt].visible=pt,le=!0}function Oe(nt,pt){if(!(F.groupTitle&&!N)){var Ke=nt._fullInput||nt,gt=Ke._isShape,Ft=Ke.index;Ft===void 0&&(Ft=Ke._index);var Xt=Ke.visible===!1?!1:pt;gt?De(Ft,Xt):Me(Ft,Xt)}}var He=H.legend,Be=H._fullInput,Ye=Be&&Be._isShape;if(!Ye&&d.traceIs(H,"pie-like")){var st=F.label,it=O.indexOf(st);if(X==="toggle")it===-1?O.push(st):O.splice(it,1);else if(X==="toggleothers"){var yt=it!==-1,_e=[];for(J=0;J<g.calcdata.length;J++){var Ee=g.calcdata[J];for(ye=0;ye<Ee.length;ye++){var de=Ee[ye],we=de.label;He===Ee[0].trace.legend&&st!==we&&(O.indexOf(we)===-1&&(yt=!0),c(O,we),_e.push(we))}}if(!yt)for(var je=0;je<_e.length;je++){var Ae=O.indexOf(_e[je]);Ae!==-1&&O.splice(Ae,1)}}d.call("_guiRelayout",g,"hiddenlabels",O)}else{var $=te&&te.length,oe=[],ge;if($)for(J=0;J<R.length;J++)ge=R[J],ge.visible&&ge.legendgroup===te&&oe.push(J);if(X==="toggle"){var Te;switch(H.visible){case!0:Te="legendonly";break;case!1:Te=!1;break;case"legendonly":Te=!0;break}if($)if(N)for(J=0;J<R.length;J++){var Ue=R[J];Ue.visible!==!1&&Ue.legendgroup===te&&Oe(Ue,Te)}else Oe(H,Te);else Oe(H,Te)}else if(X==="toggleothers"){var Ze,Je,ft,wt,Ct,Kt=!0;for(J=0;J<R.length;J++)if(Ct=R[J],Ze=Ct===H,ft=Ct.showlegend!==!0,!(Ze||ft)&&(Je=$&&Ct.legendgroup===te,!Je&&Ct.legend===He&&Ct.visible===!0&&!d.traceIs(Ct,"notLegendIsolatable"))){Kt=!1;break}for(J=0;J<R.length;J++)if(Ct=R[J],!(Ct.visible===!1||Ct.legend!==He)&&!d.traceIs(Ct,"notLegendIsolatable"))switch(H.visible){case"legendonly":Oe(Ct,!0);break;case!0:wt=Kt?!0:"legendonly",Ze=Ct===H,ft=Ct.showlegend!==!0&&!Ct.legendgroup,Je=Ze||$&&Ct.legendgroup===te,Oe(Ct,Je||ft?!0:wt);break}}for(J=0;J<be.length;J++)if(se=be[J],!!se){var $t=se.constructUpdate(),Wt=Object.keys($t);for(ye=0;ye<Wt.length;ye++)he=Wt[ye],Q=ue[he]=ue[he]||[],Q[ve[J]]=$t[he]}for(pe=Object.keys(ue),J=0;J<pe.length;J++)for(he=pe[J],ye=0;ye<me.length;ye++)ue[he].hasOwnProperty(ye)||(ue[he][ye]=void 0);le?d.call("_guiUpdate",g,ue,{shapes:ke},me):d.call("_guiRestyle",g,ue,me)}}}}),Xs=n({"src/components/legend/constants.js"(ce,fe){fe.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}}}),du=n({"src/components/legend/get_legend_data.js"(ce,fe){var d=hr(),u=pl();fe.exports=function(m,v,p){var g=v._inHover,w=u.isGrouped(v),s=u.isReversed(v),j={},b=[],z=!1,X={},N=0,O=0,F,P;function _(Oe,He,Be){if(v.visible!==!1&&!(p&&Oe!==v._id))if(He===""||!u.isGrouped(v)){var Ye="~~i"+N;b.push(Ye),j[Ye]=[Be],N++}else b.indexOf(He)===-1?(b.push(He),z=!0,j[He]=[Be]):j[He].push(Be)}for(F=0;F<m.length;F++){var R=m[F],H=R[0],te=H.trace,J=te.legend,ye=te.legendgroup;if(!(!g&&(!te.visible||!te.showlegend)))if(d.traceIs(te,"pie-like"))for(X[ye]||(X[ye]={}),P=0;P<R.length;P++){var se=R[P].label;X[ye][se]||(_(J,ye,{label:se,color:R[P].color,i:R[P].i,trace:te,pts:R[P].pts}),X[ye][se]=!0,O=Math.max(O,(se||"").length))}else _(J,ye,H),O=Math.max(O,(te.name||"").length)}if(!b.length)return[];var he=!z||!w,pe=[];for(F=0;F<b.length;F++){var Q=j[b[F]];he?pe.push(Q[0]):pe.push(Q)}for(he&&(pe=[pe]),F=0;F<pe.length;F++){var ue=1/0;for(P=0;P<pe[F].length;P++){var me=pe[F][P].trace.legendrank;ue>me&&(ue=me)}pe[F][0]._groupMinRank=ue,pe[F][0]._preGroupSort=F}var be=function(Oe,He){return Oe[0]._groupMinRank-He[0]._groupMinRank||Oe[0]._preGroupSort-He[0]._preGroupSort},ve=function(Oe,He){return Oe.trace.legendrank-He.trace.legendrank||Oe._preSort-He._preSort};for(pe.forEach(function(Oe,He){Oe[0]._preGroupSort=He}),pe.sort(be),F=0;F<pe.length;F++){pe[F].forEach(function(Oe,He){Oe._preSort=He}),pe[F].sort(ve);var Me=pe[F][0].trace,ke=null;for(P=0;P<pe[F].length;P++){var le=pe[F][P].trace.legendgrouptitle;if(le&&le.text){ke=le,g&&(le.font=v._groupTitleFont);break}}if(s&&pe[F].reverse(),ke){var De=!1;for(P=0;P<pe[F].length;P++)if(d.traceIs(pe[F][P].trace,"pie-like")){De=!0;break}pe[F].unshift({i:-1,groupTitle:ke,noClick:De,trace:{showlegend:Me.showlegend,legendgroup:Me.legendgroup,visible:v.groupclick==="toggleitem"?!0:Me.visible}})}for(P=0;P<pe[F].length;P++)pe[F][P]=[pe[F][P]]}return v._lgroupsLength=pe.length,v._maxNameLength=O,pe}}}),Nl=n({"src/traces/pie/helpers.js"(ce){var fe=pa();function d(u){return u.indexOf("e")!==-1?u.replace(/[.]?0+e/,"e"):u.indexOf(".")!==-1?u.replace(/[.]?0+$/,""):u}ce.formatPiePercent=function(c,m){var v=d((c*100).toPrecision(3));return fe.numSeparate(v,m)+"%"},ce.formatPieValue=function(c,m){var v=d(c.toPrecision(10));return fe.numSeparate(v,m)},ce.getFirstFilled=function(c,m){if(fe.isArrayOrTypedArray(c))for(var v=0;v<m.length;v++){var p=c[m[v]];if(p||p===0||p==="")return p}},ce.castOption=function(c,m){if(fe.isArrayOrTypedArray(c))return ce.getFirstFilled(c,m);if(c)return c},ce.getRotationAngle=function(u){return(u==="auto"?0:u)*Math.PI/180}}}),xf=n({"src/traces/pie/fill_one.js"(ce,fe){var d=ni(),u=Ve();fe.exports=function(m,v,p,g){var w=p.marker.pattern;w&&w.shape?d.pointStyle(m,p,g,v):u.fill(m,v.color)}}}),Ol=n({"src/traces/pie/style_one.js"(ce,fe){var d=Ve(),u=Nl().castOption,c=xf();fe.exports=function(v,p,g,w){var s=g.marker.line,j=u(s.color,p.pts)||d.defaultLine,b=u(s.width,p.pts)||0;v.call(c,p,g,w).style("stroke-width",b).call(d.stroke,j)}}}),Tc=n({"src/components/legend/style.js"(ce,fe){var d=k(),u=hr(),c=pa(),m=c.strTranslate,v=ni(),p=Ve(),g=So().extractOpts,w=Oi(),s=Ol(),j=Nl().castOption,b=Xs(),z=12,X=5,N=2,O=10,F=5;fe.exports=function(te,J,ye){var se=J._fullLayout;ye||(ye=se.legend);var he=ye.itemsizing==="constant",pe=ye.itemwidth,Q=(pe+b.itemGap*2)/2,ue=m(Q,0),me=function(_e,Ee,de,we){var je;if(_e+1)je=_e;else if(Ee&&Ee.width>0)je=Ee.width;else return 0;return he?we:Math.min(je,de)};te.each(function(_e){var Ee=d.select(this),de=c.ensureSingle(Ee,"g","layers");de.style("opacity",_e[0].trace.opacity);var we=ye.indentation,je=ye.valign,Ae=_e[0].lineHeight,$=_e[0].height;if(je==="middle"&&we===0||!Ae||!$)de.attr("transform",null);else{var oe={top:1,bottom:-1}[je],ge=oe*(.5*(Ae-$+3))||0,Te=ye.indentation;de.attr("transform",m(Te,ge))}var Ue=de.selectAll("g.legendfill").data([_e]);Ue.enter().append("g").classed("legendfill",!0);var Ze=de.selectAll("g.legendlines").data([_e]);Ze.enter().append("g").classed("legendlines",!0);var Je=de.selectAll("g.legendsymbols").data([_e]);Je.enter().append("g").classed("legendsymbols",!0),Je.selectAll("g.legendpoints").data([_e]).enter().append("g").classed("legendpoints",!0)}).each(yt).each(Me).each(le).each(ke).each(Oe).each(st).each(Ye).each(be).each(ve).each(He).each(Be);function be(_e){var Ee=_(_e),de=Ee.showFill,we=Ee.showLine,je=Ee.showGradientLine,Ae=Ee.showGradientFill,$=Ee.anyFill,oe=Ee.anyLine,ge=_e[0],Te=ge.trace,Ue,Ze,Je=g(Te),ft=Je.colorscale,wt=Je.reversescale,Ct=function(gt){if(gt.size())if(de)v.fillGroupStyle(gt,J,!0);else{var Ft="legendfill-"+Te.uid;v.gradient(gt,J,Ft,P(wt),ft,"fill")}},Kt=function(gt){if(gt.size()){var Ft="legendline-"+Te.uid;v.lineGroupStyle(gt),v.gradient(gt,J,Ft,P(wt),ft,"stroke")}},$t=w.hasMarkers(Te)||!$?"M5,0":oe?"M5,-2":"M5,-3",Wt=d.select(this),nt=Wt.select(".legendfill").selectAll("path").data(de||Ae?[_e]:[]);if(nt.enter().append("path").classed("js-fill",!0),nt.exit().remove(),nt.attr("d",$t+"h"+pe+"v6h-"+pe+"z").call(Ct),we||je){var pt=me(void 0,Te.line,O,X);Ze=c.minExtend(Te,{line:{width:pt}}),Ue=[c.minExtend(ge,{trace:Ze})]}var Ke=Wt.select(".legendlines").selectAll("path").data(we||je?[Ue]:[]);Ke.enter().append("path").classed("js-line",!0),Ke.exit().remove(),Ke.attr("d",$t+(je?"l"+pe+",0.0001":"h"+pe)).call(we?v.lineGroupStyle:Kt)}function ve(_e){var Ee=_(_e),de=Ee.anyFill,we=Ee.anyLine,je=Ee.showLine,Ae=Ee.showMarker,$=_e[0],oe=$.trace,ge=!Ae&&!we&&!de&&w.hasText(oe),Te,Ue;function Ze(nt,pt,Ke,gt){var Ft=c.nestedProperty(oe,nt).get(),Xt=c.isArrayOrTypedArray(Ft)&&pt?pt(Ft):Ft;if(he&&Xt&&gt!==void 0&&(Xt=gt),Ke){if(Xt<Ke[0])return Ke[0];if(Xt>Ke[1])return Ke[1]}return Xt}function Je(nt){return $._distinct&&$.index&&nt[$.index]?nt[$.index]:nt[0]}if(Ae||ge||je){var ft={},wt={};if(Ae){ft.mc=Ze("marker.color",Je),ft.mx=Ze("marker.symbol",Je),ft.mo=Ze("marker.opacity",c.mean,[.2,1]),ft.mlc=Ze("marker.line.color",Je),ft.mlw=Ze("marker.line.width",c.mean,[0,5],N),wt.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Ct=Ze("marker.size",c.mean,[2,16],z);ft.ms=Ct,wt.marker.size=Ct}je&&(wt.line={width:Ze("line.width",Je,[0,10],X)}),ge&&(ft.tx="Aa",ft.tp=Ze("textposition",Je),ft.ts=10,ft.tc=Ze("textfont.color",Je),ft.tf=Ze("textfont.family",Je),ft.tw=Ze("textfont.weight",Je),ft.ty=Ze("textfont.style",Je),ft.tv=Ze("textfont.variant",Je),ft.tC=Ze("textfont.textcase",Je),ft.tE=Ze("textfont.lineposition",Je),ft.tS=Ze("textfont.shadow",Je)),Te=[c.minExtend($,ft)],Ue=c.minExtend(oe,wt),Ue.selectedpoints=null,Ue.texttemplate=null}var Kt=d.select(this).select("g.legendpoints"),$t=Kt.selectAll("path.scatterpts").data(Ae?Te:[]);$t.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",ue),$t.exit().remove(),$t.call(v.pointStyle,Ue,J),Ae&&(Te[0].mrc=3);var Wt=Kt.selectAll("g.pointtext").data(ge?Te:[]);Wt.enter().append("g").classed("pointtext",!0).append("text").attr("transform",ue),Wt.exit().remove(),Wt.selectAll("text").call(v.textPointStyle,Ue,J)}function Me(_e){var Ee=_e[0].trace,de=Ee.type==="waterfall";if(_e[0]._distinct&&de){var we=_e[0].trace[_e[0].dir].marker;return _e[0].mc=we.color,_e[0].mlw=we.line.width,_e[0].mlc=we.line.color,De(_e,this,"waterfall")}var je=[];Ee.visible&&de&&(je=_e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var Ae=d.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(je);Ae.enter().append("path").classed("legendwaterfall",!0).attr("transform",ue).style("stroke-miterlimit",1),Ae.exit().remove(),Ae.each(function($){var oe=d.select(this),ge=Ee[$[0]].marker,Te=me(void 0,ge.line,F,N);oe.attr("d",$[1]).style("stroke-width",Te+"px").call(p.fill,ge.color),Te&&oe.call(p.stroke,ge.line.color)})}function ke(_e){De(_e,this)}function le(_e){De(_e,this,"funnel")}function De(_e,Ee,de){var we=_e[0].trace,je=we.marker||{},Ae=je.line||{},$=je.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",oe=de?we.visible&&we.type===de:u.traceIs(we,"bar"),ge=d.select(Ee).select("g.legendpoints").selectAll("path.legend"+de).data(oe?[_e]:[]);ge.enter().append("path").classed("legend"+de,!0).attr("d",$).attr("transform",ue),ge.exit().remove(),ge.each(function(Te){var Ue=d.select(this),Ze=Te[0],Je=me(Ze.mlw,je.line,F,N);Ue.style("stroke-width",Je+"px");var ft=Ze.mcc;if(!ye._inHover&&"mc"in Ze){var wt=g(je),Ct=wt.mid;Ct===void 0&&(Ct=(wt.max+wt.min)/2),ft=v.tryColorscale(je,"")(Ct)}var Kt=ft||Ze.mc||je.color,$t=je.pattern,Wt=v.getPatternAttr,nt=$t&&(Wt($t.shape,0,"")||Wt($t.path,0,""));if(nt){var pt=Wt($t.bgcolor,0,null),Ke=Wt($t.fgcolor,0,null),gt=$t.fgopacity,Ft=R($t.size,8,10),Xt=R($t.solidity,.5,1),or="legend-"+we.uid;Ue.call(v.pattern,"legend",J,or,nt,Ft,Xt,ft,$t.fillmode,pt,Ke,gt)}else Ue.call(p.fill,Kt);Je&&p.stroke(Ue,Ze.mlc||Ae.color)})}function Oe(_e){var Ee=_e[0].trace,de=d.select(this).select("g.legendpoints").selectAll("path.legendbox").data(Ee.visible&&u.traceIs(Ee,"box-violin")?[_e]:[]);de.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ue),de.exit().remove(),de.each(function(){var we=d.select(this);if((Ee.boxpoints==="all"||Ee.points==="all")&&p.opacity(Ee.fillcolor)===0&&p.opacity((Ee.line||{}).color)===0){var je=c.minExtend(Ee,{marker:{size:he?z:c.constrain(Ee.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});de.call(v.pointStyle,je,J)}else{var Ae=me(void 0,Ee.line,F,N);we.style("stroke-width",Ae+"px").call(p.fill,Ee.fillcolor),Ae&&p.stroke(we,Ee.line.color)}})}function He(_e){var Ee=_e[0].trace,de=d.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(Ee.visible&&Ee.type==="candlestick"?[_e,_e]:[]);de.enter().append("path").classed("legendcandle",!0).attr("d",function(we,je){return je?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",ue).style("stroke-miterlimit",1),de.exit().remove(),de.each(function(we,je){var Ae=d.select(this),$=Ee[je?"increasing":"decreasing"],oe=me(void 0,$.line,F,N);Ae.style("stroke-width",oe+"px").call(p.fill,$.fillcolor),oe&&p.stroke(Ae,$.line.color)})}function Be(_e){var Ee=_e[0].trace,de=d.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(Ee.visible&&Ee.type==="ohlc"?[_e,_e]:[]);de.enter().append("path").classed("legendohlc",!0).attr("d",function(we,je){return je?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",ue).style("stroke-miterlimit",1),de.exit().remove(),de.each(function(we,je){var Ae=d.select(this),$=Ee[je?"increasing":"decreasing"],oe=me(void 0,$.line,F,N);Ae.style("fill","none").call(v.dashLine,$.line.dash,oe),oe&&p.stroke(Ae,$.line.color)})}function Ye(_e){it(_e,this,"pie")}function st(_e){it(_e,this,"funnelarea")}function it(_e,Ee,de){var we=_e[0],je=we.trace,Ae=de?je.visible&&je.type===de:u.traceIs(je,de),$=d.select(Ee).select("g.legendpoints").selectAll("path.legend"+de).data(Ae?[_e]:[]);if($.enter().append("path").classed("legend"+de,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ue),$.exit().remove(),$.size()){var oe=je.marker||{},ge=me(j(oe.line.width,we.pts),oe.line,F,N),Te="pieLike",Ue=c.minExtend(je,{marker:{line:{width:ge}}},Te),Ze=c.minExtend(we,{trace:Ue},Te);s($,Ze,Ue,J)}}function yt(_e){var Ee=_e[0].trace,de,we=[];if(Ee.visible)switch(Ee.type){case"histogram2d":case"heatmap":we=[["M-15,-2V4H15V-2Z"]],de=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":we=[["M-6,-6V6H6V-6Z"]],de=!0;break;case"densitymapbox":case"densitymap":we=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],de="radial";break;case"cone":we=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],de=!1;break;case"streamtube":we=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],de=!1;break;case"surface":we=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],de=!0;break;case"mesh3d":we=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],de=!1;break;case"volume":we=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],de=!0;break;case"isosurface":we=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],de=!1;break}var je=d.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(we);je.enter().append("path").classed("legend3dandfriends",!0).attr("transform",ue).style("stroke-miterlimit",1),je.exit().remove(),je.each(function(Ae,$){var oe=d.select(this),ge=g(Ee),Te=ge.colorscale,Ue=ge.reversescale,Ze=function(Ct){if(Ct.size()){var Kt="legendfill-"+Ee.uid;v.gradient(Ct,J,Kt,P(Ue,de==="radial"),Te,"fill")}},Je;if(Te){if(!de){var wt=Te.length;Je=$===0?Te[Ue?wt-1:0][1]:$===1?Te[Ue?0:wt-1][1]:Te[Math.floor((wt-1)/2)][1]}}else{var ft=Ee.vertexcolor||Ee.facecolor||Ee.color;Je=c.isArrayOrTypedArray(ft)?ft[$]||ft[0]:ft}oe.attr("d",Ae[0]),Je?oe.call(p.fill,Je):oe.call(Ze)})}};function P(H,te){var J=te?"radial":"horizontal";return J+(H?"":"reversed")}function _(H){var te=H[0].trace,J=te.contours,ye=w.hasLines(te),se=w.hasMarkers(te),he=te.visible&&te.fill&&te.fill!=="none",pe=!1,Q=!1;if(J){var ue=J.coloring;ue==="lines"?pe=!0:ye=ue==="none"||ue==="heatmap"||J.showlines,J.type==="constraint"?he=J._operation!=="=":(ue==="fill"||ue==="heatmap")&&(Q=!0)}return{showMarker:se,showLine:ye,showFill:he,showGradientLine:pe,showGradientFill:Q,anyLine:ye||pe,anyFill:he||Q}}function R(H,te,J){return H&&c.isArrayOrTypedArray(H)?te:H>J?J:H}}}),Pl=n({"src/components/legend/draw.js"(ce,fe){var d=k(),u=pa(),c=Di(),m=hr(),v=Ro(),p=rs(),g=ni(),w=Ve(),s=Ui(),j=Sc(),b=Xs(),z=xi(),X=z.LINE_SPACING,N=z.FROM_TL,O=z.FROM_BR,F=du(),P=Tc(),_=pl(),R=1,H=/^legend[0-9]*$/;fe.exports=function(He,Be){if(Be)J(He,Be);else{var Ye=He._fullLayout,st=Ye._legends,it=Ye._infolayer.selectAll('[class^="legend"]');it.each(function(){var de=d.select(this),we=de.attr("class"),je=we.split(" ")[0];je.match(H)&&st.indexOf(je)===-1&&de.remove()});for(var yt=0;yt<st.length;yt++){var _e=st[yt],Ee=He._fullLayout[_e];J(He,Ee)}}};function te(Oe,He,Be){if(!(He.title.side!=="top center"&&He.title.side!=="top right")){var Ye=He.title.font,st=Ye.size*X,it=0,yt=Oe.node(),_e=g.bBox(yt).width;He.title.side==="top center"?it=.5*(He._width-2*Be-2*b.titlePad-_e):He.title.side==="top right"&&(it=He._width-2*Be-2*b.titlePad-_e),s.positionText(Oe,Be+b.titlePad+it,Be+st)}}function J(Oe,He){var Be=He||{},Ye=Oe._fullLayout,st=De(Be),it,yt,_e=Be._inHover;if(_e?(yt=Be.layer,it="hover"):(yt=Ye._infolayer,it=st),!!yt){it+=Ye._uid,Oe._legendMouseDownTime||(Oe._legendMouseDownTime=0);var Ee;if(_e){if(!Be.entries)return;Ee=F(Be.entries,Be)}else{for(var de=(Oe.calcdata||[]).slice(),we=Ye.shapes,je=0;je<we.length;je++){var Ae=we[je];if(Ae.showlegend){var $={_isShape:!0,_fullInput:Ae,index:Ae._index,name:Ae.name||Ae.label.text||"shape "+Ae._index,legend:Ae.legend,legendgroup:Ae.legendgroup,legendgrouptitle:Ae.legendgrouptitle,legendrank:Ae.legendrank,legendwidth:Ae.legendwidth,showlegend:Ae.showlegend,visible:Ae.visible,opacity:Ae.opacity,mode:Ae.type==="line"?"lines":"markers",line:Ae.line,marker:{line:Ae.line,color:Ae.fillcolor,size:12,symbol:Ae.type==="rect"?"square":Ae.type==="circle"?"circle":"hexagon2"}};de.push([{trace:$}])}}Ee=Ye.showlegend&&F(de,Be,Ye._legends.length>1)}var oe=Ye.hiddenlabels||[];if(!_e&&(!Ye.showlegend||!Ee.length))return yt.selectAll("."+st).remove(),Ye._topdefs.select("#"+it).remove(),c.autoMargin(Oe,st);var ge=u.ensureSingle(yt,"g",st,function($t){_e||$t.attr("pointer-events","all")}),Te=u.ensureSingleById(Ye._topdefs,"clipPath",it,function($t){$t.append("rect")}),Ue=u.ensureSingle(ge,"rect","bg",function($t){$t.attr("shape-rendering","crispEdges")});Ue.call(w.stroke,Be.bordercolor).call(w.fill,Be.bgcolor).style("stroke-width",Be.borderwidth+"px");var Ze=u.ensureSingle(ge,"g","scrollbox"),Je=Be.title;Be._titleWidth=0,Be._titleHeight=0;var ft;Je.text?(ft=u.ensureSingle(Ze,"text",st+"titletext"),ft.attr("text-anchor","start").call(g.font,Je.font).text(Je.text),ue(ft,Ze,Oe,Be,R)):Ze.selectAll("."+st+"titletext").remove();var wt=u.ensureSingle(ge,"rect","scrollbar",function($t){$t.attr(b.scrollBarEnterAttrs).call(w.fill,b.scrollBarColor)}),Ct=Ze.selectAll("g.groups").data(Ee);Ct.enter().append("g").attr("class","groups"),Ct.exit().remove();var Kt=Ct.selectAll("g.traces").data(u.identity);Kt.enter().append("g").attr("class","traces"),Kt.exit().remove(),Kt.style("opacity",function($t){var Wt=$t[0].trace;return m.traceIs(Wt,"pie-like")?oe.indexOf($t[0].label)!==-1?.5:1:Wt.visible==="legendonly"?.5:1}).each(function(){d.select(this).call(he,Oe,Be)}).call(P,Oe,Be).each(function(){_e||d.select(this).call(Q,Oe,st)}),u.syncOrAsync([c.previousPromises,function(){return ve(Oe,Ct,Kt,Be)},function(){var $t=Ye._size,Wt=Be.borderwidth,nt=Be.xref==="paper",pt=Be.yref==="paper";if(Je.text&&te(ft,Be,Wt),!_e){var Ke,gt;nt?Ke=$t.l+$t.w*Be.x-N[ke(Be)]*Be._width:Ke=Ye.width*Be.x-N[ke(Be)]*Be._width,pt?gt=$t.t+$t.h*(1-Be.y)-N[le(Be)]*Be._effHeight:gt=Ye.height*(1-Be.y)-N[le(Be)]*Be._effHeight;var Ft=Me(Oe,st,Ke,gt);if(Ft)return;if(Ye.margin.autoexpand){var Xt=Ke,or=gt;Ke=nt?u.constrain(Ke,0,Ye.width-Be._width):Xt,gt=pt?u.constrain(gt,0,Ye.height-Be._effHeight):or,Ke!==Xt&&u.log("Constrain "+st+".x to make legend fit inside graph"),gt!==or&&u.log("Constrain "+st+".y to make legend fit inside graph")}g.setTranslate(ge,Ke,gt)}if(wt.on(".drag",null),ge.on("wheel",null),_e||Be._height<=Be._maxHeight||Oe._context.staticPlot){var sr=Be._effHeight;_e&&(sr=Be._height),Ue.attr({width:Be._width-Wt,height:sr-Wt,x:Wt/2,y:Wt/2}),g.setTranslate(Ze,0,0),Te.select("rect").attr({width:Be._width-2*Wt,height:sr-2*Wt,x:Wt,y:Wt}),g.setClipUrl(Ze,it,Oe),g.setRect(wt,0,0,0,0),delete Be._scrollY}else{var dr=Math.max(b.scrollBarMinHeight,Be._effHeight*Be._effHeight/Be._height),wr=Be._effHeight-dr-2*b.scrollBarMargin,xr=Be._height-Be._effHeight,Pr=wr/xr,nr=Math.min(Be._scrollY||0,xr);Ue.attr({width:Be._width-2*Wt+b.scrollBarWidth+b.scrollBarMargin,height:Be._effHeight-Wt,x:Wt/2,y:Wt/2}),Te.select("rect").attr({width:Be._width-2*Wt+b.scrollBarWidth+b.scrollBarMargin,height:Be._effHeight-2*Wt,x:Wt,y:Wt+nr}),g.setClipUrl(Ze,it,Oe),Le(nr,dr,Pr),ge.on("wheel",function(){nr=u.constrain(Be._scrollY+d.event.deltaY/wr*xr,0,xr),Le(nr,dr,Pr),nr!==0&&nr!==xr&&d.event.preventDefault()});var jr,ta,Nr,Jr=function(Ot,qt,ir){var _r=(ir-qt)/Pr+Ot;return u.constrain(_r,0,xr)},vt=function(Ot,qt,ir){var _r=(qt-ir)/Pr+Ot;return u.constrain(_r,0,xr)},Mt=d.behavior.drag().on("dragstart",function(){var Ot=d.event.sourceEvent;Ot.type==="touchstart"?jr=Ot.changedTouches[0].clientY:jr=Ot.clientY,Nr=nr}).on("drag",function(){var Ot=d.event.sourceEvent;Ot.buttons===2||Ot.ctrlKey||(Ot.type==="touchmove"?ta=Ot.changedTouches[0].clientY:ta=Ot.clientY,nr=Jr(Nr,jr,ta),Le(nr,dr,Pr))});wt.call(Mt);var xt=d.behavior.drag().on("dragstart",function(){var Ot=d.event.sourceEvent;Ot.type==="touchstart"&&(jr=Ot.changedTouches[0].clientY,Nr=nr)}).on("drag",function(){var Ot=d.event.sourceEvent;Ot.type==="touchmove"&&(ta=Ot.changedTouches[0].clientY,nr=vt(Nr,jr,ta),Le(nr,dr,Pr))});Ze.call(xt)}function Le(Ot,qt,ir){Be._scrollY=Oe._fullLayout[st]._scrollY=Ot,g.setTranslate(Ze,0,-Ot),g.setRect(wt,Be._width,b.scrollBarMargin+Ot*ir,b.scrollBarWidth,qt),Te.select("rect").attr("y",Wt+Ot)}if(Oe._context.edits.legendPosition){var ot,ct,ut,Pt;ge.classed("cursor-move",!0),p.init({element:ge.node(),gd:Oe,prepFn:function(Ot){if(Ot.target!==wt.node()){var qt=g.getTranslate(ge);ut=qt.x,Pt=qt.y}},moveFn:function(Ot,qt){if(ut!==void 0&&Pt!==void 0){var ir=ut+Ot,_r=Pt+qt;g.setTranslate(ge,ir,_r),ot=p.align(ir,Be._width,$t.l,$t.l+$t.w,Be.xanchor),ct=p.align(_r+Be._height,-Be._height,$t.t+$t.h,$t.t,Be.yanchor)}},doneFn:function(){if(ot!==void 0&&ct!==void 0){var Ot={};Ot[st+".x"]=ot,Ot[st+".y"]=ct,m.call("_guiRelayout",Oe,Ot)}},clickFn:function(Ot,qt){var ir=yt.selectAll("g.traces").filter(function(){var _r=this.getBoundingClientRect();return qt.clientX>=_r.left&&qt.clientX<=_r.right&&qt.clientY>=_r.top&&qt.clientY<=_r.bottom});ir.size()>0&&se(Oe,ge,ir,Ot,qt)}})}}],Oe)}}function ye(Oe,He,Be){var Ye=Oe[0],st=Ye.width,it=He.entrywidthmode,yt=Ye.trace.legendwidth||He.entrywidth;return it==="fraction"?He._maxWidth*yt:Be+(yt||st)}function se(Oe,He,Be,Ye,st){var it=Be.data()[0][0].trace,yt={event:st,node:Be.node(),curveNumber:it.index,expandedIndex:it.index,data:Oe.data,layout:Oe.layout,frames:Oe._transitionData._frames,config:Oe._context,fullData:Oe._fullData,fullLayout:Oe._fullLayout};it._group&&(yt.group=it._group),m.traceIs(it,"pie-like")&&(yt.label=Be.datum()[0].label);var _e=v.triggerHandler(Oe,"plotly_legendclick",yt);if(Ye===1){if(_e===!1)return;He._clickTimeout=setTimeout(function(){Oe._fullLayout&&j(Be,Oe,Ye)},Oe._context.doubleClickDelay)}else if(Ye===2){He._clickTimeout&&clearTimeout(He._clickTimeout),Oe._legendMouseDownTime=0;var Ee=v.triggerHandler(Oe,"plotly_legenddoubleclick",yt);Ee!==!1&&_e!==!1&&j(Be,Oe,Ye)}}function he(Oe,He,Be){var Ye=De(Be),st=Oe.data()[0][0],it=st.trace,yt=m.traceIs(it,"pie-like"),_e=!Be._inHover&&He._context.edits.legendText&&!yt,Ee=Be._maxNameLength,de,we;st.groupTitle?(de=st.groupTitle.text,we=st.groupTitle.font):(we=Be.font,Be.entries?de=st.text:(de=yt?st.label:it.name,it._meta&&(de=u.templateString(de,it._meta))));var je=u.ensureSingle(Oe,"text",Ye+"text");je.attr("text-anchor","start").call(g.font,we).text(_e?pe(de,Ee):de);var Ae=Be.indentation+Be.itemwidth+b.itemGap*2;s.positionText(je,Ae,0),_e?je.call(s.makeEditable,{gd:He,text:de}).call(ue,Oe,He,Be).on("edit",function($){this.text(pe($,Ee)).call(ue,Oe,He,Be);var oe=st.trace._fullInput||{},ge={};return ge.name=$,oe._isShape?m.call("_guiRelayout",He,"shapes["+it.index+"].name",ge.name):m.call("_guiRestyle",He,ge,it.index)}):ue(je,Oe,He,Be)}function pe(Oe,He){var Be=Math.max(4,He);if(Oe&&Oe.trim().length>=Be/2)return Oe;Oe=Oe||"";for(var Ye=Be-Oe.length;Ye>0;Ye--)Oe+=" ";return Oe}function Q(Oe,He,Be){var Ye=He._context.doubleClickDelay,st,it=1,yt=u.ensureSingle(Oe,"rect",Be+"toggle",function(_e){He._context.staticPlot||_e.style("cursor","pointer").attr("pointer-events","all"),_e.call(w.fill,"rgba(0,0,0,0)")});He._context.staticPlot||(yt.on("mousedown",function(){st=new Date().getTime(),st-He._legendMouseDownTime<Ye?it+=1:(it=1,He._legendMouseDownTime=st)}),yt.on("mouseup",function(){if(!(He._dragged||He._editing)){var _e=He._fullLayout[Be];new Date().getTime()-He._legendMouseDownTime>Ye&&(it=Math.max(it-1,1)),se(He,_e,Oe,it,d.event)}}))}function ue(Oe,He,Be,Ye,st){Ye._inHover&&Oe.attr("data-notex",!0),s.convertToTspans(Oe,Be,function(){me(He,Be,Ye,st)})}function me(Oe,He,Be,Ye){var st=Oe.data()[0][0];if(!Be._inHover&&st&&!st.trace.showlegend){Oe.remove();return}var it=Oe.select("g[class*=math-group]"),yt=it.node(),_e=De(Be);Be||(Be=He._fullLayout[_e]);var Ee=Be.borderwidth,de;Ye===R?de=Be.title.font:st.groupTitle?de=st.groupTitle.font:de=Be.font;var we=de.size*X,je,Ae;if(yt){var $=g.bBox(yt);je=$.height,Ae=$.width,Ye===R?g.setTranslate(it,Ee,Ee+je*.75):g.setTranslate(it,0,je*.25)}else{var oe="."+_e+(Ye===R?"title":"")+"text",ge=Oe.select(oe),Te=s.lineCount(ge),Ue=ge.node();if(je=we*Te,Ae=Ue?g.bBox(Ue).width:0,Ye===R)Be.title.side==="left"&&(Ae+=b.itemGap*2),s.positionText(ge,Ee+b.titlePad,Ee+we);else{var Ze=b.itemGap*2+Be.indentation+Be.itemwidth;st.groupTitle&&(Ze=b.itemGap,Ae-=Be.indentation+Be.itemwidth),s.positionText(ge,Ze,-we*((Te-1)/2-.3))}}Ye===R?(Be._titleWidth=Ae,Be._titleHeight=je):(st.lineHeight=we,st.height=Math.max(je,16)+3,st.width=Ae)}function be(Oe){var He=0,Be=0,Ye=Oe.title.side;return Ye&&(Ye.indexOf("left")!==-1&&(He=Oe._titleWidth),Ye.indexOf("top")!==-1&&(Be=Oe._titleHeight)),[He,Be]}function ve(Oe,He,Be,Ye){var st=Oe._fullLayout,it=De(Ye);Ye||(Ye=st[it]);var yt=st._size,_e=_.isVertical(Ye),Ee=_.isGrouped(Ye),de=Ye.entrywidthmode==="fraction",we=Ye.borderwidth,je=2*we,Ae=b.itemGap,$=Ye.indentation+Ye.itemwidth+Ae*2,oe=2*(we+Ae),ge=le(Ye),Te=Ye.y<0||Ye.y===0&&ge==="top",Ue=Ye.y>1||Ye.y===1&&ge==="bottom",Ze=Ye.tracegroupgap,Je={};const{orientation:ft,yref:wt}=Ye;let{maxheight:Ct}=Ye;const Kt=Te||Ue||ft!=="v"||wt!=="paper";Ct||(Ct=Kt?.5:1);const $t=Kt?st.height:yt.h;Ye._maxHeight=Math.max(Ct>1?Ct:Ct*$t,30);var Wt=0;Ye._width=0,Ye._height=0;var nt=be(Ye);if(_e)Be.each(function(Le){var ot=Le[0].height;g.setTranslate(this,we+nt[0],we+nt[1]+Ye._height+ot/2+Ae),Ye._height+=ot,Ye._width=Math.max(Ye._width,Le[0].width)}),Wt=$+Ye._width,Ye._width+=Ae+$+je,Ye._height+=oe,Ee&&(He.each(function(Le,ot){g.setTranslate(this,0,ot*Ye.tracegroupgap)}),Ye._height+=(Ye._lgroupsLength-1)*Ye.tracegroupgap);else{var pt=ke(Ye),Ke=Ye.x<0||Ye.x===0&&pt==="right",gt=Ye.x>1||Ye.x===1&&pt==="left",Ft=Ue||Te,Xt=st.width/2;Ye._maxWidth=Math.max(Ke?Ft&&pt==="left"?yt.l+yt.w:Xt:gt?Ft&&pt==="right"?yt.r+yt.w:Xt:yt.w,2*$);var or=0,sr=0;Be.each(function(Le){var ot=ye(Le,Ye,$);or=Math.max(or,ot),sr+=ot}),Wt=null;var dr=0;if(Ee){var wr=0,xr=0,Pr=0;He.each(function(){var Le=0,ot=0;d.select(this).selectAll("g.traces").each(function(ut){var Pt=ye(ut,Ye,$),Ot=ut[0].height;g.setTranslate(this,nt[0],nt[1]+we+Ae+Ot/2+ot),ot+=Ot,Le=Math.max(Le,Pt),Je[ut[0].trace.legendgroup]=Le});var ct=Le+Ae;xr>0&&ct+we+xr>Ye._maxWidth?(dr=Math.max(dr,xr),xr=0,Pr+=wr+Ze,wr=ot):wr=Math.max(wr,ot),g.setTranslate(this,xr,Pr),xr+=ct}),Ye._width=Math.max(dr,xr)+we,Ye._height=Pr+wr+oe}else{var nr=Be.size(),jr=sr+je+(nr-1)*Ae<Ye._maxWidth,ta=0,Nr=0,Jr=0,vt=0;Be.each(function(Le){var ot=Le[0].height,ct=ye(Le,Ye,$),ut=jr?ct:or;de||(ut+=Ae),ut+we+Nr-Ae>=Ye._maxWidth&&(dr=Math.max(dr,vt),Nr=0,Jr+=ta,Ye._height+=ta,ta=0),g.setTranslate(this,nt[0]+we+Nr,nt[1]+we+Jr+ot/2+Ae),vt=Nr+ct+Ae,Nr+=ut,ta=Math.max(ta,ot)}),jr?(Ye._width=Nr+je,Ye._height=ta+oe):(Ye._width=Math.max(dr,vt)+je,Ye._height+=ta+oe)}}Ye._width=Math.ceil(Math.max(Ye._width+nt[0],Ye._titleWidth+2*(we+b.titlePad))),Ye._height=Math.ceil(Math.max(Ye._height+nt[1],Ye._titleHeight+2*(we+b.itemGap))),Ye._effHeight=Math.min(Ye._height,Ye._maxHeight);var Mt=Oe._context.edits,xt=Mt.legendText||Mt.legendPosition;Be.each(function(Le){var ot=d.select(this).select("."+it+"toggle"),ct=Le[0].height,ut=Le[0].trace.legendgroup,Pt=ye(Le,Ye,$);Ee&&ut!==""&&(Pt=Je[ut]);var Ot=xt?$:Wt||Pt;!_e&&!de&&(Ot+=Ae/2),g.setRect(ot,0,-ct/2,Ot,ct)})}function Me(Oe,He,Be,Ye){var st=Oe._fullLayout,it=st[He],yt=ke(it),_e=le(it),Ee=it.xref==="paper",de=it.yref==="paper";Oe._fullLayout._reservedMargin[He]={};var we=it.y<.5?"b":"t",je=it.x<.5?"l":"r",Ae={r:st.width-Be,l:Be+it._width,b:st.height-Ye,t:Ye+it._effHeight};if(Ee&&de)return c.autoMargin(Oe,He,{x:it.x,y:it.y,l:it._width*N[yt],r:it._width*O[yt],b:it._effHeight*O[_e],t:it._effHeight*N[_e]});Ee?Oe._fullLayout._reservedMargin[He][we]=Ae[we]:de||it.orientation==="v"?Oe._fullLayout._reservedMargin[He][je]=Ae[je]:Oe._fullLayout._reservedMargin[He][we]=Ae[we]}function ke(Oe){return u.isRightAnchor(Oe)?"right":u.isCenterAnchor(Oe)?"center":"left"}function le(Oe){return u.isBottomAnchor(Oe)?"bottom":u.isMiddleAnchor(Oe)?"middle":"top"}function De(Oe){return Oe._id||"legend"}}}),Uu=n({"src/components/fx/hover.js"(ce){var fe=k(),d=B(),u=A(),c=pa(),m=c.pushUnique,v=c.strTranslate,p=c.strRotate,g=Ro(),w=Ui(),s=vl(),j=ni(),b=Ve(),z=rs(),X=mi(),N=ui().zindexSeparator,O=hr(),F=ts(),P=ee(),_=bf(),R=Pl(),H=P.YANGLE,te=Math.PI*H/180,J=1/Math.sin(te),ye=Math.cos(te),se=Math.sin(te),he=P.HOVERARROWSIZE,pe=P.HOVERTEXTPAD,Q={box:!0,ohlc:!0,violin:!0,candlestick:!0},ue={scatter:!0,scattergl:!0,splom:!0};function me($,oe){return $.distance-oe.distance}ce.hover=function(oe,ge,Te,Ue){oe=c.getGraphDiv(oe);var Ze=ge.target;c.throttle(oe._fullLayout._uid+P.HOVERID,P.HOVERMINTIME,function(){be(oe,ge,Te,Ue,Ze)})},ce.loneHover=function(oe,ge){var Te=!0;Array.isArray(oe)||(Te=!1,oe=[oe]);var Ue=ge.gd,Ze=we(Ue),Je=je(Ue),ft=oe.map(function(gt){var Ft=gt._x0||gt.x0||gt.x||0,Xt=gt._x1||gt.x1||gt.x||0,or=gt._y0||gt.y0||gt.y||0,sr=gt._y1||gt.y1||gt.y||0,dr=gt.eventData;if(dr){var wr=Math.min(Ft,Xt),xr=Math.max(Ft,Xt),Pr=Math.min(or,sr),nr=Math.max(or,sr),jr=gt.trace;if(O.traceIs(jr,"gl3d")){var ta=Ue._fullLayout[jr.scene]._scene.container,Nr=ta.offsetLeft,Jr=ta.offsetTop;wr+=Nr,xr+=Nr,Pr+=Jr,nr+=Jr}dr.bbox={x0:wr+Je,x1:xr+Je,y0:Pr+Ze,y1:nr+Ze},ge.inOut_bbox&&ge.inOut_bbox.push(dr.bbox)}else dr=!1;return{color:gt.color||b.defaultLine,x0:gt.x0||gt.x||0,x1:gt.x1||gt.x||0,y0:gt.y0||gt.y||0,y1:gt.y1||gt.y||0,xLabel:gt.xLabel,yLabel:gt.yLabel,zLabel:gt.zLabel,text:gt.text,name:gt.name,idealAlign:gt.idealAlign,borderColor:gt.borderColor,fontFamily:gt.fontFamily,fontSize:gt.fontSize,fontColor:gt.fontColor,fontWeight:gt.fontWeight,fontStyle:gt.fontStyle,fontVariant:gt.fontVariant,nameLength:gt.nameLength,textAlign:gt.textAlign,trace:gt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:gt.hovertemplate||!1,hovertemplateLabels:gt.hovertemplateLabels||!1,eventData:dr}}),wt=!1,Ct=ke(ft,{gd:Ue,hovermode:"closest",rotateLabels:wt,bgColor:ge.bgColor||b.background,container:fe.select(ge.container),outerContainer:ge.outerContainer||ge.container}),Kt=Ct.hoverLabels,$t=5,Wt=0,nt=0;Kt.sort(function(gt,Ft){return gt.y0-Ft.y0}).each(function(gt,Ft){var Xt=gt.y0-gt.by/2;Xt-$t<Wt?gt.offset=Wt-Xt+$t:gt.offset=0,Wt=Xt+gt.by+gt.offset,Ft===ge.anchorIndex&&(nt=gt.offset)}).each(function(gt){gt.offset-=nt});var pt=Ue._fullLayout._invScaleX,Ke=Ue._fullLayout._invScaleY;return Be(Kt,wt,pt,Ke),Te?Kt:Kt.node()};function be($,oe,ge,Te,Ue){ge||(ge="xy"),typeof ge=="string"&&(ge=ge.split(N)[0]);var Ze=Array.isArray(ge)?ge:[ge],Je,ft=$._fullLayout,wt=ft.hoversubplots,Ct=ft._plots||[],Kt=Ct[ge],$t=ft._has("cartesian"),Wt=oe.hovermode||ft.hovermode,nt=(Wt||"").charAt(0)==="x",pt=(Wt||"").charAt(0)==="y",Ke,gt;if($t&&(nt||pt)&&wt==="axis"){for(var Ft=Ze.length,Xt=0;Xt<Ft;Xt++)if(Je=Ze[Xt],Ct[Je]){Ke=X.getFromId($,Je,"x"),gt=X.getFromId($,Je,"y");var or=(nt?Ke:gt)._subplotsWith;if(or&&or.length)for(var sr=0;sr<or.length;sr++)m(Ze,or[sr])}}if(Kt&&wt!=="single"){var dr=Kt.overlays.map(function(ln){return ln.id});Ze=Ze.concat(dr)}for(var wr=Ze.length,xr=new Array(wr),Pr=new Array(wr),nr=!1,jr=0;jr<wr;jr++)if(Je=Ze[jr],Ct[Je])nr=!0,xr[jr]=Ct[Je].xaxis,Pr[jr]=Ct[Je].yaxis;else if(ft[Je]&&ft[Je]._subplot){var ta=ft[Je]._subplot;xr[jr]=ta.xaxis,Pr[jr]=ta.yaxis}else{c.warn("Unrecognized subplot: "+Je);return}if(Wt&&!nr&&(Wt="closest"),["x","y","closest","x unified","y unified"].indexOf(Wt)===-1||!$.calcdata||$.querySelector(".zoombox")||$._dragging)return z.unhoverRaw($,oe);var Nr=ft.hoverdistance;Nr===-1&&(Nr=1/0);var Jr=ft.spikedistance;Jr===-1&&(Jr=1/0);var vt=[],Mt=[],xt,Le,ot,ct,ut,Pt,Ot,qt,ir,_r,Bt,gr,Ar,Er={hLinePoint:null,vLinePoint:null},ba=!1;if(Array.isArray(oe))for(Wt="array",ot=0;ot<oe.length;ot++)ut=$.calcdata[oe[ot].curveNumber||0],ut&&(Pt=ut[0].trace,ut[0].trace.hoverinfo!=="skip"&&(Mt.push(ut),Pt.orientation==="h"&&(ba=!0)));else{var Ga=$.calcdata.slice();for(Ga.sort(function(ln,Mn){var Xn=ln[0].trace.zorder||0,wi=Mn[0].trace.zorder||0;return Xn-wi}),ct=0;ct<Ga.length;ct++)ut=Ga[ct],Pt=ut[0].trace,Pt.hoverinfo!=="skip"&&F.isTraceInSubplots(Pt,Ze)&&(Mt.push(ut),Pt.orientation==="h"&&(ba=!0));var Xa=!Ue,Aa,Oa;if(Xa)"xpx"in oe?Aa=oe.xpx:Aa=xr[0]._length/2,"ypx"in oe?Oa=oe.ypx:Oa=Pr[0]._length/2;else{if(g.triggerHandler($,"plotly_beforehover",oe)===!1)return;var va=Ue.getBoundingClientRect();Aa=oe.clientX-va.left,Oa=oe.clientY-va.top,ft._calcInverseTransform($);var ma=c.apply3DTransform(ft._invTransform)(Aa,Oa);if(Aa=ma[0],Oa=ma[1],Aa<0||Aa>xr[0]._length||Oa<0||Oa>Pr[0]._length)return z.unhoverRaw($,oe)}if(oe.pointerX=Aa+xr[0]._offset,oe.pointerY=Oa+Pr[0]._offset,"xval"in oe?xt=F.flat(Ze,oe.xval):xt=F.p2c(xr,Aa),"yval"in oe?Le=F.flat(Ze,oe.yval):Le=F.p2c(Pr,Oa),!d(xt[0])||!d(Le[0]))return c.warn("Fx.hover failed",oe,$),z.unhoverRaw($,oe)}var Va=1/0;function ja(ln,Mn){for(ct=0;ct<Mt.length;ct++)if(ut=Mt[ct],!(!ut||!ut[0]||!ut[0].trace)&&(Pt=ut[0].trace,!(Pt.visible!==!0||Pt._length===0)&&["carpet","contourcarpet"].indexOf(Pt._module.name)===-1)){if(ir=Wt,F.isUnifiedHover(ir)&&(ir=ir.charAt(0)),Pt.type==="splom"?(qt=0,Ot=Ze[qt]):(Ot=F.getSubplot(Pt),qt=Ze.indexOf(Ot)),gr={cd:ut,trace:Pt,xa:xr[qt],ya:Pr[qt],maxHoverDistance:Nr,maxSpikeDistance:Jr,index:!1,distance:Math.min(Va,Nr),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:b.defaultLine,name:Pt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ft[Ot]&&(gr.subplot=ft[Ot]._subplot),ft._splomScenes&&ft._splomScenes[Pt.uid]&&(gr.scene=ft._splomScenes[Pt.uid]),ir==="array"){var Xn=oe[ct];"pointNumber"in Xn?(gr.index=Xn.pointNumber,ir="closest"):(ir="","xval"in Xn&&(_r=Xn.xval,ir="x"),"yval"in Xn&&(Bt=Xn.yval,ir=ir?"closest":"y"))}else ln!==void 0&&Mn!==void 0?(_r=ln,Bt=Mn):(_r=xt[qt],Bt=Le[qt]);if(Ar=vt.length,Nr!==0)if(Pt._module&&Pt._module.hoverPoints){var wi=Pt._module.hoverPoints(gr,_r,Bt,ir,{finiteRange:!0,hoverLayer:ft._hoverlayer,hoversubplots:wt,gd:$});if(wi)for(var hi,Un=0;Un<wi.length;Un++)hi=wi[Un],d(hi.x0)&&d(hi.y0)&&vt.push(Ye(hi,Wt))}else c.log("Unrecognized trace type in hover:",Pt);if(Wt==="closest"&&vt.length>Ar&&(vt.splice(0,Ar),Va=vt[0].distance),$t&&Jr!==0&&vt.length===0){gr.distance=Jr,gr.index=!1;var bn=Pt._module.hoverPoints(gr,_r,Bt,"closest",{hoverLayer:ft._hoverlayer});if(bn&&(bn=bn.filter(function(si){return si.spikeDistance<=Jr})),bn&&bn.length){var _n,Yn=bn.filter(function(si){return si.xa.showspikes&&si.xa.spikesnap!=="hovered data"});if(Yn.length){var Gn=Yn[0];d(Gn.x0)&&d(Gn.y0)&&(_n=La(Gn),(!Er.vLinePoint||Er.vLinePoint.spikeDistance>_n.spikeDistance)&&(Er.vLinePoint=_n))}var Qn=bn.filter(function(si){return si.ya.showspikes&&si.ya.spikesnap!=="hovered data"});if(Qn.length){var ii=Qn[0];d(ii.x0)&&d(ii.y0)&&(_n=La(ii),(!Er.hLinePoint||Er.hLinePoint.spikeDistance>_n.spikeDistance)&&(Er.hLinePoint=_n))}}}}}ja();function $a(ln,Mn,Xn){for(var wi=null,hi=1/0,Un,bn=0;bn<ln.length;bn++)Ke&&Ke._id!==ln[bn].xa._id||gt&&gt._id!==ln[bn].ya._id||(Un=ln[bn].spikeDistance,Xn&&bn===0&&(Un=-1/0),Un<=hi&&Un<=Mn&&(wi=ln[bn],hi=Un));return wi}function La(ln){return ln?{xa:ln.xa,ya:ln.ya,x:ln.xSpike!==void 0?ln.xSpike:(ln.x0+ln.x1)/2,y:ln.ySpike!==void 0?ln.ySpike:(ln.y0+ln.y1)/2,distance:ln.distance,spikeDistance:ln.spikeDistance,curveNumber:ln.trace.index,color:ln.color,pointNumber:ln.index}:null}var la={fullLayout:ft,container:ft._hoverlayer,event:oe};$._spikepoints;var Ba={vLinePoint:Er.vLinePoint,hLinePoint:Er.hLinePoint};$._spikepoints=Ba;var un=function(){var ln=vt.filter(function(Xn){return Ke&&Ke._id===Xn.xa._id&&gt&&gt._id===Xn.ya._id}),Mn=vt.filter(function(Xn){return!(Ke&&Ke._id===Xn.xa._id&&gt&&gt._id===Xn.ya._id)});ln.sort(me),Mn.sort(me),vt=ln.concat(Mn),vt=Ee(vt,Wt)};un();var pn=Wt.charAt(0),qa=(pn==="x"||pn==="y")&&vt[0]&&ue[vt[0].trace.type];if($t&&Jr!==0&&vt.length!==0){var nn=vt.filter(function(ln){return ln.ya.showspikes}),cn=$a(nn,Jr,qa);Er.hLinePoint=La(cn);var Cn=vt.filter(function(ln){return ln.xa.showspikes}),Ja=$a(Cn,Jr,qa);Er.vLinePoint=La(Ja)}if(vt.length===0){var xn=z.unhoverRaw($,oe);return $t&&(Er.hLinePoint!==null||Er.vLinePoint!==null)&&yt()&&st($,Er,la),xn}if($t&&yt()&&st($,Er,la),F.isXYhover(ir)&&vt[0].length!==0&&vt[0].trace.type!=="splom"){var We=vt[0];Q[We.trace.type]?vt=vt.filter(function(ln){return ln.trace.index===We.trace.index}):vt=[We];var Re=vt.length,Zt=de("x",We,ft),Ht=de("y",We,ft);ja(Zt,Ht);var Rt=[],Dt={},Ut=0,pr=function(ln){var Mn=Q[ln.trace.type]?ve(ln):ln.trace.index;if(!Dt[Mn])Ut++,Dt[Mn]=Ut,Rt.push(ln);else{var Xn=Dt[Mn]-1,wi=Rt[Xn];Xn>0&&Math.abs(ln.distance)<Math.abs(wi.distance)&&(Rt[Xn]=ln)}},jt;for(jt=0;jt<Re;jt++)pr(vt[jt]);for(jt=vt.length-1;jt>Re-1;jt--)pr(vt[jt]);vt=Rt,un()}var Jt=$._hoverdata,cr=[],rr=we($),Or=je($);for(ot=0;ot<vt.length;ot++){var Br=vt[ot],ra=F.makeEventData(Br,Br.trace,Br.cd);if(Br.hovertemplate!==!1){var Ca=!1;Br.cd[Br.index]&&Br.cd[Br.index].ht&&(Ca=Br.cd[Br.index].ht),Br.hovertemplate=Ca||Br.trace.hovertemplate||!1}if(Br.xa&&Br.ya){var Ma=Br.x0+Br.xa._offset,za=Br.x1+Br.xa._offset,Fa=Br.y0+Br.ya._offset,Da=Br.y1+Br.ya._offset,Ka=Math.min(Ma,za),on=Math.max(Ma,za),Sn=Math.min(Fa,Da),On=Math.max(Fa,Da);ra.bbox={x0:Ka+Or,x1:on+Or,y0:Sn+rr,y1:On+rr}}Br.eventData=[ra],cr.push(ra)}$._hoverdata=cr;var jn=Wt==="y"&&(Mt.length>1||vt.length>1)||Wt==="closest"&&ba&&vt.length>1,dn=b.combine(ft.plot_bgcolor||b.background,ft.paper_bgcolor),Rn=ke(vt,{gd:$,hovermode:Wt,rotateLabels:jn,bgColor:dn,container:ft._hoverlayer,outerContainer:ft._paper.node(),commonLabelOpts:ft.hoverlabel,hoverdistance:ft.hoverdistance}),oi=Rn.hoverLabels;if(F.isUnifiedHover(Wt)||(De(oi,jn,ft,Rn.commonLabelBoundingBox),Be(oi,jn,ft._invScaleX,ft._invScaleY)),Ue&&Ue.tagName){var $i=O.getComponentMethod("annotations","hasClickToShow")($,cr);s(fe.select(Ue),$i?"pointer":"")}!Ue||Te||!it($,oe,Jt)||(Jt&&$.emit("plotly_unhover",{event:oe,points:Jt}),$.emit("plotly_hover",{event:oe,points:$._hoverdata,xaxes:xr,yaxes:Pr,xvals:xt,yvals:Le}))}function ve($){return[$.trace.index,$.index,$.x0,$.y0,$.name,$.attr,$.xa?$.xa._id:"",$.ya?$.ya._id:""].join(",")}var Me=/<extra>([\s\S]*)<\/extra>/;function ke($,oe){var ge=oe.gd,Te=ge._fullLayout,Ue=oe.hovermode,Ze=oe.rotateLabels,Je=oe.bgColor,ft=oe.container,wt=oe.outerContainer,Ct=oe.commonLabelOpts||{};if($.length===0)return[[]];var Kt=oe.fontFamily||P.HOVERFONT,$t=oe.fontSize||P.HOVERFONTSIZE,Wt=oe.fontWeight||Te.font.weight,nt=oe.fontStyle||Te.font.style,pt=oe.fontVariant||Te.font.variant,Ke=oe.fontTextcase||Te.font.textcase,gt=oe.fontLineposition||Te.font.lineposition,Ft=oe.fontShadow||Te.font.shadow,Xt=$[0],or=Xt.xa,sr=Xt.ya,dr=Ue.charAt(0),wr=dr+"Label",xr=Xt[wr];if(xr===void 0&&or.type==="multicategory")for(var Pr=0;Pr<$.length&&(xr=$[Pr][wr],xr===void 0);Pr++);var nr=Ae(ge,wt),jr=nr.top,ta=nr.width,Nr=nr.height,Jr=xr!==void 0&&Xt.distance<=oe.hoverdistance&&(Ue==="x"||Ue==="y");if(Jr){var vt=!0,Mt,xt;for(Mt=0;Mt<$.length;Mt++)if(vt&&$[Mt].zLabel===void 0&&(vt=!1),xt=$[Mt].hoverinfo||$[Mt].trace.hoverinfo,xt){var Le=Array.isArray(xt)?xt:xt.split("+");if(Le.indexOf("all")===-1&&Le.indexOf(Ue)===-1){Jr=!1;break}}vt&&(Jr=!1)}var ot=ft.selectAll("g.axistext").data(Jr?[0]:[]);ot.enter().append("g").classed("axistext",!0),ot.exit().remove();var ct={minX:0,maxX:0,minY:0,maxY:0};if(ot.each(function(){var Re=fe.select(this),Zt=c.ensureSingle(Re,"path","",function(jn){jn.style({"stroke-width":"1px"})}),Ht=c.ensureSingle(Re,"text","",function(jn){jn.attr("data-notex",1)}),Rt=Ct.bgcolor||b.defaultLine,Dt=Ct.bordercolor||b.contrast(Rt),Ut=b.contrast(Rt),pr=Ct.font,jt={weight:pr.weight||Wt,style:pr.style||nt,variant:pr.variant||pt,textcase:pr.textcase||Ke,lineposition:pr.lineposition||gt,shadow:pr.shadow||Ft,family:pr.family||Kt,size:pr.size||$t,color:pr.color||Ut};Zt.style({fill:Rt,stroke:Dt}),Ht.text(xr).call(j.font,jt).call(w.positionText,0,0).call(w.convertToTspans,ge),Re.attr("transform","");var Jt=Ae(ge,Ht.node()),cr,rr;if(Ue==="x"){var Or=or.side==="top"?"-":"";Ht.attr("text-anchor","middle").call(w.positionText,0,or.side==="top"?jr-Jt.bottom-he-pe:jr-Jt.top+he+pe),cr=or._offset+(Xt.x0+Xt.x1)/2,rr=sr._offset+(or.side==="top"?0:sr._length);var Br=Jt.width/2+pe,ra=cr;cr<Br?ra=Br:cr>Te.width-Br&&(ra=Te.width-Br),Zt.attr("d","M"+(cr-ra)+",0L"+(cr-ra+he)+","+Or+he+"H"+Br+"v"+Or+(pe*2+Jt.height)+"H"+-Br+"V"+Or+he+"H"+(cr-ra-he)+"Z"),cr=ra,ct.minX=cr-Br,ct.maxX=cr+Br,or.side==="top"?(ct.minY=rr-(pe*2+Jt.height),ct.maxY=rr-pe):(ct.minY=rr+pe,ct.maxY=rr+(pe*2+Jt.height))}else{var Ca,Ma,za;sr.side==="right"?(Ca="start",Ma=1,za="",cr=or._offset+or._length):(Ca="end",Ma=-1,za="-",cr=or._offset),rr=sr._offset+(Xt.y0+Xt.y1)/2,Ht.attr("text-anchor",Ca),Zt.attr("d","M0,0L"+za+he+","+he+"V"+(pe+Jt.height/2)+"h"+za+(pe*2+Jt.width)+"V-"+(pe+Jt.height/2)+"H"+za+he+"V-"+he+"Z"),ct.minY=rr-(pe+Jt.height/2),ct.maxY=rr+(pe+Jt.height/2),sr.side==="right"?(ct.minX=cr+he,ct.maxX=cr+he+(pe*2+Jt.width)):(ct.minX=cr-he-(pe*2+Jt.width),ct.maxX=cr-he);var Fa=Jt.height/2,Da=jr-Jt.top-Fa,Ka="clip"+Te._uid+"commonlabel"+sr._id,on;if(cr<Jt.width+2*pe+he){on="M-"+(he+pe)+"-"+Fa+"h-"+(Jt.width-pe)+"V"+Fa+"h"+(Jt.width-pe)+"Z";var Sn=Jt.width-cr+pe;w.positionText(Ht,Sn,Da),Ca==="end"&&Ht.selectAll("tspan").each(function(){var jn=fe.select(this),dn=j.tester.append("text").text(jn.text()).call(j.font,jt),Rn=Ae(ge,dn.node());Math.round(Rn.width)<Math.round(Jt.width)&&jn.attr("x",Sn-Rn.width),dn.remove()})}else w.positionText(Ht,Ma*(pe+he),Da),on=null;var On=Te._topclips.selectAll("#"+Ka).data(on?[0]:[]);On.enter().append("clipPath").attr("id",Ka).append("path"),On.exit().remove(),On.select("path").attr("d",on),j.setClipUrl(Ht,on?Ka:null,ge)}Re.attr("transform",v(cr,rr))}),F.isUnifiedHover(Ue)){ft.selectAll("g.hovertext").remove();var ut=$.filter(function(Re){return Re.hoverinfo!=="none"});if(ut.length===0)return[];var Pt=Te.hoverlabel,Ot=Pt.font,qt=ut[0],ir=((Ue==="x unified"?qt.xa:qt.ya).unifiedhovertitle||{}).text,_r=ir?c.hovertemplateString(ir,{},Te._d3locale,Ue==="x unified"?{xa:qt.xa,x:qt.xVal}:{ya:qt.ya,y:qt.yVal}):xr,Bt={showlegend:!0,legend:{title:{text:_r,font:Ot},font:Ot,bgcolor:Pt.bgcolor,bordercolor:Pt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:Te.legend?Te.legend.traceorder:void 0,orientation:"v"}},gr={font:Ot};_(Bt,gr,ge._fullData);var Ar=gr.legend;Ar.entries=[];for(var Er=0;Er<ut.length;Er++){var ba=ut[Er];if(ba.hoverinfo!=="none"){var Ga=le(ba,!0,Ue,Te,xr),Xa=Ga[0],Aa=Ga[1];ba.name=Aa,Aa!==""?ba.text=Aa+" : "+Xa:ba.text=Xa;var Oa=ba.cd[ba.index];Oa&&(Oa.mc&&(ba.mc=Oa.mc),Oa.mcc&&(ba.mc=Oa.mcc),Oa.mlc&&(ba.mlc=Oa.mlc),Oa.mlcc&&(ba.mlc=Oa.mlcc),Oa.mlw&&(ba.mlw=Oa.mlw),Oa.mrc&&(ba.mrc=Oa.mrc),Oa.dir&&(ba.dir=Oa.dir)),ba._distinct=!0,Ar.entries.push([ba])}}Ar.entries.sort(function(Re,Zt){return Re[0].trace.index-Zt[0].trace.index}),Ar.layer=ft,Ar._inHover=!0,Ar._groupTitleFont=Pt.grouptitlefont,R(ge,Ar);var va=ft.select("g.legend"),ma=Ae(ge,va.node()),Va=ma.width+2*pe,ja=ma.height+2*pe,$a=ut[0],La=($a.x0+$a.x1)/2,la=($a.y0+$a.y1)/2,Ba=!(O.traceIs($a.trace,"bar-like")||O.traceIs($a.trace,"box-violin")),un,pn;dr==="y"?Ba?(pn=la-pe,un=la+pe):(pn=Math.min.apply(null,ut.map(function(Re){return Math.min(Re.y0,Re.y1)})),un=Math.max.apply(null,ut.map(function(Re){return Math.max(Re.y0,Re.y1)}))):pn=un=c.mean(ut.map(function(Re){return(Re.y0+Re.y1)/2}))-ja/2;var qa,nn;dr==="x"?Ba?(qa=La+pe,nn=La-pe):(qa=Math.max.apply(null,ut.map(function(Re){return Math.max(Re.x0,Re.x1)})),nn=Math.min.apply(null,ut.map(function(Re){return Math.min(Re.x0,Re.x1)}))):qa=nn=c.mean(ut.map(function(Re){return(Re.x0+Re.x1)/2}))-Va/2;var cn=or._offset,Cn=sr._offset;un+=Cn,qa+=cn,nn+=cn-Va,pn+=Cn-ja;var Ja,xn;return qa+Va<ta&&qa>=0?Ja=qa:nn+Va<ta&&nn>=0?Ja=nn:cn+Va<ta?Ja=cn:qa-La<La-nn+Va?Ja=ta-Va:Ja=0,Ja+=pe,un+ja<Nr&&un>=0?xn=un:pn+ja<Nr&&pn>=0?xn=pn:Cn+ja<Nr?xn=Cn:un-la<la-pn+ja?xn=Nr-ja:xn=0,xn+=pe,va.attr("transform",v(Ja-1,xn-1)),va}var We=ft.selectAll("g.hovertext").data($,function(Re){return ve(Re)});return We.enter().append("g").classed("hovertext",!0).each(function(){var Re=fe.select(this);Re.append("rect").call(b.fill,b.addOpacity(Je,.8)),Re.append("text").classed("name",!0),Re.append("path").style("stroke-width","1px"),Re.append("text").classed("nums",!0).call(j.font,{weight:Wt,style:nt,variant:pt,textcase:Ke,lineposition:gt,shadow:Ft,family:Kt,size:$t})}),We.exit().remove(),We.each(function(Re){var Zt=fe.select(this).attr("transform",""),Ht=Re.color;Array.isArray(Ht)&&(Ht=Ht[Re.eventData[0].pointNumber]);var Rt=Re.bgcolor||Ht,Dt=b.combine(b.opacity(Rt)?Rt:b.defaultLine,Je),Ut=b.combine(b.opacity(Ht)?Ht:b.defaultLine,Je),pr=Re.borderColor||b.contrast(Dt),jt=le(Re,Jr,Ue,Te,xr,Zt),Jt=jt[0],cr=jt[1],rr=Zt.select("text.nums").call(j.font,{family:Re.fontFamily||Kt,size:Re.fontSize||$t,color:Re.fontColor||pr,weight:Re.fontWeight||Wt,style:Re.fontStyle||nt,variant:Re.fontVariant||pt,textcase:Re.fontTextcase||Ke,lineposition:Re.fontLineposition||gt,shadow:Re.fontShadow||Ft}).text(Jt).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,ge),Or=Zt.select("text.name"),Br=0,ra=0;if(cr&&cr!==Jt){Or.call(j.font,{family:Re.fontFamily||Kt,size:Re.fontSize||$t,color:Ut,weight:Re.fontWeight||Wt,style:Re.fontStyle||nt,variant:Re.fontVariant||pt,textcase:Re.fontTextcase||Ke,lineposition:Re.fontLineposition||gt,shadow:Re.fontShadow||Ft}).text(cr).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,ge);var Ca=Ae(ge,Or.node());Br=Ca.width+2*pe,ra=Ca.height+2*pe}else Or.remove(),Zt.select("rect").remove();Zt.select("path").style({fill:Dt,stroke:pr});var Ma=Re.xa._offset+(Re.x0+Re.x1)/2,za=Re.ya._offset+(Re.y0+Re.y1)/2,Fa=Math.abs(Re.x1-Re.x0),Da=Math.abs(Re.y1-Re.y0),Ka=Ae(ge,rr.node()),on=Ka.width/Te._invScaleX,Sn=Ka.height/Te._invScaleY;Re.ty0=(jr-Ka.top)/Te._invScaleY,Re.bx=on+2*pe,Re.by=Math.max(Sn+2*pe,ra),Re.anchor="start",Re.txwidth=on,Re.tx2width=Br,Re.offset=0;var On=(on+he+pe+Br)*Te._invScaleX,jn,dn;if(Ze)Re.pos=Ma,jn=za+Da/2+On<=Nr,dn=za-Da/2-On>=0,(Re.idealAlign==="top"||!jn)&&dn?(za-=Da/2,Re.anchor="end"):jn?(za+=Da/2,Re.anchor="start"):Re.anchor="middle",Re.crossPos=za;else{if(Re.pos=za,jn=Ma+Fa/2+On<=ta,dn=Ma-Fa/2-On>=0,(Re.idealAlign==="left"||!jn)&&dn)Ma-=Fa/2,Re.anchor="end";else if(jn)Ma+=Fa/2,Re.anchor="start";else{Re.anchor="middle";var Rn=On/2,oi=Ma+Rn-ta,$i=Ma-Rn;oi>0&&(Ma-=oi),$i<0&&(Ma+=-$i)}Re.crossPos=Ma}rr.attr("text-anchor",Re.anchor),Br&&Or.attr("text-anchor",Re.anchor),Zt.attr("transform",v(Ma,za)+(Ze?p(H):""))}),{hoverLabels:We,commonLabelBoundingBox:ct}}function le($,oe,ge,Te,Ue,Ze){var Je="",ft="";$.nameOverride!==void 0&&($.name=$.nameOverride),$.name&&($.trace._meta&&($.name=c.templateString($.name,$.trace._meta)),Je=_e($.name,$.nameLength));var wt=ge.charAt(0),Ct=wt==="x"?"y":"x";$.zLabel!==void 0?($.xLabel!==void 0&&(ft+="x: "+$.xLabel+"<br>"),$.yLabel!==void 0&&(ft+="y: "+$.yLabel+"<br>"),$.trace.type!=="choropleth"&&$.trace.type!=="choroplethmapbox"&&$.trace.type!=="choroplethmap"&&(ft+=(ft?"z: ":"")+$.zLabel)):oe&&$[wt+"Label"]===Ue?ft=$[Ct+"Label"]||"":$.xLabel===void 0?$.yLabel!==void 0&&$.trace.type!=="scattercarpet"&&(ft=$.yLabel):$.yLabel===void 0?ft=$.xLabel:ft="("+$.xLabel+", "+$.yLabel+")",($.text||$.text===0)&&!Array.isArray($.text)&&(ft+=(ft?"<br>":"")+$.text),$.extraText!==void 0&&(ft+=(ft?"<br>":"")+$.extraText),Ze&&ft===""&&!$.hovertemplate&&(Je===""&&Ze.remove(),ft=Je);var Kt=$.hovertemplate||!1;if(Kt){var $t=$.hovertemplateLabels||$;$[wt+"Label"]!==Ue&&($t[wt+"other"]=$t[wt+"Val"],$t[wt+"otherLabel"]=$t[wt+"Label"]),ft=c.hovertemplateString(Kt,$t,Te._d3locale,$.eventData[0]||{},$.trace._meta),ft=ft.replace(Me,function(Wt,nt){return Je=_e(nt,$.nameLength),""})}return[ft,Je]}function De($,oe,ge,Te){var Ue=oe?"xa":"ya",Ze=oe?"ya":"xa",Je=0,ft=1,wt=$.size(),Ct=new Array(wt),Kt=0,$t=Te.minX,Wt=Te.maxX,nt=Te.minY,pt=Te.maxY,Ke=function(xt){return xt*ge._invScaleX},gt=function(xt){return xt*ge._invScaleY};$.each(function(xt){var Le=xt[Ue],ot=xt[Ze],ct=Le._id.charAt(0)==="x",ut=Le.range;Kt===0&&ut&&ut[0]>ut[1]!==ct&&(ft=-1);var Pt=0,Ot=ct?ge.width:ge.height;if(ge.hovermode==="x"||ge.hovermode==="y"){var qt=Oe(xt,oe),ir=xt.anchor,_r=ir==="end"?-1:1,Bt,gr;if(ir==="middle")Bt=xt.crossPos+(ct?gt(qt.y-xt.by/2):Ke(xt.bx/2+xt.tx2width/2)),gr=Bt+(ct?gt(xt.by):Ke(xt.bx));else if(ct)Bt=xt.crossPos+gt(he+qt.y)-gt(xt.by/2-he),gr=Bt+gt(xt.by);else{var Ar=Ke(_r*he+qt.x),Er=Ar+Ke(_r*xt.bx);Bt=xt.crossPos+Math.min(Ar,Er),gr=xt.crossPos+Math.max(Ar,Er)}ct?nt!==void 0&&pt!==void 0&&Math.min(gr,pt)-Math.max(Bt,nt)>1&&(ot.side==="left"?(Pt=ot._mainLinePosition,Ot=ge.width):Ot=ot._mainLinePosition):$t!==void 0&&Wt!==void 0&&Math.min(gr,Wt)-Math.max(Bt,$t)>1&&(ot.side==="top"?(Pt=ot._mainLinePosition,Ot=ge.height):Ot=ot._mainLinePosition)}Ct[Kt++]=[{datum:xt,traceIndex:xt.trace.index,dp:0,pos:xt.pos,posref:xt.posref,size:xt.by*(ct?J:1)/2,pmin:Pt,pmax:Ot}]}),Ct.sort(function(xt,Le){return xt[0].posref-Le[0].posref||ft*(Le[0].traceIndex-xt[0].traceIndex)});var Ft,Xt,or,sr,dr,wr,xr;function Pr(xt){var Le=xt[0],ot=xt[xt.length-1];if(Xt=Le.pmin-Le.pos-Le.dp+Le.size,or=ot.pos+ot.dp+ot.size-Le.pmax,Xt>.01){for(dr=xt.length-1;dr>=0;dr--)xt[dr].dp+=Xt;Ft=!1}if(!(or<.01)){if(Xt<-.01){for(dr=xt.length-1;dr>=0;dr--)xt[dr].dp-=or;Ft=!1}if(Ft){var ct=0;for(sr=0;sr<xt.length;sr++)wr=xt[sr],wr.pos+wr.dp+wr.size>Le.pmax&&ct++;for(sr=xt.length-1;sr>=0&&!(ct<=0);sr--)wr=xt[sr],wr.pos>Le.pmax-1&&(wr.del=!0,ct--);for(sr=0;sr<xt.length&&!(ct<=0);sr++)if(wr=xt[sr],wr.pos<Le.pmin+1)for(wr.del=!0,ct--,or=wr.size*2,dr=xt.length-1;dr>=0;dr--)xt[dr].dp-=or;for(sr=xt.length-1;sr>=0&&!(ct<=0);sr--)wr=xt[sr],wr.pos+wr.dp+wr.size>Le.pmax&&(wr.del=!0,ct--)}}}for(;!Ft&&Je<=wt;){for(Je++,Ft=!0,sr=0;sr<Ct.length-1;){var nr=Ct[sr],jr=Ct[sr+1],ta=nr[nr.length-1],Nr=jr[0];if(Xt=ta.pos+ta.dp+ta.size-Nr.pos-Nr.dp+Nr.size,Xt>.01){for(dr=jr.length-1;dr>=0;dr--)jr[dr].dp+=Xt;for(nr.push.apply(nr,jr),Ct.splice(sr+1,1),xr=0,dr=nr.length-1;dr>=0;dr--)xr+=nr[dr].dp;for(or=xr/nr.length,dr=nr.length-1;dr>=0;dr--)nr[dr].dp-=or;Ft=!1}else sr++}Ct.forEach(Pr)}for(sr=Ct.length-1;sr>=0;sr--){var Jr=Ct[sr];for(dr=Jr.length-1;dr>=0;dr--){var vt=Jr[dr],Mt=vt.datum;Mt.offset=vt.dp,Mt.del=vt.del}}}function Oe($,oe){var ge=0,Te=$.offset;return oe&&(Te*=-se,ge=$.offset*ye),{x:ge,y:Te}}function He($){var oe={start:1,end:-1,middle:0}[$.anchor],ge=oe*(he+pe),Te=ge+oe*($.txwidth+pe),Ue=$.anchor==="middle";return Ue&&(ge-=$.tx2width/2,Te+=$.txwidth/2+pe),{alignShift:oe,textShiftX:ge,text2ShiftX:Te}}function Be($,oe,ge,Te){var Ue=function(Je){return Je*ge},Ze=function(Je){return Je*Te};$.each(function(Je){var ft=fe.select(this);if(Je.del)return ft.remove();var wt=ft.select("text.nums"),Ct=Je.anchor,Kt=Ct==="end"?-1:1,$t=He(Je),Wt=Oe(Je,oe),nt=Wt.x,pt=Wt.y,Ke=Ct==="middle",gt="hoverlabel"in Je.trace?Je.trace.hoverlabel.showarrow:!0,Ft;Ke?Ft="M-"+Ue(Je.bx/2+Je.tx2width/2)+","+Ze(pt-Je.by/2)+"h"+Ue(Je.bx)+"v"+Ze(Je.by)+"h-"+Ue(Je.bx)+"Z":gt?Ft="M0,0L"+Ue(Kt*he+nt)+","+Ze(he+pt)+"v"+Ze(Je.by/2-he)+"h"+Ue(Kt*Je.bx)+"v-"+Ze(Je.by)+"H"+Ue(Kt*he+nt)+"V"+Ze(pt-he)+"Z":Ft="M"+Ue(Kt*he+nt)+","+Ze(pt-Je.by/2)+"h"+Ue(Kt*Je.bx)+"v"+Ze(Je.by)+"h"+Ue(-Kt*Je.bx)+"Z",ft.select("path").attr("d",Ft);var Xt=nt+$t.textShiftX,or=pt+Je.ty0-Je.by/2+pe,sr=Je.textAlign||"auto";sr!=="auto"&&(sr==="left"&&Ct!=="start"?(wt.attr("text-anchor","start"),Xt=Ke?-Je.bx/2-Je.tx2width/2+pe:-Je.bx-pe):sr==="right"&&Ct!=="end"&&(wt.attr("text-anchor","end"),Xt=Ke?Je.bx/2-Je.tx2width/2-pe:Je.bx+pe)),wt.call(w.positionText,Ue(Xt),Ze(or)),Je.tx2width&&(ft.select("text.name").call(w.positionText,Ue($t.text2ShiftX+$t.alignShift*pe+nt),Ze(pt+Je.ty0-Je.by/2+pe)),ft.select("rect").call(j.setRect,Ue($t.text2ShiftX+($t.alignShift-1)*Je.tx2width/2+nt),Ze(pt-Je.by/2-1),Ue(Je.tx2width),Ze(Je.by+2)))})}function Ye($,oe){var ge=$.index,Te=$.trace||{},Ue=$.cd[0],Ze=$.cd[ge]||{};function Je(Wt){return Wt||d(Wt)&&Wt===0}var ft=Array.isArray(ge)?function(Wt,nt){var pt=c.castOption(Ue,ge,Wt);return Je(pt)?pt:c.extractOption({},Te,"",nt)}:function(Wt,nt){return c.extractOption(Ze,Te,Wt,nt)};function wt(Wt,nt,pt){var Ke=ft(nt,pt);Je(Ke)&&($[Wt]=Ke)}if(wt("hoverinfo","hi","hoverinfo"),wt("bgcolor","hbg","hoverlabel.bgcolor"),wt("borderColor","hbc","hoverlabel.bordercolor"),wt("fontFamily","htf","hoverlabel.font.family"),wt("fontSize","hts","hoverlabel.font.size"),wt("fontColor","htc","hoverlabel.font.color"),wt("fontWeight","htw","hoverlabel.font.weight"),wt("fontStyle","hty","hoverlabel.font.style"),wt("fontVariant","htv","hoverlabel.font.variant"),wt("nameLength","hnl","hoverlabel.namelength"),wt("textAlign","hta","hoverlabel.align"),$.posref=oe==="y"||oe==="closest"&&Te.orientation==="h"?$.xa._offset+($.x0+$.x1)/2:$.ya._offset+($.y0+$.y1)/2,$.x0=c.constrain($.x0,0,$.xa._length),$.x1=c.constrain($.x1,0,$.xa._length),$.y0=c.constrain($.y0,0,$.ya._length),$.y1=c.constrain($.y1,0,$.ya._length),$.xLabelVal!==void 0&&($.xLabel="xLabel"in $?$.xLabel:X.hoverLabelText($.xa,$.xLabelVal,Te.xhoverformat),$.xVal=$.xa.c2d($.xLabelVal)),$.yLabelVal!==void 0&&($.yLabel="yLabel"in $?$.yLabel:X.hoverLabelText($.ya,$.yLabelVal,Te.yhoverformat),$.yVal=$.ya.c2d($.yLabelVal)),$.zLabelVal!==void 0&&$.zLabel===void 0&&($.zLabel=String($.zLabelVal)),!isNaN($.xerr)&&!($.xa.type==="log"&&$.xerr<=0)){var Ct=X.tickText($.xa,$.xa.c2l($.xerr),"hover").text;$.xerrneg!==void 0?$.xLabel+=" +"+Ct+" / -"+X.tickText($.xa,$.xa.c2l($.xerrneg),"hover").text:$.xLabel+="  "+Ct,oe==="x"&&($.distance+=1)}if(!isNaN($.yerr)&&!($.ya.type==="log"&&$.yerr<=0)){var Kt=X.tickText($.ya,$.ya.c2l($.yerr),"hover").text;$.yerrneg!==void 0?$.yLabel+=" +"+Kt+" / -"+X.tickText($.ya,$.ya.c2l($.yerrneg),"hover").text:$.yLabel+="  "+Kt,oe==="y"&&($.distance+=1)}var $t=$.hoverinfo||$.trace.hoverinfo;return $t&&$t!=="all"&&($t=Array.isArray($t)?$t:$t.split("+"),$t.indexOf("x")===-1&&($.xLabel=void 0),$t.indexOf("y")===-1&&($.yLabel=void 0),$t.indexOf("z")===-1&&($.zLabel=void 0),$t.indexOf("text")===-1&&($.text=void 0),$t.indexOf("name")===-1&&($.name=void 0)),$}function st($,oe,ge){var Te=ge.container,Ue=ge.fullLayout,Ze=Ue._size,Je=ge.event,ft=!!oe.hLinePoint,wt=!!oe.vLinePoint,Ct,Kt;if(Te.selectAll(".spikeline").remove(),!!(wt||ft)){var $t=b.combine(Ue.plot_bgcolor,Ue.paper_bgcolor);if(ft){var Wt=oe.hLinePoint,nt,pt;Ct=Wt&&Wt.xa,Kt=Wt&&Wt.ya;var Ke=Kt.spikesnap;Ke==="cursor"?(nt=Je.pointerX,pt=Je.pointerY):(nt=Ct._offset+Wt.x,pt=Kt._offset+Wt.y);var gt=u.readability(Wt.color,$t)<1.5?b.contrast($t):Wt.color,Ft=Kt.spikemode,Xt=Kt.spikethickness,or=Kt.spikecolor||gt,sr=X.getPxPosition($,Kt),dr,wr;if(Ft.indexOf("toaxis")!==-1||Ft.indexOf("across")!==-1){if(Ft.indexOf("toaxis")!==-1&&(dr=sr,wr=nt),Ft.indexOf("across")!==-1){var xr=Kt._counterDomainMin,Pr=Kt._counterDomainMax;Kt.anchor==="free"&&(xr=Math.min(xr,Kt.position),Pr=Math.max(Pr,Kt.position)),dr=Ze.l+xr*Ze.w,wr=Ze.l+Pr*Ze.w}Te.insert("line",":first-child").attr({x1:dr,x2:wr,y1:pt,y2:pt,"stroke-width":Xt,stroke:or,"stroke-dasharray":j.dashStyle(Kt.spikedash,Xt)}).classed("spikeline",!0).classed("crisp",!0),Te.insert("line",":first-child").attr({x1:dr,x2:wr,y1:pt,y2:pt,"stroke-width":Xt+2,stroke:$t}).classed("spikeline",!0).classed("crisp",!0)}Ft.indexOf("marker")!==-1&&Te.insert("circle",":first-child").attr({cx:sr+(Kt.side!=="right"?Xt:-Xt),cy:pt,r:Xt,fill:or}).classed("spikeline",!0)}if(wt){var nr=oe.vLinePoint,jr,ta;Ct=nr&&nr.xa,Kt=nr&&nr.ya;var Nr=Ct.spikesnap;Nr==="cursor"?(jr=Je.pointerX,ta=Je.pointerY):(jr=Ct._offset+nr.x,ta=Kt._offset+nr.y);var Jr=u.readability(nr.color,$t)<1.5?b.contrast($t):nr.color,vt=Ct.spikemode,Mt=Ct.spikethickness,xt=Ct.spikecolor||Jr,Le=X.getPxPosition($,Ct),ot,ct;if(vt.indexOf("toaxis")!==-1||vt.indexOf("across")!==-1){if(vt.indexOf("toaxis")!==-1&&(ot=Le,ct=ta),vt.indexOf("across")!==-1){var ut=Ct._counterDomainMin,Pt=Ct._counterDomainMax;Ct.anchor==="free"&&(ut=Math.min(ut,Ct.position),Pt=Math.max(Pt,Ct.position)),ot=Ze.t+(1-Pt)*Ze.h,ct=Ze.t+(1-ut)*Ze.h}Te.insert("line",":first-child").attr({x1:jr,x2:jr,y1:ot,y2:ct,"stroke-width":Mt,stroke:xt,"stroke-dasharray":j.dashStyle(Ct.spikedash,Mt)}).classed("spikeline",!0).classed("crisp",!0),Te.insert("line",":first-child").attr({x1:jr,x2:jr,y1:ot,y2:ct,"stroke-width":Mt+2,stroke:$t}).classed("spikeline",!0).classed("crisp",!0)}vt.indexOf("marker")!==-1&&Te.insert("circle",":first-child").attr({cx:jr,cy:Le-(Ct.side!=="top"?Mt:-Mt),r:Mt,fill:xt}).classed("spikeline",!0)}}}function it($,oe,ge){if(!ge||ge.length!==$._hoverdata.length)return!0;for(var Te=ge.length-1;Te>=0;Te--){var Ue=ge[Te],Ze=$._hoverdata[Te];if(Ue.curveNumber!==Ze.curveNumber||String(Ue.pointNumber)!==String(Ze.pointNumber)||String(Ue.pointNumbers)!==String(Ze.pointNumbers)||Ue.binNumber!==Ze.binNumber)return!0}return!1}function yt($,oe){return!0}function _e($,oe){return w.plainText($||"",{len:oe,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function Ee($,oe){for(var ge=oe.charAt(0),Te=[],Ue=[],Ze=[],Je=0;Je<$.length;Je++){var ft=$[Je];O.traceIs(ft.trace,"bar-like")||O.traceIs(ft.trace,"box-violin")?Ze.push(ft):ft.trace[ge+"period"]?Ue.push(ft):Te.push(ft)}return Te.concat(Ue).concat(Ze)}function de($,oe,ge){var Te=oe[$+"a"],Ue=oe[$+"Val"],Ze=oe.cd[0];if(Te.type==="category"||Te.type==="multicategory")Ue=Te._categoriesMap[Ue];else if(Te.type==="date"){var Je=oe.trace[$+"periodalignment"];if(Je){var ft=oe.cd[oe.index],wt=ft[$+"Start"];wt===void 0&&(wt=ft[$]);var Ct=ft[$+"End"];Ct===void 0&&(Ct=ft[$]);var Kt=Ct-wt;Je==="end"?Ue+=Kt:Je==="middle"&&(Ue+=Kt/2)}Ue=Te.d2c(Ue)}return Ze&&Ze.t&&Ze.t.posLetter===Te._id&&(ge.boxmode==="group"||ge.violinmode==="group")&&(Ue+=Ze.t.dPos),Ue}function we($){return $.offsetTop+$.clientTop}function je($){return $.offsetLeft+$.clientLeft}function Ae($,oe){var ge=$._fullLayout,Te=oe.getBoundingClientRect(),Ue=Te.left,Ze=Te.top,Je=Ue+Te.width,ft=Ze+Te.height,wt=c.apply3DTransform(ge._invTransform)(Ue,Ze),Ct=c.apply3DTransform(ge._invTransform)(Je,ft),Kt=wt[0],$t=wt[1],Wt=Ct[0],nt=Ct[1];return{x:Kt,y:$t,width:Wt-Kt,height:nt-$t,top:Math.min($t,nt),left:Math.min(Kt,Wt),right:Math.max(Kt,Wt),bottom:Math.max($t,nt)}}}}),Mc=n({"src/components/fx/hoverlabel_defaults.js"(ce,fe){var d=pa(),u=Ve(),c=ts().isUnifiedHover;fe.exports=function(v,p,g,w){w=w||{};var s=p.legend;function j(b){w.font[b]||(w.font[b]=s?p.legend.font[b]:p.font[b])}p&&c(p.hovermode)&&(w.font||(w.font={}),j("size"),j("family"),j("color"),j("weight"),j("style"),j("variant"),s?(w.bgcolor||(w.bgcolor=u.combine(p.legend.bgcolor,p.paper_bgcolor)),w.bordercolor||(w.bordercolor=p.legend.bordercolor)):w.bgcolor||(w.bgcolor=p.paper_bgcolor)),g("hoverlabel.bgcolor",w.bgcolor),g("hoverlabel.bordercolor",w.bordercolor),g("hoverlabel.namelength",w.namelength),g("hoverlabel.showarrow",w.showarrow),d.coerceFont(g,"hoverlabel.font",w.font),g("hoverlabel.align",w.align)}}}),yh=n({"src/components/fx/layout_global_defaults.js"(ce,fe){var d=pa(),u=Mc(),c=ae();fe.exports=function(v,p){function g(w,s){return d.coerce(v,p,c,w,s)}u(v,p,g)}}}),bh=n({"src/components/fx/defaults.js"(ce,fe){var d=pa(),u=Se(),c=Mc();fe.exports=function(v,p,g,w){function s(b,z){return d.coerce(v,p,u,b,z)}var j=d.extendFlat({},w.hoverlabel);p.hovertemplate&&(j.namelength=-1),c(v,p,s,j)}}}),Fl=n({"src/components/fx/hovermode_defaults.js"(ce,fe){var d=pa(),u=ae();fe.exports=function(m,v){function p(g,w){return v[g]!==void 0?v[g]:d.coerce(m,v,u,g,w)}return p("clickmode"),p("hoversubplots"),p("hovermode")}}}),xh=n({"src/components/fx/layout_defaults.js"(ce,fe){var d=pa(),u=ae(),c=Fl(),m=Mc();fe.exports=function(p,g){function w(O,F){return d.coerce(p,g,u,O,F)}var s=c(p,g);s&&(w("hoverdistance"),w("spikedistance"));var j=w("dragmode");j==="select"&&w("selectdirection");var b=g._has("mapbox"),z=g._has("map"),X=g._has("geo"),N=g._basePlotModules.length;g.dragmode==="zoom"&&((b||z||X)&&N===1||(b||z)&&X&&N===2)&&(g.dragmode="pan"),m(p,g,w),d.coerceFont(w,"hoverlabel.grouptitlefont",g.hoverlabel.font)}}}),Ec=n({"src/components/fx/calc.js"(ce,fe){var d=pa(),u=hr();fe.exports=function(v){var p=v.calcdata,g=v._fullLayout;function w(X){return function(N){return d.coerceHoverinfo({hoverinfo:N},{_module:X._module},g)}}for(var s=0;s<p.length;s++){var j=p[s],b=j[0].trace;if(!u.traceIs(b,"pie-like")){var z=u.traceIs(b,"2dMap")?c:d.fillArray;z(b.hoverinfo,j,"hi",w(b)),b.hovertemplate&&z(b.hovertemplate,j,"ht"),b.hoverlabel&&(z(b.hoverlabel.bgcolor,j,"hbg"),z(b.hoverlabel.bordercolor,j,"hbc"),z(b.hoverlabel.font.size,j,"hts"),z(b.hoverlabel.font.color,j,"htc"),z(b.hoverlabel.font.family,j,"htf"),z(b.hoverlabel.font.weight,j,"htw"),z(b.hoverlabel.font.style,j,"hty"),z(b.hoverlabel.font.variant,j,"htv"),z(b.hoverlabel.namelength,j,"hnl"),z(b.hoverlabel.align,j,"hta"),z(b.hoverlabel.showarrow,j,"htsa"))}}};function c(m,v,p,g){g=g||d.identity,Array.isArray(m)&&(v[0][p]=g(m))}}}),_f=n({"src/components/fx/click.js"(ce,fe){var d=hr(),u=Uu().hover;fe.exports=function(m,v,p){var g=d.getComponentMethod("annotations","onClick")(m,m._hoverdata);p!==void 0&&u(m,v,p,!0);function w(){m.emit("plotly_click",{points:m._hoverdata,event:v})}m._hoverdata&&v&&v.target&&(g&&g.then?g.then(w):w(),v.stopImmediatePropagation&&v.stopImmediatePropagation())}}}),Ms=n({"src/components/fx/index.js"(ce,fe){var d=k(),u=pa(),c=rs(),m=ts(),v=ae(),p=Uu();fe.exports={moduleType:"component",name:"fx",constants:ee(),schema:{layout:v},attributes:Se(),layoutAttributes:v,supplyLayoutGlobalDefaults:yh(),supplyDefaults:bh(),supplyLayoutDefaults:xh(),calc:Ec(),getDistanceFunction:m.getDistanceFunction,getClosest:m.getClosest,inbox:m.inbox,quadrature:m.quadrature,appendArrayPointValue:m.appendArrayPointValue,castHoverOption:w,castHoverinfo:s,hover:p.hover,unhover:c.unhover,loneHover:p.loneHover,loneUnhover:g,click:_f()};function g(j){var b=u.isD3Selection(j)?j:d.select(j);b.selectAll("g.hovertext").remove(),b.selectAll(".spikeline").remove()}function w(j,b,z){return u.castOption(j,b,"hoverlabel."+z)}function s(j,b,z){function X(N){return u.coerceHoverinfo({hoverinfo:N},{_module:j._module},b)}return u.castOption(j,z,"hoverinfo",X)}}}),vu=n({"src/components/dragelement/helpers.js"(ce){ce.selectMode=function(fe){return fe==="lasso"||fe==="select"},ce.drawMode=function(fe){return fe==="drawclosedpath"||fe==="drawopenpath"||fe==="drawline"||fe==="drawrect"||fe==="drawcircle"},ce.openMode=function(fe){return fe==="drawline"||fe==="drawopenpath"},ce.rectMode=function(fe){return fe==="select"||fe==="drawline"||fe==="drawrect"||fe==="drawcircle"},ce.freeMode=function(fe){return fe==="lasso"||fe==="drawclosedpath"||fe==="drawopenpath"},ce.selectingOrDrawing=function(fe){return ce.freeMode(fe)||ce.rectMode(fe)}}}),Cc=n({"src/lib/clear_gl_canvases.js"(ce,fe){fe.exports=function(u){var c=u._fullLayout;c._glcanvas&&c._glcanvas.size()&&c._glcanvas.each(function(m){m.regl&&m.regl.clear({color:!0,depth:!0})})}}}),pu=n({"src/fonts/ploticon.js"(ce,fe){fe.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}}}),jl=n({"src/components/shapes/draw_newshape/constants.js"(ce,fe){var d=32;fe.exports={CIRCLE_SIDES:d,i000:0,i090:d/4,i180:d/2,i270:d/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}}}),kc=n({"src/components/selections/helpers.js"(ce,fe){var d=pa().strTranslate;function u(p,g){switch(p.type){case"log":return p.p2d(g);case"date":return p.p2r(g,0,p.calendar);default:return p.p2r(g)}}function c(p,g){switch(p.type){case"log":return p.d2p(g);case"date":return p.r2p(g,0,p.calendar);default:return p.r2p(g)}}function m(p){var g=p._id.charAt(0)==="y"?1:0;return function(w){return u(p,w[g])}}function v(p){return d(p.xaxis._offset,p.yaxis._offset)}fe.exports={p2r:u,r2p:c,axValue:m,getTransform:v}}}),ml=n({"src/components/shapes/draw_newshape/helpers.js"(ce){var fe=bo(),d=jl(),u=d.CIRCLE_SIDES,c=d.SQRT2,m=kc(),v=m.p2r,p=m.r2p,g=[0,3,4,5,6,1,2],w=[0,3,4,1,2];ce.writePaths=function(b){var z=b.length;if(!z)return"M0,0Z";for(var X="",N=0;N<z;N++)for(var O=b[N].length,F=0;F<O;F++){var P=b[N][F][0];if(P==="Z")X+="Z";else for(var _=b[N][F].length,R=0;R<_;R++){var H=R;P==="Q"||P==="S"?H=w[R]:P==="C"&&(H=g[R]),X+=b[N][F][H],R>0&&R<_-1&&(X+=",")}}return X},ce.readPaths=function(b,z,X,N){var O=fe(b),F=[],P=-1,_=function(){P++,F[P]=[]},R,H=0,te=0,J,ye,se=function(){J=H,ye=te};se();for(var he=0;he<O.length;he++){var pe=[],Q,ue,me,be,ve=O[he][0],Me=ve;switch(ve){case"M":_(),H=+O[he][1],te=+O[he][2],pe.push([Me,H,te]),se();break;case"Q":case"S":Q=+O[he][1],me=+O[he][2],H=+O[he][3],te=+O[he][4],pe.push([Me,H,te,Q,me]);break;case"C":Q=+O[he][1],me=+O[he][2],ue=+O[he][3],be=+O[he][4],H=+O[he][5],te=+O[he][6],pe.push([Me,H,te,Q,me,ue,be]);break;case"T":case"L":H=+O[he][1],te=+O[he][2],pe.push([Me,H,te]);break;case"H":Me="L",H=+O[he][1],pe.push([Me,H,te]);break;case"V":Me="L",te=+O[he][1],pe.push([Me,H,te]);break;case"A":Me="L";var ke=+O[he][1],le=+O[he][2];+O[he][4]||(ke=-ke,le=-le);var De=H-ke,Oe=te;for(R=1;R<=u/2;R++){var He=2*Math.PI*R/u;pe.push([Me,De+ke*Math.cos(He),Oe+le*Math.sin(He)])}break;case"Z":(H!==J||te!==ye)&&(H=J,te=ye,pe.push([Me,H,te]));break}for(var Be=(X||{}).domain,Ye=z._fullLayout._size,st=X&&X.xsizemode==="pixel",it=X&&X.ysizemode==="pixel",yt=N===!1,_e=0;_e<pe.length;_e++){for(R=0;R+2<7;R+=2){var Ee=pe[_e][R+1],de=pe[_e][R+2];Ee===void 0||de===void 0||(H=Ee,te=de,X&&(X.xaxis&&X.xaxis.p2r?(yt&&(Ee-=X.xaxis._offset),st?Ee=p(X.xaxis,X.xanchor)+Ee:Ee=v(X.xaxis,Ee)):(yt&&(Ee-=Ye.l),Be?Ee=Be.x[0]+Ee/Ye.w:Ee=Ee/Ye.w),X.yaxis&&X.yaxis.p2r?(yt&&(de-=X.yaxis._offset),it?de=p(X.yaxis,X.yanchor)-de:de=v(X.yaxis,de)):(yt&&(de-=Ye.t),Be?de=Be.y[1]-de/Ye.h:de=1-de/Ye.h)),pe[_e][R+1]=Ee,pe[_e][R+2]=de)}F[P].push(pe[_e].slice())}}return F};function s(b,z){return Math.abs(b-z)<=1e-6}function j(b,z){var X=z[1]-b[1],N=z[2]-b[2];return Math.sqrt(X*X+N*N)}ce.pointsOnRectangle=function(b){var z=b.length;if(z!==5)return!1;for(var X=1;X<3;X++){var N=b[0][X]-b[1][X],O=b[3][X]-b[2][X];if(!s(N,O))return!1;var F=b[0][X]-b[3][X],P=b[1][X]-b[2][X];if(!s(F,P))return!1}return!s(b[0][1],b[1][1])&&!s(b[0][1],b[3][1])?!1:!!(j(b[0],b[1])*j(b[0],b[3]))},ce.pointsOnEllipse=function(b){var z=b.length;if(z!==u+1)return!1;z=u;for(var X=0;X<z;X++){var N=(z*2-X)%z,O=(z/2+N)%z,F=(z/2+X)%z;if(!s(j(b[X],b[F]),j(b[N],b[O])))return!1}return!0},ce.handleEllipse=function(b,z,X){if(!b)return[z,X];var N=ce.ellipseOver({x0:z[0],y0:z[1],x1:X[0],y1:X[1]}),O=(N.x1+N.x0)/2,F=(N.y1+N.y0)/2,P=(N.x1-N.x0)/2,_=(N.y1-N.y0)/2;P||(P=_=_/c),_||(_=P=P/c);for(var R=[],H=0;H<u;H++){var te=H*2*Math.PI/u;R.push([O+P*Math.cos(te),F+_*Math.sin(te)])}return R},ce.ellipseOver=function(b){var z=b.x0,X=b.y0,N=b.x1,O=b.y1,F=N-z,P=O-X;z-=F,X-=P;var _=(z+N)/2,R=(X+O)/2,H=c;return F*=H,P*=H,{x0:_-F,y0:R-P,x1:_+F,y1:R+P}},ce.fixDatesForPaths=function(b,z,X){var N=z.type==="date",O=X.type==="date";if(!N&&!O)return b;for(var F=0;F<b.length;F++)for(var P=0;P<b[F].length;P++)for(var _=0;_+2<b[F][P].length;_+=2)N&&(b[F][P][_+1]=b[F][P][_+1].replace(" ","_")),O&&(b[F][P][_+2]=b[F][P][_+2].replace(" ","_"));return b}}}),Gu=n({"src/components/shapes/draw_newshape/newshapes.js"(ce,fe){var d=di(),u=vu(),c=u.drawMode,m=u.openMode,v=jl(),p=v.i000,g=v.i090,w=v.i180,s=v.i270,j=v.cos45,b=v.sin45,z=kc(),X=z.p2r,N=z.r2p,O=cs(),F=O.clearOutline,P=ml(),_=P.readPaths,R=P.writePaths,H=P.ellipseOver,te=P.fixDatesForPaths;function J(se,he){if(se.length){var pe=se[0][0];if(pe){var Q=he.gd,ue=he.isActiveShape,me=he.dragmode,be=(Q.layout||{}).shapes||[];if(!c(me)&&ue!==void 0){var ve=Q._fullLayout._activeShapeIndex;if(ve<be.length)switch(Q._fullLayout.shapes[ve].type){case"rect":me="drawrect";break;case"circle":me="drawcircle";break;case"line":me="drawline";break;case"path":var Me=be[ve].path||"";Me[Me.length-1]==="Z"?me="drawclosedpath":me="drawopenpath";break}}var ke=ye(se,he,me);F(Q);for(var le=he.editHelpers,De=(le||{}).modifyItem,Oe=[],He=0;He<be.length;He++){var Be=Q._fullLayout.shapes[He];if(Oe[He]=Be._input,ue!==void 0&&He===Q._fullLayout._activeShapeIndex){var Ye=ke;switch(Be.type){case"line":case"rect":case"circle":var st=d.getFromId(Q,Be.xref);Be.xref.charAt(0)==="x"&&st.type.includes("category")?(De("x0",Ye.x0-(Be.x0shift||0)),De("x1",Ye.x1-(Be.x1shift||0))):(De("x0",Ye.x0),De("x1",Ye.x1));var it=d.getFromId(Q,Be.yref);Be.yref.charAt(0)==="y"&&it.type.includes("category")?(De("y0",Ye.y0-(Be.y0shift||0)),De("y1",Ye.y1-(Be.y1shift||0))):(De("y0",Ye.y0),De("y1",Ye.y1));break;case"path":De("path",Ye.path);break}}}return ue===void 0?(Oe.push(ke),Oe):le?le.getUpdateObj():{}}}}function ye(se,he,pe){var Q=se[0][0],ue=he.gd,me=Q.getAttribute("d"),be=ue._fullLayout.newshape,ve=he.plotinfo,Me=he.isActiveShape,ke=ve.xaxis,le=ve.yaxis,De=!!ve.domain||!ve.xaxis,Oe=!!ve.domain||!ve.yaxis,He=m(pe),Be=_(me,ue,ve,Me),Ye={editable:!0,visible:be.visible,name:be.name,showlegend:be.showlegend,legend:be.legend,legendwidth:be.legendwidth,legendgroup:be.legendgroup,legendgrouptitle:{text:be.legendgrouptitle.text,font:be.legendgrouptitle.font},legendrank:be.legendrank,label:be.label,xref:De?"paper":ke._id,yref:Oe?"paper":le._id,layer:be.layer,opacity:be.opacity,line:{color:be.line.color,width:be.line.width,dash:be.line.dash}};He||(Ye.fillcolor=be.fillcolor,Ye.fillrule=be.fillrule);var st;if(Be.length===1&&(st=Be[0]),st&&st.length===5&&pe==="drawrect")Ye.type="rect",Ye.x0=st[0][1],Ye.y0=st[0][2],Ye.x1=st[2][1],Ye.y1=st[2][2];else if(st&&pe==="drawline")Ye.type="line",Ye.x0=st[0][1],Ye.y0=st[0][2],Ye.x1=st[1][1],Ye.y1=st[1][2];else if(st&&pe==="drawcircle"){Ye.type="circle";var it=st[p][1],yt=st[g][1],_e=st[w][1],Ee=st[s][1],de=st[p][2],we=st[g][2],je=st[w][2],Ae=st[s][2],$=ve.xaxis&&(ve.xaxis.type==="date"||ve.xaxis.type==="log"),oe=ve.yaxis&&(ve.yaxis.type==="date"||ve.yaxis.type==="log");$&&(it=N(ve.xaxis,it),yt=N(ve.xaxis,yt),_e=N(ve.xaxis,_e),Ee=N(ve.xaxis,Ee)),oe&&(de=N(ve.yaxis,de),we=N(ve.yaxis,we),je=N(ve.yaxis,je),Ae=N(ve.yaxis,Ae));var ge=(yt+Ee)/2,Te=(de+je)/2,Ue=(Ee-yt+_e-it)/2,Ze=(Ae-we+je-de)/2,Je=H({x0:ge,y0:Te,x1:ge+Ue*j,y1:Te+Ze*b});$&&(Je.x0=X(ve.xaxis,Je.x0),Je.x1=X(ve.xaxis,Je.x1)),oe&&(Je.y0=X(ve.yaxis,Je.y0),Je.y1=X(ve.yaxis,Je.y1)),Ye.x0=Je.x0,Ye.y0=Je.y0,Ye.x1=Je.x1,Ye.y1=Je.y1}else Ye.type="path",ke&&le&&te(Be,ke,le),Ye.path=R(Be),st=null;return Ye}fe.exports={newShapes:J,createShapeObj:ye}}}),wf=n({"src/components/selections/draw_newselection/newselections.js"(ce,fe){var d=vu(),u=d.selectMode,c=cs(),m=c.clearOutline,v=ml(),p=v.readPaths,g=v.writePaths,w=v.fixDatesForPaths;fe.exports=function(j,b){if(j.length){var z=j[0][0];if(z){var X=z.getAttribute("d"),N=b.gd,O=N._fullLayout.newselection,F=b.plotinfo,P=F.xaxis,_=F.yaxis,R=b.isActiveSelection,H=b.dragmode,te=(N.layout||{}).selections||[];if(!u(H)&&R!==void 0){var J=N._fullLayout._activeSelectionIndex;if(J<te.length)switch(N._fullLayout.selections[J].type){case"rect":H="select";break;case"path":H="lasso";break}}var ye=p(X,N,F,R),se={xref:P._id,yref:_._id,opacity:O.opacity,line:{color:O.line.color,width:O.line.width,dash:O.line.dash}},he;ye.length===1&&(he=ye[0]),he&&he.length===5&&H==="select"?(se.type="rect",se.x0=he[0][1],se.y0=he[0][2],se.x1=he[2][1],se.y1=he[2][2]):(se.type="path",P&&_&&w(ye,P,_),se.path=g(ye),he=null),m(N);for(var pe=b.editHelpers,Q=(pe||{}).modifyItem,ue=[],me=0;me<te.length;me++){var be=N._fullLayout.selections[me];if(!be){ue[me]=be;continue}if(ue[me]=be._input,R!==void 0&&me===N._fullLayout._activeSelectionIndex){var ve=se;switch(be.type){case"rect":Q("x0",ve.x0),Q("x1",ve.x1),Q("y0",ve.y0),Q("y1",ve.y1);break;case"path":Q("path",ve.path);break}}}return R===void 0?(ue.push(se),ue):pe?pe.getUpdateObj():{}}}}}}),Zs=n({"src/components/shapes/constants.js"(ce,fe){fe.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}}}),Es=n({"src/components/shapes/helpers.js"(ce){var fe=Zs(),d=pa(),u=mi();ce.rangeToShapePosition=function(v){return v.type==="log"?v.r2d:function(p){return p}},ce.shapePositionToRange=function(v){return v.type==="log"?v.d2r:function(p){return p}},ce.decodeDate=function(v){return function(p){return p.replace&&(p=p.replace("_"," ")),v(p)}},ce.encodeDate=function(v){return function(p){return v(p).replace(" ","_")}},ce.extractPathCoords=function(v,p,g){var w=[],s=v.match(fe.segmentRE);return s.forEach(function(j){var b=p[j.charAt(0)].drawn;if(b!==void 0){var z=j.substr(1).match(fe.paramRE);if(!(!z||z.length<b)){var X=z[b],N=g?X:d.cleanNumber(X);w.push(N)}}}),w},ce.getDataToPixel=function(v,p,g,w,s){var j=v._fullLayout._size,b;if(p)if(s==="domain")b=function(X){return p._length*(w?1-X:X)+p._offset};else{var z=ce.shapePositionToRange(p);b=function(X){var N=m(p,g);return p._offset+p.r2p(z(X,!0))+N},p.type==="date"&&(b=ce.decodeDate(b))}else w?b=function(X){return j.t+j.h*(1-X)}:b=function(X){return j.l+j.w*X};return b},ce.getPixelToData=function(v,p,g,w){var s=v._fullLayout._size,j;if(p)if(w==="domain")j=function(z){var X=(z-p._offset)/p._length;return g?1-X:X};else{var b=ce.rangeToShapePosition(p);j=function(z){return b(p.p2r(z-p._offset))}}else g?j=function(z){return 1-(z-s.t)/s.h}:j=function(z){return(z-s.l)/s.w};return j},ce.roundPositionForSharpStrokeRendering=function(v,p){var g=Math.round(p%2)===1,w=Math.round(v);return g?w+.5:w},ce.makeShapesOptionsAndPlotinfo=function(v,p){var g=v._fullLayout.shapes[p]||{},w=v._fullLayout._plots[g.xref+g.yref],s=!!w;return s?w._hadPlotinfo=!0:(w={},g.xref&&g.xref!=="paper"&&(w.xaxis=v._fullLayout[g.xref+"axis"]),g.yref&&g.yref!=="paper"&&(w.yaxis=v._fullLayout[g.yref+"axis"])),w.xsizemode=g.xsizemode,w.ysizemode=g.ysizemode,w.xanchor=g.xanchor,w.yanchor=g.yanchor,{options:g,plotinfo:w}},ce.makeSelectionsOptionsAndPlotinfo=function(v,p){var g=v._fullLayout.selections[p]||{},w=v._fullLayout._plots[g.xref+g.yref],s=!!w;return s?w._hadPlotinfo=!0:(w={},g.xref&&(w.xaxis=v._fullLayout[g.xref+"axis"]),g.yref&&(w.yaxis=v._fullLayout[g.yref+"axis"])),{options:g,plotinfo:w}},ce.getPathString=function(v,p){var g=p.type,w=u.getRefType(p.xref),s=u.getRefType(p.yref),j=u.getFromId(v,p.xref),b=u.getFromId(v,p.yref),z=v._fullLayout._size,X,N,O,F,P=m(j,p.x0shift),_=m(j,p.x1shift),R=m(b,p.y0shift),H=m(b,p.y1shift),te,J,ye,se;if(j?w==="domain"?N=function(le){return j._offset+j._length*le}:(X=ce.shapePositionToRange(j),N=function(le){return j._offset+j.r2p(X(le,!0))}):N=function(le){return z.l+z.w*le},b?s==="domain"?F=function(le){return b._offset+b._length*(1-le)}:(O=ce.shapePositionToRange(b),F=function(le){return b._offset+b.r2p(O(le,!0))}):F=function(le){return z.t+z.h*(1-le)},g==="path")return j&&j.type==="date"&&(N=ce.decodeDate(N)),b&&b.type==="date"&&(F=ce.decodeDate(F)),c(p,N,F);if(p.xsizemode==="pixel"){var he=N(p.xanchor);te=he+p.x0+P,J=he+p.x1+_}else te=N(p.x0)+P,J=N(p.x1)+_;if(p.ysizemode==="pixel"){var pe=F(p.yanchor);ye=pe-p.y0+R,se=pe-p.y1+H}else ye=F(p.y0)+R,se=F(p.y1)+H;if(g==="line")return"M"+te+","+ye+"L"+J+","+se;if(g==="rect")return"M"+te+","+ye+"H"+J+"V"+se+"H"+te+"Z";var Q=(te+J)/2,ue=(ye+se)/2,me=Math.abs(Q-te),be=Math.abs(ue-ye),ve="A"+me+","+be,Me=Q+me+","+ue,ke=Q+","+(ue-be);return"M"+Me+ve+" 0 1,1 "+ke+ve+" 0 0,1 "+Me+"Z"};function c(v,p,g){var w=v.path,s=v.xsizemode,j=v.ysizemode,b=v.xanchor,z=v.yanchor;return w.replace(fe.segmentRE,function(X){var N=0,O=X.charAt(0),F=fe.paramIsX[O],P=fe.paramIsY[O],_=fe.numParams[O],R=X.substr(1).replace(fe.paramRE,function(H){return F[N]?s==="pixel"?H=p(b)+Number(H):H=p(H):P[N]&&(j==="pixel"?H=g(z)-Number(H):H=g(H)),N++,N>_&&(H="X"),H});return N>_&&(R=R.replace(/[\s,]*X.*/,""),d.log("Ignoring extra params in segment "+X)),O+R})}function m(v,p){p=p||0;var g=0;return p&&v&&(v.type==="category"||v.type==="multicategory")&&(g=(v.r2p(1)-v.r2p(0))*p),g}}}),Af=n({"src/components/shapes/display_labels.js"(ce,fe){var d=pa(),u=mi(),c=Ui(),m=ni(),v=ml().readPaths,p=Es(),g=p.getPathString,w=ha(),s=xi().FROM_TL;fe.exports=function(X,N,O,F){if(F.selectAll(".shape-label").remove(),!!(O.label.text||O.label.texttemplate)){var P;if(O.label.texttemplate){var _={};if(O.type!=="path"){var R=u.getFromId(X,O.xref),H=u.getFromId(X,O.yref);for(var te in w){var J=w[te](O,R,H);J!==void 0&&(_[te]=J)}}P=d.texttemplateStringForShapes(O.label.texttemplate,{},X._fullLayout._d3locale,_)}else P=O.label.text;var ye={"data-index":N},se=O.label.font,he={"data-notex":1},pe=F.append("g").attr(ye).classed("shape-label",!0),Q=pe.append("text").attr(he).classed("shape-label-text",!0).text(P),ue,me,be,ve;if(O.path){var Me=g(X,O),ke=v(Me,X);ue=1/0,be=1/0,me=-1/0,ve=-1/0;for(var le=0;le<ke.length;le++)for(var De=0;De<ke[le].length;De++)for(var Oe=ke[le][De],He=1;He<Oe.length;He+=2){var Be=Oe[He],Ye=Oe[He+1];ue=Math.min(ue,Be),me=Math.max(me,Be),be=Math.min(be,Ye),ve=Math.max(ve,Ye)}}else{var st=u.getFromId(X,O.xref),it=O.x0shift,yt=O.x1shift,_e=u.getRefType(O.xref),Ee=u.getFromId(X,O.yref),de=O.y0shift,we=O.y1shift,je=u.getRefType(O.yref),Ae=function(ft,wt){var Ct=p.getDataToPixel(X,st,wt,!1,_e);return Ct(ft)},$=function(ft,wt){var Ct=p.getDataToPixel(X,Ee,wt,!0,je);return Ct(ft)};ue=Ae(O.x0,it),me=Ae(O.x1,yt),be=$(O.y0,de),ve=$(O.y1,we)}var oe=O.label.textangle;oe==="auto"&&(O.type==="line"?oe=j(ue,be,me,ve):oe=0),Q.call(function(ft){return ft.call(m.font,se).attr({}),c.convertToTspans(ft,X),ft});var ge=m.bBox(Q.node()),Te=b(ue,be,me,ve,O,oe,ge),Ue=Te.textx,Ze=Te.texty,Je=Te.xanchor;Q.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Je],y:Ze,x:Ue,transform:"rotate("+oe+","+Ue+","+Ze+")"}).call(c.positionText,Ue,Ze)}};function j(z,X,N,O){var F,P;return P=Math.abs(N-z),N>=z?F=X-O:F=O-X,-180/Math.PI*Math.atan2(F,P)}function b(z,X,N,O,F,P,_){var R=F.label.textposition,H=F.label.textangle,te=F.label.padding,J=F.type,ye=Math.PI/180*P,se=Math.sin(ye),he=Math.cos(ye),pe=F.label.xanchor,Q=F.label.yanchor,ue,me,be,ve;if(J==="line"){R==="start"?(ue=z,me=X):R==="end"?(ue=N,me=O):(ue=(z+N)/2,me=(X+O)/2),pe==="auto"&&(R==="start"?H==="auto"?N>z?pe="left":N<z?pe="right":pe="center":N>z?pe="right":N<z?pe="left":pe="center":R==="end"?H==="auto"?N>z?pe="right":N<z?pe="left":pe="center":N>z?pe="left":N<z?pe="right":pe="center":pe="center");var Me={left:1,center:0,right:-1},ke={bottom:-1,middle:0,top:1};if(H==="auto"){var le=ke[Q];be=-te*se*le,ve=te*he*le}else{var De=Me[pe],Oe=ke[Q];be=te*De,ve=te*Oe}ue=ue+be,me=me+ve}else be=te+3,R.indexOf("right")!==-1?(ue=Math.max(z,N)-be,pe==="auto"&&(pe="right")):R.indexOf("left")!==-1?(ue=Math.min(z,N)+be,pe==="auto"&&(pe="left")):(ue=(z+N)/2,pe==="auto"&&(pe="center")),R.indexOf("top")!==-1?me=Math.min(X,O):R.indexOf("bottom")!==-1?me=Math.max(X,O):me=(X+O)/2,ve=te,Q==="bottom"?me=me-ve:Q==="top"&&(me=me+ve);var He=s[Q],Be=F.label.font.size,Ye=_.height,st=(Ye*He-Be)*se,it=-(Ye*He-Be)*he;return{textx:ue+st,texty:me+it,xanchor:pe}}}}),Rc=n({"src/components/shapes/display_outlines.js"(ce,fe){var d=pa(),u=d.strTranslate,c=rs(),m=vu(),v=m.drawMode,p=m.selectMode,g=hr(),w=Ve(),s=jl(),j=s.i000,b=s.i090,z=s.i180,X=s.i270,N=cs(),O=N.clearOutlineControllers,F=ml(),P=F.pointsOnRectangle,_=F.pointsOnEllipse,R=F.writePaths,H=Gu().newShapes,te=Gu().createShapeObj,J=wf(),ye=Af();fe.exports=function Q(ue,me,be,ve){ve||(ve=0);var Me=be.gd;function ke(){Q(ue,me,be,ve++),(_(ue[0])||be.hasText)&&le({redrawing:!0})}function le($t){var Wt={};be.isActiveShape!==void 0&&(be.isActiveShape=!1,Wt=H(me,be)),be.isActiveSelection!==void 0&&(be.isActiveSelection=!1,Wt=J(me,be),Me._fullLayout._reselect=!0),Object.keys(Wt).length&&g.call(($t||{}).redrawing?"relayout":"_guiRelayout",Me,Wt)}var De=Me._fullLayout,Oe=De._zoomlayer,He=be.dragmode,Be=v(He),Ye=p(He);(Be||Ye)&&(Me._fullLayout._outlining=!0),O(Me),me.attr("d",R(ue));var st,it,yt,_e,Ee;if(!ve&&(be.isActiveShape||be.isActiveSelection)){Ee=se([],ue);var de=Oe.append("g").attr("class","outline-controllers");Ue(de),Kt()}if(Be&&be.hasText){var we=Oe.select(".label-temp"),je=te(me,be,be.dragmode);ye(Me,"label-temp",je,we)}function Ae($t){yt=+$t.srcElement.getAttribute("data-i"),_e=+$t.srcElement.getAttribute("data-j"),st[yt][_e].moveFn=$}function $($t,Wt){if(ue.length){var nt=Ee[yt][_e][1],pt=Ee[yt][_e][2],Ke=ue[yt],gt=Ke.length;if(P(Ke)){var Ft=$t,Xt=Wt;if(be.isActiveSelection){var or=he(Ke,_e);or[1]===Ke[_e][1]?Xt=0:Ft=0}for(var sr=0;sr<gt;sr++)if(sr!==_e){var dr=Ke[sr];dr[1]===Ke[_e][1]&&(dr[1]=nt+Ft),dr[2]===Ke[_e][2]&&(dr[2]=pt+Xt)}if(Ke[_e][1]=nt+Ft,Ke[_e][2]=pt+Xt,!P(Ke))for(var wr=0;wr<gt;wr++)for(var xr=0;xr<Ke[wr].length;xr++)Ke[wr][xr]=Ee[yt][wr][xr]}else Ke[_e][1]=nt+$t,Ke[_e][2]=pt+Wt;ke()}}function oe(){le()}function ge(){if(ue.length&&ue[yt]&&ue[yt].length){for(var $t=[],Wt=0;Wt<ue[yt].length;Wt++)Wt!==_e&&$t.push(ue[yt][Wt]);$t.length>1&&!($t.length===2&&$t[1][0]==="Z")&&(_e===0&&($t[0][0]="M"),ue[yt]=$t,ke(),le())}}function Te($t,Wt){if($t===2){yt=+Wt.srcElement.getAttribute("data-i"),_e=+Wt.srcElement.getAttribute("data-j");var nt=ue[yt];!P(nt)&&!_(nt)&&ge()}}function Ue($t){st=[];for(var Wt=0;Wt<ue.length;Wt++){var nt=ue[Wt],pt=P(nt),Ke=!pt&&_(nt);st[Wt]=[];for(var gt=nt.length,Ft=0;Ft<gt;Ft++)if(nt[Ft][0]!=="Z"&&!(Ke&&Ft!==j&&Ft!==b&&Ft!==z&&Ft!==X)){var Xt=pt&&be.isActiveSelection,or;Xt&&(or=he(nt,Ft));var sr=nt[Ft][1],dr=nt[Ft][2],wr=$t.append(Xt?"rect":"circle").attr("data-i",Wt).attr("data-j",Ft).style({fill:w.background,stroke:w.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Xt){var xr=or[1]-sr,Pr=or[2]-dr,nr=Pr?5:Math.max(Math.min(25,Math.abs(xr)-5),5),jr=xr?5:Math.max(Math.min(25,Math.abs(Pr)-5),5);wr.classed(Pr?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",nr).attr("height",jr).attr("x",sr-nr/2).attr("y",dr-jr/2).attr("transform",u(xr/2,Pr/2))}else wr.classed("cursor-grab",!0).attr("r",5).attr("cx",sr).attr("cy",dr);st[Wt][Ft]={element:wr.node(),gd:Me,prepFn:Ae,doneFn:oe,clickFn:Te},c.init(st[Wt][Ft])}}}function Ze($t,Wt){if(ue.length)for(var nt=0;nt<ue.length;nt++)for(var pt=0;pt<ue[nt].length;pt++)for(var Ke=0;Ke+2<ue[nt][pt].length;Ke+=2)ue[nt][pt][Ke+1]=Ee[nt][pt][Ke+1]+$t,ue[nt][pt][Ke+2]=Ee[nt][pt][Ke+2]+Wt}function Je($t,Wt){Ze($t,Wt),ke()}function ft($t){yt=+$t.srcElement.getAttribute("data-i"),yt||(yt=0),it[yt].moveFn=Je}function wt(){le()}function Ct($t){$t===2&&pe(Me)}function Kt(){if(it=[],!!ue.length){var $t=0;it[$t]={element:me[0][0],gd:Me,prepFn:ft,doneFn:wt,clickFn:Ct},c.init(it[$t])}}};function se(Q,ue){for(var me=0;me<ue.length;me++){var be=ue[me];Q[me]=[];for(var ve=0;ve<be.length;ve++){Q[me][ve]=[];for(var Me=0;Me<be[ve].length;Me++)Q[me][ve][Me]=be[ve][Me]}}return Q}function he(Q,ue){var me=Q[ue][1],be=Q[ue][2],ve=Q.length,Me,ke,le;return Me=(ue+1)%ve,ke=Q[Me][1],le=Q[Me][2],ke===me&&le===be&&(Me=(ue+2)%ve,ke=Q[Me][1],le=Q[Me][2]),[Me,ke,le]}function pe(Q){if(p(Q._fullLayout.dragmode)){O(Q);var ue=Q._fullLayout._activeSelectionIndex,me=(Q.layout||{}).selections||[];if(ue<me.length){for(var be=[],ve=0;ve<me.length;ve++)ve!==ue&&be.push(me[ve]);delete Q._fullLayout._activeSelectionIndex;var Me=Q._fullLayout.selections[ue];Q._fullLayout._deselect={xref:Me.xref,yref:Me.yref},g.call("_guiRelayout",Q,{selections:be})}}}}}),Dc=n({"src/components/shapes/draw.js"(ce,fe){var d=k(),u=hr(),c=pa(),m=mi(),v=ml().readPaths,p=Rc(),g=Af(),w=cs().clearOutlineControllers,s=Ve(),j=ni(),b=vn().arrayEditor,z=rs(),X=Ki(),N=Zs(),O=Es(),F=O.getPathString;fe.exports={draw:P,drawOne:H,eraseActiveShape:pe,drawLabel:g};function P(Q){var ue=Q._fullLayout;ue._shapeUpperLayer.selectAll("path").remove(),ue._shapeLowerLayer.selectAll("path").remove(),ue._shapeUpperLayer.selectAll("text").remove(),ue._shapeLowerLayer.selectAll("text").remove();for(var me in ue._plots){var be=ue._plots[me].shapelayer;be&&(be.selectAll("path").remove(),be.selectAll("text").remove())}for(var ve=0;ve<ue.shapes.length;ve++)ue.shapes[ve].visible===!0&&H(Q,ve)}function _(Q){return!!Q._fullLayout._outlining}function R(Q){return!Q._context.edits.shapePosition}function H(Q,ue){Q._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+ue+'"]').remove();var me=O.makeShapesOptionsAndPlotinfo(Q,ue),be=me.options,ve=me.plotinfo;if(!be._input||be.visible!==!0)return;if(be.layer==="above")ke(Q._fullLayout._shapeUpperLayer);else if(be.xref==="paper"||be.yref==="paper")ke(Q._fullLayout._shapeLowerLayer);else if(be.layer==="between")ke(ve.shapelayerBetween);else if(ve._hadPlotinfo){var Me=ve.mainplotinfo||ve;ke(Me.shapelayer)}else ke(Q._fullLayout._shapeLowerLayer);function ke(le){var De=F(Q,be),Oe={"data-index":ue,"fill-rule":be.fillrule,d:De},He=be.opacity,Be=be.fillcolor,Ye=be.line.width?be.line.color:"rgba(0,0,0,0)",st=be.line.width,it=be.line.dash;!st&&be.editable===!0&&(st=5,it="solid");var yt=De[De.length-1]!=="Z",_e=R(Q)&&be.editable&&Q._fullLayout._activeShapeIndex===ue;_e&&(Be=yt?"rgba(0,0,0,0)":Q._fullLayout.activeshape.fillcolor,He=Q._fullLayout.activeshape.opacity);var Ee=le.append("g").classed("shape-group",!0).attr({"data-index":ue}),de=Ee.append("path").attr(Oe).style("opacity",He).call(s.stroke,Ye).call(s.fill,Be).call(j.dashLine,it,st);te(Ee,Q,be),g(Q,ue,be,Ee);var we;if((_e||Q._context.edits.shapePosition)&&(we=b(Q.layout,"shapes",be)),_e){de.style({cursor:"move"});var je={element:de.node(),plotinfo:ve,gd:Q,editHelpers:we,hasText:be.label.text||be.label.texttemplate,isActiveShape:!0},Ae=v(De,Q);p(Ae,de,je)}else Q._context.edits.shapePosition?J(Q,de,be,ue,le,we):be.editable===!0&&de.style("pointer-events",yt||s.opacity(Be)*He<=.5?"stroke":"all");de.node().addEventListener("click",function(){return se(Q,de)})}}function te(Q,ue,me){var be=(me.xref+me.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");j.setClipUrl(Q,be?"clip"+ue._fullLayout._uid+be:null,ue)}function J(Q,ue,me,be,ve,Me){var ke=10,le=10,De=me.xsizemode==="pixel",Oe=me.ysizemode==="pixel",He=me.type==="line",Be=me.type==="path",Ye=Me.modifyItem,st,it,yt,_e,Ee,de,we,je,Ae,$,oe,ge,Te,Ue,Ze,Je=d.select(ue.node().parentNode),ft=m.getFromId(Q,me.xref),wt=m.getRefType(me.xref),Ct=m.getFromId(Q,me.yref),Kt=m.getRefType(me.yref),$t=me.x0shift,Wt=me.x1shift,nt=me.y0shift,pt=me.y1shift,Ke=function(Le,ot){var ct=O.getDataToPixel(Q,ft,ot,!1,wt);return ct(Le)},gt=function(Le,ot){var ct=O.getDataToPixel(Q,Ct,ot,!0,Kt);return ct(Le)},Ft=O.getPixelToData(Q,ft,!1,wt),Xt=O.getPixelToData(Q,Ct,!0,Kt),or=wr(),sr={element:or.node(),gd:Q,prepFn:nr,doneFn:jr,clickFn:ta},dr;z.init(sr),or.node().onmousemove=Pr;function wr(){return He?xr():ue}function xr(){var Le=10,ot=Math.max(me.line.width,Le),ct=ve.append("g").attr("data-index",be).attr("drag-helper",!0);ct.append("path").attr("d",ue.attr("d")).style({cursor:"move","stroke-width":ot,"stroke-opacity":"0"});var ut={"fill-opacity":"0"},Pt=Math.max(ot/2,Le);return ct.append("circle").attr({"data-line-point":"start-point",cx:De?Ke(me.xanchor)+me.x0:Ke(me.x0,$t),cy:Oe?gt(me.yanchor)-me.y0:gt(me.y0,nt),r:Pt}).style(ut).classed("cursor-grab",!0),ct.append("circle").attr({"data-line-point":"end-point",cx:De?Ke(me.xanchor)+me.x1:Ke(me.x1,Wt),cy:Oe?gt(me.yanchor)-me.y1:gt(me.y1,pt),r:Pt}).style(ut).classed("cursor-grab",!0),ct}function Pr(Le){if(_(Q)){dr=null;return}if(He)Le.target.tagName==="path"?dr="move":dr=Le.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var ot=sr.element.getBoundingClientRect(),ct=ot.right-ot.left,ut=ot.bottom-ot.top,Pt=Le.clientX-ot.left,Ot=Le.clientY-ot.top,qt=!Be&&ct>ke&&ut>le&&!Le.shiftKey?z.getCursor(Pt/ct,1-Ot/ut):"move";X(ue,qt),dr=qt.split("-")[0]}}function nr(Le){_(Q)||(De&&(Ee=Ke(me.xanchor)),Oe&&(de=gt(me.yanchor)),me.type==="path"?Ze=me.path:(st=De?me.x0:Ke(me.x0),it=Oe?me.y0:gt(me.y0),yt=De?me.x1:Ke(me.x1),_e=Oe?me.y1:gt(me.y1)),st<yt?(Ae=st,Te="x0",$=yt,Ue="x1"):(Ae=yt,Te="x1",$=st,Ue="x0"),!Oe&&it<_e||Oe&&it>_e?(we=it,oe="y0",je=_e,ge="y1"):(we=_e,oe="y1",je=it,ge="y0"),Pr(Le),vt(ve,me),xt(ue,me,Q),sr.moveFn=dr==="move"?Nr:Jr,sr.altKey=Le.altKey)}function jr(){_(Q)||(X(ue),Mt(ve),te(ue,Q,me),u.call("_guiRelayout",Q,Me.getUpdateObj()))}function ta(){_(Q)||Mt(ve)}function Nr(Le,ot){if(me.type==="path"){var ct=function(Ot){return Ot},ut=ct,Pt=ct;De?Ye("xanchor",me.xanchor=Ft(Ee+Le)):(ut=function(qt){return Ft(Ke(qt)+Le)},ft&&ft.type==="date"&&(ut=O.encodeDate(ut))),Oe?Ye("yanchor",me.yanchor=Xt(de+ot)):(Pt=function(qt){return Xt(gt(qt)+ot)},Ct&&Ct.type==="date"&&(Pt=O.encodeDate(Pt))),Ye("path",me.path=ye(Ze,ut,Pt))}else De?Ye("xanchor",me.xanchor=Ft(Ee+Le)):(Ye("x0",me.x0=Ft(st+Le)),Ye("x1",me.x1=Ft(yt+Le))),Oe?Ye("yanchor",me.yanchor=Xt(de+ot)):(Ye("y0",me.y0=Xt(it+ot)),Ye("y1",me.y1=Xt(_e+ot)));ue.attr("d",F(Q,me)),vt(ve,me),g(Q,be,me,Je)}function Jr(Le,ot){if(Be){var ct=function(va){return va},ut=ct,Pt=ct;De?Ye("xanchor",me.xanchor=Ft(Ee+Le)):(ut=function(ma){return Ft(Ke(ma)+Le)},ft&&ft.type==="date"&&(ut=O.encodeDate(ut))),Oe?Ye("yanchor",me.yanchor=Xt(de+ot)):(Pt=function(ma){return Xt(gt(ma)+ot)},Ct&&Ct.type==="date"&&(Pt=O.encodeDate(Pt))),Ye("path",me.path=ye(Ze,ut,Pt))}else if(He){if(dr==="resize-over-start-point"){var Ot=st+Le,qt=Oe?it-ot:it+ot;Ye("x0",me.x0=De?Ot:Ft(Ot)),Ye("y0",me.y0=Oe?qt:Xt(qt))}else if(dr==="resize-over-end-point"){var ir=yt+Le,_r=Oe?_e-ot:_e+ot;Ye("x1",me.x1=De?ir:Ft(ir)),Ye("y1",me.y1=Oe?_r:Xt(_r))}}else{var Bt=function(va){return dr.indexOf(va)!==-1},gr=Bt("n"),Ar=Bt("s"),Er=Bt("w"),ba=Bt("e"),Ga=gr?we+ot:we,Xa=Ar?je+ot:je,Aa=Er?Ae+Le:Ae,Oa=ba?$+Le:$;Oe&&(gr&&(Ga=we-ot),Ar&&(Xa=je-ot)),(!Oe&&Xa-Ga>le||Oe&&Ga-Xa>le)&&(Ye(oe,me[oe]=Oe?Ga:Xt(Ga)),Ye(ge,me[ge]=Oe?Xa:Xt(Xa))),Oa-Aa>ke&&(Ye(Te,me[Te]=De?Aa:Ft(Aa)),Ye(Ue,me[Ue]=De?Oa:Ft(Oa)))}ue.attr("d",F(Q,me)),vt(ve,me),g(Q,be,me,Je)}function vt(Le,ot){(De||Oe)&&ct();function ct(){var ut=ot.type!=="path",Pt=Le.selectAll(".visual-cue").data([0]),Ot=1;Pt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Ot}).classed("visual-cue",!0);var qt=Ke(De?ot.xanchor:c.midRange(ut?[ot.x0,ot.x1]:O.extractPathCoords(ot.path,N.paramIsX))),ir=gt(Oe?ot.yanchor:c.midRange(ut?[ot.y0,ot.y1]:O.extractPathCoords(ot.path,N.paramIsY)));if(qt=O.roundPositionForSharpStrokeRendering(qt,Ot),ir=O.roundPositionForSharpStrokeRendering(ir,Ot),De&&Oe){var _r="M"+(qt-1-Ot)+","+(ir-1-Ot)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Pt.attr("d",_r)}else if(De){var Bt="M"+(qt-1-Ot)+","+(ir-9-Ot)+"v18 h2 v-18 Z";Pt.attr("d",Bt)}else{var gr="M"+(qt-9-Ot)+","+(ir-1-Ot)+"h18 v2 h-18 Z";Pt.attr("d",gr)}}}function Mt(Le){Le.selectAll(".visual-cue").remove()}function xt(Le,ot,ct){var ut=ot.xref,Pt=ot.yref,Ot=m.getFromId(ct,ut),qt=m.getFromId(ct,Pt),ir="";ut!=="paper"&&!Ot.autorange&&(ir+=ut),Pt!=="paper"&&!qt.autorange&&(ir+=Pt),j.setClipUrl(Le,ir?"clip"+ct._fullLayout._uid+ir:null,ct)}}function ye(Q,ue,me){return Q.replace(N.segmentRE,function(be){var ve=0,Me=be.charAt(0),ke=N.paramIsX[Me],le=N.paramIsY[Me],De=N.numParams[Me],Oe=be.substr(1).replace(N.paramRE,function(He){return ve>=De||(ke[ve]?He=ue(He):le[ve]&&(He=me(He)),ve++),He});return Me+Oe})}function se(Q,ue){if(R(Q)){var me=ue.node(),be=+me.getAttribute("data-index");if(be>=0){if(be===Q._fullLayout._activeShapeIndex){he(Q);return}Q._fullLayout._activeShapeIndex=be,Q._fullLayout._deactivateShape=he,P(Q)}}}function he(Q){if(R(Q)){var ue=Q._fullLayout._activeShapeIndex;ue>=0&&(w(Q),delete Q._fullLayout._activeShapeIndex,P(Q))}}function pe(Q){if(R(Q)){w(Q);var ue=Q._fullLayout._activeShapeIndex,me=(Q.layout||{}).shapes||[];if(ue<me.length){for(var be=[],ve=0;ve<me.length;ve++)ve!==ue&&be.push(me[ve]);return delete Q._fullLayout._activeShapeIndex,u.call("_guiRelayout",Q,{shapes:be})}}}}}),Sf=n({"src/components/modebar/buttons.js"(ce,fe){var d=hr(),u=Di(),c=di(),m=pu(),v=Dc().eraseActiveShape,p=pa(),g=p._,w=fe.exports={};w.toImage={name:"toImage",title:function(J){var ye=J._context.toImageButtonOptions||{},se=ye.format||"png";return se==="png"?g(J,"Download plot as a PNG"):g(J,"Download plot")},icon:m.camera,click:function(J){var ye=J._context.toImageButtonOptions,se={format:ye.format||"png"};p.notifier(g(J,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(he){he in ye&&(se[he]=ye[he])}),d.call("downloadImage",J,se).then(function(he){p.notifier(g(J,"Snapshot succeeded")+" - "+he,"long")}).catch(function(){p.notifier(g(J,"Sorry, there was a problem downloading your snapshot!"),"long")})}},w.sendDataToCloud={name:"sendDataToCloud",title:function(J){return g(J,"Edit in Chart Studio")},icon:m.disk,click:function(J){u.sendDataToCloud(J)}},w.editInChartStudio={name:"editInChartStudio",title:function(J){return g(J,"Edit in Chart Studio")},icon:m.pencil,click:function(J){u.sendDataToCloud(J)}},w.zoom2d={name:"zoom2d",_cat:"zoom",title:function(J){return g(J,"Zoom")},attr:"dragmode",val:"zoom",icon:m.zoombox,click:s},w.pan2d={name:"pan2d",_cat:"pan",title:function(J){return g(J,"Pan")},attr:"dragmode",val:"pan",icon:m.pan,click:s},w.select2d={name:"select2d",_cat:"select",title:function(J){return g(J,"Box Select")},attr:"dragmode",val:"select",icon:m.selectbox,click:s},w.lasso2d={name:"lasso2d",_cat:"lasso",title:function(J){return g(J,"Lasso Select")},attr:"dragmode",val:"lasso",icon:m.lasso,click:s},w.drawclosedpath={name:"drawclosedpath",title:function(J){return g(J,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:m.drawclosedpath,click:s},w.drawopenpath={name:"drawopenpath",title:function(J){return g(J,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:m.drawopenpath,click:s},w.drawline={name:"drawline",title:function(J){return g(J,"Draw line")},attr:"dragmode",val:"drawline",icon:m.drawline,click:s},w.drawrect={name:"drawrect",title:function(J){return g(J,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:m.drawrect,click:s},w.drawcircle={name:"drawcircle",title:function(J){return g(J,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:m.drawcircle,click:s},w.eraseshape={name:"eraseshape",title:function(J){return g(J,"Erase active shape")},icon:m.eraseshape,click:v},w.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(J){return g(J,"Zoom in")},attr:"zoom",val:"in",icon:m.zoom_plus,click:s},w.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(J){return g(J,"Zoom out")},attr:"zoom",val:"out",icon:m.zoom_minus,click:s},w.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(J){return g(J,"Autoscale")},attr:"zoom",val:"auto",icon:m.autoscale,click:s},w.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(J){return g(J,"Reset axes")},attr:"zoom",val:"reset",icon:m.home,click:s},w.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(J){return g(J,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:m.tooltip_basic,gravity:"ne",click:s},w.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(J){return g(J,"Compare data on hover")},attr:"hovermode",val:function(J){return J._fullLayout._isHoriz?"y":"x"},icon:m.tooltip_compare,gravity:"ne",click:s};function s(J,ye){var se=ye.currentTarget,he=se.getAttribute("data-attr"),pe=se.getAttribute("data-val")||!0,Q=J._fullLayout,ue={},me=c.list(J,null,!0),be=Q._cartesianSpikesEnabled,ve,Me;if(he==="zoom"){var ke=pe==="in"?.5:2,le=(1+ke)/2,De=(1-ke)/2,Oe,He;for(Me=0;Me<me.length;Me++)if(ve=me[Me],He=ve.modebardisable==="none"||ve.modebardisable.indexOf(pe==="auto"||pe==="reset"?"autoscale":"zoominout")===-1,He&&!ve.fixedrange)if(Oe=ve._name,pe==="auto")ue[Oe+".autorange"]=!0;else if(pe==="reset")ve._rangeInitial0===void 0&&ve._rangeInitial1===void 0?ue[Oe+".autorange"]=!0:ve._rangeInitial0===void 0?(ue[Oe+".autorange"]=ve._autorangeInitial,ue[Oe+".range"]=[null,ve._rangeInitial1]):ve._rangeInitial1===void 0?(ue[Oe+".range"]=[ve._rangeInitial0,null],ue[Oe+".autorange"]=ve._autorangeInitial):ue[Oe+".range"]=[ve._rangeInitial0,ve._rangeInitial1],ve._showSpikeInitial!==void 0&&(ue[Oe+".showspikes"]=ve._showSpikeInitial,be==="on"&&!ve._showSpikeInitial&&(be="off"));else{var Be=[ve.r2l(ve.range[0]),ve.r2l(ve.range[1])],Ye=[le*Be[0]+De*Be[1],le*Be[1]+De*Be[0]];ue[Oe+".range[0]"]=ve.l2r(Ye[0]),ue[Oe+".range[1]"]=ve.l2r(Ye[1])}}else he==="hovermode"&&(pe==="x"||pe==="y")&&(pe=Q._isHoriz?"y":"x",se.setAttribute("data-val",pe)),ue[he]=pe;Q._cartesianSpikesEnabled=be,d.call("_guiRelayout",J,ue)}w.zoom3d={name:"zoom3d",_cat:"zoom",title:function(J){return g(J,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:m.zoombox,click:j},w.pan3d={name:"pan3d",_cat:"pan",title:function(J){return g(J,"Pan")},attr:"scene.dragmode",val:"pan",icon:m.pan,click:j},w.orbitRotation={name:"orbitRotation",title:function(J){return g(J,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:m["3d_rotate"],click:j},w.tableRotation={name:"tableRotation",title:function(J){return g(J,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:m["z-axis"],click:j};function j(J,ye){for(var se=ye.currentTarget,he=se.getAttribute("data-attr"),pe=se.getAttribute("data-val")||!0,Q=J._fullLayout._subplots.gl3d||[],ue={},me=he.split("."),be=0;be<Q.length;be++)ue[Q[be]+"."+me[1]]=pe;var ve=pe==="pan"?pe:"zoom";ue.dragmode=ve,d.call("_guiRelayout",J,ue)}w.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(J){return g(J,"Reset camera to default")},attr:"resetDefault",icon:m.home,click:b},w.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(J){return g(J,"Reset camera to last save")},attr:"resetLastSave",icon:m.movie,click:b};function b(J,ye){for(var se=ye.currentTarget,he=se.getAttribute("data-attr"),pe=he==="resetLastSave",Q=he==="resetDefault",ue=J._fullLayout,me=ue._subplots.gl3d||[],be={},ve=0;ve<me.length;ve++){var Me=me[ve],ke=Me+".camera",le=Me+".aspectratio",De=Me+".aspectmode",Oe=ue[Me]._scene,He;pe?(be[ke+".up"]=Oe.viewInitial.up,be[ke+".eye"]=Oe.viewInitial.eye,be[ke+".center"]=Oe.viewInitial.center,He=!0):Q&&(be[ke+".up"]=null,be[ke+".eye"]=null,be[ke+".center"]=null,He=!0),He&&(be[le+".x"]=Oe.viewInitial.aspectratio.x,be[le+".y"]=Oe.viewInitial.aspectratio.y,be[le+".z"]=Oe.viewInitial.aspectratio.z,be[De]=Oe.viewInitial.aspectmode)}d.call("_guiRelayout",J,be)}w.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(J){return g(J,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:m.tooltip_basic,gravity:"ne",click:X};function z(J,ye){var se=ye.currentTarget,he=se._previousVal,pe=J._fullLayout,Q=pe._subplots.gl3d||[],ue=["xaxis","yaxis","zaxis"],me={},be={};if(he)be=he,se._previousVal=null;else{for(var ve=0;ve<Q.length;ve++){var Me=Q[ve],ke=pe[Me],le=Me+".hovermode";me[le]=ke.hovermode,be[le]=!1;for(var De=0;De<3;De++){var Oe=ue[De],He=Me+"."+Oe+".showspikes";be[He]=!1,me[He]=ke[Oe].showspikes}}se._previousVal=me}return be}function X(J,ye){var se=z(J,ye);d.call("_guiRelayout",J,se)}w.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(J){return g(J,"Zoom in")},attr:"zoom",val:"in",icon:m.zoom_plus,click:N},w.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(J){return g(J,"Zoom out")},attr:"zoom",val:"out",icon:m.zoom_minus,click:N},w.resetGeo={name:"resetGeo",_cat:"reset",title:function(J){return g(J,"Reset")},attr:"reset",val:null,icon:m.autoscale,click:N},w.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(J){return g(J,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:m.tooltip_basic,gravity:"ne",click:F};function N(J,ye){for(var se=ye.currentTarget,he=se.getAttribute("data-attr"),pe=se.getAttribute("data-val")||!0,Q=J._fullLayout,ue=Q._subplots.geo||[],me=0;me<ue.length;me++){var be=ue[me],ve=Q[be];if(he==="zoom"){var Me=ve.projection.scale,ke=pe==="in"?2*Me:.5*Me;d.call("_guiRelayout",J,be+".projection.scale",ke)}}he==="reset"&&te(J,"geo")}w.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(J){return g(J,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:m.tooltip_basic,gravity:"ne",click:F};function O(J){var ye=J._fullLayout;return ye.hovermode?!1:ye._has("cartesian")?ye._isHoriz?"y":"x":"closest"}function F(J){var ye=O(J);d.call("_guiRelayout",J,"hovermode",ye)}w.resetViewSankey={name:"resetSankeyGroup",title:function(J){return g(J,"Reset view")},icon:m.home,click:function(J){for(var ye={"node.groups":[],"node.x":[],"node.y":[]},se=0;se<J._fullData.length;se++){var he=J._fullData[se]._viewInitial;ye["node.groups"].push(he.node.groups.slice()),ye["node.x"].push(he.node.x.slice()),ye["node.y"].push(he.node.y.slice())}d.call("restyle",J,ye)}},w.toggleHover={name:"toggleHover",title:function(J){return g(J,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:m.tooltip_basic,gravity:"ne",click:function(J,ye){var se=z(J,ye);se.hovermode=O(J),d.call("_guiRelayout",J,se)}},w.resetViews={name:"resetViews",title:function(J){return g(J,"Reset views")},icon:m.home,click:function(J,ye){var se=ye.currentTarget;se.setAttribute("data-attr","zoom"),se.setAttribute("data-val","reset"),s(J,ye),se.setAttribute("data-attr","resetLastSave"),b(J,ye),te(J,"geo"),te(J,"mapbox"),te(J,"map")}},w.toggleSpikelines={name:"toggleSpikelines",title:function(J){return g(J,"Toggle Spike Lines")},icon:m.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(J){var ye=J._fullLayout,se=ye._cartesianSpikesEnabled;ye._cartesianSpikesEnabled=se==="on"?"off":"on",d.call("_guiRelayout",J,P(J))}};function P(J){for(var ye=J._fullLayout,se=ye._cartesianSpikesEnabled==="on",he=c.list(J,null,!0),pe={},Q=0;Q<he.length;Q++){var ue=he[Q];pe[ue._name+".showspikes"]=se?!0:ue._showSpikeInitial}return pe}w.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(J){return g(J,"Reset view")},attr:"reset",icon:m.home,click:function(J){te(J,"mapbox")}},w.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(J){return g(J,"Reset view")},attr:"reset",icon:m.home,click:function(J){te(J,"map")}},w.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(J){return g(J,"Zoom in")},attr:"zoom",val:"in",icon:m.zoom_plus,click:_},w.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(J){return g(J,"Zoom in")},attr:"zoom",val:"in",icon:m.zoom_plus,click:R},w.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(J){return g(J,"Zoom out")},attr:"zoom",val:"out",icon:m.zoom_minus,click:_},w.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(J){return g(J,"Zoom out")},attr:"zoom",val:"out",icon:m.zoom_minus,click:R};function _(J,ye){H(J,ye,"mapbox")}function R(J,ye){H(J,ye,"map")}function H(J,ye,se){for(var he=ye.currentTarget,pe=he.getAttribute("data-val"),Q=J._fullLayout,ue=Q._subplots[se]||[],me=1.05,be={},ve=0;ve<ue.length;ve++){var Me=ue[ve],ke=Q[Me].zoom,le=pe==="in"?me*ke:ke/me;be[Me+".zoom"]=le}d.call("_guiRelayout",J,be)}function te(J,ye){for(var se=J._fullLayout,he=se._subplots[ye]||[],pe={},Q=0;Q<he.length;Q++)for(var ue=he[Q],me=se[ue]._subplot,be=me.viewInitial,ve=Object.keys(be),Me=0;Me<ve.length;Me++){var ke=ve[Me];pe[ue+"."+ke]=be[ke]}d.call("_guiRelayout",J,pe)}}}),Tf=n({"src/components/modebar/constants.js"(ce,fe){var d=Sf(),u=Object.keys(d),c=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],m=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(c),v=[],p=function(g){if(m.indexOf(g._cat||g.name)===-1){var w=g.name,s=(g._cat||g.name).toLowerCase();v.indexOf(w)===-1&&v.push(w),v.indexOf(s)===-1&&v.push(s)}};u.forEach(function(g){p(d[g])}),v.sort(),fe.exports={DRAW_MODES:c,backButtons:m,foreButtons:v}}}),Mf=n({"src/components/modebar/attributes.js"(ce,fe){Tf(),fe.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}}}),zc=n({"src/components/modebar/defaults.js"(ce,fe){var d=pa(),u=Ve(),c=vn(),m=Mf();fe.exports=function(p,g){var w=p.modebar||{},s=c.newContainer(g,"modebar");function j(z,X){return d.coerce(w,s,m,z,X)}j("orientation"),j("bgcolor",u.addOpacity(g.paper_bgcolor,.5));var b=u.contrast(u.rgb(g.modebar.bgcolor));j("color",u.addOpacity(b,.3)),j("activecolor",u.addOpacity(b,.7)),j("uirevision",g.uirevision),j("add"),j("remove")}}}),Js=n({"src/components/modebar/modebar.js"(ce,fe){var d=k(),u=B(),c=pa(),m=pu(),v=y().version,p=new DOMParser;function g(b){this.container=b.container,this.element=document.createElement("div"),this.update(b.graphInfo,b.buttons),this.container.appendChild(this.element)}var w=g.prototype;w.update=function(b,z){this.graphInfo=b;var X=this.graphInfo._context,N=this.graphInfo._fullLayout,O="modebar-"+N._uid;this.element.setAttribute("id",O),this.element.setAttribute("role","toolbar"),this._uid=O,this.element.className="modebar modebar--custom",X.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),N.modebar.orientation==="v"&&(this.element.className+=" vertical",z=z.reverse());var F=N.modebar,P="#"+O+" .modebar-group";document.querySelectorAll(P).forEach(function(J){J.style.backgroundColor=F.bgcolor});var _=!this.hasButtons(z),R=this.hasLogo!==X.displaylogo,H=this.locale!==X.locale;if(this.locale=X.locale,(_||R||H)&&(this.removeAllButtons(),this.updateButtons(z),X.watermark||X.displaylogo)){var te=this.getLogo();X.watermark&&(te.className=te.className+" watermark"),N.modebar.orientation==="v"?this.element.insertBefore(te,this.element.childNodes[0]):this.element.appendChild(te),this.hasLogo=!0}this.updateActiveButton(),c.setStyleOnHover("#"+O+" .modebar-btn",".active",".icon path","fill: "+F.activecolor,"fill: "+F.color,this.element)},w.updateButtons=function(b){var z=this;this.buttons=b,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(X){var N=z.createGroup();X.forEach(function(O){var F=O.name;if(!F)throw new Error("must provide button 'name' in button config");if(z.buttonsNames.indexOf(F)!==-1)throw new Error("button name '"+F+"' is taken");z.buttonsNames.push(F);var P=z.createButton(O);z.buttonElements.push(P),N.appendChild(P)}),z.element.appendChild(N)})},w.createGroup=function(){var b=document.createElement("div");b.className="modebar-group";var z=this.graphInfo._fullLayout.modebar;return b.style.backgroundColor=z.bgcolor,b},w.createButton=function(b){var z=this,X=document.createElement("button");X.setAttribute("type","button"),X.setAttribute("rel","tooltip"),X.className="modebar-btn";var N=b.title;N===void 0?N=b.name:typeof N=="function"&&(N=N(this.graphInfo)),(N||N===0)&&(X.setAttribute("data-title",N),X.setAttribute("aria-label",N)),b.attr!==void 0&&X.setAttribute("data-attr",b.attr);var O=b.val;O!==void 0&&(typeof O=="function"&&(O=O(this.graphInfo)),X.setAttribute("data-val",O));var F=b.click;if(typeof F!="function")throw new Error("must provide button 'click' function in button config");X.addEventListener("click",function(_){b.click(z.graphInfo,_),z.updateActiveButton(_.currentTarget)}),X.setAttribute("data-toggle",b.toggle||!1),b.toggle&&d.select(X).classed("active",!0);var P=b.icon;return typeof P=="function"?X.appendChild(P()):X.appendChild(this.createIcon(P||m.question)),X.setAttribute("data-gravity",b.gravity||"n"),X},w.createIcon=function(b){var z=u(b.height)?Number(b.height):b.ascent-b.descent,X="http://www.w3.org/2000/svg",N;if(b.path){N=document.createElementNS(X,"svg"),N.setAttribute("viewBox",[0,0,b.width,z].join(" ")),N.setAttribute("class","icon");var O=document.createElementNS(X,"path");O.setAttribute("d",b.path),b.transform?O.setAttribute("transform",b.transform):b.ascent!==void 0&&O.setAttribute("transform","matrix(1 0 0 -1 0 "+b.ascent+")"),N.appendChild(O)}if(b.svg){var F=p.parseFromString(b.svg,"application/xml");N=F.childNodes[0]}return N.setAttribute("height","1em"),N.setAttribute("width","1em"),N},w.updateActiveButton=function(b){var z=this.graphInfo._fullLayout,X=b!==void 0?b.getAttribute("data-attr"):null;this.buttonElements.forEach(function(N){var O=N.getAttribute("data-val")||!0,F=N.getAttribute("data-attr"),P=N.getAttribute("data-toggle")==="true",_=d.select(N),R=function(J,ye){var se=z.modebar,he=J.querySelector(".icon path");he&&(ye||J.matches(":hover")?he.style.fill=se.activecolor:he.style.fill=se.color)};if(P){if(F===X){var H=!_.classed("active");_.classed("active",H),R(N,H)}}else{var te=F===null?F:c.nestedProperty(z,F).get();_.classed("active",te===O),R(N,te===O)}})},w.hasButtons=function(b){var z=this.buttons;if(!z||b.length!==z.length)return!1;for(var X=0;X<b.length;++X){if(b[X].length!==z[X].length)return!1;for(var N=0;N<b[X].length;N++)if(b[X][N].name!==z[X][N].name)return!1}return!0};function s(b){return b+" (v"+v+")"}w.getLogo=function(){var b=this.createGroup(),z=document.createElement("a");return z.href="https://plotly.com/",z.target="_blank",z.setAttribute("data-title",s(c._(this.graphInfo,"Produced with Plotly.js"))),z.className="modebar-btn plotlyjsicon modebar-btn--logo",z.appendChild(this.createIcon(m.newplotlylogo)),b.appendChild(z),b},w.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},w.destroy=function(){c.removeElement(this.container.querySelector(".modebar"))};function j(b,z){var X=b._fullLayout,N=new g({graphInfo:b,container:X._modebardiv.node(),buttons:z});return X._privateplot&&d.select(N.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),N}fe.exports=j}}),_h=n({"src/components/modebar/manage.js"(ce,fe){var d=di(),u=Oi(),c=hr(),m=ts().isUnifiedHover,v=Js(),p=Sf(),g=Tf().DRAW_MODES,w=pa().extendDeep;fe.exports=function(F){var P=F._fullLayout,_=F._context,R=P._modeBar;if(!_.displayModeBar&&!_.watermark){R&&(R.destroy(),delete P._modeBar);return}if(!Array.isArray(_.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(_.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var H=_.modeBarButtons,te;Array.isArray(H)&&H.length?te=N(H):!_.displayModeBar&&_.watermark?te=[]:te=s(F),R?R.update(F,te):P._modeBar=v(F,te)};function s(O){var F=O._fullLayout,P=O._fullData,_=O._context;function R($,oe){if(typeof oe=="string"){if(oe.toLowerCase()===$.toLowerCase())return!0}else{var ge=oe.name,Te=oe._cat||oe.name;if(ge===$||Te===$.toLowerCase())return!0}return!1}var H=F.modebar.add;typeof H=="string"&&(H=[H]);var te=F.modebar.remove;typeof te=="string"&&(te=[te]);var J=_.modeBarButtonsToAdd.concat(H.filter(function($){for(var oe=0;oe<_.modeBarButtonsToRemove.length;oe++)if(R($,_.modeBarButtonsToRemove[oe]))return!1;return!0})),ye=_.modeBarButtonsToRemove.concat(te.filter(function($){for(var oe=0;oe<_.modeBarButtonsToAdd.length;oe++)if(R($,_.modeBarButtonsToAdd[oe]))return!1;return!0})),se=F._has("cartesian"),he=F._has("gl3d"),pe=F._has("geo"),Q=F._has("pie"),ue=F._has("funnelarea"),me=F._has("ternary"),be=F._has("mapbox"),ve=F._has("map"),Me=F._has("polar"),ke=F._has("smith"),le=F._has("sankey"),De=j(F),Oe=m(F.hovermode),He=[];function Be($){if($.length){for(var oe=[],ge=0;ge<$.length;ge++){for(var Te=$[ge],Ue=p[Te],Ze=Ue.name.toLowerCase(),Je=(Ue._cat||Ue.name).toLowerCase(),ft=!1,wt=0;wt<ye.length;wt++){var Ct=ye[wt].toLowerCase();if(Ct===Ze||Ct===Je){ft=!0;break}}ft||oe.push(p[Te])}He.push(oe)}}var Ye=["toImage"];_.showEditInChartStudio?Ye.push("editInChartStudio"):_.showSendToCloud&&Ye.push("sendDataToCloud"),Be(Ye);var st=[],it=[],yt=[],_e=[];(se||Q||ue||me)+pe+he+be+ve+Me+ke>1?(it=["toggleHover"],yt=["resetViews"]):pe?(st=["zoomInGeo","zoomOutGeo"],it=["hoverClosestGeo"],yt=["resetGeo"]):he?(it=["hoverClosest3d"],yt=["resetCameraDefault3d","resetCameraLastSave3d"]):be?(st=["zoomInMapbox","zoomOutMapbox"],it=["toggleHover"],yt=["resetViewMapbox"]):ve?(st=["zoomInMap","zoomOutMap"],it=["toggleHover"],yt=["resetViewMap"]):Q?it=["hoverClosestPie"]:le?(it=["hoverClosestCartesian","hoverCompareCartesian"],yt=["resetViewSankey"]):it=["toggleHover"],se&&it.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(z(P)||Oe)&&(it=[]),se&&!De&&(st=["zoomIn2d","zoomOut2d","autoScale2d"],yt[0]!=="resetViews"&&(yt=["resetScale2d"])),he?_e=["zoom3d","pan3d","orbitRotation","tableRotation"]:se&&!De||me?_e=["zoom2d","pan2d"]:be||ve||pe?_e=["pan2d"]:Me&&(_e=["zoom2d"]),b(P)&&_e.push("select2d","lasso2d");var Ee=[],de=function($){Ee.indexOf($)===-1&&it.indexOf($)!==-1&&Ee.push($)};if(Array.isArray(J)){for(var we=[],je=0;je<J.length;je++){var Ae=J[je];typeof Ae=="string"?(Ae=Ae.toLowerCase(),g.indexOf(Ae)!==-1?(F._has("mapbox")||F._has("map")||F._has("cartesian"))&&_e.push(Ae):Ae==="togglespikelines"?de("toggleSpikelines"):Ae==="togglehover"?de("toggleHover"):Ae==="hovercompare"?de("hoverCompareCartesian"):Ae==="hoverclosest"?(de("hoverClosestCartesian"),de("hoverClosestGeo"),de("hoverClosest3d"),de("hoverClosestPie")):Ae==="v1hovermode"&&(de("hoverClosestCartesian"),de("hoverCompareCartesian"),de("hoverClosestGeo"),de("hoverClosest3d"),de("hoverClosestPie"))):we.push(Ae)}J=we}return Be(_e),Be(st.concat(yt)),Be(Ee),X(He,J)}function j(O){for(var F=d.list({_fullLayout:O},null,!0),P=0;P<F.length;P++){var _=F[P].modebardisable;if(!F[P].fixedrange&&_!=="autoscale+zoominout"&&_!=="zoominout+autoscale")return!1}return!0}function b(O){for(var F=!1,P=0;P<O.length&&!F;P++){var _=O[P];!_._module||!_._module.selectPoints||(c.traceIs(_,"scatter-like")?(u.hasMarkers(_)||u.hasText(_))&&(F=!0):c.traceIs(_,"box-violin")?(_.boxpoints==="all"||_.points==="all")&&(F=!0):F=!0)}return F}function z(O){for(var F=0;F<O.length;F++)if(!c.traceIs(O[F],"noHover"))return!1;return!0}function X(O,F){if(F.length)if(Array.isArray(F[0]))for(var P=0;P<F.length;P++)O.push(F[P]);else O.push(F);return O}function N(O){for(var F=w([],O),P=0;P<F.length;P++)for(var _=F[P],R=0;R<_.length;R++){var H=_[R];if(typeof H=="string")if(p[H]!==void 0)F[P][R]=p[H];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return F}}}),Lc=n({"src/components/modebar/index.js"(ce,fe){fe.exports={moduleType:"component",name:"modebar",layoutAttributes:Mf(),supplyLayoutDefaults:zc(),manage:_h()}}}),Ks=n({"src/plots/cartesian/scale_zoom.js"(ce,fe){var d=xi().FROM_BL;fe.exports=function(c,m,v){v===void 0&&(v=d[c.constraintoward||"center"]);var p=[c.r2l(c.range[0]),c.r2l(c.range[1])],g=p[0]+(p[1]-p[0])*v;c.range=c._input.range=[c.l2r(g+(p[0]-g)*m),c.l2r(g+(p[1]-g)*m)],c.setScale()}}}),Il=n({"src/plots/cartesian/constraints.js"(ce){var fe=pa(),d=Io(),u=di().id2name,c=yo(),m=Ks(),v=$s(),p=W().ALMOST_EQUAL,g=xi().FROM_BL;ce.handleDefaults=function(O,F,P){var _=P.axIds,R=P.axHasImage,H=F._axisConstraintGroups=[],te=F._axisMatchGroups=[],J,ye,se,he,pe,Q,ue,me;for(J=0;J<_.length;J++)he=u(_[J]),pe=O[he],Q=F[he],w(pe,Q,{axIds:_,layoutOut:F,hasImage:R[he]});function be(Ye,st){for(J=0;J<Ye.length;J++){ye=Ye[J];for(se in ye)F[u(se)][st]=ye}}for(be(te,"_matchGroup"),J=0;J<H.length;J++){ye=H[J];for(se in ye)if(Q=F[u(se)],Q.fixedrange){for(var ve in ye){var Me=u(ve);(O[Me]||{}).fixedrange===!1&&fe.warn("fixedrange was specified as false for axis "+Me+" but was overridden because another axis in its constraint group has fixedrange true"),F[Me].fixedrange=!0}break}}for(J=0;J<H.length;){ye=H[J];for(se in ye){Q=F[u(se)],Q._matchGroup&&Object.keys(Q._matchGroup).length===Object.keys(ye).length&&(H.splice(J,1),J--);break}J++}be(H,"_constraintGroup");var ke=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],le=!1,De=!1;function Oe(){me=Q[ue],ue==="rangebreaks"&&(De=Q._hasDayOfWeekBreaks)}for(J=0;J<te.length;J++){ye=te[J];for(var He=0;He<ke.length;He++){ue=ke[He],me=null;var Be;for(se in ye)if(he=u(se),pe=O[he],Q=F[he],ue in Q){if(!Q.matches&&(Be=Q,ue in pe)){Oe();break}me===null&&ue in pe&&Oe()}if(ue==="range"&&me&&pe.range&&pe.range.length===2&&pe.range[0]!==null&&pe.range[1]!==null&&(le=!0),ue==="autorange"&&me===null&&le&&(me=!1),me===null&&ue in Be&&(me=Be[ue]),me!==null)for(se in ye)Q=F[u(se)],Q[ue]=ue==="range"?me.slice():me,ue==="rangebreaks"&&(Q._hasDayOfWeekBreaks=De,v(Q,F))}}};function w(O,F,P){var _=P.axIds,R=P.layoutOut,H=P.hasImage,te=R._axisConstraintGroups,J=R._axisMatchGroups,ye=F._id,se=ye.charAt(0),he=((R._splomAxes||{})[se]||{})[ye]||{},pe=F._id,Q=pe.charAt(0)==="x";F._matchGroup=null,F._constraintGroup=null;function ue(_e,Ee){return fe.coerce(O,F,c,_e,Ee)}ue("constrain",H?"domain":"range"),fe.coerce(O,F,{constraintoward:{valType:"enumerated",values:Q?["left","center","right"]:["bottom","middle","top"],dflt:Q?"center":"middle"}},"constraintoward");var me=F.type,be,ve,Me=[];for(be=0;be<_.length;be++)if(ve=_[be],ve!==pe){var ke=R[u(ve)];ke.type===me&&Me.push(ve)}var le=j(te,pe);if(le){var De=[];for(be=0;be<Me.length;be++)ve=Me[be],le[ve]||De.push(ve);Me=De}var Oe=Me.length,He,Be;Oe&&(O.matches||he.matches)&&(He=fe.coerce(O,F,{matches:{valType:"enumerated",values:Me,dflt:Me.indexOf(he.matches)!==-1?he.matches:void 0}},"matches"));var Ye=H&&!Q?F.anchor:void 0;if(Oe&&!He&&(O.scaleanchor||Ye)&&(Be=fe.coerce(O,F,{scaleanchor:{valType:"enumerated",values:Me.concat([!1])}},"scaleanchor",Ye)),He){F._matchGroup=b(J,pe,He,1);var st=R[u(He)],it=s(R,F)/s(R,st);Q!==(He.charAt(0)==="x")&&(it=(Q?"x":"y")+it),b(te,pe,He,it)}else O.matches&&_.indexOf(O.matches)!==-1&&fe.warn("ignored "+F._name+'.matches: "'+O.matches+'" to avoid an infinite loop');if(Be){var yt=ue("scaleratio");yt||(yt=F.scaleratio=1),b(te,pe,Be,yt)}else O.scaleanchor&&_.indexOf(O.scaleanchor)!==-1&&fe.warn("ignored "+F._name+'.scaleanchor: "'+O.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function s(O,F){var P=F.domain;return P||(P=O[u(F.overlaying)].domain),P[1]-P[0]}function j(O,F){for(var P=0;P<O.length;P++)if(O[P][F])return O[P];return null}function b(O,F,P,_){var R,H,te,J,ye,se=j(O,F);se===null?(se={},se[F]=1,ye=O.length,O.push(se)):ye=O.indexOf(se);var he=Object.keys(se);for(R=0;R<O.length;R++)if(te=O[R],R!==ye&&te[P]){var pe=te[P];for(H=0;H<he.length;H++)J=he[H],te[J]=z(pe,z(_,se[J]));O.splice(ye,1);return}if(_!==1)for(H=0;H<he.length;H++){var Q=he[H];se[Q]=z(_,se[Q])}se[P]=1}function z(O,F){var P="",_="",R,H;typeof O=="string"&&(P=O.match(/^[xy]*/)[0],R=P.length,O=+O.substr(R)),typeof F=="string"&&(_=F.match(/^[xy]*/)[0],H=_.length,F=+F.substr(H));var te=O*F;return!R&&!H?te:!R||!H||P.charAt(0)===_.charAt(0)?P+_+O*F:R===H?te:(R>H?P.substr(H):_.substr(R))+te}function X(O,F){for(var P=F._size,_=P.h/P.w,R={},H=Object.keys(O),te=0;te<H.length;te++){var J=H[te],ye=O[J];if(typeof ye=="string"){var se=ye.match(/^[xy]*/)[0],he=se.length;ye=+ye.substr(he);for(var pe=se.charAt(0)==="y"?_:1/_,Q=0;Q<he;Q++)ye*=pe}R[J]=ye}return R}ce.enforce=function(F){var P=F._fullLayout,_=P._axisConstraintGroups||[],R,H,te,J,ye,se,he,pe;for(R=0;R<_.length;R++){te=X(_[R],P);var Q=Object.keys(te),ue=1/0,me=0,be=1/0,ve={},Me={},ke=!1;for(H=0;H<Q.length;H++)J=Q[H],Me[J]=ye=P[u(J)],ye._inputDomain?ye.domain=ye._inputDomain.slice():ye._inputDomain=ye.domain.slice(),ye._inputRange||(ye._inputRange=ye.range.slice()),ye.setScale(),ve[J]=se=Math.abs(ye._m)/te[J],ue=Math.min(ue,se),(ye.constrain==="domain"||!ye._constraintShrinkable)&&(be=Math.min(be,se)),delete ye._constraintShrinkable,me=Math.max(me,se),ye.constrain==="domain"&&(ke=!0);if(!(ue>p*me&&!ke)){for(H=0;H<Q.length;H++)if(J=Q[H],se=ve[J],ye=Me[J],he=ye.constrain,se!==be||he==="domain")if(pe=se/be,he==="range")m(ye,pe);else{var le=ye._inputDomain,De=(ye.domain[1]-ye.domain[0])/(le[1]-le[0]),Oe=(ye.r2l(ye.range[1])-ye.r2l(ye.range[0]))/(ye.r2l(ye._inputRange[1])-ye.r2l(ye._inputRange[0]));if(pe/=De,pe*Oe<1){ye.domain=ye._input.domain=le.slice(),m(ye,pe);continue}if(Oe<1&&(ye.range=ye._input.range=ye._inputRange.slice(),pe*=Oe),ye.autorange){var He=ye.r2l(ye.range[0]),Be=ye.r2l(ye.range[1]),Ye=(He+Be)/2,st=Ye,it=Ye,yt=Math.abs(Be-Ye),_e=Ye-yt*pe*1.0001,Ee=Ye+yt*pe*1.0001,de=d.makePadFn(P,ye,0),we=d.makePadFn(P,ye,1);N(ye,pe);var je=Math.abs(ye._m),Ae=d.concatExtremes(F,ye),$=Ae.min,oe=Ae.max,ge,Te;for(Te=0;Te<$.length;Te++)ge=$[Te].val-de($[Te])/je,ge>_e&&ge<st&&(st=ge);for(Te=0;Te<oe.length;Te++)ge=oe[Te].val+we(oe[Te])/je,ge<Ee&&ge>it&&(it=ge);var Ue=(it-st)/(2*yt);pe/=Ue,st=ye.l2r(st),it=ye.l2r(it),ye.range=ye._input.range=He<Be?[st,it]:[it,st]}N(ye,pe)}}}},ce.getAxisGroup=function(F,P){for(var _=F._axisMatchGroups,R=0;R<_.length;R++){var H=_[R];if(H[P])return"g"+R}return P},ce.clean=function(F,P){if(P._inputDomain){for(var _=!1,R=P._id,H=F._fullLayout._axisConstraintGroups,te=0;te<H.length;te++)if(H[te][R]){_=!0;break}(!_||P.constrain!=="domain")&&(P._input.domain=P.domain=P._inputDomain,delete P._inputDomain)}};function N(O,F){var P=O._inputDomain,_=g[O.constraintoward],R=P[0]+(P[1]-P[0])*_;O.domain=O._input.domain=[R+(P[0]-R)/F,R+(P[1]-R)/F],O.setScale()}}}),mu=n({"src/plot_api/subroutines.js"(ce){var fe=k(),d=hr(),u=Di(),c=pa(),m=Ui(),v=Cc(),p=Ve(),g=ni(),w=zl(),s=Lc(),j=mi(),b=xi(),z=Il(),X=z.enforce,N=z.clean,O=Io().doAutoRange,F="start",P="middle",_="end",R=ui().zindexSeparator;ce.layoutStyles=function(le){return c.syncOrAsync([u.doAutoMargin,te],le)};function H(le,De,Oe){for(var He=0;He<Oe.length;He++){var Be=Oe[He][0],Ye=Oe[He][1];if(!(Be[0]>=le[1]||Be[1]<=le[0])&&Ye[0]<De[1]&&Ye[1]>De[0])return!0}return!1}function te(le){var De=le._fullLayout,Oe=De._size,He=Oe.p,Be=j.list(le,"",!0),Ye,st,it,yt,_e,Ee;if(De._paperdiv.style({width:le._context.responsive&&De.autosize&&!le._context._hasZeroWidth&&!le.layout.width?"100%":De.width+"px",height:le._context.responsive&&De.autosize&&!le._context._hasZeroHeight&&!le.layout.height?"100%":De.height+"px"}).selectAll(".main-svg").call(g.setSize,De.width,De.height),le._context.setBackground(le,De.paper_bgcolor),ce.drawMainTitle(le),s.manage(le),!De._has("cartesian"))return u.previousPromises(le);function de(xt,Le,ot){var ct=xt._lw/2;if(xt._id.charAt(0)==="x"){if(Le){if(ot==="top")return Le._offset-He-ct}else return Oe.t+Oe.h*(1-(xt.position||0))+ct%1;return Le._offset+Le._length+He+ct}if(Le){if(ot==="right")return Le._offset+Le._length+He+ct}else return Oe.l+Oe.w*(xt.position||0)+ct%1;return Le._offset-He-ct}for(Ye=0;Ye<Be.length;Ye++){yt=Be[Ye];var we=yt._anchorAxis;yt._linepositions={},yt._lw=g.crispRound(le,yt.linewidth,1),yt._mainLinePosition=de(yt,we,yt.side),yt._mainMirrorPosition=yt.mirror&&we?de(yt,we,b.OPPOSITE_SIDE[yt.side]):null}var je=[],Ae=[],$=[],oe=p.opacity(De.paper_bgcolor)===1&&p.opacity(De.plot_bgcolor)===1&&De.paper_bgcolor===De.plot_bgcolor;for(st in De._plots)if(it=De._plots[st],it.mainplot)it.bg&&it.bg.remove(),it.bg=void 0;else{var ge=it.xaxis.domain,Te=it.yaxis.domain,Ue=it.plotgroup;if(H(ge,Te,$)&&st.indexOf(R)===-1){var Ze=Ue.node(),Je=it.bg=c.ensureSingle(Ue,"rect","bg");Ze.insertBefore(Je.node(),Ze.childNodes[0]),Ae.push(st)}else Ue.select("rect.bg").remove(),$.push([ge,Te]),oe||(je.push(st),Ae.push(st))}var ft=De._bgLayer.selectAll(".bg").data(je);for(ft.enter().append("rect").classed("bg",!0),ft.exit().remove(),ft.each(function(xt){De._plots[xt].bg=fe.select(this)}),Ye=0;Ye<Ae.length;Ye++)it=De._plots[Ae[Ye]],_e=it.xaxis,Ee=it.yaxis,it.bg&&_e._offset!==void 0&&Ee._offset!==void 0&&it.bg.call(g.setRect,_e._offset-He,Ee._offset-He,_e._length+2*He,Ee._length+2*He).call(p.fill,De.plot_bgcolor).style("stroke-width",0);if(!De._hasOnlyLargeSploms)for(st in De._plots){it=De._plots[st],_e=it.xaxis,Ee=it.yaxis;var wt=it.clipId="clip"+De._uid+st+"plot",Ct=c.ensureSingleById(De._clips,"clipPath",wt,function(xt){xt.classed("plotclip",!0).append("rect")});it.clipRect=Ct.select("rect").attr({width:_e._length,height:Ee._length}),g.setTranslate(it.plot,_e._offset,Ee._offset);var Kt,$t;it._hasClipOnAxisFalse?(Kt=null,$t=wt):(Kt=wt,$t=null),g.setClipUrl(it.plot,Kt,le),it.layerClipId=$t}var Wt,nt,pt,Ke,gt,Ft,Xt,or,sr,dr,wr,xr,Pr;function nr(xt){return"M"+Wt+","+xt+"H"+nt}function jr(xt){return"M"+_e._offset+","+xt+"h"+_e._length}function ta(xt){return"M"+xt+","+or+"V"+Xt}function Nr(xt){return Ee._shift!==void 0&&(xt+=Ee._shift),"M"+xt+","+Ee._offset+"v"+Ee._length}function Jr(xt,Le,ot){if(!xt.showline||st!==xt._mainSubplot)return"";if(!xt._anchorAxis)return ot(xt._mainLinePosition);var ct=Le(xt._mainLinePosition);return xt.mirror&&(ct+=Le(xt._mainMirrorPosition)),ct}for(st in De._plots){it=De._plots[st],_e=it.xaxis,Ee=it.yaxis;var vt="M0,0";J(_e,st)&&(gt=se(_e,"left",Ee,Be),Wt=_e._offset-(gt?He+gt:0),Ft=se(_e,"right",Ee,Be),nt=_e._offset+_e._length+(Ft?He+Ft:0),pt=de(_e,Ee,"bottom"),Ke=de(_e,Ee,"top"),Pr=!_e._anchorAxis||st!==_e._mainSubplot,Pr&&(_e.mirror==="allticks"||_e.mirror==="all")&&(_e._linepositions[st]=[pt,Ke]),vt=Jr(_e,nr,jr),Pr&&_e.showline&&(_e.mirror==="all"||_e.mirror==="allticks")&&(vt+=nr(pt)+nr(Ke)),it.xlines.style("stroke-width",_e._lw+"px").call(p.stroke,_e.showline?_e.linecolor:"rgba(0,0,0,0)")),it.xlines.attr("d",vt);var Mt="M0,0";J(Ee,st)&&(wr=se(Ee,"bottom",_e,Be),Xt=Ee._offset+Ee._length+(wr?He:0),xr=se(Ee,"top",_e,Be),or=Ee._offset-(xr?He:0),sr=de(Ee,_e,"left"),dr=de(Ee,_e,"right"),Pr=!Ee._anchorAxis||st!==Ee._mainSubplot,Pr&&(Ee.mirror==="allticks"||Ee.mirror==="all")&&(Ee._linepositions[st]=[sr,dr]),Mt=Jr(Ee,ta,Nr),Pr&&Ee.showline&&(Ee.mirror==="all"||Ee.mirror==="allticks")&&(Mt+=ta(sr)+ta(dr)),it.ylines.style("stroke-width",Ee._lw+"px").call(p.stroke,Ee.showline?Ee.linecolor:"rgba(0,0,0,0)")),it.ylines.attr("d",Mt)}return j.makeClipPaths(le),u.previousPromises(le)}function J(le,De){return(le.ticks||le.showline)&&(De===le._mainSubplot||le.mirror==="all"||le.mirror==="allticks")}function ye(le,De,Oe){if(!Oe.showline||!Oe._lw)return!1;if(Oe.mirror==="all"||Oe.mirror==="allticks")return!0;var He=Oe._anchorAxis;if(!He)return!1;var Be=b.FROM_BL[De];return Oe.side===De?He.domain[Be]===le.domain[Be]:Oe.mirror&&He.domain[1-Be]===le.domain[1-Be]}function se(le,De,Oe,He){if(ye(le,De,Oe))return Oe._lw;for(var Be=0;Be<He.length;Be++){var Ye=He[Be];if(Ye._mainAxis===Oe._mainAxis&&ye(le,De,Ye))return Ye._lw}return 0}ce.drawMainTitle=function(le){var De=le._fullLayout.title,Oe=le._fullLayout,He=Me(Oe),Be=ke(Oe),Ye=be(Oe,Be),st=me(Oe,He);if(w.draw(le,"gtitle",{propContainer:Oe,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:Oe._dfltTitle.plot,subtitlePlaceholder:Oe._dfltTitle.subtitle,attributes:{x:st,y:Ye,"text-anchor":He,dy:Be}}),De.text&&De.automargin){var it=fe.select(le).selectAll(".gtitle"),yt=g.bBox(fe.select(le).selectAll(".g-gtitle").node()).height,_e=Q(le,De,yt);if(_e>0){ue(le,Ye,_e,yt),it.attr({x:st,y:Ye,"text-anchor":He,dy:ve(De.yanchor)}).call(m.positionText,st,Ye);var Ee=(De.text.match(m.BR_TAG_ALL)||[]).length;if(Ee){var de=b.LINE_SPACING*Ee+b.MID_SHIFT;De.y===0&&(de=-de),it.selectAll(".line").each(function(){var oe=+this.getAttribute("dy").slice(0,-2)-de+"em";this.setAttribute("dy",oe)})}var we=fe.select(le).selectAll(".gtitle-subtitle");if(we.node()){var je=it.node().getBBox(),Ae=je.y+je.height,$=Ae+w.SUBTITLE_PADDING_EM*De.subtitle.font.size;we.attr({x:st,y:$,"text-anchor":He,dy:ve(De.yanchor)}).call(m.positionText,st,$)}}}};function he(le,De,Oe,He,Be){var Ye=De.yref==="paper"?le._fullLayout._size.h:le._fullLayout.height,st=c.isTopAnchor(De)?He:He-Be,it=Oe==="b"?Ye-st:st;return c.isTopAnchor(De)&&Oe==="t"||c.isBottomAnchor(De)&&Oe==="b"?!1:it<Be}function pe(le,De,Oe,He,Be){var Ye=0;return Oe==="middle"&&(Ye+=Be/2),le==="t"?(Oe==="top"&&(Ye+=Be),Ye+=He-De*He):(Oe==="bottom"&&(Ye+=Be),Ye+=De*He),Ye}function Q(le,De,Oe){var He=De.y,Be=De.yanchor,Ye=He>.5?"t":"b",st=le._fullLayout.margin[Ye],it=0;return De.yref==="paper"?it=Oe+De.pad.t+De.pad.b:De.yref==="container"&&(it=pe(Ye,He,Be,le._fullLayout.height,Oe)+De.pad.t+De.pad.b),it>st?it:0}function ue(le,De,Oe,He){var Be="title.automargin",Ye=le._fullLayout.title,st=Ye.y>.5?"t":"b",it={x:Ye.x,y:Ye.y,t:0,b:0},yt={};Ye.yref==="paper"&&he(le,Ye,st,De,He)?it[st]=Oe:Ye.yref==="container"&&(yt[st]=Oe,le._fullLayout._reservedMargin[Be]=yt),u.allowAutoMargin(le,Be),u.autoMargin(le,Be,it)}function me(le,De){var Oe=le.title,He=le._size,Be=0;switch(De===F?Be=Oe.pad.l:De===_&&(Be=-Oe.pad.r),Oe.xref){case"paper":return He.l+He.w*Oe.x+Be;case"container":default:return le.width*Oe.x+Be}}function be(le,De){var Oe=le.title,He=le._size,Be=0;if(De==="0em"||!De?Be=-Oe.pad.b:De===b.CAP_SHIFT+"em"&&(Be=Oe.pad.t),Oe.y==="auto")return He.t/2;switch(Oe.yref){case"paper":return He.t+He.h-He.h*Oe.y+Be;case"container":default:return le.height-le.height*Oe.y+Be}}function ve(le){return le==="top"?b.CAP_SHIFT+.3+"em":le==="bottom"?"-0.3em":b.MID_SHIFT+"em"}function Me(le){var De=le.title,Oe=P;return c.isRightAnchor(De)?Oe=_:c.isLeftAnchor(De)&&(Oe=F),Oe}function ke(le){var De=le.title,Oe="0em";return c.isTopAnchor(De)?Oe=b.CAP_SHIFT+"em":c.isMiddleAnchor(De)&&(Oe=b.MID_SHIFT+"em"),Oe}ce.doTraceStyle=function(le){var De=le.calcdata,Oe=[],He;for(He=0;He<De.length;He++){var Be=De[He],Ye=Be[0]||{},st=Ye.trace||{},it=st._module||{},yt=it.arraysToCalcdata;yt&&yt(Be,st);var _e=it.editStyle;_e&&Oe.push({fn:_e,cd0:Ye})}if(Oe.length){for(He=0;He<Oe.length;He++){var Ee=Oe[He];Ee.fn(le,Ee.cd0)}v(le),ce.redrawReglTraces(le)}return u.style(le),d.getComponentMethod("legend","draw")(le),u.previousPromises(le)},ce.doColorBars=function(le){return d.getComponentMethod("colorbar","draw")(le),u.previousPromises(le)},ce.layoutReplot=function(le){var De=le.layout;return le.layout=void 0,d.call("_doPlot",le,"",De)},ce.doLegend=function(le){return d.getComponentMethod("legend","draw")(le),u.previousPromises(le)},ce.doTicksRelayout=function(le){return j.draw(le,"redraw"),le._fullLayout._hasOnlyLargeSploms&&(d.subplotsRegistry.splom.updateGrid(le),v(le),ce.redrawReglTraces(le)),ce.drawMainTitle(le),u.previousPromises(le)},ce.doModeBar=function(le){var De=le._fullLayout;s.manage(le);for(var Oe=0;Oe<De._basePlotModules.length;Oe++){var He=De._basePlotModules[Oe].updateFx;He&&He(le)}return u.previousPromises(le)},ce.doCamera=function(le){for(var De=le._fullLayout,Oe=De._subplots.gl3d,He=0;He<Oe.length;He++){var Be=De[Oe[He]],Ye=Be._scene;Ye.setViewport(Be)}},ce.drawData=function(le){var De=le._fullLayout;v(le);for(var Oe=De._basePlotModules,He=0;He<Oe.length;He++)Oe[He].plot(le);return ce.redrawReglTraces(le),u.style(le),d.getComponentMethod("selections","draw")(le),d.getComponentMethod("shapes","draw")(le),d.getComponentMethod("annotations","draw")(le),d.getComponentMethod("images","draw")(le),De._replotting=!1,u.previousPromises(le)},ce.redrawReglTraces=function(le){var De=le._fullLayout;if(De._has("regl")){var Oe=le._fullData,He=[],Be=[],Ye,st;for(De._hasOnlyLargeSploms&&De._splomGrid.draw(),Ye=0;Ye<Oe.length;Ye++){var it=Oe[Ye];it.visible===!0&&it._length!==0&&(it.type==="splom"?De._splomScenes[it.uid].draw():it.type==="scattergl"?c.pushUnique(He,it.xaxis+it.yaxis):it.type==="scatterpolargl"&&c.pushUnique(Be,it.subplot))}for(Ye=0;Ye<He.length;Ye++)st=De._plots[He[Ye]],st._scene&&st._scene.draw();for(Ye=0;Ye<Be.length;Ye++)st=De[Be[Ye]]._subplot,st._scene&&st._scene.draw()}},ce.doAutoRangeAndConstraints=function(le){for(var De=j.list(le,"",!0),Oe,He={},Be=0;Be<De.length;Be++)if(Oe=De[Be],!He[Oe._id]){He[Oe._id]=1,N(le,Oe),O(le,Oe);var Ye=Oe._matchGroup;if(Ye)for(var st in Ye){var it=j.getFromId(le,st);O(le,it,Oe.range),He[st]=1}}X(le)},ce.finalDraw=function(le){d.getComponentMethod("rangeslider","draw")(le),d.getComponentMethod("rangeselector","draw")(le)},ce.drawMarginPushers=function(le){d.getComponentMethod("legend","draw")(le),d.getComponentMethod("rangeselector","draw")(le),d.getComponentMethod("sliders","draw")(le),d.getComponentMethod("updatemenus","draw")(le),d.getComponentMethod("colorbar","draw")(le)}}}),qu=n({"src/components/selections/draw.js"(ce,fe){var d=ml().readPaths,u=Rc(),c=cs().clearOutlineControllers,m=Ve(),v=ni(),p=vn().arrayEditor,g=Es(),w=g.getPathString;fe.exports={draw:s,drawOne:b,activateLastSelection:N};function s(F){var P=F._fullLayout;c(F),P._selectionLayer.selectAll("path").remove();for(var _ in P._plots){var R=P._plots[_].selectionLayer;R&&R.selectAll("path").remove()}for(var H=0;H<P.selections.length;H++)b(F,H)}function j(F){return F._context.editSelection}function b(F,P){F._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+P+'"]').remove();var _=g.makeSelectionsOptionsAndPlotinfo(F,P),R=_.options,H=_.plotinfo;if(!R._input)return;te(F._fullLayout._selectionLayer);function te(J){var ye=w(F,R),se={"data-index":P,"fill-rule":"evenodd",d:ye},he=R.opacity,pe="rgba(0,0,0,0)",Q=R.line.color||m.contrast(F._fullLayout.plot_bgcolor),ue=R.line.width,me=R.line.dash;ue||(ue=5,me="solid");var be=j(F)&&F._fullLayout._activeSelectionIndex===P;be&&(pe=F._fullLayout.activeselection.fillcolor,he=F._fullLayout.activeselection.opacity);for(var ve=[],Me=1;Me>=0;Me--){var ke=J.append("path").attr(se).style("opacity",Me?.1:he).call(m.stroke,Q).call(m.fill,pe).call(v.dashLine,Me?"solid":me,Me?4+ue:ue);if(z(ke,F,R),be){var le=p(F.layout,"selections",R);ke.style({cursor:"move"});var De={element:ke.node(),plotinfo:H,gd:F,editHelpers:le,isActiveSelection:!0},Oe=d(ye,F);u(Oe,ke,De)}else ke.style("pointer-events",Me?"all":"none");ve[Me]=ke}var He=ve[0],Be=ve[1];Be.node().addEventListener("click",function(){return X(F,He)})}}function z(F,P,_){var R=_.xref+_.yref;v.setClipUrl(F,"clip"+P._fullLayout._uid+R,P)}function X(F,P){if(j(F)){var _=P.node(),R=+_.getAttribute("data-index");if(R>=0){if(R===F._fullLayout._activeSelectionIndex){O(F);return}F._fullLayout._activeSelectionIndex=R,F._fullLayout._deactivateSelection=O,s(F)}}}function N(F){if(j(F)){var P=F._fullLayout.selections.length-1;F._fullLayout._activeSelectionIndex=P,F._fullLayout._deactivateSelection=O,s(F)}}function O(F){if(j(F)){var P=F._fullLayout._activeSelectionIndex;P>=0&&(c(F),delete F._fullLayout._activeSelectionIndex,s(F))}}}}),Qs=n({"node_modules/polybooljs/lib/build-log.js"(ce,fe){function d(){var u,c=0,m=!1;function v(p,g){return u.list.push({type:p,data:g?JSON.parse(JSON.stringify(g)):void 0}),u}return u={list:[],segmentId:function(){return c++},checkIntersection:function(p,g){return v("check",{seg1:p,seg2:g})},segmentChop:function(p,g){return v("div_seg",{seg:p,pt:g}),v("chop",{seg:p,pt:g})},statusRemove:function(p){return v("pop_seg",{seg:p})},segmentUpdate:function(p){return v("seg_update",{seg:p})},segmentNew:function(p,g){return v("new_seg",{seg:p,primary:g})},segmentRemove:function(p){return v("rem_seg",{seg:p})},tempStatus:function(p,g,w){return v("temp_status",{seg:p,above:g,below:w})},rewind:function(p){return v("rewind",{seg:p})},status:function(p,g,w){return v("status",{seg:p,above:g,below:w})},vert:function(p){return p===m?u:(m=p,v("vert",{x:p}))},log:function(p){return typeof p!="string"&&(p=JSON.stringify(p,!1,"  ")),v("log",{txt:p})},reset:function(){return v("reset")},selected:function(p){return v("selected",{segs:p})},chainStart:function(p){return v("chain_start",{seg:p})},chainRemoveHead:function(p,g){return v("chain_rem_head",{index:p,pt:g})},chainRemoveTail:function(p,g){return v("chain_rem_tail",{index:p,pt:g})},chainNew:function(p,g){return v("chain_new",{pt1:p,pt2:g})},chainMatch:function(p){return v("chain_match",{index:p})},chainClose:function(p){return v("chain_close",{index:p})},chainAddHead:function(p,g){return v("chain_add_head",{index:p,pt:g})},chainAddTail:function(p,g){return v("chain_add_tail",{index:p,pt:g})},chainConnect:function(p,g){return v("chain_con",{index1:p,index2:g})},chainReverse:function(p){return v("chain_rev",{index:p})},chainJoin:function(p,g){return v("chain_join",{index1:p,index2:g})},done:function(){return v("done")}},u}fe.exports=d}}),Ef=n({"node_modules/polybooljs/lib/epsilon.js"(ce,fe){function d(u){typeof u!="number"&&(u=1e-10);var c={epsilon:function(m){return typeof m=="number"&&(u=m),u},pointAboveOrOnLine:function(m,v,p){var g=v[0],w=v[1],s=p[0],j=p[1],b=m[0],z=m[1];return(s-g)*(z-w)-(j-w)*(b-g)>=-u},pointBetween:function(m,v,p){var g=m[1]-v[1],w=p[0]-v[0],s=m[0]-v[0],j=p[1]-v[1],b=s*w+g*j;if(b<u)return!1;var z=w*w+j*j;return!(b-z>-u)},pointsSameX:function(m,v){return Math.abs(m[0]-v[0])<u},pointsSameY:function(m,v){return Math.abs(m[1]-v[1])<u},pointsSame:function(m,v){return c.pointsSameX(m,v)&&c.pointsSameY(m,v)},pointsCompare:function(m,v){return c.pointsSameX(m,v)?c.pointsSameY(m,v)?0:m[1]<v[1]?-1:1:m[0]<v[0]?-1:1},pointsCollinear:function(m,v,p){var g=m[0]-v[0],w=m[1]-v[1],s=v[0]-p[0],j=v[1]-p[1];return Math.abs(g*j-s*w)<u},linesIntersect:function(m,v,p,g){var w=v[0]-m[0],s=v[1]-m[1],j=g[0]-p[0],b=g[1]-p[1],z=w*b-s*j;if(Math.abs(z)<u)return!1;var X=m[0]-p[0],N=m[1]-p[1],O=(j*N-b*X)/z,F=(w*N-s*X)/z,P={alongA:0,alongB:0,pt:[m[0]+O*w,m[1]+O*s]};return O<=-u?P.alongA=-2:O<u?P.alongA=-1:O-1<=-u?P.alongA=0:O-1<u?P.alongA=1:P.alongA=2,F<=-u?P.alongB=-2:F<u?P.alongB=-1:F-1<=-u?P.alongB=0:F-1<u?P.alongB=1:P.alongB=2,P},pointInsideRegion:function(m,v){for(var p=m[0],g=m[1],w=v[v.length-1][0],s=v[v.length-1][1],j=!1,b=0;b<v.length;b++){var z=v[b][0],X=v[b][1];X-g>u!=s-g>u&&(w-z)*(g-X)/(s-X)+z-p>u&&(j=!j),w=z,s=X}return j}};return c}fe.exports=d}}),wh=n({"node_modules/polybooljs/lib/linked-list.js"(ce,fe){var d={create:function(){var u={root:{root:!0,next:null},exists:function(c){return!(c===null||c===u.root)},isEmpty:function(){return u.root.next===null},getHead:function(){return u.root.next},insertBefore:function(c,m){for(var v=u.root,p=u.root.next;p!==null;){if(m(p)){c.prev=p.prev,c.next=p,p.prev.next=c,p.prev=c;return}v=p,p=p.next}v.next=c,c.prev=v,c.next=null},findTransition:function(c){for(var m=u.root,v=u.root.next;v!==null&&!c(v);)m=v,v=v.next;return{before:m===u.root?null:m,after:v,insert:function(p){return p.prev=m,p.next=v,m.next=p,v!==null&&(v.prev=p),p}}}};return u},node:function(u){return u.prev=null,u.next=null,u.remove=function(){u.prev.next=u.next,u.next&&(u.next.prev=u.prev),u.prev=null,u.next=null},u}};fe.exports=d}}),Ah=n({"node_modules/polybooljs/lib/intersecter.js"(ce,fe){var d=wh();function u(c,m,v){function p(P,_){return{id:v?v.segmentId():-1,start:P,end:_,myFill:{above:null,below:null},otherFill:null}}function g(P,_,R){return{id:v?v.segmentId():-1,start:P,end:_,myFill:{above:R.myFill.above,below:R.myFill.below},otherFill:null}}var w=d.create();function s(P,_,R,H,te,J){var ye=m.pointsCompare(_,te);return ye!==0?ye:m.pointsSame(R,J)?0:P!==H?P?1:-1:m.pointAboveOrOnLine(R,H?te:J,H?J:te)?1:-1}function j(P,_){w.insertBefore(P,function(R){var H=s(P.isStart,P.pt,_,R.isStart,R.pt,R.other.pt);return H<0})}function b(P,_){var R=d.node({isStart:!0,pt:P.start,seg:P,primary:_,other:null,status:null});return j(R,P.end),R}function z(P,_,R){var H=d.node({isStart:!1,pt:_.end,seg:_,primary:R,other:P,status:null});P.other=H,j(H,P.pt)}function X(P,_){var R=b(P,_);return z(R,P,_),R}function N(P,_){v&&v.segmentChop(P.seg,_),P.other.remove(),P.seg.end=_,P.other.pt=_,j(P.other,P.pt)}function O(P,_){var R=g(_,P.seg.end,P.seg);return N(P,_),X(R,P.primary)}function F(P,_){var R=d.create();function H(ke,le){var De=ke.seg.start,Oe=ke.seg.end,He=le.seg.start,Be=le.seg.end;return m.pointsCollinear(De,He,Be)?m.pointsCollinear(Oe,He,Be)||m.pointAboveOrOnLine(Oe,He,Be)?1:-1:m.pointAboveOrOnLine(De,He,Be)?1:-1}function te(ke){return R.findTransition(function(le){var De=H(ke,le.ev);return De>0})}function J(ke,le){var De=ke.seg,Oe=le.seg,He=De.start,Be=De.end,Ye=Oe.start,st=Oe.end;v&&v.checkIntersection(De,Oe);var it=m.linesIntersect(He,Be,Ye,st);if(it===!1){if(!m.pointsCollinear(He,Be,Ye)||m.pointsSame(He,st)||m.pointsSame(Be,Ye))return!1;var yt=m.pointsSame(He,Ye),_e=m.pointsSame(Be,st);if(yt&&_e)return le;var Ee=!yt&&m.pointBetween(He,Ye,st),de=!_e&&m.pointBetween(Be,Ye,st);if(yt)return de?O(le,Be):O(ke,st),le;Ee&&(_e||(de?O(le,Be):O(ke,st)),O(le,He))}else it.alongA===0&&(it.alongB===-1?O(ke,Ye):it.alongB===0?O(ke,it.pt):it.alongB===1&&O(ke,st)),it.alongB===0&&(it.alongA===-1?O(le,He):it.alongA===0?O(le,it.pt):it.alongA===1&&O(le,Be));return!1}for(var ye=[];!w.isEmpty();){var se=w.getHead();if(v&&v.vert(se.pt[0]),se.isStart){let ke=function(){if(pe){var le=J(se,pe);if(le)return le}return Q?J(se,Q):!1};v&&v.segmentNew(se.seg,se.primary);var he=te(se),pe=he.before?he.before.ev:null,Q=he.after?he.after.ev:null;v&&v.tempStatus(se.seg,pe?pe.seg:!1,Q?Q.seg:!1);var ue=ke();if(ue){if(c){var me;se.seg.myFill.below===null?me=!0:me=se.seg.myFill.above!==se.seg.myFill.below,me&&(ue.seg.myFill.above=!ue.seg.myFill.above)}else ue.seg.otherFill=se.seg.myFill;v&&v.segmentUpdate(ue.seg),se.other.remove(),se.remove()}if(w.getHead()!==se){v&&v.rewind(se.seg);continue}if(c){var me;se.seg.myFill.below===null?me=!0:me=se.seg.myFill.above!==se.seg.myFill.below,Q?se.seg.myFill.below=Q.seg.myFill.above:se.seg.myFill.below=P,me?se.seg.myFill.above=!se.seg.myFill.below:se.seg.myFill.above=se.seg.myFill.below}else if(se.seg.otherFill===null){var be;Q?se.primary===Q.primary?be=Q.seg.otherFill.above:be=Q.seg.myFill.above:be=se.primary?_:P,se.seg.otherFill={above:be,below:be}}v&&v.status(se.seg,pe?pe.seg:!1,Q?Q.seg:!1),se.other.status=he.insert(d.node({ev:se}))}else{var ve=se.status;if(ve===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(R.exists(ve.prev)&&R.exists(ve.next)&&J(ve.prev.ev,ve.next.ev),v&&v.statusRemove(ve.ev.seg),ve.remove(),!se.primary){var Me=se.seg.myFill;se.seg.myFill=se.seg.otherFill,se.seg.otherFill=Me}ye.push(se.seg)}w.getHead().remove()}return v&&v.done(),ye}return c?{addRegion:function(P){for(var _,R=P[P.length-1],H=0;H<P.length;H++){_=R,R=P[H];var te=m.pointsCompare(_,R);te!==0&&X(p(te<0?_:R,te<0?R:_),!0)}},calculate:function(P){return F(P,!1)}}:{calculate:function(P,_,R,H){return P.forEach(function(te){X(g(te.start,te.end,te),!0)}),R.forEach(function(te){X(g(te.start,te.end,te),!1)}),F(_,H)}}}fe.exports=u}}),Cf=n({"node_modules/polybooljs/lib/segment-chainer.js"(ce,fe){function d(u,c,m){var v=[],p=[];return u.forEach(function(g){var w=g.start,s=g.end;if(c.pointsSame(w,s)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}m&&m.chainStart(g);var j={index:0,matches_head:!1,matches_pt1:!1},b={index:0,matches_head:!1,matches_pt1:!1},z=j;function X(be,ve,Me){return z.index=be,z.matches_head=ve,z.matches_pt1=Me,z===j?(z=b,!1):(z=null,!0)}for(var N=0;N<v.length;N++){var O=v[N],F=O[0];O[1];var P=O[O.length-1];if(O[O.length-2],c.pointsSame(F,w)){if(X(N,!0,!0))break}else if(c.pointsSame(F,s)){if(X(N,!0,!1))break}else if(c.pointsSame(P,w)){if(X(N,!1,!0))break}else if(c.pointsSame(P,s)&&X(N,!1,!1))break}if(z===j){v.push([w,s]),m&&m.chainNew(w,s);return}if(z===b){m&&m.chainMatch(j.index);var _=j.index,R=j.matches_pt1?s:w,H=j.matches_head,O=v[_],te=H?O[0]:O[O.length-1],J=H?O[1]:O[O.length-2],ye=H?O[O.length-1]:O[0],se=H?O[O.length-2]:O[1];if(c.pointsCollinear(J,te,R)&&(H?(m&&m.chainRemoveHead(j.index,R),O.shift()):(m&&m.chainRemoveTail(j.index,R),O.pop()),te=J),c.pointsSame(ye,R)){v.splice(_,1),c.pointsCollinear(se,ye,te)&&(H?(m&&m.chainRemoveTail(j.index,te),O.pop()):(m&&m.chainRemoveHead(j.index,te),O.shift())),m&&m.chainClose(j.index),p.push(O);return}H?(m&&m.chainAddHead(j.index,R),O.unshift(R)):(m&&m.chainAddTail(j.index,R),O.push(R));return}function he(be){m&&m.chainReverse(be),v[be].reverse()}function pe(be,ve){var Me=v[be],ke=v[ve],le=Me[Me.length-1],De=Me[Me.length-2],Oe=ke[0],He=ke[1];c.pointsCollinear(De,le,Oe)&&(m&&m.chainRemoveTail(be,le),Me.pop(),le=De),c.pointsCollinear(le,Oe,He)&&(m&&m.chainRemoveHead(ve,Oe),ke.shift()),m&&m.chainJoin(be,ve),v[be]=Me.concat(ke),v.splice(ve,1)}var Q=j.index,ue=b.index;m&&m.chainConnect(Q,ue);var me=v[Q].length<v[ue].length;j.matches_head?b.matches_head?me?(he(Q),pe(Q,ue)):(he(ue),pe(ue,Q)):pe(ue,Q):b.matches_head?pe(Q,ue):me?(he(Q),pe(ue,Q)):(he(ue),pe(Q,ue))}),p}fe.exports=d}}),kf=n({"node_modules/polybooljs/lib/segment-selector.js"(ce,fe){function d(c,m,v){var p=[];return c.forEach(function(g){var w=(g.myFill.above?8:0)+(g.myFill.below?4:0)+(g.otherFill&&g.otherFill.above?2:0)+(g.otherFill&&g.otherFill.below?1:0);m[w]!==0&&p.push({id:v?v.segmentId():-1,start:g.start,end:g.end,myFill:{above:m[w]===1,below:m[w]===2},otherFill:null})}),v&&v.selected(p),p}var u={union:function(c,m){return d(c,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],m)},intersect:function(c,m){return d(c,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],m)},difference:function(c,m){return d(c,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],m)},differenceRev:function(c,m){return d(c,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],m)},xor:function(c,m){return d(c,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],m)}};fe.exports=u}}),Cs=n({"node_modules/polybooljs/lib/geojson.js"(ce,fe){var d={toPolygon:function(u,c){function m(g){if(g.length<=0)return u.segments({inverted:!1,regions:[]});function w(b){var z=b.slice(0,b.length-1);return u.segments({inverted:!1,regions:[z]})}for(var s=w(g[0]),j=1;j<g.length;j++)s=u.selectDifference(u.combine(s,w(g[j])));return s}if(c.type==="Polygon")return u.polygon(m(c.coordinates));if(c.type==="MultiPolygon"){for(var v=u.segments({inverted:!1,regions:[]}),p=0;p<c.coordinates.length;p++)v=u.selectUnion(u.combine(v,m(c.coordinates[p])));return u.polygon(v)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(u,c,m){m=u.polygon(u.segments(m));function v(O,F){return c.pointInsideRegion([(O[0][0]+O[1][0])*.5,(O[0][1]+O[1][1])*.5],F)}function p(O){return{region:O,children:[]}}var g=p(null);function w(O,F){for(var P=0;P<O.children.length;P++){var _=O.children[P];if(v(F,_.region)){w(_,F);return}}for(var R=p(F),P=0;P<O.children.length;P++){var _=O.children[P];v(_.region,F)&&(R.children.push(_),O.children.splice(P,1),P--)}O.children.push(R)}for(var s=0;s<m.regions.length;s++){var j=m.regions[s];j.length<3||w(g,j)}function b(O,F){for(var P=0,_=O[O.length-1][0],R=O[O.length-1][1],H=[],te=0;te<O.length;te++){var J=O[te][0],ye=O[te][1];H.push([J,ye]),P+=ye*_-J*R,_=J,R=ye}var se=P<0;return se!==F&&H.reverse(),H.push([H[0][0],H[0][1]]),H}var z=[];function X(O){var F=[b(O.region,!1)];z.push(F);for(var P=0;P<O.children.length;P++)F.push(N(O.children[P]))}function N(O){for(var F=0;F<O.children.length;F++)X(O.children[F]);return b(O.region,!0)}for(var s=0;s<g.children.length;s++)X(g.children[s]);return z.length<=0?{type:"Polygon",coordinates:[]}:z.length==1?{type:"Polygon",coordinates:z[0]}:{type:"MultiPolygon",coordinates:z}}};fe.exports=d}}),gu=n({"node_modules/polybooljs/index.js"(ce,fe){var d=Qs(),u=Ef(),c=Ah(),m=Cf(),v=kf(),p=Cs(),g=!1,w=u(),s;s={buildLog:function(b){return b===!0?g=d():b===!1&&(g=!1),g===!1?!1:g.list},epsilon:function(b){return w.epsilon(b)},segments:function(b){var z=c(!0,w,g);return b.regions.forEach(z.addRegion),{segments:z.calculate(b.inverted),inverted:b.inverted}},combine:function(b,z){var X=c(!1,w,g);return{combined:X.calculate(b.segments,b.inverted,z.segments,z.inverted),inverted1:b.inverted,inverted2:z.inverted}},selectUnion:function(b){return{segments:v.union(b.combined,g),inverted:b.inverted1||b.inverted2}},selectIntersect:function(b){return{segments:v.intersect(b.combined,g),inverted:b.inverted1&&b.inverted2}},selectDifference:function(b){return{segments:v.difference(b.combined,g),inverted:b.inverted1&&!b.inverted2}},selectDifferenceRev:function(b){return{segments:v.differenceRev(b.combined,g),inverted:!b.inverted1&&b.inverted2}},selectXor:function(b){return{segments:v.xor(b.combined,g),inverted:b.inverted1!==b.inverted2}},polygon:function(b){return{regions:m(b.segments,w,g),inverted:b.inverted}},polygonFromGeoJSON:function(b){return p.toPolygon(s,b)},polygonToGeoJSON:function(b){return p.fromPolygon(s,w,b)},union:function(b,z){return j(b,z,s.selectUnion)},intersect:function(b,z){return j(b,z,s.selectIntersect)},difference:function(b,z){return j(b,z,s.selectDifference)},differenceRev:function(b,z){return j(b,z,s.selectDifferenceRev)},xor:function(b,z){return j(b,z,s.selectXor)}};function j(b,z,X){var N=s.segments(b),O=s.segments(z),F=s.combine(N,O),P=X(F);return s.polygon(P)}typeof window=="object"&&(window.PolyBool=s),fe.exports=s}}),Rf=n({"node_modules/point-in-polygon/nested.js"(ce,fe){fe.exports=function(u,c,m,v){var p=u[0],g=u[1],w=!1;m===void 0&&(m=0),v===void 0&&(v=c.length);for(var s=v-m,j=0,b=s-1;j<s;b=j++){var z=c[j+m][0],X=c[j+m][1],N=c[b+m][0],O=c[b+m][1],F=X>g!=O>g&&p<(N-z)*(g-X)/(O-X)+z;F&&(w=!w)}return w}}}),Bl=n({"src/lib/polygon.js"(ce,fe){var d=Tt().dot,u=W().BADNUM,c=fe.exports={};c.tester=function(v){var p=v.slice(),g=p[0][0],w=g,s=p[0][1],j=s,b;for((p[p.length-1][0]!==p[0][0]||p[p.length-1][1]!==p[0][1])&&p.push(p[0]),b=1;b<p.length;b++)g=Math.min(g,p[b][0]),w=Math.max(w,p[b][0]),s=Math.min(s,p[b][1]),j=Math.max(j,p[b][1]);var z=!1,X;p.length===5&&(p[0][0]===p[1][0]?p[2][0]===p[3][0]&&p[0][1]===p[3][1]&&p[1][1]===p[2][1]&&(z=!0,X=function(_){return _[0]===p[0][0]}):p[0][1]===p[1][1]&&p[2][1]===p[3][1]&&p[0][0]===p[3][0]&&p[1][0]===p[2][0]&&(z=!0,X=function(_){return _[1]===p[0][1]}));function N(_,R){var H=_[0],te=_[1];return!(H===u||H<g||H>w||te===u||te<s||te>j||R&&X(_))}function O(_,R){var H=_[0],te=_[1];if(H===u||H<g||H>w||te===u||te<s||te>j)return!1;var J=p.length,ye=p[0][0],se=p[0][1],he=0,pe,Q,ue,me,be;for(pe=1;pe<J;pe++)if(Q=ye,ue=se,ye=p[pe][0],se=p[pe][1],me=Math.min(Q,ye),!(H<me||H>Math.max(Q,ye)||te>Math.max(ue,se)))if(te<Math.min(ue,se))H!==me&&he++;else{if(ye===Q?be=te:be=ue+(H-Q)*(se-ue)/(ye-Q),te===be)return!(pe===1&&R);te<=be&&H!==me&&he++}return he%2===1}var F=!0,P=p[0];for(b=1;b<p.length;b++)if(P[0]!==p[b][0]||P[1]!==p[b][1]){F=!1;break}return{xmin:g,xmax:w,ymin:s,ymax:j,pts:p,contains:z?N:O,isRect:z,degenerate:F}},c.isSegmentBent=function(v,p,g,w){var s=v[p],j=[v[g][0]-s[0],v[g][1]-s[1]],b=d(j,j),z=Math.sqrt(b),X=[-j[1]/z,j[0]/z],N,O,F;for(N=p+1;N<g;N++)if(O=[v[N][0]-s[0],v[N][1]-s[1]],F=d(O,j),F<0||F>b||Math.abs(d(O,X))>w)return!0;return!1},c.filter=function(v,p){var g=[v[0]],w=0,s=0;function j(z){v.push(z);var X=g.length,N=w;g.splice(s+1);for(var O=N+1;O<v.length;O++)(O===v.length-1||c.isSegmentBent(v,N,O+1,p))&&(g.push(v[O]),g.length<X-2&&(w=O,s=g.length-1),N=O)}if(v.length>1){var b=v.pop();j(b)}return{addPt:j,raw:v,filtered:g}}}}),Nc=n({"src/components/selections/constants.js"(ce,fe){fe.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}}}),Df=n({"src/components/selections/select.js"(ce,fe){var d=gu(),u=Rf(),c=hr(),m=ni().dashStyle,v=Ve(),p=Ms(),g=ts().makeEventData,w=vu(),s=w.freeMode,j=w.rectMode,b=w.drawMode,z=w.openMode,X=w.selectMode,N=Es(),O=Zs(),F=Rc(),P=cs().clearOutline,_=ml(),R=_.handleEllipse,H=_.readPaths,te=Gu().newShapes,J=wf(),ye=qu().activateLastSelection,se=pa(),he=se.sorterAsc,pe=Bl(),Q=Hn(),ue=di().getFromId,me=Cc(),be=mu().redrawReglTraces,ve=Nc(),Me=ve.MINSELECT,ke=pe.filter,le=pe.tester,De=kc(),Oe=De.p2r,He=De.axValue,Be=De.getTransform;function Ye(vt){return vt.subplot!==void 0}function st(vt,Mt,xt,Le,ot){var ct=!Ye(Le),ut=s(ot),Pt=j(ot),Ot=z(ot),qt=b(ot),ir=X(ot),_r=ot==="drawline",Bt=ot==="drawcircle",gr=_r||Bt,Ar=Le.gd,Er=Ar._fullLayout,ba=ir&&Er.newselection.mode==="immediate"&&ct,Ga=Er._zoomlayer,Xa=Le.element.getBoundingClientRect(),Aa=Le.plotinfo,Oa=Be(Aa),va=Mt-Xa.left,ma=xt-Xa.top;Er._calcInverseTransform(Ar);var Va=se.apply3DTransform(Er._invTransform)(va,ma);va=Va[0],ma=Va[1];var ja=Er._invScaleX,$a=Er._invScaleY,La=va,la=ma,Ba="M"+va+","+ma,un=Le.xaxes[0],pn=Le.yaxes[0],qa=un._length,nn=pn._length,cn=vt.altKey&&!(b(ot)&&Ot),Cn,Ja,xn,We,Re,Zt,Ht;we(vt,Ar,Le),ut&&(Cn=ke([[va,ma]],ve.BENDPX));var Rt=Ga.selectAll("path.select-outline-"+Aa.id).data([1]),Dt=qt?Er.newshape:Er.newselection;qt&&(Le.hasText=Dt.label.text||Dt.label.texttemplate);var Ut=qt&&!Ot?Dt.fillcolor:"rgba(0,0,0,0)",pr=Dt.line.color||(ct?v.contrast(Ar._fullLayout.plot_bgcolor):"#7f7f7f");Rt.enter().append("path").attr("class","select-outline select-outline-"+Aa.id).style({opacity:qt?Dt.opacity/2:1,"stroke-dasharray":m(Dt.line.dash,Dt.line.width),"stroke-width":Dt.line.width+"px","shape-rendering":"crispEdges"}).call(v.stroke,pr).call(v.fill,Ut).attr("fill-rule","evenodd").classed("cursor-move",!!qt).attr("transform",Oa).attr("d",Ba+"Z");var jt=Ga.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",Oa).attr("d","M0,0Z");if(qt&&Le.hasText){var Jt=Ga.select(".label-temp");Jt.empty()&&(Jt=Ga.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var cr=Er._uid+ve.SELECTID,rr=[],Or=ge(Ar,Le.xaxes,Le.yaxes,Le.subplot);ba&&!vt.shiftKey&&(Le._clearSubplotSelections=function(){if(ct){var ra=un._id,Ca=pn._id;Xt(Ar,ra,Ca,Or);for(var Ma=(Ar.layout||{}).selections||[],za=[],Fa=!1,Da=0;Da<Ma.length;Da++){var Ka=Er.selections[Da];!Ka||Ka.xref!==ra||Ka.yref!==Ca?za.push(Ma[Da]):Fa=!0}Fa&&(Ar._fullLayout._noEmitSelectedAtStart=!0,c.call("_guiRelayout",Ar,{selections:za}))}});var Br=jr(Le);Le.moveFn=function(ra,Ca){Le._clearSubplotSelections&&(Le._clearSubplotSelections(),Le._clearSubplotSelections=void 0),La=Math.max(0,Math.min(qa,ja*ra+va)),la=Math.max(0,Math.min(nn,$a*Ca+ma));var Ma=Math.abs(La-va),za=Math.abs(la-ma);if(Pt){var Fa,Da,Ka;if(ir){var on=Er.selectdirection;switch(on==="any"?za<Math.min(Ma*.6,Me)?Fa="h":Ma<Math.min(za*.6,Me)?Fa="v":Fa="d":Fa=on,Fa){case"h":Da=Bt?nn/2:0,Ka=nn;break;case"v":Da=Bt?qa/2:0,Ka=qa;break}}if(qt)switch(Er.newshape.drawdirection){case"vertical":Fa="h",Da=Bt?nn/2:0,Ka=nn;break;case"horizontal":Fa="v",Da=Bt?qa/2:0,Ka=qa;break;case"ortho":Ma<za?(Fa="h",Da=ma,Ka=la):(Fa="v",Da=va,Ka=La);break;default:Fa="d"}Fa==="h"?(We=gr?R(Bt,[La,Da],[La,Ka]):[[va,Da],[va,Ka],[La,Ka],[La,Da]],We.xmin=gr?La:Math.min(va,La),We.xmax=gr?La:Math.max(va,La),We.ymin=Math.min(Da,Ka),We.ymax=Math.max(Da,Ka),jt.attr("d","M"+We.xmin+","+(ma-Me)+"h-4v"+2*Me+"h4ZM"+(We.xmax-1)+","+(ma-Me)+"h4v"+2*Me+"h-4Z")):Fa==="v"?(We=gr?R(Bt,[Da,la],[Ka,la]):[[Da,ma],[Da,la],[Ka,la],[Ka,ma]],We.xmin=Math.min(Da,Ka),We.xmax=Math.max(Da,Ka),We.ymin=gr?la:Math.min(ma,la),We.ymax=gr?la:Math.max(ma,la),jt.attr("d","M"+(va-Me)+","+We.ymin+"v-4h"+2*Me+"v4ZM"+(va-Me)+","+(We.ymax-1)+"v4h"+2*Me+"v-4Z")):Fa==="d"&&(We=gr?R(Bt,[va,ma],[La,la]):[[va,ma],[va,la],[La,la],[La,ma]],We.xmin=Math.min(va,La),We.xmax=Math.max(va,La),We.ymin=Math.min(ma,la),We.ymax=Math.max(ma,la),jt.attr("d","M0,0Z"))}else ut&&(Cn.addPt([La,la]),We=Cn.filtered);if(Le.selectionDefs&&Le.selectionDefs.length?(xn=$t(Le.mergedPolygons,We,cn),We.subtract=cn,Ja=de(Le.selectionDefs.concat([We]))):(xn=[We],Ja=le(We)),F(nt(xn,Ot),Rt,Le),ir){var Sn=Ke(Ar,!1),On=Sn.eventData?Sn.eventData.points.slice():[];Sn=Ke(Ar,!1,Ja,Or,Le),Ja=Sn.selectionTesters,Ht=Sn.eventData;var jn;Cn?jn=Cn.filtered:jn=xr(xn),Q.throttle(cr,ve.SELECTDELAY,function(){rr=pt(Ja,Or);for(var dn=rr.slice(),Rn=0;Rn<On.length;Rn++){for(var oi=On[Rn],$i=!1,ln=0;ln<dn.length;ln++)if(dn[ln].curveNumber===oi.curveNumber&&dn[ln].pointNumber===oi.pointNumber){$i=!0;break}$i||dn.push(oi)}dn.length&&(Ht||(Ht={}),Ht.points=dn),Br(Ht,jn),ta(Ar,Ht)})}},Le.clickFn=function(ra,Ca){if(jt.remove(),Ar._fullLayout._activeShapeIndex>=0){Ar._fullLayout._deactivateShape(Ar);return}if(!qt){var Ma=Er.clickmode;Q.done(cr).then(function(){if(Q.clear(cr),ra===2){for(Rt.remove(),Re=0;Re<Or.length;Re++)Zt=Or[Re],Zt._module.selectPoints(Zt,!1);if(Ct(Ar,Or),$(Le),Jr(Ar),Or.length){var za=Or[0].xaxis,Fa=Or[0].yaxis;if(za&&Fa){for(var Da=[],Ka=Ar._fullLayout.selections,on=0;on<Ka.length;on++){var Sn=Ka[on];Sn&&(Sn.xref!==za._id||Sn.yref!==Fa._id)&&Da.push(Sn)}Da.length<Ka.length&&(Ar._fullLayout._noEmitSelectedAtStart=!0,c.call("_guiRelayout",Ar,{selections:Da}))}}}else Ma.indexOf("select")>-1&&it(Ca,Ar,Le.xaxes,Le.yaxes,Le.subplot,Le,Rt),Ma==="event"&&Nr(Ar,void 0);p.click(Ar,Ca,Aa.id)}).catch(se.error)}},Le.doneFn=function(){jt.remove(),Q.done(cr).then(function(){Q.clear(cr),!ba&&We&&Le.selectionDefs&&(We.subtract=cn,Le.selectionDefs.push(We),Le.mergedPolygons.length=0,[].push.apply(Le.mergedPolygons,xn)),(ba||qt)&&$(Le,ba),Le.doneFnCompleted&&Le.doneFnCompleted(rr),ir&&Nr(Ar,Ht)}).catch(se.error)}}function it(vt,Mt,xt,Le,ot,ct,ut){var Pt=Mt._hoverdata,Ot=Mt._fullLayout,qt=Ot.clickmode,ir=qt.indexOf("event")>-1,_r=[],Bt,gr,Ar,Er,ba,Ga,Xa,Aa,Oa,va;if(Ue(Pt)){we(vt,Mt,ct),Bt=ge(Mt,xt,Le,ot);var ma=Ze(Pt,Bt),Va=ma.pointNumbers.length>0;if(Va?ft(Bt,ma):wt(Bt)&&(Xa=Je(ma))){for(ut&&ut.remove(),va=0;va<Bt.length;va++)gr=Bt[va],gr._module.selectPoints(gr,!1);Ct(Mt,Bt),$(ct),ir&&Jr(Mt)}else{Aa=vt.shiftKey&&(Xa!==void 0?Xa:Je(ma)),Ar=yt(ma.pointNumber,ma.searchInfo,Aa);var ja=ct.selectionDefs.concat([Ar]);for(Er=de(ja),va=0;va<Bt.length;va++)if(ba=Bt[va]._module.selectPoints(Bt[va],Er),Ga=Wt(ba,Bt[va]),_r.length)for(var $a=0;$a<Ga.length;$a++)_r.push(Ga[$a]);else _r=Ga;if(Oa={points:_r},Ct(Mt,Bt,Oa),Ar&&ct&&ct.selectionDefs.push(Ar),ut){var La=ct.mergedPolygons,la=z(ct.dragmode);F(nt(La,la),ut,ct)}ir&&Nr(Mt,Oa)}}}function yt(vt,Mt,xt){return{pointNumber:vt,searchInfo:Mt,subtract:!!xt}}function _e(vt){return"pointNumber"in vt&&"searchInfo"in vt}function Ee(vt){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Mt,xt,Le,ot){var ct=vt.searchInfo.cd[0].trace.index,ut=ot.cd[0].trace.index;return ut===ct&&Le===vt.pointNumber},isRect:!1,degenerate:!1,subtract:!!vt.subtract}}function de(vt){if(!vt.length)return;for(var Mt=[],xt=_e(vt[0])?0:vt[0][0][0],Le=xt,ot=_e(vt[0])?0:vt[0][0][1],ct=ot,ut=0;ut<vt.length;ut++)if(_e(vt[ut]))Mt.push(Ee(vt[ut]));else{var Pt=le(vt[ut]);Pt.subtract=!!vt[ut].subtract,Mt.push(Pt),xt=Math.min(xt,Pt.xmin),Le=Math.max(Le,Pt.xmax),ot=Math.min(ot,Pt.ymin),ct=Math.max(ct,Pt.ymax)}function Ot(qt,ir,_r,Bt){for(var gr=!1,Ar=0;Ar<Mt.length;Ar++)Mt[Ar].contains(qt,ir,_r,Bt)&&(gr=!Mt[Ar].subtract);return gr}return{xmin:xt,xmax:Le,ymin:ot,ymax:ct,pts:[],contains:Ot,isRect:!1,degenerate:!1}}function we(vt,Mt,xt){var Le=Mt._fullLayout,ot=xt.plotinfo,ct=xt.dragmode,ut=Le._lastSelectedSubplot&&Le._lastSelectedSubplot===ot.id,Pt=(vt.shiftKey||vt.altKey)&&!(b(ct)&&z(ct));ut&&Pt&&ot.selection&&ot.selection.selectionDefs&&!xt.selectionDefs?(xt.selectionDefs=ot.selection.selectionDefs,xt.mergedPolygons=ot.selection.mergedPolygons):(!Pt||!ot.selection)&&$(xt),ut||(P(Mt),Le._lastSelectedSubplot=ot.id)}function je(vt){return vt._fullLayout._activeShapeIndex>=0}function Ae(vt){return vt._fullLayout._activeSelectionIndex>=0}function $(vt,Mt){var xt=vt.dragmode,Le=vt.plotinfo,ot=vt.gd;je(ot)&&ot._fullLayout._deactivateShape(ot),Ae(ot)&&ot._fullLayout._deactivateSelection(ot);var ct=ot._fullLayout,ut=ct._zoomlayer,Pt=b(xt),Ot=X(xt);if(Pt||Ot){var qt=ut.selectAll(".select-outline-"+Le.id);if(qt&&ot._fullLayout._outlining){var ir;Pt&&(ir=te(qt,vt)),ir&&c.call("_guiRelayout",ot,{shapes:ir});var _r;Ot&&!Ye(vt)&&(_r=J(qt,vt)),_r&&(ot._fullLayout._noEmitSelectedAtStart=!0,c.call("_guiRelayout",ot,{selections:_r}).then(function(){Mt&&ye(ot)})),ot._fullLayout._outlining=!1}}Le.selection={},Le.selection.selectionDefs=vt.selectionDefs=[],Le.selection.mergedPolygons=vt.mergedPolygons=[]}function oe(vt){return vt._id}function ge(vt,Mt,xt,Le){if(!vt.calcdata)return[];var ot=[],ct=Mt.map(oe),ut=xt.map(oe),Pt,Ot,qt;for(qt=0;qt<vt.calcdata.length;qt++)if(Pt=vt.calcdata[qt],Ot=Pt[0].trace,!(Ot.visible!==!0||!Ot._module||!Ot._module.selectPoints))if(Ye({subplot:Le})&&(Ot.subplot===Le||Ot.geo===Le))ot.push(Te(Ot._module,Pt,Mt[0],xt[0]));else if(Ot.type==="splom"){if(Ot._xaxes[ct[0]]&&Ot._yaxes[ut[0]]){var ir=Te(Ot._module,Pt,Mt[0],xt[0]);ir.scene=vt._fullLayout._splomScenes[Ot.uid],ot.push(ir)}}else if(Ot.type==="sankey"){var _r=Te(Ot._module,Pt,Mt[0],xt[0]);ot.push(_r)}else{if(ct.indexOf(Ot.xaxis)===-1&&(!Ot._xA||!Ot._xA.overlaying)||ut.indexOf(Ot.yaxis)===-1&&(!Ot._yA||!Ot._yA.overlaying))continue;ot.push(Te(Ot._module,Pt,ue(vt,Ot.xaxis),ue(vt,Ot.yaxis)))}return ot}function Te(vt,Mt,xt,Le){return{_module:vt,cd:Mt,xaxis:xt,yaxis:Le}}function Ue(vt){return vt&&Array.isArray(vt)&&vt[0].hoverOnBox!==!0}function Ze(vt,Mt){var xt=vt[0],Le=-1,ot=[],ct,ut;for(ut=0;ut<Mt.length;ut++)if(ct=Mt[ut],xt.fullData.index===ct.cd[0].trace.index){if(xt.hoverOnBox===!0)break;xt.pointNumber!==void 0?Le=xt.pointNumber:xt.binNumber!==void 0&&(Le=xt.binNumber,ot=xt.pointNumbers);break}return{pointNumber:Le,pointNumbers:ot,searchInfo:ct}}function Je(vt){var Mt=vt.searchInfo.cd[0].trace,xt=vt.pointNumber,Le=vt.pointNumbers,ot=Le.length>0,ct=ot?Le[0]:xt;return Mt.selectedpoints?Mt.selectedpoints.indexOf(ct)>-1:!1}function ft(vt,Mt){var xt=[],Le,ot,ct,ut;for(ut=0;ut<vt.length;ut++)Le=vt[ut],Le.cd[0].trace.selectedpoints&&Le.cd[0].trace.selectedpoints.length>0&&xt.push(Le);if(xt.length===1&&(ct=xt[0]===Mt.searchInfo,ct&&(ot=Mt.searchInfo.cd[0].trace,ot.selectedpoints.length===Mt.pointNumbers.length))){for(ut=0;ut<Mt.pointNumbers.length;ut++)if(ot.selectedpoints.indexOf(Mt.pointNumbers[ut])<0)return!1;return!0}return!1}function wt(vt){var Mt=0,xt,Le,ot;for(ot=0;ot<vt.length;ot++)if(xt=vt[ot],Le=xt.cd[0].trace,Le.selectedpoints&&(Le.selectedpoints.length>1||(Mt+=Le.selectedpoints.length,Mt>1)))return!1;return Mt===1}function Ct(vt,Mt,xt){var Le;for(Le=0;Le<Mt.length;Le++){var ot=Mt[Le].cd[0].trace._fullInput,ct=vt._fullLayout._tracePreGUI[ot.uid]||{};ct.selectedpoints===void 0&&(ct.selectedpoints=ot._input.selectedpoints||null)}var ut;if(xt){var Pt=xt.points||[];for(Le=0;Le<Mt.length;Le++)ut=Mt[Le].cd[0].trace,ut._input.selectedpoints=ut._fullInput.selectedpoints=[],ut._fullInput!==ut&&(ut.selectedpoints=[]);for(var Ot=0;Ot<Pt.length;Ot++){var qt=Pt[Ot],ir=qt.data,_r=qt.fullData,Bt=qt.pointIndex,gr=qt.pointIndices;gr?([].push.apply(ir.selectedpoints,gr),ut._fullInput!==ut&&[].push.apply(_r.selectedpoints,gr)):(ir.selectedpoints.push(Bt),ut._fullInput!==ut&&_r.selectedpoints.push(Bt))}}else for(Le=0;Le<Mt.length;Le++)ut=Mt[Le].cd[0].trace,delete ut.selectedpoints,delete ut._input.selectedpoints,ut._fullInput!==ut&&delete ut._fullInput.selectedpoints;Kt(vt,Mt)}function Kt(vt,Mt){for(var xt=!1,Le=0;Le<Mt.length;Le++){var ot=Mt[Le],ct=ot.cd;c.traceIs(ct[0].trace,"regl")&&(xt=!0);var ut=ot._module,Pt=ut.styleOnSelect||ut.style;Pt&&(Pt(vt,ct,ct[0].node3),ct[0].nodeRangePlot3&&Pt(vt,ct,ct[0].nodeRangePlot3))}xt&&(me(vt),be(vt))}function $t(vt,Mt,xt){for(var Le=xt?d.difference:d.union,ot=Le({regions:vt},{regions:[Mt]}),ct=ot.regions.reverse(),ut=0;ut<ct.length;ut++){var Pt=ct[ut];Pt.subtract=dr(Pt,ct.slice(0,ut))}return ct}function Wt(vt,Mt){if(Array.isArray(vt))for(var xt=Mt.cd,Le=Mt.cd[0].trace,ot=0;ot<vt.length;ot++)vt[ot]=g(vt[ot],Le,xt);return vt}function nt(vt,Mt){for(var xt=[],Le=0;Le<vt.length;Le++){xt[Le]=[];for(var ot=0;ot<vt[Le].length;ot++){xt[Le][ot]=[],xt[Le][ot][0]=ot?"L":"M";for(var ct=0;ct<vt[Le][ot].length;ct++)xt[Le][ot].push(vt[Le][ot][ct])}Mt||xt[Le].push(["Z",xt[Le][0][1],xt[Le][0][2]])}return xt}function pt(vt,Mt){for(var xt=[],Le,ot,ct=0;ct<Mt.length;ct++){var ut=Mt[ct];ot=ut._module.selectPoints(ut,vt),Le=Wt(ot,ut),xt=xt.concat(Le)}return xt}function Ke(vt,Mt,xt,Le,ot){var ct=!!Le,ut,Pt,Ot;ot&&(ut=ot.plotinfo,Pt=ot.xaxes[0]._id,Ot=ot.yaxes[0]._id);var qt=[],ir=[],_r=sr(vt),Bt=vt._fullLayout;if(ut){var gr=Bt._zoomlayer,Ar=Bt.dragmode,Er=b(Ar),ba=X(Ar);if(Er||ba){var Ga=ue(vt,Pt,"x"),Xa=ue(vt,Ot,"y");if(Ga&&Xa){var Aa=gr.selectAll(".select-outline-"+ut.id);if(Aa&&vt._fullLayout._outlining&&Aa.length){for(var Oa=Aa[0][0],va=Oa.getAttribute("d"),ma=H(va,vt,ut),Va=[],ja=0;ja<ma.length;ja++){for(var $a=ma[ja],La=[],la=0;la<$a.length;la++)La.push([wr(Ga,$a[la][1]),wr(Xa,$a[la][2])]);La.xref=Pt,La.yref=Ot,La.subtract=dr(La,Va),Va.push(La)}_r=_r.concat(Va)}}}}var Ba=Pt&&Ot?[Pt+Ot]:Bt._subplots.cartesian;gt(vt);for(var un={},pn=0;pn<Ba.length;pn++){var qa=Ba[pn],nn=qa.indexOf("y"),cn=qa.slice(0,nn),Cn=qa.slice(nn),Ja=Pt&&Ot?xt:void 0;if(Ja=or(_r,cn,Cn,Ja),Ja){var xn=Le;if(!ct){var We=ue(vt,cn,"x"),Re=ue(vt,Cn,"y");xn=ge(vt,[We],[Re],qa);for(var Zt=0;Zt<xn.length;Zt++){var Ht=xn[Zt],Rt=Ht.cd[0],Dt=Rt.trace;if(Ht._module.name==="scattergl"&&!Rt.t.xpx){var Ut=Dt.x,pr=Dt.y,jt=Dt._length;Rt.t.xpx=[],Rt.t.ypx=[];for(var Jt=0;Jt<jt;Jt++)Rt.t.xpx[Jt]=We.c2p(Ut[Jt]),Rt.t.ypx[Jt]=Re.c2p(pr[Jt])}Ht._module.name==="splom"&&(un[Dt.uid]||(un[Dt.uid]=!0))}}var cr=pt(Ja,xn);qt=qt.concat(cr),ir=ir.concat(xn)}}var rr={points:qt};Ct(vt,ir,rr);var Or=Bt.clickmode,Br=Or.indexOf("event")>-1&&Mt;if(!ut&&Mt){var ra=sr(vt,!0);if(ra.length){var Ca=ra[0].xref,Ma=ra[0].yref;if(Ca&&Ma){var za=xr(ra),Fa=nr([ue(vt,Ca,"x"),ue(vt,Ma,"y")]);Fa(rr,za)}}vt._fullLayout._noEmitSelectedAtStart?vt._fullLayout._noEmitSelectedAtStart=!1:Br&&Nr(vt,rr),Bt._reselect=!1}if(!ut&&Bt._deselect){var Da=Bt._deselect;Pt=Da.xref,Ot=Da.yref,Ft(Pt,Ot,ir)||Xt(vt,Pt,Ot,Le),Br&&(rr.points.length?Nr(vt,rr):Jr(vt)),Bt._deselect=!1}return{eventData:rr,selectionTesters:xt}}function gt(vt){var Mt=vt.calcdata;if(Mt)for(var xt=0;xt<Mt.length;xt++){var Le=Mt[xt][0],ot=Le.trace,ct=vt._fullLayout._splomScenes;if(ct){var ut=ct[ot.uid];ut&&(ut.selectBatch=[])}}}function Ft(vt,Mt,xt){for(var Le=0;Le<xt.length;Le++){var ot=xt[Le];if(ot.xaxis&&ot.xaxis._id===vt&&ot.yaxis&&ot.yaxis._id===Mt)return!0}return!1}function Xt(vt,Mt,xt,Le){Le=ge(vt,[ue(vt,Mt,"x")],[ue(vt,xt,"y")],Mt+xt);for(var ot=0;ot<Le.length;ot++){var ct=Le[ot];ct._module.selectPoints(ct,!1)}Ct(vt,Le)}function or(vt,Mt,xt,Le){for(var ot,ct=0;ct<vt.length;ct++){var ut=vt[ct];if(!(Mt!==ut.xref||xt!==ut.yref))if(ot){var Pt=!!ut.subtract;ot=$t(ot,ut,Pt),Le=de(ot)}else ot=[ut],Le=le(ut)}return Le}function sr(vt,Mt){for(var xt=[],Le=vt._fullLayout,ot=Le.selections,ct=ot.length,ut=0;ut<ct;ut++)if(!(Mt&&ut!==Le._activeSelectionIndex)){var Pt=ot[ut];if(Pt){var Ot=Pt.xref,qt=Pt.yref,ir=ue(vt,Ot,"x"),_r=ue(vt,qt,"y"),Bt,gr,Ar,Er,ba;if(Pt.type==="rect"){ba=[];var Ga=wr(ir,Pt.x0),Xa=wr(ir,Pt.x1),Aa=wr(_r,Pt.y0),Oa=wr(_r,Pt.y1);ba=[[Ga,Aa],[Ga,Oa],[Xa,Oa],[Xa,Aa]],Bt=Math.min(Ga,Xa),gr=Math.max(Ga,Xa),Ar=Math.min(Aa,Oa),Er=Math.max(Aa,Oa),ba.xmin=Bt,ba.xmax=gr,ba.ymin=Ar,ba.ymax=Er,ba.xref=Ot,ba.yref=qt,ba.subtract=!1,ba.isRect=!0,xt.push(ba)}else if(Pt.type==="path")for(var va=Pt.path.split("Z"),ma=[],Va=0;Va<va.length;Va++){var ja=va[Va];if(ja){ja+="Z";var $a=N.extractPathCoords(ja,O.paramIsX,"raw"),La=N.extractPathCoords(ja,O.paramIsY,"raw");Bt=1/0,gr=-1/0,Ar=1/0,Er=-1/0,ba=[];for(var la=0;la<$a.length;la++){var Ba=wr(ir,$a[la]),un=wr(_r,La[la]);ba.push([Ba,un]),Bt=Math.min(Ba,Bt),gr=Math.max(Ba,gr),Ar=Math.min(un,Ar),Er=Math.max(un,Er)}ba.xmin=Bt,ba.xmax=gr,ba.ymin=Ar,ba.ymax=Er,ba.xref=Ot,ba.yref=qt,ba.subtract=dr(ba,ma),ma.push(ba),xt.push(ba)}}}}return xt}function dr(vt,Mt){for(var xt=!1,Le=0;Le<Mt.length;Le++)for(var ot=Mt[Le],ct=0;ct<vt.length;ct++)if(u(vt[ct],ot)){xt=!xt;break}return xt}function wr(vt,Mt){return vt.type==="date"&&(Mt=Mt.replace("_"," ")),vt.type==="log"?vt.c2p(Mt):vt.r2p(Mt,null,vt.calendar)}function xr(vt){for(var Mt=vt.length,xt=[],Le=0;Le<Mt;Le++){var ot=vt[Le];xt=xt.concat(ot),xt=xt.concat([ot[0]])}return Pr(xt)}function Pr(vt){return vt.isRect=vt.length===5&&vt[0][0]===vt[4][0]&&vt[0][1]===vt[4][1]&&vt[0][0]===vt[1][0]&&vt[2][0]===vt[3][0]&&vt[0][1]===vt[3][1]&&vt[1][1]===vt[2][1]||vt[0][1]===vt[1][1]&&vt[2][1]===vt[3][1]&&vt[0][0]===vt[3][0]&&vt[1][0]===vt[2][0],vt.isRect&&(vt.xmin=Math.min(vt[0][0],vt[2][0]),vt.xmax=Math.max(vt[0][0],vt[2][0]),vt.ymin=Math.min(vt[0][1],vt[2][1]),vt.ymax=Math.max(vt[0][1],vt[2][1])),vt}function nr(vt){return function(Mt,xt){for(var Le,ot,ct=0;ct<vt.length;ct++){var ut=vt[ct],Pt=ut._id,Ot=Pt.charAt(0);if(xt.isRect){Le||(Le={});var qt=xt[Ot+"min"],ir=xt[Ot+"max"];qt!==void 0&&ir!==void 0&&(Le[Pt]=[Oe(ut,qt),Oe(ut,ir)].sort(he))}else ot||(ot={}),ot[Pt]=xt.map(He(ut))}Le&&(Mt.range=Le),ot&&(Mt.lassoPoints=ot)}}function jr(vt){var Mt=vt.plotinfo;return Mt.fillRangeItems||nr(vt.xaxes.concat(vt.yaxes))}function ta(vt,Mt){vt.emit("plotly_selecting",Mt)}function Nr(vt,Mt){Mt&&(Mt.selections=(vt.layout||{}).selections||[]),vt.emit("plotly_selected",Mt)}function Jr(vt){vt.emit("plotly_deselect",null)}fe.exports={reselect:Ke,prepSelect:st,clearOutline:P,clearSelectionsCache:$,selectOnClick:it}}}),gl=n({"src/components/annotations/arrow_paths.js"(ce,fe){fe.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]}}),Yo=n({"src/constants/axis_placeable_objects.js"(ce,fe){fe.exports={axisRefDescription:function(d,u,c){return["If set to a",d,"axis id (e.g. *"+d+"* or","*"+d+"2*), the `"+d+"` position refers to a",d,"coordinate. If set to *paper*, the `"+d+"`","position refers to the distance from the",u,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",u,"("+c+"). If set to a",d,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",u,"of the domain of that axis: e.g.,","*"+d+"2 domain* refers to the domain of the second",d," axis and a",d,"position of 0.5 refers to the","point between the",u,"and the",c,"of the domain of the","second",d,"axis."].join(" ")}}}}),Hl=n({"src/components/annotations/attributes.js"(ce,fe){var d=gl(),u=G(),c=ui(),m=vn().templatedArray;Yo(),fe.exports=m("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:u({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",c.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",c.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",c.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",c.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:u({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})}}),Vu=n({"src/traces/scatter/constants.js"(ce,fe){fe.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}}}),Wo=n({"src/traces/scatter/fillcolor_attribute.js"(ce,fe){fe.exports=function(u){return{valType:"color",editType:"style",anim:!0}}}}),yl=n({"src/traces/scatter/attributes.js"(ce,fe){var d=ro().axisHoverFormat,u=kt().texttemplateAttrs,c=kt().hovertemplateAttrs,m=Ss(),v=G(),p=Rr().dash,g=Rr().pattern,w=ni(),s=Vu(),j=L().extendFlat,b=Wo();function z(O){return{valType:"any",dflt:0,editType:"calc"}}function X(O){return{valType:"any",editType:"calc"}}function N(O){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}fe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:z(),yperiod:z(),xperiod0:X(),yperiod0:X(),xperiodalignment:N(),yperiodalignment:N(),xhoverformat:d("x"),yhoverformat:d("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:u({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:c({},{keys:s.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:j({},p,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:b(!0),fillgradient:j({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:g,marker:j({symbol:{valType:"enumerated",values:w.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:j({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},m("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},m("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:v({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}}}),Oc=n({"src/components/selections/attributes.js"(ce,fe){var d=Hl(),u=yl().line,c=Rr().dash,m=L().extendFlat,v=wa().overrideAll,p=vn().templatedArray;Yo(),fe.exports=v(p("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:m({},d.xref,{}),yref:m({},d.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:u.color,width:m({},u.width,{min:1,dflt:1}),dash:m({},c,{dflt:"dot"})}}),"arraydraw","from-root")}}),Sh=n({"src/components/selections/defaults.js"(ce,fe){var d=pa(),u=mi(),c=Gi(),m=Oc(),v=Es();fe.exports=function(w,s){c(w,s,{name:"selections",handleItemDefaults:p});for(var j=s.selections,b=0;b<j.length;b++){var z=j[b];z&&z.path===void 0&&(z.x0===void 0||z.x1===void 0||z.y0===void 0||z.y1===void 0)&&(s.selections[b]=null)}};function p(g,w,s){function j(me,be){return d.coerce(g,w,m,me,be)}var b=j("path"),z=b?"path":"rect",X=j("type",z),N=X!=="path";N&&delete w.path,j("opacity"),j("line.color"),j("line.width"),j("line.dash");for(var O=["x","y"],F=0;F<2;F++){var P=O[F],_={_fullLayout:s},R,H,te,J=u.coerceRef(g,w,_,P);if(R=u.getFromId(_,J),R._selectionIndices.push(w._index),te=v.rangeToShapePosition(R),H=v.shapePositionToRange(R),N){var ye=P+"0",se=P+"1",he=g[ye],pe=g[se];g[ye]=H(g[ye],!0),g[se]=H(g[se],!0),u.coercePosition(w,_,j,J,ye),u.coercePosition(w,_,j,J,se);var Q=w[ye],ue=w[se];Q!==void 0&&ue!==void 0&&(w[ye]=te(Q),w[se]=te(ue),g[ye]=he,g[se]=pe)}}N&&d.noneOrAll(g,w,["x0","x1","y0","y1"])}}}),zf=n({"src/components/selections/draw_newselection/defaults.js"(ce,fe){fe.exports=function(u,c,m){m("newselection.mode");var v=m("newselection.line.width");v&&(m("newselection.line.color"),m("newselection.line.dash")),m("activeselection.fillcolor"),m("activeselection.opacity")}}}),bl=n({"src/plots/cartesian/include_components.js"(ce,fe){var d=hr(),u=pa(),c=di();fe.exports=function(v){return function(g,w){var s=g[v];if(Array.isArray(s))for(var j=d.subplotsRegistry.cartesian,b=j.idRegex,z=w._subplots,X=z.xaxis,N=z.yaxis,O=z.cartesian,F=w._has("cartesian"),P=0;P<s.length;P++){var _=s[P];if(u.isPlainObject(_)){var R=c.cleanId(_.xref,"x",!1),H=c.cleanId(_.yref,"y",!1),te=b.x.test(R),J=b.y.test(H);if(te||J){F||u.pushUnique(w._basePlotModules,j);var ye=!1;te&&X.indexOf(R)===-1&&(X.push(R),ye=!0),J&&N.indexOf(H)===-1&&(N.push(H),ye=!0),ye&&te&&J&&O.push(R+H)}}}}}}}),lo=n({"src/components/selections/index.js"(ce,fe){var d=qu(),u=Df();fe.exports={moduleType:"component",name:"selections",layoutAttributes:Oc(),supplyLayoutDefaults:Sh(),supplyDrawNewSelectionDefaults:zf(),includeBasePlot:bl()("selections"),draw:d.draw,drawOne:d.drawOne,reselect:u.reselect,prepSelect:u.prepSelect,clearOutline:u.clearOutline,clearSelectionsCache:u.clearSelectionsCache,selectOnClick:u.selectOnClick}}}),Ul=n({"src/plots/cartesian/dragbox.js"(ce,fe){var d=k(),u=pa(),c=u.numberFormat,m=A(),v=fu(),p=hr(),g=u.strTranslate,w=Ui(),s=Ve(),j=ni(),b=Ms(),z=mi(),X=Ki(),N=rs(),O=vu(),F=O.selectingOrDrawing,P=O.freeMode,_=xi().FROM_TL,R=Cc(),H=mu().redrawReglTraces,te=Di(),J=di().getFromId,ye=lo().prepSelect,se=lo().clearOutline,he=lo().selectOnClick,pe=Ks(),Q=ui(),ue=Q.MINDRAG,me=Q.MINZOOM,be=!0;function ve(Te,Ue,Ze,Je,ft,wt,Ct,Kt){var $t=Te._fullLayout._zoomlayer,Wt=Ct+Kt==="nsew",nt=(Ct+Kt).length===1,pt,Ke,gt,Ft,Xt,or,sr,dr,wr,xr,Pr,nr,jr,ta,Nr,Jr,vt,Mt,xt,Le,ot,ct,ut;Ze+=Ue.yaxis._shift;function Pt(){if(pt=Ue.xaxis,Ke=Ue.yaxis,wr=pt._length,xr=Ke._length,sr=pt._offset,dr=Ke._offset,gt={},gt[pt._id]=pt,Ft={},Ft[Ke._id]=Ke,Ct&&Kt)for(var Rt=Ue.overlays,Dt=0;Dt<Rt.length;Dt++){var Ut=Rt[Dt].xaxis;gt[Ut._id]=Ut;var pr=Rt[Dt].yaxis;Ft[pr._id]=pr}Xt=ge(gt),or=ge(Ft),jr=le(Xt,Kt),ta=le(or,Ct),Nr=!ta&&!jr,nr=$(Te,Te._fullLayout._axisMatchGroups,gt,Ft),Pr=$(Te,Te._fullLayout._axisConstraintGroups,gt,Ft,nr);var jt=Pr.isSubplotConstrained||nr.isSubplotConstrained;Jr=Kt||jt,vt=Ct||jt;var Jt=Te._fullLayout;Mt=Jt._has("scattergl"),xt=Jt._has("splom"),Le=Jt._has("svg")}Pt();var Ot=Ye(ta+jr,Te._fullLayout.dragmode,Wt),qt=ke(Ue,Ct+Kt+"drag",Ot,Ze,Je,ft,wt);if(Nr&&!Wt)return qt.onmousedown=null,qt.style.pointerEvents="none",qt;var ir={element:qt,gd:Te,plotinfo:Ue};ir.prepFn=function(Rt,Dt,Ut){var pr=ir.dragmode,jt=Te._fullLayout.dragmode;jt!==pr&&(ir.dragmode=jt),Pt(),ct=Te._fullLayout._invScaleX,ut=Te._fullLayout._invScaleY,Nr||(Wt?Rt.shiftKey?jt==="pan"?jt="zoom":F(jt)||(jt="pan"):Rt.ctrlKey&&(jt="pan"):jt="pan"),P(jt)?ir.minDrag=1:ir.minDrag=void 0,F(jt)?(ir.xaxes=Xt,ir.yaxes=or,ye(Rt,Dt,Ut,ir,jt)):(ir.clickFn=Bt,F(pr)&&_r(),Nr||(jt==="zoom"?(ir.moveFn=ja,ir.doneFn=La,ir.minDrag=1,Va(Rt,Dt,Ut)):jt==="pan"&&(ir.moveFn=nn,ir.doneFn=xn))),Te._fullLayout._redrag=function(){var Jt=Te._dragdata;if(Jt&&Jt.element===qt){var cr=Te._fullLayout.dragmode;F(cr)||(Pt(),We([0,0,wr,xr]),ir.moveFn(Jt.dx,Jt.dy))}}};function _r(){ir.plotinfo.selection=!1,se(Te)}function Bt(Rt,Dt){var Ut=ir.gd;if(Ut._fullLayout._activeShapeIndex>=0){Ut._fullLayout._deactivateShape(Ut);return}var pr=Ut._fullLayout.clickmode;if(Ee(Ut),Rt===2&&!nt&&Ja(),Wt)pr.indexOf("select")>-1&&he(Dt,Ut,Xt,or,Ue.id,ir),pr.indexOf("event")>-1&&b.click(Ut,Dt,Ue.id);else if(Rt===1&&nt){var jt=Ct?Ke:pt,Jt=Ct==="s"||Kt==="w"?0:1,cr=jt._name+".range["+Jt+"]",rr=De(jt,Jt),Or="left",Br="middle";if(jt.fixedrange)return;Ct?(Br=Ct==="n"?"top":"bottom",jt.side==="right"&&(Or="right")):Kt==="e"&&(Or="right"),Ut._context.showAxisRangeEntryBoxes&&d.select(qt).call(w.makeEditable,{gd:Ut,immediate:!0,background:Ut._fullLayout.paper_bgcolor,text:String(rr),fill:jt.tickfont?jt.tickfont.color:"#444",horizontalAlign:Or,verticalAlign:Br}).on("edit",function(ra){var Ca=jt.d2r(ra);Ca!==void 0&&p.call("_guiRelayout",Ut,cr,Ca)})}}N.init(ir);var gr,Ar,Er,ba,Ga,Xa,Aa,Oa,va,ma;function Va(Rt,Dt,Ut){var pr=qt.getBoundingClientRect();gr=Dt-pr.left,Ar=Ut-pr.top,Te._fullLayout._calcInverseTransform(Te);var jt=u.apply3DTransform(Te._fullLayout._invTransform)(gr,Ar);gr=jt[0],Ar=jt[1],Er={l:gr,r:gr,w:0,t:Ar,b:Ar,h:0},ba=Te._hmpixcount?Te._hmlumcount/Te._hmpixcount:m(Te._fullLayout.plot_bgcolor).getLuminance(),Ga="M0,0H"+wr+"V"+xr+"H0V0",Xa=!1,Aa="xy",ma=!1,Oa=st($t,ba,sr,dr,Ga),va=it($t,sr,dr)}function ja(Rt,Dt){if(Te._transitioningWithDuration)return!1;var Ut=Math.max(0,Math.min(wr,ct*Rt+gr)),pr=Math.max(0,Math.min(xr,ut*Dt+Ar)),jt=Math.abs(Ut-gr),Jt=Math.abs(pr-Ar);Er.l=Math.min(gr,Ut),Er.r=Math.max(gr,Ut),Er.t=Math.min(Ar,pr),Er.b=Math.max(Ar,pr);function cr(){Aa="",Er.r=Er.l,Er.t=Er.b,va.attr("d","M0,0Z")}if(Pr.isSubplotConstrained)jt>me||Jt>me?(Aa="xy",jt/wr>Jt/xr?(Jt=jt*xr/wr,Ar>pr?Er.t=Ar-Jt:Er.b=Ar+Jt):(jt=Jt*wr/xr,gr>Ut?Er.l=gr-jt:Er.r=gr+jt),va.attr("d",Ae(Er))):cr();else if(nr.isSubplotConstrained)if(jt>me||Jt>me){Aa="xy";var rr=Math.min(Er.l/wr,(xr-Er.b)/xr),Or=Math.max(Er.r/wr,(xr-Er.t)/xr);Er.l=rr*wr,Er.r=Or*wr,Er.b=(1-rr)*xr,Er.t=(1-Or)*xr,va.attr("d",Ae(Er))}else cr();else!ta||Jt<Math.min(Math.max(jt*.6,ue),me)?jt<ue||!jr?cr():(Er.t=0,Er.b=xr,Aa="x",va.attr("d",we(Er,Ar))):!jr||jt<Math.min(Jt*.6,me)?(Er.l=0,Er.r=wr,Aa="y",va.attr("d",je(Er,gr))):(Aa="xy",va.attr("d",Ae(Er)));Er.w=Er.r-Er.l,Er.h=Er.b-Er.t,Aa&&(ma=!0),Te._dragged=ma,yt(Oa,va,Er,Ga,Xa,ba),$a(),Te.emit("plotly_relayouting",ot),Xa=!0}function $a(){ot={},(Aa==="xy"||Aa==="x")&&(Oe(Xt,Er.l/wr,Er.r/wr,ot,Pr.xaxes),cn("x",ot)),(Aa==="xy"||Aa==="y")&&(Oe(or,(xr-Er.b)/xr,(xr-Er.t)/xr,ot,Pr.yaxes),cn("y",ot))}function La(){$a(),Ee(Te),xn(),de(Te)}var la=[0,0,wr,xr],Ba=null,un=Q.REDRAWDELAY,pn=Ue.mainplot?Te._fullLayout._plots[Ue.mainplot]:Ue;function qa(Rt){if(!Te._context._scrollZoom.cartesian&&!Te._fullLayout._enablescrollzoom)return;if(_r(),Te._transitioningWithDuration){Rt.preventDefault(),Rt.stopPropagation();return}Pt(),clearTimeout(Ba);var Dt=-Rt.deltaY;if(isFinite(Dt)||(Dt=Rt.wheelDelta/10),!isFinite(Dt)){u.log("Did not find wheel motion attributes: ",Rt);return}var Ut=Math.exp(-Math.min(Math.max(Dt,-20),20)/200),pr=pn.draglayer.select(".nsewdrag").node().getBoundingClientRect(),jt=(Rt.clientX-pr.left)/pr.width,Jt=(pr.bottom-Rt.clientY)/pr.height,cr;function rr(Or,Br,ra){if(Or.fixedrange)return;var Ca=u.simpleMap(Or.range,Or.r2l),Ma=Ca[0]+(Ca[1]-Ca[0])*Br;function za(Fa){return Or.l2r(Ma+(Fa-Ma)*ra)}Or.range=Ca.map(za)}if(Jr){for(Kt||(jt=.5),cr=0;cr<Xt.length;cr++)rr(Xt[cr],jt,Ut);cn("x"),la[2]*=Ut,la[0]+=la[2]*jt*(1/Ut-1)}if(vt){for(Ct||(Jt=.5),cr=0;cr<or.length;cr++)rr(or[cr],Jt,Ut);cn("y"),la[3]*=Ut,la[1]+=la[3]*(1-Jt)*(1/Ut-1)}We(la),Cn(),Te.emit("plotly_relayouting",ot),Ba=setTimeout(function(){Te._fullLayout&&(la=[0,0,wr,xr],xn())},un),Rt.preventDefault()}Ct.length*Kt.length!==1&&oe(qt,qa);function nn(Rt,Dt){if(Rt=Rt*ct,Dt=Dt*ut,Te._transitioningWithDuration)return;if(Te._fullLayout._replotting=!0,jr==="ew"||ta==="ns"){var Ut=jr?-Rt:0,pr=ta?-Dt:0;if(nr.isSubplotConstrained){if(jr&&ta){var jt=(Rt/wr-Dt/xr)/2;Rt=jt*wr,Dt=-jt*xr,Ut=-Rt,pr=-Dt}ta?Ut=-pr*wr/xr:pr=-Ut*xr/wr}jr&&(He(Xt,Rt),cn("x")),ta&&(He(or,Dt),cn("y")),We([Ut,pr,wr,xr]),Cn(),Te.emit("plotly_relayouting",ot);return}function Jt(za,Fa,Da){for(var Ka=1-Fa,on,Sn,On=0;On<za.length;On++){var jn=za[On];if(!jn.fixedrange){on=jn,Sn=jn._rl[Ka]+(jn._rl[Fa]-jn._rl[Ka])/Be(Da/jn._length);var dn=jn.l2r(Sn);dn!==!1&&dn!==void 0&&(jn.range[Fa]=dn)}}return on._length*(on._rl[Fa]-Sn)/(on._rl[Fa]-on._rl[Ka])}var cr=jr==="w"==(ta==="n")?1:-1;if(jr&&ta&&(Pr.isSubplotConstrained||nr.isSubplotConstrained)){var rr=(Rt/wr+cr*Dt/xr)/2;Rt=rr*wr,Dt=cr*rr*xr}var Or,Br;if(jr==="w"?Rt=Jt(Xt,0,Rt):jr==="e"?Rt=Jt(Xt,1,-Rt):jr||(Rt=0),ta==="n"?Dt=Jt(or,1,Dt):ta==="s"?Dt=Jt(or,0,-Dt):ta||(Dt=0),Or=jr==="w"?Rt:0,Br=ta==="n"?Dt:0,Pr.isSubplotConstrained&&!nr.isSubplotConstrained||nr.isSubplotConstrained&&jr&&ta&&cr>0){var ra;if(nr.isSubplotConstrained||!jr&&ta.length===1){for(ra=0;ra<Xt.length;ra++)Xt[ra].range=Xt[ra]._r.slice(),pe(Xt[ra],1-Dt/xr);Rt=Dt*wr/xr,Or=Rt/2}if(nr.isSubplotConstrained||!ta&&jr.length===1){for(ra=0;ra<or.length;ra++)or[ra].range=or[ra]._r.slice(),pe(or[ra],1-Rt/wr);Dt=Rt*xr/wr,Br=Dt/2}}(!nr.isSubplotConstrained||!ta)&&cn("x"),(!nr.isSubplotConstrained||!jr)&&cn("y");var Ca=wr-Rt,Ma=xr-Dt;nr.isSubplotConstrained&&!(jr&&ta)&&(jr?(Br=Or?0:Rt*xr/wr,Ma=Ca*xr/wr):(Or=Br?0:Dt*wr/xr,Ca=Ma*wr/xr)),We([Or,Br,Ca,Ma]),Cn(),Te.emit("plotly_relayouting",ot)}function cn(Rt,Dt){for(var Ut=nr.isSubplotConstrained?{x:or,y:Xt}[Rt]:nr[Rt+"axes"],pr=nr.isSubplotConstrained?{x:Xt,y:or}[Rt]:[],jt=0;jt<Ut.length;jt++){var Jt=Ut[jt],cr=Jt._id,rr=nr.xLinks[cr]||nr.yLinks[cr],Or=pr[0]||gt[rr]||Ft[rr];Or&&(Dt?(Dt[Jt._name+".range[0]"]=Dt[Or._name+".range[0]"],Dt[Jt._name+".range[1]"]=Dt[Or._name+".range[1]"]):Jt.range=Or.range.slice())}}function Cn(){var Rt=[],Dt;function Ut(cr){for(Dt=0;Dt<cr.length;Dt++)cr[Dt].fixedrange||Rt.push(cr[Dt]._id)}function pr(cr,rr){for(Dt=0;Dt<cr.length;Dt++){var Or=cr[Dt],Br=Or[rr];!Or.fixedrange&&Br.tickmode==="sync"&&Rt.push(Br._id)}}for(Jr&&(Ut(Xt),Ut(Pr.xaxes),Ut(nr.xaxes),pr(Ue.overlays,"xaxis")),vt&&(Ut(or),Ut(Pr.yaxes),Ut(nr.yaxes),pr(Ue.overlays,"yaxis")),ot={},Dt=0;Dt<Rt.length;Dt++){var jt=Rt[Dt],Jt=J(Te,jt);z.drawOne(Te,Jt,{skipTitle:!0}),ot[Jt._name+".range[0]"]=Jt.range[0],ot[Jt._name+".range[1]"]=Jt.range[1]}z.redrawComponents(Te,Rt)}function Ja(){if(!Te._transitioningWithDuration){var Rt=Te._context.doubleClick,Dt=[];jr&&(Dt=Dt.concat(Xt)),ta&&(Dt=Dt.concat(or)),nr.xaxes&&(Dt=Dt.concat(nr.xaxes)),nr.yaxes&&(Dt=Dt.concat(nr.yaxes));var Ut={},pr,jt;if(Rt==="reset+autosize")for(Rt="autosize",jt=0;jt<Dt.length;jt++){pr=Dt[jt];var Jt=pr._rangeInitial0,cr=pr._rangeInitial1,rr=Jt!==void 0||cr!==void 0;if(rr&&(Jt!==void 0&&Jt!==pr.range[0]||cr!==void 0&&cr!==pr.range[1])||!rr&&pr.autorange!==!0){Rt="reset";break}}if(Rt==="autosize")for(jt=0;jt<Dt.length;jt++)pr=Dt[jt],pr.fixedrange||(Ut[pr._name+".autorange"]=!0);else if(Rt==="reset"){for((jr||Pr.isSubplotConstrained)&&(Dt=Dt.concat(Pr.xaxes)),ta&&!Pr.isSubplotConstrained&&(Dt=Dt.concat(Pr.yaxes)),Pr.isSubplotConstrained&&(jr?ta||(Dt=Dt.concat(or)):Dt=Dt.concat(Xt)),jt=0;jt<Dt.length;jt++)if(pr=Dt[jt],!pr.fixedrange){var Or=pr._name,Br=pr._autorangeInitial;pr._rangeInitial0===void 0&&pr._rangeInitial1===void 0?Ut[Or+".autorange"]=!0:pr._rangeInitial0===void 0?(Ut[Or+".autorange"]=Br,Ut[Or+".range"]=[null,pr._rangeInitial1]):pr._rangeInitial1===void 0?(Ut[Or+".range"]=[pr._rangeInitial0,null],Ut[Or+".autorange"]=Br):Ut[Or+".range"]=[pr._rangeInitial0,pr._rangeInitial1]}}Te.emit("plotly_doubleclick",null),p.call("_guiRelayout",Te,Ut)}}function xn(){We([0,0,wr,xr]),u.syncOrAsync([te.previousPromises,function(){Te._fullLayout._replotting=!1,p.call("_guiRelayout",Te,ot)}],Te)}function We(Rt){var Dt=Te._fullLayout,Ut=Dt._plots,pr=Dt._subplots.cartesian,jt,Jt,cr,rr;if(xt&&p.subplotsRegistry.splom.drag(Te),Mt){for(jt=0;jt<pr.length;jt++)if(Jt=Ut[pr[jt]],cr=Jt.xaxis,rr=Jt.yaxis,Jt._scene){cr.limitRange&&cr.limitRange(),rr.limitRange&&rr.limitRange();var Or=u.simpleMap(cr.range,cr.r2l),Br=u.simpleMap(rr.range,rr.r2l);Jt._scene.update({range:[Or[0],Br[0],Or[1],Br[1]]})}}if((xt||Mt)&&(R(Te),H(Te)),Le){var ra=Rt[2]/pt._length,Ca=Rt[3]/Ke._length;for(jt=0;jt<pr.length;jt++){Jt=Ut[pr[jt]],cr=Jt.xaxis,rr=Jt.yaxis;var Ma=(Jr||nr.isSubplotConstrained)&&!cr.fixedrange&&gt[cr._id],za=(vt||nr.isSubplotConstrained)&&!rr.fixedrange&&Ft[rr._id],Fa,Da,Ka,on;if(Ma?(Fa=ra,Ka=Kt||nr.isSubplotConstrained?Rt[0]:Ht(cr,Fa)):nr.xaHash[cr._id]?(Fa=ra,Ka=Rt[0]*cr._length/pt._length):nr.yaHash[cr._id]?(Fa=Ca,Ka=ta==="ns"?-Rt[1]*cr._length/Ke._length:Ht(cr,Fa,{n:"top",s:"bottom"}[ta])):(Fa=Re(cr,ra,Ca),Ka=Zt(cr,Fa)),Fa>1&&(cr.maxallowed!==void 0&&Jr===(cr.range[0]<cr.range[1]?"e":"w")||cr.minallowed!==void 0&&Jr===(cr.range[0]<cr.range[1]?"w":"e"))&&(Fa=1,Ka=0),za?(Da=Ca,on=Ct||nr.isSubplotConstrained?Rt[1]:Ht(rr,Da)):nr.yaHash[rr._id]?(Da=Ca,on=Rt[1]*rr._length/Ke._length):nr.xaHash[rr._id]?(Da=ra,on=jr==="ew"?-Rt[0]*rr._length/pt._length:Ht(rr,Da,{e:"right",w:"left"}[jr])):(Da=Re(rr,ra,Ca),on=Zt(rr,Da)),Da>1&&(rr.maxallowed!==void 0&&vt===(rr.range[0]<rr.range[1]?"n":"s")||rr.minallowed!==void 0&&vt===(rr.range[0]<rr.range[1]?"s":"n"))&&(Da=1,on=0),!(!Fa&&!Da)){Fa||(Fa=1),Da||(Da=1);var Sn=cr._offset-Ka/Fa,On=rr._offset-on/Da;Jt.clipRect.call(j.setTranslate,Ka,on).call(j.setScale,Fa,Da),Jt.plot.call(j.setTranslate,Sn,On).call(j.setScale,1/Fa,1/Da),(Fa!==Jt.xScaleFactor||Da!==Jt.yScaleFactor)&&(j.setPointGroupScale(Jt.zoomScalePts,Fa,Da),j.setTextPointsScale(Jt.zoomScaleTxt,Fa,Da)),j.hideOutsideRangePoints(Jt.clipOnAxisFalseTraces,Jt),Jt.xScaleFactor=Fa,Jt.yScaleFactor=Da}}}}function Re(Rt,Dt,Ut){return Rt.fixedrange?0:Jr&&Pr.xaHash[Rt._id]?Dt:vt&&(Pr.isSubplotConstrained?Pr.xaHash:Pr.yaHash)[Rt._id]?Ut:0}function Zt(Rt,Dt){return Dt?(Rt.range=Rt._r.slice(),pe(Rt,Dt),Ht(Rt,Dt)):0}function Ht(Rt,Dt,Ut){return Rt._length*(1-Dt)*_[Ut||Rt.constraintoward||"middle"]}return qt}function Me(Te,Ue,Ze,Je){var ft=u.ensureSingle(Te.draglayer,Ue,Ze,function(wt){wt.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",Te.id)});return ft.call(X,Je),ft.node()}function ke(Te,Ue,Ze,Je,ft,wt,Ct){var Kt=Me(Te,"rect",Ue,Ze);return d.select(Kt).call(j.setRect,Je,ft,wt,Ct),Kt}function le(Te,Ue){for(var Ze=0;Ze<Te.length;Ze++)if(!Te[Ze].fixedrange)return Ue;return""}function De(Te,Ue){var Ze=Te.range[Ue],Je=Math.abs(Ze-Te.range[1-Ue]),ft;return Te.type==="date"?Ze:Te.type==="log"?(ft=Math.ceil(Math.max(0,-Math.log(Je)/Math.LN10))+3,c("."+ft+"g")(Math.pow(10,Ze))):(ft=Math.floor(Math.log(Math.abs(Ze))/Math.LN10)-Math.floor(Math.log(Je)/Math.LN10)+4,c("."+String(ft)+"g")(Ze))}function Oe(Te,Ue,Ze,Je,ft){for(var wt=0;wt<Te.length;wt++){var Ct=Te[wt];if(!Ct.fixedrange)if(Ct.rangebreaks){var Kt=Ct._id.charAt(0)==="y",$t=Kt?1-Ue:Ue,Wt=Kt?1-Ze:Ze;Je[Ct._name+".range[0]"]=Ct.l2r(Ct.p2l($t*Ct._length)),Je[Ct._name+".range[1]"]=Ct.l2r(Ct.p2l(Wt*Ct._length))}else{var nt=Ct._rl[0],pt=Ct._rl[1]-nt;Je[Ct._name+".range[0]"]=Ct.l2r(nt+pt*Ue),Je[Ct._name+".range[1]"]=Ct.l2r(nt+pt*Ze)}}if(ft&&ft.length){var Ke=(Ue+(1-Ze))/2;Oe(ft,Ke,1-Ke,Je,[])}}function He(Te,Ue){for(var Ze=0;Ze<Te.length;Ze++){var Je=Te[Ze];if(!Je.fixedrange){if(Je.rangebreaks){var ft=0,wt=Je._length,Ct=Je.p2l(ft+Ue)-Je.p2l(ft),Kt=Je.p2l(wt+Ue)-Je.p2l(wt),$t=(Ct+Kt)/2;Je.range=[Je.l2r(Je._rl[0]-$t),Je.l2r(Je._rl[1]-$t)]}else Je.range=[Je.l2r(Je._rl[0]-Ue/Je._m),Je.l2r(Je._rl[1]-Ue/Je._m)];Je.limitRange&&Je.limitRange()}}}function Be(Te){return 1-(Te>=0?Math.min(Te,.9):1/(1/Math.max(Te,-.3)+3.222))}function Ye(Te,Ue,Ze){return Te?Te==="nsew"?Ze?"":Ue==="pan"?"move":"crosshair":Te.toLowerCase()+"-resize":"pointer"}function st(Te,Ue,Ze,Je,ft){return Te.append("path").attr("class","zoombox").style({fill:Ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",g(Ze,Je)).attr("d",ft+"Z")}function it(Te,Ue,Ze){return Te.append("path").attr("class","zoombox-corners").style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("transform",g(Ue,Ze)).attr("d","M0,0Z")}function yt(Te,Ue,Ze,Je,ft,wt){Te.attr("d",Je+"M"+Ze.l+","+Ze.t+"v"+Ze.h+"h"+Ze.w+"v-"+Ze.h+"h-"+Ze.w+"Z"),_e(Te,Ue,ft,wt)}function _e(Te,Ue,Ze,Je){Ze||(Te.transition().style("fill",Je>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Ue.transition().style("opacity",1).duration(200))}function Ee(Te){d.select(Te).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function de(Te){be&&Te.data&&Te._context.showTips&&(u.notifier(u._(Te,"Double-click to zoom back out"),"long"),be=!1)}function we(Te,Ue){return"M"+(Te.l-.5)+","+(Ue-me-.5)+"h-3v"+(2*me+1)+"h3ZM"+(Te.r+.5)+","+(Ue-me-.5)+"h3v"+(2*me+1)+"h-3Z"}function je(Te,Ue){return"M"+(Ue-me-.5)+","+(Te.t-.5)+"v-3h"+(2*me+1)+"v3ZM"+(Ue-me-.5)+","+(Te.b+.5)+"v3h"+(2*me+1)+"v-3Z"}function Ae(Te){var Ue=Math.floor(Math.min(Te.b-Te.t,Te.r-Te.l,me)/2);return"M"+(Te.l-3.5)+","+(Te.t-.5+Ue)+"h3v"+-Ue+"h"+Ue+"v-3h-"+(Ue+3)+"ZM"+(Te.r+3.5)+","+(Te.t-.5+Ue)+"h-3v"+-Ue+"h"+-Ue+"v-3h"+(Ue+3)+"ZM"+(Te.r+3.5)+","+(Te.b+.5-Ue)+"h-3v"+Ue+"h"+-Ue+"v3h"+(Ue+3)+"ZM"+(Te.l-3.5)+","+(Te.b+.5-Ue)+"h3v"+Ue+"h"+Ue+"v3h-"+(Ue+3)+"Z"}function $(Te,Ue,Ze,Je,ft){for(var wt=!1,Ct={},Kt={},$t,Wt,nt,pt,Ke=(ft||{}).xaHash,gt=(ft||{}).yaHash,Ft=0;Ft<Ue.length;Ft++){var Xt=Ue[Ft];for($t in Ze)if(Xt[$t]){for(nt in Xt)!(ft&&(Ke[nt]||gt[nt]))&&!(nt.charAt(0)==="x"?Ze:Je)[nt]&&(Ct[nt]=$t);for(Wt in Je)!(ft&&(Ke[Wt]||gt[Wt]))&&Xt[Wt]&&(wt=!0)}for(Wt in Je)if(Xt[Wt])for(pt in Xt)!(ft&&(Ke[pt]||gt[pt]))&&!(pt.charAt(0)==="x"?Ze:Je)[pt]&&(Kt[pt]=Wt)}wt&&(u.extendFlat(Ct,Kt),Kt={});var or={},sr=[];for(nt in Ct){var dr=J(Te,nt);sr.push(dr),or[dr._id]=dr}var wr={},xr=[];for(pt in Kt){var Pr=J(Te,pt);xr.push(Pr),wr[Pr._id]=Pr}return{xaHash:or,yaHash:wr,xaxes:sr,yaxes:xr,xLinks:Ct,yLinks:Kt,isSubplotConstrained:wt}}function oe(Te,Ue){if(!v)Te.onwheel!==void 0?Te.onwheel=Ue:Te.onmousewheel!==void 0?Te.onmousewheel=Ue:Te.isAddedWheelEvent||(Te.isAddedWheelEvent=!0,Te.addEventListener("wheel",Ue,{passive:!1}));else{var Ze=Te.onwheel!==void 0?"wheel":"mousewheel";Te._onwheel&&Te.removeEventListener(Ze,Te._onwheel),Te._onwheel=Ue,Te.addEventListener(Ze,Ue,{passive:!1})}}function ge(Te){var Ue=[];for(var Ze in Te)Ue.push(Te[Ze]);return Ue}fe.exports={makeDragBox:ve,makeDragger:Me,makeRectDragger:ke,makeZoombox:st,makeCorners:it,updateZoombox:yt,xyCorners:Ae,transitionZoombox:_e,removeZoombox:Ee,showDoubleClickNotifier:de,attachWheelEventHandler:oe}}}),Yu=n({"src/plots/cartesian/graph_interact.js"(ce){var fe=k(),d=Ms(),u=rs(),c=Ki(),m=Ul().makeDragBox,v=ui().DRAGGERSIZE;ce.initInteractions=function(g){var w=g._fullLayout;if(g._context.staticPlot){fe.select(g).selectAll(".drag").remove();return}if(!(!w._has("cartesian")&&!w._has("splom"))){var s=Object.keys(w._plots||{}).sort(function(b,z){if((w._plots[b].mainplot&&!0)===(w._plots[z].mainplot&&!0)){var X=b.split("y"),N=z.split("y");return X[0]===N[0]?Number(X[1]||1)-Number(N[1]||1):Number(X[0]||1)-Number(N[0]||1)}return w._plots[b].mainplot?1:-1});s.forEach(function(b){var z=w._plots[b],X=z.xaxis,N=z.yaxis;if(!z.mainplot){var O=m(g,z,X._offset,N._offset,X._length,N._length,"ns","ew");O.onmousemove=function(_){g._fullLayout._rehover=function(){g._fullLayout._hoversubplot===b&&g._fullLayout._plots[b]&&d.hover(g,_,b)},d.hover(g,_,b),g._fullLayout._lasthover=O,g._fullLayout._hoversubplot=b},O.onmouseout=function(_){g._dragging||(g._fullLayout._hoversubplot=null,u.unhover(g,_))},g._context.showAxisDragHandles&&(m(g,z,X._offset-v,N._offset-v,v,v,"n","w"),m(g,z,X._offset+X._length,N._offset-v,v,v,"n","e"),m(g,z,X._offset-v,N._offset+N._length,v,v,"s","w"),m(g,z,X._offset+X._length,N._offset+N._length,v,v,"s","e"))}if(g._context.showAxisDragHandles){if(b===X._mainSubplot){var F=X._mainLinePosition;X.side==="top"&&(F-=v),m(g,z,X._offset+X._length*.1,F,X._length*.8,v,"","ew"),m(g,z,X._offset,F,X._length*.1,v,"","w"),m(g,z,X._offset+X._length*.9,F,X._length*.1,v,"","e")}if(b===N._mainSubplot){var P=N._mainLinePosition;N.side!=="right"&&(P-=v),m(g,z,P,N._offset+N._length*.1,v,N._length*.8,"ns",""),m(g,z,P,N._offset+N._length*.9,v,N._length*.1,"s",""),m(g,z,P,N._offset,v,N._length*.1,"n","")}}});var j=w._hoverlayer.node();j.onmousemove=function(b){b.target=g._fullLayout._lasthover,d.hover(g,b,w._hoversubplot)},j.onclick=function(b){b.target=g._fullLayout._lasthover,d.click(g,b)},j.onmousedown=function(b){g._fullLayout._lasthover.onmousedown(b)},ce.updateFx(g)}},ce.updateFx=function(p){var g=p._fullLayout,w=g.dragmode==="pan"?"move":"crosshair";c(g._draggers,w)}}}),Pc=n({"src/plot_api/container_array_match.js"(ce,fe){var d=hr();fe.exports=function(c){for(var m=d.layoutArrayContainers,v=d.layoutArrayRegexes,p=c.split("[")[0],g,w,s=0;s<v.length;s++)if(w=c.match(v[s]),w&&w.index===0){g=w[0];break}if(g||(g=m[m.indexOf(p)]),!g)return!1;var j=c.substr(g.length);return j?(w=j.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),w?{array:g,index:Number(w[1]),property:w[3]||""}:!1):{array:g,index:"",property:""}}}}),Fc=n({"src/plot_api/manage_arrays.js"(ce){var fe=Z(),d=lt(),u=ze(),c=an().sorterAsc,m=hr();ce.containerArrayMatch=Pc();var v=ce.isAddVal=function(w){return w==="add"||fe(w)},p=ce.isRemoveVal=function(w){return w===null||w==="remove"};ce.applyContainerArrayChanges=function(w,s,j,b,z){var X=s.astr,N=m.getComponentMethod(X,"supplyLayoutDefaults"),O=m.getComponentMethod(X,"draw"),F=m.getComponentMethod(X,"drawOne"),P=b.replot||b.recalc||N===d||O===d,_=w.layout,R=w._fullLayout;if(j[""]){Object.keys(j).length>1&&u.warn("Full array edits are incompatible with other edits",X);var H=j[""][""];if(p(H))s.set(null);else if(Array.isArray(H))s.set(H);else return u.warn("Unrecognized full array edit value",X,H),!0;return P?!1:(N(_,R),O(w),!0)}var te=Object.keys(j).map(Number).sort(c),J=s.get(),ye=J||[],se=z(R,X).get(),he=[],pe=-1,Q=ye.length,ue,me,be,ve,Me,ke,le,De;for(ue=0;ue<te.length;ue++){if(be=te[ue],ve=j[be],Me=Object.keys(ve),ke=ve[""],le=v(ke),be<0||be>ye.length-(le?0:1)){u.warn("index out of range",X,be);continue}if(ke!==void 0)Me.length>1&&u.warn("Insertion & removal are incompatible with edits to the same index.",X,be),p(ke)?he.push(be):le?(ke==="add"&&(ke={}),ye.splice(be,0,ke),se&&se.splice(be,0,{})):u.warn("Unrecognized full object edit value",X,be,ke),pe===-1&&(pe=be);else for(me=0;me<Me.length;me++)De=X+"["+be+"].",z(ye[be],Me[me],De).set(ve[Me[me]])}for(ue=he.length-1;ue>=0;ue--)ye.splice(he[ue],1),se&&se.splice(he[ue],1);if(ye.length?J||s.set(ye):s.set(null),P)return!1;if(N(_,R),F!==d){var Oe;if(pe===-1)Oe=te;else{for(Q=Math.max(ye.length,Q),Oe=[],ue=0;ue<te.length&&(be=te[ue],!(be>=pe));ue++)Oe.push(be);for(ue=pe;ue<Q;ue++)Oe.push(ue)}for(ue=0;ue<Oe.length;ue++)F(w,Oe[ue])}else O(w);return!0}}}),jc=n({"src/plot_api/helpers.js"(ce){var fe=B();Za();var d=hr(),u=pa(),c=Di(),m=di(),v=Ve(),p=m.cleanId,g=m.getFromTrace,w=d.traceIs;ce.clearPromiseQueue=function(P){Array.isArray(P._promises)&&P._promises.length>0&&u.log("Clearing previous rejected promises from queue."),P._promises=[]},ce.cleanLayout=function(P){var _;P||(P={}),P.xaxis1&&(P.xaxis||(P.xaxis=P.xaxis1),delete P.xaxis1),P.yaxis1&&(P.yaxis||(P.yaxis=P.yaxis1),delete P.yaxis1),P.scene1&&(P.scene||(P.scene=P.scene1),delete P.scene1);var R=(c.subplotsRegistry.cartesian||{}).attrRegex;(c.subplotsRegistry.polar||{}).attrRegex,(c.subplotsRegistry.ternary||{}).attrRegex,(c.subplotsRegistry.gl3d||{}).attrRegex;var H=Object.keys(P);for(_=0;_<H.length;_++){var te=H[_];if(R&&R.test(te)){var J=P[te];J.anchor&&J.anchor!=="free"&&(J.anchor=p(J.anchor)),J.overlaying&&(J.overlaying=p(J.overlaying)),J.type||(J.isdate?J.type="date":J.islog?J.type="log":J.isdate===!1&&J.islog===!1&&(J.type="linear")),(J.autorange==="withzero"||J.autorange==="tozero")&&(J.autorange=!0,J.rangemode="tozero"),J.insiderange&&delete J.range,delete J.islog,delete J.isdate,delete J.categories,X(J,"domain")&&delete J.domain}}var ye=Array.isArray(P.annotations)?P.annotations.length:0;for(_=0;_<ye;_++){var se=P.annotations[_];u.isPlainObject(se)&&(s(se,"xref"),s(se,"yref"))}var he=Array.isArray(P.shapes)?P.shapes.length:0;for(_=0;_<he;_++){var pe=P.shapes[_];u.isPlainObject(pe)&&(s(pe,"xref"),s(pe,"yref"))}var Q=Array.isArray(P.images)?P.images.length:0;for(_=0;_<Q;_++){var ue=P.images[_];u.isPlainObject(ue)&&(s(ue,"xref"),s(ue,"yref"))}var me=P.legend;return me&&(me.x>3?(me.x=1.02,me.xanchor="left"):me.x<-2&&(me.x=-.02,me.xanchor="right"),me.y>3?(me.y=1.02,me.yanchor="bottom"):me.y<-2&&(me.y=-.02,me.yanchor="top")),P.dragmode==="rotate"&&(P.dragmode="orbit"),v.clean(P),P.template&&P.template.layout&&ce.cleanLayout(P.template.layout),P};function s(P,_){var R=P[_],H=_.charAt(0);R&&R!=="paper"&&(P[_]=p(R,H,!0))}ce.cleanData=function(P){for(var _=0;_<P.length;_++){var R=P[_],H;if(R.type==="histogramy"&&"xbins"in R&&!("ybins"in R)&&(R.ybins=R.xbins,delete R.xbins),R.type==="histogramy"&&ce.swapXYData(R),(R.type==="histogramx"||R.type==="histogramy")&&(R.type="histogram"),"scl"in R&&!("colorscale"in R)&&(R.colorscale=R.scl,delete R.scl),"reversescl"in R&&!("reversescale"in R)&&(R.reversescale=R.reversescl,delete R.reversescl),R.xaxis&&(R.xaxis=p(R.xaxis,"x")),R.yaxis&&(R.yaxis=p(R.yaxis,"y")),w(R,"gl3d")&&R.scene&&(R.scene=c.subplotsRegistry.gl3d.cleanId(R.scene)),!w(R,"pie-like")&&!w(R,"bar-like"))if(Array.isArray(R.textposition))for(H=0;H<R.textposition.length;H++)R.textposition[H]=z(R.textposition[H]);else R.textposition&&(R.textposition=z(R.textposition));var te=d.getModule(R);if(te&&te.colorbar){var J=te.colorbar.container,ye=J?R[J]:R;ye&&ye.colorscale&&(ye.colorscale==="YIGnBu"&&(ye.colorscale="YlGnBu"),ye.colorscale==="YIOrRd"&&(ye.colorscale="YlOrRd"))}if(R.type==="surface"&&u.isPlainObject(R.contours)){var se=["x","y","z"];for(H=0;H<se.length;H++){var he=R.contours[se[H]];u.isPlainObject(he)&&(he.highlightColor&&(he.highlightcolor=he.highlightColor,delete he.highlightColor),he.highlightWidth&&(he.highlightwidth=he.highlightWidth,delete he.highlightWidth))}}if(R.type==="candlestick"||R.type==="ohlc"){var pe=(R.increasing||{}).showlegend!==!1,Q=(R.decreasing||{}).showlegend!==!1,ue=j(R.increasing),me=j(R.decreasing);if(ue!==!1&&me!==!1){var be=b(ue,me,pe,Q);be&&(R.name=be)}else(ue||me)&&!R.name&&(R.name=ue||me)}X(R,"line")&&delete R.line,"marker"in R&&(X(R.marker,"line")&&delete R.marker.line,X(R,"marker")&&delete R.marker),v.clean(R),R.autobinx&&(delete R.autobinx,delete R.xbins),R.autobiny&&(delete R.autobiny,delete R.ybins)}};function j(P){if(!u.isPlainObject(P))return!1;var _=P.name;return delete P.name,delete P.showlegend,(typeof _=="string"||typeof _=="number")&&String(_)}function b(P,_,R,H){if(R&&!H)return P;if(H&&!R||!P.trim())return _;if(!_.trim())return P;var te=Math.min(P.length,_.length),J;for(J=0;J<te&&P.charAt(J)===_.charAt(J);J++);var ye=P.substr(0,J);return ye.trim()}function z(P){var _="middle",R="center";return typeof P=="string"&&(P.indexOf("top")!==-1?_="top":P.indexOf("bottom")!==-1&&(_="bottom"),P.indexOf("left")!==-1?R="left":P.indexOf("right")!==-1&&(R="right")),_+" "+R}function X(P,_){return _ in P&&typeof P[_]=="object"&&Object.keys(P[_]).length===0}ce.swapXYData=function(P){var _;if(u.swapAttrs(P,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(P.z)&&Array.isArray(P.z[0])&&(P.transpose?delete P.transpose:P.transpose=!0),P.error_x&&P.error_y){var R=P.error_y,H="copy_ystyle"in R?R.copy_ystyle:!(R.color||R.thickness||R.width);u.swapAttrs(P,["error_?.copy_ystyle"]),H&&u.swapAttrs(P,["error_?.color","error_?.thickness","error_?.width"])}if(typeof P.hoverinfo=="string"){var te=P.hoverinfo.split("+");for(_=0;_<te.length;_++)te[_]==="x"?te[_]="y":te[_]==="y"&&(te[_]="x");P.hoverinfo=te.join("+")}},ce.coerceTraceIndices=function(P,_){if(fe(_))return[_];if(!Array.isArray(_)||!_.length)return P.data.map(function(te,J){return J});if(Array.isArray(_)){for(var R=[],H=0;H<_.length;H++)u.isIndex(_[H],P.data.length)?R.push(_[H]):u.warn("trace index (",_[H],") is not a number or is out of bounds");return R}return _},ce.manageArrayContainers=function(P,_,R){var H=P.obj,te=P.parts,J=te.length,ye=te[J-1],se=fe(ye);if(se&&_===null){var he=te.slice(0,J-1).join("."),pe=u.nestedProperty(H,he).get();pe.splice(ye,1)}else se&&P.get()===void 0&&P.get()===void 0&&(R[P.astr]=null),P.set(_)};var N=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function O(P){var _=P.search(N);if(_>0)return P.substr(0,_)}ce.hasParent=function(P,_){for(var R=O(_);R;){if(R in P)return!0;R=O(R)}return!1};var F=["x","y","z"];ce.clearAxisTypes=function(P,_,R){for(var H=0;H<_.length;H++)for(var te=P._fullData[H],J=0;J<3;J++){var ye=g(P,te,F[J]);if(ye&&ye.type!=="log"){var se=ye._name,he=ye._id.substr(1);if(he.substr(0,5)==="scene"){if(R[he]!==void 0)continue;se=he+"."+se}var pe=se+".type";R[se]===void 0&&R[pe]===void 0&&u.nestedProperty(P.layout,pe).set(null)}}}}}),yu=n({"src/plot_api/plot_api.js"(ce){var fe=k(),d=B(),u=Fo(),c=pa(),m=c.nestedProperty,v=Ro(),p=Bi(),g=hr(),w=qs(),s=Di(),j=mi(),b=Ts(),z=yo(),X=ni(),N=Ve(),O=Yu().initInteractions,F=go(),P=lo().clearOutline,_=tt().dfltConfig,R=Fc(),H=jc(),te=mu(),J=wa(),ye=ui().AX_NAME_PATTERN,se=0,he=5;function pe(Le,ot,ct,ut){var Pt;if(Le=c.getGraphDiv(Le),v.init(Le),c.isPlainObject(ot)){var Ot=ot;ot=Ot.data,ct=Ot.layout,ut=Ot.config,Pt=Ot.frames}var qt=v.triggerHandler(Le,"plotly_beforeplot",[ot,ct,ut]);if(qt===!1)return Promise.reject();!ot&&!ct&&!c.isPlotDiv(Le)&&c.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Le);function ir(){if(Pt)return ce.addFrames(Le,Pt)}ve(Le,ut),ct||(ct={}),fe.select(Le).classed("js-plotly-plot",!0),X.makeTester(),Array.isArray(Le._promises)||(Le._promises=[]);var _r=(Le.data||[]).length===0&&Array.isArray(ot);Array.isArray(ot)&&(H.cleanData(ot),_r?Le.data=ot:Le.data.push.apply(Le.data,ot),Le.empty=!1),(!Le.layout||_r)&&(Le.layout=H.cleanLayout(ct)),s.supplyDefaults(Le);var Bt=Le._fullLayout,gr=Bt._has("cartesian");Bt._replotting=!0,(_r||Bt._shouldCreateBgLayer)&&(xt(Le),Bt._shouldCreateBgLayer&&delete Bt._shouldCreateBgLayer),X.initGradients(Le),X.initPatterns(Le),_r&&j.saveShowSpikeInitial(Le);var Ar=!Le.calcdata||Le.calcdata.length!==(Le._fullData||[]).length;Ar&&s.doCalcdata(Le);for(var Er=0;Er<Le.calcdata.length;Er++)Le.calcdata[Er][0].trace=Le._fullData[Er];Le._context.responsive?Le._responsiveChartHandler||(Le._responsiveChartHandler=function(){c.isHidden(Le)||s.resize(Le)},window.addEventListener("resize",Le._responsiveChartHandler)):c.clearResponsive(Le);var ba=c.extendFlat({},Bt._size),Ga=0;function Xa(){for(var La=Bt._basePlotModules,la=0;la<La.length;la++)La[la].drawFramework&&La[la].drawFramework(Le);!Bt._glcanvas&&Bt._has("gl")&&(Bt._glcanvas=Bt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(qa){return qa.key}),Bt._glcanvas.enter().append("canvas").attr("class",function(qa){return"gl-canvas gl-canvas-"+qa.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ba=Le._context.plotGlPixelRatio;if(Bt._glcanvas){Bt._glcanvas.attr("width",Bt.width*Ba).attr("height",Bt.height*Ba).style("width",Bt.width+"px").style("height",Bt.height+"px");var un=Bt._glcanvas.data()[0].regl;if(un&&(Math.floor(Bt.width*Ba)!==un._gl.drawingBufferWidth||Math.floor(Bt.height*Ba)!==un._gl.drawingBufferHeight)){var pn="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Ga)c.error(pn);else return c.log(pn+" Clearing graph and plotting again."),s.cleanPlot([],{},Le._fullData,Bt),s.supplyDefaults(Le),Bt=Le._fullLayout,s.doCalcdata(Le),Ga++,Xa()}}return Bt.modebar.orientation==="h"?Bt._modebardiv.style("height",null).style("width","100%"):Bt._modebardiv.style("width",null).style("height",Bt.height+"px"),s.previousPromises(Le)}function Aa(){if(s.clearAutoMarginIds(Le),te.drawMarginPushers(Le),j.allowAutoMargin(Le),Le._fullLayout.title.text&&Le._fullLayout.title.automargin&&s.allowAutoMargin(Le,"title.automargin"),Bt._has("pie"))for(var La=Le._fullData,la=0;la<La.length;la++){var Ba=La[la];Ba.type==="pie"&&Ba.automargin&&s.allowAutoMargin(Le,"pie."+Ba.uid+".automargin")}return s.doAutoMargin(Le),s.previousPromises(Le)}function Oa(){if(s.didMarginChange(ba,Bt._size))return c.syncOrAsync([Aa,te.layoutStyles],Le)}function va(){if(!Ar){ma();return}return c.syncOrAsync([g.getComponentMethod("shapes","calcAutorange"),g.getComponentMethod("annotations","calcAutorange"),ma],Le)}function ma(){Le._transitioning||(te.doAutoRangeAndConstraints(Le),_r&&j.saveRangeInitial(Le),g.getComponentMethod("rangeslider","calcAutorange")(Le))}function Va(){return j.draw(Le,_r?"":"redraw")}var ja=[s.previousPromises,ir,Xa,Aa,Oa];gr&&ja.push(va),ja.push(te.layoutStyles),gr&&ja.push(Va,function(la){var Ba=la._fullLayout._insideTickLabelsUpdaterange;if(Ba)return la._fullLayout._insideTickLabelsUpdaterange=void 0,Ue(la,Ba).then(function(){j.saveRangeInitial(la,!0)})}),ja.push(te.drawData,te.finalDraw,O,s.addLinks,s.rehover,s.redrag,s.reselect,s.doAutoMargin,s.previousPromises);var $a=c.syncOrAsync(ja,Le);return(!$a||!$a.then)&&($a=Promise.resolve()),$a.then(function(){return Q(Le),Le})}function Q(Le){var ot=Le._fullLayout;ot._redrawFromAutoMarginCount?ot._redrawFromAutoMarginCount--:Le.emit("plotly_afterplot")}function ue(Le){return c.extendFlat(_,Le)}function me(Le,ot){try{Le._fullLayout._paper.style("background",ot)}catch(ct){c.error(ct)}}function be(Le,ot){var ct=N.combine(ot,"white");me(Le,ct)}function ve(Le,ot){if(!Le._context){Le._context=c.extendDeep({},_);var ct=fe.select("base");Le._context._baseUrl=ct.size()&&ct.attr("href")?window.location.href.split("#")[0]:""}var ut=Le._context,Pt,Ot,qt;if(ot){for(Ot=Object.keys(ot),Pt=0;Pt<Ot.length;Pt++)qt=Ot[Pt],!(qt==="editable"||qt==="edits")&&qt in ut&&(qt==="setBackground"&&ot[qt]==="opaque"?ut[qt]=be:ut[qt]=ot[qt]);var ir=ot.editable;if(ir!==void 0)for(ut.editable=ir,Ot=Object.keys(ut.edits),Pt=0;Pt<Ot.length;Pt++)ut.edits[Ot[Pt]]=ir;if(ot.edits)for(Ot=Object.keys(ot.edits),Pt=0;Pt<Ot.length;Pt++)qt=Ot[Pt],qt in ut.edits&&(ut.edits[qt]=ot.edits[qt]);ut._exportedPlot=ot._exportedPlot}ut.staticPlot&&(ut.editable=!1,ut.edits={},ut.autosizable=!1,ut.scrollZoom=!1,ut.doubleClick=!1,ut.showTips=!1,ut.showLink=!1,ut.displayModeBar=!1),ut.displayModeBar==="hover"&&!u&&(ut.displayModeBar=!0),(ut.setBackground==="transparent"||typeof ut.setBackground!="function")&&(ut.setBackground=me),ut._hasZeroHeight=ut._hasZeroHeight||Le.clientHeight===0,ut._hasZeroWidth=ut._hasZeroWidth||Le.clientWidth===0;var _r=ut.scrollZoom,Bt=ut._scrollZoom={};if(_r===!0)Bt.cartesian=1,Bt.gl3d=1,Bt.geo=1,Bt.mapbox=1,Bt.map=1;else if(typeof _r=="string"){var gr=_r.split("+");for(Pt=0;Pt<gr.length;Pt++)Bt[gr[Pt]]=1}else _r!==!1&&(Bt.gl3d=1,Bt.geo=1,Bt.mapbox=1,Bt.map=1)}function Me(Le){if(Le=c.getGraphDiv(Le),!c.isPlotDiv(Le))throw new Error("This element is not a Plotly plot: "+Le);return H.cleanData(Le.data),H.cleanLayout(Le.layout),Le.calcdata=void 0,ce._doPlot(Le).then(function(){return Le.emit("plotly_redraw"),Le})}function ke(Le,ot,ct,ut){return Le=c.getGraphDiv(Le),s.cleanPlot([],{},Le._fullData||[],Le._fullLayout||{}),s.purge(Le),ce._doPlot(Le,ot,ct,ut)}function le(Le,ot){var ct=ot+1,ut=[],Pt,Ot;for(Pt=0;Pt<Le.length;Pt++)Ot=Le[Pt],Ot<0?ut.push(ct+Ot):ut.push(Ot);return ut}function De(Le,ot,ct){var ut,Pt;for(ut=0;ut<ot.length;ut++){if(Pt=ot[ut],Pt!==parseInt(Pt,10))throw new Error("all values in "+ct+" must be integers");if(Pt>=Le.data.length||Pt<-Le.data.length)throw new Error(ct+" must be valid indices for gd.data.");if(ot.indexOf(Pt,ut+1)>-1||Pt>=0&&ot.indexOf(-Le.data.length+Pt)>-1||Pt<0&&ot.indexOf(Le.data.length+Pt)>-1)throw new Error("each index in "+ct+" must be unique.")}}function Oe(Le,ot,ct){if(!Array.isArray(Le.data))throw new Error("gd.data must be an array.");if(typeof ot>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(ot)||(ot=[ot]),De(Le,ot,"currentIndices"),typeof ct<"u"&&!Array.isArray(ct)&&(ct=[ct]),typeof ct<"u"&&De(Le,ct,"newIndices"),typeof ct<"u"&&ot.length!==ct.length)throw new Error("current and new indices must be of equal length.")}function He(Le,ot,ct){var ut,Pt;if(!Array.isArray(Le.data))throw new Error("gd.data must be an array.");if(typeof ot>"u")throw new Error("traces must be defined.");for(Array.isArray(ot)||(ot=[ot]),ut=0;ut<ot.length;ut++)if(Pt=ot[ut],typeof Pt!="object"||Array.isArray(Pt)||Pt===null)throw new Error("all values in traces array must be non-array objects");if(typeof ct<"u"&&!Array.isArray(ct)&&(ct=[ct]),typeof ct<"u"&&ct.length!==ot.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Be(Le,ot,ct,ut){var Pt=c.isPlainObject(ut);if(!Array.isArray(Le.data))throw new Error("gd.data must be an array");if(!c.isPlainObject(ot))throw new Error("update must be a key:value object");if(typeof ct>"u")throw new Error("indices must be an integer or array of integers");De(Le,ct,"indices");for(var Ot in ot){if(!Array.isArray(ot[Ot])||ot[Ot].length!==ct.length)throw new Error("attribute "+Ot+" must be an array of length equal to indices array length");if(Pt&&(!(Ot in ut)||!Array.isArray(ut[Ot])||ut[Ot].length!==ot[Ot].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 correspondence with the keys and number of traces in the update object")}}function Ye(Le,ot,ct,ut){var Pt=c.isPlainObject(ut),Ot=[],qt,ir,_r,Bt,gr;Array.isArray(ct)||(ct=[ct]),ct=le(ct,Le.data.length-1);for(var Ar in ot)for(var Er=0;Er<ct.length;Er++){if(qt=Le.data[ct[Er]],_r=m(qt,Ar),ir=_r.get(),Bt=ot[Ar][Er],!c.isArrayOrTypedArray(Bt))throw new Error("attribute: "+Ar+" index: "+Er+" must be an array");if(!c.isArrayOrTypedArray(ir))throw new Error("cannot extend missing or non-array attribute: "+Ar);if(ir.constructor!==Bt.constructor)throw new Error("cannot extend array with an array of a different type: "+Ar);gr=Pt?ut[Ar][Er]:ut,d(gr)||(gr=-1),Ot.push({prop:_r,target:ir,insert:Bt,maxp:Math.floor(gr)})}return Ot}function st(Le,ot,ct,ut,Pt){Be(Le,ot,ct,ut);for(var Ot=Ye(Le,ot,ct,ut),qt={},ir={},_r=0;_r<Ot.length;_r++){var Bt=Ot[_r].prop,gr=Ot[_r].maxp,Ar=Pt(Ot[_r].target,Ot[_r].insert,gr);Bt.set(Ar[0]),Array.isArray(qt[Bt.astr])||(qt[Bt.astr]=[]),qt[Bt.astr].push(Ar[1]),Array.isArray(ir[Bt.astr])||(ir[Bt.astr]=[]),ir[Bt.astr].push(Ot[_r].target.length)}return{update:qt,maxPoints:ir}}function it(Le,ot){var ct=new Le.constructor(Le.length+ot.length);return ct.set(Le),ct.set(ot,Le.length),ct}function yt(Le,ot,ct,ut){Le=c.getGraphDiv(Le);function Pt(_r,Bt,gr){var Ar,Er;if(c.isTypedArray(_r))if(gr<0){var ba=new _r.constructor(0),Ga=it(_r,Bt);gr<0?(Ar=Ga,Er=ba):(Ar=ba,Er=Ga)}else if(Ar=new _r.constructor(gr),Er=new _r.constructor(_r.length+Bt.length-gr),gr===Bt.length)Ar.set(Bt),Er.set(_r);else if(gr<Bt.length){var Xa=Bt.length-gr;Ar.set(Bt.subarray(Xa)),Er.set(_r),Er.set(Bt.subarray(0,Xa),_r.length)}else{var Aa=gr-Bt.length,Oa=_r.length-Aa;Ar.set(_r.subarray(Oa)),Ar.set(Bt,Aa),Er.set(_r.subarray(0,Oa))}else Ar=_r.concat(Bt),Er=gr>=0&&gr<Ar.length?Ar.splice(0,Ar.length-gr):[];return[Ar,Er]}var Ot=st(Le,ot,ct,ut,Pt),qt=ce.redraw(Le),ir=[Le,Ot.update,ct,Ot.maxPoints];return p.add(Le,ce.prependTraces,ir,yt,arguments),qt}function _e(Le,ot,ct,ut){Le=c.getGraphDiv(Le);function Pt(_r,Bt,gr){var Ar,Er;if(c.isTypedArray(_r))if(gr<=0){var ba=new _r.constructor(0),Ga=it(Bt,_r);gr<0?(Ar=Ga,Er=ba):(Ar=ba,Er=Ga)}else if(Ar=new _r.constructor(gr),Er=new _r.constructor(_r.length+Bt.length-gr),gr===Bt.length)Ar.set(Bt),Er.set(_r);else if(gr<Bt.length){var Xa=Bt.length-gr;Ar.set(Bt.subarray(0,Xa)),Er.set(Bt.subarray(Xa)),Er.set(_r,Xa)}else{var Aa=gr-Bt.length;Ar.set(Bt),Ar.set(_r.subarray(0,Aa),Bt.length),Er.set(_r.subarray(Aa))}else Ar=Bt.concat(_r),Er=gr>=0&&gr<Ar.length?Ar.splice(gr,Ar.length):[];return[Ar,Er]}var Ot=st(Le,ot,ct,ut,Pt),qt=ce.redraw(Le),ir=[Le,Ot.update,ct,Ot.maxPoints];return p.add(Le,ce.extendTraces,ir,_e,arguments),qt}function Ee(Le,ot,ct){Le=c.getGraphDiv(Le);var ut=[],Pt=ce.deleteTraces,Ot=Ee,qt=[Le,ut],ir=[Le,ot],_r,Bt;for(He(Le,ot,ct),Array.isArray(ot)||(ot=[ot]),ot=ot.map(function(gr){return c.extendFlat({},gr)}),H.cleanData(ot),_r=0;_r<ot.length;_r++)Le.data.push(ot[_r]);for(_r=0;_r<ot.length;_r++)ut.push(-ot.length+_r);if(typeof ct>"u")return Bt=ce.redraw(Le),p.add(Le,Pt,qt,Ot,ir),Bt;Array.isArray(ct)||(ct=[ct]);try{Oe(Le,ut,ct)}catch(gr){throw Le.data.splice(Le.data.length-ot.length,ot.length),gr}return p.startSequence(Le),p.add(Le,Pt,qt,Ot,ir),Bt=ce.moveTraces(Le,ut,ct),p.stopSequence(Le),Bt}function de(Le,ot){Le=c.getGraphDiv(Le);var ct=[],ut=ce.addTraces,Pt=de,Ot=[Le,ct,ot],qt=[Le,ot],ir,_r;if(typeof ot>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(ot)||(ot=[ot]),De(Le,ot,"indices"),ot=le(ot,Le.data.length-1),ot.sort(c.sorterDes),ir=0;ir<ot.length;ir+=1)_r=Le.data.splice(ot[ir],1)[0],ct.push(_r);var Bt=ce.redraw(Le);return p.add(Le,ut,Ot,Pt,qt),Bt}function we(Le,ot,ct){Le=c.getGraphDiv(Le);var ut=[],Pt=[],Ot=we,qt=we,ir=[Le,ct,ot],_r=[Le,ot,ct],Bt;if(Oe(Le,ot,ct),ot=Array.isArray(ot)?ot:[ot],typeof ct>"u")for(ct=[],Bt=0;Bt<ot.length;Bt++)ct.push(-ot.length+Bt);for(ct=Array.isArray(ct)?ct:[ct],ot=le(ot,Le.data.length-1),ct=le(ct,Le.data.length-1),Bt=0;Bt<Le.data.length;Bt++)ot.indexOf(Bt)===-1&&ut.push(Le.data[Bt]);for(Bt=0;Bt<ot.length;Bt++)Pt.push({newIndex:ct[Bt],trace:Le.data[ot[Bt]]});for(Pt.sort(function(Ar,Er){return Ar.newIndex-Er.newIndex}),Bt=0;Bt<Pt.length;Bt+=1)ut.splice(Pt[Bt].newIndex,0,Pt[Bt].trace);Le.data=ut;var gr=ce.redraw(Le);return p.add(Le,Ot,ir,qt,_r),gr}function je(Le,ot,ct,ut){Le=c.getGraphDiv(Le),H.clearPromiseQueue(Le);var Pt={};if(typeof ot=="string")Pt[ot]=ct;else if(c.isPlainObject(ot))Pt=c.extendFlat({},ot),ut===void 0&&(ut=ct);else return c.warn("Restyle fail.",ot,ct,ut),Promise.reject();Object.keys(Pt).length&&(Le.changed=!0);var Ot=H.coerceTraceIndices(Le,ut),qt=Te(Le,Pt,Ot),ir=qt.flags;ir.calc&&(Le.calcdata=void 0),ir.clearAxisTypes&&H.clearAxisTypes(Le,Ot,{});var _r=[];ir.fullReplot?_r.push(ce._doPlot):(_r.push(s.previousPromises),s.supplyDefaults(Le),ir.markerSize&&(s.doCalcdata(Le),Je(_r)),ir.style&&_r.push(te.doTraceStyle),ir.colorbars&&_r.push(te.doColorBars),_r.push(Q)),_r.push(s.rehover,s.redrag,s.reselect),p.add(Le,je,[Le,qt.undoit,qt.traces],je,[Le,qt.redoit,qt.traces]);var Bt=c.syncOrAsync(_r,Le);return(!Bt||!Bt.then)&&(Bt=Promise.resolve()),Bt.then(function(){return Le.emit("plotly_restyle",qt.eventData),Le})}function Ae(Le){return Le===void 0?null:Le}function $(Le,ot){return ot?function(ct,ut,Pt){var Ot=m(ct,ut),qt=Ot.set;return Ot.set=function(ir){var _r=(Pt||"")+ut;oe(_r,Ot.get(),ir,Le),qt(ir)},Ot}:m}function oe(Le,ot,ct,ut){if(Array.isArray(ot)||Array.isArray(ct))for(var Pt=Array.isArray(ot)?ot:[],Ot=Array.isArray(ct)?ct:[],qt=Math.max(Pt.length,Ot.length),ir=0;ir<qt;ir++)oe(Le+"["+ir+"]",Pt[ir],Ot[ir],ut);else if(c.isPlainObject(ot)||c.isPlainObject(ct)){var _r=c.isPlainObject(ot)?ot:{},Bt=c.isPlainObject(ct)?ct:{},gr=c.extendFlat({},_r,Bt);for(var Ar in gr)oe(Le+"."+Ar,_r[Ar],Bt[Ar],ut)}else ut[Le]===void 0&&(ut[Le]=Ae(ot))}function ge(Le,ot,ct){for(var ut in ct){var Pt=m(Le,ut);oe(ut,Pt.get(),ct[ut],ot)}}function Te(Le,ot,ct){var ut=Le._fullLayout,Pt=Le._fullData,Ot=Le.data,qt=ut._guiEditing,ir=$(ut._preGUI,qt),_r=c.extendDeepAll({},ot),Bt,gr=J.traceFlags(),Ar={},Er={},ba;function Ga(){return ct.map(function(){})}function Xa(ra){var Ca=j.id2name(ra);ba.indexOf(Ca)===-1&&ba.push(Ca)}function Aa(ra){return"LAYOUT"+ra+".autorange"}function Oa(ra){return"LAYOUT"+ra+".range"}function va(ra){for(var Ca=ra;Ca<Pt.length;Ca++)if(Pt[Ca]._input===Ot[ra])return Pt[Ca]}function ma(ra,Ca,Ma){if(Array.isArray(ra)){ra.forEach(function(Ka){ma(Ka,Ca,Ma)});return}if(!(ra in ot||H.hasParent(ot,ra))){var za;if(ra.substr(0,6)==="LAYOUT")za=ir(Le.layout,ra.replace("LAYOUT",""));else{var Fa=ct[Ma],Da=ut._tracePreGUI[va(Fa)._fullInput.uid];za=$(Da,qt)(Ot[Fa],ra)}ra in Er||(Er[ra]=Ga()),Er[ra][Ma]===void 0&&(Er[ra][Ma]=Ae(za.get())),Ca!==void 0&&za.set(Ca)}}function Va(ra){return function(Ca){return Pt[Ca][ra]}}function ja(ra){return function(Ca,Ma){return Ca===!1?Pt[ct[Ma]][ra]:null}}for(var $a in ot){if(H.hasParent(ot,$a))throw new Error("cannot set "+$a+" and a parent attribute simultaneously");var La=ot[$a],la,Ba,un,pn,qa,nn;if(($a==="autobinx"||$a==="autobiny")&&($a=$a.charAt($a.length-1)+"bins",Array.isArray(La)?La=La.map(ja($a)):La===!1?La=ct.map(Va($a)):La=null),Ar[$a]=La,$a.substr(0,6)==="LAYOUT"){un=ir(Le.layout,$a.replace("LAYOUT","")),Er[$a]=[Ae(un.get())],un.set(Array.isArray(La)?La[0]:La),gr.calc=!0;continue}for(Er[$a]=Ga(),Bt=0;Bt<ct.length;Bt++){la=Ot[ct[Bt]],Ba=va(ct[Bt]);var cn=ut._tracePreGUI[Ba._fullInput.uid];if(un=$(cn,qt)(la,$a),pn=un.get(),qa=Array.isArray(La)?La[Bt%La.length]:La,qa!==void 0){var Cn=un.parts[un.parts.length-1],Ja=$a.substr(0,$a.length-Cn.length-1),xn=Ja?Ja+".":"",We=Ja?m(Ba,Ja).get():Ba;if(nn=w.getTraceValObject(Ba,un.parts),nn&&nn.impliedEdits&&qa!==null)for(var Re in nn.impliedEdits)ma(c.relativeAttr($a,Re),nn.impliedEdits[Re],Bt);else if((Cn==="thicknessmode"||Cn==="lenmode")&&pn!==qa&&(qa==="fraction"||qa==="pixels")&&We){var Zt=ut._size,Ht=We.orient,Rt=Ht==="top"||Ht==="bottom";if(Cn==="thicknessmode"){var Dt=Rt?Zt.h:Zt.w;ma(xn+"thickness",We.thickness*(qa==="fraction"?1/Dt:Dt),Bt)}else{var Ut=Rt?Zt.w:Zt.h;ma(xn+"len",We.len*(qa==="fraction"?1/Ut:Ut),Bt)}}else if($a==="type"&&(qa==="pie"!=(pn==="pie")||qa==="funnelarea"!=(pn==="funnelarea"))){var pr="x",jt="y";(qa==="bar"||pn==="bar")&&la.orientation==="h"&&(pr="y",jt="x"),c.swapAttrs(la,["?","?src"],"labels",pr),c.swapAttrs(la,["d?","?0"],"label",pr),c.swapAttrs(la,["?","?src"],"values",jt),pn==="pie"||pn==="funnelarea"?(m(la,"marker.color").set(m(la,"marker.colors").get()),ut._pielayer.selectAll("g.trace").remove()):g.traceIs(la,"cartesian")&&m(la,"marker.colors").set(m(la,"marker.color").get())}Er[$a][Bt]=Ae(pn);var Jt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Jt.indexOf($a)!==-1){if($a==="orientation"){un.set(qa);var cr=la.x&&!la.y?"h":"v";if((un.get()||cr)===Ba.orientation)continue}else $a==="orientationaxes"&&(la.orientation={v:"h",h:"v"}[Ba.orientation]);H.swapXYData(la),gr.calc=gr.clearAxisTypes=!0}else s.dataArrayContainers.indexOf(un.parts[0])!==-1?(H.manageArrayContainers(un,qa,Er),gr.calc=!0):(nn?nn.arrayOk&&!g.traceIs(Ba,"regl")&&(c.isArrayOrTypedArray(qa)||c.isArrayOrTypedArray(pn))?gr.calc=!0:J.update(gr,nn):gr.calc=!0,un.set(qa))}}if(["swapxyaxes","orientationaxes"].indexOf($a)!==-1&&j.swap(Le,ct),$a==="orientationaxes"){var rr=m(Le.layout,"hovermode"),Or=rr.get();Or==="x"?rr.set("y"):Or==="y"?rr.set("x"):Or==="x unified"?rr.set("y unified"):Or==="y unified"&&rr.set("x unified")}if(["orientation","type"].indexOf($a)!==-1){for(ba=[],Bt=0;Bt<ct.length;Bt++){var Br=Ot[ct[Bt]];g.traceIs(Br,"cartesian")&&(Xa(Br.xaxis||"x"),Xa(Br.yaxis||"y"))}ma(ba.map(Aa),!0,0),ma(ba.map(Oa),[0,1],0)}}return(gr.calc||gr.plot)&&(gr.fullReplot=!0),{flags:gr,undoit:Er,redoit:Ar,traces:ct,eventData:c.extendDeepNoArrays([],[_r,ct])}}function Ue(Le,ot,ct){Le=c.getGraphDiv(Le),H.clearPromiseQueue(Le);var ut={};if(typeof ot=="string")ut[ot]=ct;else if(c.isPlainObject(ot))ut=c.extendFlat({},ot);else return c.warn("Relayout fail.",ot,ct),Promise.reject();Object.keys(ut).length&&(Le.changed=!0);var Pt=Kt(Le,ut),Ot=Pt.flags;Ot.calc&&(Le.calcdata=void 0);var qt=[s.previousPromises];Ot.layoutReplot?qt.push(te.layoutReplot):Object.keys(ut).length&&(Ze(Le,Ot,Pt)||s.supplyDefaults(Le),Ot.legend&&qt.push(te.doLegend),Ot.layoutstyle&&qt.push(te.layoutStyles),Ot.axrange&&Je(qt,Pt.rangesAltered),Ot.ticks&&qt.push(te.doTicksRelayout),Ot.modebar&&qt.push(te.doModeBar),Ot.camera&&qt.push(te.doCamera),Ot.colorbars&&qt.push(te.doColorBars),qt.push(Q)),qt.push(s.rehover,s.redrag,s.reselect),p.add(Le,Ue,[Le,Pt.undoit],Ue,[Le,Pt.redoit]);var ir=c.syncOrAsync(qt,Le);return(!ir||!ir.then)&&(ir=Promise.resolve(Le)),ir.then(function(){return Le.emit("plotly_relayout",Pt.eventData),Le})}function Ze(Le,ot,ct){var ut=Le._fullLayout;if(!ot.axrange)return!1;for(var Pt in ot)if(Pt!=="axrange"&&ot[Pt])return!1;var Ot,qt,ir=function(ba,Ga){return c.coerce(Ot,qt,z,ba,Ga)},_r={};for(var Bt in ct.rangesAltered){var gr=j.id2name(Bt);if(Ot=Le.layout[gr],qt=ut[gr],b(Ot,qt,ir,_r),qt._matchGroup){for(var Ar in qt._matchGroup)if(Ar!==Bt){var Er=ut[j.id2name(Ar)];Er.autorange=qt.autorange,Er.range=qt.range.slice(),Er._input.range=qt.range.slice()}}}return!0}function Je(Le,ot){var ct=ot?function(ut){var Pt=[],Ot=!0;for(var qt in ot){var ir=j.getFromId(ut,qt);if(Pt.push(qt),(ir.ticklabelposition||"").indexOf("inside")!==-1&&ir._anchorAxis&&Pt.push(ir._anchorAxis._id),ir._matchGroup)for(var _r in ir._matchGroup)ot[_r]||Pt.push(_r)}return j.draw(ut,Pt,{skipTitle:Ot})}:function(ut){return j.draw(ut,"redraw")};Le.push(P,te.doAutoRangeAndConstraints,ct,te.drawData,te.finalDraw)}var ft=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,wt=/^[xyz]axis[0-9]*\.autorange$/,Ct=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Kt(Le,ot){var ct=Le.layout,ut=Le._fullLayout,Pt=ut._guiEditing,Ot=$(ut._preGUI,Pt),qt=Object.keys(ot),ir=j.list(Le),_r=c.extendDeepAll({},ot),Bt={},gr,Ar,Er;for(qt=Object.keys(ot),Ar=0;Ar<qt.length;Ar++)if(qt[Ar].indexOf("allaxes")===0){for(Er=0;Er<ir.length;Er++){var ba=ir[Er]._id.substr(1),Ga=ba.indexOf("scene")!==-1?ba+".":"",Xa=qt[Ar].replace("allaxes",Ga+ir[Er]._name);ot[Xa]||(ot[Xa]=ot[qt[Ar]])}delete ot[qt[Ar]]}var Aa=J.layoutFlags(),Oa={},va={};function ma(Da,Ka){if(Array.isArray(Da)){Da.forEach(function(Sn){ma(Sn,Ka)});return}if(!(Da in ot||H.hasParent(ot,Da))){var on=Ot(ct,Da);Da in va||(va[Da]=Ae(on.get())),Ka!==void 0&&on.set(Ka)}}var Va={},ja;function $a(Da){var Ka=j.name2id(Da.split(".")[0]);return Va[Ka]=1,Ka}for(var La in ot){if(H.hasParent(ot,La))throw new Error("cannot set "+La+" and a parent attribute simultaneously");for(var la=Ot(ct,La),Ba=ot[La],un=la.parts.length,pn=un-1;pn>0&&typeof la.parts[pn]!="string";)pn--;var qa=la.parts[pn],nn=la.parts[pn-1]+"."+qa,cn=la.parts.slice(0,pn).join("."),Cn=m(Le.layout,cn).get(),Ja=m(ut,cn).get(),xn=la.get();if(Ba!==void 0){Oa[La]=Ba,va[La]=qa==="reverse"?Ba:Ae(xn);var We=w.getLayoutValObject(ut,la.parts);if(We&&We.impliedEdits&&Ba!==null)for(var Re in We.impliedEdits)ma(c.relativeAttr(La,Re),We.impliedEdits[Re]);if(["width","height"].indexOf(La)!==-1)if(Ba){ma("autosize",null);var Zt=La==="height"?"width":"height";ma(Zt,ut[Zt])}else ut[La]=Le._initialAutoSize[La];else if(La==="autosize")ma("width",Ba?null:ut.width),ma("height",Ba?null:ut.height);else if(nn.match(ft))$a(nn),m(ut,cn+"._inputRange").set(null);else if(nn.match(wt)){$a(nn),m(ut,cn+"._inputRange").set(null);var Ht=m(ut,cn).get();Ht._inputDomain&&(Ht._input.domain=Ht._inputDomain.slice())}else nn.match(Ct)&&m(ut,cn+"._inputDomain").set(null);if(qa==="type"){ja=Cn;var Rt=Ja.type==="linear"&&Ba==="log",Dt=Ja.type==="log"&&Ba==="linear";if(Rt||Dt){if(!ja||!ja.range)ma(cn+".autorange",!0);else if(Ja.autorange)Rt&&(ja.range=ja.range[1]>ja.range[0]?[1,2]:[2,1]);else{var Ut=ja.range[0],pr=ja.range[1];Rt?(Ut<=0&&pr<=0&&ma(cn+".autorange",!0),Ut<=0?Ut=pr/1e6:pr<=0&&(pr=Ut/1e6),ma(cn+".range[0]",Math.log(Ut)/Math.LN10),ma(cn+".range[1]",Math.log(pr)/Math.LN10)):(ma(cn+".range[0]",Math.pow(10,Ut)),ma(cn+".range[1]",Math.pow(10,pr)))}Array.isArray(ut._subplots.polar)&&ut._subplots.polar.length&&ut[la.parts[0]]&&la.parts[1]==="radialaxis"&&delete ut[la.parts[0]]._subplot.viewInitial["radialaxis.range"],g.getComponentMethod("annotations","convertCoords")(Le,Ja,Ba,ma),g.getComponentMethod("images","convertCoords")(Le,Ja,Ba,ma)}else ma(cn+".autorange",!0),ma(cn+".range",null);m(ut,cn+"._inputRange").set(null)}else if(qa.match(ye)){var jt=m(ut,La).get(),Jt=(Ba||{}).type;(!Jt||Jt==="-")&&(Jt="linear"),g.getComponentMethod("annotations","convertCoords")(Le,jt,Jt,ma),g.getComponentMethod("images","convertCoords")(Le,jt,Jt,ma)}var cr=R.containerArrayMatch(La);if(cr){gr=cr.array,Ar=cr.index;var rr=cr.property,Or=We||{editType:"calc"};Ar!==""&&rr===""&&(R.isAddVal(Ba)?va[La]=null:R.isRemoveVal(Ba)?va[La]=(m(ct,gr).get()||[])[Ar]:c.warn("unrecognized full object value",ot)),J.update(Aa,Or),Bt[gr]||(Bt[gr]={});var Br=Bt[gr][Ar];Br||(Br=Bt[gr][Ar]={}),Br[rr]=Ba,delete ot[La]}else qa==="reverse"?(Cn.range?Cn.range.reverse():(ma(cn+".autorange",!0),Cn.range=[1,0]),Ja.autorange?Aa.calc=!0:Aa.plot=!0):(La==="dragmode"&&(Ba===!1&&xn!==!1||Ba!==!1&&xn===!1)||ut._has("scatter-like")&&ut._has("regl")&&La==="dragmode"&&(Ba==="lasso"||Ba==="select")&&!(xn==="lasso"||xn==="select")?Aa.plot=!0:We?J.update(Aa,We):Aa.calc=!0,la.set(Ba))}}for(gr in Bt){var ra=R.applyContainerArrayChanges(Le,Ot(ct,gr),Bt[gr],Aa,Ot);ra||(Aa.plot=!0)}for(var Ca in Va){ja=j.getFromId(Le,Ca);var Ma=ja&&ja._constraintGroup;if(Ma){Aa.calc=!0;for(var za in Ma)Va[za]||(j.getFromId(Le,za)._constraintShrinkable=!0)}}($t(Le)||ot.height||ot.width)&&(Aa.plot=!0);var Fa=ut.shapes;for(Ar=0;Ar<Fa.length;Ar++)if(Fa[Ar].showlegend){Aa.calc=!0;break}return(Aa.plot||Aa.calc)&&(Aa.layoutReplot=!0),{flags:Aa,rangesAltered:Va,undoit:va,redoit:Oa,eventData:_r}}function $t(Le){var ot=Le._fullLayout,ct=ot.width,ut=ot.height;return Le.layout.autosize&&s.plotAutoSize(Le,Le.layout,ot),ot.width!==ct||ot.height!==ut}function Wt(Le,ot,ct,ut){Le=c.getGraphDiv(Le),H.clearPromiseQueue(Le),c.isPlainObject(ot)||(ot={}),c.isPlainObject(ct)||(ct={}),Object.keys(ot).length&&(Le.changed=!0),Object.keys(ct).length&&(Le.changed=!0);var Pt=H.coerceTraceIndices(Le,ut),Ot=Te(Le,c.extendFlat({},ot),Pt),qt=Ot.flags,ir=Kt(Le,c.extendFlat({},ct)),_r=ir.flags;(qt.calc||_r.calc)&&(Le.calcdata=void 0),qt.clearAxisTypes&&H.clearAxisTypes(Le,Pt,ct);var Bt=[];_r.layoutReplot?Bt.push(te.layoutReplot):qt.fullReplot?Bt.push(ce._doPlot):(Bt.push(s.previousPromises),Ze(Le,_r,ir)||s.supplyDefaults(Le),qt.style&&Bt.push(te.doTraceStyle),(qt.colorbars||_r.colorbars)&&Bt.push(te.doColorBars),_r.legend&&Bt.push(te.doLegend),_r.layoutstyle&&Bt.push(te.layoutStyles),_r.axrange&&Je(Bt,ir.rangesAltered),_r.ticks&&Bt.push(te.doTicksRelayout),_r.modebar&&Bt.push(te.doModeBar),_r.camera&&Bt.push(te.doCamera),Bt.push(Q)),Bt.push(s.rehover,s.redrag,s.reselect),p.add(Le,Wt,[Le,Ot.undoit,ir.undoit,Ot.traces],Wt,[Le,Ot.redoit,ir.redoit,Ot.traces]);var gr=c.syncOrAsync(Bt,Le);return(!gr||!gr.then)&&(gr=Promise.resolve(Le)),gr.then(function(){return Le.emit("plotly_update",{data:Ot.eventData,layout:ir.eventData}),Le})}function nt(Le){return function(ct){ct._fullLayout._guiEditing=!0;var ut=Le.apply(null,arguments);return ct._fullLayout._guiEditing=!1,ut}}var pt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ke=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function gt(Le,ot){for(var ct=0;ct<ot.length;ct++){var ut=ot[ct],Pt=Le.match(ut.pattern);if(Pt){var Ot=Pt[1]||"";return{head:Ot,tail:Le.substr(Ot.length+1),attr:ut.attr}}}}function Ft(Le,ot){var ct=m(ot,Le).get();if(ct!==void 0)return ct;var ut=Le.split(".");for(ut.pop();ut.length>1;)if(ut.pop(),ct=m(ot,ut.join(".")+".uirevision").get(),ct!==void 0)return ct;return ot.uirevision}function Xt(Le,ot){for(var ct=0;ct<ot.length;ct++)if(ot[ct]._fullInput.uid===Le)return ct;return-1}function or(Le,ot,ct){for(var ut=0;ut<ot.length;ut++)if(ot[ut].uid===Le)return ut;return!ot[ct]||ot[ct].uid?-1:ct}function sr(Le,ot){var ct=c.isPlainObject(Le),ut=Array.isArray(Le);return ct||ut?(ct&&c.isPlainObject(ot)||ut&&Array.isArray(ot))&&JSON.stringify(Le)===JSON.stringify(ot):Le===ot}function dr(Le,ot,ct,ut){var Pt=ut._preGUI,Ot,qt,ir,_r,Bt,gr,Ar,Er,ba,Ga,Xa=[],Aa={},Oa={};for(Ot in Pt){if(Bt=gt(Ot,pt),Bt){if(ba=Bt.head,Ga=Bt.tail,qt=Bt.attr||ba+".uirevision",ir=m(ut,qt).get(),_r=ir&&Ft(qt,ot),_r&&_r===ir){if(gr=Pt[Ot],gr===null&&(gr=void 0),Ar=m(ot,Ot),Er=Ar.get(),sr(Er,gr)){Er===void 0&&Ga==="autorange"&&Xa.push(ba),Ar.set(Ae(m(ut,Ot).get()));continue}else if(Ga==="autorange"||Ga.substr(0,6)==="range["){var va=Pt[ba+".range[0]"],ma=Pt[ba+".range[1]"],Va=Pt[ba+".autorange"];if(Va||Va===null&&va===null&&ma===null){if(!(ba in Aa)){var ja=m(ot,ba).get();Aa[ba]=ja&&(ja.autorange||ja.autorange!==!1&&(!ja.range||ja.range.length!==2))}if(Aa[ba]){Ar.set(Ae(m(ut,Ot).get()));continue}}}}}else c.warn("unrecognized GUI edit: "+Ot);delete Pt[Ot],Bt&&Bt.tail.substr(0,6)==="range["&&(Oa[Bt.head]=1)}for(var $a=0;$a<Xa.length;$a++){var La=Xa[$a];if(Oa[La]){var la=m(ot,La).get();la&&delete la.autorange}}var Ba=ut._tracePreGUI;for(var un in Ba){var pn=Ba[un],qa=null,nn;for(Ot in pn){if(!qa){var cn=Xt(un,ct);if(cn<0){delete Ba[un];break}var Cn=ct[cn];nn=Cn._fullInput;var Ja=or(un,Le,nn.index);if(Ja<0){delete Ba[un];break}qa=Le[Ja]}if(Bt=gt(Ot,Ke),Bt){if(Bt.attr?(ir=m(ut,Bt.attr).get(),_r=ir&&Ft(Bt.attr,ot)):(ir=nn.uirevision,_r=qa.uirevision,_r===void 0&&(_r=ot.uirevision)),_r&&_r===ir&&(gr=pn[Ot],gr===null&&(gr=void 0),Ar=m(qa,Ot),Er=Ar.get(),sr(Er,gr))){Ar.set(Ae(m(nn,Ot).get()));continue}}else c.warn("unrecognized GUI edit: "+Ot+" in trace uid "+un);delete pn[Ot]}}}function wr(Le,ot,ct,ut){var Pt,Ot;function qt(){return ce.addFrames(Le,Pt)}Le=c.getGraphDiv(Le),H.clearPromiseQueue(Le);var ir=Le._fullData,_r=Le._fullLayout;if(!c.isPlotDiv(Le)||!ir||!_r)Ot=ce.newPlot(Le,ot,ct,ut);else{if(c.isPlainObject(ot)){var Bt=ot;ot=Bt.data,ct=Bt.layout,ut=Bt.config,Pt=Bt.frames}var gr=!1;if(ut){var Ar=c.extendDeep({},Le._context);Le._context=void 0,ve(Le,ut),gr=jr(Ar,Le._context)}if(gr){const cn=Le._ev.eventNames().map(Cn=>[Cn,Le._ev.listeners(Cn)]);Ot=ce.newPlot(Le,ot,ct,ut).then(()=>{for(const[Cn,Ja]of cn)Ja.forEach(xn=>Le.on(Cn,xn));return ce.react(Le,ot,ct,ut)})}else{Le.data=ot||[],H.cleanData(Le.data),Le.layout=ct||{},H.cleanLayout(Le.layout),dr(Le.data,Le.layout,ir,_r),s.supplyDefaults(Le,{skipUpdateCalc:!0});var Er=Le._fullData,ba=Le._fullLayout,Ga=ba.datarevision===void 0,Xa=ba.transition,Aa=Pr(Le,_r,ba,Ga,Xa),Oa=Aa.newDataRevision,va=xr(Le,ir,Er,Ga,Xa,Oa);if($t(Le)&&(Aa.layoutReplot=!0),va.calc||Aa.calc){Le.calcdata=void 0;for(var ma=Object.getOwnPropertyNames(ba),Va=0;Va<ma.length;Va++){var ja=ma[Va],$a=ja.substring(0,5);if($a==="xaxis"||$a==="yaxis"){var La=ba[ja]._emptyCategories;La&&La()}}}else s.supplyDefaultsUpdateCalc(Le.calcdata,Er);var la=[];if(Pt&&(Le._transitionData={},s.createTransitionData(Le),la.push(qt)),ba.transition&&(va.anim||Aa.anim))Aa.ticks&&la.push(te.doTicksRelayout),s.doCalcdata(Le),te.doAutoRangeAndConstraints(Le),la.push(function(){return s.transitionFromReact(Le,va,Aa,_r)});else if(va.fullReplot||Aa.layoutReplot)Le._fullLayout._skipDefaults=!0,la.push(ce._doPlot);else{for(var Ba in Aa.arrays){var un=Aa.arrays[Ba];if(un.length){var pn=g.getComponentMethod(Ba,"drawOne");if(pn!==c.noop)for(var qa=0;qa<un.length;qa++)pn(Le,un[qa]);else{var nn=g.getComponentMethod(Ba,"draw");if(nn===c.noop)throw new Error("cannot draw components: "+Ba);nn(Le)}}}la.push(s.previousPromises),va.style&&la.push(te.doTraceStyle),(va.colorbars||Aa.colorbars)&&la.push(te.doColorBars),Aa.legend&&la.push(te.doLegend),Aa.layoutstyle&&la.push(te.layoutStyles),Aa.axrange&&Je(la),Aa.ticks&&la.push(te.doTicksRelayout),Aa.modebar&&la.push(te.doModeBar),Aa.camera&&la.push(te.doCamera),la.push(Q)}la.push(s.rehover,s.redrag,s.reselect),Ot=c.syncOrAsync(la,Le),(!Ot||!Ot.then)&&(Ot=Promise.resolve(Le))}}return Ot.then(()=>(gr||Le.emit("plotly_react",{config:ut,data:ot,layout:ct}),Le))}function xr(Le,ot,ct,ut,Pt,Ot){var qt=ot.length===ct.length;if(!Pt&&!qt)return{fullReplot:!0,calc:!0};var ir=J.traceFlags();ir.arrays={},ir.nChanges=0,ir.nChangesAnim=0;var _r,Bt;function gr(ba){var Ga=w.getTraceValObject(Bt,ba);return!Bt._module.animatable&&Ga.anim&&(Ga.anim=!1),Ga}var Ar={getValObject:gr,flags:ir,immutable:ut,transition:Pt,newDataRevision:Ot,gd:Le},Er={};for(_r=0;_r<ot.length;_r++)if(ct[_r]){if(Bt=ct[_r]._fullInput,Er[Bt.uid])continue;Er[Bt.uid]=1,nr(ot[_r]._fullInput,Bt,[],Ar)}return(ir.calc||ir.plot)&&(ir.fullReplot=!0),Pt&&ir.nChanges&&ir.nChangesAnim&&(ir.anim=ir.nChanges===ir.nChangesAnim&&qt?"all":"some"),ir}function Pr(Le,ot,ct,ut,Pt){var Ot=J.layoutFlags();Ot.arrays={},Ot.rangesAltered={},Ot.nChanges=0,Ot.nChangesAnim=0;function qt(Er){return w.getLayoutValObject(ct,Er)}for(var ir in ct)if(!(!ir.startsWith("xaxis")&&!ir.startsWith("yaxis"))&&ot[ir]){var _r=ct[ir].domain,Bt=ot[ir].domain,gr=ot[ir]._inputDomain;ot[ir]._inputDomain&&(_r[0]===gr[0]&&_r[1]===gr[1]?ct[ir].domain=ot[ir].domain:(_r[0]!==Bt[0]||_r[1]!==Bt[1])&&(ct[ir]._inputDomain=null))}var Ar={getValObject:qt,flags:Ot,immutable:ut,transition:Pt,gd:Le};return nr(ot,ct,[],Ar),(Ot.plot||Ot.calc)&&(Ot.layoutReplot=!0),Pt&&Ot.nChanges&&Ot.nChangesAnim&&(Ot.anim=Ot.nChanges===Ot.nChangesAnim?"all":"some"),Ot}function nr(Le,ot,ct,ut){var Pt,Ot,qt,ir=ut.getValObject,_r=ut.flags,Bt=ut.immutable,gr=ut.inArray,Ar=ut.arrayIndex;function Er(){var cn=Pt.editType;if(gr&&cn.indexOf("arraydraw")!==-1){c.pushUnique(_r.arrays[gr],Ar);return}J.update(_r,Pt),cn!=="none"&&_r.nChanges++,ut.transition&&Pt.anim&&_r.nChangesAnim++,(ft.test(qt)||wt.test(qt))&&(_r.rangesAltered[ct[0]]=1),Ot==="datarevision"&&(_r.newDataRevision=1)}function ba(cn){return cn.valType==="data_array"||cn.arrayOk}for(Ot in Le){if(_r.calc&&!ut.transition)return;var Ga=Le[Ot],Xa=ot[Ot],Aa=ct.concat(Ot);if(qt=Aa.join("."),!(Ot.charAt(0)==="_"||typeof Ga=="function"||Ga===Xa)){if((Ot==="tick0"||Ot==="dtick")&&ct[0]!=="geo"){var Oa=ot.tickmode;if(Oa==="auto"||Oa==="array"||!Oa)continue}if(!(Ot==="range"&&ot.autorange)&&!((Ot==="zmin"||Ot==="zmax")&&ot.type==="contourcarpet")&&(Pt=ir(Aa),!!Pt&&!(Pt._compareAsJSON&&JSON.stringify(Ga)===JSON.stringify(Xa)))){var va=Pt.valType,ma,Va=ba(Pt),ja=Array.isArray(Ga),$a=Array.isArray(Xa);if(ja&&$a){var La="_input_"+Ot,la=Le[La],Ba=ot[La];if(Array.isArray(la)&&la===Ba)continue}if(Xa===void 0)Va&&ja?_r.calc=!0:Er();else if(Pt._isLinkedToArray){var un=[],pn=!1;gr||(_r.arrays[Ot]=un);var qa=Math.min(Ga.length,Xa.length),nn=Math.max(Ga.length,Xa.length);if(qa!==nn)if(Pt.editType==="arraydraw")pn=!0;else{Er();continue}for(ma=0;ma<qa;ma++)nr(Ga[ma],Xa[ma],Aa.concat(ma),c.extendFlat({inArray:Ot,arrayIndex:ma},ut));if(pn)for(ma=qa;ma<nn;ma++)un.push(ma)}else!va&&c.isPlainObject(Ga)?nr(Ga,Xa,Aa,ut):Va?ja&&$a?(Bt&&(_r.calc=!0),(Bt||ut.newDataRevision)&&Er()):ja!==$a?_r.calc=!0:Er():ja&&$a?(Ga.length!==Xa.length||String(Ga)!==String(Xa))&&Er():Er()}}}for(Ot in ot)if(!(Ot in Le||Ot.charAt(0)==="_"||typeof ot[Ot]=="function"))if(Pt=ir(ct.concat(Ot)),ba(Pt)&&Array.isArray(ot[Ot])){_r.calc=!0;return}else Er()}function jr(Le,ot){var ct;for(ct in Le)if(ct.charAt(0)!=="_"){var ut=Le[ct],Pt=ot[ct];if(ut!==Pt)if(c.isPlainObject(ut)&&c.isPlainObject(Pt)){if(jr(ut,Pt))return!0}else if(Array.isArray(ut)&&Array.isArray(Pt)){if(ut.length!==Pt.length)return!0;for(var Ot=0;Ot<ut.length;Ot++)if(ut[Ot]!==Pt[Ot])if(c.isPlainObject(ut[Ot])&&c.isPlainObject(Pt[Ot])){if(jr(ut[Ot],Pt[Ot]))return!0}else return!0}else return!0}}function ta(Le,ot,ct){if(Le=c.getGraphDiv(Le),!c.isPlotDiv(Le))throw new Error("This element is not a Plotly plot: "+Le+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ut=Le._transitionData;ut._frameQueue||(ut._frameQueue=[]),ct=s.supplyAnimationDefaults(ct);var Pt=ct.transition,Ot=ct.frame;ut._frameWaitingCnt===void 0&&(ut._frameWaitingCnt=0);function qt(Bt){return Array.isArray(Pt)?Bt>=Pt.length?Pt[0]:Pt[Bt]:Pt}function ir(Bt){return Array.isArray(Ot)?Bt>=Ot.length?Ot[0]:Ot[Bt]:Ot}function _r(Bt,gr){var Ar=0;return function(){if(Bt&&++Ar===gr)return Bt()}}return new Promise(function(Bt,gr){function Ar(){if(ut._frameQueue.length!==0){for(;ut._frameQueue.length;){var qa=ut._frameQueue.pop();qa.onInterrupt&&qa.onInterrupt()}Le.emit("plotly_animationinterrupted",[])}}function Er(qa){if(qa.length!==0){for(var nn=0;nn<qa.length;nn++){var cn;qa[nn].type==="byname"?cn=s.computeFrame(Le,qa[nn].name):cn=qa[nn].data;var Cn=ir(nn),Ja=qt(nn);Ja.duration=Math.min(Ja.duration,Cn.duration);var xn={frame:cn,name:qa[nn].name,frameOpts:Cn,transitionOpts:Ja};nn===qa.length-1&&(xn.onComplete=_r(Bt,2),xn.onInterrupt=gr),ut._frameQueue.push(xn)}ct.mode==="immediate"&&(ut._lastFrameAt=-1/0),ut._animationRaf||Xa()}}function ba(){Le.emit("plotly_animated"),window.cancelAnimationFrame(ut._animationRaf),ut._animationRaf=null}function Ga(){ut._currentFrame&&ut._currentFrame.onComplete&&ut._currentFrame.onComplete();var qa=ut._currentFrame=ut._frameQueue.shift();if(qa){var nn=qa.name?qa.name.toString():null;Le._fullLayout._currentFrame=nn,ut._lastFrameAt=Date.now(),ut._timeToNext=qa.frameOpts.duration,s.transition(Le,qa.frame.data,qa.frame.layout,H.coerceTraceIndices(Le,qa.frame.traces),qa.frameOpts,qa.transitionOpts).then(function(){qa.onComplete&&qa.onComplete()}),Le.emit("plotly_animatingframe",{name:nn,frame:qa.frame,animation:{frame:qa.frameOpts,transition:qa.transitionOpts}})}else ba()}function Xa(){Le.emit("plotly_animating"),ut._lastFrameAt=-1/0,ut._timeToNext=0,ut._runningTransitions=0,ut._currentFrame=null;var qa=function(){ut._animationRaf=window.requestAnimationFrame(qa),Date.now()-ut._lastFrameAt>ut._timeToNext&&Ga()};qa()}var Aa=0;function Oa(qa){return Array.isArray(Pt)?Aa>=Pt.length?qa.transitionOpts=Pt[Aa]:qa.transitionOpts=Pt[0]:qa.transitionOpts=Pt,Aa++,qa}var va,ma,Va=[],ja=ot==null,$a=Array.isArray(ot),La=!ja&&!$a&&c.isPlainObject(ot);if(La)Va.push({type:"object",data:Oa(c.extendFlat({},ot))});else if(ja||["string","number"].indexOf(typeof ot)!==-1)for(va=0;va<ut._frames.length;va++)ma=ut._frames[va],ma&&(ja||String(ma.group)===String(ot))&&Va.push({type:"byname",name:String(ma.name),data:Oa({name:ma.name})});else if($a)for(va=0;va<ot.length;va++){var la=ot[va];["number","string"].indexOf(typeof la)!==-1?(la=String(la),Va.push({type:"byname",name:la,data:Oa({name:la})})):c.isPlainObject(la)&&Va.push({type:"object",data:Oa(c.extendFlat({},la))})}for(va=0;va<Va.length;va++)if(ma=Va[va],ma.type==="byname"&&!ut._frameHash[ma.data.name]){c.warn('animate failure: frame not found: "'+ma.data.name+'"'),gr();return}["next","immediate"].indexOf(ct.mode)!==-1&&Ar(),ct.direction==="reverse"&&Va.reverse();var Ba=Le._fullLayout._currentFrame;if(Ba&&ct.fromcurrent){var un=-1;for(va=0;va<Va.length;va++)if(ma=Va[va],ma.type==="byname"&&ma.name===Ba){un=va;break}if(un>0&&un<Va.length-1){var pn=[];for(va=0;va<Va.length;va++)ma=Va[va],(Va[va].type!=="byname"||va>un)&&pn.push(ma);Va=pn}}Va.length>0?Er(Va):(Le.emit("plotly_animated"),Bt())})}function Nr(Le,ot,ct){if(Le=c.getGraphDiv(Le),ot==null)return Promise.resolve();if(!c.isPlotDiv(Le))throw new Error("This element is not a Plotly plot: "+Le+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ut,Pt,Ot,qt,ir=Le._transitionData._frames,_r=Le._transitionData._frameHash;if(!Array.isArray(ot))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+ot);var Bt=ir.length+ot.length*2,gr=[],Ar={};for(ut=ot.length-1;ut>=0;ut--)if(c.isPlainObject(ot[ut])){var Er=ot[ut].name,ba=(_r[Er]||Ar[Er]||{}).name,Ga=ot[ut].name,Xa=_r[ba]||Ar[ba];ba&&Ga&&typeof Ga=="number"&&Xa&&se<he&&(se++,c.warn('addFrames: overwriting frame "'+(_r[ba]||Ar[ba]).name+'" with a frame whose name of type "number" also equates to "'+ba+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),se===he&&c.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ar[Er]={name:Er},gr.push({frame:s.supplyFrameDefaults(ot[ut]),index:ct&&ct[ut]!==void 0&&ct[ut]!==null?ct[ut]:Bt+ut})}gr.sort(function(La,la){return La.index>la.index?-1:La.index<la.index?1:0});var Aa=[],Oa=[],va=ir.length;for(ut=gr.length-1;ut>=0;ut--){if(Pt=gr[ut].frame,typeof Pt.name=="number"&&c.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pt.name)for(;_r[Pt.name="frame "+Le._transitionData._counter++];);if(_r[Pt.name]){for(Ot=0;Ot<ir.length&&(ir[Ot]||{}).name!==Pt.name;Ot++);Aa.push({type:"replace",index:Ot,value:Pt}),Oa.unshift({type:"replace",index:Ot,value:ir[Ot]})}else qt=Math.max(0,Math.min(gr[ut].index,va)),Aa.push({type:"insert",index:qt,value:Pt}),Oa.unshift({type:"delete",index:qt}),va++}var ma=s.modifyFrames,Va=s.modifyFrames,ja=[Le,Oa],$a=[Le,Aa];return p&&p.add(Le,ma,ja,Va,$a),s.modifyFrames(Le,Aa)}function Jr(Le,ot){if(Le=c.getGraphDiv(Le),!c.isPlotDiv(Le))throw new Error("This element is not a Plotly plot: "+Le);var ct,ut,Pt=Le._transitionData._frames,Ot=[],qt=[];if(!ot)for(ot=[],ct=0;ct<Pt.length;ct++)ot.push(ct);for(ot=ot.slice(),ot.sort(),ct=ot.length-1;ct>=0;ct--)ut=ot[ct],Ot.push({type:"delete",index:ut}),qt.unshift({type:"insert",index:ut,value:Pt[ut]});var ir=s.modifyFrames,_r=s.modifyFrames,Bt=[Le,qt],gr=[Le,Ot];return p&&p.add(Le,ir,Bt,_r,gr),s.modifyFrames(Le,Ot)}function vt(Le){Le=c.getGraphDiv(Le);var ot=Le._fullLayout||{},ct=Le._fullData||[];return s.cleanPlot([],{},ct,ot),s.purge(Le),v.purge(Le),ot._container&&ot._container.remove(),delete Le._context,Le}function Mt(Le){var ot=Le._fullLayout,ct=Le.getBoundingClientRect();if(!c.equalDomRects(ct,ot._lastBBox)){var ut=ot._invTransform=c.inverseTransformMatrix(c.getFullTransformMatrix(Le));ot._invScaleX=Math.sqrt(ut[0][0]*ut[0][0]+ut[0][1]*ut[0][1]+ut[0][2]*ut[0][2]),ot._invScaleY=Math.sqrt(ut[1][0]*ut[1][0]+ut[1][1]*ut[1][1]+ut[1][2]*ut[1][2]),ot._lastBBox=ct}}function xt(Le){var ot=fe.select(Le),ct=Le._fullLayout;if(ct._calcInverseTransform=Mt,ct._calcInverseTransform(Le),ct._container=ot.selectAll(".plot-container").data([0]),ct._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),ct._paperdiv=ct._container.selectAll(".svg-container").data([0]),ct._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ct._glcontainer=ct._paperdiv.selectAll(".gl-container").data([{}]),ct._glcontainer.enter().append("div").classed("gl-container",!0),ct._paperdiv.selectAll(".main-svg").remove(),ct._paperdiv.select(".modebar-container").remove(),ct._paper=ct._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ct._toppaper=ct._paperdiv.append("svg").classed("main-svg",!0),ct._modebardiv=ct._paperdiv.append("div"),delete ct._modeBar,ct._hoverpaper=ct._paperdiv.append("svg").classed("main-svg",!0),!ct._uid){var ut={};fe.selectAll("defs").each(function(){this.id&&(ut[this.id.split("-")[1]]=1)}),ct._uid=c.randstr(ut)}ct._paperdiv.selectAll(".main-svg").attr(F.svgAttrs),ct._defs=ct._paper.append("defs").attr("id","defs-"+ct._uid),ct._clips=ct._defs.append("g").classed("clips",!0),ct._topdefs=ct._toppaper.append("defs").attr("id","topdefs-"+ct._uid),ct._topclips=ct._topdefs.append("g").classed("clips",!0),ct._bgLayer=ct._paper.append("g").classed("bglayer",!0),ct._draggers=ct._paper.append("g").classed("draglayer",!0);var Pt=ct._paper.append("g").classed("layer-below",!0);ct._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),ct._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),ct._cartesianlayer=ct._paper.append("g").classed("cartesianlayer",!0),ct._polarlayer=ct._paper.append("g").classed("polarlayer",!0),ct._smithlayer=ct._paper.append("g").classed("smithlayer",!0),ct._ternarylayer=ct._paper.append("g").classed("ternarylayer",!0),ct._geolayer=ct._paper.append("g").classed("geolayer",!0),ct._funnelarealayer=ct._paper.append("g").classed("funnelarealayer",!0),ct._pielayer=ct._paper.append("g").classed("pielayer",!0),ct._iciclelayer=ct._paper.append("g").classed("iciclelayer",!0),ct._treemaplayer=ct._paper.append("g").classed("treemaplayer",!0),ct._sunburstlayer=ct._paper.append("g").classed("sunburstlayer",!0),ct._indicatorlayer=ct._toppaper.append("g").classed("indicatorlayer",!0),ct._glimages=ct._paper.append("g").classed("glimages",!0);var Ot=ct._toppaper.append("g").classed("layer-above",!0);ct._imageUpperLayer=Ot.append("g").classed("imagelayer",!0),ct._shapeUpperLayer=Ot.append("g").classed("shapelayer",!0),ct._selectionLayer=ct._toppaper.append("g").classed("selectionlayer",!0),ct._infolayer=ct._toppaper.append("g").classed("infolayer",!0),ct._menulayer=ct._toppaper.append("g").classed("menulayer",!0),ct._zoomlayer=ct._toppaper.append("g").classed("zoomlayer",!0),ct._hoverlayer=ct._hoverpaper.append("g").classed("hoverlayer",!0),ct._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Le.emit("plotly_framework")}ce.animate=ta,ce.addFrames=Nr,ce.deleteFrames=Jr,ce.addTraces=Ee,ce.deleteTraces=de,ce.extendTraces=yt,ce.moveTraces=we,ce.prependTraces=_e,ce.newPlot=ke,ce._doPlot=pe,ce.purge=vt,ce.react=wr,ce.redraw=Me,ce.relayout=Ue,ce.restyle=je,ce.setPlotConfig=ue,ce.update=Wt,ce._guiRelayout=nt(Ue),ce._guiRestyle=nt(je),ce._guiUpdate=nt(Wt),ce._storeDirectGUIEdit=ge}}),xl=n({"src/snapshot/helpers.js"(ce){var fe=hr();ce.getDelay=function(c){return c._has&&(c._has("gl3d")||c._has("mapbox")||c._has("map"))?500:0},ce.getRedrawFunc=function(c){return function(){fe.getComponentMethod("colorbar","draw")(c)}},ce.encodeSVG=function(c){return"data:image/svg+xml,"+encodeURIComponent(c)},ce.encodeJSON=function(c){return"data:application/json,"+encodeURIComponent(c)};var d=window.URL||window.webkitURL;ce.createObjectURL=function(c){return d.createObjectURL(c)},ce.revokeObjectURL=function(c){return d.revokeObjectURL(c)},ce.createBlob=function(c,m){if(m==="svg")return new window.Blob([c],{type:"image/svg+xml;charset=utf-8"});if(m==="full-json")return new window.Blob([c],{type:"application/json;charset=utf-8"});var v=u(window.atob(c));return new window.Blob([v],{type:"image/"+m})},ce.octetStream=function(c){document.location.href="data:application/octet-stream"+c};function u(c){for(var m=c.length,v=new ArrayBuffer(m),p=new Uint8Array(v),g=0;g<m;g++)p[g]=c.charCodeAt(g);return v}ce.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/}}),ks=n({"src/snapshot/tosvg.js"(ce,fe){var d=k();pa();var u=ni(),c=Ve();go();var m=/"/g,v="TOBESTRIPPED",p=new RegExp('("'+v+")|("+v+'")',"g");function g(s){var j=d.select("body").append("div").style({display:"none"}).html(""),b=s.replace(/(&[^;]*;)/gi,function(z){return z==="&lt;"?"&#60;":z==="&rt;"?"&#62;":z.indexOf("<")!==-1||z.indexOf(">")!==-1?"":j.html(z).text()});return j.remove(),b}function w(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}fe.exports=function(j,b,z){var X=j._fullLayout,N=X._paper,O=X._toppaper,F=X.width,P=X.height,_;N.insert("rect",":first-child").call(u.setRect,0,0,F,P).call(c.fill,X.paper_bgcolor);var R=X._basePlotModules||[];for(_=0;_<R.length;_++){var H=R[_];H.toSVG&&H.toSVG(j)}if(O){var te=O.node().childNodes,J=Array.prototype.slice.call(te);for(_=0;_<J.length;_++){var ye=J[_];ye.childNodes.length&&N.node().appendChild(ye)}}X._draggers&&X._draggers.remove(),N.node().style.background="",N.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var he=d.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){he.remove();return}else he.style({visibility:null,display:null});var pe=this.style.fontFamily;pe&&pe.indexOf('"')!==-1&&he.style("font-family",pe.replace(m,v));var Q=this.style.fontWeight;Q&&(Q==="normal"||Q==="400")&&he.style("font-weight",void 0);var ue=this.style.fontStyle;ue&&ue==="normal"&&he.style("font-style",void 0);var me=this.style.fontVariant;me&&me==="normal"&&he.style("font-variant",void 0)}),N.selectAll(".gradient_filled,.pattern_filled").each(function(){var he=d.select(this),pe=this.style.fill;pe&&pe.indexOf("url(")!==-1&&he.style("fill",pe.replace(m,v));var Q=this.style.stroke;Q&&Q.indexOf("url(")!==-1&&he.style("stroke",Q.replace(m,v))}),(b==="pdf"||b==="eps")&&N.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),b==="svg"&&z&&(N.attr("width",z*F),N.attr("height",z*P),N.attr("viewBox","0 0 "+F+" "+P));var se=new window.XMLSerializer().serializeToString(N.node());return se=g(se),se=w(se),se=se.replace(p,"'"),se}}}),el=n({"src/snapshot/svgtoimg.js"(ce,fe){var d=pa(),u=ko().EventEmitter,c=xl();function m(v){var p=v.emitter||new u,g=new Promise(function(w,s){var j=window.Image,b=v.svg,z=v.format||"png",X=v.canvas,N=v.scale||1,O=v.width||300,F=v.height||150,P=N*O,_=N*F,R=X.getContext("2d",{willReadFrequently:!0}),H=new j,te,J;z==="svg"||d.isSafari()?J=c.encodeSVG(b):(te=c.createBlob(b,"svg"),J=c.createObjectURL(te)),X.width=P,X.height=_,H.onload=function(){var ye;switch(te=null,c.revokeObjectURL(J),z!=="svg"&&R.drawImage(H,0,0,P,_),z){case"jpeg":ye=X.toDataURL("image/jpeg");break;case"png":ye=X.toDataURL("image/png");break;case"webp":ye=X.toDataURL("image/webp");break;case"svg":ye=J;break;default:var se="Image format is not jpeg, png, svg or webp.";if(s(new Error(se)),!v.promise)return p.emit("error",se)}w(ye),v.promise||p.emit("success",ye)},H.onerror=function(ye){if(te=null,c.revokeObjectURL(J),s(ye),!v.promise)return p.emit("error",ye)},H.src=J});return v.promise?g:p}fe.exports=m}}),Do=n({"src/plot_api/to_image.js"(ce,fe){var d=B(),u=yu(),c=Di(),m=pa(),v=xl(),p=ks(),g=el(),w=y().version,s={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function j(b,z){z=z||{};var X,N,O,F;m.isPlainObject(b)?(X=b.data||[],N=b.layout||{},O=b.config||{},F={}):(b=m.getGraphDiv(b),X=m.extendDeep([],b.data),N=m.extendDeep({},b.layout),O=b._context,F=b._fullLayout||{});function P(ke){return!(ke in z)||m.validate(z[ke],s[ke])}if(!P("width")&&z.width!==null||!P("height")&&z.height!==null)throw new Error("Height and width should be pixel values.");if(!P("format"))throw new Error("Export format is not "+m.join2(s.format.values,", "," or ")+".");var _={};function R(ke,le){return m.coerce(z,_,s,ke,le)}var H=R("format"),te=R("width"),J=R("height"),ye=R("scale"),se=R("setBackground"),he=R("imageDataOnly"),pe=document.createElement("div");pe.style.position="absolute",pe.style.left="-5000px",document.body.appendChild(pe);var Q=m.extendFlat({},N);te?Q.width=te:z.width===null&&d(F.width)&&(Q.width=F.width),J?Q.height=J:z.height===null&&d(F.height)&&(Q.height=F.height);var ue=m.extendFlat({},O,{_exportedPlot:!0,staticPlot:!0,setBackground:se}),me=v.getRedrawFunc(pe);function be(){return new Promise(function(ke){setTimeout(ke,v.getDelay(pe._fullLayout))})}function ve(){return new Promise(function(ke,le){var De=p(pe,H,ye),Oe=pe._fullLayout.width,He=pe._fullLayout.height;function Be(){u.purge(pe),document.body.removeChild(pe)}if(H==="full-json"){var Ye=c.graphJson(pe,!1,"keepdata","object",!0,!0);return Ye.version=w,Ye=JSON.stringify(Ye),Be(),ke(he?Ye:v.encodeJSON(Ye))}if(Be(),H==="svg")return ke(he?De:v.encodeSVG(De));var st=document.createElement("canvas");st.id=m.randstr(),g({format:H,width:Oe,height:He,scale:ye,canvas:st,svg:De,promise:!0}).then(ke).catch(le)})}function Me(ke){return he?ke.replace(v.IMAGE_URL_PREFIX,""):ke}return new Promise(function(ke,le){u.newPlot(pe,X,Q,ue).then(me).then(be).then(ve).then(function(De){ke(Me(De))}).catch(function(De){le(De)})})}fe.exports=j}}),bu=n({"src/plot_api/validate.js"(ce,fe){var d=pa(),u=Di(),c=qs(),m=tt().dfltConfig,v=d.isPlainObject,p=Array.isArray,g=d.isArrayOrTypedArray;fe.exports=function(R,H){R===void 0&&(R=[]),H===void 0&&(H={});var te=c.get(),J=[],ye={_context:d.extendFlat({},m)},se,he;p(R)?(ye.data=d.extendDeep([],R),se=R):(ye.data=[],se=[],J.push(z("array","data"))),v(H)?(ye.layout=d.extendDeep({},H),he=H):(ye.layout={},he={},arguments.length>1&&J.push(z("object","layout"))),u.supplyDefaults(ye);for(var pe=ye._fullData,Q=se.length,ue=0;ue<Q;ue++){var me=se[ue],be=["data",ue];if(!v(me)){J.push(z("object",be));continue}var ve=pe[ue],Me=ve.type,ke=te.traces[Me].attributes;ke.type={valType:"enumerated",values:[Me]},ve.visible===!1&&me.visible!==!1&&J.push(z("invisible",be)),w(me,ve,ke,J,be)}var le=ye._fullLayout,De=s(te,pe);return w(he,le,De,J,"layout"),J.length===0?void 0:J};function w(_,R,H,te,J,ye){ye=ye||[];for(var se=Object.keys(_),he=0;he<se.length;he++){var pe=se[he],Q=ye.slice();Q.push(pe);var ue=_[pe],me=R[pe],be=N(H,pe),ve=(be||{}).valType,Me=ve==="info_array",ke=ve==="colorscale",le=(be||{}).items;if(!X(H,pe))te.push(z("schema",J,Q));else if(v(ue)&&v(me)&&ve!=="any")w(ue,me,be,te,J,Q);else if(Me&&p(ue)){ue.length>me.length&&te.push(z("unused",J,Q.concat(me.length)));var De=me.length,Oe=Array.isArray(le);Oe&&(De=Math.min(De,le.length));var He,Be,Ye,st,it;if(be.dimensions===2)for(Be=0;Be<De;Be++)if(p(ue[Be])){ue[Be].length>me[Be].length&&te.push(z("unused",J,Q.concat(Be,me[Be].length)));var yt=me[Be].length;for(He=0;He<(Oe?Math.min(yt,le[Be].length):yt);He++)Ye=Oe?le[Be][He]:le,st=ue[Be][He],it=me[Be][He],d.validate(st,Ye)?it!==st&&it!==+st&&te.push(z("dynamic",J,Q.concat(Be,He),st,it)):te.push(z("value",J,Q.concat(Be,He),st))}else te.push(z("array",J,Q.concat(Be),ue[Be]));else for(Be=0;Be<De;Be++)Ye=Oe?le[Be]:le,st=ue[Be],it=me[Be],d.validate(st,Ye)?it!==st&&it!==+st&&te.push(z("dynamic",J,Q.concat(Be),st,it)):te.push(z("value",J,Q.concat(Be),st))}else if(be.items&&!Me&&p(ue)){var _e=le[Object.keys(le)[0]],Ee=[],de,we;for(de=0;de<me.length;de++){var je=me[de]._index||de;if(we=Q.slice(),we.push(je),v(ue[je])&&v(me[de])){Ee.push(je);var Ae=ue[je],$=me[de];v(Ae)&&Ae.visible!==!1&&$.visible===!1?te.push(z("invisible",J,we)):w(Ae,$,_e,te,J,we)}}for(de=0;de<ue.length;de++)we=Q.slice(),we.push(de),v(ue[de])?Ee.indexOf(de)===-1&&te.push(z("unused",J,we)):te.push(z("object",J,we,ue[de]))}else!v(ue)&&v(me)?te.push(z("object",J,Q,ue)):!g(ue)&&g(me)&&!Me&&!ke?te.push(z("array",J,Q,ue)):pe in R?d.validate(ue,be)?be.valType==="enumerated"&&(be.coerceNumber&&ue!==+me||!g(ue)&&ue!==me||String(ue)!==String(me))&&te.push(z("dynamic",J,Q,ue,me)):te.push(z("value",J,Q,ue)):te.push(z("unused",J,Q,ue))}return te}function s(_,R){for(var H=_.layout.layoutAttributes,te=0;te<R.length;te++){var J=R[te],ye=_.traces[J.type],se=ye.layoutAttributes;se&&(J.subplot?d.extendFlat(H[ye.attributes.subplot.dflt],se):d.extendFlat(H,se))}return H}var j={object:function(_,R){var H;return _==="layout"&&R===""?H="The layout argument":_[0]==="data"&&R===""?H="Trace "+_[1]+" in the data argument":H=b(_)+"key "+R,H+" must be linked to an object container"},array:function(_,R){var H;return _==="data"?H="The data argument":H=b(_)+"key "+R,H+" must be linked to an array container"},schema:function(_,R){return b(_)+"key "+R+" is not part of the schema"},unused:function(_,R,H){var te=v(H)?"container":"key";return b(_)+te+" "+R+" did not get coerced"},dynamic:function(_,R,H,te){return[b(_)+"key",R,"(set to '"+H+"')","got reset to","'"+te+"'","during defaults."].join(" ")},invisible:function(_,R){return(R?b(_)+"item "+R:"Trace "+_[1])+" got defaulted to be not visible"},value:function(_,R,H){return[b(_)+"key "+R,"is set to an invalid value ("+H+")"].join(" ")}};function b(_){return p(_)?"In data trace "+_[1]+", ":"In "+_+", "}function z(_,R,H,te,J){H=H||"";var ye,se;p(R)?(ye=R[0],se=R[1]):(ye=R,se=null);var he=P(H),pe=j[_](R,he,te,J);return d.log(pe),{code:_,container:ye,trace:se,path:H,astr:he,msg:pe}}function X(_,R){var H=F(R),te=H.keyMinusId,J=H.id;return te in _&&_[te]._isSubplotObj&&J?!0:R in _}function N(_,R){if(R in _)return _[R];var H=F(R);return _[H.keyMinusId]}var O=d.counterRegex("([a-z]+)");function F(_){var R=_.match(O);return{keyMinusId:R&&R[1],id:R&&R[2]}}function P(_){if(!p(_))return String(_);for(var R="",H=0;H<_.length;H++){var te=_[H];typeof te=="number"?R=R.substr(0,R.length-1)+"["+te+"]":R+=te,H<_.length-1&&(R+=".")}return R}}}),Ic=n({"src/snapshot/filesaver.js"(ce,fe){var d=pa(),u=xl();function c(m,v,p){var g=document.createElement("a"),w="download"in g,s=new Promise(function(j,b){var z,X;if(w)return z=u.createBlob(m,p),X=u.createObjectURL(z),g.href=X,g.download=v,document.body.appendChild(g),g.click(),document.body.removeChild(g),u.revokeObjectURL(X),z=null,j(v);if(d.isSafari()){var N=p==="svg"?",":";base64,";return u.octetStream(N+encodeURIComponent(m)),j(v)}b(new Error("download error"))});return s}fe.exports=c}}),vs=n({"src/snapshot/download.js"(ce,fe){var d=pa(),u=Do(),c=Ic();xl();function m(v,p){var g;return d.isPlainObject(v)||(g=d.getGraphDiv(v)),p=p||{},p.format=p.format||"png",p.width=p.width||null,p.height=p.height||null,p.imageDataOnly=!0,new Promise(function(w,s){g&&g._snapshotInProgress&&s(new Error("Snapshotting already in progress.")),g&&(g._snapshotInProgress=!0);var j=u(v,p),b=p.filename||v.fn||"newplot";b+="."+p.format.replace("-","."),j.then(function(z){return g&&(g._snapshotInProgress=!1),c(z,b,p.format)}).then(function(z){w(z)}).catch(function(z){g&&(g._snapshotInProgress=!1),s(z)})})}fe.exports=m}}),_l=n({"src/plot_api/template_api.js"(ce){var fe=pa(),d=fe.isPlainObject,u=qs(),c=Di(),m=$e(),v=vn(),p=tt().dfltConfig;ce.makeTemplate=function(O){O=fe.isPlainObject(O)?O:fe.getGraphDiv(O),O=fe.extendDeep({_context:p},{data:O.data,layout:O.layout}),c.supplyDefaults(O);var F=O.data||[],P=O.layout||{};P._basePlotModules=O._fullLayout._basePlotModules,P._modules=O._fullLayout._modules;var _={data:{},layout:{}};F.forEach(function(ue){var me={};s(ue,me,b.bind(null,ue));var be=fe.coerce(ue,{},m,"type"),ve=_.data[be];ve||(ve=_.data[be]=[]),ve.push(me)}),s(P,_.layout,j.bind(null,P)),delete _.layout.template;var R=P.template;if(d(R)){var H=R.layout,te,J,ye,se,he,pe;d(H)&&g(H,_.layout);var Q=R.data;if(d(Q)){for(J in _.data)if(ye=Q[J],Array.isArray(ye)){for(he=_.data[J],pe=he.length,se=ye.length,te=0;te<pe;te++)g(ye[te%se],he[te]);for(te=pe;te<se;te++)he.push(fe.extendDeep({},ye[te]))}for(J in Q)J in _.data||(_.data[J]=fe.extendDeep([],Q[J]))}}return _};function g(O,F){O=fe.extendDeep({},O);var P=Object.keys(O).sort(),_,R;function H(he,pe,Q){if(d(pe)&&d(he))g(he,pe);else if(Array.isArray(pe)&&Array.isArray(he)){var ue=v.arrayTemplater({_template:O},Q);for(R=0;R<pe.length;R++){var me=pe[R],be=ue.newItem(me)._template;be&&g(be,me)}var ve=ue.defaultItems();for(R=0;R<ve.length;R++)pe.push(ve[R]._template);for(R=0;R<pe.length;R++)delete pe[R].templateitemname}}for(_=0;_<P.length;_++){var te=P[_],J=O[te];if(te in F?H(J,F[te],te):F[te]=J,w(te)===te)for(var ye in F){var se=w(ye);ye!==se&&se===te&&!(ye in O)&&H(J,F[ye],te)}}}function w(O){return O.replace(/[0-9]+$/,"")}function s(O,F,P,_,R){var H=R&&P(R);for(var te in O){var J=O[te],ye=z(O,te,_),se=z(O,te,R),he=P(se);if(!he){var pe=w(te);pe!==te&&(se=z(O,pe,R),he=P(se))}if(!(H&&H===he)&&!(!he||he._noTemplating||he.valType==="data_array"||he.arrayOk&&Array.isArray(J)))if(!he.valType&&d(J))s(J,F,P,ye,se);else if(he._isLinkedToArray&&Array.isArray(J))for(var Q=!1,ue=0,me={},be=0;be<J.length;be++){var ve=J[be];if(d(ve)){var Me=ve.name;if(Me)me[Me]||(s(ve,F,P,z(J,ue,ye),z(J,ue,se)),ue++,me[Me]=1);else if(!Q){var ke=v.arrayDefaultKey(te),le=z(O,ke,_),De=z(J,ue,ye);s(ve,F,P,De,z(J,ue,se));var Oe=fe.nestedProperty(F,De),He=fe.nestedProperty(F,le);He.set(Oe.get()),Oe.set(null),Q=!0}}}else{var Be=fe.nestedProperty(F,ye);Be.set(J)}}}function j(O,F){return u.getLayoutValObject(O,fe.nestedProperty({},F).parts)}function b(O,F){return u.getTraceValObject(O,fe.nestedProperty({},F).parts)}function z(O,F,P){var _;return P?Array.isArray(O)?_=P+"["+F+"]":_=P+"."+F:_=F,_}ce.validateTemplate=function(O,F){var P=fe.extendDeep({},{_context:p,data:O.data,layout:O.layout}),_=P.layout||{};d(F)||(F=_.template||{});var R=F.layout,H=F.data,te=[];P.layout=_,P.layout.template=F,c.supplyDefaults(P);var J=P._fullLayout,ye=P._fullData,se={};function he(le,De){for(var Oe in le)if(Oe.charAt(0)!=="_"&&d(le[Oe])){var He=w(Oe),Be=[],Ye;for(Ye=0;Ye<De.length;Ye++)Be.push(z(le,Oe,De[Ye])),He!==Oe&&Be.push(z(le,He,De[Ye]));for(Ye=0;Ye<Be.length;Ye++)se[Be[Ye]]=1;he(le[Oe],Be)}}function pe(le,De){for(var Oe in le)if(Oe.indexOf("defaults")===-1&&d(le[Oe])){var He=z(le,Oe,De);se[He]?pe(le[Oe],He):te.push({code:"unused",path:He})}}if(d(R)?(he(J,["layout"]),pe(R,"layout")):te.push({code:"layout"}),!d(H))te.push({code:"data"});else{for(var Q={},ue,me=0;me<ye.length;me++){var be=ye[me];ue=be.type,Q[ue]=(Q[ue]||0)+1,be._fullInput._template||te.push({code:"missing",index:be.index,traceType:ue})}for(ue in H){var ve=H[ue].length,Me=Q[ue]||0;ve>Me?te.push({code:"unused",traceType:ue,templateCount:ve,dataCount:Me}):Me>ve&&te.push({code:"reused",traceType:ue,templateCount:ve,dataCount:Me})}}function ke(le,De){for(var Oe in le)if(Oe.charAt(0)!=="_"){var He=le[Oe],Be=z(le,Oe,De);d(He)?(Array.isArray(le)&&He._template===!1&&He.templateitemname&&te.push({code:"missing",path:Be,templateitemname:He.templateitemname}),ke(He,Be)):Array.isArray(He)&&X(He)&&ke(He,Be)}}if(ke({data:ye,layout:J},""),te.length)return te.map(N)};function X(O){for(var F=0;F<O.length;F++)if(d(O[F]))return!0}function N(O){var F;switch(O.code){case"data":F="The template has no key data.";break;case"layout":F="The template has no key layout.";break;case"missing":O.path?F="There are no templates for item "+O.path+" with name "+O.templateitemname:F="There are no templates for trace "+O.index+", of type "+O.traceType+".";break;case"unused":O.path?F="The template item at "+O.path+" was not used in constructing the plot.":O.dataCount?F="Some of the templates of type "+O.traceType+" were not used. The template has "+O.templateCount+" traces, the data only has "+O.dataCount+" of this type.":F="The template has "+O.templateCount+" traces of type "+O.traceType+" but there are none in the data.";break;case"reused":F="Some of the templates of type "+O.traceType+" were used more than once. The template has "+O.templateCount+" traces, the data has "+O.dataCount+" of this type.";break}return O.msg=F,O}}}),Wu=n({"src/plot_api/index.js"(ce){var fe=yu();ce._doPlot=fe._doPlot,ce.newPlot=fe.newPlot,ce.restyle=fe.restyle,ce.relayout=fe.relayout,ce.redraw=fe.redraw,ce.update=fe.update,ce._guiRestyle=fe._guiRestyle,ce._guiRelayout=fe._guiRelayout,ce._guiUpdate=fe._guiUpdate,ce._storeDirectGUIEdit=fe._storeDirectGUIEdit,ce.react=fe.react,ce.extendTraces=fe.extendTraces,ce.prependTraces=fe.prependTraces,ce.addTraces=fe.addTraces,ce.deleteTraces=fe.deleteTraces,ce.moveTraces=fe.moveTraces,ce.purge=fe.purge,ce.addFrames=fe.addFrames,ce.deleteFrames=fe.deleteFrames,ce.animate=fe.animate,ce.setPlotConfig=fe.setPlotConfig;var d=Lr().getGraphDiv,u=Dc().eraseActiveShape;ce.deleteActiveShape=function(m){return u(d(m))},ce.toImage=Do(),ce.validate=bu(),ce.downloadImage=vs();var c=_l();ce.makeTemplate=c.makeTemplate,ce.validateTemplate=c.validateTemplate}}),$u=n({"src/traces/scatter/xy_defaults.js"(ce,fe){var d=pa(),u=hr();fe.exports=function(m,v,p,g){var w=g("x"),s=g("y"),j,b=u.getComponentMethod("calendars","handleTraceDefaults");if(b(m,v,["x","y"],p),w){var z=d.minRowLength(w);s?j=Math.min(z,d.minRowLength(s)):(j=z,g("y0"),g("dy"))}else{if(!s)return 0;j=d.minRowLength(s),g("x0"),g("dx")}return v._length=j,j}}}),Rs=n({"src/traces/scatter/period_defaults.js"(ce,fe){var d=pa().dateTick0,u=W(),c=u.ONEWEEK;function m(v,p){return v%c===0?d(p,1):d(p,0)}fe.exports=function(p,g,w,s,j){if(j||(j={x:!0,y:!0}),j.x){var b=s("xperiod");b&&(s("xperiod0",m(b,g.xcalendar)),s("xperiodalignment"))}if(j.y){var z=s("yperiod");z&&(s("yperiod0",m(z,g.ycalendar)),s("yperiodalignment"))}}}}),xu=n({"src/traces/scatter/stack_defaults.js"(ce,fe){var d=["orientation","groupnorm","stackgaps"];fe.exports=function(c,m,v,p){var g=v._scatterStackOpts,w=p("stackgroup");if(w){var s=m.xaxis+m.yaxis,j=g[s];j||(j=g[s]={});var b=j[w],z=!1;b?b.traces.push(m):(b=j[w]={traceIndices:[],traces:[m]},z=!0);for(var X={orientation:m.x&&!m.y?"h":"v"},N=0;N<d.length;N++){var O=d[N],F=O+"Found";if(!b[F]){var P=c[O]!==void 0,_=O==="orientation";if((P||z)&&(b[O]=p(O,X[O]),_&&(b.fillDflt=b[O]==="h"?"tonextx":"tonexty"),P&&(b[F]=!0,!z&&(delete b.traces[0][O],_))))for(var R=0;R<b.traces.length-1;R++){var H=b.traces[R];H._input.fill!==H.fill&&(H.fill=b.fillDflt)}}}return b}}}}),_u=n({"src/traces/scatter/marker_defaults.js"(ce,fe){var d=Ve(),u=So().hasColorscale,c=Ws(),m=Oi();fe.exports=function(p,g,w,s,j,b){var z=m.isBubble(p),X=(p.line||{}).color,N;if(b=b||{},X&&(w=X),j("marker.symbol"),j("marker.opacity",z?.7:1),j("marker.size"),b.noAngle||(j("marker.angle"),b.noAngleRef||j("marker.angleref"),b.noStandOff||j("marker.standoff")),j("marker.color",w),u(p,"marker")&&c(p,g,s,j,{prefix:"marker.",cLetter:"c"}),b.noSelect||(j("selected.marker.color"),j("unselected.marker.color"),j("selected.marker.size"),j("unselected.marker.size")),b.noLine||(X&&!Array.isArray(X)&&g.marker.color!==X?N=X:z?N=d.background:N=d.defaultLine,j("marker.line.color",N),u(p,"marker.line")&&c(p,g,s,j,{prefix:"marker.line.",cLetter:"c"}),j("marker.line.width",z?1:0)),z&&(j("marker.sizeref"),j("marker.sizemin"),j("marker.sizemode")),b.gradient){var O=j("marker.gradient.type");O!=="none"&&j("marker.gradient.color")}}}}),Bc=n({"src/traces/scatter/line_defaults.js"(ce,fe){var d=pa().isArrayOrTypedArray,u=So().hasColorscale,c=Ws();fe.exports=function(v,p,g,w,s,j){j||(j={});var b=(v.marker||{}).color;if(b&&b._inputArray&&(b=b._inputArray),s("line.color",g),u(v,"line"))c(v,p,w,s,{prefix:"line.",cLetter:"c"});else{var z=(d(b)?!1:b)||g;s("line.color",z)}s("line.width"),j.noDash||s("line.dash"),j.backoff&&s("line.backoff")}}}),Lf=n({"src/traces/scatter/line_shape_defaults.js"(ce,fe){fe.exports=function(u,c,m){var v=m("line.shape");v==="spline"&&m("line.smoothing")}}}),Nf=n({"src/traces/scatter/text_defaults.js"(ce,fe){var d=pa();fe.exports=function(u,c,m,v,p){p=p||{},v("textposition"),d.coerceFont(v,"textfont",p.font||m.font,p),p.noSelect||(v("selected.textfont.color"),v("unselected.textfont.color"))}}}),Of=n({"src/traces/scatter/fillcolor_defaults.js"(ce,fe){var d=Ve(),u=pa().isArrayOrTypedArray;function c(m){for(var v=d.interpolate(m[0][1],m[1][1],.5),p=2;p<m.length;p++){var g=d.interpolate(m[p-1][1],m[p][1],.5);v=d.interpolate(v,g,m[p-1][0]/m[p][0])}return v}fe.exports=function(v,p,g,w,s){s||(s={});var j=!1;if(p.marker){var b=p.marker.color,z=(p.marker.line||{}).color;b&&!u(b)?j=b:z&&!u(z)&&(j=z)}var X;if(s.moduleHasFillgradient){var N=w("fillgradient.type");if(N!=="none"){w("fillgradient.start"),w("fillgradient.stop");var O=w("fillgradient.colorscale");O&&(X=c(O))}}w("fillcolor",d.addOpacity((p.line||{}).color||j||X||g,.5))}}}),Hc=n({"src/traces/scatter/defaults.js"(ce,fe){var d=pa(),u=hr(),c=yl(),m=Vu(),v=Oi(),p=$u(),g=Rs(),w=xu(),s=_u(),j=Bc(),b=Lf(),z=Nf(),X=Of(),N=pa().coercePattern;fe.exports=function(F,P,_,R){function H(ue,me){return d.coerce(F,P,c,ue,me)}var te=p(F,P,R,H);if(te||(P.visible=!1),!!P.visible){g(F,P,R,H),H("xhoverformat"),H("yhoverformat"),H("zorder");var J=w(F,P,R,H);R.scattermode==="group"&&P.orientation===void 0&&H("orientation","v");var ye=!J&&te<m.PTS_LINESONLY?"lines+markers":"lines";H("text"),H("hovertext"),H("mode",ye),v.hasMarkers(P)&&s(F,P,_,R,H,{gradient:!0}),v.hasLines(P)&&(j(F,P,_,R,H,{backoff:!0}),b(F,P,H),H("connectgaps"),H("line.simplify")),v.hasText(P)&&(H("texttemplate"),z(F,P,R,H));var se=[];(v.hasMarkers(P)||v.hasText(P))&&(H("cliponaxis"),H("marker.maxdisplayed"),se.push("points")),H("fill",J?J.fillDflt:"none"),P.fill!=="none"&&(X(F,P,_,H,{moduleHasFillgradient:!0}),v.hasLines(P)||b(F,P,H),N(H,"fillpattern",P.fillcolor,!1));var he=(P.line||{}).color,pe=(P.marker||{}).color;(P.fill==="tonext"||P.fill==="toself")&&se.push("fills"),H("hoveron",se.join("+")||"points"),P.hoveron!=="fills"&&H("hovertemplate");var Q=u.getComponentMethod("errorbars","supplyDefaults");Q(F,P,he||pe||_,{axis:"y"}),Q(F,P,he||pe||_,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(P,H)}}}}),wu=n({"src/traces/scatter/grouping_defaults.js"(ce,fe){var d=Il().getAxisGroup;fe.exports=function(c,m,v,p,g){var w=m.orientation,s=m[{v:"x",h:"y"}[w]+"axis"],j=d(v,s)+w,b=v._alignmentOpts||{},z=p("alignmentgroup"),X=b[j];X||(X=b[j]={});var N=X[z];N?N.traces.push(m):N=X[z]={traces:[m],alignmentIndex:Object.keys(X).length,offsetGroups:{}};var O=p("offsetgroup")||"",F=N.offsetGroups,P=F[O];m._offsetIndex=0,(g!=="group"||O)&&(P||(P=F[O]={offsetIndex:Object.keys(F).length}),m._offsetIndex=P.offsetIndex)}}}),Xu=n({"src/traces/scatter/cross_trace_defaults.js"(ce,fe){var d=pa(),u=wu(),c=yl();fe.exports=function(v,p){var g,w,s,j=p.scattermode;function b(F){return d.coerce(w._input,w,c,F)}if(p.scattermode==="group")for(s=0;s<v.length;s++)w=v[s],w.type==="scatter"&&(g=w._input,u(g,w,p,b,j));for(s=0;s<v.length;s++){var z=v[s];if(z.type==="scatter"){var X=z.fill;if(!(X==="none"||X==="toself")&&(z.opacity=void 0,X==="tonexty"||X==="tonextx"))for(var N=s-1;N>=0;N--){var O=v[N];if(O.type==="scatter"&&O.xaxis===z.xaxis&&O.yaxis===z.yaxis){O.opacity=void 0;break}}}}}}}),$o=n({"src/traces/scatter/layout_defaults.js"(ce,fe){var d=pa(),u=Qo();fe.exports=function(c,m){function v(g,w){return d.coerce(c,m,u,g,w)}var p=m.barmode==="group";m.scattermode==="group"&&v("scattergap",p?m.bargap:.2)}}}),_i=n({"src/plots/cartesian/align_period.js"(ce,fe){var d=B(),u=pa(),c=u.dateTime2ms,m=u.incrementMonth,v=W(),p=v.ONEAVGMONTH;fe.exports=function(w,s,j,b){if(s.type!=="date")return{vals:b};var z=w[j+"periodalignment"];if(!z)return{vals:b};var X=w[j+"period"],N;if(d(X)){if(X=+X,X<=0)return{vals:b}}else if(typeof X=="string"&&X.charAt(0)==="M"){var O=+X.substring(1);if(O>0&&Math.round(O)===O)N=O;else return{vals:b}}for(var F=s.calendar,P=z==="start",_=z==="end",R=w[j+"period0"],H=c(R,F)||0,te=[],J=[],ye=[],se=b.length,he=0;he<se;he++){var pe=b[he],Q,ue,me;if(N){for(Q=Math.round((pe-H)/(N*p)),me=m(H,N*Q,F);me>pe;)me=m(me,-N,F);for(;me<=pe;)me=m(me,N,F);ue=m(me,-N,F)}else{for(Q=Math.round((pe-H)/X),me=H+Q*X;me>pe;)me-=X;for(;me<=pe;)me+=X;ue=me-X}te[he]=P?ue:_?me:(ue+me)/2,J[he]=ue,ye[he]=me}return{vals:te,starts:J,ends:ye}}}}),Bo=n({"src/traces/scatter/colorscale_calc.js"(ce,fe){var d=So().hasColorscale,u=Iu(),c=Oi();fe.exports=function(v,p){c.hasLines(p)&&d(p,"line")&&u(v,p,{vals:p.line.color,containerStr:"line",cLetter:"c"}),c.hasMarkers(p)&&(d(p,"marker")&&u(v,p,{vals:p.marker.color,containerStr:"marker",cLetter:"c"}),d(p,"marker.line")&&u(v,p,{vals:p.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}}}),tl=n({"src/traces/scatter/arrays_to_calcdata.js"(ce,fe){var d=pa();fe.exports=function(c,m){for(var v=0;v<c.length;v++)c[v].i=v;d.mergeArray(m.text,c,"tx"),d.mergeArray(m.texttemplate,c,"txt"),d.mergeArray(m.hovertext,c,"htx"),d.mergeArray(m.customdata,c,"data"),d.mergeArray(m.textposition,c,"tp"),m.textfont&&(d.mergeArrayCastPositive(m.textfont.size,c,"ts"),d.mergeArray(m.textfont.color,c,"tc"),d.mergeArray(m.textfont.family,c,"tf"),d.mergeArray(m.textfont.weight,c,"tw"),d.mergeArray(m.textfont.style,c,"ty"),d.mergeArray(m.textfont.variant,c,"tv"),d.mergeArray(m.textfont.textcase,c,"tC"),d.mergeArray(m.textfont.lineposition,c,"tE"),d.mergeArray(m.textfont.shadow,c,"tS"));var p=m.marker;if(p){d.mergeArrayCastPositive(p.size,c,"ms"),d.mergeArrayCastPositive(p.opacity,c,"mo"),d.mergeArray(p.symbol,c,"mx"),d.mergeArray(p.angle,c,"ma"),d.mergeArray(p.standoff,c,"mf"),d.mergeArray(p.color,c,"mc");var g=p.line;p.line&&(d.mergeArray(g.color,c,"mlc"),d.mergeArrayCastPositive(g.width,c,"mlw"));var w=p.gradient;w&&w.type!=="none"&&(d.mergeArray(w.type,c,"mgt"),d.mergeArray(w.color,c,"mgc"))}}}}),Zu=n({"src/traces/scatter/calc_selection.js"(ce,fe){var d=pa();fe.exports=function(c,m){d.isArrayOrTypedArray(m.selectedpoints)&&d.tagSelected(c,m)}}}),Au=n({"src/traces/scatter/calc.js"(ce,fe){var d=B(),u=pa(),c=mi(),m=_i(),v=W().BADNUM,p=Oi(),g=Bo(),w=tl(),s=Zu();function j(F,P){var _=F._fullLayout,R=P._xA=c.getFromId(F,P.xaxis||"x","x"),H=P._yA=c.getFromId(F,P.yaxis||"y","y"),te=R.makeCalcdata(P,"x"),J=H.makeCalcdata(P,"y"),ye=m(P,R,"x",te),se=m(P,H,"y",J),he=ye.vals,pe=se.vals,Q=P._length,ue=new Array(Q),me=P.ids,be=O(P,_,R,H),ve=!1,Me,ke,le,De,Oe,He;X(_,P);var Be="x",Ye="y",st;if(be)u.pushUnique(be.traceIndices,P.index),Me=be.orientation==="v",Me?(Ye="s",st="x"):(Be="s",st="y"),Oe=be.stackgaps==="interpolate";else{var it=z(P,Q);b(F,P,R,H,he,pe,it)}var yt=!!P.xperiodalignment,_e=!!P.yperiodalignment;for(ke=0;ke<Q;ke++){var Ee=ue[ke]={},de=d(he[ke]),we=d(pe[ke]);de&&we?(Ee[Be]=he[ke],Ee[Ye]=pe[ke],yt&&(Ee.orig_x=te[ke],Ee.xEnd=ye.ends[ke],Ee.xStart=ye.starts[ke]),_e&&(Ee.orig_y=J[ke],Ee.yEnd=se.ends[ke],Ee.yStart=se.starts[ke])):be&&(Me?de:we)?(Ee[st]=Me?he[ke]:pe[ke],Ee.gap=!0,Oe?(Ee.s=v,ve=!0):Ee.s=0):Ee[Be]=Ee[Ye]=v,me&&(Ee.id=String(me[ke]))}if(w(ue,P),g(F,P),s(ue,P),be){for(ke=0;ke<ue.length;)ue[ke][st]===v?ue.splice(ke,1):ke++;if(u.sort(ue,function(oe,ge){return oe[st]-ge[st]||oe.i-ge.i}),ve){for(ke=0;ke<ue.length-1&&ue[ke].gap;)ke++;for(He=ue[ke].s,He||(He=ue[ke].s=0),le=0;le<ke;le++)ue[le].s=He;for(De=ue.length-1;De>ke&&ue[De].gap;)De--;for(He=ue[De].s,le=ue.length-1;le>De;le--)ue[le].s=He;for(;ke<De;)if(ke++,ue[ke].gap){for(le=ke+1;ue[le].gap;)le++;for(var je=ue[ke-1][st],Ae=ue[ke-1].s,$=(ue[le].s-Ae)/(ue[le][st]-je);ke<le;)ue[ke].s=Ae+(ue[ke][st]-je)*$,ke++}}}return ue}function b(F,P,_,R,H,te,J){var ye=P._length,se=F._fullLayout,he=_._id,pe=R._id,Q=se._firstScatter[N(P)]===P.uid,ue=(O(P,se,_,R)||{}).orientation,me=P.fill;_._minDtick=0,R._minDtick=0;var be={padded:!0},ve={padded:!0};J&&(be.ppad=ve.ppad=J);var Me=ye<2||H[0]!==H[ye-1]||te[0]!==te[ye-1];Me&&(me==="tozerox"||me==="tonextx"&&(Q||ue==="h"))?be.tozero=!0:!(P.error_y||{}).visible&&(me==="tonexty"||me==="tozeroy"||!p.hasMarkers(P)&&!p.hasText(P))&&(be.padded=!1,be.ppad=0),Me&&(me==="tozeroy"||me==="tonexty"&&(Q||ue==="v"))?ve.tozero=!0:(me==="tonextx"||me==="tozerox")&&(ve.padded=!1),he&&(P._extremes[he]=c.findExtremes(_,H,be)),pe&&(P._extremes[pe]=c.findExtremes(R,te,ve))}function z(F,P){if(p.hasMarkers(F)){var _=F.marker,R=1.6*(F.marker.sizeref||1),H;if(F.marker.sizemode==="area"?H=function(he){return Math.max(Math.sqrt((he||0)/R),3)}:H=function(he){return Math.max((he||0)/R,3)},u.isArrayOrTypedArray(_.size)){var te={type:"linear"};c.setConvert(te);for(var J=te.makeCalcdata(F.marker,"size"),ye=new Array(P),se=0;se<P;se++)ye[se]=H(J[se]);return ye}else return H(_.size)}}function X(F,P){var _=N(P),R=F._firstScatter;R[_]||(R[_]=P.uid)}function N(F){var P=F.stackgroup;return F.xaxis+F.yaxis+F.type+(P?"-"+P:"")}function O(F,P,_,R){var H=F.stackgroup;if(H){var te=P._scatterStackOpts[_._id+R._id][H],J=te.orientation==="v"?R:_;if(J.type==="linear"||J.type==="log")return te}}fe.exports={calc:j,calcMarkerSize:z,calcAxisExpansion:b,setFirstScatter:X,getStackOpts:O}}}),Ju=n({"src/traces/bar/sieve.js"(ce,fe){fe.exports=u;var d=pa().distinctVals;function u(c,m){this.traces=c,this.sepNegVal=m.sepNegVal,this.overlapNoMerge=m.overlapNoMerge;for(var v=1/0,p=m.posAxis._id.charAt(0),g=[],w=0;w<c.length;w++){for(var s=c[w],j=0;j<s.length;j++){var b=s[j],z=b.p;z===void 0&&(z=b[p]),z!==void 0&&g.push(z)}s[0]&&s[0].width1&&(v=Math.min(s[0].width1,v))}this.positions=g;var X=d(g);this.distinctPositions=X.vals,X.vals.length===1&&v!==1/0?this.minDiff=v:this.minDiff=Math.min(X.minDiff,v);var N=(m.posAxis||{}).type;(N==="category"||N==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}u.prototype.put=function(m,v,p){var g=this.getLabel(m,v,p),w=this.bins[g]||0;return this.bins[g]=w+p,w},u.prototype.get=function(m,v,p){var g=this.getLabel(m,v,p);return this.bins[g]||0},u.prototype.getLabel=function(m,v,p){var g=p<0&&this.sepNegVal?"v":"^",w=this.overlapNoMerge?m:Math.round(m/this.binWidth);return g+w+"g"+v}}}),Su=n({"src/traces/bar/cross_trace_calc.js"(ce,fe){var d=B(),u=pa().isArrayOrTypedArray,c=W().BADNUM,m=hr(),v=mi(),p=Il().getAxisGroup,g=Ju();function w(ue,me){for(var be=me.xaxis,ve=me.yaxis,Me=ue._fullLayout,ke=ue._fullData,le=ue.calcdata,De=[],Oe=[],He=0;He<ke.length;He++){var Be=ke[He];if(Be.visible===!0&&m.traceIs(Be,"bar")&&Be.xaxis===be._id&&Be.yaxis===ve._id&&(Be.orientation==="h"?De.push(le[He]):Oe.push(le[He]),Be._computePh))for(var Ye=ue.calcdata[He],st=0;st<Ye.length;st++)typeof Ye[st].ph0=="function"&&(Ye[st].ph0=Ye[st].ph0()),typeof Ye[st].ph1=="function"&&(Ye[st].ph1=Ye[st].ph1())}var it={xCat:be.type==="category"||be.type==="multicategory",yCat:ve.type==="category"||ve.type==="multicategory",mode:Me.barmode,norm:Me.barnorm,gap:Me.bargap,groupgap:Me.bargroupgap};s(ue,be,ve,Oe,it),s(ue,ve,be,De,it)}function s(ue,me,be,ve,Me){if(ve.length){var ke,le,De,Oe,He;switch(z(be,ve),Me.mode){case"overlay":X(ue,me,be,ve,Me);break;case"group":for(ke=[],le=[],De=0;De<ve.length;De++)Oe=ve[De],He=Oe[0].trace,He.offset===void 0?le.push(Oe):ke.push(Oe);le.length&&N(ue,me,be,le,Me),ke.length&&X(ue,me,be,ke,Me);break;case"stack":case"relative":for(ke=[],le=[],De=0;De<ve.length;De++)Oe=ve[De],He=Oe[0].trace,He.base===void 0?le.push(Oe):ke.push(Oe);b(le),le.length&&O(ue,me,be,le,Me),ke.length&&X(ue,me,be,ke,Me);break}j(ve),pe(ve,me)}}function j(ue){var me,be,ve,Me,ke,le,De;for(me=0;me<ue.length;me++)be=ue[me],ve=be[0].trace,Me=be[0].t,Me.cornerradiusvalue===void 0&&(ke=ve.marker?ve.marker.cornerradius:void 0,ke!==void 0&&(le=d(ke)?+ke:+ke.slice(0,-1),De=d(ke)?"px":"%",Me.cornerradiusvalue=le,Me.cornerradiusform=De))}function b(ue){if(!(ue.length<2)){var me,be,ve,Me,ke,le,De;for(me=0;me<ue.length&&(be=ue[me],ve=be[0].trace,ke=ve.marker?ve.marker.cornerradius:void 0,ke===void 0);me++);if(ke!==void 0)for(le=d(ke)?+ke:+ke.slice(0,-1),De=d(ke)?"px":"%",me=0;me<ue.length;me++)be=ue[me],Me=be[0].t,Me.cornerradiusvalue=le,Me.cornerradiusform=De}}function z(ue,me){var be,ve;for(be=0;be<me.length;be++){var Me=me[be],ke=Me[0].trace,le=ke.type==="funnel"?ke._base:ke.base,De,Oe=ke.orientation==="h"?ke.xcalendar:ke.ycalendar,He=ue.type==="category"||ue.type==="multicategory"?function(){return null}:ue.d2c;if(u(le)){for(ve=0;ve<Math.min(le.length,Me.length);ve++)De=He(le[ve],0,Oe),d(De)?(Me[ve].b=+De,Me[ve].hasB=1):Me[ve].b=0;for(;ve<Me.length;ve++)Me[ve].b=0}else{De=He(le,0,Oe);var Be=d(De);for(De=Be?De:0,ve=0;ve<Me.length;ve++)Me[ve].b=De,Be&&(Me[ve].hasB=1)}}}function X(ue,me,be,ve,Me){for(var ke=0;ke<ve.length;ke++){var le=ve[ke],De=new g([le],{posAxis:me,sepNegVal:!1,overlapNoMerge:!Me.norm});F(ue,me,De,Me),Me.norm?(J(De),se(be,De,Me)):H(be,De)}}function N(ue,me,be,ve,Me){var ke=new g(ve,{posAxis:me,sepNegVal:!1,overlapNoMerge:!Me.norm});F(ue,me,ke,Me),ye(ke,me),Me.norm?(J(ke),se(be,ke,Me)):H(be,ke)}function O(ue,me,be,ve,Me){var ke=new g(ve,{posAxis:me,sepNegVal:Me.mode==="relative",overlapNoMerge:!(Me.norm||Me.mode==="stack"||Me.mode==="relative")});F(ue,me,ke,Me),te(be,ke,Me);for(var le=0;le<ve.length;le++)for(var De=ve[le],Oe=De[0].t.offsetindex,He=0;He<De.length;He++){var Be=De[He];if(Be.s!==c){var Ye=Be.b+Be.s===ke.get(Be.p,Oe,Be.s);Ye&&(Be._outmost=!0)}}Me.norm&&se(be,ke,Me)}function F(ue,me,be,ve){var Me=ue._fullLayout,ke=be.positions,le=be.distinctPositions,De=be.minDiff,Oe=be.traces,He=Oe.length,Be=ke.length!==le.length,Ye=De*(1-ve.gap),st,it,yt,_e;if(me._id==="angularaxis")st=Ye,it=st*(1-(ve.groupgap||0)),yt=-it/2;else{var Ee=p(Me,me._id)+Oe[0][0].trace.orientation;_e=Me._alignmentOpts[Ee]||{}}for(var de=0;de<He;de++){var we=Oe[de],je=we[0].trace;if(me._id!=="angularaxis"){var Ae=_e[je.alignmentgroup]||{},$=Object.keys(Ae.offsetGroups||{}).length;$?st=Ye/$:st=Be?Ye/He:Ye,it=st*(1-(ve.groupgap||0)),$?yt=((2*je._offsetIndex+1-$)*st-it)/2:yt=Be?((2*de+1-He)*st-it)/2:-it/2}var oe=we[0].t;oe.barwidth=it,oe.offsetindex=je._offsetIndex||0,oe.poffset=yt,oe.bargroupwidth=Ye,oe.bardelta=De}be.binWidth=Oe[0][0].t.barwidth/100,P(be),_(me,be),me._id==="angularaxis"?R(me,be):R(me,be,Be)}function P(ue){var me=ue.traces,be,ve;for(be=0;be<me.length;be++){var Me=me[be],ke=Me[0],le=ke.trace,De=ke.t,Oe=le._offset||le.offset,He=De.poffset,Be;if(u(Oe)){for(Be=Array.prototype.slice.call(Oe,0,Me.length),ve=0;ve<Be.length;ve++)d(Be[ve])||(Be[ve]=He);for(ve=Be.length;ve<Me.length;ve++)Be.push(He);De.poffset=Be}else Oe!==void 0&&(De.poffset=Oe);var Ye=le._width||le.width,st=De.barwidth;if(u(Ye)){var it=Array.prototype.slice.call(Ye,0,Me.length);for(ve=0;ve<it.length;ve++)d(it[ve])||(it[ve]=st);for(ve=it.length;ve<Me.length;ve++)it.push(st);if(De.barwidth=it,Oe===void 0){for(Be=[],ve=0;ve<Me.length;ve++)Be.push(He+(st-it[ve])/2);De.poffset=Be}}else Ye!==void 0&&(De.barwidth=Ye,Oe===void 0&&(De.poffset=He+(st-Ye)/2))}}function _(ue,me){for(var be=me.traces,ve=Q(ue),Me=0;Me<be.length;Me++)for(var ke=be[Me],le=ke[0].t,De=le.poffset,Oe=u(De),He=le.barwidth,Be=u(He),Ye=0;Ye<ke.length;Ye++){var st=ke[Ye],it=st.w=Be?He[Ye]:He;st.p===void 0&&(st.p=st[ve],st["orig_"+ve]=st[ve]);var yt=(Oe?De[Ye]:De)+it/2;st[ve]=st.p+yt}}function R(ue,me,be){var ve=me.traces,Me=me.minDiff,ke=Me/2;v.minDtick(ue,me.minDiff,me.distinctPositions[0],be);for(var le=0;le<ve.length;le++){var De=ve[le],Oe=De[0],He=Oe.trace,Be=[],Ye,st,it,yt;for(yt=0;yt<De.length;yt++)Ye=De[yt],st=Ye.p-ke,it=Ye.p+ke,Be.push(st,it);if(He.width||He.offset){var _e=Oe.t,Ee=_e.poffset,de=_e.barwidth,we=u(Ee),je=u(de);for(yt=0;yt<De.length;yt++){Ye=De[yt];var Ae=we?Ee[yt]:Ee,$=je?de[yt]:de;st=Ye.p+Ae,it=st+$,Be.push(st,it)}}He._extremes[ue._id]=v.findExtremes(ue,Be,{padded:!1})}}function H(ue,me){for(var be=me.traces,ve=Q(ue),Me=0;Me<be.length;Me++){for(var ke=be[Me],le=ke[0].trace,De=le.type==="scatter",Oe=le.orientation==="v",He=[],Be=!1,Ye=0;Ye<ke.length;Ye++){var st=ke[Ye],it=De?0:st.b,yt=De?Oe?st.y:st.x:it+st.s;st[ve]=yt,He.push(yt),st.hasB&&He.push(it),(!st.hasB||!st.b)&&(Be=!0)}le._extremes[ue._id]=v.findExtremes(ue,He,{tozero:Be,padded:!0})}}function te(ue,me,be){var ve=Q(ue),Me=me.traces,ke,le,De,Oe,He,Be,Ye;for(Oe=0;Oe<Me.length;Oe++)if(ke=Me[Oe],le=ke[0].trace,le.type==="funnel")for(Ye=ke[0].t.offsetindex,He=0;He<ke.length;He++)Be=ke[He],Be.s!==c&&me.put(Be.p,Ye,-.5*Be.s);for(Oe=0;Oe<Me.length;Oe++){ke=Me[Oe],le=ke[0].trace,De=le.type==="funnel",Ye=le.type==="barpolar"?0:ke[0].t.offsetindex;var st=[];for(He=0;He<ke.length;He++)if(Be=ke[He],Be.s!==c){var it;De?it=Be.s:it=Be.s+Be.b;var yt=me.put(Be.p,Ye,it),_e=yt+it;Be.b=yt,Be[ve]=_e,be.norm||(st.push(_e),Be.hasB&&st.push(yt))}be.norm||(le._extremes[ue._id]=v.findExtremes(ue,st,{tozero:!0,padded:!0}))}}function J(ue){for(var me=ue.traces,be=0;be<me.length;be++)for(var ve=me[be],Me=ve[0].t.offsetindex,ke=0;ke<ve.length;ke++){var le=ve[ke];le.s!==c&&ue.put(le.p,Me,le.b+le.s)}}function ye(ue,me){for(var be=ue.traces,ve=0;ve<be.length;ve++){var Me=be[ve],ke=Me[0].trace,le=Me[0].t.offsetindex;if(ke.base===void 0)for(var De=new g([Me],{posAxis:me,sepNegVal:!0,overlapNoMerge:!0}),Oe=0;Oe<Me.length;Oe++){var He=Me[Oe];if(He.p!==c){var Be=De.put(He.p,le,He.b+He.s);Be&&(He.b=Be)}}}}function se(ue,me,be){var ve=me.traces,Me=Q(ue),ke=be.norm==="fraction"?1:100,le=ke/1e9,De=ue.l2c(ue.c2l(0)),Oe=be.mode==="stack"?ke:De;function He(oe){return d(ue.c2l(oe))&&(oe<De-le||oe>Oe+le||!d(De))}for(var Be=0;Be<ve.length;Be++){for(var Ye=ve[Be],st=Ye[0].t.offsetindex,it=Ye[0].trace,yt=[],_e=!1,Ee=!1,de=0;de<Ye.length;de++){var we=Ye[de];if(we.s!==c){var je=Math.abs(ke/me.get(we.p,st,we.s));we.b*=je,we.s*=je;var Ae=we.b,$=Ae+we.s;we[Me]=$,yt.push($),Ee=Ee||He($),we.hasB&&(yt.push(Ae),Ee=Ee||He(Ae)),(!we.hasB||!we.b)&&(_e=!0)}}it._extremes[ue._id]=v.findExtremes(ue,yt,{tozero:_e,padded:Ee})}}function he(ue,me,be,ve){for(var Me=Q(ve),ke=0;ke<ue.length;ke++)for(var le=ue[ke],De=0;De<le.length;De++){var Oe=le[De],He=Oe[Me];Oe._sMin=me[He],Oe._sMax=be[He]}}function pe(ue,me){var be=Q(me),ve={},Me,ke,le,De=1/0,Oe=-1/0;for(Me=0;Me<ue.length;Me++)for(le=ue[Me],ke=0;ke<le.length;ke++){var He=le[ke].p;d(He)&&(De=Math.min(De,He),Oe=Math.max(Oe,He))}var Be=1e4/(Oe-De),Ye=ve.round=function(Te){return String(Math.round(Be*(Te-De)))},st={},it={},yt=ue.some(function(Te){var Ue=Te[0].trace;return"marker"in Ue&&Ue.marker.cornerradius});for(Me=0;Me<ue.length;Me++){le=ue[Me],le[0].t.extents=ve;var _e=le[0].t.poffset,Ee=u(_e);for(ke=0;ke<le.length;ke++){var de=le[ke],we=de[be]-de.w/2;if(d(we)){var je=de[be]+de.w/2,Ae=Ye(de.p);ve[Ae]?ve[Ae]=[Math.min(we,ve[Ae][0]),Math.max(je,ve[Ae][1])]:ve[Ae]=[we,je]}if(de.p0=de.p+(Ee?_e[ke]:_e),de.p1=de.p0+de.w,de.s0=de.b,de.s1=de.s0+de.s,yt){var $=Math.min(de.s0,de.s1)||0,oe=Math.max(de.s0,de.s1)||0,ge=de[be];st[ge]=ge in st?Math.min(st[ge],$):$,it[ge]=ge in it?Math.max(it[ge],oe):oe}}}yt&&he(ue,st,it,me)}function Q(ue){return ue._id.charAt(0)}fe.exports={crossTraceCalc:w,setGroupPositions:s}}}),wl=n({"src/traces/scatter/cross_trace_calc.js"(ce,fe){var d=Au(),u=Su().setGroupPositions;function c(p,g){for(var w=g.xaxis,s=g.yaxis,j=p._fullLayout,b=p._fullData,z=p.calcdata,X=[],N=[],O=0;O<b.length;O++){var F=b[O];F.visible===!0&&F.type==="scatter"&&F.xaxis===w._id&&F.yaxis===s._id&&(F.orientation==="h"?X.push(z[O]):F.orientation==="v"&&N.push(z[O]))}var P={mode:j.scattermode,gap:j.scattergap};u(p,w,s,N,P),u(p,s,w,X,P)}fe.exports=function(g,w){g._fullLayout.scattermode==="group"&&c(g,w);var s=w.xaxis,j=w.yaxis,b=s._id+j._id,z=g._fullLayout._scatterStackOpts[b];if(z){var X=g.calcdata,N,O,F,P,_,R,H,te,J,ye,se,he,pe,Q,ue;for(var me in z){ye=z[me];var be=ye.traceIndices;if(be.length){for(se=ye.stackgaps==="interpolate",he=ye.groupnorm,ye.orientation==="v"?(pe="x",Q="y"):(pe="y",Q="x"),ue=new Array(be.length),N=0;N<ue.length;N++)ue[N]=!1;R=X[be[0]];var ve=new Array(R.length);for(N=0;N<R.length;N++)ve[N]=R[N][pe];for(N=1;N<be.length;N++){for(_=X[be[N]],O=F=0;O<_.length;O++){for(H=_[O][pe];H>ve[F]&&F<ve.length;F++)m(_,O,ve[F],N,ue,se,pe),O++;if(H!==ve[F]){for(P=0;P<N;P++)m(X[be[P]],F,H,P,ue,se,pe);ve.splice(F,0,H)}F++}for(;F<ve.length;F++)m(_,O,ve[F],N,ue,se,pe),O++}var Me=ve.length;for(O=0;O<R.length;O++){for(te=R[O][Q]=R[O].s,N=1;N<be.length;N++)_=X[be[N]],_[0].trace._rawLength=_[0].trace._length,_[0].trace._length=Me,te+=_[O].s,_[O][Q]=te;if(he)for(J=(he==="fraction"?te:te/100)||1,N=0;N<be.length;N++){var ke=X[be[N]][O];ke[Q]/=J,ke.sNorm=ke.s/J}}for(N=0;N<be.length;N++){_=X[be[N]];var le=_[0].trace,De=d.calcMarkerSize(le,le._rawLength),Oe=Array.isArray(De);if(De&&ue[N]||Oe){var He=De;for(De=new Array(Me),O=0;O<Me;O++)De[O]=_[O].gap?0:Oe?He[_[O].i]:He}var Be=new Array(Me),Ye=new Array(Me);for(O=0;O<Me;O++)Be[O]=_[O].x,Ye[O]=_[O].y;d.calcAxisExpansion(g,le,s,j,Be,Ye,De),_[0].t.orientation=ye.orientation}}}}};function m(p,g,w,s,j,b,z){j[s]=!0;var X={i:null,gap:!0,s:0};if(X[z]=w,p.splice(g,0,X),g&&w===p[g-1][z]){var N=p[g-1];X.s=N.s,X.i=N.i,X.gap=N.gap}else b&&(X.s=v(p,g,w,z));g||(p[0].t=p[1].t,p[0].trace=p[1].trace,delete p[1].t,delete p[1].trace)}function v(p,g,w,s){var j=p[g-1],b=p[g+1];return b?j?j.s+(b.s-j.s)*(w-j[s])/(b[s]-j[s]):b.s:j.s}}}),rl=n({"src/traces/scatter/line_points.js"(ce,fe){var d=ni(),u=W(),c=u.BADNUM,m=u.LOG_CLIP,v=m+.5,p=m-.5,g=pa(),w=g.segmentsIntersect,s=g.constrain,j=Vu();fe.exports=function(z,X){var N=X.trace||{},O=X.xaxis,F=X.yaxis,P=O.type==="log",_=F.type==="log",R=O._length,H=F._length,te=X.backoff,J=N.marker,ye=X.connectGaps,se=X.baseTolerance,he=X.shape,pe=he==="linear",Q=N.fill&&N.fill!=="none",ue=[],me=j.minTolerance,be=z.length,ve=new Array(be),Me=0,ke,le,De,Oe,He,Be,Ye,st,it,yt,_e,Ee,de,we,je,Ae;function $(qt){var ir=z[qt];if(!ir)return!1;var _r=X.linearized?O.l2p(ir.x):O.c2p(ir.x),Bt=X.linearized?F.l2p(ir.y):F.c2p(ir.y);if(_r===c){if(P&&(_r=O.c2p(ir.x,!0)),_r===c)return!1;_&&Bt===c&&(_r*=Math.abs(O._m*H*(O._m>0?v:p)/(F._m*R*(F._m>0?v:p)))),_r*=1e3}if(Bt===c){if(_&&(Bt=F.c2p(ir.y,!0)),Bt===c)return!1;Bt*=1e3}return[_r,Bt]}function oe(qt,ir,_r,Bt){var gr=_r-qt,Ar=Bt-ir,Er=.5-qt,ba=.5-ir,Ga=gr*gr+Ar*Ar,Xa=gr*Er+Ar*ba;if(Xa>0&&Xa<Ga){var Aa=Er*Ar-ba*gr;if(Aa*Aa<Ga)return!0}}var ge,Te;function Ue(qt,ir){var _r=qt[0]/R,Bt=qt[1]/H,gr=Math.max(0,-_r,_r-1,-Bt,Bt-1);return gr&&ge!==void 0&&oe(_r,Bt,ge,Te)&&(gr=0),gr&&ir&&oe(_r,Bt,ir[0]/R,ir[1]/H)&&(gr=0),(1+j.toleranceGrowth*gr)*se}function Ze(qt,ir){var _r=qt[0]-ir[0],Bt=qt[1]-ir[1];return Math.sqrt(_r*_r+Bt*Bt)}var Je=j.maxScreensAway,ft=-R*Je,wt=R*(1+Je),Ct=-H*Je,Kt=H*(1+Je),$t=[[ft,Ct,wt,Ct],[wt,Ct,wt,Kt],[wt,Kt,ft,Kt],[ft,Kt,ft,Ct]],Wt,nt,pt,Ke,gt,Ft;function Xt(qt,ir){for(var _r=[],Bt=0,gr=0;gr<4;gr++){var Ar=$t[gr],Er=w(qt[0],qt[1],ir[0],ir[1],Ar[0],Ar[1],Ar[2],Ar[3]);Er&&(!Bt||Math.abs(Er.x-_r[0][0])>1||Math.abs(Er.y-_r[0][1])>1)&&(Er=[Er.x,Er.y],Bt&&Ze(Er,qt)<Ze(_r[0],qt)?_r.unshift(Er):_r.push(Er),Bt++)}return _r}function or(qt){if(qt[0]<ft||qt[0]>wt||qt[1]<Ct||qt[1]>Kt)return[s(qt[0],ft,wt),s(qt[1],Ct,Kt)]}function sr(qt,ir){if(qt[0]===ir[0]&&(qt[0]===ft||qt[0]===wt)||qt[1]===ir[1]&&(qt[1]===Ct||qt[1]===Kt))return!0}function dr(qt,ir){var _r=[],Bt=or(qt),gr=or(ir);return Bt&&gr&&sr(Bt,gr)||(Bt&&_r.push(Bt),gr&&_r.push(gr)),_r}function wr(qt,ir,_r){return function(Bt,gr){var Ar=or(Bt),Er=or(gr),ba=[];if(Ar&&Er&&sr(Ar,Er))return ba;Ar&&ba.push(Ar),Er&&ba.push(Er);var Ga=2*g.constrain((Bt[qt]+gr[qt])/2,ir,_r)-((Ar||Bt)[qt]+(Er||gr)[qt]);if(Ga){var Xa;Ar&&Er?Xa=Ga>0==Ar[qt]>Er[qt]?Ar:Er:Xa=Ar||Er,Xa[qt]+=Ga}return ba}}var xr;he==="linear"||he==="spline"?xr=Xt:he==="hv"||he==="vh"?xr=dr:he==="hvh"?xr=wr(0,ft,wt):he==="vhv"&&(xr=wr(1,Ct,Kt));function Pr(qt,ir){var _r=ir[0]-qt[0],Bt=(ir[1]-qt[1])/_r,gr=(qt[1]*ir[0]-ir[1]*qt[0])/_r;return gr>0?[Bt>0?ft:wt,Kt]:[Bt>0?wt:ft,Ct]}function nr(qt){var ir=qt[0],_r=qt[1],Bt=ir===ve[Me-1][0],gr=_r===ve[Me-1][1];if(!(Bt&&gr))if(Me>1){var Ar=ir===ve[Me-2][0],Er=_r===ve[Me-2][1];Bt&&(ir===ft||ir===wt)&&Ar?Er?Me--:ve[Me-1]=qt:gr&&(_r===Ct||_r===Kt)&&Er?Ar?Me--:ve[Me-1]=qt:ve[Me++]=qt}else ve[Me++]=qt}function jr(qt){ve[Me-1][0]!==qt[0]&&ve[Me-1][1]!==qt[1]&&nr([pt,Ke]),nr(qt),gt=null,pt=Ke=0}var ta=g.isArrayOrTypedArray(J);function Nr(qt){if(qt&&te&&(qt.i=ke,qt.d=z,qt.trace=N,qt.marker=ta?J[qt.i]:J,qt.backoff=te),ge=qt[0]/R,Te=qt[1]/H,Wt=qt[0]<ft?ft:qt[0]>wt?wt:0,nt=qt[1]<Ct?Ct:qt[1]>Kt?Kt:0,Wt||nt){if(!Me)ve[Me++]=[Wt||qt[0],nt||qt[1]];else if(gt){var ir=xr(gt,qt);ir.length>1&&(jr(ir[0]),ve[Me++]=ir[1])}else Ft=xr(ve[Me-1],qt)[0],ve[Me++]=Ft;var _r=ve[Me-1];Wt&&nt&&(_r[0]!==Wt||_r[1]!==nt)?(gt&&(pt!==Wt&&Ke!==nt?nr(pt&&Ke?Pr(gt,qt):[pt||Wt,Ke||nt]):pt&&Ke&&nr([pt,Ke])),nr([Wt,nt])):pt-Wt&&Ke-nt&&nr([Wt||pt,nt||Ke]),gt=qt,pt=Wt,Ke=nt}else gt&&jr(xr(gt,qt)[0]),ve[Me++]=qt}for(ke=0;ke<be;ke++)if(le=$(ke),!!le){for(Me=0,gt=null,Nr(le),ke++;ke<be;ke++){if(Oe=$(ke),!Oe){if(ye)continue;break}if(!pe||!X.simplify){Nr(Oe);continue}var Jr=$(ke+1);if(yt=Ze(Oe,le),!(!(Q&&(Me===0||Me===be-1))&&yt<Ue(Oe,Jr)*me)){for(st=[(Oe[0]-le[0])/yt,(Oe[1]-le[1])/yt],He=le,_e=yt,Ee=we=je=0,Ye=!1,De=Oe,ke++;ke<z.length;ke++){if(Be=Jr,Jr=$(ke+1),!Be){if(ye)continue;break}if(it=[Be[0]-le[0],Be[1]-le[1]],Ae=it[0]*st[1]-it[1]*st[0],we=Math.min(we,Ae),je=Math.max(je,Ae),je-we>Ue(Be,Jr))break;De=Be,de=it[0]*st[0]+it[1]*st[1],de>_e?(_e=de,Oe=Be,Ye=!1):de<Ee&&(Ee=de,He=Be,Ye=!0)}if(Ye?(Nr(Oe),De!==He&&Nr(He)):(He!==le&&Nr(He),De!==Oe&&Nr(Oe)),Nr(De),ke>=z.length||!Be)break;Nr(Be),le=Be}}gt&&nr([pt||gt[0],Ke||gt[1]]),ue.push(ve.slice(0,Me))}var vt=he.slice(he.length-1);if(te&&vt!=="h"&&vt!=="v"){for(var Mt=!1,xt=-1,Le=[],ot=0;ot<ue.length;ot++)for(var ct=0;ct<ue[ot].length-1;ct++){var ut=ue[ot][ct],Pt=ue[ot][ct+1],Ot=d.applyBackoff(Pt,ut);(Ot[0]!==Pt[0]||Ot[1]!==Pt[1])&&(Mt=!0),Le[xt+1]||(xt++,Le[xt]=[ut,[Ot[0],Ot[1]]])}return Mt?Le:ue}return ue}}}),Tu=n({"src/traces/scatter/link_traces.js"(ce,fe){var d={tonextx:1,tonexty:1,tonext:1};fe.exports=function(c,m,v){var p,g,w,s,j,b={},z=!1,X=-1,N=0,O=-1;for(g=0;g<v.length;g++)p=v[g][0].trace,w=p.stackgroup||"",w?w in b?j=b[w]:(j=b[w]=N,N++):p.fill in d&&O>=0?j=O:(j=O=N,N++),j<X&&(z=!0),p._groupIndex=X=j;var F=v.slice();z&&F.sort(function(_,R){var H=_[0].trace,te=R[0].trace;return H._groupIndex-te._groupIndex||H.index-te.index});var P={};for(g=0;g<F.length;g++)p=F[g][0].trace,w=p.stackgroup||"",p.visible===!0?(p._nexttrace=null,p.fill in d&&(s=P[w],p._prevtrace=s||null,s&&(s._nexttrace=p)),p._ownfill=p.fill&&(p.fill.substr(0,6)==="tozero"||p.fill==="toself"||p.fill.substr(0,2)==="to"&&!p._prevtrace),P[w]=p):p._prevtrace=p._nexttrace=p._ownfill=null;return F}}}),Al=n({"src/traces/scatter/plot.js"(ce,fe){var d=k(),u=hr(),c=pa(),m=c.ensureSingle,v=c.identity,p=ni(),g=Oi(),w=rl(),s=Tu(),j=Bl().tester;fe.exports=function(O,F,P,_,R,H){var te,J,ye=!R,se=!!R&&R.duration>0,he=s(O,F,P);if(te=_.selectAll("g.trace").data(he,function(Q){return Q[0].trace.uid}),te.enter().append("g").attr("class",function(Q){return"trace scatter trace"+Q[0].trace.uid}).style("stroke-miterlimit",2),te.order(),b(O,te,F),se){H&&(J=H());var pe=d.transition().duration(R.duration).ease(R.easing).each("end",function(){J&&J()}).each("interrupt",function(){J&&J()});pe.each(function(){_.selectAll("g.trace").each(function(Q,ue){z(O,ue,F,Q,he,this,R)})})}else te.each(function(Q,ue){z(O,ue,F,Q,he,this,R)});ye&&te.exit().remove(),_.selectAll("path:not([d])").remove()};function b(N,O,F){O.each(function(P){var _=m(d.select(this),"g","fills");p.setClipUrl(_,F.layerClipId,N);var R=P[0].trace,H=[];R._ownfill&&H.push("_ownFill"),R._nexttrace&&H.push("_nextFill");var te=_.selectAll("g").data(H,v);te.enter().append("g"),te.exit().each(function(J){R[J]=null}).remove(),te.order().each(function(J){R[J]=m(d.select(this),"path","js-fill")})})}function z(N,O,F,P,_,R,H){var te=N._context.staticPlot,J;X(N,O,F,P,_);var ye=!!H&&H.duration>0;function se(nr){return ye?nr.transition():nr}var he=F.xaxis,pe=F.yaxis,Q=P[0].trace,ue=Q.line,me=d.select(R),be=m(me,"g","errorbars"),ve=m(me,"g","lines"),Me=m(me,"g","points"),ke=m(me,"g","text");if(u.getComponentMethod("errorbars","plot")(N,be,F,H),Q.visible!==!0)return;se(me).style("opacity",Q.opacity);var le,De,Oe=Q.fill.charAt(Q.fill.length-1);Oe!=="x"&&Oe!=="y"&&(Oe="");var He,Be;Oe==="y"?(He=1,Be=pe.c2p(0,!0)):Oe==="x"&&(He=0,Be=he.c2p(0,!0)),P[0][F.isRangePlot?"nodeRangePlot3":"node3"]=me;var Ye="",st=[],it=Q._prevtrace,yt=null,_e=null;it&&(Ye=it._prevRevpath||"",De=it._nextFill,st=it._ownPolygons,yt=it._fillsegments,_e=it._fillElement);var Ee,de,we="",je="",Ae,$,oe,ge,Te,Ue,Ze=[];Q._polygons=[];var Je=[],ft=[],wt=c.noop;if(le=Q._ownFill,g.hasLines(Q)||Q.fill!=="none"){De&&De.datum(P),["hv","vh","hvh","vhv"].indexOf(ue.shape)!==-1?(Ae=p.steps(ue.shape),$=p.steps(ue.shape.split("").reverse().join(""))):ue.shape==="spline"?Ae=$=function(nr){var jr=nr[nr.length-1];return nr.length>1&&nr[0][0]===jr[0]&&nr[0][1]===jr[1]?p.smoothclosed(nr.slice(1),ue.smoothing):p.smoothopen(nr,ue.smoothing)}:Ae=$=function(nr){return"M"+nr.join("L")},oe=function(nr){return $(nr.reverse())},ft=w(P,{xaxis:he,yaxis:pe,trace:Q,connectGaps:Q.connectgaps,baseTolerance:Math.max(ue.width||1,3)/4,shape:ue.shape,backoff:ue.backoff,simplify:ue.simplify,fill:Q.fill}),Je=new Array(ft.length);var Ct=0;for(J=0;J<ft.length;J++){var Kt,$t=ft[J];!Kt||!Oe?(Kt=$t.slice(),Je[Ct]=Kt,Ct++):Kt.push.apply(Kt,$t)}Q._fillElement=null,Q._fillExclusionElement=_e,Q._fillsegments=Je.slice(0,Ct),Je=Q._fillsegments,ft.length&&(ge=ft[0][0].slice(),Te=ft[ft.length-1],Ue=Te[Te.length-1].slice()),wt=function(nr){return function(jr){if(Ee=Ae(jr),de=oe(jr),we?Oe?(we+="L"+Ee.substr(1),je=de+("L"+je.substr(1))):(we+="Z"+Ee,je=de+"Z"+je):(we=Ee,je=de),g.hasLines(Q)){var ta=d.select(this);if(ta.datum(P),nr)se(ta.style("opacity",0).attr("d",Ee).call(p.lineGroupStyle)).style("opacity",1);else{var Nr=se(ta);Nr.attr("d",Ee),p.singleLineStyle(P,Nr)}}}}}var Wt=ve.selectAll(".js-line").data(ft);se(Wt.exit()).style("opacity",0).remove(),Wt.each(wt(!1)),Wt.enter().append("path").classed("js-line",!0).style("vector-effect",te?"none":"non-scaling-stroke").call(p.lineGroupStyle).each(wt(!0)),p.setClipUrl(Wt,F.layerClipId,N);function nt(nr){se(nr).attr("d","M0,0Z")}var pt=function(){var nr=new Array(Je.length);for(J=0;J<Je.length;J++)nr[J]=j(Je[J]);return nr},Ke=function(nr){var jr,ta;if(!nr||nr.length===0)for(jr=new Array(Je.length),ta=0;ta<Je.length;ta++){var Nr=Je[ta][0].slice(),Jr=Je[ta][Je[ta].length-1].slice();Nr[He]=Jr[He]=Be;var vt=[Jr,Nr],Mt=vt.concat(Je[ta]);jr[ta]=j(Mt)}else{for(jr=new Array(nr.length-1+Je.length),ta=0;ta<nr.length-1;ta++)jr[ta]=j(nr[ta]);var xt=nr[nr.length-1].slice();for(xt.reverse(),ta=0;ta<Je.length;ta++)jr[nr.length-1+ta]=j(Je[ta].concat(xt))}return jr};ft.length?(le?(le.datum(P),ge&&Ue&&(Oe?(ge[He]=Ue[He]=Be,se(le).attr("d","M"+Ue+"L"+ge+"L"+we.substr(1)).call(p.singleFillStyle,N),Ze=Ke(null)):(se(le).attr("d",we+"Z").call(p.singleFillStyle,N),Ze=pt())),Q._polygons=Ze,Q._fillElement=le):De&&(Q.fill.substr(0,6)==="tonext"&&we&&Ye?(Q.fill==="tonext"?(se(De).attr("d",we+"Z"+Ye+"Z").call(p.singleFillStyle,N),Ze=pt(),Q._polygons=Ze.concat(st)):(se(De).attr("d",we+"L"+Ye.substr(1)+"Z").call(p.singleFillStyle,N),Ze=Ke(yt),Q._polygons=Ze),Q._fillElement=De):nt(De)),Q._prevRevpath=je):(le?nt(le):De&&nt(De),Q._prevRevpath=null),Q._ownPolygons=Ze;function gt(nr){return nr.filter(function(jr){return!jr.gap&&jr.vis})}function Ft(nr){return nr.filter(function(jr){return jr.vis})}function Xt(nr){return nr.filter(function(jr){return!jr.gap})}function or(nr){return nr.id}function sr(nr){if(nr.ids)return or}function dr(){return!1}function wr(nr,jr,ta){var Nr,Jr,vt,Mt=ta[0].trace,xt=g.hasMarkers(Mt),Le=g.hasText(Mt),ot=sr(Mt),ct=dr,ut=dr;if(xt||Le){var Pt=v,Ot=Mt.stackgroup,qt=Ot&&N._fullLayout._scatterStackOpts[he._id+pe._id][Ot].stackgaps==="infer zero";Mt.marker.maxdisplayed||Mt._needsCull?Pt=qt?Ft:gt:Ot&&!qt&&(Pt=Xt),xt&&(ct=Pt),Le&&(ut=Pt)}Jr=nr.selectAll("path.point"),Nr=Jr.data(ct,ot);var ir=Nr.enter().append("path").classed("point",!0);ye&&ir.call(p.pointStyle,Mt,N).call(p.translatePoints,he,pe).style("opacity",0).transition().style("opacity",1),Nr.order();var _r;xt&&(_r=p.makePointStyleFns(Mt)),Nr.each(function(Bt){var gr=d.select(this),Ar=se(gr);vt=p.translatePoint(Bt,Ar,he,pe),vt?(p.singlePointStyle(Bt,Ar,Mt,_r,N),F.layerClipId&&p.hideOutsideRangePoint(Bt,Ar,he,pe,Mt.xcalendar,Mt.ycalendar),Mt.customdata&&gr.classed("plotly-customdata",Bt.data!==null&&Bt.data!==void 0)):Ar.remove()}),ye?Nr.exit().transition().style("opacity",0).remove():Nr.exit().remove(),Jr=jr.selectAll("g"),Nr=Jr.data(ut,ot),Nr.enter().append("g").classed("textpoint",!0).append("text"),Nr.order(),Nr.each(function(Bt){var gr=d.select(this),Ar=se(gr.select("text"));vt=p.translatePoint(Bt,Ar,he,pe),vt?F.layerClipId&&p.hideOutsideRangePoint(Bt,gr,he,pe,Mt.xcalendar,Mt.ycalendar):gr.remove()}),Nr.selectAll("text").call(p.textPointStyle,Mt,N).each(function(Bt){var gr=he.c2p(Bt.x),Ar=pe.c2p(Bt.y);d.select(this).selectAll("tspan.line").each(function(){se(d.select(this)).attr({x:gr,y:Ar})})}),Nr.exit().remove()}Me.datum(P),ke.datum(P),wr(Me,ke,P);var xr=Q.cliponaxis===!1,Pr=xr?null:F.layerClipId;p.setClipUrl(Me,Pr,N),p.setClipUrl(ke,Pr,N)}function X(N,O,F,P,_){var R=F.xaxis,H=F.yaxis,te=d.extent(c.simpleMap(R.range,R.r2c)),J=d.extent(c.simpleMap(H.range,H.r2c)),ye=P[0].trace;if(g.hasMarkers(ye)){var se=ye.marker.maxdisplayed;if(se!==0){var he=P.filter(function(me){return me.x>=te[0]&&me.x<=te[1]&&me.y>=J[0]&&me.y<=J[1]}),pe=Math.ceil(he.length/se),Q=0;_.forEach(function(me,be){var ve=me[0].trace;g.hasMarkers(ve)&&ve.marker.maxdisplayed>0&&be<O&&Q++});var ue=Math.round(Q*pe/3+Math.floor(Q/3)*pe/7.1);P.forEach(function(me){delete me.vis}),he.forEach(function(me,be){Math.round((be+ue)%pe)===0&&(me.vis=!0)})}}}}}),Uc=n({"src/traces/scatter/marker_colorbar.js"(ce,fe){fe.exports={container:"marker",min:"cmin",max:"cmax"}}}),zo=n({"src/traces/scatter/format_labels.js"(ce,fe){var d=mi();fe.exports=function(c,m,v){var p={},g={_fullLayout:v},w=d.getFromTrace(g,m,"x"),s=d.getFromTrace(g,m,"y"),j=c.orig_x;j===void 0&&(j=c.x);var b=c.orig_y;return b===void 0&&(b=c.y),p.xLabel=d.tickText(w,w.c2l(j),!0).text,p.yLabel=d.tickText(s,s.c2l(b),!0).text,p}}}),Ku=n({"src/traces/scatter/style.js"(ce,fe){var d=k(),u=ni(),c=hr();function m(w){var s=d.select(w).selectAll("g.trace.scatter");s.style("opacity",function(j){return j[0].trace.opacity}),s.selectAll("g.points").each(function(j){var b=d.select(this),z=j.trace||j[0].trace;v(b,z,w)}),s.selectAll("g.text").each(function(j){var b=d.select(this),z=j.trace||j[0].trace;p(b,z,w)}),s.selectAll("g.trace path.js-line").call(u.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(u.fillGroupStyle,w,!1),c.getComponentMethod("errorbars","style")(s)}function v(w,s,j){u.pointStyle(w.selectAll("path.point"),s,j)}function p(w,s,j){u.textPointStyle(w.selectAll("text"),s,j)}function g(w,s,j){var b=s[0].trace;b.selectedpoints?(u.selectedPointStyle(j.selectAll("path.point"),b),u.selectedTextStyle(j.selectAll("text"),b)):(v(j,b,w),p(j,b,w))}fe.exports={style:m,stylePoints:v,styleText:p,styleOnSelect:g}}}),ps=n({"src/traces/scatter/get_trace_color.js"(ce,fe){var d=Ve(),u=Oi();fe.exports=function(m,v){var p,g;if(m.mode==="lines")return p=m.line.color,p&&d.opacity(p)?p:m.fillcolor;if(m.mode==="none")return m.fill?m.fillcolor:"";var w=v.mcc||(m.marker||{}).color,s=v.mlcc||((m.marker||{}).line||{}).color;return g=w&&d.opacity(w)?w:s&&d.opacity(s)&&(v.mlw||((m.marker||{}).line||{}).width)?s:"",g?d.opacity(g)<.3?d.addOpacity(g,.3):g:(p=(m.line||{}).color,p&&d.opacity(p)&&u.hasLines(m)&&m.line.width?p:m.fillcolor)}}}),Qu=n({"src/traces/scatter/hover.js"(ce,fe){var d=pa(),u=Ms(),c=hr(),m=ps(),v=Ve(),p=d.fillText;fe.exports=function(w,s,j,b){var z=w.cd,X=z[0].trace,N=w.xa,O=w.ya,F=N.c2p(s),P=O.c2p(j),_=[F,P],R=X.hoveron||"",H=X.mode.indexOf("markers")!==-1?3:.5,te=!!X.xperiodalignment,J=!!X.yperiodalignment;if(R.indexOf("points")!==-1){var ye=function(st){if(te){var it=N.c2p(st.xStart),yt=N.c2p(st.xEnd);return F>=Math.min(it,yt)&&F<=Math.max(it,yt)?0:1/0}var _e=Math.max(3,st.mrc||0),Ee=1-1/_e,de=Math.abs(N.c2p(st.x)-F);return de<_e?Ee*de/_e:de-_e+Ee},se=function(st){if(J){var it=O.c2p(st.yStart),yt=O.c2p(st.yEnd);return P>=Math.min(it,yt)&&P<=Math.max(it,yt)?0:1/0}var _e=Math.max(3,st.mrc||0),Ee=1-1/_e,de=Math.abs(O.c2p(st.y)-P);return de<_e?Ee*de/_e:de-_e+Ee},he=function(st){var it=Math.max(H,st.mrc||0),yt=N.c2p(st.x)-F,_e=O.c2p(st.y)-P;return Math.max(Math.sqrt(yt*yt+_e*_e)-it,1-H/it)},pe=u.getDistanceFunction(b,ye,se,he);if(u.getClosest(z,pe,w),w.index!==!1){var Q=z[w.index],ue=N.c2p(Q.x,!0),me=O.c2p(Q.y,!0),be=Q.mrc||1;w.index=Q.i;var ve=z[0].t.orientation,Me=ve&&(Q.sNorm||Q.s),ke=ve==="h"?Me:Q.orig_x!==void 0?Q.orig_x:Q.x,le=ve==="v"?Me:Q.orig_y!==void 0?Q.orig_y:Q.y;return d.extendFlat(w,{color:m(X,Q),x0:ue-be,x1:ue+be,xLabelVal:ke,y0:me-be,y1:me+be,yLabelVal:le,spikeDistance:he(Q),hovertemplate:X.hovertemplate}),p(Q,X,w),c.getComponentMethod("errorbars","hoverInfo")(Q,X,w),[w]}}function De(st){if(!st)return!1;var it=st.node();try{var yt=new DOMPoint(_[0],_[1]);return it.isPointInFill(yt)}catch{var _e=it.ownerSVGElement.createSVGPoint();return _e.x=_[0],_e.y=_[1],it.isPointInFill(_e)}}function Oe(st){var it,yt=[],_e=1/0,Ee=-1/0,de=1/0,we=-1/0,je;for(it=0;it<st.length;it++){var Ae=st[it];Ae.contains(_)&&(yt.push(Ae),de=Math.min(de,Ae.ymin),we=Math.max(we,Ae.ymax))}if(yt.length===0)return null;de=Math.max(de,0),we=Math.min(we,O._length),je=(de+we)/2;var $,oe,ge,Te,Ue,Ze,Je;for(it=0;it<yt.length;it++)for(oe=yt[it].pts,$=1;$<oe.length;$++)Ze=oe[$-1][1],Je=oe[$][1],Ze>je!=Je>=je&&(Te=oe[$-1][0],Ue=oe[$][0],Je-Ze&&(ge=Te+(Ue-Te)*(je-Ze)/(Je-Ze),_e=Math.min(_e,ge),Ee=Math.max(Ee,ge)));return _e=Math.max(_e,0),Ee=Math.min(Ee,N._length),{x0:_e,x1:Ee,y0:je,y1:je}}if(R.indexOf("fills")!==-1&&X._fillElement){var He=De(X._fillElement)&&!De(X._fillExclusionElement);if(He){var Be=Oe(X._polygons);Be===null&&(Be={x0:_[0],x1:_[0],y0:_[1],y1:_[1]});var Ye=v.defaultLine;return v.opacity(X.fillcolor)?Ye=X.fillcolor:v.opacity((X.line||{}).color)&&(Ye=X.line.color),d.extendFlat(w,{distance:w.maxHoverDistance,x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1,color:Ye,hovertemplate:!1}),delete w.index,X.text&&!d.isArrayOrTypedArray(X.text)?w.text=String(X.text):w.text=X.name,[w]}}}}}),Gl=n({"src/traces/scatter/select.js"(ce,fe){var d=Oi();fe.exports=function(c,m){var v=c.cd,p=c.xaxis,g=c.yaxis,w=[],s=v[0].trace,j,b,z,X,N=!d.hasMarkers(s)&&!d.hasText(s);if(N)return[];if(m===!1)for(j=0;j<v.length;j++)v[j].selected=0;else for(j=0;j<v.length;j++)b=v[j],z=p.c2p(b.x),X=g.c2p(b.y),b.i!==null&&m.contains([z,X],!1,j,c)?(w.push({pointNumber:b.i,x:p.c2d(b.x),y:g.c2d(b.y)}),b.selected=1):b.selected=0;return w}}}),Sl=n({"src/plots/cartesian/attributes.js"(ce,fe){fe.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}}}),ec=n({"src/plots/cartesian/type_defaults.js"(ce,fe){var d=hr().traceIs,u=dl();fe.exports=function(w,s,j,b){j("autotypenumbers",b.autotypenumbersDflt);var z=j("type",(b.splomStash||{}).type);z==="-"&&(c(s,b.data),s.type==="-"?s.type="linear":w.type=s.type)};function c(g,w){if(g.type==="-"){var s=g._id,j=s.charAt(0),b;s.indexOf("scene")!==-1&&(s=j);var z=m(w,s,j);if(z){if(z.type==="histogram"&&j==={v:"y",h:"x"}[z.orientation||"v"]){g.type="linear";return}var X=j+"calendar",N=z[X],O={noMultiCategory:!d(z,"cartesian")||d(z,"noMultiCategory")};if(z.type==="box"&&z._hasPreCompStats&&j==={h:"x",v:"y"}[z.orientation||"v"]&&(O.noMultiCategory=!0),O.autotypenumbers=g.autotypenumbers,p(z,j)){var F=v(z),P=[];for(b=0;b<w.length;b++){var _=w[b];!d(_,"box-violin")||(_[j+"axis"]||j)!==s||(_[F]!==void 0?P.push(_[F][0]):_.name!==void 0?P.push(_.name):P.push("text"),_[X]!==N&&(N=void 0))}g.type=u(P,N,O)}else if(z.type==="splom"){var R=z.dimensions,H=R[z._axesDim[s]];H.visible&&(g.type=u(H.values,N,O))}else g.type=u(z[j]||[z[j+"0"]],N,O)}}}function m(g,w,s){for(var j=0;j<g.length;j++){var b=g[j];if(b.type==="splom"&&b._length>0&&(b["_"+s+"axes"]||{})[w])return b;if((b[s+"axis"]||s)===w){if(p(b,s))return b;if((b[s]||[]).length||b[s+"0"])return b}}}function v(g){return{v:"x",h:"y"}[g.orientation||"v"]}function p(g,w){var s=v(g),j=d(g,"box-violin"),b=d(g._fullInput||{},"candlestick");return j&&!b&&w===s&&g[s]===void 0&&g[s+"0"]===void 0}}}),Pf=n({"src/plots/cartesian/category_order_defaults.js"(ce,fe){var d=T().isTypedArraySpec;function u(c,m){var v=m.dataAttr||c._id.charAt(0),p={},g,w,s;if(m.axData)g=m.axData;else for(g=[],w=0;w<m.data.length;w++){var j=m.data[w];j[v+"axis"]===c._id&&g.push(j)}for(w=0;w<g.length;w++){var b=g[w][v];for(s=0;s<b.length;s++){var z=b[s];z!=null&&(p[z]=1)}}return Object.keys(p)}fe.exports=function(m,v,p,g){if(v.type==="category"){var w=m.categoryarray,s=Array.isArray(w)&&w.length>0||d(w),j;s&&(j="array");var b=p("categoryorder",j),z;b==="array"&&(z=p("categoryarray")),!s&&b==="array"&&(b=v.categoryorder="trace"),b==="trace"?v._initialCategories=[]:b==="array"?v._initialCategories=z.slice():(z=u(v,g).sort(),b==="category ascending"?v._initialCategories=z:b==="category descending"&&(v._initialCategories=z.reverse()))}}}}),Gc=n({"src/plots/cartesian/line_grid_defaults.js"(ce,fe){var d=A().mix,u=Pe(),c=pa();fe.exports=function(v,p,g,w){w=w||{};var s=w.dfltColor;function j(Q,ue){return c.coerce2(v,p,w.attributes,Q,ue)}var b=j("linecolor",s),z=j("linewidth"),X=g("showline",w.showLine||!!b||!!z);X||(delete p.linecolor,delete p.linewidth);var N=d(s,w.bgColor,w.blend||u.lightFraction).toRgbString(),O=j("gridcolor",N),F=j("gridwidth"),P=j("griddash"),_=g("showgrid",w.showGrid||!!O||!!F||!!P);if(_||(delete p.gridcolor,delete p.gridwidth,delete p.griddash),w.hasMinor){var R=d(p.gridcolor,w.bgColor,67).toRgbString(),H=j("minor.gridcolor",R),te=j("minor.gridwidth",p.gridwidth||1),J=j("minor.griddash",p.griddash||"solid"),ye=g("minor.showgrid",!!H||!!te||!!J);ye||(delete p.minor.gridcolor,delete p.minor.gridwidth,delete p.minor.griddash)}if(!w.noZeroLine){j("zerolinelayer");var se=j("zerolinecolor",s),he=j("zerolinewidth"),pe=g("zeroline",w.showGrid||!!se||!!he);pe||(delete p.zerolinelayer,delete p.zerolinecolor,delete p.zerolinewidth)}}}}),qc=n({"src/plots/cartesian/axis_defaults.js"(ce,fe){var d=B(),u=hr(),c=pa(),m=vn(),v=Gi(),p=yo(),g=es(),w=cl(),s=ao(),j=ci(),b=Pf(),z=Gc(),X=Ts(),N=$s(),O=ui().WEEKDAY_PATTERN,F=ui().HOUR_PATTERN;fe.exports=function(te,J,ye,se,he){var pe=se.letter,Q=se.font||{},ue=se.splomStash||{},me=ye("visible",!se.visibleDflt),be=J._template||{},ve=J.type||be.type||"-",Me;if(ve==="date"){var ke=u.getComponentMethod("calendars","handleDefaults");ke(te,J,"calendar",se.calendar),se.noTicklabelmode||(Me=ye("ticklabelmode"))}!se.noTicklabelindex&&(ve==="date"||ve==="linear")&&ye("ticklabelindex");var le="";(!se.noTicklabelposition||ve==="multicategory")&&(le=c.coerce(te,J,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:Me==="period"?["outside","inside"]:pe==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),se.noTicklabeloverflow||ye("ticklabeloverflow",le.indexOf("inside")!==-1?"hide past domain":ve==="category"||ve==="multicategory"?"allow":"hide past div"),N(J,he),X(te,J,ye,se),b(te,J,ye,se),se.noHover||(ve!=="category"&&ye("hoverformat"),se.noUnifiedhovertitle||ye("unifiedhovertitle.text"));var De=ye("color"),Oe=De!==p.color.dflt?De:Q.color,He=ue.label||he._dfltTitle[pe];if(j(te,J,ye,ve,se),!me)return J;ye("title.text",He),c.coerceFont(ye,"title.font",Q,{overrideDflt:{size:c.bigFont(Q.size),color:Oe}}),g(te,J,ye,ve);var Be=se.hasMinor;if(Be&&(m.newContainer(J,"minor"),g(te,J,ye,ve,{isMinor:!0})),s(te,J,ye,ve,se),w(te,J,ye,se),Be){var Ye=se.isMinor;se.isMinor=!0,w(te,J,ye,se),se.isMinor=Ye}z(te,J,ye,{dfltColor:De,bgColor:se.bgColor,showGrid:se.showGrid,hasMinor:Be,attributes:p}),Be&&!J.minor.ticks&&!J.minor.showgrid&&delete J.minor,(J.showline||J.ticks)&&ye("mirror");var st=ve==="multicategory";if(!se.noTickson&&(ve==="category"||st)&&(J.ticks||J.showgrid)&&(st?(ye("tickson","boundaries"),delete J.ticklabelposition):ye("tickson")),st){var it=ye("showdividers");it&&(ye("dividercolor"),ye("dividerwidth"))}if(ve==="date")if(v(te,J,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:P}),!J.rangebreaks.length)delete J.rangebreaks;else{for(var yt=0;yt<J.rangebreaks.length;yt++)if(J.rangebreaks[yt].pattern===O){J._hasDayOfWeekBreaks=!0;break}if(N(J,he),he._has("scattergl")||he._has("splom"))for(var _e=0;_e<se.data.length;_e++){var Ee=se.data[_e];(Ee.type==="scattergl"||Ee.type==="splom")&&(Ee.visible=!1,c.warn(Ee.type+" traces do not work on axes with rangebreaks. Setting trace "+Ee.index+" to `visible: false`."))}}return J};function P(H,te,J){function ye(Me,ke){return c.coerce(H,te,p.rangebreaks,Me,ke)}var se=ye("enabled");if(se){var he=ye("bounds");if(he&&he.length>=2){var pe="",Q,ue;if(he.length===2){for(Q=0;Q<2;Q++)if(ue=R(he[Q]),ue){pe=O;break}}var me=ye("pattern",pe);if(me===O)for(Q=0;Q<2;Q++)ue=R(he[Q]),ue&&(te.bounds[Q]=he[Q]=ue-1);if(me)for(Q=0;Q<2;Q++)switch(ue=he[Q],me){case O:if(!d(ue)){te.enabled=!1;return}if(ue=+ue,ue!==Math.floor(ue)||ue<0||ue>=7){te.enabled=!1;return}te.bounds[Q]=he[Q]=ue;break;case F:if(!d(ue)){te.enabled=!1;return}if(ue=+ue,ue<0||ue>24){te.enabled=!1;return}te.bounds[Q]=he[Q]=ue;break}if(J.autorange===!1){var be=J.range;if(be[0]<be[1]){if(he[0]<be[0]&&he[1]>be[1]){te.enabled=!1;return}}else if(he[0]>be[0]&&he[1]<be[1]){te.enabled=!1;return}}}else{var ve=ye("values");if(ve&&ve.length)ye("dvalue");else{te.enabled=!1;return}}}}var _={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function R(H){if(typeof H=="string")return _[H.substr(0,3).toLowerCase()]}}}),Ho=n({"src/plots/cartesian/position_defaults.js"(ce,fe){var d=B(),u=pa();fe.exports=function(m,v,p,g){var w=g.counterAxes||[],s=g.overlayableAxes||[],j=g.letter,b=g.grid,z=g.overlayingDomain,X,N,O,F,P,_;b&&(N=b._domains[j][b._axisMap[v._id]],X=b._anchors[v._id],N&&(O=b[j+"side"].split(" ")[0],F=b.domain[j][O==="right"||O==="top"?1:0])),N=N||[0,1],X=X||(d(m.position)?"free":w[0]||"free"),O=O||(j==="x"?"bottom":"left"),F=F||0,P=0,_=!1;var R=u.coerce(m,v,{anchor:{valType:"enumerated",values:["free"].concat(w),dflt:X}},"anchor"),H=u.coerce(m,v,{side:{valType:"enumerated",values:j==="x"?["bottom","top"]:["left","right"],dflt:O}},"side");if(R==="free"){if(j==="y"){var te=p("autoshift");te&&(F=H==="left"?z[0]:z[1],_=v.automargin?v.automargin:!0,P=H==="left"?-3:3),p("shift",P)}p("position",F)}p("automargin",_);var J=!1;if(s.length&&(J=u.coerce(m,v,{overlaying:{valType:"enumerated",values:[!1].concat(s),dflt:!1}},"overlaying")),!J){var ye=p("domain",N);ye[0]>ye[1]-1/4096&&(v.domain=N),u.noneOrAll(m.domain,v.domain,N),v.tickmode==="sync"&&(v.tickmode="auto")}return p("layer"),v}}}),ql=n({"src/plots/cartesian/layout_defaults.js"(ce,fe){var d=pa(),u=Ve(),c=ts().isUnifiedHover,m=Fl(),v=vn(),p=Vr(),g=yo(),w=ec(),s=qc(),j=Il(),b=Ho(),z=di(),X=z.id2name,N=z.name2id,O=ui().AX_ID_PATTERN,F=hr(),P=F.traceIs,_=F.getComponentMethod;function R(H,te,J){Array.isArray(H[te])?H[te].push(J):H[te]=[J]}fe.exports=function(te,J,ye){var se=J.autotypenumbers,he={},pe={},Q={},ue={},me={},be={},ve={},Me={},ke={},le={},De,Oe;for(De=0;De<ye.length;De++){var He=ye[De];if(P(He,"cartesian")){var Be;if(He.xaxis)Be=X(He.xaxis),R(he,Be,He);else if(He.xaxes)for(Oe=0;Oe<He.xaxes.length;Oe++)R(he,X(He.xaxes[Oe]),He);var Ye;if(He.yaxis)Ye=X(He.yaxis),R(he,Ye,He);else if(He.yaxes)for(Oe=0;Oe<He.yaxes.length;Oe++)R(he,X(He.yaxes[Oe]),He);if(He.type==="funnel"?He.orientation==="h"?(Be&&(pe[Be]=!0),Ye&&(ve[Ye]=!0)):Ye&&(Q[Ye]=!0):He.type==="image"?(Ye&&(Me[Ye]=!0),Be&&(Me[Be]=!0)):(Ye&&(me[Ye]=!0,be[Ye]=!0),(!P(He,"carpet")||He.type==="carpet"&&!He._cheater)&&Be&&(ue[Be]=!0)),He.type==="carpet"&&He._cheater&&Be&&(pe[Be]=!0),P(He,"2dMap")&&(ke[Be]=!0,ke[Ye]=!0),P(He,"oriented")){var st=He.orientation==="h"?Ye:Be;le[st]=!0}}}var it=J._subplots,yt=it.xaxis,_e=it.yaxis,Ee=d.simpleMap(yt,X),de=d.simpleMap(_e,X),we=Ee.concat(de),je=u.background;yt.length&&_e.length&&(je=d.coerce(te,J,p,"plot_bgcolor"));var Ae=u.combine(je,J.paper_bgcolor),$,oe,ge,Te,Ue;function Ze(){var ct=he[$]||[];Ue._traceIndices=ct.map(function(ut){return ut.index}),Ue._annIndices=[],Ue._shapeIndices=[],Ue._selectionIndices=[],Ue._imgIndices=[],Ue._subplotsWith=[],Ue._counterAxes=[],Ue._name=Ue._attr=$,Ue._id=oe}function Je(ct,ut){return d.coerce(Te,Ue,g,ct,ut)}function ft(ct,ut){return d.coerce2(Te,Ue,g,ct,ut)}function wt(ct){return ct==="x"?_e:yt}function Ct(ct,ut){for(var Pt=ct==="x"?Ee:de,Ot=[],qt=0;qt<Pt.length;qt++){var ir=Pt[qt];ir!==ut&&!(te[ir]||{}).overlaying&&Ot.push(N(ir))}return Ot}var Kt={x:wt("x"),y:wt("y")},$t=Kt.x.concat(Kt.y),Wt={},nt=[];function pt(){var ct=Te.matches;O.test(ct)&&$t.indexOf(ct)===-1&&(Wt[ct]=Te.type,nt=Object.keys(Wt))}var Ke=m(te,J),gt=c(Ke);for(De=0;De<we.length;De++){$=we[De],oe=N($),ge=$.charAt(0),d.isPlainObject(te[$])||(te[$]={}),Te=te[$],Ue=v.newContainer(J,$,ge+"axis"),Ze();var Ft=ge==="x"&&!ue[$]&&pe[$]||ge==="y"&&!me[$]&&Q[$],Xt=ge==="y"&&(!be[$]&&ve[$]||Me[$]),or={hasMinor:!0,letter:ge,font:J.font,outerTicks:ke[$],showGrid:!le[$],data:he[$]||[],bgColor:Ae,calendar:J.calendar,automargin:!0,visibleDflt:Ft,reverseDflt:Xt,autotypenumbersDflt:se,splomStash:((J._splomAxes||{})[ge]||{})[oe],noAutotickangles:ge==="y"};Je("uirevision",J.uirevision),w(Te,Ue,Je,or),s(Te,Ue,Je,or,J);var sr=gt&&ge===Ke.charAt(0),dr=ft("spikecolor",gt?Ue.color:void 0),wr=ft("spikethickness",gt?1.5:void 0),xr=ft("spikedash",gt?"dot":void 0),Pr=ft("spikemode",gt?"across":void 0),nr=ft("spikesnap"),jr=Je("showspikes",!!sr||!!dr||!!wr||!!xr||!!Pr||!!nr);jr||(delete Ue.spikecolor,delete Ue.spikethickness,delete Ue.spikedash,delete Ue.spikemode,delete Ue.spikesnap);var ta=X(Te.overlaying),Nr=[0,1];if(J[ta]!==void 0){var Jr=X(J[ta].anchor);J[Jr]!==void 0&&(Nr=J[Jr].domain)}b(Te,Ue,Je,{letter:ge,counterAxes:Kt[ge],overlayableAxes:Ct(ge,$),grid:J.grid,overlayingDomain:Nr}),Je("title.standoff"),pt(),Ue._input=Te}for(De=0;De<nt.length;){oe=nt[De++],$=X(oe),ge=$.charAt(0),d.isPlainObject(te[$])||(te[$]={}),Te=te[$],Ue=v.newContainer(J,$,ge+"axis"),Ze();var vt={letter:ge,font:J.font,outerTicks:ke[$],showGrid:!le[$],data:[],bgColor:Ae,calendar:J.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:se,splomStash:((J._splomAxes||{})[ge]||{})[oe]};Je("uirevision",J.uirevision),Ue.type=Wt[oe]||"linear",s(Te,Ue,Je,vt,J),b(Te,Ue,Je,{letter:ge,counterAxes:Kt[ge],overlayableAxes:Ct(ge,$),grid:J.grid}),Je("fixedrange"),Je("modebardisable"),pt(),Ue._input=Te}var Mt=_("rangeslider","handleDefaults"),xt=_("rangeselector","handleDefaults");for(De=0;De<Ee.length;De++)$=Ee[De],Te=te[$],Ue=J[$],Mt(te,J,$),Ue.type==="date"&&xt(Te,Ue,J,de,Ue.calendar),Je("fixedrange"),Je("modebardisable");for(De=0;De<de.length;De++){$=de[De],Te=te[$],Ue=J[$];var Le=J[X(Ue.anchor)],ot=_("rangeslider","isVisible")(Le);Je("fixedrange",ot),Je("modebardisable")}j.handleDefaults(te,J,{axIds:$t.concat(nt).sort(z.idSort),axHasImage:Me})}}}),Vl=n({"src/plots/cartesian/transition_axes.js"(ce,fe){var d=k(),u=hr(),c=pa(),m=ni(),v=mi();fe.exports=function(g,w,s,j){var b=g._fullLayout;if(w.length===0){v.redrawComponents(g);return}function z(J){var ye=J.xaxis,se=J.yaxis;b._defs.select("#"+J.clipId+"> rect").call(m.setTranslate,0,0).call(m.setScale,1,1),J.plot.call(m.setTranslate,ye._offset,se._offset).call(m.setScale,1,1);var he=J.plot.selectAll(".scatterlayer .trace");he.selectAll(".point").call(m.setPointGroupScale,1,1),he.selectAll(".textpoint").call(m.setTextPointsScale,1,1),he.call(m.hideOutsideRangePoints,J)}function X(J,ye){var se=J.plotinfo,he=se.xaxis,pe=se.yaxis,Q=he._length,ue=pe._length,me=!!J.xr1,be=!!J.yr1,ve=[];if(me){var Me=c.simpleMap(J.xr0,he.r2l),ke=c.simpleMap(J.xr1,he.r2l),le=Me[1]-Me[0],De=ke[1]-ke[0];ve[0]=(Me[0]*(1-ye)+ye*ke[0]-Me[0])/(Me[1]-Me[0])*Q,ve[2]=Q*(1-ye+ye*De/le),he.range[0]=he.l2r(Me[0]*(1-ye)+ye*ke[0]),he.range[1]=he.l2r(Me[1]*(1-ye)+ye*ke[1])}else ve[0]=0,ve[2]=Q;if(be){var Oe=c.simpleMap(J.yr0,pe.r2l),He=c.simpleMap(J.yr1,pe.r2l),Be=Oe[1]-Oe[0],Ye=He[1]-He[0];ve[1]=(Oe[1]*(1-ye)+ye*He[1]-Oe[1])/(Oe[0]-Oe[1])*ue,ve[3]=ue*(1-ye+ye*Ye/Be),pe.range[0]=he.l2r(Oe[0]*(1-ye)+ye*He[0]),pe.range[1]=pe.l2r(Oe[1]*(1-ye)+ye*He[1])}else ve[1]=0,ve[3]=ue;v.drawOne(g,he,{skipTitle:!0}),v.drawOne(g,pe,{skipTitle:!0}),v.redrawComponents(g,[he._id,pe._id]);var st=me?Q/ve[2]:1,it=be?ue/ve[3]:1,yt=me?ve[0]:0,_e=be?ve[1]:0,Ee=me?ve[0]/ve[2]*Q:0,de=be?ve[1]/ve[3]*ue:0,we=he._offset-Ee,je=pe._offset-de;se.clipRect.call(m.setTranslate,yt,_e).call(m.setScale,1/st,1/it),se.plot.call(m.setTranslate,we,je).call(m.setScale,st,it),m.setPointGroupScale(se.zoomScalePts,1/st,1/it),m.setTextPointsScale(se.zoomScaleTxt,1/st,1/it)}var N;j&&(N=j());function O(){for(var J={},ye=0;ye<w.length;ye++){var se=w[ye],he=se.plotinfo.xaxis,pe=se.plotinfo.yaxis;se.xr1&&(J[he._name+".range"]=se.xr1.slice()),se.yr1&&(J[pe._name+".range"]=se.yr1.slice())}return N&&N(),u.call("relayout",g,J).then(function(){for(var Q=0;Q<w.length;Q++)z(w[Q].plotinfo)})}function F(){for(var J={},ye=0;ye<w.length;ye++){var se=w[ye],he=se.plotinfo.xaxis,pe=se.plotinfo.yaxis;se.xr0&&(J[he._name+".range"]=se.xr0.slice()),se.yr0&&(J[pe._name+".range"]=se.yr0.slice())}return u.call("relayout",g,J).then(function(){for(var Q=0;Q<w.length;Q++)z(w[Q].plotinfo)})}var P,_,R,H=d.ease(s.easing);g._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(R),R=null,F()});function te(){_=Date.now();for(var J=Math.min(1,(_-P)/s.duration),ye=H(J),se=0;se<w.length;se++)X(w[se],ye);_-P>s.duration?(O(),R=window.cancelAnimationFrame(te)):R=window.requestAnimationFrame(te)}return P=Date.now(),R=window.requestAnimationFrame(te),Promise.resolve()}}}),Yl=n({"src/plots/cartesian/index.js"(ce){var fe=k(),d=hr(),u=pa(),c=Di(),m=ni(),v=Ys().getModuleCalcData,p=di(),g=ui(),w=go(),s=u.ensureSingle;function j(P,_,R){return u.ensureSingle(P,_,R,function(H){H.datum(R)})}var b=g.zindexSeparator;ce.name="cartesian",ce.attr=["xaxis","yaxis"],ce.idRoot=["x","y"],ce.idRegex=g.idRegex,ce.attrRegex=g.attrRegex,ce.attributes=Sl(),ce.layoutAttributes=yo(),ce.supplyLayoutDefaults=ql(),ce.transitionAxes=Vl(),ce.finalizeSubplots=function(P,_){var R=_._subplots,H=R.xaxis,te=R.yaxis,J=R.cartesian,ye=J,se={},he={},pe,Q,ue;for(pe=0;pe<ye.length;pe++){var me=ye[pe].split("y");se[me[0]]=1,he["y"+me[1]]=1}for(pe=0;pe<H.length;pe++)Q=H[pe],se[Q]||(ue=(P[p.id2name(Q)]||{}).anchor,g.idRegex.y.test(ue)||(ue="y"),J.push(Q+ue),ye.push(Q+ue),he[ue]||(he[ue]=1,u.pushUnique(te,ue)));for(pe=0;pe<te.length;pe++)ue=te[pe],he[ue]||(Q=(P[p.id2name(ue)]||{}).anchor,g.idRegex.x.test(Q)||(Q="x"),J.push(Q+ue),ye.push(Q+ue),se[Q]||(se[Q]=1,u.pushUnique(H,Q)));if(!ye.length){Q="",ue="";for(var be in P)if(g.attrRegex.test(be)){var ve=be.charAt(0);ve==="x"?(!Q||+be.substr(5)<+Q.substr(5))&&(Q=be):(!ue||+be.substr(5)<+ue.substr(5))&&(ue=be)}Q=Q?p.name2id(Q):"x",ue=ue?p.name2id(ue):"y",H.push(Q),te.push(ue),J.push(Q+ue)}},ce.plot=function(P,_,R,H){var te=P._fullLayout,J=te._subplots.cartesian,ye=P.calcdata,se;if(!Array.isArray(_))for(_=[],se=0;se<ye.length;se++)_.push(se);for(var he=te._zindices,pe=0;pe<he.length;pe++){var Q=he[pe];for(se=0;se<J.length;se++){var ue=J[se],me=te._plots[ue];if(pe>0){var be=me.id;if(be.indexOf(b)!==-1)continue;be+=b+(pe+1),me=u.extendFlat({},me,{id:be,plot:te._cartesianlayer.selectAll(".subplot").select("."+be)})}for(var ve=[],Me,ke=0;ke<ye.length;ke++){var le=ye[ke],De=le[0].trace;Q===(De.zorder||0)&&De.xaxis+De.yaxis===ue&&((_.indexOf(De.index)!==-1||De.carpet)&&(Me&&Me[0].trace.xaxis+Me[0].trace.yaxis===ue&&["tonextx","tonexty","tonext"].indexOf(De.fill)!==-1&&ve.indexOf(Me)===-1&&ve.push(Me),ve.push(le)),Me=le)}z(P,me,ve,R,H)}}};function z(P,_,R,H,te){for(var J=g.traceLayerClasses,ye=P._fullLayout,se=ye._zindices,he=ye._modules,pe,Q,ue,me=[],be=[],ve=0;ve<se.length;ve++)for(var Me=se[ve],ke=0;ke<he.length;ke++){pe=he[ke];var le=pe.name,De=d.modules[le].categories;if(De.svg){var Oe=pe.layerName||le+"layer",He=Oe+(ve?Number(ve)+1:""),Be=pe.plot;Q=v(R,Be,Me),ue=Q[0],R=Q[1],ue.length&&me.push({i:J.indexOf(Oe),zindex:ve,className:He,plotMethod:Be,cdModule:ue}),De.zoomScale&&be.push("."+He)}}me.sort(function(it,yt){return(it.zindex||0)-(yt.zindex||0)||it.i-yt.i});var Ye=_.plot.selectAll("g.mlayer").data(me,function(it){return it.className});if(Ye.enter().append("g").attr("class",function(it){return it.className}).classed("mlayer",!0).classed("rangeplot",_.isRangePlot),Ye.exit().remove(),Ye.order(),Ye.each(function(it){var yt=fe.select(this),_e=it.className;it.plotMethod(P,_,it.cdModule,yt,H,te),g.clipOnAxisFalseQuery.indexOf("."+_e)===-1&&m.setClipUrl(yt,_.layerClipId,P)}),ye._has("scattergl")&&(pe=d.getModule("scattergl"),ue=v(R,pe)[0],pe.plot(P,_,ue)),!P._context.staticPlot&&(_._hasClipOnAxisFalse&&(_.clipOnAxisFalseTraces=_.plot.selectAll(g.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),be.length)){var st=_.plot.selectAll(be.join(",")).selectAll(".trace");_.zoomScalePts=st.selectAll("path.point"),_.zoomScaleTxt=st.selectAll(".textpoint")}}ce.clean=function(P,_,R,H){var te=H._plots||{},J=_._plots||{},ye=H._subplots||{},se,he,pe;if(H._hasOnlyLargeSploms&&!_._hasOnlyLargeSploms)for(pe in te)se=te[pe],se.plotgroup&&se.plotgroup.remove();var Q=H._has&&H._has("gl"),ue=_._has&&_._has("gl");if(Q&&!ue)for(pe in te)se=te[pe],se._scene&&se._scene.destroy();if(ye.xaxis&&ye.yaxis){var me=p.listIds({_fullLayout:H});for(he=0;he<me.length;he++){var be=me[he];_[p.id2name(be)]||H._infolayer.selectAll(".g-"+be+"title").remove()}}var ve=H._has&&H._has("cartesian"),Me=_._has&&_._has("cartesian");if(ve&&!Me)O(H._cartesianlayer.selectAll(".subplot"),H),H._defs.selectAll(".axesclip").remove(),delete H._axisConstraintGroups,delete H._axisMatchGroups;else if(ye.cartesian)for(he=0;he<ye.cartesian.length;he++){var ke=ye.cartesian[he];if(ke.indexOf(b)===-1&&!J[ke]){var le="."+ke+",."+ke+"-x,."+ke+"-y";H._cartesianlayer.selectAll(le).remove(),F(ke,H)}}},ce.drawFramework=function(P){var _=P._fullLayout,R=P.calcdata,H,te={};for(H=0;H<R.length;H++){var J=R[H][0],ye=J.trace,se=ye.zorder||0;te[se]||(te[se]=[]),te[se].push(J)}var he=Object.keys(te).map(Number).sort(u.sorterAsc);he.length||(he=[0]),_._zindices=he;var pe=X(P),Q=pe.length,ue=[];for(H=0;H<Q;H++)ue[H]=pe[H].slice();for(var me=1;me<he.length;me++){var be=[];for(H=0;H<Q;H++)be[H]=pe[H].slice(),be[H][0]+=b+(me+1);ue=ue.concat(be)}var ve=_._cartesianlayer.selectAll(".subplot").data(ue,String);ve.enter().append("g").attr("class",function(Me){return"subplot "+Me[0]}),ve.order(),ve.exit().call(O,_),ve.each(function(Me){var ke=Me[0],le=ke.indexOf(b),De=le!==-1,Oe=De?ke.slice(0,le):ke,He=_._plots[ke];He||(He=u.extendFlat({},_._plots[Oe]),He&&(He.id=ke,_._plots[ke]=He,_._subplots.cartesian.push(ke))),He&&(He.plotgroup=fe.select(this),N(P,He),De||(He.draglayer=s(_._draggers,"g",ke)))})},ce.rangePlot=function(P,_,R){N(P,_),z(P,_,R),c.style(P)};function X(P){var _=P._fullLayout,R=_._zindices.length,H=_._subplots.cartesian,te=H.length,J,ye,se,he,pe,Q,ue=[],me=[];for(J=0;J<te;J++){se=H[J],he=_._plots[se],pe=he.xaxis,Q=he.yaxis;var be=pe._mainAxis,ve=Q._mainAxis,Me=be._id+ve._id,ke=_._plots[Me];he.overlays=[],Me!==se&&ke?(he.mainplot=Me,he.mainplotinfo=ke,me.push(se)):(he.mainplot=void 0,he.mainplotinfo=void 0,ue.push(se))}for(J=0;J<me.length;J++)se=me[J],he=_._plots[se],he.mainplotinfo.overlays.push(he);var le=ue.concat(me),De=[];for(J=0;J<te;J++){se=le[J],he=_._plots[se],pe=he.xaxis,Q=he.yaxis;for(var Oe=[],He=1;He<=R;He++){var Be="";for(He>1&&(Be+=b+He),Oe.push(se+Be),ye=0;ye<he.overlays.length;ye++)Oe.push(he.overlays[ye].id+Be)}Oe=Oe.concat([pe.layer,Q.layer,pe.overlaying||"",Q.overlaying||""]),De.push(Oe)}return De}function N(P,_){var R=P._fullLayout,H=_.plotgroup,te=_.id,J=te.indexOf(b),ye=J!==-1,se=g.layerValue2layerClass[_.xaxis.layer],he=g.layerValue2layerClass[_.yaxis.layer],pe=R._hasOnlyLargeSploms,Q=R._zindices.length>1,ue=_.mainplotinfo;if(!_.mainplot||Q)if(pe)_.xlines=s(H,"path","xlines-above"),_.ylines=s(H,"path","ylines-above"),_.xaxislayer=s(H,"g","xaxislayer-above"),_.yaxislayer=s(H,"g","yaxislayer-above");else{if(!ye){var me=s(H,"g","layer-subplot");_.shapelayer=s(me,"g","shapelayer"),_.imagelayer=s(me,"g","imagelayer"),ue&&Q?(_.minorGridlayer=ue.minorGridlayer,_.gridlayer=ue.gridlayer,_.zerolinelayer=ue.zerolinelayer):(_.minorGridlayer=s(H,"g","minor-gridlayer"),_.gridlayer=s(H,"g","gridlayer"),_.zerolinelayer=s(H,"g","zerolinelayer"));var be=s(H,"g","layer-between");_.shapelayerBetween=s(be,"g","shapelayer"),_.imagelayerBetween=s(be,"g","imagelayer"),s(H,"path","xlines-below"),s(H,"path","ylines-below"),_.overlinesBelow=s(H,"g","overlines-below"),s(H,"g","xaxislayer-below"),s(H,"g","yaxislayer-below"),_.overaxesBelow=s(H,"g","overaxes-below")}_.overplot=s(H,"g","overplot"),_.plot=s(_.overplot,"g",te),ue&&Q?_.zerolinelayerAbove=ue.zerolinelayerAbove:_.zerolinelayerAbove=s(H,"g","zerolinelayer-above"),ye||(_.xlines=s(H,"path","xlines-above"),_.ylines=s(H,"path","ylines-above"),_.overlinesAbove=s(H,"g","overlines-above"),s(H,"g","xaxislayer-above"),s(H,"g","yaxislayer-above"),_.overaxesAbove=s(H,"g","overaxes-above"),_.xlines=H.select(".xlines-"+se),_.ylines=H.select(".ylines-"+he),_.xaxislayer=H.select(".xaxislayer-"+se),_.yaxislayer=H.select(".yaxislayer-"+he))}else{var ve=ue.plotgroup,Me=te+"-x",ke=te+"-y";_.minorGridlayer=ue.minorGridlayer,_.gridlayer=ue.gridlayer,_.zerolinelayer=ue.zerolinelayer,_.zerolinelayerAbove=ue.zerolinelayerAbove,s(ue.overlinesBelow,"path",Me),s(ue.overlinesBelow,"path",ke),s(ue.overaxesBelow,"g",Me),s(ue.overaxesBelow,"g",ke),_.plot=s(ue.overplot,"g",te),s(ue.overlinesAbove,"path",Me),s(ue.overlinesAbove,"path",ke),s(ue.overaxesAbove,"g",Me),s(ue.overaxesAbove,"g",ke),_.xlines=ve.select(".overlines-"+se).select("."+Me),_.ylines=ve.select(".overlines-"+he).select("."+ke),_.xaxislayer=ve.select(".overaxes-"+se).select("."+Me),_.yaxislayer=ve.select(".overaxes-"+he).select("."+ke)}ye||(pe||(j(_.minorGridlayer,"g",_.xaxis._id),j(_.minorGridlayer,"g",_.yaxis._id),_.minorGridlayer.selectAll("g").map(function(le){return le[0]}).sort(p.idSort),j(_.gridlayer,"g",_.xaxis._id),j(_.gridlayer,"g",_.yaxis._id),_.gridlayer.selectAll("g").map(function(le){return le[0]}).sort(p.idSort)),_.xlines.style("fill","none").classed("crisp",!0),_.ylines.style("fill","none").classed("crisp",!0))}function O(P,_){if(P){var R={};P.each(function(he){var pe=he[0],Q=fe.select(this);Q.remove(),F(pe,_),R[pe]=!0});for(var H in _._plots)for(var te=_._plots[H],J=te.overlays||[],ye=0;ye<J.length;ye++){var se=J[ye];R[se.id]&&se.plot.selectAll(".trace").remove()}}}function F(P,_){_._draggers.selectAll("g."+P).remove(),_._defs.select("#clip"+_._uid+P+"plot").remove()}ce.toSVG=function(P){var _=P._fullLayout._glimages,R=fe.select(P).selectAll(".svg-container"),H=R.filter(function(J,ye){return ye===R.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function te(){var J=this,ye=J.toDataURL("image/png"),se=_.append("svg:image");se.attr({xmlns:w.svg,"xlink:href":ye,preserveAspectRatio:"none",x:0,y:0,width:J.style.width,height:J.style.height})}H.each(te)},ce.updateFx=Yu().updateFx}}),Mu=n({"src/traces/scatter/index.js"(ce,fe){var d=Oi();fe.exports={hasLines:d.hasLines,hasMarkers:d.hasMarkers,hasText:d.hasText,isBubble:d.isBubble,attributes:yl(),layoutAttributes:Qo(),supplyDefaults:Hc(),crossTraceDefaults:Xu(),supplyLayoutDefaults:$o(),calc:Au().calc,crossTraceCalc:wl(),arraysToCalcdata:tl(),plot:Al(),colorbar:Uc(),formatLabels:zo(),style:Ku().style,styleOnSelect:Ku().styleOnSelect,hoverPoints:Qu(),selectPoints:Gl(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:Yl(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}}}),Xo=n({"src/components/annotations/draw_arrow_head.js"(ce,fe){var d=k(),u=Ve(),c=gl(),m=pa(),v=m.strScale,p=m.strRotate,g=m.strTranslate;fe.exports=function(s,j,b){var z=s.node(),X=c[b.arrowhead||0],N=c[b.startarrowhead||0],O=(b.arrowwidth||1)*(b.arrowsize||1),F=(b.arrowwidth||1)*(b.startarrowsize||1),P=j.indexOf("start")>=0,_=j.indexOf("end")>=0,R=X.backoff*O+b.standoff,H=N.backoff*F+b.startstandoff,te,J,ye,se;if(z.nodeName==="line"){te={x:+s.attr("x1"),y:+s.attr("y1")},J={x:+s.attr("x2"),y:+s.attr("y2")};var he=te.x-J.x,pe=te.y-J.y;if(ye=Math.atan2(pe,he),se=ye+Math.PI,R&&H&&R+H>Math.sqrt(he*he+pe*pe)){Be();return}if(R){if(R*R>he*he+pe*pe){Be();return}var Q=R*Math.cos(ye),ue=R*Math.sin(ye);J.x+=Q,J.y+=ue,s.attr({x2:J.x,y2:J.y})}if(H){if(H*H>he*he+pe*pe){Be();return}var me=H*Math.cos(ye),be=H*Math.sin(ye);te.x-=me,te.y-=be,s.attr({x1:te.x,y1:te.y})}}else if(z.nodeName==="path"){var ve=z.getTotalLength(),Me="";if(ve<R+H){Be();return}var ke=z.getPointAtLength(0),le=z.getPointAtLength(.1);ye=Math.atan2(ke.y-le.y,ke.x-le.x),te=z.getPointAtLength(Math.min(H,ve)),Me="0px,"+H+"px,";var De=z.getPointAtLength(ve),Oe=z.getPointAtLength(ve-.1);se=Math.atan2(De.y-Oe.y,De.x-Oe.x),J=z.getPointAtLength(Math.max(0,ve-R));var He=Me?H+R:R;Me+=ve-He+"px,"+ve+"px",s.style("stroke-dasharray",Me)}function Be(){s.style("stroke-dasharray","0px,100px")}function Ye(st,it,yt,_e){st.path&&(st.noRotate&&(yt=0),d.select(z.parentNode).append("path").attr({class:s.attr("class"),d:st.path,transform:g(it.x,it.y)+p(yt*180/Math.PI)+v(_e)}).style({fill:u.rgb(b.arrowcolor),"stroke-width":0}))}P&&Ye(N,te,ye,F),_&&Ye(X,J,se,O)}}}),Lo=n({"src/components/annotations/draw.js"(ce,fe){var d=k(),u=hr(),c=Di(),m=pa(),v=m.strTranslate,p=mi(),g=Ve(),w=ni(),s=Ms(),j=Ui(),b=Ki(),z=rs(),X=vn().arrayEditor,N=Xo();fe.exports={draw:O,drawOne:F,drawRaw:_};function O(R){var H=R._fullLayout;H._infolayer.selectAll(".annotation").remove();for(var te=0;te<H.annotations.length;te++)H.annotations[te].visible&&F(R,te);return c.previousPromises(R)}function F(R,H){var te=R._fullLayout,J=te.annotations[H]||{},ye=p.getFromId(R,J.xref),se=p.getFromId(R,J.yref);ye&&ye.setScale(),se&&se.setScale(),_(R,J,H,!1,ye,se)}function P(R,H,te,J,ye){var se=ye[te],he=ye[te+"ref"],pe=te.indexOf("y")!==-1,Q=p.getRefType(he)==="domain",ue=pe?J.h:J.w;return R?Q?se+(pe?-H:H)/R._length:R.p2r(R.r2p(se)+H):se+(pe?-H:H)/ue}function _(R,H,te,J,ye,se){var he=R._fullLayout,pe=R._fullLayout._size,Q=R._context.edits,ue,me;J?(ue="annotation-"+J,me=J+".annotations"):(ue="annotation",me="annotations");var be=X(R.layout,me,H),ve=be.modifyBase,Me=be.modifyItem,ke=be.getUpdateObj;he._infolayer.selectAll("."+ue+'[data-index="'+te+'"]').remove();var le="clip"+he._uid+"_ann"+te;if(!H._input||H.visible===!1){d.selectAll("#"+le).remove();return}var De={x:{},y:{}},Oe=+H.textangle||0,He=he._infolayer.append("g").classed(ue,!0).attr("data-index",String(te)).style("opacity",H.opacity),Be=He.append("g").classed("annotation-text-g",!0),Ye=Q[H.showarrow?"annotationTail":"annotationPosition"],st=H.captureevents||Q.annotationText||Ye;function it(Ze){var Je={index:te,annotation:H._input,fullAnnotation:H,event:Ze};return J&&(Je.subplotId=J),Je}var yt=Be.append("g").style("pointer-events",st?"all":null).call(b,"pointer").on("click",function(){R._dragging=!1,R.emit("plotly_clickannotation",it(d.event))});H.hovertext&&yt.on("mouseover",function(){var Ze=H.hoverlabel,Je=Ze.font,ft=this.getBoundingClientRect(),wt=R.getBoundingClientRect();s.loneHover({x0:ft.left-wt.left,x1:ft.right-wt.left,y:(ft.top+ft.bottom)/2-wt.top,text:H.hovertext,color:Ze.bgcolor,borderColor:Ze.bordercolor,fontFamily:Je.family,fontSize:Je.size,fontColor:Je.color,fontWeight:Je.weight,fontStyle:Je.style,fontVariant:Je.variant,fontShadow:Je.fontShadow,fontLineposition:Je.fontLineposition,fontTextcase:Je.fontTextcase},{container:he._hoverlayer.node(),outerContainer:he._paper.node(),gd:R})}).on("mouseout",function(){s.loneUnhover(he._hoverlayer.node())});var _e=H.borderwidth,Ee=H.borderpad,de=_e+Ee,we=yt.append("rect").attr("class","bg").style("stroke-width",_e+"px").call(g.stroke,H.bordercolor).call(g.fill,H.bgcolor),je=H.width||H.height,Ae=he._topclips.selectAll("#"+le).data(je?[0]:[]);Ae.enter().append("clipPath").classed("annclip",!0).attr("id",le).append("rect"),Ae.exit().remove();var $=H.font,oe=he._meta?m.templateString(H.text,he._meta):H.text,ge=yt.append("text").classed("annotation-text",!0).text(oe);function Te(Ze){return Ze.call(w.font,$).attr({"text-anchor":{left:"start",right:"end"}[H.align]||"middle"}),j.convertToTspans(Ze,R,Ue),Ze}function Ue(){var Ze=ge.selectAll("a");if(Ze.size()===1&&Ze.text()===ge.text()){var Je=yt.insert("a",":first-child").attr({"xlink:xlink:href":Ze.attr("xlink:href"),"xlink:xlink:show":Ze.attr("xlink:show")}).style({cursor:"pointer"});Je.node().appendChild(we.node())}var ft=yt.select(".annotation-text-math-group"),wt=!ft.empty(),Ct=w.bBox((wt?ft:ge).node()),Kt=Ct.width,$t=Ct.height,Wt=H.width||Kt,nt=H.height||$t,pt=Math.round(Wt+2*de),Ke=Math.round(nt+2*de);function gt(Oa,va){return va==="auto"&&(Oa<1/3?va="left":Oa>2/3?va="right":va="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[va]}for(var Ft=!1,Xt=["x","y"],or=0;or<Xt.length;or++){var sr=Xt[or],dr=H[sr+"ref"]||sr,wr=H["a"+sr+"ref"],xr={x:ye,y:se}[sr],Pr=(Oe+(sr==="x"?0:-90))*Math.PI/180,nr=pt*Math.cos(Pr),jr=Ke*Math.sin(Pr),ta=Math.abs(nr)+Math.abs(jr),Nr=H[sr+"anchor"],Jr=H[sr+"shift"]*(sr==="x"?1:-1),vt=De[sr],Mt,xt,Le,ot,ct,ut=p.getRefType(dr);if(xr&&ut!=="domain"){var Pt=xr.r2fraction(H[sr]);(Pt<0||Pt>1)&&(wr===dr?(Pt=xr.r2fraction(H["a"+sr]),(Pt<0||Pt>1)&&(Ft=!0)):Ft=!0),Mt=xr._offset+xr.r2p(H[sr]),ot=.5}else{var Ot=ut==="domain";sr==="x"?(Le=H[sr],Mt=Ot?xr._offset+xr._length*Le:Mt=pe.l+pe.w*Le):(Le=1-H[sr],Mt=Ot?xr._offset+xr._length*Le:Mt=pe.t+pe.h*Le),ot=H.showarrow?.5:Le}if(H.showarrow){vt.head=Mt;var qt=H["a"+sr];if(ct=nr*gt(.5,H.xanchor)-jr*gt(.5,H.yanchor),wr===dr){var ir=p.getRefType(wr);ir==="domain"?(sr==="y"&&(qt=1-qt),vt.tail=xr._offset+xr._length*qt):ir==="paper"?sr==="y"?(qt=1-qt,vt.tail=pe.t+pe.h*qt):vt.tail=pe.l+pe.w*qt:vt.tail=xr._offset+xr.r2p(qt),xt=ct}else vt.tail=Mt+qt,xt=ct+qt;vt.text=vt.tail+ct;var _r=he[sr==="x"?"width":"height"];if(dr==="paper"&&(vt.head=m.constrain(vt.head,1,_r-1)),wr==="pixel"){var Bt=-Math.max(vt.tail-3,vt.text),gr=Math.min(vt.tail+3,vt.text)-_r;Bt>0?(vt.tail+=Bt,vt.text+=Bt):gr>0&&(vt.tail-=gr,vt.text-=gr)}vt.tail+=Jr,vt.head+=Jr}else ct=ta*gt(ot,Nr),xt=ct,vt.text=Mt+ct;vt.text+=Jr,ct+=Jr,xt+=Jr,H["_"+sr+"padplus"]=ta/2+xt,H["_"+sr+"padminus"]=ta/2-xt,H["_"+sr+"size"]=ta,H["_"+sr+"shift"]=ct}if(Ft){yt.remove();return}var Ar=0,Er=0;if(H.align!=="left"&&(Ar=(Wt-Kt)*(H.align==="center"?.5:1)),H.valign!=="top"&&(Er=(nt-$t)*(H.valign==="middle"?.5:1)),wt)ft.select("svg").attr({x:de+Ar-1,y:de+Er}).call(w.setClipUrl,je?le:null,R);else{var ba=de+Er-Ct.top,Ga=de+Ar-Ct.left;ge.call(j.positionText,Ga,ba).call(w.setClipUrl,je?le:null,R)}Ae.select("rect").call(w.setRect,de,de,Wt,nt),we.call(w.setRect,_e/2,_e/2,pt-_e,Ke-_e),yt.call(w.setTranslate,Math.round(De.x.text-pt/2),Math.round(De.y.text-Ke/2)),Be.attr({transform:"rotate("+Oe+","+De.x.text+","+De.y.text+")"});var Xa=function(Oa,va){He.selectAll(".annotation-arrow-g").remove();var ma=De.x.head,Va=De.y.head,ja=De.x.tail+Oa,$a=De.y.tail+va,La=De.x.text+Oa,la=De.y.text+va,Ba=m.rotationXYMatrix(Oe,La,la),un=m.apply2DTransform(Ba),pn=m.apply2DTransform2(Ba),qa=+we.attr("width"),nn=+we.attr("height"),cn=La-.5*qa,Cn=cn+qa,Ja=la-.5*nn,xn=Ja+nn,We=[[cn,Ja,cn,xn],[cn,xn,Cn,xn],[Cn,xn,Cn,Ja],[Cn,Ja,cn,Ja]].map(pn);if(!We.reduce(function(Or,Br){return Or^!!m.segmentsIntersect(ma,Va,ma+1e6,Va+1e6,Br[0],Br[1],Br[2],Br[3])},!1)){We.forEach(function(Or){var Br=m.segmentsIntersect(ja,$a,ma,Va,Or[0],Or[1],Or[2],Or[3]);Br&&(ja=Br.x,$a=Br.y)});var Re=H.arrowwidth,Zt=H.arrowcolor,Ht=H.arrowside,Rt=He.append("g").style({opacity:g.opacity(Zt)}).classed("annotation-arrow-g",!0),Dt=Rt.append("path").attr("d","M"+ja+","+$a+"L"+ma+","+Va).style("stroke-width",Re+"px").call(g.stroke,g.rgb(Zt));if(N(Dt,Ht,H),Q.annotationPosition&&Dt.node().parentNode&&!J){var Ut=ma,pr=Va;if(H.standoff){var jt=Math.sqrt(Math.pow(ma-ja,2)+Math.pow(Va-$a,2));Ut+=H.standoff*(ja-ma)/jt,pr+=H.standoff*($a-Va)/jt}var Jt=Rt.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(ja-Ut)+","+($a-pr),transform:v(Ut,pr)}).style("stroke-width",Re+6+"px").call(g.stroke,"rgba(0,0,0,0)").call(g.fill,"rgba(0,0,0,0)"),cr,rr;z.init({element:Jt.node(),gd:R,prepFn:function(){var Or=w.getTranslate(yt);cr=Or.x,rr=Or.y,ye&&ye.autorange&&ve(ye._name+".autorange",!0),se&&se.autorange&&ve(se._name+".autorange",!0)},moveFn:function(Or,Br){var ra=un(cr,rr),Ca=ra[0]+Or,Ma=ra[1]+Br;yt.call(w.setTranslate,Ca,Ma),Me("x",P(ye,Or,"x",pe,H)),Me("y",P(se,Br,"y",pe,H)),H.axref===H.xref&&Me("ax",P(ye,Or,"ax",pe,H)),H.ayref===H.yref&&Me("ay",P(se,Br,"ay",pe,H)),Rt.attr("transform",v(Or,Br)),Be.attr({transform:"rotate("+Oe+","+Ca+","+Ma+")"})},doneFn:function(){u.call("_guiRelayout",R,ke());var Or=document.querySelector(".js-notes-box-panel");Or&&Or.redraw(Or.selectedObj)}})}}};if(H.showarrow&&Xa(0,0),Ye){var Aa;z.init({element:yt.node(),gd:R,prepFn:function(){Aa=Be.attr("transform")},moveFn:function(Oa,va){var ma="pointer";if(H.showarrow)H.axref===H.xref?Me("ax",P(ye,Oa,"ax",pe,H)):Me("ax",H.ax+Oa),H.ayref===H.yref?Me("ay",P(se,va,"ay",pe.w,H)):Me("ay",H.ay+va),Xa(Oa,va);else{if(J)return;var Va,ja;if(ye)Va=P(ye,Oa,"x",pe,H);else{var $a=H._xsize/pe.w,La=H.x+(H._xshift-H.xshift)/pe.w-$a/2;Va=z.align(La+Oa/pe.w,$a,0,1,H.xanchor)}if(se)ja=P(se,va,"y",pe,H);else{var la=H._ysize/pe.h,Ba=H.y-(H._yshift+H.yshift)/pe.h-la/2;ja=z.align(Ba-va/pe.h,la,0,1,H.yanchor)}Me("x",Va),Me("y",ja),(!ye||!se)&&(ma=z.getCursor(ye?.5:Va,se?.5:ja,H.xanchor,H.yanchor))}Be.attr({transform:v(Oa,va)+Aa}),b(yt,ma)},clickFn:function(Oa,va){H.captureevents&&R.emit("plotly_clickannotation",it(va))},doneFn:function(){b(yt),u.call("_guiRelayout",R,ke());var Oa=document.querySelector(".js-notes-box-panel");Oa&&Oa.redraw(Oa.selectedObj)}})}}Q.annotationText?ge.call(j.makeEditable,{delegate:yt,gd:R}).call(Te).on("edit",function(Ze){H.text=Ze,this.call(Te),Me("text",Ze),ye&&ye.autorange&&ve(ye._name+".autorange",!0),se&&se.autorange&&ve(se._name+".autorange",!0),u.call("_guiRelayout",R,ke())}):ge.call(Te)}}}),al=n({"src/components/annotations/click.js"(ce,fe){var d=pa(),u=hr(),c=vn().arrayEditor;fe.exports={hasClickToShow:m,onClick:v};function m(w,s){var j=p(w,s);return j.on.length>0||j.explicitOff.length>0}function v(w,s){var j=p(w,s),b=j.on,z=j.off.concat(j.explicitOff),X={},N=w._fullLayout.annotations,O,F;if(b.length||z.length){for(O=0;O<b.length;O++)F=c(w.layout,"annotations",N[b[O]]),F.modifyItem("visible",!0),d.extendFlat(X,F.getUpdateObj());for(O=0;O<z.length;O++)F=c(w.layout,"annotations",N[z[O]]),F.modifyItem("visible",!1),d.extendFlat(X,F.getUpdateObj());return u.call("update",w,{},X)}}function p(w,s){var j=w._fullLayout.annotations,b=[],z=[],X=[],N=(s||[]).length,O,F,P,_,R,H,te,J;for(O=0;O<j.length;O++)if(P=j[O],_=P.clicktoshow,_){for(F=0;F<N;F++)if(R=s[F],H=R.xaxis,te=R.yaxis,H._id===P.xref&&te._id===P.yref&&H.d2r(R.x)===g(P._xclick,H)&&te.d2r(R.y)===g(P._yclick,te)){P.visible?_==="onout"?J=z:J=X:J=b,J.push(O);break}F===N&&P.visible&&_==="onout"&&z.push(O)}return{on:b,off:z,explicitOff:X}}function g(w,s){return s.type==="log"?s.l2r(w):s.d2r(w)}}}),as=n({"src/components/annotations/common_defaults.js"(ce,fe){var d=pa(),u=Ve();fe.exports=function(m,v,p,g){g("opacity");var w=g("bgcolor"),s=g("bordercolor"),j=u.opacity(s);g("borderpad");var b=g("borderwidth"),z=g("showarrow");g("text",z?" ":p._dfltTitle.annotation),g("textangle"),d.coerceFont(g,"font",p.font),g("width"),g("align");var X=g("height");if(X&&g("valign"),z){var N=g("arrowside"),O,F;N.indexOf("end")!==-1&&(O=g("arrowhead"),F=g("arrowsize")),N.indexOf("start")!==-1&&(g("startarrowhead",O),g("startarrowsize",F)),g("arrowcolor",j?v.bordercolor:u.defaultLine),g("arrowwidth",(j&&b||1)*2),g("standoff"),g("startstandoff")}var P=g("hovertext"),_=p.hoverlabel||{};if(P){var R=g("hoverlabel.bgcolor",_.bgcolor||(u.opacity(w)?u.rgb(w):u.defaultLine)),H=g("hoverlabel.bordercolor",_.bordercolor||u.contrast(R)),te=d.extendFlat({},_.font);te.color||(te.color=H),d.coerceFont(g,"hoverlabel.font",te)}g("captureevents",!!P)}}}),ms=n({"src/components/annotations/defaults.js"(ce,fe){var d=pa(),u=mi(),c=Gi(),m=as(),v=Hl();fe.exports=function(w,s){c(w,s,{name:"annotations",handleItemDefaults:p})};function p(g,w,s){function j(pe,Q){return d.coerce(g,w,v,pe,Q)}var b=j("visible"),z=j("clicktoshow");if(b||z){m(g,w,s,j);for(var X=w.showarrow,N=["x","y"],O=[-10,-30],F={_fullLayout:s},P=0;P<2;P++){var _=N[P],R=u.coerceRef(g,w,F,_,"","paper");if(R!=="paper"){var H=u.getFromId(F,R);H._annIndices.push(w._index)}if(u.coercePosition(w,F,j,R,_,.5),X){var te="a"+_,J=u.coerceRef(g,w,F,te,"pixel",["pixel","paper"]);J!=="pixel"&&J!==R&&(J=w[te]="pixel");var ye=J==="pixel"?O[P]:.4;u.coercePosition(w,F,j,J,te,ye)}j(_+"anchor"),j(_+"shift")}if(d.noneOrAll(g,w,["x","y"]),X&&d.noneOrAll(g,w,["ax","ay"]),z){var se=j("xclick"),he=j("yclick");w._xclick=se===void 0?w.x:u.cleanPosition(se,F,w.xref),w._yclick=he===void 0?w.y:u.cleanPosition(he,F,w.yref)}}}}}),Ds=n({"src/components/annotations/calc_autorange.js"(ce,fe){var d=pa(),u=mi(),c=Lo().draw;fe.exports=function(g){var w=g._fullLayout,s=d.filterVisible(w.annotations);if(s.length&&g._fullData.length)return d.syncOrAsync([c,m],g)};function m(p){var g=p._fullLayout;d.filterVisible(g.annotations).forEach(function(w){var s=u.getFromId(p,w.xref),j=u.getFromId(p,w.yref),b=u.getRefType(w.xref),z=u.getRefType(w.yref);w._extremes={},b==="range"&&v(w,s),z==="range"&&v(w,j)})}function v(p,g){var w=g._id,s=w.charAt(0),j=p[s],b=p["a"+s],z=p[s+"ref"],X=p["a"+s+"ref"],N=p["_"+s+"padplus"],O=p["_"+s+"padminus"],F={x:1,y:-1}[s]*p[s+"shift"],P=3*p.arrowsize*p.arrowwidth||0,_=P+F,R=P-F,H=3*p.startarrowsize*p.arrowwidth||0,te=H+F,J=H-F,ye;if(X===z){var se=u.findExtremes(g,[g.r2c(j)],{ppadplus:_,ppadminus:R}),he=u.findExtremes(g,[g.r2c(b)],{ppadplus:Math.max(N,te),ppadminus:Math.max(O,J)});ye={min:[se.min[0],he.min[0]],max:[se.max[0],he.max[0]]}}else te=b?te+b:te,J=b?J-b:J,ye=u.findExtremes(g,[g.r2c(j)],{ppadplus:Math.max(N,_,te),ppadminus:Math.max(O,R,J)});p._extremes[w]=ye}}}),gs=n({"src/components/annotations/convert_coords.js"(ce,fe){var d=B(),u=I();fe.exports=function(m,v,p,g){v=v||{};var w=p==="log"&&v.type==="linear",s=p==="linear"&&v.type==="log";if(!(w||s))return;var j=m._fullLayout.annotations,b=v._id.charAt(0),z,X;function N(F){var P=z[F],_=null;w?_=u(P,v.range):_=Math.pow(10,P),d(_)||(_=null),g(X+F,_)}for(var O=0;O<j.length;O++)z=j[O],X="annotations["+O+"].",z[b+"ref"]===v._id&&N(b),z["a"+b+"ref"]===v._id&&N("a"+b)}}}),Vc=n({"src/components/annotations/index.js"(ce,fe){var d=Lo(),u=al();fe.exports={moduleType:"component",name:"annotations",layoutAttributes:Hl(),supplyLayoutDefaults:ms(),includeBasePlot:bl()("annotations"),calcAutorange:Ds(),draw:d.draw,drawOne:d.drawOne,drawRaw:d.drawRaw,hasClickToShow:u.hasClickToShow,onClick:u.onClick,convertCoords:gs()}}}),Eu=n({"src/components/annotations3d/attributes.js"(ce,fe){var d=Hl(),u=wa().overrideAll,c=vn().templatedArray;fe.exports=u(c("annotation",{visible:d.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:d.xanchor,xshift:d.xshift,yanchor:d.yanchor,yshift:d.yshift,text:d.text,textangle:d.textangle,font:d.font,width:d.width,height:d.height,opacity:d.opacity,align:d.align,valign:d.valign,bgcolor:d.bgcolor,bordercolor:d.bordercolor,borderpad:d.borderpad,borderwidth:d.borderwidth,showarrow:d.showarrow,arrowcolor:d.arrowcolor,arrowhead:d.arrowhead,startarrowhead:d.startarrowhead,arrowside:d.arrowside,arrowsize:d.arrowsize,startarrowsize:d.startarrowsize,arrowwidth:d.arrowwidth,standoff:d.standoff,startstandoff:d.startstandoff,hovertext:d.hovertext,hoverlabel:d.hoverlabel,captureevents:d.captureevents}),"calc","from-root")}}),Yc=n({"src/components/annotations3d/defaults.js"(ce,fe){var d=pa(),u=mi(),c=Gi(),m=as(),v=Eu();fe.exports=function(w,s,j){c(w,s,{name:"annotations",handleItemDefaults:p,fullLayout:j.fullLayout})};function p(g,w,s,j){function b(N,O){return d.coerce(g,w,v,N,O)}function z(N){var O=N+"axis",F={_fullLayout:{}};return F._fullLayout[O]=s[O],u.coercePosition(w,F,b,N,N,.5)}var X=b("visible");X&&(m(g,w,j.fullLayout,b),z("x"),z("y"),z("z"),d.noneOrAll(g,w,["x","y","z"]),w.xref="x",w.yref="y",w.zref="z",b("xanchor"),b("yanchor"),b("xshift"),b("yshift"),w.showarrow&&(w.axref="pixel",w.ayref="pixel",b("ax",-10),b("ay",-30),d.noneOrAll(g,w,["ax","ay"])))}}}),fo=n({"src/components/annotations3d/convert.js"(ce,fe){var d=pa(),u=mi();fe.exports=function(v){for(var p=v.fullSceneLayout,g=p.annotations,w=0;w<g.length;w++)c(g[w],v);v.fullLayout._infolayer.selectAll(".annotation-"+v.id).remove()};function c(m,v){var p=v.fullSceneLayout,g=p.domain,w=v.fullLayout._size,s={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};m._xa={},d.extendFlat(m._xa,s),u.setConvert(m._xa),m._xa._offset=w.l+g.x[0]*w.w,m._xa.l2p=function(){return .5*(1+m._pdata[0]/m._pdata[3])*w.w*(g.x[1]-g.x[0])},m._ya={},d.extendFlat(m._ya,s),u.setConvert(m._ya),m._ya._offset=w.t+(1-g.y[1])*w.h,m._ya.l2p=function(){return .5*(1-m._pdata[1]/m._pdata[3])*w.h*(g.y[1]-g.y[0])}}}}),Pi=n({"src/plots/gl3d/project.js"(ce,fe){function d(c,m){var v=[0,0,0,0],p,g;for(p=0;p<4;++p)for(g=0;g<4;++g)v[g]+=c[4*p+g]*m[p];return v}function u(c,m){var v=d(c.projection,d(c.view,d(c.model,[m[0],m[1],m[2],1])));return v}fe.exports=u}}),Jn=n({"src/components/annotations3d/draw.js"(ce,fe){var d=Lo().drawRaw,u=Pi(),c=["x","y","z"];fe.exports=function(v){for(var p=v.fullSceneLayout,g=v.dataScale,w=p.annotations,s=0;s<w.length;s++){for(var j=w[s],b=!1,z=0;z<3;z++){var X=c[z],N=j[X],O=p[X+"axis"],F=O.r2fraction(N);if(F<0||F>1){b=!0;break}}b?v.fullLayout._infolayer.select(".annotation-"+v.id+'[data-index="'+s+'"]').remove():(j._pdata=u(v.glplot.cameraParams,[p.xaxis.r2l(j.x)*g[0],p.yaxis.r2l(j.y)*g[1],p.zaxis.r2l(j.z)*g[2]]),d(v.graphDiv,j,s,v.id,j._xa,j._ya))}}}}),ys=n({"src/components/annotations3d/index.js"(ce,fe){var d=hr(),u=pa();fe.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:Eu()}}},layoutAttributes:Eu(),handleDefaults:Yc(),includeBasePlot:c,convert:fo(),draw:Jn()};function c(m,v){var p=d.subplotsRegistry.gl3d;if(p)for(var g=p.attrRegex,w=Object.keys(m),s=0;s<w.length;s++){var j=w[s];g.test(j)&&(m[j].annotations||[]).length&&(u.pushUnique(v._basePlotModules,p),u.pushUnique(v._subplots.gl3d,j))}}}}),To=n({"src/components/shapes/attributes.js"(ce,fe){var d=Hl(),u=G(),c=yl().line,m=Rr().dash,v=L().extendFlat,p=vn().templatedArray;Yo();var g=$e(),w=kt().shapeTexttemplateAttrs,s=ha();fe.exports=p("shape",{visible:v({},g.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:v({},g.legend,{editType:"calc+arraydraw"}),legendgroup:v({},g.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:v({},g.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:u({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:v({},g.legendrank,{editType:"calc+arraydraw"}),legendwidth:v({},g.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:v({},d.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:v({},d.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:v({},c.color,{editType:"arraydraw"}),width:v({},c.width,{editType:"calc+arraydraw"}),dash:v({},m,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:w({},{keys:Object.keys(s)}),font:u({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})}}),Wc=n({"src/components/shapes/defaults.js"(ce,fe){var d=pa(),u=mi(),c=Gi(),m=To(),v=Es();fe.exports=function(s,j){c(s,j,{name:"shapes",handleItemDefaults:g})};function p(w,s){return w?"bottom":s.indexOf("top")!==-1?"top":s.indexOf("bottom")!==-1?"bottom":"middle"}function g(w,s,j){function b(_e,Ee){return d.coerce(w,s,m,_e,Ee)}s._isShape=!0;var z=b("visible");if(z){var X=b("showlegend");X&&(b("legend"),b("legendwidth"),b("legendgroup"),b("legendgrouptitle.text"),d.coerceFont(b,"legendgrouptitle.font"),b("legendrank"));var N=b("path"),O=N?"path":"rect",F=b("type",O),P=F!=="path";P&&delete s.path,b("editable"),b("layer"),b("opacity"),b("fillcolor"),b("fillrule");var _=b("line.width");_&&(b("line.color"),b("line.dash"));for(var R=b("xsizemode"),H=b("ysizemode"),te=["x","y"],J=0;J<2;J++){var ye=te[J],se=ye+"anchor",he=ye==="x"?R:H,pe={_fullLayout:j},Q,ue,me,be=u.coerceRef(w,s,pe,ye,void 0,"paper"),ve=u.getRefType(be);if(ve==="range"?(Q=u.getFromId(pe,be),Q._shapeIndices.push(s._index),me=v.rangeToShapePosition(Q),ue=v.shapePositionToRange(Q),(Q.type==="category"||Q.type==="multicategory")&&(b(ye+"0shift"),b(ye+"1shift"))):ue=me=d.identity,P){var Me=.25,ke=.75,le=ye+"0",De=ye+"1",Oe=w[le],He=w[De];w[le]=ue(w[le],!0),w[De]=ue(w[De],!0),he==="pixel"?(b(le,0),b(De,10)):(u.coercePosition(s,pe,b,be,le,Me),u.coercePosition(s,pe,b,be,De,ke)),s[le]=me(s[le]),s[De]=me(s[De]),w[le]=Oe,w[De]=He}if(he==="pixel"){var Be=w[se];w[se]=ue(w[se],!0),u.coercePosition(s,pe,b,be,se,.25),s[se]=me(s[se]),w[se]=Be}}P&&d.noneOrAll(w,s,["x0","x1","y0","y1"]);var Ye=F==="line",st,it;if(P&&(st=b("label.texttemplate")),st||(it=b("label.text")),it||st){b("label.textangle");var yt=b("label.textposition",Ye?"middle":"middle center");b("label.xanchor"),b("label.yanchor",p(Ye,yt)),b("label.padding"),d.coerceFont(b,"label.font",j.font)}}}}}),zs=n({"src/components/shapes/draw_newshape/defaults.js"(ce,fe){var d=Ve(),u=pa();function c(m,v){return m?"bottom":v.indexOf("top")!==-1?"top":v.indexOf("bottom")!==-1?"bottom":"middle"}fe.exports=function(v,p,g){g("newshape.visible"),g("newshape.name"),g("newshape.showlegend"),g("newshape.legend"),g("newshape.legendwidth"),g("newshape.legendgroup"),g("newshape.legendgrouptitle.text"),u.coerceFont(g,"newshape.legendgrouptitle.font"),g("newshape.legendrank"),g("newshape.drawdirection"),g("newshape.layer"),g("newshape.fillcolor"),g("newshape.fillrule"),g("newshape.opacity");var w=g("newshape.line.width");if(w){var s=(v||{}).plot_bgcolor||"#FFF";g("newshape.line.color",d.contrast(s)),g("newshape.line.dash")}var j=v.dragmode==="drawline",b=g("newshape.label.text"),z=g("newshape.label.texttemplate");if(b||z){g("newshape.label.textangle");var X=g("newshape.label.textposition",j?"middle":"middle center");g("newshape.label.xanchor"),g("newshape.label.yanchor",c(j,X)),g("newshape.label.padding"),u.coerceFont(g,"newshape.label.font",p.font)}g("activeshape.fillcolor"),g("activeshape.opacity")}}}),Ff=n({"src/components/shapes/calc_autorange.js"(ce,fe){var d=pa(),u=mi(),c=Zs(),m=Es();fe.exports=function(j){var b=j._fullLayout,z=d.filterVisible(b.shapes);if(!(!z.length||!j._fullData.length))for(var X=0;X<z.length;X++){var N=z[X];N._extremes={};var O,F,P=u.getRefType(N.xref),_=u.getRefType(N.yref);N.xref!=="paper"&&P!=="domain"&&(O=u.getFromId(j,N.xref),F=w(O,N,c.paramIsX),F&&(N._extremes[O._id]=u.findExtremes(O,F,v(N)))),N.yref!=="paper"&&_!=="domain"&&(O=u.getFromId(j,N.yref),F=w(O,N,c.paramIsY),F&&(N._extremes[O._id]=u.findExtremes(O,F,p(N))))}};function v(s){return g(s.line.width,s.xsizemode,s.x0,s.x1,s.path,!1)}function p(s){return g(s.line.width,s.ysizemode,s.y0,s.y1,s.path,!0)}function g(s,j,b,z,X,N){var O=s/2,F=N;if(j==="pixel"){var P=X?m.extractPathCoords(X,N?c.paramIsY:c.paramIsX):[b,z],_=d.aggNums(Math.max,null,P),R=d.aggNums(Math.min,null,P),H=R<0?Math.abs(R)+O:O,te=_>0?_+O:O;return{ppad:O,ppadplus:F?H:te,ppadminus:F?te:H}}else return{ppad:O}}function w(s,j,b){var z=s._id.charAt(0)==="x"?"x":"y",X=s.type==="category"||s.type==="multicategory",N,O,F=0,P=0,_=X?s.r2c:s.d2c,R=j[z+"sizemode"]==="scaled";if(R?(N=j[z+"0"],O=j[z+"1"],X&&(F=j[z+"0shift"],P=j[z+"1shift"])):(N=j[z+"anchor"],O=j[z+"anchor"]),N!==void 0)return[_(N)+F,_(O)+P];if(j.path){var H=1/0,te=-1/0,J=j.path.match(c.segmentRE),ye,se,he,pe,Q;for(s.type==="date"&&(_=m.decodeDate(_)),ye=0;ye<J.length;ye++)se=J[ye],he=b[se.charAt(0)].drawn,he!==void 0&&(pe=J[ye].substr(1).match(c.paramRE),!(!pe||pe.length<he)&&(Q=_(pe[he]),Q<H&&(H=Q),Q>te&&(te=Q)));if(te>=H)return[H,te]}}}}),Wl=n({"src/components/shapes/index.js"(ce,fe){var d=Dc();fe.exports={moduleType:"component",name:"shapes",layoutAttributes:To(),supplyLayoutDefaults:Wc(),supplyDrawNewShapeDefaults:zs(),includeBasePlot:bl()("shapes"),calcAutorange:Ff(),draw:d.draw,drawOne:d.drawOne}}}),Ls=n({"src/components/images/attributes.js"(ce,fe){var d=ui(),u=vn().templatedArray;Yo(),fe.exports=u("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})}}),Tl=n({"src/components/images/defaults.js"(ce,fe){var d=pa(),u=mi(),c=Gi(),m=Ls(),v="images";fe.exports=function(w,s){var j={name:v,handleItemDefaults:p};c(w,s,j)};function p(g,w,s){function j(R,H){return d.coerce(g,w,m,R,H)}var b=j("source"),z=j("visible",!!b);if(!z)return w;j("layer"),j("xanchor"),j("yanchor"),j("sizex"),j("sizey"),j("sizing"),j("opacity");for(var X={_fullLayout:s},N=["x","y"],O=0;O<2;O++){var F=N[O],P=u.coerceRef(g,w,X,F,"paper",void 0);if(P!=="paper"){var _=u.getFromId(X,P);_._imgIndices.push(w._index)}u.coercePosition(w,X,j,P,F,0)}return w}}}),$c=n({"src/components/images/draw.js"(ce,fe){var d=k(),u=ni(),c=mi(),m=di(),v=go();fe.exports=function(g){var w=g._fullLayout,s=[],j={},b=[],z,X;for(X=0;X<w.images.length;X++){var N=w.images[X];if(N.visible)if(N.layer==="below"&&N.xref!=="paper"&&N.yref!=="paper"){z=m.ref2id(N.xref)+m.ref2id(N.yref);var O=w._plots[z];if(!O){b.push(N);continue}O.mainplot&&(z=O.mainplot.id),j[z]||(j[z]=[]),j[z].push(N)}else N.layer==="above"?s.push(N):b.push(N)}var F={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function P(pe){var Q=d.select(this);if(this._imgSrc!==pe.source)if(Q.attr("xmlns",v.svg),!g._context.staticPlot||pe.source&&pe.source.slice(0,5)==="data:")Q.attr("xlink:href",pe.source),this._imgSrc=pe.source;else{var ue=new Promise((function(me){var be=new Image;this.img=be,be.setAttribute("crossOrigin","anonymous"),be.onerror=ve,be.onload=function(){var Me=document.createElement("canvas");Me.width=this.width,Me.height=this.height;var ke=Me.getContext("2d",{willReadFrequently:!0});ke.drawImage(this,0,0);var le=Me.toDataURL("image/png");Q.attr("xlink:href",le),me()},Q.on("error",ve),be.src=pe.source,this._imgSrc=pe.source;function ve(){Q.remove(),me()}}).bind(this));g._promises.push(ue)}}function _(pe){var Q=d.select(this),ue=c.getFromId(g,pe.xref),me=c.getFromId(g,pe.yref),be=c.getRefType(pe.xref)==="domain",ve=c.getRefType(pe.yref)==="domain",Me=w._size,ke,le;ue!==void 0?ke=typeof pe.xref=="string"&&be?ue._length*pe.sizex:Math.abs(ue.l2p(pe.sizex)-ue.l2p(0)):ke=pe.sizex*Me.w,me!==void 0?le=typeof pe.yref=="string"&&ve?me._length*pe.sizey:Math.abs(me.l2p(pe.sizey)-me.l2p(0)):le=pe.sizey*Me.h;var De=ke*F.x[pe.xanchor].offset,Oe=le*F.y[pe.yanchor].offset,He=F.x[pe.xanchor].sizing+F.y[pe.yanchor].sizing,Be,Ye;switch(ue!==void 0?Be=typeof pe.xref=="string"&&be?ue._length*pe.x+ue._offset:ue.r2p(pe.x)+ue._offset:Be=pe.x*Me.w+Me.l,Be+=De,me!==void 0?Ye=typeof pe.yref=="string"&&ve?me._length*(1-pe.y)+me._offset:me.r2p(pe.y)+me._offset:Ye=Me.h-pe.y*Me.h+Me.t,Ye+=Oe,pe.sizing){case"fill":He+=" slice";break;case"stretch":He="none";break}Q.attr({x:Be,y:Ye,width:ke,height:le,preserveAspectRatio:He,opacity:pe.opacity});var st=ue&&c.getRefType(pe.xref)!=="domain"?ue._id:"",it=me&&c.getRefType(pe.yref)!=="domain"?me._id:"",yt=st+it;u.setClipUrl(Q,yt?"clip"+w._uid+yt:null,g)}function R(pe){return[pe.xref,pe.x,pe.sizex,pe.yref,pe.y,pe.sizey].join("_")}function H(pe,Q){return pe._index-Q._index}var te=w._imageLowerLayer.selectAll("image").data(b,R),J=w._imageUpperLayer.selectAll("image").data(s,R);te.enter().append("image"),J.enter().append("image"),te.exit().remove(),J.exit().remove(),te.each(function(pe){P.bind(this)(pe),_.bind(this)(pe)}),J.each(function(pe){P.bind(this)(pe),_.bind(this)(pe)}),te.sort(H),J.sort(H);var ye=Object.keys(w._plots);for(X=0;X<ye.length;X++){z=ye[X];var se=w._plots[z];if(se.imagelayer){var he=se.imagelayer.selectAll("image").data(j[z]||[],R);he.enter().append("image"),he.exit().remove(),he.each(function(pe){P.bind(this)(pe),_.bind(this)(pe)}),he.sort(H)}}}}}),Cu=n({"src/components/images/convert_coords.js"(ce,fe){var d=B(),u=I();fe.exports=function(m,v,p,g){v=v||{};var w=p==="log"&&v.type==="linear",s=p==="linear"&&v.type==="log";if(w||s){for(var j=m._fullLayout.images,b=v._id.charAt(0),z,X,N=0;N<j.length;N++)if(z=j[N],X="images["+N+"].",z[b+"ref"]===v._id){var O=z[b],F=z["size"+b],P=null,_=null;if(w){P=u(O,v.range);var R=F/Math.pow(10,P)/2;_=2*Math.log(R+Math.sqrt(1+R*R))/Math.LN10}else P=Math.pow(10,O),_=P*(Math.pow(10,F/2)-Math.pow(10,-F/2));d(P)?d(_)||(_=null):(P=null,_=null),g(X+b,P),g(X+"size"+b,_)}}}}}),Xc=n({"src/components/images/index.js"(ce,fe){fe.exports={moduleType:"component",name:"images",layoutAttributes:Ls(),supplyLayoutDefaults:Tl(),includeBasePlot:bl()("images"),draw:$c(),convertCoords:Cu()}}}),Ns=n({"src/components/updatemenus/constants.js"(ce,fe){fe.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}}}),bs=n({"src/components/updatemenus/attributes.js"(ce,fe){var d=G(),u=Pe(),c=L().extendFlat,m=wa().overrideAll,v=ea(),p=vn().templatedArray,g=p("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});fe.exports=m(p("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:g,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:c(v({editType:"arraydraw"}),{}),font:d({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:u.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")}}),nl=n({"src/components/updatemenus/defaults.js"(ce,fe){var d=pa(),u=Gi(),c=bs(),m=Ns(),v=m.name,p=c.buttons;fe.exports=function(j,b){var z={name:v,handleItemDefaults:g};u(j,b,z)};function g(s,j,b){function z(O,F){return d.coerce(s,j,c,O,F)}var X=u(s,j,{name:"buttons",handleItemDefaults:w}),N=z("visible",X.length>0);N&&(z("active"),z("direction"),z("type"),z("showactive"),z("x"),z("y"),d.noneOrAll(s,j,["x","y"]),z("xanchor"),z("yanchor"),z("pad.t"),z("pad.r"),z("pad.b"),z("pad.l"),d.coerceFont(z,"font",b.font),z("bgcolor",b.paper_bgcolor),z("bordercolor"),z("borderwidth"))}function w(s,j){function b(X,N){return d.coerce(s,j,p,X,N)}var z=b("visible",s.method==="skip"||Array.isArray(s.args));z&&(b("method"),b("args"),b("args2"),b("label"),b("execute"))}}}),Os=n({"src/components/updatemenus/scrollbox.js"(ce,fe){fe.exports=v;var d=k(),u=Ve(),c=ni(),m=pa();function v(p,g,w){this.gd=p,this.container=g,this.id=w,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}v.barWidth=2,v.barLength=20,v.barRadius=2,v.barPad=1,v.barColor="#808BA4",v.prototype.enable=function(g,w,s){var j=this.gd._fullLayout,b=j.width,z=j.height;this.position=g;var X=this.position.l,N=this.position.w,O=this.position.t,F=this.position.h,P=this.position.direction,_=P==="down",R=P==="left",H=P==="right",te=P==="up",J=N,ye=F,se,he,pe,Q;!_&&!R&&!H&&!te&&(this.position.direction="down",_=!0);var ue=_||te;ue?(se=X,he=se+J,_?(pe=O,Q=Math.min(pe+ye,z),ye=Q-pe):(Q=O+ye,pe=Math.max(Q-ye,0),ye=Q-pe)):(pe=O,Q=pe+ye,R?(he=X+J,se=Math.max(he-J,0),J=he-se):(se=X,he=Math.min(se+J,b),J=he-se)),this._box={l:se,t:pe,w:J,h:ye};var me=N>J,be=v.barLength+2*v.barPad,ve=v.barWidth+2*v.barPad,Me=X,ke=O+F;ke+ve>z&&(ke=z-ve);var le=this.container.selectAll("rect.scrollbar-horizontal").data(me?[0]:[]);le.exit().on(".drag",null).remove(),le.enter().append("rect").classed("scrollbar-horizontal",!0).call(u.fill,v.barColor),me?(this.hbar=le.attr({rx:v.barRadius,ry:v.barRadius,x:Me,y:ke,width:be,height:ve}),this._hbarXMin=Me+be/2,this._hbarTranslateMax=J-be):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var De=F>ye,Oe=v.barWidth+2*v.barPad,He=v.barLength+2*v.barPad,Be=X+N,Ye=O;Be+Oe>b&&(Be=b-Oe);var st=this.container.selectAll("rect.scrollbar-vertical").data(De?[0]:[]);st.exit().on(".drag",null).remove(),st.enter().append("rect").classed("scrollbar-vertical",!0).call(u.fill,v.barColor),De?(this.vbar=st.attr({rx:v.barRadius,ry:v.barRadius,x:Be,y:Ye,width:Oe,height:He}),this._vbarYMin=Ye+He/2,this._vbarTranslateMax=ye-He):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var it=this.id,yt=se-.5,_e=De?he+Oe+.5:he+.5,Ee=pe-.5,de=me?Q+ve+.5:Q+.5,we=j._topdefs.selectAll("#"+it).data(me||De?[0]:[]);if(we.exit().remove(),we.enter().append("clipPath").attr("id",it).append("rect"),me||De?(this._clipRect=we.select("rect").attr({x:Math.floor(yt),y:Math.floor(Ee),width:Math.ceil(_e)-Math.floor(yt),height:Math.ceil(de)-Math.floor(Ee)}),this.container.call(c.setClipUrl,it,this.gd),this.bg.attr({x:X,y:O,width:N,height:F})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(c.setClipUrl,null),delete this._clipRect),me||De){var je=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(je);var Ae=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault(),d.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));me&&this.hbar.on(".drag",null).call(Ae),De&&this.vbar.on(".drag",null).call(Ae)}this.setTranslate(w,s)},v.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(c.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},v.prototype._onBoxDrag=function(){var g=this.translateX,w=this.translateY;this.hbar&&(g-=d.event.dx),this.vbar&&(w-=d.event.dy),this.setTranslate(g,w)},v.prototype._onBoxWheel=function(){var g=this.translateX,w=this.translateY;this.hbar&&(g+=d.event.deltaY),this.vbar&&(w+=d.event.deltaY),this.setTranslate(g,w)},v.prototype._onBarDrag=function(){var g=this.translateX,w=this.translateY;if(this.hbar){var s=g+this._hbarXMin,j=s+this._hbarTranslateMax,b=m.constrain(d.event.x,s,j),z=(b-s)/(j-s),X=this.position.w-this._box.w;g=z*X}if(this.vbar){var N=w+this._vbarYMin,O=N+this._vbarTranslateMax,F=m.constrain(d.event.y,N,O),P=(F-N)/(O-N),_=this.position.h-this._box.h;w=P*_}this.setTranslate(g,w)},v.prototype.setTranslate=function(g,w){var s=this.position.w-this._box.w,j=this.position.h-this._box.h;if(g=m.constrain(g||0,0,s),w=m.constrain(w||0,0,j),this.translateX=g,this.translateY=w,this.container.call(c.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-w),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+w-.5)}),this.hbar){var b=g/s;this.hbar.call(c.setTranslate,g+b*this._hbarTranslateMax,w)}if(this.vbar){var z=w/j;this.vbar.call(c.setTranslate,g,w+z*this._vbarTranslateMax)}}}}),Zc=n({"src/components/updatemenus/draw.js"(ce,fe){var d=k(),u=Di(),c=Ve(),m=ni(),v=pa(),p=Ui(),g=vn().arrayEditor,w=xi().LINE_SPACING,s=Ns(),j=Os();fe.exports=function(be){var ve=be._fullLayout,Me=v.filterVisible(ve[s.name]);function ke(it){u.autoMargin(be,pe(it))}var le=ve._menulayer.selectAll("g."+s.containerClassName).data(Me.length>0?[0]:[]);if(le.enter().append("g").classed(s.containerClassName,!0).style("cursor","pointer"),le.exit().each(function(){d.select(this).selectAll("g."+s.headerGroupClassName).each(ke)}).remove(),Me.length!==0){var De=le.selectAll("g."+s.headerGroupClassName).data(Me,b);De.enter().append("g").classed(s.headerGroupClassName,!0);for(var Oe=v.ensureSingle(le,"g",s.dropdownButtonGroupClassName,function(it){it.style("pointer-events","all")}),He=0;He<Me.length;He++){var Be=Me[He];he(be,Be)}var Ye="updatemenus"+ve._uid,st=new j(be,Oe,Ye);De.enter().size()&&(Oe.node().parentNode.appendChild(Oe.node()),Oe.call(ue)),De.exit().each(function(it){Oe.call(ue),ke(it)}).remove(),De.each(function(it){var yt=d.select(this),_e=it.type==="dropdown"?Oe:null;u.manageCommandObserver(be,it,it.buttons,function(Ee){N(be,it,it.buttons[Ee.index],yt,_e,st,Ee.index,!0)}),it.type==="dropdown"?(O(be,yt,Oe,st,it),X(Oe,it)&&F(be,yt,Oe,st,it)):F(be,yt,null,null,it)})}};function b(me){return me._index}function z(me){return+me.attr(s.menuIndexAttrName)==-1}function X(me,be){return+me.attr(s.menuIndexAttrName)===be._index}function N(me,be,ve,Me,ke,le,De,Oe){be.active=De,g(me.layout,s.name,be).applyUpdate("active",De),be.type==="buttons"?F(me,Me,null,null,be):be.type==="dropdown"&&(ke.attr(s.menuIndexAttrName,"-1"),O(me,Me,ke,le,be),Oe||F(me,Me,ke,le,be))}function O(me,be,ve,Me,ke){var le=v.ensureSingle(be,"g",s.headerClassName,function(it){it.style("pointer-events","all")}),De=ke._dims,Oe=ke.active,He=ke.buttons[Oe]||s.blankHeaderOpts,Be={y:ke.pad.t,yPad:0,x:ke.pad.l,xPad:0,index:0},Ye={width:De.headerWidth,height:De.headerHeight};le.call(R,ke,He,me).call(Q,ke,Be,Ye);var st=v.ensureSingle(be,"text",s.headerArrowClassName,function(it){it.attr("text-anchor","end").call(m.font,ke.font).text(s.arrowSymbol[ke.direction])});st.attr({x:De.headerWidth-s.arrowOffsetX+ke.pad.l,y:De.headerHeight/2+s.textOffsetY+ke.pad.t}),le.on("click",function(){ve.call(ue,String(X(ve,ke)?-1:ke._index)),F(me,be,ve,Me,ke)}),le.on("mouseover",function(){le.call(ye)}),le.on("mouseout",function(){le.call(se,ke)}),m.setTranslate(be,De.lx,De.ly)}function F(me,be,ve,Me,ke){ve||(ve=be,ve.attr("pointer-events","all"));var le=!z(ve)||ke.type==="buttons"?ke.buttons:[],De=ke.type==="dropdown"?s.dropdownButtonClassName:s.buttonClassName,Oe=ve.selectAll("g."+De).data(v.filterVisible(le)),He=Oe.enter().append("g").classed(De,!0),Be=Oe.exit();ke.type==="dropdown"?(He.attr("opacity","0").transition().attr("opacity","1"),Be.transition().attr("opacity","0").remove()):Be.remove();var Ye=0,st=0,it=ke._dims,yt=["up","down"].indexOf(ke.direction)!==-1;ke.type==="dropdown"&&(yt?st=it.headerHeight+s.gapButtonHeader:Ye=it.headerWidth+s.gapButtonHeader),ke.type==="dropdown"&&ke.direction==="up"&&(st=-s.gapButtonHeader+s.gapButton-it.openHeight),ke.type==="dropdown"&&ke.direction==="left"&&(Ye=-s.gapButtonHeader+s.gapButton-it.openWidth);var _e={x:it.lx+Ye+ke.pad.l,y:it.ly+st+ke.pad.t,yPad:s.gapButton,xPad:s.gapButton,index:0},Ee={l:_e.x+ke.borderwidth,t:_e.y+ke.borderwidth};Oe.each(function(de,we){var je=d.select(this);je.call(R,ke,de,me).call(Q,ke,_e),je.on("click",function(){d.event.defaultPrevented||(de.execute&&(de.args2&&ke.active===we?(N(me,ke,de,be,ve,Me,-1),u.executeAPICommand(me,de.method,de.args2)):(N(me,ke,de,be,ve,Me,we),u.executeAPICommand(me,de.method,de.args))),me.emit("plotly_buttonclicked",{menu:ke,button:de,active:ke.active}))}),je.on("mouseover",function(){je.call(ye)}),je.on("mouseout",function(){je.call(se,ke),Oe.call(J,ke)})}),Oe.call(J,ke),yt?(Ee.w=Math.max(it.openWidth,it.headerWidth),Ee.h=_e.y-Ee.t):(Ee.w=_e.x-Ee.l,Ee.h=Math.max(it.openHeight,it.headerHeight)),Ee.direction=ke.direction,Me&&(Oe.size()?P(me,be,ve,Me,ke,Ee):_(Me))}function P(me,be,ve,Me,ke,le){var De=ke.direction,Oe=De==="up"||De==="down",He=ke._dims,Be=ke.active,Ye,st,it;if(Oe)for(st=0,it=0;it<Be;it++)st+=He.heights[it]+s.gapButton;else for(Ye=0,it=0;it<Be;it++)Ye+=He.widths[it]+s.gapButton;Me.enable(le,Ye,st),Me.hbar&&Me.hbar.attr("opacity","0").transition().attr("opacity","1"),Me.vbar&&Me.vbar.attr("opacity","0").transition().attr("opacity","1")}function _(me){var be=!!me.hbar,ve=!!me.vbar;be&&me.hbar.transition().attr("opacity","0").each("end",function(){be=!1,ve||me.disable()}),ve&&me.vbar.transition().attr("opacity","0").each("end",function(){ve=!1,be||me.disable()})}function R(me,be,ve,Me){me.call(H,be).call(te,be,ve,Me)}function H(me,be){var ve=v.ensureSingle(me,"rect",s.itemRectClassName,function(Me){Me.attr({rx:s.rx,ry:s.ry,"shape-rendering":"crispEdges"})});ve.call(c.stroke,be.bordercolor).call(c.fill,be.bgcolor).style("stroke-width",be.borderwidth+"px")}function te(me,be,ve,Me){var ke=v.ensureSingle(me,"text",s.itemTextClassName,function(Oe){Oe.attr({"text-anchor":"start","data-notex":1})}),le=ve.label,De=Me._fullLayout._meta;De&&(le=v.templateString(le,De)),ke.call(m.font,be.font).text(le).call(p.convertToTspans,Me)}function J(me,be){var ve=be.active;me.each(function(Me,ke){var le=d.select(this);ke===ve&&be.showactive&&le.select("rect."+s.itemRectClassName).call(c.fill,s.activeColor)})}function ye(me){me.select("rect."+s.itemRectClassName).call(c.fill,s.hoverColor)}function se(me,be){me.select("rect."+s.itemRectClassName).call(c.fill,be.bgcolor)}function he(me,be){var ve=be._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},Me=m.tester.selectAll("g."+s.dropdownButtonClassName).data(v.filterVisible(be.buttons));Me.enter().append("g").classed(s.dropdownButtonClassName,!0);var ke=["up","down"].indexOf(be.direction)!==-1;Me.each(function(Ye,st){var it=d.select(this);it.call(R,be,Ye,me);var yt=it.select("."+s.itemTextClassName),_e=yt.node()&&m.bBox(yt.node()).width,Ee=Math.max(_e+s.textPadX,s.minWidth),de=be.font.size*w,we=p.lineCount(yt),je=Math.max(de*we,s.minHeight)+s.textOffsetY;je=Math.ceil(je),Ee=Math.ceil(Ee),ve.widths[st]=Ee,ve.heights[st]=je,ve.height1=Math.max(ve.height1,je),ve.width1=Math.max(ve.width1,Ee),ke?(ve.totalWidth=Math.max(ve.totalWidth,Ee),ve.openWidth=ve.totalWidth,ve.totalHeight+=je+s.gapButton,ve.openHeight+=je+s.gapButton):(ve.totalWidth+=Ee+s.gapButton,ve.openWidth+=Ee+s.gapButton,ve.totalHeight=Math.max(ve.totalHeight,je),ve.openHeight=ve.totalHeight)}),ke?ve.totalHeight-=s.gapButton:ve.totalWidth-=s.gapButton,ve.headerWidth=ve.width1+s.arrowPadX,ve.headerHeight=ve.height1,be.type==="dropdown"&&(ke?(ve.width1+=s.arrowPadX,ve.totalHeight=ve.height1):ve.totalWidth=ve.width1,ve.totalWidth+=s.arrowPadX),Me.remove();var le=ve.totalWidth+be.pad.l+be.pad.r,De=ve.totalHeight+be.pad.t+be.pad.b,Oe=me._fullLayout._size;ve.lx=Oe.l+Oe.w*be.x,ve.ly=Oe.t+Oe.h*(1-be.y);var He="left";v.isRightAnchor(be)&&(ve.lx-=le,He="right"),v.isCenterAnchor(be)&&(ve.lx-=le/2,He="center");var Be="top";v.isBottomAnchor(be)&&(ve.ly-=De,Be="bottom"),v.isMiddleAnchor(be)&&(ve.ly-=De/2,Be="middle"),ve.totalWidth=Math.ceil(ve.totalWidth),ve.totalHeight=Math.ceil(ve.totalHeight),ve.lx=Math.round(ve.lx),ve.ly=Math.round(ve.ly),u.autoMargin(me,pe(be),{x:be.x,y:be.y,l:le*({right:1,center:.5}[He]||0),r:le*({left:1,center:.5}[He]||0),b:De*({top:1,middle:.5}[Be]||0),t:De*({bottom:1,middle:.5}[Be]||0)})}function pe(me){return s.autoMarginIdRoot+me._index}function Q(me,be,ve,Me){Me=Me||{};var ke=me.select("."+s.itemRectClassName),le=me.select("."+s.itemTextClassName),De=be.borderwidth,Oe=ve.index,He=be._dims;m.setTranslate(me,De+ve.x,De+ve.y);var Be=["up","down"].indexOf(be.direction)!==-1,Ye=Me.height||(Be?He.heights[Oe]:He.height1);ke.attr({x:0,y:0,width:Me.width||(Be?He.width1:He.widths[Oe]),height:Ye});var st=be.font.size*w,it=p.lineCount(le),yt=(it-1)*st/2;p.positionText(le,s.textOffsetX,Ye/2-yt+s.textOffsetY),Be?ve.y+=He.heights[Oe]+ve.yPad:ve.x+=He.widths[Oe]+ve.xPad,ve.index++}function ue(me,be){me.attr(s.menuIndexAttrName,be||"-1").selectAll("g."+s.dropdownButtonClassName).remove()}}}),Jc=n({"src/components/updatemenus/index.js"(ce,fe){var d=Ns();fe.exports={moduleType:"component",name:d.name,layoutAttributes:bs(),supplyLayoutDefaults:nl(),draw:Zc()}}}),Ps=n({"src/components/sliders/constants.js"(ce,fe){fe.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}}}),ku=n({"src/components/sliders/attributes.js"(ce,fe){var d=G(),u=ea(),c=L().extendDeepAll,m=wa().overrideAll,v=Gr(),p=vn().templatedArray,g=Ps(),w=p("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});fe.exports=m(p("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:w,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:c(u({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:v.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:d({})},font:d({}),activebgcolor:{valType:"color",dflt:g.gripBgActiveColor},bgcolor:{valType:"color",dflt:g.railBgColor},bordercolor:{valType:"color",dflt:g.railBorderColor},borderwidth:{valType:"number",min:0,dflt:g.railBorderWidth},ticklen:{valType:"number",min:0,dflt:g.tickLength},tickcolor:{valType:"color",dflt:g.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:g.minorTickLength}}),"arraydraw","from-root")}}),Ml=n({"src/components/sliders/defaults.js"(ce,fe){var d=pa(),u=Gi(),c=ku(),m=Ps(),v=m.name,p=c.steps;fe.exports=function(j,b){u(j,b,{name:v,handleItemDefaults:g})};function g(s,j,b){function z(H,te){return d.coerce(s,j,c,H,te)}for(var X=u(s,j,{name:"steps",handleItemDefaults:w}),N=0,O=0;O<X.length;O++)X[O].visible&&N++;var F;if(N<2?F=j.visible=!1:F=z("visible"),!!F){j._stepCount=N;var P=j._visibleSteps=d.filterVisible(X),_=z("active");(X[_]||{}).visible||(j.active=P[0]._index),z("x"),z("y"),d.noneOrAll(s,j,["x","y"]),z("xanchor"),z("yanchor"),z("len"),z("lenmode"),z("pad.t"),z("pad.r"),z("pad.b"),z("pad.l"),d.coerceFont(z,"font",b.font);var R=z("currentvalue.visible");R&&(z("currentvalue.xanchor"),z("currentvalue.prefix"),z("currentvalue.suffix"),z("currentvalue.offset"),d.coerceFont(z,"currentvalue.font",j.font)),z("transition.duration"),z("transition.easing"),z("bgcolor"),z("activebgcolor"),z("bordercolor"),z("borderwidth"),z("ticklen"),z("tickwidth"),z("tickcolor"),z("minorticklen")}}function w(s,j){function b(N,O){return d.coerce(s,j,p,N,O)}var z;if(s.method!=="skip"&&!Array.isArray(s.args)?z=j.visible=!1:z=b("visible"),z){b("method"),b("args");var X=b("label","step-"+j._index);b("value",X),b("execute")}}}}),ho=n({"src/components/sliders/draw.js"(ce,fe){var d=k(),u=Di(),c=Ve(),m=ni(),v=pa(),p=v.strTranslate,g=Ui(),w=vn().arrayEditor,s=Ps(),j=xi(),b=j.LINE_SPACING,z=j.FROM_TL,X=j.FROM_BR;fe.exports=function(le){var De=le._context.staticPlot,Oe=le._fullLayout,He=O(Oe,le),Be=Oe._infolayer.selectAll("g."+s.containerClassName).data(He.length>0?[0]:[]);Be.enter().append("g").classed(s.containerClassName,!0).style("cursor",De?null:"ew-resize");function Ye(_e){_e._commandObserver&&(_e._commandObserver.remove(),delete _e._commandObserver),u.autoMargin(le,N(_e))}if(Be.exit().each(function(){d.select(this).selectAll("g."+s.groupClassName).each(Ye)}).remove(),He.length!==0){var st=Be.selectAll("g."+s.groupClassName).data(He,F);st.enter().append("g").classed(s.groupClassName,!0),st.exit().each(Ye).remove();for(var it=0;it<He.length;it++){var yt=He[it];P(le,yt)}st.each(function(_e){var Ee=d.select(this);Q(_e),u.manageCommandObserver(le,_e,_e._visibleSteps,function(de){var we=Ee.data()[0];we.active!==de.index&&(we._dragging||se(le,Ee,we,de.index,!1,!0))}),_(le,d.select(this),_e)})}};function N(ke){return s.autoMarginIdRoot+ke._index}function O(ke,le){for(var De=ke[s.name],Oe=[],He=0;He<De.length;He++){var Be=De[He];Be.visible&&(Be._gd=le,Oe.push(Be))}return Oe}function F(ke){return ke._index}function P(ke,le){var De=m.tester.selectAll("g."+s.labelGroupClass).data(le._visibleSteps);De.enter().append("g").classed(s.labelGroupClass,!0);var Oe=0,He=0;De.each(function(je){var Ae=d.select(this),$=te(Ae,{step:je},le),oe=$.node();if(oe){var ge=m.bBox(oe);He=Math.max(He,ge.height),Oe=Math.max(Oe,ge.width)}}),De.remove();var Be=le._dims={};Be.inputAreaWidth=Math.max(s.railWidth,s.gripHeight);var Ye=ke._fullLayout._size;Be.lx=Ye.l+Ye.w*le.x,Be.ly=Ye.t+Ye.h*(1-le.y),le.lenmode==="fraction"?Be.outerLength=Math.round(Ye.w*le.len):Be.outerLength=le.len,Be.inputAreaStart=0,Be.inputAreaLength=Math.round(Be.outerLength-le.pad.l-le.pad.r);var st=Be.inputAreaLength-2*s.stepInset,it=st/(le._stepCount-1),yt=Oe+s.labelPadding;if(Be.labelStride=Math.max(1,Math.ceil(yt/it)),Be.labelHeight=He,Be.currentValueMaxWidth=0,Be.currentValueHeight=0,Be.currentValueTotalHeight=0,Be.currentValueMaxLines=1,le.currentvalue.visible){var _e=m.tester.append("g");De.each(function(je){var Ae=R(_e,le,je.label),$=Ae.node()&&m.bBox(Ae.node())||{width:0,height:0},oe=g.lineCount(Ae);Be.currentValueMaxWidth=Math.max(Be.currentValueMaxWidth,Math.ceil($.width)),Be.currentValueHeight=Math.max(Be.currentValueHeight,Math.ceil($.height)),Be.currentValueMaxLines=Math.max(Be.currentValueMaxLines,oe)}),Be.currentValueTotalHeight=Be.currentValueHeight+le.currentvalue.offset,_e.remove()}Be.height=Be.currentValueTotalHeight+s.tickOffset+le.ticklen+s.labelOffset+Be.labelHeight+le.pad.t+le.pad.b;var Ee="left";v.isRightAnchor(le)&&(Be.lx-=Be.outerLength,Ee="right"),v.isCenterAnchor(le)&&(Be.lx-=Be.outerLength/2,Ee="center");var de="top";v.isBottomAnchor(le)&&(Be.ly-=Be.height,de="bottom"),v.isMiddleAnchor(le)&&(Be.ly-=Be.height/2,de="middle"),Be.outerLength=Math.ceil(Be.outerLength),Be.height=Math.ceil(Be.height),Be.lx=Math.round(Be.lx),Be.ly=Math.round(Be.ly);var we={y:le.y,b:Be.height*X[de],t:Be.height*z[de]};le.lenmode==="fraction"?(we.l=0,we.xl=le.x-le.len*z[Ee],we.r=0,we.xr=le.x+le.len*X[Ee]):(we.x=le.x,we.l=Be.outerLength*z[Ee],we.r=Be.outerLength*X[Ee]),u.autoMargin(ke,N(le),we)}function _(ke,le,De){(De.steps[De.active]||{}).visible||(De.active=De._visibleSteps[0]._index),le.call(R,De).call(Me,De).call(J,De).call(pe,De).call(ve,ke,De).call(H,ke,De);var Oe=De._dims;m.setTranslate(le,Oe.lx+De.pad.l,Oe.ly+De.pad.t),le.call(ue,De,!1),le.call(R,De)}function R(ke,le,De){if(le.currentvalue.visible){var Oe=le._dims,He,Be;switch(le.currentvalue.xanchor){case"right":He=Oe.inputAreaLength-s.currentValueInset-Oe.currentValueMaxWidth,Be="left";break;case"center":He=Oe.inputAreaLength*.5,Be="middle";break;default:He=s.currentValueInset,Be="left"}var Ye=v.ensureSingle(ke,"text",s.labelClass,function(de){de.attr({"text-anchor":Be,"data-notex":1})}),st=le.currentvalue.prefix?le.currentvalue.prefix:"";if(typeof De=="string")st+=De;else{var it=le.steps[le.active].label,yt=le._gd._fullLayout._meta;yt&&(it=v.templateString(it,yt)),st+=it}le.currentvalue.suffix&&(st+=le.currentvalue.suffix),Ye.call(m.font,le.currentvalue.font).text(st).call(g.convertToTspans,le._gd);var _e=g.lineCount(Ye),Ee=(Oe.currentValueMaxLines+1-_e)*le.currentvalue.font.size*b;return g.positionText(Ye,He,Ee),Ye}}function H(ke,le,De){var Oe=v.ensureSingle(ke,"rect",s.gripRectClass,function(He){He.call(he,le,ke,De).style("pointer-events","all")});Oe.attr({width:s.gripWidth,height:s.gripHeight,rx:s.gripRadius,ry:s.gripRadius}).call(c.stroke,De.bordercolor).call(c.fill,De.bgcolor).style("stroke-width",De.borderwidth+"px")}function te(ke,le,De){var Oe=v.ensureSingle(ke,"text",s.labelClass,function(Ye){Ye.attr({"text-anchor":"middle","data-notex":1})}),He=le.step.label,Be=De._gd._fullLayout._meta;return Be&&(He=v.templateString(He,Be)),Oe.call(m.font,De.font).text(He).call(g.convertToTspans,De._gd),Oe}function J(ke,le){var De=v.ensureSingle(ke,"g",s.labelsClass),Oe=le._dims,He=De.selectAll("g."+s.labelGroupClass).data(Oe.labelSteps);He.enter().append("g").classed(s.labelGroupClass,!0),He.exit().remove(),He.each(function(Be){var Ye=d.select(this);Ye.call(te,Be,le),m.setTranslate(Ye,me(le,Be.fraction),s.tickOffset+le.ticklen+le.font.size*b+s.labelOffset+Oe.currentValueTotalHeight)})}function ye(ke,le,De,Oe,He){var Be=Math.round(Oe*(De._stepCount-1)),Ye=De._visibleSteps[Be]._index;Ye!==De.active&&se(ke,le,De,Ye,!0,He)}function se(ke,le,De,Oe,He,Be){var Ye=De.active;De.active=Oe,w(ke.layout,s.name,De).applyUpdate("active",Oe);var st=De.steps[De.active];le.call(ue,De,Be),le.call(R,De),ke.emit("plotly_sliderchange",{slider:De,step:De.steps[De.active],interaction:He,previousActive:Ye}),st&&st.method&&He&&(le._nextMethod?(le._nextMethod.step=st,le._nextMethod.doCallback=He,le._nextMethod.doTransition=Be):(le._nextMethod={step:st,doCallback:He,doTransition:Be},le._nextMethodRaf=window.requestAnimationFrame(function(){var it=le._nextMethod.step;it.method&&(it.execute&&u.executeAPICommand(ke,it.method,it.args),le._nextMethod=null,le._nextMethodRaf=null)})))}function he(ke,le,De){if(le._context.staticPlot)return;var Oe=De.node(),He=d.select(le);function Be(){return De.data()[0]}function Ye(){var st=Be();le.emit("plotly_sliderstart",{slider:st});var it=De.select("."+s.gripRectClass);d.event.stopPropagation(),d.event.preventDefault(),it.call(c.fill,st.activebgcolor);var yt=be(st,d.mouse(Oe)[0]);ye(le,De,st,yt,!0),st._dragging=!0;function _e(){var de=Be(),we=be(de,d.mouse(Oe)[0]);ye(le,De,de,we,!1)}He.on("mousemove",_e),He.on("touchmove",_e);function Ee(){var de=Be();de._dragging=!1,it.call(c.fill,de.bgcolor),He.on("mouseup",null),He.on("mousemove",null),He.on("touchend",null),He.on("touchmove",null),le.emit("plotly_sliderend",{slider:de,step:de.steps[de.active]})}He.on("mouseup",Ee),He.on("touchend",Ee)}ke.on("mousedown",Ye),ke.on("touchstart",Ye)}function pe(ke,le){var De=ke.selectAll("rect."+s.tickRectClass).data(le._visibleSteps),Oe=le._dims;De.enter().append("rect").classed(s.tickRectClass,!0),De.exit().remove(),De.attr({width:le.tickwidth+"px","shape-rendering":"crispEdges"}),De.each(function(He,Be){var Ye=Be%Oe.labelStride===0,st=d.select(this);st.attr({height:Ye?le.ticklen:le.minorticklen}).call(c.fill,le.tickcolor),m.setTranslate(st,me(le,Be/(le._stepCount-1))-.5*le.tickwidth,(Ye?s.tickOffset:s.minorTickOffset)+Oe.currentValueTotalHeight)})}function Q(ke){var le=ke._dims;le.labelSteps=[];for(var De=ke._stepCount,Oe=0;Oe<De;Oe+=le.labelStride)le.labelSteps.push({fraction:Oe/(De-1),step:ke._visibleSteps[Oe]})}function ue(ke,le,De){for(var Oe=ke.select("rect."+s.gripRectClass),He=0,Be=0;Be<le._stepCount;Be++)if(le._visibleSteps[Be]._index===le.active){He=Be;break}var Ye=me(le,He/(le._stepCount-1));if(!le._invokingCommand){var st=Oe;De&&le.transition.duration>0&&(st=st.transition().duration(le.transition.duration).ease(le.transition.easing)),st.attr("transform",p(Ye-s.gripWidth*.5,le._dims.currentValueTotalHeight))}}function me(ke,le){var De=ke._dims;return De.inputAreaStart+s.stepInset+(De.inputAreaLength-2*s.stepInset)*Math.min(1,Math.max(0,le))}function be(ke,le){var De=ke._dims;return Math.min(1,Math.max(0,(le-s.stepInset-De.inputAreaStart)/(De.inputAreaLength-2*s.stepInset-2*De.inputAreaStart)))}function ve(ke,le,De){var Oe=De._dims,He=v.ensureSingle(ke,"rect",s.railTouchRectClass,function(Be){Be.call(he,le,ke,De).style("pointer-events","all")});He.attr({width:Oe.inputAreaLength,height:Math.max(Oe.inputAreaWidth,s.tickOffset+De.ticklen+Oe.labelHeight)}).call(c.fill,De.bgcolor).attr("opacity",0),m.setTranslate(He,0,Oe.currentValueTotalHeight)}function Me(ke,le){var De=le._dims,Oe=De.inputAreaLength-s.railInset*2,He=v.ensureSingle(ke,"rect",s.railRectClass);He.attr({width:Oe,height:s.railWidth,rx:s.railRadius,ry:s.railRadius,"shape-rendering":"crispEdges"}).call(c.stroke,le.bordercolor).call(c.fill,le.bgcolor).style("stroke-width",le.borderwidth+"px"),m.setTranslate(He,s.railInset,(De.inputAreaWidth-s.railWidth)*.5+De.currentValueTotalHeight)}}}),Ru=n({"src/components/sliders/index.js"(ce,fe){var d=Ps();fe.exports={moduleType:"component",name:d.name,layoutAttributes:ku(),supplyLayoutDefaults:Ml(),draw:ho()}}}),Du=n({"src/components/rangeslider/attributes.js"(ce,fe){var d=Pe();fe.exports={bgcolor:{valType:"color",dflt:d.background,editType:"plot"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}}}),Kc=n({"src/components/rangeslider/oppaxis_attributes.js"(ce,fe){fe.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}}}),tc=n({"src/components/rangeslider/constants.js"(ce,fe){fe.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}}}),jf=n({"src/components/rangeslider/helpers.js"(ce){var fe=di(),d=Ui(),u=tc(),c=xi().LINE_SPACING,m=u.name;function v(p){var g=p&&p[m];return g&&g.visible}ce.isVisible=v,ce.makeData=function(p){for(var g=fe.list({_fullLayout:p},"x",!0),w=p.margin,s=[],j=0;j<g.length;j++){var b=g[j];if(v(b)){s.push(b);var z=b[m];z._id=m+b._id,z._height=(p.height-w.b-w.t)*z.thickness,z._offsetShift=Math.floor(z.borderwidth/2)}}p._rangeSliderData=s},ce.autoMarginOpts=function(p,g){var w=p._fullLayout,s=g[m],j=g._id.charAt(0),b=0,z=0;if(g.side==="bottom"&&(b=g._depth,g.title.text!==w._dfltTitle[j])){z=1.5*g.title.font.size+10+s._offsetShift;var X=(g.title.text.match(d.BR_TAG_ALL)||[]).length;z+=X*g.title.font.size*c}return{x:0,y:g._counterDomainMin,l:0,r:0,t:0,b:s._height+b+Math.max(w.margin.b,z),pad:u.extraPad+s._offsetShift*2}}}}),Zi=n({"src/components/rangeslider/defaults.js"(ce,fe){var d=pa(),u=vn(),c=di(),m=Du(),v=Kc();fe.exports=function(g,w,s){var j=g[s],b=w[s];if(!(j.rangeslider||w._requestRangeslider[b._id]))return;d.isPlainObject(j.rangeslider)||(j.rangeslider={});var z=j.rangeslider,X=u.newContainer(b,"rangeslider");function N(Q,ue){return d.coerce(z,X,m,Q,ue)}var O,F;function P(Q,ue){return d.coerce(O,F,v,Q,ue)}var _=N("visible");if(_){N("bgcolor",w.plot_bgcolor),N("bordercolor"),N("borderwidth"),N("thickness"),N("autorange",!b.isValidRange(z.range)),N("range");var R=w._subplots;if(R)for(var H=R.cartesian.filter(function(Q){return Q.substr(0,Q.indexOf("y"))===c.name2id(s)}).map(function(Q){return Q.substr(Q.indexOf("y"),Q.length)}),te=d.simpleMap(H,c.id2name),J=0;J<te.length;J++){var ye=te[J];O=z[ye]||{},F=u.newContainer(X,ye,"yaxis");var se=w[ye],he;O.range&&se.isValidRange(O.range)&&(he="fixed");var pe=P("rangemode",he);pe!=="match"&&P("range",se.range.slice())}X._input=z}}}}),rc=n({"src/components/rangeslider/calc_autorange.js"(ce,fe){var d=di().list,u=Io().getAutoRange,c=tc();fe.exports=function(v){for(var p=d(v,"x",!0),g=0;g<p.length;g++){var w=p[g],s=w[c.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=u(v,w))}}}}),$l=n({"src/components/rangeslider/draw.js"(ce,fe){var d=k(),u=hr(),c=Di(),m=pa(),v=m.strTranslate,p=ni(),g=Ve(),w=zl(),s=Yl(),j=di(),b=rs(),z=Ki(),X=tc();fe.exports=function(he){for(var pe=he._fullLayout,Q=pe._rangeSliderData,ue=0;ue<Q.length;ue++){var me=Q[ue][X.name];me._clipId=me._id+"-"+pe._uid}function be(Me){return Me._name}var ve=pe._infolayer.selectAll("g."+X.containerClassName).data(Q,be);ve.exit().each(function(Me){var ke=Me[X.name];pe._topdefs.select("#"+ke._clipId).remove()}).remove(),Q.length!==0&&(ve.enter().append("g").classed(X.containerClassName,!0).attr("pointer-events","all"),ve.each(function(Me){var ke=d.select(this),le=Me[X.name],De=pe[j.id2name(Me.anchor)],Oe=le[j.id2name(Me.anchor)];if(le.range){var He=m.simpleMap(le.range,Me.r2l),Be=m.simpleMap(Me.range,Me.r2l),Ye;Be[0]<Be[1]?Ye=[Math.min(He[0],Be[0]),Math.max(He[1],Be[1])]:Ye=[Math.max(He[0],Be[0]),Math.min(He[1],Be[1])],le.range=le._input.range=m.simpleMap(Ye,Me.l2r)}Me.cleanRange("rangeslider.range");var st=pe._size,it=Me.domain;le._width=st.w*(it[1]-it[0]);var yt=Math.round(st.l+st.w*it[0]),_e=Math.round(st.t+st.h*(1-Me._counterDomainMin)+(Me.side==="bottom"?Me._depth:0)+le._offsetShift+X.extraPad);ke.attr("transform",v(yt,_e)),le._rl=m.simpleMap(le.range,Me.r2l);var Ee=le._rl[0],de=le._rl[1],we=de-Ee;if(le.p2d=function(ft){return ft/le._width*we+Ee},le.d2p=function(ft){return(ft-Ee)/we*le._width},Me.rangebreaks){var je=Me.locateBreaks(Ee,de);if(je.length){var Ae,$,oe=0;for(Ae=0;Ae<je.length;Ae++)$=je[Ae],oe+=$.max-$.min;var ge=le._width/(de-Ee-oe),Te=[-ge*Ee];for(Ae=0;Ae<je.length;Ae++)$=je[Ae],Te.push(Te[Te.length-1]-ge*($.max-$.min));for(le.d2p=function(ft){for(var wt=Te[0],Ct=0;Ct<je.length;Ct++){var Kt=je[Ct];if(ft>=Kt.max)wt=Te[Ct+1];else if(ft<Kt.min)break}return wt+ge*ft},Ae=0;Ae<je.length;Ae++)$=je[Ae],$.pmin=le.d2p($.min),$.pmax=le.d2p($.max);le.p2d=function(ft){for(var wt=Te[0],Ct=0;Ct<je.length;Ct++){var Kt=je[Ct];if(ft>=Kt.pmax)wt=Te[Ct+1];else if(ft<Kt.pmin)break}return(ft-wt)/ge}}}if(Oe.rangemode!=="match"){var Ue=De.r2l(Oe.range[0]),Ze=De.r2l(Oe.range[1]),Je=Ze-Ue;le.d2pOppAxis=function(ft){return(ft-Ue)/Je*le._height}}ke.call(_,he,Me,le).call(R,he,Me,le).call(H,he,Me,le).call(J,he,Me,le,Oe).call(ye,he,Me,le).call(se,he,Me,le),O(ke,he,Me,le),P(ke,he,Me,le,De,Oe),Me.side==="bottom"&&w.draw(he,Me._id+"title",{propContainer:Me,propName:Me._name+".title",placeholder:pe._dfltTitle.x,attributes:{x:Me._offset+Me._length/2,y:_e+le._height+le._offsetShift+10+1.5*Me.title.font.size,"text-anchor":"middle"}})}))};function N(he){return typeof he.clientX=="number"?he.clientX:he.touches&&he.touches.length>0?he.touches[0].clientX:0}function O(he,pe,Q,ue){if(pe._context.staticPlot)return;var me=he.select("rect."+X.slideBoxClassName).node(),be=he.select("rect."+X.grabAreaMinClassName).node(),ve=he.select("rect."+X.grabAreaMaxClassName).node();function Me(){var ke=d.event,le=ke.target,De=N(ke),Oe=De-he.node().getBoundingClientRect().left,He=ue.d2p(Q._rl[0]),Be=ue.d2p(Q._rl[1]),Ye=b.coverSlip();this.addEventListener("touchmove",st),this.addEventListener("touchend",it),Ye.addEventListener("mousemove",st),Ye.addEventListener("mouseup",it);function st(yt){var _e=N(yt),Ee=+_e-De,de,we,je;switch(le){case me:if(je="ew-resize",He+Ee>Q._length||Be+Ee<0)return;de=He+Ee,we=Be+Ee;break;case be:if(je="col-resize",He+Ee>Q._length)return;de=He+Ee,we=Be;break;case ve:if(je="col-resize",Be+Ee<0)return;de=He,we=Be+Ee;break;default:je="ew-resize",de=Oe,we=Oe+Ee;break}if(we<de){var Ae=we;we=de,de=Ae}ue._pixelMin=de,ue._pixelMax=we,z(d.select(Ye),je),F(he,pe,Q,ue)}function it(){Ye.removeEventListener("mousemove",st),Ye.removeEventListener("mouseup",it),this.removeEventListener("touchmove",st),this.removeEventListener("touchend",it),m.removeElement(Ye)}}he.on("mousedown",Me),he.on("touchstart",Me)}function F(he,pe,Q,ue){function me(Me){return Q.l2r(m.constrain(Me,ue._rl[0],ue._rl[1]))}var be=me(ue.p2d(ue._pixelMin)),ve=me(ue.p2d(ue._pixelMax));window.requestAnimationFrame(function(){u.call("_guiRelayout",pe,Q._name+".range",[be,ve])})}function P(he,pe,Q,ue,me,be){var ve=X.handleWidth/2;function Me(yt){return m.constrain(yt,0,ue._width)}function ke(yt){return m.constrain(yt,0,ue._height)}function le(yt){return m.constrain(yt,-ve,ue._width+ve)}var De=Me(ue.d2p(Q._rl[0])),Oe=Me(ue.d2p(Q._rl[1]));if(he.select("rect."+X.slideBoxClassName).attr("x",De).attr("width",Oe-De),he.select("rect."+X.maskMinClassName).attr("width",De),he.select("rect."+X.maskMaxClassName).attr("x",Oe).attr("width",ue._width-Oe),be.rangemode!=="match"){var He=ue._height-ke(ue.d2pOppAxis(me._rl[1])),Be=ue._height-ke(ue.d2pOppAxis(me._rl[0]));he.select("rect."+X.maskMinOppAxisClassName).attr("x",De).attr("height",He).attr("width",Oe-De),he.select("rect."+X.maskMaxOppAxisClassName).attr("x",De).attr("y",Be).attr("height",ue._height-Be).attr("width",Oe-De),he.select("rect."+X.slideBoxClassName).attr("y",He).attr("height",Be-He)}var Ye=.5,st=Math.round(le(De-ve))-Ye,it=Math.round(le(Oe-ve))+Ye;he.select("g."+X.grabberMinClassName).attr("transform",v(st,Ye)),he.select("g."+X.grabberMaxClassName).attr("transform",v(it,Ye))}function _(he,pe,Q,ue){var me=m.ensureSingle(he,"rect",X.bgClassName,function(ke){ke.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),be=ue.borderwidth%2===0?ue.borderwidth:ue.borderwidth-1,ve=-ue._offsetShift,Me=p.crispRound(pe,ue.borderwidth);me.attr({width:ue._width+be,height:ue._height+be,transform:v(ve,ve),"stroke-width":Me}).call(g.stroke,ue.bordercolor).call(g.fill,ue.bgcolor)}function R(he,pe,Q,ue){var me=pe._fullLayout,be=m.ensureSingleById(me._topdefs,"clipPath",ue._clipId,function(ve){ve.append("rect").attr({x:0,y:0})});be.select("rect").attr({width:ue._width,height:ue._height})}function H(he,pe,Q,ue){var me=pe.calcdata,be=he.selectAll("g."+X.rangePlotClassName).data(Q._subplotsWith,m.identity);be.enter().append("g").attr("class",function(Me){return X.rangePlotClassName+" "+Me}).call(p.setClipUrl,ue._clipId,pe),be.order(),be.exit().remove();var ve;be.each(function(Me,ke){var le=d.select(this),De=ke===0,Oe=j.getFromId(pe,Me,"y"),He=Oe._name,Be=ue[He],Ye={data:[],layout:{xaxis:{type:Q.type,domain:[0,1],range:ue.range.slice(),calendar:Q.calendar},width:ue._width,height:ue._height,margin:{t:0,b:0,l:0,r:0}},_context:pe._context};Q.rangebreaks&&(Ye.layout.xaxis.rangebreaks=Q.rangebreaks),Ye.layout[He]={type:Oe.type,domain:[0,1],range:Be.rangemode!=="match"?Be.range.slice():Oe.range.slice(),calendar:Oe.calendar},Oe.rangebreaks&&(Ye.layout[He].rangebreaks=Oe.rangebreaks),c.supplyDefaults(Ye);var st=Ye._fullLayout.xaxis,it=Ye._fullLayout[He];st.clearCalc(),st.setScale(),it.clearCalc(),it.setScale();var yt={id:Me,plotgroup:le,xaxis:st,yaxis:it,isRangePlot:!0};De?ve=yt:(yt.mainplot="xy",yt.mainplotinfo=ve),s.rangePlot(pe,yt,te(me,Me))})}function te(he,pe){for(var Q=[],ue=0;ue<he.length;ue++){var me=he[ue],be=me[0].trace;be.xaxis+be.yaxis===pe&&Q.push(me)}return Q}function J(he,pe,Q,ue,me){var be=m.ensureSingle(he,"rect",X.maskMinClassName,function(le){le.attr({x:0,y:0,"shape-rendering":"crispEdges"})});be.attr("height",ue._height).call(g.fill,X.maskColor);var ve=m.ensureSingle(he,"rect",X.maskMaxClassName,function(le){le.attr({y:0,"shape-rendering":"crispEdges"})});if(ve.attr("height",ue._height).call(g.fill,X.maskColor),me.rangemode!=="match"){var Me=m.ensureSingle(he,"rect",X.maskMinOppAxisClassName,function(le){le.attr({y:0,"shape-rendering":"crispEdges"})});Me.attr("width",ue._width).call(g.fill,X.maskOppAxisColor);var ke=m.ensureSingle(he,"rect",X.maskMaxOppAxisClassName,function(le){le.attr({y:0,"shape-rendering":"crispEdges"})});ke.attr("width",ue._width).style("border-top",X.maskOppBorder).call(g.fill,X.maskOppAxisColor)}}function ye(he,pe,Q,ue){if(!pe._context.staticPlot){var me=m.ensureSingle(he,"rect",X.slideBoxClassName,function(be){be.attr({y:0,cursor:X.slideBoxCursor,"shape-rendering":"crispEdges"})});me.attr({height:ue._height,fill:X.slideBoxFill})}}function se(he,pe,Q,ue){var me=m.ensureSingle(he,"g",X.grabberMinClassName),be=m.ensureSingle(he,"g",X.grabberMaxClassName),ve={x:0,width:X.handleWidth,rx:X.handleRadius,fill:g.background,stroke:g.defaultLine,"stroke-width":X.handleStrokeWidth,"shape-rendering":"crispEdges"},Me={y:Math.round(ue._height/4),height:Math.round(ue._height/2)},ke=m.ensureSingle(me,"rect",X.handleMinClassName,function(Be){Be.attr(ve)});ke.attr(Me);var le=m.ensureSingle(be,"rect",X.handleMaxClassName,function(Be){Be.attr(ve)});le.attr(Me);var De={width:X.grabAreaWidth,x:0,y:0,fill:X.grabAreaFill,cursor:pe._context.staticPlot?void 0:X.grabAreaCursor},Oe=m.ensureSingle(me,"rect",X.grabAreaMinClassName,function(Be){Be.attr(De)});Oe.attr("height",ue._height);var He=m.ensureSingle(be,"rect",X.grabAreaMaxClassName,function(Be){Be.attr(De)});He.attr("height",ue._height)}}}),Xl=n({"src/components/rangeslider/index.js"(ce,fe){var d=pa(),u=Du(),c=Kc(),m=jf();fe.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:d.extendFlat({},u,{yaxis:c})}}},layoutAttributes:Du(),handleDefaults:Zi(),calcAutorange:rc(),draw:$l(),isVisible:m.isVisible,makeData:m.makeData,autoMarginOpts:m.autoMarginOpts}}}),zu=n({"src/components/rangeselector/attributes.js"(ce,fe){var d=G(),u=Pe(),c=vn().templatedArray,m=c("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});fe.exports={visible:{valType:"boolean",editType:"plot"},buttons:m,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:d({editType:"plot"}),bgcolor:{valType:"color",dflt:u.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:u.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}}}),re=n({"src/components/rangeselector/constants.js"(ce,fe){fe.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}}}),_t=n({"src/components/rangeselector/defaults.js"(ce,fe){var d=pa(),u=Ve(),c=vn(),m=Gi(),v=zu(),p=re();fe.exports=function(j,b,z,X,N){var O=j.rangeselector||{},F=c.newContainer(b,"rangeselector");function P(J,ye){return d.coerce(O,F,v,J,ye)}var _=m(O,F,{name:"buttons",handleItemDefaults:g,calendar:N}),R=P("visible",_.length>0);if(R){var H=w(b,z,X);P("x",H[0]),P("y",H[1]),d.noneOrAll(j,b,["x","y"]),P("xanchor"),P("yanchor"),d.coerceFont(P,"font",z.font);var te=P("bgcolor");P("activecolor",u.contrast(te,p.lightAmount,p.darkAmount)),P("bordercolor"),P("borderwidth")}};function g(s,j,b,z){var X=z.calendar;function N(P,_){return d.coerce(s,j,v.buttons,P,_)}var O=N("visible");if(O){var F=N("step");F!=="all"&&(X&&X!=="gregorian"&&(F==="month"||F==="year")?j.stepmode="backward":N("stepmode"),N("count")),N("label")}}function w(s,j,b){for(var z=b.filter(function(F){return j[F].anchor===s._id}),X=0,N=0;N<z.length;N++){var O=j[z[N]].domain;O&&(X=Math.max(O[1],X))}return[s.domain[0],X+p.yPad]}}}),Fe=n({"src/components/rangeselector/get_update_object.js"(ce,fe){var d=S(),u=pa().titleCase;fe.exports=function(v,p){var g=v._name,w={};if(p.step==="all")w[g+".autorange"]=!0;else{var s=c(v,p);w[g+".range[0]"]=s[0],w[g+".range[1]"]=s[1]}return w};function c(m,v){var p=m.range,g=new Date(m.r2l(p[1])),w=v.step,s=d["utc"+u(w)],j=v.count,b;switch(v.stepmode){case"backward":b=m.l2r(+s.offset(g,-j));break;case"todate":var z=s.offset(g,-j);b=m.l2r(+s.ceil(z));break}var X=p[1];return[b,X]}}}),Qt=n({"src/components/rangeselector/draw.js"(ce,fe){var d=k(),u=hr(),c=Di(),m=Ve(),v=ni(),p=pa(),g=p.strTranslate,w=Ui(),s=di(),j=xi(),b=j.LINE_SPACING,z=j.FROM_TL,X=j.FROM_BR,N=re(),O=Fe();fe.exports=function(he){var pe=he._fullLayout,Q=pe._infolayer.selectAll(".rangeselector").data(F(he),P);Q.enter().append("g").classed("rangeselector",!0),Q.exit().remove(),Q.style({cursor:"pointer","pointer-events":"all"}),Q.each(function(ue){var me=d.select(this),be=ue,ve=be.rangeselector,Me=me.selectAll("g.button").data(p.filterVisible(ve.buttons));Me.enter().append("g").classed("button",!0),Me.exit().remove(),Me.each(function(ke){var le=d.select(this),De=O(be,ke);ke._isActive=_(be,ke,De),le.call(R,ve,ke),le.call(te,ve,ke,he),le.on("click",function(){he._dragged||u.call("_guiRelayout",he,De)}),le.on("mouseover",function(){ke._isHovered=!0,le.call(R,ve,ke)}),le.on("mouseout",function(){ke._isHovered=!1,le.call(R,ve,ke)})}),ye(he,Me,ve,be._name,me)})};function F(se){for(var he=s.list(se,"x",!0),pe=[],Q=0;Q<he.length;Q++){var ue=he[Q];ue.rangeselector&&ue.rangeselector.visible&&pe.push(ue)}return pe}function P(se){return se._id}function _(se,he,pe){if(he.step==="all")return se.autorange===!0;var Q=Object.keys(pe);return se.range[0]===pe[Q[0]]&&se.range[1]===pe[Q[1]]}function R(se,he,pe){var Q=p.ensureSingle(se,"rect","selector-rect",function(ue){ue.attr("shape-rendering","crispEdges")});Q.attr({rx:N.rx,ry:N.ry}),Q.call(m.stroke,he.bordercolor).call(m.fill,H(he,pe)).style("stroke-width",he.borderwidth+"px")}function H(se,he){return he._isActive||he._isHovered?se.activecolor:se.bgcolor}function te(se,he,pe,Q){function ue(be){w.convertToTspans(be,Q)}var me=p.ensureSingle(se,"text","selector-text",function(be){be.attr("text-anchor","middle")});me.call(v.font,he.font).text(J(pe,Q._fullLayout._meta)).call(ue)}function J(se,he){return se.label?he?p.templateString(se.label,he):se.label:se.step==="all"?"all":se.count+se.step.charAt(0)}function ye(se,he,pe,Q,ue){var me=0,be=0,ve=pe.borderwidth;he.each(function(){var He=d.select(this),Be=He.select(".selector-text"),Ye=pe.font.size*b,st=Math.max(Ye*w.lineCount(Be),16)+3;be=Math.max(be,st)}),he.each(function(){var He=d.select(this),Be=He.select(".selector-rect"),Ye=He.select(".selector-text"),st=Ye.node()&&v.bBox(Ye.node()).width,it=pe.font.size*b,yt=w.lineCount(Ye),_e=Math.max(st+10,N.minButtonWidth);He.attr("transform",g(ve+me,ve)),Be.attr({x:0,y:0,width:_e,height:be}),w.positionText(Ye,_e/2,be/2-(yt-1)*it/2+3),me+=_e+5});var Me=se._fullLayout._size,ke=Me.l+Me.w*pe.x,le=Me.t+Me.h*(1-pe.y),De="left";p.isRightAnchor(pe)&&(ke-=me,De="right"),p.isCenterAnchor(pe)&&(ke-=me/2,De="center");var Oe="top";p.isBottomAnchor(pe)&&(le-=be,Oe="bottom"),p.isMiddleAnchor(pe)&&(le-=be/2,Oe="middle"),me=Math.ceil(me),be=Math.ceil(be),ke=Math.round(ke),le=Math.round(le),c.autoMargin(se,Q+"-range-selector",{x:pe.x,y:pe.y,l:me*z[De],r:me*X[De],b:be*X[Oe],t:be*z[Oe]}),ue.attr("transform",g(ke,le))}}}),mr=n({"src/components/rangeselector/index.js"(ce,fe){fe.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:zu()}}},layoutAttributes:zu(),handleDefaults:_t(),draw:Qt()}}}),Tr=n({"src/plots/domain.js"(ce){var fe=L().extendFlat;ce.attributes=function(d,u){d=d||{},u=u||{};var c={valType:"info_array",editType:d.editType,items:[{valType:"number",min:0,max:1,editType:d.editType},{valType:"number",min:0,max:1,editType:d.editType}],dflt:[0,1]};d.name&&d.name+"",d.trace,u.description&&""+u.description;var m={x:fe({},c,{}),y:fe({},c,{}),editType:d.editType};return d.noGridCell||(m.row={valType:"integer",min:0,dflt:0,editType:d.editType},m.column={valType:"integer",min:0,dflt:0,editType:d.editType}),m},ce.defaults=function(d,u,c,m){var v=m&&m.x||[0,1],p=m&&m.y||[0,1],g=u.grid;if(g){var w=c("domain.column");w!==void 0&&(w<g.columns?v=g._domains.x[w]:delete d.domain.column);var s=c("domain.row");s!==void 0&&(s<g.rows?p=g._domains.y[s]:delete d.domain.row)}var j=c("domain.x",v),b=c("domain.y",p);j[0]<j[1]||(d.domain.x=v.slice()),b[0]<b[1]||(d.domain.y=p.slice())}}}),fa=n({"src/components/grid/index.js"(ce,fe){var d=pa(),u=Xe().counter,c=Tr().attributes,m=ui().idRegex,v=vn(),p={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[u("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[m.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[m.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:c({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function g(z,X,N){var O=X[N+"axes"],F=Object.keys((z._splomAxes||{})[N]||{});if(Array.isArray(O))return O;if(F.length)return F}function w(z,X){var N=z.grid||{},O=g(X,N,"x"),F=g(X,N,"y");if(!z.grid&&!O&&!F)return;var P=Array.isArray(N.subplots)&&Array.isArray(N.subplots[0]),_=Array.isArray(O),R=Array.isArray(F),H=_&&O!==N.xaxes&&R&&F!==N.yaxes,te,J;P?(te=N.subplots.length,J=N.subplots[0].length):(R&&(te=F.length),_&&(J=O.length));var ye=v.newContainer(X,"grid");function se(le,De){return d.coerce(N,ye,p,le,De)}var he=se("rows",te),pe=se("columns",J);if(!(he*pe>1)){delete X.grid;return}if(!P&&!_&&!R){var Q=se("pattern")==="independent";Q&&(P=!0)}ye._hasSubplotGrid=P;var ue=se("roworder"),me=ue==="top to bottom",be=P?.2:.1,ve=P?.3:.1,Me,ke;H&&X._splomGridDflt&&(Me=X._splomGridDflt.xside,ke=X._splomGridDflt.yside),ye._domains={x:s("x",se,be,Me,pe),y:s("y",se,ve,ke,he,me)}}function s(z,X,N,O,F,P){var _=X(z+"gap",N),R=X("domain."+z);X(z+"side",O);for(var H=new Array(F),te=R[0],J=(R[1]-te)/(F-_),ye=J*(1-_),se=0;se<F;se++){var he=te+J*se;H[P?F-1-se:se]=[he,he+ye]}return H}function j(z,X){var N=X.grid;if(!(!N||!N._domains)){var O=z.grid||{},F=X._subplots,P=N._hasSubplotGrid,_=N.rows,R=N.columns,H=N.pattern==="independent",te,J,ye,se,he,pe,Q,ue=N._axisMap={};if(P){var me=O.subplots||[];pe=N.subplots=new Array(_);var be=1;for(te=0;te<_;te++){var ve=pe[te]=new Array(R),Me=me[te]||[];for(J=0;J<R;J++)if(H?(he=be===1?"xy":"x"+be+"y"+be,be++):he=Me[J],ve[J]="",F.cartesian.indexOf(he)!==-1){if(Q=he.indexOf("y"),ye=he.slice(0,Q),se=he.slice(Q),ue[ye]!==void 0&&ue[ye]!==J||ue[se]!==void 0&&ue[se]!==te)continue;ve[J]=he,ue[ye]=J,ue[se]=te}}}else{var ke=g(X,O,"x"),le=g(X,O,"y");N.xaxes=b(ke,F.xaxis,R,ue,"x"),N.yaxes=b(le,F.yaxis,_,ue,"y")}var De=N._anchors={},Oe=N.roworder==="top to bottom";for(var He in ue){var Be=He.charAt(0),Ye=N[Be+"side"],st,it,yt;if(Ye.length<8)De[He]="free";else if(Be==="x"){if(Ye.charAt(0)==="t"===Oe?(st=0,it=1,yt=_):(st=_-1,it=-1,yt=-1),P){var _e=ue[He];for(te=st;te!==yt;te+=it)if(he=pe[te][_e],!!he&&(Q=he.indexOf("y"),he.slice(0,Q)===He)){De[He]=he.slice(Q);break}}else for(te=st;te!==yt;te+=it)if(se=N.yaxes[te],F.cartesian.indexOf(He+se)!==-1){De[He]=se;break}}else if(Ye.charAt(0)==="l"?(st=0,it=1,yt=R):(st=R-1,it=-1,yt=-1),P){var Ee=ue[He];for(te=st;te!==yt;te+=it)if(he=pe[Ee][te],!!he&&(Q=he.indexOf("y"),he.slice(Q)===He)){De[He]=he.slice(0,Q);break}}else for(te=st;te!==yt;te+=it)if(ye=N.xaxes[te],F.cartesian.indexOf(ye+He)!==-1){De[He]=ye;break}}}}function b(z,X,N,O,F){var P=new Array(N),_;function R(H,te){X.indexOf(te)!==-1&&O[te]===void 0?(P[H]=te,O[te]=H):P[H]=""}if(Array.isArray(z))for(_=0;_<N;_++)R(_,z[_]);else for(R(0,F),_=1;_<N;_++)R(_,F+(_+1));return P}fe.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:w,contentDefaults:j}}}),aa=n({"src/components/errorbars/attributes.js"(ce,fe){fe.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}}}),mn=n({"src/components/errorbars/defaults.js"(ce,fe){var d=B(),u=hr(),c=pa(),m=vn(),v=aa();fe.exports=function(p,g,w,s){var j="error_"+s.axis,b=m.newContainer(g,j),z=p[j]||{};function X(H,te){return c.coerce(z,b,v,H,te)}var N=z.array!==void 0||z.value!==void 0||z.type==="sqrt",O=X("visible",N);if(O!==!1){var F=X("type","array"in z?"data":"percent"),P=!0;F!=="sqrt"&&(P=X("symmetric",!((F==="data"?"arrayminus":"valueminus")in z))),F==="data"?(X("array"),X("traceref"),P||(X("arrayminus"),X("tracerefminus"))):(F==="percent"||F==="constant")&&(X("value"),P||X("valueminus"));var _="copy_"+s.inherit+"style";if(s.inherit){var R=g["error_"+s.inherit];(R||{}).visible&&X(_,!(z.color||d(z.thickness)||d(z.width)))}(!s.inherit||!b[_])&&(X("color",w),X("thickness"),X("width",u.traceIs(g,"gl3d")?0:4))}}}}),qr=n({"src/components/errorbars/compute_error.js"(ce,fe){fe.exports=function(c){var m=c.type,v=c.symmetric;if(m==="data"){var p=c.array||[];if(v)return function(b,z){var X=+p[z];return[X,X]};var g=c.arrayminus||[];return function(b,z){var X=+p[z],N=+g[z];return!isNaN(X)||!isNaN(N)?[N||0,X||0]:[NaN,NaN]}}else{var w=d(m,c.value),s=d(m,c.valueminus);return v||c.valueminus===void 0?function(b){var z=w(b);return[z,z]}:function(b){return[s(b),w(b)]}}};function d(u,c){if(u==="percent")return function(m){return Math.abs(m*c/100)};if(u==="constant")return function(){return Math.abs(c)};if(u==="sqrt")return function(m){return Math.sqrt(Math.abs(m))}}}}),ca=n({"src/components/errorbars/calc.js"(ce,fe){var d=B(),u=hr(),c=mi(),m=pa(),v=qr();fe.exports=function(w){for(var s=w.calcdata,j=0;j<s.length;j++){var b=s[j],z=b[0].trace;if(z.visible===!0&&u.traceIs(z,"errorBarsOK")){var X=c.getFromId(w,z.xaxis),N=c.getFromId(w,z.yaxis);p(b,z,X,"x"),p(b,z,N,"y")}}};function p(g,w,s,j){var b=w["error_"+j]||{},z=b.visible&&["linear","log"].indexOf(s.type)!==-1,X=[];if(z){for(var N=v(b),O=0;O<g.length;O++){var F=g[O],P=F.i;if(P===void 0)P=O;else if(P===null)continue;var _=F[j];if(d(s.c2l(_))){var R=N(_,P);if(d(R[0])&&d(R[1])){var H=F[j+"s"]=_-R[0],te=F[j+"h"]=_+R[1];X.push(H,te)}}}var J=s._id,ye=w._extremes[J],se=c.findExtremes(s,X,m.extendFlat({tozero:ye.opts.tozero},{padded:!0}));ye.min=ye.min.concat(se.min),ye.max=ye.max.concat(se.max)}}}}),fi=n({"src/components/errorbars/plot.js"(ce,fe){var d=k(),u=B(),c=ni(),m=Oi();fe.exports=function(g,w,s,j){var b,z=s.xaxis,X=s.yaxis,N=j&&j.duration>0,O=g._context.staticPlot;w.each(function(F){var P=F[0].trace,_=P.error_x||{},R=P.error_y||{},H;P.ids&&(H=function(se){return se.id});var te=m.hasMarkers(P)&&P.marker.maxdisplayed>0;!R.visible&&!_.visible&&(F=[]);var J=d.select(this).selectAll("g.errorbar").data(F,H);if(J.exit().remove(),!!F.length){_.visible||J.selectAll("path.xerror").remove(),R.visible||J.selectAll("path.yerror").remove(),J.style("opacity",1);var ye=J.enter().append("g").classed("errorbar",!0);N&&ye.style("opacity",0).transition().duration(j.duration).style("opacity",1),c.setClipUrl(J,s.layerClipId,g),J.each(function(se){var he=d.select(this),pe=v(se,z,X);if(!(te&&!se.vis)){var Q,ue=he.select("path.yerror");if(R.visible&&u(pe.x)&&u(pe.yh)&&u(pe.ys)){var me=R.width;Q="M"+(pe.x-me)+","+pe.yh+"h"+2*me+"m-"+me+",0V"+pe.ys,pe.noYS||(Q+="m-"+me+",0h"+2*me),b=!ue.size(),b?ue=he.append("path").style("vector-effect",O?"none":"non-scaling-stroke").classed("yerror",!0):N&&(ue=ue.transition().duration(j.duration).ease(j.easing)),ue.attr("d",Q)}else ue.remove();var be=he.select("path.xerror");if(_.visible&&u(pe.y)&&u(pe.xh)&&u(pe.xs)){var ve=(_.copy_ystyle?R:_).width;Q="M"+pe.xh+","+(pe.y-ve)+"v"+2*ve+"m0,-"+ve+"H"+pe.xs,pe.noXS||(Q+="m0,-"+ve+"v"+2*ve),b=!be.size(),b?be=he.append("path").style("vector-effect",O?"none":"non-scaling-stroke").classed("xerror",!0):N&&(be=be.transition().duration(j.duration).ease(j.easing)),be.attr("d",Q)}else be.remove()}})}})};function v(p,g,w){var s={x:g.c2p(p.x),y:w.c2p(p.y)};return p.yh!==void 0&&(s.yh=w.c2p(p.yh),s.ys=w.c2p(p.ys),u(s.ys)||(s.noYS=!0,s.ys=w.c2p(p.ys,!0))),p.xh!==void 0&&(s.xh=g.c2p(p.xh),s.xs=g.c2p(p.xs),u(s.xs)||(s.noXS=!0,s.xs=g.c2p(p.xs,!0))),s}}}),en=n({"src/components/errorbars/style.js"(ce,fe){var d=k(),u=Ve();fe.exports=function(m){m.each(function(v){var p=v[0].trace,g=p.error_y||{},w=p.error_x||{},s=d.select(this);s.selectAll("path.yerror").style("stroke-width",g.thickness+"px").call(u.stroke,g.color),w.copy_ystyle&&(w=g),s.selectAll("path.xerror").style("stroke-width",w.thickness+"px").call(u.stroke,w.color)})}}}),Wa=n({"src/components/errorbars/index.js"(ce,fe){var d=pa(),u=wa().overrideAll,c=aa(),m={error_x:d.extendFlat({},c),error_y:d.extendFlat({},c)};delete m.error_x.copy_zstyle,delete m.error_y.copy_zstyle,delete m.error_y.copy_ystyle;var v={error_x:d.extendFlat({},c),error_y:d.extendFlat({},c),error_z:d.extendFlat({},c)};delete v.error_x.copy_ystyle,delete v.error_y.copy_ystyle,delete v.error_z.copy_ystyle,delete v.error_z.copy_zstyle,fe.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:m,bar:m,histogram:m,scatter3d:u(v,"calc","nested"),scattergl:u(m,"calc","nested")}},supplyDefaults:mn(),calc:ca(),makeComputeError:qr(),plot:fi(),style:en(),hoverInfo:p};function p(g,w,s){(w.error_y||{}).visible&&(s.yerr=g.yh-g.y,w.error_y.symmetric||(s.yerrneg=g.y-g.ys)),(w.error_x||{}).visible&&(s.xerr=g.xh-g.x,w.error_x.symmetric||(s.xerrneg=g.x-g.xs))}}}),zi=n({"src/components/colorbar/constants.js"(ce,fe){fe.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}}}),Hi=n({"src/components/colorbar/draw.js"(ce,fe){var d=k(),u=A(),c=Di(),m=hr(),v=mi(),p=rs(),g=pa(),w=g.strTranslate,s=L().extendFlat,j=Ki(),b=ni(),z=Ve(),X=zl(),N=Ui(),O=So().flipScale,F=qc(),P=Ho(),_=yo(),R=xi(),H=R.LINE_SPACING,te=R.FROM_TL,J=R.FROM_BR,ye=zi().cn;function se(be){var ve=be._fullLayout,Me=ve._infolayer.selectAll("g."+ye.colorbar).data(he(be),function(ke){return ke._id});Me.enter().append("g").attr("class",function(ke){return ke._id}).classed(ye.colorbar,!0),Me.each(function(ke){var le=d.select(this);g.ensureSingle(le,"rect",ye.cbbg),g.ensureSingle(le,"g",ye.cbfills),g.ensureSingle(le,"g",ye.cblines),g.ensureSingle(le,"g",ye.cbaxis,function(Oe){Oe.classed(ye.crisp,!0)}),g.ensureSingle(le,"g",ye.cbtitleunshift,function(Oe){Oe.append("g").classed(ye.cbtitle,!0)}),g.ensureSingle(le,"rect",ye.cboutline);var De=pe(le,ke,be);De&&De.then&&(be._promises||[]).push(De),be._context.edits.colorbarPosition&&Q(le,ke,be)}),Me.exit().each(function(ke){c.autoMargin(be,ke._id)}).remove(),Me.order()}function he(be){var ve=be._fullLayout,Me=be.calcdata,ke=[],le,De,Oe,He;function Be($){return s($,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Ye(){typeof He.calc=="function"?He.calc(be,Oe,le):(le._fillgradient=De.reversescale?O(De.colorscale):De.colorscale,le._zrange=[De[He.min],De[He.max]])}for(var st=0;st<Me.length;st++){var it=Me[st];if(Oe=it[0].trace,!!Oe._module){var yt=Oe._module.colorbar;if(Oe.visible===!0&&yt)for(var _e=Array.isArray(yt),Ee=_e?yt:[yt],de=0;de<Ee.length;de++){He=Ee[de];var we=He.container;De=we?Oe[we]:Oe,De&&De.showscale&&(le=Be(De.colorbar),le._id="cb"+Oe.uid+(_e&&we?"-"+we:""),le._traceIndex=Oe.index,le._propPrefix=(we?we+".":"")+"colorbar.",le._meta=Oe._meta,Ye(),ke.push(le))}}}for(var je in ve._colorAxes)if(De=ve[je],De.showscale){var Ae=ve._colorAxes[je];le=Be(De.colorbar),le._id="cb"+je,le._propPrefix=je+".colorbar.",le._meta=ve._meta,He={min:"cmin",max:"cmax"},Ae[0]!=="heatmap"&&(Oe=Ae[1],He.calc=Oe._module.colorbar.calc),Ye(),ke.push(le)}return ke}function pe(be,ve,Me){var ke=ve.orientation==="v",le=ve.len,De=ve.lenmode,Oe=ve.thickness,He=ve.thicknessmode,Be=ve.outlinewidth,Ye=ve.borderwidth,st=ve.bgcolor,it=ve.xanchor,yt=ve.yanchor,_e=ve.xpad,Ee=ve.ypad,de=ve.x,we=ke?ve.y:1-ve.y,je=ve.yref==="paper",Ae=ve.xref==="paper",$=Me._fullLayout,oe=$._size,ge=ve._fillcolor,Te=ve._line,Ue=ve.title,Ze=Ue.side,Je=ve._zrange||d.extent((typeof ge=="function"?ge:Te.color).domain()),ft=typeof Te.color=="function"?Te.color:function(){return Te.color},wt=typeof ge=="function"?ge:function(){return ge},Ct=ve._levels,Kt=ue(Me,ve,Je),$t=Kt.fill,Wt=Kt.line,nt=Math.round(Oe*(He==="fraction"?ke?oe.w:oe.h:1)),pt=nt/(ke?oe.w:oe.h),Ke=Math.round(le*(De==="fraction"?ke?oe.h:oe.w:1)),gt=Ke/(ke?oe.h:oe.w),Ft=Ae?oe.w:Me._fullLayout.width,Xt=je?oe.h:Me._fullLayout.height,or=Math.round(ke?de*Ft+_e:we*Xt+Ee),sr={center:.5,right:1}[it]||0,dr={top:1,middle:.5}[yt]||0,wr=ke?de-sr*pt:we-dr*pt,xr=ke?we-dr*gt:de-sr*gt,Pr=Math.round(ke?Xt*(1-xr):Ft*xr);ve._lenFrac=gt,ve._thickFrac=pt,ve._uFrac=wr,ve._vFrac=xr;var nr=ve._axis=me(Me,ve,Je);nr.position=pt+(ke?de+_e/oe.w:we+Ee/oe.h);var jr=["top","bottom"].indexOf(Ze)!==-1;if(ke&&jr&&(nr.title.side=Ze,nr.titlex=de+_e/oe.w,nr.titley=xr+(Ue.side==="top"?gt-Ee/oe.h:Ee/oe.h)),!ke&&!jr&&(nr.title.side=Ze,nr.titley=we+Ee/oe.h,nr.titlex=xr+_e/oe.w),Te.color&&ve.tickmode==="auto"){nr.tickmode="linear",nr.tick0=Ct.start;var ta=Ct.size,Nr=g.constrain(Ke/50,4,15)+1,Jr=(Je[1]-Je[0])/((ve.nticks||Nr)*ta);if(Jr>1){var vt=Math.pow(10,Math.floor(Math.log(Jr)/Math.LN10));ta*=vt*g.roundUp(Jr/vt,[2,5,10]),(Math.abs(Ct.start)/Ct.size+1e-6)%1<2e-6&&(nr.tick0=0)}nr.dtick=ta}nr.domain=ke?[xr+Ee/oe.h,xr+gt-Ee/oe.h]:[xr+_e/oe.w,xr+gt-_e/oe.w],nr.setScale(),be.attr("transform",w(Math.round(oe.l),Math.round(oe.t)));var Mt=be.select("."+ye.cbtitleunshift).attr("transform",w(-Math.round(oe.l),-Math.round(oe.t))),xt=nr.ticklabelposition,Le=nr.title.font.size,ot=be.select("."+ye.cbaxis),ct,ut=0,Pt=0;function Ot(gr,Ar){var Er={propContainer:nr,propName:ve._propPrefix+"title",traceIndex:ve._traceIndex,_meta:ve._meta,placeholder:$._dfltTitle.colorbar,containerGroup:be.select("."+ye.cbtitle)},ba=gr.charAt(0)==="h"?gr.substr(1):"h"+gr;be.selectAll("."+ba+",."+ba+"-math-group").remove(),X.draw(Me,gr,s(Er,Ar||{}))}function qt(){if(ke&&jr||!ke&&!jr){var gr,Ar;Ze==="top"&&(gr=_e+oe.l+Ft*de,Ar=Ee+oe.t+Xt*(1-xr-gt)+3+Le*.75),Ze==="bottom"&&(gr=_e+oe.l+Ft*de,Ar=Ee+oe.t+Xt*(1-xr)-3-Le*.25),Ze==="right"&&(Ar=Ee+oe.t+Xt*we+3+Le*.75,gr=_e+oe.l+Ft*xr),Ot(nr._id+"title",{attributes:{x:gr,y:Ar,"text-anchor":ke?"start":"middle"}})}}function ir(){if(ke&&!jr||!ke&&jr){var gr=nr.position||0,Ar=nr._offset+nr._length/2,Er,ba;if(Ze==="right")ba=Ar,Er=oe.l+Ft*gr+10+Le*(nr.showticklabels?1:.5);else if(Er=Ar,Ze==="bottom"&&(ba=oe.t+Xt*gr+10+(xt.indexOf("inside")===-1?nr.tickfont.size:0)+(nr.ticks!=="inside"&&ve.ticklen||0)),Ze==="top"){var Ga=Ue.text.split("<br>").length;ba=oe.t+Xt*gr+10-nt-H*Le*Ga}Ot((ke?"h":"v")+nr._id+"title",{avoid:{selection:d.select(Me).selectAll("g."+nr._id+"tick"),side:Ze,offsetTop:ke?0:oe.t,offsetLeft:ke?oe.l:0,maxShift:ke?$.width:$.height},attributes:{x:Er,y:ba,"text-anchor":"middle"},transform:{rotate:ke?-90:0,offset:0}})}}function _r(){if(!ke&&!jr||ke&&jr){var gr=be.select("."+ye.cbtitle),Ar=gr.select("text"),Er=[-Be/2,Be/2],ba=gr.select(".h"+nr._id+"title-math-group").node(),Ga=15.6;Ar.node()&&(Ga=parseInt(Ar.node().style.fontSize,10)*H);var Xa;if(ba?(Xa=b.bBox(ba),Pt=Xa.width,ut=Xa.height,ut>Ga&&(Er[1]-=(ut-Ga)/2)):Ar.node()&&!Ar.classed(ye.jsPlaceholder)&&(Xa=b.bBox(Ar.node()),Pt=Xa.width,ut=Xa.height),ke){if(ut){if(ut+=5,Ze==="top")nr.domain[1]-=ut/oe.h,Er[1]*=-1;else{nr.domain[0]+=ut/oe.h;var Aa=N.lineCount(Ar);Er[1]+=(1-Aa)*Ga}gr.attr("transform",w(Er[0],Er[1])),nr.setScale()}}else Pt&&(Ze==="right"&&(nr.domain[0]+=(Pt+Le/2)/oe.w),gr.attr("transform",w(Er[0],Er[1])),nr.setScale())}be.selectAll("."+ye.cbfills+",."+ye.cblines).attr("transform",ke?w(0,Math.round(oe.h*(1-nr.domain[1]))):w(Math.round(oe.w*nr.domain[0]),0)),ot.attr("transform",ke?w(0,Math.round(-oe.t)):w(Math.round(-oe.l),0));var Oa=be.select("."+ye.cbfills).selectAll("rect."+ye.cbfill).attr("style","").data($t);Oa.enter().append("rect").classed(ye.cbfill,!0).attr("style",""),Oa.exit().remove();var va=Je.map(nr.c2p).map(Math.round).sort(function(La,la){return La-la});Oa.each(function(La,la){var Ba=[la===0?Je[0]:($t[la]+$t[la-1])/2,la===$t.length-1?Je[1]:($t[la]+$t[la+1])/2].map(nr.c2p).map(Math.round);ke&&(Ba[1]=g.constrain(Ba[1]+(Ba[1]>Ba[0])?1:-1,va[0],va[1]));var un=d.select(this).attr(ke?"x":"y",or).attr(ke?"y":"x",d.min(Ba)).attr(ke?"width":"height",Math.max(nt,2)).attr(ke?"height":"width",Math.max(d.max(Ba)-d.min(Ba),2));if(ve._fillgradient)b.gradient(un,Me,ve._id,ke?"vertical":"horizontalreversed",ve._fillgradient,"fill");else{var pn=wt(La).replace("e-","");un.attr("fill",u(pn).toHexString())}});var ma=be.select("."+ye.cblines).selectAll("path."+ye.cbline).data(Te.color&&Te.width?Wt:[]);ma.enter().append("path").classed(ye.cbline,!0),ma.exit().remove(),ma.each(function(La){var la=or,Ba=Math.round(nr.c2p(La))+Te.width/2%1;d.select(this).attr("d","M"+(ke?la+","+Ba:Ba+","+la)+(ke?"h":"v")+nt).call(b.lineGroupStyle,Te.width,ft(La),Te.dash)}),ot.selectAll("g."+nr._id+"tick,path").remove();var Va=or+nt+(Be||0)/2-(ve.ticks==="outside"?1:0),ja=v.calcTicks(nr),$a=v.getTickSigns(nr)[2];return v.drawTicks(Me,nr,{vals:nr.ticks==="inside"?v.clipEnds(nr,ja):ja,layer:ot,path:v.makeTickPath(nr,Va,$a),transFn:v.makeTransTickFn(nr)}),v.drawLabels(Me,nr,{vals:ja,layer:ot,transFn:v.makeTransTickLabelFn(nr),labelFns:v.makeLabelFns(nr,Va)})}function Bt(){var gr,Ar=nt+Be/2;xt.indexOf("inside")===-1&&(gr=b.bBox(ot.node()),Ar+=ke?gr.width:gr.height),ct=Mt.select("text");var Er=0,ba=ke&&Ze==="top",Ga=!ke&&Ze==="right",Xa=0;if(ct.node()&&!ct.classed(ye.jsPlaceholder)){var Aa,Oa=Mt.select(".h"+nr._id+"title-math-group").node();Oa&&(ke&&jr||!ke&&!jr)?(gr=b.bBox(Oa),Er=gr.width,Aa=gr.height):(gr=b.bBox(Mt.node()),Er=gr.right-oe.l-(ke?or:Pr),Aa=gr.bottom-oe.t-(ke?Pr:or),!ke&&Ze==="top"&&(Ar+=gr.height,Xa=gr.height)),Ga&&(ct.attr("transform",w(Er/2+Le/2,0)),Er*=2),Ar=Math.max(Ar,ke?Er:Aa)}var va=(ke?_e:Ee)*2+Ar+Ye+Be/2,ma=0;!ke&&Ue.text&&yt==="bottom"&&we<=0&&(ma=va/2,va+=ma,Xa+=ma),$._hColorbarMoveTitle=ma,$._hColorbarMoveCBTitle=Xa;var Va=Ye+Be,ja=(ke?or:Pr)-Va/2-(ke?_e:0),$a=(ke?Pr:or)-(ke?Ke:Ee+Xa-ma);be.select("."+ye.cbbg).attr("x",ja).attr("y",$a).attr(ke?"width":"height",Math.max(va-ma,2)).attr(ke?"height":"width",Math.max(Ke+Va,2)).call(z.fill,st).call(z.stroke,ve.bordercolor).style("stroke-width",Ye);var La=Ga?Math.max(Er-10,0):0;be.selectAll("."+ye.cboutline).attr("x",(ke?or:Pr+_e)+La).attr("y",(ke?Pr+Ee-Ke:or)+(ba?ut:0)).attr(ke?"width":"height",Math.max(nt,2)).attr(ke?"height":"width",Math.max(Ke-(ke?2*Ee+ut:2*_e+La),2)).call(z.stroke,ve.outlinecolor).style({fill:"none","stroke-width":Be});var la=ke?sr*va:0,Ba=ke?0:(1-dr)*va-Xa;if(la=Ae?oe.l-la:-la,Ba=je?oe.t-Ba:-Ba,be.attr("transform",w(la,Ba)),!ke&&(Ye||u(st).getAlpha()&&!u.equals($.paper_bgcolor,st))){var un=ot.selectAll("text"),pn=un[0].length,qa=be.select("."+ye.cbbg).node(),nn=b.bBox(qa),cn=b.getTranslate(be),Cn=2;un.each(function(pr,jt){var Jt=0,cr=pn-1;if(jt===Jt||jt===cr){var rr=b.bBox(this),Or=b.getTranslate(this),Br;if(jt===cr){var ra=rr.right+Or.x,Ca=nn.right+cn.x+Pr-Ye-Cn+de;Br=Ca-ra,Br>0&&(Br=0)}else if(jt===Jt){var Ma=rr.left+Or.x,za=nn.left+cn.x+Pr+Ye+Cn;Br=za-Ma,Br<0&&(Br=0)}Br&&(pn<3?this.setAttribute("transform","translate("+Br+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ja={},xn=te[it],We=J[it],Re=te[yt],Zt=J[yt],Ht=va-nt;ke?(De==="pixels"?(Ja.y=we,Ja.t=Ke*Re,Ja.b=Ke*Zt):(Ja.t=Ja.b=0,Ja.yt=we+le*Re,Ja.yb=we-le*Zt),He==="pixels"?(Ja.x=de,Ja.l=va*xn,Ja.r=va*We):(Ja.l=Ht*xn,Ja.r=Ht*We,Ja.xl=de-Oe*xn,Ja.xr=de+Oe*We)):(De==="pixels"?(Ja.x=de,Ja.l=Ke*xn,Ja.r=Ke*We):(Ja.l=Ja.r=0,Ja.xl=de+le*xn,Ja.xr=de-le*We),He==="pixels"?(Ja.y=1-we,Ja.t=va*Re,Ja.b=va*Zt):(Ja.t=Ht*Re,Ja.b=Ht*Zt,Ja.yt=we-Oe*Re,Ja.yb=we+Oe*Zt));var Rt=ve.y<.5?"b":"t",Dt=ve.x<.5?"l":"r";Me._fullLayout._reservedMargin[ve._id]={};var Ut={r:$.width-ja-la,l:ja+Ja.r,b:$.height-$a-Ba,t:$a+Ja.b};Ae&&je?c.autoMargin(Me,ve._id,Ja):Ae?Me._fullLayout._reservedMargin[ve._id][Rt]=Ut[Rt]:je||ke?Me._fullLayout._reservedMargin[ve._id][Dt]=Ut[Dt]:Me._fullLayout._reservedMargin[ve._id][Rt]=Ut[Rt]}return g.syncOrAsync([c.previousPromises,qt,_r,ir,c.previousPromises,Bt],Me)}function Q(be,ve,Me){var ke=ve.orientation==="v",le=Me._fullLayout,De=le._size,Oe,He,Be;p.init({element:be.node(),gd:Me,prepFn:function(){Oe=be.attr("transform"),j(be)},moveFn:function(Ye,st){be.attr("transform",Oe+w(Ye,st)),He=p.align((ke?ve._uFrac:ve._vFrac)+Ye/De.w,ke?ve._thickFrac:ve._lenFrac,0,1,ve.xanchor),Be=p.align((ke?ve._vFrac:1-ve._uFrac)-st/De.h,ke?ve._lenFrac:ve._thickFrac,0,1,ve.yanchor);var it=p.getCursor(He,Be,ve.xanchor,ve.yanchor);j(be,it)},doneFn:function(){if(j(be),He!==void 0&&Be!==void 0){var Ye={};Ye[ve._propPrefix+"x"]=He,Ye[ve._propPrefix+"y"]=Be,ve._traceIndex!==void 0?m.call("_guiRestyle",Me,Ye,ve._traceIndex):m.call("_guiRelayout",Me,Ye)}}})}function ue(be,ve,Me){var ke=ve._levels,le=[],De=[],Oe,He,Be=ke.end+ke.size/100,Ye=ke.size,st=1.001*Me[0]-.001*Me[1],it=1.001*Me[1]-.001*Me[0];for(He=0;He<1e5&&(Oe=ke.start+He*Ye,!(Ye>0?Oe>=Be:Oe<=Be));He++)Oe>st&&Oe<it&&le.push(Oe);if(ve._fillgradient)De=[0];else if(typeof ve._fillcolor=="function"){var yt=ve._filllevels;if(yt)for(Be=yt.end+yt.size/100,Ye=yt.size,He=0;He<1e5&&(Oe=yt.start+He*Ye,!(Ye>0?Oe>=Be:Oe<=Be));He++)Oe>Me[0]&&Oe<Me[1]&&De.push(Oe);else De=le.map(function(_e){return _e-ke.size/2}),De.push(De[De.length-1]+ke.size)}else ve._fillcolor&&typeof ve._fillcolor=="string"&&(De=[0]);return ke.size<0&&(le.reverse(),De.reverse()),{line:le,fill:De}}function me(be,ve,Me){var ke=be._fullLayout,le=ve.orientation==="v",De={type:"linear",range:Me,tickmode:ve.tickmode,nticks:ve.nticks,tick0:ve.tick0,dtick:ve.dtick,tickvals:ve.tickvals,ticktext:ve.ticktext,ticks:ve.ticks,ticklen:ve.ticklen,tickwidth:ve.tickwidth,tickcolor:ve.tickcolor,showticklabels:ve.showticklabels,labelalias:ve.labelalias,ticklabelposition:ve.ticklabelposition,ticklabeloverflow:ve.ticklabeloverflow,ticklabelstep:ve.ticklabelstep,tickfont:ve.tickfont,tickangle:ve.tickangle,tickformat:ve.tickformat,exponentformat:ve.exponentformat,minexponent:ve.minexponent,separatethousands:ve.separatethousands,showexponent:ve.showexponent,showtickprefix:ve.showtickprefix,tickprefix:ve.tickprefix,showticksuffix:ve.showticksuffix,ticksuffix:ve.ticksuffix,title:ve.title,showline:!0,anchor:"free",side:le?"right":"bottom",position:1},Oe=le?"y":"x",He={type:"linear",_id:Oe+ve._id},Be={letter:Oe,font:ke.font,noAutotickangles:Oe==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:ke.calendar};function Ye(st,it){return g.coerce(De,He,_,st,it)}return F(De,He,Ye,Be,ke),P(De,He,Ye,Be),He}fe.exports={draw:se}}}),Kn=n({"src/components/colorbar/index.js"(ce,fe){fe.exports={moduleType:"component",name:"colorbar",attributes:Vo(),supplyDefaults:fl(),draw:Hi().draw,hasColorbar:fs()}}}),Bn=n({"src/components/legend/index.js"(ce,fe){fe.exports={moduleType:"component",name:"legend",layoutAttributes:hu(),supplyLayoutDefaults:bf(),draw:Pl(),style:Tc()}}}),Vn=n({"src/locale-en.js"(ce,fe){fe.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}}}),hn=n({"src/locale-en-us.js"(ce,fe){fe.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}}}),Fn=n({"src/snapshot/cloneplot.js"(ce,fe){var d=hr(),u=pa(),c=u.extendFlat,m=u.extendDeep;function v(g){var w;switch(g){case"themes__thumb":w={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":w={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:w={}}return w}function p(g){var w=["xaxis","yaxis","zaxis"];return w.indexOf(g.slice(0,5))>-1}fe.exports=function(w,s){var j,b=w.data,z=w.layout,X=m([],b),N=m({},z,v(s.tileClass)),O=w._context||{};if(s.width&&(N.width=s.width),s.height&&(N.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){N.annotations=[];var F=Object.keys(N);for(j=0;j<F.length;j++)p(F[j])&&(N[F[j]].title={text:""});for(j=0;j<X.length;j++){var P=X[j];P.showscale=!1,P.marker&&(P.marker.showscale=!1),d.traceIs(P,"pie-like")&&(P.textposition="none")}}if(Array.isArray(s.annotations))for(j=0;j<s.annotations.length;j++)N.annotations.push(s.annotations[j]);var _=Object.keys(N).filter(function(ye){return ye.match(/^scene\d*$/)});if(_.length){var R={};for(s.tileClass==="thumbnail"&&(R={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),j=0;j<_.length;j++){var H=N[_[j]];H.xaxis||(H.xaxis={}),H.yaxis||(H.yaxis={}),H.zaxis||(H.zaxis={}),c(H.xaxis,R),c(H.yaxis,R),c(H.zaxis,R),H._scene=null}}var te=document.createElement("div");s.tileClass&&(te.className=s.tileClass);var J={gd:te,td:te,layout:N,data:X,config:{staticPlot:s.staticPlot===void 0?!0:s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:O.mapboxAccessToken}};return s.setBackground!=="transparent"&&(J.config.setBackground=s.setBackground||"opaque"),J.gd.defaultLayout=v(s.tileClass),J}}}),qi=n({"src/snapshot/toimage.js"(ce,fe){var d=ko().EventEmitter,u=hr(),c=pa(),m=xl(),v=Fn(),p=ks(),g=el();function w(s,j){var b=new d,z=v(s,{format:"png"}),X=z.gd;X.style.position="absolute",X.style.left="-5000px",document.body.appendChild(X);function N(){var F=m.getDelay(X._fullLayout);setTimeout(function(){var P=p(X),_=document.createElement("canvas");_.id=c.randstr(),b=g({format:j.format,width:X._fullLayout.width,height:X._fullLayout.height,canvas:_,emitter:b,svg:P}),b.clean=function(){X&&document.body.removeChild(X)}},F)}var O=m.getRedrawFunc(X);return u.call("_doPlot",X,z.data,z.layout,z.config).then(O).then(N).catch(function(F){b.emit("error",F)}),b}fe.exports=w}}),ri=n({"src/snapshot/index.js"(ce,fe){var d=xl(),u={getDelay:d.getDelay,getRedrawFunc:d.getRedrawFunc,clone:Fn(),toSVG:ks(),svgToImg:el(),toImage:qi(),downloadImage:vs()};fe.exports=u}}),Wn=n({"src/core.js"(ce){ce.version=y().version,x(),Gs();var fe=hr(),d=ce.register=fe.register,u=Wu(),c=Object.keys(u);for(v=0;v<c.length;v++)m=c[v],m.charAt(0)!=="_"&&(ce[m]=u[m]),d({moduleType:"apiMethod",name:m,fn:u[m]});var m,v;d(Mu()),d([Vc(),ys(),lo(),Wl(),Xc(),Jc(),Ru(),Xl(),mr(),fa(),Wa(),hl(),Kn(),Bn(),Ms(),Lc()]),d([Vn(),hn()]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(d(window.PlotlyLocales),delete window.PlotlyLocales),ce.Icons=pu();var p=Ms(),g=Di();ce.Plots={resize:g.resize,graphJson:g.graphJson,sendDataToCloud:g.sendDataToCloud},ce.Fx={hover:p.hover,unhover:p.unhover,loneHover:p.loneHover,loneUnhover:p.loneUnhover},ce.Snapshot=ri(),ce.PlotSchema=qs()}}),gi=n({"lib/core.js"(ce,fe){fe.exports=Wn()}}),kn=n({"src/traces/bar/constants.js"(ce,fe){fe.exports={TEXTPAD:3,eventDataKeys:["value","label"]}}}),In=n({"src/traces/bar/attributes.js"(ce,fe){var d=yl(),u=ro().axisHoverFormat,c=kt().hovertemplateAttrs,m=kt().texttemplateAttrs,v=Ss(),p=G(),g=kn(),w=Rr().pattern,s=L().extendFlat,j=p({editType:"calc",arrayOk:!0,colorEditType:"style"}),b=d.marker,z=b.line,X=s({},z.width,{dflt:0}),N=s({width:X,editType:"calc"},v("marker.line")),O=s({line:N,editType:"calc"},v("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:w,cornerradius:{valType:"any",editType:"calc"}});fe.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:u("x"),yhoverformat:u("y"),text:d.text,texttemplate:m({editType:"plot"},{keys:g.eventDataKeys}),hovertext:d.hovertext,hovertemplate:c({},{keys:g.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:s({},j,{}),insidetextfont:s({},j,{}),outsidetextfont:s({},j,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:s({},d.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:O,offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:{marker:{opacity:d.selected.marker.opacity,color:d.selected.marker.color,editType:"style"},textfont:d.selected.textfont,editType:"style"},unselected:{marker:{opacity:d.unselected.marker.opacity,color:d.unselected.marker.color,editType:"style"},textfont:d.unselected.textfont,editType:"style"},zorder:d.zorder}}}),vo=n({"src/traces/bar/layout_attributes.js"(ce,fe){fe.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}}}),No=n({"src/traces/bar/style_defaults.js"(ce,fe){var d=Ve(),u=So().hasColorscale,c=Ws(),m=pa().coercePattern;fe.exports=function(p,g,w,s,j){var b=w("marker.color",s),z=u(p,"marker");z&&c(p,g,j,w,{prefix:"marker.",cLetter:"c"}),w("marker.line.color",d.defaultLine),u(p,"marker.line")&&c(p,g,j,w,{prefix:"marker.line.",cLetter:"c"}),w("marker.line.width"),w("marker.opacity"),m(w,"marker.pattern",b,z),w("selected.marker.color"),w("unselected.marker.color")}}}),El=n({"src/traces/bar/defaults.js"(ce,fe){var d=B(),u=pa(),c=Ve(),m=hr(),v=$u(),p=Rs(),g=No(),w=wu(),s=In(),j=u.coerceFont;function b(O,F,P,_){function R(se,he){return u.coerce(O,F,s,se,he)}var H=v(O,F,_,R);if(!H){F.visible=!1;return}p(O,F,_,R),R("xhoverformat"),R("yhoverformat"),R("zorder"),R("orientation",F.x&&!F.y?"h":"v"),R("base"),R("offset"),R("width"),R("text"),R("hovertext"),R("hovertemplate");var te=R("textposition");N(O,F,_,R,te,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),g(O,F,R,P,_);var J=(F.marker.line||{}).color,ye=m.getComponentMethod("errorbars","supplyDefaults");ye(O,F,J||c.defaultLine,{axis:"y"}),ye(O,F,J||c.defaultLine,{axis:"x",inherit:"y"}),u.coerceSelectionMarkerOpacity(F,R)}function z(O,F){var P,_;function R(J,ye){return u.coerce(_._input,_,s,J,ye)}for(var H=0;H<O.length;H++)if(_=O[H],_.type==="bar"){P=_._input;var te=R("marker.cornerradius",F.barcornerradius);_.marker&&(_.marker.cornerradius=X(te)),w(P,_,F,R,F.barmode)}}function X(O){if(d(O)){if(O=+O,O>=0)return O}else if(typeof O=="string"&&(O=O.trim(),O.slice(-1)==="%"&&d(O.slice(0,-1))&&(O=+O.slice(0,-1),O>=0)))return O+"%"}function N(O,F,P,_,R,H){H=H||{};var te=H.moduleHasSelected!==!1,J=H.moduleHasUnselected!==!1,ye=H.moduleHasConstrain!==!1,se=H.moduleHasCliponaxis!==!1,he=H.moduleHasTextangle!==!1,pe=H.moduleHasInsideanchor!==!1,Q=!!H.hasPathbar,ue=Array.isArray(R)||R==="auto",me=ue||R==="inside",be=ue||R==="outside";if(me||be){var ve=j(_,"textfont",P.font),Me=u.extendFlat({},ve),ke=O.textfont&&O.textfont.color,le=!ke;if(le&&delete Me.color,j(_,"insidetextfont",Me),Q){var De=u.extendFlat({},ve);le&&delete De.color,j(_,"pathbar.textfont",De)}be&&j(_,"outsidetextfont",ve),te&&_("selected.textfont.color"),J&&_("unselected.textfont.color"),ye&&_("constraintext"),se&&_("cliponaxis"),he&&_("textangle"),_("texttemplate")}me&&pe&&_("insidetextanchor")}fe.exports={supplyDefaults:b,crossTraceDefaults:z,handleText:N,validateCornerradius:X}}}),Zl=n({"src/traces/bar/layout_defaults.js"(ce,fe){var d=hr(),u=mi(),c=pa(),m=vo(),v=El().validateCornerradius;fe.exports=function(p,g,w){function s(te,J){return c.coerce(p,g,m,te,J)}for(var j=!1,b=!1,z=!1,X={},N=s("barmode"),O=N==="group",F=0;F<w.length;F++){var P=w[F];if(d.traceIs(P,"bar")&&P.visible)j=!0;else continue;var _=P.xaxis+P.yaxis;if(O?(X[_]&&(z=!0),X[_]=!0):(_+=P._input.offsetgroup,X.length>0&&!X[_]&&(z=!0),X[_]=!0),P.visible&&P.type==="histogram"){var R=u.getFromId({_fullLayout:g},P[P.orientation==="v"?"xaxis":"yaxis"]);R.type!=="category"&&(b=!0)}}if(!j){delete g.barmode;return}N!=="overlay"&&s("barnorm"),s("bargap",b&&!z?0:.2),s("bargroupgap");var H=s("barcornerradius");g.barcornerradius=v(H)}}}),Zo=n({"src/traces/bar/arrays_to_calcdata.js"(ce,fe){var d=pa();fe.exports=function(c,m){for(var v=0;v<c.length;v++)c[v].i=v;d.mergeArray(m.text,c,"tx"),d.mergeArray(m.hovertext,c,"htx");var p=m.marker;if(p){d.mergeArray(p.opacity,c,"mo",!0),d.mergeArray(p.color,c,"mc");var g=p.line;g&&(d.mergeArray(g.color,c,"mlc"),d.mergeArrayCastPositive(g.width,c,"mlw"))}}}}),Jl=n({"src/traces/bar/calc.js"(ce,fe){var d=mi(),u=_i(),c=So().hasColorscale,m=Iu(),v=Zo(),p=Zu();fe.exports=function(w,s){var j=d.getFromId(w,s.xaxis||"x"),b=d.getFromId(w,s.yaxis||"y"),z,X,N,O,F,P,_={msUTC:!!(s.base||s.base===0)};s.orientation==="h"?(z=j.makeCalcdata(s,"x",_),N=b.makeCalcdata(s,"y"),O=u(s,b,"y",N),F=!!s.yperiodalignment,P="y"):(z=b.makeCalcdata(s,"y",_),N=j.makeCalcdata(s,"x"),O=u(s,j,"x",N),F=!!s.xperiodalignment,P="x"),X=O.vals;for(var R=Math.min(X.length,z.length),H=new Array(R),te=0;te<R;te++)H[te]={p:X[te],s:z[te]},F&&(H[te].orig_p=N[te],H[te][P+"End"]=O.ends[te],H[te][P+"Start"]=O.starts[te]),s.ids&&(H[te].id=String(s.ids[te]));return c(s,"marker")&&m(w,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),c(s,"marker.line")&&m(w,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),v(H,s),p(H,s),H}}}),Kl=n({"src/traces/bar/uniform_text.js"(ce,fe){var d=k(),u=pa();function c(g,w,s){var j=g._fullLayout,b=j["_"+s+"Text_minsize"];if(b){var z=j.uniformtext.mode==="hide",X;switch(s){case"funnelarea":case"pie":case"sunburst":X="g.slice";break;case"treemap":case"icicle":X="g.slice, g.pathbar";break;default:X="g.points > g.point"}w.selectAll(X).each(function(N){var O=N.transform;if(O){O.scale=z&&O.hide?0:b/O.fontSize;var F=d.select(this).select("text");u.setTransormAndDisplay(F,O)}})}}function m(g,w,s){if(s.uniformtext.mode){var j=p(g),b=s.uniformtext.minsize,z=w.scale*w.fontSize;w.hide=z<b,s[j]=s[j]||1/0,w.hide||(s[j]=Math.min(s[j],Math.max(z,b)))}}function v(g,w){var s=p(g);w[s]=void 0}function p(g){return"_"+g+"Text_minsize"}fe.exports={recordMinTextSize:m,clearMinTextSize:v,resizeText:c}}}),Qc=n({"src/traces/bar/helpers.js"(ce){var fe=B(),d=A(),u=pa().isArrayOrTypedArray;ce.coerceString=function(c,m,v){if(typeof m=="string"){if(m||!c.noBlank)return m}else if((typeof m=="number"||m===!0)&&!c.strict)return String(m);return v!==void 0?v:c.dflt},ce.coerceNumber=function(c,m,v){if(fe(m)){m=+m;var p=c.min,g=c.max,w=p!==void 0&&m<p||g!==void 0&&m>g;if(!w)return m}return v!==void 0?v:c.dflt},ce.coerceColor=function(c,m,v){return d(m).isValid()?m:v!==void 0?v:c.dflt},ce.coerceEnumerated=function(c,m,v){return c.coerceNumber&&(m=+m),c.values.indexOf(m)!==-1?m:v!==void 0?v:c.dflt},ce.getValue=function(c,m){var v;return u(c)?m<c.length&&(v=c[m]):v=c,v},ce.getLineWidth=function(c,m){var v=0<m.mlw?m.mlw:u(c.marker.line.width)?0:c.marker.line.width;return v}}}),ef=n({"src/traces/bar/style.js"(ce,fe){var d=k(),u=Ve(),c=ni(),m=pa(),v=hr(),p=Kl().resizeText,g=In(),w=g.textfont,s=g.insidetextfont,j=g.outsidetextfont,b=Qc();function z(se){var he=d.select(se).selectAll('g[class^="barlayer"]').selectAll("g.trace");p(se,he,"bar");var pe=he.size(),Q=se._fullLayout;he.style("opacity",function(ue){return ue[0].trace.opacity}).each(function(ue){(Q.barmode==="stack"&&pe>1||Q.bargap===0&&Q.bargroupgap===0&&!ue[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),he.selectAll("g.points").each(function(ue){var me=d.select(this),be=ue[0].trace;X(me,be,se)}),v.getComponentMethod("errorbars","style")(he)}function X(se,he,pe){c.pointStyle(se.selectAll("path"),he,pe),N(se,he,pe)}function N(se,he,pe){se.selectAll("text").each(function(Q){var ue=d.select(this),me=m.ensureUniformFontSize(pe,_(ue,Q,he,pe));c.font(ue,me)})}function O(se,he,pe){var Q=he[0].trace;Q.selectedpoints?F(pe,Q,se):(X(pe,Q,se),v.getComponentMethod("errorbars","style")(pe))}function F(se,he,pe){c.selectedPointStyle(se.selectAll("path"),he),P(se.selectAll("text"),he,pe)}function P(se,he,pe){se.each(function(Q){var ue=d.select(this),me;if(Q.selected){me=m.ensureUniformFontSize(pe,_(ue,Q,he,pe));var be=he.selected.textfont&&he.selected.textfont.color;be&&(me.color=be),c.font(ue,me)}else c.selectedTextStyle(ue,he)})}function _(se,he,pe,Q){var ue=Q._fullLayout.font,me=pe.textfont;if(se.classed("bartext-inside")){var be=ye(he,pe);me=H(pe,he.i,ue,be)}else se.classed("bartext-outside")&&(me=te(pe,he.i,ue));return me}function R(se,he,pe){return J(w,se.textfont,he,pe)}function H(se,he,pe,Q){var ue=R(se,he,pe),me=se._input.textfont===void 0||se._input.textfont.color===void 0||Array.isArray(se.textfont.color)&&se.textfont.color[he]===void 0;return me&&(ue={color:u.contrast(Q),family:ue.family,size:ue.size,weight:ue.weight,style:ue.style,variant:ue.variant,textcase:ue.textcase,lineposition:ue.lineposition,shadow:ue.shadow}),J(s,se.insidetextfont,he,ue)}function te(se,he,pe){var Q=R(se,he,pe);return J(j,se.outsidetextfont,he,Q)}function J(se,he,pe,Q){he=he||{};var ue=b.getValue(he.family,pe),me=b.getValue(he.size,pe),be=b.getValue(he.color,pe),ve=b.getValue(he.weight,pe),Me=b.getValue(he.style,pe),ke=b.getValue(he.variant,pe),le=b.getValue(he.textcase,pe),De=b.getValue(he.lineposition,pe),Oe=b.getValue(he.shadow,pe);return{family:b.coerceString(se.family,ue,Q.family),size:b.coerceNumber(se.size,me,Q.size),color:b.coerceColor(se.color,be,Q.color),weight:b.coerceString(se.weight,ve,Q.weight),style:b.coerceString(se.style,Me,Q.style),variant:b.coerceString(se.variant,ke,Q.variant),textcase:b.coerceString(se.variant,le,Q.textcase),lineposition:b.coerceString(se.variant,De,Q.lineposition),shadow:b.coerceString(se.variant,Oe,Q.shadow)}}function ye(se,he){return he.type==="waterfall"?he[se.dir].marker.color:se.mcc||se.mc||he.marker.color}fe.exports={style:z,styleTextPoints:N,styleOnSelect:O,getInsideTextFont:H,getOutsideTextFont:te,getBarColor:ye,resizeText:p}}}),tf=n({"src/traces/bar/plot.js"(ce,fe){var d=k(),u=B(),c=pa(),m=Ui(),v=Ve(),p=ni(),g=hr(),w=mi().tickText,s=Kl(),j=s.recordMinTextSize,b=s.clearMinTextSize,z=ef(),X=Qc(),N=kn(),O=In(),F=O.text,P=O.textposition,_=ts().appendArrayPointValue,R=N.TEXTPAD;function H(Ye){return Ye.id}function te(Ye){if(Ye.ids)return H}function J(Ye){return(Ye>0)-(Ye<0)}function ye(Ye,st){return Ye<st?1:-1}function se(Ye,st,it,yt){var _e=[],Ee=[],de=yt?st:it,we=yt?it:st;return _e[0]=de.c2p(Ye.s0,!0),Ee[0]=we.c2p(Ye.p0,!0),_e[1]=de.c2p(Ye.s1,!0),Ee[1]=we.c2p(Ye.p1,!0),yt?[_e,Ee]:[Ee,_e]}function he(Ye,st,it,yt){if(!st.uniformtext.mode&&pe(it)){var _e;return yt&&(_e=yt()),Ye.transition().duration(it.duration).ease(it.easing).each("end",function(){_e&&_e()}).each("interrupt",function(){_e&&_e()})}else return Ye}function pe(Ye){return Ye&&Ye.duration>0}function Q(Ye,st,it,yt,_e,Ee){var de=st.xaxis,we=st.yaxis,je=Ye._fullLayout,Ae=Ye._context.staticPlot;_e||(_e={mode:je.barmode,norm:je.barmode,gap:je.bargap,groupgap:je.bargroupgap},b("bar",je));var $=c.makeTraceGroups(yt,it,"trace bars").each(function(oe){var ge=d.select(this),Te=oe[0].trace,Ue=oe[0].t,Ze=Te.type==="waterfall",Je=Te.type==="funnel",ft=Te.type==="histogram",wt=Te.type==="bar",Ct=wt||Je,Kt=0;Ze&&Te.connector.visible&&Te.connector.mode==="between"&&(Kt=Te.connector.line.width/2);var $t=Te.orientation==="h",Wt=pe(_e),nt=c.ensureSingle(ge,"g","points"),pt=te(Te),Ke=nt.selectAll("g.point").data(c.identity,pt);Ke.enter().append("g").classed("point",!0),Ke.exit().remove(),Ke.each(function(Ft,Xt){var or=d.select(this),sr=se(Ft,de,we,$t),dr=sr[0][0],wr=sr[0][1],xr=sr[1][0],Pr=sr[1][1],nr=($t?wr-dr:Pr-xr)===0;nr&&Ct&&X.getLineWidth(Te,Ft)&&(nr=!1),nr||(nr=!u(dr)||!u(wr)||!u(xr)||!u(Pr)),Ft.isBlank=nr,nr&&($t?wr=dr:Pr=xr),Kt&&!nr&&($t?(dr-=ye(dr,wr)*Kt,wr+=ye(dr,wr)*Kt):(xr-=ye(xr,Pr)*Kt,Pr+=ye(xr,Pr)*Kt));var jr,ta;if(Te.type==="waterfall"){if(!nr){var Nr=Te[Ft.dir].marker;jr=Nr.line.width,ta=Nr.color}}else jr=X.getLineWidth(Te,Ft),ta=Ft.mc||Te.marker.color;function Jr(Va){var ja=d.round(jr/2%1,2);return _e.gap===0&&_e.groupgap===0?d.round(Math.round(Va)-ja,2):Va}function vt(Va,ja,$a){return $a&&Va===ja?Va:Math.abs(Va-ja)>=2?Jr(Va):Va>ja?Math.ceil(Va):Math.floor(Va)}var Mt=v.opacity(ta),xt=Mt<1||jr>.01?Jr:vt;Ye._context.staticPlot||(dr=xt(dr,wr,$t),wr=xt(wr,dr,$t),xr=xt(xr,Pr,!$t),Pr=xt(Pr,xr,!$t));var Le=$t?de.c2p:we.c2p,ot;Ft.s0>0?ot=Ft._sMax:Ft.s0<0?ot=Ft._sMin:ot=Ft.s1>0?Ft._sMax:Ft._sMin;function ct(Va,ja){if(!Va)return 0;var $a=Math.abs($t?Pr-xr:wr-dr),La=Math.abs($t?wr-dr:Pr-xr),la=xt(Math.abs(Le(ot,!0)-Le(0,!0))),Ba=Ft.hasB?Math.min($a/2,La/2):Math.min($a/2,la),un;if(ja==="%"){var pn=Math.min(50,Va);un=$a*(pn/100)}else un=Va;return xt(Math.max(Math.min(un,Ba),0))}var ut=wt||ft?ct(Ue.cornerradiusvalue,Ue.cornerradiusform):0,Pt,Ot,qt="M"+dr+","+xr+"V"+Pr+"H"+wr+"V"+xr+"Z",ir=0;if(ut&&Ft.s){var _r=J(Ft.s0)===0||J(Ft.s)===J(Ft.s0)?Ft.s1:Ft.s0;if(ir=xt(Ft.hasB?0:Math.abs(Le(ot,!0)-Le(_r,!0))),ir<ut){var Bt=ye(dr,wr),gr=ye(xr,Pr),Ar=Bt===-gr?1:0;if($t)if(Ft.hasB)Pt="M"+(dr+ut*Bt)+","+xr+"A "+ut+","+ut+" 0 0 "+Ar+" "+dr+","+(xr+ut*gr)+"V"+(Pr-ut*gr)+"A "+ut+","+ut+" 0 0 "+Ar+" "+(dr+ut*Bt)+","+Pr+"H"+(wr-ut*Bt)+"A "+ut+","+ut+" 0 0 "+Ar+" "+wr+","+(Pr-ut*gr)+"V"+(xr+ut*gr)+"A "+ut+","+ut+" 0 0 "+Ar+" "+(wr-ut*Bt)+","+xr+"Z";else{Ot=Math.abs(wr-dr)+ir;var Er=Ot<ut?ut-Math.sqrt(Ot*(2*ut-Ot)):0,ba=ir>0?Math.sqrt(ir*(2*ut-ir)):0,Ga=Bt>0?Math.max:Math.min;Pt="M"+dr+","+xr+"V"+(Pr-Er*gr)+"H"+Ga(wr-(ut-ir)*Bt,dr)+"A "+ut+","+ut+" 0 0 "+Ar+" "+wr+","+(Pr-ut*gr-ba)+"V"+(xr+ut*gr+ba)+"A "+ut+","+ut+" 0 0 "+Ar+" "+Ga(wr-(ut-ir)*Bt,dr)+","+(xr+Er*gr)+"Z"}else if(Ft.hasB)Pt="M"+(dr+ut*Bt)+","+xr+"A "+ut+","+ut+" 0 0 "+Ar+" "+dr+","+(xr+ut*gr)+"V"+(Pr-ut*gr)+"A "+ut+","+ut+" 0 0 "+Ar+" "+(dr+ut*Bt)+","+Pr+"H"+(wr-ut*Bt)+"A "+ut+","+ut+" 0 0 "+Ar+" "+wr+","+(Pr-ut*gr)+"V"+(xr+ut*gr)+"A "+ut+","+ut+" 0 0 "+Ar+" "+(wr-ut*Bt)+","+xr+"Z";else{Ot=Math.abs(Pr-xr)+ir;var Xa=Ot<ut?ut-Math.sqrt(Ot*(2*ut-Ot)):0,Aa=ir>0?Math.sqrt(ir*(2*ut-ir)):0,Oa=gr>0?Math.max:Math.min;Pt="M"+(dr+Xa*Bt)+","+xr+"V"+Oa(Pr-(ut-ir)*gr,xr)+"A "+ut+","+ut+" 0 0 "+Ar+" "+(dr+ut*Bt-Aa)+","+Pr+"H"+(wr-ut*Bt+Aa)+"A "+ut+","+ut+" 0 0 "+Ar+" "+(wr-Xa*Bt)+","+Oa(Pr-(ut-ir)*gr,xr)+"V"+xr+"Z"}}else Pt=qt}else Pt=qt;var va=he(c.ensureSingle(or,"path"),je,_e,Ee);if(va.style("vector-effect",Ae?"none":"non-scaling-stroke").attr("d",isNaN((wr-dr)*(Pr-xr))||nr&&Ye._context.staticPlot?"M0,0Z":Pt).call(p.setClipUrl,st.layerClipId,Ye),!je.uniformtext.mode&&Wt){var ma=p.makePointStyleFns(Te);p.singlePointStyle(Ft,va,Te,ma,Ye)}ue(Ye,st,or,oe,Xt,dr,wr,xr,Pr,ut,ir,_e,Ee),st.layerClipId&&p.hideOutsideRangePoint(Ft,or.select("text"),de,we,Te.xcalendar,Te.ycalendar)});var gt=Te.cliponaxis===!1;p.setClipUrl(ge,gt?null:st.layerClipId,Ye)});g.getComponentMethod("errorbars","plot")(Ye,$,st,_e)}function ue(Ye,st,it,yt,_e,Ee,de,we,je,Ae,$,oe,ge){var Te=st.xaxis,Ue=st.yaxis,Ze=Ye._fullLayout,Je;function ft(Ot,qt,ir){var _r=c.ensureSingle(Ot,"text").text(qt).attr({class:"bartext bartext-"+Je,"text-anchor":"middle","data-notex":1}).call(p.font,ir).call(m.convertToTspans,Ye);return _r}var wt=yt[0].trace,Ct=wt.orientation==="h",Kt=De(Ze,yt,_e,Te,Ue);Je=Oe(wt,_e);var $t=oe.mode==="stack"||oe.mode==="relative",Wt=yt[_e],nt=!$t||Wt._outmost,pt=Wt.hasB,Ke=Ae&&Ae-$>R;if(!Kt||Je==="none"||(Wt.isBlank||Ee===de||we===je)&&(Je==="auto"||Je==="inside")){it.select("text").remove();return}var gt=Ze.font,Ft=z.getBarColor(yt[_e],wt),Xt=z.getInsideTextFont(wt,_e,gt,Ft),or=z.getOutsideTextFont(wt,_e,gt),sr=wt.insidetextanchor||"end",dr=it.datum();Ct?Te.type==="log"&&dr.s0<=0&&(Te.range[0]<Te.range[1]?Ee=0:Ee=Te._length):Ue.type==="log"&&dr.s0<=0&&(Ue.range[0]<Ue.range[1]?we=Ue._length:we=0);var wr=Math.abs(de-Ee),xr=Math.abs(je-we),Pr=wr-2*R,nr=xr-2*R,jr,ta,Nr,Jr,vt;if(Je==="outside"&&!nt&&!Wt.hasB&&(Je="inside"),Je==="auto")if(nt){Je="inside",vt=c.ensureUniformFontSize(Ye,Xt),jr=ft(it,Kt,vt),ta=p.bBox(jr.node()),Nr=ta.width,Jr=ta.height;var Mt=Nr>0&&Jr>0,xt;Ke?pt?xt=me(Pr-2*Ae,nr,Nr,Jr,Ct)||me(Pr,nr-2*Ae,Nr,Jr,Ct):Ct?xt=me(Pr-(Ae-$),nr,Nr,Jr,Ct)||me(Pr,nr-2*(Ae-$),Nr,Jr,Ct):xt=me(Pr,nr-(Ae-$),Nr,Jr,Ct)||me(Pr-2*(Ae-$),nr,Nr,Jr,Ct):xt=me(Pr,nr,Nr,Jr,Ct),Mt&&xt?Je="inside":(Je="outside",jr.remove(),jr=null)}else Je="inside";if(!jr){vt=c.ensureUniformFontSize(Ye,Je==="outside"?or:Xt),jr=ft(it,Kt,vt);var Le=jr.attr("transform");if(jr.attr("transform",""),ta=p.bBox(jr.node()),Nr=ta.width,Jr=ta.height,jr.attr("transform",Le),Nr<=0||Jr<=0){jr.remove();return}}var ot=wt.textangle,ct,ut;Je==="outside"?(ut=wt.constraintext==="both"||wt.constraintext==="outside",ct=le(Ee,de,we,je,ta,{isHorizontal:Ct,constrained:ut,angle:ot})):(ut=wt.constraintext==="both"||wt.constraintext==="inside",ct=Me(Ee,de,we,je,ta,{isHorizontal:Ct,constrained:ut,angle:ot,anchor:sr,hasB:pt,r:Ae,overhead:$})),ct.fontSize=vt.size,j(wt.type==="histogram"?"bar":wt.type,ct,Ze),Wt.transform=ct;var Pt=he(jr,Ze,oe,ge);c.setTransormAndDisplay(Pt,ct)}function me(Ye,st,it,yt,_e){if(Ye<0||st<0)return!1;var Ee=it<=Ye&&yt<=st,de=it<=st&&yt<=Ye,we=_e?Ye>=it*(st/yt):st>=yt*(Ye/it);return Ee||de||we}function be(Ye){return Ye==="auto"?0:Ye}function ve(Ye,st){var it=Math.PI/180*st,yt=Math.abs(Math.sin(it)),_e=Math.abs(Math.cos(it));return{x:Ye.width*_e+Ye.height*yt,y:Ye.width*yt+Ye.height*_e}}function Me(Ye,st,it,yt,_e,Ee){var de=!!Ee.isHorizontal,we=!!Ee.constrained,je=Ee.angle||0,Ae=Ee.anchor,$=Ae==="end",oe=Ae==="start",ge=Ee.leftToRight||0,Te=(ge+1)/2,Ue=1-Te,Ze=Ee.hasB,Je=Ee.r,ft=Ee.overhead,wt=_e.width,Ct=_e.height,Kt=Math.abs(st-Ye),$t=Math.abs(yt-it),Wt=Kt>2*R&&$t>2*R?R:0;Kt-=2*Wt,$t-=2*Wt;var nt=be(je);je==="auto"&&!(wt<=Kt&&Ct<=$t)&&(wt>Kt||Ct>$t)&&(!(wt>$t||Ct>Kt)||wt<Ct!=Kt<$t)&&(nt+=90);var pt=ve(_e,nt),Ke,gt;if(Je&&Je-ft>R){var Ft=ke(Ye,st,it,yt,pt,Je,ft,de,Ze);Ke=Ft.scale,gt=Ft.pad}else Ke=1,we&&(Ke=Math.min(1,Kt/pt.x,$t/pt.y)),gt=0;var Xt=_e.left*Ue+_e.right*Te,or=(_e.top+_e.bottom)/2,sr=(Ye+R)*Ue+(st-R)*Te,dr=(it+yt)/2,wr=0,xr=0;if(oe||$){var Pr=(de?pt.x:pt.y)/2;Je&&($||Ze)&&(Wt+=gt);var nr=de?ye(Ye,st):ye(it,yt);de?oe?(sr=Ye+nr*Wt,wr=-nr*Pr):(sr=st-nr*Wt,wr=nr*Pr):oe?(dr=it+nr*Wt,xr=-nr*Pr):(dr=yt-nr*Wt,xr=nr*Pr)}return{textX:Xt,textY:or,targetX:sr,targetY:dr,anchorX:wr,anchorY:xr,scale:Ke,rotate:nt}}function ke(Ye,st,it,yt,_e,Ee,de,we,je){var Ae=Math.max(0,Math.abs(st-Ye)-2*R),$=Math.max(0,Math.abs(yt-it)-2*R),oe=Ee-R,ge=de?oe-Math.sqrt(oe*oe-(oe-de)*(oe-de)):oe,Te=je?oe*2:we?oe-de:2*ge,Ue=je?oe*2:we?2*ge:oe-de,Ze,Je,ft,wt,Ct;return _e.y/_e.x>=$/(Ae-Te)?wt=$/_e.y:_e.y/_e.x<=($-Ue)/Ae?wt=Ae/_e.x:!je&&we?(Ze=_e.x*_e.x+_e.y*_e.y/4,Je=-2*_e.x*(Ae-oe)-_e.y*($/2-oe),ft=(Ae-oe)*(Ae-oe)+($/2-oe)*($/2-oe)-oe*oe,wt=(-Je+Math.sqrt(Je*Je-4*Ze*ft))/(2*Ze)):je?(Ze=(_e.x*_e.x+_e.y*_e.y)/4,Je=-_e.x*(Ae/2-oe)-_e.y*($/2-oe),ft=(Ae/2-oe)*(Ae/2-oe)+($/2-oe)*($/2-oe)-oe*oe,wt=(-Je+Math.sqrt(Je*Je-4*Ze*ft))/(2*Ze)):(Ze=_e.x*_e.x/4+_e.y*_e.y,Je=-_e.x*(Ae/2-oe)-2*_e.y*($-oe),ft=(Ae/2-oe)*(Ae/2-oe)+($-oe)*($-oe)-oe*oe,wt=(-Je+Math.sqrt(Je*Je-4*Ze*ft))/(2*Ze)),wt=Math.min(1,wt),we?Ct=Math.max(0,oe-Math.sqrt(Math.max(0,oe*oe-(oe-($-_e.y*wt)/2)*(oe-($-_e.y*wt)/2)))-de):Ct=Math.max(0,oe-Math.sqrt(Math.max(0,oe*oe-(oe-(Ae-_e.x*wt)/2)*(oe-(Ae-_e.x*wt)/2)))-de),{scale:wt,pad:Ct}}function le(Ye,st,it,yt,_e,Ee){var de=!!Ee.isHorizontal,we=!!Ee.constrained,je=Ee.angle||0,Ae=_e.width,$=_e.height,oe=Math.abs(st-Ye),ge=Math.abs(yt-it),Te;de?Te=ge>2*R?R:0:Te=oe>2*R?R:0;var Ue=1;we&&(Ue=de?Math.min(1,ge/$):Math.min(1,oe/Ae));var Ze=be(je),Je=ve(_e,Ze),ft=(de?Je.x:Je.y)/2,wt=(_e.left+_e.right)/2,Ct=(_e.top+_e.bottom)/2,Kt=(Ye+st)/2,$t=(it+yt)/2,Wt=0,nt=0,pt=de?ye(st,Ye):ye(it,yt);return de?(Kt=st-pt*Te,Wt=pt*ft):($t=yt+pt*Te,nt=-pt*ft),{textX:wt,textY:Ct,targetX:Kt,targetY:$t,anchorX:Wt,anchorY:nt,scale:Ue,rotate:Ze}}function De(Ye,st,it,yt,_e){var Ee=st[0].trace,de=Ee.texttemplate,we;return de?we=He(Ye,st,it,yt,_e):Ee.textinfo?we=Be(st,it,yt,_e):we=X.getValue(Ee.text,it),X.coerceString(F,we)}function Oe(Ye,st){var it=X.getValue(Ye.textposition,st);return X.coerceEnumerated(P,it)}function He(Ye,st,it,yt,_e){var Ee=st[0].trace,de=c.castOption(Ee,it,"texttemplate");if(!de)return"";var we=Ee.type==="histogram",je=Ee.type==="waterfall",Ae=Ee.type==="funnel",$=Ee.orientation==="h",oe,ge,Te,Ue;$?(oe="y",ge=_e,Te="x",Ue=yt):(oe="x",ge=yt,Te="y",Ue=_e);function Ze(Wt){return w(ge,ge.c2l(Wt),!0).text}function Je(Wt){return w(Ue,Ue.c2l(Wt),!0).text}var ft=st[it],wt={};wt.label=ft.p,wt.labelLabel=wt[oe+"Label"]=Ze(ft.p);var Ct=c.castOption(Ee,ft.i,"text");(Ct===0||Ct)&&(wt.text=Ct),wt.value=ft.s,wt.valueLabel=wt[Te+"Label"]=Je(ft.s);var Kt={};_(Kt,Ee,ft.i),(we||Kt.x===void 0)&&(Kt.x=$?wt.value:wt.label),(we||Kt.y===void 0)&&(Kt.y=$?wt.label:wt.value),(we||Kt.xLabel===void 0)&&(Kt.xLabel=$?wt.valueLabel:wt.labelLabel),(we||Kt.yLabel===void 0)&&(Kt.yLabel=$?wt.labelLabel:wt.valueLabel),je&&(wt.delta=+ft.rawS||ft.s,wt.deltaLabel=Je(wt.delta),wt.final=ft.v,wt.finalLabel=Je(wt.final),wt.initial=wt.final-wt.delta,wt.initialLabel=Je(wt.initial)),Ae&&(wt.value=ft.s,wt.valueLabel=Je(wt.value),wt.percentInitial=ft.begR,wt.percentInitialLabel=c.formatPercent(ft.begR),wt.percentPrevious=ft.difR,wt.percentPreviousLabel=c.formatPercent(ft.difR),wt.percentTotal=ft.sumR,wt.percenTotalLabel=c.formatPercent(ft.sumR));var $t=c.castOption(Ee,ft.i,"customdata");return $t&&(wt.customdata=$t),c.texttemplateString(de,wt,Ye._d3locale,Kt,wt,Ee._meta||{})}function Be(Ye,st,it,yt){var _e=Ye[0].trace,Ee=_e.orientation==="h",de=_e.type==="waterfall",we=_e.type==="funnel";function je($t){var Wt=Ee?yt:it;return w(Wt,$t,!0).text}function Ae($t){var Wt=Ee?it:yt;return w(Wt,+$t,!0).text}var $=_e.textinfo,oe=Ye[st],ge=$.split("+"),Te=[],Ue,Ze=function($t){return ge.indexOf($t)!==-1};if(Ze("label")&&Te.push(je(Ye[st].p)),Ze("text")&&(Ue=c.castOption(_e,oe.i,"text"),(Ue===0||Ue)&&Te.push(Ue)),de){var Je=+oe.rawS||oe.s,ft=oe.v,wt=ft-Je;Ze("initial")&&Te.push(Ae(wt)),Ze("delta")&&Te.push(Ae(Je)),Ze("final")&&Te.push(Ae(ft))}if(we){Ze("value")&&Te.push(Ae(oe.s));var Ct=0;Ze("percent initial")&&Ct++,Ze("percent previous")&&Ct++,Ze("percent total")&&Ct++;var Kt=Ct>1;Ze("percent initial")&&(Ue=c.formatPercent(oe.begR),Kt&&(Ue+=" of initial"),Te.push(Ue)),Ze("percent previous")&&(Ue=c.formatPercent(oe.difR),Kt&&(Ue+=" of previous"),Te.push(Ue)),Ze("percent total")&&(Ue=c.formatPercent(oe.sumR),Kt&&(Ue+=" of total"),Te.push(Ue))}return Te.join("<br>")}fe.exports={plot:Q,toMoveInsideBar:Me}}}),rf=n({"src/traces/bar/hover.js"(ce,fe){var d=Ms(),u=hr(),c=Ve(),m=pa().fillText,v=Qc().getLineWidth,p=mi().hoverLabelText,g=W().BADNUM;function w(b,z,X,N,O){var F=s(b,z,X,N,O);if(F){var P=F.cd,_=P[0].trace,R=P[F.index];return F.color=j(_,R),u.getComponentMethod("errorbars","hoverInfo")(R,_,F),[F]}}function s(b,z,X,N,O){var F=b.cd,P=F[0].trace,_=F[0].t,R=N==="closest",H=P.type==="waterfall",te=b.maxHoverDistance,J=b.maxSpikeDistance,ye,se,he,pe,Q,ue,me;P.orientation==="h"?(ye=X,se=z,he="y",pe="x",Q=yt,ue=Ye):(ye=z,se=X,he="x",pe="y",ue=yt,Q=Ye);var be=P[he+"period"],ve=R||be;function Me(Ue){return le(Ue,-1)}function ke(Ue){return le(Ue,1)}function le(Ue,Ze){var Je=Ue.w;return Ue[he]+Ze*Je/2}function De(Ue){return Ue[he+"End"]-Ue[he+"Start"]}var Oe=R?Me:be?function(Ue){return Ue.p-De(Ue)/2}:function(Ue){return Math.min(Me(Ue),Ue.p-_.bardelta/2)},He=R?ke:be?function(Ue){return Ue.p+De(Ue)/2}:function(Ue){return Math.max(ke(Ue),Ue.p+_.bardelta/2)};function Be(Ue,Ze,Je){return O.finiteRange&&(Je=0),d.inbox(Ue-ye,Ze-ye,Je+Math.min(1,Math.abs(Ze-Ue)/me)-1)}function Ye(Ue){return Be(Oe(Ue),He(Ue),te)}function st(Ue){return Be(Me(Ue),ke(Ue),J)}function it(Ue){var Ze=Ue[pe];if(H){var Je=Math.abs(Ue.rawS)||0;se>0?Ze+=Je:se<0&&(Ze-=Je)}return Ze}function yt(Ue){var Ze=se,Je=Ue.b,ft=it(Ue);return d.inbox(Je-Ze,ft-Ze,te+(ft-Ze)/(ft-Je)-1)}function _e(Ue){var Ze=se,Je=Ue.b,ft=it(Ue);return d.inbox(Je-Ze,ft-Ze,J+(ft-Ze)/(ft-Je)-1)}var Ee=b[he+"a"],de=b[pe+"a"];me=Math.abs(Ee.r2c(Ee.range[1])-Ee.r2c(Ee.range[0]));function we(Ue){return(Q(Ue)+ue(Ue))/2}var je=d.getDistanceFunction(N,Q,ue,we);if(d.getClosest(F,je,b),b.index!==!1&&F[b.index].p!==g){ve||(Oe=function(Ue){return Math.min(Me(Ue),Ue.p-_.bargroupwidth/2)},He=function(Ue){return Math.max(ke(Ue),Ue.p+_.bargroupwidth/2)});var Ae=b.index,$=F[Ae],oe=P.base?$.b+$.s:$.s;b[pe+"0"]=b[pe+"1"]=de.c2p($[pe],!0),b[pe+"LabelVal"]=oe;var ge=_.extents[_.extents.round($.p)];b[he+"0"]=Ee.c2p(R?Oe($):ge[0],!0),b[he+"1"]=Ee.c2p(R?He($):ge[1],!0);var Te=$.orig_p!==void 0;return b[he+"LabelVal"]=Te?$.orig_p:$.p,b.labelLabel=p(Ee,b[he+"LabelVal"],P[he+"hoverformat"]),b.valueLabel=p(de,b[pe+"LabelVal"],P[pe+"hoverformat"]),b.baseLabel=p(de,$.b,P[pe+"hoverformat"]),b.spikeDistance=(_e($)+st($))/2,b[he+"Spike"]=Ee.c2p($.p,!0),m($,P,b),b.hovertemplate=P.hovertemplate,b}}function j(b,z){var X=z.mcc||b.marker.color,N=z.mlcc||b.marker.line.color,O=v(b,z);if(c.opacity(X))return X;if(c.opacity(N)&&O)return N}fe.exports={hoverPoints:w,hoverOnBars:s,getTraceColor:j}}}),Md=n({"src/traces/bar/event_data.js"(ce,fe){fe.exports=function(u,c,m){return u.x="xVal"in c?c.xVal:c.x,u.y="yVal"in c?c.yVal:c.y,c.xa&&(u.xaxis=c.xa),c.ya&&(u.yaxis=c.ya),m.orientation==="h"?(u.label=u.y,u.value=u.x):(u.label=u.x,u.value=u.y),u}}}),Ed=n({"src/traces/bar/select.js"(ce,fe){fe.exports=function(c,m){var v=c.cd,p=c.xaxis,g=c.yaxis,w=v[0].trace,s=w.type==="funnel",j=w.orientation==="h",b=[],z;if(m===!1)for(z=0;z<v.length;z++)v[z].selected=0;else for(z=0;z<v.length;z++){var X=v[z],N="ct"in X?X.ct:d(X,p,g,j,s);m.contains(N,!1,z,c)?(b.push({pointNumber:z,x:p.c2d(X.x),y:g.c2d(X.y)}),X.selected=1):X.selected=0}return b};function d(u,c,m,v,p){var g=c.c2p(v?u.s0:u.p0,!0),w=c.c2p(v?u.s1:u.p1,!0),s=m.c2p(v?u.p0:u.s0,!0),j=m.c2p(v?u.p1:u.s1,!0);return p?[(g+w)/2,(s+j)/2]:v?[w,(s+j)/2]:[(g+w)/2,j]}}}),ac=n({"src/traces/bar/index.js"(ce,fe){fe.exports={attributes:In(),layoutAttributes:vo(),supplyDefaults:El().supplyDefaults,crossTraceDefaults:El().crossTraceDefaults,supplyLayoutDefaults:Zl(),calc:Jl(),crossTraceCalc:Su().crossTraceCalc,colorbar:Uc(),arraysToCalcdata:Zo(),plot:tf().plot,style:ef().style,styleOnSelect:ef().styleOnSelect,hoverPoints:rf().hoverPoints,eventData:Md(),selectPoints:Ed(),moduleType:"trace",name:"bar",basePlotModule:Yl(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}}}),If=n({"lib/bar.js"(ce,fe){fe.exports=ac()}}),Th=n({"src/traces/pie/attributes.js"(ce,fe){var d=$e(),u=Tr().attributes,c=G(),m=Pe(),v=kt().hovertemplateAttrs,p=kt().texttemplateAttrs,g=L().extendFlat,w=Rr().pattern,s=c({editType:"plot",arrayOk:!0,colorEditType:"plot"});fe.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:w,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:g({},d.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:v({},{keys:["label","color","value","percent","text"]}),texttemplate:p({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:g({},s,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:g({},s,{}),outsidetextfont:g({},s,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:g({},s,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:u({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}}}),Mh=n({"src/traces/pie/defaults.js"(ce,fe){var d=B(),u=pa(),c=Th(),m=Tr().defaults,v=El().handleText,p=pa().coercePattern;function g(j,b){var z=u.isArrayOrTypedArray(j),X=u.isArrayOrTypedArray(b),N=Math.min(z?j.length:1/0,X?b.length:1/0);if(isFinite(N)||(N=0),N&&X){for(var O,F=0;F<N;F++){var P=b[F];if(d(P)&&P>0){O=!0;break}}O||(N=0)}return{hasLabels:z,hasValues:X,len:N}}function w(j,b,z,X,N){var O=X("marker.line.width");O&&X("marker.line.color",N?void 0:z.paper_bgcolor);var F=X("marker.colors");p(X,"marker.pattern",F),j.marker&&!b.marker.pattern.fgcolor&&(b.marker.pattern.fgcolor=j.marker.colors),b.marker.pattern.bgcolor||(b.marker.pattern.bgcolor=z.paper_bgcolor)}function s(j,b,z,X){function N(ue,me){return u.coerce(j,b,c,ue,me)}var O=N("labels"),F=N("values"),P=g(O,F),_=P.len;if(b._hasLabels=P.hasLabels,b._hasValues=P.hasValues,!b._hasLabels&&b._hasValues&&(N("label0"),N("dlabel")),!_){b.visible=!1;return}b._length=_,w(j,b,X,N,!0),N("scalegroup");var R=N("text"),H=N("texttemplate"),te;if(H||(te=N("textinfo",u.isArrayOrTypedArray(R)?"text+percent":"percent")),N("hovertext"),N("hovertemplate"),H||te&&te!=="none"){var J=N("textposition");v(j,b,X,N,J,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var ye=Array.isArray(J)||J==="auto",se=ye||J==="outside";se&&N("automargin"),(J==="inside"||J==="auto"||Array.isArray(J))&&N("insidetextorientation")}else te==="none"&&N("textposition","none");m(b,X,N);var he=N("hole"),pe=N("title.text");if(pe){var Q=N("title.position",he?"middle center":"top center");!he&&Q==="middle center"&&(b.title.position="top center"),u.coerceFont(N,"title.font",X.font)}N("sort"),N("direction"),N("rotation"),N("pull")}fe.exports={handleLabelsAndValues:g,handleMarkerDefaults:w,supplyDefaults:s}}}),Bf=n({"src/traces/pie/layout_attributes.js"(ce,fe){fe.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}}}),ns=n({"src/traces/pie/layout_defaults.js"(ce,fe){var d=pa(),u=Bf();fe.exports=function(m,v){function p(g,w){return d.coerce(m,v,u,g,w)}p("hiddenlabels"),p("piecolorway",v.colorway),p("extendpiecolors")}}}),is=n({"src/traces/pie/calc.js"(ce,fe){var d=B(),u=A(),c=Ve(),m={};function v(s,j){var b=[],z=s._fullLayout,X=z.hiddenlabels||[],N=j.labels,O=j.marker.colors||[],F=j.values,P=j._length,_=j._hasValues&&P,R,H;if(j.dlabel)for(N=new Array(P),R=0;R<P;R++)N[R]=String(j.label0+R*j.dlabel);var te={},J=p(z["_"+j.type+"colormap"]),ye=0,se=!1;for(R=0;R<P;R++){var he,pe,Q;if(_){if(he=F[R],!d(he))continue;he=+he}else he=1;pe=N[R],(pe===void 0||pe==="")&&(pe=R),pe=String(pe);var ue=te[pe];ue===void 0?(te[pe]=b.length,Q=X.indexOf(pe)!==-1,Q||(ye+=he),b.push({v:he,label:pe,color:J(O[R],pe),i:R,pts:[R],hidden:Q})):(se=!0,H=b[ue],H.v+=he,H.pts.push(R),H.hidden||(ye+=he),H.color===!1&&O[R]&&(H.color=J(O[R],pe)))}b=b.filter(function(be){return be.v>=0});var me=j.type==="funnelarea"?se:j.sort;return me&&b.sort(function(be,ve){return ve.v-be.v}),b[0]&&(b[0].vTotal=ye),b}function p(s){return function(b,z){return!b||(b=u(b),!b.isValid())?!1:(b=c.addOpacity(b,b.getAlpha()),s[z]||(s[z]=b),b)}}function g(s,j){var b=(j||{}).type;b||(b="pie");var z=s._fullLayout,X=s.calcdata,N=z[b+"colorway"],O=z["_"+b+"colormap"];z["extend"+b+"colors"]&&(N=w(N,m));for(var F=0,P=0;P<X.length;P++){var _=X[P],R=_[0].trace.type;if(R===b)for(var H=0;H<_.length;H++){var te=_[H];te.color===!1&&(O[te.label]?te.color=O[te.label]:(O[te.label]=te.color=N[F%N.length],F++))}}}function w(s,j){var b,z=JSON.stringify(s),X=j[z];if(!X){for(X=s.slice(),b=0;b<s.length;b++)X.push(u(s[b]).lighten(20).toHexString());for(b=0;b<s.length;b++)X.push(u(s[b]).darken(20).toHexString());j[z]=X}return X}fe.exports={calc:v,crossTraceCalc:g,makePullColorFn:p,generateExtendedColors:w}}}),Ql=n({"src/traces/pie/event_data.js"(ce,fe){var d=ts().appendArrayMultiPointValues;fe.exports=function(c,m){var v={curveNumber:m.index,pointNumbers:c.pts,data:m._input,fullData:m,label:c.label,color:c.color,value:c.v,percent:c.percent,text:c.text,bbox:c.bbox,v:c.v};return c.pts.length===1&&(v.pointNumber=v.i=c.pts[0]),d(v,m,c.pts),m.type==="funnelarea"&&(delete v.v,delete v.i),v}}}),Eh=n({"src/traces/pie/plot.js"(ce,fe){var d=k(),u=Di(),c=Ms(),m=Ve(),v=ni(),p=pa(),g=p.strScale,w=p.strTranslate,s=Ui(),j=Kl(),b=j.recordMinTextSize,z=j.clearMinTextSize,X=kn().TEXTPAD,N=Nl(),O=Ql(),F=pa().isValidTextValue;function P(Ee,de){var we=Ee._context.staticPlot,je=Ee._fullLayout,Ae=je._size;z("pie",je),J(de,Ee),Be(de,Ae);var $=p.makeTraceGroups(je._pielayer,de,"trace").each(function(oe){var ge=d.select(this),Te=oe[0],Ue=Te.trace;st(oe),ge.attr("stroke-linejoin","round"),ge.each(function(){var Ze=d.select(this).selectAll("g.slice").data(oe);Ze.enter().append("g").classed("slice",!0),Ze.exit().remove();var Je=[[[],[]],[[],[]]],ft=!1;Ze.each(function(Ke,gt){if(Ke.hidden){d.select(this).selectAll("path,g").remove();return}Ke.pointNumber=Ke.i,Ke.curveNumber=Ue.index,Je[Ke.pxmid[1]<0?0:1][Ke.pxmid[0]<0?0:1].push(Ke);var Ft=Te.cx,Xt=Te.cy,or=d.select(this),sr=or.selectAll("path.surface").data([Ke]);if(sr.enter().append("path").classed("surface",!0).style({"pointer-events":we?"none":"all"}),or.call(R,Ee,oe),Ue.pull){var dr=+N.castOption(Ue.pull,Ke.pts)||0;dr>0&&(Ft+=dr*Ke.pxmid[0],Xt+=dr*Ke.pxmid[1])}Ke.cxFinal=Ft,Ke.cyFinal=Xt;function wr(Jr,vt,Mt,xt){var Le=xt*(vt[0]-Jr[0]),ot=xt*(vt[1]-Jr[1]);return"a"+xt*Te.r+","+xt*Te.r+" 0 "+Ke.largeArc+(Mt?" 1 ":" 0 ")+Le+","+ot}var xr=Ue.hole;if(Ke.v===Te.vTotal){var Pr="M"+(Ft+Ke.px0[0])+","+(Xt+Ke.px0[1])+wr(Ke.px0,Ke.pxmid,!0,1)+wr(Ke.pxmid,Ke.px0,!0,1)+"Z";xr?sr.attr("d","M"+(Ft+xr*Ke.px0[0])+","+(Xt+xr*Ke.px0[1])+wr(Ke.px0,Ke.pxmid,!1,xr)+wr(Ke.pxmid,Ke.px0,!1,xr)+"Z"+Pr):sr.attr("d",Pr)}else{var nr=wr(Ke.px0,Ke.px1,!0,1);if(xr){var jr=1-xr;sr.attr("d","M"+(Ft+xr*Ke.px1[0])+","+(Xt+xr*Ke.px1[1])+wr(Ke.px1,Ke.px0,!1,xr)+"l"+jr*Ke.px0[0]+","+jr*Ke.px0[1]+nr+"Z")}else sr.attr("d","M"+Ft+","+Xt+"l"+Ke.px0[0]+","+Ke.px0[1]+nr+"Z")}yt(Ee,Ke,Te);var ta=N.castOption(Ue.textposition,Ke.pts),Nr=or.selectAll("g.slicetext").data(Ke.text&&ta!=="none"?[0]:[]);Nr.enter().append("g").classed("slicetext",!0),Nr.exit().remove(),Nr.each(function(){var Jr=p.ensureSingle(d.select(this),"text","",function(Pt){Pt.attr("data-notex",1)}),vt=p.ensureUniformFontSize(Ee,ta==="outside"?H(Ue,Ke,je.font):te(Ue,Ke,je.font));Jr.text(Ke.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,vt).call(s.convertToTspans,Ee);var Mt=v.bBox(Jr.node()),xt;if(ta==="outside")xt=ve(Mt,Ke);else if(xt=ye(Mt,Ke,Te),ta==="auto"&&xt.scale<1){var Le=p.ensureUniformFontSize(Ee,Ue.outsidetextfont);Jr.call(v.font,Le),Mt=v.bBox(Jr.node()),xt=ve(Mt,Ke)}var ot=xt.textPosAngle,ct=ot===void 0?Ke.pxmid:it(Te.r,ot);if(xt.targetX=Ft+ct[0]*xt.rCenter+(xt.x||0),xt.targetY=Xt+ct[1]*xt.rCenter+(xt.y||0),_e(xt,Mt),xt.outside){var ut=xt.targetY;Ke.yLabelMin=ut-Mt.height/2,Ke.yLabelMid=ut,Ke.yLabelMax=ut+Mt.height/2,Ke.labelExtraX=0,Ke.labelExtraY=0,ft=!0}xt.fontSize=vt.size,b(Ue.type,xt,je),oe[gt].transform=xt,p.setTransormAndDisplay(Jr,xt)})});var wt=d.select(this).selectAll("g.titletext").data(Ue.title.text?[0]:[]);if(wt.enter().append("g").classed("titletext",!0),wt.exit().remove(),wt.each(function(){var Ke=p.ensureSingle(d.select(this),"text","",function(Xt){Xt.attr("data-notex",1)}),gt=Ue.title.text;Ue._meta&&(gt=p.templateString(gt,Ue._meta)),Ke.text(gt).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,Ue.title.font).call(s.convertToTspans,Ee);var Ft;Ue.title.position==="middle center"?Ft=Me(Te):Ft=ke(Te,Ae),Ke.attr("transform",w(Ft.x,Ft.y)+g(Math.min(1,Ft.scale))+w(Ft.tx,Ft.ty))}),ft&&He(Je,Ue),_(Ze,Ue),ft&&Ue.automargin){var Ct=v.bBox(ge.node()),Kt=Ue.domain,$t=Ae.w*(Kt.x[1]-Kt.x[0]),Wt=Ae.h*(Kt.y[1]-Kt.y[0]),nt=(.5*$t-Te.r)/Ae.w,pt=(.5*Wt-Te.r)/Ae.h;u.autoMargin(Ee,"pie."+Ue.uid+".automargin",{xl:Kt.x[0]-nt,xr:Kt.x[1]+nt,yb:Kt.y[0]-pt,yt:Kt.y[1]+pt,l:Math.max(Te.cx-Te.r-Ct.left,0),r:Math.max(Ct.right-(Te.cx+Te.r),0),b:Math.max(Ct.bottom-(Te.cy+Te.r),0),t:Math.max(Te.cy-Te.r-Ct.top,0),pad:5})}})});setTimeout(function(){$.selectAll("tspan").each(function(){var oe=d.select(this);oe.attr("dy")&&oe.attr("dy",oe.attr("dy"))})},0)}function _(Ee,de){Ee.each(function(we){var je=d.select(this);if(!we.labelExtraX&&!we.labelExtraY){je.select("path.textline").remove();return}var Ae=je.select("g.slicetext text");we.transform.targetX+=we.labelExtraX,we.transform.targetY+=we.labelExtraY,p.setTransormAndDisplay(Ae,we.transform);var $=we.cxFinal+we.pxmid[0],oe=we.cyFinal+we.pxmid[1],ge="M"+$+","+oe,Te=(we.yLabelMax-we.yLabelMin)*(we.pxmid[0]<0?-1:1)/4;if(we.labelExtraX){var Ue=we.labelExtraX*we.pxmid[1]/we.pxmid[0],Ze=we.yLabelMid+we.labelExtraY-(we.cyFinal+we.pxmid[1]);Math.abs(Ue)>Math.abs(Ze)?ge+="l"+Ze*we.pxmid[0]/we.pxmid[1]+","+Ze+"H"+($+we.labelExtraX+Te):ge+="l"+we.labelExtraX+","+Ue+"v"+(Ze-Ue)+"h"+Te}else ge+="V"+(we.yLabelMid+we.labelExtraY)+"h"+Te;p.ensureSingle(je,"path","textline").call(m.stroke,de.outsidetextfont.color).attr({"stroke-width":Math.min(2,de.outsidetextfont.size/8),d:ge,fill:"none"})})}function R(Ee,de,we){var je=we[0],Ae=je.cx,$=je.cy,oe=je.trace,ge=oe.type==="funnelarea";"_hasHoverLabel"in oe||(oe._hasHoverLabel=!1),"_hasHoverEvent"in oe||(oe._hasHoverEvent=!1),Ee.on("mouseover",function(Te){var Ue=de._fullLayout,Ze=de._fullData[oe.index];if(!(de._dragging||Ue.hovermode===!1)){var Je=Ze.hoverinfo;if(Array.isArray(Je)&&(Je=c.castHoverinfo({hoverinfo:[N.castOption(Je,Te.pts)],_module:oe._module},Ue,0)),Je==="all"&&(Je="label+text+value+percent+name"),Ze.hovertemplate||Je!=="none"&&Je!=="skip"&&Je){var ft=Te.rInscribed||0,wt=Ae+Te.pxmid[0]*(1-ft),Ct=$+Te.pxmid[1]*(1-ft),Kt=Ue.separators,$t=[];if(Je&&Je.indexOf("label")!==-1&&$t.push(Te.label),Te.text=N.castOption(Ze.hovertext||Ze.text,Te.pts),Je&&Je.indexOf("text")!==-1){var Wt=Te.text;p.isValidTextValue(Wt)&&$t.push(Wt)}Te.value=Te.v,Te.valueLabel=N.formatPieValue(Te.v,Kt),Je&&Je.indexOf("value")!==-1&&$t.push(Te.valueLabel),Te.percent=Te.v/je.vTotal,Te.percentLabel=N.formatPiePercent(Te.percent,Kt),Je&&Je.indexOf("percent")!==-1&&$t.push(Te.percentLabel);var nt=Ze.hoverlabel,pt=nt.font,Ke=[];c.loneHover({trace:oe,x0:wt-ft*je.r,x1:wt+ft*je.r,y:Ct,_x0:ge?Ae+Te.TL[0]:wt-ft*je.r,_x1:ge?Ae+Te.TR[0]:wt+ft*je.r,_y0:ge?$+Te.TL[1]:Ct-ft*je.r,_y1:ge?$+Te.BL[1]:Ct+ft*je.r,text:$t.join("<br>"),name:Ze.hovertemplate||Je.indexOf("name")!==-1?Ze.name:void 0,idealAlign:Te.pxmid[0]<0?"left":"right",color:N.castOption(nt.bgcolor,Te.pts)||Te.color,borderColor:N.castOption(nt.bordercolor,Te.pts),fontFamily:N.castOption(pt.family,Te.pts),fontSize:N.castOption(pt.size,Te.pts),fontColor:N.castOption(pt.color,Te.pts),nameLength:N.castOption(nt.namelength,Te.pts),textAlign:N.castOption(nt.align,Te.pts),hovertemplate:N.castOption(Ze.hovertemplate,Te.pts),hovertemplateLabels:Te,eventData:[O(Te,Ze)]},{container:Ue._hoverlayer.node(),outerContainer:Ue._paper.node(),gd:de,inOut_bbox:Ke}),Te.bbox=Ke[0],oe._hasHoverLabel=!0}oe._hasHoverEvent=!0,de.emit("plotly_hover",{points:[O(Te,Ze)],event:d.event})}}),Ee.on("mouseout",function(Te){var Ue=de._fullLayout,Ze=de._fullData[oe.index],Je=d.select(this).datum();oe._hasHoverEvent&&(Te.originalEvent=d.event,de.emit("plotly_unhover",{points:[O(Je,Ze)],event:d.event}),oe._hasHoverEvent=!1),oe._hasHoverLabel&&(c.loneUnhover(Ue._hoverlayer.node()),oe._hasHoverLabel=!1)}),Ee.on("click",function(Te){var Ue=de._fullLayout,Ze=de._fullData[oe.index];de._dragging||Ue.hovermode===!1||(de._hoverdata=[O(Te,Ze)],c.click(de,d.event))})}function H(Ee,de,we){var je=N.castOption(Ee.outsidetextfont.color,de.pts)||N.castOption(Ee.textfont.color,de.pts)||we.color,Ae=N.castOption(Ee.outsidetextfont.family,de.pts)||N.castOption(Ee.textfont.family,de.pts)||we.family,$=N.castOption(Ee.outsidetextfont.size,de.pts)||N.castOption(Ee.textfont.size,de.pts)||we.size,oe=N.castOption(Ee.outsidetextfont.weight,de.pts)||N.castOption(Ee.textfont.weight,de.pts)||we.weight,ge=N.castOption(Ee.outsidetextfont.style,de.pts)||N.castOption(Ee.textfont.style,de.pts)||we.style,Te=N.castOption(Ee.outsidetextfont.variant,de.pts)||N.castOption(Ee.textfont.variant,de.pts)||we.variant,Ue=N.castOption(Ee.outsidetextfont.textcase,de.pts)||N.castOption(Ee.textfont.textcase,de.pts)||we.textcase,Ze=N.castOption(Ee.outsidetextfont.lineposition,de.pts)||N.castOption(Ee.textfont.lineposition,de.pts)||we.lineposition,Je=N.castOption(Ee.outsidetextfont.shadow,de.pts)||N.castOption(Ee.textfont.shadow,de.pts)||we.shadow;return{color:je,family:Ae,size:$,weight:oe,style:ge,variant:Te,textcase:Ue,lineposition:Ze,shadow:Je}}function te(Ee,de,we){var je=N.castOption(Ee.insidetextfont.color,de.pts);!je&&Ee._input.textfont&&(je=N.castOption(Ee._input.textfont.color,de.pts));var Ae=N.castOption(Ee.insidetextfont.family,de.pts)||N.castOption(Ee.textfont.family,de.pts)||we.family,$=N.castOption(Ee.insidetextfont.size,de.pts)||N.castOption(Ee.textfont.size,de.pts)||we.size,oe=N.castOption(Ee.insidetextfont.weight,de.pts)||N.castOption(Ee.textfont.weight,de.pts)||we.weight,ge=N.castOption(Ee.insidetextfont.style,de.pts)||N.castOption(Ee.textfont.style,de.pts)||we.style,Te=N.castOption(Ee.insidetextfont.variant,de.pts)||N.castOption(Ee.textfont.variant,de.pts)||we.variant,Ue=N.castOption(Ee.insidetextfont.textcase,de.pts)||N.castOption(Ee.textfont.textcase,de.pts)||we.textcase,Ze=N.castOption(Ee.insidetextfont.lineposition,de.pts)||N.castOption(Ee.textfont.lineposition,de.pts)||we.lineposition,Je=N.castOption(Ee.insidetextfont.shadow,de.pts)||N.castOption(Ee.textfont.shadow,de.pts)||we.shadow;return{color:je||m.contrast(de.color),family:Ae,size:$,weight:oe,style:ge,variant:Te,textcase:Ue,lineposition:Ze,shadow:Je}}function J(Ee,de){for(var we,je,Ae=0;Ae<Ee.length;Ae++)if(we=Ee[Ae][0],je=we.trace,je.title.text){var $=je.title.text;je._meta&&($=p.templateString($,je._meta));var oe=v.tester.append("text").attr("data-notex",1).text($).call(v.font,je.title.font).call(s.convertToTspans,de),ge=v.bBox(oe.node(),!0);we.titleBox={width:ge.width,height:ge.height},oe.remove()}}function ye(Ee,de,we){var je=we.r||de.rpx1,Ae=de.rInscribed,$=de.startangle===de.stopangle;if($)return{rCenter:1-Ae,scale:0,rotate:0,textPosAngle:0};var oe=de.ring,ge=oe===1&&Math.abs(de.startangle-de.stopangle)===Math.PI*2,Te=de.halfangle,Ue=de.midangle,Ze=we.trace.insidetextorientation,Je=Ze==="horizontal",ft=Ze==="tangential",wt=Ze==="radial",Ct=Ze==="auto",Kt=[],$t;if(!Ct){var Wt=function(or,sr){if(se(de,or)){var dr=Math.abs(or-de.startangle),wr=Math.abs(or-de.stopangle),xr=dr<wr?dr:wr;sr==="tan"?$t=pe(Ee,je,oe,xr,0):$t=he(Ee,je,oe,xr,Math.PI/2),$t.textPosAngle=or,Kt.push($t)}},nt;if(Je||ft){for(nt=4;nt>=-4;nt-=2)Wt(Math.PI*nt,"tan");for(nt=4;nt>=-4;nt-=2)Wt(Math.PI*(nt+1),"tan")}if(Je||wt){for(nt=4;nt>=-4;nt-=2)Wt(Math.PI*(nt+1.5),"rad");for(nt=4;nt>=-4;nt-=2)Wt(Math.PI*(nt+.5),"rad")}}if(ge||Ct||Je){var pt=Math.sqrt(Ee.width*Ee.width+Ee.height*Ee.height);if($t={scale:Ae*je*2/pt,rCenter:1-Ae,rotate:0},$t.textPosAngle=(de.startangle+de.stopangle)/2,$t.scale>=1)return $t;Kt.push($t)}(Ct||wt)&&($t=he(Ee,je,oe,Te,Ue),$t.textPosAngle=(de.startangle+de.stopangle)/2,Kt.push($t)),(Ct||ft)&&($t=pe(Ee,je,oe,Te,Ue),$t.textPosAngle=(de.startangle+de.stopangle)/2,Kt.push($t));for(var Ke=0,gt=0,Ft=0;Ft<Kt.length;Ft++){var Xt=Kt[Ft].scale;if(gt<Xt&&(gt=Xt,Ke=Ft),!Ct&&gt>=1)break}return Kt[Ke]}function se(Ee,de){var we=Ee.startangle,je=Ee.stopangle;return we>de&&de>je||we<de&&de<je}function he(Ee,de,we,je,Ae){de=Math.max(0,de-2*X);var $=Ee.width/Ee.height,oe=me($,je,de,we);return{scale:oe*2/Ee.height,rCenter:Q($,oe/de),rotate:ue(Ae)}}function pe(Ee,de,we,je,Ae){de=Math.max(0,de-2*X);var $=Ee.height/Ee.width,oe=me($,je,de,we);return{scale:oe*2/Ee.width,rCenter:Q($,oe/de),rotate:ue(Ae+Math.PI/2)}}function Q(Ee,de){return Math.cos(de)-Ee*de}function ue(Ee){return(180/Math.PI*Ee+720)%180-90}function me(Ee,de,we,je){var Ae=Ee+1/(2*Math.tan(de));return we*Math.min(1/(Math.sqrt(Ae*Ae+.5)+Ae),je/(Math.sqrt(Ee*Ee+je/2)+Ee))}function be(Ee,de){return Ee.v===de.vTotal&&!de.trace.hole?1:Math.min(1/(1+1/Math.sin(Ee.halfangle)),Ee.ring/2)}function ve(Ee,de){var we=de.pxmid[0],je=de.pxmid[1],Ae=Ee.width/2,$=Ee.height/2;return we<0&&(Ae*=-1),je<0&&($*=-1),{scale:1,rCenter:1,rotate:0,x:Ae+Math.abs($)*(Ae>0?1:-1)/2,y:$/(1+we*we/(je*je)),outside:!0}}function Me(Ee){var de=Math.sqrt(Ee.titleBox.width*Ee.titleBox.width+Ee.titleBox.height*Ee.titleBox.height);return{x:Ee.cx,y:Ee.cy,scale:Ee.trace.hole*Ee.r*2/de,tx:0,ty:-Ee.titleBox.height/2+Ee.trace.title.font.size}}function ke(Ee,de){var we=1,je=1,Ae,$=Ee.trace,oe={x:Ee.cx,y:Ee.cy},ge={tx:0,ty:0};ge.ty+=$.title.font.size,Ae=Oe($),$.title.position.indexOf("top")!==-1?(oe.y-=(1+Ae)*Ee.r,ge.ty-=Ee.titleBox.height):$.title.position.indexOf("bottom")!==-1&&(oe.y+=(1+Ae)*Ee.r);var Te=le(Ee.r,Ee.trace.aspectratio),Ue=de.w*($.domain.x[1]-$.domain.x[0])/2;return $.title.position.indexOf("left")!==-1?(Ue=Ue+Te,oe.x-=(1+Ae)*Te,ge.tx+=Ee.titleBox.width/2):$.title.position.indexOf("center")!==-1?Ue*=2:$.title.position.indexOf("right")!==-1&&(Ue=Ue+Te,oe.x+=(1+Ae)*Te,ge.tx-=Ee.titleBox.width/2),we=Ue/Ee.titleBox.width,je=De(Ee,de)/Ee.titleBox.height,{x:oe.x,y:oe.y,scale:Math.min(we,je),tx:ge.tx,ty:ge.ty}}function le(Ee,de){return Ee/(de===void 0?1:de)}function De(Ee,de){var we=Ee.trace,je=de.h*(we.domain.y[1]-we.domain.y[0]);return Math.min(Ee.titleBox.height,je/2)}function Oe(Ee){var de=Ee.pull;if(!de)return 0;var we;if(p.isArrayOrTypedArray(de))for(de=0,we=0;we<Ee.pull.length;we++)Ee.pull[we]>de&&(de=Ee.pull[we]);return de}function He(Ee,de){var we,je,Ae,$,oe,ge,Te,Ue,Ze,Je,ft,wt,Ct;function Kt(pt,Ke){return pt.pxmid[1]-Ke.pxmid[1]}function $t(pt,Ke){return Ke.pxmid[1]-pt.pxmid[1]}function Wt(pt,Ke){Ke||(Ke={});var gt=Ke.labelExtraY+(je?Ke.yLabelMax:Ke.yLabelMin),Ft=je?pt.yLabelMin:pt.yLabelMax,Xt=je?pt.yLabelMax:pt.yLabelMin,or=pt.cyFinal+oe(pt.px0[1],pt.px1[1]),sr=gt-Ft,dr,wr,xr,Pr,nr,jr;if(sr*Te>0&&(pt.labelExtraY=sr),!!p.isArrayOrTypedArray(de.pull))for(wr=0;wr<Je.length;wr++)xr=Je[wr],!(xr===pt||(N.castOption(de.pull,pt.pts)||0)>=(N.castOption(de.pull,xr.pts)||0))&&((pt.pxmid[1]-xr.pxmid[1])*Te>0?(Pr=xr.cyFinal+oe(xr.px0[1],xr.px1[1]),sr=Pr-Ft-pt.labelExtraY,sr*Te>0&&(pt.labelExtraY+=sr)):(Xt+pt.labelExtraY-or)*Te>0&&(dr=3*ge*Math.abs(wr-Je.indexOf(pt)),nr=xr.cxFinal+$(xr.px0[0],xr.px1[0]),jr=nr+dr-(pt.cxFinal+pt.pxmid[0])-pt.labelExtraX,jr*ge>0&&(pt.labelExtraX+=jr)))}for(je=0;je<2;je++)for(Ae=je?Kt:$t,oe=je?Math.max:Math.min,Te=je?1:-1,we=0;we<2;we++){for($=we?Math.max:Math.min,ge=we?1:-1,Ue=Ee[je][we],Ue.sort(Ae),Ze=Ee[1-je][we],Je=Ze.concat(Ue),wt=[],ft=0;ft<Ue.length;ft++)Ue[ft].yLabelMid!==void 0&&wt.push(Ue[ft]);for(Ct=!1,ft=0;je&&ft<Ze.length;ft++)if(Ze[ft].yLabelMid!==void 0){Ct=Ze[ft];break}for(ft=0;ft<wt.length;ft++){var nt=ft&&wt[ft-1];Ct&&!ft&&(nt=Ct),Wt(wt[ft],nt)}}}function Be(Ee,de){for(var we=[],je=0;je<Ee.length;je++){var Ae=Ee[je][0],$=Ae.trace,oe=$.domain,ge=de.w*(oe.x[1]-oe.x[0]),Te=de.h*(oe.y[1]-oe.y[0]);$.title.text&&$.title.position!=="middle center"&&(Te-=De(Ae,de));var Ue=ge/2,Ze=Te/2;$.type==="funnelarea"&&!$.scalegroup&&(Ze/=$.aspectratio),Ae.r=Math.min(Ue,Ze)/(1+Oe($)),Ae.cx=de.l+de.w*($.domain.x[1]+$.domain.x[0])/2,Ae.cy=de.t+de.h*(1-$.domain.y[0])-Te/2,$.title.text&&$.title.position.indexOf("bottom")!==-1&&(Ae.cy-=De(Ae,de)),$.scalegroup&&we.indexOf($.scalegroup)===-1&&we.push($.scalegroup)}Ye(Ee,we)}function Ye(Ee,de){for(var we,je,Ae,$=0;$<de.length;$++){var oe=1/0,ge=de[$];for(je=0;je<Ee.length;je++)if(we=Ee[je][0],Ae=we.trace,Ae.scalegroup===ge){var Te;if(Ae.type==="pie")Te=we.r*we.r;else if(Ae.type==="funnelarea"){var Ue,Ze;Ae.aspectratio>1?(Ue=we.r,Ze=Ue/Ae.aspectratio):(Ze=we.r,Ue=Ze*Ae.aspectratio),Ue*=(1+Ae.baseratio)/2,Te=Ue*Ze}oe=Math.min(oe,Te/we.vTotal)}for(je=0;je<Ee.length;je++)if(we=Ee[je][0],Ae=we.trace,Ae.scalegroup===ge){var Je=oe*we.vTotal;Ae.type==="funnelarea"&&(Je/=(1+Ae.baseratio)/2,Je/=Ae.aspectratio),we.r=Math.sqrt(Je)}}}function st(Ee){var de=Ee[0],we=de.r,je=de.trace,Ae=N.getRotationAngle(je.rotation),$=2*Math.PI/de.vTotal,oe="px0",ge="px1",Te,Ue,Ze;if(je.direction==="counterclockwise"){for(Te=0;Te<Ee.length&&Ee[Te].hidden;Te++);if(Te===Ee.length)return;Ae+=$*Ee[Te].v,$*=-1,oe="px1",ge="px0"}for(Ze=it(we,Ae),Te=0;Te<Ee.length;Te++)Ue=Ee[Te],!Ue.hidden&&(Ue[oe]=Ze,Ue.startangle=Ae,Ae+=$*Ue.v/2,Ue.pxmid=it(we,Ae),Ue.midangle=Ae,Ae+=$*Ue.v/2,Ze=it(we,Ae),Ue.stopangle=Ae,Ue[ge]=Ze,Ue.largeArc=Ue.v>de.vTotal/2?1:0,Ue.halfangle=Math.PI*Math.min(Ue.v/de.vTotal,.5),Ue.ring=1-je.hole,Ue.rInscribed=be(Ue,de))}function it(Ee,de){return[Ee*Math.sin(de),-Ee*Math.cos(de)]}function yt(Ee,de,we){var je=Ee._fullLayout,Ae=we.trace,$=Ae.texttemplate,oe=Ae.textinfo;if(!$&&oe&&oe!=="none"){var ge=oe.split("+"),Te=function(Ke){return ge.indexOf(Ke)!==-1},Ue=Te("label"),Ze=Te("text"),Je=Te("value"),ft=Te("percent"),wt=je.separators,Ct;if(Ct=Ue?[de.label]:[],Ze){var Kt=N.getFirstFilled(Ae.text,de.pts);F(Kt)&&Ct.push(Kt)}Je&&Ct.push(N.formatPieValue(de.v,wt)),ft&&Ct.push(N.formatPiePercent(de.v/we.vTotal,wt)),de.text=Ct.join("<br>")}function $t(Ke){return{label:Ke.label,value:Ke.v,valueLabel:N.formatPieValue(Ke.v,je.separators),percent:Ke.v/we.vTotal,percentLabel:N.formatPiePercent(Ke.v/we.vTotal,je.separators),color:Ke.color,text:Ke.text,customdata:p.castOption(Ae,Ke.i,"customdata")}}if($){var Wt=p.castOption(Ae,de.i,"texttemplate");if(!Wt)de.text="";else{var nt=$t(de),pt=N.getFirstFilled(Ae.text,de.pts);(F(pt)||pt==="")&&(nt.text=pt),de.text=p.texttemplateString(Wt,nt,Ee._fullLayout._d3locale,nt,Ae._meta||{})}}}function _e(Ee,de){var we=Ee.rotate*Math.PI/180,je=Math.cos(we),Ae=Math.sin(we),$=(de.left+de.right)/2,oe=(de.top+de.bottom)/2;Ee.textX=$*je-oe*Ae,Ee.textY=$*Ae+oe*je,Ee.noCenter=!0}fe.exports={plot:P,formatSliceLabel:yt,transformInsideText:ye,determineInsideTextFont:te,positionTitleOutside:ke,prerenderTitles:J,layoutAreas:Be,attachFxHandlers:R,computeTransform:_e}}}),Cd=n({"src/traces/pie/style.js"(ce,fe){var d=k(),u=Ol(),c=Kl().resizeText;fe.exports=function(v){var p=v._fullLayout._pielayer.selectAll(".trace");c(v,p,"pie"),p.each(function(g){var w=g[0],s=w.trace,j=d.select(this);j.style({opacity:s.opacity}),j.selectAll("path.surface").each(function(b){d.select(this).call(u,b,s,v)})})}}}),eu=n({"src/traces/pie/base_plot.js"(ce){var fe=Di();ce.name="pie",ce.plot=function(d,u,c,m){fe.plotBasePlot(ce.name,d,u,c,m)},ce.clean=function(d,u,c,m){fe.cleanBasePlot(ce.name,d,u,c,m)}}}),os=n({"src/traces/pie/index.js"(ce,fe){fe.exports={attributes:Th(),supplyDefaults:Mh().supplyDefaults,supplyLayoutDefaults:ns(),layoutAttributes:Bf(),calc:is().calc,crossTraceCalc:is().crossTraceCalc,plot:Eh().plot,style:Cd(),styleOne:Ol(),moduleType:"trace",name:"pie",basePlotModule:eu(),categories:["pie-like","pie","showLegend"],meta:{}}}}),no=n({"lib/pie.js"(ce,fe){fe.exports=os()}}),po=n({"node_modules/object-assign/index.js"(ce,fe){var d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function m(p){if(p==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}function v(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de",Object.getOwnPropertyNames(p)[0]==="5")return!1;for(var g={},w=0;w<10;w++)g["_"+String.fromCharCode(w)]=w;var s=Object.getOwnPropertyNames(g).map(function(b){return g[b]});if(s.join("")!=="0123456789")return!1;var j={};return"abcdefghijklmnopqrst".split("").forEach(function(b){j[b]=b}),Object.keys(Object.assign({},j)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}fe.exports=v()?Object.assign:function(p,g){for(var w,s=m(p),j,b=1;b<arguments.length;b++){w=Object(arguments[b]);for(var z in w)u.call(w,z)&&(s[z]=w[z]);if(d){j=d(w);for(var X=0;X<j.length;X++)c.call(w,j[X])&&(s[j[X]]=w[j[X]])}}return s}}}),Wi=n({"node_modules/world-calendars/dist/main.js"(ce,fe){var d=po();function u(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}d(u.prototype,{instance:function(w,s){w=(w||"gregorian").toLowerCase(),s=s||"";var j=this._localCals[w+"-"+s];if(!j&&this.calendars[w]&&(j=new this.calendars[w](s),this._localCals[w+"-"+s]=j),!j)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,w);return j},newDate:function(w,s,j,b,z){return b=(w!=null&&w.year?w.calendar():typeof b=="string"?this.instance(b,z):b)||this.instance(),b.newDate(w,s,j)},substituteDigits:function(w){return function(s){return(s+"").replace(/[0-9]/g,function(j){return w[j]})}},substituteChineseDigits:function(w,s){return function(j){for(var b="",z=0;j>0;){var X=j%10;b=(X===0?"":w[X]+s[z])+b,z++,j=Math.floor(j/10)}return b.indexOf(w[1]+s[1])===0&&(b=b.substr(1)),b||w[0]}}});function c(w,s,j,b){if(this._calendar=w,this._year=s,this._month=j,this._day=b,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function m(w,s){return w=""+w,"000000".substring(0,s-w.length)+w}d(c.prototype,{newDate:function(w,s,j){return this._calendar.newDate(w??this,s,j)},year:function(w){return arguments.length===0?this._year:this.set(w,"y")},month:function(w){return arguments.length===0?this._month:this.set(w,"m")},day:function(w){return arguments.length===0?this._day:this.set(w,"d")},date:function(w,s,j){if(!this._calendar.isValid(w,s,j))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=w,this._month=s,this._day=j,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(w,s){return this._calendar.add(this,w,s)},set:function(w,s){return this._calendar.set(this,w,s)},compareTo:function(w){if(this._calendar.name!==w._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,w._calendar.local.name);var s=this._year!==w._year?this._year-w._year:this._month!==w._month?this.monthOfYear()-w.monthOfYear():this._day-w._day;return s===0?0:s<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(w){return this._calendar.fromJD(w)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(w){return this._calendar.fromJSDate(w)},toString:function(){return(this.year()<0?"-":"")+m(Math.abs(this.year()),4)+"-"+m(this.month(),2)+"-"+m(this.day(),2)}});function v(){this.shortYearCutoff="+10"}d(v.prototype,{_validateLevel:0,newDate:function(w,s,j){return w==null?this.today():(w.year&&(this._validate(w,s,j,g.local.invalidDate||g.regionalOptions[""].invalidDate),j=w.day(),s=w.month(),w=w.year()),new c(this,w,s,j))},today:function(){return this.fromJSDate(new Date)},epoch:function(w){var s=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return s.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(w){var s=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(s.year()<0?"-":"")+m(Math.abs(s.year()),4)},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),12},monthOfYear:function(w,s){var j=this._validate(w,s,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(j.month()+this.monthsInYear(j)-this.firstMonth)%this.monthsInYear(j)+this.minMonth},fromMonthOfYear:function(w,s){var j=(s+this.firstMonth-2*this.minMonth)%this.monthsInYear(w)+this.minMonth;return this._validate(w,j,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth),j},daysInYear:function(w){var s=this._validate(w,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(s)?366:365},dayOfYear:function(w,s,j){var b=this._validate(w,s,j,g.local.invalidDate||g.regionalOptions[""].invalidDate);return b.toJD()-this.newDate(b.year(),this.fromMonthOfYear(b.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(w,s,j){var b=this._validate(w,s,j,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(b))+2)%this.daysInWeek()},extraInfo:function(w,s,j){return this._validate(w,s,j,g.local.invalidDate||g.regionalOptions[""].invalidDate),{}},add:function(w,s,j){return this._validate(w,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate),this._correctAdd(w,this._add(w,s,j),s,j)},_add:function(w,s,j){if(this._validateLevel++,j==="d"||j==="w"){var b=w.toJD()+s*(j==="w"?this.daysInWeek():1),z=w.calendar().fromJD(b);return this._validateLevel--,[z.year(),z.month(),z.day()]}try{var X=w.year()+(j==="y"?s:0),N=w.monthOfYear()+(j==="m"?s:0),z=w.day(),O=function(_){for(;N<_.minMonth;)X--,N+=_.monthsInYear(X);for(var R=_.monthsInYear(X);N>R-1+_.minMonth;)X++,N-=R,R=_.monthsInYear(X)};j==="y"?(w.month()!==this.fromMonthOfYear(X,N)&&(N=this.newDate(X,w.month(),this.minDay).monthOfYear()),N=Math.min(N,this.monthsInYear(X)),z=Math.min(z,this.daysInMonth(X,this.fromMonthOfYear(X,N)))):j==="m"&&(O(this),z=Math.min(z,this.daysInMonth(X,this.fromMonthOfYear(X,N))));var F=[X,this.fromMonthOfYear(X,N),z];return this._validateLevel--,F}catch(P){throw this._validateLevel--,P}},_correctAdd:function(w,s,j,b){if(!this.hasYearZero&&(b==="y"||b==="m")&&(s[0]===0||w.year()>0!=s[0]>0)){var z={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[b],X=j<0?-1:1;s=this._add(w,j*z[0]+X*z[1],z[2])}return w.date(s[0],s[1],s[2])},set:function(w,s,j){this._validate(w,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var b=j==="y"?s:w.year(),z=j==="m"?s:w.month(),X=j==="d"?s:w.day();return(j==="y"||j==="m")&&(X=Math.min(X,this.daysInMonth(b,z))),w.date(b,z,X)},isValid:function(w,s,j){this._validateLevel++;var b=this.hasYearZero||w!==0;if(b){var z=this.newDate(w,s,this.minDay);b=s>=this.minMonth&&s-this.minMonth<this.monthsInYear(z)&&j>=this.minDay&&j-this.minDay<this.daysInMonth(z)}return this._validateLevel--,b},toJSDate:function(w,s,j){var b=this._validate(w,s,j,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(b)).toJSDate()},fromJSDate:function(w){return this.fromJD(g.instance().fromJSDate(w).toJD())},_validate:function(w,s,j,b){if(w.year){if(this._validateLevel===0&&this.name!==w.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,w.calendar().local.name);return w}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(w,s,j))throw b.replace(/\{0\}/,this.local.name);var z=this.newDate(w,s,j);return this._validateLevel--,z}catch(X){throw this._validateLevel--,X}}});function p(w){this.local=this.regionalOptions[w]||this.regionalOptions[""]}p.prototype=new v,d(p.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(j){var s=this._validate(j,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),j=s.year()+(s.year()<0?1:0);return j%4===0&&(j%100!==0||j%400===0)},weekOfYear:function(w,s,j){var b=this.newDate(w,s,j);return b.add(4-(b.dayOfWeek()||7),"d"),Math.floor((b.dayOfYear()-1)/7)+1},daysInMonth:function(w,s){var j=this._validate(w,s,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[j.month()-1]+(j.month()===2&&this.leapYear(j.year())?1:0)},weekDay:function(w,s,j){return(this.dayOfWeek(w,s,j)||7)<6},toJD:function(w,s,j){var b=this._validate(w,s,j,g.local.invalidDate||g.regionalOptions[""].invalidDate);w=b.year(),s=b.month(),j=b.day(),w<0&&w++,s<3&&(s+=12,w--);var z=Math.floor(w/100),X=2-z+Math.floor(z/4);return Math.floor(365.25*(w+4716))+Math.floor(30.6001*(s+1))+j+X-1524.5},fromJD:function(w){var s=Math.floor(w+.5),j=Math.floor((s-186721625e-2)/36524.25);j=s+1+j-Math.floor(j/4);var b=j+1524,z=Math.floor((b-122.1)/365.25),X=Math.floor(365.25*z),N=Math.floor((b-X)/30.6001),O=b-X-Math.floor(N*30.6001),F=N-(N>13.5?13:1),P=z-(F>2.5?4716:4715);return P<=0&&P--,this.newDate(P,F,O)},toJSDate:function(w,s,j){var b=this._validate(w,s,j,g.local.invalidDate||g.regionalOptions[""].invalidDate),z=new Date(b.year(),b.month()-1,b.day());return z.setHours(0),z.setMinutes(0),z.setSeconds(0),z.setMilliseconds(0),z.setHours(z.getHours()>12?z.getHours()+2:0),z},fromJSDate:function(w){return this.newDate(w.getFullYear(),w.getMonth()+1,w.getDate())}});var g=fe.exports=new u;g.cdate=c,g.baseCalendar=v,g.calendars.gregorian=p}}),$n=n({"node_modules/world-calendars/dist/plus.js"(){var ce=po(),fe=Wi();ce(fe.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),fe.local=fe.regionalOptions[""],ce(fe.cdate.prototype,{formatDate:function(d,u){return typeof d!="string"&&(u=d,d=""),this._calendar.formatDate(d||"",this,u)}}),ce(fe.baseCalendar.prototype,{UNIX_EPOCH:fe.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:1440*60,TICKS_EPOCH:fe.instance().jdEpoch,TICKS_PER_DAY:1440*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(d,u,c){if(typeof d!="string"&&(c=u,u=d,d=""),!u)return"";if(u.calendar()!==this)throw fe.local.invalidFormat||fe.regionalOptions[""].invalidFormat;d=d||this.local.dateFormat,c=c||{};var m=c.dayNamesShort||this.local.dayNamesShort,v=c.dayNames||this.local.dayNames,p=c.monthNumbers||this.local.monthNumbers,g=c.monthNamesShort||this.local.monthNamesShort,w=c.monthNames||this.local.monthNames;c.calculateWeek||this.local.calculateWeek;for(var s=function(H,te){for(var J=1;R+J<d.length&&d.charAt(R+J)===H;)J++;return R+=J-1,Math.floor(J/(te||1))>1},j=function(H,te,J,ye){var se=""+te;if(s(H,ye))for(;se.length<J;)se="0"+se;return se},b=function(H,te,J,ye){return s(H)?ye[te]:J[te]},z=this,X=function(H){return typeof p=="function"?p.call(z,H,s("m")):F(j("m",H.month(),2))},N=function(H,te){return te?typeof w=="function"?w.call(z,H):w[H.month()-z.minMonth]:typeof g=="function"?g.call(z,H):g[H.month()-z.minMonth]},O=this.local.digits,F=function(H){return c.localNumbers&&O?O(H):H},P="",_=!1,R=0;R<d.length;R++)if(_)d.charAt(R)==="'"&&!s("'")?_=!1:P+=d.charAt(R);else switch(d.charAt(R)){case"d":P+=F(j("d",u.day(),2));break;case"D":P+=b("D",u.dayOfWeek(),m,v);break;case"o":P+=j("o",u.dayOfYear(),3);break;case"w":P+=j("w",u.weekOfYear(),2);break;case"m":P+=X(u);break;case"M":P+=N(u,s("M"));break;case"y":P+=s("y",2)?u.year():(u.year()%100<10?"0":"")+u.year()%100;break;case"Y":s("Y",2),P+=u.formatYear();break;case"J":P+=u.toJD();break;case"@":P+=(u.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":P+=(u.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?P+="'":_=!0;break;default:P+=d.charAt(R)}return P},parseDate:function(d,u,c){if(u==null)throw fe.local.invalidArguments||fe.regionalOptions[""].invalidArguments;if(u=typeof u=="object"?u.toString():u+"",u==="")return null;d=d||this.local.dateFormat,c=c||{};var m=c.shortYearCutoff||this.shortYearCutoff;m=typeof m!="string"?m:this.today().year()%100+parseInt(m,10);for(var v=c.dayNamesShort||this.local.dayNamesShort,p=c.dayNames||this.local.dayNames,g=c.parseMonth||this.local.parseMonth,w=c.monthNumbers||this.local.monthNumbers,s=c.monthNamesShort||this.local.monthNamesShort,j=c.monthNames||this.local.monthNames,b=-1,z=-1,X=-1,N=-1,O=-1,F=!1,P=!1,_=function(me,be){for(var ve=1;pe+ve<d.length&&d.charAt(pe+ve)===me;)ve++;return pe+=ve-1,Math.floor(ve/(be||1))>1},R=function(me,be){var ve=_(me,be),Me=[2,3,ve?4:2,ve?4:2,10,11,20]["oyYJ@!".indexOf(me)+1],ke=new RegExp("^-?\\d{1,"+Me+"}"),le=u.substring(he).match(ke);if(!le)throw(fe.local.missingNumberAt||fe.regionalOptions[""].missingNumberAt).replace(/\{0\}/,he);return he+=le[0].length,parseInt(le[0],10)},H=this,te=function(){if(typeof w=="function"){_("m");var me=w.call(H,u.substring(he));return he+=me.length,me}return R("m")},J=function(me,be,ve,Me){for(var ke=_(me,Me)?ve:be,le=0;le<ke.length;le++)if(u.substr(he,ke[le].length).toLowerCase()===ke[le].toLowerCase())return he+=ke[le].length,le+H.minMonth;throw(fe.local.unknownNameAt||fe.regionalOptions[""].unknownNameAt).replace(/\{0\}/,he)},ye=function(){if(typeof j=="function"){var me=_("M")?j.call(H,u.substring(he)):s.call(H,u.substring(he));return he+=me.length,me}return J("M",s,j)},se=function(){if(u.charAt(he)!==d.charAt(pe))throw(fe.local.unexpectedLiteralAt||fe.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,he);he++},he=0,pe=0;pe<d.length;pe++)if(P)d.charAt(pe)==="'"&&!_("'")?P=!1:se();else switch(d.charAt(pe)){case"d":N=R("d");break;case"D":J("D",v,p);break;case"o":O=R("o");break;case"w":R("w");break;case"m":X=te();break;case"M":X=ye();break;case"y":var Q=pe;F=!_("y",2),pe=Q,z=R("y",2);break;case"Y":z=R("Y",2);break;case"J":b=R("J")+.5,u.charAt(he)==="."&&(he++,R("J"));break;case"@":b=R("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":b=R("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":he=u.length;break;case"'":_("'")?se():P=!0;break;default:se()}if(he<u.length)throw fe.local.unexpectedText||fe.regionalOptions[""].unexpectedText;if(z===-1?z=this.today().year():z<100&&F&&(z+=m===-1?1900:this.today().year()-this.today().year()%100-(z<=m?0:100)),typeof X=="string"&&(X=g.call(this,z,X)),O>-1){X=1,N=O;for(var ue=this.daysInMonth(z,X);N>ue;ue=this.daysInMonth(z,X))X++,N-=ue}return b>-1?this.fromJD(b):this.newDate(z,X,N)},determineDate:function(d,u,c,m,v){c&&typeof c!="object"&&(v=m,m=c,c=null),typeof m!="string"&&(v=m,m="");var p=this,g=function(w){try{return p.parseDate(m,w,v)}catch{}w=w.toLowerCase();for(var s=(w.match(/^c/)&&c?c.newDate():null)||p.today(),j=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,b=j.exec(w);b;)s.add(parseInt(b[1],10),b[2]||"d"),b=j.exec(w);return s};return u=u?u.newDate():null,d=d==null?u:typeof d=="string"?g(d):typeof d=="number"?isNaN(d)||d===1/0||d===-1/0?u:p.today().add(d,"d"):p.newDate(d),d}})}}),Li=n({"node_modules/world-calendars/dist/calendars/chinese.js"(){var ce=Wi(),fe=po(),d=ce.instance();function u(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}u.prototype=new ce.baseCalendar,fe(u.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(b,z){if(typeof b=="string"){var X=b.match(m);return X?X[0]:""}var N=this._validateYear(b),O=b.month(),F=""+this.toChineseMonth(N,O);return z&&F.length<2&&(F="0"+F),this.isIntercalaryMonth(N,O)&&(F+="i"),F},monthNames:function(b){if(typeof b=="string"){var z=b.match(v);return z?z[0]:""}var X=this._validateYear(b),N=b.month(),O=this.toChineseMonth(X,N),F=["","","","","","","","","","","",""][O-1];return this.isIntercalaryMonth(X,N)&&(F=""+F),F},monthNamesShort:function(b){if(typeof b=="string"){var z=b.match(p);return z?z[0]:""}var X=this._validateYear(b),N=b.month(),O=this.toChineseMonth(X,N),F=["","","","","","","","","","","",""][O-1];return this.isIntercalaryMonth(X,N)&&(F=""+F),F},parseMonth:function(b,z){b=this._validateYear(b);var X=parseInt(z),N;if(isNaN(X))z[0]===""&&(N=!0,z=z.substring(1)),z[z.length-1]===""&&(z=z.substring(0,z.length-1)),X=1+["","","","","","","","","","","",""].indexOf(z);else{var O=z[z.length-1];N=O==="i"||O==="I"}var F=this.toMonthIndex(b,X,N);return F},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,z){if(b.year&&(b=b.year()),typeof b!="number"||b<1888||b>2111)throw z.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,z,X){var N=this.intercalaryMonth(b),O=X&&z!==N;if(O||z<1||z>12)throw ce.local.invalidMonth.replace(/\{0\}/,this.local.name);var F;return N?!X&&z<=N?F=z-1:F=z:F=z-1,F},toChineseMonth:function(b,z){b.year&&(b=b.year(),z=b.month());var X=this.intercalaryMonth(b),N=X?12:11;if(z<0||z>N)throw ce.local.invalidMonth.replace(/\{0\}/,this.local.name);var O;return X?z<X?O=z+1:O=z:O=z+1,O},intercalaryMonth:function(b){b=this._validateYear(b);var z=g[b-g[0]],X=z>>13;return X},isIntercalaryMonth:function(b,z){b.year&&(b=b.year(),z=b.month());var X=this.intercalaryMonth(b);return!!X&&X===z},leapYear:function(b){return this.intercalaryMonth(b)!==0},weekOfYear:function(b,z,X){var N=this._validateYear(b,ce.local.invalidyear),O=w[N-w[0]],F=O>>9&4095,P=O>>5&15,_=O&31,R;R=d.newDate(F,P,_),R.add(4-(R.dayOfWeek()||7),"d");var H=this.toJD(b,z,X)-R.toJD();return 1+Math.floor(H/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,z){b.year&&(z=b.month(),b=b.year()),b=this._validateYear(b);var X=g[b-g[0]],N=X>>13,O=N?12:11;if(z>O)throw ce.local.invalidMonth.replace(/\{0\}/,this.local.name);var F=X&1<<12-z?30:29;return F},weekDay:function(b,z,X){return(this.dayOfWeek(b,z,X)||7)<6},toJD:function(b,z,X){var N=this._validate(b,F,X,ce.local.invalidDate);b=this._validateYear(N.year()),z=N.month(),X=N.day();var O=this.isIntercalaryMonth(b,z),F=this.toChineseMonth(b,z),P=j(b,F,X,O);return d.toJD(P.year,P.month,P.day)},fromJD:function(b){var z=d.fromJD(b),X=s(z.year(),z.month(),z.day()),N=this.toMonthIndex(X.year,X.month,X.isIntercalary);return this.newDate(X.year,N,X.day)},fromString:function(b){var z=b.match(c),X=this._validateYear(+z[1]),N=+z[2],O=!!z[3],F=this.toMonthIndex(X,N,O),P=+z[4];return this.newDate(X,F,P)},add:function(b,z,X){var N=b.year(),O=b.month(),F=this.isIntercalaryMonth(N,O),P=this.toChineseMonth(N,O),_=Object.getPrototypeOf(u.prototype).add.call(this,b,z,X);if(X==="y"){var R=_.year(),H=_.month(),te=this.isIntercalaryMonth(R,P),J=F&&te?this.toMonthIndex(R,P,!0):this.toMonthIndex(R,P,!1);J!==H&&_.month(J)}return _}});var c=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,m=/^\d?\d[iI]?/m,v=/^??[]?/m,p=/^??[]?/m;ce.calendars.chinese=u;var g=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],w=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(b,z,X,N){var O,F;if(typeof b=="object")O=b,F=z||{};else{var P=typeof b=="number"&&b>=1888&&b<=2111;if(!P)throw new Error("Solar year outside range 1888-2111");var _=typeof z=="number"&&z>=1&&z<=12;if(!_)throw new Error("Solar month outside range 1 - 12");var R=typeof X=="number"&&X>=1&&X<=31;if(!R)throw new Error("Solar day outside range 1 - 31");O={year:b,month:z,day:X},F={}}var H=w[O.year-w[0]],te=O.year<<9|O.month<<5|O.day;F.year=te>=H?O.year:O.year-1,H=w[F.year-w[0]];var J=H>>9&4095,ye=H>>5&15,se=H&31,he,pe=new Date(J,ye-1,se),Q=new Date(O.year,O.month-1,O.day);he=Math.round((Q-pe)/(24*3600*1e3));var ue=g[F.year-g[0]],me;for(me=0;me<13;me++){var be=ue&1<<12-me?30:29;if(he<be)break;he-=be}var ve=ue>>13;return!ve||me<ve?(F.isIntercalary=!1,F.month=1+me):me===ve?(F.isIntercalary=!0,F.month=me):(F.isIntercalary=!1,F.month=me),F.day=1+he,F}function j(b,z,X,N,O){var F,P;if(typeof b=="object")P=b,F=z||{};else{var _=typeof b=="number"&&b>=1888&&b<=2111;if(!_)throw new Error("Lunar year outside range 1888-2111");var R=typeof z=="number"&&z>=1&&z<=12;if(!R)throw new Error("Lunar month outside range 1 - 12");var H=typeof X=="number"&&X>=1&&X<=30;if(!H)throw new Error("Lunar day outside range 1 - 30");var te;typeof N=="object"?(te=!1,F=N):(te=!!N,F={}),P={year:b,month:z,day:X,isIntercalary:te}}var J;J=P.day-1;var ye=g[P.year-g[0]],se=ye>>13,he;se&&(P.month>se||P.isIntercalary)?he=P.month:he=P.month-1;for(var pe=0;pe<he;pe++){var Q=ye&1<<12-pe?30:29;J+=Q}var ue=w[P.year-w[0]],me=ue>>9&4095,be=ue>>5&15,ve=ue&31,Me=new Date(me,be-1,ve+J);return F.year=Me.getFullYear(),F.month=1+Me.getMonth(),F.day=Me.getDate(),F}}}),uo=n({"node_modules/world-calendars/dist/calendars/coptic.js"(){var ce=Wi(),fe=po();function d(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var c=this._validate(m,this.minMonth,this.minDay,ce.local.invalidYear),m=c.year()+(c.year()<0?1:0);return m%4===3||m%4===-1},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,ce.local.invalidYear||ce.regionalOptions[""].invalidYear),13},weekOfYear:function(u,c,m){var v=this.newDate(u,c,m);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(u,c){var m=this._validate(u,c,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(m.month()===13&&this.leapYear(m.year())?1:0)},weekDay:function(u,c,m){return(this.dayOfWeek(u,c,m)||7)<6},toJD:function(u,c,m){var v=this._validate(u,c,m,ce.local.invalidDate);return u=v.year(),u<0&&u++,v.day()+(v.month()-1)*30+(u-1)*365+Math.floor(u/4)+this.jdEpoch-1},fromJD:function(u){var c=Math.floor(u)+.5-this.jdEpoch,m=Math.floor((c-Math.floor((c+366)/1461))/365)+1;m<=0&&m--,c=Math.floor(u)+.5-this.newDate(m,1,1).toJD();var v=Math.floor(c/30)+1,p=c-(v-1)*30+1;return this.newDate(m,v,p)}}),ce.calendars.coptic=d}}),Hf=n({"node_modules/world-calendars/dist/calendars/discworld.js"(){var ce=Wi(),fe=po();function d(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(c){return this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear),!1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear),13},daysInYear:function(c){return this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear),400},weekOfYear:function(c,m,v){var p=this.newDate(c,m,v);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/8)+1},daysInMonth:function(c,m){var v=this._validate(c,m,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[v.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(c,m,v){var p=this._validate(c,m,v,ce.local.invalidDate);return(p.day()+1)%8},weekDay:function(c,m,v){var p=this.dayOfWeek(c,m,v);return p>=2&&p<=6},extraInfo:function(c,m,v){var p=this._validate(c,m,v,ce.local.invalidDate);return{century:u[Math.floor((p.year()-1)/100)+1]||""}},toJD:function(c,m,v){var p=this._validate(c,m,v,ce.local.invalidDate);return c=p.year()+(p.year()<0?1:0),m=p.month(),v=p.day(),v+(m>1?16:0)+(m>2?(m-2)*32:0)+(c-1)*400+this.jdEpoch-1},fromJD:function(c){c=Math.floor(c+.5)-Math.floor(this.jdEpoch)-1;var m=Math.floor(c/400)+1;c-=(m-1)*400,c+=c>15?16:0;var v=Math.floor(c/32)+1,p=c-(v-1)*32+1;return this.newDate(m<=0?m-1:m,v,p)}});var u={20:"Fruitbat",21:"Anchovy"};ce.calendars.discworld=d}}),nc=n({"node_modules/world-calendars/dist/calendars/ethiopian.js"(){var ce=Wi(),fe=po();function d(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var c=this._validate(m,this.minMonth,this.minDay,ce.local.invalidYear),m=c.year()+(c.year()<0?1:0);return m%4===3||m%4===-1},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,ce.local.invalidYear||ce.regionalOptions[""].invalidYear),13},weekOfYear:function(u,c,m){var v=this.newDate(u,c,m);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(u,c){var m=this._validate(u,c,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(m.month()===13&&this.leapYear(m.year())?1:0)},weekDay:function(u,c,m){return(this.dayOfWeek(u,c,m)||7)<6},toJD:function(u,c,m){var v=this._validate(u,c,m,ce.local.invalidDate);return u=v.year(),u<0&&u++,v.day()+(v.month()-1)*30+(u-1)*365+Math.floor(u/4)+this.jdEpoch-1},fromJD:function(u){var c=Math.floor(u)+.5-this.jdEpoch,m=Math.floor((c-Math.floor((c+366)/1461))/365)+1;m<=0&&m--,c=Math.floor(u)+.5-this.newDate(m,1,1).toJD();var v=Math.floor(c/30)+1,p=c-(v-1)*30+1;return this.newDate(m,v,p)}}),ce.calendars.ethiopian=d}}),Lu=n({"node_modules/world-calendars/dist/calendars/hebrew.js"(){var ce=Wi(),fe=po();function d(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(c){var m=this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear);return this._leapYear(m.year())},_leapYear:function(c){return c=c<0?c+1:c,u(c*7+1,19)<7},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear),this._leapYear(c.year?c.year():c)?13:12},weekOfYear:function(c,m,v){var p=this.newDate(c,m,v);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInYear:function(c){var m=this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear);return c=m.year(),this.toJD(c===-1?1:c+1,7,1)-this.toJD(c,7,1)},daysInMonth:function(c,m){return c.year&&(m=c.month(),c=c.year()),this._validate(c,m,this.minDay,ce.local.invalidMonth),m===12&&this.leapYear(c)||m===8&&u(this.daysInYear(c),10)===5?30:m===9&&u(this.daysInYear(c),10)===3?29:this.daysPerMonth[m-1]},weekDay:function(c,m,v){return this.dayOfWeek(c,m,v)!==6},extraInfo:function(c,m,v){var p=this._validate(c,m,v,ce.local.invalidDate);return{yearType:(this.leapYear(p)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(p)%10-3]}},toJD:function(c,m,v){var p=this._validate(c,m,v,ce.local.invalidDate);c=p.year(),m=p.month(),v=p.day();var g=c<=0?c+1:c,w=this.jdEpoch+this._delay1(g)+this._delay2(g)+v+1;if(m<7){for(var s=7;s<=this.monthsInYear(c);s++)w+=this.daysInMonth(c,s);for(var s=1;s<m;s++)w+=this.daysInMonth(c,s)}else for(var s=7;s<m;s++)w+=this.daysInMonth(c,s);return w},_delay1:function(c){var m=Math.floor((235*c-234)/19),v=12084+13753*m,p=m*29+Math.floor(v/25920);return u(3*(p+1),7)<3&&p++,p},_delay2:function(c){var m=this._delay1(c-1),v=this._delay1(c),p=this._delay1(c+1);return p-v===356?2:v-m===382?1:0},fromJD:function(c){c=Math.floor(c)+.5;for(var m=Math.floor((c-this.jdEpoch)*98496/35975351)-1;c>=this.toJD(m===-1?1:m+1,7,1);)m++;for(var v=c<this.toJD(m,1,1)?7:1;c>this.toJD(m,v,this.daysInMonth(m,v));)v++;var p=c-this.toJD(m,v,1)+1;return this.newDate(m,v,p)}});function u(c,m){return c-m*Math.floor(c/m)}ce.calendars.hebrew=d}}),Uf=n({"node_modules/world-calendars/dist/calendars/islamic.js"(){var ce=Wi(),fe=po();function d(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(u){var c=this._validate(u,this.minMonth,this.minDay,ce.local.invalidYear);return(c.year()*11+14)%30<11},weekOfYear:function(u,c,m){var v=this.newDate(u,c,m);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(u){return this.leapYear(u)?355:354},daysInMonth:function(u,c){var m=this._validate(u,c,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(m.month()===12&&this.leapYear(m.year())?1:0)},weekDay:function(u,c,m){return this.dayOfWeek(u,c,m)!==5},toJD:function(u,c,m){var v=this._validate(u,c,m,ce.local.invalidDate);return u=v.year(),c=v.month(),m=v.day(),u=u<=0?u+1:u,m+Math.ceil(29.5*(c-1))+(u-1)*354+Math.floor((3+11*u)/30)+this.jdEpoch-1},fromJD:function(u){u=Math.floor(u)+.5;var c=Math.floor((30*(u-this.jdEpoch)+10646)/10631);c=c<=0?c-1:c;var m=Math.min(12,Math.ceil((u-29-this.toJD(c,1,1))/29.5)+1),v=u-this.toJD(c,m,1)+1;return this.newDate(c,m,v)}}),ce.calendars.islamic=d}}),af=n({"node_modules/world-calendars/dist/calendars/julian.js"(){var ce=Wi(),fe=po();function d(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var c=this._validate(m,this.minMonth,this.minDay,ce.local.invalidYear),m=c.year()<0?c.year()+1:c.year();return m%4===0},weekOfYear:function(u,c,m){var v=this.newDate(u,c,m);return v.add(4-(v.dayOfWeek()||7),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(u,c){var m=this._validate(u,c,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(m.month()===2&&this.leapYear(m.year())?1:0)},weekDay:function(u,c,m){return(this.dayOfWeek(u,c,m)||7)<6},toJD:function(u,c,m){var v=this._validate(u,c,m,ce.local.invalidDate);return u=v.year(),c=v.month(),m=v.day(),u<0&&u++,c<=2&&(u--,c+=12),Math.floor(365.25*(u+4716))+Math.floor(30.6001*(c+1))+m-1524.5},fromJD:function(u){var c=Math.floor(u+.5),m=c+1524,v=Math.floor((m-122.1)/365.25),p=Math.floor(365.25*v),g=Math.floor((m-p)/30.6001),w=g-Math.floor(g<14?1:13),s=v-Math.floor(w>2?4716:4715),j=m-p-Math.floor(30.6001*g);return s<=0&&s--,this.newDate(s,w,j)}}),ce.calendars.julian=d}}),ic=n({"node_modules/world-calendars/dist/calendars/mayan.js"(){var ce=Wi(),fe=po();function d(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(m){return this._validate(m,this.minMonth,this.minDay,ce.local.invalidYear),!1},formatYear:function(m){var v=this._validate(m,this.minMonth,this.minDay,ce.local.invalidYear);m=v.year();var p=Math.floor(m/400);m=m%400,m+=m<0?400:0;var g=Math.floor(m/20);return p+"."+g+"."+m%20},forYear:function(m){if(m=m.split("."),m.length<3)throw"Invalid Mayan year";for(var v=0,p=0;p<m.length;p++){var g=parseInt(m[p],10);if(Math.abs(g)>19||p>0&&g<0)throw"Invalid Mayan year";v=v*20+g}return v},monthsInYear:function(m){return this._validate(m,this.minMonth,this.minDay,ce.local.invalidYear),18},weekOfYear:function(m,v,p){return this._validate(m,v,p,ce.local.invalidDate),0},daysInYear:function(m){return this._validate(m,this.minMonth,this.minDay,ce.local.invalidYear),360},daysInMonth:function(m,v){return this._validate(m,v,this.minDay,ce.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(m,v,p){var g=this._validate(m,v,p,ce.local.invalidDate);return g.day()},weekDay:function(m,v,p){return this._validate(m,v,p,ce.local.invalidDate),!0},extraInfo:function(m,v,p){var g=this._validate(m,v,p,ce.local.invalidDate),w=g.toJD(),s=this._toHaab(w),j=this._toTzolkin(w);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[j[0]-1],tzolkinDay:j[0],tzolkinTrecena:j[1]}},_toHaab:function(m){m-=this.jdEpoch;var v=u(m+8+340,365);return[Math.floor(v/20)+1,u(v,20)]},_toTzolkin:function(m){return m-=this.jdEpoch,[c(m+20,20),c(m+4,13)]},toJD:function(m,v,p){var g=this._validate(m,v,p,ce.local.invalidDate);return g.day()+g.month()*20+g.year()*360+this.jdEpoch},fromJD:function(m){m=Math.floor(m)+.5-this.jdEpoch;var v=Math.floor(m/360);m=m%360,m+=m<0?360:0;var p=Math.floor(m/20),g=m%20;return this.newDate(v,p,g)}});function u(m,v){return m-v*Math.floor(m/v)}function c(m,v){return u(m-1,v)+1}ce.calendars.mayan=d}}),g0=n({"node_modules/world-calendars/dist/calendars/nanakshahi.js"(){var ce=Wi(),fe=po();function d(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar;var u=ce.instance("gregorian");fe(d.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(c){var m=this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear||ce.regionalOptions[""].invalidYear);return u.leapYear(m.year()+(m.year()<1?1:0)+1469)},weekOfYear:function(c,m,v){var p=this.newDate(c,m,v);return p.add(1-(p.dayOfWeek()||7),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(c,m){var v=this._validate(c,m,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(c,m,v){return(this.dayOfWeek(c,m,v)||7)<6},toJD:function(g,m,v){var p=this._validate(g,m,v,ce.local.invalidMonth),g=p.year();g<0&&g++;for(var w=p.day(),s=1;s<p.month();s++)w+=this.daysPerMonth[s-1];return w+u.toJD(g+1468,3,13)},fromJD:function(c){c=Math.floor(c+.5);for(var m=Math.floor((c-(this.jdEpoch-1))/366);c>=this.toJD(m+1,1,1);)m++;for(var v=c-Math.floor(this.toJD(m,1,1)+.5)+1,p=1;v>this.daysInMonth(m,p);)v-=this.daysInMonth(m,p),p++;return this.newDate(m,p,v)}}),ce.calendars.nanakshahi=d}}),Qi=n({"node_modules/world-calendars/dist/calendars/nepali.js"(){var ce=Wi(),fe=po();function d(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(u){return this.daysInYear(u)!==this.daysPerYear},weekOfYear:function(u,c,m){var v=this.newDate(u,c,m);return v.add(-v.dayOfWeek(),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInYear:function(u){var c=this._validate(u,this.minMonth,this.minDay,ce.local.invalidYear);if(u=c.year(),typeof this.NEPALI_CALENDAR_DATA[u]>"u")return this.daysPerYear;for(var m=0,v=this.minMonth;v<=12;v++)m+=this.NEPALI_CALENDAR_DATA[u][v];return m},daysInMonth:function(u,c){return u.year&&(c=u.month(),u=u.year()),this._validate(u,c,this.minDay,ce.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[u]>"u"?this.daysPerMonth[c-1]:this.NEPALI_CALENDAR_DATA[u][c]},weekDay:function(u,c,m){return this.dayOfWeek(u,c,m)!==6},toJD:function(u,c,m){var v=this._validate(u,c,m,ce.local.invalidDate);u=v.year(),c=v.month(),m=v.day();var p=ce.instance(),g=0,w=c,s=u;this._createMissingCalendarData(u);var j=u-(w>9||w===9&&m>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(c!==9&&(g=m,w--);w!==9;)w<=0&&(w=12,s--),g+=this.NEPALI_CALENDAR_DATA[s][w],w--;return c===9?(g+=m-this.NEPALI_CALENDAR_DATA[s][0],g<0&&(g+=p.daysInYear(j))):g+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],p.newDate(j,1,1).add(g,"d").toJD()},fromJD:function(u){var c=ce.instance(),m=c.fromJD(u),v=m.year(),p=m.dayOfYear(),g=v+56;this._createMissingCalendarData(g);for(var w=9,s=this.NEPALI_CALENDAR_DATA[g][0],j=this.NEPALI_CALENDAR_DATA[g][w]-s+1;p>j;)w++,w>12&&(w=1,g++),j+=this.NEPALI_CALENDAR_DATA[g][w];var b=this.NEPALI_CALENDAR_DATA[g][w]-(j-p);return this.newDate(g,w,b)},_createMissingCalendarData:function(u){var c=this.daysPerMonth.slice(0);c.unshift(17);for(var m=u-1;m<u+2;m++)typeof this.NEPALI_CALENDAR_DATA[m]>"u"&&(this.NEPALI_CALENDAR_DATA[m]=c)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),ce.calendars.nepali=d}}),Ch=n({"node_modules/world-calendars/dist/calendars/persian.js"(){var ce=Wi(),fe=po();function d(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}function u(c){var m=c-475;c<0&&m++;var v=.242197,p=v*m,g=v*(m+1),w=p-Math.floor(p),s=g-Math.floor(g);return w>s}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],dayNames:["Yekshanbeh","Doshanbeh","Seshanbeh","Chahrshanbeh","Panjshanbeh","Jom'eh","Shanbeh"],dayNamesShort:["Yek","Do","Se","Cha","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(c){var m=this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear);return u(m.year())},weekOfYear:function(c,m,v){var p=this.newDate(c,m,v);return p.add(-((p.dayOfWeek()+1)%7),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(c,m){var v=this._validate(c,m,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(c,m,v){return this.dayOfWeek(c,m,v)!==5},toJD:function(c,m,v){var p=this._validate(c,m,v,ce.local.invalidDate);c=p.year(),m=p.month(),v=p.day();var g=0;if(c>0)for(var w=1;w<c;w++)u(w)&&g++;else if(c<0)for(var w=c;w<0;w++)u(w)&&g--;return v+(m<=7?(m-1)*31:(m-1)*30+6)+(c>0?c-1:c)*365+g+this.jdEpoch-1},fromJD:function(c){c=Math.floor(c)+.5;var m=475+(c-this.toJD(475,1,1))/365.242197,v=Math.floor(m);v<=0&&v--,c>this.toJD(v,12,u(v)?30:29)&&(v++,v===0&&v++);var p=c-this.toJD(v,1,1)+1,g=p<=186?Math.ceil(p/31):Math.ceil((p-6)/30),w=c-this.toJD(v,g,1)+1;return this.newDate(v,g,w)}}),ce.calendars.persian=d,ce.calendars.jalali=d}}),kh=n({"node_modules/world-calendars/dist/calendars/taiwan.js"(){var ce=Wi(),fe=po(),d=ce.instance();function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new ce.baseCalendar,fe(u.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(v){var m=this._validate(v,this.minMonth,this.minDay,ce.local.invalidYear),v=this._t2gYear(m.year());return d.leapYear(v)},weekOfYear:function(g,m,v){var p=this._validate(g,this.minMonth,this.minDay,ce.local.invalidYear),g=this._t2gYear(p.year());return d.weekOfYear(g,p.month(),p.day())},daysInMonth:function(c,m){var v=this._validate(c,m,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(c,m,v){return(this.dayOfWeek(c,m,v)||7)<6},toJD:function(g,m,v){var p=this._validate(g,m,v,ce.local.invalidDate),g=this._t2gYear(p.year());return d.toJD(g,p.month(),p.day())},fromJD:function(c){var m=d.fromJD(c),v=this._g2tYear(m.year());return this.newDate(v,m.month(),m.day())},_t2gYear:function(c){return c+this.yearsOffset+(c>=-this.yearsOffset&&c<=-1?1:0)},_g2tYear:function(c){return c-this.yearsOffset-(c>=1&&c<=this.yearsOffset?1:0)}}),ce.calendars.taiwan=u}}),kd=n({"node_modules/world-calendars/dist/calendars/thai.js"(){var ce=Wi(),fe=po(),d=ce.instance();function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new ce.baseCalendar,fe(u.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var m=this._validate(v,this.minMonth,this.minDay,ce.local.invalidYear),v=this._t2gYear(m.year());return d.leapYear(v)},weekOfYear:function(g,m,v){var p=this._validate(g,this.minMonth,this.minDay,ce.local.invalidYear),g=this._t2gYear(p.year());return d.weekOfYear(g,p.month(),p.day())},daysInMonth:function(c,m){var v=this._validate(c,m,this.minDay,ce.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(c,m,v){return(this.dayOfWeek(c,m,v)||7)<6},toJD:function(g,m,v){var p=this._validate(g,m,v,ce.local.invalidDate),g=this._t2gYear(p.year());return d.toJD(g,p.month(),p.day())},fromJD:function(c){var m=d.fromJD(c),v=this._g2tYear(m.year());return this.newDate(v,m.month(),m.day())},_t2gYear:function(c){return c-this.yearsOffset-(c>=1&&c<=this.yearsOffset?1:0)},_g2tYear:function(c){return c+this.yearsOffset+(c>=-this.yearsOffset&&c<=-1?1:0)}}),ce.calendars.thai=u}}),Rd=n({"node_modules/world-calendars/dist/calendars/ummalqura.js"(){var ce=Wi(),fe=po();function d(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}d.prototype=new ce.baseCalendar,fe(d.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(c){var m=this._validate(c,this.minMonth,this.minDay,ce.local.invalidYear);return this.daysInYear(m.year())===355},weekOfYear:function(c,m,v){var p=this.newDate(c,m,v);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInYear:function(c){for(var m=0,v=1;v<=12;v++)m+=this.daysInMonth(c,v);return m},daysInMonth:function(c,m){for(var v=this._validate(c,m,this.minDay,ce.local.invalidMonth),p=v.toJD()-24e5+.5,g=0,w=0;w<u.length;w++){if(u[w]>p)return u[g]-u[g-1];g++}return 30},weekDay:function(c,m,v){return this.dayOfWeek(c,m,v)!==5},toJD:function(c,m,v){var p=this._validate(c,m,v,ce.local.invalidDate),g=12*(p.year()-1)+p.month()-15292,w=p.day()+u[g-1]-1;return w+24e5-.5},fromJD:function(c){for(var m=c-24e5+.5,v=0,p=0;p<u.length&&!(u[p]>m);p++)v++;var g=v+15292,w=Math.floor((g-1)/12),s=w+1,j=g-12*w,b=m-u[v-1]+1;return this.newDate(s,j,b)},isValid:function(c,m,v){var p=ce.baseCalendar.prototype.isValid.apply(this,arguments);return p&&(c=c.year!=null?c.year:c,p=c>=1276&&c<=1500),p},_validate:function(c,m,v,p){var g=ce.baseCalendar.prototype._validate.apply(this,arguments);if(g.year<1276||g.year>1500)throw p.replace(/\{0\}/,this.local.name);return g}}),ce.calendars.ummalqura=d;var u=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]}}),y0=n({"src/components/calendars/calendars.js"(ce,fe){fe.exports=Wi(),$n(),Li(),uo(),Hf(),nc(),Lu(),Uf(),af(),ic(),g0(),Qi(),Ch(),kh(),kd(),Rd()}}),Rh=n({"src/components/calendars/index.js"(ce,fe){var d=y0(),u=pa(),c=W(),m=c.EPOCHJD,v=c.ONEDAY,p={valType:"enumerated",values:u.sortObjectKeys(d.calendars),editType:"calc",dflt:"gregorian"},g=function(ye,se,he,pe){var Q={};return Q[he]=p,u.coerce(ye,se,Q,he,pe)},w=function(ye,se,he,pe){for(var Q=0;Q<he.length;Q++)g(ye,se,he[Q]+"calendar",pe.calendar)},s={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},j={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},b={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},z="##",X={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:z,w:z,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function N(ye,se,he){for(var pe=Math.floor((se+.05)/v)+m,Q=F(he).fromJD(pe),ue=0,me,be,ve,Me,ke;(ue=ye.indexOf("%",ue))!==-1;)me=ye.charAt(ue+1),me==="0"||me==="-"||me==="_"?(ve=3,be=ye.charAt(ue+2),me==="_"&&(me="-")):(be=me,me="0",ve=2),Me=X[be],Me?(Me===z?ke=z:ke=Q.formatDate(Me[me]),ye=ye.substr(0,ue)+ke+ye.substr(ue+ve),ue+=ke.length):ue+=ve;return ye}var O={};function F(ye){var se=O[ye];return se||(se=O[ye]=d.instance(ye),se)}function P(ye){return u.extendFlat({},p,{description:ye})}function _(ye){return"Sets the calendar system to use with `"+ye+"` date data."}var R={xcalendar:P(_("x"))},H=u.extendFlat({},R,{ycalendar:P(_("y"))}),te=u.extendFlat({},H,{zcalendar:P(_("z"))}),J=P(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));fe.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:H,bar:H,box:H,heatmap:H,contour:H,histogram:H,histogram2d:H,histogram2dcontour:H,scatter3d:te,surface:te,mesh3d:te,scattergl:H,ohlc:R,candlestick:R},layout:{calendar:P(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:J},yaxis:{calendar:J},scene:{xaxis:{calendar:J},yaxis:{calendar:J},zaxis:{calendar:J}},polar:{radialaxis:{calendar:J}}}},layoutAttributes:p,handleDefaults:g,handleTraceDefaults:w,CANONICAL_SUNDAY:j,CANONICAL_TICK:s,DFLTRANGE:b,getCal:F,worldCalFmt:N}}}),Dh=n({"lib/calendars.js"(ce,fe){fe.exports=Rh()}}),zh=n({"lib/index-basic.js"(ce,fe){var d=gi();d.register([If(),no(),Dh()]),fe.exports=d}});return zh()})();/*! Bundled license information:

		native-promise-only/lib/npo.src.js:
		  (*! Native Promise Only
		      v0.8.1 (c) Kyle Simpson
		      MIT License: http://getify.mit-license.org
		  *)

		polybooljs/index.js:
		  (*
		   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
		   * @license MIT
		   * @preserve Project Home: https://github.com/voidqk/polybooljs
		   *)

		object-assign/index.js:
		  (*
		  object-assign
		  (c) Sindre Sorhus
		  @license MIT
		  *)
		*/return window.Plotly=i,i})})(plotlyBasic$1)),plotlyBasic$1.exports}var plotlyBasicExports=requirePlotlyBasic();const Plotly=getDefaultExportFromCjs(plotlyBasicExports);function getBandTraces(t,i,a={}){const n=[];return i.forEach((y,x)=>{n.push({name:a.name,legendgroup:a.name,showlegend:x===0,...traceDefaultBands,...a,x:t,y})}),n}function getBandLayout(t=[],i=[]){return deepmerge.all([plotBandLayout,{xaxis:{tickvals:i,ticktext:t},yaxis:{}}])}function getBandStructure(t){const a=getXLabelsfromkpath(t[0].bandsData.path).map(prettifyLabels),n=getXLabelPos(t[0].bandsData.paths),y=getBandLayout(a,n);let x=[];for(const[k,S]of t.entries()){let E=S.traceFormat;(!E||Object.keys(E).length===0)&&(E={name:`Band Structure ${k}`,line:{color:getColor(k),width:1}});const U=S.bandsData,{xs:C,ys:B}=getXYData(U),W=getBandTraces(C,B,E);x.push(...W)}return{bandTraces:x,bandLayout:y}}function getDosLayout(t="h"){let i;return t==="v"?i=plotDOSLayoutF:i=plotDOSLayout,i}function getDosTraces(t,i="h",a={}){const n=i==="v"?t.y:t.x,y=i==="v"?t.x:t.y;return{...traceDefaultDos,...a,x:n,y}}function getDos(t,i="h"){const a=[];for(const[y,x]of t.entries()){let k=x.traceFormat;(!k||Object.keys(k).length===0)&&(k={name:`DOS ${y}`,line:{color:getColor(y),width:2}});const S=x.dosData,E=getDosTraces(S,i,k);a.push(E)}const n=getDosLayout(i);return{dosTraces:a,dosLayout:n}}function getProjectionTraces(t,i,a,n={},y=1){const x=transpose(a),k=transpose(i),S=[];return k.forEach((E,U)=>{const C=x[U],B=new Float64Array(E.length),W=new Float64Array(E.length);for(let l=0;l<E.length;l++){const f=C[l]*y;B[l]=E[l]+f,W[l]=E[l]-f}const Y=t.length,Z=new Float32Array(Y*2),T=new Float32Array(Y*2);for(let l=0;l<Y;l++)Z[l]=t[l],T[l]=W[l],Z[2*Y-1-l]=t[l],T[2*Y-1-l]=B[l];S.push({name:n.name,legendgroup:n.name,type:"scatter",mode:"lines",fill:"toself",...n,showlegend:U===0,x:Z,y:T})}),S}function handleSettings(t,i){for(const a in t)t[a]!==null&&typeof t[a]=="object"&&!Array.isArray(t[a])&&i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])?i[a]=deepmerge(i[a],t[a]):i[a]=t[a]}function BandsVisualiser(t,{bandsDataArray:i=[],dosDataArray:a=[],fermiLevels:n=[],customTraces:y=[],settings:x={}}){let k=[],S={},E=[],U=[],C={};typeof n=="number"&&(n=[n]);const B=i.length>0,W=a.length>0;if(B){const l=getBandStructure(i);k=l.bandTraces,S=l.bandLayout;for(const[f,D]of i.entries())if(D.hasOwnProperty("projections"))for(const[I,V]of D.projections.entries()){const K=V.traceFormat&&Object.keys(V.traceFormat).length>0?V.traceFormat:{name:`Projection ${I}`,line:{color:getColor(I),width:0}};E.push(...getProjectionTraces(D.bandsData.x,D.bandsData.y,V.projData.weights,K))}}if(W){const f=getDos(a,B?"v":"h");U=f.dosTraces,C=f.dosLayout}let Y={},Z=[];if(W&&!B)Z=U,Y={...C,showlegend:C?.showlegend??!0};else if(B&&!W)Z=[...k,...E],Y={...S,showlegend:S?.showlegend??!0};else if(W&&B){U=U.map(f=>({...f,xaxis:"x2",yaxis:"y"}));const l=mergeLegendTracesByName([...E,...U]);Z=[...k,...l],Y={...plotCombinedLayout,xaxis:{...plotCombinedLayout.xaxis||{},...S?.xaxis||{}},xaxis2:{...plotCombinedLayout.xaxis2||{},...C?.xaxis2||{}},yaxis:{...plotCombinedLayout.yaxis||{},...S?.yaxis||{},...C?.yaxis||{}}}}for(const l of y)console.log(l),l.target==="dos"?Z.push({...l,xaxis:"x2",yaxis:"y"}):l.target==="bands"?Z.push({...l,xaxis:"x",yaxis:"y"}):Z.push({...l});const T=addfermiLines(n,Z,W,B);handleSettings(x,Y),Plotly.react(t,T,Y,{displaylogo:!1,responsive:!0})}function BandsDataVisualiser({nodeData:t}){const i=reactExports.useRef(null),[a,n]=reactExports.useState(null),[y,x]=reactExports.useState(!1),[k,S]=reactExports.useState(null),E=t.downloadByFormat?.json;return reactExports.useEffect(()=>{if(!E)return;(async()=>{x(!0),S(null);try{const C=await fetch(E);if(!C.ok)throw new Error(`HTTP error: ${C.status}`);const B=await C.json();n([{bandsData:B}])}catch(C){console.error("Failed to fetch bands JSON:",C),S(C.message)}finally{x(!1)}})()},[E]),reactExports.useEffect(()=>{!i.current||!a||BandsVisualiser(i.current,{bandsDataArray:a,settings:{showlegend:!1}})},[a]),jsxRuntimeExports$1.jsxs("div",{className:"w-full max-w-5xl mx-auto p-2 bg-white border-gray-200 shadow-sm rounded-lg",children:[jsxRuntimeExports$1.jsx("h2",{className:"text-md md:text-lg font-semibold px-3 pt-2",children:"Bands Structure Plot"}),jsxRuntimeExports$1.jsxs("div",{className:"w-full h-[450px] relative flex items-center justify-center",children:[y&&jsxRuntimeExports$1.jsx(Spinner,{}),k&&!y&&jsxRuntimeExports$1.jsx(ErrorDisplay,{message:k,onRetry:()=>{}}),!y&&!k&&a&&jsxRuntimeExports$1.jsx("div",{ref:i,className:"absolute inset-4"})]})]})}var Vs=Object.defineProperty,js=(t,i,a)=>i in t?Vs(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,Lt=(t,i,a)=>js(t,typeof i!="symbol"?i+"":i,a),commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function a(n,y,x){var k=null;if(x!==void 0&&(k=""+x),y.key!==void 0&&(k=""+y.key),"key"in y){x={};for(var S in y)S!=="key"&&(x[S]=y[S])}else x=y;return y=x.ref,{$$typeof:t,type:n,key:k,ref:y!==void 0?y:null,props:x}}return reactJsxRuntime_production.Fragment=i,reactJsxRuntime_production.jsx=a,reactJsxRuntime_production.jsxs=a,reactJsxRuntime_production}jsxRuntime.exports=requireReactJsxRuntime_production();var jsxRuntimeExports=jsxRuntime.exports;const ControlBox=({viewerParams:t,onViewerParamChange:i,onViewerEvent:a})=>{const n=(k,S)=>{let E=t.supercell;E[k]=parseInt(S),i("supercell",E)},y=k=>{i(k,!t[k])},x=k=>{a("camera",k)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(k=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:t.supercell[k],onChange:S=>n(k,S.target.value)},k))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>x("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>x("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>x("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.bonds,onChange:()=>y("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.packedCell,onChange:()=>y("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.atomLabels,onChange:()=>y("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.spaceFilling,onChange:()=>y("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3Dmol={exports:{}};/*!
 * 3dmol v2.5.3
 * JavaScript/TypeScript molecular visualization library
 * Author: David Koes and contributors
 */(function(module,exports){(function(t,i){module.exports=i()})(commonjsGlobal,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":((t,i,a)=>{a.r(i),a.d(i,{IOBuffer:()=>S});var n=a("./node_modules/iobuffer/lib-esm/text.js");const y=1024*8,x=(()=>{const E=new Uint8Array(4),U=new Uint32Array(E.buffer);return!((U[0]=1)&E[0])})(),k={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class S{constructor(U=y,C={}){Lt(this,"buffer"),Lt(this,"byteLength"),Lt(this,"byteOffset"),Lt(this,"length"),Lt(this,"offset"),Lt(this,"lastWrittenByte"),Lt(this,"littleEndian"),Lt(this,"_data"),Lt(this,"_mark"),Lt(this,"_marks");let B=!1;typeof U=="number"?U=new ArrayBuffer(U):(B=!0,this.lastWrittenByte=U.byteLength);const W=C.offset?C.offset>>>0:0,Y=U.byteLength-W;let Z=W;(ArrayBuffer.isView(U)||U instanceof S)&&(U.byteLength!==U.buffer.byteLength&&(Z=U.byteOffset+W),U=U.buffer),B?this.lastWrittenByte=Y:this.lastWrittenByte=0,this.buffer=U,this.length=Y,this.byteLength=Y,this.byteOffset=Z,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,Z,Y),this._mark=0,this._marks=[]}available(U=1){return this.offset+U<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(U=1){return this.offset+=U,this}back(U=1){return this.offset-=U,this}seek(U){return this.offset=U,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const U=this._marks.pop();if(U===void 0)throw new Error("Mark stack empty");return this.seek(U),this}rewind(){return this.offset=0,this}ensureAvailable(U=1){if(!this.available(U)){const C=(this.offset+U)*2,B=new Uint8Array(C);B.set(new Uint8Array(this.buffer)),this.buffer=B.buffer,this.length=C,this.byteLength=C,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(U=1){return this.readArray(U,"uint8")}readArray(U,C){const B=k[C].BYTES_PER_ELEMENT*U,W=this.byteOffset+this.offset,Y=this.buffer.slice(W,W+B);if(this.littleEndian===x&&C!=="uint8"&&C!=="int8"){const T=new Uint8Array(this.buffer.slice(W,W+B));T.reverse();const l=new k[C](T.buffer);return this.offset+=B,l.reverse(),l}const Z=new k[C](Y);return this.offset+=B,Z}readInt16(){const U=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,U}readUint16(){const U=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,U}readInt32(){const U=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,U}readUint32(){const U=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,U}readFloat32(){const U=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,U}readFloat64(){const U=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,U}readBigInt64(){const U=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,U}readBigUint64(){const U=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,U}readChar(){return String.fromCharCode(this.readInt8())}readChars(U=1){let C="";for(let B=0;B<U;B++)C+=this.readChar();return C}readUtf8(U=1){return(0,n.decode)(this.readBytes(U))}decodeText(U=1,C="utf8"){return(0,n.decode)(this.readBytes(U),C)}writeBoolean(U){return this.writeUint8(U?255:0),this}writeInt8(U){return this.ensureAvailable(1),this._data.setInt8(this.offset++,U),this._updateLastWrittenByte(),this}writeUint8(U){return this.ensureAvailable(1),this._data.setUint8(this.offset++,U),this._updateLastWrittenByte(),this}writeByte(U){return this.writeUint8(U)}writeBytes(U){this.ensureAvailable(U.length);for(let C=0;C<U.length;C++)this._data.setUint8(this.offset++,U[C]);return this._updateLastWrittenByte(),this}writeInt16(U){return this.ensureAvailable(2),this._data.setInt16(this.offset,U,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(U){return this.ensureAvailable(2),this._data.setUint16(this.offset,U,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(U){return this.ensureAvailable(4),this._data.setInt32(this.offset,U,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(U){return this.ensureAvailable(4),this._data.setUint32(this.offset,U,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(U){return this.ensureAvailable(4),this._data.setFloat32(this.offset,U,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(U){return this.ensureAvailable(8),this._data.setFloat64(this.offset,U,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(U){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,U,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(U){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,U,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(U){return this.writeUint8(U.charCodeAt(0))}writeChars(U){for(let C=0;C<U.length;C++)this.writeUint8(U.charCodeAt(C));return this}writeUtf8(U){return this.writeBytes((0,n.encode)(U))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}}),"./node_modules/iobuffer/lib-esm/text.js":((t,i,a)=>{a.r(i),a.d(i,{decode:()=>n,encode:()=>x});function n(k,S="utf8"){return new TextDecoder(S).decode(k)}const y=new TextEncoder;function x(k){return y.encode(k)}}),"./node_modules/netcdfjs/lib-esm/data.js":((t,i,a)=>{a.r(i),a.d(i,{nonRecord:()=>y,record:()=>x});var n=a("./node_modules/netcdfjs/lib-esm/types.js");function y(k,S){const E=(0,n.str2num)(S.type),U=S.size/(0,n.num2bytes)(E),C=new Array(U);for(let B=0;B<U;B++)C[B]=(0,n.readType)(k,E,1);return C}function x(k,S,E){const U=(0,n.str2num)(S.type),C=S.size?S.size/(0,n.num2bytes)(U):1,B=E.length,W=new Array(B),Y=E.recordStep;if(Y)for(let Z=0;Z<B;Z++){const T=k.offset;W[Z]=(0,n.readType)(k,U,C),k.seek(T+Y)}else throw new Error("recordDimension.recordStep is undefined");return W}}),"./node_modules/netcdfjs/lib-esm/header.js":((t,i,a)=>{a.r(i),a.d(i,{header:()=>C});var n=a("./node_modules/netcdfjs/lib-esm/types.js"),y=a("./node_modules/netcdfjs/lib-esm/utils.js");const x=0,k=10,S=11,E=12,U=0;function C(Z,T){const l={version:T},f={length:Z.readUint32()},D=B(Z);Array.isArray(D)||(f.id=D.recordId,f.name=D.recordName,l.dimensions=D.dimensions),l.globalAttributes=W(Z);const I=Y(Z,f?.id,T);return Array.isArray(I)||(l.variables=I.variables,f.recordStep=I.recordStep),l.recordDimension=f,l}function B(Z){const T={};let l,f;const D=Z.readUint32();let I;if(D===x)return(0,y.notNetcdf)(Z.readUint32()!==x,"wrong empty tag for list of dimensions"),[];{(0,y.notNetcdf)(D!==k,"wrong tag for list of dimensions");const V=Z.readUint32();I=new Array(V);for(let K=0;K<V;K++){const A=(0,y.readName)(Z),L=Z.readUint32();L===U&&(l=K,f=A),I[K]={name:A,size:L}}}return l!==void 0&&(T.recordId=l),f!==void 0&&(T.recordName=f),T.dimensions=I,T}function W(Z){const T=Z.readUint32();let l;if(T===x)return(0,y.notNetcdf)(Z.readUint32()!==x,"wrong empty tag for list of attributes"),[];{(0,y.notNetcdf)(T!==E,"wrong tag for list of attributes");const f=Z.readUint32();l=new Array(f);for(let D=0;D<f;D++){const I=(0,y.readName)(Z),V=Z.readUint32();(0,y.notNetcdf)(V<1||V>6,`non valid type ${V}`);const K=Z.readUint32(),A=(0,n.readType)(Z,V,K);(0,y.padding)(Z),l[D]={name:I,type:(0,n.num2str)(V),value:A}}}return l}function Y(Z,T,l){const f=Z.readUint32();let D=0,I;if(f===x)return(0,y.notNetcdf)(Z.readUint32()!==x,"wrong empty tag for list of variables"),[];{(0,y.notNetcdf)(f!==S,"wrong tag for list of variables");const V=Z.readUint32();I=new Array(V);for(let K=0;K<V;K++){const A=(0,y.readName)(Z),L=Z.readUint32(),G=new Array(L);for(let Pe=0;Pe<L;Pe++)G[Pe]=Z.readUint32();const ee=W(Z),ae=Z.readUint32();(0,y.notNetcdf)(ae<1&&ae>6,`non valid type ${ae}`);const Se=Z.readUint32();let $e=Z.readUint32();l===2&&((0,y.notNetcdf)($e>0,"offsets larger than 4GB not supported"),$e=Z.readUint32());let qe=!1;typeof T<"u"&&G[0]===T&&(D+=Se,qe=!0),I[K]={name:A,dimensions:G,attributes:ee,type:(0,n.num2str)(ae),size:Se,offset:$e,record:qe}}}return{variables:I,recordStep:D}}}),"./node_modules/netcdfjs/lib-esm/index.js":((t,i,a)=>{a.r(i),a.d(i,{NetCDFReader:()=>n.NetCDFReader});var n=a("./node_modules/netcdfjs/lib-esm/parser.js")}),"./node_modules/netcdfjs/lib-esm/parser.js":((t,i,a)=>{a.r(i),a.d(i,{NetCDFReader:()=>E});var n=a("./node_modules/iobuffer/lib-esm/IOBuffer.js"),y=a("./node_modules/netcdfjs/lib-esm/data.js"),x=a("./node_modules/netcdfjs/lib-esm/header.js"),k=a("./node_modules/netcdfjs/lib-esm/toString.js"),S=a("./node_modules/netcdfjs/lib-esm/utils.js");class E{constructor(C){this.toString=k.toString;const B=new n.IOBuffer(C);B.setBigEndian(),(0,S.notNetcdf)(B.readChars(3)!=="CDF","should start with CDF");const W=B.readByte();(0,S.notNetcdf)(W>2,"unknown version"),this.header=(0,x.header)(B,W),this.buffer=B}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(C){const B=this.globalAttributes.find(W=>W.name===C);return B?B.value:null}getDataVariableAsString(C){const B=this.getDataVariable(C);return B?B.join(""):null}get variables(){return this.header.variables}getDataVariable(C){let B;if(typeof C=="string"?B=this.header.variables.find(W=>W.name===C):B=C,B===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(B.offset),B.record?(0,y.record)(this.buffer,B,this.header.recordDimension):(0,y.nonRecord)(this.buffer,B)}dataVariableExists(C){return this.header.variables.find(B=>B.name===C)!==void 0}attributeExists(C){return this.globalAttributes.find(B=>B.name===C)!==void 0}}}),"./node_modules/netcdfjs/lib-esm/toString.js":((t,i,a)=>{a.r(i),a.d(i,{toString:()=>n});function n(){const y=[];y.push("DIMENSIONS");for(const k of this.dimensions)y.push(`  ${k.name.padEnd(30)} = size: ${k.size}`);y.push(""),y.push("GLOBAL ATTRIBUTES");for(const k of this.globalAttributes)y.push(`  ${k.name.padEnd(30)} = ${k.value}`);const x=JSON.parse(JSON.stringify(this.variables));y.push(""),y.push("VARIABLES:");for(const k of x){k.value=this.getDataVariable(k);let S=JSON.stringify(k.value);S.length>50&&(S=S.substring(0,50)),isNaN(k.value.length)||(S+=` (length: ${k.value.length})`),y.push(`  ${k.name.padEnd(30)} = ${S}`)}return y.join(`
`)}}),"./node_modules/netcdfjs/lib-esm/types.js":((t,i,a)=>{a.r(i),a.d(i,{num2bytes:()=>x,num2str:()=>y,readType:()=>E,str2num:()=>k});const n={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function y(C){switch(Number(C)){case n.BYTE:return"byte";case n.CHAR:return"char";case n.SHORT:return"short";case n.INT:return"int";case n.FLOAT:return"float";case n.DOUBLE:return"double";default:return"undefined"}}function x(C){switch(Number(C)){case n.BYTE:return 1;case n.CHAR:return 1;case n.SHORT:return 2;case n.INT:return 4;case n.FLOAT:return 4;case n.DOUBLE:return 8;default:return-1}}function k(C){switch(String(C)){case"byte":return n.BYTE;case"char":return n.CHAR;case"short":return n.SHORT;case"int":return n.INT;case"float":return n.FLOAT;case"double":return n.DOUBLE;default:return-1}}function S(C,B){if(C!==1){const W=new Array(C);for(let Y=0;Y<C;Y++)W[Y]=B();return W}else return B()}function E(C,B,W){switch(B){case n.BYTE:return Array.from(C.readBytes(W));case n.CHAR:return U(C.readChars(W));case n.SHORT:return S(W,C.readInt16.bind(C));case n.INT:return S(W,C.readInt32.bind(C));case n.FLOAT:return S(W,C.readFloat32.bind(C));case n.DOUBLE:return S(W,C.readFloat64.bind(C));default:throw new Error(`non valid type ${B}`)}}function U(C){return C.charCodeAt(C.length-1)===0?C.substring(0,C.length-1):C}}),"./node_modules/netcdfjs/lib-esm/utils.js":((t,i,a)=>{a.r(i),a.d(i,{notNetcdf:()=>n,padding:()=>y,readName:()=>x});function n(k,S){if(k)throw new TypeError(`Not a valid NetCDF v3.x file: ${S}`)}function y(k){k.offset%4!==0&&k.skip(4-k.offset%4)}function x(k){const S=k.readUint32(),E=k.readChars(S);return y(k),E}}),"./node_modules/pako/dist/pako.esm.mjs":((t,i,a)=>{a.r(i),a.d(i,{Deflate:()=>Ru,Inflate:()=>jf,constants:()=>Xl,default:()=>zu,deflate:()=>Du,deflateRaw:()=>Kc,gzip:()=>tc,inflate:()=>Zi,inflateRaw:()=>rc,ungzip:()=>$l});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const n=4,y=0,x=1,k=2;function S(re){let _t=re.length;for(;--_t>=0;)re[_t]=0}const E=0,U=1,C=2,B=3,W=258,Y=29,Z=256,T=Z+1+Y,l=30,f=19,D=2*T+1,I=15,V=16,K=7,A=256,L=16,G=17,ee=18,ae=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Se=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),$e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Pe=512,Ve=new Array((T+2)*2);S(Ve);const Ie=new Array(l*2);S(Ie);const Xe=new Array(Pe);S(Xe);const et=new Array(W-B+1);S(et);const tt=new Array(Y);S(tt);const rt=new Array(l);S(rt);function ze(re,_t,Fe,Qt,mr){this.static_tree=re,this.extra_bits=_t,this.extra_base=Fe,this.elems=Qt,this.max_length=mr,this.has_stree=re&&re.length}let lt,bt,At;function Vt(re,_t){this.dyn_tree=re,this.max_code=0,this.stat_desc=_t}const Yt=re=>re<256?Xe[re]:Xe[256+(re>>>7)],er=(re,_t)=>{re.pending_buf[re.pending++]=_t&255,re.pending_buf[re.pending++]=_t>>>8&255},lr=(re,_t,Fe)=>{re.bi_valid>V-Fe?(re.bi_buf|=_t<<re.bi_valid&65535,er(re,re.bi_buf),re.bi_buf=_t>>V-re.bi_valid,re.bi_valid+=Fe-V):(re.bi_buf|=_t<<re.bi_valid&65535,re.bi_valid+=Fe)},yr=(re,_t,Fe)=>{lr(re,Fe[_t*2],Fe[_t*2+1])},$r=(re,_t)=>{let Fe=0;do Fe|=re&1,re>>>=1,Fe<<=1;while(--_t>0);return Fe>>>1},ia=re=>{re.bi_valid===16?(er(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):re.bi_valid>=8&&(re.pending_buf[re.pending++]=re.bi_buf&255,re.bi_buf>>=8,re.bi_valid-=8)},Sa=(re,_t)=>{const Fe=_t.dyn_tree,Qt=_t.max_code,mr=_t.stat_desc.static_tree,Tr=_t.stat_desc.has_stree,fa=_t.stat_desc.extra_bits,aa=_t.stat_desc.extra_base,mn=_t.stat_desc.max_length;let qr,ca,fi,en,Wa,zi,Hi=0;for(en=0;en<=I;en++)re.bl_count[en]=0;for(Fe[re.heap[re.heap_max]*2+1]=0,qr=re.heap_max+1;qr<D;qr++)ca=re.heap[qr],en=Fe[Fe[ca*2+1]*2+1]+1,en>mn&&(en=mn,Hi++),Fe[ca*2+1]=en,!(ca>Qt)&&(re.bl_count[en]++,Wa=0,ca>=aa&&(Wa=fa[ca-aa]),zi=Fe[ca*2],re.opt_len+=zi*(en+Wa),Tr&&(re.static_len+=zi*(mr[ca*2+1]+Wa)));if(Hi!==0){do{for(en=mn-1;re.bl_count[en]===0;)en--;re.bl_count[en]--,re.bl_count[en+1]+=2,re.bl_count[mn]--,Hi-=2}while(Hi>0);for(en=mn;en!==0;en--)for(ca=re.bl_count[en];ca!==0;)fi=re.heap[--qr],!(fi>Qt)&&(Fe[fi*2+1]!==en&&(re.opt_len+=(en-Fe[fi*2+1])*Fe[fi*2],Fe[fi*2+1]=en),ca--)}},Xr=(re,_t,Fe)=>{const Qt=new Array(I+1);let mr=0,Tr,fa;for(Tr=1;Tr<=I;Tr++)mr=mr+Fe[Tr-1]<<1,Qt[Tr]=mr;for(fa=0;fa<=_t;fa++){let aa=re[fa*2+1];aa!==0&&(re[fa*2]=$r(Qt[aa]++,aa))}},fr=()=>{let re,_t,Fe,Qt,mr;const Tr=new Array(I+1);for(Fe=0,Qt=0;Qt<Y-1;Qt++)for(tt[Qt]=Fe,re=0;re<1<<ae[Qt];re++)et[Fe++]=Qt;for(et[Fe-1]=Qt,mr=0,Qt=0;Qt<16;Qt++)for(rt[Qt]=mr,re=0;re<1<<Se[Qt];re++)Xe[mr++]=Qt;for(mr>>=7;Qt<l;Qt++)for(rt[Qt]=mr<<7,re=0;re<1<<Se[Qt]-7;re++)Xe[256+mr++]=Qt;for(_t=0;_t<=I;_t++)Tr[_t]=0;for(re=0;re<=143;)Ve[re*2+1]=8,re++,Tr[8]++;for(;re<=255;)Ve[re*2+1]=9,re++,Tr[9]++;for(;re<=279;)Ve[re*2+1]=7,re++,Tr[7]++;for(;re<=287;)Ve[re*2+1]=8,re++,Tr[8]++;for(Xr(Ve,T+1,Tr),re=0;re<l;re++)Ie[re*2+1]=5,Ie[re*2]=$r(re,5);lt=new ze(Ve,ae,Z+1,T,I),bt=new ze(Ie,Se,0,l,I),At=new ze(new Array(0),$e,0,f,K)},Hr=re=>{let _t;for(_t=0;_t<T;_t++)re.dyn_ltree[_t*2]=0;for(_t=0;_t<l;_t++)re.dyn_dtree[_t*2]=0;for(_t=0;_t<f;_t++)re.bl_tree[_t*2]=0;re.dyn_ltree[A*2]=1,re.opt_len=re.static_len=0,re.sym_next=re.matches=0},ya=re=>{re.bi_valid>8?er(re,re.bi_buf):re.bi_valid>0&&(re.pending_buf[re.pending++]=re.bi_buf),re.bi_buf=0,re.bi_valid=0},Ta=(re,_t,Fe,Qt)=>{const mr=_t*2,Tr=Fe*2;return re[mr]<re[Tr]||re[mr]===re[Tr]&&Qt[_t]<=Qt[Fe]},ua=(re,_t,Fe)=>{const Qt=re.heap[Fe];let mr=Fe<<1;for(;mr<=re.heap_len&&(mr<re.heap_len&&Ta(_t,re.heap[mr+1],re.heap[mr],re.depth)&&mr++,!Ta(_t,Qt,re.heap[mr],re.depth));)re.heap[Fe]=re.heap[mr],Fe=mr,mr<<=1;re.heap[Fe]=Qt},Ua=(re,_t,Fe)=>{let Qt,mr,Tr=0,fa,aa;if(re.sym_next!==0)do Qt=re.pending_buf[re.sym_buf+Tr++]&255,Qt+=(re.pending_buf[re.sym_buf+Tr++]&255)<<8,mr=re.pending_buf[re.sym_buf+Tr++],Qt===0?yr(re,mr,_t):(fa=et[mr],yr(re,fa+Z+1,_t),aa=ae[fa],aa!==0&&(mr-=tt[fa],lr(re,mr,aa)),Qt--,fa=Yt(Qt),yr(re,fa,Fe),aa=Se[fa],aa!==0&&(Qt-=rt[fa],lr(re,Qt,aa)));while(Tr<re.sym_next);yr(re,A,_t)},Ya=(re,_t)=>{const Fe=_t.dyn_tree,Qt=_t.stat_desc.static_tree,mr=_t.stat_desc.has_stree,Tr=_t.stat_desc.elems;let fa,aa,mn=-1,qr;for(re.heap_len=0,re.heap_max=D,fa=0;fa<Tr;fa++)Fe[fa*2]!==0?(re.heap[++re.heap_len]=mn=fa,re.depth[fa]=0):Fe[fa*2+1]=0;for(;re.heap_len<2;)qr=re.heap[++re.heap_len]=mn<2?++mn:0,Fe[qr*2]=1,re.depth[qr]=0,re.opt_len--,mr&&(re.static_len-=Qt[qr*2+1]);for(_t.max_code=mn,fa=re.heap_len>>1;fa>=1;fa--)ua(re,Fe,fa);qr=Tr;do fa=re.heap[1],re.heap[1]=re.heap[re.heap_len--],ua(re,Fe,1),aa=re.heap[1],re.heap[--re.heap_max]=fa,re.heap[--re.heap_max]=aa,Fe[qr*2]=Fe[fa*2]+Fe[aa*2],re.depth[qr]=(re.depth[fa]>=re.depth[aa]?re.depth[fa]:re.depth[aa])+1,Fe[fa*2+1]=Fe[aa*2+1]=qr,re.heap[1]=qr++,ua(re,Fe,1);while(re.heap_len>=2);re.heap[--re.heap_max]=re.heap[1],Sa(re,_t),Xr(Fe,mn,re.bl_count)},Ia=(re,_t,Fe)=>{let Qt,mr=-1,Tr,fa=_t[1],aa=0,mn=7,qr=4;for(fa===0&&(mn=138,qr=3),_t[(Fe+1)*2+1]=65535,Qt=0;Qt<=Fe;Qt++)Tr=fa,fa=_t[(Qt+1)*2+1],!(++aa<mn&&Tr===fa)&&(aa<qr?re.bl_tree[Tr*2]+=aa:Tr!==0?(Tr!==mr&&re.bl_tree[Tr*2]++,re.bl_tree[L*2]++):aa<=10?re.bl_tree[G*2]++:re.bl_tree[ee*2]++,aa=0,mr=Tr,fa===0?(mn=138,qr=3):Tr===fa?(mn=6,qr=3):(mn=7,qr=4))},Na=(re,_t,Fe)=>{let Qt,mr=-1,Tr,fa=_t[1],aa=0,mn=7,qr=4;for(fa===0&&(mn=138,qr=3),Qt=0;Qt<=Fe;Qt++)if(Tr=fa,fa=_t[(Qt+1)*2+1],!(++aa<mn&&Tr===fa)){if(aa<qr)do yr(re,Tr,re.bl_tree);while(--aa!==0);else Tr!==0?(Tr!==mr&&(yr(re,Tr,re.bl_tree),aa--),yr(re,L,re.bl_tree),lr(re,aa-3,2)):aa<=10?(yr(re,G,re.bl_tree),lr(re,aa-3,3)):(yr(re,ee,re.bl_tree),lr(re,aa-11,7));aa=0,mr=Tr,fa===0?(mn=138,qr=3):Tr===fa?(mn=6,qr=3):(mn=7,qr=4)}},Ra=re=>{let _t;for(Ia(re,re.dyn_ltree,re.l_desc.max_code),Ia(re,re.dyn_dtree,re.d_desc.max_code),Ya(re,re.bl_desc),_t=f-1;_t>=3&&re.bl_tree[qe[_t]*2+1]===0;_t--);return re.opt_len+=3*(_t+1)+5+5+4,_t},oa=(re,_t,Fe,Qt)=>{let mr;for(lr(re,_t-257,5),lr(re,Fe-1,5),lr(re,Qt-4,4),mr=0;mr<Qt;mr++)lr(re,re.bl_tree[qe[mr]*2+1],3);Na(re,re.dyn_ltree,_t-1),Na(re,re.dyn_dtree,Fe-1)},rn=re=>{let _t=4093624447,Fe;for(Fe=0;Fe<=31;Fe++,_t>>>=1)if(_t&1&&re.dyn_ltree[Fe*2]!==0)return y;if(re.dyn_ltree[18]!==0||re.dyn_ltree[20]!==0||re.dyn_ltree[26]!==0)return x;for(Fe=32;Fe<Z;Fe++)if(re.dyn_ltree[Fe*2]!==0)return x;return y};let Za=!1;const Nt=re=>{Za||(fr(),Za=!0),re.l_desc=new Vt(re.dyn_ltree,lt),re.d_desc=new Vt(re.dyn_dtree,bt),re.bl_desc=new Vt(re.bl_tree,At),re.bi_buf=0,re.bi_valid=0,Hr(re)},Gt=(re,_t,Fe,Qt)=>{lr(re,(E<<1)+(Qt?1:0),3),ya(re),er(re,Fe),er(re,~Fe),Fe&&re.pending_buf.set(re.window.subarray(_t,_t+Fe),re.pending),re.pending+=Fe},ur=re=>{lr(re,U<<1,3),yr(re,A,Ve),ia(re)},Qr=(re,_t,Fe,Qt)=>{let mr,Tr,fa=0;re.level>0?(re.strm.data_type===k&&(re.strm.data_type=rn(re)),Ya(re,re.l_desc),Ya(re,re.d_desc),fa=Ra(re),mr=re.opt_len+3+7>>>3,Tr=re.static_len+3+7>>>3,Tr<=mr&&(mr=Tr)):mr=Tr=Fe+5,Fe+4<=mr&&_t!==-1?Gt(re,_t,Fe,Qt):re.strategy===n||Tr===mr?(lr(re,(U<<1)+(Qt?1:0),3),Ua(re,Ve,Ie)):(lr(re,(C<<1)+(Qt?1:0),3),oa(re,re.l_desc.max_code+1,re.d_desc.max_code+1,fa+1),Ua(re,re.dyn_ltree,re.dyn_dtree)),Hr(re),Qt&&ya(re)},Dr=(re,_t,Fe)=>(re.pending_buf[re.sym_buf+re.sym_next++]=_t,re.pending_buf[re.sym_buf+re.sym_next++]=_t>>8,re.pending_buf[re.sym_buf+re.sym_next++]=Fe,_t===0?re.dyn_ltree[Fe*2]++:(re.matches++,_t--,re.dyn_ltree[(et[Fe]+Z+1)*2]++,re.dyn_dtree[Yt(_t)*2]++),re.sym_next===re.sym_end);var Ea=Nt,da=Gt,Tt=Qr,Lr=Dr,Gr=ur,wa={_tr_init:Ea,_tr_stored_block:da,_tr_flush_block:Tt,_tr_tally:Lr,_tr_align:Gr},Rr=(re,_t,Fe,Qt)=>{let mr=re&65535|0,Tr=re>>>16&65535|0,fa=0;for(;Fe!==0;){fa=Fe>2e3?2e3:Fe,Fe-=fa;do mr=mr+_t[Qt++]|0,Tr=Tr+mr|0;while(--fa);mr%=65521,Tr%=65521}return mr|Tr<<16|0};const ga=()=>{let re,_t=[];for(var Fe=0;Fe<256;Fe++){re=Fe;for(var Qt=0;Qt<8;Qt++)re=re&1?3988292384^re>>>1:re>>>1;_t[Fe]=re}return _t},kt=new Uint32Array(ga());var ha=(re,_t,Fe,Qt)=>{const mr=kt,Tr=Qt+Fe;re^=-1;for(let fa=Qt;fa<Tr;fa++)re=re>>>8^mr[(re^_t[fa])&255];return re^-1},Pa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Qe={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ea,_tr_stored_block:Vr,_tr_flush_block:It,_tr_tally:hr,_tr_align:sa}=wa,{Z_NO_FLUSH:Qa,Z_PARTIAL_FLUSH:an,Z_FULL_FLUSH:sn,Z_FINISH:An,Z_BLOCK:Ti,Z_OK:zn,Z_STREAM_END:Ln,Z_STREAM_ERROR:Hn,Z_DATA_ERROR:bi,Z_BUF_ERROR:li,Z_DEFAULT_COMPRESSION:Mi,Z_FILTERED:Ii,Z_HUFFMAN_ONLY:ti,Z_RLE:pi,Z_FIXED:Ri,Z_DEFAULT_STRATEGY:mo,Z_UNKNOWN:so,Z_DEFLATED:pa}=Qe,Gs=9,qo=15,Fo=8,ko=286,Ro=30,Bi=19,As=2*ko+1,qs=15,vn=3,ui=258,di=ui+vn+1,cs=32,Qo=42,Ys=57,Rl=69,Di=73,go=91,xi=103,Ui=113,So=666,ro=1,yo=2,Vo=3,Ss=4,jo=3,fs=(re,_t)=>(re.msg=Pa[_t],_t),Fu=re=>re*2-(re>4?9:0),es=re=>{let _t=re.length;for(;--_t>=0;)re[_t]=0},cl=re=>{let _t,Fe,Qt,mr=re.w_size;_t=re.hash_size,Qt=_t;do Fe=re.head[--Qt],re.head[Qt]=Fe>=mr?Fe-mr:0;while(--_t);_t=mr,Qt=_t;do Fe=re.prev[--Qt],re.prev[Qt]=Fe>=mr?Fe-mr:0;while(--_t)};let hs=(re,_t,Fe)=>(_t<<re.hash_shift^Fe)&re.hash_mask;const Gi=re=>{const _t=re.state;let Fe=_t.pending;Fe>re.avail_out&&(Fe=re.avail_out),Fe!==0&&(re.output.set(_t.pending_buf.subarray(_t.pending_out,_t.pending_out+Fe),re.next_out),re.next_out+=Fe,_t.pending_out+=Fe,re.total_out+=Fe,re.avail_out-=Fe,_t.pending-=Fe,_t.pending===0&&(_t.pending_out=0))},ao=(re,_t)=>{It(re,re.block_start>=0?re.block_start:-1,re.strstart-re.block_start,_t),re.block_start=re.strstart,Gi(re.strm)},ci=(re,_t)=>{re.pending_buf[re.pending++]=_t},fl=(re,_t)=>{re.pending_buf[re.pending++]=_t>>>8&255,re.pending_buf[re.pending++]=_t&255},Ws=(re,_t,Fe,Qt)=>{let mr=re.avail_in;return mr>Qt&&(mr=Qt),mr===0?0:(re.avail_in-=mr,_t.set(re.input.subarray(re.next_in,re.next_in+mr),Fe),re.state.wrap===1?re.adler=Rr(re.adler,_t,mr,Fe):re.state.wrap===2&&(re.adler=ha(re.adler,_t,mr,Fe)),re.next_in+=mr,re.total_in+=mr,mr)},ju=(re,_t)=>{let Fe=re.max_chain_length,Qt=re.strstart,mr,Tr,fa=re.prev_length,aa=re.nice_match;const mn=re.strstart>re.w_size-di?re.strstart-(re.w_size-di):0,qr=re.window,ca=re.w_mask,fi=re.prev,en=re.strstart+ui;let Wa=qr[Qt+fa-1],zi=qr[Qt+fa];re.prev_length>=re.good_match&&(Fe>>=2),aa>re.lookahead&&(aa=re.lookahead);do if(mr=_t,!(qr[mr+fa]!==zi||qr[mr+fa-1]!==Wa||qr[mr]!==qr[Qt]||qr[++mr]!==qr[Qt+1])){Qt+=2,mr++;do;while(qr[++Qt]===qr[++mr]&&qr[++Qt]===qr[++mr]&&qr[++Qt]===qr[++mr]&&qr[++Qt]===qr[++mr]&&qr[++Qt]===qr[++mr]&&qr[++Qt]===qr[++mr]&&qr[++Qt]===qr[++mr]&&qr[++Qt]===qr[++mr]&&Qt<en);if(Tr=ui-(en-Qt),Qt=en-ui,Tr>fa){if(re.match_start=_t,fa=Tr,Tr>=aa)break;Wa=qr[Qt+fa-1],zi=qr[Qt+fa]}}while((_t=fi[_t&ca])>mn&&--Fe!==0);return fa<=re.lookahead?fa:re.lookahead},Dl=re=>{const _t=re.w_size;let Fe,Qt,mr;do{if(Qt=re.window_size-re.lookahead-re.strstart,re.strstart>=_t+(_t-di)&&(re.window.set(re.window.subarray(_t,_t+_t-Qt),0),re.match_start-=_t,re.strstart-=_t,re.block_start-=_t,re.insert>re.strstart&&(re.insert=re.strstart),cl(re),Qt+=_t),re.strm.avail_in===0)break;if(Fe=Ws(re.strm,re.window,re.strstart+re.lookahead,Qt),re.lookahead+=Fe,re.lookahead+re.insert>=vn)for(mr=re.strstart-re.insert,re.ins_h=re.window[mr],re.ins_h=hs(re,re.ins_h,re.window[mr+1]);re.insert&&(re.ins_h=hs(re,re.ins_h,re.window[mr+vn-1]),re.prev[mr&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=mr,mr++,re.insert--,!(re.lookahead+re.insert<vn)););}while(re.lookahead<di&&re.strm.avail_in!==0)},Iu=(re,_t)=>{let Fe=re.pending_buf_size-5>re.w_size?re.w_size:re.pending_buf_size-5,Qt,mr,Tr,fa=0,aa=re.strm.avail_in;do{if(Qt=65535,Tr=re.bi_valid+42>>3,re.strm.avail_out<Tr||(Tr=re.strm.avail_out-Tr,mr=re.strstart-re.block_start,Qt>mr+re.strm.avail_in&&(Qt=mr+re.strm.avail_in),Qt>Tr&&(Qt=Tr),Qt<Fe&&(Qt===0&&_t!==An||_t===Qa||Qt!==mr+re.strm.avail_in)))break;fa=_t===An&&Qt===mr+re.strm.avail_in?1:0,Vr(re,0,0,fa),re.pending_buf[re.pending-4]=Qt,re.pending_buf[re.pending-3]=Qt>>8,re.pending_buf[re.pending-2]=~Qt,re.pending_buf[re.pending-1]=~Qt>>8,Gi(re.strm),mr&&(mr>Qt&&(mr=Qt),re.strm.output.set(re.window.subarray(re.block_start,re.block_start+mr),re.strm.next_out),re.strm.next_out+=mr,re.strm.avail_out-=mr,re.strm.total_out+=mr,re.block_start+=mr,Qt-=mr),Qt&&(Ws(re.strm,re.strm.output,re.strm.next_out,Qt),re.strm.next_out+=Qt,re.strm.avail_out-=Qt,re.strm.total_out+=Qt)}while(fa===0);return aa-=re.strm.avail_in,aa&&(aa>=re.w_size?(re.matches=2,re.window.set(re.strm.input.subarray(re.strm.next_in-re.w_size,re.strm.next_in),0),re.strstart=re.w_size,re.insert=re.strstart):(re.window_size-re.strstart<=aa&&(re.strstart-=re.w_size,re.window.set(re.window.subarray(re.w_size,re.w_size+re.strstart),0),re.matches<2&&re.matches++,re.insert>re.strstart&&(re.insert=re.strstart)),re.window.set(re.strm.input.subarray(re.strm.next_in-aa,re.strm.next_in),re.strstart),re.strstart+=aa,re.insert+=aa>re.w_size-re.insert?re.w_size-re.insert:aa),re.block_start=re.strstart),re.high_water<re.strstart&&(re.high_water=re.strstart),fa?Ss:_t!==Qa&&_t!==An&&re.strm.avail_in===0&&re.strstart===re.block_start?yo:(Tr=re.window_size-re.strstart,re.strm.avail_in>Tr&&re.block_start>=re.w_size&&(re.block_start-=re.w_size,re.strstart-=re.w_size,re.window.set(re.window.subarray(re.w_size,re.w_size+re.strstart),0),re.matches<2&&re.matches++,Tr+=re.w_size,re.insert>re.strstart&&(re.insert=re.strstart)),Tr>re.strm.avail_in&&(Tr=re.strm.avail_in),Tr&&(Ws(re.strm,re.window,re.strstart,Tr),re.strstart+=Tr,re.insert+=Tr>re.w_size-re.insert?re.w_size-re.insert:Tr),re.high_water<re.strstart&&(re.high_water=re.strstart),Tr=re.bi_valid+42>>3,Tr=re.pending_buf_size-Tr>65535?65535:re.pending_buf_size-Tr,Fe=Tr>re.w_size?re.w_size:Tr,mr=re.strstart-re.block_start,(mr>=Fe||(mr||_t===An)&&_t!==Qa&&re.strm.avail_in===0&&mr<=Tr)&&(Qt=mr>Tr?Tr:mr,fa=_t===An&&re.strm.avail_in===0&&Qt===mr?1:0,Vr(re,re.block_start,Qt,fa),re.block_start+=Qt,Gi(re.strm)),fa?Vo:ro)},hl=(re,_t)=>{let Fe,Qt;for(;;){if(re.lookahead<di){if(Dl(re),re.lookahead<di&&_t===Qa)return ro;if(re.lookahead===0)break}if(Fe=0,re.lookahead>=vn&&(re.ins_h=hs(re,re.ins_h,re.window[re.strstart+vn-1]),Fe=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart),Fe!==0&&re.strstart-Fe<=re.w_size-di&&(re.match_length=ju(re,Fe)),re.match_length>=vn)if(Qt=hr(re,re.strstart-re.match_start,re.match_length-vn),re.lookahead-=re.match_length,re.match_length<=re.max_lazy_match&&re.lookahead>=vn){re.match_length--;do re.strstart++,re.ins_h=hs(re,re.ins_h,re.window[re.strstart+vn-1]),Fe=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart;while(--re.match_length!==0);re.strstart++}else re.strstart+=re.match_length,re.match_length=0,re.ins_h=re.window[re.strstart],re.ins_h=hs(re,re.ins_h,re.window[re.strstart+1]);else Qt=hr(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++;if(Qt&&(ao(re,!1),re.strm.avail_out===0))return ro}return re.insert=re.strstart<vn-1?re.strstart:vn-1,_t===An?(ao(re,!0),re.strm.avail_out===0?Vo:Ss):re.sym_next&&(ao(re,!1),re.strm.avail_out===0)?ro:yo},Oi=(re,_t)=>{let Fe,Qt,mr;for(;;){if(re.lookahead<di){if(Dl(re),re.lookahead<di&&_t===Qa)return ro;if(re.lookahead===0)break}if(Fe=0,re.lookahead>=vn&&(re.ins_h=hs(re,re.ins_h,re.window[re.strstart+vn-1]),Fe=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart),re.prev_length=re.match_length,re.prev_match=re.match_start,re.match_length=vn-1,Fe!==0&&re.prev_length<re.max_lazy_match&&re.strstart-Fe<=re.w_size-di&&(re.match_length=ju(re,Fe),re.match_length<=5&&(re.strategy===Ii||re.match_length===vn&&re.strstart-re.match_start>4096)&&(re.match_length=vn-1)),re.prev_length>=vn&&re.match_length<=re.prev_length){mr=re.strstart+re.lookahead-vn,Qt=hr(re,re.strstart-1-re.prev_match,re.prev_length-vn),re.lookahead-=re.prev_length-1,re.prev_length-=2;do++re.strstart<=mr&&(re.ins_h=hs(re,re.ins_h,re.window[re.strstart+vn-1]),Fe=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart);while(--re.prev_length!==0);if(re.match_available=0,re.match_length=vn-1,re.strstart++,Qt&&(ao(re,!1),re.strm.avail_out===0))return ro}else if(re.match_available){if(Qt=hr(re,0,re.window[re.strstart-1]),Qt&&ao(re,!1),re.strstart++,re.lookahead--,re.strm.avail_out===0)return ro}else re.match_available=1,re.strstart++,re.lookahead--}return re.match_available&&(Qt=hr(re,0,re.window[re.strstart-1]),re.match_available=0),re.insert=re.strstart<vn-1?re.strstart:vn-1,_t===An?(ao(re,!0),re.strm.avail_out===0?Vo:Ss):re.sym_next&&(ao(re,!1),re.strm.avail_out===0)?ro:yo},wc=(re,_t)=>{let Fe,Qt,mr,Tr;const fa=re.window;for(;;){if(re.lookahead<=ui){if(Dl(re),re.lookahead<=ui&&_t===Qa)return ro;if(re.lookahead===0)break}if(re.match_length=0,re.lookahead>=vn&&re.strstart>0&&(mr=re.strstart-1,Qt=fa[mr],Qt===fa[++mr]&&Qt===fa[++mr]&&Qt===fa[++mr])){Tr=re.strstart+ui;do;while(Qt===fa[++mr]&&Qt===fa[++mr]&&Qt===fa[++mr]&&Qt===fa[++mr]&&Qt===fa[++mr]&&Qt===fa[++mr]&&Qt===fa[++mr]&&Qt===fa[++mr]&&mr<Tr);re.match_length=ui-(Tr-mr),re.match_length>re.lookahead&&(re.match_length=re.lookahead)}if(re.match_length>=vn?(Fe=hr(re,1,re.match_length-vn),re.lookahead-=re.match_length,re.strstart+=re.match_length,re.match_length=0):(Fe=hr(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++),Fe&&(ao(re,!1),re.strm.avail_out===0))return ro}return re.insert=0,_t===An?(ao(re,!0),re.strm.avail_out===0?Vo:Ss):re.sym_next&&(ao(re,!1),re.strm.avail_out===0)?ro:yo},ts=(re,_t)=>{let Fe;for(;;){if(re.lookahead===0&&(Dl(re),re.lookahead===0)){if(_t===Qa)return ro;break}if(re.match_length=0,Fe=hr(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++,Fe&&(ao(re,!1),re.strm.avail_out===0))return ro}return re.insert=0,_t===An?(ao(re,!0),re.strm.avail_out===0?Vo:Ss):re.sym_next&&(ao(re,!1),re.strm.avail_out===0)?ro:yo};function bo(re,_t,Fe,Qt,mr){this.good_length=re,this.max_lazy=_t,this.nice_length=Fe,this.max_chain=Qt,this.func=mr}const ds=[new bo(0,0,0,0,Iu),new bo(4,4,8,4,hl),new bo(4,5,16,8,hl),new bo(4,6,32,32,hl),new bo(4,4,16,16,Oi),new bo(8,16,32,32,Oi),new bo(8,16,128,128,Oi),new bo(8,32,128,256,Oi),new bo(32,128,258,1024,Oi),new bo(32,258,258,4096,Oi)],ni=re=>{re.window_size=2*re.w_size,es(re.head),re.max_lazy_match=ds[re.level].max_lazy,re.good_match=ds[re.level].good_length,re.nice_match=ds[re.level].nice_length,re.max_chain_length=ds[re.level].max_chain,re.strstart=0,re.block_start=0,re.lookahead=0,re.insert=0,re.match_length=re.prev_length=vn-1,re.match_available=0,re.ins_h=0};function zl(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pa,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(As*2),this.dyn_dtree=new Uint16Array((2*Ro+1)*2),this.bl_tree=new Uint16Array((2*Bi+1)*2),es(this.dyn_ltree),es(this.dyn_dtree),es(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(qs+1),this.heap=new Uint16Array(2*ko+1),es(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ko+1),es(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const $s=re=>{if(!re)return 1;const _t=re.state;return!_t||_t.strm!==re||_t.status!==Qo&&_t.status!==Ys&&_t.status!==Rl&&_t.status!==Di&&_t.status!==go&&_t.status!==xi&&_t.status!==Ui&&_t.status!==So?1:0},dl=re=>{if($s(re))return fs(re,Hn);re.total_in=re.total_out=0,re.data_type=so;const _t=re.state;return _t.pending=0,_t.pending_out=0,_t.wrap<0&&(_t.wrap=-_t.wrap),_t.status=_t.wrap===2?Ys:_t.wrap?Qo:Ui,re.adler=_t.wrap===2?0:1,_t.last_flush=-2,ea(_t),zn},Io=re=>{const _t=dl(re);return _t===zn&&ni(re.state),_t},mi=(re,_t)=>$s(re)||re.state.wrap!==2?Hn:(re.state.gzhead=_t,zn),Ll=(re,_t,Fe,Qt,mr,Tr)=>{if(!re)return Hn;let fa=1;if(_t===Mi&&(_t=6),Qt<0?(fa=0,Qt=-Qt):Qt>15&&(fa=2,Qt-=16),mr<1||mr>Gs||Fe!==pa||Qt<8||Qt>15||_t<0||_t>9||Tr<0||Tr>Ri||Qt===8&&fa!==1)return fs(re,Hn);Qt===8&&(Qt=9);const aa=new zl;return re.state=aa,aa.strm=re,aa.status=Qo,aa.wrap=fa,aa.gzhead=null,aa.w_bits=Qt,aa.w_size=1<<aa.w_bits,aa.w_mask=aa.w_size-1,aa.hash_bits=mr+7,aa.hash_size=1<<aa.hash_bits,aa.hash_mask=aa.hash_size-1,aa.hash_shift=~~((aa.hash_bits+vn-1)/vn),aa.window=new Uint8Array(aa.w_size*2),aa.head=new Uint16Array(aa.hash_size),aa.prev=new Uint16Array(aa.w_size),aa.lit_bufsize=1<<mr+6,aa.pending_buf_size=aa.lit_bufsize*4,aa.pending_buf=new Uint8Array(aa.pending_buf_size),aa.sym_buf=aa.lit_bufsize,aa.sym_end=(aa.lit_bufsize-1)*3,aa.level=_t,aa.strategy=Tr,aa.method=Fe,Io(re)},Ts=(re,_t)=>Ll(re,_t,pa,qo,Fo,mo),Ac=(re,_t)=>{if($s(re)||_t>Ti||_t<0)return re?fs(re,Hn):Hn;const Fe=re.state;if(!re.output||re.avail_in!==0&&!re.input||Fe.status===So&&_t!==An)return fs(re,re.avail_out===0?li:Hn);const Qt=Fe.last_flush;if(Fe.last_flush=_t,Fe.pending!==0){if(Gi(re),re.avail_out===0)return Fe.last_flush=-1,zn}else if(re.avail_in===0&&Fu(_t)<=Fu(Qt)&&_t!==An)return fs(re,li);if(Fe.status===So&&re.avail_in!==0)return fs(re,li);if(Fe.status===Qo&&Fe.wrap===0&&(Fe.status=Ui),Fe.status===Qo){let mr=pa+(Fe.w_bits-8<<4)<<8,Tr=-1;if(Fe.strategy>=ti||Fe.level<2?Tr=0:Fe.level<6?Tr=1:Fe.level===6?Tr=2:Tr=3,mr|=Tr<<6,Fe.strstart!==0&&(mr|=cs),mr+=31-mr%31,fl(Fe,mr),Fe.strstart!==0&&(fl(Fe,re.adler>>>16),fl(Fe,re.adler&65535)),re.adler=1,Fe.status=Ui,Gi(re),Fe.pending!==0)return Fe.last_flush=-1,zn}if(Fe.status===Ys){if(re.adler=0,ci(Fe,31),ci(Fe,139),ci(Fe,8),Fe.gzhead)ci(Fe,(Fe.gzhead.text?1:0)+(Fe.gzhead.hcrc?2:0)+(Fe.gzhead.extra?4:0)+(Fe.gzhead.name?8:0)+(Fe.gzhead.comment?16:0)),ci(Fe,Fe.gzhead.time&255),ci(Fe,Fe.gzhead.time>>8&255),ci(Fe,Fe.gzhead.time>>16&255),ci(Fe,Fe.gzhead.time>>24&255),ci(Fe,Fe.level===9?2:Fe.strategy>=ti||Fe.level<2?4:0),ci(Fe,Fe.gzhead.os&255),Fe.gzhead.extra&&Fe.gzhead.extra.length&&(ci(Fe,Fe.gzhead.extra.length&255),ci(Fe,Fe.gzhead.extra.length>>8&255)),Fe.gzhead.hcrc&&(re.adler=ha(re.adler,Fe.pending_buf,Fe.pending,0)),Fe.gzindex=0,Fe.status=Rl;else if(ci(Fe,0),ci(Fe,0),ci(Fe,0),ci(Fe,0),ci(Fe,0),ci(Fe,Fe.level===9?2:Fe.strategy>=ti||Fe.level<2?4:0),ci(Fe,jo),Fe.status=Ui,Gi(re),Fe.pending!==0)return Fe.last_flush=-1,zn}if(Fe.status===Rl){if(Fe.gzhead.extra){let mr=Fe.pending,Tr=(Fe.gzhead.extra.length&65535)-Fe.gzindex;for(;Fe.pending+Tr>Fe.pending_buf_size;){let aa=Fe.pending_buf_size-Fe.pending;if(Fe.pending_buf.set(Fe.gzhead.extra.subarray(Fe.gzindex,Fe.gzindex+aa),Fe.pending),Fe.pending=Fe.pending_buf_size,Fe.gzhead.hcrc&&Fe.pending>mr&&(re.adler=ha(re.adler,Fe.pending_buf,Fe.pending-mr,mr)),Fe.gzindex+=aa,Gi(re),Fe.pending!==0)return Fe.last_flush=-1,zn;mr=0,Tr-=aa}let fa=new Uint8Array(Fe.gzhead.extra);Fe.pending_buf.set(fa.subarray(Fe.gzindex,Fe.gzindex+Tr),Fe.pending),Fe.pending+=Tr,Fe.gzhead.hcrc&&Fe.pending>mr&&(re.adler=ha(re.adler,Fe.pending_buf,Fe.pending-mr,mr)),Fe.gzindex=0}Fe.status=Di}if(Fe.status===Di){if(Fe.gzhead.name){let mr=Fe.pending,Tr;do{if(Fe.pending===Fe.pending_buf_size){if(Fe.gzhead.hcrc&&Fe.pending>mr&&(re.adler=ha(re.adler,Fe.pending_buf,Fe.pending-mr,mr)),Gi(re),Fe.pending!==0)return Fe.last_flush=-1,zn;mr=0}Fe.gzindex<Fe.gzhead.name.length?Tr=Fe.gzhead.name.charCodeAt(Fe.gzindex++)&255:Tr=0,ci(Fe,Tr)}while(Tr!==0);Fe.gzhead.hcrc&&Fe.pending>mr&&(re.adler=ha(re.adler,Fe.pending_buf,Fe.pending-mr,mr)),Fe.gzindex=0}Fe.status=go}if(Fe.status===go){if(Fe.gzhead.comment){let mr=Fe.pending,Tr;do{if(Fe.pending===Fe.pending_buf_size){if(Fe.gzhead.hcrc&&Fe.pending>mr&&(re.adler=ha(re.adler,Fe.pending_buf,Fe.pending-mr,mr)),Gi(re),Fe.pending!==0)return Fe.last_flush=-1,zn;mr=0}Fe.gzindex<Fe.gzhead.comment.length?Tr=Fe.gzhead.comment.charCodeAt(Fe.gzindex++)&255:Tr=0,ci(Fe,Tr)}while(Tr!==0);Fe.gzhead.hcrc&&Fe.pending>mr&&(re.adler=ha(re.adler,Fe.pending_buf,Fe.pending-mr,mr))}Fe.status=xi}if(Fe.status===xi){if(Fe.gzhead.hcrc){if(Fe.pending+2>Fe.pending_buf_size&&(Gi(re),Fe.pending!==0))return Fe.last_flush=-1,zn;ci(Fe,re.adler&255),ci(Fe,re.adler>>8&255),re.adler=0}if(Fe.status=Ui,Gi(re),Fe.pending!==0)return Fe.last_flush=-1,zn}if(re.avail_in!==0||Fe.lookahead!==0||_t!==Qa&&Fe.status!==So){let mr=Fe.level===0?Iu(Fe,_t):Fe.strategy===ti?ts(Fe,_t):Fe.strategy===pi?wc(Fe,_t):ds[Fe.level].func(Fe,_t);if((mr===Vo||mr===Ss)&&(Fe.status=So),mr===ro||mr===Vo)return re.avail_out===0&&(Fe.last_flush=-1),zn;if(mr===yo&&(_t===an?sa(Fe):_t!==Ti&&(Vr(Fe,0,0,!1),_t===sn&&(es(Fe.head),Fe.lookahead===0&&(Fe.strstart=0,Fe.block_start=0,Fe.insert=0))),Gi(re),re.avail_out===0))return Fe.last_flush=-1,zn}return _t!==An?zn:Fe.wrap<=0?Ln:(Fe.wrap===2?(ci(Fe,re.adler&255),ci(Fe,re.adler>>8&255),ci(Fe,re.adler>>16&255),ci(Fe,re.adler>>24&255),ci(Fe,re.total_in&255),ci(Fe,re.total_in>>8&255),ci(Fe,re.total_in>>16&255),ci(Fe,re.total_in>>24&255)):(fl(Fe,re.adler>>>16),fl(Fe,re.adler&65535)),Gi(re),Fe.wrap>0&&(Fe.wrap=-Fe.wrap),Fe.pending!==0?zn:Ln)},fu=re=>{if($s(re))return Hn;const _t=re.state.status;return re.state=null,_t===Ui?fs(re,bi):zn},yf=(re,_t)=>{let Fe=_t.length;if($s(re))return Hn;const Qt=re.state,mr=Qt.wrap;if(mr===2||mr===1&&Qt.status!==Qo||Qt.lookahead)return Hn;if(mr===1&&(re.adler=Rr(re.adler,_t,Fe,0)),Qt.wrap=0,Fe>=Qt.w_size){mr===0&&(es(Qt.head),Qt.strstart=0,Qt.block_start=0,Qt.insert=0);let mn=new Uint8Array(Qt.w_size);mn.set(_t.subarray(Fe-Qt.w_size,Fe),0),_t=mn,Fe=Qt.w_size}const Tr=re.avail_in,fa=re.next_in,aa=re.input;for(re.avail_in=Fe,re.next_in=0,re.input=_t,Dl(Qt);Qt.lookahead>=vn;){let mn=Qt.strstart,qr=Qt.lookahead-(vn-1);do Qt.ins_h=hs(Qt,Qt.ins_h,Qt.window[mn+vn-1]),Qt.prev[mn&Qt.w_mask]=Qt.head[Qt.ins_h],Qt.head[Qt.ins_h]=mn,mn++;while(--qr);Qt.strstart=mn,Qt.lookahead=vn-1,Dl(Qt)}return Qt.strstart+=Qt.lookahead,Qt.block_start=Qt.strstart,Qt.insert=Qt.lookahead,Qt.lookahead=0,Qt.match_length=Qt.prev_length=vn-1,Qt.match_available=0,re.next_in=fa,re.input=aa,re.avail_in=Tr,Qt.wrap=mr,zn};var Bu=Ts,Hu=Ll,rs=Io,Ki=dl,vl=mi,hu=Ac,pl=fu,bf=yf,Sc="pako deflate (from Nodeca project)",Xs={deflateInit:Bu,deflateInit2:Hu,deflateReset:rs,deflateResetKeep:Ki,deflateSetHeader:vl,deflate:hu,deflateEnd:pl,deflateSetDictionary:bf,deflateInfo:Sc};const du=(re,_t)=>Object.prototype.hasOwnProperty.call(re,_t);var Nl=function(re){const _t=Array.prototype.slice.call(arguments,1);for(;_t.length;){const Fe=_t.shift();if(Fe){if(typeof Fe!="object")throw new TypeError(Fe+"must be non-object");for(const Qt in Fe)du(Fe,Qt)&&(re[Qt]=Fe[Qt])}}return re},xf=re=>{let _t=0;for(let Qt=0,mr=re.length;Qt<mr;Qt++)_t+=re[Qt].length;const Fe=new Uint8Array(_t);for(let Qt=0,mr=0,Tr=re.length;Qt<Tr;Qt++){let fa=re[Qt];Fe.set(fa,mr),mr+=fa.length}return Fe},Ol={assign:Nl,flattenChunks:xf};let Tc=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Tc=!1}const Pl=new Uint8Array(256);for(let re=0;re<256;re++)Pl[re]=re>=252?6:re>=248?5:re>=240?4:re>=224?3:re>=192?2:1;Pl[254]=Pl[254]=1;var Uu=re=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(re);let _t,Fe,Qt,mr,Tr,fa=re.length,aa=0;for(mr=0;mr<fa;mr++)Fe=re.charCodeAt(mr),(Fe&64512)===55296&&mr+1<fa&&(Qt=re.charCodeAt(mr+1),(Qt&64512)===56320&&(Fe=65536+(Fe-55296<<10)+(Qt-56320),mr++)),aa+=Fe<128?1:Fe<2048?2:Fe<65536?3:4;for(_t=new Uint8Array(aa),Tr=0,mr=0;Tr<aa;mr++)Fe=re.charCodeAt(mr),(Fe&64512)===55296&&mr+1<fa&&(Qt=re.charCodeAt(mr+1),(Qt&64512)===56320&&(Fe=65536+(Fe-55296<<10)+(Qt-56320),mr++)),Fe<128?_t[Tr++]=Fe:Fe<2048?(_t[Tr++]=192|Fe>>>6,_t[Tr++]=128|Fe&63):Fe<65536?(_t[Tr++]=224|Fe>>>12,_t[Tr++]=128|Fe>>>6&63,_t[Tr++]=128|Fe&63):(_t[Tr++]=240|Fe>>>18,_t[Tr++]=128|Fe>>>12&63,_t[Tr++]=128|Fe>>>6&63,_t[Tr++]=128|Fe&63);return _t};const Mc=(re,_t)=>{if(_t<65534&&re.subarray&&Tc)return String.fromCharCode.apply(null,re.length===_t?re:re.subarray(0,_t));let Fe="";for(let Qt=0;Qt<_t;Qt++)Fe+=String.fromCharCode(re[Qt]);return Fe};var yh=(re,_t)=>{const Fe=_t||re.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(re.subarray(0,_t));let Qt,mr;const Tr=new Array(Fe*2);for(mr=0,Qt=0;Qt<Fe;){let fa=re[Qt++];if(fa<128){Tr[mr++]=fa;continue}let aa=Pl[fa];if(aa>4){Tr[mr++]=65533,Qt+=aa-1;continue}for(fa&=aa===2?31:aa===3?15:7;aa>1&&Qt<Fe;)fa=fa<<6|re[Qt++]&63,aa--;if(aa>1){Tr[mr++]=65533;continue}fa<65536?Tr[mr++]=fa:(fa-=65536,Tr[mr++]=55296|fa>>10&1023,Tr[mr++]=56320|fa&1023)}return Mc(Tr,mr)},bh=(re,_t)=>{_t=_t||re.length,_t>re.length&&(_t=re.length);let Fe=_t-1;for(;Fe>=0&&(re[Fe]&192)===128;)Fe--;return Fe<0||Fe===0?_t:Fe+Pl[re[Fe]]>_t?Fe:_t},Fl={string2buf:Uu,buf2string:yh,utf8border:bh};function xh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ec=xh;const _f=Object.prototype.toString,{Z_NO_FLUSH:Ms,Z_SYNC_FLUSH:vu,Z_FULL_FLUSH:Cc,Z_FINISH:pu,Z_OK:jl,Z_STREAM_END:kc,Z_DEFAULT_COMPRESSION:ml,Z_DEFAULT_STRATEGY:Gu,Z_DEFLATED:wf}=Qe;function Zs(re){this.options=Ol.assign({level:ml,method:wf,chunkSize:16384,windowBits:15,memLevel:8,strategy:Gu},re||{});let _t=this.options;_t.raw&&_t.windowBits>0?_t.windowBits=-_t.windowBits:_t.gzip&&_t.windowBits>0&&_t.windowBits<16&&(_t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ec,this.strm.avail_out=0;let Fe=Xs.deflateInit2(this.strm,_t.level,_t.method,_t.windowBits,_t.memLevel,_t.strategy);if(Fe!==jl)throw new Error(Pa[Fe]);if(_t.header&&Xs.deflateSetHeader(this.strm,_t.header),_t.dictionary){let Qt;if(typeof _t.dictionary=="string"?Qt=Fl.string2buf(_t.dictionary):_f.call(_t.dictionary)==="[object ArrayBuffer]"?Qt=new Uint8Array(_t.dictionary):Qt=_t.dictionary,Fe=Xs.deflateSetDictionary(this.strm,Qt),Fe!==jl)throw new Error(Pa[Fe]);this._dict_set=!0}}Zs.prototype.push=function(re,_t){const Fe=this.strm,Qt=this.options.chunkSize;let mr,Tr;if(this.ended)return!1;for(_t===~~_t?Tr=_t:Tr=_t===!0?pu:Ms,typeof re=="string"?Fe.input=Fl.string2buf(re):_f.call(re)==="[object ArrayBuffer]"?Fe.input=new Uint8Array(re):Fe.input=re,Fe.next_in=0,Fe.avail_in=Fe.input.length;;){if(Fe.avail_out===0&&(Fe.output=new Uint8Array(Qt),Fe.next_out=0,Fe.avail_out=Qt),(Tr===vu||Tr===Cc)&&Fe.avail_out<=6){this.onData(Fe.output.subarray(0,Fe.next_out)),Fe.avail_out=0;continue}if(mr=Xs.deflate(Fe,Tr),mr===kc)return Fe.next_out>0&&this.onData(Fe.output.subarray(0,Fe.next_out)),mr=Xs.deflateEnd(this.strm),this.onEnd(mr),this.ended=!0,mr===jl;if(Fe.avail_out===0){this.onData(Fe.output);continue}if(Tr>0&&Fe.next_out>0){this.onData(Fe.output.subarray(0,Fe.next_out)),Fe.avail_out=0;continue}if(Fe.avail_in===0)break}return!0},Zs.prototype.onData=function(re){this.chunks.push(re)},Zs.prototype.onEnd=function(re){re===jl&&(this.result=Ol.flattenChunks(this.chunks)),this.chunks=[],this.err=re,this.msg=this.strm.msg};function Es(re,_t){const Fe=new Zs(_t);if(Fe.push(re,!0),Fe.err)throw Fe.msg||Pa[Fe.err];return Fe.result}function Af(re,_t){return _t=_t||{},_t.raw=!0,Es(re,_t)}function Rc(re,_t){return _t=_t||{},_t.gzip=!0,Es(re,_t)}var Dc=Zs,Sf=Es,Tf=Af,Mf=Rc,zc={Deflate:Dc,deflate:Sf,deflateRaw:Tf,gzip:Mf};const Js=16209,_h=16191;var Lc=function(re,_t){let Fe,Qt,mr,Tr,fa,aa,mn,qr,ca,fi,en,Wa,zi,Hi,Kn,Bn,Vn,hn,Fn,qi,ri,Wn,gi,kn;const In=re.state;Fe=re.next_in,gi=re.input,Qt=Fe+(re.avail_in-5),mr=re.next_out,kn=re.output,Tr=mr-(_t-re.avail_out),fa=mr+(re.avail_out-257),aa=In.dmax,mn=In.wsize,qr=In.whave,ca=In.wnext,fi=In.window,en=In.hold,Wa=In.bits,zi=In.lencode,Hi=In.distcode,Kn=(1<<In.lenbits)-1,Bn=(1<<In.distbits)-1;e:do{Wa<15&&(en+=gi[Fe++]<<Wa,Wa+=8,en+=gi[Fe++]<<Wa,Wa+=8),Vn=zi[en&Kn];t:for(;;){if(hn=Vn>>>24,en>>>=hn,Wa-=hn,hn=Vn>>>16&255,hn===0)kn[mr++]=Vn&65535;else if(hn&16){Fn=Vn&65535,hn&=15,hn&&(Wa<hn&&(en+=gi[Fe++]<<Wa,Wa+=8),Fn+=en&(1<<hn)-1,en>>>=hn,Wa-=hn),Wa<15&&(en+=gi[Fe++]<<Wa,Wa+=8,en+=gi[Fe++]<<Wa,Wa+=8),Vn=Hi[en&Bn];r:for(;;){if(hn=Vn>>>24,en>>>=hn,Wa-=hn,hn=Vn>>>16&255,hn&16){if(qi=Vn&65535,hn&=15,Wa<hn&&(en+=gi[Fe++]<<Wa,Wa+=8,Wa<hn&&(en+=gi[Fe++]<<Wa,Wa+=8)),qi+=en&(1<<hn)-1,qi>aa){re.msg="invalid distance too far back",In.mode=Js;break e}if(en>>>=hn,Wa-=hn,hn=mr-Tr,qi>hn){if(hn=qi-hn,hn>qr&&In.sane){re.msg="invalid distance too far back",In.mode=Js;break e}if(ri=0,Wn=fi,ca===0){if(ri+=mn-hn,hn<Fn){Fn-=hn;do kn[mr++]=fi[ri++];while(--hn);ri=mr-qi,Wn=kn}}else if(ca<hn){if(ri+=mn+ca-hn,hn-=ca,hn<Fn){Fn-=hn;do kn[mr++]=fi[ri++];while(--hn);if(ri=0,ca<Fn){hn=ca,Fn-=hn;do kn[mr++]=fi[ri++];while(--hn);ri=mr-qi,Wn=kn}}}else if(ri+=ca-hn,hn<Fn){Fn-=hn;do kn[mr++]=fi[ri++];while(--hn);ri=mr-qi,Wn=kn}for(;Fn>2;)kn[mr++]=Wn[ri++],kn[mr++]=Wn[ri++],kn[mr++]=Wn[ri++],Fn-=3;Fn&&(kn[mr++]=Wn[ri++],Fn>1&&(kn[mr++]=Wn[ri++]))}else{ri=mr-qi;do kn[mr++]=kn[ri++],kn[mr++]=kn[ri++],kn[mr++]=kn[ri++],Fn-=3;while(Fn>2);Fn&&(kn[mr++]=kn[ri++],Fn>1&&(kn[mr++]=kn[ri++]))}}else if(hn&64){re.msg="invalid distance code",In.mode=Js;break e}else{Vn=Hi[(Vn&65535)+(en&(1<<hn)-1)];continue r}break}}else if(hn&64)if(hn&32){In.mode=_h;break e}else{re.msg="invalid literal/length code",In.mode=Js;break e}else{Vn=zi[(Vn&65535)+(en&(1<<hn)-1)];continue t}break}}while(Fe<Qt&&mr<fa);Fn=Wa>>3,Fe-=Fn,Wa-=Fn<<3,en&=(1<<Wa)-1,re.next_in=Fe,re.next_out=mr,re.avail_in=Fe<Qt?5+(Qt-Fe):5-(Fe-Qt),re.avail_out=mr<fa?257+(fa-mr):257-(mr-fa),In.hold=en,In.bits=Wa};const Ks=15,Il=852,mu=592,qu=0,Qs=1,Ef=2,wh=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ah=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Cf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),kf=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Cs=(re,_t,Fe,Qt,mr,Tr,fa,aa)=>{const mn=aa.bits;let qr=0,ca=0,fi=0,en=0,Wa=0,zi=0,Hi=0,Kn=0,Bn=0,Vn=0,hn,Fn,qi,ri,Wn,gi=null,kn;const In=new Uint16Array(Ks+1),vo=new Uint16Array(Ks+1);let No=null,El,Zl,Zo;for(qr=0;qr<=Ks;qr++)In[qr]=0;for(ca=0;ca<Qt;ca++)In[_t[Fe+ca]]++;for(Wa=mn,en=Ks;en>=1&&In[en]===0;en--);if(Wa>en&&(Wa=en),en===0)return mr[Tr++]=1<<24|64<<16|0,mr[Tr++]=1<<24|64<<16|0,aa.bits=1,0;for(fi=1;fi<en&&In[fi]===0;fi++);for(Wa<fi&&(Wa=fi),Kn=1,qr=1;qr<=Ks;qr++)if(Kn<<=1,Kn-=In[qr],Kn<0)return-1;if(Kn>0&&(re===qu||en!==1))return-1;for(vo[1]=0,qr=1;qr<Ks;qr++)vo[qr+1]=vo[qr]+In[qr];for(ca=0;ca<Qt;ca++)_t[Fe+ca]!==0&&(fa[vo[_t[Fe+ca]]++]=ca);if(re===qu?(gi=No=fa,kn=20):re===Qs?(gi=wh,No=Ah,kn=257):(gi=Cf,No=kf,kn=0),Vn=0,ca=0,qr=fi,Wn=Tr,zi=Wa,Hi=0,qi=-1,Bn=1<<Wa,ri=Bn-1,re===Qs&&Bn>Il||re===Ef&&Bn>mu)return 1;for(;;){El=qr-Hi,fa[ca]+1<kn?(Zl=0,Zo=fa[ca]):fa[ca]>=kn?(Zl=No[fa[ca]-kn],Zo=gi[fa[ca]-kn]):(Zl=96,Zo=0),hn=1<<qr-Hi,Fn=1<<zi,fi=Fn;do Fn-=hn,mr[Wn+(Vn>>Hi)+Fn]=El<<24|Zl<<16|Zo|0;while(Fn!==0);for(hn=1<<qr-1;Vn&hn;)hn>>=1;if(hn!==0?(Vn&=hn-1,Vn+=hn):Vn=0,ca++,--In[qr]===0){if(qr===en)break;qr=_t[Fe+fa[ca]]}if(qr>Wa&&(Vn&ri)!==qi){for(Hi===0&&(Hi=Wa),Wn+=fi,zi=qr-Hi,Kn=1<<zi;zi+Hi<en&&(Kn-=In[zi+Hi],!(Kn<=0));)zi++,Kn<<=1;if(Bn+=1<<zi,re===Qs&&Bn>Il||re===Ef&&Bn>mu)return 1;qi=Vn&ri,mr[qi]=Wa<<24|zi<<16|Wn-Tr|0}}return Vn!==0&&(mr[Wn+Vn]=qr-Hi<<24|64<<16|0),aa.bits=Wa,0};const gu=0,Rf=1,Bl=2,{Z_FINISH:Nc,Z_BLOCK:Df,Z_TREES:gl,Z_OK:Yo,Z_STREAM_END:Hl,Z_NEED_DICT:Vu,Z_STREAM_ERROR:Wo,Z_DATA_ERROR:yl,Z_MEM_ERROR:Oc,Z_BUF_ERROR:Sh,Z_DEFLATED:zf}=Qe,bl=16180,lo=16181,Ul=16182,Yu=16183,Pc=16184,Fc=16185,jc=16186,yu=16187,xl=16188,ks=16189,el=16190,Do=16191,bu=16192,Ic=16193,vs=16194,_l=16195,Wu=16196,$u=16197,Rs=16198,xu=16199,_u=16200,Bc=16201,Lf=16202,Nf=16203,Of=16204,Hc=16205,wu=16206,Xu=16207,$o=16208,_i=16209,Bo=16210,tl=16211,Zu=852,Au=592,Ju=15,Su=re=>(re>>>24&255)+(re>>>8&65280)+((re&65280)<<8)+((re&255)<<24);function wl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const rl=re=>{if(!re)return 1;const _t=re.state;return!_t||_t.strm!==re||_t.mode<bl||_t.mode>tl?1:0},Tu=re=>{if(rl(re))return Wo;const _t=re.state;return re.total_in=re.total_out=_t.total=0,re.msg="",_t.wrap&&(re.adler=_t.wrap&1),_t.mode=bl,_t.last=0,_t.havedict=0,_t.flags=-1,_t.dmax=32768,_t.head=null,_t.hold=0,_t.bits=0,_t.lencode=_t.lendyn=new Int32Array(Zu),_t.distcode=_t.distdyn=new Int32Array(Au),_t.sane=1,_t.back=-1,Yo},Al=re=>{if(rl(re))return Wo;const _t=re.state;return _t.wsize=0,_t.whave=0,_t.wnext=0,Tu(re)},Uc=(re,_t)=>{let Fe;if(rl(re))return Wo;const Qt=re.state;return _t<0?(Fe=0,_t=-_t):(Fe=(_t>>4)+5,_t<48&&(_t&=15)),_t&&(_t<8||_t>15)?Wo:(Qt.window!==null&&Qt.wbits!==_t&&(Qt.window=null),Qt.wrap=Fe,Qt.wbits=_t,Al(re))},zo=(re,_t)=>{if(!re)return Wo;const Fe=new wl;re.state=Fe,Fe.strm=re,Fe.window=null,Fe.mode=bl;const Qt=Uc(re,_t);return Qt!==Yo&&(re.state=null),Qt},Ku=re=>zo(re,Ju);let ps=!0,Qu,Gl;const Sl=re=>{if(ps){Qu=new Int32Array(512),Gl=new Int32Array(32);let _t=0;for(;_t<144;)re.lens[_t++]=8;for(;_t<256;)re.lens[_t++]=9;for(;_t<280;)re.lens[_t++]=7;for(;_t<288;)re.lens[_t++]=8;for(Cs(Rf,re.lens,0,288,Qu,0,re.work,{bits:9}),_t=0;_t<32;)re.lens[_t++]=5;Cs(Bl,re.lens,0,32,Gl,0,re.work,{bits:5}),ps=!1}re.lencode=Qu,re.lenbits=9,re.distcode=Gl,re.distbits=5},ec=(re,_t,Fe,Qt)=>{let mr;const Tr=re.state;return Tr.window===null&&(Tr.wsize=1<<Tr.wbits,Tr.wnext=0,Tr.whave=0,Tr.window=new Uint8Array(Tr.wsize)),Qt>=Tr.wsize?(Tr.window.set(_t.subarray(Fe-Tr.wsize,Fe),0),Tr.wnext=0,Tr.whave=Tr.wsize):(mr=Tr.wsize-Tr.wnext,mr>Qt&&(mr=Qt),Tr.window.set(_t.subarray(Fe-Qt,Fe-Qt+mr),Tr.wnext),Qt-=mr,Qt?(Tr.window.set(_t.subarray(Fe-Qt,Fe),0),Tr.wnext=Qt,Tr.whave=Tr.wsize):(Tr.wnext+=mr,Tr.wnext===Tr.wsize&&(Tr.wnext=0),Tr.whave<Tr.wsize&&(Tr.whave+=mr))),0},Pf=(re,_t)=>{let Fe,Qt,mr,Tr,fa,aa,mn,qr,ca,fi,en,Wa,zi,Hi,Kn=0,Bn,Vn,hn,Fn,qi,ri,Wn,gi;const kn=new Uint8Array(4);let In,vo;const No=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(rl(re)||!re.output||!re.input&&re.avail_in!==0)return Wo;Fe=re.state,Fe.mode===Do&&(Fe.mode=bu),fa=re.next_out,mr=re.output,mn=re.avail_out,Tr=re.next_in,Qt=re.input,aa=re.avail_in,qr=Fe.hold,ca=Fe.bits,fi=aa,en=mn,gi=Yo;e:for(;;)switch(Fe.mode){case bl:if(Fe.wrap===0){Fe.mode=bu;break}for(;ca<16;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(Fe.wrap&2&&qr===35615){Fe.wbits===0&&(Fe.wbits=15),Fe.check=0,kn[0]=qr&255,kn[1]=qr>>>8&255,Fe.check=ha(Fe.check,kn,2,0),qr=0,ca=0,Fe.mode=lo;break}if(Fe.head&&(Fe.head.done=!1),!(Fe.wrap&1)||(((qr&255)<<8)+(qr>>8))%31){re.msg="incorrect header check",Fe.mode=_i;break}if((qr&15)!==zf){re.msg="unknown compression method",Fe.mode=_i;break}if(qr>>>=4,ca-=4,Wn=(qr&15)+8,Fe.wbits===0&&(Fe.wbits=Wn),Wn>15||Wn>Fe.wbits){re.msg="invalid window size",Fe.mode=_i;break}Fe.dmax=1<<Fe.wbits,Fe.flags=0,re.adler=Fe.check=1,Fe.mode=qr&512?ks:Do,qr=0,ca=0;break;case lo:for(;ca<16;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(Fe.flags=qr,(Fe.flags&255)!==zf){re.msg="unknown compression method",Fe.mode=_i;break}if(Fe.flags&57344){re.msg="unknown header flags set",Fe.mode=_i;break}Fe.head&&(Fe.head.text=qr>>8&1),Fe.flags&512&&Fe.wrap&4&&(kn[0]=qr&255,kn[1]=qr>>>8&255,Fe.check=ha(Fe.check,kn,2,0)),qr=0,ca=0,Fe.mode=Ul;case Ul:for(;ca<32;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}Fe.head&&(Fe.head.time=qr),Fe.flags&512&&Fe.wrap&4&&(kn[0]=qr&255,kn[1]=qr>>>8&255,kn[2]=qr>>>16&255,kn[3]=qr>>>24&255,Fe.check=ha(Fe.check,kn,4,0)),qr=0,ca=0,Fe.mode=Yu;case Yu:for(;ca<16;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}Fe.head&&(Fe.head.xflags=qr&255,Fe.head.os=qr>>8),Fe.flags&512&&Fe.wrap&4&&(kn[0]=qr&255,kn[1]=qr>>>8&255,Fe.check=ha(Fe.check,kn,2,0)),qr=0,ca=0,Fe.mode=Pc;case Pc:if(Fe.flags&1024){for(;ca<16;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}Fe.length=qr,Fe.head&&(Fe.head.extra_len=qr),Fe.flags&512&&Fe.wrap&4&&(kn[0]=qr&255,kn[1]=qr>>>8&255,Fe.check=ha(Fe.check,kn,2,0)),qr=0,ca=0}else Fe.head&&(Fe.head.extra=null);Fe.mode=Fc;case Fc:if(Fe.flags&1024&&(Wa=Fe.length,Wa>aa&&(Wa=aa),Wa&&(Fe.head&&(Wn=Fe.head.extra_len-Fe.length,Fe.head.extra||(Fe.head.extra=new Uint8Array(Fe.head.extra_len)),Fe.head.extra.set(Qt.subarray(Tr,Tr+Wa),Wn)),Fe.flags&512&&Fe.wrap&4&&(Fe.check=ha(Fe.check,Qt,Wa,Tr)),aa-=Wa,Tr+=Wa,Fe.length-=Wa),Fe.length))break e;Fe.length=0,Fe.mode=jc;case jc:if(Fe.flags&2048){if(aa===0)break e;Wa=0;do Wn=Qt[Tr+Wa++],Fe.head&&Wn&&Fe.length<65536&&(Fe.head.name+=String.fromCharCode(Wn));while(Wn&&Wa<aa);if(Fe.flags&512&&Fe.wrap&4&&(Fe.check=ha(Fe.check,Qt,Wa,Tr)),aa-=Wa,Tr+=Wa,Wn)break e}else Fe.head&&(Fe.head.name=null);Fe.length=0,Fe.mode=yu;case yu:if(Fe.flags&4096){if(aa===0)break e;Wa=0;do Wn=Qt[Tr+Wa++],Fe.head&&Wn&&Fe.length<65536&&(Fe.head.comment+=String.fromCharCode(Wn));while(Wn&&Wa<aa);if(Fe.flags&512&&Fe.wrap&4&&(Fe.check=ha(Fe.check,Qt,Wa,Tr)),aa-=Wa,Tr+=Wa,Wn)break e}else Fe.head&&(Fe.head.comment=null);Fe.mode=xl;case xl:if(Fe.flags&512){for(;ca<16;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(Fe.wrap&4&&qr!==(Fe.check&65535)){re.msg="header crc mismatch",Fe.mode=_i;break}qr=0,ca=0}Fe.head&&(Fe.head.hcrc=Fe.flags>>9&1,Fe.head.done=!0),re.adler=Fe.check=0,Fe.mode=Do;break;case ks:for(;ca<32;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}re.adler=Fe.check=Su(qr),qr=0,ca=0,Fe.mode=el;case el:if(Fe.havedict===0)return re.next_out=fa,re.avail_out=mn,re.next_in=Tr,re.avail_in=aa,Fe.hold=qr,Fe.bits=ca,Vu;re.adler=Fe.check=1,Fe.mode=Do;case Do:if(_t===Df||_t===gl)break e;case bu:if(Fe.last){qr>>>=ca&7,ca-=ca&7,Fe.mode=wu;break}for(;ca<3;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}switch(Fe.last=qr&1,qr>>>=1,ca-=1,qr&3){case 0:Fe.mode=Ic;break;case 1:if(Sl(Fe),Fe.mode=xu,_t===gl){qr>>>=2,ca-=2;break e}break;case 2:Fe.mode=Wu;break;case 3:re.msg="invalid block type",Fe.mode=_i}qr>>>=2,ca-=2;break;case Ic:for(qr>>>=ca&7,ca-=ca&7;ca<32;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if((qr&65535)!==(qr>>>16^65535)){re.msg="invalid stored block lengths",Fe.mode=_i;break}if(Fe.length=qr&65535,qr=0,ca=0,Fe.mode=vs,_t===gl)break e;case vs:Fe.mode=_l;case _l:if(Wa=Fe.length,Wa){if(Wa>aa&&(Wa=aa),Wa>mn&&(Wa=mn),Wa===0)break e;mr.set(Qt.subarray(Tr,Tr+Wa),fa),aa-=Wa,Tr+=Wa,mn-=Wa,fa+=Wa,Fe.length-=Wa;break}Fe.mode=Do;break;case Wu:for(;ca<14;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(Fe.nlen=(qr&31)+257,qr>>>=5,ca-=5,Fe.ndist=(qr&31)+1,qr>>>=5,ca-=5,Fe.ncode=(qr&15)+4,qr>>>=4,ca-=4,Fe.nlen>286||Fe.ndist>30){re.msg="too many length or distance symbols",Fe.mode=_i;break}Fe.have=0,Fe.mode=$u;case $u:for(;Fe.have<Fe.ncode;){for(;ca<3;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}Fe.lens[No[Fe.have++]]=qr&7,qr>>>=3,ca-=3}for(;Fe.have<19;)Fe.lens[No[Fe.have++]]=0;if(Fe.lencode=Fe.lendyn,Fe.lenbits=7,In={bits:Fe.lenbits},gi=Cs(gu,Fe.lens,0,19,Fe.lencode,0,Fe.work,In),Fe.lenbits=In.bits,gi){re.msg="invalid code lengths set",Fe.mode=_i;break}Fe.have=0,Fe.mode=Rs;case Rs:for(;Fe.have<Fe.nlen+Fe.ndist;){for(;Kn=Fe.lencode[qr&(1<<Fe.lenbits)-1],Bn=Kn>>>24,Vn=Kn>>>16&255,hn=Kn&65535,!(Bn<=ca);){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(hn<16)qr>>>=Bn,ca-=Bn,Fe.lens[Fe.have++]=hn;else{if(hn===16){for(vo=Bn+2;ca<vo;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(qr>>>=Bn,ca-=Bn,Fe.have===0){re.msg="invalid bit length repeat",Fe.mode=_i;break}Wn=Fe.lens[Fe.have-1],Wa=3+(qr&3),qr>>>=2,ca-=2}else if(hn===17){for(vo=Bn+3;ca<vo;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}qr>>>=Bn,ca-=Bn,Wn=0,Wa=3+(qr&7),qr>>>=3,ca-=3}else{for(vo=Bn+7;ca<vo;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}qr>>>=Bn,ca-=Bn,Wn=0,Wa=11+(qr&127),qr>>>=7,ca-=7}if(Fe.have+Wa>Fe.nlen+Fe.ndist){re.msg="invalid bit length repeat",Fe.mode=_i;break}for(;Wa--;)Fe.lens[Fe.have++]=Wn}}if(Fe.mode===_i)break;if(Fe.lens[256]===0){re.msg="invalid code -- missing end-of-block",Fe.mode=_i;break}if(Fe.lenbits=9,In={bits:Fe.lenbits},gi=Cs(Rf,Fe.lens,0,Fe.nlen,Fe.lencode,0,Fe.work,In),Fe.lenbits=In.bits,gi){re.msg="invalid literal/lengths set",Fe.mode=_i;break}if(Fe.distbits=6,Fe.distcode=Fe.distdyn,In={bits:Fe.distbits},gi=Cs(Bl,Fe.lens,Fe.nlen,Fe.ndist,Fe.distcode,0,Fe.work,In),Fe.distbits=In.bits,gi){re.msg="invalid distances set",Fe.mode=_i;break}if(Fe.mode=xu,_t===gl)break e;case xu:Fe.mode=_u;case _u:if(aa>=6&&mn>=258){re.next_out=fa,re.avail_out=mn,re.next_in=Tr,re.avail_in=aa,Fe.hold=qr,Fe.bits=ca,Lc(re,en),fa=re.next_out,mr=re.output,mn=re.avail_out,Tr=re.next_in,Qt=re.input,aa=re.avail_in,qr=Fe.hold,ca=Fe.bits,Fe.mode===Do&&(Fe.back=-1);break}for(Fe.back=0;Kn=Fe.lencode[qr&(1<<Fe.lenbits)-1],Bn=Kn>>>24,Vn=Kn>>>16&255,hn=Kn&65535,!(Bn<=ca);){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(Vn&&!(Vn&240)){for(Fn=Bn,qi=Vn,ri=hn;Kn=Fe.lencode[ri+((qr&(1<<Fn+qi)-1)>>Fn)],Bn=Kn>>>24,Vn=Kn>>>16&255,hn=Kn&65535,!(Fn+Bn<=ca);){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}qr>>>=Fn,ca-=Fn,Fe.back+=Fn}if(qr>>>=Bn,ca-=Bn,Fe.back+=Bn,Fe.length=hn,Vn===0){Fe.mode=Hc;break}if(Vn&32){Fe.back=-1,Fe.mode=Do;break}if(Vn&64){re.msg="invalid literal/length code",Fe.mode=_i;break}Fe.extra=Vn&15,Fe.mode=Bc;case Bc:if(Fe.extra){for(vo=Fe.extra;ca<vo;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}Fe.length+=qr&(1<<Fe.extra)-1,qr>>>=Fe.extra,ca-=Fe.extra,Fe.back+=Fe.extra}Fe.was=Fe.length,Fe.mode=Lf;case Lf:for(;Kn=Fe.distcode[qr&(1<<Fe.distbits)-1],Bn=Kn>>>24,Vn=Kn>>>16&255,hn=Kn&65535,!(Bn<=ca);){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(!(Vn&240)){for(Fn=Bn,qi=Vn,ri=hn;Kn=Fe.distcode[ri+((qr&(1<<Fn+qi)-1)>>Fn)],Bn=Kn>>>24,Vn=Kn>>>16&255,hn=Kn&65535,!(Fn+Bn<=ca);){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}qr>>>=Fn,ca-=Fn,Fe.back+=Fn}if(qr>>>=Bn,ca-=Bn,Fe.back+=Bn,Vn&64){re.msg="invalid distance code",Fe.mode=_i;break}Fe.offset=hn,Fe.extra=Vn&15,Fe.mode=Nf;case Nf:if(Fe.extra){for(vo=Fe.extra;ca<vo;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}Fe.offset+=qr&(1<<Fe.extra)-1,qr>>>=Fe.extra,ca-=Fe.extra,Fe.back+=Fe.extra}if(Fe.offset>Fe.dmax){re.msg="invalid distance too far back",Fe.mode=_i;break}Fe.mode=Of;case Of:if(mn===0)break e;if(Wa=en-mn,Fe.offset>Wa){if(Wa=Fe.offset-Wa,Wa>Fe.whave&&Fe.sane){re.msg="invalid distance too far back",Fe.mode=_i;break}Wa>Fe.wnext?(Wa-=Fe.wnext,zi=Fe.wsize-Wa):zi=Fe.wnext-Wa,Wa>Fe.length&&(Wa=Fe.length),Hi=Fe.window}else Hi=mr,zi=fa-Fe.offset,Wa=Fe.length;Wa>mn&&(Wa=mn),mn-=Wa,Fe.length-=Wa;do mr[fa++]=Hi[zi++];while(--Wa);Fe.length===0&&(Fe.mode=_u);break;case Hc:if(mn===0)break e;mr[fa++]=Fe.length,mn--,Fe.mode=_u;break;case wu:if(Fe.wrap){for(;ca<32;){if(aa===0)break e;aa--,qr|=Qt[Tr++]<<ca,ca+=8}if(en-=mn,re.total_out+=en,Fe.total+=en,Fe.wrap&4&&en&&(re.adler=Fe.check=Fe.flags?ha(Fe.check,mr,en,fa-en):Rr(Fe.check,mr,en,fa-en)),en=mn,Fe.wrap&4&&(Fe.flags?qr:Su(qr))!==Fe.check){re.msg="incorrect data check",Fe.mode=_i;break}qr=0,ca=0}Fe.mode=Xu;case Xu:if(Fe.wrap&&Fe.flags){for(;ca<32;){if(aa===0)break e;aa--,qr+=Qt[Tr++]<<ca,ca+=8}if(Fe.wrap&4&&qr!==(Fe.total&4294967295)){re.msg="incorrect length check",Fe.mode=_i;break}qr=0,ca=0}Fe.mode=$o;case $o:gi=Hl;break e;case _i:gi=yl;break e;case Bo:return Oc;case tl:default:return Wo}return re.next_out=fa,re.avail_out=mn,re.next_in=Tr,re.avail_in=aa,Fe.hold=qr,Fe.bits=ca,(Fe.wsize||en!==re.avail_out&&Fe.mode<_i&&(Fe.mode<wu||_t!==Nc))&&ec(re,re.output,re.next_out,en-re.avail_out),fi-=re.avail_in,en-=re.avail_out,re.total_in+=fi,re.total_out+=en,Fe.total+=en,Fe.wrap&4&&en&&(re.adler=Fe.check=Fe.flags?ha(Fe.check,mr,en,re.next_out-en):Rr(Fe.check,mr,en,re.next_out-en)),re.data_type=Fe.bits+(Fe.last?64:0)+(Fe.mode===Do?128:0)+(Fe.mode===xu||Fe.mode===vs?256:0),(fi===0&&en===0||_t===Nc)&&gi===Yo&&(gi=Sh),gi},Gc=re=>{if(rl(re))return Wo;let _t=re.state;return _t.window&&(_t.window=null),re.state=null,Yo},qc=(re,_t)=>{if(rl(re))return Wo;const Fe=re.state;return Fe.wrap&2?(Fe.head=_t,_t.done=!1,Yo):Wo},Ho=(re,_t)=>{const Fe=_t.length;let Qt,mr,Tr;return rl(re)||(Qt=re.state,Qt.wrap!==0&&Qt.mode!==el)?Wo:Qt.mode===el&&(mr=1,mr=Rr(mr,_t,Fe,0),mr!==Qt.check)?yl:(Tr=ec(re,_t,Fe,Fe),Tr?(Qt.mode=Bo,Oc):(Qt.havedict=1,Yo))};var ql=Al,Vl=Uc,Yl=Tu,Mu=Ku,Xo=zo,Lo=Pf,al=Gc,as=qc,ms=Ho,Ds="pako inflate (from Nodeca project)",gs={inflateReset:ql,inflateReset2:Vl,inflateResetKeep:Yl,inflateInit:Mu,inflateInit2:Xo,inflate:Lo,inflateEnd:al,inflateGetHeader:as,inflateSetDictionary:ms,inflateInfo:Ds};function Vc(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Eu=Vc;const Yc=Object.prototype.toString,{Z_NO_FLUSH:fo,Z_FINISH:Pi,Z_OK:Jn,Z_STREAM_END:ys,Z_NEED_DICT:To,Z_STREAM_ERROR:Wc,Z_DATA_ERROR:zs,Z_MEM_ERROR:Ff}=Qe;function Wl(re){this.options=Ol.assign({chunkSize:65536,windowBits:15,to:""},re||{});const _t=this.options;_t.raw&&_t.windowBits>=0&&_t.windowBits<16&&(_t.windowBits=-_t.windowBits,_t.windowBits===0&&(_t.windowBits=-15)),_t.windowBits>=0&&_t.windowBits<16&&!(re&&re.windowBits)&&(_t.windowBits+=32),_t.windowBits>15&&_t.windowBits<48&&(_t.windowBits&15||(_t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ec,this.strm.avail_out=0;let Fe=gs.inflateInit2(this.strm,_t.windowBits);if(Fe!==Jn)throw new Error(Pa[Fe]);if(this.header=new Eu,gs.inflateGetHeader(this.strm,this.header),_t.dictionary&&(typeof _t.dictionary=="string"?_t.dictionary=Fl.string2buf(_t.dictionary):Yc.call(_t.dictionary)==="[object ArrayBuffer]"&&(_t.dictionary=new Uint8Array(_t.dictionary)),_t.raw&&(Fe=gs.inflateSetDictionary(this.strm,_t.dictionary),Fe!==Jn)))throw new Error(Pa[Fe])}Wl.prototype.push=function(re,_t){const Fe=this.strm,Qt=this.options.chunkSize,mr=this.options.dictionary;let Tr,fa,aa;if(this.ended)return!1;for(_t===~~_t?fa=_t:fa=_t===!0?Pi:fo,Yc.call(re)==="[object ArrayBuffer]"?Fe.input=new Uint8Array(re):Fe.input=re,Fe.next_in=0,Fe.avail_in=Fe.input.length;;){for(Fe.avail_out===0&&(Fe.output=new Uint8Array(Qt),Fe.next_out=0,Fe.avail_out=Qt),Tr=gs.inflate(Fe,fa),Tr===To&&mr&&(Tr=gs.inflateSetDictionary(Fe,mr),Tr===Jn?Tr=gs.inflate(Fe,fa):Tr===zs&&(Tr=To));Fe.avail_in>0&&Tr===ys&&Fe.state.wrap>0&&re[Fe.next_in]!==0;)gs.inflateReset(Fe),Tr=gs.inflate(Fe,fa);switch(Tr){case Wc:case zs:case To:case Ff:return this.onEnd(Tr),this.ended=!0,!1}if(aa=Fe.avail_out,Fe.next_out&&(Fe.avail_out===0||Tr===ys))if(this.options.to==="string"){let mn=Fl.utf8border(Fe.output,Fe.next_out),qr=Fe.next_out-mn,ca=Fl.buf2string(Fe.output,mn);Fe.next_out=qr,Fe.avail_out=Qt-qr,qr&&Fe.output.set(Fe.output.subarray(mn,mn+qr),0),this.onData(ca)}else this.onData(Fe.output.length===Fe.next_out?Fe.output:Fe.output.subarray(0,Fe.next_out));if(!(Tr===Jn&&aa===0)){if(Tr===ys)return Tr=gs.inflateEnd(this.strm),this.onEnd(Tr),this.ended=!0,!0;if(Fe.avail_in===0)break}}return!0},Wl.prototype.onData=function(re){this.chunks.push(re)},Wl.prototype.onEnd=function(re){re===Jn&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ol.flattenChunks(this.chunks)),this.chunks=[],this.err=re,this.msg=this.strm.msg};function Ls(re,_t){const Fe=new Wl(_t);if(Fe.push(re),Fe.err)throw Fe.msg||Pa[Fe.err];return Fe.result}function Tl(re,_t){return _t=_t||{},_t.raw=!0,Ls(re,_t)}var $c=Wl,Cu=Ls,Xc=Tl,Ns=Ls,bs={Inflate:$c,inflate:Cu,inflateRaw:Xc,ungzip:Ns};const{Deflate:nl,deflate:Os,deflateRaw:Zc,gzip:Jc}=zc,{Inflate:Ps,inflate:ku,inflateRaw:Ml,ungzip:ho}=bs;var Ru=nl,Du=Os,Kc=Zc,tc=Jc,jf=Ps,Zi=ku,rc=Ml,$l=ho,Xl=Qe,zu={Deflate:Ru,deflate:Du,deflateRaw:Kc,gzip:tc,Inflate:jf,inflate:Zi,inflateRaw:rc,ungzip:$l,constants:Xl}}),"./node_modules/upng-js/UPNG.js":((t,i,a)=>{(function(){var n={},y;t.exports=n,y=a("./node_modules/upng-js/node_modules/pako/index.js"),(function(x,k){x.toRGBA8=function(S){var E=S.width,U=S.height;if(S.tabs.acTL==null)return[x.toRGBA8.decodeImage(S.data,E,U,S).buffer];var C=[];S.frames[0].data==null&&(S.frames[0].data=S.data);for(var B,W=new Uint8Array(E*U*4),Y=0;Y<S.frames.length;Y++){var Z=S.frames[Y],T=Z.rect.x,l=Z.rect.y,f=Z.rect.width,D=Z.rect.height,I=x.toRGBA8.decodeImage(Z.data,f,D,S);if(Y==0?B=I:Z.blend==0?x._copyTile(I,f,D,B,E,U,T,l,0):Z.blend==1&&x._copyTile(I,f,D,B,E,U,T,l,1),C.push(B.buffer),B=B.slice(0),Z.dispose!=0){if(Z.dispose==1)x._copyTile(W,f,D,B,E,U,T,l,0);else if(Z.dispose==2){for(var V=Y-1;S.frames[V].dispose==2;)V--;B=new Uint8Array(C[V]).slice(0)}}}return C},x.toRGBA8.decodeImage=function(S,E,U,C){var B=E*U,W=x.decode._getBPP(C),Y=Math.ceil(E*W/8),Z=new Uint8Array(B*4),T=new Uint32Array(Z.buffer),l=C.ctype,f=C.depth,D=x._bin.readUshort;if(l==6){var I=B<<2;if(f==8)for(var V=0;V<I;V++)Z[V]=S[V];if(f==16)for(var V=0;V<I;V++)Z[V]=S[V<<1]}else if(l==2){var K=C.tabs.tRNS,A=-1,L=-1,G=-1;if(K&&(A=K[0],L=K[1],G=K[2]),f==8)for(var V=0;V<B;V++){var ee=V<<2,ae=V*3;Z[ee]=S[ae],Z[ee+1]=S[ae+1],Z[ee+2]=S[ae+2],Z[ee+3]=255,A!=-1&&S[ae]==A&&S[ae+1]==L&&S[ae+2]==G&&(Z[ee+3]=0)}if(f==16)for(var V=0;V<B;V++){var ee=V<<2,ae=V*6;Z[ee]=S[ae],Z[ee+1]=S[ae+2],Z[ee+2]=S[ae+4],Z[ee+3]=255,A!=-1&&D(S,ae)==A&&D(S,ae+2)==L&&D(S,ae+4)==G&&(Z[ee+3]=0)}}else if(l==3){var Se=C.tabs.PLTE,$e=C.tabs.tRNS,qe=$e?$e.length:0;if(f==1)for(var Pe=0;Pe<U;Pe++)for(var Ve=Pe*Y,Ie=Pe*E,V=0;V<E;V++){var ee=Ie+V<<2,Xe=S[Ve+(V>>3)]>>7-((V&7)<<0)&1,et=3*Xe;Z[ee]=Se[et],Z[ee+1]=Se[et+1],Z[ee+2]=Se[et+2],Z[ee+3]=Xe<qe?$e[Xe]:255}if(f==2)for(var Pe=0;Pe<U;Pe++)for(var Ve=Pe*Y,Ie=Pe*E,V=0;V<E;V++){var ee=Ie+V<<2,Xe=S[Ve+(V>>2)]>>6-((V&3)<<1)&3,et=3*Xe;Z[ee]=Se[et],Z[ee+1]=Se[et+1],Z[ee+2]=Se[et+2],Z[ee+3]=Xe<qe?$e[Xe]:255}if(f==4)for(var Pe=0;Pe<U;Pe++)for(var Ve=Pe*Y,Ie=Pe*E,V=0;V<E;V++){var ee=Ie+V<<2,Xe=S[Ve+(V>>1)]>>4-((V&1)<<2)&15,et=3*Xe;Z[ee]=Se[et],Z[ee+1]=Se[et+1],Z[ee+2]=Se[et+2],Z[ee+3]=Xe<qe?$e[Xe]:255}if(f==8)for(var V=0;V<B;V++){var ee=V<<2,Xe=S[V],et=3*Xe;Z[ee]=Se[et],Z[ee+1]=Se[et+1],Z[ee+2]=Se[et+2],Z[ee+3]=Xe<qe?$e[Xe]:255}}else if(l==4){if(f==8)for(var V=0;V<B;V++){var ee=V<<2,tt=V<<1,rt=S[tt];Z[ee]=rt,Z[ee+1]=rt,Z[ee+2]=rt,Z[ee+3]=S[tt+1]}if(f==16)for(var V=0;V<B;V++){var ee=V<<2,tt=V<<2,rt=S[tt];Z[ee]=rt,Z[ee+1]=rt,Z[ee+2]=rt,Z[ee+3]=S[tt+2]}}else if(l==0){var A=C.tabs.tRNS?C.tabs.tRNS:-1;if(f==1)for(var V=0;V<B;V++){var rt=255*(S[V>>3]>>7-(V&7)&1),ze=rt==A*255?0:255;T[V]=ze<<24|rt<<16|rt<<8|rt}if(f==2)for(var V=0;V<B;V++){var rt=85*(S[V>>2]>>6-((V&3)<<1)&3),ze=rt==A*85?0:255;T[V]=ze<<24|rt<<16|rt<<8|rt}if(f==4)for(var V=0;V<B;V++){var rt=17*(S[V>>1]>>4-((V&1)<<2)&15),ze=rt==A*17?0:255;T[V]=ze<<24|rt<<16|rt<<8|rt}if(f==8)for(var V=0;V<B;V++){var rt=S[V],ze=rt==A?0:255;T[V]=ze<<24|rt<<16|rt<<8|rt}if(f==16)for(var V=0;V<B;V++){var rt=S[V<<1],ze=D(S,V<<1)==A?0:255;T[V]=ze<<24|rt<<16|rt<<8|rt}}return Z},x.decode=function(S){for(var E=new Uint8Array(S),U=8,C=x._bin,B=C.readUshort,W=C.readUint,Y={tabs:{},frames:[]},Z=new Uint8Array(E.length),T=0,l,f=0,D=[137,80,78,71,13,10,26,10],I=0;I<8;I++)if(E[I]!=D[I])throw"The input is not a PNG file!";for(;U<E.length;){var V=C.readUint(E,U);U+=4;var K=C.readASCII(E,U,4);if(U+=4,K=="IHDR")x.decode._IHDR(E,U,Y);else if(K=="IDAT"){for(var I=0;I<V;I++)Z[T+I]=E[U+I];T+=V}else if(K=="acTL")Y.tabs[K]={num_frames:W(E,U),num_plays:W(E,U+4)},l=new Uint8Array(E.length);else if(K=="fcTL"){if(f!=0){var A=Y.frames[Y.frames.length-1];A.data=x.decode._decompress(Y,l.slice(0,f),A.rect.width,A.rect.height),f=0}var L={x:W(E,U+12),y:W(E,U+16),width:W(E,U+4),height:W(E,U+8)},G=B(E,U+22);G=B(E,U+20)/(G==0?100:G);var ee={rect:L,delay:Math.round(G*1e3),dispose:E[U+24],blend:E[U+25]};Y.frames.push(ee)}else if(K=="fdAT"){for(var I=0;I<V-4;I++)l[f+I]=E[U+I+4];f+=V-4}else if(K=="pHYs")Y.tabs[K]=[C.readUint(E,U),C.readUint(E,U+4),E[U+8]];else if(K=="cHRM"){Y.tabs[K]=[];for(var I=0;I<8;I++)Y.tabs[K].push(C.readUint(E,U+I*4))}else if(K=="tEXt"){Y.tabs[K]==null&&(Y.tabs[K]={});var ae=C.nextZero(E,U),Se=C.readASCII(E,U,ae-U),$e=C.readASCII(E,ae+1,U+V-ae-1);Y.tabs[K][Se]=$e}else if(K=="iTXt"){Y.tabs[K]==null&&(Y.tabs[K]={});var ae=0,qe=U;ae=C.nextZero(E,qe);var Se=C.readASCII(E,qe,ae-qe);qe=ae+1,E[qe],E[qe+1],qe+=2,ae=C.nextZero(E,qe),C.readASCII(E,qe,ae-qe),qe=ae+1,ae=C.nextZero(E,qe),C.readUTF8(E,qe,ae-qe),qe=ae+1;var $e=C.readUTF8(E,qe,V-(qe-U));Y.tabs[K][Se]=$e}else if(K=="PLTE")Y.tabs[K]=C.readBytes(E,U,V);else if(K=="hIST"){var Pe=Y.tabs.PLTE.length/3;Y.tabs[K]=[];for(var I=0;I<Pe;I++)Y.tabs[K].push(B(E,U+I*2))}else if(K=="tRNS")Y.ctype==3?Y.tabs[K]=C.readBytes(E,U,V):Y.ctype==0?Y.tabs[K]=B(E,U):Y.ctype==2&&(Y.tabs[K]=[B(E,U),B(E,U+2),B(E,U+4)]);else if(K=="gAMA")Y.tabs[K]=C.readUint(E,U)/1e5;else if(K=="sRGB")Y.tabs[K]=E[U];else if(K=="bKGD")Y.ctype==0||Y.ctype==4?Y.tabs[K]=[B(E,U)]:Y.ctype==2||Y.ctype==6?Y.tabs[K]=[B(E,U),B(E,U+2),B(E,U+4)]:Y.ctype==3&&(Y.tabs[K]=E[U]);else if(K=="IEND"){if(f!=0){var A=Y.frames[Y.frames.length-1];A.data=x.decode._decompress(Y,l.slice(0,f),A.rect.width,A.rect.height),f=0}Y.data=x.decode._decompress(Y,Z,Y.width,Y.height);break}U+=V,C.readUint(E,U),U+=4}return delete Y.compress,delete Y.interlace,delete Y.filter,Y},x.decode._decompress=function(S,E,U,C){return S.compress==0&&(E=x.decode._inflate(E)),S.interlace==0?E=x.decode._filterZero(E,S,0,U,C):S.interlace==1&&(E=x.decode._readInterlace(E,S)),E},x.decode._inflate=function(S){return k.inflate(S)},x.decode._readInterlace=function(S,E){for(var U=E.width,C=E.height,B=x.decode._getBPP(E),W=B>>3,Y=Math.ceil(U*B/8),Z=new Uint8Array(C*Y),T=0,l=[0,0,4,0,2,0,1],f=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],I=[8,8,4,4,2,2,1],V=0;V<7;){for(var K=D[V],A=I[V],L=0,G=0,ee=l[V];ee<C;)ee+=K,G++;for(var ae=f[V];ae<U;)ae+=A,L++;var Se=Math.ceil(L*B/8);x.decode._filterZero(S,E,T,L,G);for(var $e=0,qe=l[V];qe<C;){for(var Pe=f[V],Ve=T+$e*Se<<3;Pe<U;){if(B==1){var Ie=S[Ve>>3];Ie=Ie>>7-(Ve&7)&1,Z[qe*Y+(Pe>>3)]|=Ie<<7-((Pe&3)<<0)}if(B==2){var Ie=S[Ve>>3];Ie=Ie>>6-(Ve&7)&3,Z[qe*Y+(Pe>>2)]|=Ie<<6-((Pe&3)<<1)}if(B==4){var Ie=S[Ve>>3];Ie=Ie>>4-(Ve&7)&15,Z[qe*Y+(Pe>>1)]|=Ie<<4-((Pe&1)<<2)}if(B>=8)for(var Xe=qe*Y+Pe*W,et=0;et<W;et++)Z[Xe+et]=S[(Ve>>3)+et];Ve+=B,Pe+=A}$e++,qe+=K}L*G!=0&&(T+=G*(1+Se)),V=V+1}return Z},x.decode._getBPP=function(S){var E=[1,null,3,1,2,null,4][S.ctype];return E*S.depth},x.decode._filterZero=function(S,E,U,C,B){var W=x.decode._getBPP(E),Y=Math.ceil(C*W/8),Z=x.decode._paeth;W=Math.ceil(W/8);for(var T=0;T<B;T++){var l=U+T*Y,f=l+T+1,D=S[f-1];if(D==0)for(var I=0;I<Y;I++)S[l+I]=S[f+I];else if(D==1){for(var I=0;I<W;I++)S[l+I]=S[f+I];for(var I=W;I<Y;I++)S[l+I]=S[f+I]+S[l+I-W]&255}else if(T==0){for(var I=0;I<W;I++)S[l+I]=S[f+I];if(D==2)for(var I=W;I<Y;I++)S[l+I]=S[f+I]&255;if(D==3)for(var I=W;I<Y;I++)S[l+I]=S[f+I]+(S[l+I-W]>>1)&255;if(D==4)for(var I=W;I<Y;I++)S[l+I]=S[f+I]+Z(S[l+I-W],0,0)&255}else{if(D==2)for(var I=0;I<Y;I++)S[l+I]=S[f+I]+S[l+I-Y]&255;if(D==3){for(var I=0;I<W;I++)S[l+I]=S[f+I]+(S[l+I-Y]>>1)&255;for(var I=W;I<Y;I++)S[l+I]=S[f+I]+(S[l+I-Y]+S[l+I-W]>>1)&255}if(D==4){for(var I=0;I<W;I++)S[l+I]=S[f+I]+Z(0,S[l+I-Y],0)&255;for(var I=W;I<Y;I++)S[l+I]=S[f+I]+Z(S[l+I-W],S[l+I-Y],S[l+I-W-Y])&255}}}return S},x.decode._paeth=function(S,E,U){var C=S+E-U,B=Math.abs(C-S),W=Math.abs(C-E),Y=Math.abs(C-U);return B<=W&&B<=Y?S:W<=Y?E:U},x.decode._IHDR=function(S,E,U){var C=x._bin;U.width=C.readUint(S,E),E+=4,U.height=C.readUint(S,E),E+=4,U.depth=S[E],E++,U.ctype=S[E],E++,U.compress=S[E],E++,U.filter=S[E],E++,U.interlace=S[E],E++},x._bin={nextZero:function(S,E){for(;S[E]!=0;)E++;return E},readUshort:function(S,E){return S[E]<<8|S[E+1]},writeUshort:function(S,E,U){S[E]=U>>8&255,S[E+1]=U&255},readUint:function(S,E){return S[E]*16777216+(S[E+1]<<16|S[E+2]<<8|S[E+3])},writeUint:function(S,E,U){S[E]=U>>24&255,S[E+1]=U>>16&255,S[E+2]=U>>8&255,S[E+3]=U&255},readASCII:function(S,E,U){for(var C="",B=0;B<U;B++)C+=String.fromCharCode(S[E+B]);return C},writeASCII:function(S,E,U){for(var C=0;C<U.length;C++)S[E+C]=U.charCodeAt(C)},readBytes:function(S,E,U){for(var C=[],B=0;B<U;B++)C.push(S[E+B]);return C},pad:function(S){return S.length<2?"0"+S:S},readUTF8:function(S,E,U){for(var C="",B,W=0;W<U;W++)C+="%"+x._bin.pad(S[E+W].toString(16));try{B=decodeURIComponent(C)}catch{return x._bin.readASCII(S,E,U)}return B}},x._copyTile=function(S,E,U,C,B,W,Y,Z,T){for(var l=Math.min(E,B),f=Math.min(U,W),D=0,I=0,V=0;V<f;V++)for(var K=0;K<l;K++)if(Y>=0&&Z>=0?(D=V*E+K<<2,I=(Z+V)*B+Y+K<<2):(D=(-Z+V)*E-Y+K<<2,I=V*B+K<<2),T==0)C[I]=S[D],C[I+1]=S[D+1],C[I+2]=S[D+2],C[I+3]=S[D+3];else if(T==1){var A=S[D+3]*.00392156862745098,L=S[D]*A,G=S[D+1]*A,ee=S[D+2]*A,ae=C[I+3]*(1/255),Se=C[I]*ae,$e=C[I+1]*ae,qe=C[I+2]*ae,Pe=1-A,Ve=A+ae*Pe,Ie=Ve==0?0:1/Ve;C[I+3]=255*Ve,C[I+0]=(L+Se*Pe)*Ie,C[I+1]=(G+$e*Pe)*Ie,C[I+2]=(ee+qe*Pe)*Ie}else if(T==2){var A=S[D+3],L=S[D],G=S[D+1],ee=S[D+2],ae=C[I+3],Se=C[I],$e=C[I+1],qe=C[I+2];A==ae&&L==Se&&G==$e&&ee==qe?(C[I]=0,C[I+1]=0,C[I+2]=0,C[I+3]=0):(C[I]=L,C[I+1]=G,C[I+2]=ee,C[I+3]=A)}else if(T==3){var A=S[D+3],L=S[D],G=S[D+1],ee=S[D+2],ae=C[I+3],Se=C[I],$e=C[I+1],qe=C[I+2];if(A==ae&&L==Se&&G==$e&&ee==qe)continue;if(A<220&&ae>20)return!1}return!0},x.encode=function(S,E,U,C,B,W){C==null&&(C=0),W==null&&(W=!1);for(var Y=new Uint8Array(S[0].byteLength*S.length+100),Z=[137,80,78,71,13,10,26,10],T=0;T<8;T++)Y[T]=Z[T];var l=8,f=x._bin,D=x.crc.crc,I=f.writeUint,V=f.writeUshort,K=f.writeASCII,A=x.encode.compressPNG(S,E,U,C,W);I(Y,l,13),l+=4,K(Y,l,"IHDR"),l+=4,I(Y,l,E),l+=4,I(Y,l,U),l+=4,Y[l]=A.depth,l++,Y[l]=A.ctype,l++,Y[l]=0,l++,Y[l]=0,l++,Y[l]=0,l++,I(Y,l,D(Y,l-17,17)),l+=4,I(Y,l,1),l+=4,K(Y,l,"sRGB"),l+=4,Y[l]=1,l++,I(Y,l,D(Y,l-5,5)),l+=4;var L=S.length>1;if(L&&(I(Y,l,8),l+=4,K(Y,l,"acTL"),l+=4,I(Y,l,S.length),l+=4,I(Y,l,0),l+=4,I(Y,l,D(Y,l-12,12)),l+=4),A.ctype==3){var G=A.plte.length;I(Y,l,G*3),l+=4,K(Y,l,"PLTE"),l+=4;for(var T=0;T<G;T++){var ee=T*3,ae=A.plte[T],Se=ae&255,$e=ae>>8&255,qe=ae>>16&255;Y[l+ee+0]=Se,Y[l+ee+1]=$e,Y[l+ee+2]=qe}if(l+=G*3,I(Y,l,D(Y,l-G*3-4,G*3+4)),l+=4,A.gotAlpha){I(Y,l,G),l+=4,K(Y,l,"tRNS"),l+=4;for(var T=0;T<G;T++)Y[l+T]=A.plte[T]>>24&255;l+=G,I(Y,l,D(Y,l-G-4,G+4)),l+=4}}for(var Pe=0,Ve=0;Ve<A.frames.length;Ve++){var Ie=A.frames[Ve];L&&(I(Y,l,26),l+=4,K(Y,l,"fcTL"),l+=4,I(Y,l,Pe++),l+=4,I(Y,l,Ie.rect.width),l+=4,I(Y,l,Ie.rect.height),l+=4,I(Y,l,Ie.rect.x),l+=4,I(Y,l,Ie.rect.y),l+=4,V(Y,l,B[Ve]),l+=2,V(Y,l,1e3),l+=2,Y[l]=Ie.dispose,l++,Y[l]=Ie.blend,l++,I(Y,l,D(Y,l-30,30)),l+=4);var Xe=Ie.cimg,G=Xe.length;I(Y,l,G+(Ve==0?0:4)),l+=4;var et=l;K(Y,l,Ve==0?"IDAT":"fdAT"),l+=4,Ve!=0&&(I(Y,l,Pe++),l+=4);for(var T=0;T<G;T++)Y[l+T]=Xe[T];l+=G,I(Y,l,D(Y,et,l-et)),l+=4}return I(Y,l,0),l+=4,K(Y,l,"IEND"),l+=4,I(Y,l,D(Y,l-4,4)),l+=4,Y.buffer.slice(0,l)},x.encode.compressPNG=function(S,E,U,C,B){for(var W=x.encode.compress(S,E,U,C,!1,B),Y=0;Y<S.length;Y++){var Z=W.frames[Y];Z.rect.width;var T=Z.rect.height,l=Z.bpl,f=Z.bpp,D=new Uint8Array(T*l+T);Z.cimg=x.encode._filterZero(Z.img,T,f,l,D)}return W},x.encode.compress=function(S,E,U,C,B,W){W==null&&(W=!1);for(var Y=6,Z=8,T=4,l=255,f=0;f<S.length;f++)for(var D=new Uint8Array(S[f]),I=D.length,V=0;V<I;V+=4)l&=D[V+3];var K=l!=255,A={},L=[];if(S.length!=0&&(A[0]=0,L.push(0),C!=0&&C--),C!=0){var G=x.quantize(S,C,B);S=G.bufs;for(var V=0;V<G.plte.length;V++){var ee=G.plte[V].est.rgba;A[ee]==null&&(A[ee]=L.length,L.push(ee))}}else for(var f=0;f<S.length;f++)for(var ae=new Uint32Array(S[f]),I=ae.length,V=0;V<I;V++){var ee=ae[V];if((V<E||ee!=ae[V-1]&&ee!=ae[V-E])&&A[ee]==null&&(A[ee]=L.length,L.push(ee),L.length>=300))break}var Se=K?B:!1,$e=L.length;$e<=256&&W==!1&&($e<=2?Z=1:$e<=4?Z=2:$e<=16?Z=4:Z=8,B&&(Z=8),K=!0);for(var qe=[],f=0;f<S.length;f++){var Pe=new Uint8Array(S[f]),Ve=new Uint32Array(Pe.buffer),Ie=0,Xe=0,et=E,tt=U,rt=0;if(f!=0&&!Se){for(var ze=B||f==1||qe[qe.length-2].dispose==2?1:2,lt=0,bt=1e9,At=0;At<ze;At++){for(var Xr=new Uint8Array(S[f-1-At]),Vt=new Uint32Array(S[f-1-At]),Yt=E,er=U,lr=-1,yr=-1,$r=0;$r<U;$r++)for(var ia=0;ia<E;ia++){var V=$r*E+ia;Ve[V]!=Vt[V]&&(ia<Yt&&(Yt=ia),ia>lr&&(lr=ia),$r<er&&(er=$r),$r>yr&&(yr=$r))}var Sa=lr==-1?1:(lr-Yt+1)*(yr-er+1);Sa<bt&&(bt=Sa,lt=At,lr==-1?(Ie=Xe=0,et=tt=1):(Ie=Yt,Xe=er,et=lr-Yt+1,tt=yr-er+1))}var Xr=new Uint8Array(S[f-1-lt]);lt==1&&(qe[qe.length-1].dispose=2);var fr=new Uint8Array(et*tt*4);new Uint32Array(fr.buffer),x._copyTile(Xr,E,U,fr,et,tt,-Ie,-Xe,0),x._copyTile(Pe,E,U,fr,et,tt,-Ie,-Xe,3)?(x._copyTile(Pe,E,U,fr,et,tt,-Ie,-Xe,2),rt=1):(x._copyTile(Pe,E,U,fr,et,tt,-Ie,-Xe,0),rt=0),Pe=fr,Ve=new Uint32Array(Pe.buffer)}var Hr=4*et;if($e<=256&&W==!1){Hr=Math.ceil(Z*et/8);for(var fr=new Uint8Array(Hr*tt),$r=0;$r<tt;$r++){var V=$r*Hr,ya=$r*et;if(Z==8)for(var ia=0;ia<et;ia++)fr[V+ia]=A[Ve[ya+ia]];else if(Z==4)for(var ia=0;ia<et;ia++)fr[V+(ia>>1)]|=A[Ve[ya+ia]]<<4-(ia&1)*4;else if(Z==2)for(var ia=0;ia<et;ia++)fr[V+(ia>>2)]|=A[Ve[ya+ia]]<<6-(ia&3)*2;else if(Z==1)for(var ia=0;ia<et;ia++)fr[V+(ia>>3)]|=A[Ve[ya+ia]]<<7-(ia&7)*1}Pe=fr,Y=3,T=1}else if(K==!1&&S.length==1){for(var fr=new Uint8Array(et*tt*3),Ta=et*tt,V=0;V<Ta;V++){var ua=V*3,Ua=V*4;fr[ua]=Pe[Ua],fr[ua+1]=Pe[Ua+1],fr[ua+2]=Pe[Ua+2]}Pe=fr,Y=2,T=3,Hr=3*et}qe.push({rect:{x:Ie,y:Xe,width:et,height:tt},img:Pe,bpl:Hr,bpp:T,blend:rt,dispose:Se?1:0})}return{ctype:Y,depth:Z,plte:L,gotAlpha:K,frames:qe}},x.encode._filterZero=function(S,E,U,C,B){for(var W=[],Y=0;Y<5;Y++)if(!(E*C>5e5&&(Y==2||Y==3||Y==4))){for(var Z=0;Z<E;Z++)x.encode._filterLine(B,S,Z,C,U,Y);if(W.push(k.deflate(B)),U==1)break}for(var T,l=1e9,f=0;f<W.length;f++)W[f].length<l&&(T=f,l=W[f].length);return W[T]},x.encode._filterLine=function(S,E,U,C,B,W){var Y=U*C,Z=Y+U,T=x.decode._paeth;if(S[Z]=W,Z++,W==0)for(var l=0;l<C;l++)S[Z+l]=E[Y+l];else if(W==1){for(var l=0;l<B;l++)S[Z+l]=E[Y+l];for(var l=B;l<C;l++)S[Z+l]=E[Y+l]-E[Y+l-B]+256&255}else if(U==0){for(var l=0;l<B;l++)S[Z+l]=E[Y+l];if(W==2)for(var l=B;l<C;l++)S[Z+l]=E[Y+l];if(W==3)for(var l=B;l<C;l++)S[Z+l]=E[Y+l]-(E[Y+l-B]>>1)+256&255;if(W==4)for(var l=B;l<C;l++)S[Z+l]=E[Y+l]-T(E[Y+l-B],0,0)+256&255}else{if(W==2)for(var l=0;l<C;l++)S[Z+l]=E[Y+l]+256-E[Y+l-C]&255;if(W==3){for(var l=0;l<B;l++)S[Z+l]=E[Y+l]+256-(E[Y+l-C]>>1)&255;for(var l=B;l<C;l++)S[Z+l]=E[Y+l]+256-(E[Y+l-C]+E[Y+l-B]>>1)&255}if(W==4){for(var l=0;l<B;l++)S[Z+l]=E[Y+l]+256-T(0,E[Y+l-C],0)&255;for(var l=B;l<C;l++)S[Z+l]=E[Y+l]+256-T(E[Y+l-B],E[Y+l-C],E[Y+l-B-C])&255}}},x.crc={table:(function(){for(var S=new Uint32Array(256),E=0;E<256;E++){for(var U=E,C=0;C<8;C++)U&1?U=3988292384^U>>>1:U=U>>>1;S[E]=U}return S})(),update:function(S,E,U,C){for(var B=0;B<C;B++)S=x.crc.table[(S^E[U+B])&255]^S>>>8;return S},crc:function(S,E,U){return x.crc.update(4294967295,S,E,U)^4294967295}},x.quantize=function(S,E,U){for(var C=[],B=0,W=0;W<S.length;W++)C.push(x.encode.alphaMul(new Uint8Array(S[W]),U)),B+=S[W].byteLength;for(var Y=new Uint8Array(B),Z=new Uint32Array(Y.buffer),T=0,W=0;W<C.length;W++){for(var l=C[W],f=l.length,D=0;D<f;D++)Y[T+D]=l[D];T+=f}var I={i0:0,i1:Y.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=x.quantize.stats(Y,I.i0,I.i1),I.est=x.quantize.estats(I.bst);for(var V=[I];V.length<E;){for(var K=0,A=0,W=0;W<V.length;W++)V[W].est.L>K&&(K=V[W].est.L,A=W);if(K<.001)break;var L=V[A],G=x.quantize.splitPixels(Y,Z,L.i0,L.i1,L.est.e,L.est.eMq255),ee={i0:L.i0,i1:G,bst:null,est:null,tdst:0,left:null,right:null};ee.bst=x.quantize.stats(Y,ee.i0,ee.i1),ee.est=x.quantize.estats(ee.bst);var ae={i0:G,i1:L.i1,bst:null,est:null,tdst:0,left:null,right:null};ae.bst={R:[],m:[],N:L.bst.N-ee.bst.N};for(var W=0;W<16;W++)ae.bst.R[W]=L.bst.R[W]-ee.bst.R[W];for(var W=0;W<4;W++)ae.bst.m[W]=L.bst.m[W]-ee.bst.m[W];ae.est=x.quantize.estats(ae.bst),L.left=ee,L.right=ae,V[A]=ee,V.push(ae)}V.sort(function(ze,lt){return lt.bst.N-ze.bst.N});for(var Se=0;Se<C.length;Se++){for(var $e=x.quantize.planeDst,qe=new Uint8Array(C[Se].buffer),Pe=new Uint32Array(C[Se].buffer),Ve=qe.length,W=0;W<Ve;W+=4){for(var Ie=qe[W]*.00392156862745098,Xe=qe[W+1]*.00392156862745098,et=qe[W+2]*.00392156862745098,tt=qe[W+3]*.00392156862745098,rt=I;rt.left;)rt=$e(rt.est,Ie,Xe,et,tt)<=0?rt.left:rt.right;Pe[W>>2]=rt.est.rgba}C[Se]=Pe.buffer}return{bufs:C,plte:V}},x.quantize.getNearest=function(S,E,U,C,B){if(S.left==null)return S.tdst=x.quantize.dist(S.est.q,E,U,C,B),S;var W=x.quantize.planeDst(S.est,E,U,C,B),Y=S.left,Z=S.right;W>0&&(Y=S.right,Z=S.left);var T=x.quantize.getNearest(Y,E,U,C,B);if(T.tdst<=W*W)return T;var l=x.quantize.getNearest(Z,E,U,C,B);return l.tdst<T.tdst?l:T},x.quantize.planeDst=function(S,E,U,C,B){var W=S.e;return W[0]*E+W[1]*U+W[2]*C+W[3]*B-S.eMq},x.quantize.dist=function(S,E,U,C,B){var W=E-S[0],Y=U-S[1],Z=C-S[2],T=B-S[3];return W*W+Y*Y+Z*Z+T*T},x.quantize.splitPixels=function(S,E,U,C,B,W){var Y=x.quantize.vecDot;for(C-=4;U<C;){for(;Y(S,U,B)<=W;)U+=4;for(;Y(S,C,B)>W;)C-=4;if(U>=C)break;var Z=E[U>>2];E[U>>2]=E[C>>2],E[C>>2]=Z,U+=4,C-=4}for(;Y(S,U,B)>W;)U-=4;return U+4},x.quantize.vecDot=function(S,E,U){return S[E]*U[0]+S[E+1]*U[1]+S[E+2]*U[2]+S[E+3]*U[3]},x.quantize.stats=function(S,E,U){for(var C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B=[0,0,0,0],W=U-E>>2,Y=E;Y<U;Y+=4){var Z=S[Y]*.00392156862745098,T=S[Y+1]*(1/255),l=S[Y+2]*(1/255),f=S[Y+3]*(1/255);B[0]+=Z,B[1]+=T,B[2]+=l,B[3]+=f,C[0]+=Z*Z,C[1]+=Z*T,C[2]+=Z*l,C[3]+=Z*f,C[5]+=T*T,C[6]+=T*l,C[7]+=T*f,C[10]+=l*l,C[11]+=l*f,C[15]+=f*f}return C[4]=C[1],C[8]=C[2],C[12]=C[3],C[9]=C[6],C[13]=C[7],C[14]=C[11],{R:C,m:B,N:W}},x.quantize.estats=function(S){var E=S.R,U=S.m,C=S.N,B=U[0],W=U[1],Y=U[2],Z=U[3],T=C==0?0:1/C,l=[E[0]-B*B*T,E[1]-B*W*T,E[2]-B*Y*T,E[3]-B*Z*T,E[4]-W*B*T,E[5]-W*W*T,E[6]-W*Y*T,E[7]-W*Z*T,E[8]-Y*B*T,E[9]-Y*W*T,E[10]-Y*Y*T,E[11]-Y*Z*T,E[12]-Z*B*T,E[13]-Z*W*T,E[14]-Z*Y*T,E[15]-Z*Z*T],f=l,D=x.M4,I=[.5,.5,.5,.5],V=0,K=0;if(C!=0)for(var A=0;A<10&&(I=D.multVec(f,I),K=Math.sqrt(D.dot(I,I)),I=D.sml(1/K,I),!(Math.abs(K-V)<1e-9));A++)V=K;var L=[B*T,W*T,Y*T,Z*T],G=D.dot(D.sml(255,L),I),ee=L[3]<.001?0:1/L[3];return{Cov:l,q:L,e:I,L:V,eMq255:G,eMq:D.dot(I,L),rgba:(Math.round(255*L[3])<<24|Math.round(255*L[2]*ee)<<16|Math.round(255*L[1]*ee)<<8|Math.round(255*L[0]*ee)<<0)>>>0}},x.M4={multVec:function(S,E){return[S[0]*E[0]+S[1]*E[1]+S[2]*E[2]+S[3]*E[3],S[4]*E[0]+S[5]*E[1]+S[6]*E[2]+S[7]*E[3],S[8]*E[0]+S[9]*E[1]+S[10]*E[2]+S[11]*E[3],S[12]*E[0]+S[13]*E[1]+S[14]*E[2]+S[15]*E[3]]},dot:function(S,E){return S[0]*E[0]+S[1]*E[1]+S[2]*E[2]+S[3]*E[3]},sml:function(S,E){return[S*E[0],S*E[1],S*E[2],S*E[3]]}},x.encode.alphaMul=function(S,E){for(var U=new Uint8Array(S.length),C=S.length>>2,B=0;B<C;B++){var W=B<<2,Y=S[W+3];E&&(Y=Y<128?0:255);var Z=Y*(1/255);U[W+0]=S[W+0]*Z,U[W+1]=S[W+1]*Z,U[W+2]=S[W+2]*Z,U[W+3]=Y}return U}})(n,y)})()}),"./node_modules/upng-js/node_modules/pako/index.js":((t,i,a)=>{var n=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,y=a("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),x=a("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),k=a("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),S={};n(S,y,x,k),t.exports=S}),"./node_modules/upng-js/node_modules/pako/lib/deflate.js":((t,i,a)=>{var n=a("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),y=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),x=a("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),k=a("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),E=Object.prototype.toString,U=0,C=4,B=0,W=1,Y=2,Z=-1,T=0,l=8;function f(K){if(!(this instanceof f))return new f(K);this.options=y.assign({level:Z,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:T,to:""},K||{});var A=this.options;A.raw&&A.windowBits>0?A.windowBits=-A.windowBits:A.gzip&&A.windowBits>0&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var L=n.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(L!==B)throw new Error(k[L]);if(A.header&&n.deflateSetHeader(this.strm,A.header),A.dictionary){var G;if(typeof A.dictionary=="string"?G=x.string2buf(A.dictionary):E.call(A.dictionary)==="[object ArrayBuffer]"?G=new Uint8Array(A.dictionary):G=A.dictionary,L=n.deflateSetDictionary(this.strm,G),L!==B)throw new Error(k[L]);this._dict_set=!0}}f.prototype.push=function(K,A){var L=this.strm,G=this.options.chunkSize,ee,ae;if(this.ended)return!1;ae=A===~~A?A:A===!0?C:U,typeof K=="string"?L.input=x.string2buf(K):E.call(K)==="[object ArrayBuffer]"?L.input=new Uint8Array(K):L.input=K,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new y.Buf8(G),L.next_out=0,L.avail_out=G),ee=n.deflate(L,ae),ee!==W&&ee!==B)return this.onEnd(ee),this.ended=!0,!1;(L.avail_out===0||L.avail_in===0&&(ae===C||ae===Y))&&(this.options.to==="string"?this.onData(x.buf2binstring(y.shrinkBuf(L.output,L.next_out))):this.onData(y.shrinkBuf(L.output,L.next_out)))}while((L.avail_in>0||L.avail_out===0)&&ee!==W);return ae===C?(ee=n.deflateEnd(this.strm),this.onEnd(ee),this.ended=!0,ee===B):(ae===Y&&(this.onEnd(B),L.avail_out=0),!0)},f.prototype.onData=function(K){this.chunks.push(K)},f.prototype.onEnd=function(K){K===B&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=K,this.msg=this.strm.msg};function D(K,A){var L=new f(A);if(L.push(K,!0),L.err)throw L.msg||k[L.err];return L.result}function I(K,A){return A=A||{},A.raw=!0,D(K,A)}function V(K,A){return A=A||{},A.gzip=!0,D(K,A)}i.Deflate=f,i.deflate=D,i.deflateRaw=I,i.gzip=V}),"./node_modules/upng-js/node_modules/pako/lib/inflate.js":((t,i,a)=>{var n=a("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),y=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),x=a("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),k=a("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),E=a("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),U=a("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),C=Object.prototype.toString;function B(Z){if(!(this instanceof B))return new B(Z);this.options=y.assign({chunkSize:16384,windowBits:0,to:""},Z||{});var T=this.options;T.raw&&T.windowBits>=0&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),T.windowBits>=0&&T.windowBits<16&&!(Z&&Z.windowBits)&&(T.windowBits+=32),T.windowBits>15&&T.windowBits<48&&(T.windowBits&15||(T.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E,this.strm.avail_out=0;var l=n.inflateInit2(this.strm,T.windowBits);if(l!==k.Z_OK)throw new Error(S[l]);if(this.header=new U,n.inflateGetHeader(this.strm,this.header),T.dictionary&&(typeof T.dictionary=="string"?T.dictionary=x.string2buf(T.dictionary):C.call(T.dictionary)==="[object ArrayBuffer]"&&(T.dictionary=new Uint8Array(T.dictionary)),T.raw&&(l=n.inflateSetDictionary(this.strm,T.dictionary),l!==k.Z_OK)))throw new Error(S[l])}B.prototype.push=function(Z,T){var l=this.strm,f=this.options.chunkSize,D=this.options.dictionary,I,V,K,A,L,G=!1;if(this.ended)return!1;V=T===~~T?T:T===!0?k.Z_FINISH:k.Z_NO_FLUSH,typeof Z=="string"?l.input=x.binstring2buf(Z):C.call(Z)==="[object ArrayBuffer]"?l.input=new Uint8Array(Z):l.input=Z,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new y.Buf8(f),l.next_out=0,l.avail_out=f),I=n.inflate(l,k.Z_NO_FLUSH),I===k.Z_NEED_DICT&&D&&(I=n.inflateSetDictionary(this.strm,D)),I===k.Z_BUF_ERROR&&G===!0&&(I=k.Z_OK,G=!1),I!==k.Z_STREAM_END&&I!==k.Z_OK)return this.onEnd(I),this.ended=!0,!1;l.next_out&&(l.avail_out===0||I===k.Z_STREAM_END||l.avail_in===0&&(V===k.Z_FINISH||V===k.Z_SYNC_FLUSH))&&(this.options.to==="string"?(K=x.utf8border(l.output,l.next_out),A=l.next_out-K,L=x.buf2string(l.output,K),l.next_out=A,l.avail_out=f-A,A&&y.arraySet(l.output,l.output,K,A,0),this.onData(L)):this.onData(y.shrinkBuf(l.output,l.next_out))),l.avail_in===0&&l.avail_out===0&&(G=!0)}while((l.avail_in>0||l.avail_out===0)&&I!==k.Z_STREAM_END);return I===k.Z_STREAM_END&&(V=k.Z_FINISH),V===k.Z_FINISH?(I=n.inflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===k.Z_OK):(V===k.Z_SYNC_FLUSH&&(this.onEnd(k.Z_OK),l.avail_out=0),!0)},B.prototype.onData=function(Z){this.chunks.push(Z)},B.prototype.onEnd=function(Z){Z===k.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=Z,this.msg=this.strm.msg};function W(Z,T){var l=new B(T);if(l.push(Z,!0),l.err)throw l.msg||S[l.err];return l.result}function Y(Z,T){return T=T||{},T.raw=!0,W(Z,T)}i.Inflate=B,i.inflate=W,i.inflateRaw=Y,i.ungzip=W}),"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":((t,i)=>{var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(k,S){return Object.prototype.hasOwnProperty.call(k,S)}i.assign=function(k){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var E=S.shift();if(E){if(typeof E!="object")throw new TypeError(E+"must be non-object");for(var U in E)n(E,U)&&(k[U]=E[U])}}return k},i.shrinkBuf=function(k,S){return k.length===S?k:k.subarray?k.subarray(0,S):(k.length=S,k)};var y={arraySet:function(k,S,E,U,C){if(S.subarray&&k.subarray){k.set(S.subarray(E,E+U),C);return}for(var B=0;B<U;B++)k[C+B]=S[E+B]},flattenChunks:function(k){var S,E,U,C,B,W;for(U=0,S=0,E=k.length;S<E;S++)U+=k[S].length;for(W=new Uint8Array(U),C=0,S=0,E=k.length;S<E;S++)B=k[S],W.set(B,C),C+=B.length;return W}},x={arraySet:function(k,S,E,U,C){for(var B=0;B<U;B++)k[C+B]=S[E+B]},flattenChunks:function(k){return[].concat.apply([],k)}};i.setTyped=function(k){k?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,y)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,x))},i.setTyped(a)}),"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":((t,i,a)=>{var n=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=!0,x=!0;try{String.fromCharCode.apply(null,[0])}catch{y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{x=!1}for(var k=new n.Buf8(256),S=0;S<256;S++)k[S]=S>=252?6:S>=248?5:S>=240?4:S>=224?3:S>=192?2:1;k[254]=k[254]=1,i.string2buf=function(U){var C,B,W,Y,Z,T=U.length,l=0;for(Y=0;Y<T;Y++)B=U.charCodeAt(Y),(B&64512)===55296&&Y+1<T&&(W=U.charCodeAt(Y+1),(W&64512)===56320&&(B=65536+(B-55296<<10)+(W-56320),Y++)),l+=B<128?1:B<2048?2:B<65536?3:4;for(C=new n.Buf8(l),Z=0,Y=0;Z<l;Y++)B=U.charCodeAt(Y),(B&64512)===55296&&Y+1<T&&(W=U.charCodeAt(Y+1),(W&64512)===56320&&(B=65536+(B-55296<<10)+(W-56320),Y++)),B<128?C[Z++]=B:B<2048?(C[Z++]=192|B>>>6,C[Z++]=128|B&63):B<65536?(C[Z++]=224|B>>>12,C[Z++]=128|B>>>6&63,C[Z++]=128|B&63):(C[Z++]=240|B>>>18,C[Z++]=128|B>>>12&63,C[Z++]=128|B>>>6&63,C[Z++]=128|B&63);return C};function E(U,C){if(C<65534&&(U.subarray&&x||!U.subarray&&y))return String.fromCharCode.apply(null,n.shrinkBuf(U,C));for(var B="",W=0;W<C;W++)B+=String.fromCharCode(U[W]);return B}i.buf2binstring=function(U){return E(U,U.length)},i.binstring2buf=function(U){for(var C=new n.Buf8(U.length),B=0,W=C.length;B<W;B++)C[B]=U.charCodeAt(B);return C},i.buf2string=function(U,C){var B,W,Y,Z,T=C||U.length,l=new Array(T*2);for(W=0,B=0;B<T;){if(Y=U[B++],Y<128){l[W++]=Y;continue}if(Z=k[Y],Z>4){l[W++]=65533,B+=Z-1;continue}for(Y&=Z===2?31:Z===3?15:7;Z>1&&B<T;)Y=Y<<6|U[B++]&63,Z--;if(Z>1){l[W++]=65533;continue}Y<65536?l[W++]=Y:(Y-=65536,l[W++]=55296|Y>>10&1023,l[W++]=56320|Y&1023)}return E(l,W)},i.utf8border=function(U,C){var B;for(C=C||U.length,C>U.length&&(C=U.length),B=C-1;B>=0&&(U[B]&192)===128;)B--;return B<0||B===0?C:B+k[U[B]]>C?B:C}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":(t=>{function i(a,n,y,x){for(var k=a&65535|0,S=a>>>16&65535|0,E=0;y!==0;){E=y>2e3?2e3:y,y-=E;do k=k+n[x++]|0,S=S+k|0;while(--E);k%=65521,S%=65521}return k|S<<16|0}t.exports=i}),"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":(t=>{t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":(t=>{function i(){for(var y,x=[],k=0;k<256;k++){y=k;for(var S=0;S<8;S++)y=y&1?3988292384^y>>>1:y>>>1;x[k]=y}return x}var a=i();function n(y,x,k,S){var E=a,U=S+k;y^=-1;for(var C=S;C<U;C++)y=y>>>8^E[(y^x[C])&255];return y^-1}t.exports=n}),"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":((t,i,a)=>{var n=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=a("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),x=a("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),k=a("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),E=0,U=1,C=3,B=4,W=5,Y=0,Z=1,T=-2,l=-3,f=-5,D=-1,I=1,V=2,K=3,A=4,L=0,G=2,ee=8,ae=9,Se=15,$e=8,qe=29,Pe=256,Ve=Pe+1+qe,Ie=30,Xe=19,et=2*Ve+1,tt=15,rt=3,ze=258,lt=ze+rt+1,bt=32,At=42,Vt=69,Yt=73,er=91,lr=103,yr=113,$r=666,ia=1,Sa=2,Xr=3,fr=4,Hr=3;function ya(Qe,ea){return Qe.msg=S[ea],ea}function Ta(Qe){return(Qe<<1)-(Qe>4?9:0)}function ua(Qe){for(var ea=Qe.length;--ea>=0;)Qe[ea]=0}function Ua(Qe){var ea=Qe.state,Vr=ea.pending;Vr>Qe.avail_out&&(Vr=Qe.avail_out),Vr!==0&&(n.arraySet(Qe.output,ea.pending_buf,ea.pending_out,Vr,Qe.next_out),Qe.next_out+=Vr,ea.pending_out+=Vr,Qe.total_out+=Vr,Qe.avail_out-=Vr,ea.pending-=Vr,ea.pending===0&&(ea.pending_out=0))}function Ya(Qe,ea){y._tr_flush_block(Qe,Qe.block_start>=0?Qe.block_start:-1,Qe.strstart-Qe.block_start,ea),Qe.block_start=Qe.strstart,Ua(Qe.strm)}function Ia(Qe,ea){Qe.pending_buf[Qe.pending++]=ea}function Na(Qe,ea){Qe.pending_buf[Qe.pending++]=ea>>>8&255,Qe.pending_buf[Qe.pending++]=ea&255}function Ra(Qe,ea,Vr,It){var hr=Qe.avail_in;return hr>It&&(hr=It),hr===0?0:(Qe.avail_in-=hr,n.arraySet(ea,Qe.input,Qe.next_in,hr,Vr),Qe.state.wrap===1?Qe.adler=x(Qe.adler,ea,hr,Vr):Qe.state.wrap===2&&(Qe.adler=k(Qe.adler,ea,hr,Vr)),Qe.next_in+=hr,Qe.total_in+=hr,hr)}function oa(Qe,ea){var Vr=Qe.max_chain_length,It=Qe.strstart,hr,sa,Qa=Qe.prev_length,an=Qe.nice_match,sn=Qe.strstart>Qe.w_size-lt?Qe.strstart-(Qe.w_size-lt):0,An=Qe.window,Ti=Qe.w_mask,zn=Qe.prev,Ln=Qe.strstart+ze,Hn=An[It+Qa-1],bi=An[It+Qa];Qe.prev_length>=Qe.good_match&&(Vr>>=2),an>Qe.lookahead&&(an=Qe.lookahead);do if(hr=ea,!(An[hr+Qa]!==bi||An[hr+Qa-1]!==Hn||An[hr]!==An[It]||An[++hr]!==An[It+1])){It+=2,hr++;do;while(An[++It]===An[++hr]&&An[++It]===An[++hr]&&An[++It]===An[++hr]&&An[++It]===An[++hr]&&An[++It]===An[++hr]&&An[++It]===An[++hr]&&An[++It]===An[++hr]&&An[++It]===An[++hr]&&It<Ln);if(sa=ze-(Ln-It),It=Ln-ze,sa>Qa){if(Qe.match_start=ea,Qa=sa,sa>=an)break;Hn=An[It+Qa-1],bi=An[It+Qa]}}while((ea=zn[ea&Ti])>sn&&--Vr!==0);return Qa<=Qe.lookahead?Qa:Qe.lookahead}function rn(Qe){var ea=Qe.w_size,Vr,It,hr,sa,Qa;do{if(sa=Qe.window_size-Qe.lookahead-Qe.strstart,Qe.strstart>=ea+(ea-lt)){n.arraySet(Qe.window,Qe.window,ea,ea,0),Qe.match_start-=ea,Qe.strstart-=ea,Qe.block_start-=ea,It=Qe.hash_size,Vr=It;do hr=Qe.head[--Vr],Qe.head[Vr]=hr>=ea?hr-ea:0;while(--It);It=ea,Vr=It;do hr=Qe.prev[--Vr],Qe.prev[Vr]=hr>=ea?hr-ea:0;while(--It);sa+=ea}if(Qe.strm.avail_in===0)break;if(It=Ra(Qe.strm,Qe.window,Qe.strstart+Qe.lookahead,sa),Qe.lookahead+=It,Qe.lookahead+Qe.insert>=rt)for(Qa=Qe.strstart-Qe.insert,Qe.ins_h=Qe.window[Qa],Qe.ins_h=(Qe.ins_h<<Qe.hash_shift^Qe.window[Qa+1])&Qe.hash_mask;Qe.insert&&(Qe.ins_h=(Qe.ins_h<<Qe.hash_shift^Qe.window[Qa+rt-1])&Qe.hash_mask,Qe.prev[Qa&Qe.w_mask]=Qe.head[Qe.ins_h],Qe.head[Qe.ins_h]=Qa,Qa++,Qe.insert--,!(Qe.lookahead+Qe.insert<rt)););}while(Qe.lookahead<lt&&Qe.strm.avail_in!==0)}function Za(Qe,ea){var Vr=65535;for(Vr>Qe.pending_buf_size-5&&(Vr=Qe.pending_buf_size-5);;){if(Qe.lookahead<=1){if(rn(Qe),Qe.lookahead===0&&ea===E)return ia;if(Qe.lookahead===0)break}Qe.strstart+=Qe.lookahead,Qe.lookahead=0;var It=Qe.block_start+Vr;if((Qe.strstart===0||Qe.strstart>=It)&&(Qe.lookahead=Qe.strstart-It,Qe.strstart=It,Ya(Qe,!1),Qe.strm.avail_out===0)||Qe.strstart-Qe.block_start>=Qe.w_size-lt&&(Ya(Qe,!1),Qe.strm.avail_out===0))return ia}return Qe.insert=0,ea===B?(Ya(Qe,!0),Qe.strm.avail_out===0?Xr:fr):(Qe.strstart>Qe.block_start&&(Ya(Qe,!1),Qe.strm.avail_out),ia)}function Nt(Qe,ea){for(var Vr,It;;){if(Qe.lookahead<lt){if(rn(Qe),Qe.lookahead<lt&&ea===E)return ia;if(Qe.lookahead===0)break}if(Vr=0,Qe.lookahead>=rt&&(Qe.ins_h=(Qe.ins_h<<Qe.hash_shift^Qe.window[Qe.strstart+rt-1])&Qe.hash_mask,Vr=Qe.prev[Qe.strstart&Qe.w_mask]=Qe.head[Qe.ins_h],Qe.head[Qe.ins_h]=Qe.strstart),Vr!==0&&Qe.strstart-Vr<=Qe.w_size-lt&&(Qe.match_length=oa(Qe,Vr)),Qe.match_length>=rt)if(It=y._tr_tally(Qe,Qe.strstart-Qe.match_start,Qe.match_length-rt),Qe.lookahead-=Qe.match_length,Qe.match_length<=Qe.max_lazy_match&&Qe.lookahead>=rt){Qe.match_length--;do Qe.strstart++,Qe.ins_h=(Qe.ins_h<<Qe.hash_shift^Qe.window[Qe.strstart+rt-1])&Qe.hash_mask,Vr=Qe.prev[Qe.strstart&Qe.w_mask]=Qe.head[Qe.ins_h],Qe.head[Qe.ins_h]=Qe.strstart;while(--Qe.match_length!==0);Qe.strstart++}else Qe.strstart+=Qe.match_length,Qe.match_length=0,Qe.ins_h=Qe.window[Qe.strstart],Qe.ins_h=(Qe.ins_h<<Qe.hash_shift^Qe.window[Qe.strstart+1])&Qe.hash_mask;else It=y._tr_tally(Qe,0,Qe.window[Qe.strstart]),Qe.lookahead--,Qe.strstart++;if(It&&(Ya(Qe,!1),Qe.strm.avail_out===0))return ia}return Qe.insert=Qe.strstart<rt-1?Qe.strstart:rt-1,ea===B?(Ya(Qe,!0),Qe.strm.avail_out===0?Xr:fr):Qe.last_lit&&(Ya(Qe,!1),Qe.strm.avail_out===0)?ia:Sa}function Gt(Qe,ea){for(var Vr,It,hr;;){if(Qe.lookahead<lt){if(rn(Qe),Qe.lookahead<lt&&ea===E)return ia;if(Qe.lookahead===0)break}if(Vr=0,Qe.lookahead>=rt&&(Qe.ins_h=(Qe.ins_h<<Qe.hash_shift^Qe.window[Qe.strstart+rt-1])&Qe.hash_mask,Vr=Qe.prev[Qe.strstart&Qe.w_mask]=Qe.head[Qe.ins_h],Qe.head[Qe.ins_h]=Qe.strstart),Qe.prev_length=Qe.match_length,Qe.prev_match=Qe.match_start,Qe.match_length=rt-1,Vr!==0&&Qe.prev_length<Qe.max_lazy_match&&Qe.strstart-Vr<=Qe.w_size-lt&&(Qe.match_length=oa(Qe,Vr),Qe.match_length<=5&&(Qe.strategy===I||Qe.match_length===rt&&Qe.strstart-Qe.match_start>4096)&&(Qe.match_length=rt-1)),Qe.prev_length>=rt&&Qe.match_length<=Qe.prev_length){hr=Qe.strstart+Qe.lookahead-rt,It=y._tr_tally(Qe,Qe.strstart-1-Qe.prev_match,Qe.prev_length-rt),Qe.lookahead-=Qe.prev_length-1,Qe.prev_length-=2;do++Qe.strstart<=hr&&(Qe.ins_h=(Qe.ins_h<<Qe.hash_shift^Qe.window[Qe.strstart+rt-1])&Qe.hash_mask,Vr=Qe.prev[Qe.strstart&Qe.w_mask]=Qe.head[Qe.ins_h],Qe.head[Qe.ins_h]=Qe.strstart);while(--Qe.prev_length!==0);if(Qe.match_available=0,Qe.match_length=rt-1,Qe.strstart++,It&&(Ya(Qe,!1),Qe.strm.avail_out===0))return ia}else if(Qe.match_available){if(It=y._tr_tally(Qe,0,Qe.window[Qe.strstart-1]),It&&Ya(Qe,!1),Qe.strstart++,Qe.lookahead--,Qe.strm.avail_out===0)return ia}else Qe.match_available=1,Qe.strstart++,Qe.lookahead--}return Qe.match_available&&(It=y._tr_tally(Qe,0,Qe.window[Qe.strstart-1]),Qe.match_available=0),Qe.insert=Qe.strstart<rt-1?Qe.strstart:rt-1,ea===B?(Ya(Qe,!0),Qe.strm.avail_out===0?Xr:fr):Qe.last_lit&&(Ya(Qe,!1),Qe.strm.avail_out===0)?ia:Sa}function ur(Qe,ea){for(var Vr,It,hr,sa,Qa=Qe.window;;){if(Qe.lookahead<=ze){if(rn(Qe),Qe.lookahead<=ze&&ea===E)return ia;if(Qe.lookahead===0)break}if(Qe.match_length=0,Qe.lookahead>=rt&&Qe.strstart>0&&(hr=Qe.strstart-1,It=Qa[hr],It===Qa[++hr]&&It===Qa[++hr]&&It===Qa[++hr])){sa=Qe.strstart+ze;do;while(It===Qa[++hr]&&It===Qa[++hr]&&It===Qa[++hr]&&It===Qa[++hr]&&It===Qa[++hr]&&It===Qa[++hr]&&It===Qa[++hr]&&It===Qa[++hr]&&hr<sa);Qe.match_length=ze-(sa-hr),Qe.match_length>Qe.lookahead&&(Qe.match_length=Qe.lookahead)}if(Qe.match_length>=rt?(Vr=y._tr_tally(Qe,1,Qe.match_length-rt),Qe.lookahead-=Qe.match_length,Qe.strstart+=Qe.match_length,Qe.match_length=0):(Vr=y._tr_tally(Qe,0,Qe.window[Qe.strstart]),Qe.lookahead--,Qe.strstart++),Vr&&(Ya(Qe,!1),Qe.strm.avail_out===0))return ia}return Qe.insert=0,ea===B?(Ya(Qe,!0),Qe.strm.avail_out===0?Xr:fr):Qe.last_lit&&(Ya(Qe,!1),Qe.strm.avail_out===0)?ia:Sa}function Qr(Qe,ea){for(var Vr;;){if(Qe.lookahead===0&&(rn(Qe),Qe.lookahead===0)){if(ea===E)return ia;break}if(Qe.match_length=0,Vr=y._tr_tally(Qe,0,Qe.window[Qe.strstart]),Qe.lookahead--,Qe.strstart++,Vr&&(Ya(Qe,!1),Qe.strm.avail_out===0))return ia}return Qe.insert=0,ea===B?(Ya(Qe,!0),Qe.strm.avail_out===0?Xr:fr):Qe.last_lit&&(Ya(Qe,!1),Qe.strm.avail_out===0)?ia:Sa}function Dr(Qe,ea,Vr,It,hr){this.good_length=Qe,this.max_lazy=ea,this.nice_length=Vr,this.max_chain=It,this.func=hr}var Ea;Ea=[new Dr(0,0,0,0,Za),new Dr(4,4,8,4,Nt),new Dr(4,5,16,8,Nt),new Dr(4,6,32,32,Nt),new Dr(4,4,16,16,Gt),new Dr(8,16,32,32,Gt),new Dr(8,16,128,128,Gt),new Dr(8,32,128,256,Gt),new Dr(32,128,258,1024,Gt),new Dr(32,258,258,4096,Gt)];function da(Qe){Qe.window_size=2*Qe.w_size,ua(Qe.head),Qe.max_lazy_match=Ea[Qe.level].max_lazy,Qe.good_match=Ea[Qe.level].good_length,Qe.nice_match=Ea[Qe.level].nice_length,Qe.max_chain_length=Ea[Qe.level].max_chain,Qe.strstart=0,Qe.block_start=0,Qe.lookahead=0,Qe.insert=0,Qe.match_length=Qe.prev_length=rt-1,Qe.match_available=0,Qe.ins_h=0}function Tt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ee,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(et*2),this.dyn_dtree=new n.Buf16((2*Ie+1)*2),this.bl_tree=new n.Buf16((2*Xe+1)*2),ua(this.dyn_ltree),ua(this.dyn_dtree),ua(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(tt+1),this.heap=new n.Buf16(2*Ve+1),ua(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*Ve+1),ua(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Lr(Qe){var ea;return!Qe||!Qe.state?ya(Qe,T):(Qe.total_in=Qe.total_out=0,Qe.data_type=G,ea=Qe.state,ea.pending=0,ea.pending_out=0,ea.wrap<0&&(ea.wrap=-ea.wrap),ea.status=ea.wrap?At:yr,Qe.adler=ea.wrap===2?0:1,ea.last_flush=E,y._tr_init(ea),Y)}function Gr(Qe){var ea=Lr(Qe);return ea===Y&&da(Qe.state),ea}function wa(Qe,ea){return!Qe||!Qe.state||Qe.state.wrap!==2?T:(Qe.state.gzhead=ea,Y)}function Rr(Qe,ea,Vr,It,hr,sa){if(!Qe)return T;var Qa=1;if(ea===D&&(ea=6),It<0?(Qa=0,It=-It):It>15&&(Qa=2,It-=16),hr<1||hr>ae||Vr!==ee||It<8||It>15||ea<0||ea>9||sa<0||sa>A)return ya(Qe,T);It===8&&(It=9);var an=new Tt;return Qe.state=an,an.strm=Qe,an.wrap=Qa,an.gzhead=null,an.w_bits=It,an.w_size=1<<an.w_bits,an.w_mask=an.w_size-1,an.hash_bits=hr+7,an.hash_size=1<<an.hash_bits,an.hash_mask=an.hash_size-1,an.hash_shift=~~((an.hash_bits+rt-1)/rt),an.window=new n.Buf8(an.w_size*2),an.head=new n.Buf16(an.hash_size),an.prev=new n.Buf16(an.w_size),an.lit_bufsize=1<<hr+6,an.pending_buf_size=an.lit_bufsize*4,an.pending_buf=new n.Buf8(an.pending_buf_size),an.d_buf=1*an.lit_bufsize,an.l_buf=3*an.lit_bufsize,an.level=ea,an.strategy=sa,an.method=Vr,Gr(Qe)}function ga(Qe,ea){return Rr(Qe,ea,ee,Se,$e,L)}function kt(Qe,ea){var Vr,It,hr,sa;if(!Qe||!Qe.state||ea>W||ea<0)return Qe?ya(Qe,T):T;if(It=Qe.state,!Qe.output||!Qe.input&&Qe.avail_in!==0||It.status===$r&&ea!==B)return ya(Qe,Qe.avail_out===0?f:T);if(It.strm=Qe,Vr=It.last_flush,It.last_flush=ea,It.status===At)if(It.wrap===2)Qe.adler=0,Ia(It,31),Ia(It,139),Ia(It,8),It.gzhead?(Ia(It,(It.gzhead.text?1:0)+(It.gzhead.hcrc?2:0)+(It.gzhead.extra?4:0)+(It.gzhead.name?8:0)+(It.gzhead.comment?16:0)),Ia(It,It.gzhead.time&255),Ia(It,It.gzhead.time>>8&255),Ia(It,It.gzhead.time>>16&255),Ia(It,It.gzhead.time>>24&255),Ia(It,It.level===9?2:It.strategy>=V||It.level<2?4:0),Ia(It,It.gzhead.os&255),It.gzhead.extra&&It.gzhead.extra.length&&(Ia(It,It.gzhead.extra.length&255),Ia(It,It.gzhead.extra.length>>8&255)),It.gzhead.hcrc&&(Qe.adler=k(Qe.adler,It.pending_buf,It.pending,0)),It.gzindex=0,It.status=Vt):(Ia(It,0),Ia(It,0),Ia(It,0),Ia(It,0),Ia(It,0),Ia(It,It.level===9?2:It.strategy>=V||It.level<2?4:0),Ia(It,Hr),It.status=yr);else{var Qa=ee+(It.w_bits-8<<4)<<8,an=-1;It.strategy>=V||It.level<2?an=0:It.level<6?an=1:It.level===6?an=2:an=3,Qa|=an<<6,It.strstart!==0&&(Qa|=bt),Qa+=31-Qa%31,It.status=yr,Na(It,Qa),It.strstart!==0&&(Na(It,Qe.adler>>>16),Na(It,Qe.adler&65535)),Qe.adler=1}if(It.status===Vt)if(It.gzhead.extra){for(hr=It.pending;It.gzindex<(It.gzhead.extra.length&65535)&&!(It.pending===It.pending_buf_size&&(It.gzhead.hcrc&&It.pending>hr&&(Qe.adler=k(Qe.adler,It.pending_buf,It.pending-hr,hr)),Ua(Qe),hr=It.pending,It.pending===It.pending_buf_size));)Ia(It,It.gzhead.extra[It.gzindex]&255),It.gzindex++;It.gzhead.hcrc&&It.pending>hr&&(Qe.adler=k(Qe.adler,It.pending_buf,It.pending-hr,hr)),It.gzindex===It.gzhead.extra.length&&(It.gzindex=0,It.status=Yt)}else It.status=Yt;if(It.status===Yt)if(It.gzhead.name){hr=It.pending;do{if(It.pending===It.pending_buf_size&&(It.gzhead.hcrc&&It.pending>hr&&(Qe.adler=k(Qe.adler,It.pending_buf,It.pending-hr,hr)),Ua(Qe),hr=It.pending,It.pending===It.pending_buf_size)){sa=1;break}It.gzindex<It.gzhead.name.length?sa=It.gzhead.name.charCodeAt(It.gzindex++)&255:sa=0,Ia(It,sa)}while(sa!==0);It.gzhead.hcrc&&It.pending>hr&&(Qe.adler=k(Qe.adler,It.pending_buf,It.pending-hr,hr)),sa===0&&(It.gzindex=0,It.status=er)}else It.status=er;if(It.status===er)if(It.gzhead.comment){hr=It.pending;do{if(It.pending===It.pending_buf_size&&(It.gzhead.hcrc&&It.pending>hr&&(Qe.adler=k(Qe.adler,It.pending_buf,It.pending-hr,hr)),Ua(Qe),hr=It.pending,It.pending===It.pending_buf_size)){sa=1;break}It.gzindex<It.gzhead.comment.length?sa=It.gzhead.comment.charCodeAt(It.gzindex++)&255:sa=0,Ia(It,sa)}while(sa!==0);It.gzhead.hcrc&&It.pending>hr&&(Qe.adler=k(Qe.adler,It.pending_buf,It.pending-hr,hr)),sa===0&&(It.status=lr)}else It.status=lr;if(It.status===lr&&(It.gzhead.hcrc?(It.pending+2>It.pending_buf_size&&Ua(Qe),It.pending+2<=It.pending_buf_size&&(Ia(It,Qe.adler&255),Ia(It,Qe.adler>>8&255),Qe.adler=0,It.status=yr)):It.status=yr),It.pending!==0){if(Ua(Qe),Qe.avail_out===0)return It.last_flush=-1,Y}else if(Qe.avail_in===0&&Ta(ea)<=Ta(Vr)&&ea!==B)return ya(Qe,f);if(It.status===$r&&Qe.avail_in!==0)return ya(Qe,f);if(Qe.avail_in!==0||It.lookahead!==0||ea!==E&&It.status!==$r){var sn=It.strategy===V?Qr(It,ea):It.strategy===K?ur(It,ea):Ea[It.level].func(It,ea);if((sn===Xr||sn===fr)&&(It.status=$r),sn===ia||sn===Xr)return Qe.avail_out===0&&(It.last_flush=-1),Y;if(sn===Sa&&(ea===U?y._tr_align(It):ea!==W&&(y._tr_stored_block(It,0,0,!1),ea===C&&(ua(It.head),It.lookahead===0&&(It.strstart=0,It.block_start=0,It.insert=0))),Ua(Qe),Qe.avail_out===0))return It.last_flush=-1,Y}return ea!==B?Y:It.wrap<=0?Z:(It.wrap===2?(Ia(It,Qe.adler&255),Ia(It,Qe.adler>>8&255),Ia(It,Qe.adler>>16&255),Ia(It,Qe.adler>>24&255),Ia(It,Qe.total_in&255),Ia(It,Qe.total_in>>8&255),Ia(It,Qe.total_in>>16&255),Ia(It,Qe.total_in>>24&255)):(Na(It,Qe.adler>>>16),Na(It,Qe.adler&65535)),Ua(Qe),It.wrap>0&&(It.wrap=-It.wrap),It.pending!==0?Y:Z)}function ha(Qe){var ea;return!Qe||!Qe.state?T:(ea=Qe.state.status,ea!==At&&ea!==Vt&&ea!==Yt&&ea!==er&&ea!==lr&&ea!==yr&&ea!==$r?ya(Qe,T):(Qe.state=null,ea===yr?ya(Qe,l):Y))}function Pa(Qe,ea){var Vr=ea.length,It,hr,sa,Qa,an,sn,An,Ti;if(!Qe||!Qe.state||(It=Qe.state,Qa=It.wrap,Qa===2||Qa===1&&It.status!==At||It.lookahead))return T;for(Qa===1&&(Qe.adler=x(Qe.adler,ea,Vr,0)),It.wrap=0,Vr>=It.w_size&&(Qa===0&&(ua(It.head),It.strstart=0,It.block_start=0,It.insert=0),Ti=new n.Buf8(It.w_size),n.arraySet(Ti,ea,Vr-It.w_size,It.w_size,0),ea=Ti,Vr=It.w_size),an=Qe.avail_in,sn=Qe.next_in,An=Qe.input,Qe.avail_in=Vr,Qe.next_in=0,Qe.input=ea,rn(It);It.lookahead>=rt;){hr=It.strstart,sa=It.lookahead-(rt-1);do It.ins_h=(It.ins_h<<It.hash_shift^It.window[hr+rt-1])&It.hash_mask,It.prev[hr&It.w_mask]=It.head[It.ins_h],It.head[It.ins_h]=hr,hr++;while(--sa);It.strstart=hr,It.lookahead=rt-1,rn(It)}return It.strstart+=It.lookahead,It.block_start=It.strstart,It.insert=It.lookahead,It.lookahead=0,It.match_length=It.prev_length=rt-1,It.match_available=0,Qe.next_in=sn,Qe.input=An,Qe.avail_in=an,It.wrap=Qa,Y}i.deflateInit=ga,i.deflateInit2=Rr,i.deflateReset=Gr,i.deflateResetKeep=Lr,i.deflateSetHeader=wa,i.deflate=kt,i.deflateEnd=ha,i.deflateSetDictionary=Pa,i.deflateInfo="pako deflate (from Nodeca project)"}),"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":(t=>{function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=i}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":(t=>{var i=30,a=12;t.exports=function(n,y){var x,k,S,E,U,C,B,W,Y,Z,T,l,f,D,I,V,K,A,L,G,ee,ae,Se,$e,qe;x=n.state,k=n.next_in,$e=n.input,S=k+(n.avail_in-5),E=n.next_out,qe=n.output,U=E-(y-n.avail_out),C=E+(n.avail_out-257),B=x.dmax,W=x.wsize,Y=x.whave,Z=x.wnext,T=x.window,l=x.hold,f=x.bits,D=x.lencode,I=x.distcode,V=(1<<x.lenbits)-1,K=(1<<x.distbits)-1;e:do{f<15&&(l+=$e[k++]<<f,f+=8,l+=$e[k++]<<f,f+=8),A=D[l&V];t:for(;;){if(L=A>>>24,l>>>=L,f-=L,L=A>>>16&255,L===0)qe[E++]=A&65535;else if(L&16){G=A&65535,L&=15,L&&(f<L&&(l+=$e[k++]<<f,f+=8),G+=l&(1<<L)-1,l>>>=L,f-=L),f<15&&(l+=$e[k++]<<f,f+=8,l+=$e[k++]<<f,f+=8),A=I[l&K];r:for(;;){if(L=A>>>24,l>>>=L,f-=L,L=A>>>16&255,L&16){if(ee=A&65535,L&=15,f<L&&(l+=$e[k++]<<f,f+=8,f<L&&(l+=$e[k++]<<f,f+=8)),ee+=l&(1<<L)-1,ee>B){n.msg="invalid distance too far back",x.mode=i;break e}if(l>>>=L,f-=L,L=E-U,ee>L){if(L=ee-L,L>Y&&x.sane){n.msg="invalid distance too far back",x.mode=i;break e}if(ae=0,Se=T,Z===0){if(ae+=W-L,L<G){G-=L;do qe[E++]=T[ae++];while(--L);ae=E-ee,Se=qe}}else if(Z<L){if(ae+=W+Z-L,L-=Z,L<G){G-=L;do qe[E++]=T[ae++];while(--L);if(ae=0,Z<G){L=Z,G-=L;do qe[E++]=T[ae++];while(--L);ae=E-ee,Se=qe}}}else if(ae+=Z-L,L<G){G-=L;do qe[E++]=T[ae++];while(--L);ae=E-ee,Se=qe}for(;G>2;)qe[E++]=Se[ae++],qe[E++]=Se[ae++],qe[E++]=Se[ae++],G-=3;G&&(qe[E++]=Se[ae++],G>1&&(qe[E++]=Se[ae++]))}else{ae=E-ee;do qe[E++]=qe[ae++],qe[E++]=qe[ae++],qe[E++]=qe[ae++],G-=3;while(G>2);G&&(qe[E++]=qe[ae++],G>1&&(qe[E++]=qe[ae++]))}}else if(L&64){n.msg="invalid distance code",x.mode=i;break e}else{A=I[(A&65535)+(l&(1<<L)-1)];continue r}break}}else if(L&64)if(L&32){x.mode=a;break e}else{n.msg="invalid literal/length code",x.mode=i;break e}else{A=D[(A&65535)+(l&(1<<L)-1)];continue t}break}}while(k<S&&E<C);G=f>>3,k-=G,f-=G<<3,l&=(1<<f)-1,n.next_in=k,n.next_out=E,n.avail_in=k<S?5+(S-k):5-(k-S),n.avail_out=E<C?257+(C-E):257-(E-C),x.hold=l,x.bits=f}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":((t,i,a)=>{var n=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=a("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),x=a("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),k=a("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),E=0,U=1,C=2,B=4,W=5,Y=6,Z=0,T=1,l=2,f=-2,D=-3,I=-4,V=-5,K=8,A=1,L=2,G=3,ee=4,ae=5,Se=6,$e=7,qe=8,Pe=9,Ve=10,Ie=11,Xe=12,et=13,tt=14,rt=15,ze=16,lt=17,bt=18,At=19,Vt=20,Yt=21,er=22,lr=23,yr=24,$r=25,ia=26,Sa=27,Xr=28,fr=29,Hr=30,ya=31,Ta=32,ua=852,Ua=592,Ya=15,Ia=Ya;function Na(Rr){return(Rr>>>24&255)+(Rr>>>8&65280)+((Rr&65280)<<8)+((Rr&255)<<24)}function Ra(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function oa(Rr){var ga;return!Rr||!Rr.state?f:(ga=Rr.state,Rr.total_in=Rr.total_out=ga.total=0,Rr.msg="",ga.wrap&&(Rr.adler=ga.wrap&1),ga.mode=A,ga.last=0,ga.havedict=0,ga.dmax=32768,ga.head=null,ga.hold=0,ga.bits=0,ga.lencode=ga.lendyn=new n.Buf32(ua),ga.distcode=ga.distdyn=new n.Buf32(Ua),ga.sane=1,ga.back=-1,Z)}function rn(Rr){var ga;return!Rr||!Rr.state?f:(ga=Rr.state,ga.wsize=0,ga.whave=0,ga.wnext=0,oa(Rr))}function Za(Rr,ga){var kt,ha;return!Rr||!Rr.state||(ha=Rr.state,ga<0?(kt=0,ga=-ga):(kt=(ga>>4)+1,ga<48&&(ga&=15)),ga&&(ga<8||ga>15))?f:(ha.window!==null&&ha.wbits!==ga&&(ha.window=null),ha.wrap=kt,ha.wbits=ga,rn(Rr))}function Nt(Rr,ga){var kt,ha;return Rr?(ha=new Ra,Rr.state=ha,ha.window=null,kt=Za(Rr,ga),kt!==Z&&(Rr.state=null),kt):f}function Gt(Rr){return Nt(Rr,Ia)}var ur=!0,Qr,Dr;function Ea(Rr){if(ur){var ga;for(Qr=new n.Buf32(512),Dr=new n.Buf32(32),ga=0;ga<144;)Rr.lens[ga++]=8;for(;ga<256;)Rr.lens[ga++]=9;for(;ga<280;)Rr.lens[ga++]=7;for(;ga<288;)Rr.lens[ga++]=8;for(S(U,Rr.lens,0,288,Qr,0,Rr.work,{bits:9}),ga=0;ga<32;)Rr.lens[ga++]=5;S(C,Rr.lens,0,32,Dr,0,Rr.work,{bits:5}),ur=!1}Rr.lencode=Qr,Rr.lenbits=9,Rr.distcode=Dr,Rr.distbits=5}function da(Rr,ga,kt,ha){var Pa,Qe=Rr.state;return Qe.window===null&&(Qe.wsize=1<<Qe.wbits,Qe.wnext=0,Qe.whave=0,Qe.window=new n.Buf8(Qe.wsize)),ha>=Qe.wsize?(n.arraySet(Qe.window,ga,kt-Qe.wsize,Qe.wsize,0),Qe.wnext=0,Qe.whave=Qe.wsize):(Pa=Qe.wsize-Qe.wnext,Pa>ha&&(Pa=ha),n.arraySet(Qe.window,ga,kt-ha,Pa,Qe.wnext),ha-=Pa,ha?(n.arraySet(Qe.window,ga,kt-ha,ha,0),Qe.wnext=ha,Qe.whave=Qe.wsize):(Qe.wnext+=Pa,Qe.wnext===Qe.wsize&&(Qe.wnext=0),Qe.whave<Qe.wsize&&(Qe.whave+=Pa))),0}function Tt(Rr,ga){var kt,ha,Pa,Qe,ea,Vr,It,hr,sa,Qa,an,sn,An,Ti,zn=0,Ln,Hn,bi,li,Mi,Ii,ti,pi,Ri=new n.Buf8(4),mo,so,pa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Rr||!Rr.state||!Rr.output||!Rr.input&&Rr.avail_in!==0)return f;kt=Rr.state,kt.mode===Xe&&(kt.mode=et),ea=Rr.next_out,Pa=Rr.output,It=Rr.avail_out,Qe=Rr.next_in,ha=Rr.input,Vr=Rr.avail_in,hr=kt.hold,sa=kt.bits,Qa=Vr,an=It,pi=Z;e:for(;;)switch(kt.mode){case A:if(kt.wrap===0){kt.mode=et;break}for(;sa<16;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(kt.wrap&2&&hr===35615){kt.check=0,Ri[0]=hr&255,Ri[1]=hr>>>8&255,kt.check=x(kt.check,Ri,2,0),hr=0,sa=0,kt.mode=L;break}if(kt.flags=0,kt.head&&(kt.head.done=!1),!(kt.wrap&1)||(((hr&255)<<8)+(hr>>8))%31){Rr.msg="incorrect header check",kt.mode=Hr;break}if((hr&15)!==K){Rr.msg="unknown compression method",kt.mode=Hr;break}if(hr>>>=4,sa-=4,ti=(hr&15)+8,kt.wbits===0)kt.wbits=ti;else if(ti>kt.wbits){Rr.msg="invalid window size",kt.mode=Hr;break}kt.dmax=1<<ti,Rr.adler=kt.check=1,kt.mode=hr&512?Ve:Xe,hr=0,sa=0;break;case L:for(;sa<16;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(kt.flags=hr,(kt.flags&255)!==K){Rr.msg="unknown compression method",kt.mode=Hr;break}if(kt.flags&57344){Rr.msg="unknown header flags set",kt.mode=Hr;break}kt.head&&(kt.head.text=hr>>8&1),kt.flags&512&&(Ri[0]=hr&255,Ri[1]=hr>>>8&255,kt.check=x(kt.check,Ri,2,0)),hr=0,sa=0,kt.mode=G;case G:for(;sa<32;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}kt.head&&(kt.head.time=hr),kt.flags&512&&(Ri[0]=hr&255,Ri[1]=hr>>>8&255,Ri[2]=hr>>>16&255,Ri[3]=hr>>>24&255,kt.check=x(kt.check,Ri,4,0)),hr=0,sa=0,kt.mode=ee;case ee:for(;sa<16;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}kt.head&&(kt.head.xflags=hr&255,kt.head.os=hr>>8),kt.flags&512&&(Ri[0]=hr&255,Ri[1]=hr>>>8&255,kt.check=x(kt.check,Ri,2,0)),hr=0,sa=0,kt.mode=ae;case ae:if(kt.flags&1024){for(;sa<16;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}kt.length=hr,kt.head&&(kt.head.extra_len=hr),kt.flags&512&&(Ri[0]=hr&255,Ri[1]=hr>>>8&255,kt.check=x(kt.check,Ri,2,0)),hr=0,sa=0}else kt.head&&(kt.head.extra=null);kt.mode=Se;case Se:if(kt.flags&1024&&(sn=kt.length,sn>Vr&&(sn=Vr),sn&&(kt.head&&(ti=kt.head.extra_len-kt.length,kt.head.extra||(kt.head.extra=new Array(kt.head.extra_len)),n.arraySet(kt.head.extra,ha,Qe,sn,ti)),kt.flags&512&&(kt.check=x(kt.check,ha,sn,Qe)),Vr-=sn,Qe+=sn,kt.length-=sn),kt.length))break e;kt.length=0,kt.mode=$e;case $e:if(kt.flags&2048){if(Vr===0)break e;sn=0;do ti=ha[Qe+sn++],kt.head&&ti&&kt.length<65536&&(kt.head.name+=String.fromCharCode(ti));while(ti&&sn<Vr);if(kt.flags&512&&(kt.check=x(kt.check,ha,sn,Qe)),Vr-=sn,Qe+=sn,ti)break e}else kt.head&&(kt.head.name=null);kt.length=0,kt.mode=qe;case qe:if(kt.flags&4096){if(Vr===0)break e;sn=0;do ti=ha[Qe+sn++],kt.head&&ti&&kt.length<65536&&(kt.head.comment+=String.fromCharCode(ti));while(ti&&sn<Vr);if(kt.flags&512&&(kt.check=x(kt.check,ha,sn,Qe)),Vr-=sn,Qe+=sn,ti)break e}else kt.head&&(kt.head.comment=null);kt.mode=Pe;case Pe:if(kt.flags&512){for(;sa<16;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(hr!==(kt.check&65535)){Rr.msg="header crc mismatch",kt.mode=Hr;break}hr=0,sa=0}kt.head&&(kt.head.hcrc=kt.flags>>9&1,kt.head.done=!0),Rr.adler=kt.check=0,kt.mode=Xe;break;case Ve:for(;sa<32;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}Rr.adler=kt.check=Na(hr),hr=0,sa=0,kt.mode=Ie;case Ie:if(kt.havedict===0)return Rr.next_out=ea,Rr.avail_out=It,Rr.next_in=Qe,Rr.avail_in=Vr,kt.hold=hr,kt.bits=sa,l;Rr.adler=kt.check=1,kt.mode=Xe;case Xe:if(ga===W||ga===Y)break e;case et:if(kt.last){hr>>>=sa&7,sa-=sa&7,kt.mode=Sa;break}for(;sa<3;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}switch(kt.last=hr&1,hr>>>=1,sa-=1,hr&3){case 0:kt.mode=tt;break;case 1:if(Ea(kt),kt.mode=Vt,ga===Y){hr>>>=2,sa-=2;break e}break;case 2:kt.mode=lt;break;case 3:Rr.msg="invalid block type",kt.mode=Hr}hr>>>=2,sa-=2;break;case tt:for(hr>>>=sa&7,sa-=sa&7;sa<32;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if((hr&65535)!==(hr>>>16^65535)){Rr.msg="invalid stored block lengths",kt.mode=Hr;break}if(kt.length=hr&65535,hr=0,sa=0,kt.mode=rt,ga===Y)break e;case rt:kt.mode=ze;case ze:if(sn=kt.length,sn){if(sn>Vr&&(sn=Vr),sn>It&&(sn=It),sn===0)break e;n.arraySet(Pa,ha,Qe,sn,ea),Vr-=sn,Qe+=sn,It-=sn,ea+=sn,kt.length-=sn;break}kt.mode=Xe;break;case lt:for(;sa<14;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(kt.nlen=(hr&31)+257,hr>>>=5,sa-=5,kt.ndist=(hr&31)+1,hr>>>=5,sa-=5,kt.ncode=(hr&15)+4,hr>>>=4,sa-=4,kt.nlen>286||kt.ndist>30){Rr.msg="too many length or distance symbols",kt.mode=Hr;break}kt.have=0,kt.mode=bt;case bt:for(;kt.have<kt.ncode;){for(;sa<3;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}kt.lens[pa[kt.have++]]=hr&7,hr>>>=3,sa-=3}for(;kt.have<19;)kt.lens[pa[kt.have++]]=0;if(kt.lencode=kt.lendyn,kt.lenbits=7,mo={bits:kt.lenbits},pi=S(E,kt.lens,0,19,kt.lencode,0,kt.work,mo),kt.lenbits=mo.bits,pi){Rr.msg="invalid code lengths set",kt.mode=Hr;break}kt.have=0,kt.mode=At;case At:for(;kt.have<kt.nlen+kt.ndist;){for(;zn=kt.lencode[hr&(1<<kt.lenbits)-1],Ln=zn>>>24,Hn=zn>>>16&255,bi=zn&65535,!(Ln<=sa);){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(bi<16)hr>>>=Ln,sa-=Ln,kt.lens[kt.have++]=bi;else{if(bi===16){for(so=Ln+2;sa<so;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(hr>>>=Ln,sa-=Ln,kt.have===0){Rr.msg="invalid bit length repeat",kt.mode=Hr;break}ti=kt.lens[kt.have-1],sn=3+(hr&3),hr>>>=2,sa-=2}else if(bi===17){for(so=Ln+3;sa<so;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}hr>>>=Ln,sa-=Ln,ti=0,sn=3+(hr&7),hr>>>=3,sa-=3}else{for(so=Ln+7;sa<so;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}hr>>>=Ln,sa-=Ln,ti=0,sn=11+(hr&127),hr>>>=7,sa-=7}if(kt.have+sn>kt.nlen+kt.ndist){Rr.msg="invalid bit length repeat",kt.mode=Hr;break}for(;sn--;)kt.lens[kt.have++]=ti}}if(kt.mode===Hr)break;if(kt.lens[256]===0){Rr.msg="invalid code -- missing end-of-block",kt.mode=Hr;break}if(kt.lenbits=9,mo={bits:kt.lenbits},pi=S(U,kt.lens,0,kt.nlen,kt.lencode,0,kt.work,mo),kt.lenbits=mo.bits,pi){Rr.msg="invalid literal/lengths set",kt.mode=Hr;break}if(kt.distbits=6,kt.distcode=kt.distdyn,mo={bits:kt.distbits},pi=S(C,kt.lens,kt.nlen,kt.ndist,kt.distcode,0,kt.work,mo),kt.distbits=mo.bits,pi){Rr.msg="invalid distances set",kt.mode=Hr;break}if(kt.mode=Vt,ga===Y)break e;case Vt:kt.mode=Yt;case Yt:if(Vr>=6&&It>=258){Rr.next_out=ea,Rr.avail_out=It,Rr.next_in=Qe,Rr.avail_in=Vr,kt.hold=hr,kt.bits=sa,k(Rr,an),ea=Rr.next_out,Pa=Rr.output,It=Rr.avail_out,Qe=Rr.next_in,ha=Rr.input,Vr=Rr.avail_in,hr=kt.hold,sa=kt.bits,kt.mode===Xe&&(kt.back=-1);break}for(kt.back=0;zn=kt.lencode[hr&(1<<kt.lenbits)-1],Ln=zn>>>24,Hn=zn>>>16&255,bi=zn&65535,!(Ln<=sa);){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(Hn&&!(Hn&240)){for(li=Ln,Mi=Hn,Ii=bi;zn=kt.lencode[Ii+((hr&(1<<li+Mi)-1)>>li)],Ln=zn>>>24,Hn=zn>>>16&255,bi=zn&65535,!(li+Ln<=sa);){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}hr>>>=li,sa-=li,kt.back+=li}if(hr>>>=Ln,sa-=Ln,kt.back+=Ln,kt.length=bi,Hn===0){kt.mode=ia;break}if(Hn&32){kt.back=-1,kt.mode=Xe;break}if(Hn&64){Rr.msg="invalid literal/length code",kt.mode=Hr;break}kt.extra=Hn&15,kt.mode=er;case er:if(kt.extra){for(so=kt.extra;sa<so;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}kt.length+=hr&(1<<kt.extra)-1,hr>>>=kt.extra,sa-=kt.extra,kt.back+=kt.extra}kt.was=kt.length,kt.mode=lr;case lr:for(;zn=kt.distcode[hr&(1<<kt.distbits)-1],Ln=zn>>>24,Hn=zn>>>16&255,bi=zn&65535,!(Ln<=sa);){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(!(Hn&240)){for(li=Ln,Mi=Hn,Ii=bi;zn=kt.distcode[Ii+((hr&(1<<li+Mi)-1)>>li)],Ln=zn>>>24,Hn=zn>>>16&255,bi=zn&65535,!(li+Ln<=sa);){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}hr>>>=li,sa-=li,kt.back+=li}if(hr>>>=Ln,sa-=Ln,kt.back+=Ln,Hn&64){Rr.msg="invalid distance code",kt.mode=Hr;break}kt.offset=bi,kt.extra=Hn&15,kt.mode=yr;case yr:if(kt.extra){for(so=kt.extra;sa<so;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}kt.offset+=hr&(1<<kt.extra)-1,hr>>>=kt.extra,sa-=kt.extra,kt.back+=kt.extra}if(kt.offset>kt.dmax){Rr.msg="invalid distance too far back",kt.mode=Hr;break}kt.mode=$r;case $r:if(It===0)break e;if(sn=an-It,kt.offset>sn){if(sn=kt.offset-sn,sn>kt.whave&&kt.sane){Rr.msg="invalid distance too far back",kt.mode=Hr;break}sn>kt.wnext?(sn-=kt.wnext,An=kt.wsize-sn):An=kt.wnext-sn,sn>kt.length&&(sn=kt.length),Ti=kt.window}else Ti=Pa,An=ea-kt.offset,sn=kt.length;sn>It&&(sn=It),It-=sn,kt.length-=sn;do Pa[ea++]=Ti[An++];while(--sn);kt.length===0&&(kt.mode=Yt);break;case ia:if(It===0)break e;Pa[ea++]=kt.length,It--,kt.mode=Yt;break;case Sa:if(kt.wrap){for(;sa<32;){if(Vr===0)break e;Vr--,hr|=ha[Qe++]<<sa,sa+=8}if(an-=It,Rr.total_out+=an,kt.total+=an,an&&(Rr.adler=kt.check=kt.flags?x(kt.check,Pa,an,ea-an):y(kt.check,Pa,an,ea-an)),an=It,(kt.flags?hr:Na(hr))!==kt.check){Rr.msg="incorrect data check",kt.mode=Hr;break}hr=0,sa=0}kt.mode=Xr;case Xr:if(kt.wrap&&kt.flags){for(;sa<32;){if(Vr===0)break e;Vr--,hr+=ha[Qe++]<<sa,sa+=8}if(hr!==(kt.total&4294967295)){Rr.msg="incorrect length check",kt.mode=Hr;break}hr=0,sa=0}kt.mode=fr;case fr:pi=T;break e;case Hr:pi=D;break e;case ya:return I;case Ta:default:return f}return Rr.next_out=ea,Rr.avail_out=It,Rr.next_in=Qe,Rr.avail_in=Vr,kt.hold=hr,kt.bits=sa,(kt.wsize||an!==Rr.avail_out&&kt.mode<Hr&&(kt.mode<Sa||ga!==B))&&da(Rr,Rr.output,Rr.next_out,an-Rr.avail_out),Qa-=Rr.avail_in,an-=Rr.avail_out,Rr.total_in+=Qa,Rr.total_out+=an,kt.total+=an,kt.wrap&&an&&(Rr.adler=kt.check=kt.flags?x(kt.check,Pa,an,Rr.next_out-an):y(kt.check,Pa,an,Rr.next_out-an)),Rr.data_type=kt.bits+(kt.last?64:0)+(kt.mode===Xe?128:0)+(kt.mode===Vt||kt.mode===rt?256:0),(Qa===0&&an===0||ga===B)&&pi===Z&&(pi=V),pi}function Lr(Rr){if(!Rr||!Rr.state)return f;var ga=Rr.state;return ga.window&&(ga.window=null),Rr.state=null,Z}function Gr(Rr,ga){var kt;return!Rr||!Rr.state||(kt=Rr.state,!(kt.wrap&2))?f:(kt.head=ga,ga.done=!1,Z)}function wa(Rr,ga){var kt=ga.length,ha,Pa,Qe;return!Rr||!Rr.state||(ha=Rr.state,ha.wrap!==0&&ha.mode!==Ie)?f:ha.mode===Ie&&(Pa=1,Pa=y(Pa,ga,kt,0),Pa!==ha.check)?D:(Qe=da(Rr,ga,kt,kt),Qe?(ha.mode=ya,I):(ha.havedict=1,Z))}i.inflateReset=rn,i.inflateReset2=Za,i.inflateResetKeep=oa,i.inflateInit=Gt,i.inflateInit2=Nt,i.inflate=Tt,i.inflateEnd=Lr,i.inflateGetHeader=Gr,i.inflateSetDictionary=wa,i.inflateInfo="pako inflate (from Nodeca project)"}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":((t,i,a)=>{var n=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=15,x=852,k=592,S=0,E=1,U=2,C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],B=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],W=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(Z,T,l,f,D,I,V,K){var A=K.bits,L=0,G=0,ee=0,ae=0,Se=0,$e=0,qe=0,Pe=0,Ve=0,Ie=0,Xe,et,tt,rt,ze,lt=null,bt=0,At,Vt=new n.Buf16(y+1),Yt=new n.Buf16(y+1),er=null,lr=0,yr,$r,ia;for(L=0;L<=y;L++)Vt[L]=0;for(G=0;G<f;G++)Vt[T[l+G]]++;for(Se=A,ae=y;ae>=1&&Vt[ae]===0;ae--);if(Se>ae&&(Se=ae),ae===0)return D[I++]=20971520,D[I++]=20971520,K.bits=1,0;for(ee=1;ee<ae&&Vt[ee]===0;ee++);for(Se<ee&&(Se=ee),Pe=1,L=1;L<=y;L++)if(Pe<<=1,Pe-=Vt[L],Pe<0)return-1;if(Pe>0&&(Z===S||ae!==1))return-1;for(Yt[1]=0,L=1;L<y;L++)Yt[L+1]=Yt[L]+Vt[L];for(G=0;G<f;G++)T[l+G]!==0&&(V[Yt[T[l+G]]++]=G);if(Z===S?(lt=er=V,At=19):Z===E?(lt=C,bt-=257,er=B,lr-=257,At=256):(lt=W,er=Y,At=-1),Ie=0,G=0,L=ee,ze=I,$e=Se,qe=0,tt=-1,Ve=1<<Se,rt=Ve-1,Z===E&&Ve>x||Z===U&&Ve>k)return 1;for(;;){yr=L-qe,V[G]<At?($r=0,ia=V[G]):V[G]>At?($r=er[lr+V[G]],ia=lt[bt+V[G]]):($r=96,ia=0),Xe=1<<L-qe,et=1<<$e,ee=et;do et-=Xe,D[ze+(Ie>>qe)+et]=yr<<24|$r<<16|ia|0;while(et!==0);for(Xe=1<<L-1;Ie&Xe;)Xe>>=1;if(Xe!==0?(Ie&=Xe-1,Ie+=Xe):Ie=0,G++,--Vt[L]===0){if(L===ae)break;L=T[l+V[G]]}if(L>Se&&(Ie&rt)!==tt){for(qe===0&&(qe=Se),ze+=ee,$e=L-qe,Pe=1<<$e;$e+qe<ae&&(Pe-=Vt[$e+qe],!(Pe<=0));)$e++,Pe<<=1;if(Ve+=1<<$e,Z===E&&Ve>x||Z===U&&Ve>k)return 1;tt=Ie&rt,D[tt]=Se<<24|$e<<16|ze-I|0}}return Ie!==0&&(D[ze+Ie]=L-qe<<24|4194304|0),K.bits=Se,0}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":(t=>{t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":((t,i,a)=>{var n=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=4,x=0,k=1,S=2;function E(Tt){for(var Lr=Tt.length;--Lr>=0;)Tt[Lr]=0}var U=0,C=1,B=2,W=3,Y=258,Z=29,T=256,l=T+1+Z,f=30,D=19,I=2*l+1,V=15,K=16,A=7,L=256,G=16,ee=17,ae=18,Se=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$e=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ve=512,Ie=new Array((l+2)*2);E(Ie);var Xe=new Array(f*2);E(Xe);var et=new Array(Ve);E(et);var tt=new Array(Y-W+1);E(tt);var rt=new Array(Z);E(rt);var ze=new Array(f);E(ze);function lt(Tt,Lr,Gr,wa,Rr){this.static_tree=Tt,this.extra_bits=Lr,this.extra_base=Gr,this.elems=wa,this.max_length=Rr,this.has_stree=Tt&&Tt.length}var bt,At,Vt;function Yt(Tt,Lr){this.dyn_tree=Tt,this.max_code=0,this.stat_desc=Lr}function er(Tt){return Tt<256?et[Tt]:et[256+(Tt>>>7)]}function lr(Tt,Lr){Tt.pending_buf[Tt.pending++]=Lr&255,Tt.pending_buf[Tt.pending++]=Lr>>>8&255}function yr(Tt,Lr,Gr){Tt.bi_valid>K-Gr?(Tt.bi_buf|=Lr<<Tt.bi_valid&65535,lr(Tt,Tt.bi_buf),Tt.bi_buf=Lr>>K-Tt.bi_valid,Tt.bi_valid+=Gr-K):(Tt.bi_buf|=Lr<<Tt.bi_valid&65535,Tt.bi_valid+=Gr)}function $r(Tt,Lr,Gr){yr(Tt,Gr[Lr*2],Gr[Lr*2+1])}function ia(Tt,Lr){var Gr=0;do Gr|=Tt&1,Tt>>>=1,Gr<<=1;while(--Lr>0);return Gr>>>1}function Sa(Tt){Tt.bi_valid===16?(lr(Tt,Tt.bi_buf),Tt.bi_buf=0,Tt.bi_valid=0):Tt.bi_valid>=8&&(Tt.pending_buf[Tt.pending++]=Tt.bi_buf&255,Tt.bi_buf>>=8,Tt.bi_valid-=8)}function Xr(Tt,Lr){var Gr=Lr.dyn_tree,wa=Lr.max_code,Rr=Lr.stat_desc.static_tree,ga=Lr.stat_desc.has_stree,kt=Lr.stat_desc.extra_bits,ha=Lr.stat_desc.extra_base,Pa=Lr.stat_desc.max_length,Qe,ea,Vr,It,hr,sa,Qa=0;for(It=0;It<=V;It++)Tt.bl_count[It]=0;for(Gr[Tt.heap[Tt.heap_max]*2+1]=0,Qe=Tt.heap_max+1;Qe<I;Qe++)ea=Tt.heap[Qe],It=Gr[Gr[ea*2+1]*2+1]+1,It>Pa&&(It=Pa,Qa++),Gr[ea*2+1]=It,!(ea>wa)&&(Tt.bl_count[It]++,hr=0,ea>=ha&&(hr=kt[ea-ha]),sa=Gr[ea*2],Tt.opt_len+=sa*(It+hr),ga&&(Tt.static_len+=sa*(Rr[ea*2+1]+hr)));if(Qa!==0){do{for(It=Pa-1;Tt.bl_count[It]===0;)It--;Tt.bl_count[It]--,Tt.bl_count[It+1]+=2,Tt.bl_count[Pa]--,Qa-=2}while(Qa>0);for(It=Pa;It!==0;It--)for(ea=Tt.bl_count[It];ea!==0;)Vr=Tt.heap[--Qe],!(Vr>wa)&&(Gr[Vr*2+1]!==It&&(Tt.opt_len+=(It-Gr[Vr*2+1])*Gr[Vr*2],Gr[Vr*2+1]=It),ea--)}}function fr(Tt,Lr,Gr){var wa=new Array(V+1),Rr=0,ga,kt;for(ga=1;ga<=V;ga++)wa[ga]=Rr=Rr+Gr[ga-1]<<1;for(kt=0;kt<=Lr;kt++){var ha=Tt[kt*2+1];ha!==0&&(Tt[kt*2]=ia(wa[ha]++,ha))}}function Hr(){var Tt,Lr,Gr,wa,Rr,ga=new Array(V+1);for(Gr=0,wa=0;wa<Z-1;wa++)for(rt[wa]=Gr,Tt=0;Tt<1<<Se[wa];Tt++)tt[Gr++]=wa;for(tt[Gr-1]=wa,Rr=0,wa=0;wa<16;wa++)for(ze[wa]=Rr,Tt=0;Tt<1<<$e[wa];Tt++)et[Rr++]=wa;for(Rr>>=7;wa<f;wa++)for(ze[wa]=Rr<<7,Tt=0;Tt<1<<$e[wa]-7;Tt++)et[256+Rr++]=wa;for(Lr=0;Lr<=V;Lr++)ga[Lr]=0;for(Tt=0;Tt<=143;)Ie[Tt*2+1]=8,Tt++,ga[8]++;for(;Tt<=255;)Ie[Tt*2+1]=9,Tt++,ga[9]++;for(;Tt<=279;)Ie[Tt*2+1]=7,Tt++,ga[7]++;for(;Tt<=287;)Ie[Tt*2+1]=8,Tt++,ga[8]++;for(fr(Ie,l+1,ga),Tt=0;Tt<f;Tt++)Xe[Tt*2+1]=5,Xe[Tt*2]=ia(Tt,5);bt=new lt(Ie,Se,T+1,l,V),At=new lt(Xe,$e,0,f,V),Vt=new lt(new Array(0),qe,0,D,A)}function ya(Tt){var Lr;for(Lr=0;Lr<l;Lr++)Tt.dyn_ltree[Lr*2]=0;for(Lr=0;Lr<f;Lr++)Tt.dyn_dtree[Lr*2]=0;for(Lr=0;Lr<D;Lr++)Tt.bl_tree[Lr*2]=0;Tt.dyn_ltree[L*2]=1,Tt.opt_len=Tt.static_len=0,Tt.last_lit=Tt.matches=0}function Ta(Tt){Tt.bi_valid>8?lr(Tt,Tt.bi_buf):Tt.bi_valid>0&&(Tt.pending_buf[Tt.pending++]=Tt.bi_buf),Tt.bi_buf=0,Tt.bi_valid=0}function ua(Tt,Lr,Gr,wa){Ta(Tt),lr(Tt,Gr),lr(Tt,~Gr),n.arraySet(Tt.pending_buf,Tt.window,Lr,Gr,Tt.pending),Tt.pending+=Gr}function Ua(Tt,Lr,Gr,wa){var Rr=Lr*2,ga=Gr*2;return Tt[Rr]<Tt[ga]||Tt[Rr]===Tt[ga]&&wa[Lr]<=wa[Gr]}function Ya(Tt,Lr,Gr){for(var wa=Tt.heap[Gr],Rr=Gr<<1;Rr<=Tt.heap_len&&(Rr<Tt.heap_len&&Ua(Lr,Tt.heap[Rr+1],Tt.heap[Rr],Tt.depth)&&Rr++,!Ua(Lr,wa,Tt.heap[Rr],Tt.depth));)Tt.heap[Gr]=Tt.heap[Rr],Gr=Rr,Rr<<=1;Tt.heap[Gr]=wa}function Ia(Tt,Lr,Gr){var wa,Rr,ga=0,kt,ha;if(Tt.last_lit!==0)do wa=Tt.pending_buf[Tt.d_buf+ga*2]<<8|Tt.pending_buf[Tt.d_buf+ga*2+1],Rr=Tt.pending_buf[Tt.l_buf+ga],ga++,wa===0?$r(Tt,Rr,Lr):(kt=tt[Rr],$r(Tt,kt+T+1,Lr),ha=Se[kt],ha!==0&&(Rr-=rt[kt],yr(Tt,Rr,ha)),wa--,kt=er(wa),$r(Tt,kt,Gr),ha=$e[kt],ha!==0&&(wa-=ze[kt],yr(Tt,wa,ha)));while(ga<Tt.last_lit);$r(Tt,L,Lr)}function Na(Tt,Lr){var Gr=Lr.dyn_tree,wa=Lr.stat_desc.static_tree,Rr=Lr.stat_desc.has_stree,ga=Lr.stat_desc.elems,kt,ha,Pa=-1,Qe;for(Tt.heap_len=0,Tt.heap_max=I,kt=0;kt<ga;kt++)Gr[kt*2]!==0?(Tt.heap[++Tt.heap_len]=Pa=kt,Tt.depth[kt]=0):Gr[kt*2+1]=0;for(;Tt.heap_len<2;)Qe=Tt.heap[++Tt.heap_len]=Pa<2?++Pa:0,Gr[Qe*2]=1,Tt.depth[Qe]=0,Tt.opt_len--,Rr&&(Tt.static_len-=wa[Qe*2+1]);for(Lr.max_code=Pa,kt=Tt.heap_len>>1;kt>=1;kt--)Ya(Tt,Gr,kt);Qe=ga;do kt=Tt.heap[1],Tt.heap[1]=Tt.heap[Tt.heap_len--],Ya(Tt,Gr,1),ha=Tt.heap[1],Tt.heap[--Tt.heap_max]=kt,Tt.heap[--Tt.heap_max]=ha,Gr[Qe*2]=Gr[kt*2]+Gr[ha*2],Tt.depth[Qe]=(Tt.depth[kt]>=Tt.depth[ha]?Tt.depth[kt]:Tt.depth[ha])+1,Gr[kt*2+1]=Gr[ha*2+1]=Qe,Tt.heap[1]=Qe++,Ya(Tt,Gr,1);while(Tt.heap_len>=2);Tt.heap[--Tt.heap_max]=Tt.heap[1],Xr(Tt,Lr),fr(Gr,Pa,Tt.bl_count)}function Ra(Tt,Lr,Gr){var wa,Rr=-1,ga,kt=Lr[1],ha=0,Pa=7,Qe=4;for(kt===0&&(Pa=138,Qe=3),Lr[(Gr+1)*2+1]=65535,wa=0;wa<=Gr;wa++)ga=kt,kt=Lr[(wa+1)*2+1],!(++ha<Pa&&ga===kt)&&(ha<Qe?Tt.bl_tree[ga*2]+=ha:ga!==0?(ga!==Rr&&Tt.bl_tree[ga*2]++,Tt.bl_tree[G*2]++):ha<=10?Tt.bl_tree[ee*2]++:Tt.bl_tree[ae*2]++,ha=0,Rr=ga,kt===0?(Pa=138,Qe=3):ga===kt?(Pa=6,Qe=3):(Pa=7,Qe=4))}function oa(Tt,Lr,Gr){var wa,Rr=-1,ga,kt=Lr[1],ha=0,Pa=7,Qe=4;for(kt===0&&(Pa=138,Qe=3),wa=0;wa<=Gr;wa++)if(ga=kt,kt=Lr[(wa+1)*2+1],!(++ha<Pa&&ga===kt)){if(ha<Qe)do $r(Tt,ga,Tt.bl_tree);while(--ha!==0);else ga!==0?(ga!==Rr&&($r(Tt,ga,Tt.bl_tree),ha--),$r(Tt,G,Tt.bl_tree),yr(Tt,ha-3,2)):ha<=10?($r(Tt,ee,Tt.bl_tree),yr(Tt,ha-3,3)):($r(Tt,ae,Tt.bl_tree),yr(Tt,ha-11,7));ha=0,Rr=ga,kt===0?(Pa=138,Qe=3):ga===kt?(Pa=6,Qe=3):(Pa=7,Qe=4)}}function rn(Tt){var Lr;for(Ra(Tt,Tt.dyn_ltree,Tt.l_desc.max_code),Ra(Tt,Tt.dyn_dtree,Tt.d_desc.max_code),Na(Tt,Tt.bl_desc),Lr=D-1;Lr>=3&&Tt.bl_tree[Pe[Lr]*2+1]===0;Lr--);return Tt.opt_len+=3*(Lr+1)+5+5+4,Lr}function Za(Tt,Lr,Gr,wa){var Rr;for(yr(Tt,Lr-257,5),yr(Tt,Gr-1,5),yr(Tt,wa-4,4),Rr=0;Rr<wa;Rr++)yr(Tt,Tt.bl_tree[Pe[Rr]*2+1],3);oa(Tt,Tt.dyn_ltree,Lr-1),oa(Tt,Tt.dyn_dtree,Gr-1)}function Nt(Tt){var Lr=4093624447,Gr;for(Gr=0;Gr<=31;Gr++,Lr>>>=1)if(Lr&1&&Tt.dyn_ltree[Gr*2]!==0)return x;if(Tt.dyn_ltree[18]!==0||Tt.dyn_ltree[20]!==0||Tt.dyn_ltree[26]!==0)return k;for(Gr=32;Gr<T;Gr++)if(Tt.dyn_ltree[Gr*2]!==0)return k;return x}var Gt=!1;function ur(Tt){Gt||(Hr(),Gt=!0),Tt.l_desc=new Yt(Tt.dyn_ltree,bt),Tt.d_desc=new Yt(Tt.dyn_dtree,At),Tt.bl_desc=new Yt(Tt.bl_tree,Vt),Tt.bi_buf=0,Tt.bi_valid=0,ya(Tt)}function Qr(Tt,Lr,Gr,wa){yr(Tt,(U<<1)+(wa?1:0),3),ua(Tt,Lr,Gr)}function Dr(Tt){yr(Tt,C<<1,3),$r(Tt,L,Ie),Sa(Tt)}function Ea(Tt,Lr,Gr,wa){var Rr,ga,kt=0;Tt.level>0?(Tt.strm.data_type===S&&(Tt.strm.data_type=Nt(Tt)),Na(Tt,Tt.l_desc),Na(Tt,Tt.d_desc),kt=rn(Tt),Rr=Tt.opt_len+3+7>>>3,ga=Tt.static_len+3+7>>>3,ga<=Rr&&(Rr=ga)):Rr=ga=Gr+5,Gr+4<=Rr&&Lr!==-1?Qr(Tt,Lr,Gr,wa):Tt.strategy===y||ga===Rr?(yr(Tt,(C<<1)+(wa?1:0),3),Ia(Tt,Ie,Xe)):(yr(Tt,(B<<1)+(wa?1:0),3),Za(Tt,Tt.l_desc.max_code+1,Tt.d_desc.max_code+1,kt+1),Ia(Tt,Tt.dyn_ltree,Tt.dyn_dtree)),ya(Tt),wa&&Ta(Tt)}function da(Tt,Lr,Gr){return Tt.pending_buf[Tt.d_buf+Tt.last_lit*2]=Lr>>>8&255,Tt.pending_buf[Tt.d_buf+Tt.last_lit*2+1]=Lr&255,Tt.pending_buf[Tt.l_buf+Tt.last_lit]=Gr&255,Tt.last_lit++,Lr===0?Tt.dyn_ltree[Gr*2]++:(Tt.matches++,Lr--,Tt.dyn_ltree[(tt[Gr]+T+1)*2]++,Tt.dyn_dtree[er(Lr)*2]++),Tt.last_lit===Tt.lit_bufsize-1}i._tr_init=ur,i._tr_stored_block=Qr,i._tr_flush_block=Ea,i._tr_tally=da,i._tr_align=Dr}),"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":(t=>{function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i}),"./src/3Dmol.ts":((t,i,a)=>{a.r(i),a.d(i,{CAP:()=>k.CAP,CC:()=>y.CC,CONTEXTS_PER_VIEWPORT:()=>U.CONTEXTS_PER_VIEWPORT,Color:()=>y.Color,CustomLinear:()=>C.CustomLinear,Cylinder:()=>I.Cylinder,GLDraw:()=>k.GLDraw,GLModel:()=>S.GLModel,GLShape:()=>E.GLShape,GLViewer:()=>U.GLViewer,GLVolumetricRender:()=>f.GLVolumetricRender,Gradient:()=>C.Gradient,GradientType:()=>C.GradientType,Label:()=>B.Label,LabelCount:()=>B.LabelCount,MarchingCube:()=>Z.MarchingCube,MarchingCubeInitializer:()=>Z.MarchingCubeInitializer,Matrix3:()=>D.Matrix3,Matrix4:()=>D.Matrix4,Parsers:()=>W.Parsers,PausableTimer:()=>T.PausableTimer,PointGrid:()=>Z.PointGrid,ProteinSurface:()=>Z.ProteinSurface,Quaternion:()=>D.Quaternion,ROYGB:()=>C.ROYGB,RWB:()=>C.RWB,Ray:()=>D.Ray,Sinebow:()=>C.Sinebow,Sphere:()=>I.Sphere,SurfaceType:()=>Z.SurfaceType,Triangle:()=>I.Triangle,Vector2:()=>D.Vector2,Vector3:()=>D.Vector3,VolumeData:()=>l.VolumeData,adjustVolumeStyle:()=>T.adjustVolumeStyle,applyPartialCharges:()=>Y.applyPartialCharges,autoinit:()=>n.autoinit,autoload:()=>n.autoload,base64ToArray:()=>T.base64ToArray,bondLength:()=>W.bondLength,builtinColorSchemes:()=>y.builtinColorSchemes,builtinGradients:()=>C.builtinGradients,chains:()=>y.chains,clamp:()=>D.clamp,conversionMatrix3:()=>D.conversionMatrix3,createStereoViewer:()=>U.createStereoViewer,createViewer:()=>U.createViewer,createViewerGrid:()=>U.createViewerGrid,deepCopy:()=>T.deepCopy,degToRad:()=>D.degToRad,download:()=>T.download,drawCartoon:()=>x.drawCartoon,elementColors:()=>y.elementColors,extend:()=>T.extend,get:()=>T.get,getAtomProperty:()=>T.getAtomProperty,getColorFromStyle:()=>T.getColorFromStyle,getElement:()=>T.getElement,getExtent:()=>T.getExtent,getGradient:()=>C.getGradient,getPropertyRange:()=>T.getPropertyRange,getbin:()=>T.getbin,htmlColors:()=>y.htmlColors,inflateString:()=>T.inflateString,isEmptyObject:()=>T.isEmptyObject,isNumeric:()=>T.isNumeric,makeFunction:()=>T.makeFunction,mergeGeos:()=>T.mergeGeos,normalizeValue:()=>C.normalizeValue,partialCharges:()=>Y.partialCharges,processing_autoinit:()=>n.processing_autoinit,residues:()=>y.residues,setBondLength:()=>W.setBondLength,setSyncSurface:()=>Z.setSyncSurface,specStringToObject:()=>T.specStringToObject,splitMesh:()=>E.splitMesh,ssColors:()=>y.ssColors,subdivide_spline:()=>x.subdivide_spline,syncSurface:()=>Z.syncSurface,viewers:()=>n.viewers});var n=a("./src/autoload.ts"),y=a("./src/colors.ts"),x=a("./src/glcartoon.ts"),k=a("./src/GLDraw.ts"),S=a("./src/GLModel.ts"),E=a("./src/GLShape.ts"),U=a("./src/GLViewer.ts"),C=a("./src/Gradient.ts"),B=a("./src/Label.ts"),W=a("./src/parsers/index.ts"),Y=a("./src/partialCharges.ts"),Z=a("./src/ProteinSurface4.ts");a("./src/specs.ts");var T=a("./src/utilities.ts"),l=a("./src/VolumeData.ts"),f=a("./src/VolumetricRender.ts"),D=a("./src/WebGL/math/index.ts"),I=a("./src/WebGL/shapes/index.ts")}),"./src/GLDraw.ts":((t,i,a)=>{a.r(i),a.d(i,{CAP:()=>y,GLDraw:()=>x});var n=a("./src/WebGL/math/index.ts"),y;(function(k){k[k.NONE=0]="NONE",k[k.FLAT=1]="FLAT",k[k.ROUND=2]="ROUND"})(y||(y={}));var x;(function(k){function S(T,l,f){var D=Math.hypot(T,l),I,V,K,A,L;D<1e-4?(V=0,K=1):(V=-T/D,K=l/D),l=-V*T+K*l,I=Math.hypot(l,f),I<1e-4?(A=0,L=1):(A=f/I,L=l/I);var G=new Float32Array(9);return G[0]=K,G[1]=V,G[2]=0,G[3]=-V*L,G[4]=K*L,G[5]=A,G[6]=V*A,G[7]=-K*A,G[8]=L,G}class E{constructor(){this.cache={};let l=[],f=4,D=Math.pow(2,f),I=2,V=Math.pow(2,I),K=D/V,A;for(l[0]=new n.Vector3(-1,0,0),l[K]=new n.Vector3(0,0,1),l[K*2]=new n.Vector3(1,0,0),l[K*3]=new n.Vector3(0,0,-1),I=3;I<=f;I++){for(V=Math.pow(2,I-1),K=D/V,A=0;A<V-1;A++)l[K/2+A*K]=l[A*K].clone().add(l[(A+1)*K]).normalize();A=V-1,l[K/2+A*K]=l[A*K].clone().add(l[0]).normalize()}this.basisVectors=l}getVerticesForRadius(l,f,D){if(typeof this.cache<"u"&&this.cache[l]!==void 0&&this.cache[l][f+D]!==void 0)return this.cache[l][f+D];for(var I=this.basisVectors.length,V=[],K=[],A,L=0;L<I;L++)V.push(this.basisVectors[L].clone().multiplyScalar(l)),V.push(this.basisVectors[L].clone().multiplyScalar(l)),A=this.basisVectors[L].clone().normalize(),K.push(A),K.push(A);var G=[],ee=10,ae=I,Se=0,$e=Math.PI*2,qe=0,Pe=Math.PI,Ve,Ie,Xe=!1,et=!1;for(Ie=0;Ie<=ee;Ie++){Xe=Ie===0||Ie===ee,et=Ie===ee/2;var tt=[],rt=[];for(Ve=0;Ve<=ae;Ve++){if(et){var ze=Ve<ae?2*Ve:0;rt.push(ze+1),tt.push(ze);continue}var lt=Ve/ae,bt=Ie/ee;if(!Xe||Ve===0)if(Ve<ae){var At=new n.Vector3;At.x=-l*Math.cos(Se+lt*$e)*Math.sin(qe+bt*Pe),f==1?At.y=0:At.y=l*Math.cos(qe+bt*Pe),At.z=l*Math.sin(Se+lt*$e)*Math.sin(qe+bt*Pe),Math.abs(At.x)<1e-5&&(At.x=0),Math.abs(At.y)<1e-5&&(At.y=0),Math.abs(At.z)<1e-5&&(At.z=0),f==y.FLAT?(A=new n.Vector3(0,Math.cos(qe+bt*Pe),0),A.normalize()):(A=new n.Vector3(At.x,At.y,At.z),A.normalize()),V.push(At),K.push(A),tt.push(V.length-1)}else tt.push(V.length-ae);else Xe&&tt.push(V.length-1)}et&&G.push(rt),G.push(tt)}var Vt={vertices:V,normals:K,verticesRows:G,w:ae,h:ee};return l in this.cache||(this.cache[l]={}),this.cache[l][f+D]=Vt,Vt}}var U=new E;function C(T,l,f,D,I,V=0,K=0){if(!l||!f)return;let A=function(sa){if(typeof sa=="string"){let Qa=sa;return Qa.toLowerCase()=="flat"?y.FLAT:Qa.toLowerCase()=="round"?y.ROUND:y.NONE}else return sa};V=A(V),K=A(K);var L=K||V;I=I||{r:0,g:0,b:0};var G=S(f.x-l.x,f.y-l.y,f.z-l.z),ee=U.getVerticesForRadius(D,K,"to"),ae=ee.w,Se=ee.h,$e=L?Se*ae+2:2*ae,qe=T.updateGeoGroup($e),Pe=ee.vertices,Ve=ee.normals,Ie=ee.verticesRows,Xe=Ie[Se/2],et=Ie[Se/2+1],tt=qe.vertices,rt,ze,lt,bt,At,Vt,Yt=qe.vertexArray,er=qe.normalArray,lr=qe.colorArray,yr=qe.faceArray;for(lt=0;lt<ae;++lt){var $r=2*lt;bt=G[0]*Pe[$r].x+G[3]*Pe[$r].y+G[6]*Pe[$r].z,At=G[1]*Pe[$r].x+G[4]*Pe[$r].y+G[7]*Pe[$r].z,Vt=G[5]*Pe[$r].y+G[8]*Pe[$r].z,rt=3*(tt+$r),ze=qe.faceidx,Yt[rt]=bt+l.x,Yt[rt+1]=At+l.y,Yt[rt+2]=Vt+l.z,Yt[rt+3]=bt+f.x,Yt[rt+4]=At+f.y,Yt[rt+5]=Vt+f.z,er[rt]=bt,er[rt+3]=bt,er[rt+1]=At,er[rt+4]=At,er[rt+2]=Vt,er[rt+5]=Vt,lr[rt]=I.r,lr[rt+3]=I.r,lr[rt+1]=I.g,lr[rt+4]=I.g,lr[rt+2]=I.b,lr[rt+5]=I.b,yr[ze]=et[lt]+tt,yr[ze+1]=et[lt+1]+tt,yr[ze+2]=Xe[lt]+tt,yr[ze+3]=Xe[lt]+tt,yr[ze+4]=et[lt+1]+tt,yr[ze+5]=Xe[lt+1]+tt,qe.faceidx+=6}if(L){var ia=K?0:Se/2,Sa=V?Se+1:Se/2+1,Xr,fr,Hr,ya,Ta,ua,Ua,Ya,Ia,Na,Ra,oa,rn,Za,Nt,Gt,ur,Qr,Dr,Ea,da,Tt,Lr,Gr,wa,Rr,ga,kt,ha,Pa,Qe,ea;for(At=ia;At<Sa;At++)if(At!==Se/2){var Vr=At<=Se/2?f:l,It=U.getVerticesForRadius(D,K,"to"),hr=U.getVerticesForRadius(D,V,"from");for(Vr===f?(Pe=It.vertices,Ve=It.normals,Ie=It.verticesRows):Vr==l&&(Pe=hr.vertices,Ve=hr.normals,Ie=hr.verticesRows),bt=0;bt<ae;bt++)ze=qe.faceidx,Xr=Ie[At][bt+1],ha=(Xr+tt)*3,fr=Ie[At][bt],Pa=(fr+tt)*3,Hr=Ie[At+1][bt],Qe=(Hr+tt)*3,ya=Ie[At+1][bt+1],ea=(ya+tt)*3,Ta=G[0]*Pe[Xr].x+G[3]*Pe[Xr].y+G[6]*Pe[Xr].z,ua=G[0]*Pe[fr].x+G[3]*Pe[fr].y+G[6]*Pe[fr].z,Ua=G[0]*Pe[Hr].x+G[3]*Pe[Hr].y+G[6]*Pe[Hr].z,Ya=G[0]*Pe[ya].x+G[3]*Pe[ya].y+G[6]*Pe[ya].z,Ia=G[1]*Pe[Xr].x+G[4]*Pe[Xr].y+G[7]*Pe[Xr].z,Na=G[1]*Pe[fr].x+G[4]*Pe[fr].y+G[7]*Pe[fr].z,Ra=G[1]*Pe[Hr].x+G[4]*Pe[Hr].y+G[7]*Pe[Hr].z,oa=G[1]*Pe[ya].x+G[4]*Pe[ya].y+G[7]*Pe[ya].z,rn=G[5]*Pe[Xr].y+G[8]*Pe[Xr].z,Za=G[5]*Pe[fr].y+G[8]*Pe[fr].z,Nt=G[5]*Pe[Hr].y+G[8]*Pe[Hr].z,Gt=G[5]*Pe[ya].y+G[8]*Pe[ya].z,Yt[ha]=Ta+Vr.x,Yt[Pa]=ua+Vr.x,Yt[Qe]=Ua+Vr.x,Yt[ea]=Ya+Vr.x,Yt[ha+1]=Ia+Vr.y,Yt[Pa+1]=Na+Vr.y,Yt[Qe+1]=Ra+Vr.y,Yt[ea+1]=oa+Vr.y,Yt[ha+2]=rn+Vr.z,Yt[Pa+2]=Za+Vr.z,Yt[Qe+2]=Nt+Vr.z,Yt[ea+2]=Gt+Vr.z,lr[ha]=I.r,lr[Pa]=I.r,lr[Qe]=I.r,lr[ea]=I.r,lr[ha+1]=I.g,lr[Pa+1]=I.g,lr[Qe+1]=I.g,lr[ea+1]=I.g,lr[ha+2]=I.b,lr[Pa+2]=I.b,lr[Qe+2]=I.b,lr[ea+2]=I.b,ur=G[0]*Ve[Xr].x+G[3]*Ve[Xr].y+G[6]*Ve[Xr].z,Qr=G[0]*Ve[fr].x+G[3]*Ve[fr].y+G[6]*Ve[fr].z,Dr=G[0]*Ve[Hr].x+G[3]*Ve[Hr].y+G[6]*Ve[Hr].z,Ea=G[0]*Ve[ya].x+G[3]*Ve[ya].y+G[6]*Ve[ya].z,da=G[1]*Ve[Xr].x+G[4]*Ve[Xr].y+G[7]*Ve[Xr].z,Tt=G[1]*Ve[fr].x+G[4]*Ve[fr].y+G[7]*Ve[fr].z,Lr=G[1]*Ve[Hr].x+G[4]*Ve[Hr].y+G[7]*Ve[Hr].z,Gr=G[1]*Ve[ya].x+G[4]*Ve[ya].y+G[7]*Ve[ya].z,wa=G[5]*Ve[Xr].y+G[8]*Ve[Xr].z,Rr=G[5]*Ve[fr].y+G[8]*Ve[fr].z,ga=G[5]*Ve[Hr].y+G[8]*Ve[Hr].z,kt=G[5]*Ve[ya].y+G[8]*Ve[ya].z,At===0?(er[ha]=ur,er[Qe]=Dr,er[ea]=Ea,er[ha+1]=da,er[Qe+1]=Lr,er[ea+1]=Gr,er[ha+2]=wa,er[Qe+2]=ga,er[ea+2]=kt,yr[ze]=Xr+tt,yr[ze+1]=Hr+tt,yr[ze+2]=ya+tt,qe.faceidx+=3):At===Sa-1?(er[ha]=ur,er[Pa]=Qr,er[Qe]=Dr,er[ha+1]=da,er[Pa+1]=Tt,er[Qe+1]=Lr,er[ha+2]=wa,er[Pa+2]=Rr,er[Qe+2]=ga,yr[ze]=Xr+tt,yr[ze+1]=fr+tt,yr[ze+2]=Hr+tt,qe.faceidx+=3):(er[ha]=ur,er[Pa]=Qr,er[ea]=Ea,er[ha+1]=da,er[Pa+1]=Tt,er[ea+1]=Gr,er[ha+2]=wa,er[Pa+2]=Rr,er[ea+2]=kt,er[Pa]=Qr,er[Qe]=Dr,er[ea]=Ea,er[Pa+1]=Tt,er[Qe+1]=Lr,er[ea+1]=Gr,er[Pa+2]=Rr,er[Qe+2]=ga,er[ea+2]=kt,yr[ze]=Xr+tt,yr[ze+1]=fr+tt,yr[ze+2]=ya+tt,yr[ze+3]=fr+tt,yr[ze+4]=Hr+tt,yr[ze+5]=ya+tt,qe.faceidx+=6)}}qe.vertices+=$e}k.drawCylinder=C;function B(T,l,f,D,I){if(!l||!f)return;I=I||{r:0,g:0,b:0};let V=new n.Vector3(f.x-l.x,f.y-l.y,f.z-l.z);var K=S(V.x,V.y,V.z);V=V.normalize();var A=U.basisVectors.length,L=U.basisVectors,G=A+2,ee=T.updateGeoGroup(G),ae=ee.vertices,Se,$e,qe,Pe,Ve,Ie,Xe=ee.vertexArray,et=ee.normalArray,tt=ee.colorArray,rt=ee.faceArray;for(Se=ae*3,Xe[Se]=l.x,Xe[Se+1]=l.y,Xe[Se+2]=l.z,et[Se]=-V.x,et[Se+1]=-V.y,et[Se+2]=-V.z,tt[Se]=I.r,tt[Se+1]=I.g,tt[Se+2]=I.b,Xe[Se+3]=f.x,Xe[Se+4]=f.y,Xe[Se+5]=f.z,et[Se+3]=V.x,et[Se+4]=V.y,et[Se+5]=V.z,tt[Se+3]=I.r,tt[Se+4]=I.g,tt[Se+5]=I.b,Se+=6,qe=0;qe<A;++qe){var ze=L[qe].clone();ze.multiplyScalar(D),Pe=K[0]*ze.x+K[3]*ze.y+K[6]*ze.z,Ve=K[1]*ze.x+K[4]*ze.y+K[7]*ze.z,Ie=K[5]*ze.y+K[8]*ze.z,Xe[Se]=Pe+l.x,Xe[Se+1]=Ve+l.y,Xe[Se+2]=Ie+l.z,et[Se]=Pe,et[Se+1]=Ve,et[Se+2]=Ie,tt[Se]=I.r,tt[Se+1]=I.g,tt[Se+2]=I.b,Se+=3}for(ee.vertices+=A+2,$e=ee.faceidx,qe=0;qe<A;qe++){var lt=ae+2+qe,bt=ae+2+(qe+1)%A;rt[$e]=lt,rt[$e+1]=bt,rt[$e+2]=ae,$e+=3,rt[$e]=lt,rt[$e+1]=bt,rt[$e+2]=ae+1,$e+=3}ee.faceidx+=6*A}k.drawCone=B;class W{constructor(){this.cache=new Map}getVerticesForRadius(l,f){f=f||2,this.cache.has(f)||this.cache.set(f,new Map);let D=this.cache.get(f);if(D.has(l))return D.get(l);var I={vertices:[],verticesRows:[],normals:[]},V=16*f,K=10*f;l<1&&(V=10*f,K=8*f);var A=0,L=Math.PI*2,G=0,ee=Math.PI,ae,Se;for(Se=0;Se<=K;Se++){let qe=[];for(ae=0;ae<=V;ae++){let Pe=ae/V,Ve=Se/K,Ie=-l*Math.cos(A+Pe*L)*Math.sin(G+Ve*ee),Xe=l*Math.cos(G+Ve*ee),et=l*Math.sin(A+Pe*L)*Math.sin(G+Ve*ee);var $e=new n.Vector3(Ie,Xe,et);$e.normalize(),I.vertices.push({x:Ie,y:Xe,z:et}),I.normals.push($e),qe.push(I.vertices.length-1)}I.verticesRows.push(qe)}return D.set(l,I),I}}var Y=new W;function Z(T,l,f,D,I){var V=Y.getVerticesForRadius(f,I),K=V.vertices,A=V.normals,L=T.updateGeoGroup(K.length),G=L.vertices,ee=L.vertexArray,ae=L.colorArray,Se=L.faceArray,$e=L.lineArray,qe=L.normalArray;for(let Ie=0,Xe=K.length;Ie<Xe;++Ie){let et=3*(G+Ie),tt=K[Ie];ee[et]=tt.x+l.x,ee[et+1]=tt.y+l.y,ee[et+2]=tt.z+l.z,ae[et]=D.r,ae[et+1]=D.g,ae[et+2]=D.b}L.vertices+=K.length;let Pe=V.verticesRows,Ve=Pe.length-1;for(let Ie=0;Ie<Ve;Ie++){let Xe=Pe[Ie].length-1;for(let et=0;et<Xe;et++){let tt=L.faceidx,rt=L.lineidx,ze=Pe[Ie][et+1]+G,lt=ze*3,bt=Pe[Ie][et]+G,At=bt*3,Vt=Pe[Ie+1][et]+G,Yt=Vt*3,er=Pe[Ie+1][et+1]+G,lr=er*3,yr=A[ze-G],$r=A[bt-G],ia=A[Vt-G],Sa=A[er-G];Math.abs(K[ze-G].y)===f?(qe[lt]=yr.x,qe[Yt]=ia.x,qe[lr]=Sa.x,qe[lt+1]=yr.y,qe[Yt+1]=ia.y,qe[lr+1]=Sa.y,qe[lt+2]=yr.z,qe[Yt+2]=ia.z,qe[lr+2]=Sa.z,Se[tt]=ze,Se[tt+1]=Vt,Se[tt+2]=er,$e[rt]=ze,$e[rt+1]=Vt,$e[rt+2]=ze,$e[rt+3]=er,$e[rt+4]=Vt,$e[rt+5]=er,L.faceidx+=3,L.lineidx+=6):Math.abs(K[Vt-G].y)===f?(qe[lt]=yr.x,qe[At]=$r.x,qe[Yt]=ia.x,qe[lt+1]=yr.y,qe[At+1]=$r.y,qe[Yt+1]=ia.y,qe[lt+2]=yr.z,qe[At+2]=$r.z,qe[Yt+2]=ia.z,Se[tt]=ze,Se[tt+1]=bt,Se[tt+2]=Vt,$e[rt]=ze,$e[rt+1]=bt,$e[rt+2]=ze,$e[rt+3]=Vt,$e[rt+4]=bt,$e[rt+5]=Vt,L.faceidx+=3,L.lineidx+=6):(qe[lt]=yr.x,qe[At]=$r.x,qe[lr]=Sa.x,qe[lt+1]=yr.y,qe[At+1]=$r.y,qe[lr+1]=Sa.y,qe[lt+2]=yr.z,qe[At+2]=$r.z,qe[lr+2]=Sa.z,qe[At]=$r.x,qe[Yt]=ia.x,qe[lr]=Sa.x,qe[At+1]=$r.y,qe[Yt+1]=ia.y,qe[lr+1]=Sa.y,qe[At+2]=$r.z,qe[Yt+2]=ia.z,qe[lr+2]=Sa.z,Se[tt]=ze,Se[tt+1]=bt,Se[tt+2]=er,Se[tt+3]=bt,Se[tt+4]=Vt,Se[tt+5]=er,$e[rt]=ze,$e[rt+1]=bt,$e[rt+2]=ze,$e[rt+3]=er,$e[rt+4]=bt,$e[rt+5]=Vt,$e[rt+6]=Vt,$e[rt+7]=er,L.faceidx+=6,L.lineidx+=8)}}}k.drawSphere=Z})(x||(x={}))}),"./src/GLModel.ts":((t,i,a)=>{a.r(i),a.d(i,{GLModel:()=>Z});var n=a("./src/WebGL/index.ts"),y=a("./src/WebGL/shapes/index.ts"),x=a("./src/WebGL/math/index.ts"),k=a("./src/colors.ts"),S=a("./src/GLDraw.ts"),E=a("./src/glcartoon.ts"),U=a("./src/utilities.ts"),C=a("./src/Gradient.ts"),B=a("./src/parsers/index.ts"),W=a("./node_modules/netcdfjs/lib-esm/index.js"),Y=a("./src/parsers/utils/assignBonds.ts");class Z{static sameObj(l,f){return l&&f?JSON.stringify(l)==JSON.stringify(f):l==f}constructor(l,f,D){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new x.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=k.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=f||{},this.viewer=D,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:k.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=l}getRadiusFromStyle(l,f){var D=this.defaultSphereRadius;if(typeof f.radius<"u")D=f.radius;else if(Z.vdwRadii[l.elem])D=Z.vdwRadii[l.elem];else if(l.elem.length>1){let I=l.elem;I=I[0].toUpperCase()+I[1].toLowerCase(),Z.vdwRadii[I]&&(D=Z.vdwRadii[I])}return typeof f.scale<"u"&&(D*=f.scale),D}drawAtomCross(l,f){if(l.style.cross){var D=l.style.cross;if(!D.hidden){var I=D.linewidth||Z.defaultlineWidth;f[I]||(f[I]=new n.Geometry);var V=f[I].updateGeoGroup(6),K=this.getRadiusFromStyle(l,D),A=[[K,0,0],[-K,0,0],[0,K,0],[0,-K,0],[0,0,K],[0,0,-K]],L=l.clickable||l.hoverable;L&&l.intersectionShape===void 0&&(l.intersectionShape={sphere:[],cylinder:[],line:[]});for(var G=(0,U.getColorFromStyle)(l,D),ee=V.vertexArray,ae=V.colorArray,Se=0;Se<6;Se++){var $e=V.vertices*3;if(V.vertices++,ee[$e]=l.x+A[Se][0],ee[$e+1]=l.y+A[Se][1],ee[$e+2]=l.z+A[Se][2],ae[$e]=G.r,ae[$e+1]=G.g,ae[$e+2]=G.b,L){var qe=new x.Vector3(A[Se][0],A[Se][1],A[Se][2]);qe.multiplyScalar(.1),qe.set(qe.x+l.x,qe.y+l.y,qe.z+l.z),l.intersectionShape.line.push(qe)}}}}}getGoodCross(l,f,D,I){for(var V=null,K=-1,A=0,L=l.bonds.length;A<L;A++)if(l.bonds[A]!=f.index){let ee=l.bonds[A],ae=this.atoms[ee],Se=new x.Vector3(ae.x,ae.y,ae.z).clone();Se.sub(D);let $e=Se.clone();$e.cross(I);var G=$e.lengthSq();if(G>K&&(K=G,V=$e,K>.1))return V}return V}getSideBondV(l,f,D){var I,V,K,A,L,G=new x.Vector3(l.x,l.y,l.z),ee=new x.Vector3(f.x,f.y,f.z),ae=ee.clone(),Se=null;if(ae.sub(G),l.bonds.length===1)f.bonds.length===1?(Se=ae.clone(),Math.abs(Se.x)>1e-4?Se.y+=1:Se.x+=1):(I=(D+1)%f.bonds.length,V=f.bonds[I],K=this.atoms[V],K.index==l.index&&(I=(I+1)%f.bonds.length,V=f.bonds[I],K=this.atoms[V]),A=new x.Vector3(K.x,K.y,K.z),L=A.clone(),L.sub(G),Se=L.clone(),Se.cross(ae));else if(Se=this.getGoodCross(l,f,G,ae),Se.lengthSq()<.01){var $e=this.getGoodCross(f,l,G,ae);$e!=null&&(Se=$e)}return Se.lengthSq()<.01&&(Se=ae.clone(),Math.abs(Se.x)>1e-4?Se.y+=1:Se.x+=1),Se.cross(ae),Se.normalize(),Se}addLine(l,f,D,I,V,K){l[D]=I.x,l[D+1]=I.y,l[D+2]=I.z,f[D]=K.r,f[D+1]=K.g,f[D+2]=K.b,l[D+3]=V.x,l[D+4]=V.y,l[D+5]=V.z,f[D+3]=K.r,f[D+4]=K.g,f[D+5]=K.b}drawBondLines(l,f,D){if(l.style.line){var I=l.style.line;if(!I.hidden){var V,K,A,L,G=I.linewidth||Z.defaultlineWidth;D[G]||(D[G]=new n.Geometry);for(var ee=D[G].updateGeoGroup(6*l.bonds.length),ae=ee.vertexArray,Se=ee.colorArray,$e=0;$e<l.bonds.length;$e++){var qe=l.bonds[$e],Pe=f[qe];if(Pe.style.line&&!(l.index>=Pe.index)){var Ve=new x.Vector3(l.x,l.y,l.z),Ie=new x.Vector3(Pe.x,Pe.y,Pe.z),Xe=Ve.clone().add(Ie).multiplyScalar(.5),et=!1,tt=l.clickable||l.hoverable,rt=Pe.clickable||Pe.hoverable;(tt||rt)&&(tt&&(l.intersectionShape===void 0&&(l.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),l.intersectionShape.line.push(Ve),l.intersectionShape.line.push(Xe)),rt&&(Pe.intersectionShape===void 0&&(Pe.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Pe.intersectionShape.line.push(Xe),Pe.intersectionShape.line.push(Ie)));var ze=(0,U.getColorFromStyle)(l,l.style.line),lt=(0,U.getColorFromStyle)(Pe,Pe.style.line);if(l.bondStyles&&l.bondStyles[$e]){var bt=l.bondStyles[$e];if(!bt.iswire)continue;bt.singleBond&&(et=!0),typeof bt.color1<"u"&&(ze=k.CC.color(bt.color1)),typeof bt.color2<"u"&&(lt=k.CC.color(bt.color2))}var At=ee.vertices*3,Vt,Yt;if(l.bondOrder[$e]>1&&l.bondOrder[$e]<4&&!et){var er=this.getSideBondV(l,Pe,$e),lr=Ie.clone();lr.sub(Ve),l.bondOrder[$e]==2?(er.multiplyScalar(.1),V=Ve.clone(),V.add(er),K=Ve.clone(),K.sub(er),A=V.clone(),A.add(lr),L=K.clone(),L.add(lr),ze==lt?(ee.vertices+=4,this.addLine(ae,Se,At,V,A,ze),this.addLine(ae,Se,At+6,K,L,ze)):(ee.vertices+=8,lr.multiplyScalar(.5),Vt=V.clone(),Vt.add(lr),Yt=K.clone(),Yt.add(lr),this.addLine(ae,Se,At,V,Vt,ze),this.addLine(ae,Se,At+6,Vt,A,lt),this.addLine(ae,Se,At+12,K,Yt,ze),this.addLine(ae,Se,At+18,Yt,L,lt))):l.bondOrder[$e]==3&&(er.multiplyScalar(.1),V=Ve.clone(),V.add(er),K=Ve.clone(),K.sub(er),A=V.clone(),A.add(lr),L=K.clone(),L.add(lr),ze==lt?(ee.vertices+=6,this.addLine(ae,Se,At,Ve,Ie,ze),this.addLine(ae,Se,At+6,V,A,ze),this.addLine(ae,Se,At+12,K,L,ze)):(ee.vertices+=12,lr.multiplyScalar(.5),Vt=V.clone(),Vt.add(lr),Yt=K.clone(),Yt.add(lr),this.addLine(ae,Se,At,Ve,Xe,ze),this.addLine(ae,Se,At+6,Xe,Ie,lt),this.addLine(ae,Se,At+12,V,Vt,ze),this.addLine(ae,Se,At+18,Vt,A,lt),this.addLine(ae,Se,At+24,K,Yt,ze),this.addLine(ae,Se,At+30,Yt,L,lt)))}else ze==lt?(ee.vertices+=2,this.addLine(ae,Se,At,Ve,Ie,ze)):(ee.vertices+=4,this.addLine(ae,Se,At,Ve,Xe,ze),this.addLine(ae,Se,At+6,Xe,Ie,lt))}}}}}drawAtomSphere(l,f){if(l.style.sphere){var D=l.style.sphere;if(!D.hidden){var I=(0,U.getColorFromStyle)(l,D),V=this.getRadiusFromStyle(l,D);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var K=new x.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new y.Sphere(K,V))}S.GLDraw.drawSphere(f,l,V,I)}}}drawAtomClickSphere(l){if(l.style.clicksphere){var f=l.style.clicksphere;if(!f.hidden){var D=this.getRadiusFromStyle(l,f);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var I=new x.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new y.Sphere(I,D))}}}}drawAtomInstanced(l,f){if(l.style.sphere){var D=l.style.sphere;if(!D.hidden){var I=this.getRadiusFromStyle(l,D),V=(0,U.getColorFromStyle)(l,D),K=f.updateGeoGroup(1),A=K.vertices,L=A*3,G=K.vertexArray,ee=K.colorArray,ae=K.radiusArray;if(G[L]=l.x,G[L+1]=l.y,G[L+2]=l.z,ee[L]=V.r,ee[L+1]=V.g,ee[L+2]=V.b,ae[A]=I,(l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var Se=new x.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new y.Sphere(Se,I))}K.vertices+=1}}}drawSphereImposter(l,f,D,I){var V=l.updateGeoGroup(4),K,A=V.vertices,L=A*3,G=V.vertexArray,ee=V.colorArray;for(K=0;K<4;K++)G[L+3*K]=f.x,G[L+3*K+1]=f.y,G[L+3*K+2]=f.z;var ae=V.normalArray;for(K=0;K<4;K++)ee[L+3*K]=I.r,ee[L+3*K+1]=I.g,ee[L+3*K+2]=I.b;ae[L+0]=-D,ae[L+1]=D,ae[L+2]=0,ae[L+3]=-D,ae[L+4]=-D,ae[L+5]=0,ae[L+6]=D,ae[L+7]=-D,ae[L+8]=0,ae[L+9]=D,ae[L+10]=D,ae[L+11]=0,V.vertices+=4;var Se=V.faceArray,$e=V.faceidx;Se[$e+0]=A,Se[$e+1]=A+1,Se[$e+2]=A+2,Se[$e+3]=A+2,Se[$e+4]=A+3,Se[$e+5]=A,V.faceidx+=6}drawAtomImposter(l,f){if(l.style.sphere){var D=l.style.sphere;if(!D.hidden){var I=this.getRadiusFromStyle(l,D),V=(0,U.getColorFromStyle)(l,D);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var K=new x.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new y.Sphere(K,I))}this.drawSphereImposter(f,l,I,V)}}}calculateDashes(l,f,D,I,V){var K=Math.sqrt(Math.pow(l.x-f.x,2)+Math.pow(l.y-f.y,2)+Math.pow(l.z-f.z,2));D=Math.max(D,0),V=Math.max(V,0)+2*D,I=Math.max(I,.001),I+V>K&&(I=K,V=0);var A=Math.floor((K-I)/(I+V))+1,L=A*I;V=(K-L)/A;for(var G,ee=new x.Vector3(l.x,l.y,l.z),ae=new x.Vector3((f.x-l.x)/(K/V),(f.y-l.y)/(K/V),(f.z-l.z)/(K/V)),Se=new x.Vector3((f.x-l.x)/(K/I),(f.y-l.y)/(K/I),(f.z-l.z)/(K/I)),$e=[],qe=0;qe<A;qe++)G=new x.Vector3(ee.x+Se.x,ee.y+Se.y,ee.z+Se.z),$e.push({from:ee,to:G}),ee=new x.Vector3(G.x+ae.x,G.y+ae.y,G.z+ae.z);return $e}static drawStickImposter(l,f,D,I,V,K=0,A=0){for(var L=l.updateGeoGroup(4),G=L.vertices,ee=G*3,ae=L.vertexArray,Se=L.colorArray,$e=L.radiusArray,qe=L.normalArray,Pe=V.r,Ve=V.g,Ie=V.b,Xe=function(lt){var bt=-lt;return bt==0&&(bt=-1e-4),bt},et=ee,tt=0;tt<4;tt++)ae[et]=f.x,qe[et]=D.x,Se[et]=Pe,et++,ae[et]=f.y,qe[et]=D.y,Se[et]=Ve,et++,ae[et]=f.z,qe[et]=D.z,tt<2?Se[et]=Ie:Se[et]=Xe(Ie),et++;L.vertices+=4,$e[G]=-I,$e[G+1]=I,$e[G+2]=-I,$e[G+3]=I;var rt=L.faceArray,ze=L.faceidx;rt[ze+0]=G,rt[ze+1]=G+1,rt[ze+2]=G+2,rt[ze+3]=G+2,rt[ze+4]=G+3,rt[ze+5]=G,L.faceidx+=6}drawBondSticks(l,f,D){var I,V;if(l.style.stick){var K=l.style.stick;if(!K.hidden){var A=K.radius||this.defaultStickRadius,L=K.doubleBondScaling||.4,G=K.tripleBondScaling||.25,ee=((I=K.dashedBondConfig)===null||I===void 0?void 0:I.dashLength)||.1,ae=((V=K.dashedBondConfig)===null||V===void 0?void 0:V.gapLength)||.25,Se=A,$e=K.singleBonds||!1,qe=K.dashedBonds||!1,Pe=0,Ve=0,Ie,Xe,et,tt,rt,ze,lt,bt,At,Vt,Yt,er=(0,U.getColorFromStyle)(l,K),lr,yr,$r;!l.capDrawn&&l.bonds.length<4&&(Pe=2);var ia=Lr=>{var Gr=D.imposter?Z.drawStickImposter:S.GLDraw.drawCylinder;return!qe&&Lr>=1?Gr:(wa,Rr,ga,kt,ha,Pa=0,Qe=0,ea=.1,Vr=.25)=>{var It=this.calculateDashes(Rr,ga,kt,ea,Vr);It.forEach(hr=>{Gr(wa,hr.from,hr.to,kt,ha,Pa,Qe)})}};for(et=0;et<l.bonds.length;et++){var Sa=ia(l.bondOrder[et]),Xr=l.bonds[et],fr=f[Xr];if(lr=yr=$r=null,l.index<fr.index){var Hr=fr.style;if(!Hr.stick||Hr.stick.hidden)continue;var ya=(0,U.getColorFromStyle)(fr,Hr.stick);if(Se=A,tt=$e,l.bondStyles&&l.bondStyles[et]){if(rt=l.bondStyles[et],rt.iswire)continue;rt.radius&&(Se=rt.radius),rt.singleBond&&(tt=!0),typeof rt.color1<"u"&&(er=k.CC.color(rt.color1)),typeof rt.color2<"u"&&(ya=k.CC.color(rt.color2))}var Ta=new x.Vector3(l.x,l.y,l.z),ua=new x.Vector3(fr.x,fr.y,fr.z);if(l.bondOrder[et]<=1||tt||l.bondOrder[et]>3){if(l.bondOrder[et]<1&&(Se*=l.bondOrder[et]),!fr.capDrawn&&fr.bonds.length<4&&(Ve=2),er!=ya?(lr=new x.Vector3().addVectors(Ta,ua).multiplyScalar(.5),Sa(D,Ta,lr,Se,er,Pe,0,ee,ae),Sa(D,lr,ua,Se,ya,0,Ve,ee,ae)):Sa(D,Ta,ua,Se,er,Pe,Ve,ee,ae),Ie=l.clickable||l.hoverable,Xe=fr.clickable||fr.hoverable,Ie||Xe){if(lr||(lr=new x.Vector3().addVectors(Ta,ua).multiplyScalar(.5)),Ie){var Ua=new y.Cylinder(Ta,lr,Se),Ya=new y.Sphere(Ta,Se);l.intersectionShape.cylinder.push(Ua),l.intersectionShape.sphere.push(Ya)}if(Xe){var Ia=new y.Cylinder(ua,lr,Se),Na=new y.Sphere(ua,Se);fr.intersectionShape.cylinder.push(Ia),fr.intersectionShape.sphere.push(Na)}}}else if(l.bondOrder[et]>1){var Ra=0,oa=0;Se!=A&&(Ra=2,oa=2);var rn=ua.clone(),Za=null;rn.sub(Ta);var Nt,Gt,ur,Qr,Dr;Za=this.getSideBondV(l,fr,et),l.bondOrder[et]==2?(Nt=Se*L,Za.multiplyScalar(Nt*1.5),Gt=Ta.clone(),Gt.add(Za),ur=Ta.clone(),ur.sub(Za),Qr=Gt.clone(),Qr.add(rn),Dr=ur.clone(),Dr.add(rn),er!=ya?(lr=new x.Vector3().addVectors(Gt,Qr).multiplyScalar(.5),yr=new x.Vector3().addVectors(ur,Dr).multiplyScalar(.5),Sa(D,Gt,lr,Nt,er,Ra,0),Sa(D,lr,Qr,Nt,ya,0,oa),Sa(D,ur,yr,Nt,er,Ra,0),Sa(D,yr,Dr,Nt,ya,0,oa)):(Sa(D,Gt,Qr,Nt,er,Ra,oa),Sa(D,ur,Dr,Nt,er,Ra,oa)),Ie=l.clickable||l.hoverable,Xe=fr.clickable||fr.hoverable,(Ie||Xe)&&(lr||(lr=new x.Vector3().addVectors(Gt,Qr).multiplyScalar(.5)),yr||(yr=new x.Vector3().addVectors(ur,Dr).multiplyScalar(.5)),Ie&&(ze=new y.Cylinder(Gt,lr,Nt),lt=new y.Cylinder(ur,yr,Nt),l.intersectionShape.cylinder.push(ze),l.intersectionShape.cylinder.push(lt)),Xe&&(At=new y.Cylinder(Qr,lr,Nt),Vt=new y.Cylinder(Dr,yr,Nt),fr.intersectionShape.cylinder.push(At),fr.intersectionShape.cylinder.push(Vt)))):l.bondOrder[et]==3&&(Nt=Se*G,Za.cross(rn),Za.normalize(),Za.multiplyScalar(Nt*3),Gt=Ta.clone(),Gt.add(Za),ur=Ta.clone(),ur.sub(Za),Qr=Gt.clone(),Qr.add(rn),Dr=ur.clone(),Dr.add(rn),er!=ya?(lr=new x.Vector3().addVectors(Gt,Qr).multiplyScalar(.5),yr=new x.Vector3().addVectors(ur,Dr).multiplyScalar(.5),$r=new x.Vector3().addVectors(Ta,ua).multiplyScalar(.5),Sa(D,Gt,lr,Nt,er,Ra,0),Sa(D,lr,Qr,Nt,ya,0,oa),Sa(D,Ta,$r,Nt,er,Pe,0),Sa(D,$r,ua,Nt,ya,0,Ve),Sa(D,ur,yr,Nt,er,Ra,0),Sa(D,yr,Dr,Nt,ya,0,oa)):(Sa(D,Gt,Qr,Nt,er,Ra,oa),Sa(D,Ta,ua,Nt,er,Pe,Ve),Sa(D,ur,Dr,Nt,er,Ra,oa)),Ie=l.clickable||l.hoverable,Xe=fr.clickable||fr.hoverable,(Ie||Xe)&&(lr||(lr=new x.Vector3().addVectors(Gt,Qr).multiplyScalar(.5)),yr||(yr=new x.Vector3().addVectors(ur,Dr).multiplyScalar(.5)),$r||($r=new x.Vector3().addVectors(Ta,ua).multiplyScalar(.5)),Ie&&(ze=new y.Cylinder(Gt.clone(),lr.clone(),Nt),lt=new y.Cylinder(ur.clone(),yr.clone(),Nt),bt=new y.Cylinder(Ta.clone(),$r.clone(),Nt),l.intersectionShape.cylinder.push(ze),l.intersectionShape.cylinder.push(lt),l.intersectionShape.cylinder.push(bt)),Xe&&(At=new y.Cylinder(Qr.clone(),lr.clone(),Nt),Vt=new y.Cylinder(Dr.clone(),yr.clone(),Nt),Yt=new y.Cylinder(ua.clone(),$r.clone(),Nt),fr.intersectionShape.cylinder.push(At),fr.intersectionShape.cylinder.push(Vt),fr.intersectionShape.cylinder.push(Yt))))}}}var Ea=!1,da=0,Tt=!1;for(et=0;et<l.bonds.length;et++)tt=$e,l.bondStyles&&l.bondStyles[et]&&(rt=l.bondStyles[et],rt.singleBond&&(tt=!0),rt.radius&&rt.radius!=A&&(Tt=!0)),(tt||l.bondOrder[et]==1)&&da++;Tt?da>0&&(Ea=!0):da==0&&(l.bonds.length>0||K.showNonBonded)&&(Ea=!0),Ea&&(Se=A,D.imposter?this.drawSphereImposter(D.sphereGeometry,l,Se,er):S.GLDraw.drawSphere(D,l,Se,er))}}}createMolObj(l,f){f=f||{};var D=new n.Object3D,I=[],V={},K={},A=this.drawAtomSphere,L=null,G=null;f.supportsImposters?(A=this.drawAtomImposter,L=new n.Geometry(!0),L.imposter=!0,G=new n.Geometry(!0,!0),G.imposter=!0,G.sphereGeometry=new n.Geometry(!0),G.sphereGeometry.imposter=!0,G.drawnCaps={}):f.supportsAIA?(A=this.drawAtomInstanced,L=new n.Geometry(!1,!0,!0),L.instanced=!0,G=new n.Geometry(!0)):(L=new n.Geometry(!0),G=new n.Geometry(!0));var ee,ae,Se,$e,qe={},Pe=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(ee=0,Se=l.length;ee<Se;ee++){var Ve=l[ee];if(Ve&&Ve.style){(Ve.clickable||Ve.hoverable)&&Ve.intersectionShape===void 0&&(Ve.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),$e={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(ae in $e)Ve.style[ae]?Ve.style[ae].opacity?$e[ae]=parseFloat(Ve.style[ae].opacity):$e[ae]=1:$e[ae]=void 0,qe[ae]?$e[ae]!=null&&qe[ae]!=$e[ae]&&(console.log("Warning: "+ae+" opacity is ambiguous"),qe[ae]=1):qe[ae]=$e[ae];A.call(this,Ve,L),this.drawAtomClickSphere(Ve),this.drawAtomCross(Ve,K),this.drawBondLines(Ve,l,V),this.drawBondSticks(Ve,l,G),typeof Ve.style.cartoon<"u"&&!Ve.style.cartoon.hidden&&(Ve.style.cartoon.color==="spectrum"&&typeof Ve.resi=="number"&&!Ve.hetflag&&(Ve.resi<Pe[0]&&(Pe[0]=Ve.resi),Ve.resi>Pe[1]&&(Pe[1]=Ve.resi)),I.push(Ve))}}if(I.length>0&&(0,E.drawCartoon)(D,I,Pe,this.defaultCartoonQuality),L&&L.vertices>0){L.initTypedArrays();var Ie=null,Xe=null;L.imposter?Ie=new n.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):L.instanced?(Xe=new n.Geometry(!0),S.GLDraw.drawSphere(Xe,{x:0,y:0,z:0},1,new k.Color(.5,.5,.5)),Xe.initTypedArrays(),Ie=new n.InstancedMaterial({sphereMaterial:new n.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:Xe})):Ie=new n.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),qe.sphere<1&&qe.sphere>=0&&(Ie.transparent=!0,Ie.opacity=qe.sphere),Xe=new n.Mesh(L,Ie),D.add(Xe)}if(G.vertices>0){var et=null,tt=null,rt=G.sphereGeometry;(!rt||typeof rt.vertices>"u"||rt.vertices==0)&&(rt=null),G.initTypedArrays(),rt&&rt.initTypedArrays();var ze={ambient:0,vertexColors:!0,reflectivity:0};G.imposter?(et=new n.StickImposterMaterial(ze),tt=new n.SphereImposterMaterial(ze)):(et=new n.MeshLambertMaterial(ze),tt=new n.MeshLambertMaterial(ze),et.wireframe&&(G.setUpWireframe(),rt&&rt.setUpWireframe())),qe.stick<1&&qe.stick>=0&&(et.transparent=!0,et.opacity=qe.stick,tt.transparent=!0,tt.opacity=qe.stick);var lt=new n.Mesh(G,et);if(D.add(lt),rt){var bt=new n.Mesh(rt,tt);D.add(bt)}}var At;for(ee in V)if(V.hasOwnProperty(ee)){At=ee;var Vt=new n.LineBasicMaterial({linewidth:At,vertexColors:!0});qe.line<1&&qe.line>=0&&(Vt.transparent=!0,Vt.opacity=qe.line),V[ee].initTypedArrays();var Yt=new n.Line(V[ee],Vt,n.LineStyle.LinePieces);D.add(Yt)}for(ee in K)if(K.hasOwnProperty(ee)){At=ee;var er=new n.LineBasicMaterial({linewidth:At,vertexColors:!0});qe.cross<1&&qe.cross>=0&&(er.transparent=!0,er.opacity=qe.cross),K[ee].initTypedArrays();var lr=new n.Line(K[ee],er,n.LineStyle.LinePieces);D.add(lr)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var yr=new n.Object3D,$r;for($r=0;$r<this.modelData.symmetries.length;$r++){var ia=new n.Object3D;ia=D.clone(),ia.matrix.copy(this.modelData.symmetries[$r]),ia.matrixAutoUpdate=!1,yr.add(ia)}return yr}return D}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(l){this.atoms=l.atoms,this.frames=l.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const l=this.modelData.cryst;this.modelData.cryst.matrix=(0,x.conversionMatrix3)(l.a,l.b,l.c,l.alpha,l.beta,l.gamma)}return this.modelData.cryst}else return null}setCrystData(l,f,D,I,V,K){l=l||1,f=f||1,D=D||1,I=I||90,V=V||90,K=K||90;const A=(0,x.conversionMatrix3)(l,f,D,I,V,K);this.modelData.cryst={a:l,b:f,c:D,alpha:I,beta:V,gamma:K,matrix:A}}setCrystMatrix(l){l=l||new x.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:l}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(l){typeof l>"u"?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=l,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(l,f,D,I){var V=f-l;return V<-D?f+I:V>D?f-I:f}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var l=this.box[0],f=this.box[1],D=this.box[2],I=l*.9,V=f*.9,K=D*.9,A=0;A<this.atomdfs.length;A++)for(var L=this.atomdfs[A],G=1;G<L.length;G++){var ee=this.atoms[L[G][0]],ae=this.atoms[L[G][1]];ee.x=this.adjustCoord(ae.x,ee.x,I,l),ee.y=this.adjustCoord(ae.y,ee.y,V,f),ee.z=this.adjustCoord(ae.z,ee.z,K,D)}}setFrame(l){var f=this.getNumFrames();let D=this,I=this.viewer;return new Promise(function(V,K){if(f==0&&V(),(l<0||l>=f)&&(l=f-1),D.frames.url!=null){var A=D.frames.url;(0,U.getbin)(A+"/traj/frame/"+l+"/"+D.frames.path,void 0,"POST",void 0).then(function(L){for(var G=new Float32Array(L,44),ee=0,ae=0;ae<D.atoms.length;ae++)D.atoms[ae].x=G[ee++],D.atoms[ae].y=G[ee++],D.atoms[ae].z=G[ee++];D.box&&D.atomdfs&&D.adjustCoordinatesToBox(),V()}).catch(K)}else D.atoms=D.frames[l],V();D.molObj=null,D.modelDatas&&l<D.modelDatas.length&&(D.modelData=D.modelDatas[l],D.unitCellObjects&&I&&(I.removeUnitCell(D),I.addUnitCell(D)))})}addFrame(l){this.frames.push(l)}vibrate(l=10,f=1,D=!1,I){var V=0,K=l;let A=this.viewer;D&&(V=-l,K=l),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),V<K&&(this.frames=[]),D&&(this.frames.origIndex=l);for(var L=V;L<K;L++){var G=[],ee=this.frames.length;if(L==0&&!I){this.frames.push(this.atoms);continue}for(var ae=0;ae<this.atoms.length;ae++){var Se=(0,U.getAtomProperty)(this.atoms[ae],"dx"),$e=(0,U.getAtomProperty)(this.atoms[ae],"dy"),qe=(0,U.getAtomProperty)(this.atoms[ae],"dz"),Pe=new x.Vector3(Se,$e,qe),Ve=new x.Vector3(this.atoms[ae].x,this.atoms[ae].y,this.atoms[ae].z),Ie=L*f/l;Pe.multiplyScalar(Ie),Ve.add(Pe);var Xe={};for(var et in this.atoms[ae])Xe[et]=this.atoms[ae][et];if(Xe.x=Ve.x,Xe.y=Ve.y,Xe.z=Ve.z,G.push(Xe),A&&I){var tt=(0,U.extend)({},I),rt=new x.Vector3(Se,$e,qe);if(rt.multiplyScalar(f),rt.add(Ve),tt.start=Ve,tt.end=rt,tt.frame=ee,!tt.color){var ze=Xe.style.sphere;ze||(ze=Xe.style.stick),ze||(ze=Xe.style.line),tt.color=(0,U.getColorFromStyle)(Xe,ze)}A.addArrow(tt)}}this.frames.push(G)}}setAtomDefaults(l){for(let f=0;f<l.length;f++){let D=l[f];D&&(D.style=D.style||(0,U.deepCopy)(Z.defaultAtomStyle),D.color=D.color||this.ElementColors[D.elem]||this.defaultColor,D.model=this.id,(D.clickable||D.hoverable)&&(D.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(l,f,D={}){var I=Z.parseMolData(l,f,D);this.dontDuplicateAtoms=!D.duplicateAssemblyAtoms;var V=I.modelData;if(V&&(Array.isArray(V)?(this.modelData=V[0],D.frames&&(this.modelDatas=V)):this.modelData=V),I.box?this.box=I.box:this.box=null,this.frames.length==0){for(let A=0;A<I.length;A++)I[A].length!=0&&this.frames.push(I[A]);this.frames[0]&&(this.atoms=this.frames[0])}else if(D.frames)for(let A=0;A<I.length;A++)this.frames.push(I[A]);else for(var K=0;K<I.length;K++)this.addAtoms(I[K]);for(let A=0;A<this.frames.length;A++)this.setAtomDefaults(this.frames[A]);D.vibrate&&D.vibrate.frames&&D.vibrate.amplitude&&this.vibrate(D.vibrate.frames,D.vibrate.amplitude),D.style&&this.setStyle({},D.style)}setDontDuplicateAtoms(l){this.dontDuplicateAtoms=l}setModelData(l){this.modelData=l}propertyMatches(l,f){if(l==f)return!0;if(typeof f=="string"&&typeof l=="number"){var D=f.match(/(-?\d+)\s*-\s*(-?\d+)/);if(D){var I=parseInt(D[1]),V=parseInt(D[2]);if(D&&l>=I&&l<=V)return!0}}return!1}static deepCopyAndCache(l,f){if(typeof l!="object"||l==null||l instanceof Z||l.__cache_created)return l;const D={};for(const I in l){const V=l[I];if(Array.isArray(V)){D[I]=[];for(let K=0;K<V.length;K++)D[I].push(Z.deepCopyAndCache(V[K],f))}else typeof V=="object"&&I!="properties"&&I!="model"?D[I]=Z.deepCopyAndCache(V,f):D[I]=V;if(I=="and"||I=="or"){const K=[];for(const A of D[I]){const L=new Set;for(const G of f.selectedAtoms(A))L.add(G.index);K.push(L)}if(I=="and"){const A=function(G,ee){const ae=new Set;for(const Se of ee)G.has(Se)&&ae.add(Se);return ae};let L=new Set(K[0]);for(const G of K.splice(1))L=A(L,G);D[I].__cached_results=L}else if(I=="or"){const A=new Set;for(const L of K)for(const G of L)A.add(G);D[I].__cached_results=A}}}return D.__cache_created=!0,D}atomIsSelected(l,f){if(typeof f>"u")return!0;var D=!!f.invert,I=!0;for(var V in f)if(V=="and"||V=="or"||V=="not"){if(V=="not"){if(this.atomIsSelected(l,f[V])){I=!1;break}}else if(f[V].__cached_results===void 0&&(f=Z.deepCopyAndCache(f,this)),I=f[V].__cached_results.has(l.index),!I)break}else if(V==="predicate"){if(!f.predicate(l)){I=!1;break}}else if(V=="properties"&&l[V]){for(var K in f.properties)if(!K.startsWith("__cache")){if(typeof l.properties[K]>"u"){I=!1;break}if(l.properties[K]!=f.properties[K]){I=!1;break}}}else if(V=="model"){let ee=f.model;if(typeof ee=="number"&&ee<0&&(ee=this.viewer.getNextModelId()+ee),Array.isArray(ee)){let ae=!1;for(let Se=0;Se<ee.length;Se++)if(ee[Se]==this||ee[Se]==this.id){ae=!0;break}if(!ae){I=!1;break}}else if(ee!=this&&ee!=this.id){I=!1;break}}else if(f.hasOwnProperty(V)&&!Z.ignoredKeys.has(V)&&!V.startsWith("__cache")){if(typeof l[V]>"u"){I=!1;break}let ee=!1;if(V==="bonds"){var A=f[V];if(A!=l.bonds.length){I=!1;break}}else if(Array.isArray(f[V])){var L=f[V],G=l[V];for(let ae=0;ae<L.length;ae++)if(this.propertyMatches(G,L[ae])){ee=!0;break}if(!ee){I=!1;break}}else{let ae=f[V];if(!this.propertyMatches(l[V],ae)){I=!1;break}}}return D?!I:I}static squaredDistance(l,f){var D=f.x-l.x,I=f.y-l.y,V=f.z-l.z;return D*D+I*I+V*V}expandAtomList(l,f){if(f<=0)return l;for(var D=(0,U.getExtent)(l,void 0),I=[[],[],[]],V=0;V<3;V++)I[0][V]=D[0][V]-f,I[1][V]=D[1][V]+f,I[2][V]=D[2][V];var K=[];for(let ee=0;ee<this.atoms.length;ee++){var A=this.atoms[ee].x,L=this.atoms[ee].y,G=this.atoms[ee].z;A>=I[0][0]&&A<=I[1][0]&&L>=I[0][1]&&L<=I[1][1]&&G>=I[0][2]&&G<=I[1][2]&&(A>=D[0][0]&&A<=D[1][0]&&L>=D[0][1]&&L<=D[1][1]&&G>=D[0][2]&&G<=D[1][2]||K.push(this.atoms[ee]))}return K}static getFloat(l){return typeof l=="number"?l:parseFloat(l)}selectedAtoms(l,f){var D=[];l=Z.deepCopyAndCache(l||{},this),f||(f=this.atoms);for(var I=f.length,V=0;V<I;V++){var K=f[V];K&&this.atomIsSelected(K,l)&&D.push(K)}if(l.hasOwnProperty("expand")){const Xe=Z.getFloat(l.expand);let et=this.expandAtomList(D,Xe),tt=D.length;const rt=Xe*Xe;for(let ze=0;ze<et.length;ze++)for(let lt=0;lt<tt;lt++){var A=Z.squaredDistance(et[ze],D[lt]);A<rt&&A>0&&D.push(et[ze])}}if(l.hasOwnProperty("within")&&l.within.hasOwnProperty("sel")&&l.within.hasOwnProperty("distance")){var L=this.selectedAtoms(l.within.sel,this.atoms),G={};const Xe=Z.getFloat(l.within.distance),et=Xe*Xe;for(let tt=0;tt<L.length;tt++)for(let rt=0;rt<D.length;rt++){let ze=Z.squaredDistance(L[tt],D[rt]);ze<et&&ze>0&&(G[rt]=1)}var ee=[];if(l.within.invert)for(let tt=0;tt<D.length;tt++)G[tt]||ee.push(D[tt]);else for(let tt in G)ee.push(D[tt]);D=ee}if(l.hasOwnProperty("byres")){var ae={},Se=[],$e=[];for(let Xe=0;Xe<D.length;Xe++){let et=D[Xe];var qe=et.chain,Pe=et.resi;if(ae[qe]===void 0&&(ae[qe]={}),et.hasOwnProperty("resi")&&ae[qe][Pe]===void 0){for(ae[qe][Pe]=!0,$e.push(et);$e.length>0;)if(et=$e.pop(),qe=et.chain,Pe=et.resi,Se[et.index]===void 0){Se[et.index]=!0;for(var Ve=0;Ve<et.bonds.length;Ve++){var Ie=this.atoms[et.bonds[Ve]];Se[Ie.index]===void 0&&Ie.hasOwnProperty("resi")&&Ie.chain==qe&&Ie.resi==Pe&&($e.push(Ie),D.push(Ie))}}}}}return D}addAtoms(l){this.molObj=null;var f=this.atoms.length,D=[],I;for(I=0;I<l.length;I++)typeof l[I].index>"u"&&(l[I].index=I),typeof l[I].serial>"u"&&(l[I].serial=I),D[l[I].index]=f+I;for(I=0;I<l.length;I++){var V=l[I],K=D[V.index],A=(0,U.extend)({},V);A.index=K,A.bonds=[],A.bondOrder=[],A.model=this.id,A.style=A.style||(0,U.deepCopy)(Z.defaultAtomStyle),typeof A.color>"u"&&(A.color=this.ElementColors[A.elem]||this.defaultColor);for(var L=V.bonds?V.bonds.length:0,G=0;G<L;G++){var ee=D[V.bonds[G]];typeof ee<"u"&&(A.bonds.push(ee),A.bondOrder.push(V.bondOrder?V.bondOrder[G]:1))}this.atoms.push(A)}}assignBonds(){(0,Y.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(l){this.molObj=null;var f=[],D;for(D=0;D<l.length;D++)f[l[D].index]=!0;var I=[];for(D=0;D<this.atoms.length;D++){var V=this.atoms[D];f[V.index]||I.push(V)}this.atoms=[],this.addAtoms(I)}setStyle(l,f,D){typeof f>"u"&&typeof D>"u"&&(f=l,l={}),l=l,typeof f=="string"&&(f=(0,U.specStringToObject)(f));var I=!1,V=this,K=function(L){var G=V.selectedAtoms(l,L);for(let ee=0;ee<L.length;ee++)L[ee]&&(L[ee].capDrawn=!1);for(let ee=0;ee<G.length;ee++){I=!0,(G[ee].clickable||G[ee].hoverable)&&(G[ee].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),D||(G[ee].style={});for(let ae in f)f.hasOwnProperty(ae)&&(G[ee].style[ae]=G[ee].style[ae]||{},Object.assign(G[ee].style[ae],f[ae]))}};if(l.frame!==void 0&&l.frame<this.frames.length){let L=l.frame;L<0&&(L=this.frames.length+L),K(this.frames[L])}else{K(this.atoms);for(var A=0;A<this.frames.length;A++)this.frames[A]!==this.atoms&&K(this.frames[A])}I&&(this.molObj=null)}setClickable(l,f,D){if(f=!!f,D=(0,U.makeFunction)(D),D===null){console.log("Callback is not a function");return}var I=this.selectedAtoms(l,this.atoms),V=I.length;for(let K=0;K<V;K++)I[K].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},I[K].clickable=f,D&&(I[K].callback=D);V>0&&(this.molObj=null)}setHoverable(l,f,D,I){if(f=!!f,D=(0,U.makeFunction)(D),I=(0,U.makeFunction)(I),D===null){console.log("Hover_callback is not a function");return}if(I===null){console.log("Unhover_callback is not a function");return}var V=this.selectedAtoms(l,this.atoms),K=V.length;for(let A=0;A<K;A++)V[A].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},V[A].hoverable=f,D&&(V[A].hover_callback=D),I&&(V[A].unhover_callback=I);K>0&&(this.molObj=null)}enableContextMenu(l,f){f=!!f;var D,I=this.selectedAtoms(l,this.atoms),V=I.length;for(D=0;D<V;D++)I[D].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},I[D].contextMenuEnabled=f;V>0&&(this.molObj=null)}setColorByElement(l,f){if(!(this.molObj!==null&&Z.sameObj(f,this.lastColors))){this.lastColors=f;var D=this.selectedAtoms(l,D);D.length>0&&(this.molObj=null);for(var I=0;I<D.length;I++){var V=D[I];typeof f[V.elem]<"u"&&(V.color=f[V.elem])}}}setColorByProperty(l,f,D,I){var V,K,A=this.selectedAtoms(l,A);for(this.lastColors=null,A.length>0&&(this.molObj=null),typeof D=="string"&&typeof C.Gradient.builtinGradients[D]<"u"&&(D=new C.Gradient.builtinGradients[D]),D=D,I||(I=D.range()),I||(I=(0,U.getPropertyRange)(A,f)),V=0;V<A.length;V++){K=A[V];var L=(0,U.getAtomProperty)(K,f);L!=null&&(K.color=D.valueToHex(parseFloat(K.properties[f]),I))}}setColorByFunction(l,f){var D=this.selectedAtoms(l,D);if(typeof f=="function"){this.lastColors=null,D.length>0&&(this.molObj=null);for(let I=0;I<D.length;I++){let V=D[I];V.color=f(V)}}}toCDObject(l=!1){var f={a:[],b:[]};l&&(f.s=[]);for(let I=0;I<this.atoms.length;I++){let V={},K=this.atoms[I];if(V.x=K.x,V.y=K.y,V.z=K.z,K.elem!="C"&&(V.l=K.elem),l){for(var D=0;D<f.s.length&&JSON.stringify(K.style)!==JSON.stringify(f.s[D]);)D++;D===f.s.length&&f.s.push(K.style),D!==0&&(V.s=D)}f.a.push(V);for(let A=0;A<K.bonds.length;A++){let L=I,G=K.bonds[A];if(L>=G)continue;let ee={b:L,e:G},ae=K.bondOrder[A];ae!=1&&(ee.o=ae),f.b.push(ee)}}return f}globj(l,f){(this.molObj===null||f.regen)&&(this.molObj=this.createMolObj(this.atoms,f),this.renderedMolObj&&(l.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),l.add(this.renderedMolObj))}exportVRML(){var l=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return l.vrml()}removegl(l){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),l.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(l,f,D){let I=this.selectedAtoms(f),V=this.viewer,K=(0,U.deepCopy)(D);for(let L=0;L<I.length;L++){let G=I[L];var A=null;typeof G[l]<"u"?A=String(G[l]):typeof G.properties[l]<"u"&&(A=String(G.properties[l])),A!=null&&(K.position=G,V.addLabel(A,K))}}addResLabels(l,f,D=!1){let I=this.viewer;var V=[],K=function(L,G){for(var ee=L.selectedAtoms(l,ee),ae={},Se=0;Se<ee.length;Se++){var $e=ee[Se],qe=$e.chain,Pe=$e.resn,Ve=$e.resi,Ie=Pe+""+Ve;ae[qe]||(ae[qe]={}),ae[qe][Ie]||(ae[qe][Ie]=[]),ae[qe][Ie].push($e)}var Xe=(0,U.deepCopy)(f);for(let tt in ae)if(ae.hasOwnProperty(tt)){var et=ae[tt];for(let rt in et)if(et.hasOwnProperty(rt)){let ze=et[rt],lt=new x.Vector3(0,0,0);for(let At=0;At<ze.length;At++){let Vt=ze[At];lt.x+=Vt.x,lt.y+=Vt.y,lt.z+=Vt.z}lt.divideScalar(ze.length),Xe.position=lt,Xe.frame=G;let bt=I.addLabel(rt,Xe,void 0,!0);V.push(bt)}}};if(D){var A=this.getNumFrames();let L=this.atoms;for(let G=0;G<A;G++)this.frames[G]&&(this.atoms=this.frames[G],K(this,G));this.atoms=L}else K(this);return V}setupDFS(){this.atomdfs=[];var l=this,f=new Int8Array(this.atoms.length);f.fill(0);for(var D=function(A,L,G){G.push([A,L]);var ee=l.atoms[A];f[A]=1;for(var ae=0;ae<ee.bonds.length;ae++){var Se=ee.bonds[ae];l.atoms[Se]&&!f[Se]&&D(Se,A,G)}},I=0;I<this.atoms.length;I++){var V=this.atoms[I];if(V&&!f[I]){var K=[];D(I,-1,K),this.atomdfs.push(K)}}}setCoordinatesFromURL(l,f){this.frames=[];var D=this;return this.box&&this.setupDFS(),l.startsWith("http")||(l="http://"+l),(0,U.get)(l+"/traj/numframes/"+f,function(I){if(!isNaN(parseInt(I)))return D.frames.push(D.atoms),D.frames.numFrames=I,D.frames.url=l,D.frames.path=f,D.setFrame(0)})}setCoordinates(l,f){if(f=f||"",!l)return[];if(/\.gz$/.test(f)){f=f.replace(/\.gz$/,"");try{l=(0,U.inflateString)(l)}catch(ae){console.log(ae)}}var D={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(D.hasOwnProperty(f)){this.frames=[];for(var I=this.atoms.length,V=Z.parseCrd(l,f),K=0;K<V.length;){for(var A=[],L=0;L<I;L++){var G={};for(var ee in this.atoms[L])G[ee]=this.atoms[L][ee];A[L]=G,A[L].x=V[K++],A[L].y=V[K++],A[L].z=V[K++]}this.frames.push(A)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(l){}static parseCrd(l,f){var D=[],I=0;if(f=="pdb")for(var V=l.indexOf(`
ATOM`);V!=-1;){for(;l.slice(V,V+5)==`
ATOM`||l.slice(V,V+7)==`
HETATM`;)D[I++]=parseFloat(l.slice(V+31,V+39)),D[I++]=parseFloat(l.slice(V+39,V+47)),D[I++]=parseFloat(l.slice(V+47,V+55)),V=l.indexOf(`
`,V+54),l.slice(V,V+4)==`
TER`&&(V=l.indexOf(`
`,V+5));V=l.indexOf(`
ATOM`,V)}else if(f=="netcdf"){var K=new W.NetCDFReader(l);D=[].concat.apply([],K.getDataVariable("coordinates"))}else{if(f=="array"||Array.isArray(l))return l.flat(2);{let A=l.indexOf(`
`);f=="inpcrd"&&(A=l.indexOf(`
`,A+1)),l=l.slice(A+1),D=l.match(/\S+/g).map(parseFloat)}}return D}static parseMolData(l,f="",D){if(!l)return[];if(/\.gz$/.test(f)){f=f.replace(/\.gz$/,"");try{f.match(/bcif/i)?l=(0,U.inflateString)(l,!1):l=(0,U.inflateString)(l)}catch(K){console.log(K)}}typeof B.Parsers[f]>"u"&&(f=f.split(".").pop(),typeof B.Parsers[f]>"u"&&(console.log("Unknown format: "+f),l instanceof Uint8Array?f="bcif":l.match(/^@<TRIPOS>MOLECULE/gm)?f="mol2":l.match(/^data_/gm)&&l.match(/^loop_/gm)?f="cif":l.match(/^HETATM/gm)||l.match(/^ATOM/gm)?f="pdb":l.match(/ITEM: TIMESTEP/gm)?f="lammpstrj":l.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?f="sdf":l.match(/^%VERSION\s+VERSION_STAMP/gm)?f="prmtop":f="xyz",console.log("Best guess: "+f)));var I=B.Parsers[f],V=I(l,D);return V}}Z.defaultAtomStyle={line:{}},Z.defaultlineWidth=1,Z.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},Z.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])}),"./src/GLShape.ts":((t,i,a)=>{a.r(i),a.d(i,{GLShape:()=>W,splitMesh:()=>Y});var n=a("./src/WebGL/index.ts"),y=a("./src/WebGL/shapes/index.ts"),x=a("./src/WebGL/math/index.ts"),k=a("./src/colors.ts"),S=a("./src/ProteinSurface4.ts"),E=a("./src/VolumeData.ts"),U=a("./src/GLDraw.ts"),C=a("./src/glcartoon.ts"),B=a("./src/utilities.ts");class W{static finalizeGeo(T){var l=T.updateGeoGroup(0);l.vertices>0&&l.truncateArrayBuffers(!0,!0)}static updateColor(T,l){l=l||k.CC.color(l),T.colorsNeedUpdate=!0;var f,D,I;l.constructor!==Array&&(f=l.r,D=l.g,I=l.b);for(let V in T.geometryGroups){let K=T.geometryGroups[V],A=K.colorArray;for(let L=0,G=K.vertices;L<G;++L){if(l.constructor===Array){let ee=l[L];f=ee.r,D=ee.g,I=ee.b}A[L*3]=f,A[L*3+1]=D,A[L*3+2]=I}}}static drawArrow(T,l,f){var D=f.start,I=f.end,V=f.radius,K=f.radiusRatio,A=f.mid,L=f.midpos;if(!(D&&I))return;var G=l.updateGeoGroup(51),ee=new x.Vector3(I.x,I.y,I.z).sub(D);if(L){let Rr=ee.length();L>0?A=L/Rr:A=(Rr+L)/Rr}ee.multiplyScalar(A);var ae=new x.Vector3(D.x,D.y,D.z).add(ee),Se=ee.clone().negate();let $e=new x.Vector3(D.x,D.y,D.z);T.intersectionShape.cylinder.push(new y.Cylinder($e,ae.clone(),V)),T.intersectionShape.sphere.push(new y.Sphere($e,V));var qe=[];qe[0]=ee.clone(),Math.abs(qe[0].x)>1e-4?qe[0].y+=1:qe[0].x+=1,qe[0].cross(ee),qe[0].normalize(),qe[4]=qe[0].clone(),qe[4].crossVectors(qe[0],ee),qe[4].normalize(),qe[8]=qe[0].clone().negate(),qe[12]=qe[4].clone().negate(),qe[2]=qe[0].clone().add(qe[4]).normalize(),qe[6]=qe[4].clone().add(qe[8]).normalize(),qe[10]=qe[8].clone().add(qe[12]).normalize(),qe[14]=qe[12].clone().add(qe[0]).normalize(),qe[1]=qe[0].clone().add(qe[2]).normalize(),qe[3]=qe[2].clone().add(qe[4]).normalize(),qe[5]=qe[4].clone().add(qe[6]).normalize(),qe[7]=qe[6].clone().add(qe[8]).normalize(),qe[9]=qe[8].clone().add(qe[10]).normalize(),qe[11]=qe[10].clone().add(qe[12]).normalize(),qe[13]=qe[12].clone().add(qe[14]).normalize(),qe[15]=qe[14].clone().add(qe[0]).normalize();var Pe=G.vertices,Ve=G.vertexArray,Ie=G.faceArray,Xe=G.normalArray,et=G.lineArray,tt,rt,ze;for(rt=0,ze=qe.length;rt<ze;++rt){tt=3*(Pe+3*rt);var lt=qe[rt].clone().multiplyScalar(V).add(D),bt=qe[rt].clone().multiplyScalar(V).add(ae),At=qe[rt].clone().multiplyScalar(V*K).add(ae);if(Ve[tt]=lt.x,Ve[tt+1]=lt.y,Ve[tt+2]=lt.z,Ve[tt+3]=bt.x,Ve[tt+4]=bt.y,Ve[tt+5]=bt.z,Ve[tt+6]=At.x,Ve[tt+7]=At.y,Ve[tt+8]=At.z,rt>0){var Vt=Ve[tt-3],Yt=Ve[tt-2],er=Ve[tt-1],lr=new x.Vector3(Vt,Yt,er),yr=new x.Vector3(I.x,I.y,I.z),$r=ae.clone(),ia=new x.Vector3(At.x,At.y,At.z);T.intersectionShape.triangle.push(new y.Triangle(ia,yr,lr)),T.intersectionShape.triangle.push(new y.Triangle(lr.clone(),$r,ia.clone()))}}G.vertices+=48,tt=G.vertices*3,Ve[tt]=D.x,Ve[tt+1]=D.y,Ve[tt+2]=D.z,Ve[tt+3]=ae.x,Ve[tt+4]=ae.y,Ve[tt+5]=ae.z,Ve[tt+6]=I.x,Ve[tt+7]=I.y,Ve[tt+8]=I.z,G.vertices+=3;var Sa,Xr,fr,Hr,ya,Ta,ua,Ua,Ya,Ia,Na,Ra,oa,rn,Za,Nt,Gt,ur,Qr,Dr=G.vertices-3,Ea=G.vertices-2,da=G.vertices-1,Tt=Dr*3,Lr=Ea*3,Gr=da*3;for(rt=0,ze=qe.length-1;rt<ze;++rt){var wa=Pe+3*rt;tt=wa*3,Xr=G.faceidx,fr=G.lineidx,Hr=wa,Ia=Hr*3,ya=wa+1,Na=ya*3,Ta=wa+2,Ra=Ta*3,ua=wa+4,oa=ua*3,Ua=wa+5,rn=Ua*3,Ya=wa+3,Za=Ya*3,Nt=Gt=qe[rt],ur=Qr=qe[rt+1],Xe[Ia]=Nt.x,Xe[Na]=Gt.x,Xe[Za]=Qr.x,Xe[Ia+1]=Nt.y,Xe[Na+1]=Gt.y,Xe[Za+1]=Qr.y,Xe[Ia+2]=Nt.z,Xe[Na+2]=Gt.z,Xe[Za+2]=Qr.z,Xe[Na]=Gt.x,Xe[oa]=ur.x,Xe[Za]=Qr.x,Xe[Na+1]=Gt.y,Xe[oa+1]=ur.y,Xe[Za+1]=Qr.y,Xe[Na+2]=Gt.z,Xe[oa+2]=ur.z,Xe[Za+2]=Qr.z,Xe[Ra]=Gt.x,Xe[rn]=ur.x,Xe[Ra+1]=Gt.y,Xe[rn+1]=ur.y,Xe[Ra+2]=Gt.z,Xe[rn+2]=ur.z,Ie[Xr]=Hr,Ie[Xr+1]=ya,Ie[Xr+2]=Ya,Ie[Xr+3]=ya,Ie[Xr+4]=ua,Ie[Xr+5]=Ya,Ie[Xr+6]=Hr,Ie[Xr+7]=Ya,Ie[Xr+8]=Dr,Ie[Xr+9]=Ta,Ie[Xr+10]=Ea,Ie[Xr+11]=Ua,Ie[Xr+12]=Ta,Ie[Xr+13]=da,Ie[Xr+14]=Ua,et[fr]=Hr,et[fr+1]=ya,et[fr+2]=Hr,et[fr+3]=Ya,et[fr+4]=ua,et[fr+5]=Ya,et[fr+6]=Hr,et[fr+7]=Ya,et[fr+8]=Ta,et[fr+9]=ya,et[fr+10]=Ta,et[fr+11]=Ua,et[fr+12]=ua,et[fr+13]=Ua,et[fr+14]=Ta,et[fr+15]=da,et[fr+16]=Ta,et[fr+17]=Ua,et[fr+18]=da,et[fr+19]=Ua,G.faceidx+=15,G.lineidx+=20}Sa=[Pe+45,Pe+46,Pe+1,Pe,Pe+47,Pe+2],Xr=G.faceidx,fr=G.lineidx,Hr=Sa[0],Ia=Hr*3,ya=Sa[1],Na=ya*3,Ta=Sa[4],Ra=Ta*3,ua=Sa[2],oa=ua*3,Ua=Sa[5],rn=Ua*3,Ya=Sa[3],Za=Ya*3,Nt=Gt=qe[15],ur=Qr=qe[0],Xe[Ia]=Nt.x,Xe[Na]=Gt.x,Xe[Za]=Qr.x,Xe[Ia+1]=Nt.y,Xe[Na+1]=Gt.y,Xe[Za+1]=Qr.y,Xe[Ia+2]=Nt.z,Xe[Na+2]=Gt.z,Xe[Za+2]=Qr.z,Xe[Na]=Gt.x,Xe[oa]=ur.x,Xe[Za]=Qr.x,Xe[Na+1]=Gt.y,Xe[oa+1]=ur.y,Xe[Za+1]=Qr.y,Xe[Na+2]=Gt.z,Xe[oa+2]=ur.z,Xe[Za+2]=Qr.z,Xe[Ra]=Gt.x,Xe[rn]=ur.x,Xe[Ra+1]=Gt.y,Xe[rn+1]=ur.y,Xe[Ra+2]=Gt.z,Xe[rn+2]=ur.z,ee.normalize(),Se.normalize(),Xe[Tt]=Se.x,Xe[Lr]=Xe[Gr]=ee.x,Xe[Tt+1]=Se.y,Xe[Lr+1]=Xe[Gr+1]=ee.y,Xe[Tt+2]=Se.z,Xe[Lr+2]=Xe[Gr+2]=ee.z,Ie[Xr]=Hr,Ie[Xr+1]=ya,Ie[Xr+2]=Ya,Ie[Xr+3]=ya,Ie[Xr+4]=ua,Ie[Xr+5]=Ya,Ie[Xr+6]=Hr,Ie[Xr+7]=Ya,Ie[Xr+8]=Dr,Ie[Xr+9]=Ta,Ie[Xr+10]=Ea,Ie[Xr+11]=Ua,Ie[Xr+12]=Ta,Ie[Xr+13]=da,Ie[Xr+14]=Ua,et[fr]=Hr,et[fr+1]=ya,et[fr+2]=Hr,et[fr+3]=Ya,et[fr+4]=ua,et[fr+5]=Ya,et[fr+6]=Hr,et[fr+7]=Ya,et[fr+8]=Ta,et[fr+9]=ya,et[fr+10]=Ta,et[fr+11]=Ua,et[fr+12]=ua,et[fr+13]=Ua,et[fr+14]=Ta,et[fr+15]=da,et[fr+16]=Ta,et[fr+17]=Ua,et[fr+18]=da,et[fr+19]=Ua,G.faceidx+=15,G.lineidx+=20}static updateBoundingFromPoints(T,l,f,D){T.center.set(0,0,0);let I=1/0,V=1/0,K=1/0,A=-1/0,L=-1/0,G=-1/0;T.box&&(I=T.box.min.x,A=T.box.max.x,V=T.box.min.y,L=T.box.max.y,K=T.box.min.z,G=T.box.max.z);for(let $e=0,qe=D;$e<qe;$e++){var ee=f[$e*3],ae=f[$e*3+1],Se=f[$e*3+2];ee<I&&(I=ee),ae<V&&(V=ae),Se<K&&(K=Se),ee>A&&(A=ee),ae>L&&(L=ae),Se>G&&(G=Se)}T.center.set((A+I)/2,(L+V)/2,(G+K)/2),T.radius=T.center.distanceTo({x:A,y:L,z:G}),T.box={min:{x:I,y:V,z:K},max:{x:A,y:L,z:G}}}static addCustomGeo(T,l,f,D,I){var V=l.addGeoGroup(),K=f.vertexArr,A=f.normalArr,L=f.faceArr;V.vertices=K.length,V.faceidx=L.length;var G,ee,ae,Se,$e,qe,Pe,Ve,Ie,Xe=V.vertexArray,et=V.colorArray;for(D.constructor!==Array&&(Ve=D.r,Ie=D.g,Se=D.b),qe=0,Pe=V.vertices;qe<Pe;++qe)G=qe*3,ee=K[qe],Xe[G]=ee.x,Xe[G+1]=ee.y,Xe[G+2]=ee.z,D.constructor===Array&&($e=D[qe],Ve=$e.r,Ie=$e.g,Se=$e.b),et[G]=Ve,et[G+1]=Ie,et[G+2]=Se;if(I)for(qe=0,Pe=V.faceidx/3;qe<Pe;++qe){G=qe*3,ae=L[G],Se=L[G+1],$e=L[G+2];var tt=new x.Vector3,rt=new x.Vector3,ze=new x.Vector3;T.intersectionShape.triangle.push(new y.Triangle(tt.copy(K[ae]),rt.copy(K[Se]),ze.copy(K[$e])))}if(I){var lt=new x.Vector3(0,0,0),bt=0;for(let Yt=0;Yt<l.geometryGroups.length;Yt++)lt.add(l.geometryGroups[Yt].getCentroid()),bt++;lt.divideScalar(bt),W.updateBoundingFromPoints(T.boundingSphere,{centroid:lt},Xe,V.vertices)}if(V.faceArray=new Uint16Array(L),V.truncateArrayBuffers(!0,!0),A.length<V.vertices)V.setNormals();else{var At=V.normalArray=new Float32Array(V.vertices*3),Vt;for(qe=0,Pe=V.vertices;qe<Pe;++qe)G=qe*3,Vt=A[qe],At[G]=Vt.x,At[G+1]=Vt.y,At[G+2]=Vt.z}V.setLineIndices(),V.lineidx=V.lineArray.length}static updateFromStyle(T,l){typeof l.color<"u"?(T.color=l.color||new k.Color,l.color instanceof k.Color||(T.color=k.CC.color(l.color))):T.color=k.CC.color(0),T.wireframe=!!l.wireframe,T.opacity=l.alpha?(0,x.clamp)(l.alpha,0,1):1,typeof l.opacity<"u"&&(T.opacity=(0,x.clamp)(l.opacity,0,1)),T.side=l.side!==void 0?l.side:n.DoubleSide,T.linewidth=typeof l.linewidth>"u"?1:l.linewidth,T.clickable=!!l.clickable,T.callback=(0,B.makeFunction)(l.callback),T.hoverable=!!l.hoverable,T.hover_callback=(0,B.makeFunction)(l.hover_callback),T.unhover_callback=(0,B.makeFunction)(l.unhover_callback),T.contextMenuEnabled=!!l.contextMenuEnabled,T.hidden=l.hidden,T.frame=l.frame}constructor(T){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=n.DoubleSide,this.stylespec=T||{},this.boundingSphere=new y.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},W.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new n.Geometry(!0),this.linegeo=new n.Geometry(!0)}updateStyle(T){for(var l in T)this.stylespec[l]=T[l];if(W.updateFromStyle(this,this.stylespec),T.voldata&&T.volscheme){(0,B.adjustVolumeStyle)(T);const f=T.volscheme,D=T.voldata,I=k.CC,V=f.range()||[-1,1];this.geo.setColors(function(K,A,L){let G=D.getVal(K,A,L);return I.color(f.valueToHex(G,V))}),delete this.color}}addCustom(T){T.vertexArr=T.vertexArr||[],T.faceArr=T.faceArr||[],T.normalArr=T.normalArr||[],W.drawCustom(this,this.geo,T)}addSphere(T){T.center||(T.center=new x.Vector3(0,0,0)),T.radius=T.radius?(0,x.clamp)(T.radius,0,1/0):1.5,T.color=k.CC.color(T.color),this.intersectionShape.sphere.push(new y.Sphere(T.center,T.radius)),U.GLDraw.drawSphere(this.geo,T.center,T.radius,T.color,T.quality),this.components.push({centroid:new x.Vector3(T.center.x,T.center.y,T.center.z)});var l=this.geo.updateGeoGroup(0);W.updateBoundingFromPoints(this.boundingSphere,this.components,l.vertexArray,l.vertices)}addBox(T){var l=T.dimensions||{w:1,h:1,d:1},f;typeof l.w=="number"?f={x:l.w,y:0,z:0}:f=l.w;var D;typeof l.h=="number"?D={x:0,y:l.h,z:0}:D=l.h;var I;typeof l.d=="number"?I={x:0,y:0,z:l.d}:I=l.d;var V=T.corner;V==null&&(T.center!==void 0?V={x:T.center.x-.5*(f.x+D.x+I.x),y:T.center.y-.5*(f.y+D.y+I.y),z:T.center.z-.5*(f.z+D.z+I.z)}:V={x:0,y:0,z:0});var K=[{x:V.x,y:V.y,z:V.z},{x:V.x+f.x,y:V.y+f.y,z:V.z+f.z},{x:V.x+D.x,y:V.y+D.y,z:V.z+D.z},{x:V.x+f.x+D.x,y:V.y+f.y+D.y,z:V.z+f.z+D.z},{x:V.x+I.x,y:V.y+I.y,z:V.z+I.z},{x:V.x+f.x+I.x,y:V.y+f.y+I.y,z:V.z+f.z+I.z},{x:V.x+D.x+I.x,y:V.y+D.y+I.y,z:V.z+D.z+I.z},{x:V.x+f.x+D.x+I.x,y:V.y+f.y+D.y+I.y,z:V.z+f.z+D.z+I.z}],A=[],L=[];A.splice(A.length,0,K[0],K[1],K[2],K[3]),L.splice(L.length,0,0,2,1,1,2,3);var G=4;A.splice(A.length,0,K[2],K[3],K[6],K[7]),L.splice(L.length,0,G+0,G+2,G+1,G+1,G+2,G+3),G+=4,A.splice(A.length,0,K[4],K[5],K[0],K[1]),L.splice(L.length,0,G+0,G+2,G+1,G+1,G+2,G+3),G+=4,A.splice(A.length,0,K[6],K[7],K[4],K[5]),L.splice(L.length,0,G+0,G+2,G+1,G+1,G+2,G+3),G+=4,A.splice(A.length,0,K[3],K[1],K[7],K[5]),L.splice(L.length,0,G+0,G+2,G+1,G+1,G+2,G+3),G+=4,A.splice(A.length,0,K[2],K[6],K[0],K[4]),L.splice(L.length,0,G+0,G+2,G+1,G+1,G+2,G+3),G+=4;var ee=(0,B.extend)({},T);ee.vertexArr=A,ee.faceArr=L,ee.normalArr=[],W.drawCustom(this,this.geo,ee);var ae=new x.Vector3;this.components.push({centroid:ae.addVectors(K[0],K[7]).multiplyScalar(.5)});var Se=this.geo.updateGeoGroup(0);W.updateBoundingFromPoints(this.boundingSphere,this.components,Se.vertexArray,Se.vertices)}addCylinder(T){var l,f;T.start?l=new x.Vector3(T.start.x||0,T.start.y||0,T.start.z||0):l=new x.Vector3(0,0,0),T.end?(f=new x.Vector3(T.end.x,T.end.y||0,T.end.z||0),typeof f.x>"u"&&(f.x=3)):f=new x.Vector3(0,0,0);var D=T.radius||.1,I=k.CC.color(T.color);this.intersectionShape.cylinder.push(new y.Cylinder(l,f,D)),U.GLDraw.drawCylinder(this.geo,l,f,D,I,T.fromCap,T.toCap);var V=new x.Vector3;this.components.push({centroid:V.addVectors(l,f).multiplyScalar(.5)});var K=this.geo.updateGeoGroup(0);W.updateBoundingFromPoints(this.boundingSphere,this.components,K.vertexArray,K.vertices)}addDashedCylinder(T){T.dashLength=T.dashLength||.25,T.gapLength=T.gapLength||.25;var l;T.start?l=new x.Vector3(T.start.x||0,T.start.y||0,T.start.z||0):l=new x.Vector3(0,0,0);var f;T.end?(f=new x.Vector3(T.end.x,T.end.y||0,T.end.z||0),typeof f.x>"u"&&(f.x=3)):f=new x.Vector3(3,0,0);for(var D=T.radius||.1,I=k.CC.color(T.color),V=Math.sqrt(Math.pow(l.x-f.x,2)+Math.pow(l.y-f.y,2)+Math.pow(l.z-f.z,2)),K=V/(T.gapLength+T.dashLength),A=new x.Vector3(T.start.x||0,T.start.y||0,T.start.z||0),L=new x.Vector3(T.end.x,T.end.y||0,T.end.z||0),G=new x.Vector3((f.x-l.x)/(V/T.gapLength),(f.y-l.y)/(V/T.gapLength),(f.z-l.z)/(V/T.gapLength)),ee=new x.Vector3((f.x-l.x)/(V/T.dashLength),(f.y-l.y)/(V/T.dashLength),(f.z-l.z)/(V/T.dashLength)),ae=0;ae<K;ae++)L=new x.Vector3(A.x+ee.x,A.y+ee.y,A.z+ee.z),this.intersectionShape.cylinder.push(new y.Cylinder(A,L,D)),U.GLDraw.drawCylinder(this.geo,A,L,D,I,T.fromCap,T.toCap),A=new x.Vector3(L.x+G.x,L.y+G.y,L.z+G.z);var Se=new x.Vector3;this.components.push({centroid:Se.addVectors(l,f).multiplyScalar(.5)});var $e=this.geo.updateGeoGroup(0);W.updateBoundingFromPoints(this.boundingSphere,this.components,$e.vertexArray,$e.vertices)}addCurve(T){T.points=T.points||[],T.smooth=T.smooth||10,typeof T.fromCap>"u"&&(T.fromCap=2),typeof T.toCap>"u"&&(T.toCap=2);var l=(0,C.subdivide_spline)(T.points,T.smooth);if(l.length<3){console.log("Too few points in addCurve");return}var f=T.radius||.1,D=k.CC.color(T.color),I=0,V=l.length-1,K=l[0].distanceTo(l[1]),A=Math.ceil(2*f/K);if(T.toArrow){V-=A;let ae={start:l[V],end:l[l.length-1],radius:f,color:D,mid:1e-4};this.addArrow(ae)}if(T.fromArrow){I+=A;let ae={start:l[I],end:l[0],radius:f,color:D,mid:1e-4};this.addArrow(ae)}for(var L=Math.ceil(l.length/2),G={radius:f,color:D,fromCap:2,toCap:2},ee=I;ee<V;ee++)G.start=l[ee],G.end=l[ee+1],G.fromCap=2,G.toCap=2,ee<L?(G.fromCap=2,G.toCap=0):ee>L?(G.fromCap=0,G.toCap=2):(G.fromCap=2,G.toCap=2),this.addCylinder(G)}addLine(T){var l,f;T.start?l=new x.Vector3(T.start.x||0,T.start.y||0,T.start.z||0):l=new x.Vector3(0,0,0),T.end?(f=new x.Vector3(T.end.x,T.end.y||0,T.end.z||0),typeof f.x>"u"&&(f.x=3)):f=new x.Vector3(3,0,0);var D=this.geo.updateGeoGroup(2),I=D.vertices,V=I*3,K=D.vertexArray;K[V]=l.x,K[V+1]=l.y,K[V+2]=l.z,K[V+3]=f.x,K[V+4]=f.y,K[V+5]=f.z,D.vertices+=2;var A=D.lineArray,L=D.lineidx;A[L]=I,A[L+1]=I+1,D.lineidx+=2;var G=new x.Vector3;this.components.push({centroid:G.addVectors(l,f).multiplyScalar(.5)}),D=this.geo.updateGeoGroup(0),W.updateBoundingFromPoints(this.boundingSphere,this.components,D.vertexArray,D.vertices)}addArrow(T){if(T.start?T.start=new x.Vector3(T.start.x||0,T.start.y||0,T.start.z||0):T.start=new x.Vector3(0,0,0),T.dir instanceof x.Vector3&&typeof T.length=="number"){var l=T.dir.clone().multiplyScalar(T.length).add(T.start);T.end=l}else T.end?(T.end=new x.Vector3(T.end.x,T.end.y||0,T.end.z||0),typeof T.end.x>"u"&&(T.end.x=3)):T.end=new x.Vector3(3,0,0);T.radius=T.radius||.1,T.radiusRatio=T.radiusRatio||1.618034,T.mid=0<T.mid&&T.mid<1?T.mid:.618034,W.drawArrow(this,this.geo,T);var f=new x.Vector3;this.components.push({centroid:f.addVectors(T.start,T.end).multiplyScalar(.5)});var D=this.geo.updateGeoGroup(0);W.updateBoundingFromPoints(this.boundingSphere,this.components,D.vertexArray,D.vertices)}static distance_from(T,l){return Math.sqrt(Math.pow(T.x-l.x,2)+Math.pow(T.y-l.y,2)+Math.pow(T.z-l.z,2))}static inSelectedRegion(T,l,f){for(var D=0;D<l.length;D++)if(W.distance_from(l[D],T)<=f)return!0;return!1}addIsosurface(T,l,f,D){var I=l.isoval!==void 0&&typeof l.isoval=="number"?l.isoval:0,V=!!l.voxel,K=l.smoothness===void 0?1:l.smoothness,A=T.size.x,L=T.size.y,G=T.size.z,ee=new Int16Array(A*L*G),ae=T.data,Se,$e;for(Se=0,$e=ee.length;Se<$e;++Se)ee[Se]=-1;var qe=new Uint8Array(A*L*G);for(Se=0,$e=ae.length;Se<$e;++Se){var Pe=I>=0?ae[Se]-I:I-ae[Se];Pe>0&&(qe[Se]|=W.ISDONE)}var Ve=[],Ie=[];S.MarchingCube.march(qe,Ve,Ie,{fulltable:!0,voxel:V,unitCube:T.unit,origin:T.origin,matrix:T.matrix,nX:A,nY:L,nZ:G}),!V&&K>0&&S.MarchingCube.laplacianSmooth(K,Ve,Ie);var Xe=[],et=[],tt=[];if(l.selectedRegion&&l.coords===void 0&&(l.coords=l.selectedRegion),l.coords===void 0&&l.selection!==void 0&&(D?l.coords=D.selectedAtoms(l.selection):console.log("addIsosurface needs viewer is selection provided.")),l.coords!==void 0){var rt=l.coords[0].x,ze=l.coords[0].y,lt=l.coords[0].z,bt=l.coords[0].x,At=l.coords[0].y,Vt=l.coords[0].z;for(let fr=0;fr<l.coords.length;fr++)l.coords[fr].x>rt?rt=l.coords[fr].x:l.coords[fr].x<bt&&(bt=l.coords[fr].x),l.coords[fr].y>ze?ze=l.coords[fr].y:l.coords[fr].y<At&&(At=l.coords[fr].y),l.coords[fr].z>lt?lt=l.coords[fr].z:l.coords[fr].z<Vt&&(Vt=l.coords[fr].z);var Yt=2;l.radius!==void 0&&(Yt=l.radius),l.selectedOffset!==void 0&&(Yt=l.selectedOffset),l.seldist!==void 0&&(Yt=l.seldist),bt-=Yt,rt+=Yt,At-=Yt,ze+=Yt,Vt-=Yt,lt+=Yt;for(let fr=0;fr<Ve.length;fr++)Ve[fr].x>bt&&Ve[fr].x<rt&&Ve[fr].y>At&&Ve[fr].y<ze&&Ve[fr].z>Vt&&Ve[fr].z<lt&&W.inSelectedRegion(Ve[fr],l.coords,Yt)?(Xe.push(et.length),et.push(Ve[fr])):Xe.push(-1);for(let fr=0;fr+2<Ie.length;fr+=3)Xe[Ie[fr]]!==-1&&Xe[Ie[fr+1]]!==-1&&Xe[Ie[fr+2]]!==-1&&(tt.push(Ie[fr]-(Ie[fr]-Xe[Ie[fr]])),tt.push(Ie[fr+1]-(Ie[fr+1]-Xe[Ie[fr+1]])),tt.push(Ie[fr+2]-(Ie[fr+2]-Xe[Ie[fr+2]])));Ve=et,Ie=tt}W.drawCustom(this,this.geo,{vertexArr:Ve,faceArr:Ie,normalArr:[],clickable:l.clickable,hoverable:l.hoverable}),this.updateStyle(l);var er=new x.Vector3(T.origin.x,T.origin.y,T.origin.z),lr=new x.Vector3(T.size.x*T.unit.x,T.size.y*T.unit.y,T.size.z*T.unit.z),yr=new x.Vector3(0,0,0),$r=er.clone(),ia=er.clone().add(lr);for(let fr=0;fr<Ve.length;fr++)yr.add(Ve[fr]),$r.max(Ve[fr]),ia.min(Ve[fr]);yr.divideScalar(Ve.length);var Sa=yr.distanceTo(ia),Xr=yr.distanceTo($r);this.boundingSphere.center=yr,this.boundingSphere.radius=Math.max(Sa,Xr),typeof f=="function"&&f()}addVolumetricData(T,l,f){T=new E.VolumeData(T,l),this.addIsosurface(T,f)}finalize(){return W.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(T){if(this.renderedShapeObj&&(T.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){W.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&W.updateColor(this.geo,this.color),this.shapeObj=new n.Object3D;var l=null;this.side==n.DoubleSide?l=new n.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:n.Coloring.VertexColors}):l=new n.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:n.Coloring.VertexColors});var f=new n.Mesh(this.geo,l);if(this.shapeObj.add(f),this.linegeo&&this.linegeo.vertices>0){var D=new n.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),I=new n.Line(this.linegeo,D,n.LineStyle.LinePieces);this.shapeObj.add(I)}this.renderedShapeObj=this.shapeObj.clone(),T.add(this.renderedShapeObj)}}removegl(T){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),T.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}W.ISDONE=2,W.drawCustom=function(Z,T,l){var f=l,D=f.vertexArr,I=f.faceArr;(D.length===0||I.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var V=l.color;typeof V>"u"&&(V=Z.color),V=k.CC.color(V);for(var K=Y(f),A=0,L=K.length;A<L;A++)W.addCustomGeo(Z,T,K[A],K[A].colorArr?K[A].colorArr:V,l.clickable)};function Y(Z){var T=64e3;if(Z.vertexArr.length<T)return[Z];var l=[{vertexArr:[],normalArr:[],faceArr:[]}];Z.colorArr&&(l.colorArr=[]);var f=[],D=[],I=0,V=Z.faceArr;for(let A=0,L=V.length;A<L;A+=3){let G=l[I];for(let ee=0;ee<3;ee++){var K=V[A+ee];f[K]!==I&&(f[K]=I,D[K]=G.vertexArr.length,G.vertexArr.push(Z.vertexArr[K]),Z.normalArr&&Z.normalArr[K]&&G.normalArr.push(Z.normalArr[K]),Z.colorArr&&Z.colorArr[K]&&G.colorArr.push(Z.colorArr[K])),G.faceArr.push(D[K])}G.vertexArr.length>=T&&(l.push({vertexArr:[],normalArr:[],faceArr:[]}),Z.colorArr&&(l.colorArr=[]),I++)}return l}}),"./src/GLViewer.ts":((t,i,a)=>{a.r(i),a.d(i,{CONTEXTS_PER_VIEWPORT:()=>T,GLViewer:()=>f,createStereoViewer:()=>V,createViewer:()=>D,createViewerGrid:()=>I});var n=a("./node_modules/upng-js/UPNG.js"),y=a("./src/GLModel.ts"),x=a("./src/GLShape.ts"),k=a("./src/Gradient.ts"),S=a("./src/Label.ts"),E=a("./src/ProteinSurface4.ts"),U=a("./src/VolumeData.ts"),C=a("./src/VolumetricRender.ts"),B=a("./src/WebGL/index.ts"),W=a("./src/WebGL/math/index.ts"),Y=a("./src/colors.ts"),Z=a("./src/utilities.ts");const T=16;class l extends Array{constructor(A){super(...A)}getSymmetries(){if(this.length==0)return[];let A=this[0];return typeof A.symmetries>"u"&&this.setSymmetries([new W.Matrix4]),A.symmetries}setSymmetries(A){typeof A>"u"&&(A=[new W.Matrix4]);for(let L of this)L.symmetries=A,L.finished=!1}}class f{getWidth(){let A=this.container,L=A.offsetWidth;if(L==0&&A.style.display==="none"){let G=A.style.position,ee=A.style.visibility;A.style.display="block",A.style.visibility="hidden",A.style.position="absolute",L=A.offsetWidth,A.style.display="none",A.style.visibility=ee,A.style.position=G}return L}getHeight(){let A=this.container,L=A.offsetHeight;if(L==0&&A.style.display==="none"){let G=A.style.position,ee=A.style.visibility;A.style.display="block",A.style.visibility="hidden",A.style.position="absolute",L=A.offsetHeight,A.style.display="none",A.style.visibility=ee,A.style.position=G}return L}setupRenderer(){let A=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new B.Renderer(A),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new B.Scene,this.scene.fog=new B.Fog(this.bgColor,100,200),this.modelGroup=new B.Object3D,this.rotationGroup=new B.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new W.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var A=new B.Light(16777215);A.position=new W.Vector3(.2,.2,1).normalize(),A.intensity=1,this.scene.add(A)}_handleLostContext(A){const L=function(G){const ee=G.getBoundingClientRect();return!(ee.right<0||ee.bottom<0||ee.top>(window.innerHeight||document.documentElement.clientHeight)||ee.left>(window.innerWidth||document.documentElement.clientWidth))};if(L(this.container)){let G=0;for(let ee of document.getElementsByTagName("canvas"))if(L(ee)&&ee._3dmol_viewer!=null&&(ee._3dmol_viewer.resize(),G+=1,G>=T))break}}initContainer(A){this.container=A,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var A=0;for(let G in this.surfaces)if(this.surfaces.hasOwnProperty(G)){var L=parseInt(G);isNaN(L)||L>A&&(A=L)}return A+1}setSlabAndFog(){let A=this.camera.position.z-this.rotationGroup.position.z;A<1&&(A=1),this.camera.near=A+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=A+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=A*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(A){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!A&&this.linkedViewers.length>0))for(var L=this._viewer.getView(),G=0;G<this.linkedViewers.length;G++){var ee=this.linkedViewers[G];ee.setView(L,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let A=0,L=this.models.length;A<L;A++){let G=this.models[A];if(G){let ee=G.selectedAtoms({clickable:!0}),ae=G.selectedAtoms({hoverable:!0}),Se=G.selectedAtoms({contextMenuEnabled:!0});for(let $e=0;$e<ae.length;$e++)this.hoverables.push(ae[$e]);for(let $e=0;$e<ee.length;$e++)this.clickables.push(ee[$e]);for(let $e=0;$e<Se.length;$e++)this.contextMenuEnabledObjects.push(Se[$e])}}for(let A=0,L=this.shapes.length;A<L;A++){let G=this.shapes[A];G&&G.clickable&&this.clickables.push(G),G&&G.hoverable&&this.hoverables.push(G),G&&G.contextMenuEnabled&&this.contextMenuEnabledObjects.push(G)}}handleClickSelection(A,L,G){let ee=this.targetedObjects(A,L,this.clickables);if(ee.length){var ae=ee[0].clickable;ae.callback!==void 0&&(typeof ae.callback!="function"&&(ae.callback=(0,Z.makeFunction)(ae.callback)),typeof ae.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(ae)&&this.userContextMenuHandler||ae.callback(ae,this._viewer,G,this.container,ee)))}}canvasOffset(){let A=this.glDOM,L=A.getBoundingClientRect(),G=A.ownerDocument,ee=G.documentElement,ae=G.defaultView;return{top:L.top+ae.pageYOffset-ee.clientTop,left:L.left+ae.pageXOffset-ee.clientLeft}}setHover(A,L,G){this.current_hover!=A&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,Z.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,L,this.container,G)),this.current_hover=A,A&&A.hover_callback!==void 0&&(typeof A.hover_callback!="function"&&(A.hover_callback=(0,Z.makeFunction)(A.hover_callback)),typeof A.hover_callback=="function"&&A.hover_callback(A,this._viewer,L,this.container,G)))}handleHoverSelection(A,L,G){if(this.hoverables.length==0)return;let ee=this.targetedObjects(A,L,this.hoverables);if(ee.length){var ae=ee[0].clickable;this.setHover(ae,G,ee),this.current_hover=ae}else this.setHover(null)}handleHoverContinue(A,L){let G=this.targetedObjects(A,L,this.hoverables);(G.length==0||G[0]===void 0)&&this.setHover(null),G[0]!==void 0&&G[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(A,{allowTolerance:L=A.targetTouches,tolerance:G=5}={}){const ee=this.getX(A),ae=this.getY(A);if(L){const Se=Math.abs(ee-this.mouseStartX),$e=Math.abs(ae-this.mouseStartY);return Se<=G&&$e<=G}else return ee===this.mouseStartX&&ae===this.mouseStartY}calcTouchDistance(A){var L=A.targetTouches[0].pageX-A.targetTouches[1].pageX,G=A.targetTouches[0].pageY-A.targetTouches[1].pageY;return Math.hypot(L,G)}getX(A){var L=A.pageX;return L==null&&(L=A.pageX),A.targetTouches&&A.targetTouches[0]?L=A.targetTouches[0].pageX:A.changedTouches&&A.changedTouches[0]&&(L=A.changedTouches[0].pageX),L}getY(A){var L=A.pageY;return L==null&&(L=A.pageY),A.targetTouches&&A.targetTouches[0]?L=A.targetTouches[0].pageY:A.changedTouches&&A.changedTouches[0]&&(L=A.changedTouches[0].pageY),L}isInViewer(A,L){if(this.viewers!=null){var G=this.WIDTH/this.cols,ee=this.HEIGHT/this.rows,ae=this.canvasOffset(),Se=A-ae.left,$e=L-ae.top,qe=this.rows-Math.floor($e/ee)-1,Pe=Math.floor(Se/G);if(qe!=this.row||Pe!=this.col)return!1}return!0}adjustZoomToLimits(A){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let L=this.CAMERA_Z-this.config.lowerZoomLimit;A>L&&(A=L)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let L=this.CAMERA_Z-this.config.upperZoomLimit;A<L&&(A=L)}return A>this.CAMERA_Z-1&&(A=this.CAMERA_Z-1),A}static slerp(A,L,G){if(G==1)return L.clone();if(G==0)return A.clone();let ee=A.x*L.x+A.y*L.y+A.z*L.z+A.w*L.w;if(ee>.9995){let Ie=new W.Quaternion(A.x+G*(L.x-A.x),A.y+G*(L.y-A.y),A.z+G*(L.z-A.z),A.w+G*(L.w-A.w));return Ie.normalize(),Ie}ee<0&&(L=L.clone().multiplyScalar(-1),ee=-ee),ee>1?ee=1:ee<-1&&(ee=-1);var ae=Math.acos(ee),Se=ae*G,$e=L.clone();$e.sub(A.clone().multiplyScalar(ee)),$e.normalize();var qe=Math.cos(Se),Pe=Math.sin(Se),Ve=new W.Quaternion(A.x*qe+$e.x*Pe,A.y*qe+$e.y*Pe,A.z*qe+$e.z*Pe,A.w*qe+$e.w*Pe);return Ve.normalize(),Ve}constructor(A,L={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new W.Quaternion(0,0,0,1),this.dq=new W.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=L,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=Y.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=Y.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=A,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new B.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new W.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new W.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new B.Raycaster(new W.Vector3(0,0,0),new W.Vector3(0,0,0)),this.projector=new B.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=Y.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let G=(ee,ae)=>{ee.forEach(Se=>{Se.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(G),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(G){console.log("error with glviewer callback: "+G)}}targetedObjects(A,L,G){var ee={x:A,y:L,z:-1};return Array.isArray(G)||(G=this.selectedAtoms(G)),G.length==0?[]:(this.raycaster.setFromCamera(ee,this.camera),this.raycaster.intersectObjects(this.modelGroup,G))}modelToScreen(A){let L=!1;Array.isArray(A)||(A=[A],L=!0);let G=this.renderer.getXRatio(),ee=this.renderer.getYRatio(),ae=this.col,Se=this.row,$e=ae*(this.WIDTH/G),qe=(ee-Se-1)*(this.HEIGHT/ee),Pe=[],Ve=this.canvasOffset();return A.forEach(Ie=>{let Xe=new W.Vector3(Ie.x,Ie.y,Ie.z);Xe.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Xe,this.camera);let et=this.WIDTH/G*(Xe.x+1)/2+Ve.left+$e,tt=-(this.HEIGHT/ee)*(Xe.y-1)/2+Ve.top+qe;Pe.push({x:et,y:tt})}),L&&(Pe=Pe[0]),Pe}screenOffsetToModel(A,L,G){var ee=A/this.WIDTH,ae=L/this.HEIGHT,Se=G===void 0?this.rotationGroup.position.z:G,$e=this.rotationGroup.quaternion,qe=new W.Vector3(0,0,Se);return this.projector.projectVector(qe,this.camera),qe.x+=ee*2,qe.y-=ae*2,this.projector.unprojectVector(qe,this.camera),qe.z=0,qe.applyQuaternion($e),qe}screenToModelDistance(A,L){let G=this.canvasOffset(),ee=new W.Vector3(L.x,L.y,L.z);ee.applyMatrix4(this.modelGroup.matrixWorld);let ae=ee.clone();this.projector.projectVector(ee,this.camera);let Se=new W.Vector3((A.x-G.left)*2/this.WIDTH-1,(A.y-G.top)*2/-this.HEIGHT+1,ee.z);return this.projector.unprojectVector(Se,this.camera),Se.distanceTo(ae)}setViewChangeCallback(A){(typeof A=="function"||A==null)&&(this.viewChangeCallback=A)}setStateChangeCallback(A){(typeof A=="function"||A==null)&&(this.stateChangeCallback=A)}getConfig(){return this.config}setConfig(A){this.config=A,A.ambientOcclusion&&this.renderer.enableAmbientOcclusion(A.ambientOcclusion)}getInternalState(){var A={models:[],surfaces:[],shapes:[],labels:[]};for(let L=0;L<this.models.length;L++)this.models[L]&&(A.models[L]=this.models[L].getInternalState());return A}setInternalState(A){this.clear();var L=A.models;for(let G=0;G<L.length;G++)L[G]&&(this.models[G]=new y.GLModel(G,void 0,this),this.models[G].setInternalState(L[G]));this.render()}setZoomLimits(A,L){typeof A<"u"&&(this.config.lowerZoomLimit=A),L&&(this.config.upperZoomLimit=L),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(A){A.fov!==void 0&&(this.fov=A.fov,this.camera.fov=this.fov),A.z!==void 0&&(this.CAMERA_Z=A.z,this.camera.z=this.CAMERA_Z),A.orthographic!==void 0&&(this.camera.ortho=A.orthographic),this.setSlabAndFog()}_handleMouseDown(A){if(A.preventDefault(),!this.scene)return;var L=this.getX(A),G=this.getY(A);if(L===void 0)return;this.isDragging=!0,this.mouseButton=A.which,this.mouseStartX=L,this.mouseStartY=G,this.touchHold=!0,this.touchDistanceStart=0,A.targetTouches&&A.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(A)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let ee=this;A.targetTouches&&A.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(ee.touchHold==!0){ee.glDOM=ee.renderer.domElement;const ae=A.targetTouches[0],Se=new PointerEvent("contextmenu",Object.assign(Object.assign({},A),{pageX:ae.pageX,pageY:ae.pageY,screenX:ae.screenX,screenY:ae.screenY,clientX:ae.clientX,clientY:ae.clientY}));ee.glDOM.dispatchEvent(Se)}},this.longTouchDuration))}_handleMouseUp(A){if(this.touchHold=!1,this.isDragging&&this.scene){var L=this.getX(A),G=this.getY(A);if(this.closeEnoughForClick(A)&&this.isInViewer(L,G)){let ee=this.mouseXY(L,G);this.handleClickSelection(ee.x,ee.y,A)}}this.isDragging=!1}_handleMouseScroll(A){if(A.preventDefault(),!!this.scene){var L=this.getX(A),G=this.getY(A);if(L!==void 0&&!(!this.control_all&&!this.isInViewer(L,G))){var ee=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,ae=1;if(A.ctrlKey&&(ae=-1),A.detail)this.rotationGroup.position.z+=ae*ee*A.detail/10;else if(A.wheelDelta){let Se=A.wheelDelta*600/(A.wheelDelta+600);this.rotationGroup.position.z-=ae*ee*Se/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(A){let L=this;return A=A||1,new Promise(function(G){let ee=0,ae=L.viewChangeCallback,Se=[],$e=[],qe=Date.now();L.viewChangeCallback=function(){$e.push(Date.now()-qe),qe=Date.now(),Se.push(new Promise(Pe=>{L.getCanvas().toBlob(function(Ve){Ve.arrayBuffer().then(Pe)},"image/png")})),ee+=1,ee==A&&(L.viewChangeCallback=ae,Promise.all(Se).then(Pe=>{let Ve=[];for(let ze=0;ze<Pe.length;ze++){let lt=(0,n.decode)(Pe[ze]);Ve.push((0,n.toRGBA8)(lt)[0])}let Ie=L.getCanvas().width,Xe=L.getCanvas().height,et=(0,n.encode)(Ve,Ie,Xe,0,$e),tt=new Blob([et],{type:"image/png"}),rt=new FileReader;rt.onload=function(ze){G(ze.target.result)},rt.readAsDataURL(tt)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(A){this.hoverDuration=A}mouseXY(A,L){let G=this.canvasOffset(),ee=this.renderer.getXRatio(),ae=this.renderer.getYRatio(),Se=this.col,$e=this.row,qe=Se*(this.WIDTH/ee),Pe=(ae-$e-1)*(this.HEIGHT/ae),Ve=(A-G.left-qe)/(this.WIDTH/ee)*2-1,Ie=-((L-G.top-Pe)/(this.HEIGHT/ae))*2+1;return{x:Ve,y:Ie}}_handleMouseMove(A){clearTimeout(this.hoverTimeout),A.preventDefault();let L=this.getX(A),G=this.getY(A);if(L===void 0)return;let ee=this.renderer.getXRatio(),ae=this.renderer.getYRatio(),Se=this.mouseXY(L,G),$e=this;this.current_hover!==null&&this.handleHoverContinue(Se.x,Se.y);var qe=0;if(!(!this.control_all&&!this.isInViewer(L,G))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){$e.handleHoverSelection(Se.x,Se.y,A)},this.hoverDuration)),!!this.isDragging)){A.targetTouches&&(A.targetTouches.length>1||A.targetTouches.length===1&&!this.closeEnoughForClick(A))&&clearTimeout(this.longTouchTimeout);var Pe=(L-this.mouseStartX)/this.WIDTH,Ve=(G-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&A.targetTouches&&A.targetTouches.length==2){var Ie=this.calcTouchDistance(A);qe=2,Ve=(Ie-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else A.targetTouches&&A.targetTouches.length==3&&(qe=1);Pe*=ee,Ve*=ae;var Xe=Math.hypot(Pe,Ve),et;if(qe==3||this.mouseButton==3&&A.ctrlKey)this.slabNear=this.cslabNear+Pe*100,this.slabFar=this.cslabFar-Ve*100;else if(qe==2||this.mouseButton==3||A.shiftKey)et=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,et<80&&(et=80),this.rotationGroup.position.z=this.cz+Ve*et,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(qe==1||this.mouseButton==2||A.ctrlKey){var tt=this.screenOffsetToModel(ee*(L-this.mouseStartX),ae*(G-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,tt)}else if((qe===0||this.mouseButton==1)&&Xe!==0){var rt=Math.sin(Xe*Math.PI)/Xe;this.dq.x=Math.cos(Xe*Math.PI),this.dq.y=0,this.dq.z=rt*Pe,this.dq.w=-rt*Ve,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(A){if(A.preventDefault(),this.closeEnoughForClick(A)){var ee=this.mouseStartX,ae=this.mouseStartY,G=this.canvasOffset();let Se=this.mouseXY(ee,ae),$e=Se.x,qe=Se.y,Pe=this.targetedObjects($e,qe,this.contextMenuEnabledObjects);var L=null;Pe.length&&(L=Pe[0].clickable);var G=this.canvasOffset(),ee=this.mouseStartX-G.left,ae=this.mouseStartY-G.top;this.userContextMenuHandler&&(this.userContextMenuHandler(L,ee,ae,Pe,A),this.isDragging=!1)}}setContainer(A){let L=(0,Z.getElement)(A)||this.container;return this.initContainer(L),this}setBackgroundColor(A,L){(typeof L>"u"||L<0||L>1)&&(L=1);var G=Y.CC.color(A);return this.scene.fog.color=G,this.bgColor=G.getHex(),this.renderer.setClearColorHex(G.getHex(),L),this.show(),this}setProjection(A){this.camera.ortho=A==="orthographic",this.setSlabAndFog()}setViewStyle(A){if(A=A||{},A.style=A.style||"",A.style.includes("outline")?this.renderer.enableOutline(A):this.renderer.disableOutline(),A.style.includes("ambientOcclusion")){var L={};A.strength&&(L.strength=A.strength),A.radius&&(L.radius=A.radius),this.renderer.enableAmbientOcclusion(L)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(A){return this.WIDTH=A||this.WIDTH,this.updateSize(),this}setHeight(A){return this.HEIGHT=A||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let A=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let L=!1,G=this.container.querySelector("canvas");G&&G!=this.renderer.getCanvas()?this.config.canvas=G:(G.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,L=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),A=!0,L&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),A){let L=this.renderer.supportedExtensions();if(L.regen=!0,this.viewers)for(let G=0,ee=this.viewers.length;G<ee;G++)for(let ae=0,Se=this.viewers[G].length;ae<Se;ae++)this.viewers[G][ae].render(null,L);this._viewer.render(null,L)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(A){return A===void 0?this.models.length==0?null:this.models[this.models.length-1]:A instanceof y.GLModel?A:A in this.models?this.models[A]:this.models.length==0?null:this.models[this.models.length-1]}spin(A,L=1,G=!1){if(clearInterval(this.spinInterval),typeof A>"u"&&(A="y"),typeof A=="boolean")if(A)A="y";else return;Array.isArray(A)&&(A={x:A[0],y:A[1],z:A[2]});var ee=this;this.spinInterval=setInterval(function(){!ee.getCanvas().isConnected&&ee.renderer.isLost()&&clearInterval(ee.spinInterval),(!G||ee.container.checkVisibility&&ee.container.checkVisibility())&&ee.rotate(1*L,A)},25)}animateMotion(A,L,G,ee,ae,Se){var $e=20,qe=Math.ceil(A/$e);qe<1&&(qe=1),this.incAnim();var Pe={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(L){let Xe=new Array(qe);for(let ze=0;ze<qe;ze++){let lt=(ze+1)/qe,bt={mpos:Pe.mpos,rz:Pe.rz,rot:Pe.rot};bt.mpos=G.clone().sub(Pe.mpos).multiplyScalar(lt).add(Pe.mpos),bt.rz=Pe.rz+lt*(ee-Pe.rz),bt.rot=f.slerp(Pe.rot,ae,lt),bt.cam=Se.clone().sub(Pe.cam).multiplyScalar(lt).add(Pe.cam),Xe[ze]=bt}let et=0,tt=this,rt=function(){var ze=Xe[et];et+=1,tt.modelGroup.position=ze.mpos,tt.rotationGroup.position.z=ze.rz,tt.rotationGroup.quaternion=ze.rot,tt.camera.lookAt(ze.cam),et<Xe.length?setTimeout(rt,$e):tt.decAnim(),tt.show()};setTimeout(rt,$e)}else{var Ve={};let Xe=1/qe;if(G&&(Ve.mpos=G.clone().sub(Pe.mpos).multiplyScalar(Xe)),typeof ee<"u"&&ee!=null&&(Ve.rz=Xe*(ee-Pe.rz)),ae){var Ie=f.slerp(Pe.rot,ae,Xe);Ve.rot=Pe.rot.clone().inverse().multiply(Ie)}Se&&(Ve.cam=Se.clone().sub(Pe.cam).multiplyScalar(Xe));let et=0,tt=this,rt=function(){et+=1,Ve.mpos&&tt.modelGroup.position.add(Ve.mpos),Ve.rz&&(tt.rotationGroup.position.z+=Ve.rz),Ve.rot&&tt.rotationGroup.quaternion.multiply(Ve.rot),Ve.cam&&(tt.lookingAt.add(Ve.cam),tt.camera.lookAt(tt.lookingAt)),et<qe?setTimeout(rt,$e):tt.decAnim(),tt.show()};setTimeout(rt,$e)}}rotate(A,L="y",G=0,ee=!1){if(L=="x"?L={x:1,y:0,z:0}:L=="y"?L={x:0,y:1,z:0}:L=="z"&&(L={x:0,y:0,z:1}),L=="vx"?L={vx:1,vy:0,vz:0}:L=="vy"?L={vx:0,vy:1,vz:0}:L=="vz"&&(L={vx:0,vy:0,vz:1}),typeof L.vx<"u"){var ae=new W.Vector3(L.vx,L.vy,L.vz);ae.applyQuaternion(this.rotationGroup.quaternion),L={x:ae.x,y:ae.y,z:ae.z}}var Se=function(Ve){var Ie=Math.sin(Ve/2),Xe=Math.cos(Ve/2),et=0,tt=0,rt=0;return et=L.x*Ie,tt=L.y*Ie,rt=L.z*Ie,new W.Quaternion(et,tt,rt,Xe).normalize()},$e=Math.PI*A/180,qe=Se($e);if(G){var Pe=new W.Quaternion().copy(this.rotationGroup.quaternion).multiply(qe);this.animateMotion(G,ee,this.modelGroup.position,this.rotationGroup.position.z,Pe,this.lookingAt)}else this.rotationGroup.quaternion.multiply(qe),this.show();return this}surfacesFinished(){for(var A in this.surfaces)if(!this.surfaces[A][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var A=this.modelGroup.position,L=this.rotationGroup.quaternion;return[A.x,A.y,A.z,this.rotationGroup.position.z,L.x,L.y,L.z,L.w]}setView(A,L){return A===void 0||!(A instanceof Array||A.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=A[0],this.modelGroup.position.y=A[1],this.modelGroup.position.z=A[2],this.rotationGroup.position.z=A[3],this.rotationGroup.quaternion.x=A[4],this.rotationGroup.quaternion.y=A[5],this.rotationGroup.quaternion.z=A[6],this.rotationGroup.quaternion.w=A[7],typeof A[8]<"u"&&(this.rotationGroup.position.x=A[8],this.rotationGroup.position.y=A[9]),this.show(L),this)}render(A,L){this.renderer.setViewport(),this.updateClickables();var G=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var ee,ae;for(L||(L=this.renderer.supportedExtensions()),ee=0;ee<this.models.length;ee++)this.models[ee]&&this.models[ee].globj(this.modelGroup,L);for(ee=0;ee<this.shapes.length;ee++)this.shapes[ee]&&(typeof this.shapes[ee].frame>"u"||this.viewer_frame<0||this.shapes[ee].frame<0||this.shapes[ee].frame==this.viewer_frame?this.shapes[ee].globj(this.modelGroup,L):this.shapes[ee].removegl(this.modelGroup));for(ee=0;ee<this.labels.length;ee++)L.regen&&(this.labels[ee].dispose(),this.modelGroup.remove(this.labels[ee].sprite),this.labels[ee].setContext(),this.modelGroup.add(this.labels[ee].sprite)),this.labels[ee]&&typeof this.labels[ee].frame<"u"&&this.labels[ee].frame>=0&&(this.modelGroup.remove(this.labels[ee].sprite),(this.viewer_frame<0||this.labels[ee].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[ee].sprite));for(ee in this.surfaces)if(this.surfaces.hasOwnProperty(ee)){var Se=this.surfaces[ee];for(ae=0;ae<Se.length;ae++)if(Se.hasOwnProperty(ae)){var $e=Se[ae].geo;if(!Se[ae].finished||L.regen){$e.verticesNeedUpdate=!0,$e.elementsNeedUpdate=!0,$e.normalsNeedUpdate=!0,$e.colorsNeedUpdate=!0,$e.buffersNeedUpdate=!0,Se[ae].mat.needsUpdate=!0,Se[ae].done&&(Se[ae].finished=!0),Se[ae].lastGL&&this.modelGroup.remove(Se[ae].lastGL);var qe=null;if(Se[ae].mat instanceof B.LineBasicMaterial?qe=new B.Line($e,Se[ae].mat):("wireframe"in Se.style&&Se.style.wireframe&&$e.setUpWireframe(),qe=new B.Mesh($e,Se[ae].mat)),Se[ae].mat.transparent&&Se[ae].mat.opacity==0?qe.visible=!1:qe.visible=!0,Se[ae].symmetries.length>1||Se[ae].symmetries.length==1&&!Se[ae].symmetries[0].isIdentity()){var Pe,Ve=new B.Object3D;for(Pe=0;Pe<Se[ae].symmetries.length;Pe++){var Ie=qe.clone();Ie.matrix=Se[ae].symmetries[Pe],Ie.matrixAutoUpdate=!1,Ve.add(Ie)}Se[ae].lastGL=Ve,this.modelGroup.add(Ve)}else Se[ae].lastGL=qe,this.modelGroup.add(qe)}}}return this.setView(G),typeof A=="function"&&A(this),this}getModelList(A){let L=[];if(typeof A>"u"||typeof A.model>"u")for(let ee=0;ee<this.models.length;ee++)this.models[ee]&&L.push(this.models[ee]);else{let ee=A.model;Array.isArray(ee)||(ee=[ee]);for(let ae=0;ae<ee.length;ae++)if(typeof ee[ae]=="number"){var G=ee[ae];G<0&&(G+=this.models.length),L.push(this.models[G])}else L.push(ee[ae])}return L}getAtomsFromSel(A){var L=[];typeof A>"u"&&(A={});var G=this.getModelList(A);for(let ee=0;ee<G.length;ee++)L=L.concat(G[ee].selectedAtoms(A));return L}atomIsSelected(A,L){typeof L>"u"&&(L={});for(var G=this.getModelList(L),ee=0;ee<G.length;ee++)if(G[ee].atomIsSelected(A,L))return!0;return!1}selectedAtoms(A){return this.getAtomsFromSel(A)}getUniqueValues(A,L){typeof L>"u"&&(L={});var G=this.getAtomsFromSel(L),ee={};for(var ae in G)if(G[ae].hasOwnProperty(A)){var Se=G[ae][A];ee[Se]=!0}return Object.keys(ee)}pdbData(A){for(var L=this.getAtomsFromSel(A),G="",ee=0,ae=L.length;ee<ae;++ee)G+=L[ee].pdbline+`
`;return G}zoom(A=2,L=0,G=!1){var ee=(this.CAMERA_Z-this.rotationGroup.position.z)/A,ae=this.CAMERA_Z-ee;return L>0?this.animateMotion(L,G,this.modelGroup.position,this.adjustZoomToLimits(ae),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(ae),this.show()),this}translate(A,L,G=0,ee=!1){var ae=A/this.WIDTH,Se=L/this.HEIGHT,$e=new W.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector($e,this.camera),$e.x-=ae,$e.y-=Se,this.projector.unprojectVector($e,this.camera),$e.z=0;var qe=this.lookingAt.clone().add($e);return G>0?this.animateMotion(G,ee,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,qe):(this.lookingAt=qe,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(A,L,G=0,ee=!1){var ae=this.screenOffsetToModel(A,L),Se=this.modelGroup.position.clone().add(ae);return G>0?this.animateMotion(G,ee,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Se,this.show()),this}fitSlab(A){A=A||{};var L=this.getAtomsFromSel(A),G=(0,Z.getExtent)(L),ee=G[1][0]-G[0][0],ae=G[1][1]-G[0][1],Se=G[1][2]-G[0][2],$e=Math.hypot(ee,ae,Se);return $e<5&&($e=5),this.slabNear=-$e/1.9,this.slabFar=$e/2,this}center(A={},L=0,G=!1){var ee,ae,Se=this.getAtomsFromSel(A),$e=(0,Z.getExtent)(Se);(0,Z.isEmptyObject)(A)?(this.shapes.forEach(lt=>{if(lt&&lt.boundingSphere&&lt.boundingSphere.center){var bt=lt.boundingSphere.center,At=lt.boundingSphere.radius;At>0?(Se.push(new W.Vector3(bt.x+At,bt.y,bt.z)),Se.push(new W.Vector3(bt.x-At,bt.y,bt.z)),Se.push(new W.Vector3(bt.x,bt.y+At,bt.z)),Se.push(new W.Vector3(bt.x,bt.y-At,bt.z)),Se.push(new W.Vector3(bt.x,bt.y,bt.z+At)),Se.push(new W.Vector3(bt.x,bt.y,bt.z-At))):Se.push(bt)}}),$e=(0,Z.getExtent)(Se),ee=Se,ae=$e):(ee=this.getAtomsFromSel({}),ae=(0,Z.getExtent)(ee));var qe=new W.Vector3($e[2][0],$e[2][1],$e[2][2]),Pe=ae[1][0]-ae[0][0],Ve=ae[1][1]-ae[0][1],Ie=ae[1][2]-ae[0][2],Xe=Math.hypot(Pe,Ve,Ie);Xe<5&&(Xe=5),this.slabNear=-Xe/1.9,this.slabFar=Xe/2,Pe=$e[1][0]-$e[0][0],Ve=$e[1][1]-$e[0][1],Ie=$e[1][2]-$e[0][2],Xe=Math.hypot(Pe,Ve,Ie),Xe<5&&(Xe=5);for(var et=25,tt=0;tt<Se.length;tt++)if(Se[tt]){var rt=qe.distanceToSquared(Se[tt]);rt>et&&(et=rt)}Xe=Math.sqrt(et)*2;var ze=qe.clone().multiplyScalar(-1);return L>0?this.animateMotion(L,G,ze,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=ze,this.show()),this}zoomTo(A={},L=0,G=!1){let ee=this.getAtomsFromSel(A),ae=(0,Z.getExtent)(ee),Se=ae;if((0,Z.isEmptyObject)(A)){let bt=ee&&ee.length;if(this.shapes.forEach(At=>{if(At&&At.boundingSphere){if(At.boundingSphere.box){let er=At.boundingSphere.box;ee.push(new W.Vector3(er.min.x,er.min.y,er.min.z)),ee.push(new W.Vector3(er.max.x,er.max.y,er.max.z))}else if(At.boundingSphere.center){var Vt=At.boundingSphere.center,Yt=At.boundingSphere.radius;Yt>0?(ee.push(new W.Vector3(Vt.x+Yt,Vt.y,Vt.z)),ee.push(new W.Vector3(Vt.x-Yt,Vt.y,Vt.z)),ee.push(new W.Vector3(Vt.x,Vt.y+Yt,Vt.z)),ee.push(new W.Vector3(Vt.x,Vt.y-Yt,Vt.z)),ee.push(new W.Vector3(Vt.x,Vt.y,Vt.z+Yt)),ee.push(new W.Vector3(Vt.x,Vt.y,Vt.z-Yt))):ee.push(Vt)}}}),Se=(0,Z.getExtent)(ee),!bt)for(let At=0;At<3;At++)ae[2][At]=(Se[0][At]+Se[1][At])/2}else{let bt=this.getAtomsFromSel({});Se=(0,Z.getExtent)(bt)}var $e=new W.Vector3(ae[2][0],ae[2][1],ae[2][2]),qe=Se[1][0]-Se[0][0],Pe=Se[1][1]-Se[0][1],Ve=Se[1][2]-Se[0][2],Ie=Math.hypot(qe,Pe,Ve);Ie<5&&(Ie=5),this.slabNear=-Ie/1.9,this.slabFar=Ie/2,Object.keys(A).length===0&&(this.slabNear=Math.min(-Ie*2,-50),this.slabFar=Math.max(Ie*2,50));var Xe=this.config.minimumZoomToDistance||5;qe=ae[1][0]-ae[0][0],Pe=ae[1][1]-ae[0][1],Ve=ae[1][2]-ae[0][2],Ie=Math.hypot(qe,Pe,Ve),Ie<Xe&&(Ie=Xe);for(var et=Xe*Xe,tt=0;tt<ee.length;tt++)if(ee[tt]){var rt=$e.distanceToSquared(ee[tt]);rt>et&&(et=rt)}Ie=Math.sqrt(et)*2;var ze=$e.clone().multiplyScalar(-1),lt=-(Ie*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return lt=this.adjustZoomToLimits(lt),L>0?this.animateMotion(L,G,ze,lt,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=ze,this.rotationGroup.position.z=lt,this.show()),this}setSlab(A,L){this.slabNear=A,this.slabFar=L}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(A,L={},G,ee=!1){if(G){var ae=(0,Z.getExtent)(this.getAtomsFromSel(G));L.position={x:ae[2][0],y:ae[2][1],z:ae[2][2]}}var Se=new S.Label(A,L);return Se.setContext(),this.modelGroup.add(Se.sprite),this.labels.push(Se),ee||this.show(),Se}addResLabels(A,L,G=!1){let ee=this.labels.length;return this.applyToModels("addResLabels",A,L,G),this.show(),this.labels.slice(ee)}addPropertyLabels(A,L,G){return this.applyToModels("addPropertyLabels",A,L,G),this.show(),this}removeLabel(A){for(var L=0;L<this.labels.length;L++)if(this.labels[L]==A){this.labels.splice(L,1),A.dispose(),this.modelGroup.remove(A.sprite);break}return this.show(),this}removeAllLabels(){for(var A=0;A<this.labels.length;A++)this.labels[A]&&this.labels[A].sprite&&this.modelGroup.remove(this.labels[A].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var A=0;A<this.labels.length;A++)this.labels[A]&&this.labels[A].hide();return this.show(),this}showAllLabels(){for(var A=0;A<this.labels.length;A++)this.labels[A]&&this.labels[A].show();return this.show(),this}setLabelStyle(A,L){return this.modelGroup.remove(A.sprite),A.dispose(),A.stylespec=L,A.setContext(),this.modelGroup.add(A.sprite),this.show(),A}setLabelText(A,L){return this.modelGroup.remove(A.sprite),A.dispose(),A.text=L,A.setContext(),this.modelGroup.add(A.sprite),this.show(),A}addShape(A){A=A||{};var L=new x.GLShape(A);return L.shapePosition=this.shapes.length,this.shapes.push(L),L}removeShape(A){if(!A)return this;for(A.removegl(this.modelGroup),delete this.shapes[A.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var A=0;A<this.shapes.length;A++){var L=this.shapes[A];L&&L.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(A){if(A.hasOwnProperty("x")&&A.hasOwnProperty("y")&&A.hasOwnProperty("z"))return A;var L=this.getAtomsFromSel(A);if(L.length==0)return{x:0,y:0,z:0};var G=(0,Z.getExtent)(L);return{x:G[0][0]+(G[1][0]-G[0][0])/2,y:G[0][1]+(G[1][1]-G[0][1])/2,z:G[0][2]+(G[1][2]-G[0][2])/2}}addSphere(A){A=A||{},A.center=this.getSelectionCenter(A.center);var L=new x.GLShape(A);return L.shapePosition=this.shapes.length,L.addSphere(A),this.shapes.push(L),L.finalize(),L}addBox(A={}){A.corner!=null&&(A.corner=this.getSelectionCenter(A.corner)),A.center!=null&&(A.center=this.getSelectionCenter(A.center));var L=new x.GLShape(A);return L.shapePosition=this.shapes.length,L.addBox(A),this.shapes.push(L),L.finalize(),L}addArrow(A={}){A.start=this.getSelectionCenter(A.start),A.end=this.getSelectionCenter(A.end);var L=new x.GLShape(A);return L.shapePosition=this.shapes.length,L.addArrow(A),this.shapes.push(L),L.finalize(),L}addCylinder(A={}){A.start=this.getSelectionCenter(A.start),A.end=this.getSelectionCenter(A.end);var L=new x.GLShape(A);return L.shapePosition=this.shapes.length,A.dashed?L.addDashedCylinder(A):L.addCylinder(A),this.shapes.push(L),L.finalize(),L}addCurve(A={}){var L=new x.GLShape(A);return L.shapePosition=this.shapes.length,L.addCurve(A),this.shapes.push(L),L.finalize(),L}addLine(A={}){A.start=this.getSelectionCenter(A.start),A.end=this.getSelectionCenter(A.end),A.wireframe=!0;var L=new x.GLShape(A);return L.shapePosition=this.shapes.length,A.dashed?L=this.addLineDashed(A,L):L.addLine(A),this.shapes.push(L),L.finalize(),L}addUnitCell(A,L){A=this.getModel(A),L=L||{alabel:"a",blabel:"b",clabel:"c"},L.box=L.box||{},L.astyle=L.astyle||{color:"red",radius:.1,midpos:-1},L.bstyle=L.bstyle||{color:"green",radius:.1,midpos:-1},L.cstyle=L.cstyle||{color:"blue",radius:.1,midpos:-1},L.alabelstyle=L.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},L.blabelstyle=L.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},L.clabelstyle=L.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},A.unitCellObjects&&this.removeUnitCell(A),A.unitCellObjects={shapes:[],labels:[]};var G=A.getCrystData(),ee=null;if(G){if(G.matrix)ee=G.matrix;else{var ae=G.a,Se=G.b,$e=G.c,qe=G.alpha,Pe=G.beta,Ve=G.gamma;qe=qe*Math.PI/180,Pe=Pe*Math.PI/180,Ve=Ve*Math.PI/180;var Ie,Xe,et;Ie=Math.cos(Pe),Xe=(Math.cos(qe)-Math.cos(Pe)*Math.cos(Ve))/Math.sin(Ve),et=Math.sqrt(Math.max(0,1-Ie*Ie-Xe*Xe)),ee=new W.Matrix3(ae,Se*Math.cos(Ve),$e*Ie,0,Se*Math.sin(Ve),$e*Xe,0,0,$e*et)}var tt=[new W.Vector3(0,0,0),new W.Vector3(1,0,0),new W.Vector3(0,1,0),new W.Vector3(0,0,1),new W.Vector3(1,1,0),new W.Vector3(0,1,1),new W.Vector3(1,0,1),new W.Vector3(1,1,1)];if(G.matrix4)for(let ze=0;ze<tt.length;ze++)G.size&&tt[ze].multiplyVectors(tt[ze],G.size),tt[ze]=tt[ze].applyMatrix4(G.matrix4);else for(let ze=0;ze<tt.length;ze++)tt[ze]=tt[ze].applyMatrix3(ee);if(L.box&&!L.box.hidden){L.box.wireframe=!0;var rt=new x.GLShape(L.box);rt.shapePosition=this.shapes.length,rt.addLine({start:tt[0],end:tt[1]}),rt.addLine({start:tt[0],end:tt[2]}),rt.addLine({start:tt[1],end:tt[4]}),rt.addLine({start:tt[2],end:tt[4]}),rt.addLine({start:tt[0],end:tt[3]}),rt.addLine({start:tt[3],end:tt[5]}),rt.addLine({start:tt[2],end:tt[5]}),rt.addLine({start:tt[1],end:tt[6]}),rt.addLine({start:tt[4],end:tt[7]}),rt.addLine({start:tt[6],end:tt[7]}),rt.addLine({start:tt[3],end:tt[6]}),rt.addLine({start:tt[5],end:tt[7]}),this.shapes.push(rt),A.unitCellObjects.shapes.push(rt),rt.finalize()}if(!L.astyle.hidden){L.astyle.start=tt[0],L.astyle.end=tt[1];let ze=this.addArrow(L.astyle);A.unitCellObjects.shapes.push(ze)}if(!L.bstyle.hidden){L.bstyle.start=tt[0],L.bstyle.end=tt[2];let ze=this.addArrow(L.bstyle);A.unitCellObjects.shapes.push(ze)}if(!L.cstyle.hidden){L.cstyle.start=tt[0],L.cstyle.end=tt[3];let ze=this.addArrow(L.cstyle);A.unitCellObjects.shapes.push(ze)}if(L.alabel){L.alabelstyle.position=tt[1];let ze=this.addLabel(L.alabel,L.alabelstyle);A.unitCellObjects.labels.push(ze)}if(L.blabel){L.blabelstyle.position=tt[2];let ze=this.addLabel(L.blabel,L.blabelstyle);A.unitCellObjects.labels.push(ze)}if(L.clabel){L.clabelstyle.position=tt[3];let ze=this.addLabel(L.clabel,L.clabelstyle);A.unitCellObjects.labels.push(ze)}}}removeUnitCell(A){if(A=this.getModel(A),A.unitCellObjects){let L=this;A.unitCellObjects.shapes.forEach(function(G){L.removeShape(G)}),A.unitCellObjects.labels.forEach(function(G){L.removeLabel(G)})}delete A.unitCellObjects}replicateUnitCell(A=3,L=A,G=L,ee,ae,Se){ee=this.getModel(ee);let $e=ee.getCrystData();if($e){const qe=ee.selectedAtoms({}),Pe=$e.matrix;let Ve=function(Xe){return Xe%2==0?-Xe/2:Math.ceil(Xe/2)};A<=1&&L<=1&&G<=1&&(Se=!0,A=L=G=3);let Ie=function(Xe,et,tt){return!1};if(Se){const Xe=new W.Matrix3().getInverse3(Pe);Ie=function(et,tt,rt){let ze=new W.Vector3(et,tt,rt).applyMatrix3(Xe);return!(ze.x>-1e-4&&ze.x<1.0001&&ze.y>-1e-4&&ze.y<1.0001&&ze.z>-1e-4&&ze.z<1.0001)}}for(let Xe=0;Xe<A;Xe++)for(let et=0;et<L;et++)for(let tt=0;tt<G;tt++){if(Xe==0&&et==0&&tt==0)continue;let rt=new W.Vector3(Ve(Xe),Ve(et),Ve(tt));rt.applyMatrix3(Pe);let ze=[];for(let lt=0;lt<qe.length;lt++){let bt=qe[lt].x+rt.x,At=qe[lt].y+rt.y,Vt=qe[lt].z+rt.z;if(Ie(bt,At,Vt))continue;let Yt={};for(let er in qe[lt])Yt[er]=qe[lt][er];Yt.x=bt,Yt.y=At,Yt.z=Vt,ze.push(Yt)}ee.addAtoms(ze)}ae&&ee.assignBonds()}}addLineDashed(A,L){A.dashLength=A.dashLength||.5,A.gapLength=A.gapLength||.5;var G;A.start?G=new W.Vector3(A.start.x||0,A.start.y||0,A.start.z||0):G=new W.Vector3(0,0,0);var ee;A.end?ee=new W.Vector3(A.end.x,A.end.y||0,A.end.z||0):ee=new W.Vector3(0,0,0);var ae=new W.Vector3,Se=new W.Vector3,$e=new W.Vector3,qe,Pe,Ve,Ie=G.clone(),Xe=0;for(ae.subVectors(ee,G),qe=ae.length(),ae.normalize(),Se=ae.clone(),$e=ae.clone(),Se.multiplyScalar(A.dashLength),$e.multiplyScalar(A.gapLength),Pe=Se.length(),Ve=$e.length();Xe<qe;){if(Xe+Pe>qe){A.start=G,A.end=ee,L.addLine(A);break}Ie.addVectors(G,Se),A.start=G,A.end=Ie,L.addLine(A),G=Ie.clone(),Xe+=Pe,Ie.addVectors(G,$e),G=Ie.clone(),Xe+=Ve}return L.finalize(),L}addCustom(A){A=A||{};var L=new x.GLShape(A);return L.shapePosition=this.shapes.length,L.addCustom(A),this.shapes.push(L),L.finalize(),L}addVolumetricData(A,L,G={}){var ee=new U.VolumeData(A,L);return G.hasOwnProperty("transferfn")?this.addVolumetricRender(ee,G):this.addIsosurface(ee,G)}addIsosurface(A,L={},G){var ee=new x.GLShape(L);return ee.shapePosition=this.shapes.length,ee.addIsosurface(A,L,G,this),this.shapes.push(ee),ee}addVolumetricRender(A,L){L=L||{};var G=new C.GLVolumetricRender(A,L,this);return G.shapePosition=this.shapes.length,this.shapes.push(G),G}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(A){if(A){this.scene.fog=new B.Fog(this.bgColor,100,200),this.config.disableFog=!1;const L=A;L.fogStart==null?this.fogStart=.4:this.fogStart=L.fogStart,L.fogEnd==null?this.fogEnd=1:this.fogEnd=L.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(A){this.viewer_frame=A;let L=this;return new Promise(function(G){var ee=L.models.map(function(ae){return ae.setFrame(A)});Promise.all(ee).then(function(){G()})})}getFrame(){return this.viewer_frame}getNumFrames(){var A=0;for(let L=0;L<this.models.length;L++)this.models[L].getNumFrames()>A&&(A=this.models[L].getNumFrames());for(let L=0;L<this.shapes.length;L++)this.shapes[L].frame&&this.shapes[L].frame>=A&&(A=this.shapes[L].frame+1);for(let L=0;L<this.labels.length;L++)this.labels[L].frame&&this.labels[L].frame>=A&&(A=this.labels[L].frame+1);return A}getNextModelId(){return this.models.length}animate(A){this.incAnim();var L=100,G="forward",ee=1/0;A=A||{},A.interval&&(L=A.interval),A.loop&&(G=A.loop),A.reps&&(ee=A.reps);var ae=this.getNumFrames(),Se=this,$e=0;A.startFrame&&($e=A.startFrame%ae);var qe=1;A.step&&(qe=A.step,ee/=qe);var Pe=0,Ve=ae*ee,Ie=new Date,Xe,et,tt=function(rt){Ie=new Date,rt=="forward"?Se.setFrame($e).then(function(){$e=($e+qe)%ae,Xe()}):rt=="backward"?Se.setFrame(ae-1-$e).then(function(){$e=($e+qe)%ae,Xe()}):Se.setFrame($e).then(function(){$e+=qe,qe*=$e%(ae-1)==0?-1:1,Xe()})};return Xe=function(){if(Se.render(),!Se.getCanvas().isConnected)Se.stopAnimate();else if(++Pe>=Ve||!Se.isAnimated())et.cancel(),Se.animationTimers.delete(et),Se.decAnim();else{var rt=L-(new Date().getTime()-Ie.getTime());rt=rt>0?rt:0,et.cancel(),Se.animationTimers.delete(et),et=new Z.PausableTimer(tt,rt,G),Se.animationTimers.add(et)}},et=new Z.PausableTimer(tt,0,G),this.animationTimers.add(et),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(A){A.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(A){A.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(A){A.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(A){return A&&!A.defaultcolors?(A.defaultcolors=this.defaultcolors,A.cartoonQuality=A.cartoonQuality||this.config.cartoonQuality):typeof A>"u"&&(A={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),A}addModel(A,L="",G){G=this.getModelOpt(G);var ee=new y.GLModel(this.models.length,G,this);return ee.addMolData(A,L,G),this.models.push(ee),ee}addModels(A,L,G){G=this.getModelOpt(G),G.multimodel=!0,G.frames=!0;for(var ee=y.GLModel.parseMolData(A,L,G),ae=0;ae<ee.length;ae++){var Se=new y.GLModel(this.models.length,G,this);Se.setAtomDefaults(ee[ae]),Se.addFrame(ee[ae]),Se.setFrame(0),ee.modelData&&Se.setModelData(ee.modelData[ae]),Se.setDontDuplicateAtoms(!G.duplicateAssemblyAtoms),this.models.push(Se)}return this.models}addModelsAsFrames(A,L,G){G=this.getModelOpt(G),G.multimodel=!0,G.frames=!0;var ee=new y.GLModel(this.models.length,G,this);return ee.addMolData(A,L,G),this.models.push(ee),ee}addAsOneMolecule(A,L,G){G=this.getModelOpt(G),G.multimodel=!0,G.onemol=!0;var ee=new y.GLModel(this.models.length,G,this);return ee.addMolData(A,L,G),this.models.push(ee),ee}removeModel(A){if(A=this.getModel(A),!!A){for(A.removegl(this.modelGroup),delete this.models[A.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var A=0;A<this.models.length;A++){var L=this.models[A];L&&L.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(A,L){var G={};return L===void 0?G.m=this.models.map(function(ee){return ee.toCDObject(A)}):G.m=[this.models[L].toCDObject()],JSON.stringify(G)}exportVRML(){var A=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new B.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var L=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=A,L}createModelFrom(A,L=!1){for(var G=new y.GLModel(this.models.length,this.defaultcolors,this),ee=0;ee<this.models.length;ee++)if(this.models[ee]){var ae=this.models[ee].selectedAtoms(A);G.addAtoms(ae),L&&this.models[ee].removeAtoms(ae)}return this.models.push(G),G}applyToModels(A,L,G,ee,ae,Se,$e){for(var qe=this.getModelList(L),Pe=0;Pe<qe.length;Pe++)qe[Pe][A](L,G,ee,ae,Se,$e)}setStyle(A,L){return typeof L>"u"&&(L=A,A={}),this.applyToModels("setStyle",A,L,!1),this}addStyle(A,L){return typeof L>"u"&&(L=A,A={}),this.applyToModels("setStyle",A,L,!0),this}setClickable(A,L,G){return this.applyToModels("setClickable",A,L,G),this}setHoverable(A,L,G,ee){return this.applyToModels("setHoverable",A,L,G,ee),this}enableContextMenu(A,L){return this.applyToModels("enableContextMenu",A,L),this}vibrate(A,L,G,ee){return this.applyToModels("vibrate",A,L,G,ee),this}setColorByProperty(A,L,G,ee){return this.applyToModels("setColorByProperty",A,L,G,ee),this}setColorByElement(A,L){return this.applyToModels("setColorByElement",A,L),this}static getAtomsWithin(A,L){var G=[];for(let ae=0;ae<A.length;ae++){var ee=A[ae];typeof ee>"u"||ee.x<L[0][0]||ee.x>L[1][0]||ee.y<L[0][1]||ee.y>L[1][1]||ee.z<L[0][2]||ee.z>L[1][2]||G.push(ee)}return G}static volume(A){var L=A[1][0]-A[0][0],G=A[1][1]-A[0][1],ee=A[1][2]-A[0][2];return L*G*ee}carveUpExtent(A,L,G){let ee=[],ae={};for(let Ie=0,Xe=L.length;Ie<Xe;Ie++)ae[L[Ie].index]=Ie;let Se=function(Ie){let Xe=[];for(let et=0,tt=Ie.length;et<tt;et++)Ie[et].index in ae&&Xe.push(ae[Ie[et].index]);return Xe},$e=function(Ie){let Xe=[];return Xe[0]=[Ie[0][0],Ie[0][1],Ie[0][2]],Xe[1]=[Ie[1][0],Ie[1][1],Ie[1][2]],Xe},qe=function(Ie){if(f.volume(Ie)<f.maxVolume)return[Ie];var Xe=Ie[1][0]-Ie[0][0],et=Ie[1][1]-Ie[0][1],tt=Ie[1][2]-Ie[0][2],rt;Xe>et&&Xe>tt?rt=0:et>Xe&&et>tt?rt=1:rt=2;var ze=$e(Ie),lt=$e(Ie),bt=(Ie[1][rt]-Ie[0][rt])/2+Ie[0][rt];ze[1][rt]=bt,lt[0][rt]=bt;var At=qe(ze),Vt=qe(lt);return At.concat(Vt)},Pe=qe(A),Ve=6;for(let Ie=0,Xe=Pe.length;Ie<Xe;Ie++){let et=$e(Pe[Ie]);et[0][0]-=Ve,et[0][1]-=Ve,et[0][2]-=Ve,et[1][0]+=Ve,et[1][1]+=Ve,et[1][2]+=Ve;let tt=f.getAtomsWithin(L,et),rt=f.getAtomsWithin(G,Pe[Ie]);ee.push({extent:Pe[Ie],atoms:Se(tt),toshow:Se(rt)})}return ee}static generateSurfaceMesh(A,L,G){var ee=new B.Geometry(!0),ae=ee.updateGeoGroup(0),Se=[];for(let fr=0,Hr=A.length;fr<Hr;fr++){var $e=A[fr];$e&&(typeof $e.surfaceColor<"u"?Se[fr]=$e.surfaceColor:$e.color&&(Se[fr]=Y.CC.color($e.color)))}var qe=ae.vertexArray,Pe=L.vertices;for(let fr=0,Hr=Pe.length;fr<Hr;fr++){let ya=ae.vertices*3;qe[ya]=Pe[fr].x,qe[ya+1]=Pe[fr].y,qe[ya+2]=Pe[fr].z,ae.vertices++}var Ve=ae.colorArray;let Ie=ae.atomArray;if(G.voldata&&G.volscheme){var Xe=G.volscheme,et=G.voldata,tt=Xe.range()||[-1,1];for(let fr=0,Hr=Pe.length;fr<Hr;fr++){let ya=Pe[fr].atomid,Ta=et.getVal(Pe[fr].x,Pe[fr].y,Pe[fr].z),ua=Y.CC.color(Xe.valueToHex(Ta,tt)),Ua=fr*3;Ve[Ua]=ua.r,Ve[Ua+1]=ua.g,Ve[Ua+2]=ua.b,Ie[fr]=A[ya]}}else if(Se.length>0)for(let fr=0,Hr=Pe.length;fr<Hr;fr++){let ya=Pe[fr].atomid,Ta=fr*3;Ve[Ta]=Se[ya].r,Ve[Ta+1]=Se[ya].g,Ve[Ta+2]=Se[ya].b,Ie[fr]=A[ya]}var rt=L.faces;ae.faceidx=rt.length,ee.initTypedArrays();var ze=ae.vertexArray,lt=ae.normalArray,bt,At,Vt,Yt;for(let fr=0,Hr=rt.length;fr<Hr;fr+=3){var er=rt[fr],lr=rt[fr+1],yr=rt[fr+2],$r=er*3,ia=lr*3,Sa=yr*3;bt=new W.Vector3(ze[$r],ze[$r+1],ze[$r+2]),At=new W.Vector3(ze[ia],ze[ia+1],ze[ia+2]),Vt=new W.Vector3(ze[Sa],ze[Sa+1],ze[Sa+2]),Vt.subVectors(Vt,At),bt.subVectors(bt,At),Vt.cross(bt),Yt=Vt,Yt.normalize(),lt[$r]+=Yt.x,lt[ia]+=Yt.x,lt[Sa]+=Yt.x,lt[$r+1]+=Yt.y,lt[ia+1]+=Yt.y,lt[Sa+1]+=Yt.y,lt[$r+2]+=Yt.z,lt[ia+2]+=Yt.z,lt[Sa+2]+=Yt.z}ae.faceArray=new Uint16Array(rt);var Xr=new B.Mesh(ee,G);return Xr}static generateMeshSyncHelper(A,L,G,ee,ae,Se){var $e=new E.ProteinSurface;return $e.initparm(L,A!==1,Se),$e.fillvoxels(ae,G),$e.buildboundary(),(A==E.SurfaceType.SES||A==E.SurfaceType.MS)&&($e.fastdistancemap(),$e.boundingatom(!1),$e.fillvoxelswaals(ae,G)),$e.marchingcube(A),$e.getFacesAndVertices(ee)}static getMatWithStyle(A){let L=null;A.onesided?L=new B.MeshLambertMaterial:L=new B.MeshDoubleLambertMaterial,L.vertexColors=B.Coloring.VertexColors;for(var G in A)G==="color"||G==="map"||A.hasOwnProperty(G)&&(L[G]=A[G]);return A.opacity!==void 0&&(A.opacity===1?L.transparent=!1:L.transparent=!0),A.wireframe!==void 0&&(L.wireframe=A.wireframe),L}addMesh(A){let L={geo:A.geometry,mat:A.material,done:!0,finished:!1};var G=this.nextSurfID();return this.surfaces[G]=new l([L]),G}static shallowCopy(A){var L=[];let G=A.length;for(let ee=0;ee<G;ee++)L[ee]=(0,Z.extend)({},A[ee]);return L}addSurface(A,L={},G={},ee,ae,Se){let $e=this.nextSurfID(),qe=null,Pe=this,Ve=E.SurfaceType.VDW;typeof A=="string"?f.surfaceTypeMap[A.toUpperCase()]!==void 0?Ve=f.surfaceTypeMap[A]:console.log("Surface type : "+A+" is not recognized"):typeof A=="number"&&(Ve=A);var Ie=null,Xe=null,et=f.shallowCopy(this.getAtomsFromSel(G));ee?Ie=f.shallowCopy(this.getAtomsFromSel(ee)):Ie=et,(0,Z.adjustVolumeStyle)(L);var tt=!1,rt;for(rt=0;rt<this.models.length;rt++)if(this.models[rt]){var ze=this.models[rt].getSymmetries();if(ze.length>1||ze.length==1&&!ze[0].isIdentity()){tt=!0;break}}var lt=function(lr,yr,$r){ae?Xe=f.shallowCopy(Pe.getAtomsFromSel(ae)):Xe=$r;var ia,Sa=(0,Z.getExtent)($r,!0);if(L.map&&L.map.prop){var Xr=L.map.prop;let oa=(0,k.getGradient)(L.map.scheme||L.map.gradient||new k.Gradient.RWB),rn=oa.range();rn||(rn=(0,Z.getPropertyRange)($r,Xr)),L.colorscheme={prop:Xr,gradient:oa}}for(let oa=0,rn=yr.length;oa<rn;oa++)ia=yr[oa],ia.surfaceColor=(0,Z.getColorFromStyle)(ia,L);var fr=f.volume(Sa),Hr=Pe.carveUpExtent(Sa,yr,$r);if(Xe&&Xe.length&&Xe.length>0){var ya=(0,Z.getExtent)(Xe,!0),Ta=function(oa,rn){var Za=function(ur,Qr){var Dr=ur.extent,Ea=Dr[1][0]-Dr[0][0],da=Dr[1][1]-Dr[0][1],Tt=Dr[1][2]-Dr[0][2],Lr=Ea-Qr[2][0];Lr*=Lr;var Gr=da-Qr[2][1];Gr*=Gr;var wa=Tt-Qr[2][2];return wa*=wa,Lr+Gr+wa},Nt=Za(oa,ya),Gt=Za(rn,ya);return Nt-Gt};Hr.sort(Ta)}var ua=[];for(let oa=0,rn=yr.length;oa<rn;oa++)ia=yr[oa],ua[oa]={x:ia.x,y:ia.y,z:ia.z,serial:oa,elem:ia.elem};var Ua=!!E.syncSurface;if((typeof $3Dmol>"u"||typeof $3Dmol.SurfaceWorker>"u")&&(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),Ua=!0),Ua){var Ya=function(oa){return new Promise(function(rn){for(var Za=f.generateMeshSyncHelper(Ve,Hr[oa].extent,Hr[oa].atoms,Hr[oa].toshow,ua,fr),Nt=(0,x.splitMesh)({vertexArr:Za.vertices,faceArr:Za.faces}),Gt=0,ur=Nt.length;Gt<ur;Gt++){Za={vertices:Nt[Gt].vertexArr,faces:Nt[Gt].faceArr};var Qr=f.generateSurfaceMesh(yr,Za,qe);(0,Z.mergeGeos)(lr.geo,Qr)}Pe.render(),rn()})},Ia=[];for(let oa=0;oa<Hr.length;oa++)Ia.push(Ya(oa));return Promise.all(Ia).then(function(){return lr.done=!0,Pe.render(),Promise.resolve($e)})}else{var Na=[];Ve<0&&(Ve=0);for(let oa=0,rn=f.numWorkers;oa<rn;oa++){var Ra=new Worker($3Dmol.SurfaceWorker);Na.push(Ra),Ra.postMessage({type:-1,atoms:ua,volume:fr})}return new Promise(function(oa,rn){var Za=0,Nt=function(){!Na||!Na.length||Na.forEach(function(Dr){Dr&&Dr.terminate&&Dr.terminate()})},Gt=function(Dr){for(var Ea=(0,x.splitMesh)({vertexArr:Dr.data.vertices,faceArr:Dr.data.faces}),da=0,Tt=Ea.length;da<Tt;da++){var Lr={vertices:Ea[da].vertexArr,faces:Ea[da].faceArr},Gr=f.generateSurfaceMesh(yr,Lr,qe);(0,Z.mergeGeos)(lr.geo,Gr)}Pe.render(),Za++,Za==Hr.length&&(lr.done=!0,Nt(),oa($e))},ur=function(Dr){Nt(),console.log(Dr.message+" ("+Dr.filename+":"+Dr.lineno+")"),rn(Dr)};for(let Dr=0;Dr<Hr.length;Dr++){var Qr=Na[Dr%Na.length];Qr.onmessage=Gt,Qr.onerror=ur,Qr.postMessage({type:Ve,expandedExtent:Hr[Dr].extent,extendedAtoms:Hr[Dr].atoms,atomsToShow:Hr[Dr].toshow})}})}};L=L||{},qe=f.getMatWithStyle(L);let bt=new l([]);bt.style=L,bt.atomsel=G,bt.allsel=ee,bt.focus=ae;var At=null;if(tt){var Vt={},Yt={};for(rt=0;rt<this.models.length;rt++)Vt[rt]=[],Yt[rt]=[];for(rt=0;rt<Ie.length;rt++)Vt[Ie[rt].model].push(Ie[rt]);for(rt=0;rt<et.length;rt++)Yt[et[rt].model].push(et[rt]);var er=[];for(rt=0;rt<this.models.length;rt++)Yt[rt].length>0&&(bt.push({geo:new B.Geometry(!0),mat:qe,done:!1,finished:!1,symmetries:this.models[rt].getSymmetries()}),er.push(lt(bt[bt.length-1],Vt[rt],Yt[rt])));At=Promise.all(er)}else bt.push({geo:new B.Geometry(!0),mat:qe,done:!1,finished:!1,symmetries:[new W.Matrix4]}),At=lt(bt[bt.length-1],Ie,et);return this.surfaces[$e]=bt,At.surfid=$e,Se&&typeof Se=="function"?(At.then(function(lr){Se(lr)}),$e):At}setSurfaceMaterialStyle(A,L){if((0,Z.adjustVolumeStyle)(L),this.surfaces[A]){var G=this.surfaces[A];for(let ae=0;ae<G.length;ae++){var ee=G[ae].mat=f.getMatWithStyle(L);if(G[ae].mat.side=B.FrontSide,L.wireframe&&G[ae].geo.setUpWireframe(),L.color){G[ae].mat.color=Y.CC.color(L.color),G[ae].geo.colorsNeedUpdate=!0;const Se=Y.CC.color(L.color);G[ae].geo.setColor(Se)}else if(ee.voldata&&ee.volscheme){const Se=ee.volscheme,$e=ee.voldata,qe=Y.CC,Pe=Se.range()||[-1,1];G[ae].geo.setColors(function(Ve,Ie,Xe){let et=$e.getVal(Ve,Ie,Xe);return qe.color(Se.valueToHex(et,Pe))})}else{G[ae].geo.colorsNeedUpdate=!0;for(let Se of G[ae].geo.geometryGroups)for(let $e=0;$e<Se.vertices;$e++){let qe=(0,Z.getColorFromStyle)(Se.atomArray[$e],L),Pe=3*$e;Se.colorArray[Pe]=qe.r,Se.colorArray[Pe+1]=qe.g,Se.colorArray[Pe+2]=qe.b}}G[ae].finished=!1}}return this}getSurface(A){return this.surfaces[A]}removeSurface(A){for(var L=this.surfaces[A],G=0;G<L.length;G++)L[G]&&L[G].lastGL&&(L[G].geo!==void 0&&L[G].geo.dispose(),L[G].mat!==void 0&&L[G].mat.dispose(),this.modelGroup.remove(L[G].lastGL));return delete this.surfaces[A],this.show(),this}removeAllSurfaces(){for(var A in this.surfaces)if(this.surfaces.hasOwnProperty(A)){for(var L=this.surfaces[A],G=0;G<L.length;G++)L[G]&&L[G].lastGL&&(L[G].geo!==void 0&&L[G].geo.dispose(),L[G].mat!==void 0&&L[G].mat.dispose(),this.modelGroup.remove(L[G].lastGL));delete this.surfaces[A]}return this.show(),this}jmolMoveTo(){var A=this.modelGroup.position,L="center { "+-A.x+" "+-A.y+" "+-A.z+" }; ",G=this.rotationGroup.quaternion;return L+="moveto .5 quaternion { "+G.x+" "+G.y+" "+G.z+" "+G.w+" };",L}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(A,L){L=L||{};var G=this.getAtomsFromSel(L);if(typeof A=="function")for(let Se=0,$e=G.length;Se<$e;Se++){let qe=G[Se];A(qe)}else for(let Se=0,$e=G.length;Se<$e;Se++){var ee=G[Se];for(let qe=0,Pe=A.length;qe<Pe;qe++){let Ve=A[qe];if(Ve.props)for(var ae in Ve.props)Ve.props.hasOwnProperty(ae)&&this.atomIsSelected(ee,Ve)&&(ee.properties||(ee.properties={}),ee.properties[ae]=Ve.props[ae])}}return this}linkViewer(A){return this.linkedViewers.push(A),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(A){this.rotationGroup.position.z=this.CAMERA_Z-A}setAutoEyeSeparation(A,L){var G=this.getPerceivedDistance();return L||(L=5),A||this.camera.position.x>0?this.camera.position.x=G*Math.tan(Math.PI/180*L):this.camera.position.x=-G*Math.tan(Math.PI/180*L),this.camera.lookAt(new W.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(A){this.config.cartoonQuality=A}}f.numWorkers=4,f.maxVolume=64e3,f.surfaceTypeMap={VDW:E.SurfaceType.VDW,MS:E.SurfaceType.MS,SAS:E.SurfaceType.SAS,SES:E.SurfaceType.SES};function D(K,A){if(K=(0,Z.getElement)(K),!!K){A=A||{};try{var L=new f(K,A);return L}catch(G){throw"error creating viewer: "+G}}}function I(K,A={},L={}){if(K=(0,Z.getElement)(K),!!K){var G=[],ee=document.createElement("canvas");L.rows=A.rows,L.cols=A.cols,L.control_all=A.control_all!=null?A.control_all:!1,K.appendChild(ee);try{for(var ae=0;ae<A.rows;ae++){for(var Se=[],$e=0;$e<A.cols;$e++){L.row=ae,L.col=$e,L.canvas=ee,L.viewers=G,L.control_all=A.control_all;var qe=D(K,(0,Z.extend)({},L));Se.push(qe)}G.unshift(Se)}}catch(Pe){throw"error creating viewer grid: "+Pe}return G}}function V(K){var A=this;if(K=(0,Z.getElement)(K),!!K){var L=I(K,{rows:1,cols:2,control_all:!0});this.glviewer1=L[0][0],this.glviewer2=L[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var G=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(ae){return typeof A.glviewer1[ae]=="function"}),ee=0;ee<G.length;ee++)this[G[ee]]=(function(ae){return function(){var Se=this.glviewer1[ae].apply(this.glviewer1,arguments),$e=this.glviewer2[ae].apply(this.glviewer2,arguments);return[Se,$e]}})(G[ee]);this.setCoordinates=function(ae,Se,$e){for(var qe=0;qe<ae.length;qe++)ae[qe].setCoordinates(Se,$e)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(ae){this.glviewer1.render(),this.glviewer2.render(),ae&&ae(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}}),"./src/Gradient.ts":((t,i,a)=>{a.r(i),a.d(i,{CustomLinear:()=>C,Gradient:()=>W,GradientType:()=>y,ROYGB:()=>E,RWB:()=>S,Sinebow:()=>U,builtinGradients:()=>B,getGradient:()=>k,normalizeValue:()=>x});var n=a("./src/colors.ts");class y{}function x(Y,Z,T){return Z>=Y?(T<Y&&(T=Y),T>Z&&(T=Z),{lo:Y,hi:Z,val:T}):(T>Y&&(T=Y),T<Z&&(T=Z),T=Y-T+Z,{lo:Z,hi:Y,val:T})}function k(Y){if(Y instanceof y)return Y;if(Y.gradient!==void 0&&B[Y.gradient]){let Z=Y.min===void 0?-1:Y.min,T=Y.max===void 0?1:Y.max;return Y.mid===void 0?Y.colors===void 0?new B[Y.gradient](Z,T):new B[Y.gradient](Z,T,Y.colors):new B[Y.gradient](Z,T,Y.mid)}else if(typeof Y.gradient=="string"&&Y.gradient.startsWith("linear_")){let Z=Y.gradient.split("_");Z.shift();let T=Y.min===void 0?-1:Y.min,l=Y.max===void 0?1:Y.max;return new C(T,l,Z)}return Y}class S extends y{constructor(Z,T,l){super(),this.gradient="RWB",this.mult=1,this.mid=l,this.min=Z,this.max=T,typeof T>"u"&&Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0]):Z&&T&&!Array.isArray(Z)&&(this.min=Z,this.max=T)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(Z,T){var l,f;if(Z=this.mult*Z,T?(l=T[0],f=T[1]):(l=this.min,f=this.max),Z===void 0)return 16777215;var D=x(l,f,Z);l=D.lo,f=D.hi,Z=D.val;var I=(f+l)/2;T&&typeof T[2]<"u"?I=T[2]:typeof this.mid<"u"?I=this.mid:I=(l+f)/2;var V,K;return Z<I?(V=Math.floor(255*Math.sqrt((Z-l)/(I-l))),K=16711680+256*V+V,K):Z>I?(V=Math.floor(255*Math.sqrt(1-(Z-I)/(f-I))),K=65536*V+256*V+255,K):16777215}}class E extends y{constructor(Z,T){super(),this.gradient="ROYGB",this.mult=1,this.min=Z,this.max=T,typeof T>"u"&&Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0]):Z&&T&&!Array.isArray(Z)&&(this.min=Z,this.max=T)}valueToHex(Z,T){var l,f;if(Z=this.mult*Z,T?(l=T[0],f=T[1]):(l=this.min,f=this.max),typeof Z>"u")return 16777215;var D=x(l,f,Z);l=D.lo,f=D.hi,Z=D.val;var I=(l+f)/2,V=(l+I)/2,K=(I+f)/2,A,L;return Z<V?(A=Math.floor(255*Math.sqrt((Z-l)/(V-l))),L=16711680+256*A+0,L):Z<I?(A=Math.floor(255*Math.sqrt(1-(Z-V)/(I-V))),L=65536*A+65280+0,L):Z<K?(A=Math.floor(255*Math.sqrt((Z-I)/(K-I))),L=65280+1*A,L):(A=Math.floor(255*Math.sqrt(1-(Z-K)/(f-K))),L=0+256*A+255,L)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class U extends y{constructor(Z,T){super(),this.gradient="Sinebow",this.mult=1,this.min=Z,this.max=T,typeof T>"u"&&Array.isArray(Z)&&Z.length>=2&&(this.max=Z[1],this.min=Z[0]),T<Z&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(Z,T){var l,f;if(Z=this.mult*Z,T?(l=T[0],f=T[1]):(l=this.min,f=this.max),typeof Z>"u")return 16777215;var D=W.normalizeValue(l,f,Z);l=D.lo,f=D.hi,Z=D.val;var I=(Z-l)/(f-l),V=5*I/6+.5,K=Math.sin(Math.PI*V);K*=K*255;var A=Math.sin(Math.PI*(V+1/3));A*=A*255;var L=Math.sin(Math.PI*(V+2/3));return L*=L*255,65536*Math.floor(K)+256*Math.floor(L)+1*Math.floor(A)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class C extends y{constructor(Z,T,l){super(),this.gradient="linear",this.colors=new Array;var f;if(Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0],f=T):(this.min=Z,this.max=T,f=l),f)for(let D of f)this.colors.push(n.CC.color(D));else this.colors.push(n.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(Z,T){var l,f;if(T?(l=T[0],f=T[1]):(l=this.min,f=this.max),Z===void 0)return 16777215;var D=x(l,f,Z);l=D.lo,f=D.hi,Z=D.val;let I=this.colors.length,V=(f-l)/I,K=Math.min(Math.floor((Z-l)/V),I-1),A=Math.min(K+1,I-1),L=(Z-l-K*V)/V,G=this.colors[K],ee=this.colors[A];return new n.Color(G.r+L*(ee.r-G.r),G.g+L*(ee.g-G.g),G.b+L*(ee.b-G.b)).getHex()}}const B={rwb:S,RWB:S,roygb:E,ROYGB:E,sinebow:U,linear:C};class W extends y{valueToHex(Z,T){return 0}range(){return null}}W.RWB=S,W.ROYGB=E,W.Sinebow=U,W.CustomLinear=C,W.builtinGradients=B,W.normalizeValue=x,W.getGradient=k}),"./src/Label.ts":((t,i,a)=>{a.r(i),a.d(i,{Label:()=>U,LabelCount:()=>k});var n=a("./src/WebGL/index.ts"),y=a("./src/Gradient.ts"),x=a("./src/colors.ts");let k=0;function S(C,B,W,Y,Z,T,l){C.beginPath(),C.moveTo(B+T,W),C.lineTo(B+Y-T,W),C.quadraticCurveTo(B+Y,W,B+Y,W+T),C.lineTo(B+Y,W+Z-T),C.quadraticCurveTo(B+Y,W+Z,B+Y-T,W+Z),C.lineTo(B+T,W+Z),C.quadraticCurveTo(B,W+Z,B,W+Z-T),C.lineTo(B,W+T),C.quadraticCurveTo(B,W,B+T,W),C.closePath(),C.fill(),l&&C.stroke()}function E(C,B,W){var Y=W;return typeof C<"u"&&(C instanceof x.Color?Y=C.scaled():(Y=x.CC.color(C),typeof Y.scaled<"u"&&(Y=Y.scaled()))),typeof B<"u"&&(Y.a=parseFloat(B)),Y}class U{constructor(B,W){this.id=k++,this.stylespec=W||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new n.Sprite,this.text=B,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var B=this.stylespec,W=typeof B.useScreen>"u"?!1:B.useScreen,Y=B.showBackground;(Y==="0"||Y==="false")&&(Y=!1),typeof Y>"u"&&(Y=!0);var Z=B.font?B.font:"sans-serif",T=parseInt(B.fontSize)?parseInt(B.fontSize):18,l=E(B.fontColor,B.fontOpacity,{r:255,g:255,b:255,a:1}),f=B.padding?B.padding:4,D=B.borderThickness?B.borderThickness:0,I=E(B.backgroundColor,B.backgroundOpacity,{r:0,g:0,b:0,a:1}),V=E(B.borderColor,B.borderOpacity,I),K=B.position?B.position:{x:-10,y:1,z:1},A=B.inFront!==void 0?B.inFront:!0;(A==="false"||A==="0")&&(A=!1);var L=B.alignment||n.SpriteAlignment.topLeft;typeof L=="string"&&L in n.SpriteAlignment&&(L=n.SpriteAlignment[L]);var G="";B.bold&&(G="bold "),this.context.font=G+T+"px  "+Z;var ee=this.context.measureText(this.text),ae=ee.width;Y||(D=0);var Se=ae+2.5*D+2*f,$e=T*1.25+2*D+2*f;if(B.backgroundImage){var qe=B.backgroundImage,Pe=B.backgroundWidth?B.backgroundWidth:qe.width,Ve=B.backgroundHeight?B.backgroundHeight:qe.height;Pe>Se&&(Se=Pe),Ve>$e&&($e=Ve)}if(this.canvas.width=Se,this.canvas.height=$e,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),G="",B.bold&&(G="bold "),this.context.font=G+T+"px  "+Z,this.context.fillStyle="rgba("+I.r+","+I.g+","+I.b+","+I.a+")",this.context.strokeStyle="rgba("+V.r+","+V.g+","+V.b+","+V.a+")",B.backgroundGradient){let Xe=this.context.createLinearGradient(0,$e/2,Se,$e/2),et=y.Gradient.getGradient(B.backgroundGradient),tt=et.range(),rt=-1,ze=1;tt&&(rt=tt[0],ze=tt[1]);let lt=ze-rt;for(let bt=0;bt<1.01;bt+=.1){let At=E(et.valueToHex(rt+lt*bt)),Vt="rgba("+At.r+","+At.g+","+At.b+","+At.a+")";Xe.addColorStop(bt,Vt)}this.context.fillStyle=Xe}this.context.lineWidth=D,Y&&S(this.context,D,D,Se-2*D,$e-2*D,6,D>0),B.backgroundImage&&this.context.drawImage(qe,0,0,Se,$e),this.context.fillStyle="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",this.context.fillText(this.text,D+f,T+D+f,ae);var Ie=new n.Texture(this.canvas);Ie.needsUpdate=!0,this.sprite.material=new n.SpriteMaterial({map:Ie,useScreenCoordinates:W,alignment:L,depthTest:!A,screenOffset:B.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(K.x,K.y,K.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}}),"./src/ProteinSurface4.ts":((t,i,a)=>{a.r(i),a.d(i,{MarchingCube:()=>E,MarchingCubeInitializer:()=>S,PointGrid:()=>U,ProteinSurface:()=>C,SurfaceType:()=>y,setSyncSurface:()=>k,syncSurface:()=>x});var n=a("./src/WebGL/math/index.ts"),y;(function(B){B[B.VDW=1]="VDW",B[B.MS=2]="MS",B[B.SAS=3]="SAS",B[B.SES=4]="SES"})(y||(y={}));var x=!1;function k(B){x=B}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(x=!0);class S{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(W,Y,Z,T){let l=!!T.fulltable,f=T.hasOwnProperty("origin")&&T.origin.hasOwnProperty("x")?T.origin:{x:0,y:0,z:0},D=!!T.voxel,I=T.matrix,V=T.nX||0,K=T.nY||0,A=T.nZ||0,L=T.scale||1,G=null;T.unitCube?G=T.unitCube:G={x:L,y:L,z:L};let ee=new Int32Array(V*K*A),ae,Se;for(ae=0,Se=ee.length;ae<Se;++ae)ee[ae]=-1;let $e=function(Ie,Xe,et,tt,rt,ze){let lt={x:0,y:0,z:0},bt=!!(tt&1<<rt),At=!!(tt&1<<ze),Vt=rt;if(!bt&&At&&(Vt=ze),Vt&1&&et++,Vt&2&&Xe++,Vt&4&&Ie++,I){let er=new n.Vector3(Ie,Xe,et);er=er.applyMatrix4(I),lt={x:er.x,y:er.y,z:er.z}}else lt.x=f.x+G.x*Ie,lt.y=f.y+G.y*Xe,lt.z=f.z+G.z*et;let Yt=(K*Ie+Xe)*A+et;return D?(Y.push(lt),Y.length-1):(ee[Yt]<0&&(ee[Yt]=Y.length,Y.push(lt)),ee[Yt])},qe=new Int32Array(12),Pe=l?this.edgeTable2:this.edgeTable,Ve=l?this.triTable2:this.triTable;for(ae=0;ae<V-1;++ae)for(let Ie=0;Ie<K-1;++Ie)for(let Xe=0;Xe<A-1;++Xe){let et=0;for(let ze=0;ze<8;++ze){let lt=(K*(ae+((ze&4)>>2))+Ie+((ze&2)>>1))*A+Xe+(ze&1),bt=!!(W[lt]&this.ISDONE);et|=bt<<ze}if(et===0||et===255)continue;let tt=Pe[et];if(tt===0)continue;let rt=Ve[et];tt&1&&(qe[0]=$e(ae,Ie,Xe,et,0,1)),tt&2&&(qe[1]=$e(ae,Ie,Xe,et,1,3)),tt&4&&(qe[2]=$e(ae,Ie,Xe,et,3,2)),tt&8&&(qe[3]=$e(ae,Ie,Xe,et,2,0)),tt&16&&(qe[4]=$e(ae,Ie,Xe,et,4,5)),tt&32&&(qe[5]=$e(ae,Ie,Xe,et,5,7)),tt&64&&(qe[6]=$e(ae,Ie,Xe,et,7,6)),tt&128&&(qe[7]=$e(ae,Ie,Xe,et,6,4)),tt&256&&(qe[8]=$e(ae,Ie,Xe,et,0,4)),tt&512&&(qe[9]=$e(ae,Ie,Xe,et,1,5)),tt&1024&&(qe[10]=$e(ae,Ie,Xe,et,3,7)),tt&2048&&(qe[11]=$e(ae,Ie,Xe,et,2,6));for(let ze=0;ze<rt.length;ze+=3){let lt=qe[rt[ze]],bt=qe[rt[ze+1]],At=qe[rt[ze+2]];D&&ze>=3&&(Y.push(Y[lt]),lt=Y.length-1,Y.push(Y[bt]),bt=Y.length-1,Y.push(Y[At]),At=Y.length-1),Z.push(lt),Z.push(bt),Z.push(At)}}}laplacianSmooth(W,Y,Z){let T=new Array(Y.length),l,f,D,I,V;for(l=0,f=Y.length;l<f;l++)T[l]={x:0,y:0,z:0};let K=new Array(20),A;for(l=0;l<20;l++)K[l]=new Array(Y.length);for(l=0,f=Y.length;l<f;l++)K[0][l]=0;for(l=0,f=Z.length/3;l<f;l++){let ee=l*3,ae=l*3+1,Se=l*3+2;for(A=!0,D=0,I=K[0][Z[ee]];D<I;D++)if(Z[ae]==K[D+1][Z[ee]]){A=!1;break}for(A&&(K[0][Z[ee]]++,K[K[0][Z[ee]]][Z[ee]]=Z[ae]),A=!0,D=0,I=K[0][Z[ee]];D<I;D++)if(Z[Se]==K[D+1][Z[ee]]){A=!1;break}for(A&&(K[0][Z[ee]]++,K[K[0][Z[ee]]][Z[ee]]=Z[Se]),A=!0,D=0,I=K[0][Z[ae]];D<I;D++)if(Z[ee]==K[D+1][Z[ae]]){A=!1;break}for(A&&(K[0][Z[ae]]++,K[K[0][Z[ae]]][Z[ae]]=Z[ee]),A=!0,D=0,I=K[0][Z[ae]];D<I;D++)if(Z[Se]==K[D+1][Z[ae]]){A=!1;break}for(A&&(K[0][Z[ae]]++,K[K[0][Z[ae]]][Z[ae]]=Z[Se]),A=!0,D=0;D<K[0][Z[Se]];D++)if(Z[ee]==K[D+1][Z[Se]]){A=!1;break}for(A&&(K[0][Z[Se]]++,K[K[0][Z[Se]]][Z[Se]]=Z[ee]),A=!0,D=0,I=K[0][Z[Se]];D<I;D++)if(Z[ae]==K[D+1][Z[Se]]){A=!1;break}A&&(K[0][Z[Se]]++,K[K[0][Z[Se]]][Z[Se]]=Z[ae])}let L=1,G=.5;for(V=0;V<W;V++){for(l=0,f=Y.length;l<f;l++)if(K[0][l]<3)T[l].x=Y[l].x,T[l].y=Y[l].y,T[l].z=Y[l].z;else if(K[0][l]==3||K[0][l]==4){for(T[l].x=0,T[l].y=0,T[l].z=0,D=0,I=K[0][l];D<I;D++)T[l].x+=Y[K[D+1][l]].x,T[l].y+=Y[K[D+1][l]].y,T[l].z+=Y[K[D+1][l]].z;T[l].x+=G*Y[l].x,T[l].y+=G*Y[l].y,T[l].z+=G*Y[l].z,T[l].x/=G+K[0][l],T[l].y/=G+K[0][l],T[l].z/=G+K[0][l]}else{for(T[l].x=0,T[l].y=0,T[l].z=0,D=0,I=K[0][l];D<I;D++)T[l].x+=Y[K[D+1][l]].x,T[l].y+=Y[K[D+1][l]].y,T[l].z+=Y[K[D+1][l]].z;T[l].x+=L*Y[l].x,T[l].y+=L*Y[l].y,T[l].z+=L*Y[l].z,T[l].x/=L+K[0][l],T[l].y/=L+K[0][l],T[l].z/=L+K[0][l]}for(l=0,f=Y.length;l<f;l++)Y[l].x=T[l].x,Y[l].y=T[l].y,Y[l].z=T[l].z}}}let E=new S;class U{constructor(W,Y,Z){this.data=new Int32Array(W*Y*Z*3),this.width=Y,this.height=Z}set(W,Y,Z,T){let l=((W*this.width+Y)*this.height+Z)*3;this.data[l]=T.ix,this.data[l+1]=T.iy,this.data[l+2]=T.iz}get(W,Y,Z){let T=((W*this.width+Y)*this.height+Z)*3;return{ix:this.data[T],iy:this.data[T+1],iz:this.data[T+2]}}}class C{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],C.MarchingCube||(C.MarchingCube=new S)}getVDWIndex(W){return!W.elem||typeof this.vdwRadii[W.elem]>"u"?"X":W.elem}getFacesAndVertices(W){let Y={};for(let l=0,f=W.length;l<f;l++)Y[W[l]]=!0;let Z=this.verts;for(let l=0,f=Z.length;l<f;l++)Z[l].x=Z[l].x/this.scaleFactor-this.ptranx,Z[l].y=Z[l].y/this.scaleFactor-this.ptrany,Z[l].z=Z[l].z/this.scaleFactor-this.ptranz;let T=[];for(let l=0,f=this.faces.length;l<f;l+=3){let D=this.faces[l],I=this.faces[l+1],V=this.faces[l+2],K=Z[D].atomid,A=Z[I].atomid,L=Z[V].atomid,G=K;A<G&&(G=A),L<G&&(G=L),Y[G]&&D!==I&&I!==V&&D!==V&&(T.push(D),T.push(I),T.push(V))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:Z,faces:T}}initparm(W,Y,Z){Z>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let T=1/this.scaleFactor*5.5;this.pminx=W[0][0],this.pmaxx=W[1][0],this.pminy=W[0][1],this.pmaxy=W[1][1],this.pminz=W[0][2],this.pmaxz=W[1][2],Y?(this.pminx-=this.probeRadius+T,this.pminy-=this.probeRadius+T,this.pminz-=this.probeRadius+T,this.pmaxx+=this.probeRadius+T,this.pmaxy+=this.probeRadius+T,this.pmaxz+=this.probeRadius+T):(this.pminx-=T,this.pminy-=T,this.pminz-=T,this.pmaxx+=T,this.pmaxy+=T,this.pmaxz+=T),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(Y),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(W){let Y={};for(const Z in this.vdwRadii){let T=this.vdwRadii[Z];W?Y[Z]=(T+this.probeRadius)*this.scaleFactor+.5:Y[Z]=T*this.scaleFactor+.5;let l=Y[Z]*Y[Z];this.widxz[Z]=Math.floor(Y[Z])+1,this.depty[Z]=new Int32Array(this.widxz[Z]*this.widxz[Z]);let f=0;for(let D=0;D<this.widxz[Z];D++)for(let I=0;I<this.widxz[Z];I++){let V=D*D+I*I;if(V>l)this.depty[Z][f]=-1;else{let K=Math.sqrt(l-V);this.depty[Z][f]=Math.floor(K)}f++}}}fillvoxels(W,Y){for(let Z=0,T=this.vpBits.length;Z<T;Z++)this.vpBits[Z]=0,this.vpDistance[Z]=-1,this.vpAtomID[Z]=-1;for(let Z in Y){let T=W[Y[Z]];T!==void 0&&this.fillAtom(T,W)}for(let Z=0,T=this.vpBits.length;Z<T;Z++)this.vpBits[Z]&this.INOUT&&(this.vpBits[Z]|=this.ISDONE)}fillAtom(W,Y){let Z=Math.floor(.5+this.scaleFactor*(W.x+this.ptranx)),T=Math.floor(.5+this.scaleFactor*(W.y+this.ptrany)),l=Math.floor(.5+this.scaleFactor*(W.z+this.ptranz)),f=this.getVDWIndex(W),D=0,I=this.pWidth*this.pHeight;for(let V=0,K=this.widxz[f];V<K;V++)for(let A=0;A<K;A++){if(this.depty[f][D]!=-1){for(let L=-1;L<2;L++)for(let G=-1;G<2;G++)for(let ee=-1;ee<2;ee++)if(L!==0&&G!==0&&ee!==0){let ae=L*V,Se=ee*A;for(let $e=0;$e<=this.depty[f][D];$e++){let qe=$e*G,Pe=Z+ae,Ve=T+qe,Ie=l+Se;if(Pe<0||Ve<0||Ie<0||Pe>=this.pLength||Ve>=this.pWidth||Ie>=this.pHeight)continue;let Xe=Pe*I+Ve*this.pHeight+Ie;if(!(this.vpBits[Xe]&this.INOUT))this.vpBits[Xe]|=this.INOUT,this.vpAtomID[Xe]=W.serial;else{let et=Y[this.vpAtomID[Xe]];if(et.serial!=W.serial){let tt=Z+ae-Math.floor(.5+this.scaleFactor*(et.x+this.ptranx)),rt=T+qe-Math.floor(.5+this.scaleFactor*(et.y+this.ptrany)),ze=l+Se-Math.floor(.5+this.scaleFactor*(et.z+this.ptranz));ae*ae+qe*qe+Se*Se<tt*tt+rt*rt+ze*ze&&(this.vpAtomID[Xe]=W.serial)}}}}}D++}}fillvoxelswaals(W,Y){for(let Z=0,T=this.vpBits.length;Z<T;Z++)this.vpBits[Z]&=~this.ISDONE;for(let Z in Y){let T=W[Y[Z]];T!==void 0&&this.fillAtomWaals(T,W)}}fillAtomWaals(W,Y){let Z=0,T=Math.floor(.5+this.scaleFactor*(W.x+this.ptranx)),l=Math.floor(.5+this.scaleFactor*(W.y+this.ptrany)),f=Math.floor(.5+this.scaleFactor*(W.z+this.ptranz)),D=this.getVDWIndex(W),I=this.pWidth*this.pHeight;for(let V=0,K=this.widxz[D];V<K;V++)for(let A=0;A<K;A++){if(this.depty[D][Z]!=-1){for(let L=-1;L<2;L++)for(let G=-1;G<2;G++)for(let ee=-1;ee<2;ee++)if(L!==0&&G!==0&&ee!==0){let ae=L*V,Se=ee*A;for(let $e=0;$e<=this.depty[D][Z];$e++){let qe=$e*G,Pe=T+ae,Ve=l+qe,Ie=f+Se;if(Pe<0||Ve<0||Ie<0||Pe>=this.pLength||Ve>=this.pWidth||Ie>=this.pHeight)continue;let Xe=Pe*I+Ve*this.pHeight+Ie;if(!(this.vpBits[Xe]&this.ISDONE))this.vpBits[Xe]|=this.ISDONE,this.vpAtomID[Xe]=W.serial;else{let et=Y[this.vpAtomID[Xe]];if(et.serial!=W.serial){let tt=T+ae-Math.floor(.5+this.scaleFactor*(et.x+this.ptranx)),rt=l+qe-Math.floor(.5+this.scaleFactor*(et.y+this.ptrany)),ze=f+Se-Math.floor(.5+this.scaleFactor*(et.z+this.ptranz));ae*ae+qe*qe+Se*Se<tt*tt+rt*rt+ze*ze&&(this.vpAtomID[Xe]=W.serial)}}}}}Z++}}buildboundary(){let W=this.pWidth*this.pHeight;for(let Y=0;Y<this.pLength;Y++)for(let Z=0;Z<this.pHeight;Z++)for(let T=0;T<this.pWidth;T++){let l=Y*W+T*this.pHeight+Z;if(this.vpBits[l]&this.INOUT){let f=0;for(;f<26;){let D=Y+this.nb[f][0],I=Z+this.nb[f][2],V=T+this.nb[f][1];if(D>-1&&D<this.pLength&&V>-1&&V<this.pWidth&&I>-1&&I<this.pHeight&&!(this.vpBits[D*W+V*this.pHeight+I]&this.INOUT)){this.vpBits[l]|=this.ISBOUND;break}else f++}}}}fastdistancemap(){let W=new U(this.pLength,this.pWidth,this.pHeight),Y=this.pWidth*this.pHeight,Z=this.cutRadius*this.cutRadius,T=[],l=[],f;for(let V=0;V<this.pLength;V++)for(let K=0;K<this.pWidth;K++)for(let A=0;A<this.pHeight;A++)if(f=V*Y+K*this.pHeight+A,this.vpBits[f]&=~this.ISDONE,this.vpBits[f]&this.INOUT&&this.vpBits[f]&this.ISBOUND){let L={ix:V,iy:K,iz:A};W.set(V,K,A,L),T.push(L),this.vpDistance[f]=0,this.vpBits[f]|=this.ISDONE,this.vpBits[f]&=~this.ISBOUND}do{l=this.fastoneshell(T,W),T=[];for(let V=0,K=l.length;V<K;V++)f=Y*l[V].ix+this.pHeight*l[V].iy+l[V].iz,this.vpBits[f]&=~this.ISBOUND,this.vpDistance[f]<=1.0404*Z&&T.push({ix:l[V].ix,iy:l[V].iy,iz:l[V].iz})}while(T.length!==0);T=[],l=[],W=null;let D=this.scaleFactor-.5;D<0&&(D=0);let I=Z-.5/(.1+D);for(let V=0;V<this.pLength;V++)for(let K=0;K<this.pWidth;K++)for(let A=0;A<this.pHeight;A++)f=V*Y+K*this.pHeight+A,this.vpBits[f]&=~this.ISBOUND,this.vpBits[f]&this.INOUT&&(!(this.vpBits[f]&this.ISDONE)||this.vpBits[f]&this.ISDONE&&this.vpDistance[f]>=I)&&(this.vpBits[f]|=this.ISBOUND)}fastoneshell(W,Y){let Z,T,l,f,D,I,V,K,A,L=[];if(W.length===0)return L;let G={ix:-1,iy:-1,iz:-1},ee=this.pWidth*this.pHeight;for(let ae=0,Se=W.length;ae<Se;ae++){Z=W[ae].ix,T=W[ae].iy,l=W[ae].iz,K=Y.get(Z,T,l);for(let $e=0;$e<6;$e++)G.ix=Z+this.nb[$e][0],G.iy=T+this.nb[$e][1],G.iz=l+this.nb[$e][2],G.ix<this.pLength&&G.ix>-1&&G.iy<this.pWidth&&G.iy>-1&&G.iz<this.pHeight&&G.iz>-1&&(A=G.ix*ee+this.pHeight*G.iy+G.iz,this.vpBits[A]&this.INOUT&&!(this.vpBits[A]&this.ISDONE)?(Y.set(G.ix,G.iy,l+this.nb[$e][2],K),f=G.ix-K.ix,D=G.iy-K.iy,I=G.iz-K.iz,V=f*f+D*D+I*I,this.vpDistance[A]=V,this.vpBits[A]|=this.ISDONE,this.vpBits[A]|=this.ISBOUND,L.push({ix:G.ix,iy:G.iy,iz:G.iz})):this.vpBits[A]&this.INOUT&&this.vpBits[A]&this.ISDONE&&(f=G.ix-K.ix,D=G.iy-K.iy,I=G.iz-K.iz,V=f*f+D*D+I*I,V<this.vpDistance[A]&&(Y.set(G.ix,G.iy,G.iz,K),this.vpDistance[A]=V,this.vpBits[A]&this.ISBOUND||(this.vpBits[A]|=this.ISBOUND,L.push({ix:G.ix,iy:G.iy,iz:G.iz})))))}for(let ae=0,Se=W.length;ae<Se;ae++){Z=W[ae].ix,T=W[ae].iy,l=W[ae].iz,K=Y.get(Z,T,l);for(let $e=6;$e<18;$e++)G.ix=Z+this.nb[$e][0],G.iy=T+this.nb[$e][1],G.iz=l+this.nb[$e][2],G.ix<this.pLength&&G.ix>-1&&G.iy<this.pWidth&&G.iy>-1&&G.iz<this.pHeight&&G.iz>-1&&(A=G.ix*ee+this.pHeight*G.iy+G.iz,this.vpBits[A]&this.INOUT&&!(this.vpBits[A]&this.ISDONE)?(Y.set(G.ix,G.iy,l+this.nb[$e][2],K),f=G.ix-K.ix,D=G.iy-K.iy,I=G.iz-K.iz,V=f*f+D*D+I*I,this.vpDistance[A]=V,this.vpBits[A]|=this.ISDONE,this.vpBits[A]|=this.ISBOUND,L.push({ix:G.ix,iy:G.iy,iz:G.iz})):this.vpBits[A]&this.INOUT&&this.vpBits[A]&this.ISDONE&&(f=G.ix-K.ix,D=G.iy-K.iy,I=G.iz-K.iz,V=f*f+D*D+I*I,V<this.vpDistance[A]&&(Y.set(G.ix,G.iy,G.iz,K),this.vpDistance[A]=V,this.vpBits[A]&this.ISBOUND||(this.vpBits[A]|=this.ISBOUND,L.push({ix:G.ix,iy:G.iy,iz:G.iz})))))}for(let ae=0,Se=W.length;ae<Se;ae++){Z=W[ae].ix,T=W[ae].iy,l=W[ae].iz,K=Y.get(Z,T,l);for(let $e=18;$e<26;$e++)G.ix=Z+this.nb[$e][0],G.iy=T+this.nb[$e][1],G.iz=l+this.nb[$e][2],G.ix<this.pLength&&G.ix>-1&&G.iy<this.pWidth&&G.iy>-1&&G.iz<this.pHeight&&G.iz>-1&&(A=G.ix*ee+this.pHeight*G.iy+G.iz,this.vpBits[A]&this.INOUT&&!(this.vpBits[A]&this.ISDONE)?(Y.set(G.ix,G.iy,l+this.nb[$e][2],K),f=G.ix-K.ix,D=G.iy-K.iy,I=G.iz-K.iz,V=f*f+D*D+I*I,this.vpDistance[A]=V,this.vpBits[A]|=this.ISDONE,this.vpBits[A]|=this.ISBOUND,L.push({ix:G.ix,iy:G.iy,iz:G.iz})):this.vpBits[A]&this.INOUT&&this.vpBits[A]&this.ISDONE&&(f=G.ix-K.ix,D=G.iy-K.iy,I=G.iz-K.iz,V=f*f+D*D+I*I,V<this.vpDistance[A]&&(Y.set(G.ix,G.iy,G.iz,K),this.vpDistance[A]=V,this.vpBits[A]&this.ISBOUND||(this.vpBits[A]|=this.ISBOUND,L.push({ix:G.ix,iy:G.iy,iz:G.iz})))))}return L}marchingcubeinit(W){for(let Y=0,Z=this.vpBits.length;Y<Z;Y++)W==1?this.vpBits[Y]&=~this.ISBOUND:W==4?(this.vpBits[Y]&=~this.ISDONE,this.vpBits[Y]&this.ISBOUND&&(this.vpBits[Y]|=this.ISDONE),this.vpBits[Y]&=~this.ISBOUND):W==2?this.vpBits[Y]&this.ISBOUND&&this.vpBits[Y]&this.ISDONE?this.vpBits[Y]&=~this.ISBOUND:this.vpBits[Y]&this.ISBOUND&&!(this.vpBits[Y]&this.ISDONE)&&(this.vpBits[Y]|=this.ISDONE):W==3&&(this.vpBits[Y]&=~this.ISBOUND)}marchingcube(W){this.marchingcubeinit(W),this.verts=[],this.faces=[],C.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let Y=this.pWidth*this.pHeight;for(let Z=0,T=this.verts.length;Z<T;Z++)this.verts[Z].atomid=this.vpAtomID[this.verts[Z].x*Y+this.pHeight*this.verts[Z].y+this.verts[Z].z];C.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}C.MarchingCube=new S}),"./src/SurfaceWorker.js":(()=>{$3Dmol.workerString=(function(){self.onmessage=function(t){var i=t.data,a=i.type;if(a<0)self.atomData=i.atoms,self.volume=i.volume,self.ps=new ProteinSurface;else{var n=self.ps;n.initparm(i.expandedExtent,a!=1,self.volume),n.fillvoxels(self.atomData,i.extendedAtoms),n.buildboundary(),(a===4||a===2)&&(n.fastdistancemap(),n.boundingatom(!1),n.fillvoxelswaals(self.atomData,i.extendedAtoms)),n.marchingcube(a);var y=n.getFacesAndVertices(i.atomsToShow);self.postMessage(y)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0}),"./src/VolumeData.ts":((t,i,a)=>{a.r(i),a.d(i,{VolumeData:()=>E});var n=a("./src/utilities.ts"),y=a("./src/WebGL/math/index.ts"),x=a("./src/parsers/VASP.ts"),k=a("./src/parsers/CUBE.ts"),S=a("./node_modules/pako/dist/pako.esm.mjs");class E{constructor(C,B,W){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(f){var D=f/(this.size.y*this.size.z),I=f%(this.size.y*this.size.z),V=f%this.size.z;return D*=this.unit.x,I*=this.unit.y,V*=this.unit.z,D+=this.origin.x,I+=this.origin.y,V+=this.origin.z,{x:D,y:I,z:V}},this.vasp=function(f){var D=f.replace(/^\s+/,"").split(/[\n\r]/),I=(0,x.VASP)(f)[0],V=I.length;if(V==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var K=1.889725992,A=.036749309,L=parseFloat(D[1]),G;G=D[2].replace(/^\s+/,"").split(/\s+/);var ee=new y.Vector3(parseFloat(G[0]),parseFloat(G[1]),parseFloat(G[2])).multiplyScalar(L*K);G=D[3].replace(/^\s+/,"").split(/\s+/);var ae=new y.Vector3(parseFloat(G[0]),parseFloat(G[1]),parseFloat(G[2])).multiplyScalar(L*K);G=D[4].replace(/^\s+/,"").split(/\s+/);var Se=new y.Vector3(parseFloat(G[0]),parseFloat(G[1]),parseFloat(G[2])).multiplyScalar(L*K),$e=ee.x*(ae.y*Se.z-Se.y*ae.z)-ae.x*(ee.y*Se.z-Se.y*ee.z)+Se.x*(ee.y*ae.z-ae.y*ee.z);$e=Math.abs($e)/Math.pow(K,3);var qe=1/$e;D.splice(0,8+V+1);var Pe=D[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Ve=Math.abs(parseFloat(Pe[0])),Ie=Math.abs(parseFloat(Pe[1])),Xe=Math.abs(parseFloat(Pe[2])),et=this.origin=new y.Vector3(0,0,0);this.size={x:Ve,y:Ie,z:Xe},this.unit=new y.Vector3(ee.x,ae.y,Se.z),ee=ee.multiplyScalar(1/(K*Ve)),ae=ae.multiplyScalar(1/(K*Ie)),Se=Se.multiplyScalar(1/(K*Xe)),(ee.y!=0||ee.z!=0||ae.x!=0||ae.z!=0||Se.x!=0||Se.y!=0)&&(this.matrix=new y.Matrix4(ee.x,ae.x,Se.x,0,ee.y,ae.y,Se.y,0,ee.z,ae.z,Se.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new y.Matrix4().makeTranslation(et.x,et.y,et.z)),this.origin=new y.Vector3(0,0,0),this.unit=new y.Vector3(1,1,1)),D.splice(0,1);var tt=D.join(" ");tt=tt.replace(/^\s+/,"");var rt=tt.split(/[\s\r]+/);rt.splice(Ve*Ie*Xe+1);for(var ze=Float32Array.from(rt,parseFloat),lt=0;lt<ze.length;lt++)ze[lt]=ze[lt]*qe*A;this.data=ze},this.dx=function(f){var D=f.split(/[\n\r]+/),I,V=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,K=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,A=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,L=/data follows/,G=0;for(G=0;G<D.length;G++){var ee=D[G];if(I=V.exec(ee)){var ae=parseInt(I[1]),Se=parseInt(I[2]),$e=parseInt(I[3]);this.size={x:ae,y:Se,z:$e}}else if(I=A.exec(ee)){var qe=parseFloat(I[1]);if((parseFloat(I[2])!=0||parseFloat(I[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),G+=1,ee=D[G],I=A.exec(ee),I==null){console.error("Parse error in dx delta matrix");return}var Pe=parseFloat(I[2]);if((parseFloat(I[1])!=0||parseFloat(I[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),G+=1,ee=D[G],I=A.exec(ee),I==null){console.error("Parse error in dx delta matrix");return}var Ve=parseFloat(I[3]);(parseFloat(I[1])!=0||parseFloat(I[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new y.Vector3(qe,Pe,Ve)}else if(I=K.exec(ee)){var Ie=parseFloat(I[1]),Xe=parseFloat(I[2]),et=parseFloat(I[3]);this.origin=new y.Vector3(Ie,Xe,et)}else if(I=L.exec(ee))break}if(G+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var tt=D.splice(G).join(" "),rt=tt.split(/[\s\r]+/);this.data=Float32Array.from(rt,parseFloat)},B=B.toLowerCase(),/\.gz$/.test(B)){B=B.replace(/\.gz$/,"");try{this[B]&&this.isbinary.has(B)?(typeof C=="string"&&(C=(0,n.base64ToArray)(C)),C=(0,S.inflate)(C)):C=new TextDecoder("utf-8").decode((0,S.inflate)(C))}catch(f){console.error(f)}}if(this[B]&&(this.isbinary.has(B)&&typeof C=="string"&&(C=(0,n.base64ToArray)(C)),this[B](C)),W){if(W.negate)for(let f=0,D=this.data.length;f<D;f++)this.data[f]=-this.data[f];if(W.normalize){var Y=0;for(let f=0,D=this.data.length;f<D;f++)Y+=this.data[f];var Z=Y/this.data.length;Y=0;for(let f=0,D=this.data.length;f<D;f++){var T=this.data[f]-Z;Y+=T*T}var l=Y/this.data.length;for(let f=0,D=this.data.length;f<D;f++)this.data[f]=(this.data[f]-Z)/l}}}getIndex(C,B,W){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new y.Matrix4().getInverse(this.matrix));var Y=new y.Vector3(C,B,W);Y=Y.applyMatrix4(this.inversematrix),C=Y.x,B=Y.y,W=Y.z}else C-=this.origin.x,B-=this.origin.y,W-=this.origin.z,C/=this.unit.x,B/=this.unit.y,W/=this.unit.z;return C=Math.round(C),B=Math.round(B),W=Math.round(W),C<0||C>=this.size.x||B<0||B>=this.size.y||W<0||W>=this.size.z?-1:C*this.size.y*this.size.z+B*this.size.z+W}getVal(C,B,W){let Y=this.getIndex(C,B,W);return Y<0?0:this.data[Y]}cube(C){var B=C.split(/\r?\n/);if(!(B.length<6)){var W=(0,k.CUBE)(C,{}).modelData[0].cryst,Y=B[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Z=parseFloat(Y[0]),T=Math.abs(Z);this.origin=W.origin,this.size=W.size,this.unit=W.unit,this.matrix=W.matrix4;var l=6;Z<0&&l++;var f=B.splice(T+l).join(" ");f=f.replace(/^\s+/,"");var D=f.split(/[\s\r]+/);this.data=Float32Array.from(D,parseFloat)}}ccp4(C){var B={};C=new Int8Array(C);var W=new Int32Array(C.buffer,0,56),Y=new Float32Array(C.buffer,0,56),Z=new DataView(C.buffer);if(B.MAP=String.fromCharCode(Z.getUint8(208),Z.getUint8(209),Z.getUint8(210),Z.getUint8(211)),B.MACHST=[Z.getUint8(212),Z.getUint8(213)],B.MACHST[0]===17&&B.MACHST[1]===17)for(var T=C.byteLength,l=0;l<T;l+=4)Z.setFloat32(l,Z.getFloat32(l),!0);B.NX=W[0],B.NY=W[1],B.NZ=W[2],B.MODE=W[3],B.NXSTART=W[4],B.NYSTART=W[5],B.NZSTART=W[6],B.MX=W[7],B.MY=W[8],B.MZ=W[9],B.xlen=Y[10],B.ylen=Y[11],B.zlen=Y[12],B.alpha=Y[13],B.beta=Y[14],B.gamma=Y[15],B.MAPC=W[16],B.MAPR=W[17],B.MAPS=W[18],B.DMIN=Y[19],B.DMAX=Y[20],B.DMEAN=Y[21],B.ISPG=W[22],B.NSYMBT=W[23],B.LSKFLG=W[24],B.originX=Y[49],B.originY=Y[50],B.originZ=Y[51],B.ARMS=Y[54];var f=B,D=[f.xlen,0,0],I=[f.ylen*Math.cos(Math.PI/180*f.gamma),f.ylen*Math.sin(Math.PI/180*f.gamma),0],V=[f.zlen*Math.cos(Math.PI/180*f.beta),f.zlen*(Math.cos(Math.PI/180*f.alpha)-Math.cos(Math.PI/180*f.gamma)*Math.cos(Math.PI/180*f.beta))/Math.sin(Math.PI/180*f.gamma),0];V[2]=Math.sqrt(f.zlen*f.zlen*Math.sin(Math.PI/180*f.beta)*Math.sin(Math.PI/180*f.beta)-V[1]*V[1]);var K=[0,D,I,V],A=[0,f.MX,f.MY,f.MZ],L=[0,f.MAPC,f.MAPR,f.MAPS];this.matrix=new y.Matrix4,this.matrix.set(K[L[1]][0]/A[L[1]],K[L[2]][0]/A[L[2]],K[L[3]][0]/A[L[3]],0,K[L[1]][1]/A[L[1]],K[L[2]][1]/A[L[2]],K[L[3]][1]/A[L[3]],0,K[L[1]][2]/A[L[1]],K[L[2]][2]/A[L[2]],K[L[3]][2]/A[L[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new y.Matrix4().makeTranslation(f.NXSTART+f.originX,f.NYSTART+f.originY,f.NZSTART+f.originZ)),this.origin=new y.Vector3(0,0,0),this.unit=new y.Vector3(1,1,1),this.size={x:B.NX,y:B.NY,z:B.NZ},this.dimensionorder=[B.MAPC,B.MAPR,B.MAPS];var G=new Float32Array(C.buffer,1024+B.NSYMBT),ee=B.NX,ae=B.NY,Se=B.NZ;this.data=new Float32Array(ee*ae*Se);for(let $e=0;$e<ee;$e++)for(let qe=0;qe<ae;qe++)for(let Pe=0;Pe<Se;Pe++)this.data[($e*ae+qe)*Se+Pe]=G[(Pe*ae+qe)*ee+$e]}}}),"./src/VolumetricRender.ts":((t,i,a)=>{a.r(i),a.d(i,{GLVolumetricRender:()=>E});var n=a("./src/WebGL/shapes/index.ts"),y=a("./src/WebGL/math/index.ts"),x=a("./src/WebGL/index.ts"),k=a("./src/colors.ts"),S=a("./src/GLShape.ts");class E{static interpolateArray(C,B){function W(V,K,A){return V+(K-V)*A}var Y=[],Z=(C.length-1)/(B-1);Y[0]=C[0];for(var T=1;T<B-1;T++){var l=T*Z,f=Math.floor(l),D=Math.ceil(l),I=l-f;Y[T]=W(C[f],C[D],I)}return Y[B-1]=C[C.length-1],Y}constructor(C,B,W){this.hidden=!1,this.boundingSphere=new n.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,B=B||{};var Y=Object.assign([],B.transferfn);this.subsamples=B.subsamples||5;let Z=256;Y.forEach(function(ae){ae.value=parseFloat(ae.value)}),Y.sort(function(ae,Se){return ae.value-Se.value}),this.min=Y[0].value,Y.length==0&&Y.push(Y[0]),this.max=Y[Y.length-1].value;var T,l,f,D,I,V,K,A,L,G;for(let ae=0;ae<Y.length-1;ae++)if(f=k.CC.color(Y[ae].color),D=k.CC.color(Y[ae+1].color),L=Y[ae].opacity,G=Y[ae+1].opacity,T=Math.floor((Y[ae].value-this.min)*Z/(this.max-this.min)),l=Math.floor((Y[ae+1].value-this.min)*Z/(this.max-this.min)),T!=l){I=E.interpolateArray([f.r*255,D.r*255],l-T),V=E.interpolateArray([f.g*255,D.g*255],l-T),K=E.interpolateArray([f.b*255,D.b*255],l-T),A=E.interpolateArray([L*255,G*255],l-T);for(let Se=0;Se<I.length;Se++)this.transferfunctionbuffer.push(I[Se]),this.transferfunctionbuffer.push(V[Se]),this.transferfunctionbuffer.push(K[Se]),this.transferfunctionbuffer.push(A[Se])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),C.matrix){let ae=new y.Vector3(0,0,0),Se=new y.Vector3(C.size.x,C.size.y,C.size.z),$e=new y.Vector3(1,1,1);ae.applyMatrix4(C.matrix),Se.applyMatrix4(C.matrix),$e.applyMatrix4(C.matrix).sub(ae),this.extent=[[ae.x,ae.y,ae.z],[Se.x,Se.y,Se.z]];for(let Ie=1;Ie<7;Ie++)Se.x=Ie&1?C.size.x:0,Se.y=Ie&2?C.size.y:0,Se.z=Ie&4?C.size.z:0,Se.applyMatrix4(C.matrix),this.extent[0][0]=Math.min(this.extent[0][0],Se.x),this.extent[0][1]=Math.min(this.extent[0][1],Se.y),this.extent[0][2]=Math.min(this.extent[0][2],Se.z),this.extent[1][0]=Math.max(this.extent[1][0],Se.x),this.extent[1][1]=Math.max(this.extent[1][1],Se.y),this.extent[1][2]=Math.max(this.extent[1][2],Se.z);let qe=Se.x-ae.x,Pe=Se.y-ae.y,Ve=Se.z-ae.z;this.maxdepth=Math.sqrt(qe*qe+Pe*Pe+Ve*Ve),this.minunit=Math.min(Math.min($e.x,$e.y),$e.z),this.texmatrix=new y.Matrix4().identity().scale({x:C.size.x,y:C.size.y,z:C.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(C.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new y.Matrix4().identity();let ae=C.unit.x*C.size.x,Se=C.unit.y*C.size.y,$e=C.unit.z*C.size.z;this.texmatrix.makeTranslation(-C.origin.x/ae,-C.origin.y/Se,-C.origin.z/$e),this.texmatrix.scale({x:1/ae,y:1/Se,z:1/$e}),this.minunit=Math.min(Math.min(C.unit.x,C.unit.y),C.unit.z),this.extent=[[C.origin.x,C.origin.y,C.origin.z],[C.origin.x+ae,C.origin.y+Se,C.origin.z+$e]],this.maxdepth=Math.sqrt(ae*ae+Se*Se+$e*$e)}var ee=new S.GLShape({});if(ee.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=ee.finalize(),this.boundingSphere.center=new y.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,B.coords===void 0&&B.selection!==void 0&&(W?B.coords=W.selectedAtoms(B.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),B.coords!==void 0&&B.seldist!==void 0){let ae=new Uint8Array(C.data.length),Se=B.seldist,$e=Se*Se;for(let qe=0,Pe=B.coords.length;qe<Pe;qe++){let Ve=B.coords[qe],Ie=Ve.x-Se,Xe=Ve.y-Se,et=Ve.z-Se,tt=Ve.x+Se,rt=Ve.y+Se,ze=Ve.z+Se;if(C.getIndex(Ie,Xe,et)>=0||C.getIndex(tt,rt,ze)>=0)for(let lt=Ie;lt<tt;lt+=this.minunit)for(let bt=Xe;bt<rt;bt+=this.minunit)for(let At=et;At<ze;At+=this.minunit){let Vt=C.getIndex(lt,bt,At);Vt>=0&&!ae[Vt]&&(lt-Ve.x)*(lt-Ve.x)+(bt-Ve.y)*(bt-Ve.y)+(At-Ve.z)*(At-Ve.z)<$e&&(ae[Vt]=1)}}for(let qe=0,Pe=C.data.length;qe<Pe;qe++)ae[qe]==0&&(C.data[qe]=1/0)}this.data=C}globj(C){if(this.renderedShapeObj&&(C.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new x.Object3D;var B=null,W=new x.Texture(this.data,!0),Y=new x.Texture(this.transferfunctionbuffer,!1);W.needsUpdate=!0,Y.needsUpdate=!0,Y.flipY=!1,B=new x.VolumetricMaterial({transferfn:Y,transfermin:this.min,transfermax:this.max,map:W,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var Z=new x.Mesh(this.geo,B);this.shapeObj.add(Z),this.renderedShapeObj=this.shapeObj.clone(),C.add(this.renderedShapeObj)}}removegl(C){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),C.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}}),"./src/WebGL/Camera.ts":((t,i,a)=>{a.r(i),a.d(i,{Camera:()=>x});var n=a("./src/WebGL/core/index.ts"),y=a("./src/WebGL/math/index.ts");class x extends n.Object3D{constructor(S=50,E=1,U=.1,C=2e3,B=!1){super(),this.projectionMatrix=new y.Matrix4,this.projectionMatrixInverse=new y.Matrix4,this.matrixWorldInverse=new y.Matrix4,this.fov=S,this.aspect=E,this.near=U,this.far=C;var W=this.position.z;this.right=W*Math.tan(Math.PI/180*S),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!B,this.updateProjectionMatrix()}lookAt(S){this.matrix.lookAt(this.position,S,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof y.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}}),"./src/WebGL/Fog.ts":((t,i,a)=>{a.r(i),a.d(i,{Fog:()=>y});var n=a("./src/colors.ts");class y{constructor(k,S=1,E=1e3){this.name="",this.color=new n.Color(k),this.near=S,this.far=E}clone(){return new y(this.color.getHex(),this.near,this.far)}}}),"./src/WebGL/Renderer.ts":((t,i,a)=>{a.r(i),a.d(i,{Renderer:()=>T});var n=a("./src/WebGL/Camera.ts"),y=a("./src/WebGL/constants/Sides.ts"),x=a("./src/WebGL/constants/TextureConstants.ts"),k=a("./src/WebGL/core/index.ts"),S=a("./src/colors.ts"),E=a("./src/WebGL/materials/index.ts"),U=a("./src/WebGL/math/index.ts"),C=a("./src/WebGL/objects/index.ts"),B=a("./src/WebGL/shaders/index.ts"),W=a("./src/WebGL/SpritePlugin.ts"),Y=null,Z=null;class T{constructor(f){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new U.Vector3,this._worldInverse=new U.Matrix4,this._projInverse=new U.Matrix4,this._textureMatrix=new U.Matrix4,this._fullProjModelMatrix=new U.Matrix4,this._fullProjModelMatrixInv=new U.Matrix4,this._direction=new U.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new W.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,f=f||{},this.row=f.row,this.col=f.col,this.rows=f.rows,this.cols=f.cols,this._canvas=f.canvas!==void 0?f.canvas:document.createElement("canvas"),this._precision=f.precision!==void 0?f.precision:"highp",this._alpha=f.alpha!==void 0?f.alpha:!0,this._premultipliedAlpha=f.premultipliedAlpha!==void 0?f.premultipliedAlpha:!0,this._antialias=f.antialias!==void 0?f.antialias:!1,this._upscale=f.upscale!==void 0?f.upscale:this._antialias,this._preserveDrawingBuffer=f.preserveDrawingBuffer!==void 0?f.preserveDrawingBuffer:!1,this._clearColor=f.clearColor!==void 0?new S.Color(f.clearColor):new S.Color(0),this._clearAlpha=f.clearAlpha!==void 0?f.clearAlpha:0,this._outlineMaterial=new E.MeshOutlineMaterial(f.outline),this._outlineSphereImposterMaterial=new E.SphereImposterOutlineMaterial(f.outline),this._outlineStickImposterMaterial=new E.StickImposterOutlineMaterial(f.outline),this._outlineEnabled=!!f.outline,this._AOEnabled=!!f.ambientOcclusion,f.ambientOcclusion&&typeof f.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(f.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),f.ambientOcclusion&&typeof f.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(f.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=f.id,!(f.containerWidth==0||f.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(f,D){this._clearColor.setHex(f),this._clearAlpha=D,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(f){this._outlineMaterial=new E.MeshOutlineMaterial(f),this._outlineSphereImposterMaterial=new E.SphereImposterOutlineMaterial(f),this._outlineStickImposterMaterial=new E.StickImposterOutlineMaterial(f),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(f){f&&(f.strength&&(this._AOstrength=f.strength),f.scale&&(this._AOradius=f.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var f=this._gl.drawingBufferWidth/this.cols,D=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=f,this._viewportHeight=D,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(f*this.col,D*this.row,f,D),this._gl.viewport(f*this.col,D*this.row,f,D)}}setSize(f,D){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=f*this.devicePixelRatio,this._canvas.height=D*this.devicePixelRatio,this._canvas.style.width=f+"px",this._canvas.style.height=D+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(f,D,I){var V=0;(f===void 0||f)&&(V|=this._gl.COLOR_BUFFER_BIT),(D===void 0||D)&&(V|=this._gl.DEPTH_BUFFER_BIT),(I===void 0||I)&&(V|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(V)}setMaterialFaces(f,D){var I=f.side===y.DoubleSide,V=f.side===y.BackSide;f.imposter||(V=D?!V:V),this._oldDoubleSided!==I&&(I?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=I),this._oldFlipSided!==V&&(V?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=V),this._gl.cullFace(this._gl.BACK)}setDepthTest(f){this._oldDepthTest!==f&&(f?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=f)}setDepthWrite(f){this._oldDepthWrite!==f&&(this._gl.depthMask(f),this._oldDepthWrite=f)}setBlending(f){f?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(f,D,I,V){f.addEventListener("dispose",this.onMaterialDispose.bind(this));var K,A;if(A=f.shaderID,A){var L=B.ShaderLib[A];f.vertexShader=L.vertexShader,f.fragmentShader=L.fragmentShader,f.uniforms=B.ShaderUtils.clone(L.uniforms),f.shaded&&f.makeShaded(this.SHADE_TEXTURE)}K={wireframe:f.wireframe,fragdepth:f.imposter,volumetric:f.volumetric,shaded:f.shaded},f.program=this.buildProgram(f.fragmentShader,f.vertexShader,f.uniforms,K)}renderBuffer(f,D,I,V,K,A){if(V.visible){var L,G;if(L=this.setProgram(f,D,I,V,A,this),!!L){G=L.attributes;var ee=!1,ae=V.wireframe?1:0,Se=K.id*16777215+L.id*2+ae;Se!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=Se,ee=!0),ee&&(this.disableAttributes(),G.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,K.__webglVertexBuffer),this.enableAttribute(G.position),this._gl.vertexAttribPointer(G.position,3,this._gl.FLOAT,!1,0,0)),G.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,K.__webglColorBuffer),this.enableAttribute(G.color),this._gl.vertexAttribPointer(G.color,3,this._gl.FLOAT,!1,0,0)),G.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,K.__webglNormalBuffer),this.enableAttribute(G.normal),this._gl.vertexAttribPointer(G.normal,3,this._gl.FLOAT,!1,0,0)),G.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,K.__webglOffsetBuffer),this.enableAttribute(G.offset),this._gl.vertexAttribPointer(G.offset,3,this._gl.FLOAT,!1,0,0)),G.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,K.__webglRadiusBuffer),this.enableAttribute(G.radius),this._gl.vertexAttribPointer(G.radius,1,this._gl.FLOAT,!1,0,0)));var $e,qe;if(A instanceof C.Mesh){if(V.shaderID==="instanced"){var Pe=V.sphere.geometryGroups[0];ee&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,K.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Pe.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,K.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Pe.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,K.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Pe.faceArray,this._gl.STATIC_DRAW)),$e=Pe.faceidx,this._extInstanced.vertexAttribDivisorANGLE(G.offset,1),this._extInstanced.vertexAttribDivisorANGLE(G.radius,1),this._extInstanced.vertexAttribDivisorANGLE(G.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,$e,this._gl.UNSIGNED_SHORT,0,K.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(G.offset,0),this._extInstanced.vertexAttribDivisorANGLE(G.radius,0),this._extInstanced.vertexAttribDivisorANGLE(G.color,0)}else V.wireframe?(qe=K.lineidx,this.setLineWidth(V.wireframeLinewidth),ee&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,K.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,qe,this._gl.UNSIGNED_SHORT,0)):($e=K.faceidx,ee&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,K.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,$e,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=$e,this.info.render.faces+=$e/3}else A instanceof C.Line&&(qe=K.vertices,this.setLineWidth(V.linewidth),this._gl.drawArrays(this._gl.LINES,0,qe),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(f,D,I){let V=f.__lights,K=f.fog,A=[];for(let ee=0,ae=f.__webglObjects.length;ee<ae;ee++){let Se=f.__webglObjects[ee];Se.render&&Se[I]&&A.push(Se)}if(A.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(f.__webglObjects,!0,I+"Depth",D,V,K,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let L=this._AOshader.uniforms;this._gl.uniform1f(L.total_strength,this._AOstrength),this._gl.uniform1f(L.radius,this._AOradius),this._fullProjModelMatrix=new U.Matrix4,this._fullProjModelMatrixInv=new U.Matrix4;let G=A[0].object;this._fullProjModelMatrix.multiplyMatrices(D.projectionMatrix,G._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(L.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(L.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(f,D){if(!(D instanceof n.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var I,V,K,A,L,G=f.__lights,ee=f.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&f.updateMatrixWorld(),D.parent===void 0&&D.updateMatrixWorld(),D.matrixWorldInverse.getInverse(D.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(f),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),L=f.__webglObjects;let ae=!1,Se=this._AOEnabled;for(I=0,V=L.length;I<V;I++)K=L[I],A=K.object,K.render=!1,A.visible&&(this.setupMatrices(A,D),this.unrollBufferMaterial(K),K.render=!0,K.volumetric&&(ae=!0),K.hasAO&&(Se=!0));if(this.setBlending(!1),Se&&this.setShading(f,D,"opaque"),this.renderObjects(f.__webglObjects,!0,"opaque",D,G,ee,!1),Se&&this.clearShading(),this.renderSprites(f,D,!1),this.renderObjects(f.__webglObjects,!0,"transparentDepth",D,G,ee,!0),this.renderObjects(f.__webglObjects,!1,"transparent",D,G,ee,!0),ae&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(f.__webglObjects,!1,"volumetric",D,G,ee,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(f,D,!0),this._bitmap){const $e=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap($e),$e.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let f=this._viewportWidth,D=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,f,D),this._gl.viewport(0,0,f,D),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,f,D,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,f,D,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,f,D,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,f,D,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let f=this._viewportWidth,D=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,f,D),this._gl.viewport(0,0,f,D),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var I=this._antialias?B.ShaderLib.screenaa:B.ShaderLib.screen;this._screenshader=this.buildProgram(I.fragmentShader,I.vertexShader,I.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var V=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(V),this._gl.STATIC_DRAW);let K=B.ShaderLib.ssao;this._AOshader=this.buildProgram(K.fragmentShader,K.vertexShader,K.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let A=B.ShaderLib.blur;this._blurshader=this.buildProgram(A.fragmentShader,A.vertexShader,A.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(f){if(f.__webglObjects||(f.__webglObjects=[],f.__webglObjectsImmediate=[],f.__webglSprites=[],f.__webglFlares=[]),f.__objectsAdded.length){for(;f.__objectsAdded.length;)this.addObject(f.__objectsAdded[0],f),f.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;f.__objectsRemoved.length;)this.removeObject(f.__objectsRemoved[0],f),f.__objectsRemoved.splice(0,1);for(var D=0,I=f.__webglObjects.length;D<I;D++)this.updateObject(f.__webglObjects[D].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(f,D){(f==null||D==null)&&(f=this._canvas.width,D=this._canvas.height);var I=f/D;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var V=f/this.cols,K=D/this.rows;I=V/K}return I}setTexture(f,D,I){if(f.needsUpdate){f.__webglInit||(f.__webglInit=!0,f.addEventListener("dispose",this.onTextureDispose.bind(this)),f.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+D);var V=I?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(V,f.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,f.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,f.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,f.unpackAlignment);var K=this.paramToGL(f.format),A=this.paramToGL(f.type);if(I)this.setTextureParameters(this._gl.TEXTURE_3D,f),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,f.image.size.z,f.image.size.y,f.image.size.x,0,this._gl.RED,this._gl.FLOAT,f.image.data);else{var L=f.image,G=L.width,ee=L.height;typeof G>"u"&&(G=L.length,K==this._gl.RGBA&&(G/=4),ee=1),this.setTextureParameters(this._gl.TEXTURE_2D,f),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,K,K,A,f.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,K,G,ee,0,K,A,f.image)}f.needsUpdate=!1,f.onUpdate&&f.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+D),I?this._gl.bindTexture(this._gl.TEXTURE_3D,f.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,f.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(f){this._enabledAttributes[f]||(this._gl.enableVertexAttribArray(f),this._enabledAttributes[f]=!0)}disableAttributes(){for(let f in this._enabledAttributes)this._enabledAttributes[f]&&(this._gl.disableVertexAttribArray(f),this._enabledAttributes[f]=!1)}setPolygonOffset(f,D,I){this._oldPolygonOffset!==f&&(f?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(f){f!==this._oldLineWidth&&(this._gl.lineWidth(f),this._oldLineWidth=f)}deallocateGeometry(f){if(f.__webglInit=void 0,f.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(f.__webglVertexBuffer),f.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(f.__webglColorBuffer),f.geometryGroups!==void 0)for(var D=0,I=f.groups;D<I;D++){var V=f.geometryGroups[D];V.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(V.__webglVertexBuffer),V.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(V.__webglColorBuffer),V.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(V.__webglNormalBuffer),V.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(V.__webglFaceBuffer),V.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(V.__webglLineBuffer)}}deallocateMaterial(f){var D=f.program;if(D!==void 0){f.program=void 0;var I,V,K,A=!1;for(I=0,V=this._programs.length;I<V;I++)if(K=this._programs[I],K.program===D){K.usedTimes--,K.usedTimes===0&&(A=!0);break}if(A===!0){var L=[];for(I=0,V=this._programs.length;I<V;I++)K=this._programs[I],K.program!==D&&L.push(K);this._programs=L,this._gl.deleteProgram(D),this.info.memory.programs--}}}deallocateTexture(f){if(f.image&&f.image.__webglTextureCube)this._gl.deleteTexture(f.image.__webglTextureCube);else{if(!f.__webglInit)return;f.__webglInit=!1,this._gl.deleteTexture(f.__webglTexture)}}onGeometryDispose(f){var D=f.target;D.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(D),this.info.memory.geometries--}onTextureDispose(f){var D=f.target;D.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(D),this.info.memory.textures--}onMaterialDispose(f){var D=f.target;D.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(D)}getShader(f,D){var I;return!this.isWebGL1()&&!D.startsWith("#version")&&(D=D.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),f=="fragment"?D=D.replace(/varying/g,"in"):D=D.replace(/varying/g,"out"),D=D.replace(/attribute/g,"in"),D=D.replace(/texture2D/g,"texture"),D=D.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),D=D.replace(/gl_FragColor/g,"glFragColor"),D=`#version 300 es
`+D),f==="fragment"?I=this._gl.createShader(this._gl.FRAGMENT_SHADER):f==="vertex"&&(I=this._gl.createShader(this._gl.VERTEX_SHADER)),I==null?null:(this._gl.shaderSource(I,D),this._gl.compileShader(I),this._gl.getShaderParameter(I,this._gl.COMPILE_STATUS)?I:(console.error(this._gl.getShaderInfoLog(I)),console.error("could not initialize shader"),null))}buildProgram(f,D,I,V){var K,A,L,G,ee=[];ee.push(f),ee.push(D);for(K in V)ee.push(K),ee.push(V[K]);for(G=ee.join(),K=0,A=this._programs.length;K<A;K++){var ae=this._programs[K];if(ae.code===G)return ae.usedTimes++,ae.program}if(this.isWebGL1()&&V.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(L=this._gl.createProgram(),L==null)return null;var Se=this._precision,$e="precision "+Se+" float;",qe=[V.volumetric?"#version 300 es":"",$e].join(`
`),Pe=[V.volumetric?"#version 300 es":"",V.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",V.shaded?"#define SHADED 1":"",V.wireframe?"#define WIREFRAME 1":"",$e].join(`
`),Ve=this.getShader("fragment",Pe+f),Ie=this.getShader("vertex",qe+D);Ie!=null&&this._gl.attachShader(L,Ie),Ve!=null&&this._gl.attachShader(L,Ve),this._gl.linkProgram(L),this._gl.getProgramParameter(L,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),L.uniforms={},L.attributes={};var Xe,et,tt;Xe=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(et in I)Xe.push(et);for(tt=0;tt<Xe.length;tt++){var rt=Xe[tt];L.uniforms[rt]=this._gl.getUniformLocation(L,rt)}for(Xe=["position","normal","color","lineDistance","offset","radius"],tt=0;tt<Xe.length;tt++){var ze=Xe[tt];L.attributes[ze]=this._gl.getAttribLocation(L,ze)}return L.id=this._programs_counter++,this._programs.push({program:L,code:G,usedTimes:1}),this.info.memory.programs=this._programs.length,L}setProgram(f,D,I,V,K,A){if(V.needsUpdate&&(V.program&&this.deallocateMaterial(V),this.initMaterial(V,D,I,K),V.needsUpdate=!1),V.program==null)return null;var L=!1,G=V.program,ee=G.uniforms,ae=V.uniforms;if(G!=this._currentProgram&&(this._gl.useProgram(G),this._currentProgram=G,L=!0),V.id!=this._currentMaterialId&&(this._currentMaterialId=V.id,L=!0),f!=this._currentCamera&&(this._currentCamera=f,L=!0),ee.projectionMatrix&&this._gl.uniformMatrix4fv(ee.projectionMatrix,!1,f.projectionMatrix.elements),ee.modelViewMatrix&&this._gl.uniformMatrix4fv(ee.modelViewMatrix,!1,K._modelViewMatrix.elements),ee.normalMatrix&&this._gl.uniformMatrix3fv(ee.normalMatrix,!1,K._normalMatrix.elements),ee.projinv&&(this._projInverse.getInverse(f.projectionMatrix),this._gl.uniformMatrix4fv(ee.projinv,!1,this._projInverse.elements)),ee.viewMatrix&&this._gl.uniformMatrix4fv(ee.viewMatrix,!1,f.matrixWorldInverse.elements),ee.vWidth&&this._gl.uniform1f(ee.vWidth,this._viewportWidth),ee.vHeight&&this._gl.uniform1f(ee.vHeight,this._viewportHeight),L){if(ae.fogColor.value=I.color,ae.fogNear.value=I.near,ae.fogFar.value=I.far,V.shaderID.startsWith("lambert")||V.shaderID==="instanced"||V.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(G,D),this._lightsNeedUpdate=!1),ae.directionalLightColor.value=this._lights.directional.colors,ae.directionalLightDirection.value=this._lights.directional.positions;else if(V.shaderID.endsWith("outline"))ae.outlineColor.value=V.outlineColor,ae.outlineWidth.value=V.outlineWidth,ae.outlinePushback.value=V.outlinePushback,ae.outlineMaxPixels.value=V.outlineMaxPixels*this.devicePixelRatio;else if(V.shaderID==="volumetric"){K._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(K._modelViewMatrix),this._projInverse.getInverse(f.projectionMatrix),this._textureMatrix.multiplyMatrices(K.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(ee.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(ee.projinv,!1,this._projInverse.elements);let Se=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);ae.step.value=K.material.unit*Se,ae.maxdepth.value=K.material.maxdepth*Se,ae.transfermax.value=K.material.transfermax,ae.transfermin.value=K.material.transfermin,ae.subsamples.value=K.material.subsamples,A.setTexture(K.material.transferfn,4,!1),A.setTexture(K.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}ae.opacity.value=V.opacity,this.loadMaterialUniforms(ee,ae)}return ae.shading&&(ae.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),G}loadMaterialUniforms(f,D){var I,V,K,A;for(I in D)f[I]&&(V=D[I].type,K=D[I].value,A=f[I],V==="f"?this._gl.uniform1f(A,K):V==="i"?this._gl.uniform1i(A,K):V==="fv"?this._gl.uniform3fv(A,K):V==="c"?this._gl.uniform3f(A,K.r,K.g,K.b):V==="f4"&&this._gl.uniform4f(A,K[0],K[1],K[2],K[3]))}addObject(f,D){var I,V,K,A;if(!f.__webglInit&&(f.__webglInit=!0,f._modelViewMatrix=new U.Matrix4,f._normalMatrix=new U.Matrix3,f.geometry!==void 0&&f.geometry.__webglInit===void 0&&(f.geometry.__webglInit=!0,f.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),f instanceof C.Mesh||f instanceof C.Line))for(K=f.geometry,I=0,V=K.geometryGroups.length;I<V;I++)A=K.geometryGroups[I],A.id=this._geometryGroupCounter++,A.__webglVertexBuffer||(f instanceof C.Mesh?(this.createMeshBuffers(A),K.elementsNeedUpdate=!0,K.normalsNeedUpdate=!0):f instanceof C.Line&&this.createLineBuffers(A),K.verticesNeedUpdate=!0,K.colorsNeedUpdate=!0);if(!f.__webglActive){if(f instanceof C.Mesh||f instanceof C.Line)for(K=f.geometry,I=0,V=K.geometryGroups.length;I<V;I++)A=K.geometryGroups[I],this.addBuffer(D.__webglObjects,A,f);else f instanceof C.Sprite&&D.__webglSprites.push(f);f.__webglActive=!0}}updateObject(f){var D=f.geometry,I;if(f instanceof C.Mesh||f instanceof C.Line){for(var V=0,K=D.geometryGroups.length;V<K;V++)I=D.geometryGroups[V],(D.verticesNeedUpdate||D.elementsNeedUpdate||D.colorsNeedUpdate||D.normalsNeedUpdate)&&this.setBuffers(I,this._gl.STATIC_DRAW);D.verticesNeedUpdate=!1,D.elementsNeedUpdate=!1,D.normalsNeedUpdate=!1,D.colorsNeedUpdate=!1,D.buffersNeedUpdate=!1}}removeObject(f,D){f instanceof C.Mesh||f instanceof C.Line?this.removeInstances(D.__webglObjects,f):f instanceof C.Sprite&&this.removeInstancesDirect(D.__webglSprites,f),f.__webglActive=!1}removeInstances(f,D){for(var I=f.length-1;I>=0;--I)f[I].object===D&&f.splice(I,1)}removeInstancesDirect(f,D){for(var I=f.length-1;I>=0;--I)f[I]===D&&f.splice(I,1)}unrollBufferMaterial(f){var D=f.object,I=D.material;if(I.volumetric)f.opaque=null,f.transparent=null,f.volumetric=I;else if(I.transparent){if(f.opaque=null,f.volumetric=null,f.transparent=I,!I.wireframe){let V=I.clone();V.opacity=0,f.transparentDepth=V}}else{if(f.opaque=I,f.transparent=null,f.volumetric=null,!I.wireframe){let V=I.clone();V.opacity=0,f.opaqueDepth=V}I.hasAO&&(f.hasAO=!0),(this._AOEnabled||f.hasAO)&&(f.opaqueShaded=I.clone(),f.opaqueShaded.shaded=!0)}}setBuffers(f,D){var I=f.vertexArray,V=f.colorArray;if(f.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,f.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,I,D)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,f.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,I,D)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,f.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,V,D),f.normalArray&&f.__webglNormalBuffer!==void 0){var K=f.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,f.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,K,D)}if(f.radiusArray&&f.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,f.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,f.radiusArray,D)),f.faceArray&&f.__webglFaceBuffer!==void 0){var A=f.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,f.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,A,D)}if(f.lineArray&&f.__webglLineBuffer!==void 0){var L=f.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,f.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,L,D)}}createMeshBuffers(f){f.radiusArray&&(f.__webglRadiusBuffer=this._gl.createBuffer()),f.useOffset&&(f.__webglOffsetBuffer=this._gl.createBuffer()),f.__webglVertexBuffer=this._gl.createBuffer(),f.__webglNormalBuffer=this._gl.createBuffer(),f.__webglColorBuffer=this._gl.createBuffer(),f.__webglFaceBuffer=this._gl.createBuffer(),f.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(f){f.__webglVertexBuffer=this._gl.createBuffer(),f.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(f,D,I){f.push({buffer:D,object:I,opaque:null,transparent:null})}setupMatrices(f,D){f._modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,f.matrixWorld),f._normalMatrix.getInverse(f._modelViewMatrix),f._normalMatrix.transpose()}filterFallback(f){return this._gl.LINEAR}setTextureParameters(f,D){f==this._gl.TEXTURE_2D?(this._gl.texParameteri(f,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(f,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(f,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(D.magFilter)),this._gl.texParameteri(f,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(D.minFilter))):(this._gl.texParameteri(f,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(f,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(f,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(f,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(f,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(f,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(f,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(f){return f===x.UnsignedByteType?this._gl.UNSIGNED_BYTE:f===x.RGBAFormat?this._gl.RGBA:f===x.NearestFilter?this._gl.NEAREST:0}setupLights(f,D){var I,V,K,A=0,L=0,G=0,ee,ae,Se=this._lights,$e=Se.directional.colors,qe=Se.directional.positions,Pe=0,Ve=0;for(I=0,V=D.length;I<V;I++)if(K=D[I],ee=K.color,ae=K.intensity,K instanceof k.Light){if(this._direction.getPositionFromMatrix(K.matrixWorld),this._vector3.getPositionFromMatrix(K.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;qe[Ve]=this._direction.x,qe[Ve+1]=this._direction.y,qe[Ve+2]=this._direction.z,$e[Ve]=ee.r*ae,$e[Ve+1]=ee.g*ae,$e[Ve+2]=ee.b*ae,Ve+=3,Pe++}Se.ambient[0]=A,Se.ambient[1]=L,Se.ambient[2]=G,Se.directional.length=Pe}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(Z==null||Z.isContextLost())&&(Y=new OffscreenCanvas(this._canvas.width,this._canvas.height),Z=Y.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=Y,this._gl=Z,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var f=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(f[6])}catch(D){console.error(D)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(f,D,I,V,K,A,L){var G,ee,ae,Se,$e,qe,Pe;D?($e=f.length-1,qe=-1,Pe=-1):($e=0,qe=f.length,Pe=1);for(var Ve=$e;Ve!==qe;Ve+=Pe)if(G=f[Ve],G.render){if(ee=G.object,ae=G.buffer,Se=G[I],(G.hasAO||this._AOEnabled)&&G[I+"Shaded"]&&(Se=G[I+"Shaded"]),!Se)continue;this.setBlending(L),this.setDepthTest(Se.depthTest),this.setDepthWrite(Se.depthWrite),this.setPolygonOffset(Se.polygonOffset,Se.polygonOffsetFactor,Se.polygonOffsetUnits);var Ie=ee._modelViewMatrix.isReflected();if(this.setMaterialFaces(Se,Ie),this.renderBuffer(V,K,A,Se,ae,ee),(this._outlineEnabled||Se.outline)&&!Se.wireframe&&Se.shaderID!=="basic"&&Se.opacity!==0){let Xe=this._outlineMaterial;Se.shaderID=="sphereimposter"?Xe=this._outlineSphereImposterMaterial:Se.shaderID=="stickimposter"&&(Xe=this._outlineStickImposterMaterial),this.renderBuffer(V,K,A,Xe,ae,ee)}}}renderSprites(f,D,I){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(f,D,this._currentWidth,this._currentHeight,I),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}}),"./src/WebGL/SpritePlugin.ts":((t,i,a)=>{a.r(i),a.d(i,{SpritePlugin:()=>y});var n=a("./src/WebGL/shaders/index.ts");class y{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(S){this.gl=S.context,this.renderer=S,this.precision=S.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var E=0;this.sprite.vertices[E++]=-1,this.sprite.vertices[E++]=-1,this.sprite.vertices[E++]=0,this.sprite.vertices[E++]=0,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=-1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=0,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=-1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=0,this.sprite.vertices[E++]=1,E=0,this.sprite.faces[E++]=0,this.sprite.faces[E++]=1,this.sprite.faces[E++]=2,this.sprite.faces[E++]=0,this.sprite.faces[E++]=2,this.sprite.faces[E++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(n.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const U={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),U.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),U.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),U.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),U.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),U.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),U.color=this.gl.getUniformLocation(this.sprite.program,"color"),U.map=this.gl.getUniformLocation(this.sprite.program,"map"),U.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),U.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),U.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),U.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),U.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),U.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),U.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),U.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),U.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=U}render(S,E,U,C,B){var W,Y,Z,T,l,f,D,I,V,K;if(!this.gl)throw new Error("WebGLRenderer not initialized");let A=[];(W=S?.__webglSprites)===null||W===void 0||W.forEach(rt=>{(B&&rt.material.depthTest==!1||!B&&rt.material.depthTest)&&A.push(rt)});let L=A.length;if(!L)return;const G=this.sprite.attributes,ee=this.sprite.uniforms;if(!ee)throw new Error("Uniforms not defined");var ae=U*.5,Se=C*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(G.position),this.gl.enableVertexAttribArray(G.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(G.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(G.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(ee.projectionMatrix,!1,E.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(ee.map,0);var $e=S.fog;$e?(this.gl.uniform3f(ee.fogColor,$e.color.r,$e.color.g,$e.color.b),this.gl.uniform1f(ee.fogNear,$e.near),this.gl.uniform1f(ee.fogFar,$e.far)):(this.gl.uniform1f(ee.fogNear,0),this.gl.uniform1f(ee.fogFar,0));var qe;let Pe,Ve,Ie,Xe=[];for(qe=0;qe<L;qe++)Pe=A[qe],Ve=Pe.material,Ve&&(Ve.depthTest==!1&&!B||!Pe.visible||Ve.opacity===0||(Ve.useScreenCoordinates?Pe.z=-Pe.position.z:(Pe._modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,Pe.matrixWorld),Pe.z=-Pe._modelViewMatrix.elements[14])));for(A.sort(x),qe=0;qe<L;qe++)if(Pe=A[qe],Ve=Pe.material,!!Ve&&!(!Pe.visible||Ve.opacity===0)&&Ve.map&&Ve.map.image&&Ve.map.image.width){this.gl.uniform1f(ee?.alphaTest||null,Ve.alphaTest);var et=Ve.map.image.width,tt=Ve.map.image.height;Xe[0]=et*this.renderer.devicePixelRatio/U,Xe[1]=tt*this.renderer.devicePixelRatio/C,Ve.useScreenCoordinates===!0?(this.gl.uniform1i(ee.useScreenCoordinates,1),this.gl.uniform3f(ee.screenPosition,(Pe.position.x*this.renderer.devicePixelRatio-ae)/ae,(Se-Pe.position.y*this.renderer.devicePixelRatio)/Se,Math.max(0,Math.min(1,Pe.position.z)))):(this.gl.uniform1i(ee.useScreenCoordinates,0),this.gl.uniformMatrix4fv(ee.modelViewMatrix,!1,Pe._modelViewMatrix.elements)),Ie=1/(Ve.scaleByViewport?C:1),Xe[0]*=Ie*Pe.scale.x,Xe[1]*=Ie*Pe.scale.y;let rt=(Y=Ve?.alignment)===null||Y===void 0?void 0:Y.x,ze=(Z=Ve?.alignment)===null||Z===void 0?void 0:Z.y;Ve.screenOffset&&(rt=(rt||0)+2*Ve.screenOffset.x/et,ze=(ze||0)+2*Ve.screenOffset.y/tt),this.gl.uniform2f(ee.uvScale,((T=Ve?.uvScale)===null||T===void 0?void 0:T.x)||1,((l=Ve?.uvScale)===null||l===void 0?void 0:l.y)||1),this.gl.uniform2f(ee.uvOffset,((f=Ve?.uvOffset)===null||f===void 0?void 0:f.x)||0,((D=Ve?.uvOffset)===null||D===void 0?void 0:D.y)||0),this.gl.uniform2f(ee.alignment,rt||0,ze||0),this.gl.uniform1f(ee.opacity,Ve.opacity),this.gl.uniform3f(ee.color,((I=Ve?.color)===null||I===void 0?void 0:I.r)||0,((V=Ve?.color)===null||V===void 0?void 0:V.g)||0,((K=Ve?.color)===null||K===void 0?void 0:K.b)||0),this.gl.uniform1f(ee.rotation,Pe.rotation),this.gl.uniform2fv(ee.scale,Xe),this.renderer.setDepthTest(Ve.depthTest),this.renderer.setDepthWrite(Ve.depthWrite),this.renderer.setTexture(Ve.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(S,E){if(!this.gl)throw new Error("WebGL Rendering context not found");var U=this.gl.createProgram();if(!U)throw new Error("Error creating webgl program");var C=this.gl.createShader(this.gl.FRAGMENT_SHADER),B=this.gl.createShader(this.gl.VERTEX_SHADER);if(!C)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!B)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var W="precision "+E+` float;
`;if(this.gl.shaderSource(C,W+S.fragmentShader),this.gl.shaderSource(B,W+S.vertexShader),this.gl.compileShader(C),this.gl.compileShader(B),!this.gl.getShaderParameter(C,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(B,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(C)} 
      ${this.gl.getShaderInfoLog(B)}`);return this.gl.attachShader(U,C),this.gl.attachShader(U,B),this.gl.linkProgram(U),this.gl.getProgramParameter(U,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),U}}function x(k,S){return k.z!==S.z?S.z-k.z:S.id-k.id}}),"./src/WebGL/constants/Coloring.ts":((t,i,a)=>{a.r(i),a.d(i,{Coloring:()=>n});var n;(function(y){y[y.NoColors=0]="NoColors",y[y.FaceColors=1]="FaceColors",y[y.VertexColors=2]="VertexColors"})(n||(n={}))}),"./src/WebGL/constants/Shading.ts":((t,i,a)=>{a.r(i),a.d(i,{Shading:()=>n});var n;(function(y){y[y.NoShading=0]="NoShading",y[y.FlatShading=1]="FlatShading",y[y.SmoothShading=2]="SmoothShading"})(n||(n={}))}),"./src/WebGL/constants/Sides.ts":((t,i,a)=>{a.r(i),a.d(i,{BackSide:()=>y,DoubleSide:()=>x,FrontSide:()=>n});const n=0,y=1,x=2}),"./src/WebGL/constants/SpriteAlignment.ts":((t,i,a)=>{a.r(i),a.d(i,{SpriteAlignment:()=>y});var n=a("./src/WebGL/math/index.ts");const y={topLeft:new n.Vector2(1,-1),topCenter:new n.Vector2(0,-1),topRight:new n.Vector2(-1,-1),centerLeft:new n.Vector2(1,0),center:new n.Vector2(0,0),centerRight:new n.Vector2(-1,0),bottomLeft:new n.Vector2(1,1),bottomCenter:new n.Vector2(0,1),bottomRight:new n.Vector2(-1,1)}}),"./src/WebGL/constants/TextureConstants.ts":((t,i,a)=>{a.r(i),a.d(i,{ClampToEdgeWrapping:()=>n,FloatType:()=>E,LinearFilter:()=>y,LinearMipMapLinearFilter:()=>k,NearestFilter:()=>x,R32Format:()=>B,RFormat:()=>C,RGBAFormat:()=>U,UnsignedByteType:()=>S});const n=1001,y=1006,x=1007,k=1008,S=1009,E=1010,U=1021,C=1022,B=1023}),"./src/WebGL/constants/TextureOperations.ts":((t,i,a)=>{a.r(i),a.d(i,{TextureOperations:()=>n});var n;(function(y){y[y.MultiplyOperation=0]="MultiplyOperation",y[y.MixOperation=1]="MixOperation",y[y.AddOperation=2]="AddOperation"})(n||(n={}))}),"./src/WebGL/constants/index.ts":((t,i,a)=>{a.r(i),a.d(i,{BackSide:()=>y.BackSide,ClampToEdgeWrapping:()=>S.ClampToEdgeWrapping,Coloring:()=>n.Coloring,DoubleSide:()=>y.DoubleSide,FloatType:()=>S.FloatType,FrontSide:()=>y.FrontSide,LinearFilter:()=>S.LinearFilter,LinearMipMapLinearFilter:()=>S.LinearMipMapLinearFilter,NearestFilter:()=>S.NearestFilter,R32Format:()=>S.R32Format,RFormat:()=>S.RFormat,RGBAFormat:()=>S.RGBAFormat,Shading:()=>x.Shading,SpriteAlignment:()=>k.SpriteAlignment,TextureOperations:()=>E.TextureOperations,UnsignedByteType:()=>S.UnsignedByteType});var n=a("./src/WebGL/constants/Coloring.ts"),y=a("./src/WebGL/constants/Sides.ts"),x=a("./src/WebGL/constants/Shading.ts"),k=a("./src/WebGL/constants/SpriteAlignment.ts"),S=a("./src/WebGL/constants/TextureConstants.ts"),E=a("./src/WebGL/constants/TextureOperations.ts")}),"./src/WebGL/core/EventDispatcher.ts":((t,i,a)=>{a.r(i),a.d(i,{EventDispatcher:()=>n});class n{constructor(){this.listeners={}}dispatchEvent(x){var k=this.listeners[x.type];if(k!==void 0){x.target=this;for(var S=0,E=k.length;S<E;S++)k[S].call(this,x)}}removeEventListener(x,k){if(!k)this.listeners[x]=[];else{var S=this.listeners[x].indexOf(k);S!==-1&&this.listeners[x].splice(S,1)}}addEventListener(x,k){this.listeners[x]===void 0&&(this.listeners[x]=[]),this.listeners[x].indexOf(k)===-1&&this.listeners[x].push(k)}}}),"./src/WebGL/core/Geometry.ts":((t,i,a)=>{a.r(i),a.d(i,{Geometry:()=>U,GeometryGroup:()=>E,GeometryIDCount:()=>C});var n=a("./src/WebGL/materials/LineBasicMaterial.ts"),y=a("./src/WebGL/core/EventDispatcher.ts"),x=a("./src/WebGL/math/index.ts"),k=a("./src/colors.ts");const S=65535;class E{constructor(W=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=W}setColor(W){var Y=this.vertexArray,Z=this.colorArray;if(!Y)throw new Error("vertex array not initialized");if(!Z)throw new Error("color array not initialized");let T=k.CC.color(W);for(var l=0;l<Y.length;l+=3)Z[l]=T.r,Z[l+1]=T.g,Z[l+2]=T.b}setColors(W){var Y=this.vertexArray,Z=this.colorArray;if(!Y)throw new Error("vertex array not initialized");if(!Z)throw new Error("color array not initialized");if(Y.length!=Z.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var T=0;T<Y.length;T+=3){var l=W(Y[T],Y[T+1],Y[T+2]);l instanceof k.Color||(l=k.CC.color(l)),Z[T]=l.r,Z[T+1]=l.g,Z[T+2]=l.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var W=new x.Vector3,Y,Z,T,l,f=0;f<this.vertices;++f)Y=f*3,Z=this.vertexArray[Y],T=this.vertexArray[Y+1],l=this.vertexArray[Y+2],W.x+=Z,W.y+=T,W.z+=l;return W.divideScalar(this.vertices),W}setNormals(){var W=this.faceArray,Y=this.vertexArray,Z=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!W)throw new Error("face array not initialized");if(!Y)throw new Error("vertex array not initialized");if(!Z)throw new Error("normal array not initialized");for(var T,l,f,D,I,V,K,A=0;A<W.length/3;++A)T=W[A*3]*3,l=W[A*3+1]*3,f=W[A*3+2]*3,D=new x.Vector3(Y[T],Y[T+1],Y[T+2]),I=new x.Vector3(Y[l],Y[l+1],Y[l+2]),V=new x.Vector3(Y[f],Y[f+1],Y[f+2]),D.subVectors(D,I),V.subVectors(V,I),V.cross(D),K=V,K.normalize(),Z[T]+=K.x,Z[l]+=K.x,Z[f]+=K.x,Z[T+1]+=K.y,Z[l+1]+=K.y,Z[f+1]+=K.y,Z[T+2]+=K.z,Z[l+2]+=K.z,Z[f+2]+=K.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var W=this.faceArray,Y=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!W)throw new Error("face array not initialized");for(var Z=0;Z<this.faceidx/3;++Z){var T=Z*3,l=T*2,f=W[T],D=W[T+1],I=W[T+2];Y[l]=f,Y[l+1]=D,Y[l+2]=f,Y[l+3]=I,Y[l+4]=D,Y[l+5]=I}}}vrml(W,Y){var Z,T,l,f,D,I,V,K,A,L,G,ee,ae,Se,$e,qe,Pe,Ve,Ie="";if(Ie+=W+`Shape {
`+W+` appearance Appearance {
`+W+`  material Material {
`+W+"   diffuseColor "+((Z=Y?.color)===null||Z===void 0?void 0:Z.r)+" "+((T=Y?.color)===null||T===void 0?void 0:T.g)+" "+((l=Y?.color)===null||l===void 0?void 0:l.b)+`
`,Y.wireframe&&this.colorArray){let et=this.colorArray;Ie+=W+"    emissiveColor "+et[0]+" "+et[1]+" "+et[2]+`
`}Y!=null&&Y.transparent&&(Ie+=W+"   transparency "+(1-Y.opacity)+`
`),Ie+=W+`  }
`,Ie+=W+` }
`;var Xe=W;if(W+=" ",Y instanceof n.LineBasicMaterial||Y.wireframe){Ie+=W+`geometry IndexedLineSet {
`+W+` colorPerVertex TRUE
`+W+` coord Coordinate {
`+W+`  point [
`;let et,tt,rt;for(let ze=0;ze<this.vertices;++ze){let lt=ze*3;et=(f=this.vertexArray)===null||f===void 0?void 0:f[lt],tt=(D=this.vertexArray)===null||D===void 0?void 0:D[lt+1],rt=(I=this.vertexArray)===null||I===void 0?void 0:I[lt+2],Ie+=W+"   "+et+" "+tt+" "+rt+`,
`}if(Ie+=W+`  ]
`,Ie+=W+` }
`,this.colorArray&&!Y.wireframe){Ie+=W+` color Color {
`+W+`  color [
`;for(let ze=0;ze<this.vertices;++ze){let lt=ze*3;et=this.colorArray[lt],tt=this.colorArray[lt+1],rt=this.colorArray[lt+2],Ie+=W+"   "+et+" "+tt+" "+rt+`,
`}Ie+=W+`  ]
`,Ie+=W+` }
`}if(Ie+=W+` coordIndex [
`,Y.wireframe&&this.faceArray)for(let ze=0;ze<this.faceidx;ze+=3)et=(V=this.faceArray)===null||V===void 0?void 0:V[ze],tt=(K=this.faceArray)===null||K===void 0?void 0:K[ze+1],rt=(A=this.faceArray)===null||A===void 0?void 0:A[ze+2],Ie+=W+"  "+et+", "+tt+", "+rt+`, -1,
`;else for(let ze=0;ze<this.vertices-1;ze+=2)Ie+=W+"  "+ze+", "+(ze+1)+`, -1,
`;Ie+=W+` ]
`,Ie+=W+`}
`}else{Ie+=W+`geometry IndexedFaceSet {
`+W+` colorPerVertex TRUE
`+W+` normalPerVertex TRUE
`+W+` solid FALSE
`,Ie+=W+` coord Coordinate {
`+W+`  point [
`;let et,tt,rt;for(let ze=0;ze<this.vertices;++ze){let lt=ze*3;et=(L=this.vertexArray)===null||L===void 0?void 0:L[lt],tt=(G=this.vertexArray)===null||G===void 0?void 0:G[lt+1],rt=(ee=this.vertexArray)===null||ee===void 0?void 0:ee[lt+2],Ie+=W+"   "+et+" "+tt+" "+rt+`,
`}Ie+=W+`  ]
`,Ie+=W+` }
`,Ie+=W+` normal Normal {
`+W+`  vector [
`;for(let ze=0;ze<this.vertices;++ze){let lt=ze*3;et=(ae=this.normalArray)===null||ae===void 0?void 0:ae[lt],tt=(Se=this.normalArray)===null||Se===void 0?void 0:Se[lt+1],rt=($e=this.normalArray)===null||$e===void 0?void 0:$e[lt+2],Ie+=W+"   "+et+" "+tt+" "+rt+`,
`}if(Ie+=W+`  ]
`,Ie+=W+` }
`,this.colorArray){Ie+=W+` color Color {
`+W+`  color [
`;for(let ze=0;ze<this.vertices;++ze){let lt=ze*3;et=this.colorArray[lt],tt=this.colorArray[lt+1],rt=this.colorArray[lt+2],Ie+=W+"   "+et+" "+tt+" "+rt+`,
`}Ie+=W+`  ]
`,Ie+=W+` }
`}Ie+=W+` coordIndex [
`;for(let ze=0;ze<this.faceidx;ze+=3)et=(qe=this.faceArray)===null||qe===void 0?void 0:qe[ze],tt=(Pe=this.faceArray)===null||Pe===void 0?void 0:Pe[ze+1],rt=(Ve=this.faceArray)===null||Ve===void 0?void 0:Ve[ze+2],Ie+=W+"  "+et+", "+tt+", "+rt+`, -1,
`;Ie+=W+` ]
`,Ie+=W+`}
`}return Ie+=Xe+"}",Ie}truncateArrayBuffers(W=!0,Y=!1){var Z=this.vertexArray,T=this.colorArray,l=this.normalArray,f=this.faceArray,D=this.lineArray,I=this.radiusArray;this.vertexArray=Z?.subarray(0,this.vertices*3)||null,this.colorArray=T?.subarray(0,this.vertices*3)||null,W?(this.normalArray=l?.subarray(0,this.vertices*3)||null,this.faceArray=f?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=D?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),I&&(this.radiusArray=I.subarray(0,this.vertices)),Y&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class U extends y.EventDispatcher{constructor(W=!1,Y=!1,Z=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=C++,this.mesh=W,this.radii=Y,this.offset=Z}updateGeoGroup(W=0){var Y,Z=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!Z||Z.vertices+W>(((Y=Z?.vertexArray)===null||Y===void 0?void 0:Y.length)||0)/3)&&(Z=this.addGeoGroup()),Z}vrml(W,Y){for(var Z="",T=this.geometryGroups.length,l=0;l<T;l++){var f=this.geometryGroups[l];Z+=f.vrml(W,Y)+`,
`}return Z}addGeoGroup(){var W=new E(this.geometryGroups.length);return this.geometryGroups.push(W),this.groups=this.geometryGroups.length,W.vertexArray=new Float32Array(S*3),W.colorArray=new Float32Array(S*3),this.mesh&&(W.normalArray=new Float32Array(S*3),W.faceArray=new Uint16Array(S*6),W.lineArray=new Uint16Array(S*6)),this.radii&&(W.radiusArray=new Float32Array(S)),W.useOffset=this.offset,W}setUpNormals(...W){for(var Y=0;Y<this.groups;Y++){var Z=this.geometryGroups[Y];Z.setNormals(...W)}}setColors(...W){for(var Y=this.geometryGroups.length,Z=0;Z<Y;Z++){var T=this.geometryGroups[Z];T.setColors(...W)}}setColor(...W){let Y=this.geometryGroups.length;for(var Z=0;Z<Y;Z++){var T=this.geometryGroups[Z];T.setColor(...W)}}setUpWireframe(...W){let Y=this.geometryGroups.length;for(var Z=0;Z<Y;Z++){var T=this.geometryGroups[Z];T.setLineIndices(...W)}}initTypedArrays(){for(var W=0;W<this.groups;W++){var Y=this.geometryGroups[W];Y.__inittedArrays!==!0&&Y.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var W=0,Y=0;Y<this.groups;Y++)W+=this.geometryGroups[Y].vertices;return W}}let C=0}),"./src/WebGL/core/Object3D.ts":((t,i,a)=>{a.r(i),a.d(i,{Light:()=>E,Object3D:()=>k,Object3DIDCount:()=>x,Scene:()=>S});var n=a("./src/WebGL/math/index.ts"),y=a("./src/colors.ts");let x=0;class k{constructor(){this.id=x++,this.name="",this.children=[],this.position=new n.Vector3,this.rotation=new n.Vector3,this.matrix=new n.Matrix4,this.matrixWorld=new n.Matrix4,this.quaternion=new n.Quaternion,this.eulerOrder="XYZ",this.up=new n.Vector3(0,1,0),this.scale=new n.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(C){this.matrix.lookAt(C,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof n.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(C){if(C===this){console.error("Can't add $3Dmol.Object3D to itself");return}C.parent=this,this.children.push(C);for(var B=this;B.parent!==void 0;)B=B.parent;B!==void 0&&B instanceof S&&B.__addObject(C)}remove(C){var B=this.children.indexOf(C);if(B!==-1){C.parent=void 0,this.children.splice(B,1);for(var W=this;W.parent!==void 0;)W=W.parent;W!==void 0&&W instanceof S&&W.__removeObject(C)}}vrml(C){C||(C=" ");var B=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),W=0,Y=0,Z=0;if(B!=0){let f=Math.sin(B/2);W=this.quaternion.x/f,Y=this.quaternion.y/f,Z=this.quaternion.z/f}var T=C+`Transform {
`+C+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+C+" rotation "+W+" "+Y+" "+Z+" "+B+`
`+C+` children [
`;this.geometry&&(T+=this.geometry.vrml(C,this.material));for(var l=0;l<this.children.length;l++)T+=this.children[l].vrml(C+" ")+`,
`;return T+=` ]
`,T+="}",T}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof n.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(C){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||C===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var B=0;B<this.children.length;B++)this.children[B].updateMatrixWorld(!0)}clone(C){C===void 0&&(C=new k),C.name=this.name,C.up.copy(this.up),C.position.copy(this.position),C.rotation instanceof n.Vector3&&this.rotation instanceof n.Vector3?C.rotation.copy(this.rotation):C.rotation=this.rotation,C.eulerOrder=this.eulerOrder,C.scale.copy(this.scale),C.rotationAutoUpdate=this.rotationAutoUpdate,C.matrix.copy(this.matrix),C.matrixWorld.copy(this.matrixWorld),C.quaternion.copy(this.quaternion),C.matrixAutoUpdate=this.matrixAutoUpdate,C.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,C.useQuaternion=this.useQuaternion,C.visible=this.visible;for(var B=0;B<this.children.length;B++){var W=this.children[B];C.add(W.clone())}return C}setVisible(C){this.visible=C;for(var B=0;B<this.children.length;B++){var W=this.children[B];W.setVisible(C)}}}class S extends k{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(C){if(C instanceof E)this.__lights.indexOf(C)===-1&&this.__lights.push(C),C.target&&C.target.parent===void 0&&this.add(C.target);else if(this.__objects.indexOf(C)===-1){this.__objects.push(C),this.__objectsAdded.push(C);var B=this.__objectsRemoved.indexOf(C);B!==-1&&this.__objectsRemoved.splice(B,1)}for(var W=0;W<C.children.length;W++)this.__addObject(C.children[W])}__removeObject(C){var B;if(C instanceof E)B=this.__lights.indexOf(C),B!==-1&&this.__lights.splice(B,1);else if(B=this.__objects.indexOf(C),B!==-1){this.__objects.splice(B,1),this.__objectsRemoved.push(C);var W=this.__objectsAdded.indexOf(C);W!==-1&&this.__objectsAdded.splice(B,1)}for(var Y=0;Y<C.children.length;Y++)this.__removeObject(C.children[Y])}}class E extends k{constructor(C,B=1){super(),this.position=new n.Vector3(0,1,0),this.target=new k,this.castShadow=!1,this.onlyShadow=!1,this.color=new y.Color(C),this.intensity=B}}}),"./src/WebGL/core/Projector.ts":((t,i,a)=>{a.r(i),a.d(i,{Projector:()=>x});var n=a("./src/WebGL/math/index.ts");const y=new n.Matrix4;class x{static unprojectVector(S,E){return E.projectionMatrixInverse.getInverse(E.projectionMatrix),y.multiplyMatrices(E.matrixWorld,E.projectionMatrixInverse),S.applyProjection(y)}static projectVector(S,E){return E.matrixWorldInverse.getInverse(E.matrixWorld),y.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),S.applyProjection(y)}projectVector(S,E){return x.projectVector(S,E)}unprojectVector(S,E){return x.unprojectVector(S,E)}}}),"./src/WebGL/core/Raycaster.ts":((t,i,a)=>{a.r(i),a.d(i,{Raycaster:()=>S,intersectObject:()=>f});var n=a("./src/WebGL/math/index.ts"),y=a("./src/WebGL/shapes/index.ts");const x=(D,I)=>D.distance-I.distance,k=new n.Matrix4;class S{constructor(I,V,K,A){this.precision=1e-4,this.linePrecision=.2,this.ray=new n.Ray(I,V),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=A||0,this.far=K||1/0}set(I,V){this.ray.set(I,V)}setFromCamera(I,V){V.ortho?(this.ray.origin.set(I.x,I.y,(V.near+V.far)/(V.near-V.far)).unproject(V),this.ray.direction.set(0,0,-1).transformDirection(V.matrixWorld)):(this.ray.origin.setFromMatrixPosition(V.matrixWorld),this.ray.direction.set(I.x,I.y,I.z),V.projectionMatrixInverse.getInverse(V.projectionMatrix),k.multiplyMatrices(V.matrixWorld,V.projectionMatrixInverse),this.ray.direction.applyProjection(k),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(I,V){for(var K=[],A=0,L=V.length;A<L;A++)f(I,V[A],this,K);return K.sort(x),K}}const E=D=>Math.min(Math.max(D,-1),1);var U=new y.Sphere,C=new y.Cylinder,B=new y.Triangle,W=new n.Vector3,Y=new n.Vector3,Z=new n.Vector3,T=new n.Vector3,l=new n.Vector3;function f(D,I,V,K){if(l.getPositionFromMatrix(D.matrixWorld),I.intersectionShape===void 0||I.hidden)return K;var A=I.intersectionShape,L=V.linePrecision;L*=D.matrixWorld.getMaxScaleOnAxis();var G=L*L;if(I.boundingSphere!==void 0&&I.boundingSphere instanceof y.Sphere&&(U.copy(I.boundingSphere),U.applyMatrix4(D.matrixWorld),!V.ray.isIntersectionSphere(U)))return K;var ee,ae,Se,$e,qe,Pe,Ve,Ie,Xe,et,tt,rt,ze,lt;for(ee=0,ae=A.triangle.length;ee<ae;ee++)if(A.triangle[ee]instanceof y.Triangle){if(B.copy(A.triangle[ee]),B.applyMatrix4(D.matrixWorld),Se=B.getNormal(),$e=V.ray.direction.dot(Se),$e>=0||(W.subVectors(B.a,V.ray.origin),Ve=Se.dot(W)/$e,Ve<0))continue;Y.copy(V.ray.direction).multiplyScalar(Ve).add(V.ray.origin),Y.sub(B.a),Z.copy(B.b).sub(B.a),T.copy(B.c).sub(B.a);var bt=Z.dot(T),At=Z.lengthSq(),Vt=T.lengthSq();if(rt=(At*Y.dot(T)-bt*Y.dot(Z))/(At*Vt-bt*bt),rt<0||rt>1||(tt=(Y.dot(Z)-rt*bt)/At,tt<0||tt>1||tt+rt>1))continue;K.push({clickable:I,distance:Ve})}for(ee=0,ae=A.cylinder.length;ee<ae;ee++)if(A.cylinder[ee]instanceof y.Cylinder){if(C.copy(A.cylinder[ee]),C.applyMatrix4(D.matrixWorld),W.subVectors(C.c1,V.ray.origin),qe=W.dot(C.direction),Pe=W.dot(V.ray.direction),$e=E(V.ray.direction.dot(C.direction)),Xe=1-$e*$e,Xe===0)continue;ze=($e*Pe-qe)/Xe,lt=(Pe-$e*qe)/Xe,Y.copy(C.direction).multiplyScalar(ze).add(C.c1),Z.copy(V.ray.direction).multiplyScalar(lt).add(V.ray.origin),Ie=T.subVectors(Y,Z).lengthSq();var Yt=C.radius*C.radius;if(Ie<=Yt){if(et=($e*qe-Pe)*($e*qe-Pe)-Xe*(W.lengthSq()-qe*qe-Yt),et<=0?rt=Ve=Math.sqrt(Ie):rt=Ve=(Pe-$e*qe-Math.sqrt(et))/Xe,tt=$e*rt-qe,tt<0||tt*tt>C.lengthSq()||rt<0)continue;K.push({clickable:I,distance:Ve})}}for(ee=0,ae=A.line.length;ee<ae;ee+=2){Y.copy(A.line[ee]),Y.applyMatrix4(D.matrixWorld),Z.copy(A.line[ee+1]),Z.applyMatrix4(D.matrixWorld),T.subVectors(Z,Y);var er=T.lengthSq();T.normalize(),W.subVectors(Y,V.ray.origin);var lr=W.dot(T);Pe=W.dot(V.ray.direction),$e=E(V.ray.direction.dot(T)),Xe=1-$e*$e,Xe!==0&&(ze=($e*Pe-lr)/Xe,lt=(Pe-$e*lr)/Xe,Y.add(T.multiplyScalar(ze)),Z.copy(V.ray.direction).multiplyScalar(lt).add(V.ray.origin),Ie=T.subVectors(Z,Y).lengthSq(),Ie<G&&ze*ze<er&&K.push({clickable:I,distance:lt}))}for(ee=0,ae=A.sphere.length;ee<ae;ee++)if(A.sphere[ee]instanceof y.Sphere&&(U.copy(A.sphere[ee]),U.applyMatrix4(D.matrixWorld),V.ray.isIntersectionSphere(U))){Y.subVectors(U.center,V.ray.origin);var yr=Y.dot(V.ray.direction);if(et=yr*yr-(Y.lengthSq()-U.radius*U.radius),yr<0)return K;et<=0?Ve=yr:Ve=yr-Math.sqrt(et),K.push({clickable:I,distance:Ve})}return K}}),"./src/WebGL/core/Texture.ts":((t,i,a)=>{a.r(i),a.d(i,{Texture:()=>S,TextureIdCount:()=>E});var n=a("./src/WebGL/constants/TextureConstants.ts"),y=a("./src/WebGL/math/index.ts"),x=a("./src/WebGL/core/EventDispatcher.ts"),k=a("./src/WebGL/core/UVMapping.ts");class S extends x.EventDispatcher{constructor(C,B){super(),this.id=E++,this.name="",this.image=C,this.mapping=new k.UVMapping,this.wrapS=n.ClampToEdgeWrapping,this.wrapT=n.ClampToEdgeWrapping,this.anisotropy=1,B?(this.format=n.RFormat,this.type=n.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=n.NearestFilter,this.minFilter=n.NearestFilter):(this.format=n.RGBAFormat,this.type=n.UnsignedByteType,this.offset=new y.Vector2(0,0),this.repeat=new y.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=n.LinearFilter,this.minFilter=n.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(C=new S){return C.image=this.image,C.mapping=this.mapping,C.wrapS=this.wrapS,C.wrapT=this.wrapT,C.magFilter=this.magFilter,C.minFilter=this.minFilter,C.anisotropy=this.anisotropy,C.format=this.format,C.type=this.type,C.offset.copy(this.offset),C.repeat.copy(this.repeat),C.premultiplyAlpha=this.premultiplyAlpha,C.flipY=this.flipY,C.unpackAlignment=this.unpackAlignment,C}dispose(){this.dispatchEvent({type:"dispose"})}}let E=0}),"./src/WebGL/core/UVMapping.ts":((t,i,a)=>{a.r(i),a.d(i,{UVMapping:()=>n});class n{}}),"./src/WebGL/core/index.ts":((t,i,a)=>{a.r(i),a.d(i,{EventDispatcher:()=>n.EventDispatcher,Geometry:()=>y.Geometry,GeometryGroup:()=>y.GeometryGroup,GeometryIDCount:()=>y.GeometryIDCount,Light:()=>x.Light,Object3D:()=>x.Object3D,Object3DIDCount:()=>x.Object3DIDCount,Projector:()=>k.Projector,Raycaster:()=>S.Raycaster,Scene:()=>x.Scene,Texture:()=>E.Texture,TextureIdCount:()=>E.TextureIdCount,UVMapping:()=>U.UVMapping,intersectObject:()=>S.intersectObject});var n=a("./src/WebGL/core/EventDispatcher.ts"),y=a("./src/WebGL/core/Geometry.ts"),x=a("./src/WebGL/core/Object3D.ts"),k=a("./src/WebGL/core/Projector.ts"),S=a("./src/WebGL/core/Raycaster.ts"),E=a("./src/WebGL/core/Texture.ts"),U=a("./src/WebGL/core/UVMapping.ts")}),"./src/WebGL/index.ts":((t,i,a)=>{a.r(i),a.d(i,{BackSide:()=>n.BackSide,Camera:()=>C.Camera,ClampToEdgeWrapping:()=>n.ClampToEdgeWrapping,Coloring:()=>n.Coloring,Cylinder:()=>U.Cylinder,DoubleSide:()=>n.DoubleSide,EventDispatcher:()=>y.EventDispatcher,FloatType:()=>n.FloatType,Fog:()=>B.Fog,FrontSide:()=>n.FrontSide,Geometry:()=>y.Geometry,GeometryGroup:()=>y.GeometryGroup,GeometryIDCount:()=>y.GeometryIDCount,ImposterMaterial:()=>x.ImposterMaterial,InstancedMaterial:()=>x.InstancedMaterial,Light:()=>y.Light,Line:()=>S.Line,LineBasicMaterial:()=>x.LineBasicMaterial,LineStyle:()=>S.LineStyle,LinearFilter:()=>n.LinearFilter,LinearMipMapLinearFilter:()=>n.LinearMipMapLinearFilter,Material:()=>x.Material,MaterialIdCount:()=>x.MaterialIdCount,Matrix3:()=>k.Matrix3,Matrix4:()=>k.Matrix4,Mesh:()=>S.Mesh,MeshDoubleLambertMaterial:()=>x.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>x.MeshLambertMaterial,MeshOutlineMaterial:()=>x.MeshOutlineMaterial,NearestFilter:()=>n.NearestFilter,Object3D:()=>y.Object3D,Object3DIDCount:()=>y.Object3DIDCount,Projector:()=>y.Projector,Quaternion:()=>k.Quaternion,R32Format:()=>n.R32Format,RFormat:()=>n.RFormat,RGBAFormat:()=>n.RGBAFormat,Ray:()=>k.Ray,Raycaster:()=>y.Raycaster,Renderer:()=>W.Renderer,Scene:()=>y.Scene,ShaderLib:()=>E.ShaderLib,ShaderUtils:()=>E.ShaderUtils,Shading:()=>n.Shading,Sphere:()=>U.Sphere,SphereImposterMaterial:()=>x.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>x.SphereImposterOutlineMaterial,Sprite:()=>S.Sprite,SpriteAlignment:()=>n.SpriteAlignment,SpriteMaterial:()=>x.SpriteMaterial,SpritePlugin:()=>Y.SpritePlugin,StickImposterMaterial:()=>x.StickImposterMaterial,StickImposterOutlineMaterial:()=>x.StickImposterOutlineMaterial,Texture:()=>y.Texture,TextureIdCount:()=>y.TextureIdCount,TextureOperations:()=>n.TextureOperations,Triangle:()=>U.Triangle,UVMapping:()=>y.UVMapping,UnsignedByteType:()=>n.UnsignedByteType,Vector2:()=>k.Vector2,Vector3:()=>k.Vector3,VolumetricMaterial:()=>x.VolumetricMaterial,basic:()=>E.basic,clamp:()=>k.clamp,clone:()=>E.clone,conversionMatrix3:()=>k.conversionMatrix3,degToRad:()=>k.degToRad,instanced:()=>E.instanced,intersectObject:()=>y.intersectObject,lambert:()=>E.lambert,lambertdouble:()=>E.lambertdouble,outline:()=>E.outline,screen:()=>E.screen,screenaa:()=>E.screenaa,sphereimposter:()=>E.sphereimposter,sphereimposteroutline:()=>E.sphereimposteroutline,sprite:()=>E.sprite,stickimposter:()=>E.stickimposter,stickimposteroutline:()=>E.stickimposteroutline,volumetric:()=>E.volumetric});var n=a("./src/WebGL/constants/index.ts"),y=a("./src/WebGL/core/index.ts"),x=a("./src/WebGL/materials/index.ts"),k=a("./src/WebGL/math/index.ts"),S=a("./src/WebGL/objects/index.ts"),E=a("./src/WebGL/shaders/index.ts"),U=a("./src/WebGL/shapes/index.ts"),C=a("./src/WebGL/Camera.ts"),B=a("./src/WebGL/Fog.ts"),W=a("./src/WebGL/Renderer.ts"),Y=a("./src/WebGL/SpritePlugin.ts")}),"./src/WebGL/materials/ImposterMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{ImposterMaterial:()=>E});var n=a("./src/WebGL/constants/Coloring.ts"),y=a("./src/WebGL/constants/Shading.ts"),x=a("./src/colors.ts"),k=a("./src/WebGL/math/index.ts"),S=a("./src/WebGL/materials/Material.ts");class E extends S.Material{constructor(C){super(),this.color=new x.Color(16777215),this.ambient=new x.Color(1048575),this.emissive=new x.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new k.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=y.Shading.SmoothShading,this.shaderID=null,this.vertexColors=n.Coloring.NoColors,this.skinning=!1,this.setValues(C)}clone(C=new E){return super.clone.call(this,C),C.color.copy(this.color),C.ambient.copy(this.ambient),C.emissive.copy(this.emissive),C.wrapAround=this.wrapAround,C.wrapRGB.copy(this.wrapRGB),C.map=this.map,C.lightMap=this.lightMap,C.specularMap=this.specularMap,C.envMap=this.envMap,C.combine=this.combine,C.reflectivity=this.reflectivity,C.refractionRatio=this.refractionRatio,C.fog=this.fog,C.shading=this.shading,C.shaderID=this.shaderID,C.vertexColors=this.vertexColors,C.skinning=this.skinning,C.morphTargets=this.morphTargets,C.morphNormals=this.morphNormals,C}}}),"./src/WebGL/materials/InstancedMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{InstancedMaterial:()=>E});var n=a("./src/WebGL/constants/Coloring.ts"),y=a("./src/WebGL/constants/Shading.ts"),x=a("./src/colors.ts"),k=a("./src/WebGL/math/index.ts"),S=a("./src/WebGL/materials/Material.ts");class E extends S.Material{constructor(C){super(),this.color=new x.Color(16777215),this.ambient=new x.Color(1048575),this.emissive=new x.Color(0),this.wrapAround=!1,this.wrapRGB=new k.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=y.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=n.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(C)}clone(C=new E){return super.clone.call(this,C),C.color.copy(this.color),C.ambient.copy(this.ambient),C.emissive.copy(this.emissive),C.wrapAround=this.wrapAround,C.wrapRGB.copy(this.wrapRGB),C.map=this.map,C.lightMap=this.lightMap,C.specularMap=this.specularMap,C.envMap=this.envMap,C.combine=this.combine,C.reflectivity=this.reflectivity,C.refractionRatio=this.refractionRatio,C.fog=this.fog,C.shading=this.shading,C.shaderID=this.shaderID,C.vertexColors=this.vertexColors,C.skinning=this.skinning,C.morphTargets=this.morphTargets,C.morphNormals=this.morphNormals,C.sphere=this.sphere,C}}}),"./src/WebGL/materials/LineBasicMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{LineBasicMaterial:()=>x});var n=a("./src/colors.ts"),y=a("./src/WebGL/materials/Material.ts");class x extends y.Material{constructor(S){super(),this.color=new n.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(S)}clone(S=new x){return super.clone.call(this,S),S.color.copy(this.color),S}}}),"./src/WebGL/materials/Material.ts":((t,i,a)=>{a.r(i),a.d(i,{Material:()=>S,MaterialIdCount:()=>E});var n=a("./src/WebGL/constants/Sides.ts"),y=a("./src/WebGL/core/index.ts"),x=a("./src/WebGL/math/index.ts"),k=a("./src/colors.ts");class S extends y.EventDispatcher{constructor(){super(...arguments),this.id=E++,this.name="",this.side=n.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(C={}){if(C!==void 0)for(var B in C){var W=C[B];if(W===void 0){console.warn("$3Dmol.Material: '"+B+"' parameter is undefined.");continue}if(B in this){var Y=this[B];Y instanceof k.Color&&W instanceof k.Color?Y.copy(W):Y instanceof k.Color?Y.set(W):Y instanceof x.Vector3&&W instanceof x.Vector3?Y.copy(W):this[B]=W}}}clone(C=new S){return C.name=this.name,C.side=this.side,C.opacity=this.opacity,C.transparent=this.transparent,C.depthTest=this.depthTest,C.depthWrite=this.depthWrite,C.polygonOffset=this.polygonOffset,C.polygonOffsetFactor=this.polygonOffsetFactor,C.polygonOffsetUnits=this.polygonOffsetUnits,C.alphaTest=this.alphaTest,C.overdraw=this.overdraw,C.visible=this.visible,C}makeShaded(C){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:C},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let E=0}),"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{MeshDoubleLambertMaterial:()=>x});var n=a("./src/WebGL/constants/Sides.ts"),y=a("./src/WebGL/materials/MeshLambertMaterial.ts");class x extends y.MeshLambertMaterial{constructor(S){super(S),this.shaderID="lambertdouble",this.side=n.DoubleSide,this.outline=!1}clone(S=new x){return super.clone.call(this,S),S}}}),"./src/WebGL/materials/MeshLambertMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{MeshLambertMaterial:()=>E});var n=a("./src/WebGL/constants/Coloring.ts"),y=a("./src/WebGL/constants/Shading.ts"),x=a("./src/WebGL/materials/Material.ts"),k=a("./src/colors.ts"),S=a("./src/WebGL/math/index.ts");class E extends x.Material{constructor(C){super(),this.color=new k.Color(16777215),this.ambient=new k.Color(1048575),this.emissive=new k.Color(0),this.wrapAround=!1,this.wrapRGB=new S.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=y.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=n.Coloring.NoColors,this.skinning=!1,this.setValues(C)}clone(C=new E){return super.clone.call(this,C),C.color.copy(this.color),C.ambient.copy(this.ambient),C.emissive.copy(this.emissive),C.wrapAround=this.wrapAround,C.wrapRGB.copy(this.wrapRGB),C.map=this.map,C.lightMap=this.lightMap,C.specularMap=this.specularMap,C.envMap=this.envMap,C.combine=this.combine,C.reflectivity=this.reflectivity,C.refractionRatio=this.refractionRatio,C.fog=this.fog,C.shading=this.shading,C.shaderID=this.shaderID,C.vertexColors=this.vertexColors,C.skinning=this.skinning,C.morphTargets=this.morphTargets,C.morphNormals=this.morphNormals,C}}}),"./src/WebGL/materials/MeshOutlineMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{MeshOutlineMaterial:()=>x});var n=a("./src/colors.ts"),y=a("./src/WebGL/materials/Material.ts");class x extends y.Material{constructor(S){super(),S=S||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=n.CC.color(S.color||new n.Color(0,0,0)),this.outlineWidth=S.width||.1,this.outlinePushback=S.pushback||1,this.outlineMaxPixels=S.maxpixels||0}clone(S=new x){return super.clone.call(this,S),S.fog=this.fog,S.shaderID=this.shaderID,S.wireframe=this.wireframe,S.outlineColor=this.outlineColor,S.outlineWidth=this.outlineWidth,S.outlinePushback=this.outlinePushback,S.outlineMaxPixels=this.outlineMaxPixels,S}}}),"./src/WebGL/materials/SphereImposterMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{SphereImposterMaterial:()=>y});var n=a("./src/WebGL/materials/ImposterMaterial.ts");class y extends n.ImposterMaterial{constructor(k){super(k),this.shaderID="sphereimposter",this.setValues(k)}clone(k=new y){return super.clone.call(this,k),k}}}),"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{SphereImposterOutlineMaterial:()=>x});var n=a("./src/colors.ts"),y=a("./src/WebGL/materials/ImposterMaterial.ts");class x extends y.ImposterMaterial{constructor(S){super(S),S=S||{},this.shaderID="sphereimposteroutline",this.outlineColor=n.CC.color(S.color||new n.Color(0,0,0)),this.outlineWidth=S.width||.1,this.outlinePushback=S.pushback||1,this.outlineMaxPixels=S.maxpixels||0,this.setValues(S)}clone(S=new x){return super.clone.call(this,S),S.outlineColor=this.outlineColor,S.outlineWidth=this.outlineWidth,S.outlinePushback=this.outlinePushback,S.outlineMaxPixels=this.outlineMaxPixels,S}}}),"./src/WebGL/materials/SpriteMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{SpriteMaterial:()=>E});var n=a("./src/WebGL/constants/SpriteAlignment.ts"),y=a("./src/WebGL/core/Texture.ts"),x=a("./src/colors.ts"),k=a("./src/WebGL/math/index.ts"),S=a("./src/WebGL/materials/Material.ts");class E extends S.Material{constructor(C){super(),this.color=new x.Color(16777215),this.map=new y.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new k.Vector2(0,0),this.uvScale=new k.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=n.SpriteAlignment.center.clone(),this.setValues(C),C=C||{},C.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),C.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),C.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(C=new E){return super.clone.call(this,C),C.color.copy(this.color),C.map=this.map,C.useScreenCoordinates=this.useScreenCoordinates,C.screenOffset=this.screenOffset,C.sizeAttenuation=this.sizeAttenuation,C.scaleByViewport=this.scaleByViewPort,C.alignment.copy(this.alignment),C.uvOffset.copy(this.uvOffset),C}}}),"./src/WebGL/materials/StickImposterMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{StickImposterMaterial:()=>y});var n=a("./src/WebGL/materials/ImposterMaterial.ts");class y extends n.ImposterMaterial{constructor(k){super(k),this.shaderID="stickimposter",this.setValues(k)}clone(k=new y){return super.clone.call(this,k),k}}}),"./src/WebGL/materials/StickImposterOutlineMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{StickImposterOutlineMaterial:()=>x});var n=a("./src/colors.ts"),y=a("./src/WebGL/materials/ImposterMaterial.ts");class x extends y.ImposterMaterial{constructor(S={}){super(S),this.shaderID="stickimposteroutline",this.outlineColor=new n.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,S.color&&(this.outlineColor=n.CC.color(S.color)),S.width&&(this.outlineWidth=S.width),S.pushback&&(this.outlinePushback=S.pushback),S.maxpixels&&(this.outlineMaxPixels=S.maxpixels),this.setValues(S)}clone(S=new x){return super.clone.call(this,S),S.outlineColor=this.outlineColor,S.outlineWidth=this.outlineWidth,S.outlinePushback=this.outlinePushback,S.outlineMaxPixels=this.outlineMaxPixels,S}}}),"./src/WebGL/materials/VolumetricMaterial.ts":((t,i,a)=>{a.r(i),a.d(i,{VolumetricMaterial:()=>k});var n=a("./src/WebGL/constants/Sides.ts"),y=a("./src/colors.ts"),x=a("./src/WebGL/materials/Material.ts");class k extends x.Material{constructor(E){super(),this.transparent=!1,this.volumetric=!0,this.color=new y.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=n.FrontSide,this.setValues(E)}clone(E=new k){return super.clone.call(this,E),E.transparent=this.transparent,E.volumetric=this.volumetric,E.color=this.color,E.transferfn=this.transferfn,E.map=this.map,E.extent=this.extent,E.maxdepth=this.maxdepth,E.unit=this.unit,E.texmatrix=this.texmatrix,E.transfermin=this.transfermin,E.transfermax=this.transfermax,E.subsamples=this.subsamples,E.shaderID=this.shaderID,E.side=this.side,E}}}),"./src/WebGL/materials/index.ts":((t,i,a)=>{a.r(i),a.d(i,{ImposterMaterial:()=>n.ImposterMaterial,InstancedMaterial:()=>y.InstancedMaterial,LineBasicMaterial:()=>x.LineBasicMaterial,Material:()=>k.Material,MaterialIdCount:()=>k.MaterialIdCount,MeshDoubleLambertMaterial:()=>S.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>E.MeshLambertMaterial,MeshOutlineMaterial:()=>U.MeshOutlineMaterial,SphereImposterMaterial:()=>C.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>B.SphereImposterOutlineMaterial,SpriteMaterial:()=>W.SpriteMaterial,StickImposterMaterial:()=>Y.StickImposterMaterial,StickImposterOutlineMaterial:()=>Z.StickImposterOutlineMaterial,VolumetricMaterial:()=>T.VolumetricMaterial});var n=a("./src/WebGL/materials/ImposterMaterial.ts"),y=a("./src/WebGL/materials/InstancedMaterial.ts"),x=a("./src/WebGL/materials/LineBasicMaterial.ts"),k=a("./src/WebGL/materials/Material.ts"),S=a("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),E=a("./src/WebGL/materials/MeshLambertMaterial.ts"),U=a("./src/WebGL/materials/MeshOutlineMaterial.ts"),C=a("./src/WebGL/materials/SphereImposterMaterial.ts"),B=a("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),W=a("./src/WebGL/materials/SpriteMaterial.ts"),Y=a("./src/WebGL/materials/StickImposterMaterial.ts"),Z=a("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),T=a("./src/WebGL/materials/VolumetricMaterial.ts")}),"./src/WebGL/math/Quaternion.ts":((t,i,a)=>{a.r(i),a.d(i,{Quaternion:()=>n});class n{constructor(x,k,S,E){this.x=x||0,this.y=k||0,this.z=S||0,this.w=E!==void 0?E:1}set(x,k,S,E){return this.x=x,this.y=k,this.z=S,this.w=E,this}copy(x){return this.x=x.x,this.y=x.y,this.z=x.z,this.w=x.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let x=this.length();return x===0?(this.x=0,this.y=0,this.z=0,this.w=1):(x=1/x,this.x*=x,this.y*=x,this.z*=x,this.w*=x),this}multiply(x){return this.multiplyQuaternions(this,x)}multiplyScalar(x){return this.x*=x,this.y*=x,this.z*=x,this.w*=x,this}multiplyQuaternions(x,k){const S=x.x,E=x.y,U=x.z,C=x.w,B=k.x,W=k.y,Y=k.z,Z=k.w;return this.x=S*Z+C*B+E*Y-U*W,this.y=E*Z+C*W+U*B-S*Y,this.z=U*Z+C*Y+S*W-E*B,this.w=C*Z-S*B-E*W-U*Y,this}sub(x){return this.x-=x.x,this.y-=x.y,this.z-=x.z,this.w-=x.w,this}clone(){return new n(this.x,this.y,this.z,this.w)}setFromEuler(x){const k=Math.cos(x.x/2),S=Math.cos(x.y/2),E=Math.cos(x.z/2),U=Math.sin(x.x/2),C=Math.sin(x.y/2),B=Math.sin(x.z/2);return this.x=U*S*E+k*C*B,this.y=k*C*E-U*S*B,this.z=k*S*B+U*C*E,this.w=k*S*E-U*C*B,this}}}),"./src/WebGL/math/Vector2.ts":((t,i,a)=>{a.r(i),a.d(i,{Vector2:()=>n});class n{constructor(x,k){this.x=x||0,this.y=k||0}set(x,k){return this.x=x,this.y=k,this}subVectors(x,k){return this.x=x.x-k.x,this.y=x.y-k.y,this}copy(x){return this.x=x.x,this.y=x.y,this}clone(){return new n(this.x,this.y)}}}),"./src/WebGL/math/index.ts":((t,i,a)=>{a.r(i),a.d(i,{Matrix3:()=>E.Matrix3,Matrix4:()=>E.Matrix4,Quaternion:()=>n.Quaternion,Ray:()=>E.Ray,Vector2:()=>y.Vector2,Vector3:()=>E.Vector3,clamp:()=>x.clamp,conversionMatrix3:()=>k.conversionMatrix3,degToRad:()=>S.degToRad});var n=a("./src/WebGL/math/Quaternion.ts"),y=a("./src/WebGL/math/Vector2.ts"),x=a("./src/WebGL/math/utils/clamp.ts"),k=a("./src/WebGL/math/utils/conversionMatrix3.ts"),S=a("./src/WebGL/math/utils/degToRad.ts"),E=a("./src/WebGL/math/math.ts")}),"./src/WebGL/math/math.ts":((t,i,a)=>{a.r(i),a.d(i,{Matrix3:()=>W,Matrix4:()=>C,Ray:()=>Y,Vector3:()=>B});var n=a("./src/WebGL/math/utils/degToRad.ts"),y=a("./src/WebGL/math/utils/clamp.ts"),x,k,S,E,U;class C{constructor(T=1,l=0,f=0,D=0,I=0,V=1,K=0,A=0,L=0,G=0,ee=1,ae=0,Se=0,$e=0,qe=0,Pe=1){typeof T<"u"&&typeof T!="number"?this.elements=new Float32Array(T):(this.elements=new Float32Array(16),this.elements[0]=T,this.elements[4]=l,this.elements[8]=f,this.elements[12]=D,this.elements[1]=I,this.elements[5]=V,this.elements[9]=K,this.elements[13]=A,this.elements[2]=L,this.elements[6]=G,this.elements[10]=ee,this.elements[14]=ae,this.elements[3]=Se,this.elements[7]=$e,this.elements[11]=qe,this.elements[15]=Pe)}makeScale(T,l,f){throw new Error("Method not implemented.")}set(T,l,f,D,I,V,K,A,L,G,ee,ae,Se,$e,qe,Pe){const Ve=this.elements;return Ve[0]=T,Ve[4]=l,Ve[8]=f,Ve[12]=D,Ve[1]=I,Ve[5]=V,Ve[9]=K,Ve[13]=A,Ve[2]=L,Ve[6]=G,Ve[10]=ee,Ve[14]=ae,Ve[3]=Se,Ve[7]=$e,Ve[11]=qe,Ve[15]=Pe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(T){const l=T.elements;return this.set(l[0],l[4],l[8],l[12],l[1],l[5],l[9],l[13],l[2],l[6],l[10],l[14],l[3],l[7],l[11],l[15]),this}matrix3FromTopLeft(){const T=this.elements;return new W(T[0],T[4],T[8],T[1],T[5],T[9],T[2],T[6],T[10])}setRotationFromEuler(T,l){const f=this.elements,{x:D,y:I,z:V}=T,K=Math.cos(D),A=Math.sin(D),L=Math.cos(I),G=Math.sin(I),ee=Math.cos(V),ae=Math.sin(V);if(l===void 0||l==="XYZ"){const Se=K*ee,$e=K*ae,qe=A*ee,Pe=A*ae;f[0]=L*ee,f[4]=-L*ae,f[8]=G,f[1]=$e+qe*G,f[5]=Se-Pe*G,f[9]=-A*L,f[2]=Pe-Se*G,f[6]=qe+$e*G,f[10]=K*L}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${l}`);return this}setRotationFromQuaternion(T){const l=this.elements,{x:f,y:D,z:I,w:V}=T,K=f+f,A=D+D,L=I+I,G=f*K,ee=f*A,ae=f*L,Se=D*A,$e=D*L,qe=I*L,Pe=V*K,Ve=V*A,Ie=V*L;return l[0]=1-(Se+qe),l[4]=ee-Ie,l[8]=ae+Ve,l[1]=ee+Ie,l[5]=1-(G+qe),l[9]=$e-Pe,l[2]=ae-Ve,l[6]=$e+Pe,l[10]=1-(G+Se),this}multiplyMatrices(T,l){const f=T.elements,D=l.elements,I=this.elements,V=f[0],K=f[4],A=f[8],L=f[12],G=f[1],ee=f[5],ae=f[9],Se=f[13],$e=f[2],qe=f[6],Pe=f[10],Ve=f[14],Ie=f[3],Xe=f[7],et=f[11],tt=f[15],rt=D[0],ze=D[4],lt=D[8],bt=D[12],At=D[1],Vt=D[5],Yt=D[9],er=D[13],lr=D[2],yr=D[6],$r=D[10],ia=D[14],Sa=D[3],Xr=D[7],fr=D[11],Hr=D[15];return I[0]=V*rt+K*At+A*lr+L*Sa,I[4]=V*ze+K*Vt+A*yr+L*Xr,I[8]=V*lt+K*Yt+A*$r+L*fr,I[12]=V*bt+K*er+A*ia+L*Hr,I[1]=G*rt+ee*At+ae*lr+Se*Sa,I[5]=G*ze+ee*Vt+ae*yr+Se*Xr,I[9]=G*lt+ee*Yt+ae*$r+Se*fr,I[13]=G*bt+ee*er+ae*ia+Se*Hr,I[2]=$e*rt+qe*At+Pe*lr+Ve*Sa,I[6]=$e*ze+qe*Vt+Pe*yr+Ve*Xr,I[10]=$e*lt+qe*Yt+Pe*$r+Ve*fr,I[14]=$e*bt+qe*er+Pe*ia+Ve*Hr,I[3]=Ie*rt+Xe*At+et*lr+tt*Sa,I[7]=Ie*ze+Xe*Vt+et*yr+tt*Xr,I[11]=Ie*lt+Xe*Yt+et*$r+tt*fr,I[15]=Ie*bt+Xe*er+et*ia+tt*Hr,this}multiplyScalar(T){const l=this.elements;return l[0]*=T,l[4]*=T,l[8]*=T,l[12]*=T,l[1]*=T,l[5]*=T,l[9]*=T,l[13]*=T,l[2]*=T,l[6]*=T,l[10]*=T,l[14]*=T,l[3]*=T,l[7]*=T,l[11]*=T,l[15]*=T,this}makeTranslation(T,l,f){return this.set(1,0,0,T,0,1,0,l,0,0,1,f,0,0,0,1),this}snap(T){const l=Math.pow(10,4),f=this.elements;for(let D=0;D<16;D++){const I=Math.round(f[D]);I===Math.round(f[D]*l)/l&&(f[D]=I)}return this}transpose(){const T=this.elements;let l;return l=T[1],T[1]=T[4],T[4]=l,l=T[2],T[2]=T[8],T[8]=l,l=T[6],T[6]=T[9],T[9]=l,l=T[3],T[3]=T[12],T[12]=l,l=T[7],T[7]=T[13],T[13]=l,l=T[11],T[11]=T[14],T[14]=l,this}setPosition(T){const l=this.elements;return l[12]=T.x,l[13]=T.y,l[14]=T.z,this}translate(T){const l=this.elements;return l[12]+=T.x,l[13]+=T.y,l[14]+=T.z,this}getInverse(T,l){const f=this.elements,D=T.elements,I=D[0],V=D[4],K=D[8],A=D[12],L=D[1],G=D[5],ee=D[9],ae=D[13],Se=D[2],$e=D[6],qe=D[10],Pe=D[14],Ve=D[3],Ie=D[7],Xe=D[11],et=D[15];f[0]=ee*Pe*Ie-ae*qe*Ie+ae*$e*Xe-G*Pe*Xe-ee*$e*et+G*qe*et,f[4]=A*qe*Ie-K*Pe*Ie-A*$e*Xe+V*Pe*Xe+K*$e*et-V*qe*et,f[8]=K*ae*Ie-A*ee*Ie+A*G*Xe-V*ae*Xe-K*G*et+V*ee*et,f[12]=A*ee*$e-K*ae*$e-A*G*qe+V*ae*qe+K*G*Pe-V*ee*Pe,f[1]=ae*qe*Ve-ee*Pe*Ve-ae*Se*Xe+L*Pe*Xe+ee*Se*et-L*qe*et,f[5]=K*Pe*Ve-A*qe*Ve+A*Se*Xe-I*Pe*Xe-K*Se*et+I*qe*et,f[9]=A*ee*Ve-K*ae*Ve-A*L*Xe+I*ae*Xe+K*L*et-I*ee*et,f[13]=K*ae*Se-A*ee*Se+A*L*qe-I*ae*qe-K*L*Pe+I*ee*Pe,f[2]=G*Pe*Ve-ae*$e*Ve+ae*Se*Ie-L*Pe*Ie-G*Se*et+L*$e*et,f[6]=A*$e*Ve-V*Pe*Ve-A*Se*Ie+I*Pe*Ie+V*Se*et-I*$e*et,f[10]=V*ae*Ve-A*G*Ve+A*L*Ie-I*ae*Ie-V*L*et+I*G*et,f[14]=A*G*Se-V*ae*Se-A*L*$e+I*ae*$e+V*L*Pe-I*G*Pe,f[3]=ee*$e*Ve-G*qe*Ve-ee*Se*Ie+L*qe*Ie+G*Se*Xe-L*$e*Xe,f[7]=V*qe*Ve-K*$e*Ve+K*Se*Ie-I*qe*Ie-V*Se*Xe+I*$e*Xe,f[11]=K*G*Ve-V*ee*Ve-K*L*Ie+I*ee*Ie+V*L*Xe-I*G*Xe,f[15]=V*ee*Se-K*G*Se+K*L*$e-I*ee*$e-V*L*qe+I*G*qe;const tt=I*f[0]+L*f[4]+Se*f[8]+Ve*f[12];if(tt===0){const rt="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(l)throw new Error(rt);return console.warn(rt),this.identity(),this}return this.multiplyScalar(1/tt),this}isReflected(){const T=this.elements,l=T[0],f=T[4],D=T[8],I=T[1],V=T[5],K=T[9],A=T[2],L=T[6],G=T[10];return l*V*G+I*L*D+A*f*K-A*V*D-I*f*G-l*L*K<0}scale(T){const l=this.elements,{x:f}=T,{y:D}=T,{z:I}=T;return l[0]*=f,l[4]*=D,l[8]*=I,l[1]*=f,l[5]*=D,l[9]*=I,l[2]*=f,l[6]*=D,l[10]*=I,l[3]*=f,l[7]*=D,l[11]*=I,this}getMaxScaleOnAxis(){const T=this.elements,l=T[0]*T[0]+T[1]*T[1]+T[2]*T[2],f=T[4]*T[4]+T[5]*T[5]+T[6]*T[6],D=T[8]*T[8]+T[9]*T[9]+T[10]*T[10];return Math.sqrt(Math.max(l,Math.max(f,D)))}makeFrustum(T,l,f,D,I,V){const K=this.elements,A=2*I/(l-T),L=2*I/(D-f),G=(l+T)/(l-T),ee=(D+f)/(D-f),ae=-(V+I)/(V-I),Se=-2*V*I/(V-I);return K[0]=A,K[4]=0,K[8]=G,K[12]=0,K[1]=0,K[5]=L,K[9]=ee,K[13]=0,K[2]=0,K[6]=0,K[10]=ae,K[14]=Se,K[3]=0,K[7]=0,K[11]=-1,K[15]=0,this}makePerspective(T,l,f,D){const I=f*Math.tan((0,n.degToRad)(T*.5)),V=-I,K=V*l,A=I*l;return this.makeFrustum(K,A,V,I,f,D)}makeOrthographic(T,l,f,D,I,V){const K=this.elements,A=1/(l-T),L=1/(f-D),G=1/(V-I),ee=(l+T)*A,ae=(f+D)*L,Se=(V+I)*G;return K[0]=2*A,K[4]=0,K[8]=0,K[12]=-ee,K[1]=0,K[5]=2*L,K[9]=0,K[13]=-ae,K[2]=0,K[6]=0,K[10]=-2*G,K[14]=-Se,K[3]=0,K[7]=0,K[11]=0,K[15]=1,this}isEqual(T){const l=T.elements,f=this.elements;return f[0]===l[0]&&f[4]===l[4]&&f[8]===l[8]&&f[12]===l[12]&&f[1]===l[1]&&f[5]===l[5]&&f[9]===l[9]&&f[13]===l[13]&&f[2]===l[2]&&f[6]===l[6]&&f[10]===l[10]&&f[14]===l[14]&&f[3]===l[3]&&f[7]===l[7]&&f[11]===l[11]&&f[15]===l[15]}clone(){const T=this.elements;return new C(T[0],T[4],T[8],T[12],T[1],T[5],T[9],T[13],T[2],T[6],T[10],T[14],T[3],T[7],T[11],T[15])}isIdentity(){const T=this.elements;return T[0]===1&&T[4]===0&&T[8]===0&&T[12]===0&&T[1]===0&&T[5]===1&&T[9]===0&&T[13]===0&&T[2]===0&&T[6]===0&&T[10]===1&&T[14]===0&&T[3]===0&&T[7]===0&&T[11]===0&&T[15]===1}isNearlyIdentity(T){return this.clone().snap(T).isIdentity()}getScale(T){const l=this.elements;return T=T||new B,S.set(l[0],l[1],l[2]),E.set(l[4],l[5],l[6]),U.set(l[8],l[9],l[10]),T.x=S.length(),T.y=E.length(),T.z=U.length(),T}lookAt(T,l,f){const D=this.elements;return U.subVectors(T,l).normalize(),U.length()===0&&(U.z=1),S.crossVectors(f,U).normalize(),S.length()===0&&(U.x+=1e-4,S.crossVectors(f,U).normalize()),E.crossVectors(U,S),D[0]=S.x,D[4]=E.x,D[8]=U.x,D[1]=S.y,D[5]=E.y,D[9]=U.y,D[2]=S.z,D[6]=E.z,D[10]=U.z,this}compose(T,l,f){const D=this.elements;return x.identity(),x.setRotationFromQuaternion(l),k.makeScale(f.x,f.y,f.z),this.multiplyMatrices(x,k),D[12]=T.x,D[13]=T.y,D[14]=T.z,this}}x=new C,k=new C;class B{constructor(T,l,f){this.x=T||0,this.y=l||0,this.z=f||0,this.atomid=void 0}set(T,l,f){return this.x=T,this.y=l,this.z=f,this}copy(T){return this.x=T.x,this.y=T.y,this.z=T.z,this}add(T){return this.x+=T.x,this.y+=T.y,this.z+=T.z,this}addVectors(T,l){return this.x=T.x+l.x,this.y=T.y+l.y,this.z=T.z+l.z,this}multiplyVectors(T,l){return this.x=T.x*l.x,this.y=T.y*l.y,this.z=T.z*l.z,this}sub(T){return this.x-=T.x,this.y-=T.y,this.z-=T.z,this}subVectors(T,l){return this.x=T.x-l.x,this.y=T.y-l.y,this.z=T.z-l.z,this}multiplyScalar(T){return this.x*=T,this.y*=T,this.z*=T,this}divideScalar(T){return T!==0?(this.x/=T,this.y/=T,this.z/=T):(this.x=0,this.y=0,this.z=0),this}max(T){return this.x=Math.max(this.x,T.x),this.y=Math.max(this.y,T.y),this.z=Math.max(this.z,T.z),this}min(T){return this.x=Math.min(this.x,T.x),this.y=Math.min(this.y,T.y),this.z=Math.min(this.z,T.z),this}distanceTo(T){return Math.sqrt(this.distanceToSquared(T))}distanceToSquared(T){const l=this.x-T.x,f=this.y-T.y,D=this.z-T.z;return l*l+f*f+D*D}applyMatrix3(T){const{x:l}=this,{y:f}=this,{z:D}=this,I=T.elements;return this.x=I[0]*l+I[3]*f+I[6]*D,this.y=I[1]*l+I[4]*f+I[7]*D,this.z=I[2]*l+I[5]*f+I[8]*D,this}applyMatrix4(T){const{x:l}=this,{y:f}=this,{z:D}=this,I=T.elements;return this.x=I[0]*l+I[4]*f+I[8]*D+I[12],this.y=I[1]*l+I[5]*f+I[9]*D+I[13],this.z=I[2]*l+I[6]*f+I[10]*D+I[14],this}applyProjection(T){const{x:l}=this,{y:f}=this,{z:D}=this,I=T.elements,V=I[3]*l+I[7]*f+I[11]*D+I[15];return this.x=(I[0]*l+I[4]*f+I[8]*D+I[12])/V,this.y=(I[1]*l+I[5]*f+I[9]*D+I[13])/V,this.z=(I[2]*l+I[6]*f+I[10]*D+I[14])/V,this}applyQuaternion(T){const{x:l}=this,{y:f}=this,{z:D}=this,I=T.x,V=T.y,K=T.z,A=T.w,L={};L.x=2*(f*K-D*V),L.y=2*(D*I-l*K),L.z=2*(l*V-f*I);const G={};return G.x=L.y*K-L.z*V,G.y=L.z*I-L.x*K,G.z=L.x*V-L.y*I,this.x=l+A*L.x+G.x,this.y=f+A*L.y+G.y,this.z=D+A*L.z+G.z,this}negate(){return this.multiplyScalar(-1)}dot(T){return this.x*T.x+this.y*T.y+this.z*T.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(T){const{x:l}=this,{y:f}=this,{z:D}=this;return this.x=f*T.z-D*T.y,this.y=D*T.x-l*T.z,this.z=l*T.y-f*T.x,this}crossVectors(T,l){return this.x=T.y*l.z-T.z*l.y,this.y=T.z*l.x-T.x*l.z,this.z=T.x*l.y-T.y*l.x,this}equals(T){return this.x==T.x&&this.y==T.y&&this.z==T.z}getPositionFromMatrix(T){return this.x=T.elements[12],this.y=T.elements[13],this.z=T.elements[14],this}setEulerFromRotationMatrix(T,l){const f=T.elements,D=f[0],I=f[4],V=f[8],K=f[5],A=f[9],L=f[6],G=f[10];return l===void 0||l==="XYZ"?(this.y=Math.asin((0,y.clamp)(V,-1,1)),Math.abs(V)<.99999?(this.x=Math.atan2(-A,G),this.z=Math.atan2(-I,D)):(this.x=Math.atan2(L,K),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${l}`),this}rotateAboutVector(T,l){T.normalize();const f=Math.cos(l),D=Math.sin(l),I=this.clone().multiplyScalar(f),V=T.clone().cross(this).multiplyScalar(D),K=T.clone().multiplyScalar(T.clone().dot(this)).multiplyScalar(1-f),A=I.add(V).add(K);return this.x=A.x,this.y=A.y,this.z=A.z,this}setFromMatrixPosition(T){const l=T.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}transformDirection(T){const{x:l}=this,{y:f}=this,{z:D}=this,I=T.elements;return this.x=I[0]*l+I[4]*f+I[8]*D,this.y=I[1]*l+I[5]*f+I[9]*D,this.z=I[2]*l+I[6]*f+I[10]*D,this.normalize()}clone(){return new B(this.x,this.y,this.z)}unproject(T){const l=x;return l.multiplyMatrices(T.matrixWorld,l.getInverse(T.projectionMatrix)),this.applyMatrix4(l)}}S=new B,E=new B,U=new B;class W{constructor(T=1,l=0,f=0,D=0,I=1,V=0,K=0,A=0,L=1){this.elements=new Float32Array(9),this.set(T,l,f,D,I,V,K,A,L)}set(T,l,f,D,I,V,K,A,L){const G=this.elements;return G[0]=T,G[3]=l,G[6]=f,G[1]=D,G[4]=I,G[7]=V,G[2]=K,G[5]=A,G[8]=L,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(T){const l=T.elements;this.set(l[0],l[3],l[6],l[1],l[4],l[7],l[2],l[5],l[8])}multiplyScalar(T){const l=this.elements;return l[0]*=T,l[3]*=T,l[6]*=T,l[1]*=T,l[4]*=T,l[7]*=T,l[2]*=T,l[5]*=T,l[8]*=T,this}getInverse3(T){const l=T.elements,f=this.elements;f[0]=l[4]*l[8]-l[5]*l[7],f[3]=l[6]*l[5]-l[3]*l[8],f[6]=l[3]*l[7]-l[6]*l[4],f[1]=l[7]*l[2]-l[1]*l[8],f[4]=l[0]*l[8]-l[6]*l[2],f[7]=l[1]*l[6]-l[0]*l[7],f[2]=l[1]*l[5]-l[2]*l[4],f[5]=l[2]*l[3]-l[0]*l[5],f[8]=l[0]*l[4]-l[1]*l[3];const D=l[0]*f[0]+l[3]*f[1]+l[6]*f[2];return this.multiplyScalar(1/D),this}getInverse(T,l){const f=T.elements,D=this.elements;D[0]=f[10]*f[5]-f[6]*f[9],D[1]=-f[10]*f[1]+f[2]*f[9],D[2]=f[6]*f[1]-f[2]*f[5],D[3]=-f[10]*f[4]+f[6]*f[8],D[4]=f[10]*f[0]-f[2]*f[8],D[5]=-f[6]*f[0]+f[2]*f[4],D[6]=f[9]*f[4]-f[5]*f[8],D[7]=-f[9]*f[0]+f[1]*f[8],D[8]=f[5]*f[0]-f[1]*f[4];const I=f[0]*D[0]+f[1]*D[3]+f[2]*D[6];if(I===0){const V="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(l)throw new Error(V);return console.warn(V),this.identity(),this}return this.multiplyScalar(1/I),this}getDeterminant(){const T=this.elements;return T[0]*T[4]*T[8]+T[1]*T[5]*T[6]+T[2]*T[3]*T[7]-T[2]*T[4]*T[6]-T[1]*T[3]*T[8]-T[0]*T[5]*T[7]}transpose(){let T;const l=this.elements;return T=l[1],l[1]=l[3],l[3]=T,T=l[2],l[2]=l[6],l[6]=T,T=l[5],l[5]=l[7],l[7]=T,this}clone(){const T=this.elements;return new W(T[0],T[3],T[6],T[1],T[4],T[7],T[2],T[5],T[8])}getMatrix4(){const T=this.elements;return new C(T[0],T[3],T[6],0,T[1],T[4],T[7],0,T[2],T[5],T[8],0)}}class Y{constructor(T,l){this.origin=T!==void 0?T:new B,this.direction=l!==void 0?l:new B}set(T,l){return this.origin.copy(T),this.direction.copy(l),this}copy(T){return this.origin.copy(T.origin),this.direction.copy(T.direction),this}at(T,l){return(l||new B).copy(this.direction).multiplyScalar(T).add(this.origin)}recast(T){const l=S;return this.origin.copy(this.at(T,l)),this}closestPointToPoint(T,l){const f=l||new B;f.subVectors(T,this.origin);const D=f.dot(this.direction);return f.copy(this.direction).multiplyScalar(D).add(this.origin)}distanceToPoint(T){const l=S,f=l.subVectors(T,this.origin).dot(this.direction);return l.copy(this.direction).multiplyScalar(f).add(this.origin),l.distanceTo(T)}isIntersectionCylinder(){}isIntersectionSphere(T){return this.distanceToPoint(T.center)<=T.radius}isIntersectionPlane(T){return T.normal.dot(this.direction)!==0||T.distanceToPoint(this.origin)===0}distanceToPlane(T){const l=T.normal.dot(this.direction);return l===0?T.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(T.normal)+T.constant)/l}intersectPlane(T,l){const f=this.distanceToPlane(T);if(f!==void 0)return this.at(f,l)}applyMatrix4(T){return this.direction.add(this.origin).applyMatrix4(T),this.origin.applyMatrix4(T),this.direction.sub(this.origin),this}clone(){return new Y().copy(this)}}}),"./src/WebGL/math/utils/clamp.ts":((t,i,a)=>{a.r(i),a.d(i,{clamp:()=>n});function n(y,x,k){return Math.min(Math.max(y,x),k)}}),"./src/WebGL/math/utils/conversionMatrix3.ts":((t,i,a)=>{a.r(i),a.d(i,{conversionMatrix3:()=>y});var n=a("./src/WebGL/math/math.ts");function y(x,k,S,E,U,C){E=E*Math.PI/180,U=U*Math.PI/180,C=C*Math.PI/180;const B=l=>l*l,W=Math.cos(E),Y=Math.cos(U),Z=Math.cos(C),T=Math.sin(C);return new n.Matrix3(x,k*Z,S*Y,0,k*T,S*(W-Y*Z)/T,0,0,S*Math.sqrt(1-B(W)-B(Y)-B(Z)+2*W*Y*Z)/T)}}),"./src/WebGL/math/utils/degToRad.ts":((t,i,a)=>{a.r(i),a.d(i,{degToRad:()=>y});const n=Math.PI/180;function y(x){return x*n}}),"./src/WebGL/objects/Line.ts":((t,i,a)=>{a.r(i),a.d(i,{Line:()=>k,LineStyle:()=>x});var n=a("./src/WebGL/materials/index.ts"),y=a("./src/WebGL/core/index.ts"),x;(function(S){S[S.LineStrip=0]="LineStrip",S[S.LinePieces=1]="LinePieces"})(x||(x={}));class k extends y.Object3D{constructor(E,U=new n.LineBasicMaterial({color:Math.random()*16777215}),C=x.LineStrip){super(),this.geometry=E,this.material=U,this.type=C}clone(E=new k(this.geometry,this.material,this.type)){return super.clone.call(this,E),E}}}),"./src/WebGL/objects/Mesh.ts":((t,i,a)=>{a.r(i),a.d(i,{Mesh:()=>y});var n=a("./src/WebGL/core/index.ts");class y extends n.Object3D{constructor(k,S){super(),this.geometry=k,this.material=S}clone(k){return k===void 0&&(k=new y(this.geometry,this.material)),super.clone.call(this,k),k}}}),"./src/WebGL/objects/Sprite.ts":((t,i,a)=>{a.r(i),a.d(i,{Sprite:()=>x});var n=a("./src/WebGL/materials/index.ts"),y=a("./src/WebGL/core/index.ts");class x extends y.Object3D{constructor(S=new n.SpriteMaterial){super(),this.material=S,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(S=new x(this.material)){return y.Object3D.prototype.clone.call(this,S),S}}}),"./src/WebGL/objects/index.ts":((t,i,a)=>{a.r(i),a.d(i,{Line:()=>n.Line,LineStyle:()=>n.LineStyle,Mesh:()=>y.Mesh,Sprite:()=>x.Sprite});var n=a("./src/WebGL/objects/Line.ts"),y=a("./src/WebGL/objects/Mesh.ts"),x=a("./src/WebGL/objects/Sprite.ts")}),"./src/WebGL/shaders/ShaderType.ts":((t,i,a)=>{a.r(i)}),"./src/WebGL/shaders/index.ts":((t,i,a)=>{a.r(i),a.d(i,{ShaderLib:()=>n.ShaderLib,ShaderUtils:()=>y.ShaderUtils,basic:()=>n.basic,clone:()=>y.clone,instanced:()=>n.instanced,lambert:()=>n.lambert,lambertdouble:()=>n.lambertdouble,outline:()=>n.outline,screen:()=>n.screen,screenaa:()=>n.screenaa,sphereimposter:()=>n.sphereimposter,sphereimposteroutline:()=>n.sphereimposteroutline,sprite:()=>n.sprite,stickimposter:()=>n.stickimposter,stickimposteroutline:()=>n.stickimposteroutline,volumetric:()=>n.volumetric});var n=a("./src/WebGL/shaders/lib/index.ts"),y=a("./src/WebGL/shaders/utils/index.ts");a("./src/WebGL/shaders/ShaderType.ts")}),"./src/WebGL/shaders/lib/basic/basic.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/basic/basic.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`}),"./src/WebGL/shaders/lib/basic/index.ts":((t,i,a)=>{a.r(i),a.d(i,{basic:()=>k});var n=a("./src/WebGL/shaders/lib/basic/uniforms.ts"),y=a("./src/WebGL/shaders/lib/basic/basic.frag"),x=a("./src/WebGL/shaders/lib/basic/basic.vert");const k={vertexShader:x.default.replace("#define GLSLIFY 1",""),fragmentShader:y.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/basic/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}}),"./src/WebGL/shaders/lib/blur/blur.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`}),"./src/WebGL/shaders/lib/blur/blur.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/blur/index.ts":((t,i,a)=>{a.r(i),a.d(i,{blur:()=>k});var n=a("./src/WebGL/shaders/lib/blur/uniforms.ts"),y=a("./src/WebGL/shaders/lib/blur/blur.frag"),x=a("./src/WebGL/shaders/lib/blur/blur.vert");const k={fragmentShader:y.default,vertexShader:x.default,uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/blur/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>n});const n={}}),"./src/WebGL/shaders/lib/index.ts":((t,i,a)=>{a.r(i),a.d(i,{ShaderLib:()=>D,basic:()=>n.basic,instanced:()=>y.instanced,lambert:()=>x.lambert,lambertdouble:()=>k.lambertdouble,outline:()=>S.outline,screen:()=>E.screen,screenaa:()=>U.screenaa,sphereimposter:()=>C.sphereimposter,sphereimposteroutline:()=>B.sphereimposteroutline,sprite:()=>W.sprite,stickimposter:()=>Y.stickimposter,stickimposteroutline:()=>Z.stickimposteroutline,volumetric:()=>T.volumetric});var n=a("./src/WebGL/shaders/lib/basic/index.ts"),y=a("./src/WebGL/shaders/lib/instanced/index.ts"),x=a("./src/WebGL/shaders/lib/lambert/index.ts"),k=a("./src/WebGL/shaders/lib/lambertdouble/index.ts"),S=a("./src/WebGL/shaders/lib/outline/index.ts"),E=a("./src/WebGL/shaders/lib/screen/index.ts"),U=a("./src/WebGL/shaders/lib/screenaa/index.ts"),C=a("./src/WebGL/shaders/lib/sphereimposter/index.ts"),B=a("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),W=a("./src/WebGL/shaders/lib/sprite/index.ts"),Y=a("./src/WebGL/shaders/lib/stickimposter/index.ts"),Z=a("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),T=a("./src/WebGL/shaders/lib/volumetric/index.ts"),l=a("./src/WebGL/shaders/lib/ssao/index.ts"),f=a("./src/WebGL/shaders/lib/blur/index.ts");const D={basic:n.basic,blur:f.blur,instanced:y.instanced,lambert:x.lambert,lambertdouble:k.lambertdouble,outline:S.outline,screen:E.screen,screenaa:U.screenaa,ssao:l.ssao,sphereimposter:C.sphereimposter,sphereimposteroutline:B.sphereimposteroutline,sprite:W.sprite,stickimposter:Y.stickimposter,stickimposteroutline:Z.stickimposteroutline,volumetric:T.volumetric}}),"./src/WebGL/shaders/lib/instanced/index.ts":((t,i,a)=>{a.r(i),a.d(i,{instanced:()=>k});var n=a("./src/WebGL/shaders/lib/instanced/uniforms.ts"),y=a("./src/WebGL/shaders/lib/instanced/instanced.frag"),x=a("./src/WebGL/shaders/lib/instanced/instanced.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/instanced/instanced.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`}),"./src/WebGL/shaders/lib/instanced/instanced.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`}),"./src/WebGL/shaders/lib/instanced/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/lambert/index.ts":((t,i,a)=>{a.r(i),a.d(i,{lambert:()=>k});var n=a("./src/WebGL/shaders/lib/lambert/uniforms.ts"),y=a("./src/WebGL/shaders/lib/lambert/lambert.frag"),x=a("./src/WebGL/shaders/lib/lambert/lambert.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/lambert/lambert.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`}),"./src/WebGL/shaders/lib/lambert/lambert.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`}),"./src/WebGL/shaders/lib/lambert/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/lambertdouble/index.ts":((t,i,a)=>{a.r(i),a.d(i,{lambertdouble:()=>k});var n=a("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),y=a("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),x=a("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`}),"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`}),"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/outline/index.ts":((t,i,a)=>{a.r(i),a.d(i,{outline:()=>k});var n=a("./src/WebGL/shaders/lib/outline/uniforms.ts"),y=a("./src/WebGL/shaders/lib/outline/outline.frag"),x=a("./src/WebGL/shaders/lib/outline/outline.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/outline/outline.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`}),"./src/WebGL/shaders/lib/outline/outline.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`}),"./src/WebGL/shaders/lib/outline/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new n.Color(0,0,0)},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}}),"./src/WebGL/shaders/lib/screen/index.ts":((t,i,a)=>{a.r(i),a.d(i,{screen:()=>k});var n=a("./src/WebGL/shaders/lib/screen/uniforms.ts"),y=a("./src/WebGL/shaders/lib/screen/screen.frag"),x=a("./src/WebGL/shaders/lib/screen/screen.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/screen/screen.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `}),"./src/WebGL/shaders/lib/screen/screen.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/screen/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>n});const n={}}),"./src/WebGL/shaders/lib/screenaa/index.ts":((t,i,a)=>{a.r(i),a.d(i,{screenaa:()=>k});var n=a("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),y=a("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),x=a("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/screenaa/screenaa.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`}),"./src/WebGL/shaders/lib/screenaa/screenaa.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/screenaa/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>n});const n={}}),"./src/WebGL/shaders/lib/sphereimposter/index.ts":((t,i,a)=>{a.r(i),a.d(i,{sphereimposter:()=>k});var n=a("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),y=a("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),x=a("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const k={vertexShader:x.default.replace("#define GLSLIFY 1",""),fragmentShader:y.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`}),"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`}),"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":((t,i,a)=>{a.r(i),a.d(i,{sphereimposteroutline:()=>k});var n=a("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),y=a("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),x=a("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`}),"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`}),"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new n.Color(0,0,0)},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}}),"./src/WebGL/shaders/lib/sprite/index.ts":((t,i,a)=>{a.r(i),a.d(i,{sprite:()=>k});var n=a("./src/WebGL/shaders/lib/sprite/uniforms.ts"),y=a("./src/WebGL/shaders/lib/sprite/sprite.frag"),x=a("./src/WebGL/shaders/lib/sprite/sprite.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/sprite/sprite.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`}),"./src/WebGL/shaders/lib/sprite/sprite.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`}),"./src/WebGL/shaders/lib/sprite/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>n});const n={}}),"./src/WebGL/shaders/lib/ssao/index.ts":((t,i,a)=>{a.r(i),a.d(i,{ssao:()=>k});var n=a("./src/WebGL/shaders/lib/ssao/uniforms.ts"),y=a("./src/WebGL/shaders/lib/ssao/ssao.frag"),x=a("./src/WebGL/shaders/lib/ssao/ssao.vert");const k={fragmentShader:y.default,vertexShader:x.default,uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/ssao/ssao.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`}),"./src/WebGL/shaders/lib/ssao/ssao.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/ssao/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>n});const n={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}}),"./src/WebGL/shaders/lib/stickimposter/index.ts":((t,i,a)=>{a.r(i),a.d(i,{stickimposter:()=>S});var n=a("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),y=a("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),x=a("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),k=a("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const S={fragmentShader:[y.default,x.default].join(`
`),vertexShader:k.default,uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`}),"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`}),"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":((t,i,a)=>{a.r(i),a.d(i,{stickimposteroutline:()=>S});var n=a("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),y=a("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),x=a("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag"),k=a("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const S={fragmentShader:y.default+x.default,vertexShader:k.default,uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`}),"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new n.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}}),"./src/WebGL/shaders/lib/volumetric/index.ts":((t,i,a)=>{a.r(i),a.d(i,{volumetric:()=>k});var n=a("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),y=a("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),x=a("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const k={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:x.default.replace("#define GLSLIFY 1",""),uniforms:n.uniforms}}),"./src/WebGL/shaders/lib/volumetric/uniforms.ts":((t,i,a)=>{a.r(i),a.d(i,{uniforms:()=>y});var n=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}}),"./src/WebGL/shaders/lib/volumetric/volumetric.frag":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `}),"./src/WebGL/shaders/lib/volumetric/volumetric.vert":((t,i,a)=>{a.r(i),a.d(i,{default:()=>n});const n=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`}),"./src/WebGL/shaders/utils/clone.ts":((t,i,a)=>{a.r(i),a.d(i,{clone:()=>y});var n=a("./src/colors.ts");function y(x){let k={};for(const E in x){k[E]={},k[E].type=x[E].type;var S=x[E].value;S instanceof n.Color?k[E].value=S.clone():typeof S=="number"?k[E].value=S:S instanceof Array?k[E].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return k}}),"./src/WebGL/shaders/utils/index.ts":((t,i,a)=>{a.r(i),a.d(i,{ShaderUtils:()=>y,clone:()=>n.clone});var n=a("./src/WebGL/shaders/utils/clone.ts");const y={clone:n.clone}}),"./src/WebGL/shapes/Cylinder.ts":((t,i,a)=>{a.r(i),a.d(i,{Cylinder:()=>x});var n=a("./src/WebGL/math/index.ts");let y=new n.Vector3;class x{constructor(S=new n.Vector3,E=new n.Vector3,U=0){this.c1=S,this.c2=E,this.radius=U,this.direction=new n.Vector3().subVectors(this.c2,this.c1).normalize()}copy(S){return this.c1.copy(S.c1),this.c2.copy(S.c2),this.direction.copy(S.direction),this.radius=S.radius,this}lengthSq(){return y.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(S){return this.direction.add(this.c1).applyMatrix4(S),this.c1.applyMatrix4(S),this.c2.applyMatrix4(S),this.direction.sub(this.c1).normalize(),this.radius=this.radius*S.getMaxScaleOnAxis(),this}}}),"./src/WebGL/shapes/Sphere.ts":((t,i,a)=>{a.r(i),a.d(i,{Sphere:()=>y});var n=a("./src/WebGL/math/index.ts");class y{constructor(k={x:0,y:0,z:0},S=0){this.center=new n.Vector3(k.x,k.y,k.z),this.radius=S}set(k,S){return this.center.copy(k),this.radius=S,this}copy(k){return this.center.copy(k.center),this.radius=k.radius,this}applyMatrix4(k){return this.center.applyMatrix4(k),this.radius=this.radius*k.getMaxScaleOnAxis(),this}translate(k){return this.center.add(k),this}equals(k){return k.center.equals(this.center)&&k.radius===this.radius}clone(){return new y().copy(this)}}}),"./src/WebGL/shapes/Triangle.ts":((t,i,a)=>{a.r(i),a.d(i,{Triangle:()=>x});var n=a("./src/WebGL/math/index.ts");const y=new n.Vector3;class x{constructor(S=new n.Vector3,E=new n.Vector3,U=new n.Vector3){this.a=S,this.b=E,this.c=U}copy(S){return this.a.copy(S.a),this.b.copy(S.b),this.c.copy(S.c),this}applyMatrix4(S){return this.a.applyMatrix4(S),this.b.applyMatrix4(S),this.c.applyMatrix4(S),this}getNormal(){var S=this.a.clone();return S.sub(this.b),y.subVectors(this.c,this.b),S.cross(y),S.normalize(),S}}}),"./src/WebGL/shapes/index.ts":((t,i,a)=>{a.r(i),a.d(i,{Cylinder:()=>y.Cylinder,Sphere:()=>n.Sphere,Triangle:()=>x.Triangle});var n=a("./src/WebGL/shapes/Sphere.ts"),y=a("./src/WebGL/shapes/Cylinder.ts"),x=a("./src/WebGL/shapes/Triangle.ts")}),"./src/autoload.ts":((t,i,a)=>{a.r(i),a.d(i,{autoinit:()=>S,autoload:()=>C,processing_autoinit:()=>E,viewers:()=>U});var n=a("./src/GLViewer.ts"),y=a("./src/ProteinSurface4.ts"),x=a("./src/utilities.ts"),k=a("./src/colors.ts"),S=!1,E=!1,U={};function C(B,W){var Y,Z,T;if(document.querySelector(".viewer_3Dmoljs")!=null&&(S=!0),S){E=!0,B=B??null;var l=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(f=>{var D=[],I=[],V="";f.style.position=="static"&&(f.style.position="relative");var K=null;if(T=null,f.dataset.pdb)D.push("https://files.rcsb.org/view/"+f.dataset.pdb+".pdb"),I.push("pdb");else if(f.dataset.cid)I.push("sdf"),D.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+f.dataset.cid+"/SDF?record_type=3d");else if(f.dataset.href||f.dataset.url){if(f.dataset.href?V=f.dataset.href:V=f.dataset.url,D.push(V),T=V.substring(V.lastIndexOf(".")+1),T=="gz"){let Xr=V.substring(0,V.lastIndexOf(".")).lastIndexOf(".");T=V.substring(Xr+1)}I.push(T);var A=V.substring(V.lastIndexOf("/")+1,V.lastIndexOf("."));A=="/"&&(A=V.substring(V.lastIndexOf("/")+1)),f.dataset[I[I.length-1]]=A}let L=f.dataset;for(Y in L)Y.substring(0,3)==="pdb"&&Y!=="pdb"?(D.push("https://files.rcsb.org/view/"+L[Y]+".pdb"),I.push("pdb")):Y.substring(0,4)==="href"&&Y!=="href"?(V=L[Y],D.push(V),I.push(V.substring(V.lastIndexOf(".")+1))):Y.substring(0,3)==="cid"&&Y!=="cid"&&(D.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+L[Y]+"/SDF?record_type=3d"),I.push("sdf"));var G={};f.dataset.options&&(G=(0,x.specStringToObject)(f.dataset.options));var ee=k.CC.color(f.dataset.backgroundcolor),ae=f.dataset.backgroundalpha;ae=ae==null?1:parseFloat(ae);var Se={line:{}};f.dataset.style&&(Se=(0,x.specStringToObject)(f.dataset.style));var $e={};f.dataset.select&&($e=(0,x.specStringToObject)(f.dataset.select));var qe=[],Pe=[],Ve=[],Ie={},Xe=null,et=f.dataset,tt=/style(.+)/,rt=/surface(.*)/,ze=/labelres(.*)/,lt=[];for(Z in et)Object.prototype.hasOwnProperty.call(et,Z)&&lt.push(Z);for(lt.sort(),Y=0;Y<lt.length;Y++){Z=lt[Y];var bt=tt.exec(Z),At,Vt,Yt;bt&&(At="select"+bt[1],Vt=(0,x.specStringToObject)(et[At]),Yt=(0,x.specStringToObject)(et[Z]),qe.push([Vt,Yt])),bt=rt.exec(Z),bt&&(At="select"+bt[1],Vt=(0,x.specStringToObject)(et[At]),Yt=(0,x.specStringToObject)(et[Z]),Pe.push([Vt,Yt])),bt=ze.exec(Z),bt&&(At="select"+bt[1],Vt=(0,x.specStringToObject)(et[At]),Yt=(0,x.specStringToObject)(et[Z]),Ve.push([Vt,Yt])),Z=="zoomto"&&(Ie=(0,x.specStringToObject)(et[Z])),Z=="spin"&&(Xe=(0,x.specStringToObject)(et[Z]))}var er=function(Xr){for(Xr.setStyle($e,Se),K&&K.createSelectionAndStyle($e,Se),Y=0;Y<qe.length;Y++){let fr=qe[Y][0]||{},Hr=qe[Y][1]||{line:{}};Xr.setStyle(fr,Hr),K&&K.createSelectionAndStyle($e,Se)}for(Y=0;Y<Pe.length;Y++){let fr=Pe[Y][0]||{},Hr=Pe[Y][1]||{};K?Xr.addSurface(y.SurfaceType.VDW,Hr,fr,fr).then(ya=>{K.loadSurface("VDW",fr,Hr,ya)}):Xr.addSurface(y.SurfaceType.VDW,Hr,fr,fr)}for(Y=0;Y<Ve.length;Y++){let fr=Ve[Y][0]||{},Hr=Ve[Y][1]||{};Xr.addResLabels(fr,Hr)}Xr.render(),Xr.zoomTo(Ie),Xe&&Xr.spin(Xe.axis,Xe.speed)};let lr=B;try{var yr=(0,x.specStringToObject)(f.dataset.config)||{};yr.backgroundColor===void 0&&(yr.backgroundColor=ee),yr.backgroundAlpha===void 0&&(yr.backgroundAlpha=ae),lr==null?lr=U[f.id||l++]=(0,n.createViewer)(f,yr):(lr.setBackgroundColor(ee,ae),lr.setConfig(yr),K&&K.initiateUI()),f.dataset.ui&&$3Dmol.StateManager&&(K=new $3Dmol.StateManager(lr))}catch(Xr){console.log(Xr),f.textContent="WebGL appears to be disabled."}if(D.length!=0){let Xr=0,fr=((Hr,ya)=>function(Ta){V=D[Xr];var ua=Hr.dataset.type||Hr.dataset.datatype||I[Xr];if(ya.addModel(Ta,ua,G),K){var Ua=Hr.dataset[I[Xr]];K.setModelTitle(Ua)}Xr+=1,Xr<D.length?(0,x.get)(D[Xr]).then(fr):(er(ya),Hr.dataset.callback&&(0,x.makeFunction)(Hr.dataset.callback)(ya),E=!1,W&&W(ya))})(f,lr);T&&T.endsWith("gz")?(0,x.getbin)(D[0]).then(fr):(0,x.get)(D[0]).then(fr)}else{if(f.dataset.element){var $r="#"+f.dataset.element,ia=document.querySelector($r),Sa=ia?ia.textContent:"";T=f.dataset.type||f.dataset.datatype,lr.addModel(Sa,T,G)}er(lr),f.dataset.callback&&(0,x.makeFunction)(f.dataset.callback)(lr),E=!1,W&&W(lr)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&C()}}),"./src/colors.ts":((t,i,a)=>{a.r(i),a.d(i,{CC:()=>y,Color:()=>n,builtinColorSchemes:()=>B,chains:()=>C,elementColors:()=>E,htmlColors:()=>x,residues:()=>U,ssColors:()=>k});class n{constructor(Y,Z,T){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof Y=="number"?(this.r=Y||0,this.g=Z||0,this.b=T||0,this):this.set(Y||0)}set(Y){return Y instanceof n?Y.clone():(typeof Y=="number"?this.setHex(Y):typeof Y=="object"&&(this.r=Y?.r||0,this.g=Y?.g||0,this.b=Y?.b||0),this)}setHex(Y){return Y=Math.floor(Y),this.r=(Y>>16&255)/255,this.g=(Y>>8&255)/255,this.b=(Y&255)/255,this}getHex(){var Y=Math.round(this.r*255),Z=Math.round(this.g*255),T=Math.round(this.b*255);return Y<<16|Z<<8|T}clone(){return new n(this.r,this.g,this.b)}copy(Y){return this.r=Y.r,this.g=Y.g,this.b=Y.b,this}scaled(){var Y={};return Y.r=Math.round(this.r*255),Y.g=Math.round(this.g*255),Y.b=Math.round(this.b*255),Y.a=1,Y}}class y{static color(Y){if(!Y)return y.cache[0];if(Y instanceof n)return Y;if(typeof Y=="number"&&typeof y.cache[Y]<"u")return y.cache[Y];if(Y&&Array.isArray(Y))return Y.map(y.color);let Z=y.getHex(Y),T=new n(Z);return y.cache[Z]=T,T}static getHex(Y){if(Array.isArray(Y))return Y.map(y.getHex);if(typeof Y=="string"){let Z=Y;if(!isNaN(parseInt(Z)))return parseInt(Z);if(Z=Z.trim(),Z.length==4&&Z[0]=="#"&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),Z.length==7&&Z[0]=="#")return parseInt(Z.substring(1),16);let T=y.rgbRegEx.exec(Z);if(T){T[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let f=0;for(let D=2;D<5;D++){f*=256;let I=T[D].endsWith("%")?255*parseFloat(T[D])/100:parseFloat(T[D]);f+=Math.round(I)}return f}let l=x[Z.toLowerCase()];return l!==void 0?l:(console.error("color not found",Y.toLowerCase(),x),0)}return Y}}y.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,y.cache={0:new n(0)};const x={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},k={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},S={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},E={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:S,defaultColors:Object.assign({},S),greenCarbon:Object.assign(Object.assign({},S),{C:65280}),cyanCarbon:Object.assign(Object.assign({},S),{C:65535}),magentaCarbon:Object.assign(Object.assign({},S),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},S),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},S),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},S),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},S),{C:8388736}),blueCarbon:Object.assign(Object.assign({},S),{C:255})},U={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},C={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},B={ssPyMol:{prop:"ss",map:k.pyMol},ssJmol:{prop:"ss",map:k.Jmol},Jmol:{prop:"elem",map:E.Jmol},amino:{prop:"resn",map:U.amino},shapely:{prop:"resn",map:U.shapely},nucleic:{prop:"resn",map:U.nucleic},chain:{prop:"chain",map:C.atom},rasmol:{prop:"elem",map:E.rasmol},default:{prop:"elem",map:E.defaultColors},greenCarbon:{prop:"elem",map:E.greenCarbon},chainHetatm:{prop:"chain",map:C.hetatm},cyanCarbon:{prop:"elem",map:E.cyanCarbon},magentaCarbon:{prop:"elem",map:E.magentaCarbon},purpleCarbon:{prop:"elem",map:E.purpleCarbon},whiteCarbon:{prop:"elem",map:E.whiteCarbon},orangeCarbon:{prop:"elem",map:E.orangeCarbon},yellowCarbon:{prop:"elem",map:E.yellowCarbon},blueCarbon:{prop:"elem",map:E.blueCarbon}}}),"./src/exporter.js":(t=>{typeof t.exports=="object"&&(t.exports=window.$3Dmol)}),"./src/glcartoon.ts":((t,i,a)=>{a.r(i),a.d(i,{drawCartoon:()=>$e,subdivide_spline:()=>C});var n=a("./src/WebGL/math/index.ts"),y=a("./src/WebGL/shapes/index.ts"),x=a("./src/WebGL/index.ts"),k=a("./src/Gradient.ts"),S=a("./src/colors.ts"),E=a("./src/GLDraw.ts"),U=a("./src/utilities.ts");function C(qe,Pe){var Ve=[],Ie=qe;Ie=[],Ie.push(qe[0]);var Xe,et,tt,rt,ze,lt,bt,At,Vt;for(Xe=1,et=qe.length-1;Xe<et;Xe++)if(ze=qe[Xe],lt=qe[Xe+1],ze.smoothen){var Yt=new n.Vector3((ze.x+lt.x)/2,(ze.y+lt.y)/2,(ze.z+lt.z)/2);Yt.atom=ze.atom,Ie.push(Yt)}else Ie.push(ze);for(Ie.push(qe[qe.length-1]),Xe=-1,tt=Ie.length;Xe<=tt-3;Xe++)if(rt=Ie[Xe===-1?0:Xe],ze=Ie[Xe+1],lt=Ie[Xe+2],bt=Ie[Xe===tt-3?tt-1:Xe+3],At=new n.Vector3().subVectors(lt,rt).multiplyScalar(.5),Vt=new n.Vector3().subVectors(bt,ze).multiplyScalar(.5),!lt.skip)for(var er=0;er<Pe;er++){var lr=1/Pe*er,yr=ze.x+lr*At.x+lr*lr*(-3*ze.x+3*lt.x-2*At.x-Vt.x)+lr*lr*lr*(2*ze.x-2*lt.x+At.x+Vt.x),$r=ze.y+lr*At.y+lr*lr*(-3*ze.y+3*lt.y-2*At.y-Vt.y)+lr*lr*lr*(2*ze.y-2*lt.y+At.y+Vt.y),ia=ze.z+lr*At.z+lr*lr*(-3*ze.z+3*lt.z-2*At.z-Vt.z)+lr*lr*lr*(2*ze.z-2*lt.z+At.z+Vt.z),Sa=new n.Vector3(yr,$r,ia);er<Pe/2?Sa.atom=ze.atom:Sa.atom=lt.atom,Ve.push(Sa)}return Ve.push(Ie[Ie.length-1]),Ve}const B=.5,W=1.3,Y=.8,Z=.4,T=.4;function l(qe,Pe,Ve,Ie){for(var Xe,et,tt,rt,ze=0,lt=Pe.length;ze<lt;ze++){rt=Math.round(ze*(Ie.length-1)/lt),tt=S.CC.color(Ie[rt]);var bt=qe.updateGeoGroup(2),At=bt.vertexArray,Vt=bt.colorArray,Yt=bt.faceArray;Xe=bt.vertices,et=Xe*3,At[et]=Pe[ze].x,At[et+1]=Pe[ze].y,At[et+2]=Pe[ze].z,At[et+3]=Ve[ze].x,At[et+4]=Ve[ze].y,At[et+5]=Ve[ze].z;for(var er=0;er<6;++er)Vt[et+3*er]=tt.r,Vt[et+1+3*er]=tt.g,Vt[et+2+3*er]=tt.b;if(ze>0){var lr=[Xe,Xe+1,Xe-1,Xe-2],yr=bt.faceidx;Yt[yr]=lr[0],Yt[yr+1]=lr[1],Yt[yr+2]=lr[3],Yt[yr+3]=lr[1],Yt[yr+4]=lr[2],Yt[yr+5]=lr[3],bt.faceidx+=6}bt.vertices+=2}}function f(qe,Pe,Ve,Ie,Xe,et,tt){var rt,ze,lt,bt;if(lt=Pe.length,lt<2||Pe[0].length<2)return;for(rt=0;rt<lt;rt++)Pe[rt]=C(Pe[rt],Ie);if(bt=Pe[0].length,!Xe)return l(qe,Pe[0],Pe[lt-1],Ve);var At,Vt,Yt,er,lr,yr,$r=[],ia=[],Sa=[];for(ze=0;ze<lt;ze++)$r.push(.25+1.5*Math.sqrt((lt-1)*ze-Math.pow(ze,2))/(lt-1)),ia.push(.5),Sa.push(2*(Math.pow(ze/lt,2)-ze/lt)+.6);var Xr=[];for(ze=0;ze<lt*2-1;ze++)Xr[ze]=[ze,ze+1,ze+1-2*lt,ze-2*lt];Xr[lt*2-1]=[ze,ze+1-2*lt,ze+1-4*lt,ze-2*lt];var fr,Hr,ya,Ta,ua,Ua,Ya,Ia,Na,Ra;let oa=qe.updateGeoGroup();for(rt=0;rt<bt;rt++){let Gt=qe.groups,ur=!1;oa=qe.updateGeoGroup(2*lt),Gt!=qe.groups&&rt>0&&(rt=rt-1,ur=!0),Ua=Math.round(rt*(Ve.length-1)/bt),ua=S.CC.color(Ve[Ua]),lr=Yt,yr=er,Yt=[],er=[],At=[],Pe[0][rt].atom!==void 0&&(Ta=Pe[0][rt].atom,tt==="oval"?Vt=$r:tt==="rectangle"?Vt=ia:tt==="parabola"&&(Vt=Sa)),Vt||(Vt=ia);var rn,Za;for(ze=0;ze<lt;ze++)rt<bt-1?rn=Pe[ze][rt+1].clone().sub(Pe[ze][rt]):rn=Pe[ze][rt-1].clone().sub(Pe[ze][rt]).negate(),ze<lt-1?Za=Pe[ze+1][rt].clone().sub(Pe[ze][rt]):Za=Pe[ze-1][rt].clone().sub(Pe[ze][rt]).negate(),At[ze]=Za.cross(rn).normalize().multiplyScalar(Xe*Vt[ze]);for(ze=0;ze<lt;ze++)Yt[ze]=Pe[ze][rt].clone().add(At[ze].clone().negate());for(ze=0;ze<lt;ze++)er[ze]=Pe[ze][rt].clone().add(At[ze]);for(Ya=oa.vertexArray,Ia=oa.colorArray,Na=oa.faceArray,fr=oa.vertices,Hr=fr*3,ze=0;ze<lt;ze++)Ya[Hr+3*ze+0]=Yt[ze].x,Ya[Hr+3*ze+1]=Yt[ze].y,Ya[Hr+3*ze+2]=Yt[ze].z;for(ze=0;ze<lt;ze++)Ya[Hr+3*ze+0+3*lt]=er[lt-1-ze].x,Ya[Hr+3*ze+1+3*lt]=er[lt-1-ze].y,Ya[Hr+3*ze+2+3*lt]=er[lt-1-ze].z;for(ze=0;ze<2*lt;++ze)Ia[Hr+3*ze+0]=ua.r,Ia[Hr+3*ze+1]=ua.g,Ia[Hr+3*ze+2]=ua.b;if(rt>0&&!ur){for(ze=0;ze<lt*2;ze++)Ra=[fr+Xr[ze][0],fr+Xr[ze][1],fr+Xr[ze][2],fr+Xr[ze][3]],ya=oa.faceidx,Na[ya]=Ra[0],Na[ya+1]=Ra[1],Na[ya+2]=Ra[3],Na[ya+3]=Ra[1],Na[ya+4]=Ra[2],Na[ya+5]=Ra[3],oa.faceidx+=6;if(Ta.clickable||Ta.hoverable){var Nt=[];Nt.push(new y.Triangle(lr[0],Yt[0],Yt[lt-1])),Nt.push(new y.Triangle(lr[0],Yt[lt-1],lr[lt-1])),Nt.push(new y.Triangle(lr[lt-1],Yt[lt-1],er[lt-1])),Nt.push(new y.Triangle(lr[lt-1],er[lt-1],yr[lt-1])),Nt.push(new y.Triangle(er[0],yr[0],yr[lt-1])),Nt.push(new y.Triangle(er[lt-1],er[0],yr[lt-1])),Nt.push(new y.Triangle(Yt[0],lr[0],yr[0])),Nt.push(new y.Triangle(er[0],Yt[0],yr[0]));for(ze in Nt)Ta.intersectionShape.triangle.push(Nt[ze])}}oa.vertices+=2*lt}for(Ya=oa.vertexArray,Ia=oa.colorArray,Na=oa.faceArray,fr=oa.vertices,Hr=fr*3,ya=oa.faceidx,rt=0;rt<lt-1;rt++)Ra=[rt,rt+1,2*lt-2-rt,2*lt-1-rt],ya=oa.faceidx,Na[ya]=Ra[0],Na[ya+1]=Ra[1],Na[ya+2]=Ra[3],Na[ya+3]=Ra[1],Na[ya+4]=Ra[2],Na[ya+5]=Ra[3],oa.faceidx+=6;for(rt=0;rt<lt-1;rt++)Ra=[fr-1-rt,fr-2-rt,fr-2*lt+rt+1,fr-2*lt+rt],ya=oa.faceidx,Na[ya]=Ra[0],Na[ya+1]=Ra[1],Na[ya+2]=Ra[3],Na[ya+3]=Ra[1],Na[ya+4]=Ra[2],Na[ya+5]=Ra[3],oa.faceidx+=6}function D(qe,Pe,Ve,Ie,Xe,et){if(!(Pe.length<2)){var tt,rt;if(tt=Pe[0],rt=Pe[Pe.length-1],tt=C(tt,Ie),rt=C(rt,Ie),!Xe)return l(qe,tt,rt,Ve);var ze=[],lt,bt,At,Vt,Yt,er=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],lr,yr,$r,ia,Sa,Xr,fr,Hr,ya,Ta,ua,Ua,Ya,Ia,Na,Ra,oa;for(Hr=0,ya=tt.length;Hr<ya;Hr++){if(Sa=Math.round(Hr*(Ve.length-1)/ya),ia=S.CC.color(Ve[Sa]),ze.push(bt=tt[Hr]),ze.push(bt),ze.push(At=rt[Hr]),ze.push(At),Hr<ya-1){var rn=tt[Hr+1].clone().sub(tt[Hr]),Za=rt[Hr].clone().sub(tt[Hr]);lt=Za.cross(rn).normalize().multiplyScalar(Xe)}for(ze.push(Vt=tt[Hr].clone().add(lt)),ze.push(Vt),ze.push(Yt=rt[Hr].clone().add(lt)),ze.push(Yt),bt.atom!==void 0&&(Xr=bt.atom),Ia=qe.updateGeoGroup(8),Na=Ia.vertexArray,Ra=Ia.colorArray,oa=Ia.faceArray,lr=Ia.vertices,yr=lr*3,Na[yr]=bt.x,Na[yr+1]=bt.y,Na[yr+2]=bt.z,Na[yr+3]=bt.x,Na[yr+4]=bt.y,Na[yr+5]=bt.z,Na[yr+6]=At.x,Na[yr+7]=At.y,Na[yr+8]=At.z,Na[yr+9]=At.x,Na[yr+10]=At.y,Na[yr+11]=At.z,Na[yr+12]=Vt.x,Na[yr+13]=Vt.y,Na[yr+14]=Vt.z,Na[yr+15]=Vt.x,Na[yr+16]=Vt.y,Na[yr+17]=Vt.z,Na[yr+18]=Yt.x,Na[yr+19]=Yt.y,Na[yr+20]=Yt.z,Na[yr+21]=Yt.x,Na[yr+22]=Yt.y,Na[yr+23]=Yt.z,Ta=0;Ta<8;++Ta)Ra[yr+3*Ta]=ia.r,Ra[yr+1+3*Ta]=ia.g,Ra[yr+2+3*Ta]=ia.b;if(Hr>0){var Nt=fr!==void 0&&Xr!==void 0&&fr.serial!==Xr.serial;for(Ta=0;Ta<4;Ta++){var Gt=[lr+er[Ta][0],lr+er[Ta][1],lr+er[Ta][2],lr+er[Ta][3]];if($r=Ia.faceidx,oa[$r]=Gt[0],oa[$r+1]=Gt[1],oa[$r+2]=Gt[3],oa[$r+3]=Gt[1],oa[$r+4]=Gt[2],oa[$r+5]=Gt[3],Ia.faceidx+=6,Xr.clickable||fr.clickable||Xr.hoverable||fr.hoverable){var ur=ze[Gt[3]].clone(),Qr=ze[Gt[0]].clone(),Dr=ze[Gt[2]].clone(),Ea=ze[Gt[1]].clone();if(ur.atom=ze[Gt[3]].atom||null,Dr.atom=ze[Gt[2]].atom||null,Qr.atom=ze[Gt[0]].atom||null,Ea.atom=ze[Gt[1]].atom||null,Nt){var da=ur.clone().add(Qr).multiplyScalar(.5),Tt=Dr.clone().add(Ea).multiplyScalar(.5),Lr=ur.clone().add(Ea).multiplyScalar(.5);Ta%2===0?((fr.clickable||fr.hoverable)&&(ua=new y.Triangle(da,Lr,ur),Ua=new y.Triangle(Tt,Dr,Lr),Ya=new y.Triangle(Lr,Dr,ur),fr.intersectionShape.triangle.push(ua),fr.intersectionShape.triangle.push(Ua),fr.intersectionShape.triangle.push(Ya)),(Xr.clickable||Xr.hoverable)&&(ua=new y.Triangle(Qr,Ea,Lr),Ua=new y.Triangle(Ea,Tt,Lr),Ya=new y.Triangle(Qr,Lr,da),Xr.intersectionShape.triangle.push(ua),Xr.intersectionShape.triangle.push(Ua),Xr.intersectionShape.triangle.push(Ya))):((Xr.clickable||Xr.hoverable)&&(ua=new y.Triangle(da,Lr,ur),Ua=new y.Triangle(Tt,Dr,Lr),Ya=new y.Triangle(Lr,Dr,ur),Xr.intersectionShape.triangle.push(ua),Xr.intersectionShape.triangle.push(Ua),Xr.intersectionShape.triangle.push(Ya)),(fr.clickable||fr.hoverable)&&(ua=new y.Triangle(Qr,Ea,Lr),Ua=new y.Triangle(Ea,Tt,Lr),Ya=new y.Triangle(Qr,Lr,da),fr.intersectionShape.triangle.push(ua),fr.intersectionShape.triangle.push(Ua),fr.intersectionShape.triangle.push(Ya)))}else(Xr.clickable||Xr.hoverable)&&(ua=new y.Triangle(Qr,Ea,ur),Ua=new y.Triangle(Ea,Dr,ur),Xr.intersectionShape.triangle.push(ua),Xr.intersectionShape.triangle.push(Ua))}}}Ia.vertices+=8,fr=Xr}var Gr=ze.length-8;for(Ia=qe.updateGeoGroup(8),Na=Ia.vertexArray,Ra=Ia.colorArray,oa=Ia.faceArray,lr=Ia.vertices,yr=lr*3,$r=Ia.faceidx,Hr=0;Hr<4;Hr++){ze.push(ze[Hr*2]),ze.push(ze[Gr+Hr*2]);var wa=ze[Hr*2],Rr=ze[Gr+Hr*2];Na[yr+6*Hr]=wa.x,Na[yr+1+6*Hr]=wa.y,Na[yr+2+6*Hr]=wa.z,Na[yr+3+6*Hr]=Rr.x,Na[yr+4+6*Hr]=Rr.y,Na[yr+5+6*Hr]=Rr.z,Ra[yr+6*Hr]=ia.r,Ra[yr+1+6*Hr]=ia.g,Ra[yr+2+6*Hr]=ia.b,Ra[yr+3+6*Hr]=ia.r,Ra[yr+4+6*Hr]=ia.g,Ra[yr+5+6*Hr]=ia.b}Gr+=8,ua=[lr,lr+2,lr+6,lr+4],Ua=[lr+1,lr+5,lr+7,lr+3],oa[$r]=ua[0],oa[$r+1]=ua[1],oa[$r+2]=ua[3],oa[$r+3]=ua[1],oa[$r+4]=ua[2],oa[$r+5]=ua[3],oa[$r+6]=Ua[0],oa[$r+7]=Ua[1],oa[$r+8]=Ua[3],oa[$r+9]=Ua[1],oa[$r+10]=Ua[2],oa[$r+11]=Ua[3],Ia.faceidx+=12,Ia.vertices+=8}}function I(qe,Pe,Ve,Ie,Xe,et,tt){(!tt||tt==="default")&&(tt="rectangle"),tt==="edged"?D(qe,Pe,Ve,Ie,Xe):(tt==="rectangle"||tt==="oval"||tt==="parabola")&&f(qe,Pe,Ve,Ie,Xe,et,tt)}function V(qe){return qe&&qe.elem==="C"&&qe.atom==="CA"}function K(qe,Pe){if(qe&&Pe&&qe.chain===Pe.chain){if(!qe.hetflag&&!Pe.hetflag&&qe.reschain===Pe.reschain&&(qe.resi===Pe.resi||qe.resi===Pe.resi-1))return!0;if(qe.resi<Pe.resi){var Ve=qe.x-Pe.x,Ie=qe.y-Pe.y,Xe=qe.z-Pe.z,et=Ve*Ve+Ie*Ie+Xe*Xe;if(qe.atom=="CA"&&Pe.atom=="CA"&&et<16||(qe.atom=="P"||Pe.atom=="P")&&et<64)return!0}}return!1}function A(qe,Pe,Ve,Ie,Xe){if(!(Pe==null||Pe.vertices==0)){Xe&&(Pe.initTypedArrays(),Pe.setUpNormals());var et=new x.MeshDoubleLambertMaterial;et.vertexColors=x.Coloring.FaceColors,typeof Ve=="number"&&Ve>=0&&Ve<1&&(et.transparent=!0,et.opacity=Ve),et.outline=Ie;var tt=new x.Mesh(Pe,et);qe.add(tt)}}function L(qe,Pe,Ve,Ie,Xe,et,tt,rt,ze){var lt,bt,At,Vt,Yt,er;if(!(!Ie||!Xe||!tt)){var lr=Xe.sub(Ie);lr.normalize();var yr=rt[ze];for(bt=ze+1;bt<rt.length&&(yr=rt[bt],yr.atom!=tt.atom);bt++);if(yr=yr?new n.Vector3(yr.x,yr.y,yr.z):new n.Vector3(0,0,0),yr.sub(Ie),tt.ss==="arrow start"){var $r=yr.clone().multiplyScalar(.3).cross(Xe);Ie.add($r);var ia=yr.clone().cross(lr).normalize();lr.rotateAboutVector(ia,.43)}for(tt.style.cartoon.ribbon?lt=tt.style.cartoon.thickness||Z:tt.style.cartoon.width?lt=tt.style.cartoon.width:tt.ss==="c"?tt.atom==="P"?lt=Y:lt=B:tt.ss==="arrow start"?(lt=W,Yt=!0):tt.ss==="arrow end"||tt.ss==="h"&&tt.style.cartoon.tubes||tt.ss==="tube start"?lt=B:lt=W,et!=null&&lr.dot(et)<0&&lr.negate(),lr.multiplyScalar(lt),bt=0;bt<Pe;bt++)At=-1+bt*2/(Pe-1),Vt=new n.Vector3(Ie.x+At*lr.x,Ie.y+At*lr.y,Ie.z+At*lr.z),Vt.atom=tt,tt.ss==="s"&&(Vt.smoothen=!0),qe[bt].push(Vt);if(Yt)for(lr.multiplyScalar(2),bt=0;bt<Pe;bt++)At=-1+bt*2/(Pe-1),Vt=new n.Vector3(Ie.x+At*lr.x,Ie.y+At*lr.y,Ie.z+At*lr.z),Vt.atom=tt,Vt.smoothen=!1,Vt.skip=!0,qe[bt].push(Vt);return er=tt.style.cartoon.style||"default",qe.style?qe.style!=er&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),qe.style="default"):qe.style=er,(tt.ss==="arrow start"||tt.ss==="arrow end")&&(tt.ss="s"),Yt}}const G={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},ee={DA:!0,DG:!0,A:!0,G:!0},ae={DT:!0,DC:!0,U:!0,C:!0,T:!0},Se={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function $e(qe,Pe,Ve,Ie=10){let Xe=Ie,et=Ie;var tt,rt,ze,lt,bt,At,Vt,Yt,er,lr,yr,$r,ia,Sa,Xr,fr,Hr,ya,Ta=new x.Geometry(!0),ua=new x.Geometry(!0),Ua=[],Ya=[],Ia=1,Na=!1,Ra={};for(var oa in k.Gradient.builtinGradients)k.Gradient.builtinGradients.hasOwnProperty(oa)&&(Ra[oa]=new k.Gradient.builtinGradients[oa](Ve[1],Ve[0]));var rn=function(Pa,Qe){return Ve&&Qe.color==="spectrum"?Qe.colorscheme in Ra?Ra[Qe.colorscheme].valueToHex(Pa.resi):Ra.sinebow.valueToHex(Pa.resi):(0,U.getColorFromStyle)(Pa,Qe).getHex()};for(Yt=0;Yt<Xe;Yt++)Ya[Yt]=[];var Za=!1,Nt=!1,Gt=[];for(Yt in Pe){if(lt=Pe[Yt],lt.elem==="C"&&lt.atom==="CA"){var ur=K(ze,lt);ur&&lt.ss==="s"?Za=!0:Za&&(ze&&rt&&ze.style.cartoon.arrows&&rt.style.cartoon.arrows&&(ze.ss="arrow end",rt.ss="arrow start"),Za=!1),ur&&(ze.ss==="h"||ze.ss=="tube start")&&ze.style.cartoon.tubes?!Nt&&ze.ss!="tube start"&&lt.style.cartoon.tubes&&(lt.ss="tube start",Nt=!0):Nt&&(ze.ss==="tube start"?ze.ss="tube end":rt&&rt.style.cartoon.tubes&&(rt.ss="tube end"),Nt=!1),rt=ze,ze=lt}lt&&lt.atom in G&&Gt.push(lt)}Nt&&ze.style.cartoon.tubes&&(ze.ss="tube end",Nt=!1);var Qr=function(Pa){Ya[0].length>0&&I(ua,Ya,Ua,et,Vt,Ia,Ya.style);var Qe=[],ea=null;if(Pa){for(Yt=0;Yt<Xe;Yt++)Qe[Yt]=Ya[Yt][Ya[Yt].length-1];ea=Ua[Ua.length-1]}for(Ya=[],Yt=0;Yt<Xe;Yt++)Ya[Yt]=[];if(Ua=[],Pa){for(Yt=0;Yt<Xe;Yt++)Ya[Yt].push(Qe[Yt]);Ua.push(ea)}A(qe,ua,Ia,Na,!0),A(qe,Ta,Ia,Na,!1),ua=new x.Geometry(!0),Ta=new x.Geometry(!0)};ze=void 0;let Dr=[];for(var Ea=0;Ea<Gt.length;Ea++){lt=Gt[Ea];var da=lt.resn.trim(),Tt=da in Se;if(Ia=1,tt=lt.style.cartoon,ze&&ze.style.cartoon&&(Ia=ze.style.cartoon.opacity),ze&&ze.style.cartoon&&ze.style.cartoon.outline&&(Na=ze.style.cartoon.outline),ze&&ze.style.cartoon&&(!lt.style.cartoon||ze.style.cartoon.opacity!=lt.style.cartoon.opacity)&&Qr(ze.chain==lt.chain),ze&&lt&&!K(ze,lt)&&ze.chain&&ze.chain==lt.chain&&!ze.hetflag&&!lt.hetflag&&ze.reschain+1==lt.reschain&&Dr.push([ze,lt]),tt.style==="trace"){if(!lt.hetflag&&(lt.elem==="C"&&lt.atom==="CA"||Tt&&lt.atom==="P"||lt.atom==="BB")){if(At=rn(lt,tt),(0,U.isNumeric)(tt.thickness)?Vt=tt.thickness:Vt=Z,K(ze,lt))if(At==bt){var Lr=S.CC.color(At);E.GLDraw.drawCylinder(Ta,ze,lt,Vt,Lr,2,2)}else{var Gr=new n.Vector3().addVectors(ze,lt).multiplyScalar(.5),wa=S.CC.color(bt),Rr=S.CC.color(At);E.GLDraw.drawCylinder(Ta,ze,Gr,Vt,wa,2,0),E.GLDraw.drawCylinder(Ta,Gr,lt,Vt,Rr,0,2)}if((lt.clickable===!0||lt.hoverable)&&lt.intersectionShape!==void 0){var ga=new n.Vector3(lt.x,lt.y,lt.z);lt.intersectionShape.sphere.push(new y.Sphere(ga,Vt))}ze=lt,bt=At}}else{if(V(lt)||Tt&&(lt.atom==="P"||lt.atom.indexOf("O5")==0)){if(ya)if(lt.ss==="tube end")ya=!1,Hr=new n.Vector3(lt.x,lt.y,lt.z),E.GLDraw.drawCylinder(Ta,fr,Hr,2,S.CC.color(bt),1,1),lt.ss="h";else if(ze.chain!=lt.chain||ze.ss==="tube end")ya=!1,ze.ss="h",Hr=new n.Vector3(ze.x,ze.y,ze.z),E.GLDraw.drawCylinder(Ta,fr,Hr,2,S.CC.color(bt),1,1);else continue;if(ze&&(!K(ze,lt)||ze.ss==="tube start")){for(ze.ss==="tube start"&&(ya=!0,fr=new n.Vector3(ze.x,ze.y,ze.z),ze.ss="h"),Xr&&($r?Sa=new n.Vector3().addVectors(ze,$r).multiplyScalar(.5):Sa=new n.Vector3(ze.x,ze.y,ze.z),E.GLDraw.drawCylinder(Ta,Sa,Xr,T,S.CC.color(Xr.color),0,2),L(Ya,Xe,!0,$r,ia,yr,ze,Gt,Ea),Ua.push(At),Sa=null,Xr=null),Ya[0].length>0&&I(ua,Ya,Ua,et,Vt,Ia,Ya.style),Ya=[],Yt=0;Yt<Xe;Yt++)Ya[Yt]=[];Ua=[]}if(ze===void 0||ze.rescode!=lt.rescode||ze.resi!=lt.resi){if(Xr&&ze!=null){Sa=new n.Vector3().addVectors(ze,lt).multiplyScalar(.5);var kt=Sa.clone().sub(Xr).multiplyScalar(.02);Sa.add(kt),E.GLDraw.drawCylinder(Ta,Sa,Xr,T,S.CC.color(Xr.color),0,2),Sa=null,Xr=null}At=rn(lt,tt),Ua.push(At),(0,U.isNumeric)(tt.thickness)?Vt=tt.thickness:Vt=Z,ze=lt,er=new n.Vector3(ze.x,ze.y,ze.z),er.resi=ze.resi,bt=At}(lt.clickable===!0||lt.hoverable===!0)&&(lt.intersectionShape===void 0||lt.intersectionShape.triangle===void 0)&&(lt.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else ze!=null&&(V(ze)&&lt.atom==="O"||Tt&&ze.atom==="P"&&(lt.atom==="OP2"||lt.atom==="O2P")||Tt&&ze.atom.indexOf("O5")==0&&lt.atom.indexOf("C5")==0)?(lr=new n.Vector3(lt.x,lt.y,lt.z),lr.resi=lt.resi,(lt.atom==="OP2"||lt.atom==="O2P")&&(ia=new n.Vector3(lt.x,lt.y,lt.z))):Tt&&lt.atom.indexOf("O3")==0?$r=new n.Vector3(lt.x,lt.y,lt.z):(lt.atom==="N1"&&da in ee||lt.atom==="N3"&&da in ae)&&(Xr=new n.Vector3(lt.x,lt.y,lt.z),Xr.color=(0,U.getColorFromStyle)(lt,tt).getHex());lr&&er&&lr.resi===er.resi&&(L(Ya,Xe,!0,er,lr,yr,ze,Gt,Ea),yr=lr,er=null,lr=null,Ua.push(At))}}Xr&&($r?Sa=new n.Vector3().addVectors(ze,$r).multiplyScalar(.5):Sa=new n.Vector3(ze.x,ze.y,ze.z),E.GLDraw.drawCylinder(Ta,Sa,Xr,T,S.CC.color(Xr.color),0,2),L(Ya,Xe,!0,$r,ia,yr,ze,Gt,Ea),Ua.push(At)),Qr(!1);var ha=function(Pa,Qe){if(Pa.style.cartoon.gapcutoff&&Pa.style.cartoon.gapcutoff==Qe.style.cartoon.gapcutoff){let Vr=Pa.style.cartoon.gapcutoff,It=Qe.resi-Pa.resi;if(It>0&&It<Vr){let hr=.25,sa=Qe.x-Pa.x,Qa=Qe.y-Pa.y,an=Qe.z-Pa.z,sn=Math.sqrt(sa*sa+Qa*Qa+an*an),An=sn/(2*It),Ti=new n.Vector3(Pa.x,Pa.y,Pa.z),zn=sn/An,Ln=new n.Vector3((Qe.x-Pa.x)/zn,(Qe.y-Pa.y)/zn,(Qe.z-Pa.z)/zn);Ti.add({x:Ln.x/2,y:Ln.y/2,z:Ln.z/2});let Hn=Ti.clone().add(Ln);Ln.multiplyScalar(2);let bi=(0,U.extend)({},Pa);for(var ea=0;ea<It;ea++){bi.resi+=1;let li=rn(bi,bi.style.cartoon);E.GLDraw.drawCylinder(Ta,Ti,Hn,hr,S.CC.color(li),E.CAP.FLAT,E.CAP.FLAT),Ti.add(Ln),Hn.add(Ln)}Qr(!1)}}};for(let Pa of Dr)ha(Pa[0],Pa[1])}}),"./src/index.ts":((t,i,a)=>{a.r(i),a.d(i,{CAP:()=>n.CAP,CC:()=>n.CC,CONTEXTS_PER_VIEWPORT:()=>n.CONTEXTS_PER_VIEWPORT,Color:()=>n.Color,CustomLinear:()=>n.CustomLinear,Cylinder:()=>n.Cylinder,GLDraw:()=>n.GLDraw,GLModel:()=>n.GLModel,GLShape:()=>n.GLShape,GLViewer:()=>n.GLViewer,GLVolumetricRender:()=>n.GLVolumetricRender,Gradient:()=>n.Gradient,GradientType:()=>n.GradientType,Label:()=>n.Label,LabelCount:()=>n.LabelCount,MarchingCube:()=>n.MarchingCube,MarchingCubeInitializer:()=>n.MarchingCubeInitializer,Matrix3:()=>n.Matrix3,Matrix4:()=>n.Matrix4,Parsers:()=>n.Parsers,PausableTimer:()=>n.PausableTimer,PointGrid:()=>n.PointGrid,ProteinSurface:()=>n.ProteinSurface,Quaternion:()=>n.Quaternion,ROYGB:()=>n.ROYGB,RWB:()=>n.RWB,Ray:()=>n.Ray,Sinebow:()=>n.Sinebow,Sphere:()=>n.Sphere,SurfaceType:()=>n.SurfaceType,Triangle:()=>n.Triangle,Vector2:()=>n.Vector2,Vector3:()=>n.Vector3,VolumeData:()=>n.VolumeData,adjustVolumeStyle:()=>n.adjustVolumeStyle,applyPartialCharges:()=>n.applyPartialCharges,autoinit:()=>n.autoinit,autoload:()=>n.autoload,base64ToArray:()=>n.base64ToArray,bondLength:()=>n.bondLength,builtinColorSchemes:()=>n.builtinColorSchemes,builtinGradients:()=>n.builtinGradients,chains:()=>n.chains,clamp:()=>n.clamp,conversionMatrix3:()=>n.conversionMatrix3,createStereoViewer:()=>n.createStereoViewer,createViewer:()=>n.createViewer,createViewerGrid:()=>n.createViewerGrid,deepCopy:()=>n.deepCopy,degToRad:()=>n.degToRad,download:()=>n.download,drawCartoon:()=>n.drawCartoon,elementColors:()=>n.elementColors,extend:()=>n.extend,get:()=>n.get,getAtomProperty:()=>n.getAtomProperty,getColorFromStyle:()=>n.getColorFromStyle,getElement:()=>n.getElement,getExtent:()=>n.getExtent,getGradient:()=>n.getGradient,getPropertyRange:()=>n.getPropertyRange,getbin:()=>n.getbin,htmlColors:()=>n.htmlColors,inflateString:()=>n.inflateString,isEmptyObject:()=>n.isEmptyObject,isNumeric:()=>n.isNumeric,makeFunction:()=>n.makeFunction,mergeGeos:()=>n.mergeGeos,normalizeValue:()=>n.normalizeValue,partialCharges:()=>n.partialCharges,processing_autoinit:()=>n.processing_autoinit,residues:()=>n.residues,setBondLength:()=>n.setBondLength,setSyncSurface:()=>n.setSyncSurface,specStringToObject:()=>n.specStringToObject,splitMesh:()=>n.splitMesh,ssColors:()=>n.ssColors,subdivide_spline:()=>n.subdivide_spline,syncSurface:()=>n.syncSurface,viewers:()=>n.viewers});var n=a("./src/3Dmol.ts");window&&(window.$3Dmol=i)}),"./src/parsers/BCIF.ts":((t,i,a)=>{a.r(i),a.d(i,{BCIF:()=>Z});var n=a("./src/utilities.ts"),y=a("./src/parsers/utils/computeSecondaryStructure.ts"),x=a("./src/parsers/utils/processSymmetries.ts"),k=a("./src/parsers/cifutils/category.ts"),S=a("./src/parsers/utils/assignPDBBonds.ts"),E=a("./src/WebGL/index.ts"),U=a("./src/parsers/utils/isEmpty.ts"),C=a("./src/vendor/mmtf.js");class B{constructor(l){if(this.C={},l){let f=l.getField("comp_id"),D=l.getField("atom_id_1"),I=l.getField("atom_id_2"),V=l.getField("value_order");for(let K=0;K<f.length;K++){let A=f[K],L=D[K],G=I[K],ee=V[K],ae=1;ee=="doub"?ae=2:ee=="trip"&&(ae=3),this.C[A]==null&&(this.C[A]={}),this.C[A][L]==null&&(this.C[A][L]={}),this.C[A][G]==null&&(this.C[A][G]={}),this.C[A][L][G]=ae,this.C[A][G][L]=ae}}}order(l,f,D){return this.C[l]!==void 0&&this.C[l][f]!==void 0&&this.C[l][f][D]!==void 0?this.C[l][f][D]:0}}class W{constructor(l){if(this.C=[],l){let f=l.getField("conn_type_id"),D=l.getField("ptnr1_label_asym_id"),I=l.getField("ptnr1_label_seq_id"),V=l.getField("ptnr1_label_comp_id"),K=l.getField("ptnr1_label_atom_id"),A=l.getField("ptnr2_label_asym_id"),L=l.getField("ptnr2_label_seq_id"),G=l.getField("ptnr2_label_comp_id"),ee=l.getField("ptnr2_label_atom_id"),ae=l.getField("pdbx_value_order");for(let Se=0;Se<f.length;Se++)if(f[Se]=="disulf"||f[Se]=="covale"){let $e=ae?ae[Se]==""?1:parseInt(ae[Se]):1;this.C.push([[D[Se],I[Se],V[Se],K[Se]],[A[Se],L[Se],G[Se],ee[Se]],$e])}}}}class Y{constructor(){this.R={}}add(l){this.R[l.lchain]==null&&(this.R[l.lchain]={}),this.R[l.lchain][l.lresi]==null&&(this.R[l.lchain][l.lresi]={}),this.R[l.lchain][l.lresi][l.lresn]==null&&(this.R[l.lchain][l.lresi][l.lresn]=[]),this.R[l.lchain][l.lresi][l.lresn].push(l),this.R[l.lchain][l.lresi][l.lresn][l.atom]=l}geta([l,f,D,I]){if(this.R[l]!==void 0&&this.R[l][f]!==void 0&&this.R[l][f][D]!==void 0)return this.R[l][f][D][I]}setBonds(l,f){for(let D in this.R)for(let I in this.R[D])for(let V in this.R[D][I]){let K=this.R[D][I][V];for(let A=0;A<K.length;A++)for(let L=A+1;L<K.length;L++){let G=K[A],ee=K[L],ae=l.order(V,G.atom,ee.atom);G.altLoc!=ee.altLoc&&G.altLoc!=""&&ee.altLoc!=""&&(ae=0),ae>0&&(G.bonds.push(ee.index),ee.bonds.push(G.index),G.bondOrder.push(ae),ee.bondOrder.push(ae))}}for(let D of f.C){let I=D[0],V=D[1],K=D[2],A=this.geta(I),L=this.geta(V);A!=null&&L!=null&&(A.bonds.push(L.index),L.bonds.push(A.index),A.bondOrder.push(K),L.bondOrder.push(K))}}}function Z(T,l){var f=!l.keepH,D=l.altLoc?l.altLoc:"A",I=!l.noComputeSecondaryStructure;const V=!l.doAssembly,K=l.assignBonds===void 0?!0:l.assignBonds;if(typeof T=="string")try{T=(0,n.base64ToArray)(T)}catch{T=new TextEncoder().encode(T)}else T=new Uint8Array(T);var A=C.decodeMsgpack(T);A==31&&(T=(0,n.inflateString)(T,!1),A=C.decodeMsgpack(T));var L=[],G=L.modelData=[],ee=A.dataBlocks.length;if(ee==0)return L;l.multimodel||(ee=1);for(let ae=0;ae<ee;ae++){let Se=L.length;const $e=[];G.push({symmetries:[]}),L.push([]);const qe=A.dataBlocks[ae],Pe=Object.create(null);for(const Ra of qe.categories)Pe[Ra.name.substr(1)]=(0,k.Category)(Ra);let Ve={},Ie=Pe.struct_conf;if(Ie){let Ra=Ie.getField("conf_type_id"),oa=Ie.getField("beg_label_asym_id"),rn=Ie.getField("beg_label_seq_id"),Za=Ie.getField("end_label_seq_id");for(let Nt=0;Nt<Ra.length;Nt++)if(Ra[Nt].startsWith("H")){let Gt=oa[Nt],ur=rn[Nt],Qr=Za[Nt];Gt in Ve||(Ve[Gt]={}),Ve[Gt][ur]="h1";for(let Dr=ur+1;Dr<Qr;Dr++)Ve[Gt][Dr]="h";Ve[Gt][Qr]="h2"}}let Xe=Pe.struct_sheet_range;if(Xe){let Ra=Xe.getField("id"),oa=Xe.getField("beg_label_asym_id"),rn=Xe.getField("beg_label_seq_id"),Za=Xe.getField("end_label_seq_id");for(let Nt=0;Nt<Ra.length;Nt++){let Gt=oa[Nt],ur=rn[Nt],Qr=Za[Nt];Gt in Ve||(Ve[Gt]={}),Ve[Gt][ur]="s1";for(let Dr=ur+1;Dr<Qr;Dr++)Ve[Gt][Dr]="s";Ve[Gt][Qr]="s2"}}let et=Pe.pdbx_struct_oper_list,tt=et.getField("id");if(tt&&!V){let Ra=et.getField("matrix[1][1]"),oa=et.getField("matrix[1][2]"),rn=et.getField("matrix[1][3]"),Za=et.getField("matrix[2][1]"),Nt=et.getField("matrix[2][2]"),Gt=et.getField("matrix[2][3]"),ur=et.getField("matrix[3][1]"),Qr=et.getField("matrix[3][2]"),Dr=et.getField("matrix[3][3]"),Ea=et.getField("vector[1]"),da=et.getField("vector[2]"),Tt=et.getField("vector[3]");for(let Lr=0;Lr<tt.length;Lr++){const Gr=new E.Matrix4(Ra[Lr],oa[Lr],rn[Lr],Ea[Lr],Za[Lr],Nt[Lr],Gt[Lr],da[Lr],ur[Lr],Qr[Lr],Dr[Lr],Tt[Lr]);G[G.length-1].symmetries.push(Gr)}}let rt=new B(Pe.chem_comp_bond),ze=new Y,lt=new W(Pe.struct_conn),bt=Pe.atom_site,At=bt.rowCount,Vt=bt.getField("group_PDB"),Yt=bt.getField("Cartn_x"),er=bt.getField("Cartn_y"),lr=bt.getField("Cartn_z"),yr=bt.getField("auth_asym_id"),$r=bt.getField("label_asym_id"),ia=bt.getField("auth_seq_id"),Sa=bt.getField("label_seq_id"),Xr=bt.getField("auth_comp_id"),fr=bt.getField("label_comp_id"),Hr=bt.getField("auth_atom_id"),ya=bt.getField("label_atom_id"),Ta=bt.getField("type_symbol"),ua=bt.getField("B_iso_or_equiv"),Ua=bt.getField("id"),Ya=bt.getField("label_alt_id"),Ia=bt.getField("pdbx_PDB_model_num"),Na=Ia?Ia[0]:0;for(let Ra=0;Ra<At;Ra++){if(Vt!==void 0&&Vt[Ra]==="TER")continue;if(Ia&&Ia[Ra]!=Na)if(Na=Ia[Ra],l.multimodel)l.onemol||(L.push([]),G.push(G[G.length-1]),Na=Ia[Ra],ze.setBonds(rt,lt),ze=new Y);else break;const oa={};oa.x=Yt[Ra],oa.y=er[Ra],oa.z=lr[Ra],oa.chain=yr?yr[Ra]:$r?$r[Ra]:void 0,oa.lchain=$r?$r[Ra]:void 0,oa.resi=ia?ia[Ra]:Sa?Sa[Ra]:void 0,oa.lresi=Sa?Sa[Ra]:void 0,oa.resn=Xr?Xr[Ra].trim():fr?fr[Ra].trim():void 0,oa.lresn=fr?fr[Ra].trim():void 0,oa.atom=Hr?Hr[Ra].replace(/"/gm,""):ya?ya[Ra].replace(/"/gm,""):void 0,oa.icode=Ya?Ya[Ra]:void 0,oa.altLoc=oa.icode,oa.hetflag=!Vt||Vt[Ra]==="HETA"||Vt[Ra]==="HETATM";let rn="X";Ta&&(rn=Ta[Ra].replace(/\(?\+?\d+.*/,"")),oa.elem=rn[0].toUpperCase()+rn.substring(1,2).toLowerCase(),ua&&(oa.b=ua[Ra]),!(f&&oa.elem=="H")&&(oa.altLoc!=""&&oa.altLoc!=D&&D!="*"||(oa.bonds=[],oa.ss="c",oa.serial=Ua[Ra],oa.model=Na,oa.bondOrder=[],oa.properties={},oa.index=L[L.length-1].length,$e[oa.serial]=[L.length,oa.index],L[L.length-1].push(oa),ze.add(oa)))}if(ze.setBonds(rt,lt),!(0,U.isEmpty)(Ve))for(let Ra=Se;Ra<L.length;Ra++){let oa=L[Ra];for(let rn=0;rn<oa.length;rn++){const Za=oa[rn];if(Za!==void 0&&Za.lchain in Ve&&Za.lresi in Ve[Za.lchain]){const Nt=Ve[Za.lchain][Za.lresi];Za.ss=Nt[0],Nt.length>1&&(Nt[1]=="1"?Za.ssbegin=!0:Nt[1]=="2"&&(Za.ssend=!0))}}}l.multimodel&&ae<ee-1&&(l.onemol||(L.push([]),G.push({symmetries:[]})))}for(let ae=0;ae<L.length;ae++)K&&!(l.duplicateAssemblyAtoms&&!l.dontConnectDuplicatedAtoms)&&(0,S.assignPDBBonds)(L[ae],l),I&&(0,y.computeSecondaryStructure)(L[ae],l.hbondCutoff),(0,x.processSymmetries)(G[ae].symmetries,L[ae],l,G[ae].cryst),l.duplicateAssemblyAtoms&&!l.dontConnectDuplicatedAtoms&&K&&(0,S.assignPDBBonds)(L[ae],l);return L}}),"./src/parsers/CDJSON.ts":((t,i,a)=>{a.r(i),a.d(i,{CDJSON:()=>n});function n(y,x){var k=[[]];typeof y=="string"&&(y=JSON.parse(y));for(var S=y.m,E=S[0].a,U=S[0].b,C=S[0].s,B=x!==void 0&&x.parseStyle!==void 0?x.parseStyle:C!==void 0,W=k[k.length-1].length,Y=0;Y<E.length;Y++){var Z=E[Y],T={};T.id=Z.i,T.x=Z.x,T.y=Z.y,T.z=Z.z||0,T.bonds=[],T.bondOrder=[];var l=Z.l||"C";T.elem=l[0].toUpperCase()+l.substring(1).toLowerCase(),T.serial=k[k.length-1].length,B&&(T.style=C[Z.s||0]),k[k.length-1].push(T)}for(let f=0;f<U.length;f++){let D=U[f],I=D.b+W,V=D.e+W,K=D.o||1,A=k[k.length-1][I],L=k[k.length-1][V];A.bonds.push(V),A.bondOrder.push(K),L.bonds.push(I),L.bondOrder.push(K)}return k}}),"./src/parsers/CIF.ts":((t,i,a)=>{a.r(i),a.d(i,{CIF:()=>E});var n=a("./src/parsers/utils/computeSecondaryStructure.ts"),y=a("./src/parsers/utils/processSymmetries.ts"),x=a("./src/WebGL/index.ts"),k=a("./src/parsers/utils/assignPDBBonds.ts");const S=function(U,C,B,W){return new x.Vector3(C,B,W).applyMatrix3(U)};function E(U,C={}){const B=[],W=!C.doAssembly,Y=B.modelData=[],Z=C.assignBonds===void 0?!0:C.assignBonds;function T(K,A){const L=[];let G=0,ee=0;for(;ee<K.length;){for(;K.substring(ee,ee+A.length)!==A&&ee<K.length;)if(K[ee]==="'"){for(ee++;ee<K.length&&K[ee]!=="'";)ee++;for(;K.substring(ee,ee+A.length)!==A&&ee<K.length;)ee++}else if(K[ee]==='"'){for(ee++;ee<K.length&&K[ee]!=='"';)ee++;ee++}else ee++;L.push(K.substring(G,ee)),G=ee=ee+A.length}return L}const l=U.split(/\r?\n|\r/),f=[];let D=!1;for(let K=0;K<l.length;K++){var I=l[K].split("#")[0];if(D?I[0]===";"&&(D=!1):I[0]===";"&&(D=!0),D||I!==""){if(!D&&(I=I.trim(),I[0]==="_")){const A=I.split(/\s/)[0].indexOf(".");if(A>-1){let L=I.split("");L[A]="_",I=L.join(""),I=I.substring(0,A)+"_"+I.substring(A+1)}}f.push(I)}}let V=0;for(;V<f.length;){for(;!f[V].startsWith("data_")||f[V]==="data_global";)V++;V++;const K={};for(;V<f.length&&!f[V].startsWith("data_");)if(f[V][0]===void 0)V++;else if(f[V][0]==="_"){const ee=f[V].split(/\s/)[0].toLowerCase(),ae=K[ee]=K[ee]||[],Se=f[V].substring(f[V].indexOf(ee)+ee.length);if(Se==="")if(V++,f[V][0]===";"){let $e=f[V].substring(1);for(V++;f[V]!==";";)$e=$e+`
`+f[V],V++;ae.push($e)}else ae.push(f[V]);else ae.push(Se.trim());V++}else if(f[V].substring(0,5)==="loop_"){V++;const ee=[];for(;f[V]===""||f[V][0]==="_";){if(f[V]!==""){let Se=f[V].split(/\s/)[0].toLowerCase(),$e=K[Se]=K[Se]||[];ee.push($e)}V++}let ae=0;for(;V<f.length&&f[V][0]!=="_"&&!f[V].startsWith("loop_")&&!f[V].startsWith("data_");){let Se=T(f[V]," ");for(let $e=0;$e<Se.length;$e++)Se[$e]!==""&&(ee[ae].push(Se[$e]),ae=(ae+1)%ee.length);V++}}else V++;Y.push({symmetries:[]}),B.push([]);const A=K._atom_site_id!==void 0?K._atom_site_id.length:K._atom_site_label.length;let L;if(K._cell_length_a!==void 0){const ee=parseFloat(K._cell_length_a),ae=parseFloat(K._cell_length_b),Se=parseFloat(K._cell_length_c),$e=parseFloat(K._cell_angle_alpha)||90,qe=parseFloat(K._cell_angle_beta)||90,Pe=parseFloat(K._cell_angle_gamma)||90;L=(0,x.conversionMatrix3)(ee,ae,Se,$e,qe,Pe),Y[Y.length-1].cryst={a:ee,b:ae,c:Se,alpha:$e,beta:qe,gamma:Pe}}for(let ee=0;ee<A;ee++){if(K._atom_site_group_pdb!==void 0&&K._atom_site_group_pdb[ee]==="TER")continue;const ae={};if(K._atom_site_cartn_x!==void 0)ae.x=parseFloat(K._atom_site_cartn_x[ee]),ae.y=parseFloat(K._atom_site_cartn_y[ee]),ae.z=parseFloat(K._atom_site_cartn_z[ee]);else{const $e=S(L,parseFloat(K._atom_site_fract_x[ee]),parseFloat(K._atom_site_fract_y[ee]),parseFloat(K._atom_site_fract_z[ee]));ae.x=$e.x,ae.y=$e.y,ae.z=$e.z}ae.chain=K._atom_site_auth_asym_id?K._atom_site_auth_asym_id[ee]:K._atom_site_label_asym_id?K._atom_site_label_asym_id[ee]:void 0,ae.lchain=K._atom_site_label_asym_id?K._atom_site_label_asym_id[ee]:void 0,ae.resi=K._atom_site_auth_seq_id?parseInt(K._atom_site_auth_seq_id[ee]):K._atom_site_label_seq_id?K._atom_site_label_seq_id[ee]:void 0,ae.resn=K._atom_site_auth_comp_id?K._atom_site_auth_comp_id[ee].trim():K._atom_site_label_comp_id?K._atom_site_label_comp_id[ee].trim():void 0,ae.atom=K._atom_site_auth_atom_id?K._atom_site_auth_atom_id[ee].replace(/"/gm,""):K._atom_site_label_atom_id?K._atom_site_label_atom_id[ee].replace(/"/gm,""):void 0,ae.hetflag=!K._atom_site_group_pdb||K._atom_site_group_pdb[ee]==="HETA"||K._atom_site_group_pdb[ee]==="HETATM",K._atom_site_b_iso_or_equiv&&(ae.b=parseFloat(K._atom_site_b_iso_or_equiv[ee]));let Se="X";K._atom_site_type_symbol?Se=K._atom_site_type_symbol[ee].replace(/\(?\+?\d+.*/,""):K._atom_site_label&&(Se=K._atom_site_label[ee].split("_")[0].replace(/\(?\d+.*/,"")),ae.elem=Se[0].toUpperCase()+Se.substring(1,2).toLowerCase(),ae.bonds=[],ae.ss="c",ae.serial=ee,ae.bondOrder=[],ae.properties={},B[B.length-1].push(ae)}if(K._pdbx_struct_oper_list_id!==void 0&&!W)for(let ee=0;ee<K._pdbx_struct_oper_list_id.length;ee++){const ae=parseFloat(K["_pdbx_struct_oper_list_matrix[1][1]"][ee]),Se=parseFloat(K["_pdbx_struct_oper_list_matrix[1][2]"][ee]),$e=parseFloat(K["_pdbx_struct_oper_list_matrix[1][3]"][ee]),qe=parseFloat(K["_pdbx_struct_oper_list_vector[1]"][ee]),Pe=parseFloat(K["_pdbx_struct_oper_list_matrix[2][1]"][ee]),Ve=parseFloat(K["_pdbx_struct_oper_list_matrix[2][2]"][ee]),Ie=parseFloat(K["_pdbx_struct_oper_list_matrix[2][3]"][ee]),Xe=parseFloat(K["_pdbx_struct_oper_list_vector[2]"][ee]),et=parseFloat(K["_pdbx_struct_oper_list_matrix[3][1]"][ee]),tt=parseFloat(K["_pdbx_struct_oper_list_matrix[3][2]"][ee]),rt=parseFloat(K["_pdbx_struct_oper_list_matrix[3][3]"][ee]),ze=parseFloat(K["_pdbx_struct_oper_list_vector[3]"][ee]),lt=new x.Matrix4(ae,Se,$e,qe,Pe,Ve,Ie,Xe,et,tt,rt,ze);Y[Y.length-1].symmetries.push(lt)}const G=function(ee){const ae=ee.match("-");ee=ee.replace(/[-xyz]/g,"");const Se=ee.split("/");let $e,qe;return Se[1]===void 0?qe=1:qe=parseInt(Se[1]),Se[0]===""?$e=1:$e=parseInt(Se[0]),$e/qe*(ae?-1:1)};if(K._symmetry_equiv_pos_as_xyz!==void 0&&!W)for(let ee=0;ee<K._symmetry_equiv_pos_as_xyz.length;ee++){const ae=K._symmetry_equiv_pos_as_xyz[ee].replace(/["' ]/g,"").split(",").map(function(Pe){return Pe.replace(/-/g,"+-")});let Se=new x.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let Pe=0;Pe<3;Pe++){const Ve=ae[Pe].split("+");for(let Ie=0;Ie<Ve.length;Ie++){const Xe=Ve[Ie];if(Xe==="")continue;const et=G(Xe);Xe.match("x")?Se.elements[Pe+0]=et:Xe.match("y")?Se.elements[Pe+4]=et:Xe.match("z")?Se.elements[Pe+8]=et:Se.elements[Pe+12]=et}}const $e=L.getMatrix4(),qe=new x.Matrix4().getInverse($e,!0);Se=new x.Matrix4().multiplyMatrices(Se,qe),Se=new x.Matrix4().multiplyMatrices($e,Se),Y[Y.length-1].symmetries.push(Se)}}for(let K=0;K<B.length;K++)Z&&!(C.duplicateAssemblyAtoms&&!C.dontConnectDuplicatedAtoms)&&(0,k.assignPDBBonds)(B[K],C),(0,n.computeSecondaryStructure)(B[K],C.hbondCutoff),(0,y.processSymmetries)(Y[K].symmetries,B[K],C,Y[K].cryst),C.duplicateAssemblyAtoms&&!C.dontConnectDuplicatedAtoms&&Z&&(0,k.assignPDBBonds)(B[K],C);return B}}),"./src/parsers/CUBE.ts":((t,i,a)=>{a.r(i),a.d(i,{CUBE:()=>k});var n=a("./src/WebGL/index.ts"),y=a("./src/parsers/utils/assignBonds.ts"),x=a("./src/parsers/utils/anumToSymbol.ts");function k(S,E){E=E||{};const U=[[]];let C=S.split(/\r?\n/);const B=E.assignBonds===void 0?!0:E.assignBonds;if(C.length<6)return U;let W=C[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const Y=Math.abs(parseFloat(W[0]));let Z={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const T=Z.origin=new n.Vector3(parseFloat(W[1]),parseFloat(W[2]),parseFloat(W[3]));W=C[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),W=C[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const l=W[0]>0?.529177:1;T.multiplyScalar(l);const f=Math.abs(W[0]),D=new n.Vector3(parseFloat(W[1]),parseFloat(W[2]),parseFloat(W[3])).multiplyScalar(l);W=C[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const I=Math.abs(W[0]),V=new n.Vector3(parseFloat(W[1]),parseFloat(W[2]),parseFloat(W[3])).multiplyScalar(l);W=C[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const K=Math.abs(W[0]),A=new n.Vector3(parseFloat(W[1]),parseFloat(W[2]),parseFloat(W[3])).multiplyScalar(l);if(Z.size={x:f,y:I,z:K},Z.unit=new n.Vector3(D.x,V.y,A.z),D.y!=0||D.z!=0||V.x!=0||V.z!=0||A.x!=0||A.y!=0){Z.matrix4=new n.Matrix4(D.x,V.x,A.x,0,D.y,V.y,A.y,0,D.z,V.z,A.z,0,0,0,0,1);let qe=new n.Matrix4().makeTranslation(T.x,T.y,T.z);Z.matrix4=Z.matrix4.multiplyMatrices(qe,Z.matrix4),Z.matrix=Z.matrix4.matrix3FromTopLeft(),Z.origin=new n.Vector3(0,0,0),Z.unit=new n.Vector3(1,1,1)}U.modelData=[{cryst:Z}],C=C.splice(6,Y);for(var L=U[U.length-1].length,G=L+C.length,ee=L;ee<G;++ee){var ae={};ae.serial=ee;var Se=C[ee-L],$e=Se.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");ae.elem=x.anumToSymbol[$e[0]],ae.x=parseFloat($e[2])*l,ae.y=parseFloat($e[3])*l,ae.z=parseFloat($e[4])*l,ae.hetflag=!0,ae.bonds=[],ae.bondOrder=[],ae.properties={},U[U.length-1].push(ae)}if(B)for(let qe=0;qe<U.length;qe++)(0,y.assignBonds)(U[qe],E);return U}}),"./src/parsers/GRO.ts":((t,i,a)=>{a.r(i),a.d(i,{GRO:()=>x});var n=a("./src/parsers/utils/assignPDBBonds.ts"),y=a("./src/parsers/utils/atomNameToElem.ts");function x(k,S){const E=[],U=k.split(/\r?\n|\r/);for(;U.length>0;){const C=parseInt(U[1]);if(U.length<3||isNaN(C)||C<=0||U.length<C+3)break;const B=[];E.push(B);let W=2;const Y=B.length,Z=Y+C;for(let T=Y;T<Z;T++){const l=U[W++],f={};f.serial=T,f.atom=l.slice(10,15).trim(),f.elem=(0,y.atomNameToElem)(f.atom,!0),f.x=10*parseFloat(l.slice(20,28)),f.y=10*parseFloat(l.slice(28,36)),f.z=10*parseFloat(l.slice(36,44)),f.resi=parseInt(l.slice(0,5)),f.resn=l.slice(5,10).trim(),f.bonds=[],f.bondOrder=[],f.properties={},l.length>44&&(f.dx=10*parseFloat(l.slice(44,52)),f.dy=10*parseFloat(l.slice(52,60)),f.dz=10*parseFloat(l.slice(60,68))),B[T]=f}if(U.length<=W+3){const T=U[W++].trim().split(/\s+/);if(T.length===3){for(let l=0;l<3;l++)T[l]=(parseFloat(T[l])*10).toString();E.box=T}}U.splice(0,++W)}for(let C=0;C<E.length;C++)(0,n.assignPDBBonds)(E[C],S);return E}}),"./src/parsers/LAMMPSTRJ.ts":((t,i,a)=>{a.r(i),a.d(i,{LAMMPSTRJ:()=>x});var n=a("./src/parsers/utils/assignBonds.ts");const y={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function x(k,S){const E=[],U=k.split(/\r?\n|\r/);let C=0,B=0,W=0;for(;W<U.length-9;){for(var Y=W;Y<U.length;Y++)if(U[Y].match(/ITEM: NUMBER OF ATOMS/)&&(B=parseInt(U[Y+1])),U[Y].match(/ITEM: ATOMS/)){C=Y+1;break}const Z=U[C-1].replace("ITEM: ATOMS ","").split(" ");E.push([]);for(let T=C;T<C+B;T++){const l={},f={},D=U[T].split(" ");for(let I=0;I<D.length;I++){const V=y[Z[I]];V!==void 0&&(V==="serial"?l[V]=parseInt(D[I]):V==="x"||V==="y"||V==="z"?l[V]=parseFloat(D[I]):V==="charge"||V==="radius"?f[V]=parseFloat(D[I]):l[V]=D[I]),l.properties=f,l.bonds=[],l.bondOrder=[]}E[E.length-1][T-C]=l}W=C+B-1}if(S.assignBonds)for(let Z=0;Z<E.length;Z++)(0,n.assignBonds)(E[Z],S);return E}}),"./src/parsers/MMTF.ts":((t,i,a)=>{a.r(i),a.d(i,{MMTFparser:()=>B});var n=a("./src/utilities.ts"),y=a("./src/WebGL/index.ts"),x=a("./src/parsers/utils/computeSecondaryStructure.ts"),k=a("./src/parsers/utils/processSymmetries.ts"),S=a("./src/vendor/mmtf.js"),E=function(W){return String.fromCharCode.apply(null,W).replace(/\0/g,"")},U=function(W){return W==0||W==2||W==4?"h":W==3?"s":"c"};let C=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function B(W,Y){var Z=!Y.keepH,T=Y.altLoc?Y.altLoc:"A",l=!!Y.noSecondaryStructure,f=!Y.noComputeSecondaryStructure,D=!Y.doAssembly,I=Y.assemblyIndex?Y.assemblyIndex:0;typeof W=="string"?W=(0,n.base64ToArray)(W):W=new Uint8Array(W);var V=S.decode(W),K=[[]],A=K.modelData=[],L=0,G=0,ee=0,ae=V.secStructList,Se=V.bFactorList,$e=V.altLocList,qe=V.occupancyList,Pe=V.bondAtomList,Ve=V.bondOrderList,Ie=V.numModels;if(Ie==0)return K;Y.multimodel||(Ie=1);var Xe,et,tt,rt,ze,lt,bt=[];if(!D&&V.bioAssemblyList&&V.bioAssemblyList.length>0){var At=V.bioAssemblyList[I].transformList;for(Xe=0,lt=At.length;Xe<lt;Xe++){var Vt=new y.Matrix4(At[Xe].matrix);Vt.transpose(),bt.push(Vt)}}var Yt=null;if(V.unitCell){var er=V.unitCell;Yt={a:er[0],b:er[1],c:er[2],alpha:er[3],beta:er[4],gamma:er[5]}}let lr=[];V.entityList.forEach(Vr=>{Vr.chainIndexList.forEach(It=>{lr[It]=Vr.type=="polymer"})});var yr=0;for(ze=0;ze<Ie;ze++){var $r=V.chainsPerModel[ze],ia=K[K.length-1],Sa=[];for(A.push({symmetries:bt,cryst:Yt}),Xe=0;Xe<$r;++Xe){var Xr=V.groupsPerChain[L],fr=E(V.chainIdList.subarray(L*4,L*4+4));V.chainNameList&&(fr=E(V.chainNameList.subarray(L*4,L*4+4)));var Hr=G,ya="";for(et=0;et<Xr;++et){var Ta=V.groupList[V.groupTypeList[G]],ua=Ta.atomNameList.length,Ua=0,Ya=!1,Ia=!1;if(ae){Ua=ae[G];var Na=U(Ua);(G==0||Na!=ya)&&(Ya=!0),ya=Na;var Ra=G+1;(Ra>=ae.length||U(ae[Ra]!=Na))&&(Ia=!0)}var oa=V.groupIdList[G],rn=Ta.groupName;let Vr=Ta.chemCompType;var Za=ee;let It=C.has(Vr)||!lr[L];for(tt=0;tt<ua;++tt){var Nt=Ta.elementList[tt];if(Z&&Nt=="H"){ee+=1;continue}var Gt="";Se&&(Gt=Se[ee]);var ur="";$e&&$e[ee]&&(ur=String.fromCharCode($e[ee]));var Qr="";if(qe&&(Qr=qe[ee]),ur!=""&&ur!=T&&T!="*"){ee+=1;continue}var Dr=V.atomIdList[ee],Ea=Ta.atomNameList[tt],da=0;Ta.atomChargeList&&(da=Ta.atomChargeList[tt]);var Tt=V.xCoordList[ee],Lr=V.yCoordList[ee],Gr=V.zCoordList[ee];Sa[ee]=ia.length,ia.push({resn:rn,x:Tt,y:Lr,z:Gr,elem:Nt,hetflag:It,chain:fr,resi:oa,icode:ur,rescode:oa+(ur!=" "?"^"+ur:""),serial:Dr,altLoc:ur,index:ee,atom:Ea,bonds:[],ss:U(Ua),ssbegin:Ya,ssend:Ia,bondOrder:[],properties:{charge:da,occupancy:Qr},b:Gt}),ee+=1}var wa=Ta.bondAtomList;for(tt=0,rt=Ta.bondOrderList.length;tt<rt;++tt){var Rr=Za+wa[tt*2],ga=Za+wa[tt*2+1],kt=Ta.bondOrderList[tt],ha=Sa[Rr],Pa=Sa[ga],Qe=ia[ha],ea=ia[Pa];Qe&&ea&&(Qe.bonds.push(Pa),Qe.bondOrder.push(kt),ea.bonds.push(ha),ea.bondOrder.push(kt))}G+=1}for(G=Hr,et=0;et<Xr;++et)G+=1;L+=1}if(Pe)for(let Vr=yr,It=Pe.length;Vr<It;Vr+=2){let hr=Pe[Vr],sa=Pe[Vr+1],Qa=Ve?Ve[Vr/2]:1;if(hr>=ee){yr=Vr;break}let an=Sa[hr],sn=Sa[sa],An=ia[an],Ti=ia[sn];An&&Ti&&(An.bonds.push(sn),An.bondOrder.push(Qa),Ti.bonds.push(an),Ti.bondOrder.push(Qa))}Y.multimodel&&(Y.onemol||K.push([]))}if(!D)for(let Vr=0;Vr<K.length;Vr++)(0,k.processSymmetries)(A[Vr].symmetries,K[Vr],Y,A[Vr].cryst);return f&&!l&&(0,x.computeSecondaryStructure)(K,Y.hbondCutoff),K}}),"./src/parsers/MOL2.ts":((t,i,a)=>{a.r(i),a.d(i,{MOL2:()=>y});let n={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function y(x,k){var S=[[]],E=!1;typeof k.keepH<"u"&&(E=!k.keepH);var U=x.search(/@<TRIPOS>MOLECULE/),C=x.search(/@<TRIPOS>ATOM/);if(U==-1||C==-1)return S;for(var B=x.substring(U).split(/\r?\n|\r/);B.length>0;){var W=[],Y=B[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Z=parseInt(Y[0]),T=0;Y.length>1&&(T=parseInt(Y[1]));var l=4,f;for(f=3;f<B.length;f++)if(B[f]=="@<TRIPOS>ATOM"){l=f+1;break}var D=S[S.length-1].length,I=D+Z,V;for(f=D;f<I;f++){V=B[l++],Y=V.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var K={},A=Y[5];if(n[A]!==void 0?A=n[A]:(A=A.split(".")[0],A=A[0].toUpperCase()+A.substring(1).toLowerCase()),K.atom=Y[1],K.elem=A,!(K.elem=="H"&&E)){var L=S[S.length-1].length,G=parseInt(Y[0]);K.serial=G,K.x=parseFloat(Y[2]),K.y=parseFloat(Y[3]),K.z=parseFloat(Y[4]),K.atom=Y[5];var ee=parseFloat(Y[8]);K.index=L,K.bonds=[],K.bondOrder=[],K.properties={charge:ee,partialCharge:ee},W[G]=L,S[S.length-1].push(K)}}for(var ae=!1;l<B.length;)if(B[l++]=="@<TRIPOS>BOND"){ae=!0;break}if(ae&&T)for(f=0;f<T;f++){V=B[l++],Y=V.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var Se=parseInt(Y[1]),$e=S[S.length-1][W[Se]],qe=parseInt(Y[2]),Pe=S[S.length-1][W[qe]],Ve=parseInt(Y[3]);isNaN(Ve)&&(Ve=1),$e!==void 0&&Pe!==void 0&&($e.bonds.push(W[qe]),$e.bondOrder.push(Ve),Pe.bonds.push(W[Se]),Pe.bondOrder.push(Ve))}if(k.multimodel){k.onemol||S.push([]),B.splice(0,l),x=B.join(`
`);continue}else break}return S}}),"./src/parsers/PDB.ts":((t,i,a)=>{a.r(i),a.d(i,{PDB:()=>y});var n=a("./src/parsers/utils/getSinglePDB.ts");function y(x,k){k=k||{};var S=[],E={};S.modelData=[];for(var U=x.split(/\r?\n|\r/);U.length>0;){var C=(0,n.getSinglePDB)(U,k,E),B=C[0],W=C[1];if(U=C[2],B.length!=0){if(k.multimodel&&k.onemol&&S.length>0)for(var Y=S[0].length,Z=0;Z<B.length;Z++){var T=B[Z];T.index=Z;for(var l=0;l<T.bonds.length;l++)T.bonds[l]+=Y;S[0].push(T)}else S.modelData.push(W),S.push(B);if(!k.multimodel)break}}return S}}),"./src/parsers/PQR.ts":((t,i,a)=>{a.r(i),a.d(i,{PQR:()=>x});var n=a("./src/parsers/utils/assignPDBBonds.ts"),y=a("./src/parsers/utils/computeSecondaryStructure.ts");function x(k,S){var E=[[]],U=!S.noSecondaryStructure;E.modelData=[{symmetries:[]}];var C=[],B=k.split(/\r?\n|\r/),W;for(let ae=0;ae<B.length;ae++){W=B[ae].replace(/^\s*/,"");var Y=W.substring(0,6);if(Y.indexOf("END")==0)if(S.multimodel){S.onemol||E.push([]);continue}else break;else if(Y=="ATOM  "||Y=="HETATM"){var Z;let Se=parseInt(W.substring(6,11)),$e=W.substring(12,16).replace(/ /g,""),qe=W.substring(17,20).trim(),Pe=W.substring(21,22),Ve=parseInt(W.substring(22,26));var T=W.substring(30).trim().split(/\s+/),l=parseFloat(T[0]),f=parseFloat(T[1]),D=parseFloat(T[2]),I=parseFloat(T[3]),V=parseFloat(T[4]),K=$e[0];$e.length>1&&$e[1].toUpperCase()!=$e[1]&&(K=$e.substring(0,2)),W[0]=="H"?Z=!0:Z=!1,C[Se]=E[E.length-1].length,E[E.length-1].push({resn:qe,x:l,y:f,z:D,elem:K,hetflag:Z,chain:Pe,resi:Ve,serial:Se,atom:$e,bonds:[],ss:"c",bondOrder:[],properties:{charge:I,partialCharge:I,radius:V},pdbline:W})}else if(Y=="CONECT"){var A=parseInt(W.substring(6,11)),L=E[E.length-1][C[A]];for(let Se=0;Se<4;Se++){var G=parseInt(W.substring([11,16,21,26][Se],[11,16,21,26][Se]+5)),ee=E[E.length-1][C[G]];L!==void 0&&ee!==void 0&&(L.bonds.push(C[G]),L.bondOrder.push(1))}}}for(let ae=0;ae<E.length;ae++)(0,n.assignPDBBonds)(E[ae],S),U&&(0,y.computeSecondaryStructure)(E[ae],S.hbondCutoff);return E}}),"./src/parsers/PRMTOP.ts":((t,i,a)=>{a.r(i),a.d(i,{PRMTOP:()=>n});function n(y){var x=[],k,S=0,E=y.split(/\r?\n|\r/);if(E.length>0&&E[0].includes("VERSION")){var U=E.filter(function(D){return D.includes("POINTERS")||D.includes("ATOM_NAME")||D.includes("CHARGE")||D.includes("RADII")||D.includes("BONDS_INC_HYDROGEN")||D.includes("BONDS_WITHOUT_HYDROGEN")||D.includes("RESIDUE_LABEL")||D.includes("RESIDUE_POINTER")}),C=T("POINTERS");if(C==-1)return[];var B=l(C),W=parseInt(E[C+1].slice(0,B[1]));let f=parseInt(E[C+2].slice(B[1],B[0]+B[1]));if(isNaN(W)||W<=0)return[];if(C=T("ATOM_NAME"),C==-1)return[];B=l(C);var Y=B[0];for(let D=0;D<W/B[0];D++){D==parseInt(W/B[0])&&(Y=W%B[0]);for(let I=0;I<Y;I++){let V={},K={charge:"",radii:""};V.serial=S,V.x=0,V.y=0,V.z=0,V.atom=E[C+1].slice(B[1]*I,B[1]*(I+1)).trim(),V.elem=E[C+1].slice(B[1]*I,B[1]*I+1).trim(),V.properties=K,V.bonds=[],V.bondOrder=[],V.index=x.length,x.push(V),S++}C++}if(C=T("CHARGE"),C!=-1){B=l(C),S=0,Y=B[0];for(let D=0;D<W/B[0];D++){D==parseInt(W/B[0])&&(Y=W%B[0]);for(let I=0;I<Y;I++)x[S].properties.charge=parseFloat(E[C+1].slice(B[1]*I,B[1]*(I+1))),S++;C++}}C=T("RESIDUE_POINTER");var Z=[];if(C!=-1){B=l(C),Y=B[0],C+=1;for(let D=0;D<f/B[0];D++){D==parseInt(f/B[0])&&(Y=f%B[0]);for(let I=0;I<Y;I++)Z.push(parseInt(E[C].slice(B[1]*I,B[1]*(I+1))));C++}if(C=T("RESIDUE_LABEL"),C!=-1){let D=[];B=l(C),Y=B[0],C+=1;for(let A=0;A<f/B[0];A++){A==parseInt(f/B[0])&&(Y=f%B[0]);for(let L=0;L<Y;L++)D.push(E[C].slice(B[1]*L,B[1]*(L+1)).trim());C++}let I=0,V=0,K="";Z.push(x.length+1);for(let A=0;A<x.length;A++)A+1>=Z[I]&&(K=D[I],I+=1,V+=1),x[A].resi=V,x[A].resn=K}}if(C=T("RADII"),C!=-1){B=l(C),S=0,Y=B[0];for(let D=0;D<W/B[0];D++){D==parseInt(W/B[0])&&(Y=W%B[0]);for(let I=0;I<Y;I++)x[S].properties.radii=parseFloat(E[C+1].slice(B[1]*I,B[1]*(I+1))),S++;C++}}if(C=T("BONDS_WITHOUT_HYDROGEN"),C!=-1)for(B=l(C),S=0,Y=B[0],C=C+1;!E[C].match(/^%FLAG/);){E[C+1].match(/^%FLAG/)&&(Y=W%B[0]);for(let D=0;D<Y;D++)S%3==0?k=parseInt(E[C].slice(B[1]*D,B[1]*(D+1))/3):S%3==1&&(x[k].bonds.push(parseInt(E[C].slice(B[1]*D,B[1]*(D+1))/3)),x[k].bondOrder.push(1)),S++;C++}if(C=T("BONDS_INC_HYDROGEN"),C!=-1)for(B=l(C),S=0,Y=B[0],C=C+1;!E[C].match(/^%FLAG/);){E[C+1].match(/^%FLAG/)&&(Y=W%B[0]);for(let D=0;D<Y;D++)S%3==0?k=parseInt(E[C].slice(B[1]*D,B[1]*(D+1))/3):S%3==1&&(x[k].bonds.push(parseInt(E[C].slice(B[1]*D,B[1]*(D+1))/3)),x[k].bonds.push(1)),S++;C++}}else return[];function T(f){var D=E.indexOf(U.filter(function(I){return I.includes(f)})[0]);if(Number.isInteger(D)&&D>0){for(;!E[D].includes("FORMAT");)D++;return D}else return-1}function l(f){var D=E[f].match(/\((\d*)\S*/),I=E[f].match(/[a-zA-Z](\d*)\)\s*/);return I==null&&(I=E[f].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(D[1]),parseInt(I[1])]}return[x]}}),"./src/parsers/SDF.ts":((t,i,a)=>{a.r(i),a.d(i,{SDF:()=>x});var n=function(k,S){var E=[[]],U=!1;for(typeof S.keepH<"u"&&(U=!S.keepH);k.length>0&&!(k.length<4);){var C=parseInt(k[3].substring(0,3));if(isNaN(C)||C<=0)break;var B=parseInt(k[3].substring(3,6)),W=4;if(k.length<4+C+B)break;var Y=[],Z=E[E.length-1].length,T=Z+C,l,f;for(l=Z;l<T;l++,W++){f=k[W];var D={},I=f.substring(31,34).replace(/ /g,"");D.atom=D.elem=I[0].toUpperCase()+I.substring(1).toLowerCase(),(D.elem!=="H"||!U)&&(D.serial=l,Y[l]=E[E.length-1].length,D.x=parseFloat(f.substring(0,10)),D.y=parseFloat(f.substring(10,20)),D.z=parseFloat(f.substring(20,30)),D.hetflag=!0,D.bonds=[],D.bondOrder=[],D.properties={},D.index=E[E.length-1].length,E[E.length-1].push(D))}for(l=0;l<B;l++,W++){f=k[W];var V=Y[parseInt(f.substring(0,3))-1+Z],K=Y[parseInt(f.substring(3,6))-1+Z],A=parseFloat(f.substring(6));typeof V<"u"&&typeof K<"u"&&(E[E.length-1][V].bonds.push(K),E[E.length-1][V].bondOrder.push(A),E[E.length-1][K].bonds.push(V),E[E.length-1][K].bondOrder.push(A))}if(S.multimodel){for(S.onemol||E.push([]);k[W]!=="$$$$"&&W<k.length;)W++;k.splice(0,++W)}else break}return E},y=function(k,S){var E=[[]],U=!1;for(typeof S.keepH<"u"&&(U=!S.keepH);k.length>0&&!(k.length<8||!k[4].startsWith("M  V30 BEGIN CTAB")||!k[5].startsWith("M  V30 COUNTS")||k[5].length<14);){var C=k[5].substring(13).match(/\S+/g);if(C.length<2)break;var B=parseInt(C[0]);if(isNaN(B)||B<=0)break;var W=parseInt(C[1]),Y=7;if(k.length<8+B+W)break;var Z=[],T=E[E.length-1].length,l=T+B,f,D;for(f=T;f<l;f++,Y++){D=k[Y];var I=D.substring(6).match(/\S+/g);if(I.length>4){var V={},K=I[1].replace(/ /g,"");V.atom=V.elem=K[0].toUpperCase()+K.substring(1).toLowerCase(),(V.elem!=="H"||!U)&&(V.serial=f,Z[f]=E[E.length-1].length,V.x=parseFloat(I[2]),V.y=parseFloat(I[3]),V.z=parseFloat(I[4]),V.hetflag=!0,V.bonds=[],V.bondOrder=[],V.properties={},V.index=E[E.length-1].length,E[E.length-1].push(V))}}if(k[Y]==="M  V30 END ATOM")Y++;else break;if(W!==0&&k[Y]==="M  V30 BEGIN BOND")Y++;else break;for(f=0;f<W;f++,Y++){D=k[Y];var A=D.substring(6).match(/\S+/g);if(A.length>3){var L=Z[parseInt(A[2])-1+T],G=Z[parseInt(A[3])-1+T],ee=parseFloat(A[1]);typeof L<"u"&&typeof G<"u"&&(E[E.length-1][L].bonds.push(G),E[E.length-1][L].bondOrder.push(ee),E[E.length-1][G].bonds.push(L),E[E.length-1][G].bondOrder.push(ee))}}if(S.multimodel){for(S.onemol||E.push([]);k[Y]!=="$$$$"&&Y<k.length;)Y++;k.splice(0,++Y)}else break}return E};function x(k,S){var E="V2000",U=k.split(/\r?\n|\r/);return U.length>3&&U[3].length>38&&(E=U[3].substring(34,39)),E==="V2000"?n(U,S):E==="V3000"?y(U,S):[[""]]}}),"./src/parsers/VASP.ts":((t,i,a)=>{a.r(i),a.d(i,{VASP:()=>x});var n=a("./src/WebGL/index.ts"),y=a("./src/parsers/utils/assignBonds.ts");function x(k,S={}){var E=[[]],U={};const C=S.assignBonds===void 0?!0:S.assignBonds;var B=k.replace(/^\s+/,"").split(/\r?\n/);if(B.length<3)return E;if(B[1].match(/\d+/))U.length=parseFloat(B[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),E;if(U.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),E;U.xVec=new Float32Array(B[2].replace(/^\s+/,"").split(/\s+/)),U.yVec=new Float32Array(B[3].replace(/^\s+/,"").split(/\s+/)),U.zVec=new Float32Array(B[4].replace(/^\s+/,"").split(/\s+/));var W=new n.Matrix3(U.xVec[0],U.xVec[1],U.xVec[2],U.yVec[0],U.yVec[1],U.yVec[2],U.zVec[0],U.zVec[1],U.zVec[2]);W.multiplyScalar(U.length),E.modelData=[{symmetries:[],cryst:{matrix:W}}];var Y=B[5].trim().split(/\s+/),Z=new Int16Array(B[6].trim().split(/\s+/)),T=B[7].trim(),l=!1;if(T.match(/S/)&&(l=!0,T=B[8].trim()),T.toLowerCase()[0]=="c")T="cartesian";else if(T.toLowerCase()[0]=="d")T="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),E;if(Y.length!=Z.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(Y),console.log(Z),E;l?B.splice(0,9):B.splice(0,8);for(var f=0,D=0,I=Y.length;D<I;D++){for(var V=Y[D],K=0,A=Z[D];K<A;K++){var L=new Float32Array(B[f+K].trim().split(/\s+/)),G={};G.elem=V,T=="cartesian"?(G.x=U.length*L[0],G.y=U.length*L[1],G.z=U.length*L[2]):(G.x=U.length*(L[0]*U.xVec[0]+L[1]*U.yVec[0]+L[2]*U.zVec[0]),G.y=U.length*(L[0]*U.xVec[1]+L[1]*U.yVec[1]+L[2]*U.zVec[1]),G.z=U.length*(L[0]*U.xVec[2]+L[1]*U.yVec[2]+L[2]*U.zVec[2])),G.bonds=[],G.bondOrder=[],E[0].push(G)}f+=Z[D]}if(C)for(let ee=0;ee<E.length;ee++)(0,y.assignBonds)(E[ee],S);return E}}),"./src/parsers/XYZ.ts":((t,i,a)=>{a.r(i),a.d(i,{XYZ:()=>x});var n=a("./src/WebGL/index.ts"),y=a("./src/parsers/utils/assignBonds.ts");function x(k,S){S=S||{};for(var E=[[]],U=S.assignBonds===void 0?!0:S.assignBonds,C=k.trimStart().split(/\r?\n|\r/);C.length>0&&!(C.length<3);){var B=parseInt(C[0]);if(isNaN(B)||B<=0||C.length<B+2)break;var W=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,Y=W.exec(C[1]);if(Y!=null&&Y.length>1){var Z=new Float32Array(Y[1].split(/\s+/)),T=new n.Matrix3(Z[0],Z[3],Z[6],Z[1],Z[4],Z[7],Z[2],Z[5],Z[8]);E.modelData=[{cryst:{matrix:T}}]}for(var l=2,f=E[E.length-1].length,D=f+B,I=f;I<D;I++){var V=C[l++],K=V.trim().split(/\s+/),A={};A.serial=I;var L=K[0];A.atom=A.elem=L[0].toUpperCase()+L.substring(1,2).toLowerCase(),A.x=parseFloat(K[1]),A.y=parseFloat(K[2]),A.z=parseFloat(K[3]),A.hetflag=!0,A.bonds=[],A.bondOrder=[],A.properties={},E[E.length-1][I]=A,K.length>=7&&(A.dx=parseFloat(K[4]),A.dy=parseFloat(K[5]),A.dz=parseFloat(K[6]))}if(S.multimodel)E.push([]),C.splice(0,l);else break}if(U)for(let ee=0;ee<E.length;ee++)(0,y.assignBonds)(E[ee],S);if(S.onemol){var G=E;E=[],E.push(G[0]);for(let ee=1;ee<G.length;ee++){let ae=E[0].length;for(let Se=0;Se<G[ee].length;Se++){let $e=G[ee][Se];for(let qe=0;qe<$e.bonds.length;qe++)$e.bonds[qe]=$e.bonds[qe]+ae;$e.index=E[0].length,$e.serial=E[0].length,E[0].push($e)}}}return E}}),"./src/parsers/cifutils/category.ts":((t,i,a)=>{a.r(i),a.d(i,{Category:()=>y});var n=a("./src/parsers/cifutils/decoder.ts");function y(x){const k=Object.create(null),S=Object.create(null);for(const E of x.columns)k[E.name]=E;return{rowCount:x.rowCount,name:x.name.substring(1),fieldNames:x.columns.map(E=>E.name),getField(E){const U=k[E];if(U)return S[E]||(S[E]=(0,n.decode)(U.data)),S[E]}}}}),"./src/parsers/cifutils/decoder.ts":((t,i,a)=>{a.r(i),a.d(i,{decode:()=>k});var n=a("./src/parsers/cifutils/encoding.ts");const y=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function x(ae,Se){const $e=new ArrayBuffer(ae.length),qe=new Uint8Array($e);for(let Pe=0,Ve=ae.length;Pe<Ve;Pe+=Se)for(let Ie=0;Ie<Se;Ie++)qe[Pe+Se-Ie-1]=ae[Pe+Ie];return $e}function k(ae){let Se=ae.data;for(let $e=ae.encoding.length-1;$e>=0;$e--)Se=S(Se,ae.encoding[$e]);return Se}function S(ae,Se){switch(Se.kind){case"ByteArray":switch(Se.type){case n.Encoding.IntDataType.Uint8:return ae;case n.Encoding.IntDataType.Int8:return C(ae);case n.Encoding.IntDataType.Int16:return W(ae);case n.Encoding.IntDataType.Uint16:return Y(ae);case n.Encoding.IntDataType.Int32:return Z(ae);case n.Encoding.IntDataType.Uint32:return T(ae);case n.Encoding.FloatDataType.Float32:return l(ae);case n.Encoding.FloatDataType.Float64:return f(ae);default:throw new Error("unreachable")}case"FixedPoint":return D(ae,Se);case"IntervalQuantization":return I(ae,Se);case"RunLength":return V(ae,Se);case"Delta":return K(ae,Se);case"IntegerPacking":return G(ae,Se);case"StringArray":return ee(ae,Se)}}function E(ae,Se){switch(ae){case n.Encoding.IntDataType.Int8:return new Int8Array(Se);case n.Encoding.IntDataType.Int16:return new Int16Array(Se);case n.Encoding.IntDataType.Int32:return new Int32Array(Se);case n.Encoding.IntDataType.Uint8:return new Uint8Array(Se);case n.Encoding.IntDataType.Uint16:return new Uint16Array(Se);case n.Encoding.IntDataType.Uint32:return new Uint32Array(Se);default:return new Int32Array(Se)}}function U(ae,Se){switch(ae){case n.Encoding.FloatDataType.Float32:return new Float32Array(Se);case n.Encoding.FloatDataType.Float64:return new Float64Array(Se);default:return new Float64Array(Se)}}function C(ae){return new Int8Array(ae.buffer,ae.byteOffset)}function B(ae,Se,$e){return(ae.byteOffset!=0||ae.byteLength!=ae.buffer.byteLength)&&(ae=new Uint8Array(ae)),y?new $e(ae.buffer):new $e(x(ae,Se))}function W(ae){return B(ae,2,Int16Array)}function Y(ae){return B(ae,2,Uint16Array)}function Z(ae){return B(ae,4,Int32Array)}function T(ae){return B(ae,4,Uint32Array)}function l(ae){return B(ae,4,Float32Array)}function f(ae){return B(ae,8,Float64Array)}function D(ae,Se){const $e=ae.length,qe=U(Se.srcType,$e),Pe=1/Se.factor;for(let Ve=0;Ve<$e;Ve++)qe[Ve]=Pe*ae[Ve];return qe}function I(ae,Se){const $e=ae.length,qe=U(Se.srcType,$e),Pe=(Se.max-Se.min)/(Se.numSteps-1),Ve=Se.min;for(let Ie=0;Ie<$e;Ie++)qe[Ie]=Ve+Pe*ae[Ie];return qe}function V(ae,Se){const $e=E(Se.srcType,Se.srcSize);let qe=0;for(let Pe=0,Ve=ae.length;Pe<Ve;Pe+=2){const Ie=ae[Pe],Xe=ae[Pe+1];for(let et=0;et<Xe;++et)$e[qe++]=Ie}return $e}function K(ae,Se){const $e=ae.length,qe=E(Se.srcType,$e);if(!$e)return ae;qe[0]=ae[0]+(Se.origin|0);for(let Pe=1;Pe<$e;++Pe)qe[Pe]=ae[Pe]+qe[Pe-1];return qe}function A(ae,Se){const $e=Se.byteCount===1?127:32767,qe=-$e-1,Pe=ae.length,Ve=new Int32Array(Se.srcSize);let Ie=0,Xe=0;for(;Ie<Pe;){let et=0,tt=ae[Ie];for(;tt===$e||tt===qe;)et+=tt,Ie++,tt=ae[Ie];et+=tt,Ve[Xe]=et,Ie++,Xe++}return Ve}function L(ae,Se){const $e=Se.byteCount===1?255:65535,qe=ae.length,Pe=new Int32Array(Se.srcSize);let Ve=0,Ie=0;for(;Ve<qe;){let Xe=0,et=ae[Ve];for(;et===$e;)Xe+=et,Ve++,et=ae[Ve];Xe+=et,Pe[Ie]=Xe,Ve++,Ie++}return Pe}function G(ae,Se){return ae.length===Se.srcSize?ae:Se.isUnsigned?L(ae,Se):A(ae,Se)}function ee(ae,Se){const $e=k({encoding:Se.offsetEncoding,data:Se.offsets}),qe=k({encoding:Se.dataEncoding,data:ae}),Pe=Se.stringData,Ve=new Array($e.length);Ve[0]="";for(let et=1,tt=$e.length;et<tt;et++)Ve[et]=Pe.substring($e[et-1],$e[et]);let Ie=0;const Xe=new Array(qe.length);for(let et=0,tt=qe.length;et<tt;et++)Xe[Ie++]=Ve[qe[et]+1];return Xe}}),"./src/parsers/cifutils/encoding.ts":((t,i,a)=>{a.r(i),a.d(i,{Encoding:()=>y,VERSION:()=>n});const n="0.3.0";var y;(function(x){(function(E){E[E.Int8=1]="Int8",E[E.Int16=2]="Int16",E[E.Int32=3]="Int32",E[E.Uint8=4]="Uint8",E[E.Uint16=5]="Uint16",E[E.Uint32=6]="Uint32"})(x.IntDataType||(x.IntDataType={})),(function(E){E[E.Float32=32]="Float32",E[E.Float64=33]="Float64"})(x.FloatDataType||(x.FloatDataType={}));function k(E){let U;return E instanceof Int8Array?U=x.IntDataType.Int8:E instanceof Int16Array?U=x.IntDataType.Int16:E instanceof Int32Array?U=x.IntDataType.Int32:E instanceof Uint8Array?U=x.IntDataType.Uint8:E instanceof Uint16Array?U=x.IntDataType.Uint16:E instanceof Uint32Array?U=x.IntDataType.Uint32:E instanceof Float32Array?U=x.FloatDataType.Float32:E instanceof Float64Array?U=x.FloatDataType.Float64:U=x.IntDataType.Int32,U}x.getDataType=k;function S(E){if(E instanceof Int8Array||E instanceof Int16Array||E instanceof Int32Array)return!0;for(let U=0,C=E.length;U<C;U++)if(U<0)return!1;return!0}x.isSignedIntegerDataType=S})(y||(y={}))}),"./src/parsers/index.ts":((t,i,a)=>{a.r(i),a.d(i,{Parsers:()=>D,bondLength:()=>f.bondLength,setBondLength:()=>f.setBondLength});var n=a("./src/parsers/VASP.ts"),y=a("./src/parsers/CUBE.ts"),x=a("./src/parsers/XYZ.ts"),k=a("./src/parsers/SDF.ts"),S=a("./src/parsers/CDJSON.ts"),E=a("./src/parsers/CIF.ts"),U=a("./src/parsers/MOL2.ts"),C=a("./src/parsers/PDB.ts"),B=a("./src/parsers/PQR.ts"),W=a("./src/parsers/MMTF.ts"),Y=a("./src/parsers/PRMTOP.ts"),Z=a("./src/parsers/GRO.ts"),T=a("./src/parsers/LAMMPSTRJ.ts"),l=a("./src/parsers/BCIF.ts"),f=a("./src/parsers/utils/bondLength.ts");const D={vasp:n.VASP,VASP:n.VASP,cube:y.CUBE,CUBE:y.CUBE,xyz:x.XYZ,XYZ:x.XYZ,sdf:k.SDF,SDF:k.SDF,json:S.CDJSON,cdjson:S.CDJSON,CDJSON:S.CDJSON,mcif:E.CIF,cif:E.CIF,CIF:E.CIF,mol2:U.MOL2,MOL2:U.MOL2,pdb:C.PDB,PDB:C.PDB,pdbqt:C.PDB,PDBQT:C.PDB,pqr:B.PQR,PQR:B.PQR,mmtf:W.MMTFparser,MMTF:W.MMTFparser,prmtop:Y.PRMTOP,PRMTOP:Y.PRMTOP,gro:Z.GRO,GRO:Z.GRO,lammpstrj:T.LAMMPSTRJ,LAMMPSTRJ:T.LAMMPSTRJ,bcif:l.BCIF,BCIF:l.BCIF}}),"./src/parsers/utils/anumToSymbol.ts":((t,i,a)=>{a.r(i),a.d(i,{anumToSymbol:()=>n});const n={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}}),"./src/parsers/utils/areConnected.ts":((t,i,a)=>{a.r(i),a.d(i,{areConnected:()=>x});var n=a("./src/parsers/utils/bondLength.ts");const y=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function x(k,S,E){if(E&&E.unboundCations&&(y.has(k.elem)||y.has(S.elem)))return!1;let U=(0,n.bondLength)(k.elem)+(0,n.bondLength)(S.elem);U+=.25,U*=U;let C=k.x-S.x;if(C*=C,C>U)return!1;let B=k.y-S.y;if(B*=B,B>U)return!1;let W=k.z-S.z;if(W*=W,W>U)return!1;const Y=C+B+W;return!(isNaN(Y)||Y<.5||Y>U||k.altLoc!==S.altLoc&&k.altLoc.trim()!==""&&S.altLoc.trim()!=="")}}),"./src/parsers/utils/assignBackboneHBonds.ts":((t,i,a)=>{a.r(i),a.d(i,{assignBackboneHBonds:()=>n});function n(y,x){const k=x||3.2,S=k*k,E=[];for(let U=0,C=y.length;U<C;U++){y[U].index=U;const B=y[U];!B.hetflag&&(B.atom==="N"||B.atom==="O")&&(E.push(B),B.hbondOther=null,B.hbondDistanceSq=Number.POSITIVE_INFINITY)}E.sort(function(U,C){return U.z-C.z});for(let U=0,C=E.length;U<C;U++){const B=E[U];for(let W=U+1;W<C;W++){const Y=E[W],Z=Y.z-B.z;if(Z>k)break;if(Y.atom==B.atom)continue;const T=Math.abs(Y.y-B.y);if(T>k)continue;const l=Math.abs(Y.x-B.x);if(l>k)continue;const f=l*l+T*T+Z*Z;f>S||Y.chain==B.chain&&Math.abs(Y.resi-B.resi)<4||(f<B.hbondDistanceSq&&(B.hbondOther=Y,B.hbondDistanceSq=f),f<Y.hbondDistanceSq&&(Y.hbondOther=B,Y.hbondDistanceSq=f))}}}}),"./src/parsers/utils/assignBonds.ts":((t,i,a)=>{a.r(i),a.d(i,{assignBonds:()=>k});var n=a("./src/parsers/utils/areConnected.ts");const y=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],x=4.95;function k(S,E){for(let B=0,W=S.length;B<W;B++)S[B].index||(S[B].index=B);const U={x:{y:{z:[]}}};for(let B=0;B<S.length;B++){const W=S[B],Y=Math.floor(W.x/x),Z=Math.floor(W.y/x),T=Math.floor(W.z/x);U[Y]||(U[Y]={}),U[Y][Z]||(U[Y][Z]={}),U[Y][Z][T]||(U[Y][Z][T]=[]),U[Y][Z][T].push(W)}function C(B,W){for(let Y=0;Y<B.length;Y++){const Z=B[Y];for(let T=0;T<W.length;T++){const l=W[T];if((0,n.areConnected)(Z,l,E)){const f=Z.bonds.indexOf(l.index),D=l.bonds.indexOf(Z.index);f===-1&&D===-1?(Z.bonds.push(l.index),Z.bondOrder.push(1),l.bonds.push(Z.index),l.bondOrder.push(1)):f===-1?(Z.bonds.push(l.index),Z.bondOrder.push(l.bondOrder[D])):D===-1&&(l.bonds.push(Z.index),l.bondOrder.push(Z.bondOrder[f]))}}}}for(let B in U){const W=parseInt(B);for(let Y in U[W]){const Z=parseInt(Y);for(let T in U[W][Z]){const l=parseInt(T),f=U[W][Z][l];for(let D=0;D<f.length;D++){const I=f[D];for(let V=D+1;V<f.length;V++){const K=f[V];(0,n.areConnected)(I,K,E)&&I.bonds.indexOf(K.index)==-1&&(I.bonds.push(K.index),I.bondOrder.push(1),K.bonds.push(I.index),K.bondOrder.push(1))}}for(let D=0;D<y.length;D++){const I=y[D];if(!U[W+I.x]||!U[W+I.x][Z+I.y]||!U[W+I.x][Z+I.y][l+I.z])continue;const V=U[W+I.x][Z+I.y][l+I.z];C(f,V)}}}}}}),"./src/parsers/utils/assignPDBBonds.ts":((t,i,a)=>{a.r(i),a.d(i,{assignPDBBonds:()=>k});var n=a("./src/parsers/utils/areConnected.ts"),y=a("./src/parsers/utils/assignBonds.ts"),x=a("./src/parsers/utils/standardResidues.ts");function k(S,E){const U=[],C=[];for(let Z=0,T=S.length;Z<T;Z++){const l=S[Z];l.index=Z,l.hetflag||!x.standardResidues.has(l.resn)?C.push(l):U.push(l)}(0,y.assignBonds)(C,E),U.sort(function(Z,T){return Z.chain!==T.chain?Z.chain<T.chain?-1:1:Z.resi-T.resi});let B=-1,W=-1,Y;for(let Z=0,T=U.length;Z<T;Z++){const l=U[Z];l.resi!==B&&(B=l.resi,Y||W++,Y=!1),l.reschain=W;for(let f=Z+1;f<U.length;f++){const D=U[f];if(D.chain!==l.chain||D.resi-l.resi>1)break;(0,n.areConnected)(l,D,E)&&(l.bonds.indexOf(D.index)===-1&&(l.bonds.push(D.index),l.bondOrder.push(1),D.bonds.push(l.index),D.bondOrder.push(1)),l.resi!==D.resi&&(Y=!0))}}}}),"./src/parsers/utils/atomNameToElem.ts":((t,i,a)=>{a.r(i),a.d(i,{atomNameToElem:()=>y});var n=a("./src/parsers/utils/bondLength.ts");function y(x,k){let S=x.replace(/ /g,"");return S.length>0&&S[0]==="H"&&S!=="Hg"&&S!=="He"&&S!=="Hf"&&S!=="Hs"&&S!=="Ho"&&(S="H"),S.length>1&&(S=S[0].toUpperCase()+S.substring(1).toLowerCase(),n.bondTable[S]===void 0?S=S[0]:k&&(S==="Ca"||S==="Cd")&&(S="C")),S}}),"./src/parsers/utils/bondLength.ts":((t,i,a)=>{a.r(i),a.d(i,{bondLength:()=>y,bondTable:()=>n,setBondLength:()=>x});let n={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function y(k){return n[k]||1.6}function x(k,S){S<0&&(S=0),n[k]=S}}),"./src/parsers/utils/computeSecondaryStructure.ts":((t,i,a)=>{a.r(i),a.d(i,{computeSecondaryStructure:()=>y});var n=a("./src/parsers/utils/assignBackboneHBonds.ts");function y(x,k){(0,n.assignBackboneHBonds)(x,k);const S={};let E,U,C,B,W,Y;for(E=0,U=x.length;E<U;E++)if(W=x[E],S[W.chain]===void 0&&(S[W.chain]=[]),isFinite(W.hbondDistanceSq)){const Z=W.hbondOther;S[Z.chain]===void 0&&(S[Z.chain]=[]),Math.abs(Z.resi-W.resi)===4&&(S[W.chain][W.resi]="h")}for(C in S)for(B=1;B<S[C].length-1;B++){const Z=S[C][B-1],T=S[C][B+1];Y=S[C][B],Z=="h"&&Z==T&&Y!=Z&&(S[C][B]=Z)}for(E=0,U=x.length;E<U;E++)W=x[E],isFinite(W.hbondDistanceSq)&&S[W.chain][W.resi]!="h"&&W.ss!=="h"&&(S[W.chain][W.resi]="maybesheet");for(let Z=0,T=x.length;Z<T;Z++)if(W=x[Z],isFinite(W.hbondDistanceSq)&&S[W.chain][W.resi]=="maybesheet"){let l=W.hbondOther,f=S[l.chain][l.resi];(f=="maybesheet"||f=="s")&&(S[W.chain][W.resi]="s",S[l.chain][l.resi]="s")}for(let Z in S){for(let T=1;T<S[Z].length-1;T++){const l=S[Z][T-1],f=S[Z][T+1];Y=S[Z][T],l=="s"&&l==f&&Y!=l&&(S[Z][T]=l)}for(let T=0;T<S[Z].length;T++){const l=S[Z][T];(l=="h"||l=="s")&&S[Z][T-1]!=l&&S[Z][T+1]!=l&&delete S[Z][T]}}for(E=0,U=x.length;E<U;E++)W=x[E],Y=S[W.chain][W.resi],delete W.hbondOther,delete W.hbondDistanceSq,!(Y===void 0||Y==="maybesheet")&&(W.ss=Y,S[W.chain][W.resi-1]!=Y&&(W.ssbegin=!0),S[W.chain][W.resi+1]!=Y&&(W.ssend=!0))}}),"./src/parsers/utils/getSinglePDB.ts":((t,i,a)=>{a.r(i),a.d(i,{getSinglePDB:()=>B});var n=a("./src/WebGL/index.ts"),y=a("./src/parsers/utils/atomNameToElem.ts"),x=a("./src/parsers/utils/bondLength.ts"),k=a("./src/parsers/utils/computeSecondaryStructure.ts"),S=a("./src/parsers/utils/isEmpty.ts"),E=a("./src/parsers/utils/processSymmetries.ts"),U=a("./src/parsers/utils/assignPDBBonds.ts"),C=a("./src/parsers/utils/validateBonds.ts");function B(W,Y,Z){const T=[],l=Y.assignBonds===void 0?!0:Y.assignBonds,f=!Y.keepH,D=!!Y.noSecondaryStructure,I=!Y.noComputeSecondaryStructure,V=!Y.doAssembly,K=Y.altLoc?Y.altLoc:"A",A={symmetries:[],cryst:void 0};let L,G=[];const ee=[];let ae;const Se={};for(let $e=0;$e<W.length;$e++){ae=W[$e].replace(/^\s*/,"");const qe=ae.substring(0,6);let Pe,Ve,Ie;if(qe.indexOf("END")===0){if(G=W.slice($e+1),qe==="END")for(const Xe in Z)Z.hasOwnProperty(Xe)&&delete Z[Xe];break}else if(qe==="ATOM  "||qe==="HETATM"){let Xe,et,tt,rt,ze,lt,bt,At,Vt,Yt,er,lr;if(er=ae.substring(16,17),er!==" "&&er!==K&&K!=="*"||(Yt=parseInt(ae.substring(6,11)),L=ae.substring(12,16).replace(/ /g,""),Xe=ae.substring(17,20).replace(/ /g,""),et=ae.substring(21,22),tt=parseInt(ae.substring(22,26)),rt=ae.substring(26,27),ze=parseFloat(ae.substring(30,38)),lt=parseFloat(ae.substring(38,46)),bt=parseFloat(ae.substring(46,54)),lr=parseFloat(ae.substring(60,68)),Vt=ae.substring(76,78).replace(/ /g,""),Vt===""||x.bondTable[Vt]===void 0?Vt=(0,y.atomNameToElem)(ae.substring(12,14),ae[0]=="A"):Vt=Vt[0].toUpperCase()+Vt.substring(1).toLowerCase(),Vt==="H"&&f))continue;qe[0]=="H"?At=!0:At=!1,ee[Yt]=T.length,T.push({resn:Xe,x:ze,y:lt,z:bt,elem:Vt,hetflag:At,altLoc:er,chain:et,resi:tt,icode:rt,rescode:tt+(rt!==" "?"^"+rt:""),serial:Yt,atom:L,bonds:[],ss:"c",bondOrder:[],properties:{},b:lr,pdbline:ae})}else if(qe==="SHEET "){Pe=ae.substring(21,22),Ve=parseInt(ae.substring(22,26)),Ie=parseInt(ae.substring(33,37)),Pe in Z||(Z[Pe]={}),Z[Pe][Ve]="s1";for(let Xe=Ve+1;Xe<Ie;Xe++)Z[Pe][Xe]="s";Z[Pe][Ie]="s2"}else if(qe==="CONECT"){const Xe=parseInt(ae.substring(6,11)),et=ee[Xe],tt=T[et],rt=[11,16,21,26];for(let ze=0;ze<4;ze++){const lt=parseInt(ae.substring(rt[ze],rt[ze]+5)),bt=ee[lt];let At=et+":"+bt;const Vt=T[bt];if(tt!==void 0&&Vt!==void 0)if(!Se[At])Se[At]=1,(tt.bonds.length==0||tt.bonds[tt.bonds.length-1]!==bt)&&(tt.bonds.push(bt),tt.bondOrder.push(1));else{Se[At]+=1;for(let Yt=0;Yt<tt.bonds.length;Yt++)if(tt.bonds[Yt]==bt){const er=Se[At];er>=4?tt.bondOrder[Yt]=1:tt.bondOrder[Yt]=er}}}}else if(qe==="HELIX "){Pe=ae.substring(19,20),Ve=parseInt(ae.substring(21,25)),Ie=parseInt(ae.substring(33,37)),Pe in Z||(Z[Pe]={}),Z[Pe][Ve]="h1";for(let Xe=Ve+1;Xe<Ie;Xe++)Z[Pe][Xe]="h";Z[Pe][Ie]="h2"}else if(!V&&qe==="REMARK"&&ae.substring(13,18)==="BIOMT"){let Xe,et=new n.Matrix4;for(Xe=1;Xe<=3;Xe++)if(ae=W[$e].replace(/^\s*/,""),parseInt(ae.substring(18,19))==Xe)et.elements[Xe-1]=parseFloat(ae.substring(23,33)),et.elements[Xe-1+4]=parseFloat(ae.substring(33,43)),et.elements[Xe-1+8]=parseFloat(ae.substring(43,53)),et.elements[Xe-1+12]=parseFloat(ae.substring(53)),$e++;else for(;ae.substring(13,18)==="BIOMT";)$e++,ae=W[$e].replace(/^\s*/,"");et.elements[3]=0,et.elements[7]=0,et.elements[11]=0,et.elements[15]=1,A.symmetries.push(et),$e--}else if(qe==="CRYST1"){let Xe,et,tt,rt,ze,lt;Xe=parseFloat(ae.substring(7,15)),et=parseFloat(ae.substring(16,24)),tt=parseFloat(ae.substring(25,33)),rt=parseFloat(ae.substring(34,40)),ze=parseFloat(ae.substring(41,47)),lt=parseFloat(ae.substring(48,54)),A.cryst={a:Xe,b:et,c:tt,alpha:rt,beta:ze,gamma:lt}}else if(qe==="ANISOU"){const Xe=parseInt(ae.substring(6,11)),et=ee[Xe],tt=T[et];if(tt){const rt=ae.substring(30).trim().split(/\s+/),ze={u11:parseInt(rt[0]),u22:parseInt(rt[1]),u33:parseInt(rt[2]),u12:parseInt(rt[3]),u13:parseInt(rt[4]),u23:parseInt(rt[5])};tt.uMat=ze}}}if((0,C.validateBonds)(T,ee),l&&(0,U.assignPDBBonds)(T,Y),V||(0,E.processSymmetries)(A.symmetries,T,Y,A.cryst),I&&!D&&(0,k.computeSecondaryStructure)(T,Y.hbondCutoff),!(0,S.isEmpty)(Z))for(let $e=0;$e<T.length;$e++){const qe=T[$e];if(qe!==void 0&&qe.chain in Z&&qe.resi in Z[qe.chain]){const Pe=Z[qe.chain][qe.resi];qe.ss=Pe[0],Pe.length>1&&(Pe[1]=="1"?qe.ssbegin=!0:Pe[1]=="2"&&(qe.ssend=!0))}}return[T,A,G]}}),"./src/parsers/utils/isEmpty.ts":((t,i,a)=>{a.r(i),a.d(i,{isEmpty:()=>n});function n(y){for(const x in y)return!1;return!0}}),"./src/parsers/utils/processSymmetries.ts":((t,i,a)=>{a.r(i),a.d(i,{processSymmetries:()=>y});var n=a("./src/WebGL/index.ts");function y(x,k,S,E){const U=!S.duplicateAssemblyAtoms,C=k.length;let B=C,W=-1,Y=null,Z=null;(S.normalizeAssembly||S.wrapAtoms)&&E&&(Y=(0,n.conversionMatrix3)(E.a,E.b,E.c,E.alpha,E.beta,E.gamma),Z=new n.Matrix3,Z.getInverse3(Y));let T=function(D){let I=D.clone().applyMatrix3(Z);const V=[I.x,I.y,I.z],K=[0,0,0];for(let L=0;L<3;L++){for(;V[L]<-.001;)V[L]+=1,K[L]+=1;for(;V[L]>1.001;)V[L]-=1,K[L]-=1}const A=new n.Vector3(K[0],K[1],K[2]);return A.applyMatrix3(Y),A};if(S.normalizeAssembly&&E)for(let D=0;D<x.length;D++){const I=new n.Vector3(0,0,0);for(let K=0;K<C;K++){const A=new n.Vector3(k[K].x,k[K].y,k[K].z);A.applyMatrix4(x[D]),I.add(A)}I.divideScalar(C);const V=T(I);x[D].isNearlyIdentity()&&V.lengthSq()>.001&&(W=D),x[D].translate(V)}if(U){if(x.length>1)for(let D=0;D<k.length;D++){var l=[];for(let I=0;I<x.length;I++)if(!x[I].isNearlyIdentity()){var f=new n.Vector3;f.set(k[D].x,k[D].y,k[D].z),f.applyMatrix4(x[I]),l.push(f)}k[D].symmetries=l}}else{for(let D=0;D<C;D++)k[D].sym=-1;for(let D=0;D<x.length;D++)if(!x[D].isNearlyIdentity()&&W!=D){let I=new n.Vector3;for(let V=0;V<C;V++){const K=[];for(let L=0;L<k[V].bonds.length;L++)K.push(k[V].bonds[L]+B);if(I.set(k[V].x,k[V].y,k[V].z),I.applyMatrix4(x[D]),S.wrapAtoms&&E){let L=T(I);I.add(L)}const A={};for(const L in k[V])A[L]=k[V][L];A.x=I.x,A.y=I.y,A.z=I.z,A.bonds=K,A.sym=D,A.index=k.length,k.push(A)}B=k.length}else for(let I=0;I<C;I++)k[I].sym=D;if(S.wrapAtoms&&E){let D=new n.Vector3;for(let I=0;I<C;I++){D.set(k[I].x,k[I].y,k[I].z);let V=T(D);D.add(V),k[I].x=D.x,k[I].y=D.y,k[I].z=D.z}}if(W>=0){const D=new n.Vector3;for(let I=0;I<C;I++)D.set(k[I].x,k[I].y,k[I].z),D.applyMatrix4(x[W]),k[I].x=D.x,k[I].y=D.y,k[I].z=D.z}x.length=0}}}),"./src/parsers/utils/standardResidues.ts":((t,i,a)=>{a.r(i),a.d(i,{standardResidues:()=>n});const n=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])}),"./src/parsers/utils/validateBonds.ts":((t,i,a)=>{a.r(i),a.d(i,{validateBonds:()=>n});function n(y,x){for(let k=0,S=y.length;k<S;k++){const E=y[k];for(let U=0;U<E.bonds.length;U++){const C=E.bonds[U],B=y[C],W=x[E.serial];B&&W&&B.bonds.indexOf(W)<0&&(B.bonds.push(W),B.bondOrder.push(E.bondOrder[U]))}}}}),"./src/partialCharges.ts":((t,i,a)=>{a.r(i),a.d(i,{applyPartialCharges:()=>y,partialCharges:()=>n});const n={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function y(x,k){if((!k||typeof x.partialCharge>"u")&&x.resn&&x.atom){var S=x.resn+":"+x.atom;x.properties.partialCharge=n[S]}}}),"./src/specs.ts":((t,i,a)=>{a.r(i)}),"./src/utilities.ts":((__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(t,i){for(var a in i)i.hasOwnProperty(a)&&i[a]!==void 0&&(t[a]=i[a]);return t}function deepCopy(t){let i,a,n;if(t==null)return{};if(typeof t!="object"||t===null)return t;i=Array.isArray(t)?[]:{};for(n in t)a=t[n],i[n]=deepCopy(a);return i}function isNumeric(t){var i=typeof t;return(i==="number"||i==="string")&&!isNaN(t-parseFloat(t))}function isEmptyObject(t){return Object.keys(t).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(t){t&&(t.volformat&&!(t.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(t.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(t.voldata,t.volformat)),t.volscheme&&(t.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(t.volscheme)))}function getExtent(t,i){var a,n,y,x,k,S,E,U,C,B,W=!i;if(a=n=y=9999,x=k=S=-9999,E=U=C=B=0,t.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var Y=0;Y<t.length;Y++){var Z=t[Y];if(!(typeof Z>"u"||!isFinite(Z.x)||!isFinite(Z.y)||!isFinite(Z.z))&&(B++,E+=Z.x,U+=Z.y,C+=Z.z,a=a<Z.x?a:Z.x,n=n<Z.y?n:Z.y,y=y<Z.z?y:Z.z,x=x>Z.x?x:Z.x,k=k>Z.y?k:Z.y,S=S>Z.z?S:Z.z,Z.symmetries&&W))for(var T=0;T<Z.symmetries.length;T++)B++,E+=Z.symmetries[T].x,U+=Z.symmetries[T].y,C+=Z.symmetries[T].z,a=a<Z.symmetries[T].x?a:Z.symmetries[T].x,n=n<Z.symmetries[T].y?n:Z.symmetries[T].y,y=y<Z.symmetries[T].z?y:Z.symmetries[T].z,x=x>Z.symmetries[T].x?x:Z.symmetries[T].x,k=k>Z.symmetries[T].y?k:Z.symmetries[T].y,S=S>Z.symmetries[T].z?S:Z.symmetries[T].z}return[[a,n,y],[x,k,S],[E/B,U/B,C/B]]}function getPropertyRange(t,i){for(var a=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,y=0,x=t.length;y<x;y++){var k=t[y],S=getAtomProperty(k,i);S!=null&&(S<a&&(a=S),S>n&&(n=S))}return!isFinite(a)&&!isFinite(n)?a=n=0:isFinite(a)?isFinite(n)||(n=a):a=n,[a,n]}class PausableTimer{constructor(i,a,n){this.total_time_run=0,this.fn=i,this.arg=n,this.countdown=a,this.start_time=new Date().getTime(),this.ident=setTimeout(i,a,n)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(t){for(var i=window.atob(t),a=i.length,n=new Uint8Array(a),y=0;y<a;y++)n[y]=i.charCodeAt(y);return n}function getAtomProperty(t,i){var a=null;return t.properties&&typeof t.properties[i]<"u"?a=t.properties[i]:typeof t[i]<"u"&&(a=t[i]),a}function mergeGeos(t,i){var a=i.geometry;a!==void 0&&t.geometryGroups.push(a.geometryGroups[0])}function specStringToObject(t){if(typeof t=="object"||typeof t>"u"||t==null)return t;try{return JSON.parse(t)}catch{}t=t.replace(/%7E/g,"~");var i=function(W){return isNumeric(W)?Math.floor(parseFloat(W))==parseInt(W)||W.indexOf(".")>=0?parseFloat(W):parseInt(W):W==="true"?!0:W==="false"?!1:W},a={};if(t==="all")return a;for(var n=t.split(";"),y=0;y<n.length;y++){var x=n[y].split(":"),k=x[0],S={},E=x[1];if(E)if(E=E.replace(/~/g,"="),E.indexOf("=")!==-1)for(var U=E.split(","),C=0;C<U.length;C++){var B=U[C].split("=",2);S[B[0]]=i(B[1])}else E.indexOf(",")!==-1?S=E.split(","):S=i(E);a[k]=S}return a}function checkStatus(t){if(!t.ok)throw new Error(`HTTP ${t.status} - ${t.statusText}`);return t}function get(t,i){var a=fetch(t).then(checkStatus).then(n=>n.text());return i?a.then(i):a}function getbin(t,i,a,n){var y;return a=="POST"?y=fetch(t,{method:"POST",body:n}).then(x=>checkStatus(x)).then(x=>x.arrayBuffer()):y=fetch(t).then(x=>checkStatus(x)).then(x=>x.arrayBuffer()),i?y.then(i):y}function download(t,i,a,n){var y="",x="",k="",S=null,E=i.addModel();if(t.indexOf(":")<0&&(t.length==4?t="pdb:"+t:isNaN(t)?t="url:"+t:t="cid:"+t),t.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),t="bcif:"+t.slice(5)),t.substring(0,5)==="bcif:")t=t.substring(5).toUpperCase(),k="https://models.rcsb.org/"+t+".bcif.gz",a&&typeof a.noComputeSecondaryStructure>"u"&&(a.noComputeSecondaryStructure=!0),S=new Promise(function(C){getbin(k).then(function(B){E.addMolData(B,"bcif.gz",a),i.zoomTo(),i.render(),C(E)},function(){console.error("fetch of "+k+" failed.")})});else{if(t.substring(0,4)==="pdb:"){if(y="bcif",a&&a.format&&(y=a.format),a&&typeof a.noComputeSecondaryStructure>"u"&&(a.noComputeSecondaryStructure=!0),t=t.substring(4).toUpperCase(),!t.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}y=="bcif"?k="https://models.rcsb.org/"+t.toUpperCase()+".bcif.gz":(x=a&&a.pdbUri?a.pdbUri:"https://files.rcsb.org/view/",k=x+t+"."+y)}else if(t.substring(0,4)=="cid:"){if(y="sdf",t=t.substring(4),!t.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}k="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+t+"/SDF?record_type=3d"}else t.substring(0,4)=="url:"&&(k=t.substring(4),y=k);var U=function(C){E.addMolData(C,y,a),i.zoomTo(),i.render()};S=new Promise(function(C){y=="bcif"?getbin(k).then(function(B){U(B),C(E)}).catch(function(){x=a&&a.pdbUri?a.pdbUri:"https://files.rcsb.org/view/",k=x+t+".pdb",y="pdb",console.warn("falling back to pdb format"),get(k).then(function(B){U(B),C(E)}).catch(function(B){U(""),C(E),console.error("fetch of "+k+" failed: "+B.statusText)})}):get(k).then(function(B){U(B),C(E)}).catch(function(B){U(""),C(E),console.error("fetch of "+k+" failed: "+B.statusText)})})}return n?(S.then(function(C){n(C)}),E):S}function getColorFromStyle(t,i){let a=i.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[a]<"u")a=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[a];else if(typeof a=="string"&&a.endsWith("Carbon")){let x=a.substring(0,a.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[x]<"u"){let k=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);k.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[x],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[a]={prop:"elem",map:k},a=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[a]}}let n=t.color;if(typeof i.color<"u"&&i.color!="spectrum"&&(n=i.color),typeof a<"u"){let x,k;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[a]<"u")a=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[a],typeof a[t[a.prop]]<"u"&&(n=a.map[t[a.prop]]);else if(typeof a[t[a.prop]]<"u")n=a.map[t[a.prop]];else if(typeof a.prop<"u"&&typeof a.gradient<"u"){x=a.prop;var y=a.gradient;y instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(y=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(a));let S=y.range()||[-1,1];k=getAtomProperty(t,x),k!=null&&(n=y.valueToHex(k,S))}else typeof a.prop<"u"&&typeof a.map<"u"?(x=a.prop,k=getAtomProperty(t,x),typeof a.map[k]<"u"&&(n=a.map[k])):typeof i.colorscheme[t.elem]<"u"?n=i.colorscheme[t.elem]:console.warn("Could not interpret colorscheme "+a)}else typeof i.colorfunc<"u"&&(n=i.colorfunc(t));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(n)}function getElement(t){let i=t;return typeof t=="string"?i=document.querySelector("#"+t):typeof t=="object"&&t.get&&(i=t.get(0)),i}function inflateString(t,i=!0){let a;return typeof t=="string"?a=new TextEncoder().encode(t):a=new Uint8Array(t),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(a,{to:i?"string":null})}}),"./src/vendor/mmtf.js":(function(t,i){(function(a,n){n(i)})(this,function(a){function n(Nt,Gt,ur){for(var Qr=(Nt.byteLength,0),Dr=ur.length;Dr>Qr;Qr++){var Ea=ur.charCodeAt(Qr);if(128>Ea)Nt.setUint8(Gt++,Ea>>>0&127|0);else if(2048>Ea)Nt.setUint8(Gt++,Ea>>>6&31|192),Nt.setUint8(Gt++,Ea>>>0&63|128);else if(65536>Ea)Nt.setUint8(Gt++,Ea>>>12&15|224),Nt.setUint8(Gt++,Ea>>>6&63|128),Nt.setUint8(Gt++,Ea>>>0&63|128);else{if(!(1114112>Ea))throw new Error("bad codepoint "+Ea);Nt.setUint8(Gt++,Ea>>>18&7|240),Nt.setUint8(Gt++,Ea>>>12&63|128),Nt.setUint8(Gt++,Ea>>>6&63|128),Nt.setUint8(Gt++,Ea>>>0&63|128)}}}function y(Nt){for(var Gt=0,ur=0,Qr=Nt.length;Qr>ur;ur++){var Dr=Nt.charCodeAt(ur);if(128>Dr)Gt+=1;else if(2048>Dr)Gt+=2;else if(65536>Dr)Gt+=3;else{if(!(1114112>Dr))throw new Error("bad codepoint "+Dr);Gt+=4}}return Gt}function x(Nt,Gt,ur){var Qr=typeof Nt;if(Qr==="string"){var Dr=y(Nt);if(32>Dr)return Gt.setUint8(ur,160|Dr),n(Gt,ur+1,Nt),1+Dr;if(256>Dr)return Gt.setUint8(ur,217),Gt.setUint8(ur+1,Dr),n(Gt,ur+2,Nt),2+Dr;if(65536>Dr)return Gt.setUint8(ur,218),Gt.setUint16(ur+1,Dr),n(Gt,ur+3,Nt),3+Dr;if(4294967296>Dr)return Gt.setUint8(ur,219),Gt.setUint32(ur+1,Dr),n(Gt,ur+5,Nt),5+Dr}if(Nt instanceof Uint8Array){var Dr=Nt.byteLength,Ea=new Uint8Array(Gt.buffer);if(256>Dr)return Gt.setUint8(ur,196),Gt.setUint8(ur+1,Dr),Ea.set(Nt,ur+2),2+Dr;if(65536>Dr)return Gt.setUint8(ur,197),Gt.setUint16(ur+1,Dr),Ea.set(Nt,ur+3),3+Dr;if(4294967296>Dr)return Gt.setUint8(ur,198),Gt.setUint32(ur+1,Dr),Ea.set(Nt,ur+5),5+Dr}if(Qr==="number"){if(!isFinite(Nt))throw new Error("Number not finite: "+Nt);if(Math.floor(Nt)!==Nt)return Gt.setUint8(ur,203),Gt.setFloat64(ur+1,Nt),9;if(Nt>=0){if(128>Nt)return Gt.setUint8(ur,Nt),1;if(256>Nt)return Gt.setUint8(ur,204),Gt.setUint8(ur+1,Nt),2;if(65536>Nt)return Gt.setUint8(ur,205),Gt.setUint16(ur+1,Nt),3;if(4294967296>Nt)return Gt.setUint8(ur,206),Gt.setUint32(ur+1,Nt),5;throw new Error("Number too big 0x"+Nt.toString(16))}if(Nt>=-32)return Gt.setInt8(ur,Nt),1;if(Nt>=-128)return Gt.setUint8(ur,208),Gt.setInt8(ur+1,Nt),2;if(Nt>=-32768)return Gt.setUint8(ur,209),Gt.setInt16(ur+1,Nt),3;if(Nt>=-2147483648)return Gt.setUint8(ur,210),Gt.setInt32(ur+1,Nt),5;throw new Error("Number too small -0x"+(-Nt).toString(16).substr(1))}if(Nt===null)return Gt.setUint8(ur,192),1;if(Qr==="boolean")return Gt.setUint8(ur,Nt?195:194),1;if(Qr==="object"){var Dr,Lr=0,da=Array.isArray(Nt);if(da)Dr=Nt.length;else{var Tt=Object.keys(Nt);Dr=Tt.length}var Lr;if(16>Dr?(Gt.setUint8(ur,Dr|(da?144:128)),Lr=1):65536>Dr?(Gt.setUint8(ur,da?220:222),Gt.setUint16(ur+1,Dr),Lr=3):4294967296>Dr&&(Gt.setUint8(ur,da?221:223),Gt.setUint32(ur+1,Dr),Lr=5),da)for(var Gr=0;Dr>Gr;Gr++)Lr+=x(Nt[Gr],Gt,ur+Lr);else for(var Gr=0;Dr>Gr;Gr++){var wa=Tt[Gr];Lr+=x(wa,Gt,ur+Lr),Lr+=x(Nt[wa],Gt,ur+Lr)}return Lr}throw new Error("Unknown type "+Qr)}function k(Nt){var Gt=typeof Nt;if(Gt==="string"){var ur=y(Nt);if(32>ur)return 1+ur;if(256>ur)return 2+ur;if(65536>ur)return 3+ur;if(4294967296>ur)return 5+ur}if(Nt instanceof Uint8Array){var ur=Nt.byteLength;if(256>ur)return 2+ur;if(65536>ur)return 3+ur;if(4294967296>ur)return 5+ur}if(Gt==="number"){if(Math.floor(Nt)!==Nt)return 9;if(Nt>=0){if(128>Nt)return 1;if(256>Nt)return 2;if(65536>Nt)return 3;if(4294967296>Nt)return 5;throw new Error("Number too big 0x"+Nt.toString(16))}if(Nt>=-32)return 1;if(Nt>=-128)return 2;if(Nt>=-32768)return 3;if(Nt>=-2147483648)return 5;throw new Error("Number too small -0x"+Nt.toString(16).substr(1))}if(Gt==="boolean"||Nt===null)return 1;if(Gt==="object"){var ur,Qr=0;if(Array.isArray(Nt)){ur=Nt.length;for(var Dr=0;ur>Dr;Dr++)Qr+=k(Nt[Dr])}else{var Ea=Object.keys(Nt);ur=Ea.length;for(var Dr=0;ur>Dr;Dr++){var da=Ea[Dr];Qr+=k(da)+k(Nt[da])}}if(16>ur)return 1+Qr;if(65536>ur)return 3+Qr;if(4294967296>ur)return 5+Qr;throw new Error("Array or object too long 0x"+ur.toString(16))}throw new Error("Unknown type "+Gt)}function S(Nt){var Gt=new ArrayBuffer(k(Nt)),ur=new DataView(Gt);return x(Nt,ur,0),new Uint8Array(Gt)}function E(Nt,Gt,ur){return Gt?new Nt(Gt.buffer,Gt.byteOffset,Gt.byteLength/(ur||1)):void 0}function U(Nt){return E(DataView,Nt)}function C(Nt){return E(Uint8Array,Nt)}function B(Nt){return E(Int8Array,Nt)}function W(Nt){return E(Int32Array,Nt,4)}function Y(Nt){return E(Float32Array,Nt,4)}function Z(Nt,Gt){var ur=Nt.length/2;Gt||(Gt=new Int16Array(ur));for(var Qr=0,Dr=0;ur>Qr;++Qr,Dr+=2)Gt[Qr]=Nt[Dr]<<8^Nt[Dr+1]<<0;return Gt}function T(Nt,Gt){var ur=Nt.length;Gt||(Gt=new Uint8Array(2*ur));for(var Qr=U(Gt),Dr=0;ur>Dr;++Dr)Qr.setInt16(2*Dr,Nt[Dr]);return C(Gt)}function l(Nt,Gt){var ur=Nt.length/4;Gt||(Gt=new Int32Array(ur));for(var Qr=0,Dr=0;ur>Qr;++Qr,Dr+=4)Gt[Qr]=Nt[Dr]<<24^Nt[Dr+1]<<16^Nt[Dr+2]<<8^Nt[Dr+3]<<0;return Gt}function f(Nt,Gt){var ur=Nt.length;Gt||(Gt=new Uint8Array(4*ur));for(var Qr=U(Gt),Dr=0;ur>Dr;++Dr)Qr.setInt32(4*Dr,Nt[Dr]);return C(Gt)}function D(Nt,Gt){var ur=Nt.length;Gt||(Gt=new Float32Array(ur/4));for(var Qr=U(Gt),Dr=U(Nt),Ea=0,da=0,Tt=ur/4;Tt>Ea;++Ea,da+=4)Qr.setFloat32(da,Dr.getFloat32(da),!0);return Gt}function I(Nt,Gt,ur){var Qr=Nt.length,Dr=1/Gt;ur||(ur=new Float32Array(Qr));for(var Ea=0;Qr>Ea;++Ea)ur[Ea]=Nt[Ea]*Dr;return ur}function V(Nt,Gt,ur){var Qr=Nt.length;ur||(ur=new Int32Array(Qr));for(var Dr=0;Qr>Dr;++Dr)ur[Dr]=Math.round(Nt[Dr]*Gt);return ur}function K(Nt,Gt){var ur,Qr;if(!Gt){var Dr=0;for(ur=0,Qr=Nt.length;Qr>ur;ur+=2)Dr+=Nt[ur+1];Gt=new Nt.constructor(Dr)}var Ea=0;for(ur=0,Qr=Nt.length;Qr>ur;ur+=2)for(var da=Nt[ur],Tt=Nt[ur+1],Lr=0;Tt>Lr;++Lr)Gt[Ea]=da,++Ea;return Gt}function A(Nt){if(Nt.length===0)return new Int32Array;var Gt,ur,Qr=2;for(Gt=1,ur=Nt.length;ur>Gt;++Gt)Nt[Gt-1]!==Nt[Gt]&&(Qr+=2);var Dr=new Int32Array(Qr),Ea=0,da=1;for(Gt=1,ur=Nt.length;ur>Gt;++Gt)Nt[Gt-1]!==Nt[Gt]?(Dr[Ea]=Nt[Gt-1],Dr[Ea+1]=da,da=1,Ea+=2):++da;return Dr[Ea]=Nt[Nt.length-1],Dr[Ea+1]=da,Dr}function L(Nt,Gt){var ur=Nt.length;Gt||(Gt=new Nt.constructor(ur)),ur&&(Gt[0]=Nt[0]);for(var Qr=1;ur>Qr;++Qr)Gt[Qr]=Nt[Qr]+Gt[Qr-1];return Gt}function G(Nt,Gt){var ur=Nt.length;Gt||(Gt=new Nt.constructor(ur)),Gt[0]=Nt[0];for(var Qr=1;ur>Qr;++Qr)Gt[Qr]=Nt[Qr]-Nt[Qr-1];return Gt}function ee(Nt,Gt){var ur,Qr,Dr=Nt instanceof Int8Array?127:32767,Ea=-Dr-1,da=Nt.length;if(!Gt){var Tt=0;for(ur=0;da>ur;++ur)Nt[ur]<Dr&&Nt[ur]>Ea&&++Tt;Gt=new Int32Array(Tt)}for(ur=0,Qr=0;da>ur;){for(var Lr=0;Nt[ur]===Dr||Nt[ur]===Ea;)Lr+=Nt[ur],++ur;Lr+=Nt[ur],++ur,Gt[Qr]=Lr,++Qr}return Gt}function ae(Nt,Gt){var ur,Qr=32767,Dr=-Qr-1,Ea=Nt.length,da=0;for(ur=0;Ea>ur;++ur){var Tt=Nt[ur];Tt===0?++da:Tt>0?(da+=Math.ceil(Tt/Qr),Tt%Qr===0&&(da+=1)):(da+=Math.ceil(Tt/Dr),Tt%Dr===0&&(da+=1))}var Lr=new Int16Array(da),Gr=0;for(ur=0;Ea>ur;++ur){var Tt=Nt[ur];if(Tt>=0)for(;Tt>=Qr;)Lr[Gr]=Qr,++Gr,Tt-=Qr;else for(;Dr>=Tt;)Lr[Gr]=Dr,++Gr,Tt-=Dr;Lr[Gr]=Tt,++Gr}return Lr}function Se(Nt,Gt){return L(K(Nt),Gt)}function $e(Nt){return A(G(Nt))}function qe(Nt,Gt,ur){return I(K(Nt,W(ur)),Gt,ur)}function Pe(Nt,Gt){return A(V(Nt,Gt))}function Ve(Nt,Gt,ur){return I(L(Nt,W(ur)),Gt,ur)}function Ie(Nt,Gt,ur){return G(V(Nt,Gt),ur)}function Xe(Nt,Gt,ur){return I(ee(Nt,W(ur)),Gt,ur)}function et(Nt,Gt,ur){var Qr=ee(Nt,W(ur));return Ve(Qr,Gt,Y(Qr))}function tt(Nt,Gt,ur){return ae(Ie(Nt,Gt))}function rt(Ea){var Gt=U(Ea),ur=Gt.getInt32(0),Qr=Gt.getInt32(4),Dr=Ea.subarray(8,12),Ea=Ea.subarray(12);return[ur,Ea,Qr,Dr]}function ze(Nt,Gt,ur,Qr){var Dr=new ArrayBuffer(12+Qr.byteLength),Ea=new Uint8Array(Dr),da=new DataView(Dr);return da.setInt32(0,Nt),da.setInt32(4,Gt),ur&&Ea.set(ur,8),Ea.set(Qr,12),Ea}function lt(Nt){var Gt=Nt.length,ur=C(Nt);return ze(2,Gt,void 0,ur)}function bt(Nt){var Gt=Nt.length,ur=f(Nt);return ze(4,Gt,void 0,ur)}function At(Nt,Gt){var ur=Nt.length/Gt,Qr=f([Gt]),Dr=C(Nt);return ze(5,ur,Qr,Dr)}function Vt(Nt){var Gt=Nt.length,ur=f(A(Nt));return ze(6,Gt,void 0,ur)}function Yt(Nt){var Gt=Nt.length,ur=f($e(Nt));return ze(8,Gt,void 0,ur)}function er(Nt,Gt){var ur=Nt.length,Qr=f([Gt]),Dr=f(Pe(Nt,Gt));return ze(9,ur,Qr,Dr)}function lr(Nt,Gt){var ur=Nt.length,Qr=f([Gt]),Dr=T(tt(Nt,Gt));return ze(10,ur,Qr,Dr)}function yr(Nt){var Gt={};return Ya.forEach(function(ur){Nt[ur]!==void 0&&(Gt[ur]=Nt[ur])}),Nt.bondAtomList&&(Gt.bondAtomList=bt(Nt.bondAtomList)),Nt.bondOrderList&&(Gt.bondOrderList=lt(Nt.bondOrderList)),Gt.xCoordList=lr(Nt.xCoordList,1e3),Gt.yCoordList=lr(Nt.yCoordList,1e3),Gt.zCoordList=lr(Nt.zCoordList,1e3),Nt.bFactorList&&(Gt.bFactorList=lr(Nt.bFactorList,100)),Nt.atomIdList&&(Gt.atomIdList=Yt(Nt.atomIdList)),Nt.altLocList&&(Gt.altLocList=Vt(Nt.altLocList)),Nt.occupancyList&&(Gt.occupancyList=er(Nt.occupancyList,100)),Gt.groupIdList=Yt(Nt.groupIdList),Gt.groupTypeList=bt(Nt.groupTypeList),Nt.secStructList&&(Gt.secStructList=lt(Nt.secStructList)),Nt.insCodeList&&(Gt.insCodeList=Vt(Nt.insCodeList)),Nt.sequenceIndexList&&(Gt.sequenceIndexList=Yt(Nt.sequenceIndexList)),Gt.chainIdList=At(Nt.chainIdList,4),Nt.chainNameList&&(Gt.chainNameList=At(Nt.chainNameList,4)),Gt}function $r(Nt){function Gt(Lr){for(var Gr={},wa=0;Lr>wa;wa++){var Rr=Ea();Gr[Rr]=Ea()}return Gr}function ur(Lr){var Gr=Nt.subarray(da,da+Lr);return da+=Lr,Gr}function Qr(Lr){var Gr=Nt.subarray(da,da+Lr);da+=Lr;var wa=65535;if(Lr>wa){for(var Rr=[],ga=0;ga<Gr.length;ga+=wa)Rr.push(String.fromCharCode.apply(null,Gr.subarray(ga,ga+wa)));return Rr.join("")}return String.fromCharCode.apply(null,Gr)}function Dr(Lr){for(var Gr=new Array(Lr),wa=0;Lr>wa;wa++)Gr[wa]=Ea();return Gr}function Ea(){var Lr,Gr,wa=Nt[da];if(!(128&wa))return da++,wa;if((240&wa)===128)return Gr=15&wa,da++,Gt(Gr);if((240&wa)===144)return Gr=15&wa,da++,Dr(Gr);if((224&wa)===160)return Gr=31&wa,da++,Qr(Gr);if((224&wa)===224)return Lr=Tt.getInt8(da),da++,Lr;switch(wa){case 192:return da++,null;case 194:return da++,!1;case 195:return da++,!0;case 196:return Gr=Tt.getUint8(da+1),da+=2,ur(Gr);case 197:return Gr=Tt.getUint16(da+1),da+=3,ur(Gr);case 198:return Gr=Tt.getUint32(da+1),da+=5,ur(Gr);case 202:return Lr=Tt.getFloat32(da+1),da+=5,Lr;case 203:return Lr=Tt.getFloat64(da+1),da+=9,Lr;case 204:return Lr=Nt[da+1],da+=2,Lr;case 205:return Lr=Tt.getUint16(da+1),da+=3,Lr;case 206:return Lr=Tt.getUint32(da+1),da+=5,Lr;case 208:return Lr=Tt.getInt8(da+1),da+=2,Lr;case 209:return Lr=Tt.getInt16(da+1),da+=3,Lr;case 210:return Lr=Tt.getInt32(da+1),da+=5,Lr;case 217:return Gr=Tt.getUint8(da+1),da+=2,Qr(Gr);case 218:return Gr=Tt.getUint16(da+1),da+=3,Qr(Gr);case 219:return Gr=Tt.getUint32(da+1),da+=5,Qr(Gr);case 220:return Gr=Tt.getUint16(da+1),da+=3,Dr(Gr);case 221:return Gr=Tt.getUint32(da+1),da+=5,Dr(Gr);case 222:return Gr=Tt.getUint16(da+1),da+=3,Gt(Gr);case 223:return Gr=Tt.getUint32(da+1),da+=5,Gt(Gr)}throw new Error("Unknown type 0x"+wa.toString(16))}var da=0,Tt=new DataView(Nt.buffer);return Ea()}function ia(Nt,Gt,ur,Qr){switch(Nt){case 1:return D(Gt);case 2:return B(Gt);case 3:return Z(Gt);case 4:return l(Gt);case 5:return C(Gt);case 6:return K(l(Gt),new Uint8Array(ur));case 7:return K(l(Gt));case 8:return Se(l(Gt));case 9:return qe(l(Gt),l(Qr)[0]);case 10:return et(Z(Gt),l(Qr)[0]);case 11:return I(Z(Gt),l(Qr)[0]);case 12:return Xe(Z(Gt),l(Qr)[0]);case 13:return Xe(B(Gt),l(Qr)[0]);case 14:return ee(Z(Gt));case 15:return ee(B(Gt))}}function Sa(Nt,Gt){Gt=Gt||{};var ur=Gt.ignoreFields,Qr={};return Na.forEach(function(Dr){var Ea=ur?ur.indexOf(Dr)!==-1:!1,da=Nt[Dr];Ea||da===void 0||(da instanceof Uint8Array?Qr[Dr]=ia.apply(null,rt(da)):Qr[Dr]=da)}),Qr}function Xr(Nt){return String.fromCharCode.apply(null,Nt).replace(/\0/g,"")}function fr(Nt,Gt,ur){ur=ur||{};var Qr,Dr,Ea,da,Tt,Lr,Gr=ur.firstModelOnly,wa=Gt.onModel,Rr=Gt.onChain,ga=Gt.onGroup,kt=Gt.onAtom,ha=Gt.onBond,Pa=0,Qe=0,ea=0,Vr=0,It=0,hr=-1,sa=Nt.chainNameList,Qa=Nt.secStructList,an=Nt.insCodeList,sn=Nt.sequenceIndexList,An=Nt.atomIdList,Ti=Nt.bFactorList,zn=Nt.altLocList,Ln=Nt.occupancyList,Hn=Nt.bondAtomList,bi=Nt.bondOrderList;for(Qr=0,Dr=Nt.chainsPerModel.length;Dr>Qr&&!(Gr&&Pa>0);++Qr){var li=Nt.chainsPerModel[Pa];for(wa&&wa({chainCount:li,modelIndex:Pa}),Ea=0;li>Ea;++Ea){var Mi=Nt.groupsPerChain[Qe];if(Rr){var Ii=Xr(Nt.chainIdList.subarray(4*Qe,4*Qe+4)),ti=null;sa&&(ti=Xr(sa.subarray(4*Qe,4*Qe+4))),Rr({groupCount:Mi,chainIndex:Qe,modelIndex:Pa,chainId:Ii,chainName:ti})}for(da=0;Mi>da;++da){var pi=Nt.groupList[Nt.groupTypeList[ea]],Ri=pi.atomNameList.length;if(ga){var mo=null;Qa&&(mo=Qa[ea]);var so=null;Nt.insCodeList&&(so=String.fromCharCode(an[ea]));var pa=null;sn&&(pa=sn[ea]),ga({atomCount:Ri,groupIndex:ea,chainIndex:Qe,modelIndex:Pa,groupId:Nt.groupIdList[ea],groupType:Nt.groupTypeList[ea],groupName:pi.groupName,singleLetterCode:pi.singleLetterCode,chemCompType:pi.chemCompType,secStruct:mo,insCode:so,sequenceIndex:pa})}for(Tt=0;Ri>Tt;++Tt){if(kt){var Gs=null;An&&(Gs=An[Vr]);var qo=null;Ti&&(qo=Ti[Vr]);var Fo=null;zn&&(Fo=String.fromCharCode(zn[Vr]));var ko=null;Ln&&(ko=Ln[Vr]),kt({atomIndex:Vr,groupIndex:ea,chainIndex:Qe,modelIndex:Pa,atomId:Gs,element:pi.elementList[Tt],atomName:pi.atomNameList[Tt],formalCharge:pi.formalChargeList[Tt],xCoord:Nt.xCoordList[Vr],yCoord:Nt.yCoordList[Vr],zCoord:Nt.zCoordList[Vr],bFactor:qo,altLoc:Fo,occupancy:ko})}Vr+=1}if(ha){var Ro=pi.bondAtomList;for(Tt=0,Lr=pi.bondOrderList.length;Lr>Tt;++Tt)ha({atomIndex1:Vr-Ri+Ro[2*Tt],atomIndex2:Vr-Ri+Ro[2*Tt+1],bondOrder:pi.bondOrderList[Tt]})}ea+=1}Qe+=1}if(It=hr+1,hr=Vr-1,ha&&Hn)for(Tt=0,Lr=Hn.length;Lr>Tt;Tt+=2){var Bi=Hn[Tt],As=Hn[Tt+1];(Bi>=It&&hr>=Bi||As>=It&&hr>=As)&&ha({atomIndex1:Bi,atomIndex2:As,bondOrder:bi?bi[Tt/2]:null})}Pa+=1}}function Hr(Nt){return S(yr(Nt))}function ya(Nt,Gt){Nt instanceof ArrayBuffer&&(Nt=new Uint8Array(Nt));var ur;return ur=Nt instanceof Uint8Array?$r(Nt):Nt,Sa(ur,Gt)}function Ta(Nt,Gt,ur,Qr){function Dr(){try{var da=ya(Ea.response);ur(da)}catch(Tt){Qr(Tt)}}var Ea=new XMLHttpRequest;Ea.addEventListener("load",Dr,!0),Ea.addEventListener("error",Qr,!0),Ea.responseType="arraybuffer",Ea.open("GET",Gt+Nt.toUpperCase()),Ea.send()}function ua(Nt,Gt,ur){Ta(Nt,rn,Gt,ur)}function Ua(Nt,Gt,ur){Ta(Nt,Za,Gt,ur)}var Ya=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],Ia=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],Na=Ya.concat(Ia),Ra="v1.0.1",oa="//mmtf.rcsb.org/v1.0/",rn=oa+"full/",Za=oa+"reduced/";a.encode=Hr,a.decode=ya,a.traverse=fr,a.fetch=ua,a.fetchReduced=Ua,a.version=Ra,a.fetchUrl=rn,a.fetchReducedUrl=Za,a.encodeMsgpack=S,a.encodeMmtf=yr,a.decodeMsgpack=$r,a.decodeMmtf=Sa})})},__webpack_module_cache__={};function __webpack_require__(t){var i=__webpack_module_cache__[t];if(i!==void 0)return i.exports;var a=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.n=t=>{var i=t&&t.__esModule?(()=>t.default):(()=>t);return __webpack_require__.d(i,{a:i}),i},__webpack_require__.d=(t,i)=>{for(var a in i)__webpack_require__.o(i,a)&&!__webpack_require__.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},__webpack_require__.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),__webpack_require__.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())})(_3Dmol);var _3DmolExports=_3Dmol.exports;const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69};function mod(t,i){return(t%i+i)%i}function setCustomBondLengths(){function t(i,a){_3DmolExports.setBondLength(i,a)}Object.keys(covalentRadii).forEach(i=>{t(i,1.05*covalentRadii[i])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:t,cifText:i},a)=>{const n=reactExports.useRef(null),y=reactExports.useRef(null),x=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const k=()=>{if(y.current=n.current.addModel(),i){let U=_3DmolExports.Parsers.CIF(i),C=U[0],B=U.modelData[0].cryst;y.current.setCrystData(B.a,B.b,B.c,B.alpha,B.beta,B.gamma);let W=y.current.modelData.cryst.matrix,Y=new _3DmolExports.Matrix3().getInverse3(W),Z=[],T=[];C.forEach(D=>{let I=new _3DmolExports.Vector3(D.x,D.y,D.z);if(t.packedCell){let V=I.clone().applyMatrix3(Y);I=new _3DmolExports.Vector3(mod(V.x,1),mod(V.y,1),mod(V.z,1)).applyMatrix3(W)}T.push({elem:D.elem,x:I.x,y:I.y,z:I.z})});let l=.03,f=t.supercell;for(let D=-1;D<f[0]+1;D++)for(let I=-1;I<f[1]+1;I++)for(let V=-1;V<f[2]+1;V++){let K=new _3DmolExports.Vector3(D,I,V);if(K.applyMatrix3(W),D==-1||D==f[0]||I==-1||I==f[1]||V==-1||V==f[2])if(t.packedCell)T.forEach(A=>{let L=new _3DmolExports.Vector3(A.x,A.y,A.z);L.add(K);let G=L.clone().applyMatrix3(Y);G.x>-l&&G.x<f[0]+l&&G.y>-l&&G.y<f[1]+l&&G.z>-l&&G.z<f[2]+l&&Z.push({elem:A.elem,x:L.x,y:L.y,z:L.z})});else continue;else T.forEach(A=>{Z.push({elem:A.elem,x:A.x+K.x,y:A.y+K.y,z:A.z+K.z})})}y.current.addAtoms(Z)}},S=()=>{n.current.removeAllModels(),k();let U={sphere:{scale:.3,colorscheme:"Jmol"}};t.vdwRadius&&(U.sphere.scale=1),t.bonds&&(U.stick={radius:.15,colorscheme:"Jmol"}),n.current.setStyle(U),n.current.addUnitCell(y.current),y.current.assignBonds(),n.current.removeAllLabels(),t.atomLabels&&y.current.atoms.forEach(C=>{n.current.addLabel(C.elem,{position:{x:C.x,y:C.y,z:C.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),n.current.zoomTo(),n.current.zoom(1.4),n.current.render()},E=(U,C)=>{U=="camera"&&(C=="x"&&n.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),C=="y"&&n.current.setView([0,0,0,0,.5,.5,.5,.5]),C=="z"&&n.current.setView([0,0,0,0,0,0,0,1]),n.current.zoomTo(),n.current.zoom(1.4))};return reactExports.useImperativeHandle(a,()=>({handleEvent:E})),reactExports.useEffect(()=>{let U={backgroundColor:"white",orthographic:!0};n.current=_3DmolExports.createViewer(x.current,U),S()},[]),reactExports.useEffect(()=>{n.current&&S()},[t,i]),jsxRuntimeExports.jsx("div",{id:x.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:t,setMouseEnabledState:i,visualizerRef:a,viewerParams:n,cifText:y})=>{let x="structure-window";t||(x+=" disable-mouse");let k="Click to interact",S="mouse-disabled-note";return t&&(S="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>i(!0),children:jsxRuntimeExports.jsx("div",{className:x,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:a,viewerParams:n,cifText:y})})}),jsxRuntimeExports.jsx("div",{className:S,onClick:()=>i(!t),children:k})]})},StructureVisualizer=t=>{const[i,a]=reactExports.useState({supercell:t.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[n,y]=reactExports.useState(!1),x=reactExports.useRef(null),k=reactExports.useRef(null);reactExports.useEffect(()=>{const C=B=>{k&&!k.current.contains(B.target)&&y(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const S=C=>{y(C)},E=(C,B)=>{a(W=>({...W,[C]:B}))},U=(C,B)=>{x.current.handleEvent(C,B)};return jsxRuntimeExports.jsxs("div",{ref:k,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:x,viewerParams:i,cifText:t.cifText,mouseEnabled:n,setMouseEnabledState:S}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:i,onViewerParamChange:E,onViewerEvent:U})]})},defaultFormats=[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}];function StructDownloadButton(t){const i=`${t.aiida_rest_url}/nodes/${t.uuid}/download`,a=t.download_formats||defaultFormats,[n,y]=reactExports.useState(!1),x=reactExports.useRef(null);return reactExports.useEffect(()=>{function k(S){x.current&&!x.current.contains(S.target)&&y(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),jsxRuntimeExports$1.jsxs("div",{ref:x,className:"download-wrapper",children:[jsxRuntimeExports$1.jsx("button",{type:"button",className:"download-button",title:"Download",onClick:()=>y(!n),children:jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports$1.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports$1.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports$1.jsx("path",{d:"m7 10 5 5 5-5"})]})}),n&&jsxRuntimeExports$1.jsx("div",{className:"download-menu-container",children:jsxRuntimeExports$1.jsx("ul",{className:"download-menu",children:a.map(({format:k,label:S})=>jsxRuntimeExports$1.jsx("li",{children:jsxRuntimeExports$1.jsx("a",{href:`${i}?download_format=${k}`,children:S})},k))})})]})}function getVol(t,i=4){const a=(x,k)=>[x[1]*k[2]-x[2]*k[1],x[2]*k[0]-x[0]*k[2],x[0]*k[1]-x[1]*k[0]],n=t.attributes.cell,y=Math.abs(n[0].reduce((x,k,S)=>x+k*a(n[1],n[2])[S],0));return parseFloat(y.toFixed(i))}function formatLattice(t){const i=t.attributes.cell,a=Math.hypot(...i[0]),n=Math.hypot(...i[1]),y=Math.hypot(...i[2]);return{a,b:n,c:y}}function StructureDataVisualiser({nodeData:t,restApiUrl:i}){const a=t.downloadByFormat?.cif,[n,y]=reactExports.useState(null),[x,k]=reactExports.useState(!0),[S,E]=reactExports.useState(null),U=reactExports.useCallback(async()=>{if(!a){E("No CIF file available"),k(!1);return}k(!0),E(null);try{const T=await fetch(a);if(!T.ok)throw new Error(`HTTP error: ${T.status}`);const l=await T.text();y(l)}catch(T){E(T.message)}finally{k(!1)}},[a]);reactExports.useEffect(()=>{U()},[U]);const C=t.label==="CifData"?[{format:"cif",label:"CIF"}]:[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}],B=t.derived_properties&&Object.keys(t.derived_properties).length>0,W=t.attributes?.cell?formatLattice(t):null,Y=B?t.derived_properties.dimensionality?.value:W?getVol(t):null,Z=t.attributes?.sites?.length||0;return jsxRuntimeExports$1.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4 space-y-4",children:[x&&jsxRuntimeExports$1.jsx("div",{className:"flex items-center justify-center w-full h-[500px]",children:jsxRuntimeExports$1.jsx(Spinner,{})}),S&&!x&&jsxRuntimeExports$1.jsx("div",{className:"flex flex-col items-center justify-center w-full h-[500px] space-y-2",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:S,onRetry:()=>U()})}),!x&&!S&&n&&jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsxs("div",{className:"w-full h-[500px] relative bg-white rounded-lg shadow-sm overflow-hidden",children:[jsxRuntimeExports$1.jsx("div",{className:"absolute top-4 right-4 z-50",children:jsxRuntimeExports$1.jsx(StructDownloadButton,{aiida_rest_url:i,uuid:t.aiida.uuid,download_formats:C})}),jsxRuntimeExports$1.jsx("div",{className:"w-full h-full",children:jsxRuntimeExports$1.jsx(StructureVisualizer,{cifText:n,initSupercell:[2,2,2]})})]}),B&&jsxRuntimeExports$1.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports$1.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm space-y-1",children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Cell Volume:"})," ",Y?.toFixed(4)," "]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Formula:"})," ",t.derived_properties.formula]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Dimensionality:"})," ",t.derived_properties.dimensionality?.description||"N/A"]})]}),W&&jsxRuntimeExports$1.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm space-y-1",children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Lattice a:"})," ",W.a.toFixed(4)," "]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Lattice b:"})," ",W.b.toFixed(4)," "]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Lattice c:"})," ",W.c.toFixed(4)," "]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Number of Sites:"})," ",Z]})]})]})]})]})}function SimplePlot({data:t,layout:i,config:a={},style:n={width:"100%",height:400}}){const y=reactExports.useRef(null),x=reactExports.useMemo(()=>t,[JSON.stringify(t)]),k=reactExports.useMemo(()=>i,[JSON.stringify(i)]),S=reactExports.useMemo(()=>a,[JSON.stringify(a)]);return reactExports.useEffect(()=>{const E=y.current;if(!E)return;Plotly.newPlot(E,x,k,{responsive:!0,...S});const U=()=>{E&&Plotly.Plots.resize(E)};return window.addEventListener("resize",U),()=>{window.removeEventListener("resize",U),E&&Plotly.purge(E)}},[x,k,S]),jsxRuntimeExports$1.jsx("div",{ref:y,style:n})}function getRadialFunctionsTraces(t){return!t||!t.atomic_wave_functions||!t.radial_grid?[]:t.atomic_wave_functions.map(a=>{const n=a.label??"",y=a.angular_momentum!=null?`(=${a.angular_momentum}`:"",x=a.occupation!=null?`, occ=${a.occupation})`:a.angular_momentum!=null?")":"";return{x:t.radial_grid,y:a.radial_function,type:"scatter",mode:"lines",name:`${n} ${y}${x}`}})}function getBetaProjectorsTraces(t){return!t||!t.beta_projectors||!t.radial_grid?[]:t.beta_projectors.map(a=>{const n=a.label??"",y=a.angular_momentum!=null?`(=${a.angular_momentum}`:"",x=a.ultrasoft_cutoff_radius!=null?`, cutoff=${a.ultrasoft_cutoff_radius})`:a.angular_momentum!=null?")":"";return{x:t.radial_grid,y:a.radial_function,type:"scatter",mode:"lines",name:`${n} ${y}${x}`}})}function getChargeDensitiesTraces(t){if(!t||!t.radial_grid)return[];const i={x:t.radial_grid,y:t.total_charge_density,type:"scatter",mode:"lines",name:"Valence Pseudocharge density"};return[{x:t.radial_grid,y:t.core_charge_density,type:"scatter",mode:"lines",name:"Core Pseudocharge density"},i].filter(n=>Array.isArray(n.y)&&n.y.length>0)}function UpfDataVisualiser({nodeData:t}){const[i,a]=reactExports.useState(!0),[n,y]=reactExports.useState(null),[x,k]=reactExports.useState(null),S=t.downloadByFormat?.json,E=reactExports.useMemo(()=>getRadialFunctionsTraces(x),[x]),U=reactExports.useMemo(()=>getBetaProjectorsTraces(x),[x]),C=reactExports.useMemo(()=>getChargeDensitiesTraces(x),[x]),B=reactExports.useCallback(async()=>{if(!S){y("No JSON path available"),a(!1);return}a(!0),y(null);try{const Z=await fetch(S);if(!Z.ok)throw new Error(`HTTP ${Z.status}`);const T=await Z.json();k(T.pseudo_potential)}catch(Z){console.error("Failed to fetch UPF JSON:",Z),y(Z.message||"Failed to load UPF data")}finally{a(!1)}},[S]);if(reactExports.useEffect(()=>{B()},[B]),i)return jsxRuntimeExports$1.jsx("div",{className:"w-full min-h-[450px] flex items-center justify-center",children:jsxRuntimeExports$1.jsx(Spinner,{})});if(n)return jsxRuntimeExports$1.jsx("div",{className:"w-full min-h-[450px] flex items-center justify-center",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:n,onRetry:B})});if(!x)return null;const{header:W,radial_grid:Y}=x;return jsxRuntimeExports$1.jsxs("div",{className:"w-full mx-auto p-4 space-y-6",children:[jsxRuntimeExports$1.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm space-y-1",children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Element:"})," ",W?.element||"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Valence Electrons:"})," ",W?.z_valence??"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Pseudopotential Type:"})," ",W?.pseudo_type||"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("strong",{children:"Functional:"})," ",W?.functional||"N/A"]})]}),jsxRuntimeExports$1.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports$1.jsx("h3",{className:"font-semibold mb-2",children:"Orbital radial functions"}),jsxRuntimeExports$1.jsx("div",{className:"w-full max-w-full",style:{boxSizing:"border-box"},children:jsxRuntimeExports$1.jsx(SimplePlot,{data:E,layout:{autosize:!0,height:400,margin:{t:20,b:40,l:50,r:20},xaxis:{title:{text:"Radius (Bohr)"},range:[0,20]},yaxis:{title:{text:"(r)"}},legend:{x:1,y:1,xanchor:"right",yanchor:"top",bgcolor:"rgba(255,255,255,0.8)",bordercolor:"#ccc",borderwidth:1}},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:400}})})]}),jsxRuntimeExports$1.jsx("h3",{className:"font-semibold mb-2",children:"Beta projectors"}),jsxRuntimeExports$1.jsx("div",{className:"w-full max-w-full",style:{boxSizing:"border-box"},children:jsxRuntimeExports$1.jsx(SimplePlot,{data:U,layout:{autosize:!0,height:400,margin:{t:20,b:40,l:50,r:20},xaxis:{title:{text:"Radius (Bohr)"}},yaxis:{title:{text:"(r)"}},legend:{x:1,y:1,xanchor:"right",yanchor:"top",bgcolor:"rgba(255,255,255,0.8)",bordercolor:"#ccc",borderwidth:1}},config:{responsive:!0}})}),jsxRuntimeExports$1.jsx("h3",{className:"font-semibold mb-2",children:"Charge densities"}),jsxRuntimeExports$1.jsx("div",{className:"w-full max-w-full",style:{boxSizing:"border-box"},children:jsxRuntimeExports$1.jsx(SimplePlot,{data:C,layout:{autosize:!0,height:400,margin:{t:20,b:40,l:50,r:20},xaxis:{title:{text:"Radius (Bohr)"},range:[0,5]},yaxis:{title:{text:"(r)"}},legend:{x:1,y:1,xanchor:"right",yanchor:"top",bgcolor:"rgba(255,255,255,0.8)",bordercolor:"#ccc",borderwidth:1}},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"100%"}})})]})}const RICH_TYPES={StructureData:StructureDataVisualiser,CifData:StructureDataVisualiser,BandsData:BandsDataVisualiser,UpfData:UpfDataVisualiser};function geRichVisualiser(t,i){if(!i||!i.data)return null;const{label:a,aiida:n}=i.data,y=RICH_TYPES[a];return y?jsxRuntimeExports$1.jsx(y,{nodeData:i.data,restApiUrl:t},n?.uuid):null}function VisualiserPane({restApiUrl:t,selectedNode:i,userData:a,downloadFormats:n}){let y=geRichVisualiser(t,i);const[x,k]=reactExports.useState(y?"rich":"raw");if(reactExports.useEffect(()=>{k(y?"rich":"raw")},[i]),!i)return jsxRuntimeExports$1.jsx("div",{className:"w-full h-full p-4",children:jsxRuntimeExports$1.jsx("p",{children:"Click a node to see top level details. Double click to traverse the graph."})});const S=!y;return jsxRuntimeExports$1.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[jsxRuntimeExports$1.jsx("div",{className:"px-4 py-3 md:py-2 bg-slate-50",children:jsxRuntimeExports$1.jsx(FormattedMetaData,{nodeData:i.data,userData:a})}),jsxRuntimeExports$1.jsxs("div",{className:"flex border-y bg-gray-100",children:[jsxRuntimeExports$1.jsx("button",{disabled:S,className:`px-4 py-2 ${x==="rich"?"border-b-2 border-blue-500 font-semibold":S?"text-gray-400 cursor-not-allowed":""}`,onClick:()=>!S&&k("rich"),children:"Rich View"}),jsxRuntimeExports$1.jsx("button",{className:`px-4 py-2 ${x==="raw"?"border-b-2 border-blue-500 font-semibold":""}`,onClick:()=>k("raw"),children:"Raw View"})]}),jsxRuntimeExports$1.jsxs("div",{className:"flex-1 overflow-auto",children:[x==="rich"&&y,x==="raw"&&jsxRuntimeExports$1.jsx(RawDataVisualiser,{nodeData:i.data,downloadFormats:n})]})]})}function TopControls({onFindNode:t,onGetLinkCounts:i,onHelp:a,isLoading:n,disableGetCounts:y=!1}){return jsxRuntimeExports$1.jsxs("div",{className:"w-full shadow-md bg-slate-50 border-b px-4 py-2 flex justify-between items-center z-50",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports$1.jsxs("button",{className:"group px-3 py-1 rounded-md bg-slate-100 text-blue-700 flex items-center gap-1 hover:bg-slate-200 transition-colors",onClick:t,children:[jsxRuntimeExports$1.jsx(GroupIcon,{className:"w-5 h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Find Node"})]}),jsxRuntimeExports$1.jsxs("button",{className:"group px-3 py-1 rounded-md bg-slate-100 text-blue-700 flex items-center gap-1 hover:bg-slate-200 transition-colors",onClick:i,disabled:y||n,children:[jsxRuntimeExports$1.jsx(LinksIcon,{className:"w-5 h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Get Link Counts"})]})]}),jsxRuntimeExports$1.jsxs("button",{className:"group px-3 py-1 rounded-md bg-slate-100 text-blue-700 flex items-center gap-1 hover:bg-slate-200 transition-colors",onClick:a,children:[jsxRuntimeExports$1.jsx(QuestionIcon,{className:"w-5 h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Help"})]})]})}function useRootNode(t,i,a){const n=t!==void 0,[y,x]=reactExports.useState(i),k=n?t:y,S=reactExports.useCallback(E=>{n||x(E),a(E)},[n,a]);return[k,S]}function AiidaExplorer(t){return jsxRuntimeExports$1.jsx(AiidaExplorerInner,{...t},t.restApiUrl)}function AiidaExplorerInner({restApiUrl:t,rootNode:i,defaultRootNode:a="",onRootNodeChange:n=()=>{},debugMode:y=!1}){const[x,k]=useRootNode(i,a,n),S=reactExports.useRef(null),E=reactExports.useRef(null),U=useMediaQuery("(min-width: 1000px)"),[C,B]=reactExports.useState(!1),[W,Y]=reactExports.useState(null),[Z,T]=reactExports.useState(null),[l,f]=reactExports.useState(null),[D,I]=reactExports.useState([]),[V,K]=reactExports.useState([]),[A,L]=reactExports.useState([]),[G,ee]=reactExports.useState(null),[ae,Se]=reactExports.useState({}),[$e,qe]=reactExports.useState("groupsview"),Pe=10,Ve=reactExports.useRef(!0);reactExports.useEffect(()=>{Ve.current&&!x?(Ve.current=!1,qe("groupsview")):qe(x?null:"groupsview")},[x]),reactExports.useEffect(()=>{fetchUsers(t).then(T)},[t]),reactExports.useEffect(()=>{fetchDownloadFormats(t).then(f)},[t]),reactExports.useEffect(()=>{if(!x)return;let rt=!0;async function ze(){B(!0),Y(null);try{const{nodes:lt,edges:bt}=await fetchGraphByNodeId(t,x);if(!rt)return;const At=lt.map(Yt=>({...Yt,data:{...Yt.data,...ae[Yt.id]||{}}}));I(At),K(bt);const Vt=At.find(Yt=>Yt.id===x);if(Vt){const Yt=await Ie(Vt);ee(Yt)}A[A.length-1]?.id!==Vt?.id&&L(Yt=>[...Yt,Vt].slice(-Pe))}catch(lt){console.error("Failed to load graph:",lt),rt&&Y(lt.message||"Failed to load node data")}finally{rt&&B(!1)}}return ze(),()=>{rt=!1}},[x,t,l,Z]);const Ie=async rt=>{const ze=await smartFetchData(t,rt,ae,l);return Se(lt=>({...lt,[rt.id]:{...lt[rt.id]||{},...ze.data}})),ze},Xe=async rt=>{const ze=await Ie(rt);ee(ze),I(lt=>lt.map(bt=>bt.id===rt.id?{...bt,data:{...bt.data,...ze.data}}:bt))},et=async rt=>{if(!C){B(!0);try{k(rt.id)}finally{B(!1)}}},tt=async(rt,ze)=>{L(lt=>lt.slice(0,ze+1)),k(rt.id)};return jsxRuntimeExports$1.jsxs(OverlayProvider,{ref:S,className:"flex flex-col relative h-full min-h-[300px] border rounded-md bg-white",children:[jsxRuntimeExports$1.jsxs(Overlay,{active:$e,onClose:()=>qe(null),title:$e==="groupsview"?"Find node":$e==="typesview"?"Node Types":$e==="helpview"?"Help":"",container:S.current,children:[$e==="groupsview"&&jsxRuntimeExports$1.jsx(GroupsViewer,{restApiUrl:t,setRootNodeId:k}),$e==="helpview"&&jsxRuntimeExports$1.jsx(HelpViewer,{})]}),jsxRuntimeExports$1.jsxs(PanelGroup,{direction:U?"horizontal":"vertical",className:"flex-1 min-h-0 overflow-hidden",children:[jsxRuntimeExports$1.jsxs(Panel$1,{className:"flex flex-col min-h-0 relative",defaultSize:50,minSize:10,children:[C&&jsxRuntimeExports$1.jsx("div",{className:"absolute bottom-2 right-2 z-50",children:jsxRuntimeExports$1.jsx(Spinner,{})}),W&&jsxRuntimeExports$1.jsx("div",{className:"absolute bottom-2 right-2 z-50",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:`Failed to find node UUID: ${x}`})}),jsxRuntimeExports$1.jsx(TopControls,{onFindNode:()=>qe("groupsview"),onGetLinkCounts:async()=>{if(!(C||D.length===0)){B(!0);try{const rt=await fetchLinkCounts(t,D);I(rt)}finally{B(!1)}}},onHelp:()=>qe("helpview"),isLoading:C,disableGetCounts:D.length===0}),jsxRuntimeExports$1.jsx("div",{className:"flex-1 min-h-0",children:jsxRuntimeExports$1.jsx(FlowChart,{className:"flex-1 min-h-0",nodes:D,edges:V,setNodes:I,setEdges:K,selectedNode:G,onNodeSelect:Xe,onNodeDoubleSelect:et,onInit:rt=>{E.current=rt}})})]}),jsxRuntimeExports$1.jsx(PanelResizeHandle,{className:`group flex items-center justify-center bg-slate-200 border-x ${U?"w-1.5 cursor-col-resize":"h-1.5 cursor-row-resize"}`,children:jsxRuntimeExports$1.jsx("div",{className:`bg-gray-700 rounded group-hover:scale-125 ${U?"w-0.5 h-6":"w-6 h-0.5"}`})}),jsxRuntimeExports$1.jsxs(Panel$1,{className:"flex-1 flex flex-col min-h-0",children:[y&&jsxRuntimeExports$1.jsx("div",{className:"hidden md:flex h-1/4 border-b border-gray-300 overflow-y-auto",children:jsxRuntimeExports$1.jsx(DebugPane,{selectedNode:G})}),jsxRuntimeExports$1.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:jsxRuntimeExports$1.jsx(VisualiserPane,{restApiUrl:t,selectedNode:G,userData:Z,downloadFormats:l})})]})]}),jsxRuntimeExports$1.jsx("div",{className:"flex-none overflow-x-auto",children:jsxRuntimeExports$1.jsx(Breadcrumbs,{trail:A,onClick:tt,maxItems:Pe})})]})}const DEFAULT_REST_URL="https://aiida.materialscloud.org/2dtopo/api/v4";function App(){const[t,i]=useSearchParams(),a=t.get("restApiUrl")??DEFAULT_REST_URL,n=t.get("rootNode")??"",[y,x]=reactExports.useState(a);reactExports.useEffect(()=>{x(a)},[a]);const k=reactExports.useCallback(E=>{const U=new URLSearchParams(t);E?U.set("rootNode",E):U.delete("rootNode"),i(U,{replace:!0})},[t,i]),S=()=>{const E=new URLSearchParams(t);E.set("restApiUrl",y.trim()||DEFAULT_REST_URL),E.delete("rootNode"),i(E,{replace:!0})};return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col items-center justify-center h-screen space-y-4",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex items-center space-x-2 w-[95vw]",children:[jsxRuntimeExports$1.jsx("label",{htmlFor:"aiida-rest-url",className:"text-gray-800 font-medium whitespace-nowrap",children:"AiiDA REST endpoint:"}),jsxRuntimeExports$1.jsx("input",{id:"aiida-rest-url",type:"text",value:y,onChange:E=>x(E.target.value),placeholder:"Enter AiiDA REST API URL",className:"flex-grow p-2 border border-gray-400 rounded",onKeyDown:E=>E.key==="Enter"&&S()}),jsxRuntimeExports$1.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Load"})]}),jsxRuntimeExports$1.jsx("div",{className:"w-[95vw] h-[85vh] bg-amber-600",children:jsxRuntimeExports$1.jsx(AiidaExplorer,{restApiUrl:a,rootNode:n,onRootNodeChange:k})})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports$1.jsx(React.StrictMode,{children:jsxRuntimeExports$1.jsx(HashRouter,{children:jsxRuntimeExports$1.jsx(App,{})})}));
